var Mpe=Object.defineProperty;var Upe=(e,t,r)=>t in e?Mpe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var oB=(e,t,r)=>Upe(e,typeof t!="symbol"?t+"":t,r);function Hpe(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in e)){const i=Object.getOwnPropertyDescriptor(a,n);i&&Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var l1t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Qpe(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(r,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}),r}var lB={exports:{}},Jy={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tQ;function zpe(){if(tQ)return Jy;tQ=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,n,i){var o=null;if(i!==void 0&&(o=""+i),n.key!==void 0&&(o=""+n.key),"key"in n){i={};for(var l in n)l!=="key"&&(i[l]=n[l])}else i=n;return n=i.ref,{$$typeof:e,type:a,key:o,ref:n!==void 0?n:null,props:i}}return Jy.Fragment=t,Jy.jsx=r,Jy.jsxs=r,Jy}var rQ;function $pe(){return rQ||(rQ=1,lB.exports=zpe()),lB.exports}var s=$pe(),cB={exports:{}},aa={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aQ;function Vpe(){if(aQ)return aa;aQ=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.iterator;function A(U){return U===null||typeof U!="object"?null:(U=f&&U[f]||U["@@iterator"],typeof U=="function"?U:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function v(U,Y,P){this.props=U,this.context=Y,this.refs=x,this.updater=P||m}v.prototype.isReactComponent={},v.prototype.setState=function(U,Y){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Y,"setState")},v.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function y(){}y.prototype=v.prototype;function N(U,Y,P){this.props=U,this.context=Y,this.refs=x,this.updater=P||m}var E=N.prototype=new y;E.constructor=N,g(E,v.prototype),E.isPureReactComponent=!0;var B=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function j(U,Y,P,D,W,J){return P=J.ref,{$$typeof:e,type:U,key:Y,ref:P!==void 0?P:null,props:J}}function k(U,Y){return j(U.type,Y,void 0,void 0,void 0,U.props)}function T(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function L(U){var Y={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(P){return Y[P]})}var F=/\/+/g;function S(U,Y){return typeof U=="object"&&U!==null&&U.key!=null?L(""+U.key):Y.toString(36)}function M(){}function H(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(M,M):(U.status="pending",U.then(function(Y){U.status==="pending"&&(U.status="fulfilled",U.value=Y)},function(Y){U.status==="pending"&&(U.status="rejected",U.reason=Y)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function K(U,Y,P,D,W){var J=typeof U;(J==="undefined"||J==="boolean")&&(U=null);var ce=!1;if(U===null)ce=!0;else switch(J){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(U.$$typeof){case e:case t:ce=!0;break;case u:return ce=U._init,K(ce(U._payload),Y,P,D,W)}}if(ce)return W=W(U),ce=D===""?"."+S(U,0):D,B(W)?(P="",ce!=null&&(P=ce.replace(F,"$&/")+"/"),K(W,Y,P,"",function(de){return de})):W!=null&&(T(W)&&(W=k(W,P+(W.key==null||U&&U.key===W.key?"":(""+W.key).replace(F,"$&/")+"/")+ce)),Y.push(W)),1;ce=0;var ie=D===""?".":D+":";if(B(U))for(var re=0;re<U.length;re++)D=U[re],J=ie+S(D,re),ce+=K(D,Y,P,J,W);else if(re=A(U),typeof re=="function")for(U=re.call(U),re=0;!(D=U.next()).done;)D=D.value,J=ie+S(D,re++),ce+=K(D,Y,P,J,W);else if(J==="object"){if(typeof U.then=="function")return K(H(U),Y,P,D,W);throw Y=String(U),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return ce}function Q(U,Y,P){if(U==null)return U;var D=[],W=0;return K(U,D,"","",function(J){return Y.call(P,J,W++)}),D}function G(U){if(U._status===-1){var Y=U._result;Y=Y(),Y.then(function(P){(U._status===0||U._status===-1)&&(U._status=1,U._result=P)},function(P){(U._status===0||U._status===-1)&&(U._status=2,U._result=P)}),U._status===-1&&(U._status=0,U._result=Y)}if(U._status===1)return U._result.default;throw U._result}var X=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function Z(){}return aa.Children={map:Q,forEach:function(U,Y,P){Q(U,function(){Y.apply(this,arguments)},P)},count:function(U){var Y=0;return Q(U,function(){Y++}),Y},toArray:function(U){return Q(U,function(Y){return Y})||[]},only:function(U){if(!T(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},aa.Component=v,aa.Fragment=r,aa.Profiler=n,aa.PureComponent=N,aa.StrictMode=a,aa.Suspense=c,aa.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,aa.__COMPILER_RUNTIME={__proto__:null,c:function(U){return _.H.useMemoCache(U)}},aa.cache=function(U){return function(){return U.apply(null,arguments)}},aa.cloneElement=function(U,Y,P){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var D=g({},U.props),W=U.key,J=void 0;if(Y!=null)for(ce in Y.ref!==void 0&&(J=void 0),Y.key!==void 0&&(W=""+Y.key),Y)!I.call(Y,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&Y.ref===void 0||(D[ce]=Y[ce]);var ce=arguments.length-2;if(ce===1)D.children=P;else if(1<ce){for(var ie=Array(ce),re=0;re<ce;re++)ie[re]=arguments[re+2];D.children=ie}return j(U.type,W,void 0,void 0,J,D)},aa.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:i,_context:U},U},aa.createElement=function(U,Y,P){var D,W={},J=null;if(Y!=null)for(D in Y.key!==void 0&&(J=""+Y.key),Y)I.call(Y,D)&&D!=="key"&&D!=="__self"&&D!=="__source"&&(W[D]=Y[D]);var ce=arguments.length-2;if(ce===1)W.children=P;else if(1<ce){for(var ie=Array(ce),re=0;re<ce;re++)ie[re]=arguments[re+2];W.children=ie}if(U&&U.defaultProps)for(D in ce=U.defaultProps,ce)W[D]===void 0&&(W[D]=ce[D]);return j(U,J,void 0,void 0,null,W)},aa.createRef=function(){return{current:null}},aa.forwardRef=function(U){return{$$typeof:l,render:U}},aa.isValidElement=T,aa.lazy=function(U){return{$$typeof:u,_payload:{_status:-1,_result:U},_init:G}},aa.memo=function(U,Y){return{$$typeof:d,type:U,compare:Y===void 0?null:Y}},aa.startTransition=function(U){var Y=_.T,P={};_.T=P;try{var D=U(),W=_.S;W!==null&&W(P,D),typeof D=="object"&&D!==null&&typeof D.then=="function"&&D.then(Z,X)}catch(J){X(J)}finally{_.T=Y}},aa.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},aa.use=function(U){return _.H.use(U)},aa.useActionState=function(U,Y,P){return _.H.useActionState(U,Y,P)},aa.useCallback=function(U,Y){return _.H.useCallback(U,Y)},aa.useContext=function(U){return _.H.useContext(U)},aa.useDebugValue=function(){},aa.useDeferredValue=function(U,Y){return _.H.useDeferredValue(U,Y)},aa.useEffect=function(U,Y,P){var D=_.H;if(typeof P=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return D.useEffect(U,Y)},aa.useId=function(){return _.H.useId()},aa.useImperativeHandle=function(U,Y,P){return _.H.useImperativeHandle(U,Y,P)},aa.useInsertionEffect=function(U,Y){return _.H.useInsertionEffect(U,Y)},aa.useLayoutEffect=function(U,Y){return _.H.useLayoutEffect(U,Y)},aa.useMemo=function(U,Y){return _.H.useMemo(U,Y)},aa.useOptimistic=function(U,Y){return _.H.useOptimistic(U,Y)},aa.useReducer=function(U,Y,P){return _.H.useReducer(U,Y,P)},aa.useRef=function(U){return _.H.useRef(U)},aa.useState=function(U){return _.H.useState(U)},aa.useSyncExternalStore=function(U,Y,P){return _.H.useSyncExternalStore(U,Y,P)},aa.useTransition=function(){return _.H.useTransition()},aa.version="19.1.1",aa}var nQ;function k1(){return nQ||(nQ=1,cB.exports=Vpe()),cB.exports}var w=k1();const ft=Kl(w),Gpe=Hpe({__proto__:null,default:ft},[w]);var dB={exports:{}},Zy={},uB={exports:{}},fB={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sQ;function qpe(){return sQ||(sQ=1,function(e){function t(Q,G){var X=Q.length;Q.push(G);e:for(;0<X;){var Z=X-1>>>1,U=Q[Z];if(0<n(U,G))Q[Z]=G,Q[X]=U,X=Z;else break e}}function r(Q){return Q.length===0?null:Q[0]}function a(Q){if(Q.length===0)return null;var G=Q[0],X=Q.pop();if(X!==G){Q[0]=X;e:for(var Z=0,U=Q.length,Y=U>>>1;Z<Y;){var P=2*(Z+1)-1,D=Q[P],W=P+1,J=Q[W];if(0>n(D,X))W<U&&0>n(J,D)?(Q[Z]=J,Q[W]=X,Z=W):(Q[Z]=D,Q[P]=X,Z=P);else if(W<U&&0>n(J,X))Q[Z]=J,Q[W]=X,Z=W;else break e}}return G}function n(Q,G){var X=Q.sortIndex-G.sortIndex;return X!==0?X:Q.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,f=null,A=3,m=!1,g=!1,x=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function B(Q){for(var G=r(d);G!==null;){if(G.callback===null)a(d);else if(G.startTime<=Q)a(d),G.sortIndex=G.expirationTime,t(c,G);else break;G=r(d)}}function _(Q){if(x=!1,B(Q),!g)if(r(c)!==null)g=!0,I||(I=!0,S());else{var G=r(d);G!==null&&K(_,G.startTime-Q)}}var I=!1,j=-1,k=5,T=-1;function L(){return v?!0:!(e.unstable_now()-T<k)}function F(){if(v=!1,I){var Q=e.unstable_now();T=Q;var G=!0;try{e:{g=!1,x&&(x=!1,N(j),j=-1),m=!0;var X=A;try{t:{for(B(Q),f=r(c);f!==null&&!(f.expirationTime>Q&&L());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,A=f.priorityLevel;var U=Z(f.expirationTime<=Q);if(Q=e.unstable_now(),typeof U=="function"){f.callback=U,B(Q),G=!0;break t}f===r(c)&&a(c),B(Q)}else a(c);f=r(c)}if(f!==null)G=!0;else{var Y=r(d);Y!==null&&K(_,Y.startTime-Q),G=!1}}break e}finally{f=null,A=X,m=!1}G=void 0}}finally{G?S():I=!1}}}var S;if(typeof E=="function")S=function(){E(F)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,H=M.port2;M.port1.onmessage=F,S=function(){H.postMessage(null)}}else S=function(){y(F,0)};function K(Q,G){j=y(function(){Q(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_next=function(Q){switch(A){case 1:case 2:case 3:var G=3;break;default:G=A}var X=A;A=G;try{return Q()}finally{A=X}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(Q,G){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var X=A;A=Q;try{return G()}finally{A=X}},e.unstable_scheduleCallback=function(Q,G,X){var Z=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Z+X:Z):X=Z,Q){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=X+U,Q={id:u++,callback:G,priorityLevel:Q,startTime:X,expirationTime:U,sortIndex:-1},X>Z?(Q.sortIndex=X,t(d,Q),r(c)===null&&Q===r(d)&&(x?(N(j),j=-1):x=!0,K(_,X-Z))):(Q.sortIndex=U,t(c,Q),g||m||(g=!0,I||(I=!0,S()))),Q},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(Q){var G=A;return function(){var X=A;A=G;try{return Q.apply(this,arguments)}finally{A=X}}}}(fB)),fB}var iQ;function Kpe(){return iQ||(iQ=1,uB.exports=qpe()),uB.exports}var hB={exports:{}},Yo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oQ;function Wpe(){if(oQ)return Yo;oQ=1;var e=k1();function t(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)d+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},n=Symbol.for("react.portal");function i(c,d,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:f==null?null:""+f,children:c,containerInfo:d,implementation:u}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Yo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Yo.createPortal=function(c,d){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return i(c,d,null,u)},Yo.flushSync=function(c){var d=o.T,u=a.p;try{if(o.T=null,a.p=2,c)return c()}finally{o.T=d,a.p=u,a.d.f()}},Yo.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,a.d.C(c,d))},Yo.prefetchDNS=function(c){typeof c=="string"&&a.d.D(c)},Yo.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var u=d.as,f=l(u,d.crossOrigin),A=typeof d.integrity=="string"?d.integrity:void 0,m=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;u==="style"?a.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:f,integrity:A,fetchPriority:m}):u==="script"&&a.d.X(c,{crossOrigin:f,integrity:A,fetchPriority:m,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Yo.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var u=l(d.as,d.crossOrigin);a.d.M(c,{crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&a.d.M(c)},Yo.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var u=d.as,f=l(u,d.crossOrigin);a.d.L(c,u,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Yo.preloadModule=function(c,d){if(typeof c=="string")if(d){var u=l(d.as,d.crossOrigin);a.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else a.d.m(c)},Yo.requestFormReset=function(c){a.d.r(c)},Yo.unstable_batchedUpdates=function(c,d){return c(d)},Yo.useFormState=function(c,d,u){return o.H.useFormState(c,d,u)},Yo.useFormStatus=function(){return o.H.useHostTransitionStatus()},Yo.version="19.1.1",Yo}var lQ;function xee(){if(lQ)return hB.exports;lQ=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),hB.exports=Wpe(),hB.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cQ;function Xpe(){if(cQ)return Zy;cQ=1;var e=Kpe(),t=k1(),r=xee();function a(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function i(h){var p=h,b=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,(p.flags&4098)!==0&&(b=p.return),h=p.return;while(h)}return p.tag===3?b:null}function o(h){if(h.tag===13){var p=h.memoizedState;if(p===null&&(h=h.alternate,h!==null&&(p=h.memoizedState)),p!==null)return p.dehydrated}return null}function l(h){if(i(h)!==h)throw Error(a(188))}function c(h){var p=h.alternate;if(!p){if(p=i(h),p===null)throw Error(a(188));return p!==h?null:h}for(var b=h,C=p;;){var z=b.return;if(z===null)break;var ee=z.alternate;if(ee===null){if(C=z.return,C!==null){b=C;continue}break}if(z.child===ee.child){for(ee=z.child;ee;){if(ee===b)return l(z),h;if(ee===C)return l(z),p;ee=ee.sibling}throw Error(a(188))}if(b.return!==C.return)b=z,C=ee;else{for(var ye=!1,De=z.child;De;){if(De===b){ye=!0,b=z,C=ee;break}if(De===C){ye=!0,C=z,b=ee;break}De=De.sibling}if(!ye){for(De=ee.child;De;){if(De===b){ye=!0,b=ee,C=z;break}if(De===C){ye=!0,C=ee,b=z;break}De=De.sibling}if(!ye)throw Error(a(189))}}if(b.alternate!==C)throw Error(a(190))}if(b.tag!==3)throw Error(a(188));return b.stateNode.current===b?h:p}function d(h){var p=h.tag;if(p===5||p===26||p===27||p===6)return h;for(h=h.child;h!==null;){if(p=d(h),p!==null)return p;h=h.sibling}return null}var u=Object.assign,f=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),E=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function S(h){return h===null||typeof h!="object"?null:(h=F&&h[F]||h["@@iterator"],typeof h=="function"?h:null)}var M=Symbol.for("react.client.reference");function H(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===M?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case g:return"Fragment";case v:return"Profiler";case x:return"StrictMode";case _:return"Suspense";case I:return"SuspenseList";case T:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case m:return"Portal";case E:return(h.displayName||"Context")+".Provider";case N:return(h._context.displayName||"Context")+".Consumer";case B:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case j:return p=h.displayName||null,p!==null?p:H(h.type)||"Memo";case k:p=h._payload,h=h._init;try{return H(h(p))}catch{}}return null}var K=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},Z=[],U=-1;function Y(h){return{current:h}}function P(h){0>U||(h.current=Z[U],Z[U]=null,U--)}function D(h,p){U++,Z[U]=h.current,h.current=p}var W=Y(null),J=Y(null),ce=Y(null),ie=Y(null);function re(h,p){switch(D(ce,p),D(J,h),D(W,null),p.nodeType){case 9:case 11:h=(h=p.documentElement)&&(h=h.namespaceURI)?_H(h):0;break;default:if(h=p.tagName,p=p.namespaceURI)p=_H(p),h=TH(p,h);else switch(h){case"svg":h=1;break;case"math":h=2;break;default:h=0}}P(W),D(W,h)}function de(){P(W),P(J),P(ce)}function oe(h){h.memoizedState!==null&&D(ie,h);var p=W.current,b=TH(p,h.type);p!==b&&(D(J,h),D(W,b))}function be(h){J.current===h&&(P(W),P(J)),ie.current===h&&(P(ie),qy._currentValue=X)}var q=Object.prototype.hasOwnProperty,we=e.unstable_scheduleCallback,Te=e.unstable_cancelCallback,Ee=e.unstable_shouldYield,ue=e.unstable_requestPaint,ge=e.unstable_now,he=e.unstable_getCurrentPriorityLevel,ve=e.unstable_ImmediatePriority,le=e.unstable_UserBlockingPriority,ne=e.unstable_NormalPriority,Ae=e.unstable_LowPriority,pe=e.unstable_IdlePriority,ke=e.log,Le=e.unstable_setDisableYieldValue,qe=null,ze=null;function Re(h){if(typeof ke=="function"&&Le(h),ze&&typeof ze.setStrictMode=="function")try{ze.setStrictMode(qe,h)}catch{}}var We=Math.clz32?Math.clz32:Qe,ct=Math.log,Ze=Math.LN2;function Qe(h){return h>>>=0,h===0?32:31-(ct(h)/Ze|0)|0}var wt=256,ar=4194304;function qt(h){var p=h&42;if(p!==0)return p;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function gr(h,p,b){var C=h.pendingLanes;if(C===0)return 0;var z=0,ee=h.suspendedLanes,ye=h.pingedLanes;h=h.warmLanes;var De=C&134217727;return De!==0?(C=De&~ee,C!==0?z=qt(C):(ye&=De,ye!==0?z=qt(ye):b||(b=De&~h,b!==0&&(z=qt(b))))):(De=C&~ee,De!==0?z=qt(De):ye!==0?z=qt(ye):b||(b=C&~h,b!==0&&(z=qt(b)))),z===0?0:p!==0&&p!==z&&(p&ee)===0&&(ee=z&-z,b=p&-p,ee>=b||ee===32&&(b&4194048)!==0)?p:z}function Pr(h,p){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&p)===0}function yr(h,p){switch(h){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tn(){var h=wt;return wt<<=1,(wt&4194048)===0&&(wt=256),h}function Rr(){var h=ar;return ar<<=1,(ar&62914560)===0&&(ar=4194304),h}function Ha(h){for(var p=[],b=0;31>b;b++)p.push(h);return p}function Rn(h,p){h.pendingLanes|=p,p!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function Lr(h,p,b,C,z,ee){var ye=h.pendingLanes;h.pendingLanes=b,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=b,h.entangledLanes&=b,h.errorRecoveryDisabledLanes&=b,h.shellSuspendCounter=0;var De=h.entanglements,Xe=h.expirationTimes,gt=h.hiddenUpdates;for(b=ye&~b;0<b;){var It=31-We(b),Lt=1<<It;De[It]=0,Xe[It]=-1;var vt=gt[It];if(vt!==null)for(gt[It]=null,It=0;It<vt.length;It++){var bt=vt[It];bt!==null&&(bt.lane&=-536870913)}b&=~Lt}C!==0&&pr(h,C,0),ee!==0&&z===0&&h.tag!==0&&(h.suspendedLanes|=ee&~(ye&~p))}function pr(h,p,b){h.pendingLanes|=p,h.suspendedLanes&=~p;var C=31-We(p);h.entangledLanes|=p,h.entanglements[C]=h.entanglements[C]|1073741824|b&4194090}function Jr(h,p){var b=h.entangledLanes|=p;for(h=h.entanglements;b;){var C=31-We(b),z=1<<C;z&p|h[C]&p&&(h[C]|=p),b&=~z}}function vs(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function Za(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function Ln(){var h=G.p;return h!==0?h:(h=window.event,h===void 0?32:WH(h.type))}function Qs(h,p){var b=G.p;try{return G.p=h,p()}finally{G.p=b}}var tr=Math.random().toString(36).slice(2),va="__reactFiber$"+tr,ca="__reactProps$"+tr,Fa="__reactContainer$"+tr,Xa="__reactEvents$"+tr,en="__reactListeners$"+tr,Se="__reactHandles$"+tr,Ve="__reactResources$"+tr,Me="__reactMarker$"+tr;function He(h){delete h[va],delete h[ca],delete h[Xa],delete h[en],delete h[Se]}function Ne(h){var p=h[va];if(p)return p;for(var b=h.parentNode;b;){if(p=b[Fa]||b[va]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(h=DH(h);h!==null;){if(b=h[va])return b;h=DH(h)}return p}h=b,b=h.parentNode}return null}function xe(h){if(h=h[va]||h[Fa]){var p=h.tag;if(p===5||p===6||p===13||p===26||p===27||p===3)return h}return null}function Fe(h){var p=h.tag;if(p===5||p===26||p===27||p===6)return h.stateNode;throw Error(a(33))}function Ge(h){var p=h[Ve];return p||(p=h[Ve]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function Ue(h){h[Me]=!0}var Ye=new Set,et={};function Nt(h,p){Et(h,p),Et(h+"Capture",p)}function Et(h,p){for(et[h]=p,h=0;h<p.length;h++)Ye.add(p[h])}var zt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dt={},Vt={};function kr(h){return q.call(Vt,h)?!0:q.call(Dt,h)?!1:zt.test(h)?Vt[h]=!0:(Dt[h]=!0,!1)}function ea(h,p,b){if(kr(p))if(b===null)h.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":h.removeAttribute(p);return;case"boolean":var C=p.toLowerCase().slice(0,5);if(C!=="data-"&&C!=="aria-"){h.removeAttribute(p);return}}h.setAttribute(p,""+b)}}function ta(h,p,b){if(b===null)h.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(p);return}h.setAttribute(p,""+b)}}function oa(h,p,b,C){if(C===null)h.removeAttribute(b);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(b);return}h.setAttributeNS(p,b,""+C)}}var bs,Uo;function ys(h){if(bs===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);bs=p&&p[1]||"",Uo=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bs+h+Uo}var fi=!1;function zs(h,p){if(!h||fi)return"";fi=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(p){var Lt=function(){throw Error()};if(Object.defineProperty(Lt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Lt,[])}catch(bt){var vt=bt}Reflect.construct(h,[],Lt)}else{try{Lt.call()}catch(bt){vt=bt}h.call(Lt.prototype)}}else{try{throw Error()}catch(bt){vt=bt}(Lt=h())&&typeof Lt.catch=="function"&&Lt.catch(function(){})}}catch(bt){if(bt&&vt&&typeof bt.stack=="string")return[bt.stack,vt.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var z=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");z&&z.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ee=C.DetermineComponentFrameRoot(),ye=ee[0],De=ee[1];if(ye&&De){var Xe=ye.split(`
`),gt=De.split(`
`);for(z=C=0;C<Xe.length&&!Xe[C].includes("DetermineComponentFrameRoot");)C++;for(;z<gt.length&&!gt[z].includes("DetermineComponentFrameRoot");)z++;if(C===Xe.length||z===gt.length)for(C=Xe.length-1,z=gt.length-1;1<=C&&0<=z&&Xe[C]!==gt[z];)z--;for(;1<=C&&0<=z;C--,z--)if(Xe[C]!==gt[z]){if(C!==1||z!==1)do if(C--,z--,0>z||Xe[C]!==gt[z]){var It=`
`+Xe[C].replace(" at new "," at ");return h.displayName&&It.includes("<anonymous>")&&(It=It.replace("<anonymous>",h.displayName)),It}while(1<=C&&0<=z);break}}}finally{fi=!1,Error.prepareStackTrace=b}return(b=h?h.displayName||h.name:"")?ys(b):""}function Bi(h){switch(h.tag){case 26:case 27:case 5:return ys(h.type);case 16:return ys("Lazy");case 13:return ys("Suspense");case 19:return ys("SuspenseList");case 0:case 15:return zs(h.type,!1);case 11:return zs(h.type.render,!1);case 1:return zs(h.type,!0);case 31:return ys("Activity");default:return""}}function Nn(h){try{var p="";do p+=Bi(h),h=h.return;while(h);return p}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function hi(h){switch(typeof h){case"bigint":case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function jf(h){var p=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function jA(h){var p=jf(h)?"checked":"value",b=Object.getOwnPropertyDescriptor(h.constructor.prototype,p),C=""+h[p];if(!h.hasOwnProperty(p)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var z=b.get,ee=b.set;return Object.defineProperty(h,p,{configurable:!0,get:function(){return z.call(this)},set:function(ye){C=""+ye,ee.call(this,ye)}}),Object.defineProperty(h,p,{enumerable:b.enumerable}),{getValue:function(){return C},setValue:function(ye){C=""+ye},stopTracking:function(){h._valueTracker=null,delete h[p]}}}}function Ed(h){h._valueTracker||(h._valueTracker=jA(h))}function Gh(h){if(!h)return!1;var p=h._valueTracker;if(!p)return!0;var b=p.getValue(),C="";return h&&(C=jf(h)?h.checked?"true":"false":h.value),h=C,h!==b?(p.setValue(h),!0):!1}function Ii(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}var kf=/[\n"\\]/g;function ja(h){return h.replace(kf,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function Oi(h,p,b,C,z,ee,ye,De){h.name="",ye!=null&&typeof ye!="function"&&typeof ye!="symbol"&&typeof ye!="boolean"?h.type=ye:h.removeAttribute("type"),p!=null?ye==="number"?(p===0&&h.value===""||h.value!=p)&&(h.value=""+hi(p)):h.value!==""+hi(p)&&(h.value=""+hi(p)):ye!=="submit"&&ye!=="reset"||h.removeAttribute("value"),p!=null?jd(h,ye,hi(p)):b!=null?jd(h,ye,hi(b)):C!=null&&h.removeAttribute("value"),z==null&&ee!=null&&(h.defaultChecked=!!ee),z!=null&&(h.checked=z&&typeof z!="function"&&typeof z!="symbol"),De!=null&&typeof De!="function"&&typeof De!="symbol"&&typeof De!="boolean"?h.name=""+hi(De):h.removeAttribute("name")}function Cd(h,p,b,C,z,ee,ye,De){if(ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"&&(h.type=ee),p!=null||b!=null){if(!(ee!=="submit"&&ee!=="reset"||p!=null))return;b=b!=null?""+hi(b):"",p=p!=null?""+hi(p):b,De||p===h.value||(h.value=p),h.defaultValue=p}C=C??z,C=typeof C!="function"&&typeof C!="symbol"&&!!C,h.checked=De?h.checked:!!C,h.defaultChecked=!!C,ye!=null&&typeof ye!="function"&&typeof ye!="symbol"&&typeof ye!="boolean"&&(h.name=ye)}function jd(h,p,b){p==="number"&&Ii(h.ownerDocument)===h||h.defaultValue===""+b||(h.defaultValue=""+b)}function Xl(h,p,b,C){if(h=h.options,p){p={};for(var z=0;z<b.length;z++)p["$"+b[z]]=!0;for(b=0;b<h.length;b++)z=p.hasOwnProperty("$"+h[b].value),h[b].selected!==z&&(h[b].selected=z),z&&C&&(h[b].defaultSelected=!0)}else{for(b=""+hi(b),p=null,z=0;z<h.length;z++){if(h[z].value===b){h[z].selected=!0,C&&(h[z].defaultSelected=!0);return}p!==null||h[z].disabled||(p=h[z])}p!==null&&(p.selected=!0)}}function Qa(h,p,b){if(p!=null&&(p=""+hi(p),p!==h.value&&(h.value=p),b==null)){h.defaultValue!==p&&(h.defaultValue=p);return}h.defaultValue=b!=null?""+hi(b):""}function kd(h,p,b,C){if(p==null){if(C!=null){if(b!=null)throw Error(a(92));if(K(C)){if(1<C.length)throw Error(a(93));C=C[0]}b=C}b==null&&(b=""),p=b}b=hi(p),h.defaultValue=b,C=h.textContent,C===b&&C!==""&&C!==null&&(h.value=C)}function Ho(h,p){if(p){var b=h.firstChild;if(b&&b===h.lastChild&&b.nodeType===3){b.nodeValue=p;return}}h.textContent=p}var Dc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kA(h,p,b){var C=p.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?C?h.setProperty(p,""):p==="float"?h.cssFloat="":h[p]="":C?h.setProperty(p,b):typeof b!="number"||b===0||Dc.has(p)?p==="float"?h.cssFloat=b:h[p]=(""+b).trim():h[p]=b+"px"}function qh(h,p,b){if(p!=null&&typeof p!="object")throw Error(a(62));if(h=h.style,b!=null){for(var C in b)!b.hasOwnProperty(C)||p!=null&&p.hasOwnProperty(C)||(C.indexOf("--")===0?h.setProperty(C,""):C==="float"?h.cssFloat="":h[C]="");for(var z in p)C=p[z],p.hasOwnProperty(z)&&b[z]!==C&&kA(h,z,C)}else for(var ee in p)p.hasOwnProperty(ee)&&kA(h,ee,p[ee])}function Kh(h){if(h.indexOf("-")===-1)return!1;switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pc(h){return Sf.test(""+h)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":h}var Yl=null;function hn(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Rc=null,Jl=null;function Tr(h){var p=xe(h);if(p&&(h=p.stateNode)){var b=h[ca]||null;e:switch(h=p.stateNode,p.type){case"input":if(Oi(h,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),p=b.name,b.type==="radio"&&p!=null){for(b=h;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+ja(""+p)+'"][type="radio"]'),p=0;p<b.length;p++){var C=b[p];if(C!==h&&C.form===h.form){var z=C[ca]||null;if(!z)throw Error(a(90));Oi(C,z.value,z.defaultValue,z.defaultValue,z.checked,z.defaultChecked,z.type,z.name)}}for(p=0;p<b.length;p++)C=b[p],C.form===h.form&&Gh(C)}break e;case"textarea":Qa(h,b.value,b.defaultValue);break e;case"select":p=b.value,p!=null&&Xl(h,!!b.multiple,p,!1)}}}var Zl=!1;function SA(h,p,b){if(Zl)return h(p,b);Zl=!0;try{var C=h(p);return C}finally{if(Zl=!1,(Rc!==null||Jl!==null)&&(mC(),Rc&&(p=Rc,h=Jl,Jl=Rc=null,Tr(p),h)))for(p=0;p<h.length;p++)Tr(h[p])}}function Ki(h,p){var b=h.stateNode;if(b===null)return null;var C=b[ca]||null;if(C===null)return null;b=C[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(h=h.type,C=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!C;break e;default:h=!1}if(h)return null;if(b&&typeof b!="function")throw Error(a(231,p,typeof b));return b}var Qo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vo=!1;if(Qo)try{var ec={};Object.defineProperty(ec,"passive",{get:function(){vo=!0}}),window.addEventListener("test",ec,ec),window.removeEventListener("test",ec,ec)}catch{vo=!1}var zo=null,Sd=null,Lc=null;function Wh(){if(Lc)return Lc;var h,p=Sd,b=p.length,C,z="value"in zo?zo.value:zo.textContent,ee=z.length;for(h=0;h<b&&p[h]===z[h];h++);var ye=b-h;for(C=1;C<=ye&&p[b-C]===z[ee-C];C++);return Lc=z.slice(h,1<C?1-C:void 0)}function $o(h){var p=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&p===13&&(h=13)):h=p,h===10&&(h=13),32<=h||h===13?h:0}function Wi(){return!0}function tc(){return!1}function ws(h){function p(b,C,z,ee,ye){this._reactName=b,this._targetInst=z,this.type=C,this.nativeEvent=ee,this.target=ye,this.currentTarget=null;for(var De in h)h.hasOwnProperty(De)&&(b=h[De],this[De]=b?b(ee):ee[De]);return this.isDefaultPrevented=(ee.defaultPrevented!=null?ee.defaultPrevented:ee.returnValue===!1)?Wi:tc,this.isPropagationStopped=tc,this}return u(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Wi)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Wi)},persist:function(){},isPersistent:Wi}),p}var Aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_d=ws(Aa),rc=u({},Aa,{view:0,detail:0}),Xh=ws(rc),wu,Nu,Il,Xi=u({},rc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Od,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==Il&&(Il&&h.type==="mousemove"?(wu=h.screenX-Il.screenX,Nu=h.screenY-Il.screenY):Nu=wu=0,Il=h),wu)},movementY:function(h){return"movementY"in h?h.movementY:Nu}}),Ns=ws(Xi),_A=u({},Xi,{dataTransfer:0}),Td=ws(_A),Di=u({},rc,{relatedTarget:0}),Bd=ws(Di),Mc=u({},Aa,{animationName:0,elapsedTime:0,pseudoElement:0}),_f=ws(Mc),Eu=u({},Aa,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),Tf=ws(Eu),Yh=u({},Aa,{data:0}),Cu=ws(Yh),Id={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ku(h){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(h):(h=Bf[h])?!!p[h]:!1}function Od(){return ku}var TA=u({},rc,{key:function(h){if(h.key){var p=Id[h.key]||h.key;if(p!=="Unidentified")return p}return h.type==="keypress"?(h=$o(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?ju[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Od,charCode:function(h){return h.type==="keypress"?$o(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?$o(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),Uc=ws(TA),Dd=u({},Xi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Su=ws(Dd),Yi=u({},rc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Od}),If=ws(Yi),te=u({},Aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),je=ws(te),Ke=u({},Xi,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Je=ws(Ke),ot=u({},Aa,{newState:0,oldState:0}),Ct=ws(ot),Ht=[9,13,27,32],Zt=Qo&&"CompositionEvent"in window,R=null;Qo&&"documentMode"in document&&(R=document.documentMode);var se=Qo&&"TextEvent"in window&&!R,me=Qo&&(!Zt||R&&8<R&&11>=R),Oe=" ",it=!1;function pt(h,p){switch(h){case"keyup":return Ht.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qt(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var Br=!1;function ma(h,p){switch(h){case"compositionend":return Qt(p);case"keypress":return p.which!==32?null:(it=!0,Oe);case"textInput":return h=p.data,h===Oe&&it?null:h;default:return null}}function Gr(h,p){if(Br)return h==="compositionend"||!Zt&&pt(h,p)?(h=Wh(),Lc=Sd=zo=null,Br=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return me&&p.locale!=="ko"?null:p.data;default:return null}}var za={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tn(h){var p=h&&h.nodeName&&h.nodeName.toLowerCase();return p==="input"?!!za[h.type]:p==="textarea"}function ac(h,p,b,C){Rc?Jl?Jl.push(C):Jl=[C]:Rc=C,p=yC(p,"onChange"),0<p.length&&(b=new _d("onChange","change",null,b,C),h.push({event:b,listeners:p}))}var ls=null,Vo=null;function Fd(h){EH(h,0)}function Of(h){var p=Fe(h);if(Gh(p))return h}function BA(h,p){if(h==="change")return p}var Jh=!1;if(Qo){var $s;if(Qo){var Df="oninput"in document;if(!Df){var Zh=document.createElement("div");Zh.setAttribute("oninput","return;"),Df=typeof Zh.oninput=="function"}$s=Df}else $s=!1;Jh=$s&&(!document.documentMode||9<document.documentMode)}function e0(){ls&&(ls.detachEvent("onpropertychange",IA),Vo=ls=null)}function IA(h){if(h.propertyName==="value"&&Of(Vo)){var p=[];ac(p,Vo,h,hn(h)),SA(Fd,p)}}function Go(h,p,b){h==="focusin"?(e0(),ls=p,Vo=b,ls.attachEvent("onpropertychange",IA)):h==="focusout"&&e0()}function Ay(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return Of(Vo)}function Pp(h,p){if(h==="click")return Of(p)}function Ux(h,p){if(h==="input"||h==="change")return Of(p)}function nc(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var Ai=typeof Object.is=="function"?Object.is:nc;function Ff(h,p){if(Ai(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var b=Object.keys(h),C=Object.keys(p);if(b.length!==C.length)return!1;for(C=0;C<b.length;C++){var z=b[C];if(!q.call(p,z)||!Ai(h[z],p[z]))return!1}return!0}function Rp(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function _u(h,p){var b=Rp(h);h=0;for(var C;b;){if(b.nodeType===3){if(C=h+b.textContent.length,h<=p&&C>=p)return{node:b,offset:p-h};h=C}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=Rp(b)}}function Pf(h,p){return h&&p?h===p?!0:h&&h.nodeType===3?!1:p&&p.nodeType===3?Pf(h,p.parentNode):"contains"in h?h.contains(p):h.compareDocumentPosition?!!(h.compareDocumentPosition(p)&16):!1:!1}function bo(h){h=h!=null&&h.ownerDocument!=null&&h.ownerDocument.defaultView!=null?h.ownerDocument.defaultView:window;for(var p=Ii(h.document);p instanceof h.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)h=p.contentWindow;else break;p=Ii(h.document)}return p}function Fi(h){var p=h&&h.nodeName&&h.nodeName.toLowerCase();return p&&(p==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||p==="textarea"||h.contentEditable==="true")}var Rf=Qo&&"documentMode"in document&&11>=document.documentMode,qo=null,Hc=null,Pd=null,Qc=!1;function Zn(h,p,b){var C=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Qc||qo==null||qo!==Ii(C)||(C=qo,"selectionStart"in C&&Fi(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),Pd&&Ff(Pd,C)||(Pd=C,C=yC(Hc,"onSelect"),0<C.length&&(p=new _d("onSelect","select",null,p,b),h.push({event:p,listeners:C}),p.target=qo)))}function zc(h,p){var b={};return b[h.toLowerCase()]=p.toLowerCase(),b["Webkit"+h]="webkit"+p,b["Moz"+h]="moz"+p,b}var Es={animationend:zc("Animation","AnimationEnd"),animationiteration:zc("Animation","AnimationIteration"),animationstart:zc("Animation","AnimationStart"),transitionrun:zc("Transition","TransitionRun"),transitionstart:zc("Transition","TransitionStart"),transitioncancel:zc("Transition","TransitionCancel"),transitionend:zc("Transition","TransitionEnd")},Ko={},t0={};Qo&&(t0=document.createElement("div").style,"AnimationEvent"in window||(delete Es.animationend.animation,delete Es.animationiteration.animation,delete Es.animationstart.animation),"TransitionEvent"in window||delete Es.transitionend.transition);function Rd(h){if(Ko[h])return Ko[h];if(!Es[h])return h;var p=Es[h],b;for(b in p)if(p.hasOwnProperty(b)&&b in t0)return Ko[h]=p[b];return h}var OA=Rd("animationend"),Lf=Rd("animationiteration"),Mf=Rd("animationstart"),Uf=Rd("transitionrun"),r0=Rd("transitionstart"),DA=Rd("transitioncancel"),Hf=Rd("transitionend"),Tu=new Map,a0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");a0.push("scrollEnd");function es(h,p){Tu.set(h,p),Nt(p,[h])}var Ol=new WeakMap;function da(h,p){if(typeof h=="object"&&h!==null){var b=Ol.get(h);return b!==void 0?b:(p={value:h,source:p,stack:Nn(p)},Ol.set(h,p),p)}return{value:h,source:p,stack:Nn(p)}}var ua=[],En=0,cs=0;function sc(){for(var h=En,p=cs=En=0;p<h;){var b=ua[p];ua[p++]=null;var C=ua[p];ua[p++]=null;var z=ua[p];ua[p++]=null;var ee=ua[p];if(ua[p++]=null,C!==null&&z!==null){var ye=C.pending;ye===null?z.next=z:(z.next=ye.next,ye.next=z),C.pending=z}ee!==0&&Hx(b,z,ee)}}function Qf(h,p,b,C){ua[En++]=h,ua[En++]=p,ua[En++]=b,ua[En++]=C,cs|=C,h.lanes|=C,h=h.alternate,h!==null&&(h.lanes|=C)}function zf(h,p,b,C){return Qf(h,p,b,C),n0(h)}function Bu(h,p){return Qf(h,null,null,p),n0(h)}function Hx(h,p,b){h.lanes|=b;var C=h.alternate;C!==null&&(C.lanes|=b);for(var z=!1,ee=h.return;ee!==null;)ee.childLanes|=b,C=ee.alternate,C!==null&&(C.childLanes|=b),ee.tag===22&&(h=ee.stateNode,h===null||h._visibility&1||(z=!0)),h=ee,ee=ee.return;return h.tag===3?(ee=h.stateNode,z&&p!==null&&(z=31-We(b),h=ee.hiddenUpdates,C=h[z],C===null?h[z]=[p]:C.push(p),p.lane=b|536870912),ee):null}function n0(h){if(50<My)throw My=0,BT=null,Error(a(185));for(var p=h.return;p!==null;)h=p,p=h.return;return h.tag===3?h.stateNode:null}var mi={};function ic(h,p,b,C){this.tag=h,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ji(h,p,b,C){return new ic(h,p,b,C)}function FA(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Ld(h,p){var b=h.alternate;return b===null?(b=Ji(h.tag,p,h.key,h.mode),b.elementType=h.elementType,b.type=h.type,b.stateNode=h.stateNode,b.alternate=h,h.alternate=b):(b.pendingProps=p,b.type=h.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=h.flags&65011712,b.childLanes=h.childLanes,b.lanes=h.lanes,b.child=h.child,b.memoizedProps=h.memoizedProps,b.memoizedState=h.memoizedState,b.updateQueue=h.updateQueue,p=h.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=h.sibling,b.index=h.index,b.ref=h.ref,b.refCleanup=h.refCleanup,b}function Lp(h,p){h.flags&=65011714;var b=h.alternate;return b===null?(h.childLanes=0,h.lanes=p,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=b.childLanes,h.lanes=b.lanes,h.child=b.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=b.memoizedProps,h.memoizedState=b.memoizedState,h.updateQueue=b.updateQueue,h.type=b.type,p=b.dependencies,h.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),h}function s0(h,p,b,C,z,ee){var ye=0;if(C=h,typeof h=="function")FA(h)&&(ye=1);else if(typeof h=="string")ye=jpe(h,b,W.current)?26:h==="html"||h==="head"||h==="body"?27:5;else e:switch(h){case T:return h=Ji(31,b,p,z),h.elementType=T,h.lanes=ee,h;case g:return Iu(b.children,z,ee,p);case x:ye=8,z|=24;break;case v:return h=Ji(12,b,p,z|2),h.elementType=v,h.lanes=ee,h;case _:return h=Ji(13,b,p,z),h.elementType=_,h.lanes=ee,h;case I:return h=Ji(19,b,p,z),h.elementType=I,h.lanes=ee,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case y:case E:ye=10;break e;case N:ye=9;break e;case B:ye=11;break e;case j:ye=14;break e;case k:ye=16,C=null;break e}ye=29,b=Error(a(130,h===null?"null":typeof h,"")),C=null}return p=Ji(ye,b,p,z),p.elementType=h,p.type=C,p.lanes=ee,p}function Iu(h,p,b,C){return h=Ji(7,h,C,p),h.lanes=b,h}function Qx(h,p,b){return h=Ji(6,h,null,p),h.lanes=b,h}function Mp(h,p,b){return p=Ji(4,h.children!==null?h.children:[],h.key,p),p.lanes=b,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}var $f=[],Ou=0,PA=null,zx=0,oc=[],Dl=0,i0=null,Du=1,Fu="";function o0(h,p){$f[Ou++]=zx,$f[Ou++]=PA,PA=h,zx=p}function ME(h,p,b){oc[Dl++]=Du,oc[Dl++]=Fu,oc[Dl++]=i0,i0=h;var C=Du;h=Fu;var z=32-We(C)-1;C&=~(1<<z),b+=1;var ee=32-We(p)+z;if(30<ee){var ye=z-z%5;ee=(C&(1<<ye)-1).toString(32),C>>=ye,z-=ye,Du=1<<32-We(p)+z|b<<z|C,Fu=ee+h}else Du=1<<ee|b<<z|C,Fu=h}function Up(h){h.return!==null&&(o0(h,1),ME(h,1,0))}function Hp(h){for(;h===PA;)PA=$f[--Ou],$f[Ou]=null,zx=$f[--Ou],$f[Ou]=null;for(;h===i0;)i0=oc[--Dl],oc[Dl]=null,Fu=oc[--Dl],oc[Dl]=null,Du=oc[--Dl],oc[Dl]=null}var Vs=null,ts=null,Pa=!1,Vf=null,Md=!1,my=Error(a(519));function l0(h){var p=Error(a(418,""));throw RA(da(p,h)),my}function UE(h){var p=h.stateNode,b=h.type,C=h.memoizedProps;switch(p[va]=h,p[ca]=C,b){case"dialog":ya("cancel",p),ya("close",p);break;case"iframe":case"object":case"embed":ya("load",p);break;case"video":case"audio":for(b=0;b<Hy.length;b++)ya(Hy[b],p);break;case"source":ya("error",p);break;case"img":case"image":case"link":ya("error",p),ya("load",p);break;case"details":ya("toggle",p);break;case"input":ya("invalid",p),Cd(p,C.value,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name,!0),Ed(p);break;case"select":ya("invalid",p);break;case"textarea":ya("invalid",p),kd(p,C.value,C.defaultValue,C.children),Ed(p)}b=C.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||p.textContent===""+b||C.suppressHydrationWarning===!0||SH(p.textContent,b)?(C.popover!=null&&(ya("beforetoggle",p),ya("toggle",p)),C.onScroll!=null&&ya("scroll",p),C.onScrollEnd!=null&&ya("scrollend",p),C.onClick!=null&&(p.onclick=wC),p=!0):p=!1,p||l0(h)}function Pu(h){for(Vs=h.return;Vs;)switch(Vs.tag){case 5:case 13:Md=!1;return;case 27:case 3:Md=!0;return;default:Vs=Vs.return}}function yo(h){if(h!==Vs)return!1;if(!Pa)return Pu(h),Pa=!0,!1;var p=h.tag,b;if((b=p!==3&&p!==27)&&((b=p===5)&&(b=h.type,b=!(b!=="form"&&b!=="button")||qT(h.type,h.memoizedProps)),b=!b),b&&ts&&l0(h),Pu(h),p===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));e:{for(h=h.nextSibling,p=0;h;){if(h.nodeType===8)if(b=h.data,b==="/$"){if(p===0){ts=$u(h.nextSibling);break e}p--}else b!=="$"&&b!=="$!"&&b!=="$?"||p++;h=h.nextSibling}ts=null}}else p===27?(p=ts,em(h.type)?(h=YT,YT=null,ts=h):ts=p):ts=Vs?$u(h.stateNode.nextSibling):null;return!0}function Fl(){ts=Vs=null,Pa=!1}function HE(){var h=Vf;return h!==null&&(dc===null?dc=h:dc.push.apply(dc,h),Vf=null),h}function RA(h){Vf===null?Vf=[h]:Vf.push(h)}var Ud=Y(null),pi=null,Ru=null;function Gf(h,p,b){D(Ud,p._currentValue),p._currentValue=b}function Hd(h){h._currentValue=Ud.current,P(Ud)}function $x(h,p,b){for(;h!==null;){var C=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,C!==null&&(C.childLanes|=p)):C!==null&&(C.childLanes&p)!==p&&(C.childLanes|=p),h===b)break;h=h.return}}function Vx(h,p,b,C){var z=h.child;for(z!==null&&(z.return=h);z!==null;){var ee=z.dependencies;if(ee!==null){var ye=z.child;ee=ee.firstContext;e:for(;ee!==null;){var De=ee;ee=z;for(var Xe=0;Xe<p.length;Xe++)if(De.context===p[Xe]){ee.lanes|=b,De=ee.alternate,De!==null&&(De.lanes|=b),$x(ee.return,b,h),C||(ye=null);break e}ee=De.next}}else if(z.tag===18){if(ye=z.return,ye===null)throw Error(a(341));ye.lanes|=b,ee=ye.alternate,ee!==null&&(ee.lanes|=b),$x(ye,b,h),ye=null}else ye=z.child;if(ye!==null)ye.return=z;else for(ye=z;ye!==null;){if(ye===h){ye=null;break}if(z=ye.sibling,z!==null){z.return=ye.return,ye=z;break}ye=ye.return}z=ye}}function LA(h,p,b,C){h=null;for(var z=p,ee=!1;z!==null;){if(!ee){if((z.flags&524288)!==0)ee=!0;else if((z.flags&262144)!==0)break}if(z.tag===10){var ye=z.alternate;if(ye===null)throw Error(a(387));if(ye=ye.memoizedProps,ye!==null){var De=z.type;Ai(z.pendingProps.value,ye.value)||(h!==null?h.push(De):h=[De])}}else if(z===ie.current){if(ye=z.alternate,ye===null)throw Error(a(387));ye.memoizedState.memoizedState!==z.memoizedState.memoizedState&&(h!==null?h.push(qy):h=[qy])}z=z.return}h!==null&&Vx(p,h,b,C),p.flags|=262144}function Gx(h){for(h=h.firstContext;h!==null;){if(!Ai(h.context._currentValue,h.memoizedValue))return!0;h=h.next}return!1}function Qd(h){pi=h,Ru=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function Gs(h){return qx(pi,h)}function qf(h,p){return pi===null&&Qd(h),qx(h,p)}function qx(h,p){var b=p._currentValue;if(p={context:p,memoizedValue:b,next:null},Ru===null){if(h===null)throw Error(a(308));Ru=p,h.dependencies={lanes:0,firstContext:p},h.flags|=524288}else Ru=Ru.next=p;return b}var rT=typeof AbortController<"u"?AbortController:function(){var h=[],p=this.signal={aborted:!1,addEventListener:function(b,C){h.push(C)}};this.abort=function(){p.aborted=!0,h.forEach(function(b){return b()})}},QE=e.unstable_scheduleCallback,aT=e.unstable_NormalPriority,qs={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function py(){return{controller:new rT,data:new Map,refCount:0}}function Qp(h){h.refCount--,h.refCount===0&&QE(aT,function(){h.controller.abort()})}var zp=null,gy=0,c0=0,Lu=null;function nT(h,p){if(zp===null){var b=zp=[];gy=0,c0=LT(),Lu={status:"pending",value:void 0,then:function(C){b.push(C)}}}return gy++,p.then(zE,zE),p}function zE(){if(--gy===0&&zp!==null){Lu!==null&&(Lu.status="fulfilled");var h=zp;zp=null,c0=0,Lu=null;for(var p=0;p<h.length;p++)(0,h[p])()}}function $E(h,p){var b=[],C={status:"pending",value:null,reason:null,then:function(z){b.push(z)}};return h.then(function(){C.status="fulfilled",C.value=p;for(var z=0;z<b.length;z++)(0,b[z])(p)},function(z){for(C.status="rejected",C.reason=z,z=0;z<b.length;z++)(0,b[z])(void 0)}),C}var O=Q.S;Q.S=function(h,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&nT(h,p),O!==null&&O(h,p)};var V=Y(null);function ae(){var h=V.current;return h!==null?h:Un.pooledCache}function fe(h,p){p===null?D(V,V.current):D(V,p.pool)}function Ce(){var h=ae();return h===null?null:{parent:qs._currentValue,pool:h}}var _e=Error(a(460)),Be=Error(a(474)),Ie=Error(a(542)),Pe={then:function(){}};function $e(h){return h=h.status,h==="fulfilled"||h==="rejected"}function tt(){}function mt(h,p,b){switch(b=h[b],b===void 0?h.push(p):b!==p&&(p.then(tt,tt),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw h=p.reason,Pt(h),h;default:if(typeof p.status=="string")p.then(tt,tt);else{if(h=Un,h!==null&&100<h.shellSuspendCounter)throw Error(a(482));h=p,h.status="pending",h.then(function(C){if(p.status==="pending"){var z=p;z.status="fulfilled",z.value=C}},function(C){if(p.status==="pending"){var z=p;z.status="rejected",z.reason=C}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw h=p.reason,Pt(h),h}throw ht=p,_e}}var ht=null;function lt(){if(ht===null)throw Error(a(459));var h=ht;return ht=null,h}function Pt(h){if(h===_e||h===Ie)throw Error(a(483))}var yt=!1;function rt(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nt(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function Bt(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Rt(h,p,b){var C=h.updateQueue;if(C===null)return null;if(C=C.shared,(mn&2)!==0){var z=C.pending;return z===null?p.next=p:(p.next=z.next,z.next=p),C.pending=p,p=n0(h),Hx(h,null,b),p}return Qf(h,C,p,b),n0(h)}function Ot(h,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194048)!==0)){var C=p.lanes;C&=h.pendingLanes,b|=C,p.lanes=b,Jr(h,b)}}function nr(h,p){var b=h.updateQueue,C=h.alternate;if(C!==null&&(C=C.updateQueue,b===C)){var z=null,ee=null;if(b=b.firstBaseUpdate,b!==null){do{var ye={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};ee===null?z=ee=ye:ee=ee.next=ye,b=b.next}while(b!==null);ee===null?z=ee=p:ee=ee.next=p}else z=ee=p;b={baseState:C.baseState,firstBaseUpdate:z,lastBaseUpdate:ee,shared:C.shared,callbacks:C.callbacks},h.updateQueue=b;return}h=b.lastBaseUpdate,h===null?b.firstBaseUpdate=p:h.next=p,b.lastBaseUpdate=p}var Jt=!1;function vr(){if(Jt){var h=Lu;if(h!==null)throw h}}function er(h,p,b,C){Jt=!1;var z=h.updateQueue;yt=!1;var ee=z.firstBaseUpdate,ye=z.lastBaseUpdate,De=z.shared.pending;if(De!==null){z.shared.pending=null;var Xe=De,gt=Xe.next;Xe.next=null,ye===null?ee=gt:ye.next=gt,ye=Xe;var It=h.alternate;It!==null&&(It=It.updateQueue,De=It.lastBaseUpdate,De!==ye&&(De===null?It.firstBaseUpdate=gt:De.next=gt,It.lastBaseUpdate=Xe))}if(ee!==null){var Lt=z.baseState;ye=0,It=gt=Xe=null,De=ee;do{var vt=De.lane&-536870913,bt=vt!==De.lane;if(bt?(Ta&vt)===vt:(C&vt)===vt){vt!==0&&vt===c0&&(Jt=!0),It!==null&&(It=It.next={lane:0,tag:De.tag,payload:De.payload,callback:null,next:null});e:{var $r=h,Ir=De;vt=p;var jn=b;switch(Ir.tag){case 1:if($r=Ir.payload,typeof $r=="function"){Lt=$r.call(jn,Lt,vt);break e}Lt=$r;break e;case 3:$r.flags=$r.flags&-65537|128;case 0:if($r=Ir.payload,vt=typeof $r=="function"?$r.call(jn,Lt,vt):$r,vt==null)break e;Lt=u({},Lt,vt);break e;case 2:yt=!0}}vt=De.callback,vt!==null&&(h.flags|=64,bt&&(h.flags|=8192),bt=z.callbacks,bt===null?z.callbacks=[vt]:bt.push(vt))}else bt={lane:vt,tag:De.tag,payload:De.payload,callback:De.callback,next:null},It===null?(gt=It=bt,Xe=Lt):It=It.next=bt,ye|=vt;if(De=De.next,De===null){if(De=z.shared.pending,De===null)break;bt=De,De=bt.next,bt.next=null,z.lastBaseUpdate=bt,z.shared.pending=null}}while(!0);It===null&&(Xe=Lt),z.baseState=Xe,z.firstBaseUpdate=gt,z.lastBaseUpdate=It,ee===null&&(z.shared.lanes=0),XA|=ye,h.lanes=ye,h.memoizedState=Lt}}function Sa(h,p){if(typeof h!="function")throw Error(a(191,h));h.call(p)}function $a(h,p){var b=h.callbacks;if(b!==null)for(h.callbacks=null,h=0;h<b.length;h++)Sa(b[h],p)}var la=Y(null),ra=Y(0);function rn(h,p){h=v0,D(ra,h),D(la,p),v0=h|p.baseLanes}function Va(){D(ra,v0),D(la,la.current)}function qr(){v0=ra.current,P(la),P(ra)}var An=0,Sr=null,Mr=null,ka=null,_a=!1,gi=!1,Ks=!1,ds=0,us=0,Cs=null,lc=0;function Ga(){throw Error(a(321))}function js(h,p){if(p===null)return!1;for(var b=0;b<p.length&&b<h.length;b++)if(!Ai(h[b],p[b]))return!1;return!0}function $c(h,p,b,C,z,ee){return An=ee,Sr=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Q.H=h===null||h.memoizedState===null?l9:c9,Ks=!1,ee=b(C,z),Ks=!1,gi&&(ee=d0(p,b,C,z)),Kf(h),ee}function Kf(h){Q.H=rC;var p=Mr!==null&&Mr.next!==null;if(An=0,ka=Mr=Sr=null,_a=!1,us=0,Cs=null,p)throw Error(a(300));h===null||Zi||(h=h.dependencies,h!==null&&Gx(h)&&(Zi=!0))}function d0(h,p,b,C){Sr=h;var z=0;do{if(gi&&(Cs=null),us=0,gi=!1,25<=z)throw Error(a(301));if(z+=1,ka=Mr=null,h.updateQueue!=null){var ee=h.updateQueue;ee.lastEffect=null,ee.events=null,ee.stores=null,ee.memoCache!=null&&(ee.memoCache.index=0)}Q.H=Rme,ee=p(b,C)}while(gi);return ee}function Wf(){var h=Q.H,p=h.useState()[0];return p=typeof p.then=="function"?Xf(p):p,h=h.useState()[0],(Mr!==null?Mr.memoizedState:null)!==h&&(Sr.flags|=1024),p}function Mn(){var h=ds!==0;return ds=0,h}function $p(h,p,b){p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~b}function Kx(h){if(_a){for(h=h.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}_a=!1}An=0,ka=Mr=Sr=null,gi=!1,us=ds=0,Cs=null}function wo(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ka===null?Sr.memoizedState=ka=h:ka=ka.next=h,ka}function Gn(){if(Mr===null){var h=Sr.alternate;h=h!==null?h.memoizedState:null}else h=Mr.next;var p=ka===null?Sr.memoizedState:ka.next;if(p!==null)ka=p,Mr=h;else{if(h===null)throw Sr.alternate===null?Error(a(467)):Error(a(310));Mr=h,h={memoizedState:Mr.memoizedState,baseState:Mr.baseState,baseQueue:Mr.baseQueue,queue:Mr.queue,next:null},ka===null?Sr.memoizedState=ka=h:ka=ka.next=h}return ka}function u0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xf(h){var p=us;return us+=1,Cs===null&&(Cs=[]),h=mt(Cs,h,p),p=Sr,(ka===null?p.memoizedState:ka.next)===null&&(p=p.alternate,Q.H=p===null||p.memoizedState===null?l9:c9),h}function Wo(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return Xf(h);if(h.$$typeof===E)return Gs(h)}throw Error(a(438,String(h)))}function Yf(h){var p=null,b=Sr.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var C=Sr.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(p={data:C.data.map(function(z){return z.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=u0(),Sr.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(h),C=0;C<h;C++)b[C]=L;return p.index++,b}function Xo(h,p){return typeof p=="function"?p(h):p}function Vp(h){var p=Gn();return MA(p,Mr,h)}function MA(h,p,b){var C=h.queue;if(C===null)throw Error(a(311));C.lastRenderedReducer=b;var z=h.baseQueue,ee=C.pending;if(ee!==null){if(z!==null){var ye=z.next;z.next=ee.next,ee.next=ye}p.baseQueue=z=ee,C.pending=null}if(ee=h.baseState,z===null)h.memoizedState=ee;else{p=z.next;var De=ye=null,Xe=null,gt=p,It=!1;do{var Lt=gt.lane&-536870913;if(Lt!==gt.lane?(Ta&Lt)===Lt:(An&Lt)===Lt){var vt=gt.revertLane;if(vt===0)Xe!==null&&(Xe=Xe.next={lane:0,revertLane:0,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null}),Lt===c0&&(It=!0);else if((An&vt)===vt){gt=gt.next,vt===c0&&(It=!0);continue}else Lt={lane:0,revertLane:gt.revertLane,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null},Xe===null?(De=Xe=Lt,ye=ee):Xe=Xe.next=Lt,Sr.lanes|=vt,XA|=vt;Lt=gt.action,Ks&&b(ee,Lt),ee=gt.hasEagerState?gt.eagerState:b(ee,Lt)}else vt={lane:Lt,revertLane:gt.revertLane,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null},Xe===null?(De=Xe=vt,ye=ee):Xe=Xe.next=vt,Sr.lanes|=Lt,XA|=Lt;gt=gt.next}while(gt!==null&&gt!==p);if(Xe===null?ye=ee:Xe.next=De,!Ai(ee,h.memoizedState)&&(Zi=!0,It&&(b=Lu,b!==null)))throw b;h.memoizedState=ee,h.baseState=ye,h.baseQueue=Xe,C.lastRenderedState=ee}return z===null&&(C.lanes=0),[h.memoizedState,C.dispatch]}function Wx(h){var p=Gn(),b=p.queue;if(b===null)throw Error(a(311));b.lastRenderedReducer=h;var C=b.dispatch,z=b.pending,ee=p.memoizedState;if(z!==null){b.pending=null;var ye=z=z.next;do ee=h(ee,ye.action),ye=ye.next;while(ye!==z);Ai(ee,p.memoizedState)||(Zi=!0),p.memoizedState=ee,p.baseQueue===null&&(p.baseState=ee),b.lastRenderedState=ee}return[ee,C]}function Gp(h,p,b){var C=Sr,z=Gn(),ee=Pa;if(ee){if(b===void 0)throw Error(a(407));b=b()}else b=p();var ye=!Ai((Mr||z).memoizedState,b);ye&&(z.memoizedState=b,Zi=!0),z=z.queue;var De=UA.bind(null,C,z,h);if(zA(2048,8,De,[h]),z.getSnapshot!==p||ye||ka!==null&&ka.memoizedState.tag&1){if(C.flags|=2048,Uu(9,Xp(),qp.bind(null,C,z,b,p),null),Un===null)throw Error(a(349));ee||(An&124)!==0||Xx(C,p,b)}return b}function Xx(h,p,b){h.flags|=16384,h={getSnapshot:p,value:b},p=Sr.updateQueue,p===null?(p=u0(),Sr.updateQueue=p,p.stores=[h]):(b=p.stores,b===null?p.stores=[h]:b.push(h))}function qp(h,p,b,C){p.value=b,p.getSnapshot=C,VE(p)&&GE(h)}function UA(h,p,b){return b(function(){VE(p)&&GE(h)})}function VE(h){var p=h.getSnapshot;h=h.value;try{var b=p();return!Ai(h,b)}catch{return!0}}function GE(h){var p=Bu(h,2);p!==null&&Xc(p,h,2)}function Kp(h){var p=wo();if(typeof h=="function"){var b=h;if(h=b(),Ks){Re(!0);try{b()}finally{Re(!1)}}}return p.memoizedState=p.baseState=h,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xo,lastRenderedState:h},p}function Mu(h,p,b,C){return h.baseState=b,MA(h,Mr,typeof C=="function"?C:Xo)}function sT(h,p,b,C,z){if(tC(h))throw Error(a(485));if(h=p.action,h!==null){var ee={payload:z,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ye){ee.listeners.push(ye)}};Q.T!==null?b(!0):ee.isTransition=!1,C(ee),b=p.pending,b===null?(ee.next=p.pending=ee,qE(p,ee)):(ee.next=b.next,p.pending=b.next=ee)}}function qE(h,p){var b=p.action,C=p.payload,z=h.state;if(p.isTransition){var ee=Q.T,ye={};Q.T=ye;try{var De=b(z,C),Xe=Q.S;Xe!==null&&Xe(ye,De),KE(h,p,De)}catch(gt){HA(h,p,gt)}finally{Q.T=ee}}else try{ee=b(z,C),KE(h,p,ee)}catch(gt){HA(h,p,gt)}}function KE(h,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(C){xy(h,p,C)},function(C){return HA(h,p,C)}):xy(h,p,b)}function xy(h,p,b){p.status="fulfilled",p.value=b,vy(p),h.state=b,p=h.pending,p!==null&&(b=p.next,b===p?h.pending=null:(b=b.next,p.next=b,qE(h,b)))}function HA(h,p,b){var C=h.pending;if(h.pending=null,C!==null){C=C.next;do p.status="rejected",p.reason=b,vy(p),p=p.next;while(p!==C)}h.action=null}function vy(h){h=h.listeners;for(var p=0;p<h.length;p++)(0,h[p])()}function by(h,p){return p}function Wp(h,p){if(Pa){var b=Un.formState;if(b!==null){e:{var C=Sr;if(Pa){if(ts){t:{for(var z=ts,ee=Md;z.nodeType!==8;){if(!ee){z=null;break t}if(z=$u(z.nextSibling),z===null){z=null;break t}}ee=z.data,z=ee==="F!"||ee==="F"?z:null}if(z){ts=$u(z.nextSibling),C=z.data==="F!";break e}}l0(C)}C=!1}C&&(p=b[0])}}return b=wo(),b.memoizedState=b.baseState=p,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:by,lastRenderedState:p},b.queue=C,b=s9.bind(null,Sr,C),C.dispatch=b,C=Kp(!1),ee=iT.bind(null,Sr,!1,C.queue),C=wo(),z={state:p,dispatch:null,action:h,pending:null},C.queue=z,b=sT.bind(null,Sr,z,ee,b),z.dispatch=b,C.memoizedState=h,[p,b,!1]}function Yx(h){var p=Gn();return QA(p,Mr,h)}function QA(h,p,b){if(p=MA(h,p,by)[0],h=Vp(Xo)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var C=Xf(p)}catch(ye){throw ye===_e?Ie:ye}else C=p;p=Gn();var z=p.queue,ee=z.dispatch;return b!==p.memoizedState&&(Sr.flags|=2048,Uu(9,Xp(),WE.bind(null,z,b),null)),[C,ee,h]}function WE(h,p){h.action=p}function XE(h){var p=Gn(),b=Mr;if(b!==null)return QA(p,b,h);Gn(),p=p.memoizedState,b=Gn();var C=b.queue.dispatch;return b.memoizedState=h,[p,C,!1]}function Uu(h,p,b,C){return h={tag:h,create:b,deps:C,inst:p,next:null},p=Sr.updateQueue,p===null&&(p=u0(),Sr.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=h.next=h:(C=b.next,b.next=h,h.next=C,p.lastEffect=h),h}function Xp(){return{destroy:void 0,resource:void 0}}function Jx(){return Gn().memoizedState}function Vc(h,p,b,C){var z=wo();C=C===void 0?null:C,Sr.flags|=h,z.memoizedState=Uu(1|p,Xp(),b,C)}function zA(h,p,b,C){var z=Gn();C=C===void 0?null:C;var ee=z.memoizedState.inst;Mr!==null&&C!==null&&js(C,Mr.memoizedState.deps)?z.memoizedState=Uu(p,ee,b,C):(Sr.flags|=h,z.memoizedState=Uu(1|p,ee,b,C))}function yy(h,p){Vc(8390656,8,h,p)}function YE(h,p){zA(2048,8,h,p)}function wy(h,p){return zA(4,2,h,p)}function f0(h,p){return zA(4,4,h,p)}function JE(h,p){if(typeof p=="function"){h=h();var b=p(h);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function Ny(h,p,b){b=b!=null?b.concat([h]):null,zA(4,4,JE.bind(null,p,h),b)}function Ey(){}function Cy(h,p){var b=Gn();p=p===void 0?null:p;var C=b.memoizedState;return p!==null&&js(p,C[1])?C[0]:(b.memoizedState=[h,p],h)}function ZE(h,p){var b=Gn();p=p===void 0?null:p;var C=b.memoizedState;if(p!==null&&js(p,C[1]))return C[0];if(C=h(),Ks){Re(!0);try{h()}finally{Re(!1)}}return b.memoizedState=[C,p],C}function h0(h,p,b){return b===void 0||(An&1073741824)!==0?h.memoizedState=p:(h.memoizedState=b,h=tH(),Sr.lanes|=h,XA|=h,b)}function Zx(h,p,b,C){return Ai(b,p)?b:la.current!==null?(h=h0(h,b,C),Ai(h,p)||(Zi=!0),h):(An&42)===0?(Zi=!0,h.memoizedState=b):(h=tH(),Sr.lanes|=h,XA|=h,p)}function Yp(h,p,b,C,z){var ee=G.p;G.p=ee!==0&&8>ee?ee:8;var ye=Q.T,De={};Q.T=De,iT(h,!1,p,b);try{var Xe=z(),gt=Q.S;if(gt!==null&&gt(De,Xe),Xe!==null&&typeof Xe=="object"&&typeof Xe.then=="function"){var It=$E(Xe,C);_y(h,p,It,Wc(h))}else _y(h,p,C,Wc(h))}catch(Lt){_y(h,p,{then:function(){},status:"rejected",reason:Lt},Wc())}finally{G.p=ee,Q.T=ye}}function Hu(){}function zd(h,p,b,C){if(h.tag!==5)throw Error(a(476));var z=Qu(h).queue;Yp(h,z,p,X,b===null?Hu:function(){return Jp(h),b(C)})}function Qu(h){var p=h.memoizedState;if(p!==null)return p;p={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xo,lastRenderedState:X},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xo,lastRenderedState:b},next:null},h.memoizedState=p,h=h.alternate,h!==null&&(h.memoizedState=p),p}function Jp(h){var p=Qu(h).next.queue;_y(h,p,{},Wc())}function Zp(){return Gs(qy)}function jy(){return Gn().memoizedState}function eC(){return Gn().memoizedState}function ky(h){for(var p=h.return;p!==null;){switch(p.tag){case 24:case 3:var b=Wc();h=Bt(b);var C=Rt(p,h,b);C!==null&&(Xc(C,p,b),Ot(C,p,b)),p={cache:py()},h.payload=p;return}p=p.return}}function Sy(h,p,b){var C=Wc();b={lane:C,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},tC(h)?i9(p,b):(b=zf(h,p,b,C),b!==null&&(Xc(b,h,C),o9(b,p,C)))}function s9(h,p,b){var C=Wc();_y(h,p,b,C)}function _y(h,p,b,C){var z={lane:C,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(tC(h))i9(p,z);else{var ee=h.alternate;if(h.lanes===0&&(ee===null||ee.lanes===0)&&(ee=p.lastRenderedReducer,ee!==null))try{var ye=p.lastRenderedState,De=ee(ye,b);if(z.hasEagerState=!0,z.eagerState=De,Ai(De,ye))return Qf(h,p,z,0),Un===null&&sc(),!1}catch{}finally{}if(b=zf(h,p,z,C),b!==null)return Xc(b,h,C),o9(b,p,C),!0}return!1}function iT(h,p,b,C){if(C={lane:2,revertLane:LT(),action:C,hasEagerState:!1,eagerState:null,next:null},tC(h)){if(p)throw Error(a(479))}else p=zf(h,b,C,2),p!==null&&Xc(p,h,2)}function tC(h){var p=h.alternate;return h===Sr||p!==null&&p===Sr}function i9(h,p){gi=_a=!0;var b=h.pending;b===null?p.next=p:(p.next=b.next,b.next=p),h.pending=p}function o9(h,p,b){if((b&4194048)!==0){var C=p.lanes;C&=h.pendingLanes,b|=C,p.lanes=b,Jr(h,b)}}var rC={readContext:Gs,use:Wo,useCallback:Ga,useContext:Ga,useEffect:Ga,useImperativeHandle:Ga,useLayoutEffect:Ga,useInsertionEffect:Ga,useMemo:Ga,useReducer:Ga,useRef:Ga,useState:Ga,useDebugValue:Ga,useDeferredValue:Ga,useTransition:Ga,useSyncExternalStore:Ga,useId:Ga,useHostTransitionStatus:Ga,useFormState:Ga,useActionState:Ga,useOptimistic:Ga,useMemoCache:Ga,useCacheRefresh:Ga},l9={readContext:Gs,use:Wo,useCallback:function(h,p){return wo().memoizedState=[h,p===void 0?null:p],h},useContext:Gs,useEffect:yy,useImperativeHandle:function(h,p,b){b=b!=null?b.concat([h]):null,Vc(4194308,4,JE.bind(null,p,h),b)},useLayoutEffect:function(h,p){return Vc(4194308,4,h,p)},useInsertionEffect:function(h,p){Vc(4,2,h,p)},useMemo:function(h,p){var b=wo();p=p===void 0?null:p;var C=h();if(Ks){Re(!0);try{h()}finally{Re(!1)}}return b.memoizedState=[C,p],C},useReducer:function(h,p,b){var C=wo();if(b!==void 0){var z=b(p);if(Ks){Re(!0);try{b(p)}finally{Re(!1)}}}else z=p;return C.memoizedState=C.baseState=z,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:z},C.queue=h,h=h.dispatch=Sy.bind(null,Sr,h),[C.memoizedState,h]},useRef:function(h){var p=wo();return h={current:h},p.memoizedState=h},useState:function(h){h=Kp(h);var p=h.queue,b=s9.bind(null,Sr,p);return p.dispatch=b,[h.memoizedState,b]},useDebugValue:Ey,useDeferredValue:function(h,p){var b=wo();return h0(b,h,p)},useTransition:function(){var h=Kp(!1);return h=Yp.bind(null,Sr,h.queue,!0,!1),wo().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,p,b){var C=Sr,z=wo();if(Pa){if(b===void 0)throw Error(a(407));b=b()}else{if(b=p(),Un===null)throw Error(a(349));(Ta&124)!==0||Xx(C,p,b)}z.memoizedState=b;var ee={value:b,getSnapshot:p};return z.queue=ee,yy(UA.bind(null,C,ee,h),[h]),C.flags|=2048,Uu(9,Xp(),qp.bind(null,C,ee,b,p),null),b},useId:function(){var h=wo(),p=Un.identifierPrefix;if(Pa){var b=Fu,C=Du;b=(C&~(1<<32-We(C)-1)).toString(32)+b,p="«"+p+"R"+b,b=ds++,0<b&&(p+="H"+b.toString(32)),p+="»"}else b=lc++,p="«"+p+"r"+b.toString(32)+"»";return h.memoizedState=p},useHostTransitionStatus:Zp,useFormState:Wp,useActionState:Wp,useOptimistic:function(h){var p=wo();p.memoizedState=p.baseState=h;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=iT.bind(null,Sr,!0,b),b.dispatch=p,[h,p]},useMemoCache:Yf,useCacheRefresh:function(){return wo().memoizedState=ky.bind(null,Sr)}},c9={readContext:Gs,use:Wo,useCallback:Cy,useContext:Gs,useEffect:YE,useImperativeHandle:Ny,useInsertionEffect:wy,useLayoutEffect:f0,useMemo:ZE,useReducer:Vp,useRef:Jx,useState:function(){return Vp(Xo)},useDebugValue:Ey,useDeferredValue:function(h,p){var b=Gn();return Zx(b,Mr.memoizedState,h,p)},useTransition:function(){var h=Vp(Xo)[0],p=Gn().memoizedState;return[typeof h=="boolean"?h:Xf(h),p]},useSyncExternalStore:Gp,useId:jy,useHostTransitionStatus:Zp,useFormState:Yx,useActionState:Yx,useOptimistic:function(h,p){var b=Gn();return Mu(b,Mr,h,p)},useMemoCache:Yf,useCacheRefresh:eC},Rme={readContext:Gs,use:Wo,useCallback:Cy,useContext:Gs,useEffect:YE,useImperativeHandle:Ny,useInsertionEffect:wy,useLayoutEffect:f0,useMemo:ZE,useReducer:Wx,useRef:Jx,useState:function(){return Wx(Xo)},useDebugValue:Ey,useDeferredValue:function(h,p){var b=Gn();return Mr===null?h0(b,h,p):Zx(b,Mr.memoizedState,h,p)},useTransition:function(){var h=Wx(Xo)[0],p=Gn().memoizedState;return[typeof h=="boolean"?h:Xf(h),p]},useSyncExternalStore:Gp,useId:jy,useHostTransitionStatus:Zp,useFormState:XE,useActionState:XE,useOptimistic:function(h,p){var b=Gn();return Mr!==null?Mu(b,Mr,h,p):(b.baseState=h,[h,b.queue.dispatch])},useMemoCache:Yf,useCacheRefresh:eC},ev=null,Ty=0;function aC(h){var p=Ty;return Ty+=1,ev===null&&(ev=[]),mt(ev,h,p)}function By(h,p){p=p.props.ref,h.ref=p!==void 0?p:null}function nC(h,p){throw p.$$typeof===f?Error(a(525)):(h=Object.prototype.toString.call(p),Error(a(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h)))}function d9(h){var p=h._init;return p(h._payload)}function u9(h){function p(dt,at){if(h){var At=dt.deletions;At===null?(dt.deletions=[at],dt.flags|=16):At.push(at)}}function b(dt,at){if(!h)return null;for(;at!==null;)p(dt,at),at=at.sibling;return null}function C(dt){for(var at=new Map;dt!==null;)dt.key!==null?at.set(dt.key,dt):at.set(dt.index,dt),dt=dt.sibling;return at}function z(dt,at){return dt=Ld(dt,at),dt.index=0,dt.sibling=null,dt}function ee(dt,at,At){return dt.index=At,h?(At=dt.alternate,At!==null?(At=At.index,At<at?(dt.flags|=67108866,at):At):(dt.flags|=67108866,at)):(dt.flags|=1048576,at)}function ye(dt){return h&&dt.alternate===null&&(dt.flags|=67108866),dt}function De(dt,at,At,Ft){return at===null||at.tag!==6?(at=Qx(At,dt.mode,Ft),at.return=dt,at):(at=z(at,At),at.return=dt,at)}function Xe(dt,at,At,Ft){var Ar=At.type;return Ar===g?It(dt,at,At.props.children,Ft,At.key):at!==null&&(at.elementType===Ar||typeof Ar=="object"&&Ar!==null&&Ar.$$typeof===k&&d9(Ar)===at.type)?(at=z(at,At.props),By(at,At),at.return=dt,at):(at=s0(At.type,At.key,At.props,null,dt.mode,Ft),By(at,At),at.return=dt,at)}function gt(dt,at,At,Ft){return at===null||at.tag!==4||at.stateNode.containerInfo!==At.containerInfo||at.stateNode.implementation!==At.implementation?(at=Mp(At,dt.mode,Ft),at.return=dt,at):(at=z(at,At.children||[]),at.return=dt,at)}function It(dt,at,At,Ft,Ar){return at===null||at.tag!==7?(at=Iu(At,dt.mode,Ft,Ar),at.return=dt,at):(at=z(at,At),at.return=dt,at)}function Lt(dt,at,At){if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return at=Qx(""+at,dt.mode,At),at.return=dt,at;if(typeof at=="object"&&at!==null){switch(at.$$typeof){case A:return At=s0(at.type,at.key,at.props,null,dt.mode,At),By(At,at),At.return=dt,At;case m:return at=Mp(at,dt.mode,At),at.return=dt,at;case k:var Ft=at._init;return at=Ft(at._payload),Lt(dt,at,At)}if(K(at)||S(at))return at=Iu(at,dt.mode,At,null),at.return=dt,at;if(typeof at.then=="function")return Lt(dt,aC(at),At);if(at.$$typeof===E)return Lt(dt,qf(dt,at),At);nC(dt,at)}return null}function vt(dt,at,At,Ft){var Ar=at!==null?at.key:null;if(typeof At=="string"&&At!==""||typeof At=="number"||typeof At=="bigint")return Ar!==null?null:De(dt,at,""+At,Ft);if(typeof At=="object"&&At!==null){switch(At.$$typeof){case A:return At.key===Ar?Xe(dt,at,At,Ft):null;case m:return At.key===Ar?gt(dt,at,At,Ft):null;case k:return Ar=At._init,At=Ar(At._payload),vt(dt,at,At,Ft)}if(K(At)||S(At))return Ar!==null?null:It(dt,at,At,Ft,null);if(typeof At.then=="function")return vt(dt,at,aC(At),Ft);if(At.$$typeof===E)return vt(dt,at,qf(dt,At),Ft);nC(dt,At)}return null}function bt(dt,at,At,Ft,Ar){if(typeof Ft=="string"&&Ft!==""||typeof Ft=="number"||typeof Ft=="bigint")return dt=dt.get(At)||null,De(at,dt,""+Ft,Ar);if(typeof Ft=="object"&&Ft!==null){switch(Ft.$$typeof){case A:return dt=dt.get(Ft.key===null?At:Ft.key)||null,Xe(at,dt,Ft,Ar);case m:return dt=dt.get(Ft.key===null?At:Ft.key)||null,gt(at,dt,Ft,Ar);case k:var pa=Ft._init;return Ft=pa(Ft._payload),bt(dt,at,At,Ft,Ar)}if(K(Ft)||S(Ft))return dt=dt.get(At)||null,It(at,dt,Ft,Ar,null);if(typeof Ft.then=="function")return bt(dt,at,At,aC(Ft),Ar);if(Ft.$$typeof===E)return bt(dt,at,At,qf(at,Ft),Ar);nC(at,Ft)}return null}function $r(dt,at,At,Ft){for(var Ar=null,pa=null,wr=at,Or=at=0,to=null;wr!==null&&Or<At.length;Or++){wr.index>Or?(to=wr,wr=null):to=wr.sibling;var qa=vt(dt,wr,At[Or],Ft);if(qa===null){wr===null&&(wr=to);break}h&&wr&&qa.alternate===null&&p(dt,wr),at=ee(qa,at,Or),pa===null?Ar=qa:pa.sibling=qa,pa=qa,wr=to}if(Or===At.length)return b(dt,wr),Pa&&o0(dt,Or),Ar;if(wr===null){for(;Or<At.length;Or++)wr=Lt(dt,At[Or],Ft),wr!==null&&(at=ee(wr,at,Or),pa===null?Ar=wr:pa.sibling=wr,pa=wr);return Pa&&o0(dt,Or),Ar}for(wr=C(wr);Or<At.length;Or++)to=bt(wr,dt,Or,At[Or],Ft),to!==null&&(h&&to.alternate!==null&&wr.delete(to.key===null?Or:to.key),at=ee(to,at,Or),pa===null?Ar=to:pa.sibling=to,pa=to);return h&&wr.forEach(function(sm){return p(dt,sm)}),Pa&&o0(dt,Or),Ar}function Ir(dt,at,At,Ft){if(At==null)throw Error(a(151));for(var Ar=null,pa=null,wr=at,Or=at=0,to=null,qa=At.next();wr!==null&&!qa.done;Or++,qa=At.next()){wr.index>Or?(to=wr,wr=null):to=wr.sibling;var sm=vt(dt,wr,qa.value,Ft);if(sm===null){wr===null&&(wr=to);break}h&&wr&&sm.alternate===null&&p(dt,wr),at=ee(sm,at,Or),pa===null?Ar=sm:pa.sibling=sm,pa=sm,wr=to}if(qa.done)return b(dt,wr),Pa&&o0(dt,Or),Ar;if(wr===null){for(;!qa.done;Or++,qa=At.next())qa=Lt(dt,qa.value,Ft),qa!==null&&(at=ee(qa,at,Or),pa===null?Ar=qa:pa.sibling=qa,pa=qa);return Pa&&o0(dt,Or),Ar}for(wr=C(wr);!qa.done;Or++,qa=At.next())qa=bt(wr,dt,Or,qa.value,Ft),qa!==null&&(h&&qa.alternate!==null&&wr.delete(qa.key===null?Or:qa.key),at=ee(qa,at,Or),pa===null?Ar=qa:pa.sibling=qa,pa=qa);return h&&wr.forEach(function(Lpe){return p(dt,Lpe)}),Pa&&o0(dt,Or),Ar}function jn(dt,at,At,Ft){if(typeof At=="object"&&At!==null&&At.type===g&&At.key===null&&(At=At.props.children),typeof At=="object"&&At!==null){switch(At.$$typeof){case A:e:{for(var Ar=At.key;at!==null;){if(at.key===Ar){if(Ar=At.type,Ar===g){if(at.tag===7){b(dt,at.sibling),Ft=z(at,At.props.children),Ft.return=dt,dt=Ft;break e}}else if(at.elementType===Ar||typeof Ar=="object"&&Ar!==null&&Ar.$$typeof===k&&d9(Ar)===at.type){b(dt,at.sibling),Ft=z(at,At.props),By(Ft,At),Ft.return=dt,dt=Ft;break e}b(dt,at);break}else p(dt,at);at=at.sibling}At.type===g?(Ft=Iu(At.props.children,dt.mode,Ft,At.key),Ft.return=dt,dt=Ft):(Ft=s0(At.type,At.key,At.props,null,dt.mode,Ft),By(Ft,At),Ft.return=dt,dt=Ft)}return ye(dt);case m:e:{for(Ar=At.key;at!==null;){if(at.key===Ar)if(at.tag===4&&at.stateNode.containerInfo===At.containerInfo&&at.stateNode.implementation===At.implementation){b(dt,at.sibling),Ft=z(at,At.children||[]),Ft.return=dt,dt=Ft;break e}else{b(dt,at);break}else p(dt,at);at=at.sibling}Ft=Mp(At,dt.mode,Ft),Ft.return=dt,dt=Ft}return ye(dt);case k:return Ar=At._init,At=Ar(At._payload),jn(dt,at,At,Ft)}if(K(At))return $r(dt,at,At,Ft);if(S(At)){if(Ar=S(At),typeof Ar!="function")throw Error(a(150));return At=Ar.call(At),Ir(dt,at,At,Ft)}if(typeof At.then=="function")return jn(dt,at,aC(At),Ft);if(At.$$typeof===E)return jn(dt,at,qf(dt,At),Ft);nC(dt,At)}return typeof At=="string"&&At!==""||typeof At=="number"||typeof At=="bigint"?(At=""+At,at!==null&&at.tag===6?(b(dt,at.sibling),Ft=z(at,At),Ft.return=dt,dt=Ft):(b(dt,at),Ft=Qx(At,dt.mode,Ft),Ft.return=dt,dt=Ft),ye(dt)):b(dt,at)}return function(dt,at,At,Ft){try{Ty=0;var Ar=jn(dt,at,At,Ft);return ev=null,Ar}catch(wr){if(wr===_e||wr===Ie)throw wr;var pa=Ji(29,wr,null,dt.mode);return pa.lanes=Ft,pa.return=dt,pa}finally{}}}var tv=u9(!0),f9=u9(!1),$d=Y(null),Jf=null;function $A(h){var p=h.alternate;D(Pi,Pi.current&1),D($d,h),Jf===null&&(p===null||la.current!==null||p.memoizedState!==null)&&(Jf=h)}function h9(h){if(h.tag===22){if(D(Pi,Pi.current),D($d,h),Jf===null){var p=h.alternate;p!==null&&p.memoizedState!==null&&(Jf=h)}}else VA()}function VA(){D(Pi,Pi.current),D($d,$d.current)}function A0(h){P($d),Jf===h&&(Jf=null),P(Pi)}var Pi=Y(0);function sC(h){for(var p=h;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||XT(b)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function oT(h,p,b,C){p=h.memoizedState,b=b(C,p),b=b==null?p:u({},p,b),h.memoizedState=b,h.lanes===0&&(h.updateQueue.baseState=b)}var lT={enqueueSetState:function(h,p,b){h=h._reactInternals;var C=Wc(),z=Bt(C);z.payload=p,b!=null&&(z.callback=b),p=Rt(h,z,C),p!==null&&(Xc(p,h,C),Ot(p,h,C))},enqueueReplaceState:function(h,p,b){h=h._reactInternals;var C=Wc(),z=Bt(C);z.tag=1,z.payload=p,b!=null&&(z.callback=b),p=Rt(h,z,C),p!==null&&(Xc(p,h,C),Ot(p,h,C))},enqueueForceUpdate:function(h,p){h=h._reactInternals;var b=Wc(),C=Bt(b);C.tag=2,p!=null&&(C.callback=p),p=Rt(h,C,b),p!==null&&(Xc(p,h,b),Ot(p,h,b))}};function A9(h,p,b,C,z,ee,ye){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(C,ee,ye):p.prototype&&p.prototype.isPureReactComponent?!Ff(b,C)||!Ff(z,ee):!0}function m9(h,p,b,C){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,C),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,C),p.state!==h&&lT.enqueueReplaceState(p,p.state,null)}function eg(h,p){var b=p;if("ref"in p){b={};for(var C in p)C!=="ref"&&(b[C]=p[C])}if(h=h.defaultProps){b===p&&(b=u({},b));for(var z in h)b[z]===void 0&&(b[z]=h[z])}return b}var iC=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)};function p9(h){iC(h)}function g9(h){console.error(h)}function x9(h){iC(h)}function oC(h,p){try{var b=h.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(C){setTimeout(function(){throw C})}}function v9(h,p,b){try{var C=h.onCaughtError;C(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(z){setTimeout(function(){throw z})}}function cT(h,p,b){return b=Bt(b),b.tag=3,b.payload={element:null},b.callback=function(){oC(h,p)},b}function b9(h){return h=Bt(h),h.tag=3,h}function y9(h,p,b,C){var z=b.type.getDerivedStateFromError;if(typeof z=="function"){var ee=C.value;h.payload=function(){return z(ee)},h.callback=function(){v9(p,b,C)}}var ye=b.stateNode;ye!==null&&typeof ye.componentDidCatch=="function"&&(h.callback=function(){v9(p,b,C),typeof z!="function"&&(YA===null?YA=new Set([this]):YA.add(this));var De=C.stack;this.componentDidCatch(C.value,{componentStack:De!==null?De:""})})}function Lme(h,p,b,C,z){if(b.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(p=b.alternate,p!==null&&LA(p,b,z,!0),b=$d.current,b!==null){switch(b.tag){case 13:return Jf===null?OT():b.alternate===null&&ks===0&&(ks=3),b.flags&=-257,b.flags|=65536,b.lanes=z,C===Pe?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([C]):p.add(C),FT(h,C,z)),!1;case 22:return b.flags|=65536,C===Pe?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([C])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([C]):b.add(C)),FT(h,C,z)),!1}throw Error(a(435,b.tag))}return FT(h,C,z),OT(),!1}if(Pa)return p=$d.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=z,C!==my&&(h=Error(a(422),{cause:C}),RA(da(h,b)))):(C!==my&&(p=Error(a(423),{cause:C}),RA(da(p,b))),h=h.current.alternate,h.flags|=65536,z&=-z,h.lanes|=z,C=da(C,b),z=cT(h.stateNode,C,z),nr(h,z),ks!==4&&(ks=2)),!1;var ee=Error(a(520),{cause:C});if(ee=da(ee,b),Ly===null?Ly=[ee]:Ly.push(ee),ks!==4&&(ks=2),p===null)return!0;C=da(C,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,h=z&-z,b.lanes|=h,h=cT(b.stateNode,C,h),nr(b,h),!1;case 1:if(p=b.type,ee=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(YA===null||!YA.has(ee))))return b.flags|=65536,z&=-z,b.lanes|=z,z=b9(z),y9(z,h,b,C),nr(b,z),!1}b=b.return}while(b!==null);return!1}var w9=Error(a(461)),Zi=!1;function No(h,p,b,C){p.child=h===null?f9(p,null,b,C):tv(p,h.child,b,C)}function N9(h,p,b,C,z){b=b.render;var ee=p.ref;if("ref"in C){var ye={};for(var De in C)De!=="ref"&&(ye[De]=C[De])}else ye=C;return Qd(p),C=$c(h,p,b,ye,ee,z),De=Mn(),h!==null&&!Zi?($p(h,p,z),m0(h,p,z)):(Pa&&De&&Up(p),p.flags|=1,No(h,p,C,z),p.child)}function E9(h,p,b,C,z){if(h===null){var ee=b.type;return typeof ee=="function"&&!FA(ee)&&ee.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=ee,C9(h,p,ee,C,z)):(h=s0(b.type,null,C,p,p.mode,z),h.ref=p.ref,h.return=p,p.child=h)}if(ee=h.child,!gT(h,z)){var ye=ee.memoizedProps;if(b=b.compare,b=b!==null?b:Ff,b(ye,C)&&h.ref===p.ref)return m0(h,p,z)}return p.flags|=1,h=Ld(ee,C),h.ref=p.ref,h.return=p,p.child=h}function C9(h,p,b,C,z){if(h!==null){var ee=h.memoizedProps;if(Ff(ee,C)&&h.ref===p.ref)if(Zi=!1,p.pendingProps=C=ee,gT(h,z))(h.flags&131072)!==0&&(Zi=!0);else return p.lanes=h.lanes,m0(h,p,z)}return dT(h,p,b,C,z)}function j9(h,p,b){var C=p.pendingProps,z=C.children,ee=h!==null?h.memoizedState:null;if(C.mode==="hidden"){if((p.flags&128)!==0){if(C=ee!==null?ee.baseLanes|b:b,h!==null){for(z=p.child=h.child,ee=0;z!==null;)ee=ee|z.lanes|z.childLanes,z=z.sibling;p.childLanes=ee&~C}else p.childLanes=0,p.child=null;return k9(h,p,C,b)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},h!==null&&fe(p,ee!==null?ee.cachePool:null),ee!==null?rn(p,ee):Va(),h9(p);else return p.lanes=p.childLanes=536870912,k9(h,p,ee!==null?ee.baseLanes|b:b,b)}else ee!==null?(fe(p,ee.cachePool),rn(p,ee),VA(),p.memoizedState=null):(h!==null&&fe(p,null),Va(),VA());return No(h,p,z,b),p.child}function k9(h,p,b,C){var z=ae();return z=z===null?null:{parent:qs._currentValue,pool:z},p.memoizedState={baseLanes:b,cachePool:z},h!==null&&fe(p,null),Va(),h9(p),h!==null&&LA(h,p,C,!0),null}function lC(h,p){var b=p.ref;if(b===null)h!==null&&h.ref!==null&&(p.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(a(284));(h===null||h.ref!==b)&&(p.flags|=4194816)}}function dT(h,p,b,C,z){return Qd(p),b=$c(h,p,b,C,void 0,z),C=Mn(),h!==null&&!Zi?($p(h,p,z),m0(h,p,z)):(Pa&&C&&Up(p),p.flags|=1,No(h,p,b,z),p.child)}function S9(h,p,b,C,z,ee){return Qd(p),p.updateQueue=null,b=d0(p,C,b,z),Kf(h),C=Mn(),h!==null&&!Zi?($p(h,p,ee),m0(h,p,ee)):(Pa&&C&&Up(p),p.flags|=1,No(h,p,b,ee),p.child)}function _9(h,p,b,C,z){if(Qd(p),p.stateNode===null){var ee=mi,ye=b.contextType;typeof ye=="object"&&ye!==null&&(ee=Gs(ye)),ee=new b(C,ee),p.memoizedState=ee.state!==null&&ee.state!==void 0?ee.state:null,ee.updater=lT,p.stateNode=ee,ee._reactInternals=p,ee=p.stateNode,ee.props=C,ee.state=p.memoizedState,ee.refs={},rt(p),ye=b.contextType,ee.context=typeof ye=="object"&&ye!==null?Gs(ye):mi,ee.state=p.memoizedState,ye=b.getDerivedStateFromProps,typeof ye=="function"&&(oT(p,b,ye,C),ee.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof ee.getSnapshotBeforeUpdate=="function"||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(ye=ee.state,typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount(),ye!==ee.state&&lT.enqueueReplaceState(ee,ee.state,null),er(p,C,ee,z),vr(),ee.state=p.memoizedState),typeof ee.componentDidMount=="function"&&(p.flags|=4194308),C=!0}else if(h===null){ee=p.stateNode;var De=p.memoizedProps,Xe=eg(b,De);ee.props=Xe;var gt=ee.context,It=b.contextType;ye=mi,typeof It=="object"&&It!==null&&(ye=Gs(It));var Lt=b.getDerivedStateFromProps;It=typeof Lt=="function"||typeof ee.getSnapshotBeforeUpdate=="function",De=p.pendingProps!==De,It||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(De||gt!==ye)&&m9(p,ee,C,ye),yt=!1;var vt=p.memoizedState;ee.state=vt,er(p,C,ee,z),vr(),gt=p.memoizedState,De||vt!==gt||yt?(typeof Lt=="function"&&(oT(p,b,Lt,C),gt=p.memoizedState),(Xe=yt||A9(p,b,Xe,C,vt,gt,ye))?(It||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount()),typeof ee.componentDidMount=="function"&&(p.flags|=4194308)):(typeof ee.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=C,p.memoizedState=gt),ee.props=C,ee.state=gt,ee.context=ye,C=Xe):(typeof ee.componentDidMount=="function"&&(p.flags|=4194308),C=!1)}else{ee=p.stateNode,nt(h,p),ye=p.memoizedProps,It=eg(b,ye),ee.props=It,Lt=p.pendingProps,vt=ee.context,gt=b.contextType,Xe=mi,typeof gt=="object"&&gt!==null&&(Xe=Gs(gt)),De=b.getDerivedStateFromProps,(gt=typeof De=="function"||typeof ee.getSnapshotBeforeUpdate=="function")||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(ye!==Lt||vt!==Xe)&&m9(p,ee,C,Xe),yt=!1,vt=p.memoizedState,ee.state=vt,er(p,C,ee,z),vr();var bt=p.memoizedState;ye!==Lt||vt!==bt||yt||h!==null&&h.dependencies!==null&&Gx(h.dependencies)?(typeof De=="function"&&(oT(p,b,De,C),bt=p.memoizedState),(It=yt||A9(p,b,It,C,vt,bt,Xe)||h!==null&&h.dependencies!==null&&Gx(h.dependencies))?(gt||typeof ee.UNSAFE_componentWillUpdate!="function"&&typeof ee.componentWillUpdate!="function"||(typeof ee.componentWillUpdate=="function"&&ee.componentWillUpdate(C,bt,Xe),typeof ee.UNSAFE_componentWillUpdate=="function"&&ee.UNSAFE_componentWillUpdate(C,bt,Xe)),typeof ee.componentDidUpdate=="function"&&(p.flags|=4),typeof ee.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof ee.componentDidUpdate!="function"||ye===h.memoizedProps&&vt===h.memoizedState||(p.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||ye===h.memoizedProps&&vt===h.memoizedState||(p.flags|=1024),p.memoizedProps=C,p.memoizedState=bt),ee.props=C,ee.state=bt,ee.context=Xe,C=It):(typeof ee.componentDidUpdate!="function"||ye===h.memoizedProps&&vt===h.memoizedState||(p.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||ye===h.memoizedProps&&vt===h.memoizedState||(p.flags|=1024),C=!1)}return ee=C,lC(h,p),C=(p.flags&128)!==0,ee||C?(ee=p.stateNode,b=C&&typeof b.getDerivedStateFromError!="function"?null:ee.render(),p.flags|=1,h!==null&&C?(p.child=tv(p,h.child,null,z),p.child=tv(p,null,b,z)):No(h,p,b,z),p.memoizedState=ee.state,h=p.child):h=m0(h,p,z),h}function T9(h,p,b,C){return Fl(),p.flags|=256,No(h,p,b,C),p.child}var uT={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fT(h){return{baseLanes:h,cachePool:Ce()}}function hT(h,p,b){return h=h!==null?h.childLanes&~b:0,p&&(h|=Vd),h}function B9(h,p,b){var C=p.pendingProps,z=!1,ee=(p.flags&128)!==0,ye;if((ye=ee)||(ye=h!==null&&h.memoizedState===null?!1:(Pi.current&2)!==0),ye&&(z=!0,p.flags&=-129),ye=(p.flags&32)!==0,p.flags&=-33,h===null){if(Pa){if(z?$A(p):VA(),Pa){var De=ts,Xe;if(Xe=De){e:{for(Xe=De,De=Md;Xe.nodeType!==8;){if(!De){De=null;break e}if(Xe=$u(Xe.nextSibling),Xe===null){De=null;break e}}De=Xe}De!==null?(p.memoizedState={dehydrated:De,treeContext:i0!==null?{id:Du,overflow:Fu}:null,retryLane:536870912,hydrationErrors:null},Xe=Ji(18,null,null,0),Xe.stateNode=De,Xe.return=p,p.child=Xe,Vs=p,ts=null,Xe=!0):Xe=!1}Xe||l0(p)}if(De=p.memoizedState,De!==null&&(De=De.dehydrated,De!==null))return XT(De)?p.lanes=32:p.lanes=536870912,null;A0(p)}return De=C.children,C=C.fallback,z?(VA(),z=p.mode,De=cC({mode:"hidden",children:De},z),C=Iu(C,z,b,null),De.return=p,C.return=p,De.sibling=C,p.child=De,z=p.child,z.memoizedState=fT(b),z.childLanes=hT(h,ye,b),p.memoizedState=uT,C):($A(p),AT(p,De))}if(Xe=h.memoizedState,Xe!==null&&(De=Xe.dehydrated,De!==null)){if(ee)p.flags&256?($A(p),p.flags&=-257,p=mT(h,p,b)):p.memoizedState!==null?(VA(),p.child=h.child,p.flags|=128,p=null):(VA(),z=C.fallback,De=p.mode,C=cC({mode:"visible",children:C.children},De),z=Iu(z,De,b,null),z.flags|=2,C.return=p,z.return=p,C.sibling=z,p.child=C,tv(p,h.child,null,b),C=p.child,C.memoizedState=fT(b),C.childLanes=hT(h,ye,b),p.memoizedState=uT,p=z);else if($A(p),XT(De)){if(ye=De.nextSibling&&De.nextSibling.dataset,ye)var gt=ye.dgst;ye=gt,C=Error(a(419)),C.stack="",C.digest=ye,RA({value:C,source:null,stack:null}),p=mT(h,p,b)}else if(Zi||LA(h,p,b,!1),ye=(b&h.childLanes)!==0,Zi||ye){if(ye=Un,ye!==null&&(C=b&-b,C=(C&42)!==0?1:vs(C),C=(C&(ye.suspendedLanes|b))!==0?0:C,C!==0&&C!==Xe.retryLane))throw Xe.retryLane=C,Bu(h,C),Xc(ye,h,C),w9;De.data==="$?"||OT(),p=mT(h,p,b)}else De.data==="$?"?(p.flags|=192,p.child=h.child,p=null):(h=Xe.treeContext,ts=$u(De.nextSibling),Vs=p,Pa=!0,Vf=null,Md=!1,h!==null&&(oc[Dl++]=Du,oc[Dl++]=Fu,oc[Dl++]=i0,Du=h.id,Fu=h.overflow,i0=p),p=AT(p,C.children),p.flags|=4096);return p}return z?(VA(),z=C.fallback,De=p.mode,Xe=h.child,gt=Xe.sibling,C=Ld(Xe,{mode:"hidden",children:C.children}),C.subtreeFlags=Xe.subtreeFlags&65011712,gt!==null?z=Ld(gt,z):(z=Iu(z,De,b,null),z.flags|=2),z.return=p,C.return=p,C.sibling=z,p.child=C,C=z,z=p.child,De=h.child.memoizedState,De===null?De=fT(b):(Xe=De.cachePool,Xe!==null?(gt=qs._currentValue,Xe=Xe.parent!==gt?{parent:gt,pool:gt}:Xe):Xe=Ce(),De={baseLanes:De.baseLanes|b,cachePool:Xe}),z.memoizedState=De,z.childLanes=hT(h,ye,b),p.memoizedState=uT,C):($A(p),b=h.child,h=b.sibling,b=Ld(b,{mode:"visible",children:C.children}),b.return=p,b.sibling=null,h!==null&&(ye=p.deletions,ye===null?(p.deletions=[h],p.flags|=16):ye.push(h)),p.child=b,p.memoizedState=null,b)}function AT(h,p){return p=cC({mode:"visible",children:p},h.mode),p.return=h,h.child=p}function cC(h,p){return h=Ji(22,h,null,p),h.lanes=0,h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},h}function mT(h,p,b){return tv(p,h.child,null,b),h=AT(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function I9(h,p,b){h.lanes|=p;var C=h.alternate;C!==null&&(C.lanes|=p),$x(h.return,p,b)}function pT(h,p,b,C,z){var ee=h.memoizedState;ee===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:C,tail:b,tailMode:z}:(ee.isBackwards=p,ee.rendering=null,ee.renderingStartTime=0,ee.last=C,ee.tail=b,ee.tailMode=z)}function O9(h,p,b){var C=p.pendingProps,z=C.revealOrder,ee=C.tail;if(No(h,p,C.children,b),C=Pi.current,(C&2)!==0)C=C&1|2,p.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&I9(h,b,p);else if(h.tag===19)I9(h,b,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}C&=1}switch(D(Pi,C),z){case"forwards":for(b=p.child,z=null;b!==null;)h=b.alternate,h!==null&&sC(h)===null&&(z=b),b=b.sibling;b=z,b===null?(z=p.child,p.child=null):(z=b.sibling,b.sibling=null),pT(p,!1,z,b,ee);break;case"backwards":for(b=null,z=p.child,p.child=null;z!==null;){if(h=z.alternate,h!==null&&sC(h)===null){p.child=z;break}h=z.sibling,z.sibling=b,b=z,z=h}pT(p,!0,b,null,ee);break;case"together":pT(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function m0(h,p,b){if(h!==null&&(p.dependencies=h.dependencies),XA|=p.lanes,(b&p.childLanes)===0)if(h!==null){if(LA(h,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(h!==null&&p.child!==h.child)throw Error(a(153));if(p.child!==null){for(h=p.child,b=Ld(h,h.pendingProps),p.child=b,b.return=p;h.sibling!==null;)h=h.sibling,b=b.sibling=Ld(h,h.pendingProps),b.return=p;b.sibling=null}return p.child}function gT(h,p){return(h.lanes&p)!==0?!0:(h=h.dependencies,!!(h!==null&&Gx(h)))}function Mme(h,p,b){switch(p.tag){case 3:re(p,p.stateNode.containerInfo),Gf(p,qs,h.memoizedState.cache),Fl();break;case 27:case 5:oe(p);break;case 4:re(p,p.stateNode.containerInfo);break;case 10:Gf(p,p.type,p.memoizedProps.value);break;case 13:var C=p.memoizedState;if(C!==null)return C.dehydrated!==null?($A(p),p.flags|=128,null):(b&p.child.childLanes)!==0?B9(h,p,b):($A(p),h=m0(h,p,b),h!==null?h.sibling:null);$A(p);break;case 19:var z=(h.flags&128)!==0;if(C=(b&p.childLanes)!==0,C||(LA(h,p,b,!1),C=(b&p.childLanes)!==0),z){if(C)return O9(h,p,b);p.flags|=128}if(z=p.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),D(Pi,Pi.current),C)break;return null;case 22:case 23:return p.lanes=0,j9(h,p,b);case 24:Gf(p,qs,h.memoizedState.cache)}return m0(h,p,b)}function D9(h,p,b){if(h!==null)if(h.memoizedProps!==p.pendingProps)Zi=!0;else{if(!gT(h,b)&&(p.flags&128)===0)return Zi=!1,Mme(h,p,b);Zi=(h.flags&131072)!==0}else Zi=!1,Pa&&(p.flags&1048576)!==0&&ME(p,zx,p.index);switch(p.lanes=0,p.tag){case 16:e:{h=p.pendingProps;var C=p.elementType,z=C._init;if(C=z(C._payload),p.type=C,typeof C=="function")FA(C)?(h=eg(C,h),p.tag=1,p=_9(null,p,C,h,b)):(p.tag=0,p=dT(null,p,C,h,b));else{if(C!=null){if(z=C.$$typeof,z===B){p.tag=11,p=N9(null,p,C,h,b);break e}else if(z===j){p.tag=14,p=E9(null,p,C,h,b);break e}}throw p=H(C)||C,Error(a(306,p,""))}}return p;case 0:return dT(h,p,p.type,p.pendingProps,b);case 1:return C=p.type,z=eg(C,p.pendingProps),_9(h,p,C,z,b);case 3:e:{if(re(p,p.stateNode.containerInfo),h===null)throw Error(a(387));C=p.pendingProps;var ee=p.memoizedState;z=ee.element,nt(h,p),er(p,C,null,b);var ye=p.memoizedState;if(C=ye.cache,Gf(p,qs,C),C!==ee.cache&&Vx(p,[qs],b,!0),vr(),C=ye.element,ee.isDehydrated)if(ee={element:C,isDehydrated:!1,cache:ye.cache},p.updateQueue.baseState=ee,p.memoizedState=ee,p.flags&256){p=T9(h,p,C,b);break e}else if(C!==z){z=da(Error(a(424)),p),RA(z),p=T9(h,p,C,b);break e}else{switch(h=p.stateNode.containerInfo,h.nodeType){case 9:h=h.body;break;default:h=h.nodeName==="HTML"?h.ownerDocument.body:h}for(ts=$u(h.firstChild),Vs=p,Pa=!0,Vf=null,Md=!0,b=f9(p,null,C,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(Fl(),C===z){p=m0(h,p,b);break e}No(h,p,C,b)}p=p.child}return p;case 26:return lC(h,p),h===null?(b=LH(p.type,null,p.pendingProps,null))?p.memoizedState=b:Pa||(b=p.type,h=p.pendingProps,C=NC(ce.current).createElement(b),C[va]=p,C[ca]=h,Co(C,b,h),Ue(C),p.stateNode=C):p.memoizedState=LH(p.type,h.memoizedProps,p.pendingProps,h.memoizedState),null;case 27:return oe(p),h===null&&Pa&&(C=p.stateNode=FH(p.type,p.pendingProps,ce.current),Vs=p,Md=!0,z=ts,em(p.type)?(YT=z,ts=$u(C.firstChild)):ts=z),No(h,p,p.pendingProps.children,b),lC(h,p),h===null&&(p.flags|=4194304),p.child;case 5:return h===null&&Pa&&((z=C=ts)&&(C=hpe(C,p.type,p.pendingProps,Md),C!==null?(p.stateNode=C,Vs=p,ts=$u(C.firstChild),Md=!1,z=!0):z=!1),z||l0(p)),oe(p),z=p.type,ee=p.pendingProps,ye=h!==null?h.memoizedProps:null,C=ee.children,qT(z,ee)?C=null:ye!==null&&qT(z,ye)&&(p.flags|=32),p.memoizedState!==null&&(z=$c(h,p,Wf,null,null,b),qy._currentValue=z),lC(h,p),No(h,p,C,b),p.child;case 6:return h===null&&Pa&&((h=b=ts)&&(b=Ape(b,p.pendingProps,Md),b!==null?(p.stateNode=b,Vs=p,ts=null,h=!0):h=!1),h||l0(p)),null;case 13:return B9(h,p,b);case 4:return re(p,p.stateNode.containerInfo),C=p.pendingProps,h===null?p.child=tv(p,null,C,b):No(h,p,C,b),p.child;case 11:return N9(h,p,p.type,p.pendingProps,b);case 7:return No(h,p,p.pendingProps,b),p.child;case 8:return No(h,p,p.pendingProps.children,b),p.child;case 12:return No(h,p,p.pendingProps.children,b),p.child;case 10:return C=p.pendingProps,Gf(p,p.type,C.value),No(h,p,C.children,b),p.child;case 9:return z=p.type._context,C=p.pendingProps.children,Qd(p),z=Gs(z),C=C(z),p.flags|=1,No(h,p,C,b),p.child;case 14:return E9(h,p,p.type,p.pendingProps,b);case 15:return C9(h,p,p.type,p.pendingProps,b);case 19:return O9(h,p,b);case 31:return C=p.pendingProps,b=p.mode,C={mode:C.mode,children:C.children},h===null?(b=cC(C,b),b.ref=p.ref,p.child=b,b.return=p,p=b):(b=Ld(h.child,C),b.ref=p.ref,p.child=b,b.return=p,p=b),p;case 22:return j9(h,p,b);case 24:return Qd(p),C=Gs(qs),h===null?(z=ae(),z===null&&(z=Un,ee=py(),z.pooledCache=ee,ee.refCount++,ee!==null&&(z.pooledCacheLanes|=b),z=ee),p.memoizedState={parent:C,cache:z},rt(p),Gf(p,qs,z)):((h.lanes&b)!==0&&(nt(h,p),er(p,null,null,b),vr()),z=h.memoizedState,ee=p.memoizedState,z.parent!==C?(z={parent:C,cache:C},p.memoizedState=z,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=z),Gf(p,qs,C)):(C=ee.cache,Gf(p,qs,C),C!==z.cache&&Vx(p,[qs],b,!0))),No(h,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(a(156,p.tag))}function p0(h){h.flags|=4}function F9(h,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)h.flags&=-16777217;else if(h.flags|=16777216,!zH(p)){if(p=$d.current,p!==null&&((Ta&4194048)===Ta?Jf!==null:(Ta&62914560)!==Ta&&(Ta&536870912)===0||p!==Jf))throw ht=Pe,Be;h.flags|=8192}}function dC(h,p){p!==null&&(h.flags|=4),h.flags&16384&&(p=h.tag!==22?Rr():536870912,h.lanes|=p,sv|=p)}function Iy(h,p){if(!Pa)switch(h.tailMode){case"hidden":p=h.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?h.tail=null:b.sibling=null;break;case"collapsed":b=h.tail;for(var C=null;b!==null;)b.alternate!==null&&(C=b),b=b.sibling;C===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:C.sibling=null}}function fs(h){var p=h.alternate!==null&&h.alternate.child===h.child,b=0,C=0;if(p)for(var z=h.child;z!==null;)b|=z.lanes|z.childLanes,C|=z.subtreeFlags&65011712,C|=z.flags&65011712,z.return=h,z=z.sibling;else for(z=h.child;z!==null;)b|=z.lanes|z.childLanes,C|=z.subtreeFlags,C|=z.flags,z.return=h,z=z.sibling;return h.subtreeFlags|=C,h.childLanes=b,p}function Ume(h,p,b){var C=p.pendingProps;switch(Hp(p),p.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fs(p),null;case 1:return fs(p),null;case 3:return b=p.stateNode,C=null,h!==null&&(C=h.memoizedState.cache),p.memoizedState.cache!==C&&(p.flags|=2048),Hd(qs),de(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(h===null||h.child===null)&&(yo(p)?p0(p):h===null||h.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,HE())),fs(p),null;case 26:return b=p.memoizedState,h===null?(p0(p),b!==null?(fs(p),F9(p,b)):(fs(p),p.flags&=-16777217)):b?b!==h.memoizedState?(p0(p),fs(p),F9(p,b)):(fs(p),p.flags&=-16777217):(h.memoizedProps!==C&&p0(p),fs(p),p.flags&=-16777217),null;case 27:be(p),b=ce.current;var z=p.type;if(h!==null&&p.stateNode!=null)h.memoizedProps!==C&&p0(p);else{if(!C){if(p.stateNode===null)throw Error(a(166));return fs(p),null}h=W.current,yo(p)?UE(p):(h=FH(z,C,b),p.stateNode=h,p0(p))}return fs(p),null;case 5:if(be(p),b=p.type,h!==null&&p.stateNode!=null)h.memoizedProps!==C&&p0(p);else{if(!C){if(p.stateNode===null)throw Error(a(166));return fs(p),null}if(h=W.current,yo(p))UE(p);else{switch(z=NC(ce.current),h){case 1:h=z.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:h=z.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":h=z.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":h=z.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":h=z.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof C.is=="string"?z.createElement("select",{is:C.is}):z.createElement("select"),C.multiple?h.multiple=!0:C.size&&(h.size=C.size);break;default:h=typeof C.is=="string"?z.createElement(b,{is:C.is}):z.createElement(b)}}h[va]=p,h[ca]=C;e:for(z=p.child;z!==null;){if(z.tag===5||z.tag===6)h.appendChild(z.stateNode);else if(z.tag!==4&&z.tag!==27&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===p)break e;for(;z.sibling===null;){if(z.return===null||z.return===p)break e;z=z.return}z.sibling.return=z.return,z=z.sibling}p.stateNode=h;e:switch(Co(h,b,C),b){case"button":case"input":case"select":case"textarea":h=!!C.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&p0(p)}}return fs(p),p.flags&=-16777217,null;case 6:if(h&&p.stateNode!=null)h.memoizedProps!==C&&p0(p);else{if(typeof C!="string"&&p.stateNode===null)throw Error(a(166));if(h=ce.current,yo(p)){if(h=p.stateNode,b=p.memoizedProps,C=null,z=Vs,z!==null)switch(z.tag){case 27:case 5:C=z.memoizedProps}h[va]=p,h=!!(h.nodeValue===b||C!==null&&C.suppressHydrationWarning===!0||SH(h.nodeValue,b)),h||l0(p)}else h=NC(h).createTextNode(C),h[va]=p,p.stateNode=h}return fs(p),null;case 13:if(C=p.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(z=yo(p),C!==null&&C.dehydrated!==null){if(h===null){if(!z)throw Error(a(318));if(z=p.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(a(317));z[va]=p}else Fl(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;fs(p),z=!1}else z=HE(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=z),z=!0;if(!z)return p.flags&256?(A0(p),p):(A0(p),null)}if(A0(p),(p.flags&128)!==0)return p.lanes=b,p;if(b=C!==null,h=h!==null&&h.memoizedState!==null,b){C=p.child,z=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(z=C.alternate.memoizedState.cachePool.pool);var ee=null;C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(ee=C.memoizedState.cachePool.pool),ee!==z&&(C.flags|=2048)}return b!==h&&b&&(p.child.flags|=8192),dC(p,p.updateQueue),fs(p),null;case 4:return de(),h===null&&QT(p.stateNode.containerInfo),fs(p),null;case 10:return Hd(p.type),fs(p),null;case 19:if(P(Pi),z=p.memoizedState,z===null)return fs(p),null;if(C=(p.flags&128)!==0,ee=z.rendering,ee===null)if(C)Iy(z,!1);else{if(ks!==0||h!==null&&(h.flags&128)!==0)for(h=p.child;h!==null;){if(ee=sC(h),ee!==null){for(p.flags|=128,Iy(z,!1),h=ee.updateQueue,p.updateQueue=h,dC(p,h),p.subtreeFlags=0,h=b,b=p.child;b!==null;)Lp(b,h),b=b.sibling;return D(Pi,Pi.current&1|2),p.child}h=h.sibling}z.tail!==null&&ge()>hC&&(p.flags|=128,C=!0,Iy(z,!1),p.lanes=4194304)}else{if(!C)if(h=sC(ee),h!==null){if(p.flags|=128,C=!0,h=h.updateQueue,p.updateQueue=h,dC(p,h),Iy(z,!0),z.tail===null&&z.tailMode==="hidden"&&!ee.alternate&&!Pa)return fs(p),null}else 2*ge()-z.renderingStartTime>hC&&b!==536870912&&(p.flags|=128,C=!0,Iy(z,!1),p.lanes=4194304);z.isBackwards?(ee.sibling=p.child,p.child=ee):(h=z.last,h!==null?h.sibling=ee:p.child=ee,z.last=ee)}return z.tail!==null?(p=z.tail,z.rendering=p,z.tail=p.sibling,z.renderingStartTime=ge(),p.sibling=null,h=Pi.current,D(Pi,C?h&1|2:h&1),p):(fs(p),null);case 22:case 23:return A0(p),qr(),C=p.memoizedState!==null,h!==null?h.memoizedState!==null!==C&&(p.flags|=8192):C&&(p.flags|=8192),C?(b&536870912)!==0&&(p.flags&128)===0&&(fs(p),p.subtreeFlags&6&&(p.flags|=8192)):fs(p),b=p.updateQueue,b!==null&&dC(p,b.retryQueue),b=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),C=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),C!==b&&(p.flags|=2048),h!==null&&P(V),null;case 24:return b=null,h!==null&&(b=h.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),Hd(qs),fs(p),null;case 25:return null;case 30:return null}throw Error(a(156,p.tag))}function Hme(h,p){switch(Hp(p),p.tag){case 1:return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return Hd(qs),de(),h=p.flags,(h&65536)!==0&&(h&128)===0?(p.flags=h&-65537|128,p):null;case 26:case 27:case 5:return be(p),null;case 13:if(A0(p),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(a(340));Fl()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return P(Pi),null;case 4:return de(),null;case 10:return Hd(p.type),null;case 22:case 23:return A0(p),qr(),h!==null&&P(V),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 24:return Hd(qs),null;case 25:return null;default:return null}}function P9(h,p){switch(Hp(p),p.tag){case 3:Hd(qs),de();break;case 26:case 27:case 5:be(p);break;case 4:de();break;case 13:A0(p);break;case 19:P(Pi);break;case 10:Hd(p.type);break;case 22:case 23:A0(p),qr(),h!==null&&P(V);break;case 24:Hd(qs)}}function Oy(h,p){try{var b=p.updateQueue,C=b!==null?b.lastEffect:null;if(C!==null){var z=C.next;b=z;do{if((b.tag&h)===h){C=void 0;var ee=b.create,ye=b.inst;C=ee(),ye.destroy=C}b=b.next}while(b!==z)}}catch(De){Bn(p,p.return,De)}}function GA(h,p,b){try{var C=p.updateQueue,z=C!==null?C.lastEffect:null;if(z!==null){var ee=z.next;C=ee;do{if((C.tag&h)===h){var ye=C.inst,De=ye.destroy;if(De!==void 0){ye.destroy=void 0,z=p;var Xe=b,gt=De;try{gt()}catch(It){Bn(z,Xe,It)}}}C=C.next}while(C!==ee)}}catch(It){Bn(p,p.return,It)}}function R9(h){var p=h.updateQueue;if(p!==null){var b=h.stateNode;try{$a(p,b)}catch(C){Bn(h,h.return,C)}}}function L9(h,p,b){b.props=eg(h.type,h.memoizedProps),b.state=h.memoizedState;try{b.componentWillUnmount()}catch(C){Bn(h,p,C)}}function Dy(h,p){try{var b=h.ref;if(b!==null){switch(h.tag){case 26:case 27:case 5:var C=h.stateNode;break;case 30:C=h.stateNode;break;default:C=h.stateNode}typeof b=="function"?h.refCleanup=b(C):b.current=C}}catch(z){Bn(h,p,z)}}function Zf(h,p){var b=h.ref,C=h.refCleanup;if(b!==null)if(typeof C=="function")try{C()}catch(z){Bn(h,p,z)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(z){Bn(h,p,z)}else b.current=null}function M9(h){var p=h.type,b=h.memoizedProps,C=h.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":b.autoFocus&&C.focus();break e;case"img":b.src?C.src=b.src:b.srcSet&&(C.srcset=b.srcSet)}}catch(z){Bn(h,h.return,z)}}function xT(h,p,b){try{var C=h.stateNode;lpe(C,h.type,b,p),C[ca]=p}catch(z){Bn(h,h.return,z)}}function U9(h){return h.tag===5||h.tag===3||h.tag===26||h.tag===27&&em(h.type)||h.tag===4}function vT(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||U9(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.tag===27&&em(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function bT(h,p,b){var C=h.tag;if(C===5||C===6)h=h.stateNode,p?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(h,p):(p=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,p.appendChild(h),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=wC));else if(C!==4&&(C===27&&em(h.type)&&(b=h.stateNode,p=null),h=h.child,h!==null))for(bT(h,p,b),h=h.sibling;h!==null;)bT(h,p,b),h=h.sibling}function uC(h,p,b){var C=h.tag;if(C===5||C===6)h=h.stateNode,p?b.insertBefore(h,p):b.appendChild(h);else if(C!==4&&(C===27&&em(h.type)&&(b=h.stateNode),h=h.child,h!==null))for(uC(h,p,b),h=h.sibling;h!==null;)uC(h,p,b),h=h.sibling}function H9(h){var p=h.stateNode,b=h.memoizedProps;try{for(var C=h.type,z=p.attributes;z.length;)p.removeAttributeNode(z[0]);Co(p,C,b),p[va]=h,p[ca]=b}catch(ee){Bn(h,h.return,ee)}}var g0=!1,Ws=!1,yT=!1,Q9=typeof WeakSet=="function"?WeakSet:Set,eo=null;function Qme(h,p){if(h=h.containerInfo,VT=_C,h=bo(h),Fi(h)){if("selectionStart"in h)var b={start:h.selectionStart,end:h.selectionEnd};else e:{b=(b=h.ownerDocument)&&b.defaultView||window;var C=b.getSelection&&b.getSelection();if(C&&C.rangeCount!==0){b=C.anchorNode;var z=C.anchorOffset,ee=C.focusNode;C=C.focusOffset;try{b.nodeType,ee.nodeType}catch{b=null;break e}var ye=0,De=-1,Xe=-1,gt=0,It=0,Lt=h,vt=null;t:for(;;){for(var bt;Lt!==b||z!==0&&Lt.nodeType!==3||(De=ye+z),Lt!==ee||C!==0&&Lt.nodeType!==3||(Xe=ye+C),Lt.nodeType===3&&(ye+=Lt.nodeValue.length),(bt=Lt.firstChild)!==null;)vt=Lt,Lt=bt;for(;;){if(Lt===h)break t;if(vt===b&&++gt===z&&(De=ye),vt===ee&&++It===C&&(Xe=ye),(bt=Lt.nextSibling)!==null)break;Lt=vt,vt=Lt.parentNode}Lt=bt}b=De===-1||Xe===-1?null:{start:De,end:Xe}}else b=null}b=b||{start:0,end:0}}else b=null;for(GT={focusedElem:h,selectionRange:b},_C=!1,eo=p;eo!==null;)if(p=eo,h=p.child,(p.subtreeFlags&1024)!==0&&h!==null)h.return=p,eo=h;else for(;eo!==null;){switch(p=eo,ee=p.alternate,h=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&ee!==null){h=void 0,b=p,z=ee.memoizedProps,ee=ee.memoizedState,C=b.stateNode;try{var $r=eg(b.type,z,b.elementType===b.type);h=C.getSnapshotBeforeUpdate($r,ee),C.__reactInternalSnapshotBeforeUpdate=h}catch(Ir){Bn(b,b.return,Ir)}}break;case 3:if((h&1024)!==0){if(h=p.stateNode.containerInfo,b=h.nodeType,b===9)WT(h);else if(b===1)switch(h.nodeName){case"HEAD":case"HTML":case"BODY":WT(h);break;default:h.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(a(163))}if(h=p.sibling,h!==null){h.return=p.return,eo=h;break}eo=p.return}}function z9(h,p,b){var C=b.flags;switch(b.tag){case 0:case 11:case 15:qA(h,b),C&4&&Oy(5,b);break;case 1:if(qA(h,b),C&4)if(h=b.stateNode,p===null)try{h.componentDidMount()}catch(ye){Bn(b,b.return,ye)}else{var z=eg(b.type,p.memoizedProps);p=p.memoizedState;try{h.componentDidUpdate(z,p,h.__reactInternalSnapshotBeforeUpdate)}catch(ye){Bn(b,b.return,ye)}}C&64&&R9(b),C&512&&Dy(b,b.return);break;case 3:if(qA(h,b),C&64&&(h=b.updateQueue,h!==null)){if(p=null,b.child!==null)switch(b.child.tag){case 27:case 5:p=b.child.stateNode;break;case 1:p=b.child.stateNode}try{$a(h,p)}catch(ye){Bn(b,b.return,ye)}}break;case 27:p===null&&C&4&&H9(b);case 26:case 5:qA(h,b),p===null&&C&4&&M9(b),C&512&&Dy(b,b.return);break;case 12:qA(h,b);break;case 13:qA(h,b),C&4&&G9(h,b),C&64&&(h=b.memoizedState,h!==null&&(h=h.dehydrated,h!==null&&(b=Yme.bind(null,b),mpe(h,b))));break;case 22:if(C=b.memoizedState!==null||g0,!C){p=p!==null&&p.memoizedState!==null||Ws,z=g0;var ee=Ws;g0=C,(Ws=p)&&!ee?KA(h,b,(b.subtreeFlags&8772)!==0):qA(h,b),g0=z,Ws=ee}break;case 30:break;default:qA(h,b)}}function $9(h){var p=h.alternate;p!==null&&(h.alternate=null,$9(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&He(p)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}var rs=null,cc=!1;function x0(h,p,b){for(b=b.child;b!==null;)V9(h,p,b),b=b.sibling}function V9(h,p,b){if(ze&&typeof ze.onCommitFiberUnmount=="function")try{ze.onCommitFiberUnmount(qe,b)}catch{}switch(b.tag){case 26:Ws||Zf(b,p),x0(h,p,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:Ws||Zf(b,p);var C=rs,z=cc;em(b.type)&&(rs=b.stateNode,cc=!1),x0(h,p,b),zy(b.stateNode),rs=C,cc=z;break;case 5:Ws||Zf(b,p);case 6:if(C=rs,z=cc,rs=null,x0(h,p,b),rs=C,cc=z,rs!==null)if(cc)try{(rs.nodeType===9?rs.body:rs.nodeName==="HTML"?rs.ownerDocument.body:rs).removeChild(b.stateNode)}catch(ee){Bn(b,p,ee)}else try{rs.removeChild(b.stateNode)}catch(ee){Bn(b,p,ee)}break;case 18:rs!==null&&(cc?(h=rs,OH(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,b.stateNode),Yy(h)):OH(rs,b.stateNode));break;case 4:C=rs,z=cc,rs=b.stateNode.containerInfo,cc=!0,x0(h,p,b),rs=C,cc=z;break;case 0:case 11:case 14:case 15:Ws||GA(2,b,p),Ws||GA(4,b,p),x0(h,p,b);break;case 1:Ws||(Zf(b,p),C=b.stateNode,typeof C.componentWillUnmount=="function"&&L9(b,p,C)),x0(h,p,b);break;case 21:x0(h,p,b);break;case 22:Ws=(C=Ws)||b.memoizedState!==null,x0(h,p,b),Ws=C;break;default:x0(h,p,b)}}function G9(h,p){if(p.memoizedState===null&&(h=p.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{Yy(h)}catch(b){Bn(p,p.return,b)}}function zme(h){switch(h.tag){case 13:case 19:var p=h.stateNode;return p===null&&(p=h.stateNode=new Q9),p;case 22:return h=h.stateNode,p=h._retryCache,p===null&&(p=h._retryCache=new Q9),p;default:throw Error(a(435,h.tag))}}function wT(h,p){var b=zme(h);p.forEach(function(C){var z=Jme.bind(null,h,C);b.has(C)||(b.add(C),C.then(z,z))})}function Gc(h,p){var b=p.deletions;if(b!==null)for(var C=0;C<b.length;C++){var z=b[C],ee=h,ye=p,De=ye;e:for(;De!==null;){switch(De.tag){case 27:if(em(De.type)){rs=De.stateNode,cc=!1;break e}break;case 5:rs=De.stateNode,cc=!1;break e;case 3:case 4:rs=De.stateNode.containerInfo,cc=!0;break e}De=De.return}if(rs===null)throw Error(a(160));V9(ee,ye,z),rs=null,cc=!1,ee=z.alternate,ee!==null&&(ee.return=null),z.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)q9(p,h),p=p.sibling}var zu=null;function q9(h,p){var b=h.alternate,C=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:Gc(p,h),qc(h),C&4&&(GA(3,h,h.return),Oy(3,h),GA(5,h,h.return));break;case 1:Gc(p,h),qc(h),C&512&&(Ws||b===null||Zf(b,b.return)),C&64&&g0&&(h=h.updateQueue,h!==null&&(C=h.callbacks,C!==null&&(b=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=b===null?C:b.concat(C))));break;case 26:var z=zu;if(Gc(p,h),qc(h),C&512&&(Ws||b===null||Zf(b,b.return)),C&4){var ee=b!==null?b.memoizedState:null;if(C=h.memoizedState,b===null)if(C===null)if(h.stateNode===null){e:{C=h.type,b=h.memoizedProps,z=z.ownerDocument||z;t:switch(C){case"title":ee=z.getElementsByTagName("title")[0],(!ee||ee[Me]||ee[va]||ee.namespaceURI==="http://www.w3.org/2000/svg"||ee.hasAttribute("itemprop"))&&(ee=z.createElement(C),z.head.insertBefore(ee,z.querySelector("head > title"))),Co(ee,C,b),ee[va]=h,Ue(ee),C=ee;break e;case"link":var ye=HH("link","href",z).get(C+(b.href||""));if(ye){for(var De=0;De<ye.length;De++)if(ee=ye[De],ee.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&ee.getAttribute("rel")===(b.rel==null?null:b.rel)&&ee.getAttribute("title")===(b.title==null?null:b.title)&&ee.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){ye.splice(De,1);break t}}ee=z.createElement(C),Co(ee,C,b),z.head.appendChild(ee);break;case"meta":if(ye=HH("meta","content",z).get(C+(b.content||""))){for(De=0;De<ye.length;De++)if(ee=ye[De],ee.getAttribute("content")===(b.content==null?null:""+b.content)&&ee.getAttribute("name")===(b.name==null?null:b.name)&&ee.getAttribute("property")===(b.property==null?null:b.property)&&ee.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&ee.getAttribute("charset")===(b.charSet==null?null:b.charSet)){ye.splice(De,1);break t}}ee=z.createElement(C),Co(ee,C,b),z.head.appendChild(ee);break;default:throw Error(a(468,C))}ee[va]=h,Ue(ee),C=ee}h.stateNode=C}else QH(z,h.type,h.stateNode);else h.stateNode=UH(z,C,h.memoizedProps);else ee!==C?(ee===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):ee.count--,C===null?QH(z,h.type,h.stateNode):UH(z,C,h.memoizedProps)):C===null&&h.stateNode!==null&&xT(h,h.memoizedProps,b.memoizedProps)}break;case 27:Gc(p,h),qc(h),C&512&&(Ws||b===null||Zf(b,b.return)),b!==null&&C&4&&xT(h,h.memoizedProps,b.memoizedProps);break;case 5:if(Gc(p,h),qc(h),C&512&&(Ws||b===null||Zf(b,b.return)),h.flags&32){z=h.stateNode;try{Ho(z,"")}catch(bt){Bn(h,h.return,bt)}}C&4&&h.stateNode!=null&&(z=h.memoizedProps,xT(h,z,b!==null?b.memoizedProps:z)),C&1024&&(yT=!0);break;case 6:if(Gc(p,h),qc(h),C&4){if(h.stateNode===null)throw Error(a(162));C=h.memoizedProps,b=h.stateNode;try{b.nodeValue=C}catch(bt){Bn(h,h.return,bt)}}break;case 3:if(jC=null,z=zu,zu=EC(p.containerInfo),Gc(p,h),zu=z,qc(h),C&4&&b!==null&&b.memoizedState.isDehydrated)try{Yy(p.containerInfo)}catch(bt){Bn(h,h.return,bt)}yT&&(yT=!1,K9(h));break;case 4:C=zu,zu=EC(h.stateNode.containerInfo),Gc(p,h),qc(h),zu=C;break;case 12:Gc(p,h),qc(h);break;case 13:Gc(p,h),qc(h),h.child.flags&8192&&h.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(ST=ge()),C&4&&(C=h.updateQueue,C!==null&&(h.updateQueue=null,wT(h,C)));break;case 22:z=h.memoizedState!==null;var Xe=b!==null&&b.memoizedState!==null,gt=g0,It=Ws;if(g0=gt||z,Ws=It||Xe,Gc(p,h),Ws=It,g0=gt,qc(h),C&8192)e:for(p=h.stateNode,p._visibility=z?p._visibility&-2:p._visibility|1,z&&(b===null||Xe||g0||Ws||tg(h)),b=null,p=h;;){if(p.tag===5||p.tag===26){if(b===null){Xe=b=p;try{if(ee=Xe.stateNode,z)ye=ee.style,typeof ye.setProperty=="function"?ye.setProperty("display","none","important"):ye.display="none";else{De=Xe.stateNode;var Lt=Xe.memoizedProps.style,vt=Lt!=null&&Lt.hasOwnProperty("display")?Lt.display:null;De.style.display=vt==null||typeof vt=="boolean"?"":(""+vt).trim()}}catch(bt){Bn(Xe,Xe.return,bt)}}}else if(p.tag===6){if(b===null){Xe=p;try{Xe.stateNode.nodeValue=z?"":Xe.memoizedProps}catch(bt){Bn(Xe,Xe.return,bt)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===h)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break e;for(;p.sibling===null;){if(p.return===null||p.return===h)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}C&4&&(C=h.updateQueue,C!==null&&(b=C.retryQueue,b!==null&&(C.retryQueue=null,wT(h,b))));break;case 19:Gc(p,h),qc(h),C&4&&(C=h.updateQueue,C!==null&&(h.updateQueue=null,wT(h,C)));break;case 30:break;case 21:break;default:Gc(p,h),qc(h)}}function qc(h){var p=h.flags;if(p&2){try{for(var b,C=h.return;C!==null;){if(U9(C)){b=C;break}C=C.return}if(b==null)throw Error(a(160));switch(b.tag){case 27:var z=b.stateNode,ee=vT(h);uC(h,ee,z);break;case 5:var ye=b.stateNode;b.flags&32&&(Ho(ye,""),b.flags&=-33);var De=vT(h);uC(h,De,ye);break;case 3:case 4:var Xe=b.stateNode.containerInfo,gt=vT(h);bT(h,gt,Xe);break;default:throw Error(a(161))}}catch(It){Bn(h,h.return,It)}h.flags&=-3}p&4096&&(h.flags&=-4097)}function K9(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var p=h;K9(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),h=h.sibling}}function qA(h,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)z9(h,p.alternate,p),p=p.sibling}function tg(h){for(h=h.child;h!==null;){var p=h;switch(p.tag){case 0:case 11:case 14:case 15:GA(4,p,p.return),tg(p);break;case 1:Zf(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&L9(p,p.return,b),tg(p);break;case 27:zy(p.stateNode);case 26:case 5:Zf(p,p.return),tg(p);break;case 22:p.memoizedState===null&&tg(p);break;case 30:tg(p);break;default:tg(p)}h=h.sibling}}function KA(h,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var C=p.alternate,z=h,ee=p,ye=ee.flags;switch(ee.tag){case 0:case 11:case 15:KA(z,ee,b),Oy(4,ee);break;case 1:if(KA(z,ee,b),C=ee,z=C.stateNode,typeof z.componentDidMount=="function")try{z.componentDidMount()}catch(gt){Bn(C,C.return,gt)}if(C=ee,z=C.updateQueue,z!==null){var De=C.stateNode;try{var Xe=z.shared.hiddenCallbacks;if(Xe!==null)for(z.shared.hiddenCallbacks=null,z=0;z<Xe.length;z++)Sa(Xe[z],De)}catch(gt){Bn(C,C.return,gt)}}b&&ye&64&&R9(ee),Dy(ee,ee.return);break;case 27:H9(ee);case 26:case 5:KA(z,ee,b),b&&C===null&&ye&4&&M9(ee),Dy(ee,ee.return);break;case 12:KA(z,ee,b);break;case 13:KA(z,ee,b),b&&ye&4&&G9(z,ee);break;case 22:ee.memoizedState===null&&KA(z,ee,b),Dy(ee,ee.return);break;case 30:break;default:KA(z,ee,b)}p=p.sibling}}function NT(h,p){var b=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),h=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(h=p.memoizedState.cachePool.pool),h!==b&&(h!=null&&h.refCount++,b!=null&&Qp(b))}function ET(h,p){h=null,p.alternate!==null&&(h=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==h&&(p.refCount++,h!=null&&Qp(h))}function eh(h,p,b,C){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)W9(h,p,b,C),p=p.sibling}function W9(h,p,b,C){var z=p.flags;switch(p.tag){case 0:case 11:case 15:eh(h,p,b,C),z&2048&&Oy(9,p);break;case 1:eh(h,p,b,C);break;case 3:eh(h,p,b,C),z&2048&&(h=null,p.alternate!==null&&(h=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==h&&(p.refCount++,h!=null&&Qp(h)));break;case 12:if(z&2048){eh(h,p,b,C),h=p.stateNode;try{var ee=p.memoizedProps,ye=ee.id,De=ee.onPostCommit;typeof De=="function"&&De(ye,p.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(Xe){Bn(p,p.return,Xe)}}else eh(h,p,b,C);break;case 13:eh(h,p,b,C);break;case 23:break;case 22:ee=p.stateNode,ye=p.alternate,p.memoizedState!==null?ee._visibility&2?eh(h,p,b,C):Fy(h,p):ee._visibility&2?eh(h,p,b,C):(ee._visibility|=2,rv(h,p,b,C,(p.subtreeFlags&10256)!==0)),z&2048&&NT(ye,p);break;case 24:eh(h,p,b,C),z&2048&&ET(p.alternate,p);break;default:eh(h,p,b,C)}}function rv(h,p,b,C,z){for(z=z&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var ee=h,ye=p,De=b,Xe=C,gt=ye.flags;switch(ye.tag){case 0:case 11:case 15:rv(ee,ye,De,Xe,z),Oy(8,ye);break;case 23:break;case 22:var It=ye.stateNode;ye.memoizedState!==null?It._visibility&2?rv(ee,ye,De,Xe,z):Fy(ee,ye):(It._visibility|=2,rv(ee,ye,De,Xe,z)),z&&gt&2048&&NT(ye.alternate,ye);break;case 24:rv(ee,ye,De,Xe,z),z&&gt&2048&&ET(ye.alternate,ye);break;default:rv(ee,ye,De,Xe,z)}p=p.sibling}}function Fy(h,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=h,C=p,z=C.flags;switch(C.tag){case 22:Fy(b,C),z&2048&&NT(C.alternate,C);break;case 24:Fy(b,C),z&2048&&ET(C.alternate,C);break;default:Fy(b,C)}p=p.sibling}}var Py=8192;function av(h){if(h.subtreeFlags&Py)for(h=h.child;h!==null;)X9(h),h=h.sibling}function X9(h){switch(h.tag){case 26:av(h),h.flags&Py&&h.memoizedState!==null&&Spe(zu,h.memoizedState,h.memoizedProps);break;case 5:av(h);break;case 3:case 4:var p=zu;zu=EC(h.stateNode.containerInfo),av(h),zu=p;break;case 22:h.memoizedState===null&&(p=h.alternate,p!==null&&p.memoizedState!==null?(p=Py,Py=16777216,av(h),Py=p):av(h));break;default:av(h)}}function Y9(h){var p=h.alternate;if(p!==null&&(h=p.child,h!==null)){p.child=null;do p=h.sibling,h.sibling=null,h=p;while(h!==null)}}function Ry(h){var p=h.deletions;if((h.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var C=p[b];eo=C,Z9(C,h)}Y9(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)J9(h),h=h.sibling}function J9(h){switch(h.tag){case 0:case 11:case 15:Ry(h),h.flags&2048&&GA(9,h,h.return);break;case 3:Ry(h);break;case 12:Ry(h);break;case 22:var p=h.stateNode;h.memoizedState!==null&&p._visibility&2&&(h.return===null||h.return.tag!==13)?(p._visibility&=-3,fC(h)):Ry(h);break;default:Ry(h)}}function fC(h){var p=h.deletions;if((h.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var C=p[b];eo=C,Z9(C,h)}Y9(h)}for(h=h.child;h!==null;){switch(p=h,p.tag){case 0:case 11:case 15:GA(8,p,p.return),fC(p);break;case 22:b=p.stateNode,b._visibility&2&&(b._visibility&=-3,fC(p));break;default:fC(p)}h=h.sibling}}function Z9(h,p){for(;eo!==null;){var b=eo;switch(b.tag){case 0:case 11:case 15:GA(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var C=b.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:Qp(b.memoizedState.cache)}if(C=b.child,C!==null)C.return=b,eo=C;else e:for(b=h;eo!==null;){C=eo;var z=C.sibling,ee=C.return;if($9(C),C===b){eo=null;break e}if(z!==null){z.return=ee,eo=z;break e}eo=ee}}}var $me={getCacheForType:function(h){var p=Gs(qs),b=p.data.get(h);return b===void 0&&(b=h(),p.data.set(h,b)),b}},Vme=typeof WeakMap=="function"?WeakMap:Map,mn=0,Un=null,ba=null,Ta=0,pn=0,Kc=null,WA=!1,nv=!1,CT=!1,v0=0,ks=0,XA=0,rg=0,jT=0,Vd=0,sv=0,Ly=null,dc=null,kT=!1,ST=0,hC=1/0,AC=null,YA=null,Eo=0,JA=null,iv=null,ov=0,_T=0,TT=null,eH=null,My=0,BT=null;function Wc(){if((mn&2)!==0&&Ta!==0)return Ta&-Ta;if(Q.T!==null){var h=c0;return h!==0?h:LT()}return Ln()}function tH(){Vd===0&&(Vd=(Ta&536870912)===0||Pa?Tn():536870912);var h=$d.current;return h!==null&&(h.flags|=32),Vd}function Xc(h,p,b){(h===Un&&(pn===2||pn===9)||h.cancelPendingCommit!==null)&&(lv(h,0),ZA(h,Ta,Vd,!1)),Rn(h,b),((mn&2)===0||h!==Un)&&(h===Un&&((mn&2)===0&&(rg|=b),ks===4&&ZA(h,Ta,Vd,!1)),th(h))}function rH(h,p,b){if((mn&6)!==0)throw Error(a(327));var C=!b&&(p&124)===0&&(p&h.expiredLanes)===0||Pr(h,p),z=C?Kme(h,p):DT(h,p,!0),ee=C;do{if(z===0){nv&&!C&&ZA(h,p,0,!1);break}else{if(b=h.current.alternate,ee&&!Gme(b)){z=DT(h,p,!1),ee=!1;continue}if(z===2){if(ee=p,h.errorRecoveryDisabledLanes&ee)var ye=0;else ye=h.pendingLanes&-536870913,ye=ye!==0?ye:ye&536870912?536870912:0;if(ye!==0){p=ye;e:{var De=h;z=Ly;var Xe=De.current.memoizedState.isDehydrated;if(Xe&&(lv(De,ye).flags|=256),ye=DT(De,ye,!1),ye!==2){if(CT&&!Xe){De.errorRecoveryDisabledLanes|=ee,rg|=ee,z=4;break e}ee=dc,dc=z,ee!==null&&(dc===null?dc=ee:dc.push.apply(dc,ee))}z=ye}if(ee=!1,z!==2)continue}}if(z===1){lv(h,0),ZA(h,p,0,!0);break}e:{switch(C=h,ee=z,ee){case 0:case 1:throw Error(a(345));case 4:if((p&4194048)!==p)break;case 6:ZA(C,p,Vd,!WA);break e;case 2:dc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((p&62914560)===p&&(z=ST+300-ge(),10<z)){if(ZA(C,p,Vd,!WA),gr(C,0,!0)!==0)break e;C.timeoutHandle=BH(aH.bind(null,C,b,dc,AC,kT,p,Vd,rg,sv,WA,ee,2,-0,0),z);break e}aH(C,b,dc,AC,kT,p,Vd,rg,sv,WA,ee,0,-0,0)}}break}while(!0);th(h)}function aH(h,p,b,C,z,ee,ye,De,Xe,gt,It,Lt,vt,bt){if(h.timeoutHandle=-1,Lt=p.subtreeFlags,(Lt&8192||(Lt&16785408)===16785408)&&(Gy={stylesheets:null,count:0,unsuspend:kpe},X9(p),Lt=_pe(),Lt!==null)){h.cancelPendingCommit=Lt(dH.bind(null,h,p,ee,b,C,z,ye,De,Xe,It,1,vt,bt)),ZA(h,ee,ye,!gt);return}dH(h,p,ee,b,C,z,ye,De,Xe)}function Gme(h){for(var p=h;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var C=0;C<b.length;C++){var z=b[C],ee=z.getSnapshot;z=z.value;try{if(!Ai(ee(),z))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function ZA(h,p,b,C){p&=~jT,p&=~rg,h.suspendedLanes|=p,h.pingedLanes&=~p,C&&(h.warmLanes|=p),C=h.expirationTimes;for(var z=p;0<z;){var ee=31-We(z),ye=1<<ee;C[ee]=-1,z&=~ye}b!==0&&pr(h,b,p)}function mC(){return(mn&6)===0?(Uy(0),!1):!0}function IT(){if(ba!==null){if(pn===0)var h=ba.return;else h=ba,Ru=pi=null,Kx(h),ev=null,Ty=0,h=ba;for(;h!==null;)P9(h.alternate,h),h=h.return;ba=null}}function lv(h,p){var b=h.timeoutHandle;b!==-1&&(h.timeoutHandle=-1,dpe(b)),b=h.cancelPendingCommit,b!==null&&(h.cancelPendingCommit=null,b()),IT(),Un=h,ba=b=Ld(h.current,null),Ta=p,pn=0,Kc=null,WA=!1,nv=Pr(h,p),CT=!1,sv=Vd=jT=rg=XA=ks=0,dc=Ly=null,kT=!1,(p&8)!==0&&(p|=p&32);var C=h.entangledLanes;if(C!==0)for(h=h.entanglements,C&=p;0<C;){var z=31-We(C),ee=1<<z;p|=h[z],C&=~ee}return v0=p,sc(),b}function nH(h,p){Sr=null,Q.H=rC,p===_e||p===Ie?(p=lt(),pn=3):p===Be?(p=lt(),pn=4):pn=p===w9?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Kc=p,ba===null&&(ks=1,oC(h,da(p,h.current)))}function sH(){var h=Q.H;return Q.H=rC,h===null?rC:h}function iH(){var h=Q.A;return Q.A=$me,h}function OT(){ks=4,WA||(Ta&4194048)!==Ta&&$d.current!==null||(nv=!0),(XA&134217727)===0&&(rg&134217727)===0||Un===null||ZA(Un,Ta,Vd,!1)}function DT(h,p,b){var C=mn;mn|=2;var z=sH(),ee=iH();(Un!==h||Ta!==p)&&(AC=null,lv(h,p)),p=!1;var ye=ks;e:do try{if(pn!==0&&ba!==null){var De=ba,Xe=Kc;switch(pn){case 8:IT(),ye=6;break e;case 3:case 2:case 9:case 6:$d.current===null&&(p=!0);var gt=pn;if(pn=0,Kc=null,cv(h,De,Xe,gt),b&&nv){ye=0;break e}break;default:gt=pn,pn=0,Kc=null,cv(h,De,Xe,gt)}}qme(),ye=ks;break}catch(It){nH(h,It)}while(!0);return p&&h.shellSuspendCounter++,Ru=pi=null,mn=C,Q.H=z,Q.A=ee,ba===null&&(Un=null,Ta=0,sc()),ye}function qme(){for(;ba!==null;)oH(ba)}function Kme(h,p){var b=mn;mn|=2;var C=sH(),z=iH();Un!==h||Ta!==p?(AC=null,hC=ge()+500,lv(h,p)):nv=Pr(h,p);e:do try{if(pn!==0&&ba!==null){p=ba;var ee=Kc;t:switch(pn){case 1:pn=0,Kc=null,cv(h,p,ee,1);break;case 2:case 9:if($e(ee)){pn=0,Kc=null,lH(p);break}p=function(){pn!==2&&pn!==9||Un!==h||(pn=7),th(h)},ee.then(p,p);break e;case 3:pn=7;break e;case 4:pn=5;break e;case 7:$e(ee)?(pn=0,Kc=null,lH(p)):(pn=0,Kc=null,cv(h,p,ee,7));break;case 5:var ye=null;switch(ba.tag){case 26:ye=ba.memoizedState;case 5:case 27:var De=ba;if(!ye||zH(ye)){pn=0,Kc=null;var Xe=De.sibling;if(Xe!==null)ba=Xe;else{var gt=De.return;gt!==null?(ba=gt,pC(gt)):ba=null}break t}}pn=0,Kc=null,cv(h,p,ee,5);break;case 6:pn=0,Kc=null,cv(h,p,ee,6);break;case 8:IT(),ks=6;break e;default:throw Error(a(462))}}Wme();break}catch(It){nH(h,It)}while(!0);return Ru=pi=null,Q.H=C,Q.A=z,mn=b,ba!==null?0:(Un=null,Ta=0,sc(),ks)}function Wme(){for(;ba!==null&&!Ee();)oH(ba)}function oH(h){var p=D9(h.alternate,h,v0);h.memoizedProps=h.pendingProps,p===null?pC(h):ba=p}function lH(h){var p=h,b=p.alternate;switch(p.tag){case 15:case 0:p=S9(b,p,p.pendingProps,p.type,void 0,Ta);break;case 11:p=S9(b,p,p.pendingProps,p.type.render,p.ref,Ta);break;case 5:Kx(p);default:P9(b,p),p=ba=Lp(p,v0),p=D9(b,p,v0)}h.memoizedProps=h.pendingProps,p===null?pC(h):ba=p}function cv(h,p,b,C){Ru=pi=null,Kx(p),ev=null,Ty=0;var z=p.return;try{if(Lme(h,z,p,b,Ta)){ks=1,oC(h,da(b,h.current)),ba=null;return}}catch(ee){if(z!==null)throw ba=z,ee;ks=1,oC(h,da(b,h.current)),ba=null;return}p.flags&32768?(Pa||C===1?h=!0:nv||(Ta&536870912)!==0?h=!1:(WA=h=!0,(C===2||C===9||C===3||C===6)&&(C=$d.current,C!==null&&C.tag===13&&(C.flags|=16384))),cH(p,h)):pC(p)}function pC(h){var p=h;do{if((p.flags&32768)!==0){cH(p,WA);return}h=p.return;var b=Ume(p.alternate,p,v0);if(b!==null){ba=b;return}if(p=p.sibling,p!==null){ba=p;return}ba=p=h}while(p!==null);ks===0&&(ks=5)}function cH(h,p){do{var b=Hme(h.alternate,h);if(b!==null){b.flags&=32767,ba=b;return}if(b=h.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(h=h.sibling,h!==null)){ba=h;return}ba=h=b}while(h!==null);ks=6,ba=null}function dH(h,p,b,C,z,ee,ye,De,Xe){h.cancelPendingCommit=null;do gC();while(Eo!==0);if((mn&6)!==0)throw Error(a(327));if(p!==null){if(p===h.current)throw Error(a(177));if(ee=p.lanes|p.childLanes,ee|=cs,Lr(h,b,ee,ye,De,Xe),h===Un&&(ba=Un=null,Ta=0),iv=p,JA=h,ov=b,_T=ee,TT=z,eH=C,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,Zme(ne,function(){return mH(),null})):(h.callbackNode=null,h.callbackPriority=0),C=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||C){C=Q.T,Q.T=null,z=G.p,G.p=2,ye=mn,mn|=4;try{Qme(h,p,b)}finally{mn=ye,G.p=z,Q.T=C}}Eo=1,uH(),fH(),hH()}}function uH(){if(Eo===1){Eo=0;var h=JA,p=iv,b=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||b){b=Q.T,Q.T=null;var C=G.p;G.p=2;var z=mn;mn|=4;try{q9(p,h);var ee=GT,ye=bo(h.containerInfo),De=ee.focusedElem,Xe=ee.selectionRange;if(ye!==De&&De&&De.ownerDocument&&Pf(De.ownerDocument.documentElement,De)){if(Xe!==null&&Fi(De)){var gt=Xe.start,It=Xe.end;if(It===void 0&&(It=gt),"selectionStart"in De)De.selectionStart=gt,De.selectionEnd=Math.min(It,De.value.length);else{var Lt=De.ownerDocument||document,vt=Lt&&Lt.defaultView||window;if(vt.getSelection){var bt=vt.getSelection(),$r=De.textContent.length,Ir=Math.min(Xe.start,$r),jn=Xe.end===void 0?Ir:Math.min(Xe.end,$r);!bt.extend&&Ir>jn&&(ye=jn,jn=Ir,Ir=ye);var dt=_u(De,Ir),at=_u(De,jn);if(dt&&at&&(bt.rangeCount!==1||bt.anchorNode!==dt.node||bt.anchorOffset!==dt.offset||bt.focusNode!==at.node||bt.focusOffset!==at.offset)){var At=Lt.createRange();At.setStart(dt.node,dt.offset),bt.removeAllRanges(),Ir>jn?(bt.addRange(At),bt.extend(at.node,at.offset)):(At.setEnd(at.node,at.offset),bt.addRange(At))}}}}for(Lt=[],bt=De;bt=bt.parentNode;)bt.nodeType===1&&Lt.push({element:bt,left:bt.scrollLeft,top:bt.scrollTop});for(typeof De.focus=="function"&&De.focus(),De=0;De<Lt.length;De++){var Ft=Lt[De];Ft.element.scrollLeft=Ft.left,Ft.element.scrollTop=Ft.top}}_C=!!VT,GT=VT=null}finally{mn=z,G.p=C,Q.T=b}}h.current=p,Eo=2}}function fH(){if(Eo===2){Eo=0;var h=JA,p=iv,b=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||b){b=Q.T,Q.T=null;var C=G.p;G.p=2;var z=mn;mn|=4;try{z9(h,p.alternate,p)}finally{mn=z,G.p=C,Q.T=b}}Eo=3}}function hH(){if(Eo===4||Eo===3){Eo=0,ue();var h=JA,p=iv,b=ov,C=eH;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?Eo=5:(Eo=0,iv=JA=null,AH(h,h.pendingLanes));var z=h.pendingLanes;if(z===0&&(YA=null),Za(b),p=p.stateNode,ze&&typeof ze.onCommitFiberRoot=="function")try{ze.onCommitFiberRoot(qe,p,void 0,(p.current.flags&128)===128)}catch{}if(C!==null){p=Q.T,z=G.p,G.p=2,Q.T=null;try{for(var ee=h.onRecoverableError,ye=0;ye<C.length;ye++){var De=C[ye];ee(De.value,{componentStack:De.stack})}}finally{Q.T=p,G.p=z}}(ov&3)!==0&&gC(),th(h),z=h.pendingLanes,(b&4194090)!==0&&(z&42)!==0?h===BT?My++:(My=0,BT=h):My=0,Uy(0)}}function AH(h,p){(h.pooledCacheLanes&=p)===0&&(p=h.pooledCache,p!=null&&(h.pooledCache=null,Qp(p)))}function gC(h){return uH(),fH(),hH(),mH()}function mH(){if(Eo!==5)return!1;var h=JA,p=_T;_T=0;var b=Za(ov),C=Q.T,z=G.p;try{G.p=32>b?32:b,Q.T=null,b=TT,TT=null;var ee=JA,ye=ov;if(Eo=0,iv=JA=null,ov=0,(mn&6)!==0)throw Error(a(331));var De=mn;if(mn|=4,J9(ee.current),W9(ee,ee.current,ye,b),mn=De,Uy(0,!1),ze&&typeof ze.onPostCommitFiberRoot=="function")try{ze.onPostCommitFiberRoot(qe,ee)}catch{}return!0}finally{G.p=z,Q.T=C,AH(h,p)}}function pH(h,p,b){p=da(b,p),p=cT(h.stateNode,p,2),h=Rt(h,p,2),h!==null&&(Rn(h,2),th(h))}function Bn(h,p,b){if(h.tag===3)pH(h,h,b);else for(;p!==null;){if(p.tag===3){pH(p,h,b);break}else if(p.tag===1){var C=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(YA===null||!YA.has(C))){h=da(b,h),b=b9(2),C=Rt(p,b,2),C!==null&&(y9(b,C,p,h),Rn(C,2),th(C));break}}p=p.return}}function FT(h,p,b){var C=h.pingCache;if(C===null){C=h.pingCache=new Vme;var z=new Set;C.set(p,z)}else z=C.get(p),z===void 0&&(z=new Set,C.set(p,z));z.has(b)||(CT=!0,z.add(b),h=Xme.bind(null,h,p,b),p.then(h,h))}function Xme(h,p,b){var C=h.pingCache;C!==null&&C.delete(p),h.pingedLanes|=h.suspendedLanes&b,h.warmLanes&=~b,Un===h&&(Ta&b)===b&&(ks===4||ks===3&&(Ta&62914560)===Ta&&300>ge()-ST?(mn&2)===0&&lv(h,0):jT|=b,sv===Ta&&(sv=0)),th(h)}function gH(h,p){p===0&&(p=Rr()),h=Bu(h,p),h!==null&&(Rn(h,p),th(h))}function Yme(h){var p=h.memoizedState,b=0;p!==null&&(b=p.retryLane),gH(h,b)}function Jme(h,p){var b=0;switch(h.tag){case 13:var C=h.stateNode,z=h.memoizedState;z!==null&&(b=z.retryLane);break;case 19:C=h.stateNode;break;case 22:C=h.stateNode._retryCache;break;default:throw Error(a(314))}C!==null&&C.delete(p),gH(h,b)}function Zme(h,p){return we(h,p)}var xC=null,dv=null,PT=!1,vC=!1,RT=!1,ag=0;function th(h){h!==dv&&h.next===null&&(dv===null?xC=dv=h:dv=dv.next=h),vC=!0,PT||(PT=!0,tpe())}function Uy(h,p){if(!RT&&vC){RT=!0;do for(var b=!1,C=xC;C!==null;){if(h!==0){var z=C.pendingLanes;if(z===0)var ee=0;else{var ye=C.suspendedLanes,De=C.pingedLanes;ee=(1<<31-We(42|h)+1)-1,ee&=z&~(ye&~De),ee=ee&201326741?ee&201326741|1:ee?ee|2:0}ee!==0&&(b=!0,yH(C,ee))}else ee=Ta,ee=gr(C,C===Un?ee:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),(ee&3)===0||Pr(C,ee)||(b=!0,yH(C,ee));C=C.next}while(b);RT=!1}}function epe(){xH()}function xH(){vC=PT=!1;var h=0;ag!==0&&(cpe()&&(h=ag),ag=0);for(var p=ge(),b=null,C=xC;C!==null;){var z=C.next,ee=vH(C,p);ee===0?(C.next=null,b===null?xC=z:b.next=z,z===null&&(dv=b)):(b=C,(h!==0||(ee&3)!==0)&&(vC=!0)),C=z}Uy(h)}function vH(h,p){for(var b=h.suspendedLanes,C=h.pingedLanes,z=h.expirationTimes,ee=h.pendingLanes&-62914561;0<ee;){var ye=31-We(ee),De=1<<ye,Xe=z[ye];Xe===-1?((De&b)===0||(De&C)!==0)&&(z[ye]=yr(De,p)):Xe<=p&&(h.expiredLanes|=De),ee&=~De}if(p=Un,b=Ta,b=gr(h,h===p?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),C=h.callbackNode,b===0||h===p&&(pn===2||pn===9)||h.cancelPendingCommit!==null)return C!==null&&C!==null&&Te(C),h.callbackNode=null,h.callbackPriority=0;if((b&3)===0||Pr(h,b)){if(p=b&-b,p===h.callbackPriority)return p;switch(C!==null&&Te(C),Za(b)){case 2:case 8:b=le;break;case 32:b=ne;break;case 268435456:b=pe;break;default:b=ne}return C=bH.bind(null,h),b=we(b,C),h.callbackPriority=p,h.callbackNode=b,p}return C!==null&&C!==null&&Te(C),h.callbackPriority=2,h.callbackNode=null,2}function bH(h,p){if(Eo!==0&&Eo!==5)return h.callbackNode=null,h.callbackPriority=0,null;var b=h.callbackNode;if(gC()&&h.callbackNode!==b)return null;var C=Ta;return C=gr(h,h===Un?C:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),C===0?null:(rH(h,C,p),vH(h,ge()),h.callbackNode!=null&&h.callbackNode===b?bH.bind(null,h):null)}function yH(h,p){if(gC())return null;rH(h,p,!0)}function tpe(){upe(function(){(mn&6)!==0?we(ve,epe):xH()})}function LT(){return ag===0&&(ag=Tn()),ag}function wH(h){return h==null||typeof h=="symbol"||typeof h=="boolean"?null:typeof h=="function"?h:Pc(""+h)}function NH(h,p){var b=p.ownerDocument.createElement("input");return b.name=p.name,b.value=p.value,h.id&&b.setAttribute("form",h.id),p.parentNode.insertBefore(b,p),h=new FormData(h),b.parentNode.removeChild(b),h}function rpe(h,p,b,C,z){if(p==="submit"&&b&&b.stateNode===z){var ee=wH((z[ca]||null).action),ye=C.submitter;ye&&(p=(p=ye[ca]||null)?wH(p.formAction):ye.getAttribute("formAction"),p!==null&&(ee=p,ye=null));var De=new _d("action","action",null,C,z);h.push({event:De,listeners:[{instance:null,listener:function(){if(C.defaultPrevented){if(ag!==0){var Xe=ye?NH(z,ye):new FormData(z);zd(b,{pending:!0,data:Xe,method:z.method,action:ee},null,Xe)}}else typeof ee=="function"&&(De.preventDefault(),Xe=ye?NH(z,ye):new FormData(z),zd(b,{pending:!0,data:Xe,method:z.method,action:ee},ee,Xe))},currentTarget:z}]})}}for(var MT=0;MT<a0.length;MT++){var UT=a0[MT],ape=UT.toLowerCase(),npe=UT[0].toUpperCase()+UT.slice(1);es(ape,"on"+npe)}es(OA,"onAnimationEnd"),es(Lf,"onAnimationIteration"),es(Mf,"onAnimationStart"),es("dblclick","onDoubleClick"),es("focusin","onFocus"),es("focusout","onBlur"),es(Uf,"onTransitionRun"),es(r0,"onTransitionStart"),es(DA,"onTransitionCancel"),es(Hf,"onTransitionEnd"),Et("onMouseEnter",["mouseout","mouseover"]),Et("onMouseLeave",["mouseout","mouseover"]),Et("onPointerEnter",["pointerout","pointerover"]),Et("onPointerLeave",["pointerout","pointerover"]),Nt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Nt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Nt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Nt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Nt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Nt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),spe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hy));function EH(h,p){p=(p&4)!==0;for(var b=0;b<h.length;b++){var C=h[b],z=C.event;C=C.listeners;e:{var ee=void 0;if(p)for(var ye=C.length-1;0<=ye;ye--){var De=C[ye],Xe=De.instance,gt=De.currentTarget;if(De=De.listener,Xe!==ee&&z.isPropagationStopped())break e;ee=De,z.currentTarget=gt;try{ee(z)}catch(It){iC(It)}z.currentTarget=null,ee=Xe}else for(ye=0;ye<C.length;ye++){if(De=C[ye],Xe=De.instance,gt=De.currentTarget,De=De.listener,Xe!==ee&&z.isPropagationStopped())break e;ee=De,z.currentTarget=gt;try{ee(z)}catch(It){iC(It)}z.currentTarget=null,ee=Xe}}}}function ya(h,p){var b=p[Xa];b===void 0&&(b=p[Xa]=new Set);var C=h+"__bubble";b.has(C)||(CH(p,h,2,!1),b.add(C))}function HT(h,p,b){var C=0;p&&(C|=4),CH(b,h,C,p)}var bC="_reactListening"+Math.random().toString(36).slice(2);function QT(h){if(!h[bC]){h[bC]=!0,Ye.forEach(function(b){b!=="selectionchange"&&(spe.has(b)||HT(b,!1,h),HT(b,!0,h))});var p=h.nodeType===9?h:h.ownerDocument;p===null||p[bC]||(p[bC]=!0,HT("selectionchange",!1,p))}}function CH(h,p,b,C){switch(WH(p)){case 2:var z=Ipe;break;case 8:z=Ope;break;default:z=rB}b=z.bind(null,p,b,h),z=void 0,!vo||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(z=!0),C?z!==void 0?h.addEventListener(p,b,{capture:!0,passive:z}):h.addEventListener(p,b,!0):z!==void 0?h.addEventListener(p,b,{passive:z}):h.addEventListener(p,b,!1)}function zT(h,p,b,C,z){var ee=C;if((p&1)===0&&(p&2)===0&&C!==null)e:for(;;){if(C===null)return;var ye=C.tag;if(ye===3||ye===4){var De=C.stateNode.containerInfo;if(De===z)break;if(ye===4)for(ye=C.return;ye!==null;){var Xe=ye.tag;if((Xe===3||Xe===4)&&ye.stateNode.containerInfo===z)return;ye=ye.return}for(;De!==null;){if(ye=Ne(De),ye===null)return;if(Xe=ye.tag,Xe===5||Xe===6||Xe===26||Xe===27){C=ee=ye;continue e}De=De.parentNode}}C=C.return}SA(function(){var gt=ee,It=hn(b),Lt=[];e:{var vt=Tu.get(h);if(vt!==void 0){var bt=_d,$r=h;switch(h){case"keypress":if($o(b)===0)break e;case"keydown":case"keyup":bt=Uc;break;case"focusin":$r="focus",bt=Bd;break;case"focusout":$r="blur",bt=Bd;break;case"beforeblur":case"afterblur":bt=Bd;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":bt=Ns;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":bt=Td;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":bt=If;break;case OA:case Lf:case Mf:bt=_f;break;case Hf:bt=je;break;case"scroll":case"scrollend":bt=Xh;break;case"wheel":bt=Je;break;case"copy":case"cut":case"paste":bt=Tf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":bt=Su;break;case"toggle":case"beforetoggle":bt=Ct}var Ir=(p&4)!==0,jn=!Ir&&(h==="scroll"||h==="scrollend"),dt=Ir?vt!==null?vt+"Capture":null:vt;Ir=[];for(var at=gt,At;at!==null;){var Ft=at;if(At=Ft.stateNode,Ft=Ft.tag,Ft!==5&&Ft!==26&&Ft!==27||At===null||dt===null||(Ft=Ki(at,dt),Ft!=null&&Ir.push(Qy(at,Ft,At))),jn)break;at=at.return}0<Ir.length&&(vt=new bt(vt,$r,null,b,It),Lt.push({event:vt,listeners:Ir}))}}if((p&7)===0){e:{if(vt=h==="mouseover"||h==="pointerover",bt=h==="mouseout"||h==="pointerout",vt&&b!==Yl&&($r=b.relatedTarget||b.fromElement)&&(Ne($r)||$r[Fa]))break e;if((bt||vt)&&(vt=It.window===It?It:(vt=It.ownerDocument)?vt.defaultView||vt.parentWindow:window,bt?($r=b.relatedTarget||b.toElement,bt=gt,$r=$r?Ne($r):null,$r!==null&&(jn=i($r),Ir=$r.tag,$r!==jn||Ir!==5&&Ir!==27&&Ir!==6)&&($r=null)):(bt=null,$r=gt),bt!==$r)){if(Ir=Ns,Ft="onMouseLeave",dt="onMouseEnter",at="mouse",(h==="pointerout"||h==="pointerover")&&(Ir=Su,Ft="onPointerLeave",dt="onPointerEnter",at="pointer"),jn=bt==null?vt:Fe(bt),At=$r==null?vt:Fe($r),vt=new Ir(Ft,at+"leave",bt,b,It),vt.target=jn,vt.relatedTarget=At,Ft=null,Ne(It)===gt&&(Ir=new Ir(dt,at+"enter",$r,b,It),Ir.target=At,Ir.relatedTarget=jn,Ft=Ir),jn=Ft,bt&&$r)t:{for(Ir=bt,dt=$r,at=0,At=Ir;At;At=uv(At))at++;for(At=0,Ft=dt;Ft;Ft=uv(Ft))At++;for(;0<at-At;)Ir=uv(Ir),at--;for(;0<At-at;)dt=uv(dt),At--;for(;at--;){if(Ir===dt||dt!==null&&Ir===dt.alternate)break t;Ir=uv(Ir),dt=uv(dt)}Ir=null}else Ir=null;bt!==null&&jH(Lt,vt,bt,Ir,!1),$r!==null&&jn!==null&&jH(Lt,jn,$r,Ir,!0)}}e:{if(vt=gt?Fe(gt):window,bt=vt.nodeName&&vt.nodeName.toLowerCase(),bt==="select"||bt==="input"&&vt.type==="file")var Ar=BA;else if(tn(vt))if(Jh)Ar=Ux;else{Ar=Ay;var pa=Go}else bt=vt.nodeName,!bt||bt.toLowerCase()!=="input"||vt.type!=="checkbox"&&vt.type!=="radio"?gt&&Kh(gt.elementType)&&(Ar=BA):Ar=Pp;if(Ar&&(Ar=Ar(h,gt))){ac(Lt,Ar,b,It);break e}pa&&pa(h,vt,gt),h==="focusout"&&gt&&vt.type==="number"&&gt.memoizedProps.value!=null&&jd(vt,"number",vt.value)}switch(pa=gt?Fe(gt):window,h){case"focusin":(tn(pa)||pa.contentEditable==="true")&&(qo=pa,Hc=gt,Pd=null);break;case"focusout":Pd=Hc=qo=null;break;case"mousedown":Qc=!0;break;case"contextmenu":case"mouseup":case"dragend":Qc=!1,Zn(Lt,b,It);break;case"selectionchange":if(Rf)break;case"keydown":case"keyup":Zn(Lt,b,It)}var wr;if(Zt)e:{switch(h){case"compositionstart":var Or="onCompositionStart";break e;case"compositionend":Or="onCompositionEnd";break e;case"compositionupdate":Or="onCompositionUpdate";break e}Or=void 0}else Br?pt(h,b)&&(Or="onCompositionEnd"):h==="keydown"&&b.keyCode===229&&(Or="onCompositionStart");Or&&(me&&b.locale!=="ko"&&(Br||Or!=="onCompositionStart"?Or==="onCompositionEnd"&&Br&&(wr=Wh()):(zo=It,Sd="value"in zo?zo.value:zo.textContent,Br=!0)),pa=yC(gt,Or),0<pa.length&&(Or=new Cu(Or,h,null,b,It),Lt.push({event:Or,listeners:pa}),wr?Or.data=wr:(wr=Qt(b),wr!==null&&(Or.data=wr)))),(wr=se?ma(h,b):Gr(h,b))&&(Or=yC(gt,"onBeforeInput"),0<Or.length&&(pa=new Cu("onBeforeInput","beforeinput",null,b,It),Lt.push({event:pa,listeners:Or}),pa.data=wr)),rpe(Lt,h,gt,b,It)}EH(Lt,p)})}function Qy(h,p,b){return{instance:h,listener:p,currentTarget:b}}function yC(h,p){for(var b=p+"Capture",C=[];h!==null;){var z=h,ee=z.stateNode;if(z=z.tag,z!==5&&z!==26&&z!==27||ee===null||(z=Ki(h,b),z!=null&&C.unshift(Qy(h,z,ee)),z=Ki(h,p),z!=null&&C.push(Qy(h,z,ee))),h.tag===3)return C;h=h.return}return[]}function uv(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5&&h.tag!==27);return h||null}function jH(h,p,b,C,z){for(var ee=p._reactName,ye=[];b!==null&&b!==C;){var De=b,Xe=De.alternate,gt=De.stateNode;if(De=De.tag,Xe!==null&&Xe===C)break;De!==5&&De!==26&&De!==27||gt===null||(Xe=gt,z?(gt=Ki(b,ee),gt!=null&&ye.unshift(Qy(b,gt,Xe))):z||(gt=Ki(b,ee),gt!=null&&ye.push(Qy(b,gt,Xe)))),b=b.return}ye.length!==0&&h.push({event:p,listeners:ye})}var ipe=/\r\n?/g,ope=/\u0000|\uFFFD/g;function kH(h){return(typeof h=="string"?h:""+h).replace(ipe,`
`).replace(ope,"")}function SH(h,p){return p=kH(p),kH(h)===p}function wC(){}function Cn(h,p,b,C,z,ee){switch(b){case"children":typeof C=="string"?p==="body"||p==="textarea"&&C===""||Ho(h,C):(typeof C=="number"||typeof C=="bigint")&&p!=="body"&&Ho(h,""+C);break;case"className":ta(h,"class",C);break;case"tabIndex":ta(h,"tabindex",C);break;case"dir":case"role":case"viewBox":case"width":case"height":ta(h,b,C);break;case"style":qh(h,C,ee);break;case"data":if(p!=="object"){ta(h,"data",C);break}case"src":case"href":if(C===""&&(p!=="a"||b!=="href")){h.removeAttribute(b);break}if(C==null||typeof C=="function"||typeof C=="symbol"||typeof C=="boolean"){h.removeAttribute(b);break}C=Pc(""+C),h.setAttribute(b,C);break;case"action":case"formAction":if(typeof C=="function"){h.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ee=="function"&&(b==="formAction"?(p!=="input"&&Cn(h,p,"name",z.name,z,null),Cn(h,p,"formEncType",z.formEncType,z,null),Cn(h,p,"formMethod",z.formMethod,z,null),Cn(h,p,"formTarget",z.formTarget,z,null)):(Cn(h,p,"encType",z.encType,z,null),Cn(h,p,"method",z.method,z,null),Cn(h,p,"target",z.target,z,null)));if(C==null||typeof C=="symbol"||typeof C=="boolean"){h.removeAttribute(b);break}C=Pc(""+C),h.setAttribute(b,C);break;case"onClick":C!=null&&(h.onclick=wC);break;case"onScroll":C!=null&&ya("scroll",h);break;case"onScrollEnd":C!=null&&ya("scrollend",h);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(a(61));if(b=C.__html,b!=null){if(z.children!=null)throw Error(a(60));h.innerHTML=b}}break;case"multiple":h.multiple=C&&typeof C!="function"&&typeof C!="symbol";break;case"muted":h.muted=C&&typeof C!="function"&&typeof C!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(C==null||typeof C=="function"||typeof C=="boolean"||typeof C=="symbol"){h.removeAttribute("xlink:href");break}b=Pc(""+C),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":C!=null&&typeof C!="function"&&typeof C!="symbol"?h.setAttribute(b,""+C):h.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":C&&typeof C!="function"&&typeof C!="symbol"?h.setAttribute(b,""):h.removeAttribute(b);break;case"capture":case"download":C===!0?h.setAttribute(b,""):C!==!1&&C!=null&&typeof C!="function"&&typeof C!="symbol"?h.setAttribute(b,C):h.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":C!=null&&typeof C!="function"&&typeof C!="symbol"&&!isNaN(C)&&1<=C?h.setAttribute(b,C):h.removeAttribute(b);break;case"rowSpan":case"start":C==null||typeof C=="function"||typeof C=="symbol"||isNaN(C)?h.removeAttribute(b):h.setAttribute(b,C);break;case"popover":ya("beforetoggle",h),ya("toggle",h),ea(h,"popover",C);break;case"xlinkActuate":oa(h,"http://www.w3.org/1999/xlink","xlink:actuate",C);break;case"xlinkArcrole":oa(h,"http://www.w3.org/1999/xlink","xlink:arcrole",C);break;case"xlinkRole":oa(h,"http://www.w3.org/1999/xlink","xlink:role",C);break;case"xlinkShow":oa(h,"http://www.w3.org/1999/xlink","xlink:show",C);break;case"xlinkTitle":oa(h,"http://www.w3.org/1999/xlink","xlink:title",C);break;case"xlinkType":oa(h,"http://www.w3.org/1999/xlink","xlink:type",C);break;case"xmlBase":oa(h,"http://www.w3.org/XML/1998/namespace","xml:base",C);break;case"xmlLang":oa(h,"http://www.w3.org/XML/1998/namespace","xml:lang",C);break;case"xmlSpace":oa(h,"http://www.w3.org/XML/1998/namespace","xml:space",C);break;case"is":ea(h,"is",C);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=Fc.get(b)||b,ea(h,b,C))}}function $T(h,p,b,C,z,ee){switch(b){case"style":qh(h,C,ee);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(a(61));if(b=C.__html,b!=null){if(z.children!=null)throw Error(a(60));h.innerHTML=b}}break;case"children":typeof C=="string"?Ho(h,C):(typeof C=="number"||typeof C=="bigint")&&Ho(h,""+C);break;case"onScroll":C!=null&&ya("scroll",h);break;case"onScrollEnd":C!=null&&ya("scrollend",h);break;case"onClick":C!=null&&(h.onclick=wC);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!et.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(z=b.endsWith("Capture"),p=b.slice(2,z?b.length-7:void 0),ee=h[ca]||null,ee=ee!=null?ee[b]:null,typeof ee=="function"&&h.removeEventListener(p,ee,z),typeof C=="function")){typeof ee!="function"&&ee!==null&&(b in h?h[b]=null:h.hasAttribute(b)&&h.removeAttribute(b)),h.addEventListener(p,C,z);break e}b in h?h[b]=C:C===!0?h.setAttribute(b,""):ea(h,b,C)}}}function Co(h,p,b){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ya("error",h),ya("load",h);var C=!1,z=!1,ee;for(ee in b)if(b.hasOwnProperty(ee)){var ye=b[ee];if(ye!=null)switch(ee){case"src":C=!0;break;case"srcSet":z=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,p));default:Cn(h,p,ee,ye,b,null)}}z&&Cn(h,p,"srcSet",b.srcSet,b,null),C&&Cn(h,p,"src",b.src,b,null);return;case"input":ya("invalid",h);var De=ee=ye=z=null,Xe=null,gt=null;for(C in b)if(b.hasOwnProperty(C)){var It=b[C];if(It!=null)switch(C){case"name":z=It;break;case"type":ye=It;break;case"checked":Xe=It;break;case"defaultChecked":gt=It;break;case"value":ee=It;break;case"defaultValue":De=It;break;case"children":case"dangerouslySetInnerHTML":if(It!=null)throw Error(a(137,p));break;default:Cn(h,p,C,It,b,null)}}Cd(h,ee,De,Xe,gt,ye,z,!1),Ed(h);return;case"select":ya("invalid",h),C=ye=ee=null;for(z in b)if(b.hasOwnProperty(z)&&(De=b[z],De!=null))switch(z){case"value":ee=De;break;case"defaultValue":ye=De;break;case"multiple":C=De;default:Cn(h,p,z,De,b,null)}p=ee,b=ye,h.multiple=!!C,p!=null?Xl(h,!!C,p,!1):b!=null&&Xl(h,!!C,b,!0);return;case"textarea":ya("invalid",h),ee=z=C=null;for(ye in b)if(b.hasOwnProperty(ye)&&(De=b[ye],De!=null))switch(ye){case"value":C=De;break;case"defaultValue":z=De;break;case"children":ee=De;break;case"dangerouslySetInnerHTML":if(De!=null)throw Error(a(91));break;default:Cn(h,p,ye,De,b,null)}kd(h,C,z,ee),Ed(h);return;case"option":for(Xe in b)if(b.hasOwnProperty(Xe)&&(C=b[Xe],C!=null))switch(Xe){case"selected":h.selected=C&&typeof C!="function"&&typeof C!="symbol";break;default:Cn(h,p,Xe,C,b,null)}return;case"dialog":ya("beforetoggle",h),ya("toggle",h),ya("cancel",h),ya("close",h);break;case"iframe":case"object":ya("load",h);break;case"video":case"audio":for(C=0;C<Hy.length;C++)ya(Hy[C],h);break;case"image":ya("error",h),ya("load",h);break;case"details":ya("toggle",h);break;case"embed":case"source":case"link":ya("error",h),ya("load",h);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(gt in b)if(b.hasOwnProperty(gt)&&(C=b[gt],C!=null))switch(gt){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,p));default:Cn(h,p,gt,C,b,null)}return;default:if(Kh(p)){for(It in b)b.hasOwnProperty(It)&&(C=b[It],C!==void 0&&$T(h,p,It,C,b,void 0));return}}for(De in b)b.hasOwnProperty(De)&&(C=b[De],C!=null&&Cn(h,p,De,C,b,null))}function lpe(h,p,b,C){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var z=null,ee=null,ye=null,De=null,Xe=null,gt=null,It=null;for(bt in b){var Lt=b[bt];if(b.hasOwnProperty(bt)&&Lt!=null)switch(bt){case"checked":break;case"value":break;case"defaultValue":Xe=Lt;default:C.hasOwnProperty(bt)||Cn(h,p,bt,null,C,Lt)}}for(var vt in C){var bt=C[vt];if(Lt=b[vt],C.hasOwnProperty(vt)&&(bt!=null||Lt!=null))switch(vt){case"type":ee=bt;break;case"name":z=bt;break;case"checked":gt=bt;break;case"defaultChecked":It=bt;break;case"value":ye=bt;break;case"defaultValue":De=bt;break;case"children":case"dangerouslySetInnerHTML":if(bt!=null)throw Error(a(137,p));break;default:bt!==Lt&&Cn(h,p,vt,bt,C,Lt)}}Oi(h,ye,De,Xe,gt,It,ee,z);return;case"select":bt=ye=De=vt=null;for(ee in b)if(Xe=b[ee],b.hasOwnProperty(ee)&&Xe!=null)switch(ee){case"value":break;case"multiple":bt=Xe;default:C.hasOwnProperty(ee)||Cn(h,p,ee,null,C,Xe)}for(z in C)if(ee=C[z],Xe=b[z],C.hasOwnProperty(z)&&(ee!=null||Xe!=null))switch(z){case"value":vt=ee;break;case"defaultValue":De=ee;break;case"multiple":ye=ee;default:ee!==Xe&&Cn(h,p,z,ee,C,Xe)}p=De,b=ye,C=bt,vt!=null?Xl(h,!!b,vt,!1):!!C!=!!b&&(p!=null?Xl(h,!!b,p,!0):Xl(h,!!b,b?[]:"",!1));return;case"textarea":bt=vt=null;for(De in b)if(z=b[De],b.hasOwnProperty(De)&&z!=null&&!C.hasOwnProperty(De))switch(De){case"value":break;case"children":break;default:Cn(h,p,De,null,C,z)}for(ye in C)if(z=C[ye],ee=b[ye],C.hasOwnProperty(ye)&&(z!=null||ee!=null))switch(ye){case"value":vt=z;break;case"defaultValue":bt=z;break;case"children":break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(a(91));break;default:z!==ee&&Cn(h,p,ye,z,C,ee)}Qa(h,vt,bt);return;case"option":for(var $r in b)if(vt=b[$r],b.hasOwnProperty($r)&&vt!=null&&!C.hasOwnProperty($r))switch($r){case"selected":h.selected=!1;break;default:Cn(h,p,$r,null,C,vt)}for(Xe in C)if(vt=C[Xe],bt=b[Xe],C.hasOwnProperty(Xe)&&vt!==bt&&(vt!=null||bt!=null))switch(Xe){case"selected":h.selected=vt&&typeof vt!="function"&&typeof vt!="symbol";break;default:Cn(h,p,Xe,vt,C,bt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ir in b)vt=b[Ir],b.hasOwnProperty(Ir)&&vt!=null&&!C.hasOwnProperty(Ir)&&Cn(h,p,Ir,null,C,vt);for(gt in C)if(vt=C[gt],bt=b[gt],C.hasOwnProperty(gt)&&vt!==bt&&(vt!=null||bt!=null))switch(gt){case"children":case"dangerouslySetInnerHTML":if(vt!=null)throw Error(a(137,p));break;default:Cn(h,p,gt,vt,C,bt)}return;default:if(Kh(p)){for(var jn in b)vt=b[jn],b.hasOwnProperty(jn)&&vt!==void 0&&!C.hasOwnProperty(jn)&&$T(h,p,jn,void 0,C,vt);for(It in C)vt=C[It],bt=b[It],!C.hasOwnProperty(It)||vt===bt||vt===void 0&&bt===void 0||$T(h,p,It,vt,C,bt);return}}for(var dt in b)vt=b[dt],b.hasOwnProperty(dt)&&vt!=null&&!C.hasOwnProperty(dt)&&Cn(h,p,dt,null,C,vt);for(Lt in C)vt=C[Lt],bt=b[Lt],!C.hasOwnProperty(Lt)||vt===bt||vt==null&&bt==null||Cn(h,p,Lt,vt,C,bt)}var VT=null,GT=null;function NC(h){return h.nodeType===9?h:h.ownerDocument}function _H(h){switch(h){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function TH(h,p){if(h===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return h===1&&p==="foreignObject"?0:h}function qT(h,p){return h==="textarea"||h==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var KT=null;function cpe(){var h=window.event;return h&&h.type==="popstate"?h===KT?!1:(KT=h,!0):(KT=null,!1)}var BH=typeof setTimeout=="function"?setTimeout:void 0,dpe=typeof clearTimeout=="function"?clearTimeout:void 0,IH=typeof Promise=="function"?Promise:void 0,upe=typeof queueMicrotask=="function"?queueMicrotask:typeof IH<"u"?function(h){return IH.resolve(null).then(h).catch(fpe)}:BH;function fpe(h){setTimeout(function(){throw h})}function em(h){return h==="head"}function OH(h,p){var b=p,C=0,z=0;do{var ee=b.nextSibling;if(h.removeChild(b),ee&&ee.nodeType===8)if(b=ee.data,b==="/$"){if(0<C&&8>C){b=C;var ye=h.ownerDocument;if(b&1&&zy(ye.documentElement),b&2&&zy(ye.body),b&4)for(b=ye.head,zy(b),ye=b.firstChild;ye;){var De=ye.nextSibling,Xe=ye.nodeName;ye[Me]||Xe==="SCRIPT"||Xe==="STYLE"||Xe==="LINK"&&ye.rel.toLowerCase()==="stylesheet"||b.removeChild(ye),ye=De}}if(z===0){h.removeChild(ee),Yy(p);return}z--}else b==="$"||b==="$?"||b==="$!"?z++:C=b.charCodeAt(0)-48;else C=0;b=ee}while(b);Yy(p)}function WT(h){var p=h.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var b=p;switch(p=p.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":WT(b),He(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}h.removeChild(b)}}function hpe(h,p,b,C){for(;h.nodeType===1;){var z=b;if(h.nodeName.toLowerCase()!==p.toLowerCase()){if(!C&&(h.nodeName!=="INPUT"||h.type!=="hidden"))break}else if(C){if(!h[Me])switch(p){case"meta":if(!h.hasAttribute("itemprop"))break;return h;case"link":if(ee=h.getAttribute("rel"),ee==="stylesheet"&&h.hasAttribute("data-precedence"))break;if(ee!==z.rel||h.getAttribute("href")!==(z.href==null||z.href===""?null:z.href)||h.getAttribute("crossorigin")!==(z.crossOrigin==null?null:z.crossOrigin)||h.getAttribute("title")!==(z.title==null?null:z.title))break;return h;case"style":if(h.hasAttribute("data-precedence"))break;return h;case"script":if(ee=h.getAttribute("src"),(ee!==(z.src==null?null:z.src)||h.getAttribute("type")!==(z.type==null?null:z.type)||h.getAttribute("crossorigin")!==(z.crossOrigin==null?null:z.crossOrigin))&&ee&&h.hasAttribute("async")&&!h.hasAttribute("itemprop"))break;return h;default:return h}}else if(p==="input"&&h.type==="hidden"){var ee=z.name==null?null:""+z.name;if(z.type==="hidden"&&h.getAttribute("name")===ee)return h}else return h;if(h=$u(h.nextSibling),h===null)break}return null}function Ape(h,p,b){if(p==="")return null;for(;h.nodeType!==3;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!b||(h=$u(h.nextSibling),h===null))return null;return h}function XT(h){return h.data==="$!"||h.data==="$?"&&h.ownerDocument.readyState==="complete"}function mpe(h,p){var b=h.ownerDocument;if(h.data!=="$?"||b.readyState==="complete")p();else{var C=function(){p(),b.removeEventListener("DOMContentLoaded",C)};b.addEventListener("DOMContentLoaded",C),h._reactRetry=C}}function $u(h){for(;h!=null;h=h.nextSibling){var p=h.nodeType;if(p===1||p===3)break;if(p===8){if(p=h.data,p==="$"||p==="$!"||p==="$?"||p==="F!"||p==="F")break;if(p==="/$")return null}}return h}var YT=null;function DH(h){h=h.previousSibling;for(var p=0;h;){if(h.nodeType===8){var b=h.data;if(b==="$"||b==="$!"||b==="$?"){if(p===0)return h;p--}else b==="/$"&&p++}h=h.previousSibling}return null}function FH(h,p,b){switch(p=NC(b),h){case"html":if(h=p.documentElement,!h)throw Error(a(452));return h;case"head":if(h=p.head,!h)throw Error(a(453));return h;case"body":if(h=p.body,!h)throw Error(a(454));return h;default:throw Error(a(451))}}function zy(h){for(var p=h.attributes;p.length;)h.removeAttributeNode(p[0]);He(h)}var Gd=new Map,PH=new Set;function EC(h){return typeof h.getRootNode=="function"?h.getRootNode():h.nodeType===9?h:h.ownerDocument}var b0=G.d;G.d={f:ppe,r:gpe,D:xpe,C:vpe,L:bpe,m:ype,X:Npe,S:wpe,M:Epe};function ppe(){var h=b0.f(),p=mC();return h||p}function gpe(h){var p=xe(h);p!==null&&p.tag===5&&p.type==="form"?Jp(p):b0.r(h)}var fv=typeof document>"u"?null:document;function RH(h,p,b){var C=fv;if(C&&typeof p=="string"&&p){var z=ja(p);z='link[rel="'+h+'"][href="'+z+'"]',typeof b=="string"&&(z+='[crossorigin="'+b+'"]'),PH.has(z)||(PH.add(z),h={rel:h,crossOrigin:b,href:p},C.querySelector(z)===null&&(p=C.createElement("link"),Co(p,"link",h),Ue(p),C.head.appendChild(p)))}}function xpe(h){b0.D(h),RH("dns-prefetch",h,null)}function vpe(h,p){b0.C(h,p),RH("preconnect",h,p)}function bpe(h,p,b){b0.L(h,p,b);var C=fv;if(C&&h&&p){var z='link[rel="preload"][as="'+ja(p)+'"]';p==="image"&&b&&b.imageSrcSet?(z+='[imagesrcset="'+ja(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(z+='[imagesizes="'+ja(b.imageSizes)+'"]')):z+='[href="'+ja(h)+'"]';var ee=z;switch(p){case"style":ee=hv(h);break;case"script":ee=Av(h)}Gd.has(ee)||(h=u({rel:"preload",href:p==="image"&&b&&b.imageSrcSet?void 0:h,as:p},b),Gd.set(ee,h),C.querySelector(z)!==null||p==="style"&&C.querySelector($y(ee))||p==="script"&&C.querySelector(Vy(ee))||(p=C.createElement("link"),Co(p,"link",h),Ue(p),C.head.appendChild(p)))}}function ype(h,p){b0.m(h,p);var b=fv;if(b&&h){var C=p&&typeof p.as=="string"?p.as:"script",z='link[rel="modulepreload"][as="'+ja(C)+'"][href="'+ja(h)+'"]',ee=z;switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ee=Av(h)}if(!Gd.has(ee)&&(h=u({rel:"modulepreload",href:h},p),Gd.set(ee,h),b.querySelector(z)===null)){switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(Vy(ee)))return}C=b.createElement("link"),Co(C,"link",h),Ue(C),b.head.appendChild(C)}}}function wpe(h,p,b){b0.S(h,p,b);var C=fv;if(C&&h){var z=Ge(C).hoistableStyles,ee=hv(h);p=p||"default";var ye=z.get(ee);if(!ye){var De={loading:0,preload:null};if(ye=C.querySelector($y(ee)))De.loading=5;else{h=u({rel:"stylesheet",href:h,"data-precedence":p},b),(b=Gd.get(ee))&&JT(h,b);var Xe=ye=C.createElement("link");Ue(Xe),Co(Xe,"link",h),Xe._p=new Promise(function(gt,It){Xe.onload=gt,Xe.onerror=It}),Xe.addEventListener("load",function(){De.loading|=1}),Xe.addEventListener("error",function(){De.loading|=2}),De.loading|=4,CC(ye,p,C)}ye={type:"stylesheet",instance:ye,count:1,state:De},z.set(ee,ye)}}}function Npe(h,p){b0.X(h,p);var b=fv;if(b&&h){var C=Ge(b).hoistableScripts,z=Av(h),ee=C.get(z);ee||(ee=b.querySelector(Vy(z)),ee||(h=u({src:h,async:!0},p),(p=Gd.get(z))&&ZT(h,p),ee=b.createElement("script"),Ue(ee),Co(ee,"link",h),b.head.appendChild(ee)),ee={type:"script",instance:ee,count:1,state:null},C.set(z,ee))}}function Epe(h,p){b0.M(h,p);var b=fv;if(b&&h){var C=Ge(b).hoistableScripts,z=Av(h),ee=C.get(z);ee||(ee=b.querySelector(Vy(z)),ee||(h=u({src:h,async:!0,type:"module"},p),(p=Gd.get(z))&&ZT(h,p),ee=b.createElement("script"),Ue(ee),Co(ee,"link",h),b.head.appendChild(ee)),ee={type:"script",instance:ee,count:1,state:null},C.set(z,ee))}}function LH(h,p,b,C){var z=(z=ce.current)?EC(z):null;if(!z)throw Error(a(446));switch(h){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(p=hv(b.href),b=Ge(z).hoistableStyles,C=b.get(p),C||(C={type:"style",instance:null,count:0,state:null},b.set(p,C)),C):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){h=hv(b.href);var ee=Ge(z).hoistableStyles,ye=ee.get(h);if(ye||(z=z.ownerDocument||z,ye={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ee.set(h,ye),(ee=z.querySelector($y(h)))&&!ee._p&&(ye.instance=ee,ye.state.loading=5),Gd.has(h)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},Gd.set(h,b),ee||Cpe(z,h,b,ye.state))),p&&C===null)throw Error(a(528,""));return ye}if(p&&C!==null)throw Error(a(529,""));return null;case"script":return p=b.async,b=b.src,typeof b=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=Av(b),b=Ge(z).hoistableScripts,C=b.get(p),C||(C={type:"script",instance:null,count:0,state:null},b.set(p,C)),C):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,h))}}function hv(h){return'href="'+ja(h)+'"'}function $y(h){return'link[rel="stylesheet"]['+h+"]"}function MH(h){return u({},h,{"data-precedence":h.precedence,precedence:null})}function Cpe(h,p,b,C){h.querySelector('link[rel="preload"][as="style"]['+p+"]")?C.loading=1:(p=h.createElement("link"),C.preload=p,p.addEventListener("load",function(){return C.loading|=1}),p.addEventListener("error",function(){return C.loading|=2}),Co(p,"link",b),Ue(p),h.head.appendChild(p))}function Av(h){return'[src="'+ja(h)+'"]'}function Vy(h){return"script[async]"+h}function UH(h,p,b){if(p.count++,p.instance===null)switch(p.type){case"style":var C=h.querySelector('style[data-href~="'+ja(b.href)+'"]');if(C)return p.instance=C,Ue(C),C;var z=u({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return C=(h.ownerDocument||h).createElement("style"),Ue(C),Co(C,"style",z),CC(C,b.precedence,h),p.instance=C;case"stylesheet":z=hv(b.href);var ee=h.querySelector($y(z));if(ee)return p.state.loading|=4,p.instance=ee,Ue(ee),ee;C=MH(b),(z=Gd.get(z))&&JT(C,z),ee=(h.ownerDocument||h).createElement("link"),Ue(ee);var ye=ee;return ye._p=new Promise(function(De,Xe){ye.onload=De,ye.onerror=Xe}),Co(ee,"link",C),p.state.loading|=4,CC(ee,b.precedence,h),p.instance=ee;case"script":return ee=Av(b.src),(z=h.querySelector(Vy(ee)))?(p.instance=z,Ue(z),z):(C=b,(z=Gd.get(ee))&&(C=u({},b),ZT(C,z)),h=h.ownerDocument||h,z=h.createElement("script"),Ue(z),Co(z,"link",C),h.head.appendChild(z),p.instance=z);case"void":return null;default:throw Error(a(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(C=p.instance,p.state.loading|=4,CC(C,b.precedence,h));return p.instance}function CC(h,p,b){for(var C=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),z=C.length?C[C.length-1]:null,ee=z,ye=0;ye<C.length;ye++){var De=C[ye];if(De.dataset.precedence===p)ee=De;else if(ee!==z)break}ee?ee.parentNode.insertBefore(h,ee.nextSibling):(p=b.nodeType===9?b.head:b,p.insertBefore(h,p.firstChild))}function JT(h,p){h.crossOrigin==null&&(h.crossOrigin=p.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=p.referrerPolicy),h.title==null&&(h.title=p.title)}function ZT(h,p){h.crossOrigin==null&&(h.crossOrigin=p.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=p.referrerPolicy),h.integrity==null&&(h.integrity=p.integrity)}var jC=null;function HH(h,p,b){if(jC===null){var C=new Map,z=jC=new Map;z.set(b,C)}else z=jC,C=z.get(b),C||(C=new Map,z.set(b,C));if(C.has(h))return C;for(C.set(h,null),b=b.getElementsByTagName(h),z=0;z<b.length;z++){var ee=b[z];if(!(ee[Me]||ee[va]||h==="link"&&ee.getAttribute("rel")==="stylesheet")&&ee.namespaceURI!=="http://www.w3.org/2000/svg"){var ye=ee.getAttribute(p)||"";ye=h+ye;var De=C.get(ye);De?De.push(ee):C.set(ye,[ee])}}return C}function QH(h,p,b){h=h.ownerDocument||h,h.head.insertBefore(b,p==="title"?h.querySelector("head > title"):null)}function jpe(h,p,b){if(b===1||p.itemProp!=null)return!1;switch(h){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return h=p.disabled,typeof p.precedence=="string"&&h==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function zH(h){return!(h.type==="stylesheet"&&(h.state.loading&3)===0)}var Gy=null;function kpe(){}function Spe(h,p,b){if(Gy===null)throw Error(a(475));var C=Gy;if(p.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var z=hv(b.href),ee=h.querySelector($y(z));if(ee){h=ee._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(C.count++,C=kC.bind(C),h.then(C,C)),p.state.loading|=4,p.instance=ee,Ue(ee);return}ee=h.ownerDocument||h,b=MH(b),(z=Gd.get(z))&&JT(b,z),ee=ee.createElement("link"),Ue(ee);var ye=ee;ye._p=new Promise(function(De,Xe){ye.onload=De,ye.onerror=Xe}),Co(ee,"link",b),p.instance=ee}C.stylesheets===null&&(C.stylesheets=new Map),C.stylesheets.set(p,h),(h=p.state.preload)&&(p.state.loading&3)===0&&(C.count++,p=kC.bind(C),h.addEventListener("load",p),h.addEventListener("error",p))}}function _pe(){if(Gy===null)throw Error(a(475));var h=Gy;return h.stylesheets&&h.count===0&&eB(h,h.stylesheets),0<h.count?function(p){var b=setTimeout(function(){if(h.stylesheets&&eB(h,h.stylesheets),h.unsuspend){var C=h.unsuspend;h.unsuspend=null,C()}},6e4);return h.unsuspend=p,function(){h.unsuspend=null,clearTimeout(b)}}:null}function kC(){if(this.count--,this.count===0){if(this.stylesheets)eB(this,this.stylesheets);else if(this.unsuspend){var h=this.unsuspend;this.unsuspend=null,h()}}}var SC=null;function eB(h,p){h.stylesheets=null,h.unsuspend!==null&&(h.count++,SC=new Map,p.forEach(Tpe,h),SC=null,kC.call(h))}function Tpe(h,p){if(!(p.state.loading&4)){var b=SC.get(h);if(b)var C=b.get(null);else{b=new Map,SC.set(h,b);for(var z=h.querySelectorAll("link[data-precedence],style[data-precedence]"),ee=0;ee<z.length;ee++){var ye=z[ee];(ye.nodeName==="LINK"||ye.getAttribute("media")!=="not all")&&(b.set(ye.dataset.precedence,ye),C=ye)}C&&b.set(null,C)}z=p.instance,ye=z.getAttribute("data-precedence"),ee=b.get(ye)||C,ee===C&&b.set(null,z),b.set(ye,z),this.count++,C=kC.bind(this),z.addEventListener("load",C),z.addEventListener("error",C),ee?ee.parentNode.insertBefore(z,ee.nextSibling):(h=h.nodeType===9?h.head:h,h.insertBefore(z,h.firstChild)),p.state.loading|=4}}var qy={$$typeof:E,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function Bpe(h,p,b,C,z,ee,ye,De){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ha(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ha(0),this.hiddenUpdates=Ha(null),this.identifierPrefix=C,this.onUncaughtError=z,this.onCaughtError=ee,this.onRecoverableError=ye,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=De,this.incompleteTransitions=new Map}function $H(h,p,b,C,z,ee,ye,De,Xe,gt,It,Lt){return h=new Bpe(h,p,b,ye,De,Xe,gt,Lt),p=1,ee===!0&&(p|=24),ee=Ji(3,null,null,p),h.current=ee,ee.stateNode=h,p=py(),p.refCount++,h.pooledCache=p,p.refCount++,ee.memoizedState={element:C,isDehydrated:b,cache:p},rt(ee),h}function VH(h){return h?(h=mi,h):mi}function GH(h,p,b,C,z,ee){z=VH(z),C.context===null?C.context=z:C.pendingContext=z,C=Bt(p),C.payload={element:b},ee=ee===void 0?null:ee,ee!==null&&(C.callback=ee),b=Rt(h,C,p),b!==null&&(Xc(b,h,p),Ot(b,h,p))}function qH(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var b=h.retryLane;h.retryLane=b!==0&&b<p?b:p}}function tB(h,p){qH(h,p),(h=h.alternate)&&qH(h,p)}function KH(h){if(h.tag===13){var p=Bu(h,67108864);p!==null&&Xc(p,h,67108864),tB(h,67108864)}}var _C=!0;function Ipe(h,p,b,C){var z=Q.T;Q.T=null;var ee=G.p;try{G.p=2,rB(h,p,b,C)}finally{G.p=ee,Q.T=z}}function Ope(h,p,b,C){var z=Q.T;Q.T=null;var ee=G.p;try{G.p=8,rB(h,p,b,C)}finally{G.p=ee,Q.T=z}}function rB(h,p,b,C){if(_C){var z=aB(C);if(z===null)zT(h,p,C,TC,b),XH(h,C);else if(Fpe(z,h,p,b,C))C.stopPropagation();else if(XH(h,C),p&4&&-1<Dpe.indexOf(h)){for(;z!==null;){var ee=xe(z);if(ee!==null)switch(ee.tag){case 3:if(ee=ee.stateNode,ee.current.memoizedState.isDehydrated){var ye=qt(ee.pendingLanes);if(ye!==0){var De=ee;for(De.pendingLanes|=2,De.entangledLanes|=2;ye;){var Xe=1<<31-We(ye);De.entanglements[1]|=Xe,ye&=~Xe}th(ee),(mn&6)===0&&(hC=ge()+500,Uy(0))}}break;case 13:De=Bu(ee,2),De!==null&&Xc(De,ee,2),mC(),tB(ee,2)}if(ee=aB(C),ee===null&&zT(h,p,C,TC,b),ee===z)break;z=ee}z!==null&&C.stopPropagation()}else zT(h,p,C,null,b)}}function aB(h){return h=hn(h),nB(h)}var TC=null;function nB(h){if(TC=null,h=Ne(h),h!==null){var p=i(h);if(p===null)h=null;else{var b=p.tag;if(b===13){if(h=o(p),h!==null)return h;h=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;h=null}else p!==h&&(h=null)}}return TC=h,null}function WH(h){switch(h){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(he()){case ve:return 2;case le:return 8;case ne:case Ae:return 32;case pe:return 268435456;default:return 32}default:return 32}}var sB=!1,tm=null,rm=null,am=null,Ky=new Map,Wy=new Map,nm=[],Dpe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function XH(h,p){switch(h){case"focusin":case"focusout":tm=null;break;case"dragenter":case"dragleave":rm=null;break;case"mouseover":case"mouseout":am=null;break;case"pointerover":case"pointerout":Ky.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wy.delete(p.pointerId)}}function Xy(h,p,b,C,z,ee){return h===null||h.nativeEvent!==ee?(h={blockedOn:p,domEventName:b,eventSystemFlags:C,nativeEvent:ee,targetContainers:[z]},p!==null&&(p=xe(p),p!==null&&KH(p)),h):(h.eventSystemFlags|=C,p=h.targetContainers,z!==null&&p.indexOf(z)===-1&&p.push(z),h)}function Fpe(h,p,b,C,z){switch(p){case"focusin":return tm=Xy(tm,h,p,b,C,z),!0;case"dragenter":return rm=Xy(rm,h,p,b,C,z),!0;case"mouseover":return am=Xy(am,h,p,b,C,z),!0;case"pointerover":var ee=z.pointerId;return Ky.set(ee,Xy(Ky.get(ee)||null,h,p,b,C,z)),!0;case"gotpointercapture":return ee=z.pointerId,Wy.set(ee,Xy(Wy.get(ee)||null,h,p,b,C,z)),!0}return!1}function YH(h){var p=Ne(h.target);if(p!==null){var b=i(p);if(b!==null){if(p=b.tag,p===13){if(p=o(b),p!==null){h.blockedOn=p,Qs(h.priority,function(){if(b.tag===13){var C=Wc();C=vs(C);var z=Bu(b,C);z!==null&&Xc(z,b,C),tB(b,C)}});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){h.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}h.blockedOn=null}function BC(h){if(h.blockedOn!==null)return!1;for(var p=h.targetContainers;0<p.length;){var b=aB(h.nativeEvent);if(b===null){b=h.nativeEvent;var C=new b.constructor(b.type,b);Yl=C,b.target.dispatchEvent(C),Yl=null}else return p=xe(b),p!==null&&KH(p),h.blockedOn=b,!1;p.shift()}return!0}function JH(h,p,b){BC(h)&&b.delete(p)}function Ppe(){sB=!1,tm!==null&&BC(tm)&&(tm=null),rm!==null&&BC(rm)&&(rm=null),am!==null&&BC(am)&&(am=null),Ky.forEach(JH),Wy.forEach(JH)}function IC(h,p){h.blockedOn===p&&(h.blockedOn=null,sB||(sB=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ppe)))}var OC=null;function ZH(h){OC!==h&&(OC=h,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){OC===h&&(OC=null);for(var p=0;p<h.length;p+=3){var b=h[p],C=h[p+1],z=h[p+2];if(typeof C!="function"){if(nB(C||b)===null)continue;break}var ee=xe(b);ee!==null&&(h.splice(p,3),p-=3,zd(ee,{pending:!0,data:z,method:b.method,action:C},C,z))}}))}function Yy(h){function p(Xe){return IC(Xe,h)}tm!==null&&IC(tm,h),rm!==null&&IC(rm,h),am!==null&&IC(am,h),Ky.forEach(p),Wy.forEach(p);for(var b=0;b<nm.length;b++){var C=nm[b];C.blockedOn===h&&(C.blockedOn=null)}for(;0<nm.length&&(b=nm[0],b.blockedOn===null);)YH(b),b.blockedOn===null&&nm.shift();if(b=(h.ownerDocument||h).$$reactFormReplay,b!=null)for(C=0;C<b.length;C+=3){var z=b[C],ee=b[C+1],ye=z[ca]||null;if(typeof ee=="function")ye||ZH(b);else if(ye){var De=null;if(ee&&ee.hasAttribute("formAction")){if(z=ee,ye=ee[ca]||null)De=ye.formAction;else if(nB(z)!==null)continue}else De=ye.action;typeof De=="function"?b[C+1]=De:(b.splice(C,3),C-=3),ZH(b)}}}function iB(h){this._internalRoot=h}DC.prototype.render=iB.prototype.render=function(h){var p=this._internalRoot;if(p===null)throw Error(a(409));var b=p.current,C=Wc();GH(b,C,h,p,null,null)},DC.prototype.unmount=iB.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var p=h.containerInfo;GH(h.current,2,null,h,null,null),mC(),p[Fa]=null}};function DC(h){this._internalRoot=h}DC.prototype.unstable_scheduleHydration=function(h){if(h){var p=Ln();h={blockedOn:null,target:h,priority:p};for(var b=0;b<nm.length&&p!==0&&p<nm[b].priority;b++);nm.splice(b,0,h),b===0&&YH(h)}};var eQ=t.version;if(eQ!=="19.1.1")throw Error(a(527,eQ,"19.1.1"));G.findDOMNode=function(h){var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(a(188)):(h=Object.keys(h).join(","),Error(a(268,h)));return h=c(p),h=h!==null?d(h):null,h=h===null?null:h.stateNode,h};var Rpe={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var FC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!FC.isDisabled&&FC.supportsFiber)try{qe=FC.inject(Rpe),ze=FC}catch{}}return Zy.createRoot=function(h,p){if(!n(h))throw Error(a(299));var b=!1,C="",z=p9,ee=g9,ye=x9,De=null;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(C=p.identifierPrefix),p.onUncaughtError!==void 0&&(z=p.onUncaughtError),p.onCaughtError!==void 0&&(ee=p.onCaughtError),p.onRecoverableError!==void 0&&(ye=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(De=p.unstable_transitionCallbacks)),p=$H(h,1,!1,null,null,b,C,z,ee,ye,De,null),h[Fa]=p.current,QT(h),new iB(p)},Zy.hydrateRoot=function(h,p,b){if(!n(h))throw Error(a(299));var C=!1,z="",ee=p9,ye=g9,De=x9,Xe=null,gt=null;return b!=null&&(b.unstable_strictMode===!0&&(C=!0),b.identifierPrefix!==void 0&&(z=b.identifierPrefix),b.onUncaughtError!==void 0&&(ee=b.onUncaughtError),b.onCaughtError!==void 0&&(ye=b.onCaughtError),b.onRecoverableError!==void 0&&(De=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&(Xe=b.unstable_transitionCallbacks),b.formState!==void 0&&(gt=b.formState)),p=$H(h,1,!0,p,b??null,C,z,ee,ye,De,Xe,gt),p.context=VH(null),b=p.current,C=Wc(),C=vs(C),z=Bt(C),z.callback=null,Rt(b,z,C),b=C,p.current.lanes=b,Rn(p,b),th(p),h[Fa]=p.current,QT(h),new DC(p)},Zy.version="19.1.1",Zy}var dQ;function Ype(){if(dQ)return dB.exports;dQ=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),dB.exports=Xpe(),dB.exports}var Jpe=Ype();const Zpe=Kl(Jpe),ege=()=>{};var uQ={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vee=function(e){const t=[];let r=0;for(let a=0;a<e.length;a++){let n=e.charCodeAt(a);n<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=n&63|128):(n&64512)===55296&&a+1<e.length&&(e.charCodeAt(a+1)&64512)===56320?(n=65536+((n&1023)<<10)+(e.charCodeAt(++a)&1023),t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=n&63|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=n&63|128)}return t},tge=function(e){const t=[];let r=0,a=0;for(;r<e.length;){const n=e[r++];if(n<128)t[a++]=String.fromCharCode(n);else if(n>191&&n<224){const i=e[r++];t[a++]=String.fromCharCode((n&31)<<6|i&63)}else if(n>239&&n<365){const i=e[r++],o=e[r++],l=e[r++],c=((n&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;t[a++]=String.fromCharCode(55296+(c>>10)),t[a++]=String.fromCharCode(56320+(c&1023))}else{const i=e[r++],o=e[r++];t[a++]=String.fromCharCode((n&15)<<12|(i&63)<<6|o&63)}}return t.join("")},MR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let n=0;n<e.length;n+=3){const i=e[n],o=n+1<e.length,l=o?e[n+1]:0,c=n+2<e.length,d=c?e[n+2]:0,u=i>>2,f=(i&3)<<4|l>>4;let A=(l&15)<<2|d>>6,m=d&63;c||(m=64,o||(A=64)),a.push(r[u],r[f],r[A],r[m])}return a.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(vee(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):tge(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let n=0;n<e.length;){const i=r[e.charAt(n++)],l=n<e.length?r[e.charAt(n)]:0;++n;const d=n<e.length?r[e.charAt(n)]:64;++n;const f=n<e.length?r[e.charAt(n)]:64;if(++n,i==null||l==null||d==null||f==null)throw new rge;const A=i<<2|l>>4;if(a.push(A),d!==64){const m=l<<4&240|d>>2;if(a.push(m),f!==64){const g=d<<6&192|f;a.push(g)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class rge extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const age=function(e){const t=vee(e);return MR.encodeByteArray(t,!0)},c5=function(e){return age(e).replace(/\./g,"")},bee=function(e){try{return MR.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yee(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nge=()=>yee().__FIREBASE_DEFAULTS__,sge=()=>{if(typeof process>"u"||typeof uQ>"u")return;const e=uQ.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},ige=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&bee(e[1]);return t&&JSON.parse(t)},w_=()=>{try{return ege()||nge()||sge()||ige()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},wee=e=>{var t,r;return(r=(t=w_())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},UR=e=>{const t=wee(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),a]:[t.substring(0,r),a]},Nee=()=>{var e;return(e=w_())==null?void 0:e.config},Eee=e=>{var t;return(t=w_())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,a)=>{r?this.reject(r):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function N_(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cee(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},a=t||"demo-project",n=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${a}`,aud:a,iat:n,exp:n+3600,auth_time:n,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[c5(JSON.stringify(r)),c5(JSON.stringify(o)),""].join(".")}const s2={};function oge(){const e={prod:[],emulator:[]};for(const t of Object.keys(s2))s2[t]?e.emulator.push(t):e.prod.push(t);return e}function lge(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let fQ=!1;function E_(e,t){if(typeof window>"u"||typeof document>"u"||!mA(window.location.host)||s2[e]===t||s2[e]||fQ)return;s2[e]=t;function r(A){return`__firebase__banner__${A}`}const a="__firebase__banner",i=oge().prod.length>0;function o(){const A=document.getElementById(a);A&&A.remove()}function l(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function c(A,m){A.setAttribute("width","24"),A.setAttribute("id",m),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function d(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{fQ=!0,o()},A}function u(A,m){A.setAttribute("id",m),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function f(){const A=lge(a),m=r("text"),g=document.getElementById(m)||document.createElement("span"),x=r("learnmore"),v=document.getElementById(x)||document.createElement("a"),y=r("preprendIcon"),N=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const E=A.element;l(E),u(v,x);const B=d();c(N,y),E.append(N,g,v,B),document.body.appendChild(E)}i?(g.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cge(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jl())}function dge(){var t;const e=(t=w_())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uge(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fge(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function hge(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Age(){const e=jl();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function mge(){return!dge()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HR(){try{return typeof indexedDB=="object"}catch{return!1}}function pge(){return new Promise((e,t)=>{try{let r=!0;const a="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(a);n.onsuccess=()=>{n.result.close(),r||self.indexedDB.deleteDatabase(a),e(!0)},n.onupgradeneeded=()=>{r=!1},n.onerror=()=>{var i;t(((i=n.error)==null?void 0:i.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gge="FirebaseError";class vf extends Error{constructor(t,r,a){super(r),this.code=t,this.customData=a,this.name=gge,Object.setPrototypeOf(this,vf.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,S1.prototype.create)}}class S1{constructor(t,r,a){this.service=t,this.serviceName=r,this.errors=a}create(t,...r){const a=r[0]||{},n=`${this.service}/${t}`,i=this.errors[t],o=i?xge(i,a):"Error",l=`${this.serviceName}: ${o} (${n}).`;return new vf(n,l,a)}}function xge(e,t){return e.replace(vge,(r,a)=>{const n=t[a];return n!=null?String(n):`<${a}?>`})}const vge=/\{\$([^}]+)}/g;function bge(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Zm(e,t){if(e===t)return!0;const r=Object.keys(e),a=Object.keys(t);for(const n of r){if(!a.includes(n))return!1;const i=e[n],o=t[n];if(hQ(i)&&hQ(o)){if(!Zm(i,o))return!1}else if(i!==o)return!1}for(const n of a)if(!r.includes(n))return!1;return!0}function hQ(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(e){const t=[];for(const[r,a]of Object.entries(e))Array.isArray(a)?a.forEach(n=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}function Ow(e){const t={};return e.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[n,i]=a.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}}),t}function Dw(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function yge(e,t){const r=new wge(e,t);return r.subscribe.bind(r)}class wge{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,a){let n;if(t===void 0&&r===void 0&&a===void 0)throw new Error("Missing Observer.");Nge(t,["next","error","complete"])?n=t:n={next:t,error:r,complete:a},n.next===void 0&&(n.next=AB),n.error===void 0&&(n.error=AB),n.complete===void 0&&(n.complete=AB);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch{}}),this.observers.push(n),i}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nge(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function AB(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ege=1e3,Cge=2,jge=14400*1e3,kge=.5;function Sge(e,t=Ege,r=Cge){const a=t*Math.pow(r,e),n=Math.round(kge*a*(Math.random()-.5)*2);return Math.min(jge,a+n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(e){return e&&e._delegate?e._delegate:e}class ff{constructor(t,r,a){this.name=t,this.instanceFactory=r,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _ge=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const a=new L2;if(this.instancesDeferred.set(r,a),this.isInitialized(r)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:r});n&&a.resolve(n)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),a=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(n){if(a)return null;throw n}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Bge(t))try{this.getOrInitializeService({instanceIdentifier:cg})}catch{}for(const[r,a]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:n});a.resolve(i)}catch{}}}}clearInstance(t=cg){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=cg){return this.instances.has(t)}getOptions(t=cg){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:a,options:r});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);a===l&&o.resolve(n)}return n}onInit(t,r){const a=this.normalizeInstanceIdentifier(r),n=this.onInitCallbacks.get(a)??new Set;n.add(t),this.onInitCallbacks.set(a,n);const i=this.instances.get(a);return i&&t(i,a),()=>{n.delete(t)}}invokeOnInitCallbacks(t,r){const a=this.onInitCallbacks.get(r);if(a)for(const n of a)try{n(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Tge(t),options:r}),this.instances.set(t,a),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=cg){return this.component?this.component.multipleInstances?t:cg:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Tge(e){return e===cg?void 0:e}function Bge(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ige{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new _ge(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Na;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Na||(Na={}));const Oge={debug:Na.DEBUG,verbose:Na.VERBOSE,info:Na.INFO,warn:Na.WARN,error:Na.ERROR,silent:Na.SILENT},Dge=Na.INFO,Fge={[Na.DEBUG]:"log",[Na.VERBOSE]:"log",[Na.INFO]:"info",[Na.WARN]:"warn",[Na.ERROR]:"error"},Pge=(e,t,...r)=>{if(t<e.logLevel)return;const a=new Date().toISOString(),n=Fge[t];if(n)console[n](`[${a}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let C_=class{constructor(t){this.name=t,this._logLevel=Dge,this._logHandler=Pge,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Na))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Oge[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Na.DEBUG,...t),this._logHandler(this,Na.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Na.VERBOSE,...t),this._logHandler(this,Na.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Na.INFO,...t),this._logHandler(this,Na.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Na.WARN,...t),this._logHandler(this,Na.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Na.ERROR,...t),this._logHandler(this,Na.ERROR,...t)}};const Rge=(e,t)=>t.some(r=>e instanceof r);let AQ,mQ;function Lge(){return AQ||(AQ=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Mge(){return mQ||(mQ=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jee=new WeakMap,pD=new WeakMap,kee=new WeakMap,mB=new WeakMap,QR=new WeakMap;function Uge(e){const t=new Promise((r,a)=>{const n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{r(Mm(e.result)),n()},o=()=>{a(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(r=>{r instanceof IDBCursor&&jee.set(r,e)}).catch(()=>{}),QR.set(t,e),t}function Hge(e){if(pD.has(e))return;const t=new Promise((r,a)=>{const n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{r(),n()},o=()=>{a(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});pD.set(e,t)}let gD={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return pD.get(e);if(t==="objectStoreNames")return e.objectStoreNames||kee.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Mm(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Qge(e){gD=e(gD)}function zge(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const a=e.call(pB(this),t,...r);return kee.set(a,t.sort?t.sort():[t]),Mm(a)}:Mge().includes(e)?function(...t){return e.apply(pB(this),t),Mm(jee.get(this))}:function(...t){return Mm(e.apply(pB(this),t))}}function $ge(e){return typeof e=="function"?zge(e):(e instanceof IDBTransaction&&Hge(e),Rge(e,Lge())?new Proxy(e,gD):e)}function Mm(e){if(e instanceof IDBRequest)return Uge(e);if(mB.has(e))return mB.get(e);const t=$ge(e);return t!==e&&(mB.set(e,t),QR.set(t,e)),t}const pB=e=>QR.get(e);function Vge(e,t,{blocked:r,upgrade:a,blocking:n,terminated:i}={}){const o=indexedDB.open(e,t),l=Mm(o);return a&&o.addEventListener("upgradeneeded",c=>{a(Mm(o.result),c.oldVersion,c.newVersion,Mm(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),n&&c.addEventListener("versionchange",d=>n(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const Gge=["get","getKey","getAll","getAllKeys","count"],qge=["put","add","delete","clear"],gB=new Map;function pQ(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(gB.get(t))return gB.get(t);const r=t.replace(/FromIndex$/,""),a=t!==r,n=qge.includes(r);if(!(r in(a?IDBIndex:IDBObjectStore).prototype)||!(n||Gge.includes(r)))return;const i=async function(o,...l){const c=this.transaction(o,n?"readwrite":"readonly");let d=c.store;return a&&(d=d.index(l.shift())),(await Promise.all([d[r](...l),n&&c.done]))[0]};return gB.set(t,i),i}Qge(e=>({...e,get:(t,r,a)=>pQ(t,r)||e.get(t,r,a),has:(t,r)=>!!pQ(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kge{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Wge(r)){const a=r.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(r=>r).join(" ")}}function Wge(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const xD="@firebase/app",gQ="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=new C_("@firebase/app"),Xge="@firebase/app-compat",Yge="@firebase/analytics-compat",Jge="@firebase/analytics",Zge="@firebase/app-check-compat",exe="@firebase/app-check",txe="@firebase/auth",rxe="@firebase/auth-compat",axe="@firebase/database",nxe="@firebase/data-connect",sxe="@firebase/database-compat",ixe="@firebase/functions",oxe="@firebase/functions-compat",lxe="@firebase/installations",cxe="@firebase/installations-compat",dxe="@firebase/messaging",uxe="@firebase/messaging-compat",fxe="@firebase/performance",hxe="@firebase/performance-compat",Axe="@firebase/remote-config",mxe="@firebase/remote-config-compat",pxe="@firebase/storage",gxe="@firebase/storage-compat",xxe="@firebase/firestore",vxe="@firebase/ai",bxe="@firebase/firestore-compat",yxe="firebase",wxe="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD="[DEFAULT]",Nxe={[xD]:"fire-core",[Xge]:"fire-core-compat",[Jge]:"fire-analytics",[Yge]:"fire-analytics-compat",[exe]:"fire-app-check",[Zge]:"fire-app-check-compat",[txe]:"fire-auth",[rxe]:"fire-auth-compat",[axe]:"fire-rtdb",[nxe]:"fire-data-connect",[sxe]:"fire-rtdb-compat",[ixe]:"fire-fn",[oxe]:"fire-fn-compat",[lxe]:"fire-iid",[cxe]:"fire-iid-compat",[dxe]:"fire-fcm",[uxe]:"fire-fcm-compat",[fxe]:"fire-perf",[hxe]:"fire-perf-compat",[Axe]:"fire-rc",[mxe]:"fire-rc-compat",[pxe]:"fire-gcs",[gxe]:"fire-gcs-compat",[xxe]:"fire-fst",[bxe]:"fire-fst-compat",[vxe]:"fire-vertex","fire-js":"fire-js",[yxe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=new Map,Exe=new Map,bD=new Map;function xQ(e,t){try{e.container.addComponent(t)}catch(r){Y0.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function Dh(e){const t=e.name;if(bD.has(t))return Y0.debug(`There were multiple attempts to register component ${t}.`),!1;bD.set(t,e);for(const r of M2.values())xQ(r,e);for(const r of Exe.values())xQ(r,e);return!0}function xx(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function od(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cxe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Um=new S1("app","Firebase",Cxe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jxe{constructor(t,r,a){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new ff("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Um.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=wxe;function zR(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const a={name:vD,automaticDataCollectionEnabled:!0,...t},n=a.name;if(typeof n!="string"||!n)throw Um.create("bad-app-name",{appName:String(n)});if(r||(r=Nee()),!r)throw Um.create("no-options");const i=M2.get(n);if(i){if(Zm(r,i.options)&&Zm(a,i.config))return i;throw Um.create("duplicate-app",{appName:n})}const o=new Ige(n);for(const c of bD.values())o.addComponent(c);const l=new jxe(r,a,o);return M2.set(n,l),l}function HN(e=vD){const t=M2.get(e);if(!t&&e===vD&&Nee())return zR();if(!t)throw Um.create("no-app",{appName:e});return t}function vQ(){return Array.from(M2.values())}function pd(e,t,r){let a=Nxe[e]??e;r&&(a+=`-${r}`);const n=a.match(/\s|\//),i=t.match(/\s|\//);if(n||i){const o=[`Unable to register library "${a}" with version "${t}":`];n&&o.push(`library name "${a}" contains illegal characters (whitespace or "/")`),n&&i&&o.push("and"),i&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Y0.warn(o.join(" "));return}Dh(new ff(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kxe="firebase-heartbeat-database",Sxe=1,U2="firebase-heartbeat-store";let xB=null;function See(){return xB||(xB=Vge(kxe,Sxe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(U2)}catch(r){console.warn(r)}}}}).catch(e=>{throw Um.create("idb-open",{originalErrorMessage:e.message})})),xB}async function _xe(e){try{const r=(await See()).transaction(U2),a=await r.objectStore(U2).get(_ee(e));return await r.done,a}catch(t){if(t instanceof vf)Y0.warn(t.message);else{const r=Um.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Y0.warn(r.message)}}}async function bQ(e,t){try{const a=(await See()).transaction(U2,"readwrite");await a.objectStore(U2).put(t,_ee(e)),await a.done}catch(r){if(r instanceof vf)Y0.warn(r.message);else{const a=Um.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Y0.warn(a.message)}}}function _ee(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Txe=1024,Bxe=30;class Ixe{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Dxe(r),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,r;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=yQ();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>Bxe){const o=Fxe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Y0.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=yQ(),{heartbeatsToSend:a,unsentEntries:n}=Oxe(this._heartbeatsCache.heartbeats),i=c5(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=r,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Y0.warn(r),""}}}function yQ(){return new Date().toISOString().substring(0,10)}function Oxe(e,t=Txe){const r=[];let a=e.slice();for(const n of e){const i=r.find(o=>o.agent===n.agent);if(i){if(i.dates.push(n.date),wQ(r)>t){i.dates.pop();break}}else if(r.push({agent:n.agent,dates:[n.date]}),wQ(r)>t){r.pop();break}a=a.slice(1)}return{heartbeatsToSend:r,unsentEntries:a}}class Dxe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HR()?pge().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await _xe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const a=await this.read();return bQ(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const a=await this.read();return bQ(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function wQ(e){return c5(JSON.stringify({version:2,heartbeats:e})).length}function Fxe(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let a=1;a<e.length;a++)e[a].date<r&&(r=e[a].date,t=a);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pxe(e){Dh(new ff("platform-logger",t=>new Kge(t),"PRIVATE")),Dh(new ff("heartbeat",t=>new Ixe(t),"PRIVATE")),pd(xD,gQ,e),pd(xD,gQ,"esm2020"),pd("fire-js","")}Pxe("");function Tee(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Rxe=Tee,Bee=new S1("auth","Firebase",Tee());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5=new C_("@firebase/auth");function Lxe(e,...t){d5.logLevel<=Na.WARN&&d5.warn(`Auth (${vx}): ${e}`,...t)}function vk(e,...t){d5.logLevel<=Na.ERROR&&d5.error(`Auth (${vx}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(e,...t){throw $R(e,...t)}function Eh(e,...t){return $R(e,...t)}function Iee(e,t,r){const a={...Rxe(),[t]:r};return new S1("auth","Firebase",a).create(t,{appName:e.name})}function Hm(e){return Iee(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $R(e,...t){if(typeof e!="string"){const r=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=e.name),e._errorFactory.create(r,...a)}return Bee.create(e,...t)}function Qr(e,t,...r){if(!e)throw $R(t,...r)}function B0(e){const t="INTERNAL ASSERTION FAILED: "+e;throw vk(t),new Error(t)}function J0(e,t){e||B0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function Mxe(){return NQ()==="http:"||NQ()==="https:"}function NQ(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uxe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Mxe()||fge()||"connection"in navigator)?navigator.onLine:!0}function Hxe(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(t,r){this.shortDelay=t,this.longDelay=r,J0(r>t,"Short delay should be less than long delay!"),this.isMobile=cge()||hge()}get(){return Uxe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(e,t){J0(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oee{static initialize(t,r,a){this.fetchImpl=t,r&&(this.headersImpl=r),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;B0("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;B0("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;B0("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qxe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zxe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$xe=new QN(3e4,6e4);function vp(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function pA(e,t,r,a,n={}){return Dee(e,n,async()=>{let i={},o={};a&&(t==="GET"?o=a:i={body:JSON.stringify(a)});const l=UN({key:e.config.apiKey,...o}).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const d={method:t,headers:c,...i};return uge()||(d.referrerPolicy="no-referrer"),e.emulatorConfig&&mA(e.emulatorConfig.host)&&(d.credentials="include"),Oee.fetch()(await Fee(e,e.config.apiHost,r,l),d)})}async function Dee(e,t,r){e._canInitEmulator=!1;const a={...Qxe,...t};try{const n=new Gxe(e),i=await Promise.race([r(),n.promise]);n.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw PC(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw PC(e,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw PC(e,"email-already-in-use",o);if(c==="USER_DISABLED")throw PC(e,"user-disabled",o);const u=a[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Iee(e,u,d);hf(e,u)}}catch(n){if(n instanceof vf)throw n;hf(e,"network-request-failed",{message:String(n)})}}async function j_(e,t,r,a,n={}){const i=await pA(e,t,r,a,n);return"mfaPendingCredential"in i&&hf(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function Fee(e,t,r,a){const n=`${t}${r}?${a}`,i=e,o=i.config.emulator?VR(e.config,n):`${e.config.apiScheme}://${n}`;return zxe.includes(r)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function Vxe(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Gxe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,a)=>{this.timer=setTimeout(()=>a(Eh(this.auth,"network-request-failed")),$xe.get())})}}function PC(e,t,r){const a={appName:e.name};r.email&&(a.email=r.email),r.phoneNumber&&(a.phoneNumber=r.phoneNumber);const n=Eh(e,t,a);return n.customData._tokenResponse=r,n}function EQ(e){return e!==void 0&&e.enterprise!==void 0}class qxe{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return Vxe(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Kxe(e,t){return pA(e,"GET","/v2/recaptchaConfig",vp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wxe(e,t){return pA(e,"POST","/v1/accounts:delete",t)}async function u5(e,t){return pA(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Xxe(e,t=!1){const r=La(e),a=await r.getIdToken(t),n=GR(a);Qr(n&&n.exp&&n.auth_time&&n.iat,r.auth,"internal-error");const i=typeof n.firebase=="object"?n.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:n,token:a,authTime:i2(vB(n.auth_time)),issuedAtTime:i2(vB(n.iat)),expirationTime:i2(vB(n.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function vB(e){return Number(e)*1e3}function GR(e){const[t,r,a]=e.split(".");if(t===void 0||r===void 0||a===void 0)return vk("JWT malformed, contained fewer than 3 sections"),null;try{const n=bee(r);return n?JSON.parse(n):(vk("Failed to decode base64 JWT payload"),null)}catch(n){return vk("Caught error parsing JWT payload as JSON",n==null?void 0:n.toString()),null}}function CQ(e){const t=GR(e);return Qr(t,"internal-error"),Qr(typeof t.exp<"u","internal-error"),Qr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H2(e,t,r=!1){if(r)return t;try{return await t}catch(a){throw a instanceof vf&&Yxe(a)&&e.auth.currentUser===e&&await e.auth.signOut(),a}}function Yxe({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jxe{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=i2(this.lastLoginAt),this.creationTime=i2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f5(e){var f;const t=e.auth,r=await e.getIdToken(),a=await H2(e,u5(t,{idToken:r}));Qr(a==null?void 0:a.users.length,t,"internal-error");const n=a.users[0];e._notifyReloadListener(n);const i=(f=n.providerUserInfo)!=null&&f.length?Pee(n.providerUserInfo):[],o=eve(e.providerData,i),l=e.isAnonymous,c=!(e.email&&n.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,u={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:o,metadata:new wD(n.createdAt,n.lastLoginAt),isAnonymous:d};Object.assign(e,u)}async function Zxe(e){const t=La(e);await f5(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function eve(e,t){return[...e.filter(a=>!t.some(n=>n.providerId===a.providerId)),...t]}function Pee(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tve(e,t){const r=await Dee(e,{},async()=>{const a=UN({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:i}=e.config,o=await Fee(e,n,"/v1/token",`key=${i}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:a};return e.emulatorConfig&&mA(e.emulatorConfig.host)&&(c.credentials="include"),Oee.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function rve(e,t){return pA(e,"POST","/v2/accounts:revokeToken",vp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Qr(t.idToken,"internal-error"),Qr(typeof t.idToken<"u","internal-error"),Qr(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):CQ(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Qr(t.length!==0,"internal-error");const r=CQ(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Qr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:a,refreshToken:n,expiresIn:i}=await tve(t,r);this.updateTokensAndExpiration(a,n,Number(i))}updateTokensAndExpiration(t,r,a){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,r){const{refreshToken:a,accessToken:n,expirationTime:i}=r,o=new pb;return a&&(Qr(typeof a=="string","internal-error",{appName:t}),o.refreshToken=a),n&&(Qr(typeof n=="string","internal-error",{appName:t}),o.accessToken=n),i&&(Qr(typeof i=="number","internal-error",{appName:t}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new pb,this.toJSON())}_performRefresh(){return B0("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(e,t){Qr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class ef{constructor({uid:t,auth:r,stsTokenManager:a,...n}){this.providerId="firebase",this.proactiveRefresh=new Jxe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=n.displayName||null,this.email=n.email||null,this.emailVerified=n.emailVerified||!1,this.phoneNumber=n.phoneNumber||null,this.photoURL=n.photoURL||null,this.isAnonymous=n.isAnonymous||!1,this.tenantId=n.tenantId||null,this.providerData=n.providerData?[...n.providerData]:[],this.metadata=new wD(n.createdAt||void 0,n.lastLoginAt||void 0)}async getIdToken(t){const r=await H2(this,this.stsTokenManager.getToken(this.auth,t));return Qr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return Xxe(this,t)}reload(){return Zxe(this)}_assign(t){this!==t&&(Qr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new ef({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Qr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),r&&await f5(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(od(this.auth.app))return Promise.reject(Hm(this.auth));const t=await this.getIdToken();return await H2(this,Wxe(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const a=r.displayName??void 0,n=r.email??void 0,i=r.phoneNumber??void 0,o=r.photoURL??void 0,l=r.tenantId??void 0,c=r._redirectEventId??void 0,d=r.createdAt??void 0,u=r.lastLoginAt??void 0,{uid:f,emailVerified:A,isAnonymous:m,providerData:g,stsTokenManager:x}=r;Qr(f&&x,t,"internal-error");const v=pb.fromJSON(this.name,x);Qr(typeof f=="string",t,"internal-error"),im(a,t.name),im(n,t.name),Qr(typeof A=="boolean",t,"internal-error"),Qr(typeof m=="boolean",t,"internal-error"),im(i,t.name),im(o,t.name),im(l,t.name),im(c,t.name),im(d,t.name),im(u,t.name);const y=new ef({uid:f,auth:t,email:n,emailVerified:A,displayName:a,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:v,createdAt:d,lastLoginAt:u});return g&&Array.isArray(g)&&(y.providerData=g.map(N=>({...N}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(t,r,a=!1){const n=new pb;n.updateFromServerResponse(r);const i=new ef({uid:r.localId,auth:t,stsTokenManager:n,isAnonymous:a});return await f5(i),i}static async _fromGetAccountInfoResponse(t,r,a){const n=r.users[0];Qr(n.localId!==void 0,"internal-error");const i=n.providerUserInfo!==void 0?Pee(n.providerUserInfo):[],o=!(n.email&&n.passwordHash)&&!(i!=null&&i.length),l=new pb;l.updateFromIdToken(a);const c=new ef({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:o}),d={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:i,metadata:new wD(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jQ=new Map;function I0(e){J0(e instanceof Function,"Expected a class definition");let t=jQ.get(e);return t?(J0(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,jQ.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ree{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}Ree.type="NONE";const kQ=Ree;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(e,t,r){return`firebase:${e}:${t}:${r}`}class gb{constructor(t,r,a){this.persistence=t,this.auth=r,this.userKey=a;const{config:n,name:i}=this.auth;this.fullUserKey=bk(this.userKey,n.apiKey,i),this.fullPersistenceKey=bk("persistence",n.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await u5(this.auth,{idToken:t}).catch(()=>{});return r?ef._fromGetAccountInfoResponse(this.auth,r,t):null}return ef._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,a="authUser"){if(!r.length)return new gb(I0(kQ),t,a);const n=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=n[0]||I0(kQ);const o=bk(a,t.config.apiKey,t.name);let l=null;for(const d of r)try{const u=await d._get(o);if(u){let f;if(typeof u=="string"){const A=await u5(t,{idToken:u}).catch(()=>{});if(!A)break;f=await ef._fromGetAccountInfoResponse(t,A,u)}else f=ef._fromJSON(t,u);d!==i&&(l=f),i=d;break}}catch{}const c=n.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new gb(i,t,a):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(r.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new gb(i,t,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SQ(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Hee(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Lee(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(zee(t))return"Blackberry";if($ee(t))return"Webos";if(Mee(t))return"Safari";if((t.includes("chrome/")||Uee(t))&&!t.includes("edge/"))return"Chrome";if(Qee(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=e.match(r);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function Lee(e=jl()){return/firefox\//i.test(e)}function Mee(e=jl()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Uee(e=jl()){return/crios\//i.test(e)}function Hee(e=jl()){return/iemobile/i.test(e)}function Qee(e=jl()){return/android/i.test(e)}function zee(e=jl()){return/blackberry/i.test(e)}function $ee(e=jl()){return/webos/i.test(e)}function qR(e=jl()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ave(e=jl()){var t;return qR(e)&&!!((t=window.navigator)!=null&&t.standalone)}function nve(){return Age()&&document.documentMode===10}function Vee(e=jl()){return qR(e)||Qee(e)||$ee(e)||zee(e)||/windows phone/i.test(e)||Hee(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gee(e,t=[]){let r;switch(e){case"Browser":r=SQ(jl());break;case"Worker":r=`${SQ(jl())}-${e}`;break;default:r=e}const a=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${vx}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sve{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const a=i=>new Promise((o,l)=>{try{const c=t(i);o(c)}catch(c){l(c)}});a.onAbort=r,this.queue.push(a);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const a of this.queue)await a(t),a.onAbort&&r.push(a.onAbort)}catch(a){r.reverse();for(const n of r)try{n()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ive(e,t={}){return pA(e,"GET","/v2/passwordPolicy",vp(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ove=6;class lve{constructor(t){var a;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??ove,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=t.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const a=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;a&&(r.meetsMinPasswordLength=t.length>=a),n&&(r.meetsMaxPasswordLength=t.length<=n)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let a;for(let n=0;n<t.length;n++)a=t.charAt(n),this.updatePasswordCharacterOptionsStatuses(r,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,r,a,n,i){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cve{constructor(t,r,a,n){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=a,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _Q(this),this.idTokenSubscription=new _Q(this),this.beforeStateQueue=new sve(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bee,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=I0(r)),this._initializationPromise=this.queue(async()=>{var a,n,i;if(!this._deleted&&(this.persistenceManager=await gb.create(this,t),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((n=this._popupRedirectResolver)!=null&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await u5(this,{idToken:t}),a=await ef._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(a)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var i;if(od(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,n=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=a==null?void 0:a._redirectEventId,c=await this.tryRedirectSignIn(t);(!o||o===l)&&(c!=null&&c.user)&&(a=c.user,n=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(n)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Qr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await f5(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Hxe()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(od(this.app))return Promise.reject(Hm(this));const r=t?La(t):null;return r&&Qr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Qr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return od(this.app)?Promise.reject(Hm(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return od(this.app)?Promise.reject(Hm(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(I0(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await ive(this),r=new lve(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new S1("auth","Firebase",t())}onAuthStateChanged(t,r,a){return this.registerStateListener(this.authStateSubscription,t,r,a)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,a){return this.registerStateListener(this.idTokenSubscription,t,r,a)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(a.tenantId=this.tenantId),await rve(this,a)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const a=await this.getOrInitRedirectPersistenceManager(r);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&I0(t)||this._popupRedirectResolver;Qr(r,this,"argument-error"),this.redirectPersistenceManager=await gb.create(this,[I0(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,a;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,a,n){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qr(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof r=="function"){const c=t.addObserver(r,a,n);return()=>{o=!0,c()}}else{const c=t.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Qr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Gee(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var n;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((n=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var r;if(od(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&Lxe(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function bx(e){return La(e)}class _Q{constructor(t){this.auth=t,this.observer=null,this.addObserver=yge(r=>this.observer=r)}get next(){return Qr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dve(e){k_=e}function qee(e){return k_.loadJS(e)}function uve(){return k_.recaptchaEnterpriseScript}function fve(){return k_.gapiScript}function hve(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class Ave{constructor(){this.enterprise=new mve}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class mve{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const pve="recaptcha-enterprise",Kee="NO_RECAPTCHA";class gve{constructor(t){this.type=pve,this.auth=bx(t)}async verify(t="verify",r=!1){async function a(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{Kxe(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new qxe(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function n(i,o,l){const c=window.grecaptcha;EQ(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:t}).then(d=>{o(d)}).catch(()=>{o(Kee)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ave().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{a(this.auth).then(l=>{if(!r&&EQ(window.grecaptcha))n(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=uve();c.length!==0&&(c+=l),qee(c).then(()=>{n(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function TQ(e,t,r,a=!1,n=!1){const i=new gve(e);let o;if(n)o=Kee;else try{o=await i.verify(r)}catch{o=await i.verify(r,!0)}const l={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return a?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function ND(e,t,r,a,n){var i;if((i=e._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await TQ(e,t,r,r==="getOobCode");return a(e,o)}else return a(e,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await TQ(e,t,r,r==="getOobCode");return a(e,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xve(e,t){const r=xx(e,"auth");if(r.isInitialized()){const n=r.getImmediate(),i=r.getOptions();if(Zm(i,t??{}))return n;hf(n,"already-initialized")}return r.initialize({options:t})}function vve(e,t){const r=(t==null?void 0:t.persistence)||[],a=(Array.isArray(r)?r:[r]).map(I0);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(a,t==null?void 0:t.popupRedirectResolver)}function bve(e,t,r){const a=bx(e);Qr(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const n=!1,i=Wee(t),{host:o,port:l}=yve(t),c=l===null?"":`:${l}`,d={url:`${i}//${o}${c}/`},u=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:n})});if(!a._canInitEmulator){Qr(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Qr(Zm(d,a.config.emulator)&&Zm(u,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=d,a.emulatorConfig=u,a.settings.appVerificationDisabledForTesting=!0,mA(o)?(N_(`${i}//${o}${c}`),E_("Auth",!0)):wve()}function Wee(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function yve(e){const t=Wee(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const a=r[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(a);if(n){const i=n[1];return{host:i,port:BQ(a.substr(i.length+1))}}else{const[i,o]=a.split(":");return{host:i,port:BQ(o)}}}function BQ(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function wve(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return B0("not implemented")}_getIdTokenResponse(t){return B0("not implemented")}_linkToIdToken(t,r){return B0("not implemented")}_getReauthenticationResolver(t){return B0("not implemented")}}async function Nve(e,t){return pA(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eve(e,t){return j_(e,"POST","/v1/accounts:signInWithPassword",vp(e,t))}async function Cve(e,t){return pA(e,"POST","/v1/accounts:sendOobCode",vp(e,t))}async function jve(e,t){return Cve(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kve(e,t){return j_(e,"POST","/v1/accounts:signInWithEmailLink",vp(e,t))}async function Sve(e,t){return j_(e,"POST","/v1/accounts:signInWithEmailLink",vp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2 extends KR{constructor(t,r,a,n=null){super("password",a),this._email=t,this._password=r,this._tenantId=n}static _fromEmailAndPassword(t,r){return new Q2(t,r,"password")}static _fromEmailAndCode(t,r,a=null){return new Q2(t,r,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ND(t,r,"signInWithPassword",Eve);case"emailLink":return kve(t,{email:this._email,oobCode:this._password});default:hf(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const a={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ND(t,a,"signUpPassword",Nve);case"emailLink":return Sve(t,{idToken:r,email:this._email,oobCode:this._password});default:hf(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xb(e,t){return j_(e,"POST","/v1/accounts:signInWithIdp",vp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ve="http://localhost";class Zg extends KR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Zg(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):hf("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:n,...i}=r;if(!a||!n)return null;const o=new Zg(a,n);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(t){const r=this.buildRequest();return xb(t,r)}_linkToIdToken(t,r){const a=this.buildRequest();return a.idToken=r,xb(t,a)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,xb(t,r)}buildRequest(){const t={requestUri:_ve,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=UN(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tve(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Bve(e){const t=Ow(Dw(e)).link,r=t?Ow(Dw(t)).deep_link_id:null,a=Ow(Dw(e)).deep_link_id;return(a?Ow(Dw(a)).link:null)||a||r||t||e}class WR{constructor(t){const r=Ow(Dw(t)),a=r.apiKey??null,n=r.oobCode??null,i=Tve(r.mode??null);Qr(a&&n&&i,"argument-error"),this.apiKey=a,this.operation=i,this.code=n,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=Bve(t);try{return new WR(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(){this.providerId=_1.PROVIDER_ID}static credential(t,r){return Q2._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const a=WR.parseLink(r);return Qr(a,"argument-error"),Q2._fromEmailAndCode(t,a.code,a.tenantId)}}_1.PROVIDER_ID="password";_1.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_1.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xee{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN extends Xee{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm extends zN{constructor(){super("facebook.com")}static credential(t){return Zg._fromParams({providerId:Nm.PROVIDER_ID,signInMethod:Nm.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Nm.credentialFromTaggedObject(t)}static credentialFromError(t){return Nm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Nm.credential(t.oauthAccessToken)}catch{return null}}}Nm.FACEBOOK_SIGN_IN_METHOD="facebook.com";Nm.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em extends zN{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Zg._fromParams({providerId:Em.PROVIDER_ID,signInMethod:Em.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return Em.credentialFromTaggedObject(t)}static credentialFromError(t){return Em.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:a}=t;if(!r&&!a)return null;try{return Em.credential(r,a)}catch{return null}}}Em.GOOGLE_SIGN_IN_METHOD="google.com";Em.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm extends zN{constructor(){super("github.com")}static credential(t){return Zg._fromParams({providerId:Cm.PROVIDER_ID,signInMethod:Cm.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Cm.credentialFromTaggedObject(t)}static credentialFromError(t){return Cm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Cm.credential(t.oauthAccessToken)}catch{return null}}}Cm.GITHUB_SIGN_IN_METHOD="github.com";Cm.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm extends zN{constructor(){super("twitter.com")}static credential(t,r){return Zg._fromParams({providerId:jm.PROVIDER_ID,signInMethod:jm.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return jm.credentialFromTaggedObject(t)}static credentialFromError(t){return jm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:a}=t;if(!r||!a)return null;try{return jm.credential(r,a)}catch{return null}}}jm.TWITTER_SIGN_IN_METHOD="twitter.com";jm.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,a,n=!1){const i=await ef._fromIdTokenResponse(t,a,n),o=IQ(a);return new zb({user:i,providerId:o,_tokenResponse:a,operationType:r})}static async _forOperation(t,r,a){await t._updateTokensIfNecessary(a,!0);const n=IQ(a);return new zb({user:t,providerId:n,_tokenResponse:a,operationType:r})}}function IQ(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5 extends vf{constructor(t,r,a,n){super(r.code,r.message),this.operationType=a,this.user=n,Object.setPrototypeOf(this,h5.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,r,a,n){return new h5(t,r,a,n)}}function Yee(e,t,r,a){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?h5._fromErrorAndOperation(e,i,t,a):i})}async function Ive(e,t,r=!1){const a=await H2(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return zb._forOperation(e,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ove(e,t,r=!1){const{auth:a}=e;if(od(a.app))return Promise.reject(Hm(a));const n="reauthenticate";try{const i=await H2(e,Yee(a,n,t,e),r);Qr(i.idToken,a,"internal-error");const o=GR(i.idToken);Qr(o,a,"internal-error");const{sub:l}=o;return Qr(e.uid===l,a,"user-mismatch"),zb._forOperation(e,n,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&hf(a,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jee(e,t,r=!1){if(od(e.app))return Promise.reject(Hm(e));const a="signIn",n=await Yee(e,a,t),i=await zb._fromIdTokenResponse(e,a,n);return r||await e._updateCurrentUser(i.user),i}async function Dve(e,t){return Jee(bx(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fve(e){const t=bx(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Pve(e,t,r){const a=bx(e);await ND(a,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",jve)}function Rve(e,t,r){return od(e.app)?Promise.reject(Hm(e)):Dve(La(e),_1.credential(t,r)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Fve(e),a})}function Lve(e,t,r,a){return La(e).onIdTokenChanged(t,r,a)}function Mve(e,t,r){return La(e).beforeAuthStateChanged(t,r)}function Zee(e,t,r,a){return La(e).onAuthStateChanged(t,r,a)}function Uve(e){return La(e).signOut()}const A5="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ete{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(A5,"1"),this.storage.removeItem(A5),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hve=1e3,Qve=10;class tte extends ete{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vee(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const a=this.storage.getItem(r),n=this.localCache[r];a!==n&&t(r,n,a)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const a=t.key;r?this.detachListener():this.stopPolling();const n=()=>{const o=this.storage.getItem(a);!r&&this.localCache[a]===o||this.notifyListeners(a,o)},i=this.storage.getItem(a);nve()&&i!==t.newValue&&t.newValue!==t.oldValue?setTimeout(n,Qve):n()}notifyListeners(t,r){this.localCache[t]=r;const a=this.listeners[t];if(a)for(const n of Array.from(a))n(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:a}),!0)})},Hve)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}tte.type="LOCAL";const zve=tte;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rte extends ete{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}rte.type="SESSION";const ate=rte;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ve(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(n=>n.isListeningto(t));if(r)return r;const a=new S_(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:a,eventType:n,data:i}=r.data,o=this.handlersMap[n];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:a,eventType:n});const l=Array.from(o).map(async d=>d(r.origin,i)),c=await $ve(l);r.ports[0].postMessage({status:"done",eventId:a,eventType:n,response:c})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}S_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(e="",t=10){let r="";for(let a=0;a<t;a++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vve{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,a=50){const n=typeof MessageChannel<"u"?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const d=XR("",20);n.port1.start();const u=setTimeout(()=>{c(new Error("unsupported_event"))},a);o={messageChannel:n,onMessage(f){const A=f;if(A.data.eventId===d)switch(A.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(A.data.response);break;default:clearTimeout(u),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),n.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:d,data:r},[n.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(){return window}function Gve(e){Ch().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nte(){return typeof Ch().WorkerGlobalScope<"u"&&typeof Ch().importScripts=="function"}async function qve(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Kve(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function Wve(){return nte()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ste="firebaseLocalStorageDb",Xve=1,m5="firebaseLocalStorage",ite="fbase_key";class $N{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function __(e,t){return e.transaction([m5],t?"readwrite":"readonly").objectStore(m5)}function Yve(){const e=indexedDB.deleteDatabase(ste);return new $N(e).toPromise()}function ED(){const e=indexedDB.open(ste,Xve);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const a=e.result;try{a.createObjectStore(m5,{keyPath:ite})}catch(n){r(n)}}),e.addEventListener("success",async()=>{const a=e.result;a.objectStoreNames.contains(m5)?t(a):(a.close(),await Yve(),t(await ED()))})})}async function OQ(e,t,r){const a=__(e,!0).put({[ite]:t,value:r});return new $N(a).toPromise()}async function Jve(e,t){const r=__(e,!1).get(t),a=await new $N(r).toPromise();return a===void 0?null:a.value}function DQ(e,t){const r=__(e,!0).delete(t);return new $N(r).toPromise()}const Zve=800,ebe=3;class ote{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ED(),this.db)}async _withRetries(t){let r=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(r++>ebe)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nte()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=S_._getInstance(Wve()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,a;if(this.activeServiceWorker=await qve(),!this.activeServiceWorker)return;this.sender=new Vve(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(a=t[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Kve()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await ED();return await OQ(t,A5,"1"),await DQ(t,A5),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(a=>OQ(a,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(a=>Jve(a,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>DQ(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(n=>{const i=__(n,!1).getAll();return new $N(i).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],a=new Set;if(t.length!==0)for(const{fbase_key:n,value:i}of t)a.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(i)&&(this.notifyListeners(n,i),r.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!a.has(n)&&(this.notifyListeners(n,null),r.push(n));return r}notifyListeners(t,r){this.localCache[t]=r;const a=this.listeners[t];if(a)for(const n of Array.from(a))n(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Zve)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ote.type="LOCAL";const tbe=ote;new QN(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rbe(e,t){return t?I0(t):(Qr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR extends KR{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return xb(t,this._buildIdpRequest())}_linkToIdToken(t,r){return xb(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return xb(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function abe(e){return Jee(e.auth,new YR(e),e.bypassAuthState)}function nbe(e){const{auth:t,user:r}=e;return Qr(r,t,"internal-error"),Ove(r,new YR(e),e.bypassAuthState)}async function sbe(e){const{auth:t,user:r}=e;return Qr(r,t,"internal-error"),Ive(r,new YR(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lte{constructor(t,r,a,n,i=!1){this.auth=t,this.resolver=a,this.user=n,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:a,postBody:n,tenantId:i,error:o,type:l}=t;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:a,tenantId:i||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return abe;case"linkViaPopup":case"linkViaRedirect":return sbe;case"reauthViaPopup":case"reauthViaRedirect":return nbe;default:hf(this.auth,"internal-error")}}resolve(t){J0(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){J0(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ibe=new QN(2e3,1e4);class eb extends lte{constructor(t,r,a,n,i){super(t,r,n,i),this.provider=a,this.authWindow=null,this.pollId=null,eb.currentPopupAction&&eb.currentPopupAction.cancel(),eb.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Qr(t,this.auth,"internal-error"),t}async onExecution(){J0(this.filter.length===1,"Popup operations only handle one event");const t=XR();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Eh(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Eh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eb.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,a;if((a=(r=this.authWindow)==null?void 0:r.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Eh(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,ibe.get())};t()}}eb.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const obe="pendingRedirect",yk=new Map;class lbe extends lte{constructor(t,r,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a),this.eventId=null}async execute(){let t=yk.get(this.auth._key());if(!t){try{const a=await cbe(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(r){t=()=>Promise.reject(r)}yk.set(this.auth._key(),t)}return this.bypassAuthState||yk.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cbe(e,t){const r=fbe(t),a=ube(e);if(!await a._isAvailable())return!1;const n=await a._get(r)==="true";return await a._remove(r),n}function dbe(e,t){yk.set(e._key(),t)}function ube(e){return I0(e._redirectPersistence)}function fbe(e){return bk(obe,e.config.apiKey,e.name)}async function hbe(e,t,r=!1){if(od(e.app))return Promise.reject(Hm(e));const a=bx(e),n=rbe(a,t),o=await new lbe(a,n,r).execute();return o&&!r&&(delete o.user._redirectEventId,await a._persistUserIfCurrent(o.user),await a._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Abe=600*1e3;class mbe{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(r=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!pbe(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var a;if(t.error&&!cte(t)){const n=((a=t.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";r.onError(Eh(this.auth,n))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const a=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Abe&&this.cachedEventUids.clear(),this.cachedEventUids.has(FQ(t))}saveEventToCache(t){this.cachedEventUids.add(FQ(t)),this.lastProcessedEventTime=Date.now()}}function FQ(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function cte({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function pbe(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cte(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gbe(e,t={}){return pA(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xbe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vbe=/^https?/;async function bbe(e){if(e.config.emulator)return;const{authorizedDomains:t}=await gbe(e);for(const r of t)try{if(ybe(r))return}catch{}hf(e,"unauthorized-domain")}function ybe(e){const t=yD(),{protocol:r,hostname:a}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&a===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===a}if(!vbe.test(r))return!1;if(xbe.test(e))return a===e;const n=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wbe=new QN(3e4,6e4);function PQ(){const e=Ch().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function Nbe(e){return new Promise((t,r)=>{var n,i,o;function a(){PQ(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{PQ(),r(Eh(e,"network-request-failed"))},timeout:wbe.get()})}if((i=(n=Ch().gapi)==null?void 0:n.iframes)!=null&&i.Iframe)t(gapi.iframes.getContext());else if((o=Ch().gapi)!=null&&o.load)a();else{const l=hve("iframefcb");return Ch()[l]=()=>{gapi.load?a():r(Eh(e,"network-request-failed"))},qee(`${fve()}?onload=${l}`).catch(c=>r(c))}}).catch(t=>{throw wk=null,t})}let wk=null;function Ebe(e){return wk=wk||Nbe(e),wk}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cbe=new QN(5e3,15e3),jbe="__/auth/iframe",kbe="emulator/auth/iframe",Sbe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_be=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Tbe(e){const t=e.config;Qr(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?VR(t,kbe):`https://${e.config.authDomain}/${jbe}`,a={apiKey:t.apiKey,appName:e.name,v:vx},n=_be.get(e.config.apiHost);n&&(a.eid=n);const i=e._getFrameworks();return i.length&&(a.fw=i.join(",")),`${r}?${UN(a).slice(1)}`}async function Bbe(e){const t=await Ebe(e),r=Ch().gapi;return Qr(r,e,"internal-error"),t.open({where:document.body,url:Tbe(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sbe,dontclear:!0},a=>new Promise(async(n,i)=>{await a.restyle({setHideOnLeave:!1});const o=Eh(e,"network-request-failed"),l=Ch().setTimeout(()=>{i(o)},Cbe.get());function c(){Ch().clearTimeout(l),n(a)}a.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ibe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Obe=500,Dbe=600,Fbe="_blank",Pbe="http://localhost";class RQ{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Rbe(e,t,r,a=Obe,n=Dbe){const i=Math.max((window.screen.availHeight-n)/2,0).toString(),o=Math.max((window.screen.availWidth-a)/2,0).toString();let l="";const c={...Ibe,width:a.toString(),height:n.toString(),top:i,left:o},d=jl().toLowerCase();r&&(l=Uee(d)?Fbe:r),Lee(d)&&(t=t||Pbe,c.scrollbars="yes");const u=Object.entries(c).reduce((A,[m,g])=>`${A}${m}=${g},`,"");if(ave(d)&&l!=="_self")return Lbe(t||"",l),new RQ(null);const f=window.open(t||"",l,u);Qr(f,e,"popup-blocked");try{f.focus()}catch{}return new RQ(f)}function Lbe(e,t){const r=document.createElement("a");r.href=e,r.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mbe="__/auth/handler",Ube="emulator/auth/handler",Hbe=encodeURIComponent("fac");async function LQ(e,t,r,a,n,i){Qr(e.config.authDomain,e,"auth-domain-config-required"),Qr(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:a,v:vx,eventId:n};if(t instanceof Xee){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",bge(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[u,f]of Object.entries({}))o[u]=f}if(t instanceof zN){const u=t.getScopes().filter(f=>f!=="");u.length>0&&(o.scopes=u.join(","))}e.tenantId&&(o.tid=e.tenantId);const l=o;for(const u of Object.keys(l))l[u]===void 0&&delete l[u];const c=await e._getAppCheckToken(),d=c?`#${Hbe}=${encodeURIComponent(c)}`:"";return`${Qbe(e)}?${UN(l).slice(1)}${d}`}function Qbe({config:e}){return e.emulator?VR(e,Ube):`https://${e.authDomain}/${Mbe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB="webStorageSupport";class zbe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ate,this._completeRedirectFn=hbe,this._overrideRedirectResult=dbe}async _openPopup(t,r,a,n){var o;J0((o=this.eventManagers[t._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await LQ(t,r,a,yD(),n);return Rbe(t,i,XR())}async _openRedirect(t,r,a,n){await this._originValidation(t);const i=await LQ(t,r,a,yD(),n);return Gve(i),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:n,promise:i}=this.eventManagers[r];return n?Promise.resolve(n):(J0(i,"If manager is not set, promise should be"),i)}const a=this.initAndGetManager(t);return this.eventManagers[r]={promise:a},a.catch(()=>{delete this.eventManagers[r]}),a}async initAndGetManager(t){const r=await Bbe(t),a=new mbe(t);return r.register("authEvent",n=>(Qr(n==null?void 0:n.authEvent,t,"invalid-auth-event"),{status:a.onEvent(n.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=r,a}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(bB,{type:bB},n=>{var o;const i=(o=n==null?void 0:n[0])==null?void 0:o[bB];i!==void 0&&r(!!i),hf(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=bbe(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return Vee()||Mee()||qR()}}const $be=zbe;var MQ="@firebase/auth",UQ="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vbe{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(a=>{t((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Qr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gbe(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qbe(e){Dh(new ff("auth",(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat"),i=t.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=a.options;Qr(o&&!o.includes(":"),"invalid-api-key",{appName:a.name});const c={apiKey:o,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gee(e)},d=new cve(a,n,i,c);return vve(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,a)=>{t.getProvider("auth-internal").initialize()})),Dh(new ff("auth-internal",t=>{const r=bx(t.getProvider("auth").getImmediate());return(a=>new Vbe(a))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),pd(MQ,UQ,Gbe(e)),pd(MQ,UQ,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kbe=300,Wbe=Eee("authIdTokenMaxAge")||Kbe;let HQ=null;const Xbe=e=>async t=>{const r=t&&await t.getIdTokenResult(),a=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(a&&a>Wbe)return;const n=r==null?void 0:r.token;HQ!==n&&(HQ=n,await fetch(e,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))};function dte(e=HN()){const t=xx(e,"auth");if(t.isInitialized())return t.getImmediate();const r=xve(e,{popupRedirectResolver:$be,persistence:[tbe,zve,ate]}),a=Eee("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(a,location.origin);if(location.origin===i.origin){const o=Xbe(i.toString());Mve(r,o,()=>o(r.currentUser)),Lve(r,l=>o(l))}}const n=wee("auth");return n&&bve(r,`http://${n}`),r}function Ybe(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}dve({loadJS(e){return new Promise((t,r)=>{const a=document.createElement("script");a.setAttribute("src",e),a.onload=t,a.onerror=n=>{const i=Eh("internal-error");i.customData=n,r(i)},a.type="text/javascript",a.charset="UTF-8",Ybe().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qbe("Browser");var Jbe="firebase",Zbe="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pd(Jbe,Zbe,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=new Map,ute={activated:!1,tokenObservers:[]},e1e={initialized:!1,enabled:!1};function Ui(e){return CD.get(e)||{...ute}}function t1e(e,t){return CD.set(e,t),CD.get(e)}function T_(){return e1e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fte="https://content-firebaseappcheck.googleapis.com/v1",r1e="exchangeRecaptchaV3Token",a1e="exchangeDebugToken",QQ={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},n1e=1440*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1e{constructor(t,r,a,n,i){if(this.operation=t,this.retryPolicy=r,this.getWaitDuration=a,this.lowerBound=n,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=n,n>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new L2,this.pending.promise.catch(r=>{}),await i1e(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new L2,this.pending.promise.catch(r=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(r){this.retryPolicy(r)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const r=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),r}}}function i1e(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1e={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},yc=new S1("appCheck","AppCheck",o1e);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zQ(e=!1){var t;return e?(t=self.grecaptcha)==null?void 0:t.enterprise:self.grecaptcha}function JR(e){if(!Ui(e).activated)throw yc.create("use-before-activation",{appName:e.name})}function hte(e){const t=Math.round(e/1e3),r=Math.floor(t/(3600*24)),a=Math.floor((t-r*3600*24)/3600),n=Math.floor((t-r*3600*24-a*3600)/60),i=t-r*3600*24-a*3600-n*60;let o="";return r&&(o+=RC(r)+"d:"),a&&(o+=RC(a)+"h:"),o+=RC(n)+"m:"+RC(i)+"s",o}function RC(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR({url:e,body:t},r){const a={"Content-Type":"application/json"},n=r.getImmediate({optional:!0});if(n){const f=await n.getHeartbeatsHeader();f&&(a["X-Firebase-Client"]=f)}const i={method:"POST",body:JSON.stringify(t),headers:a};let o;try{o=await fetch(e,i)}catch(f){throw yc.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw yc.create("fetch-status-error",{httpStatus:o.status});let l;try{l=await o.json()}catch(f){throw yc.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const c=l.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw yc.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});const d=Number(c[1])*1e3,u=Date.now();return{token:l.token,expireTimeMillis:u+d,issuedAtTimeMillis:u}}function l1e(e,t){const{projectId:r,appId:a,apiKey:n}=e.options;return{url:`${fte}/projects/${r}/apps/${a}:${r1e}?key=${n}`,body:{recaptcha_v3_token:t}}}function Ate(e,t){const{projectId:r,appId:a,apiKey:n}=e.options;return{url:`${fte}/projects/${r}/apps/${a}:${a1e}?key=${n}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1e="firebase-app-check-database",d1e=1,z2="firebase-app-check-store",mte="debug-token";let LC=null;function pte(){return LC||(LC=new Promise((e,t)=>{try{const r=indexedDB.open(c1e,d1e);r.onsuccess=a=>{e(a.target.result)},r.onerror=a=>{var n;t(yc.create("storage-open",{originalErrorMessage:(n=a.target.error)==null?void 0:n.message}))},r.onupgradeneeded=a=>{const n=a.target.result;switch(a.oldVersion){case 0:n.createObjectStore(z2,{keyPath:"compositeKey"})}}}catch(r){t(yc.create("storage-open",{originalErrorMessage:r==null?void 0:r.message}))}}),LC)}function u1e(e){return xte(vte(e))}function f1e(e,t){return gte(vte(e),t)}function h1e(e){return gte(mte,e)}function A1e(){return xte(mte)}async function gte(e,t){const a=(await pte()).transaction(z2,"readwrite"),i=a.objectStore(z2).put({compositeKey:e,value:t});return new Promise((o,l)=>{i.onsuccess=c=>{o()},a.onerror=c=>{var d;l(yc.create("storage-set",{originalErrorMessage:(d=c.target.error)==null?void 0:d.message}))}})}async function xte(e){const r=(await pte()).transaction(z2,"readonly"),n=r.objectStore(z2).get(e);return new Promise((i,o)=>{n.onsuccess=l=>{const c=l.target.result;i(c?c.value:void 0)},r.onerror=l=>{var c;o(yc.create("storage-get",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function vte(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=new C_("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1e(e){if(HR()){let t;try{t=await u1e(e)}catch(r){Tm.warn(`Failed to read token from IndexedDB. Error: ${r}`)}return t}}function yB(e,t){return HR()?f1e(e,t).catch(r=>{Tm.warn(`Failed to write token to IndexedDB. Error: ${r}`)}):Promise.resolve()}async function p1e(){let e;try{e=await A1e()}catch{}if(e)return e;{const t=crypto.randomUUID();return h1e(t).catch(r=>Tm.warn(`Failed to persist debug token to IndexedDB. Error: ${r}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e8(){return T_().enabled}async function t8(){const e=T_();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function g1e(){const e=yee(),t=T_();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const r=new L2;t.token=r,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?r.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):r.resolve(p1e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1e={error:"UNKNOWN_ERROR"};function v1e(e){return MR.encodeString(JSON.stringify(e),!1)}async function jD(e,t=!1,r=!1){const a=e.app;JR(a);const n=Ui(a);let i=n.token,o;if(i&&!tb(i)&&(n.token=void 0,i=void 0),!i){const d=await n.cachedTokenPromise;d&&(tb(d)?i=d:await yB(a,void 0))}if(!t&&i&&tb(i))return{token:i.token};let l=!1;if(e8())try{n.exchangeTokenPromise||(n.exchangeTokenPromise=ZR(Ate(a,await t8()),e.heartbeatServiceProvider).finally(()=>{n.exchangeTokenPromise=void 0}),l=!0);const d=await n.exchangeTokenPromise;return await yB(a,d),n.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Tm.warn(d.message):r&&Tm.error(d),wB(d)}try{n.exchangeTokenPromise||(n.exchangeTokenPromise=n.provider.getToken().finally(()=>{n.exchangeTokenPromise=void 0}),l=!0),i=await Ui(a).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Tm.warn(d.message):r&&Tm.error(d),o=d}let c;return i?o?tb(i)?c={token:i.token,internalError:o}:c=wB(o):(c={token:i.token},n.token=i,await yB(a,i)):c=wB(o),l&&wte(a,c),c}async function b1e(e){const t=e.app;JR(t);const{provider:r}=Ui(t);if(e8()){const a=await t8(),{token:n}=await ZR(Ate(t,a),e.heartbeatServiceProvider);return{token:n}}else{const{token:a}=await r.getToken();return{token:a}}}function bte(e,t,r,a){const{app:n}=e,i=Ui(n),o={next:r,error:a,type:t};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&tb(i.token)){const l=i.token;Promise.resolve().then(()=>{r({token:l.token}),$Q(e)}).catch(()=>{})}i.cachedTokenPromise.then(()=>$Q(e))}function yte(e,t){const r=Ui(e),a=r.tokenObservers.filter(n=>n.next!==t);a.length===0&&r.tokenRefresher&&r.tokenRefresher.isRunning()&&r.tokenRefresher.stop(),r.tokenObservers=a}function $Q(e){const{app:t}=e,r=Ui(t);let a=r.tokenRefresher;a||(a=y1e(e),r.tokenRefresher=a),!a.isRunning()&&r.isTokenAutoRefreshEnabled&&a.start()}function y1e(e){const{app:t}=e;return new s1e(async()=>{const r=Ui(t);let a;if(r.token?a=await jD(e,!0):a=await jD(e),a.error)throw a.error;if(a.internalError)throw a.internalError},()=>!0,()=>{const r=Ui(t);if(r.token){let a=r.token.issuedAtTimeMillis+(r.token.expireTimeMillis-r.token.issuedAtTimeMillis)*.5+3e5;const n=r.token.expireTimeMillis-300*1e3;return a=Math.min(a,n),Math.max(0,a-Date.now())}else return 0},QQ.RETRIAL_MIN_WAIT,QQ.RETRIAL_MAX_WAIT)}function wte(e,t){const r=Ui(e).tokenObservers;for(const a of r)try{a.type==="EXTERNAL"&&t.error!=null?a.error(t.error):a.next(t)}catch{}}function tb(e){return e.expireTimeMillis-Date.now()>0}function wB(e){return{token:v1e(x1e),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1e{constructor(t,r){this.app=t,this.heartbeatServiceProvider=r}_delete(){const{tokenObservers:t}=Ui(this.app);for(const r of t)yte(this.app,r.next);return Promise.resolve()}}function N1e(e,t){return new w1e(e,t)}function E1e(e){return{getToken:t=>jD(e,t),getLimitedUseToken:()=>b1e(e),addTokenListener:t=>bte(e,"INTERNAL",t),removeTokenListener:t=>yte(e.app,t)}}const C1e="@firebase/app-check",j1e="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1e="https://www.google.com/recaptcha/api.js";function S1e(e,t){const r=new L2,a=Ui(e);a.reCAPTCHAState={initialized:r};const n=_1e(e),i=zQ(!1);return i?VQ(e,t,i,n,r):I1e(()=>{const o=zQ(!1);if(!o)throw new Error("no recaptcha");VQ(e,t,o,n,r)}),r.promise}function VQ(e,t,r,a,n){r.ready(()=>{B1e(e,t,r,a),n.resolve(r)})}function _1e(e){const t=`fire_app_check_${e.name}`,r=document.createElement("div");return r.id=t,r.style.display="none",document.body.appendChild(r),t}async function T1e(e){JR(e);const r=await Ui(e).reCAPTCHAState.initialized.promise;return new Promise((a,n)=>{const i=Ui(e).reCAPTCHAState;r.ready(()=>{a(r.execute(i.widgetId,{action:"fire_app_check"}))})})}function B1e(e,t,r,a){const n=r.render(a,{sitekey:t,size:"invisible",callback:()=>{Ui(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Ui(e).reCAPTCHAState.succeeded=!1}}),i=Ui(e);i.reCAPTCHAState={...i.reCAPTCHAState,widgetId:n}}function I1e(e){const t=document.createElement("script");t.src=k1e,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var a,n,i;D1e(this._throttleData);const t=await T1e(this._app).catch(o=>{throw yc.create("recaptcha-error")});if(!((a=Ui(this._app).reCAPTCHAState)!=null&&a.succeeded))throw yc.create("recaptcha-error");let r;try{r=await ZR(l1e(this._app,t),this._heartbeatServiceProvider)}catch(o){throw(n=o.code)!=null&&n.includes("fetch-status-error")?(this._throttleData=O1e(Number((i=o.customData)==null?void 0:i.httpStatus),this._throttleData),yc.create("initial-throttle",{time:hte(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,r}initialize(t){this._app=t,this._heartbeatServiceProvider=xx(t,"heartbeat"),S1e(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof r8?this._siteKey===t._siteKey:!1}}function O1e(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+n1e,httpStatus:e};{const r=t?t.backoffCount:0,a=Sge(r,1e3,2);return{backoffCount:r+1,allowRequestsAfter:Date.now()+a,httpStatus:e}}}function D1e(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw yc.create("throttled",{time:hte(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1e(e=HN(),t){e=La(e);const r=xx(e,"app-check");if(T_().initialized||g1e(),e8()&&t8().then(n=>console.log(`App Check debug token: ${n}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),r.isInitialized()){const n=r.getImmediate(),i=r.getOptions();if(i.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&i.provider.isEqual(t.provider))return n;throw yc.create("already-initialized",{appName:e.name})}const a=r.initialize({options:t});return P1e(e,t.provider,t.isTokenAutoRefreshEnabled),Ui(e).isTokenAutoRefreshEnabled&&bte(a,"INTERNAL",()=>{}),a}function P1e(e,t,r=!1){const a=t1e(e,{...ute});a.activated=!0,a.provider=t,a.cachedTokenPromise=m1e(e).then(n=>(n&&tb(n)&&(a.token=n,wte(e,{token:n.token})),n)),a.isTokenAutoRefreshEnabled=r&&e.automaticDataCollectionEnabled,!e.automaticDataCollectionEnabled&&r&&Tm.warn("`isTokenAutoRefreshEnabled` is true but `automaticDataCollectionEnabled` was set to false during `initializeApp()`. This blocks automatic token refresh."),a.provider.initialize(e)}const R1e="app-check",GQ="app-check-internal";function L1e(){Dh(new ff(R1e,e=>{const t=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat");return N1e(t,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider(GQ).initialize()})),Dh(new ff(GQ,e=>{const t=e.getProvider("app-check").getImmediate();return E1e(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),pd(C1e,j1e)}L1e();var qQ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qm,Nte;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(j,k){function T(){}T.prototype=k.prototype,j.D=k.prototype,j.prototype=new T,j.prototype.constructor=j,j.C=function(L,F,S){for(var M=Array(arguments.length-2),H=2;H<arguments.length;H++)M[H-2]=arguments[H];return k.prototype[F].apply(L,M)}}function r(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(a,r),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function n(j,k,T){T||(T=0);var L=Array(16);if(typeof k=="string")for(var F=0;16>F;++F)L[F]=k.charCodeAt(T++)|k.charCodeAt(T++)<<8|k.charCodeAt(T++)<<16|k.charCodeAt(T++)<<24;else for(F=0;16>F;++F)L[F]=k[T++]|k[T++]<<8|k[T++]<<16|k[T++]<<24;k=j.g[0],T=j.g[1],F=j.g[2];var S=j.g[3],M=k+(S^T&(F^S))+L[0]+3614090360&4294967295;k=T+(M<<7&4294967295|M>>>25),M=S+(F^k&(T^F))+L[1]+3905402710&4294967295,S=k+(M<<12&4294967295|M>>>20),M=F+(T^S&(k^T))+L[2]+606105819&4294967295,F=S+(M<<17&4294967295|M>>>15),M=T+(k^F&(S^k))+L[3]+3250441966&4294967295,T=F+(M<<22&4294967295|M>>>10),M=k+(S^T&(F^S))+L[4]+4118548399&4294967295,k=T+(M<<7&4294967295|M>>>25),M=S+(F^k&(T^F))+L[5]+1200080426&4294967295,S=k+(M<<12&4294967295|M>>>20),M=F+(T^S&(k^T))+L[6]+2821735955&4294967295,F=S+(M<<17&4294967295|M>>>15),M=T+(k^F&(S^k))+L[7]+4249261313&4294967295,T=F+(M<<22&4294967295|M>>>10),M=k+(S^T&(F^S))+L[8]+1770035416&4294967295,k=T+(M<<7&4294967295|M>>>25),M=S+(F^k&(T^F))+L[9]+2336552879&4294967295,S=k+(M<<12&4294967295|M>>>20),M=F+(T^S&(k^T))+L[10]+4294925233&4294967295,F=S+(M<<17&4294967295|M>>>15),M=T+(k^F&(S^k))+L[11]+2304563134&4294967295,T=F+(M<<22&4294967295|M>>>10),M=k+(S^T&(F^S))+L[12]+1804603682&4294967295,k=T+(M<<7&4294967295|M>>>25),M=S+(F^k&(T^F))+L[13]+4254626195&4294967295,S=k+(M<<12&4294967295|M>>>20),M=F+(T^S&(k^T))+L[14]+2792965006&4294967295,F=S+(M<<17&4294967295|M>>>15),M=T+(k^F&(S^k))+L[15]+1236535329&4294967295,T=F+(M<<22&4294967295|M>>>10),M=k+(F^S&(T^F))+L[1]+4129170786&4294967295,k=T+(M<<5&4294967295|M>>>27),M=S+(T^F&(k^T))+L[6]+3225465664&4294967295,S=k+(M<<9&4294967295|M>>>23),M=F+(k^T&(S^k))+L[11]+643717713&4294967295,F=S+(M<<14&4294967295|M>>>18),M=T+(S^k&(F^S))+L[0]+3921069994&4294967295,T=F+(M<<20&4294967295|M>>>12),M=k+(F^S&(T^F))+L[5]+3593408605&4294967295,k=T+(M<<5&4294967295|M>>>27),M=S+(T^F&(k^T))+L[10]+38016083&4294967295,S=k+(M<<9&4294967295|M>>>23),M=F+(k^T&(S^k))+L[15]+3634488961&4294967295,F=S+(M<<14&4294967295|M>>>18),M=T+(S^k&(F^S))+L[4]+3889429448&4294967295,T=F+(M<<20&4294967295|M>>>12),M=k+(F^S&(T^F))+L[9]+568446438&4294967295,k=T+(M<<5&4294967295|M>>>27),M=S+(T^F&(k^T))+L[14]+3275163606&4294967295,S=k+(M<<9&4294967295|M>>>23),M=F+(k^T&(S^k))+L[3]+4107603335&4294967295,F=S+(M<<14&4294967295|M>>>18),M=T+(S^k&(F^S))+L[8]+1163531501&4294967295,T=F+(M<<20&4294967295|M>>>12),M=k+(F^S&(T^F))+L[13]+2850285829&4294967295,k=T+(M<<5&4294967295|M>>>27),M=S+(T^F&(k^T))+L[2]+4243563512&4294967295,S=k+(M<<9&4294967295|M>>>23),M=F+(k^T&(S^k))+L[7]+1735328473&4294967295,F=S+(M<<14&4294967295|M>>>18),M=T+(S^k&(F^S))+L[12]+2368359562&4294967295,T=F+(M<<20&4294967295|M>>>12),M=k+(T^F^S)+L[5]+4294588738&4294967295,k=T+(M<<4&4294967295|M>>>28),M=S+(k^T^F)+L[8]+2272392833&4294967295,S=k+(M<<11&4294967295|M>>>21),M=F+(S^k^T)+L[11]+1839030562&4294967295,F=S+(M<<16&4294967295|M>>>16),M=T+(F^S^k)+L[14]+4259657740&4294967295,T=F+(M<<23&4294967295|M>>>9),M=k+(T^F^S)+L[1]+2763975236&4294967295,k=T+(M<<4&4294967295|M>>>28),M=S+(k^T^F)+L[4]+1272893353&4294967295,S=k+(M<<11&4294967295|M>>>21),M=F+(S^k^T)+L[7]+4139469664&4294967295,F=S+(M<<16&4294967295|M>>>16),M=T+(F^S^k)+L[10]+3200236656&4294967295,T=F+(M<<23&4294967295|M>>>9),M=k+(T^F^S)+L[13]+681279174&4294967295,k=T+(M<<4&4294967295|M>>>28),M=S+(k^T^F)+L[0]+3936430074&4294967295,S=k+(M<<11&4294967295|M>>>21),M=F+(S^k^T)+L[3]+3572445317&4294967295,F=S+(M<<16&4294967295|M>>>16),M=T+(F^S^k)+L[6]+76029189&4294967295,T=F+(M<<23&4294967295|M>>>9),M=k+(T^F^S)+L[9]+3654602809&4294967295,k=T+(M<<4&4294967295|M>>>28),M=S+(k^T^F)+L[12]+3873151461&4294967295,S=k+(M<<11&4294967295|M>>>21),M=F+(S^k^T)+L[15]+530742520&4294967295,F=S+(M<<16&4294967295|M>>>16),M=T+(F^S^k)+L[2]+3299628645&4294967295,T=F+(M<<23&4294967295|M>>>9),M=k+(F^(T|~S))+L[0]+4096336452&4294967295,k=T+(M<<6&4294967295|M>>>26),M=S+(T^(k|~F))+L[7]+1126891415&4294967295,S=k+(M<<10&4294967295|M>>>22),M=F+(k^(S|~T))+L[14]+2878612391&4294967295,F=S+(M<<15&4294967295|M>>>17),M=T+(S^(F|~k))+L[5]+4237533241&4294967295,T=F+(M<<21&4294967295|M>>>11),M=k+(F^(T|~S))+L[12]+1700485571&4294967295,k=T+(M<<6&4294967295|M>>>26),M=S+(T^(k|~F))+L[3]+2399980690&4294967295,S=k+(M<<10&4294967295|M>>>22),M=F+(k^(S|~T))+L[10]+4293915773&4294967295,F=S+(M<<15&4294967295|M>>>17),M=T+(S^(F|~k))+L[1]+2240044497&4294967295,T=F+(M<<21&4294967295|M>>>11),M=k+(F^(T|~S))+L[8]+1873313359&4294967295,k=T+(M<<6&4294967295|M>>>26),M=S+(T^(k|~F))+L[15]+4264355552&4294967295,S=k+(M<<10&4294967295|M>>>22),M=F+(k^(S|~T))+L[6]+2734768916&4294967295,F=S+(M<<15&4294967295|M>>>17),M=T+(S^(F|~k))+L[13]+1309151649&4294967295,T=F+(M<<21&4294967295|M>>>11),M=k+(F^(T|~S))+L[4]+4149444226&4294967295,k=T+(M<<6&4294967295|M>>>26),M=S+(T^(k|~F))+L[11]+3174756917&4294967295,S=k+(M<<10&4294967295|M>>>22),M=F+(k^(S|~T))+L[2]+718787259&4294967295,F=S+(M<<15&4294967295|M>>>17),M=T+(S^(F|~k))+L[9]+3951481745&4294967295,j.g[0]=j.g[0]+k&4294967295,j.g[1]=j.g[1]+(F+(M<<21&4294967295|M>>>11))&4294967295,j.g[2]=j.g[2]+F&4294967295,j.g[3]=j.g[3]+S&4294967295}a.prototype.u=function(j,k){k===void 0&&(k=j.length);for(var T=k-this.blockSize,L=this.B,F=this.h,S=0;S<k;){if(F==0)for(;S<=T;)n(this,j,S),S+=this.blockSize;if(typeof j=="string"){for(;S<k;)if(L[F++]=j.charCodeAt(S++),F==this.blockSize){n(this,L),F=0;break}}else for(;S<k;)if(L[F++]=j[S++],F==this.blockSize){n(this,L),F=0;break}}this.h=F,this.o+=k},a.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var k=1;k<j.length-8;++k)j[k]=0;var T=8*this.o;for(k=j.length-8;k<j.length;++k)j[k]=T&255,T/=256;for(this.u(j),j=Array(16),k=T=0;4>k;++k)for(var L=0;32>L;L+=8)j[T++]=this.g[k]>>>L&255;return j};function i(j,k){var T=l;return Object.prototype.hasOwnProperty.call(T,j)?T[j]:T[j]=k(j)}function o(j,k){this.h=k;for(var T=[],L=!0,F=j.length-1;0<=F;F--){var S=j[F]|0;L&&S==k||(T[F]=S,L=!1)}this.g=T}var l={};function c(j){return-128<=j&&128>j?i(j,function(k){return new o([k|0],0>k?-1:0)}):new o([j|0],0>j?-1:0)}function d(j){if(isNaN(j)||!isFinite(j))return f;if(0>j)return v(d(-j));for(var k=[],T=1,L=0;j>=T;L++)k[L]=j/T|0,T*=4294967296;return new o(k,0)}function u(j,k){if(j.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(j.charAt(0)=="-")return v(u(j.substring(1),k));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=d(Math.pow(k,8)),L=f,F=0;F<j.length;F+=8){var S=Math.min(8,j.length-F),M=parseInt(j.substring(F,F+S),k);8>S?(S=d(Math.pow(k,S)),L=L.j(S).add(d(M))):(L=L.j(T),L=L.add(d(M)))}return L}var f=c(0),A=c(1),m=c(16777216);e=o.prototype,e.m=function(){if(x(this))return-v(this).m();for(var j=0,k=1,T=0;T<this.g.length;T++){var L=this.i(T);j+=(0<=L?L:4294967296+L)*k,k*=4294967296}return j},e.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(g(this))return"0";if(x(this))return"-"+v(this).toString(j);for(var k=d(Math.pow(j,6)),T=this,L="";;){var F=B(T,k).g;T=y(T,F.j(k));var S=((0<T.g.length?T.g[0]:T.h)>>>0).toString(j);if(T=F,g(T))return S+L;for(;6>S.length;)S="0"+S;L=S+L}},e.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function g(j){if(j.h!=0)return!1;for(var k=0;k<j.g.length;k++)if(j.g[k]!=0)return!1;return!0}function x(j){return j.h==-1}e.l=function(j){return j=y(this,j),x(j)?-1:g(j)?0:1};function v(j){for(var k=j.g.length,T=[],L=0;L<k;L++)T[L]=~j.g[L];return new o(T,~j.h).add(A)}e.abs=function(){return x(this)?v(this):this},e.add=function(j){for(var k=Math.max(this.g.length,j.g.length),T=[],L=0,F=0;F<=k;F++){var S=L+(this.i(F)&65535)+(j.i(F)&65535),M=(S>>>16)+(this.i(F)>>>16)+(j.i(F)>>>16);L=M>>>16,S&=65535,M&=65535,T[F]=M<<16|S}return new o(T,T[T.length-1]&-2147483648?-1:0)};function y(j,k){return j.add(v(k))}e.j=function(j){if(g(this)||g(j))return f;if(x(this))return x(j)?v(this).j(v(j)):v(v(this).j(j));if(x(j))return v(this.j(v(j)));if(0>this.l(m)&&0>j.l(m))return d(this.m()*j.m());for(var k=this.g.length+j.g.length,T=[],L=0;L<2*k;L++)T[L]=0;for(L=0;L<this.g.length;L++)for(var F=0;F<j.g.length;F++){var S=this.i(L)>>>16,M=this.i(L)&65535,H=j.i(F)>>>16,K=j.i(F)&65535;T[2*L+2*F]+=M*K,N(T,2*L+2*F),T[2*L+2*F+1]+=S*K,N(T,2*L+2*F+1),T[2*L+2*F+1]+=M*H,N(T,2*L+2*F+1),T[2*L+2*F+2]+=S*H,N(T,2*L+2*F+2)}for(L=0;L<k;L++)T[L]=T[2*L+1]<<16|T[2*L];for(L=k;L<2*k;L++)T[L]=0;return new o(T,0)};function N(j,k){for(;(j[k]&65535)!=j[k];)j[k+1]+=j[k]>>>16,j[k]&=65535,k++}function E(j,k){this.g=j,this.h=k}function B(j,k){if(g(k))throw Error("division by zero");if(g(j))return new E(f,f);if(x(j))return k=B(v(j),k),new E(v(k.g),v(k.h));if(x(k))return k=B(j,v(k)),new E(v(k.g),k.h);if(30<j.g.length){if(x(j)||x(k))throw Error("slowDivide_ only works with positive integers.");for(var T=A,L=k;0>=L.l(j);)T=_(T),L=_(L);var F=I(T,1),S=I(L,1);for(L=I(L,2),T=I(T,2);!g(L);){var M=S.add(L);0>=M.l(j)&&(F=F.add(T),S=M),L=I(L,1),T=I(T,1)}return k=y(j,F.j(k)),new E(F,k)}for(F=f;0<=j.l(k);){for(T=Math.max(1,Math.floor(j.m()/k.m())),L=Math.ceil(Math.log(T)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),S=d(T),M=S.j(k);x(M)||0<M.l(j);)T-=L,S=d(T),M=S.j(k);g(S)&&(S=A),F=F.add(S),j=y(j,M)}return new E(F,j)}e.A=function(j){return B(this,j).h},e.and=function(j){for(var k=Math.max(this.g.length,j.g.length),T=[],L=0;L<k;L++)T[L]=this.i(L)&j.i(L);return new o(T,this.h&j.h)},e.or=function(j){for(var k=Math.max(this.g.length,j.g.length),T=[],L=0;L<k;L++)T[L]=this.i(L)|j.i(L);return new o(T,this.h|j.h)},e.xor=function(j){for(var k=Math.max(this.g.length,j.g.length),T=[],L=0;L<k;L++)T[L]=this.i(L)^j.i(L);return new o(T,this.h^j.h)};function _(j){for(var k=j.g.length+1,T=[],L=0;L<k;L++)T[L]=j.i(L)<<1|j.i(L-1)>>>31;return new o(T,j.h)}function I(j,k){var T=k>>5;k%=32;for(var L=j.g.length-T,F=[],S=0;S<L;S++)F[S]=0<k?j.i(S+T)>>>k|j.i(S+T+1)<<32-k:j.i(S+T);return new o(F,j.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,Nte=a,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=u,Qm=o}).apply(typeof qQ<"u"?qQ:typeof self<"u"?self:typeof window<"u"?window:{});var MC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ete,Fw,Cte,Nk,kD,jte,kte,Ste;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(R,se,me){return R==Array.prototype||R==Object.prototype||(R[se]=me.value),R};function r(R){R=[typeof globalThis=="object"&&globalThis,R,typeof window=="object"&&window,typeof self=="object"&&self,typeof MC=="object"&&MC];for(var se=0;se<R.length;++se){var me=R[se];if(me&&me.Math==Math)return me}throw Error("Cannot find global object")}var a=r(this);function n(R,se){if(se)e:{var me=a;R=R.split(".");for(var Oe=0;Oe<R.length-1;Oe++){var it=R[Oe];if(!(it in me))break e;me=me[it]}R=R[R.length-1],Oe=me[R],se=se(Oe),se!=Oe&&se!=null&&t(me,R,{configurable:!0,writable:!0,value:se})}}function i(R,se){R instanceof String&&(R+="");var me=0,Oe=!1,it={next:function(){if(!Oe&&me<R.length){var pt=me++;return{value:se(pt,R[pt]),done:!1}}return Oe=!0,{done:!0,value:void 0}}};return it[Symbol.iterator]=function(){return it},it}n("Array.prototype.values",function(R){return R||function(){return i(this,function(se,me){return me})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(R){var se=typeof R;return se=se!="object"?se:R?Array.isArray(R)?"array":se:"null",se=="array"||se=="object"&&typeof R.length=="number"}function d(R){var se=typeof R;return se=="object"&&R!=null||se=="function"}function u(R,se,me){return R.call.apply(R.bind,arguments)}function f(R,se,me){if(!R)throw Error();if(2<arguments.length){var Oe=Array.prototype.slice.call(arguments,2);return function(){var it=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(it,Oe),R.apply(se,it)}}return function(){return R.apply(se,arguments)}}function A(R,se,me){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,A.apply(null,arguments)}function m(R,se){var me=Array.prototype.slice.call(arguments,1);return function(){var Oe=me.slice();return Oe.push.apply(Oe,arguments),R.apply(this,Oe)}}function g(R,se){function me(){}me.prototype=se.prototype,R.aa=se.prototype,R.prototype=new me,R.prototype.constructor=R,R.Qb=function(Oe,it,pt){for(var Qt=Array(arguments.length-2),Br=2;Br<arguments.length;Br++)Qt[Br-2]=arguments[Br];return se.prototype[it].apply(Oe,Qt)}}function x(R){const se=R.length;if(0<se){const me=Array(se);for(let Oe=0;Oe<se;Oe++)me[Oe]=R[Oe];return me}return[]}function v(R,se){for(let me=1;me<arguments.length;me++){const Oe=arguments[me];if(c(Oe)){const it=R.length||0,pt=Oe.length||0;R.length=it+pt;for(let Qt=0;Qt<pt;Qt++)R[it+Qt]=Oe[Qt]}else R.push(Oe)}}class y{constructor(se,me){this.i=se,this.j=me,this.h=0,this.g=null}get(){let se;return 0<this.h?(this.h--,se=this.g,this.g=se.next,se.next=null):se=this.i(),se}}function N(R){return/^[\s\xa0]*$/.test(R)}function E(){var R=l.navigator;return R&&(R=R.userAgent)?R:""}function B(R){return B[" "](R),R}B[" "]=function(){};var _=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function I(R,se,me){for(const Oe in R)se.call(me,R[Oe],Oe,R)}function j(R,se){for(const me in R)se.call(void 0,R[me],me,R)}function k(R){const se={};for(const me in R)se[me]=R[me];return se}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(R,se){let me,Oe;for(let it=1;it<arguments.length;it++){Oe=arguments[it];for(me in Oe)R[me]=Oe[me];for(let pt=0;pt<T.length;pt++)me=T[pt],Object.prototype.hasOwnProperty.call(Oe,me)&&(R[me]=Oe[me])}}function F(R){var se=1;R=R.split(":");const me=[];for(;0<se&&R.length;)me.push(R.shift()),se--;return R.length&&me.push(R.join(":")),me}function S(R){l.setTimeout(()=>{throw R},0)}function M(){var R=Z;let se=null;return R.g&&(se=R.g,R.g=R.g.next,R.g||(R.h=null),se.next=null),se}class H{constructor(){this.h=this.g=null}add(se,me){const Oe=K.get();Oe.set(se,me),this.h?this.h.next=Oe:this.g=Oe,this.h=Oe}}var K=new y(()=>new Q,R=>R.reset());class Q{constructor(){this.next=this.g=this.h=null}set(se,me){this.h=se,this.g=me,this.next=null}reset(){this.next=this.g=this.h=null}}let G,X=!1,Z=new H,U=()=>{const R=l.Promise.resolve(void 0);G=()=>{R.then(Y)}};var Y=()=>{for(var R;R=M();){try{R.h.call(R.g)}catch(me){S(me)}var se=K;se.j(R),100>se.h&&(se.h++,R.next=se.g,se.g=R)}X=!1};function P(){this.s=this.s,this.C=this.C}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(R,se){this.type=R,this.g=this.target=se,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var W=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var R=!1,se=Object.defineProperty({},"passive",{get:function(){R=!0}});try{const me=()=>{};l.addEventListener("test",me,se),l.removeEventListener("test",me,se)}catch{}return R}();function J(R,se){if(D.call(this,R?R.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,R){var me=this.type=R.type,Oe=R.changedTouches&&R.changedTouches.length?R.changedTouches[0]:null;if(this.target=R.target||R.srcElement,this.g=se,se=R.relatedTarget){if(_){e:{try{B(se.nodeName);var it=!0;break e}catch{}it=!1}it||(se=null)}}else me=="mouseover"?se=R.fromElement:me=="mouseout"&&(se=R.toElement);this.relatedTarget=se,Oe?(this.clientX=Oe.clientX!==void 0?Oe.clientX:Oe.pageX,this.clientY=Oe.clientY!==void 0?Oe.clientY:Oe.pageY,this.screenX=Oe.screenX||0,this.screenY=Oe.screenY||0):(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0),this.button=R.button,this.key=R.key||"",this.ctrlKey=R.ctrlKey,this.altKey=R.altKey,this.shiftKey=R.shiftKey,this.metaKey=R.metaKey,this.pointerId=R.pointerId||0,this.pointerType=typeof R.pointerType=="string"?R.pointerType:ce[R.pointerType]||"",this.state=R.state,this.i=R,R.defaultPrevented&&J.aa.h.call(this)}}g(J,D);var ce={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var R=this.i;R.preventDefault?R.preventDefault():R.returnValue=!1};var ie="closure_listenable_"+(1e6*Math.random()|0),re=0;function de(R,se,me,Oe,it){this.listener=R,this.proxy=null,this.src=se,this.type=me,this.capture=!!Oe,this.ha=it,this.key=++re,this.da=this.fa=!1}function oe(R){R.da=!0,R.listener=null,R.proxy=null,R.src=null,R.ha=null}function be(R){this.src=R,this.g={},this.h=0}be.prototype.add=function(R,se,me,Oe,it){var pt=R.toString();R=this.g[pt],R||(R=this.g[pt]=[],this.h++);var Qt=we(R,se,Oe,it);return-1<Qt?(se=R[Qt],me||(se.fa=!1)):(se=new de(se,this.src,pt,!!Oe,it),se.fa=me,R.push(se)),se};function q(R,se){var me=se.type;if(me in R.g){var Oe=R.g[me],it=Array.prototype.indexOf.call(Oe,se,void 0),pt;(pt=0<=it)&&Array.prototype.splice.call(Oe,it,1),pt&&(oe(se),R.g[me].length==0&&(delete R.g[me],R.h--))}}function we(R,se,me,Oe){for(var it=0;it<R.length;++it){var pt=R[it];if(!pt.da&&pt.listener==se&&pt.capture==!!me&&pt.ha==Oe)return it}return-1}var Te="closure_lm_"+(1e6*Math.random()|0),Ee={};function ue(R,se,me,Oe,it){if(Array.isArray(se)){for(var pt=0;pt<se.length;pt++)ue(R,se[pt],me,Oe,it);return null}return me=Le(me),R&&R[ie]?R.K(se,me,d(Oe)?!!Oe.capture:!1,it):ge(R,se,me,!1,Oe,it)}function ge(R,se,me,Oe,it,pt){if(!se)throw Error("Invalid event type");var Qt=d(it)?!!it.capture:!!it,Br=pe(R);if(Br||(R[Te]=Br=new be(R)),me=Br.add(se,me,Oe,Qt,pt),me.proxy)return me;if(Oe=he(),me.proxy=Oe,Oe.src=R,Oe.listener=me,R.addEventListener)W||(it=Qt),it===void 0&&(it=!1),R.addEventListener(se.toString(),Oe,it);else if(R.attachEvent)R.attachEvent(ne(se.toString()),Oe);else if(R.addListener&&R.removeListener)R.addListener(Oe);else throw Error("addEventListener and attachEvent are unavailable.");return me}function he(){function R(me){return se.call(R.src,R.listener,me)}const se=Ae;return R}function ve(R,se,me,Oe,it){if(Array.isArray(se))for(var pt=0;pt<se.length;pt++)ve(R,se[pt],me,Oe,it);else Oe=d(Oe)?!!Oe.capture:!!Oe,me=Le(me),R&&R[ie]?(R=R.i,se=String(se).toString(),se in R.g&&(pt=R.g[se],me=we(pt,me,Oe,it),-1<me&&(oe(pt[me]),Array.prototype.splice.call(pt,me,1),pt.length==0&&(delete R.g[se],R.h--)))):R&&(R=pe(R))&&(se=R.g[se.toString()],R=-1,se&&(R=we(se,me,Oe,it)),(me=-1<R?se[R]:null)&&le(me))}function le(R){if(typeof R!="number"&&R&&!R.da){var se=R.src;if(se&&se[ie])q(se.i,R);else{var me=R.type,Oe=R.proxy;se.removeEventListener?se.removeEventListener(me,Oe,R.capture):se.detachEvent?se.detachEvent(ne(me),Oe):se.addListener&&se.removeListener&&se.removeListener(Oe),(me=pe(se))?(q(me,R),me.h==0&&(me.src=null,se[Te]=null)):oe(R)}}}function ne(R){return R in Ee?Ee[R]:Ee[R]="on"+R}function Ae(R,se){if(R.da)R=!0;else{se=new J(se,this);var me=R.listener,Oe=R.ha||R.src;R.fa&&le(R),R=me.call(Oe,se)}return R}function pe(R){return R=R[Te],R instanceof be?R:null}var ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function Le(R){return typeof R=="function"?R:(R[ke]||(R[ke]=function(se){return R.handleEvent(se)}),R[ke])}function qe(){P.call(this),this.i=new be(this),this.M=this,this.F=null}g(qe,P),qe.prototype[ie]=!0,qe.prototype.removeEventListener=function(R,se,me,Oe){ve(this,R,se,me,Oe)};function ze(R,se){var me,Oe=R.F;if(Oe)for(me=[];Oe;Oe=Oe.F)me.push(Oe);if(R=R.M,Oe=se.type||se,typeof se=="string")se=new D(se,R);else if(se instanceof D)se.target=se.target||R;else{var it=se;se=new D(Oe,R),L(se,it)}if(it=!0,me)for(var pt=me.length-1;0<=pt;pt--){var Qt=se.g=me[pt];it=Re(Qt,Oe,!0,se)&&it}if(Qt=se.g=R,it=Re(Qt,Oe,!0,se)&&it,it=Re(Qt,Oe,!1,se)&&it,me)for(pt=0;pt<me.length;pt++)Qt=se.g=me[pt],it=Re(Qt,Oe,!1,se)&&it}qe.prototype.N=function(){if(qe.aa.N.call(this),this.i){var R=this.i,se;for(se in R.g){for(var me=R.g[se],Oe=0;Oe<me.length;Oe++)oe(me[Oe]);delete R.g[se],R.h--}}this.F=null},qe.prototype.K=function(R,se,me,Oe){return this.i.add(String(R),se,!1,me,Oe)},qe.prototype.L=function(R,se,me,Oe){return this.i.add(String(R),se,!0,me,Oe)};function Re(R,se,me,Oe){if(se=R.i.g[String(se)],!se)return!0;se=se.concat();for(var it=!0,pt=0;pt<se.length;++pt){var Qt=se[pt];if(Qt&&!Qt.da&&Qt.capture==me){var Br=Qt.listener,ma=Qt.ha||Qt.src;Qt.fa&&q(R.i,Qt),it=Br.call(ma,Oe)!==!1&&it}}return it&&!Oe.defaultPrevented}function We(R,se,me){if(typeof R=="function")me&&(R=A(R,me));else if(R&&typeof R.handleEvent=="function")R=A(R.handleEvent,R);else throw Error("Invalid listener argument");return 2147483647<Number(se)?-1:l.setTimeout(R,se||0)}function ct(R){R.g=We(()=>{R.g=null,R.i&&(R.i=!1,ct(R))},R.l);const se=R.h;R.h=null,R.m.apply(null,se)}class Ze extends P{constructor(se,me){super(),this.m=se,this.l=me,this.h=null,this.i=!1,this.g=null}j(se){this.h=arguments,this.g?this.i=!0:ct(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qe(R){P.call(this),this.h=R,this.g={}}g(Qe,P);var wt=[];function ar(R){I(R.g,function(se,me){this.g.hasOwnProperty(me)&&le(se)},R),R.g={}}Qe.prototype.N=function(){Qe.aa.N.call(this),ar(this)},Qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qt=l.JSON.stringify,gr=l.JSON.parse,Pr=class{stringify(R){return l.JSON.stringify(R,void 0)}parse(R){return l.JSON.parse(R,void 0)}};function yr(){}yr.prototype.h=null;function Tn(R){return R.h||(R.h=R.i())}function Rr(){}var Ha={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rn(){D.call(this,"d")}g(Rn,D);function Lr(){D.call(this,"c")}g(Lr,D);var pr={},Jr=null;function vs(){return Jr=Jr||new qe}pr.La="serverreachability";function Za(R){D.call(this,pr.La,R)}g(Za,D);function Ln(R){const se=vs();ze(se,new Za(se))}pr.STAT_EVENT="statevent";function Qs(R,se){D.call(this,pr.STAT_EVENT,R),this.stat=se}g(Qs,D);function tr(R){const se=vs();ze(se,new Qs(se,R))}pr.Ma="timingevent";function va(R,se){D.call(this,pr.Ma,R),this.size=se}g(va,D);function ca(R,se){if(typeof R!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){R()},se)}function Fa(){this.g=!0}Fa.prototype.xa=function(){this.g=!1};function Xa(R,se,me,Oe,it,pt){R.info(function(){if(R.g)if(pt)for(var Qt="",Br=pt.split("&"),ma=0;ma<Br.length;ma++){var Gr=Br[ma].split("=");if(1<Gr.length){var za=Gr[0];Gr=Gr[1];var tn=za.split("_");Qt=2<=tn.length&&tn[1]=="type"?Qt+(za+"="+Gr+"&"):Qt+(za+"=redacted&")}}else Qt=null;else Qt=pt;return"XMLHTTP REQ ("+Oe+") [attempt "+it+"]: "+se+`
`+me+`
`+Qt})}function en(R,se,me,Oe,it,pt,Qt){R.info(function(){return"XMLHTTP RESP ("+Oe+") [ attempt "+it+"]: "+se+`
`+me+`
`+pt+" "+Qt})}function Se(R,se,me,Oe){R.info(function(){return"XMLHTTP TEXT ("+se+"): "+Me(R,me)+(Oe?" "+Oe:"")})}function Ve(R,se){R.info(function(){return"TIMEOUT: "+se})}Fa.prototype.info=function(){};function Me(R,se){if(!R.g)return se;if(!se)return null;try{var me=JSON.parse(se);if(me){for(R=0;R<me.length;R++)if(Array.isArray(me[R])){var Oe=me[R];if(!(2>Oe.length)){var it=Oe[1];if(Array.isArray(it)&&!(1>it.length)){var pt=it[0];if(pt!="noop"&&pt!="stop"&&pt!="close")for(var Qt=1;Qt<it.length;Qt++)it[Qt]=""}}}}return qt(me)}catch{return se}}var He={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xe;function Fe(){}g(Fe,yr),Fe.prototype.g=function(){return new XMLHttpRequest},Fe.prototype.i=function(){return{}},xe=new Fe;function Ge(R,se,me,Oe){this.j=R,this.i=se,this.l=me,this.R=Oe||1,this.U=new Qe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ue}function Ue(){this.i=null,this.g="",this.h=!1}var Ye={},et={};function Nt(R,se,me){R.L=1,R.v=kd(Oi(se)),R.m=me,R.P=!0,Et(R,null)}function Et(R,se){R.F=Date.now(),Vt(R),R.A=Oi(R.v);var me=R.A,Oe=R.R;Array.isArray(Oe)||(Oe=[String(Oe)]),Tr(me.i,"t",Oe),R.C=0,me=R.j.J,R.h=new Ue,R.g=je(R.j,me?se:null,!R.m),0<R.O&&(R.M=new Ze(A(R.Y,R,R.g),R.O)),se=R.U,me=R.g,Oe=R.ca;var it="readystatechange";Array.isArray(it)||(it&&(wt[0]=it.toString()),it=wt);for(var pt=0;pt<it.length;pt++){var Qt=ue(me,it[pt],Oe||se.handleEvent,!1,se.h||se);if(!Qt)break;se.g[Qt.key]=Qt}se=R.H?k(R.H):{},R.m?(R.u||(R.u="POST"),se["Content-Type"]="application/x-www-form-urlencoded",R.g.ea(R.A,R.u,R.m,se)):(R.u="GET",R.g.ea(R.A,R.u,null,se)),Ln(),Xa(R.i,R.u,R.A,R.l,R.R,R.m)}Ge.prototype.ca=function(R){R=R.target;const se=this.M;se&&Ns(R)==3?se.j():this.Y(R)},Ge.prototype.Y=function(R){try{if(R==this.g)e:{const tn=Ns(this.g);var se=this.g.Ba();const ac=this.g.Z();if(!(3>tn)&&(tn!=3||this.g&&(this.h.h||this.g.oa()||_A(this.g)))){this.J||tn!=4||se==7||(se==8||0>=ac?Ln(3):Ln(2)),ea(this);var me=this.g.Z();this.X=me;t:if(zt(this)){var Oe=_A(this.g);R="";var it=Oe.length,pt=Ns(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){oa(this),ta(this);var Qt="";break t}this.h.i=new l.TextDecoder}for(se=0;se<it;se++)this.h.h=!0,R+=this.h.i.decode(Oe[se],{stream:!(pt&&se==it-1)});Oe.length=0,this.h.g+=R,this.C=0,Qt=this.h.g}else Qt=this.g.oa();if(this.o=me==200,en(this.i,this.u,this.A,this.l,this.R,tn,me),this.o){if(this.T&&!this.K){t:{if(this.g){var Br,ma=this.g;if((Br=ma.g?ma.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(Br)){var Gr=Br;break t}}Gr=null}if(me=Gr)Se(this.i,this.l,me,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bs(this,me);else{this.o=!1,this.s=3,tr(12),oa(this),ta(this);break e}}if(this.P){me=!0;let ls;for(;!this.J&&this.C<Qt.length;)if(ls=Dt(this,Qt),ls==et){tn==4&&(this.s=4,tr(14),me=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}else if(ls==Ye){this.s=4,tr(15),Se(this.i,this.l,Qt,"[Invalid Chunk]"),me=!1;break}else Se(this.i,this.l,ls,null),bs(this,ls);if(zt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tn!=4||Qt.length!=0||this.h.h||(this.s=1,tr(16),me=!1),this.o=this.o&&me,!me)Se(this.i,this.l,Qt,"[Invalid Chunked Response]"),oa(this),ta(this);else if(0<Qt.length&&!this.W){this.W=!0;var za=this.j;za.g==this&&za.ba&&!za.M&&(za.j.info("Great, no buffering proxy detected. Bytes received: "+Qt.length),Od(za),za.M=!0,tr(11))}}else Se(this.i,this.l,Qt,null),bs(this,Qt);tn==4&&oa(this),this.o&&!this.J&&(tn==4?Dd(this.j,this):(this.o=!1,Vt(this)))}else Td(this.g),me==400&&0<Qt.indexOf("Unknown SID")?(this.s=3,tr(12)):(this.s=0,tr(13)),oa(this),ta(this)}}}catch{}finally{}};function zt(R){return R.g?R.u=="GET"&&R.L!=2&&R.j.Ca:!1}function Dt(R,se){var me=R.C,Oe=se.indexOf(`
`,me);return Oe==-1?et:(me=Number(se.substring(me,Oe)),isNaN(me)?Ye:(Oe+=1,Oe+me>se.length?et:(se=se.slice(Oe,Oe+me),R.C=Oe+me,se)))}Ge.prototype.cancel=function(){this.J=!0,oa(this)};function Vt(R){R.S=Date.now()+R.I,kr(R,R.I)}function kr(R,se){if(R.B!=null)throw Error("WatchDog timer not null");R.B=ca(A(R.ba,R),se)}function ea(R){R.B&&(l.clearTimeout(R.B),R.B=null)}Ge.prototype.ba=function(){this.B=null;const R=Date.now();0<=R-this.S?(Ve(this.i,this.A),this.L!=2&&(Ln(),tr(17)),oa(this),this.s=2,ta(this)):kr(this,this.S-R)};function ta(R){R.j.G==0||R.J||Dd(R.j,R)}function oa(R){ea(R);var se=R.M;se&&typeof se.ma=="function"&&se.ma(),R.M=null,ar(R.U),R.g&&(se=R.g,R.g=null,se.abort(),se.ma())}function bs(R,se){try{var me=R.j;if(me.G!=0&&(me.g==R||Bi(me.h,R))){if(!R.K&&Bi(me.h,R)&&me.G==3){try{var Oe=me.Da.g.parse(se)}catch{Oe=null}if(Array.isArray(Oe)&&Oe.length==3){var it=Oe;if(it[0]==0){e:if(!me.u){if(me.g)if(me.g.F+3e3<R.F)Uc(me),_f(me);else break e;ku(me),tr(18)}}else me.za=it[1],0<me.za-me.T&&37500>it[2]&&me.F&&me.v==0&&!me.C&&(me.C=ca(A(me.Za,me),6e3));if(1>=zs(me.h)&&me.ca){try{me.ca()}catch{}me.ca=void 0}}else Yi(me,11)}else if((R.K||me.g==R)&&Uc(me),!N(se))for(it=me.Da.g.parse(se),se=0;se<it.length;se++){let Gr=it[se];if(me.T=Gr[0],Gr=Gr[1],me.G==2)if(Gr[0]=="c"){me.K=Gr[1],me.ia=Gr[2];const za=Gr[3];za!=null&&(me.la=za,me.j.info("VER="+me.la));const tn=Gr[4];tn!=null&&(me.Aa=tn,me.j.info("SVER="+me.Aa));const ac=Gr[5];ac!=null&&typeof ac=="number"&&0<ac&&(Oe=1.5*ac,me.L=Oe,me.j.info("backChannelRequestTimeoutMs_="+Oe)),Oe=me;const ls=R.g;if(ls){const Vo=ls.g?ls.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vo){var pt=Oe.h;pt.g||Vo.indexOf("spdy")==-1&&Vo.indexOf("quic")==-1&&Vo.indexOf("h2")==-1||(pt.j=pt.l,pt.g=new Set,pt.h&&(Nn(pt,pt.h),pt.h=null))}if(Oe.D){const Fd=ls.g?ls.g.getResponseHeader("X-HTTP-Session-Id"):null;Fd&&(Oe.ya=Fd,Qa(Oe.I,Oe.D,Fd))}}me.G=3,me.l&&me.l.ua(),me.ba&&(me.R=Date.now()-R.F,me.j.info("Handshake RTT: "+me.R+"ms")),Oe=me;var Qt=R;if(Oe.qa=te(Oe,Oe.J?Oe.ia:null,Oe.W),Qt.K){hi(Oe.h,Qt);var Br=Qt,ma=Oe.L;ma&&(Br.I=ma),Br.B&&(ea(Br),Vt(Br)),Oe.g=Qt}else Bf(Oe);0<me.i.length&&Tf(me)}else Gr[0]!="stop"&&Gr[0]!="close"||Yi(me,7);else me.G==3&&(Gr[0]=="stop"||Gr[0]=="close"?Gr[0]=="stop"?Yi(me,7):Mc(me):Gr[0]!="noop"&&me.l&&me.l.ta(Gr),me.v=0)}}Ln(4)}catch{}}var Uo=class{constructor(R,se){this.g=R,this.map=se}};function ys(R){this.l=R||10,l.PerformanceNavigationTiming?(R=l.performance.getEntriesByType("navigation"),R=0<R.length&&(R[0].nextHopProtocol=="hq"||R[0].nextHopProtocol=="h2")):R=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=R?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fi(R){return R.h?!0:R.g?R.g.size>=R.j:!1}function zs(R){return R.h?1:R.g?R.g.size:0}function Bi(R,se){return R.h?R.h==se:R.g?R.g.has(se):!1}function Nn(R,se){R.g?R.g.add(se):R.h=se}function hi(R,se){R.h&&R.h==se?R.h=null:R.g&&R.g.has(se)&&R.g.delete(se)}ys.prototype.cancel=function(){if(this.i=jf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const R of this.g.values())R.cancel();this.g.clear()}};function jf(R){if(R.h!=null)return R.i.concat(R.h.D);if(R.g!=null&&R.g.size!==0){let se=R.i;for(const me of R.g.values())se=se.concat(me.D);return se}return x(R.i)}function jA(R){if(R.V&&typeof R.V=="function")return R.V();if(typeof Map<"u"&&R instanceof Map||typeof Set<"u"&&R instanceof Set)return Array.from(R.values());if(typeof R=="string")return R.split("");if(c(R)){for(var se=[],me=R.length,Oe=0;Oe<me;Oe++)se.push(R[Oe]);return se}se=[],me=0;for(Oe in R)se[me++]=R[Oe];return se}function Ed(R){if(R.na&&typeof R.na=="function")return R.na();if(!R.V||typeof R.V!="function"){if(typeof Map<"u"&&R instanceof Map)return Array.from(R.keys());if(!(typeof Set<"u"&&R instanceof Set)){if(c(R)||typeof R=="string"){var se=[];R=R.length;for(var me=0;me<R;me++)se.push(me);return se}se=[],me=0;for(const Oe in R)se[me++]=Oe;return se}}}function Gh(R,se){if(R.forEach&&typeof R.forEach=="function")R.forEach(se,void 0);else if(c(R)||typeof R=="string")Array.prototype.forEach.call(R,se,void 0);else for(var me=Ed(R),Oe=jA(R),it=Oe.length,pt=0;pt<it;pt++)se.call(void 0,Oe[pt],me&&me[pt],R)}var Ii=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kf(R,se){if(R){R=R.split("&");for(var me=0;me<R.length;me++){var Oe=R[me].indexOf("="),it=null;if(0<=Oe){var pt=R[me].substring(0,Oe);it=R[me].substring(Oe+1)}else pt=R[me];se(pt,it?decodeURIComponent(it.replace(/\+/g," ")):"")}}}function ja(R){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,R instanceof ja){this.h=R.h,Cd(this,R.j),this.o=R.o,this.g=R.g,jd(this,R.s),this.l=R.l;var se=R.i,me=new Yl;me.i=se.i,se.g&&(me.g=new Map(se.g),me.h=se.h),Xl(this,me),this.m=R.m}else R&&(se=String(R).match(Ii))?(this.h=!1,Cd(this,se[1]||"",!0),this.o=Ho(se[2]||""),this.g=Ho(se[3]||"",!0),jd(this,se[4]),this.l=Ho(se[5]||"",!0),Xl(this,se[6]||"",!0),this.m=Ho(se[7]||"")):(this.h=!1,this.i=new Yl(null,this.h))}ja.prototype.toString=function(){var R=[],se=this.j;se&&R.push(Dc(se,qh,!0),":");var me=this.g;return(me||se=="file")&&(R.push("//"),(se=this.o)&&R.push(Dc(se,qh,!0),"@"),R.push(encodeURIComponent(String(me)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),me=this.s,me!=null&&R.push(":",String(me))),(me=this.l)&&(this.g&&me.charAt(0)!="/"&&R.push("/"),R.push(Dc(me,me.charAt(0)=="/"?Fc:Kh,!0))),(me=this.i.toString())&&R.push("?",me),(me=this.m)&&R.push("#",Dc(me,Pc)),R.join("")};function Oi(R){return new ja(R)}function Cd(R,se,me){R.j=me?Ho(se,!0):se,R.j&&(R.j=R.j.replace(/:$/,""))}function jd(R,se){if(se){if(se=Number(se),isNaN(se)||0>se)throw Error("Bad port number "+se);R.s=se}else R.s=null}function Xl(R,se,me){se instanceof Yl?(R.i=se,SA(R.i,R.h)):(me||(se=Dc(se,Sf)),R.i=new Yl(se,R.h))}function Qa(R,se,me){R.i.set(se,me)}function kd(R){return Qa(R,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),R}function Ho(R,se){return R?se?decodeURI(R.replace(/%25/g,"%2525")):decodeURIComponent(R):""}function Dc(R,se,me){return typeof R=="string"?(R=encodeURI(R).replace(se,kA),me&&(R=R.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R):null}function kA(R){return R=R.charCodeAt(0),"%"+(R>>4&15).toString(16)+(R&15).toString(16)}var qh=/[#\/\?@]/g,Kh=/[#\?:]/g,Fc=/[#\?]/g,Sf=/[#\?@]/g,Pc=/#/g;function Yl(R,se){this.h=this.g=null,this.i=R||null,this.j=!!se}function hn(R){R.g||(R.g=new Map,R.h=0,R.i&&kf(R.i,function(se,me){R.add(decodeURIComponent(se.replace(/\+/g," ")),me)}))}e=Yl.prototype,e.add=function(R,se){hn(this),this.i=null,R=Zl(this,R);var me=this.g.get(R);return me||this.g.set(R,me=[]),me.push(se),this.h+=1,this};function Rc(R,se){hn(R),se=Zl(R,se),R.g.has(se)&&(R.i=null,R.h-=R.g.get(se).length,R.g.delete(se))}function Jl(R,se){return hn(R),se=Zl(R,se),R.g.has(se)}e.forEach=function(R,se){hn(this),this.g.forEach(function(me,Oe){me.forEach(function(it){R.call(se,it,Oe,this)},this)},this)},e.na=function(){hn(this);const R=Array.from(this.g.values()),se=Array.from(this.g.keys()),me=[];for(let Oe=0;Oe<se.length;Oe++){const it=R[Oe];for(let pt=0;pt<it.length;pt++)me.push(se[Oe])}return me},e.V=function(R){hn(this);let se=[];if(typeof R=="string")Jl(this,R)&&(se=se.concat(this.g.get(Zl(this,R))));else{R=Array.from(this.g.values());for(let me=0;me<R.length;me++)se=se.concat(R[me])}return se},e.set=function(R,se){return hn(this),this.i=null,R=Zl(this,R),Jl(this,R)&&(this.h-=this.g.get(R).length),this.g.set(R,[se]),this.h+=1,this},e.get=function(R,se){return R?(R=this.V(R),0<R.length?String(R[0]):se):se};function Tr(R,se,me){Rc(R,se),0<me.length&&(R.i=null,R.g.set(Zl(R,se),x(me)),R.h+=me.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const R=[],se=Array.from(this.g.keys());for(var me=0;me<se.length;me++){var Oe=se[me];const pt=encodeURIComponent(String(Oe)),Qt=this.V(Oe);for(Oe=0;Oe<Qt.length;Oe++){var it=pt;Qt[Oe]!==""&&(it+="="+encodeURIComponent(String(Qt[Oe]))),R.push(it)}}return this.i=R.join("&")};function Zl(R,se){return se=String(se),R.j&&(se=se.toLowerCase()),se}function SA(R,se){se&&!R.j&&(hn(R),R.i=null,R.g.forEach(function(me,Oe){var it=Oe.toLowerCase();Oe!=it&&(Rc(this,Oe),Tr(this,it,me))},R)),R.j=se}function Ki(R,se){const me=new Fa;if(l.Image){const Oe=new Image;Oe.onload=m(vo,me,"TestLoadImage: loaded",!0,se,Oe),Oe.onerror=m(vo,me,"TestLoadImage: error",!1,se,Oe),Oe.onabort=m(vo,me,"TestLoadImage: abort",!1,se,Oe),Oe.ontimeout=m(vo,me,"TestLoadImage: timeout",!1,se,Oe),l.setTimeout(function(){Oe.ontimeout&&Oe.ontimeout()},1e4),Oe.src=R}else se(!1)}function Qo(R,se){const me=new Fa,Oe=new AbortController,it=setTimeout(()=>{Oe.abort(),vo(me,"TestPingServer: timeout",!1,se)},1e4);fetch(R,{signal:Oe.signal}).then(pt=>{clearTimeout(it),pt.ok?vo(me,"TestPingServer: ok",!0,se):vo(me,"TestPingServer: server error",!1,se)}).catch(()=>{clearTimeout(it),vo(me,"TestPingServer: error",!1,se)})}function vo(R,se,me,Oe,it){try{it&&(it.onload=null,it.onerror=null,it.onabort=null,it.ontimeout=null),Oe(me)}catch{}}function ec(){this.g=new Pr}function zo(R,se,me){const Oe=me||"";try{Gh(R,function(it,pt){let Qt=it;d(it)&&(Qt=qt(it)),se.push(Oe+pt+"="+encodeURIComponent(Qt))})}catch(it){throw se.push(Oe+"type="+encodeURIComponent("_badmap")),it}}function Sd(R){this.l=R.Ub||null,this.j=R.eb||!1}g(Sd,yr),Sd.prototype.g=function(){return new Lc(this.l,this.j)},Sd.prototype.i=function(R){return function(){return R}}({});function Lc(R,se){qe.call(this),this.D=R,this.o=se,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Lc,qe),e=Lc.prototype,e.open=function(R,se){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=R,this.A=se,this.readyState=1,Wi(this)},e.send=function(R){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const se={headers:this.u,method:this.B,credentials:this.m,cache:void 0};R&&(se.body=R),(this.D||l).fetch(new Request(this.A,se)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$o(this)),this.readyState=0},e.Sa=function(R){if(this.g&&(this.l=R,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=R.headers,this.readyState=2,Wi(this)),this.g&&(this.readyState=3,Wi(this),this.g)))if(this.responseType==="arraybuffer")R.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in R){if(this.j=R.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wh(this)}else R.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wh(R){R.j.read().then(R.Pa.bind(R)).catch(R.ga.bind(R))}e.Pa=function(R){if(this.g){if(this.o&&R.value)this.response.push(R.value);else if(!this.o){var se=R.value?R.value:new Uint8Array(0);(se=this.v.decode(se,{stream:!R.done}))&&(this.response=this.responseText+=se)}R.done?$o(this):Wi(this),this.readyState==3&&Wh(this)}},e.Ra=function(R){this.g&&(this.response=this.responseText=R,$o(this))},e.Qa=function(R){this.g&&(this.response=R,$o(this))},e.ga=function(){this.g&&$o(this)};function $o(R){R.readyState=4,R.l=null,R.j=null,R.v=null,Wi(R)}e.setRequestHeader=function(R,se){this.u.append(R,se)},e.getResponseHeader=function(R){return this.h&&this.h.get(R.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const R=[],se=this.h.entries();for(var me=se.next();!me.done;)me=me.value,R.push(me[0]+": "+me[1]),me=se.next();return R.join(`\r
`)};function Wi(R){R.onreadystatechange&&R.onreadystatechange.call(R)}Object.defineProperty(Lc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(R){this.m=R?"include":"same-origin"}});function tc(R){let se="";return I(R,function(me,Oe){se+=Oe,se+=":",se+=me,se+=`\r
`}),se}function ws(R,se,me){e:{for(Oe in me){var Oe=!1;break e}Oe=!0}Oe||(me=tc(me),typeof R=="string"?me!=null&&encodeURIComponent(String(me)):Qa(R,se,me))}function Aa(R){qe.call(this),this.headers=new Map,this.o=R||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(Aa,qe);var _d=/^https?$/i,rc=["POST","PUT"];e=Aa.prototype,e.Ha=function(R){this.J=R},e.ea=function(R,se,me,Oe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+R);se=se?se.toUpperCase():"GET",this.D=R,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xe.g(),this.v=this.o?Tn(this.o):Tn(xe),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(se,String(R),!0),this.B=!1}catch(pt){Xh(this,pt);return}if(R=me||"",me=new Map(this.headers),Oe)if(Object.getPrototypeOf(Oe)===Object.prototype)for(var it in Oe)me.set(it,Oe[it]);else if(typeof Oe.keys=="function"&&typeof Oe.get=="function")for(const pt of Oe.keys())me.set(pt,Oe.get(pt));else throw Error("Unknown input type for opt_headers: "+String(Oe));Oe=Array.from(me.keys()).find(pt=>pt.toLowerCase()=="content-type"),it=l.FormData&&R instanceof l.FormData,!(0<=Array.prototype.indexOf.call(rc,se,void 0))||Oe||it||me.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[pt,Qt]of me)this.g.setRequestHeader(pt,Qt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xi(this),this.u=!0,this.g.send(R),this.u=!1}catch(pt){Xh(this,pt)}};function Xh(R,se){R.h=!1,R.g&&(R.j=!0,R.g.abort(),R.j=!1),R.l=se,R.m=5,wu(R),Il(R)}function wu(R){R.A||(R.A=!0,ze(R,"complete"),ze(R,"error"))}e.abort=function(R){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=R||7,ze(this,"complete"),ze(this,"abort"),Il(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Il(this,!0)),Aa.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Nu(this):this.bb())},e.bb=function(){Nu(this)};function Nu(R){if(R.h&&typeof o<"u"&&(!R.v[1]||Ns(R)!=4||R.Z()!=2)){if(R.u&&Ns(R)==4)We(R.Ea,0,R);else if(ze(R,"readystatechange"),Ns(R)==4){R.h=!1;try{const Qt=R.Z();e:switch(Qt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var se=!0;break e;default:se=!1}var me;if(!(me=se)){var Oe;if(Oe=Qt===0){var it=String(R.D).match(Ii)[1]||null;!it&&l.self&&l.self.location&&(it=l.self.location.protocol.slice(0,-1)),Oe=!_d.test(it?it.toLowerCase():"")}me=Oe}if(me)ze(R,"complete"),ze(R,"success");else{R.m=6;try{var pt=2<Ns(R)?R.g.statusText:""}catch{pt=""}R.l=pt+" ["+R.Z()+"]",wu(R)}}finally{Il(R)}}}}function Il(R,se){if(R.g){Xi(R);const me=R.g,Oe=R.v[0]?()=>{}:null;R.g=null,R.v=null,se||ze(R,"ready");try{me.onreadystatechange=Oe}catch{}}}function Xi(R){R.I&&(l.clearTimeout(R.I),R.I=null)}e.isActive=function(){return!!this.g};function Ns(R){return R.g?R.g.readyState:0}e.Z=function(){try{return 2<Ns(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(R){if(this.g){var se=this.g.responseText;return R&&se.indexOf(R)==0&&(se=se.substring(R.length)),gr(se)}};function _A(R){try{if(!R.g)return null;if("response"in R.g)return R.g.response;switch(R.H){case"":case"text":return R.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in R.g)return R.g.mozResponseArrayBuffer}return null}catch{return null}}function Td(R){const se={};R=(R.g&&2<=Ns(R)&&R.g.getAllResponseHeaders()||"").split(`\r
`);for(let Oe=0;Oe<R.length;Oe++){if(N(R[Oe]))continue;var me=F(R[Oe]);const it=me[0];if(me=me[1],typeof me!="string")continue;me=me.trim();const pt=se[it]||[];se[it]=pt,pt.push(me)}j(se,function(Oe){return Oe.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Di(R,se,me){return me&&me.internalChannelParams&&me.internalChannelParams[R]||se}function Bd(R){this.Aa=0,this.i=[],this.j=new Fa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Di("failFast",!1,R),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Di("baseRetryDelayMs",5e3,R),this.cb=Di("retryDelaySeedMs",1e4,R),this.Wa=Di("forwardChannelMaxRetries",2,R),this.wa=Di("forwardChannelRequestTimeoutMs",2e4,R),this.pa=R&&R.xmlHttpFactory||void 0,this.Xa=R&&R.Tb||void 0,this.Ca=R&&R.useFetchStreams||!1,this.L=void 0,this.J=R&&R.supportsCrossDomainXhr||!1,this.K="",this.h=new ys(R&&R.concurrentRequestLimit),this.Da=new ec,this.P=R&&R.fastHandshake||!1,this.O=R&&R.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=R&&R.Rb||!1,R&&R.xa&&this.j.xa(),R&&R.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&R&&R.detectBufferingProxy||!1,this.ja=void 0,R&&R.longPollingTimeout&&0<R.longPollingTimeout&&(this.ja=R.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Bd.prototype,e.la=8,e.G=1,e.connect=function(R,se,me,Oe){tr(0),this.W=R,this.H=se||{},me&&Oe!==void 0&&(this.H.OSID=me,this.H.OAID=Oe),this.F=this.X,this.I=te(this,null,this.W),Tf(this)};function Mc(R){if(Eu(R),R.G==3){var se=R.U++,me=Oi(R.I);if(Qa(me,"SID",R.K),Qa(me,"RID",se),Qa(me,"TYPE","terminate"),Id(R,me),se=new Ge(R,R.j,se),se.L=2,se.v=kd(Oi(me)),me=!1,l.navigator&&l.navigator.sendBeacon)try{me=l.navigator.sendBeacon(se.v.toString(),"")}catch{}!me&&l.Image&&(new Image().src=se.v,me=!0),me||(se.g=je(se.j,null),se.g.ea(se.v)),se.F=Date.now(),Vt(se)}If(R)}function _f(R){R.g&&(Od(R),R.g.cancel(),R.g=null)}function Eu(R){_f(R),R.u&&(l.clearTimeout(R.u),R.u=null),Uc(R),R.h.cancel(),R.s&&(typeof R.s=="number"&&l.clearTimeout(R.s),R.s=null)}function Tf(R){if(!fi(R.h)&&!R.s){R.s=!0;var se=R.Ga;G||U(),X||(G(),X=!0),Z.add(se,R),R.B=0}}function Yh(R,se){return zs(R.h)>=R.h.j-(R.s?1:0)?!1:R.s?(R.i=se.D.concat(R.i),!0):R.G==1||R.G==2||R.B>=(R.Va?0:R.Wa)?!1:(R.s=ca(A(R.Ga,R,se),Su(R,R.B)),R.B++,!0)}e.Ga=function(R){if(this.s)if(this.s=null,this.G==1){if(!R){this.U=Math.floor(1e5*Math.random()),R=this.U++;const it=new Ge(this,this.j,R);let pt=this.o;if(this.S&&(pt?(pt=k(pt),L(pt,this.S)):pt=this.S),this.m!==null||this.O||(it.H=pt,pt=null),this.P)e:{for(var se=0,me=0;me<this.i.length;me++){t:{var Oe=this.i[me];if("__data__"in Oe.map&&(Oe=Oe.map.__data__,typeof Oe=="string")){Oe=Oe.length;break t}Oe=void 0}if(Oe===void 0)break;if(se+=Oe,4096<se){se=me;break e}if(se===4096||me===this.i.length-1){se=me+1;break e}}se=1e3}else se=1e3;se=ju(this,it,se),me=Oi(this.I),Qa(me,"RID",R),Qa(me,"CVER",22),this.D&&Qa(me,"X-HTTP-Session-Id",this.D),Id(this,me),pt&&(this.O?se="headers="+encodeURIComponent(String(tc(pt)))+"&"+se:this.m&&ws(me,this.m,pt)),Nn(this.h,it),this.Ua&&Qa(me,"TYPE","init"),this.P?(Qa(me,"$req",se),Qa(me,"SID","null"),it.T=!0,Nt(it,me,null)):Nt(it,me,se),this.G=2}}else this.G==3&&(R?Cu(this,R):this.i.length==0||fi(this.h)||Cu(this))};function Cu(R,se){var me;se?me=se.l:me=R.U++;const Oe=Oi(R.I);Qa(Oe,"SID",R.K),Qa(Oe,"RID",me),Qa(Oe,"AID",R.T),Id(R,Oe),R.m&&R.o&&ws(Oe,R.m,R.o),me=new Ge(R,R.j,me,R.B+1),R.m===null&&(me.H=R.o),se&&(R.i=se.D.concat(R.i)),se=ju(R,me,1e3),me.I=Math.round(.5*R.wa)+Math.round(.5*R.wa*Math.random()),Nn(R.h,me),Nt(me,Oe,se)}function Id(R,se){R.H&&I(R.H,function(me,Oe){Qa(se,Oe,me)}),R.l&&Gh({},function(me,Oe){Qa(se,Oe,me)})}function ju(R,se,me){me=Math.min(R.i.length,me);var Oe=R.l?A(R.l.Na,R.l,R):null;e:{var it=R.i;let pt=-1;for(;;){const Qt=["count="+me];pt==-1?0<me?(pt=it[0].g,Qt.push("ofs="+pt)):pt=0:Qt.push("ofs="+pt);let Br=!0;for(let ma=0;ma<me;ma++){let Gr=it[ma].g;const za=it[ma].map;if(Gr-=pt,0>Gr)pt=Math.max(0,it[ma].g-100),Br=!1;else try{zo(za,Qt,"req"+Gr+"_")}catch{Oe&&Oe(za)}}if(Br){Oe=Qt.join("&");break e}}}return R=R.i.splice(0,me),se.D=R,Oe}function Bf(R){if(!R.g&&!R.u){R.Y=1;var se=R.Fa;G||U(),X||(G(),X=!0),Z.add(se,R),R.v=0}}function ku(R){return R.g||R.u||3<=R.v?!1:(R.Y++,R.u=ca(A(R.Fa,R),Su(R,R.v)),R.v++,!0)}e.Fa=function(){if(this.u=null,TA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var R=2*this.R;this.j.info("BP detection timer enabled: "+R),this.A=ca(A(this.ab,this),R)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tr(10),_f(this),TA(this))};function Od(R){R.A!=null&&(l.clearTimeout(R.A),R.A=null)}function TA(R){R.g=new Ge(R,R.j,"rpc",R.Y),R.m===null&&(R.g.H=R.o),R.g.O=0;var se=Oi(R.qa);Qa(se,"RID","rpc"),Qa(se,"SID",R.K),Qa(se,"AID",R.T),Qa(se,"CI",R.F?"0":"1"),!R.F&&R.ja&&Qa(se,"TO",R.ja),Qa(se,"TYPE","xmlhttp"),Id(R,se),R.m&&R.o&&ws(se,R.m,R.o),R.L&&(R.g.I=R.L);var me=R.g;R=R.ia,me.L=1,me.v=kd(Oi(se)),me.m=null,me.P=!0,Et(me,R)}e.Za=function(){this.C!=null&&(this.C=null,_f(this),ku(this),tr(19))};function Uc(R){R.C!=null&&(l.clearTimeout(R.C),R.C=null)}function Dd(R,se){var me=null;if(R.g==se){Uc(R),Od(R),R.g=null;var Oe=2}else if(Bi(R.h,se))me=se.D,hi(R.h,se),Oe=1;else return;if(R.G!=0){if(se.o)if(Oe==1){me=se.m?se.m.length:0,se=Date.now()-se.F;var it=R.B;Oe=vs(),ze(Oe,new va(Oe,me)),Tf(R)}else Bf(R);else if(it=se.s,it==3||it==0&&0<se.X||!(Oe==1&&Yh(R,se)||Oe==2&&ku(R)))switch(me&&0<me.length&&(se=R.h,se.i=se.i.concat(me)),it){case 1:Yi(R,5);break;case 4:Yi(R,10);break;case 3:Yi(R,6);break;default:Yi(R,2)}}}function Su(R,se){let me=R.Ta+Math.floor(Math.random()*R.cb);return R.isActive()||(me*=2),me*se}function Yi(R,se){if(R.j.info("Error code "+se),se==2){var me=A(R.fb,R),Oe=R.Xa;const it=!Oe;Oe=new ja(Oe||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Cd(Oe,"https"),kd(Oe),it?Ki(Oe.toString(),me):Qo(Oe.toString(),me)}else tr(2);R.G=0,R.l&&R.l.sa(se),If(R),Eu(R)}e.fb=function(R){R?(this.j.info("Successfully pinged google.com"),tr(2)):(this.j.info("Failed to ping google.com"),tr(1))};function If(R){if(R.G=0,R.ka=[],R.l){const se=jf(R.h);(se.length!=0||R.i.length!=0)&&(v(R.ka,se),v(R.ka,R.i),R.h.i.length=0,x(R.i),R.i.length=0),R.l.ra()}}function te(R,se,me){var Oe=me instanceof ja?Oi(me):new ja(me);if(Oe.g!="")se&&(Oe.g=se+"."+Oe.g),jd(Oe,Oe.s);else{var it=l.location;Oe=it.protocol,se=se?se+"."+it.hostname:it.hostname,it=+it.port;var pt=new ja(null);Oe&&Cd(pt,Oe),se&&(pt.g=se),it&&jd(pt,it),me&&(pt.l=me),Oe=pt}return me=R.D,se=R.ya,me&&se&&Qa(Oe,me,se),Qa(Oe,"VER",R.la),Id(R,Oe),Oe}function je(R,se,me){if(se&&!R.J)throw Error("Can't create secondary domain capable XhrIo object.");return se=R.Ca&&!R.pa?new Aa(new Sd({eb:me})):new Aa(R.pa),se.Ha(R.J),se}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ke(){}e=Ke.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Je(){}Je.prototype.g=function(R,se){return new ot(R,se)};function ot(R,se){qe.call(this),this.g=new Bd(se),this.l=R,this.h=se&&se.messageUrlParams||null,R=se&&se.messageHeaders||null,se&&se.clientProtocolHeaderRequired&&(R?R["X-Client-Protocol"]="webchannel":R={"X-Client-Protocol":"webchannel"}),this.g.o=R,R=se&&se.initMessageHeaders||null,se&&se.messageContentType&&(R?R["X-WebChannel-Content-Type"]=se.messageContentType:R={"X-WebChannel-Content-Type":se.messageContentType}),se&&se.va&&(R?R["X-WebChannel-Client-Profile"]=se.va:R={"X-WebChannel-Client-Profile":se.va}),this.g.S=R,(R=se&&se.Sb)&&!N(R)&&(this.g.m=R),this.v=se&&se.supportsCrossDomainXhr||!1,this.u=se&&se.sendRawJson||!1,(se=se&&se.httpSessionIdParam)&&!N(se)&&(this.g.D=se,R=this.h,R!==null&&se in R&&(R=this.h,se in R&&delete R[se])),this.j=new Zt(this)}g(ot,qe),ot.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ot.prototype.close=function(){Mc(this.g)},ot.prototype.o=function(R){var se=this.g;if(typeof R=="string"){var me={};me.__data__=R,R=me}else this.u&&(me={},me.__data__=qt(R),R=me);se.i.push(new Uo(se.Ya++,R)),se.G==3&&Tf(se)},ot.prototype.N=function(){this.g.l=null,delete this.j,Mc(this.g),delete this.g,ot.aa.N.call(this)};function Ct(R){Rn.call(this),R.__headers__&&(this.headers=R.__headers__,this.statusCode=R.__status__,delete R.__headers__,delete R.__status__);var se=R.__sm__;if(se){e:{for(const me in se){R=me;break e}R=void 0}(this.i=R)&&(R=this.i,se=se!==null&&R in se?se[R]:void 0),this.data=se}else this.data=R}g(Ct,Rn);function Ht(){Lr.call(this),this.status=1}g(Ht,Lr);function Zt(R){this.g=R}g(Zt,Ke),Zt.prototype.ua=function(){ze(this.g,"a")},Zt.prototype.ta=function(R){ze(this.g,new Ct(R))},Zt.prototype.sa=function(R){ze(this.g,new Ht)},Zt.prototype.ra=function(){ze(this.g,"b")},Je.prototype.createWebChannel=Je.prototype.g,ot.prototype.send=ot.prototype.o,ot.prototype.open=ot.prototype.m,ot.prototype.close=ot.prototype.close,Ste=function(){return new Je},kte=function(){return vs()},jte=pr,kD={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},He.NO_ERROR=0,He.TIMEOUT=8,He.HTTP_ERROR=6,Nk=He,Ne.COMPLETE="complete",Cte=Ne,Rr.EventType=Ha,Ha.OPEN="a",Ha.CLOSE="b",Ha.ERROR="c",Ha.MESSAGE="d",qe.prototype.listen=qe.prototype.K,Fw=Rr,Aa.prototype.listenOnce=Aa.prototype.L,Aa.prototype.getLastError=Aa.prototype.Ka,Aa.prototype.getLastErrorCode=Aa.prototype.Ba,Aa.prototype.getStatus=Aa.prototype.Z,Aa.prototype.getResponseJson=Aa.prototype.Oa,Aa.prototype.getResponseText=Aa.prototype.oa,Aa.prototype.send=Aa.prototype.ea,Aa.prototype.setWithCredentials=Aa.prototype.Ha,Ete=Aa}).apply(typeof MC<"u"?MC:typeof self<"u"?self:typeof window<"u"?window:{});const KQ="@firebase/firestore",WQ="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};ol.UNAUTHENTICATED=new ol(null),ol.GOOGLE_CREDENTIALS=new ol("google-credentials-uid"),ol.FIRST_PARTY=new ol("first-party-uid"),ol.MOCK_USER=new ol("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T1="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep=new C_("@firebase/firestore");function $v(){return ep.logLevel}function M1e(e){ep.setLogLevel(e)}function fr(e,...t){if(ep.logLevel<=Na.DEBUG){const r=t.map(a8);ep.debug(`Firestore (${T1}): ${e}`,...r)}}function Z0(e,...t){if(ep.logLevel<=Na.ERROR){const r=t.map(a8);ep.error(`Firestore (${T1}): ${e}`,...r)}}function ex(e,...t){if(ep.logLevel<=Na.WARN){const r=t.map(a8);ep.warn(`Firestore (${T1}): ${e}`,...r)}}function a8(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,_te(e,a,r)}function _te(e,t,r){let a=`FIRESTORE (${T1}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{a+=" CONTEXT: "+JSON.stringify(r)}catch{a+=" CONTEXT: "+r}throw Z0(a),new Error(a)}function un(e,t,r,a){let n="Unexpected state";typeof r=="string"?n=r:a=r,e||_te(t,n,a)}function Yr(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Yt extends vf{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tte{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Bte{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(ol.UNAUTHENTICATED))}shutdown(){}}class U1e{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class H1e{constructor(t){this.t=t,this.currentUser=ol.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){un(this.o===void 0,42304);let a=this.i;const n=c=>this.i!==a?(a=this.i,r(c)):Promise.resolve();let i=new U0;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new U0,t.enqueueRetryable(()=>n(this.currentUser))};const o=()=>{const c=i;t.enqueueRetryable(async()=>{await c.promise,await n(this.currentUser)})},l=c=>{fr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(fr("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new U0)}},0),o()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==t?(fr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(un(typeof a.accessToken=="string",31837,{l:a}),new Tte(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return un(t===null||typeof t=="string",2055,{h:t}),new ol(t)}}class Q1e{constructor(t,r,a){this.P=t,this.T=r,this.I=a,this.type="FirstParty",this.user=ol.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class z1e{constructor(t,r,a){this.P=t,this.T=r,this.I=a}getToken(){return Promise.resolve(new Q1e(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(ol.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class XQ{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $1e{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,od(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){un(this.o===void 0,3512);const a=i=>{i.error!=null&&fr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,fr("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>a(i))};const n=i=>{fr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>n(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?n(i):fr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new XQ(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(un(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new XQ(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1e(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let a=0;a<e;a++)r[a]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const n=V1e(40);for(let i=0;i<n.length;++i)a.length<20&&n[i]<r&&(a+=t.charAt(n[i]%62))}return a}}function Ea(e,t){return e<t?-1:e>t?1:0}function SD(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const n=e.charAt(a),i=t.charAt(a);if(n!==i)return NB(n)===NB(i)?Ea(n,i):NB(n)?1:-1}return Ea(e.length,t.length)}const G1e=55296,q1e=57343;function NB(e){const t=e.charCodeAt(0);return t>=G1e&&t<=q1e}function $b(e,t,r){return e.length===t.length&&e.every((a,n)=>r(a,t[n]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YQ="__name__";class ch{constructor(t,r,a){r===void 0?r=0:r>t.length&&zr(637,{offset:r,range:t.length}),a===void 0?a=t.length-r:a>t.length-r&&zr(1746,{length:a,range:t.length-r}),this.segments=t,this.offset=r,this.len=a}get length(){return this.len}isEqual(t){return ch.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof ch?t.forEach(a=>{r.push(a)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,a=this.limit();r<a;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const a=Math.min(t.length,r.length);for(let n=0;n<a;n++){const i=ch.compareSegments(t.get(n),r.get(n));if(i!==0)return i}return Ea(t.length,r.length)}static compareSegments(t,r){const a=ch.isNumericId(t),n=ch.isNumericId(r);return a&&!n?-1:!a&&n?1:a&&n?ch.extractNumericId(t).compare(ch.extractNumericId(r)):SD(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Qm.fromString(t.substring(4,t.length-2))}}class Dn extends ch{construct(t,r,a){return new Dn(t,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const a of t){if(a.indexOf("//")>=0)throw new Yt(_t.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(n=>n.length>0))}return new Dn(r)}static emptyPath(){return new Dn([])}}const K1e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lo extends ch{construct(t,r,a){return new lo(t,r,a)}static isValidIdentifier(t){return K1e.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lo.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===YQ}static keyField(){return new lo([YQ])}static fromServerFormat(t){const r=[];let a="",n=0;const i=()=>{if(a.length===0)throw new Yt(_t.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let o=!1;for(;n<t.length;){const l=t[n];if(l==="\\"){if(n+1===t.length)throw new Yt(_t.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[n+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Yt(_t.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=c,n+=2}else l==="`"?(o=!o,n++):l!=="."||o?(a+=l,n++):(i(),n++)}if(i(),o)throw new Yt(_t.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new lo(r)}static emptyPath(){return new lo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(t){this.path=t}static fromPath(t){return new br(Dn.fromString(t))}static fromName(t){return new br(Dn.fromString(t).popFirst(5))}static empty(){return new br(Dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Dn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Dn.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new br(new Dn(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ite(e,t,r){if(!r)throw new Yt(_t.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Ote(e,t,r,a){if(t===!0&&a===!0)throw new Yt(_t.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function JQ(e){if(!br.isDocumentKey(e))throw new Yt(_t.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ZQ(e){if(br.isDocumentKey(e))throw new Yt(_t.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Dte(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function I_(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(a){return a.constructor?a.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":zr(12329,{type:typeof e})}function Nl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Yt(_t.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=I_(e);throw new Yt(_t.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function W1e(e,t){if(t<=0)throw new Yt(_t.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(e,t){const r={typeString:e};return t&&(r.value=t),r}function VN(e,t){if(!Dte(e))throw new Yt(_t.INVALID_ARGUMENT,"JSON must be an object");let r;for(const a in t)if(t[a]){const n=t[a].typeString,i="value"in t[a]?{value:t[a].value}:void 0;if(!(a in e)){r=`JSON missing required field: '${a}'`;break}const o=e[a];if(n&&typeof o!==n){r=`JSON field '${a}' must be a ${n}.`;break}if(i!==void 0&&o!==i.value){r=`Expected '${a}' field to equal '${i.value}'`;break}}if(r)throw new Yt(_t.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ez=-62135596800,tz=1e6;class dr{static now(){return dr.fromMillis(Date.now())}static fromDate(t){return dr.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),a=Math.floor((t-1e3*r)*tz);return new dr(r,a)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Yt(_t.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Yt(_t.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<ez)throw new Yt(_t.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Yt(_t.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tz}_compareTo(t){return this.seconds===t.seconds?Ea(this.nanoseconds,t.nanoseconds):Ea(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(VN(t,dr._jsonSchema))return new dr(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-ez;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dr._jsonSchemaVersion="firestore/timestamp/1.0",dr._jsonSchema={type:ki("string",dr._jsonSchemaVersion),seconds:ki("number"),nanoseconds:ki("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{static fromTimestamp(t){return new Wr(t)}static min(){return new Wr(new dr(0,0))}static max(){return new Wr(new dr(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=-1;function X1e(e,t){const r=e.toTimestamp().seconds,a=e.toTimestamp().nanoseconds+1,n=Wr.fromTimestamp(a===1e9?new dr(r+1,0):new dr(r,a));return new tp(n,br.empty(),t)}function Y1e(e){return new tp(e.readTime,e.key,$2)}class tp{constructor(t,r,a){this.readTime=t,this.documentKey=r,this.largestBatchId=a}static min(){return new tp(Wr.min(),br.empty(),$2)}static max(){return new tp(Wr.max(),br.empty(),$2)}}function J1e(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=br.comparator(e.documentKey,t.documentKey),r!==0?r:Ea(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1e="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eye{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(e){if(e.code!==_t.FAILED_PRECONDITION||e.message!==Z1e)throw e;fr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&zr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Mt((a,n)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(a,n)},this.catchCallback=i=>{this.wrapFailure(r,i).next(a,n)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Mt?r:Mt.resolve(r)}catch(r){return Mt.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Mt.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Mt.reject(r)}static resolve(t){return new Mt((r,a)=>{r(t)})}static reject(t){return new Mt((r,a)=>{a(t)})}static waitFor(t){return new Mt((r,a)=>{let n=0,i=0,o=!1;t.forEach(l=>{++n,l.next(()=>{++i,o&&i===n&&r()},c=>a(c))}),o=!0,i===n&&r()})}static or(t){let r=Mt.resolve(!1);for(const a of t)r=r.next(n=>n?Mt.resolve(n):a());return r}static forEach(t,r){const a=[];return t.forEach((n,i)=>{a.push(r.call(this,n,i))}),this.waitFor(a)}static mapArray(t,r){return new Mt((a,n)=>{const i=t.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;r(t[d]).next(u=>{o[d]=u,++l,l===i&&a(o)},u=>n(u))}})}static doWhile(t,r){return new Mt((a,n)=>{const i=()=>{t()===!0?r().next(()=>{i()},n):a()};i()})}}function tye(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function I1(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>r.writeSequenceNumber(a))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}O_.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8=-1;function D_(e){return e==null}function p5(e){return e===0&&1/e==-1/0}function rye(e){return typeof e=="number"&&Number.isInteger(e)&&!p5(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fte="";function aye(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=rz(t)),t=nye(e.get(r),t);return rz(t)}function nye(e,t){let r=t;const a=e.length;for(let n=0;n<a;n++){const i=e.charAt(n);switch(i){case"\0":r+="";break;case Fte:r+="";break;default:r+=i}}return r}function rz(e){return e+Fte+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function az(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function bp(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function Pte(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(t,r){this.comparator=t,this.root=r||Bo.EMPTY}insert(t,r){return new gs(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,Bo.BLACK,null,null))}remove(t){return new gs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Bo.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(t){let r=0,a=this.root;for(;!a.isEmpty();){const n=this.comparator(t,a.key);if(n===0)return r+a.left.size;n<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,a)=>(t(r,a),!1))}toString(){const t=[];return this.inorderTraversal((r,a)=>(t.push(`${r}:${a}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new UC(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new UC(this.root,t,this.comparator,!1)}getReverseIterator(){return new UC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new UC(this.root,t,this.comparator,!0)}}class UC{constructor(t,r,a,n){this.isReverse=n,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=r?a(t.key,r):1,r&&n&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Bo{constructor(t,r,a,n,i){this.key=t,this.value=r,this.color=a??Bo.RED,this.left=n??Bo.EMPTY,this.right=i??Bo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,a,n,i){return new Bo(t??this.key,r??this.value,a??this.color,n??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,a){let n=this;const i=a(t,n.key);return n=i<0?n.copy(null,null,null,n.left.insert(t,r,a),null):i===0?n.copy(null,r,null,null,null):n.copy(null,null,null,null,n.right.insert(t,r,a)),n.fixUp()}removeMin(){if(this.left.isEmpty())return Bo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let a,n=this;if(r(t,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(t,r),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),r(t,n.key)===0){if(n.right.isEmpty())return Bo.EMPTY;a=n.right.min(),n=n.copy(a.key,a.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(t,r))}return n.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Bo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Bo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw zr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw zr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw zr(27949);return t+(this.isRed()?0:1)}}Bo.EMPTY=null,Bo.RED=!0,Bo.BLACK=!1;Bo.EMPTY=new class{constructor(){this.size=0}get key(){throw zr(57766)}get value(){throw zr(16141)}get color(){throw zr(16727)}get left(){throw zr(29726)}get right(){throw zr(36894)}copy(t,r,a,n,i){return this}insert(t,r,a){return new Bo(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(t){this.comparator=t,this.data=new gs(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,a)=>(t(r),!1))}forEachInRange(t,r){const a=this.data.getIteratorFrom(t[0]);for(;a.hasNext();){const n=a.getNext();if(this.comparator(n.key,t[1])>=0)return;r(n.key)}}forEachWhile(t,r){let a;for(a=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!t(a.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new nz(this.data.getIterator())}getIteratorFrom(t){return new nz(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(a=>{r=r.add(a)}),r}isEqual(t){if(!(t instanceof Hi)||this.size!==t.size)return!1;const r=this.data.getIterator(),a=t.data.getIterator();for(;r.hasNext();){const n=r.getNext().key,i=a.getNext().key;if(this.comparator(n,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Hi(this.comparator);return r.data=t,r}}class nz{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(t){this.fields=t,t.sort(lo.comparator)}static empty(){return new hd([])}unionWith(t){let r=new Hi(lo.comparator);for(const a of this.fields)r=r.add(a);for(const a of t)r=r.add(a);return new hd(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return $b(this.fields,t.fields,(r,a)=>r.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rte extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(n){try{return atob(n)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Rte("Invalid base64 string: "+i):i}}(t);return new Ao(r)}static fromUint8Array(t){const r=function(n){let i="";for(let o=0;o<n.length;++o)i+=String.fromCharCode(n[o]);return i}(t);return new Ao(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const a=new Uint8Array(r.length);for(let n=0;n<r.length;n++)a[n]=r.charCodeAt(n);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ea(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ao.EMPTY_BYTE_STRING=new Ao("");const sye=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rp(e){if(un(!!e,39018),typeof e=="string"){let t=0;const r=sye.exec(e);if(un(!!r,46558,{timestamp:e}),r[1]){let n=r[1];n=(n+"000000000").substr(0,9),t=Number(n)}const a=new Date(e);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:ti(e.seconds),nanos:ti(e.nanos)}}function ti(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ap(e){return typeof e=="string"?Ao.fromBase64String(e):Ao.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lte="server_timestamp",Mte="__type__",Ute="__previous_value__",Hte="__local_write_time__";function F_(e){var r,a;return((a=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[Mte])==null?void 0:a.stringValue)===Lte}function P_(e){const t=e.mapValue.fields[Ute];return F_(t)?P_(t):t}function V2(e){const t=rp(e.mapValue.fields[Hte].timestampValue);return new dr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iye{constructor(t,r,a,n,i,o,l,c,d,u){this.databaseId=t,this.appId=r,this.persistenceKey=a,this.host=n,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=u}}const g5="(default)";class Vb{constructor(t,r){this.projectId=t,this.database=r||g5}static empty(){return new Vb("","")}get isDefaultDatabase(){return this.database===g5}isEqual(t){return t instanceof Vb&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qte="__type__",oye="__max__",HC={mapValue:{}},zte="__vector__",x5="value";function np(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?F_(e)?4:cye(e)?9007199254740991:lye(e)?10:11:zr(28295,{value:e})}function Fh(e,t){if(e===t)return!0;const r=np(e);if(r!==np(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return V2(e).isEqual(V2(t));case 3:return function(n,i){if(typeof n.timestampValue=="string"&&typeof i.timestampValue=="string"&&n.timestampValue.length===i.timestampValue.length)return n.timestampValue===i.timestampValue;const o=rp(n.timestampValue),l=rp(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(n,i){return ap(n.bytesValue).isEqual(ap(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(n,i){return ti(n.geoPointValue.latitude)===ti(i.geoPointValue.latitude)&&ti(n.geoPointValue.longitude)===ti(i.geoPointValue.longitude)}(e,t);case 2:return function(n,i){if("integerValue"in n&&"integerValue"in i)return ti(n.integerValue)===ti(i.integerValue);if("doubleValue"in n&&"doubleValue"in i){const o=ti(n.doubleValue),l=ti(i.doubleValue);return o===l?p5(o)===p5(l):isNaN(o)&&isNaN(l)}return!1}(e,t);case 9:return $b(e.arrayValue.values||[],t.arrayValue.values||[],Fh);case 10:case 11:return function(n,i){const o=n.mapValue.fields||{},l=i.mapValue.fields||{};if(az(o)!==az(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Fh(o[c],l[c])))return!1;return!0}(e,t);default:return zr(52216,{left:e})}}function G2(e,t){return(e.values||[]).find(r=>Fh(r,t))!==void 0}function Gb(e,t){if(e===t)return 0;const r=np(e),a=np(t);if(r!==a)return Ea(r,a);switch(r){case 0:case 9007199254740991:return 0;case 1:return Ea(e.booleanValue,t.booleanValue);case 2:return function(i,o){const l=ti(i.integerValue||i.doubleValue),c=ti(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return sz(e.timestampValue,t.timestampValue);case 4:return sz(V2(e),V2(t));case 5:return SD(e.stringValue,t.stringValue);case 6:return function(i,o){const l=ap(i),c=ap(o);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const u=Ea(l[d],c[d]);if(u!==0)return u}return Ea(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){const l=Ea(ti(i.latitude),ti(o.latitude));return l!==0?l:Ea(ti(i.longitude),ti(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return iz(e.arrayValue,t.arrayValue);case 10:return function(i,o){var A,m,g,x;const l=i.fields||{},c=o.fields||{},d=(A=l[x5])==null?void 0:A.arrayValue,u=(m=c[x5])==null?void 0:m.arrayValue,f=Ea(((g=d==null?void 0:d.values)==null?void 0:g.length)||0,((x=u==null?void 0:u.values)==null?void 0:x.length)||0);return f!==0?f:iz(d,u)}(e.mapValue,t.mapValue);case 11:return function(i,o){if(i===HC.mapValue&&o===HC.mapValue)return 0;if(i===HC.mapValue)return 1;if(o===HC.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=o.fields||{},u=Object.keys(d);c.sort(),u.sort();for(let f=0;f<c.length&&f<u.length;++f){const A=SD(c[f],u[f]);if(A!==0)return A;const m=Gb(l[c[f]],d[u[f]]);if(m!==0)return m}return Ea(c.length,u.length)}(e.mapValue,t.mapValue);default:throw zr(23264,{he:r})}}function sz(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Ea(e,t);const r=rp(e),a=rp(t),n=Ea(r.seconds,a.seconds);return n!==0?n:Ea(r.nanos,a.nanos)}function iz(e,t){const r=e.values||[],a=t.values||[];for(let n=0;n<r.length&&n<a.length;++n){const i=Gb(r[n],a[n]);if(i)return i}return Ea(r.length,a.length)}function qb(e){return _D(e)}function _D(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const a=rp(r);return`time(${a.seconds},${a.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return ap(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return br.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let a="[",n=!0;for(const i of r.values||[])n?n=!1:a+=",",a+=_D(i);return a+"]"}(e.arrayValue):"mapValue"in e?function(r){const a=Object.keys(r.fields||{}).sort();let n="{",i=!0;for(const o of a)i?i=!1:n+=",",n+=`${o}:${_D(r.fields[o])}`;return n+"}"}(e.mapValue):zr(61005,{value:e})}function Ek(e){switch(np(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=P_(e);return t?16+Ek(t):16;case 5:return 2*e.stringValue.length;case 6:return ap(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((n,i)=>n+Ek(i),0)}(e.arrayValue);case 10:case 11:return function(a){let n=0;return bp(a.fields,(i,o)=>{n+=i.length+Ek(o)}),n}(e.mapValue);default:throw zr(13486,{value:e})}}function v5(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function TD(e){return!!e&&"integerValue"in e}function s8(e){return!!e&&"arrayValue"in e}function oz(e){return!!e&&"nullValue"in e}function lz(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ck(e){return!!e&&"mapValue"in e}function lye(e){var r,a;return((a=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[Qte])==null?void 0:a.stringValue)===zte}function o2(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return bp(e.mapValue.fields,(r,a)=>t.mapValue.fields[r]=o2(a)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=o2(e.arrayValue.values[r]);return t}return{...e}}function cye(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===oye}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(t){this.value=t}static empty(){return new vc({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let a=0;a<t.length-1;++a)if(r=(r.mapValue.fields||{})[t.get(a)],!Ck(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=o2(r)}setAll(t){let r=lo.emptyPath(),a={},n=[];t.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,a,n),a={},n=[],r=l.popLast()}o?a[l.lastSegment()]=o2(o):n.push(l.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,a,n)}delete(t){const r=this.field(t.popLast());Ck(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return Fh(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<t.length;++a){let n=r.mapValue.fields[t.get(a)];Ck(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},r.mapValue.fields[t.get(a)]=n),r=n}return r.mapValue.fields}applyChanges(t,r,a){bp(r,(n,i)=>t[n]=i);for(const n of a)delete t[n]}clone(){return new vc(o2(this.value))}}function $te(e){const t=[];return bp(e.fields,(r,a)=>{const n=new lo([r]);if(Ck(a)){const i=$te(a.mapValue).fields;if(i.length===0)t.push(n);else for(const o of i)t.push(n.child(o))}else t.push(n)}),new hd(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(t,r,a,n,i,o,l){this.key=t,this.documentType=r,this.version=a,this.readTime=n,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(t){return new fl(t,0,Wr.min(),Wr.min(),Wr.min(),vc.empty(),0)}static newFoundDocument(t,r,a,n){return new fl(t,1,r,Wr.min(),a,n,0)}static newNoDocument(t,r){return new fl(t,2,r,Wr.min(),Wr.min(),vc.empty(),0)}static newUnknownDocument(t,r){return new fl(t,3,r,Wr.min(),Wr.min(),vc.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Wr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=vc.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=vc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof fl&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new fl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(t,r){this.position=t,this.inclusive=r}}function cz(e,t,r){let a=0;for(let n=0;n<e.position.length;n++){const i=t[n],o=e.position[n];if(i.field.isKeyField()?a=br.comparator(br.fromName(o.referenceValue),r.key):a=Gb(o,r.data.field(i.field)),i.dir==="desc"&&(a*=-1),a!==0)break}return a}function dz(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!Fh(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(t,r="asc"){this.field=t,this.dir=r}}function dye(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vte{}class Ci extends Vte{constructor(t,r,a){super(),this.field=t,this.op=r,this.value=a}static create(t,r,a){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,a):new fye(t,r,a):r==="array-contains"?new mye(t,a):r==="in"?new pye(t,a):r==="not-in"?new gye(t,a):r==="array-contains-any"?new xye(t,a):new Ci(t,r,a)}static createKeyFieldInFilter(t,r,a){return r==="in"?new hye(t,a):new Aye(t,a)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Gb(r,this.value)):r!==null&&np(this.value)===np(r)&&this.matchesComparison(Gb(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return zr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Af extends Vte{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new Af(t,r)}matches(t){return Gte(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Gte(e){return e.op==="and"}function qte(e){return uye(e)&&Gte(e)}function uye(e){for(const t of e.filters)if(t instanceof Af)return!1;return!0}function BD(e){if(e instanceof Ci)return e.field.canonicalString()+e.op.toString()+qb(e.value);if(qte(e))return e.filters.map(t=>BD(t)).join(",");{const t=e.filters.map(r=>BD(r)).join(",");return`${e.op}(${t})`}}function Kte(e,t){return e instanceof Ci?function(a,n){return n instanceof Ci&&a.op===n.op&&a.field.isEqual(n.field)&&Fh(a.value,n.value)}(e,t):e instanceof Af?function(a,n){return n instanceof Af&&a.op===n.op&&a.filters.length===n.filters.length?a.filters.reduce((i,o,l)=>i&&Kte(o,n.filters[l]),!0):!1}(e,t):void zr(19439)}function Wte(e){return e instanceof Ci?function(r){return`${r.field.canonicalString()} ${r.op} ${qb(r.value)}`}(e):e instanceof Af?function(r){return r.op.toString()+" {"+r.getFilters().map(Wte).join(" ,")+"}"}(e):"Filter"}class fye extends Ci{constructor(t,r,a){super(t,r,a),this.key=br.fromName(a.referenceValue)}matches(t){const r=br.comparator(t.key,this.key);return this.matchesComparison(r)}}class hye extends Ci{constructor(t,r){super(t,"in",r),this.keys=Xte("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class Aye extends Ci{constructor(t,r){super(t,"not-in",r),this.keys=Xte("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function Xte(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(a=>br.fromName(a.referenceValue))}class mye extends Ci{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return s8(r)&&G2(r.arrayValue,this.value)}}class pye extends Ci{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&G2(this.value.arrayValue,r)}}class gye extends Ci{constructor(t,r){super(t,"not-in",r)}matches(t){if(G2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!G2(this.value.arrayValue,r)}}class xye extends Ci{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!s8(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>G2(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vye{constructor(t,r=null,a=[],n=[],i=null,o=null,l=null){this.path=t,this.collectionGroup=r,this.orderBy=a,this.filters=n,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function uz(e,t=null,r=[],a=[],n=null,i=null,o=null){return new vye(e,t,r,a,n,i,o)}function i8(e){const t=Yr(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(a=>BD(a)).join(","),r+="|ob:",r+=t.orderBy.map(a=>function(i){return i.field.canonicalString()+i.dir}(a)).join(","),D_(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>qb(a)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>qb(a)).join(",")),t.Te=r}return t.Te}function o8(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!dye(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!Kte(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!dz(e.startAt,t.startAt)&&dz(e.endAt,t.endAt)}function ID(e){return br.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(t,r=null,a=[],n=[],i=null,o="F",l=null,c=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=n,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function bye(e,t,r,a,n,i,o,l){return new yx(e,t,r,a,n,i,o,l)}function R_(e){return new yx(e)}function fz(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function l8(e){return e.collectionGroup!==null}function vb(e){const t=Yr(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),r.add(i.field.canonicalString());const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Hi(lo.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(t).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||t.Ie.push(new q2(i,a))}),r.has(lo.keyField().canonicalString())||t.Ie.push(new q2(lo.keyField(),a))}return t.Ie}function jh(e){const t=Yr(e);return t.Ee||(t.Ee=yye(t,vb(e))),t.Ee}function yye(e,t){if(e.limitType==="F")return uz(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(n=>{const i=n.dir==="desc"?"asc":"desc";return new q2(n.field,i)});const r=e.endAt?new Kb(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new Kb(e.startAt.position,e.startAt.inclusive):null;return uz(e.path,e.collectionGroup,t,e.filters,e.limit,r,a)}}function OD(e,t){const r=e.filters.concat([t]);return new yx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function b5(e,t,r){return new yx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function L_(e,t){return o8(jh(e),jh(t))&&e.limitType===t.limitType}function Yte(e){return`${i8(jh(e))}|lt:${e.limitType}`}function Vv(e){return`Query(target=${function(r){let a=r.path.canonicalString();return r.collectionGroup!==null&&(a+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(a+=`, filters: [${r.filters.map(n=>Wte(n)).join(", ")}]`),D_(r.limit)||(a+=", limit: "+r.limit),r.orderBy.length>0&&(a+=`, orderBy: [${r.orderBy.map(n=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(n)).join(", ")}]`),r.startAt&&(a+=", startAt: ",a+=r.startAt.inclusive?"b:":"a:",a+=r.startAt.position.map(n=>qb(n)).join(",")),r.endAt&&(a+=", endAt: ",a+=r.endAt.inclusive?"a:":"b:",a+=r.endAt.position.map(n=>qb(n)).join(",")),`Target(${a})`}(jh(e))}; limitType=${e.limitType})`}function M_(e,t){return t.isFoundDocument()&&function(a,n){const i=n.key.path;return a.collectionGroup!==null?n.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(i):br.isDocumentKey(a.path)?a.path.isEqual(i):a.path.isImmediateParentOf(i)}(e,t)&&function(a,n){for(const i of vb(a))if(!i.field.isKeyField()&&n.data.field(i.field)===null)return!1;return!0}(e,t)&&function(a,n){for(const i of a.filters)if(!i.matches(n))return!1;return!0}(e,t)&&function(a,n){return!(a.startAt&&!function(o,l,c){const d=cz(o,l,c);return o.inclusive?d<=0:d<0}(a.startAt,vb(a),n)||a.endAt&&!function(o,l,c){const d=cz(o,l,c);return o.inclusive?d>=0:d>0}(a.endAt,vb(a),n))}(e,t)}function wye(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Jte(e){return(t,r)=>{let a=!1;for(const n of vb(e)){const i=Nye(n,t,r);if(i!==0)return i;a=a||n.field.isKeyField()}return 0}}function Nye(e,t,r){const a=e.field.isKeyField()?br.comparator(t.key,r.key):function(i,o,l){const c=o.data.field(i),d=l.data.field(i);return c!==null&&d!==null?Gb(c,d):zr(42886)}(e.field,t,r);switch(e.dir){case"asc":return a;case"desc":return-1*a;default:return zr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),a=this.inner[r];if(a!==void 0){for(const[n,i]of a)if(this.equalsFn(n,t))return i}}has(t){return this.get(t)!==void 0}set(t,r){const a=this.mapKeyFn(t),n=this.inner[a];if(n===void 0)return this.inner[a]=[[t,r]],void this.innerSize++;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return void(n[i]=[t,r]);n.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return!1;for(let n=0;n<a.length;n++)if(this.equalsFn(a[n][0],t))return a.length===1?delete this.inner[r]:a.splice(n,1),this.innerSize--,!0;return!1}forEach(t){bp(this.inner,(r,a)=>{for(const[n,i]of a)t(n,i)})}isEmpty(){return Pte(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eye=new gs(br.comparator);function eA(){return Eye}const Zte=new gs(br.comparator);function Pw(...e){let t=Zte;for(const r of e)t=t.insert(r.key,r);return t}function ere(e){let t=Zte;return e.forEach((r,a)=>t=t.insert(r,a.overlayedDocument)),t}function Ng(){return l2()}function tre(){return l2()}function l2(){return new wx(e=>e.toString(),(e,t)=>e.isEqual(t))}const Cye=new gs(br.comparator),jye=new Hi(br.comparator);function Ca(...e){let t=jye;for(const r of e)t=t.add(r);return t}const kye=new Hi(Ea);function Sye(){return kye}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c8(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:p5(t)?"-0":t}}function rre(e){return{integerValue:""+e}}function _ye(e,t){return rye(t)?rre(t):c8(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(){this._=void 0}}function Tye(e,t,r){return e instanceof K2?function(n,i){const o={fields:{[Mte]:{stringValue:Lte},[Hte]:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return i&&F_(i)&&(i=P_(i)),i&&(o.fields[Ute]=i),{mapValue:o}}(r,t):e instanceof Wb?nre(e,t):e instanceof W2?sre(e,t):function(n,i){const o=are(n,i),l=hz(o)+hz(n.Ae);return TD(o)&&TD(n.Ae)?rre(l):c8(n.serializer,l)}(e,t)}function Bye(e,t,r){return e instanceof Wb?nre(e,t):e instanceof W2?sre(e,t):r}function are(e,t){return e instanceof y5?function(a){return TD(a)||function(i){return!!i&&"doubleValue"in i}(a)}(t)?t:{integerValue:0}:null}class K2 extends U_{}class Wb extends U_{constructor(t){super(),this.elements=t}}function nre(e,t){const r=ire(t);for(const a of e.elements)r.some(n=>Fh(n,a))||r.push(a);return{arrayValue:{values:r}}}class W2 extends U_{constructor(t){super(),this.elements=t}}function sre(e,t){let r=ire(t);for(const a of e.elements)r=r.filter(n=>!Fh(n,a));return{arrayValue:{values:r}}}class y5 extends U_{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function hz(e){return ti(e.integerValue||e.doubleValue)}function ire(e){return s8(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ore{constructor(t,r){this.field=t,this.transform=r}}function Iye(e,t){return e.field.isEqual(t.field)&&function(a,n){return a instanceof Wb&&n instanceof Wb||a instanceof W2&&n instanceof W2?$b(a.elements,n.elements,Fh):a instanceof y5&&n instanceof y5?Fh(a.Ae,n.Ae):a instanceof K2&&n instanceof K2}(e.transform,t.transform)}class Oye{constructor(t,r){this.version=t,this.transformResults=r}}class Vl{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new Vl}static exists(t){return new Vl(void 0,t)}static updateTime(t){return new Vl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function jk(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class H_{}function lre(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Q_(e.key,Vl.none()):new GN(e.key,e.data,Vl.none());{const r=e.data,a=vc.empty();let n=new Hi(lo.comparator);for(let i of t.fields)if(!n.has(i)){let o=r.field(i);o===null&&i.length>1&&(i=i.popLast(),o=r.field(i)),o===null?a.delete(i):a.set(i,o),n=n.add(i)}return new yp(e.key,a,new hd(n.toArray()),Vl.none())}}function Dye(e,t,r){e instanceof GN?function(n,i,o){const l=n.value.clone(),c=mz(n.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,r):e instanceof yp?function(n,i,o){if(!jk(n.precondition,i))return void i.convertToUnknownDocument(o.version);const l=mz(n.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(cre(n)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,r):function(n,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,r)}function c2(e,t,r,a){return e instanceof GN?function(i,o,l,c){if(!jk(i.precondition,o))return l;const d=i.value.clone(),u=pz(i.fieldTransforms,c,o);return d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(e,t,r,a):e instanceof yp?function(i,o,l,c){if(!jk(i.precondition,o))return l;const d=pz(i.fieldTransforms,c,o),u=o.data;return u.setAll(cre(i)),u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(e,t,r,a):function(i,o,l){return jk(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(e,t,r)}function Fye(e,t){let r=null;for(const a of e.fieldTransforms){const n=t.data.field(a.field),i=are(a.transform,n||null);i!=null&&(r===null&&(r=vc.empty()),r.set(a.field,i))}return r||null}function Az(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(a,n){return a===void 0&&n===void 0||!(!a||!n)&&$b(a,n,(i,o)=>Iye(i,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class GN extends H_{constructor(t,r,a,n=[]){super(),this.key=t,this.value=r,this.precondition=a,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class yp extends H_{constructor(t,r,a,n,i=[]){super(),this.key=t,this.data=r,this.fieldMask=a,this.precondition=n,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function cre(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=e.data.field(r);t.set(r,a)}}),t}function mz(e,t,r){const a=new Map;un(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let n=0;n<r.length;n++){const i=e[n],o=i.transform,l=t.data.field(i.field);a.set(i.field,Bye(o,l,r[n]))}return a}function pz(e,t,r){const a=new Map;for(const n of e){const i=n.transform,o=r.data.field(n.field);a.set(n.field,Tye(i,o,t))}return a}class Q_ extends H_{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Pye extends H_{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rye{constructor(t,r,a,n){this.batchId=t,this.localWriteTime=r,this.baseMutations=a,this.mutations=n}applyToRemoteDocument(t,r){const a=r.mutationResults;for(let n=0;n<this.mutations.length;n++){const i=this.mutations[n];i.key.isEqual(t.key)&&Dye(i,t,a[n])}}applyToLocalView(t,r){for(const a of this.baseMutations)a.key.isEqual(t.key)&&(r=c2(a,t,r,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(t.key)&&(r=c2(a,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const a=tre();return this.mutations.forEach(n=>{const i=t.get(n.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=r.has(n.key)?null:l;const c=lre(o,l);c!==null&&a.set(n.key,c),o.isValidDocument()||o.convertToNoDocument(Wr.min())}),a}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Ca())}isEqual(t){return this.batchId===t.batchId&&$b(this.mutations,t.mutations,(r,a)=>Az(r,a))&&$b(this.baseMutations,t.baseMutations,(r,a)=>Az(r,a))}}class d8{constructor(t,r,a,n){this.batch=t,this.commitVersion=r,this.mutationResults=a,this.docVersions=n}static from(t,r,a){un(t.mutations.length===a.length,58842,{me:t.mutations.length,fe:a.length});let n=function(){return Cye}();const i=t.mutations;for(let o=0;o<i.length;o++)n=n.insert(i[o].key,a[o].version);return new d8(t,r,a,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lye{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mye{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vi,Ba;function Uye(e){switch(e){case _t.OK:return zr(64938);case _t.CANCELLED:case _t.UNKNOWN:case _t.DEADLINE_EXCEEDED:case _t.RESOURCE_EXHAUSTED:case _t.INTERNAL:case _t.UNAVAILABLE:case _t.UNAUTHENTICATED:return!1;case _t.INVALID_ARGUMENT:case _t.NOT_FOUND:case _t.ALREADY_EXISTS:case _t.PERMISSION_DENIED:case _t.FAILED_PRECONDITION:case _t.ABORTED:case _t.OUT_OF_RANGE:case _t.UNIMPLEMENTED:case _t.DATA_LOSS:return!0;default:return zr(15467,{code:e})}}function dre(e){if(e===void 0)return Z0("GRPC error has no .code"),_t.UNKNOWN;switch(e){case vi.OK:return _t.OK;case vi.CANCELLED:return _t.CANCELLED;case vi.UNKNOWN:return _t.UNKNOWN;case vi.DEADLINE_EXCEEDED:return _t.DEADLINE_EXCEEDED;case vi.RESOURCE_EXHAUSTED:return _t.RESOURCE_EXHAUSTED;case vi.INTERNAL:return _t.INTERNAL;case vi.UNAVAILABLE:return _t.UNAVAILABLE;case vi.UNAUTHENTICATED:return _t.UNAUTHENTICATED;case vi.INVALID_ARGUMENT:return _t.INVALID_ARGUMENT;case vi.NOT_FOUND:return _t.NOT_FOUND;case vi.ALREADY_EXISTS:return _t.ALREADY_EXISTS;case vi.PERMISSION_DENIED:return _t.PERMISSION_DENIED;case vi.FAILED_PRECONDITION:return _t.FAILED_PRECONDITION;case vi.ABORTED:return _t.ABORTED;case vi.OUT_OF_RANGE:return _t.OUT_OF_RANGE;case vi.UNIMPLEMENTED:return _t.UNIMPLEMENTED;case vi.DATA_LOSS:return _t.DATA_LOSS;default:return zr(39323,{code:e})}}(Ba=vi||(vi={}))[Ba.OK=0]="OK",Ba[Ba.CANCELLED=1]="CANCELLED",Ba[Ba.UNKNOWN=2]="UNKNOWN",Ba[Ba.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ba[Ba.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ba[Ba.NOT_FOUND=5]="NOT_FOUND",Ba[Ba.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ba[Ba.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ba[Ba.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ba[Ba.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ba[Ba.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ba[Ba.ABORTED=10]="ABORTED",Ba[Ba.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ba[Ba.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ba[Ba.INTERNAL=13]="INTERNAL",Ba[Ba.UNAVAILABLE=14]="UNAVAILABLE",Ba[Ba.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hye(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qye=new Qm([4294967295,4294967295],0);function gz(e){const t=Hye().encode(e),r=new Nte;return r.update(t),new Uint8Array(r.digest())}function xz(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),a=t.getUint32(4,!0),n=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Qm([r,a],0),new Qm([n,i],0)]}class u8{constructor(t,r,a){if(this.bitmap=t,this.padding=r,this.hashCount=a,r<0||r>=8)throw new Rw(`Invalid padding: ${r}`);if(a<0)throw new Rw(`Invalid hash count: ${a}`);if(t.length>0&&this.hashCount===0)throw new Rw(`Invalid hash count: ${a}`);if(t.length===0&&r!==0)throw new Rw(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=Qm.fromNumber(this.ge)}ye(t,r,a){let n=t.add(r.multiply(Qm.fromNumber(a)));return n.compare(Qye)===1&&(n=new Qm([n.getBits(0),n.getBits(1)],0)),n.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=gz(t),[a,n]=xz(r);for(let i=0;i<this.hashCount;i++){const o=this.ye(a,n,i);if(!this.we(o))return!1}return!0}static create(t,r,a){const n=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new u8(i,n,r);return a.forEach(l=>o.insert(l)),o}insert(t){if(this.ge===0)return;const r=gz(t),[a,n]=xz(r);for(let i=0;i<this.hashCount;i++){const o=this.ye(a,n,i);this.Se(o)}}Se(t){const r=Math.floor(t/8),a=t%8;this.bitmap[r]|=1<<a}}class Rw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(t,r,a,n,i){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=n,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,r,a){const n=new Map;return n.set(t,qN.createSynthesizedTargetChangeForCurrentChange(t,r,a)),new z_(Wr.min(),n,new gs(Ea),eA(),Ca())}}class qN{constructor(t,r,a,n,i){this.resumeToken=t,this.current=r,this.addedDocuments=a,this.modifiedDocuments=n,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,r,a){return new qN(a,r,Ca(),Ca(),Ca())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(t,r,a,n){this.be=t,this.removedTargetIds=r,this.key=a,this.De=n}}class ure{constructor(t,r){this.targetId=t,this.Ce=r}}class fre{constructor(t,r,a=Ao.EMPTY_BYTE_STRING,n=null){this.state=t,this.targetIds=r,this.resumeToken=a,this.cause=n}}class vz{constructor(){this.ve=0,this.Fe=bz(),this.Me=Ao.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ca(),r=Ca(),a=Ca();return this.Fe.forEach((n,i)=>{switch(i){case 0:t=t.add(n);break;case 2:r=r.add(n);break;case 1:a=a.add(n);break;default:zr(38017,{changeType:i})}}),new qN(this.Me,this.xe,t,r,a)}qe(){this.Oe=!1,this.Fe=bz()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,un(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class zye{constructor(t){this.Ge=t,this.ze=new Map,this.je=eA(),this.Je=QC(),this.He=QC(),this.Ye=new gs(Ea)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const a=this.nt(r);switch(t.state){case 0:this.rt(r)&&a.Le(t.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(t.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(a.We(),a.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),a.Le(t.resumeToken));break;default:zr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((a,n)=>{this.rt(n)&&r(n)})}st(t){const r=t.targetId,a=t.Ce.count,n=this.ot(r);if(n){const i=n.target;if(ID(i))if(a===0){const o=new br(i.path);this.et(r,o,fl.newNoDocument(o,Wr.min()))}else un(a===1,20013,{expectedCount:a});else{const o=this._t(r);if(o!==a){const l=this.ut(t),c=l?this.ct(l,t,o):1;if(c!==0){this.it(r);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,d)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:a="",padding:n=0},hashCount:i=0}=r;let o,l;try{o=ap(a).toUint8Array()}catch(c){if(c instanceof Rte)return ex("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new u8(o,n,i)}catch(c){return ex(c instanceof Rw?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(t,r,a){return r.Ce.count===a-this.Pt(t,r.targetId)?0:2}Pt(t,r){const a=this.Ge.getRemoteKeysForTarget(r);let n=0;return a.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.et(r,i,null),n++)}),n}Tt(t){const r=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&ID(l.target)){const c=new br(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,fl.newNoDocument(c,t))}i.Be&&(r.set(o,i.ke()),i.qe())}});let a=Ca();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(a=a.add(i))}),this.je.forEach((i,o)=>o.setReadTime(t));const n=new z_(t,r,this.Ye,this.je,a);return this.je=eA(),this.Je=QC(),this.He=QC(),this.Ye=new gs(Ea),n}Xe(t,r){if(!this.rt(t))return;const a=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,a),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,a){if(!this.rt(t))return;const n=this.nt(t);this.Et(t,r)?n.Qe(r,1):n.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),a&&(this.je=this.je.insert(r,a))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new vz,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new Hi(Ea),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new Hi(Ea),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||fr("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new vz),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function QC(){return new gs(br.comparator)}function bz(){return new gs(br.comparator)}const $ye={asc:"ASCENDING",desc:"DESCENDING"},Vye={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gye={and:"AND",or:"OR"};class qye{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function DD(e,t){return e.useProto3Json||D_(t)?t:{value:t}}function w5(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function hre(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Kye(e,t){return w5(e,t.toTimestamp())}function kh(e){return un(!!e,49232),Wr.fromTimestamp(function(r){const a=rp(r);return new dr(a.seconds,a.nanos)}(e))}function f8(e,t){return FD(e,t).canonicalString()}function FD(e,t){const r=function(n){return new Dn(["projects",n.projectId,"databases",n.database])}(e).child("documents");return t===void 0?r:r.child(t)}function Are(e){const t=Dn.fromString(e);return un(vre(t),10190,{key:t.toString()}),t}function PD(e,t){return f8(e.databaseId,t.path)}function EB(e,t){const r=Are(t);if(r.get(1)!==e.databaseId.projectId)throw new Yt(_t.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new Yt(_t.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new br(pre(r))}function mre(e,t){return f8(e.databaseId,t)}function Wye(e){const t=Are(e);return t.length===4?Dn.emptyPath():pre(t)}function RD(e){return new Dn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function pre(e){return un(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function yz(e,t,r){return{name:PD(e,t),fields:r.value.mapValue.fields}}function Xye(e,t){let r;if("targetChange"in t){t.targetChange;const a=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:zr(39313,{state:d})}(t.targetChange.targetChangeType||"NO_CHANGE"),n=t.targetChange.targetIds||[],i=function(d,u){return d.useProto3Json?(un(u===void 0||typeof u=="string",58123),Ao.fromBase64String(u||"")):(un(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Ao.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(d){const u=d.code===void 0?_t.UNKNOWN:dre(d.code);return new Yt(u,d.message||"")}(o);r=new fre(a,n,i,l||null)}else if("documentChange"in t){t.documentChange;const a=t.documentChange;a.document,a.document.name,a.document.updateTime;const n=EB(e,a.document.name),i=kh(a.document.updateTime),o=a.document.createTime?kh(a.document.createTime):Wr.min(),l=new vc({mapValue:{fields:a.document.fields}}),c=fl.newFoundDocument(n,i,o,l),d=a.targetIds||[],u=a.removedTargetIds||[];r=new kk(d,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const a=t.documentDelete;a.document;const n=EB(e,a.document),i=a.readTime?kh(a.readTime):Wr.min(),o=fl.newNoDocument(n,i),l=a.removedTargetIds||[];r=new kk([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const a=t.documentRemove;a.document;const n=EB(e,a.document),i=a.removedTargetIds||[];r=new kk([],i,n,null)}else{if(!("filter"in t))return zr(11601,{Rt:t});{t.filter;const a=t.filter;a.targetId;const{count:n=0,unchangedNames:i}=a,o=new Mye(n,i),l=a.targetId;r=new ure(l,o)}}return r}function Yye(e,t){let r;if(t instanceof GN)r={update:yz(e,t.key,t.value)};else if(t instanceof Q_)r={delete:PD(e,t.key)};else if(t instanceof yp)r={update:yz(e,t.key,t.data),updateMask:iwe(t.fieldMask)};else{if(!(t instanceof Pye))return zr(16599,{Vt:t.type});r={verify:PD(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(a=>function(i,o){const l=o.transform;if(l instanceof K2)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Wb)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof W2)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof y5)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw zr(20930,{transform:o.transform})}(0,a))),t.precondition.isNone||(r.currentDocument=function(n,i){return i.updateTime!==void 0?{updateTime:Kye(n,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:zr(27497)}(e,t.precondition)),r}function Jye(e,t){return e&&e.length>0?(un(t!==void 0,14353),e.map(r=>function(n,i){let o=n.updateTime?kh(n.updateTime):kh(i);return o.isEqual(Wr.min())&&(o=kh(i)),new Oye(o,n.transformResults||[])}(r,t))):[]}function Zye(e,t){return{documents:[mre(e,t.path)]}}function ewe(e,t){const r={structuredQuery:{}},a=t.path;let n;t.collectionGroup!==null?(n=a,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n=a.popLast(),r.structuredQuery.from=[{collectionId:a.lastSegment()}]),r.parent=mre(e,n);const i=function(d){if(d.length!==0)return xre(Af.create(d,"and"))}(t.filters);i&&(r.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(u=>function(A){return{field:Gv(A.field),direction:awe(A.dir)}}(u))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);const l=DD(e,t.limit);return l!==null&&(r.structuredQuery.limit=l),t.startAt&&(r.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(t.endAt)),{ft:r,parent:n}}function twe(e){let t=Wye(e.parent);const r=e.structuredQuery,a=r.from?r.from.length:0;let n=null;if(a>0){un(a===1,65062);const u=r.from[0];u.allDescendants?n=u.collectionId:t=t.child(u.collectionId)}let i=[];r.where&&(i=function(f){const A=gre(f);return A instanceof Af&&qte(A)?A.getFilters():[A]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(A=>function(g){return new q2(qv(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(A))}(r.orderBy));let l=null;r.limit&&(l=function(f){let A;return A=typeof f=="object"?f.value:f,D_(A)?null:A}(r.limit));let c=null;r.startAt&&(c=function(f){const A=!!f.before,m=f.values||[];return new Kb(m,A)}(r.startAt));let d=null;return r.endAt&&(d=function(f){const A=!f.before,m=f.values||[];return new Kb(m,A)}(r.endAt)),bye(t,n,o,i,l,"F",c,d)}function rwe(e,t){const r=function(n){switch(n){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zr(28987,{purpose:n})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function gre(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const a=qv(r.unaryFilter.field);return Ci.create(a,"==",{doubleValue:NaN});case"IS_NULL":const n=qv(r.unaryFilter.field);return Ci.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=qv(r.unaryFilter.field);return Ci.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=qv(r.unaryFilter.field);return Ci.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return zr(61313);default:return zr(60726)}}(e):e.fieldFilter!==void 0?function(r){return Ci.create(qv(r.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return zr(58110);default:return zr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return Af.create(r.compositeFilter.filters.map(a=>gre(a)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return zr(1026)}}(r.compositeFilter.op))}(e):zr(30097,{filter:e})}function awe(e){return $ye[e]}function nwe(e){return Vye[e]}function swe(e){return Gye[e]}function Gv(e){return{fieldPath:e.canonicalString()}}function qv(e){return lo.fromServerFormat(e.fieldPath)}function xre(e){return e instanceof Ci?function(r){if(r.op==="=="){if(lz(r.value))return{unaryFilter:{field:Gv(r.field),op:"IS_NAN"}};if(oz(r.value))return{unaryFilter:{field:Gv(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(lz(r.value))return{unaryFilter:{field:Gv(r.field),op:"IS_NOT_NAN"}};if(oz(r.value))return{unaryFilter:{field:Gv(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gv(r.field),op:nwe(r.op),value:r.value}}}(e):e instanceof Af?function(r){const a=r.getFilters().map(n=>xre(n));return a.length===1?a[0]:{compositeFilter:{op:swe(r.op),filters:a}}}(e):zr(54877,{filter:e})}function iwe(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function vre(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(t,r,a,n,i=Wr.min(),o=Wr.min(),l=Ao.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=r,this.purpose=a,this.sequenceNumber=n,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new Bm(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new Bm(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Bm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Bm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class owe{constructor(t){this.yt=t}}function lwe(e){const t=twe({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?b5(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cwe{constructor(){this.Cn=new dwe}addToCollectionParentIndex(t,r){return this.Cn.add(r),Mt.resolve()}getCollectionParents(t,r){return Mt.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Mt.resolve()}deleteFieldIndex(t,r){return Mt.resolve()}deleteAllFieldIndexes(t){return Mt.resolve()}createTargetIndexes(t,r){return Mt.resolve()}getDocumentsMatchingTarget(t,r){return Mt.resolve(null)}getIndexType(t,r){return Mt.resolve(0)}getFieldIndexes(t,r){return Mt.resolve([])}getNextCollectionGroupToUpdate(t){return Mt.resolve(null)}getMinOffset(t,r){return Mt.resolve(tp.min())}getMinOffsetFromCollectionGroup(t,r){return Mt.resolve(tp.min())}updateCollectionGroup(t,r,a){return Mt.resolve()}updateIndexEntries(t,r){return Mt.resolve()}}class dwe{constructor(){this.index={}}add(t){const r=t.lastSegment(),a=t.popLast(),n=this.index[r]||new Hi(Dn.comparator),i=!n.has(a);return this.index[r]=n.add(a),i}has(t){const r=t.lastSegment(),a=t.popLast(),n=this.index[r];return n&&n.has(a)}getEntries(t){return(this.index[t]||new Hi(Dn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wz={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bre=41943040;class Ac{static withCacheSize(t){return new Ac(t,Ac.DEFAULT_COLLECTION_PERCENTILE,Ac.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,a){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ac.DEFAULT_COLLECTION_PERCENTILE=10,Ac.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ac.DEFAULT=new Ac(bre,Ac.DEFAULT_COLLECTION_PERCENTILE,Ac.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ac.DISABLED=new Ac(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Xb(0)}static cr(){return new Xb(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nz="LruGarbageCollector",uwe=1048576;function Ez([e,t],[r,a]){const n=Ea(e,r);return n===0?Ea(t,a):n}class fwe{constructor(t){this.Ir=t,this.buffer=new Hi(Ez),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();Ez(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class hwe{constructor(t,r,a){this.garbageCollector=t,this.asyncQueue=r,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){fr(Nz,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){I1(r)?fr(Nz,"Ignoring IndexedDB error during garbage collection: ",r):await B1(r)}await this.Vr(3e5)})}}class Awe{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(a=>Math.floor(r/100*a))}nthSequenceNumber(t,r){if(r===0)return Mt.resolve(O_.ce);const a=new fwe(r);return this.mr.forEachTarget(t,n=>a.Ar(n.sequenceNumber)).next(()=>this.mr.pr(t,n=>a.Ar(n))).next(()=>a.maxValue)}removeTargets(t,r,a){return this.mr.removeTargets(t,r,a)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(fr("LruGarbageCollector","Garbage collection skipped; disabled"),Mt.resolve(wz)):this.getCacheSize(t).next(a=>a<this.params.cacheSizeCollectionThreshold?(fr("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wz):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let a,n,i,o,l,c,d;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(fr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),n=this.params.maximumSequenceNumbersToCollect):n=f,o=Date.now(),this.nthSequenceNumber(t,n))).next(f=>(a=f,l=Date.now(),this.removeTargets(t,a,r))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(t,a))).next(f=>(d=Date.now(),$v()<=Na.DEBUG&&fr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${n} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(d-c)+`ms
Total Duration: ${d-u}ms`),Mt.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:i,documentsRemoved:f})))}}function mwe(e,t){return new Awe(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pwe{constructor(){this.changes=new wx(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,fl.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const a=this.changes.get(r);return a!==void 0?Mt.resolve(a):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gwe{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xwe{constructor(t,r,a,n){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=a,this.indexManager=n}getDocument(t,r){let a=null;return this.documentOverlayCache.getOverlay(t,r).next(n=>(a=n,this.remoteDocumentCache.getEntry(t,r))).next(n=>(a!==null&&c2(a.mutation,n,hd.empty(),dr.now()),n))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(a=>this.getLocalViewOfDocuments(t,a,Ca()).next(()=>a))}getLocalViewOfDocuments(t,r,a=Ca()){const n=Ng();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,a).next(i=>{let o=Pw();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,r){const a=Ng();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,Ca()))}populateOverlays(t,r,a){const n=[];return a.forEach(i=>{r.has(i)||n.push(i)}),this.documentOverlayCache.getOverlays(t,n).next(i=>{i.forEach((o,l)=>{r.set(o,l)})})}computeViews(t,r,a,n){let i=eA();const o=l2(),l=function(){return l2()}();return r.forEach((c,d)=>{const u=a.get(d.key);n.has(d.key)&&(u===void 0||u.mutation instanceof yp)?i=i.insert(d.key,d):u!==void 0?(o.set(d.key,u.mutation.getFieldMask()),c2(u.mutation,d,u.mutation.getFieldMask(),dr.now())):o.set(d.key,hd.empty())}),this.recalculateAndSaveOverlays(t,i).next(c=>(c.forEach((d,u)=>o.set(d,u)),r.forEach((d,u)=>l.set(d,new gwe(u,o.get(d)??null))),l))}recalculateAndSaveOverlays(t,r){const a=l2();let n=new gs((o,l)=>o-l),i=Ca();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=r.get(c);if(d===null)return;let u=a.get(c)||hd.empty();u=l.applyToLocalView(d,u),a.set(c,u);const f=(n.get(l.batchId)||Ca()).add(c);n=n.insert(l.batchId,f)})}).next(()=>{const o=[],l=n.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,u=c.value,f=tre();u.forEach(A=>{if(!i.has(A)){const m=lre(r.get(A),a.get(A));m!==null&&f.set(A,m),i=i.add(A)}}),o.push(this.documentOverlayCache.saveOverlays(t,d,f))}return Mt.waitFor(o)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(a=>this.recalculateAndSaveOverlays(t,a))}getDocumentsMatchingQuery(t,r,a,n){return function(o){return br.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):l8(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,a,n):this.getDocumentsMatchingCollectionQuery(t,r,a,n)}getNextDocuments(t,r,a,n){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,a,n).next(i=>{const o=n-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,a.largestBatchId,n-i.size):Mt.resolve(Ng());let l=$2,c=i;return o.next(d=>Mt.forEach(d,(u,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(u)?Mt.resolve():this.remoteDocumentCache.getEntry(t,u).next(A=>{c=c.insert(u,A)}))).next(()=>this.populateOverlays(t,d,i)).next(()=>this.computeViews(t,c,d,Ca())).next(u=>({batchId:l,changes:ere(u)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new br(r)).next(a=>{let n=Pw();return a.isFoundDocument()&&(n=n.insert(a.key,a)),n})}getDocumentsMatchingCollectionGroupQuery(t,r,a,n){const i=r.collectionGroup;let o=Pw();return this.indexManager.getCollectionParents(t,i).next(l=>Mt.forEach(l,c=>{const d=function(f,A){return new yx(A,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,d,a,n).next(u=>{u.forEach((f,A)=>{o=o.insert(f,A)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,r,a,n){let i;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,a.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,a,i,n))).next(o=>{i.forEach((c,d)=>{const u=d.getKey();o.get(u)===null&&(o=o.insert(u,fl.newInvalidDocument(u)))});let l=Pw();return o.forEach((c,d)=>{const u=i.get(c);u!==void 0&&c2(u.mutation,d,hd.empty(),dr.now()),M_(r,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vwe{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Mt.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(n){return{id:n.id,version:n.version,createTime:kh(n.createTime)}}(r)),Mt.resolve()}getNamedQuery(t,r){return Mt.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(n){return{name:n.name,query:lwe(n.bundledQuery),readTime:kh(n.readTime)}}(r)),Mt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bwe{constructor(){this.overlays=new gs(br.comparator),this.qr=new Map}getOverlay(t,r){return Mt.resolve(this.overlays.get(r))}getOverlays(t,r){const a=Ng();return Mt.forEach(r,n=>this.getOverlay(t,n).next(i=>{i!==null&&a.set(n,i)})).next(()=>a)}saveOverlays(t,r,a){return a.forEach((n,i)=>{this.St(t,r,i)}),Mt.resolve()}removeOverlaysForBatchId(t,r,a){const n=this.qr.get(a);return n!==void 0&&(n.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(a)),Mt.resolve()}getOverlaysForCollection(t,r,a){const n=Ng(),i=r.length+1,o=new br(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!r.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>a&&n.set(c.getKey(),c)}return Mt.resolve(n)}getOverlaysForCollectionGroup(t,r,a,n){let i=new gs((d,u)=>d-u);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===r&&d.largestBatchId>a){let u=i.get(d.largestBatchId);u===null&&(u=Ng(),i=i.insert(d.largestBatchId,u)),u.set(d.getKey(),d)}}const l=Ng(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,u)=>l.set(d,u)),!(l.size()>=n)););return Mt.resolve(l)}St(t,r,a){const n=this.overlays.get(a.key);if(n!==null){const o=this.qr.get(n.largestBatchId).delete(a.key);this.qr.set(n.largestBatchId,o)}this.overlays=this.overlays.insert(a.key,new Lye(r,a));let i=this.qr.get(r);i===void 0&&(i=Ca(),this.qr.set(r,i)),this.qr.set(r,i.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ywe{constructor(){this.sessionToken=Ao.EMPTY_BYTE_STRING}getSessionToken(t){return Mt.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Mt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(){this.Qr=new Hi(no.$r),this.Ur=new Hi(no.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const a=new no(t,r);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(t,r){t.forEach(a=>this.addReference(a,r))}removeReference(t,r){this.Gr(new no(t,r))}zr(t,r){t.forEach(a=>this.removeReference(a,r))}jr(t){const r=new br(new Dn([])),a=new no(r,t),n=new no(r,t+1),i=[];return this.Ur.forEachInRange([a,n],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new br(new Dn([])),a=new no(r,t),n=new no(r,t+1);let i=Ca();return this.Ur.forEachInRange([a,n],o=>{i=i.add(o.key)}),i}containsKey(t){const r=new no(t,0),a=this.Qr.firstAfterOrEqual(r);return a!==null&&t.isEqual(a.key)}}class no{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return br.comparator(t.key,r.key)||Ea(t.Yr,r.Yr)}static Kr(t,r){return Ea(t.Yr,r.Yr)||br.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wwe{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Hi(no.$r)}checkEmpty(t){return Mt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,a,n){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Rye(i,r,a,n);this.mutationQueue.push(o);for(const l of n)this.Zr=this.Zr.add(new no(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return Mt.resolve(o)}lookupMutationBatch(t,r){return Mt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const a=r+1,n=this.ei(a),i=n<0?0:n;return Mt.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Mt.resolve(this.mutationQueue.length===0?n8:this.tr-1)}getAllMutationBatches(t){return Mt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const a=new no(r,0),n=new no(r,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([a,n],o=>{const l=this.Xr(o.Yr);i.push(l)}),Mt.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,r){let a=new Hi(Ea);return r.forEach(n=>{const i=new no(n,0),o=new no(n,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{a=a.add(l.Yr)})}),Mt.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(t,r){const a=r.path,n=a.length+1;let i=a;br.isDocumentKey(i)||(i=i.child(""));const o=new no(new br(i),0);let l=new Hi(Ea);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!a.isPrefixOf(d)&&(d.length===n&&(l=l.add(c.Yr)),!0)},o),Mt.resolve(this.ti(l))}ti(t){const r=[];return t.forEach(a=>{const n=this.Xr(a);n!==null&&r.push(n)}),r}removeMutationBatch(t,r){un(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return Mt.forEach(r.mutations,n=>{const i=new no(n.key,r.batchId);return a=a.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,n.key)}).next(()=>{this.Zr=a})}ir(t){}containsKey(t,r){const a=new no(r,0),n=this.Zr.firstAfterOrEqual(a);return Mt.resolve(r.isEqual(n&&n.key))}performConsistencyCheck(t){return this.mutationQueue.length,Mt.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nwe{constructor(t){this.ri=t,this.docs=function(){return new gs(br.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const a=r.key,n=this.docs.get(a),i=n?n.size:0,o=this.ri(r);return this.docs=this.docs.insert(a,{document:r.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,a.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const a=this.docs.get(r);return Mt.resolve(a?a.document.mutableCopy():fl.newInvalidDocument(r))}getEntries(t,r){let a=eA();return r.forEach(n=>{const i=this.docs.get(n);a=a.insert(n,i?i.document.mutableCopy():fl.newInvalidDocument(n))}),Mt.resolve(a)}getDocumentsMatchingQuery(t,r,a,n){let i=eA();const o=r.path,l=new br(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:u}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||J1e(Y1e(u),a)<=0||(n.has(u.key)||M_(r,u))&&(i=i.insert(u.key,u.mutableCopy()))}return Mt.resolve(i)}getAllFromCollectionGroup(t,r,a,n){zr(9500)}ii(t,r){return Mt.forEach(this.docs,a=>r(a))}newChangeBuffer(t){return new Ewe(this)}getSize(t){return Mt.resolve(this.size)}}class Ewe extends pwe{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((a,n)=>{n.isValidDocument()?r.push(this.Nr.addEntry(t,n)):this.Nr.removeEntry(a)}),Mt.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cwe{constructor(t){this.persistence=t,this.si=new wx(r=>i8(r),o8),this.lastRemoteSnapshotVersion=Wr.min(),this.highestTargetId=0,this.oi=0,this._i=new h8,this.targetCount=0,this.ai=Xb.ur()}forEachTarget(t,r){return this.si.forEach((a,n)=>r(n)),Mt.resolve()}getLastRemoteSnapshotVersion(t){return Mt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Mt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Mt.resolve(this.highestTargetId)}setTargetsMetadata(t,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.oi&&(this.oi=r),Mt.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new Xb(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Mt.resolve()}updateTargetData(t,r){return this.Pr(r),Mt.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Mt.resolve()}removeTargets(t,r,a){let n=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=r&&a.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),n++)}),Mt.waitFor(i).next(()=>n)}getTargetCount(t){return Mt.resolve(this.targetCount)}getTargetData(t,r){const a=this.si.get(r)||null;return Mt.resolve(a)}addMatchingKeys(t,r,a){return this._i.Wr(r,a),Mt.resolve()}removeMatchingKeys(t,r,a){this._i.zr(r,a);const n=this.persistence.referenceDelegate,i=[];return n&&r.forEach(o=>{i.push(n.markPotentiallyOrphaned(t,o))}),Mt.waitFor(i)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Mt.resolve()}getMatchingKeysForTargetId(t,r){const a=this._i.Hr(r);return Mt.resolve(a)}containsKey(t,r){return Mt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yre{constructor(t,r){this.ui={},this.overlays={},this.ci=new O_(0),this.li=!1,this.li=!0,this.hi=new ywe,this.referenceDelegate=t(this),this.Pi=new Cwe(this),this.indexManager=new cwe,this.remoteDocumentCache=function(n){return new Nwe(n)}(a=>this.referenceDelegate.Ti(a)),this.serializer=new owe(r),this.Ii=new vwe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new bwe,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let a=this.ui[t.toKey()];return a||(a=new wwe(r,this.referenceDelegate),this.ui[t.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,a){fr("MemoryPersistence","Starting transaction:",t);const n=new jwe(this.ci.next());return this.referenceDelegate.Ei(),a(n).next(i=>this.referenceDelegate.di(n).next(()=>i)).toPromise().then(i=>(n.raiseOnCommittedEvent(),i))}Ai(t,r){return Mt.or(Object.values(this.ui).map(a=>()=>a.containsKey(t,r)))}}class jwe extends eye{constructor(t){super(),this.currentSequenceNumber=t}}class A8{constructor(t){this.persistence=t,this.Ri=new h8,this.Vi=null}static mi(t){return new A8(t)}get fi(){if(this.Vi)return this.Vi;throw zr(60996)}addReference(t,r,a){return this.Ri.addReference(a,r),this.fi.delete(a.toString()),Mt.resolve()}removeReference(t,r,a){return this.Ri.removeReference(a,r),this.fi.add(a.toString()),Mt.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Mt.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(n=>this.fi.add(n.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(t,r.targetId).next(n=>{n.forEach(i=>this.fi.add(i.toString()))}).next(()=>a.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Mt.forEach(this.fi,a=>{const n=br.fromPath(a);return this.gi(t,n).next(i=>{i||r.removeEntry(n,Wr.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(a=>{a?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return Mt.or([()=>Mt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class N5{constructor(t,r){this.persistence=t,this.pi=new wx(a=>aye(a.path),(a,n)=>a.isEqual(n)),this.garbageCollector=mwe(this,r)}static mi(t,r){return new N5(t,r)}Ei(){}di(t){return Mt.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(a=>r.next(n=>a+n))}wr(t){let r=0;return this.pr(t,a=>{r++}).next(()=>r)}pr(t,r){return Mt.forEach(this.pi,(a,n)=>this.br(t,a,n).next(i=>i?Mt.resolve():r(n)))}removeTargets(t,r,a){return this.persistence.getTargetCache().removeTargets(t,r,a)}removeOrphanedDocuments(t,r){let a=0;const n=this.persistence.getRemoteDocumentCache(),i=n.newChangeBuffer();return n.ii(t,o=>this.br(t,o,r).next(l=>{l||(a++,i.removeEntry(o,Wr.min()))})).next(()=>i.apply(t)).next(()=>a)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Mt.resolve()}removeTarget(t,r){const a=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,a)}addReference(t,r,a){return this.pi.set(a,t.currentSequenceNumber),Mt.resolve()}removeReference(t,r,a){return this.pi.set(a,t.currentSequenceNumber),Mt.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Mt.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=Ek(t.data.value)),r}br(t,r,a){return Mt.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const n=this.pi.get(r);return Mt.resolve(n!==void 0&&n>a)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(t,r,a,n){this.targetId=t,this.fromCache=r,this.Es=a,this.ds=n}static As(t,r){let a=Ca(),n=Ca();for(const i of r.docChanges)switch(i.type){case 0:a=a.add(i.doc.key);break;case 1:n=n.add(i.doc.key)}return new m8(t,r.fromCache,a,n)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kwe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Swe{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return mge()?8:tye(jl())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,a,n){const i={result:null};return this.ys(t,r).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(t,r,n,a).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new kwe;return this.Ss(t,r,o).next(l=>{if(i.result=l,this.Vs)return this.bs(t,r,o,l.size)})}).next(()=>i.result)}bs(t,r,a,n){return a.documentReadCount<this.fs?($v()<=Na.DEBUG&&fr("QueryEngine","SDK will not create cache indexes for query:",Vv(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Mt.resolve()):($v()<=Na.DEBUG&&fr("QueryEngine","Query:",Vv(r),"scans",a.documentReadCount,"local documents and returns",n,"documents as results."),a.documentReadCount>this.gs*n?($v()<=Na.DEBUG&&fr("QueryEngine","The SDK decides to create cache indexes for query:",Vv(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,jh(r))):Mt.resolve())}ys(t,r){if(fz(r))return Mt.resolve(null);let a=jh(r);return this.indexManager.getIndexType(t,a).next(n=>n===0?null:(r.limit!==null&&n===1&&(r=b5(r,null,"F"),a=jh(r)),this.indexManager.getDocumentsMatchingTarget(t,a).next(i=>{const o=Ca(...i);return this.ps.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,a).next(c=>{const d=this.Ds(r,l);return this.Cs(r,d,o,c.readTime)?this.ys(t,b5(r,null,"F")):this.vs(t,d,r,c)}))})))}ws(t,r,a,n){return fz(r)||n.isEqual(Wr.min())?Mt.resolve(null):this.ps.getDocuments(t,a).next(i=>{const o=this.Ds(r,i);return this.Cs(r,o,a,n)?Mt.resolve(null):($v()<=Na.DEBUG&&fr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Vv(r)),this.vs(t,o,r,X1e(n,$2)).next(l=>l))})}Ds(t,r){let a=new Hi(Jte(t));return r.forEach((n,i)=>{M_(t,i)&&(a=a.add(i))}),a}Cs(t,r,a,n){if(t.limit===null)return!1;if(a.size!==r.size)return!0;const i=t.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(n)>0)}Ss(t,r,a){return $v()<=Na.DEBUG&&fr("QueryEngine","Using full collection scan to execute query:",Vv(r)),this.ps.getDocumentsMatchingQuery(t,r,tp.min(),a)}vs(t,r,a,n){return this.ps.getDocumentsMatchingQuery(t,a,n).next(i=>(r.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p8="LocalStore",_we=3e8;class Twe{constructor(t,r,a,n){this.persistence=t,this.Fs=r,this.serializer=n,this.Ms=new gs(Ea),this.xs=new wx(i=>i8(i),o8),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(a)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new xwe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function Bwe(e,t,r,a){return new Twe(e,t,r,a)}async function wre(e,t){const r=Yr(e);return await r.persistence.runTransaction("Handle user change","readonly",a=>{let n;return r.mutationQueue.getAllMutationBatches(a).next(i=>(n=i,r.Bs(t),r.mutationQueue.getAllMutationBatches(a))).next(i=>{const o=[],l=[];let c=Ca();for(const d of n){o.push(d.batchId);for(const u of d.mutations)c=c.add(u.key)}for(const d of i){l.push(d.batchId);for(const u of d.mutations)c=c.add(u.key)}return r.localDocuments.getDocuments(a,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:l}))})})}function Iwe(e,t){const r=Yr(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const n=t.batch.keys(),i=r.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,u){const f=d.batch,A=f.keys();let m=Mt.resolve();return A.forEach(g=>{m=m.next(()=>u.getEntry(c,g)).next(x=>{const v=d.docVersions.get(g);un(v!==null,48541),x.version.compareTo(v)<0&&(f.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),u.addEntry(x)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,a,t,i).next(()=>i.apply(a)).next(()=>r.mutationQueue.performConsistencyCheck(a)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(a,n,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(l){let c=Ca();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(t))).next(()=>r.localDocuments.getDocuments(a,n))})}function Nre(e){const t=Yr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function Owe(e,t){const r=Yr(e),a=t.snapshotVersion;let n=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});n=r.Ms;const l=[];t.targetChanges.forEach((u,f)=>{const A=n.get(f);if(!A)return;l.push(r.Pi.removeMatchingKeys(i,u.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(i,u.addedDocuments,f)));let m=A.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(f)!==null?m=m.withResumeToken(Ao.EMPTY_BYTE_STRING,Wr.min()).withLastLimboFreeSnapshotVersion(Wr.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,a)),n=n.insert(f,m),function(x,v,y){return x.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=_we?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(A,m,u)&&l.push(r.Pi.updateTargetData(i,m))});let c=eA(),d=Ca();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(i,u))}),l.push(Dwe(i,o,t.documentUpdates).next(u=>{c=u.ks,d=u.qs})),!a.isEqual(Wr.min())){const u=r.Pi.getLastRemoteSnapshotVersion(i).next(f=>r.Pi.setTargetsMetadata(i,i.currentSequenceNumber,a));l.push(u)}return Mt.waitFor(l).next(()=>o.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(r.Ms=n,i))}function Dwe(e,t,r){let a=Ca(),n=Ca();return r.forEach(i=>a=a.add(i)),t.getEntries(e,a).next(i=>{let o=eA();return r.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(n=n.add(l)),c.isNoDocument()&&c.version.isEqual(Wr.min())?(t.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(c),o=o.insert(l,c)):fr(p8,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:n}})}function Fwe(e,t){const r=Yr(e);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(t===void 0&&(t=n8),r.mutationQueue.getNextMutationBatchAfterBatchId(a,t)))}function Pwe(e,t){const r=Yr(e);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let n;return r.Pi.getTargetData(a,t).next(i=>i?(n=i,Mt.resolve(n)):r.Pi.allocateTargetId(a).next(o=>(n=new Bm(t,o,"TargetPurposeListen",a.currentSequenceNumber),r.Pi.addTargetData(a,n).next(()=>n))))}).then(a=>{const n=r.Ms.get(a.targetId);return(n===null||a.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(a.targetId,a),r.xs.set(t,a.targetId)),a})}async function LD(e,t,r){const a=Yr(e),n=a.Ms.get(t),i=r?"readwrite":"readwrite-primary";try{r||await a.persistence.runTransaction("Release target",i,o=>a.persistence.referenceDelegate.removeTarget(o,n))}catch(o){if(!I1(o))throw o;fr(p8,`Failed to update sequence numbers for target ${t}: ${o}`)}a.Ms=a.Ms.remove(t),a.xs.delete(n.target)}function Cz(e,t,r){const a=Yr(e);let n=Wr.min(),i=Ca();return a.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,u){const f=Yr(c),A=f.xs.get(u);return A!==void 0?Mt.resolve(f.Ms.get(A)):f.Pi.getTargetData(d,u)}(a,o,jh(t)).next(l=>{if(l)return n=l.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>a.Fs.getDocumentsMatchingQuery(o,t,r?n:Wr.min(),r?i:Ca())).next(l=>(Rwe(a,wye(t),l),{documents:l,Qs:i})))}function Rwe(e,t,r){let a=e.Os.get(t)||Wr.min();r.forEach((n,i)=>{i.readTime.compareTo(a)>0&&(a=i.readTime)}),e.Os.set(t,a)}class jz{constructor(){this.activeTargetIds=Sye()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Lwe{constructor(){this.Mo=new jz,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,a){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,a){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new jz,Promise.resolve()}handleUserChange(t,r,a){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mwe{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kz="ConnectivityMonitor";class Sz{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fr(kz,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){fr(kz,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zC=null;function MD(){return zC===null?zC=function(){return 268435456+Math.round(2147483648*Math.random())}():zC++,"0x"+zC.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB="RestConnection",Uwe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Hwe{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${a}/databases/${n}`,this.Wo=this.databaseId.database===g5?`project_id=${a}`:`project_id=${a}&database_id=${n}`}Go(t,r,a,n,i){const o=MD(),l=this.zo(t,r.toUriEncodedString());fr(CB,`Sending RPC '${t}' ${o}:`,l,a);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,n,i);const{host:d}=new URL(l),u=mA(d);return this.Jo(t,l,c,a,u).then(f=>(fr(CB,`Received RPC '${t}' ${o}: `,f),f),f=>{throw ex(CB,`RPC '${t}' ${o} failed with error: `,f,"url: ",l,"request:",a),f})}Ho(t,r,a,n,i,o){return this.Go(t,r,a,n,i)}jo(t,r,a){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+T1}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((n,i)=>t[i]=n),a&&a.headers.forEach((n,i)=>t[i]=n)}zo(t,r){const a=Uwe[t];return`${this.Uo}/v1/${r}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qwe{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo="WebChannelConnection";class zwe extends Hwe{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,a,n,i){const o=MD();return new Promise((l,c)=>{const d=new Ete;d.setWithCredentials(!0),d.listenOnce(Cte.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Nk.NO_ERROR:const f=d.getResponseJson();fr(Jo,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(f)),l(f);break;case Nk.TIMEOUT:fr(Jo,`RPC '${t}' ${o} timed out`),c(new Yt(_t.DEADLINE_EXCEEDED,"Request time out"));break;case Nk.HTTP_ERROR:const A=d.getStatus();if(fr(Jo,`RPC '${t}' ${o} failed with status:`,A,"response text:",d.getResponseText()),A>0){let m=d.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const x=function(y){const N=y.toLowerCase().replace(/_/g,"-");return Object.values(_t).indexOf(N)>=0?N:_t.UNKNOWN}(g.status);c(new Yt(x,g.message))}else c(new Yt(_t.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Yt(_t.UNAVAILABLE,"Connection failed."));break;default:zr(9055,{l_:t,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{fr(Jo,`RPC '${t}' ${o} completed.`)}});const u=JSON.stringify(n);fr(Jo,`RPC '${t}' ${o} sending request:`,n),d.send(r,"POST",u,a,15)})}T_(t,r,a){const n=MD(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Ste(),l=kte(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,a),c.encodeInitMessageHeaders=!0;const u=i.join("");fr(Jo,`Creating RPC '${t}' stream ${n}: ${u}`,c);const f=o.createWebChannel(u,c);this.I_(f);let A=!1,m=!1;const g=new Qwe({Yo:v=>{m?fr(Jo,`Not sending because RPC '${t}' stream ${n} is closed:`,v):(A||(fr(Jo,`Opening RPC '${t}' stream ${n} transport.`),f.open(),A=!0),fr(Jo,`RPC '${t}' stream ${n} sending:`,v),f.send(v))},Zo:()=>f.close()}),x=(v,y,N)=>{v.listen(y,E=>{try{N(E)}catch(B){setTimeout(()=>{throw B},0)}})};return x(f,Fw.EventType.OPEN,()=>{m||(fr(Jo,`RPC '${t}' stream ${n} transport opened.`),g.o_())}),x(f,Fw.EventType.CLOSE,()=>{m||(m=!0,fr(Jo,`RPC '${t}' stream ${n} transport closed`),g.a_(),this.E_(f))}),x(f,Fw.EventType.ERROR,v=>{m||(m=!0,ex(Jo,`RPC '${t}' stream ${n} transport errored. Name:`,v.name,"Message:",v.message),g.a_(new Yt(_t.UNAVAILABLE,"The operation could not be completed")))}),x(f,Fw.EventType.MESSAGE,v=>{var y;if(!m){const N=v.data[0];un(!!N,16349);const E=N,B=(E==null?void 0:E.error)||((y=E[0])==null?void 0:y.error);if(B){fr(Jo,`RPC '${t}' stream ${n} received error:`,B);const _=B.status;let I=function(T){const L=vi[T];if(L!==void 0)return dre(L)}(_),j=B.message;I===void 0&&(I=_t.INTERNAL,j="Unknown error status: "+_+" with message "+B.message),m=!0,g.a_(new Yt(I,j)),f.close()}else fr(Jo,`RPC '${t}' stream ${n} received:`,N),g.u_(N)}}),x(l,jte.STAT_EVENT,v=>{v.stat===kD.PROXY?fr(Jo,`RPC '${t}' stream ${n} detected buffering proxy`):v.stat===kD.NOPROXY&&fr(Jo,`RPC '${t}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function jB(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(e){return new qye(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ere{constructor(t,r,a=1e3,n=1.5,i=6e4){this.Mi=t,this.timerId=r,this.d_=a,this.A_=n,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),n=Math.max(0,r-a);n>0&&fr("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,n,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _z="PersistentStream";class Cre{constructor(t,r,a,n,i,o,l,c){this.Mi=t,this.S_=a,this.b_=n,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ere(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===_t.RESOURCE_EXHAUSTED?(Z0(r.toString()),Z0("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===_t.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,n])=>{this.D_===r&&this.G_(a,n)},a=>{t(()=>{const n=new Yt(_t.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(n)})})}G_(t,r){const a=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{a(()=>this.listener.Xo())}),this.stream.t_(()=>{a(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(n=>{a(()=>this.z_(n))}),this.stream.onMessage(n=>{a(()=>++this.F_==1?this.J_(n):this.onNext(n))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return fr(_z,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(fr(_z,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $we extends Cre{constructor(t,r,a,n,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,n,o),this.serializer=i}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=Xye(this.serializer,t),a=function(i){if(!("targetChange"in i))return Wr.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Wr.min():o.readTime?kh(o.readTime):Wr.min()}(t);return this.listener.H_(r,a)}Y_(t){const r={};r.database=RD(this.serializer),r.addTarget=function(i,o){let l;const c=o.target;if(l=ID(c)?{documents:Zye(i,c)}:{query:ewe(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=hre(i,o.resumeToken);const d=DD(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(Wr.min())>0){l.readTime=w5(i,o.snapshotVersion.toTimestamp());const d=DD(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,t);const a=rwe(this.serializer,t);a&&(r.labels=a),this.q_(r)}Z_(t){const r={};r.database=RD(this.serializer),r.removeTarget=t,this.q_(r)}}class Vwe extends Cre{constructor(t,r,a,n,i,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,n,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return un(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,un(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){un(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=Jye(t.writeResults,t.commitTime),a=kh(t.commitTime);return this.listener.na(a,r)}ra(){const t={};t.database=RD(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(a=>Yye(this.serializer,a))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gwe{}class qwe extends Gwe{constructor(t,r,a,n){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=a,this.serializer=n,this.ia=!1}sa(){if(this.ia)throw new Yt(_t.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,a,n){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(t,FD(r,a),n,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===_t.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Yt(_t.UNKNOWN,i.toString())})}Ho(t,r,a,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(t,FD(r,a),n,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===_t.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Yt(_t.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Kwe{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Z0(r),this.aa=!1):fr("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="RemoteStore";class Wwe{constructor(t,r,a,n,i){this.localStore=t,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{a.enqueueAndForget(async()=>{Nx(this)&&(fr(tx,"Restarting streams for network reachability change."),await async function(c){const d=Yr(c);d.Ea.add(4),await KN(d),d.Ra.set("Unknown"),d.Ea.delete(4),await V_(d)}(this))})}),this.Ra=new Kwe(a,n)}}async function V_(e){if(Nx(e))for(const t of e.da)await t(!0)}async function KN(e){for(const t of e.da)await t(!1)}function jre(e,t){const r=Yr(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),b8(r)?v8(r):O1(r).O_()&&x8(r,t))}function g8(e,t){const r=Yr(e),a=O1(r);r.Ia.delete(t),a.O_()&&kre(r,t),r.Ia.size===0&&(a.O_()?a.L_():Nx(r)&&r.Ra.set("Unknown"))}function x8(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Wr.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}O1(e).Y_(t)}function kre(e,t){e.Va.Ue(t),O1(e).Z_(t)}function v8(e){e.Va=new zye({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),O1(e).start(),e.Ra.ua()}function b8(e){return Nx(e)&&!O1(e).x_()&&e.Ia.size>0}function Nx(e){return Yr(e).Ea.size===0}function Sre(e){e.Va=void 0}async function Xwe(e){e.Ra.set("Online")}async function Ywe(e){e.Ia.forEach((t,r)=>{x8(e,t)})}async function Jwe(e,t){Sre(e),b8(e)?(e.Ra.ha(t),v8(e)):e.Ra.set("Unknown")}async function Zwe(e,t,r){if(e.Ra.set("Online"),t instanceof fre&&t.state===2&&t.cause)try{await async function(n,i){const o=i.cause;for(const l of i.targetIds)n.Ia.has(l)&&(await n.remoteSyncer.rejectListen(l,o),n.Ia.delete(l),n.Va.removeTarget(l))}(e,t)}catch(a){fr(tx,"Failed to remove targets %s: %s ",t.targetIds.join(","),a),await E5(e,a)}else if(t instanceof kk?e.Va.Ze(t):t instanceof ure?e.Va.st(t):e.Va.tt(t),!r.isEqual(Wr.min()))try{const a=await Nre(e.localStore);r.compareTo(a)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const u=i.Ia.get(d);u&&i.Ia.set(d,u.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const u=i.Ia.get(c);if(!u)return;i.Ia.set(c,u.withResumeToken(Ao.EMPTY_BYTE_STRING,u.snapshotVersion)),kre(i,c);const f=new Bm(u.target,c,d,u.sequenceNumber);x8(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(e,r)}catch(a){fr(tx,"Failed to raise snapshot:",a),await E5(e,a)}}async function E5(e,t,r){if(!I1(t))throw t;e.Ea.add(1),await KN(e),e.Ra.set("Offline"),r||(r=()=>Nre(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{fr(tx,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await V_(e)})}function _re(e,t){return t().catch(r=>E5(e,r,t))}async function G_(e){const t=Yr(e),r=sp(t);let a=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:n8;for(;e2e(t);)try{const n=await Fwe(t.localStore,a);if(n===null){t.Ta.length===0&&r.L_();break}a=n.batchId,t2e(t,n)}catch(n){await E5(t,n)}Tre(t)&&Bre(t)}function e2e(e){return Nx(e)&&e.Ta.length<10}function t2e(e,t){e.Ta.push(t);const r=sp(e);r.O_()&&r.X_&&r.ea(t.mutations)}function Tre(e){return Nx(e)&&!sp(e).x_()&&e.Ta.length>0}function Bre(e){sp(e).start()}async function r2e(e){sp(e).ra()}async function a2e(e){const t=sp(e);for(const r of e.Ta)t.ea(r.mutations)}async function n2e(e,t,r){const a=e.Ta.shift(),n=d8.from(a,t,r);await _re(e,()=>e.remoteSyncer.applySuccessfulWrite(n)),await G_(e)}async function s2e(e,t){t&&sp(e).X_&&await async function(a,n){if(function(o){return Uye(o)&&o!==_t.ABORTED}(n.code)){const i=a.Ta.shift();sp(a).B_(),await _re(a,()=>a.remoteSyncer.rejectFailedWrite(i.batchId,n)),await G_(a)}}(e,t),Tre(e)&&Bre(e)}async function Tz(e,t){const r=Yr(e);r.asyncQueue.verifyOperationInProgress(),fr(tx,"RemoteStore received new credentials");const a=Nx(r);r.Ea.add(3),await KN(r),a&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await V_(r)}async function i2e(e,t){const r=Yr(e);t?(r.Ea.delete(2),await V_(r)):t||(r.Ea.add(2),await KN(r),r.Ra.set("Unknown"))}function O1(e){return e.ma||(e.ma=function(r,a,n){const i=Yr(r);return i.sa(),new $we(a,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Xwe.bind(null,e),t_:Ywe.bind(null,e),r_:Jwe.bind(null,e),H_:Zwe.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),b8(e)?v8(e):e.Ra.set("Unknown")):(await e.ma.stop(),Sre(e))})),e.ma}function sp(e){return e.fa||(e.fa=function(r,a,n){const i=Yr(r);return i.sa(),new Vwe(a,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:r2e.bind(null,e),r_:s2e.bind(null,e),ta:a2e.bind(null,e),na:n2e.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await G_(e)):(await e.fa.stop(),e.Ta.length>0&&(fr(tx,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(t,r,a,n,i){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=a,this.op=n,this.removalCallback=i,this.deferred=new U0,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,a,n,i){const o=Date.now()+a,l=new y8(t,r,o,n,i);return l.start(a),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Yt(_t.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function w8(e,t){if(Z0("AsyncQueue",`${t}: ${e}`),I1(e))return new Yt(_t.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{static emptySet(t){return new bb(t.comparator)}constructor(t){this.comparator=t?(r,a)=>t(r,a)||br.comparator(r.key,a.key):(r,a)=>br.comparator(r.key,a.key),this.keyedMap=Pw(),this.sortedSet=new gs(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,a)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof bb)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),a=t.sortedSet.getIterator();for(;r.hasNext();){const n=r.getNext().key,i=a.getNext().key;if(!n.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const a=new bb;return a.comparator=this.comparator,a.keyedMap=t,a.sortedSet=r,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(){this.ga=new gs(br.comparator)}track(t){const r=t.doc.key,a=this.ga.get(r);a?t.type!==0&&a.type===3?this.ga=this.ga.insert(r,t):t.type===3&&a.type!==1?this.ga=this.ga.insert(r,{type:a.type,doc:t.doc}):t.type===2&&a.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&a.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&a.type===0?this.ga=this.ga.remove(r):t.type===1&&a.type===2?this.ga=this.ga.insert(r,{type:1,doc:a.doc}):t.type===0&&a.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):zr(63341,{Rt:t,pa:a}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,a)=>{t.push(a)}),t}}class Yb{constructor(t,r,a,n,i,o,l,c,d){this.query=t,this.docs=r,this.oldDocs=a,this.docChanges=n,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(t,r,a,n,i){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Yb(t,r,bb.emptySet(r),o,a,n,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&L_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,a=t.docChanges;if(r.length!==a.length)return!1;for(let n=0;n<r.length;n++)if(r[n].type!==a[n].type||!r[n].doc.isEqual(a[n].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2e{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class l2e{constructor(){this.queries=Iz(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,a){const n=Yr(r),i=n.queries;n.queries=Iz(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(a)})})(this,new Yt(_t.ABORTED,"Firestore shutting down"))}}function Iz(){return new wx(e=>Yte(e),L_)}async function N8(e,t){const r=Yr(e);let a=3;const n=t.query;let i=r.queries.get(n);i?!i.ba()&&t.Da()&&(a=2):(i=new o2e,a=t.Da()?0:1);try{switch(a){case 0:i.wa=await r.onListen(n,!0);break;case 1:i.wa=await r.onListen(n,!1);break;case 2:await r.onFirstRemoteStoreListen(n)}}catch(o){const l=w8(o,`Initialization of query '${Vv(t.query)}' failed`);return void t.onError(l)}r.queries.set(n,i),i.Sa.push(t),t.va(r.onlineState),i.wa&&t.Fa(i.wa)&&C8(r)}async function E8(e,t){const r=Yr(e),a=t.query;let n=3;const i=r.queries.get(a);if(i){const o=i.Sa.indexOf(t);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?n=t.Da()?0:1:!i.ba()&&t.Da()&&(n=2))}switch(n){case 0:return r.queries.delete(a),r.onUnlisten(a,!0);case 1:return r.queries.delete(a),r.onUnlisten(a,!1);case 2:return r.onLastRemoteStoreUnlisten(a);default:return}}function c2e(e,t){const r=Yr(e);let a=!1;for(const n of t){const i=n.query,o=r.queries.get(i);if(o){for(const l of o.Sa)l.Fa(n)&&(a=!0);o.wa=n}}a&&C8(r)}function d2e(e,t,r){const a=Yr(e),n=a.queries.get(t);if(n)for(const i of n.Sa)i.onError(r);a.queries.delete(t)}function C8(e){e.Ca.forEach(t=>{t.next()})}var UD,Oz;(Oz=UD||(UD={})).Ma="default",Oz.Cache="cache";class j8{constructor(t,r,a){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(t){if(!this.options.includeMetadataChanges){const a=[];for(const n of t.docChanges)n.type!==3&&a.push(n);t=new Yb(t.query,t.docs,t.oldDocs,a,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const a=r!=="Offline";return(!this.options.qa||!a)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=Yb.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==UD.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ire{constructor(t){this.key=t}}class Ore{constructor(t){this.key=t}}class u2e{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ca(),this.mutatedKeys=Ca(),this.eu=Jte(t),this.tu=new bb(this.eu)}get nu(){return this.Ya}ru(t,r){const a=r?r.iu:new Bz,n=r?r.tu:this.tu;let i=r?r.mutatedKeys:this.mutatedKeys,o=n,l=!1;const c=this.query.limitType==="F"&&n.size===this.query.limit?n.last():null,d=this.query.limitType==="L"&&n.size===this.query.limit?n.first():null;if(t.inorderTraversal((u,f)=>{const A=n.get(u),m=M_(this.query,f)?f:null,g=!!A&&this.mutatedKeys.has(A.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;A&&m?A.data.isEqual(m.data)?g!==x&&(a.track({type:3,doc:m}),v=!0):this.su(A,m)||(a.track({type:2,doc:m}),v=!0,(c&&this.eu(m,c)>0||d&&this.eu(m,d)<0)&&(l=!0)):!A&&m?(a.track({type:0,doc:m}),v=!0):A&&!m&&(a.track({type:1,doc:A}),v=!0,(c||d)&&(l=!0)),v&&(m?(o=o.add(m),i=x?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),a.track({type:1,doc:u})}return{tu:o,iu:a,Cs:l,mutatedKeys:i}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,a,n){const i=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort((u,f)=>function(m,g){const x=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zr(20277,{Rt:v})}};return x(m)-x(g)}(u.type,f.type)||this.eu(u.doc,f.doc)),this.ou(a),n=n??!1;const l=r&&!n?this._u():[],c=this.Xa.size===0&&this.current&&!n?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new Yb(this.query,t.tu,i,o,t.mutatedKeys,c===0,d,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Bz,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ca(),this.tu.forEach(a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))});const r=[];return t.forEach(a=>{this.Xa.has(a)||r.push(new Ore(a))}),this.Xa.forEach(a=>{t.has(a)||r.push(new Ire(a))}),r}cu(t){this.Ya=t.Qs,this.Xa=Ca();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return Yb.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const k8="SyncEngine";class f2e{constructor(t,r,a){this.query=t,this.targetId=r,this.view=a}}class h2e{constructor(t){this.key=t,this.hu=!1}}class A2e{constructor(t,r,a,n,i,o){this.localStore=t,this.remoteStore=r,this.eventManager=a,this.sharedClientState=n,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new wx(l=>Yte(l),L_),this.Iu=new Map,this.Eu=new Set,this.du=new gs(br.comparator),this.Au=new Map,this.Ru=new h8,this.Vu={},this.mu=new Map,this.fu=Xb.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function m2e(e,t,r=!0){const a=Mre(e);let n;const i=a.Tu.get(t);return i?(a.sharedClientState.addLocalQueryTarget(i.targetId),n=i.view.lu()):n=await Dre(a,t,r,!0),n}async function p2e(e,t){const r=Mre(e);await Dre(r,t,!0,!1)}async function Dre(e,t,r,a){const n=await Pwe(e.localStore,jh(t)),i=n.targetId,o=e.sharedClientState.addLocalQueryTarget(i,r);let l;return a&&(l=await g2e(e,t,i,o==="current",n.resumeToken)),e.isPrimaryClient&&r&&jre(e.remoteStore,n),l}async function g2e(e,t,r,a,n){e.pu=(f,A,m)=>async function(x,v,y,N){let E=v.view.ru(y);E.Cs&&(E=await Cz(x.localStore,v.query,!1).then(({documents:j})=>v.view.ru(j,E)));const B=N&&N.targetChanges.get(v.targetId),_=N&&N.targetMismatches.get(v.targetId)!=null,I=v.view.applyChanges(E,x.isPrimaryClient,B,_);return Fz(x,v.targetId,I.au),I.snapshot}(e,f,A,m);const i=await Cz(e.localStore,t,!0),o=new u2e(t,i.Qs),l=o.ru(i.documents),c=qN.createSynthesizedTargetChangeForCurrentChange(r,a&&e.onlineState!=="Offline",n),d=o.applyChanges(l,e.isPrimaryClient,c);Fz(e,r,d.au);const u=new f2e(t,r,o);return e.Tu.set(t,u),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),d.snapshot}async function x2e(e,t,r){const a=Yr(e),n=a.Tu.get(t),i=a.Iu.get(n.targetId);if(i.length>1)return a.Iu.set(n.targetId,i.filter(o=>!L_(o,t))),void a.Tu.delete(t);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(n.targetId),a.sharedClientState.isActiveQueryTarget(n.targetId)||await LD(a.localStore,n.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(n.targetId),r&&g8(a.remoteStore,n.targetId),HD(a,n.targetId)}).catch(B1)):(HD(a,n.targetId),await LD(a.localStore,n.targetId,!0))}async function v2e(e,t){const r=Yr(e),a=r.Tu.get(t),n=r.Iu.get(a.targetId);r.isPrimaryClient&&n.length===1&&(r.sharedClientState.removeLocalQueryTarget(a.targetId),g8(r.remoteStore,a.targetId))}async function b2e(e,t,r){const a=k2e(e);try{const n=await function(o,l){const c=Yr(o),d=dr.now(),u=l.reduce((m,g)=>m.add(g.key),Ca());let f,A;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=eA(),x=Ca();return c.Ns.getEntries(m,u).next(v=>{g=v,g.forEach((y,N)=>{N.isValidDocument()||(x=x.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,g)).next(v=>{f=v;const y=[];for(const N of l){const E=Fye(N,f.get(N.key).overlayedDocument);E!=null&&y.push(new yp(N.key,E,$te(E.value.mapValue),Vl.exists(!0)))}return c.mutationQueue.addMutationBatch(m,d,y,l)}).next(v=>{A=v;const y=v.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(m,v.batchId,y)})}).then(()=>({batchId:A.batchId,changes:ere(f)}))}(a.localStore,t);a.sharedClientState.addPendingMutation(n.batchId),function(o,l,c){let d=o.Vu[o.currentUser.toKey()];d||(d=new gs(Ea)),d=d.insert(l,c),o.Vu[o.currentUser.toKey()]=d}(a,n.batchId,r),await WN(a,n.changes),await G_(a.remoteStore)}catch(n){const i=w8(n,"Failed to persist write");r.reject(i)}}async function Fre(e,t){const r=Yr(e);try{const a=await Owe(r.localStore,t);t.targetChanges.forEach((n,i)=>{const o=r.Au.get(i);o&&(un(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,22616),n.addedDocuments.size>0?o.hu=!0:n.modifiedDocuments.size>0?un(o.hu,14607):n.removedDocuments.size>0&&(un(o.hu,42227),o.hu=!1))}),await WN(r,a,t)}catch(a){await B1(a)}}function Dz(e,t,r){const a=Yr(e);if(a.isPrimaryClient&&r===0||!a.isPrimaryClient&&r===1){const n=[];a.Tu.forEach((i,o)=>{const l=o.view.va(t);l.snapshot&&n.push(l.snapshot)}),function(o,l){const c=Yr(o);c.onlineState=l;let d=!1;c.queries.forEach((u,f)=>{for(const A of f.Sa)A.va(l)&&(d=!0)}),d&&C8(c)}(a.eventManager,t),n.length&&a.Pu.H_(n),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function y2e(e,t,r){const a=Yr(e);a.sharedClientState.updateQueryState(t,"rejected",r);const n=a.Au.get(t),i=n&&n.key;if(i){let o=new gs(br.comparator);o=o.insert(i,fl.newNoDocument(i,Wr.min()));const l=Ca().add(i),c=new z_(Wr.min(),new Map,new gs(Ea),o,l);await Fre(a,c),a.du=a.du.remove(i),a.Au.delete(t),S8(a)}else await LD(a.localStore,t,!1).then(()=>HD(a,t,r)).catch(B1)}async function w2e(e,t){const r=Yr(e),a=t.batch.batchId;try{const n=await Iwe(r.localStore,t);Rre(r,a,null),Pre(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),await WN(r,n)}catch(n){await B1(n)}}async function N2e(e,t,r){const a=Yr(e);try{const n=await function(o,l){const c=Yr(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let u;return c.mutationQueue.lookupMutationBatch(d,l).next(f=>(un(f!==null,37113),u=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,u,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,u)).next(()=>c.localDocuments.getDocuments(d,u))})}(a.localStore,t);Rre(a,t,r),Pre(a,t),a.sharedClientState.updateMutationState(t,"rejected",r),await WN(a,n)}catch(n){await B1(n)}}function Pre(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function Rre(e,t,r){const a=Yr(e);let n=a.Vu[a.currentUser.toKey()];if(n){const i=n.get(t);i&&(r?i.reject(r):i.resolve(),n=n.remove(t)),a.Vu[a.currentUser.toKey()]=n}}function HD(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const a of e.Iu.get(t))e.Tu.delete(a),r&&e.Pu.yu(a,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(a=>{e.Ru.containsKey(a)||Lre(e,a)})}function Lre(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(g8(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),S8(e))}function Fz(e,t,r){for(const a of r)a instanceof Ire?(e.Ru.addReference(a.key,t),E2e(e,a)):a instanceof Ore?(fr(k8,"Document no longer in limbo: "+a.key),e.Ru.removeReference(a.key,t),e.Ru.containsKey(a.key)||Lre(e,a.key)):zr(19791,{wu:a})}function E2e(e,t){const r=t.key,a=r.path.canonicalString();e.du.get(r)||e.Eu.has(a)||(fr(k8,"New document in limbo: "+r),e.Eu.add(a),S8(e))}function S8(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new br(Dn.fromString(t)),a=e.fu.next();e.Au.set(a,new h2e(r)),e.du=e.du.insert(r,a),jre(e.remoteStore,new Bm(jh(R_(r.path)),a,"TargetPurposeLimboResolution",O_.ce))}}async function WN(e,t,r){const a=Yr(e),n=[],i=[],o=[];a.Tu.isEmpty()||(a.Tu.forEach((l,c)=>{o.push(a.pu(c,t,r).then(d=>{var u;if((d||r)&&a.isPrimaryClient){const f=d?!d.fromCache:(u=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:u.current;a.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){n.push(d);const f=m8.As(c.targetId,d);i.push(f)}}))}),await Promise.all(o),a.Pu.H_(n),await async function(c,d){const u=Yr(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Mt.forEach(d,A=>Mt.forEach(A.Es,m=>u.persistence.referenceDelegate.addReference(f,A.targetId,m)).next(()=>Mt.forEach(A.ds,m=>u.persistence.referenceDelegate.removeReference(f,A.targetId,m)))))}catch(f){if(!I1(f))throw f;fr(p8,"Failed to update sequence numbers: "+f)}for(const f of d){const A=f.targetId;if(!f.fromCache){const m=u.Ms.get(A),g=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(g);u.Ms=u.Ms.insert(A,x)}}}(a.localStore,i))}async function C2e(e,t){const r=Yr(e);if(!r.currentUser.isEqual(t)){fr(k8,"User change. New user:",t.toKey());const a=await wre(r.localStore,t);r.currentUser=t,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new Yt(_t.CANCELLED,o))})}),i.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,a.removedBatchIds,a.addedBatchIds),await WN(r,a.Ls)}}function j2e(e,t){const r=Yr(e),a=r.Au.get(t);if(a&&a.hu)return Ca().add(a.key);{let n=Ca();const i=r.Iu.get(t);if(!i)return n;for(const o of i){const l=r.Tu.get(o);n=n.unionWith(l.view.nu)}return n}}function Mre(e){const t=Yr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Fre.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=j2e.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=y2e.bind(null,t),t.Pu.H_=c2e.bind(null,t.eventManager),t.Pu.yu=d2e.bind(null,t.eventManager),t}function k2e(e){const t=Yr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=w2e.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=N2e.bind(null,t),t}class C5{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=$_(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return Bwe(this.persistence,new Swe,t.initialUser,this.serializer)}Cu(t){return new yre(A8.mi,this.serializer)}Du(t){return new Lwe}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}C5.provider={build:()=>new C5};class S2e extends C5{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){un(this.persistence.referenceDelegate instanceof N5,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new hwe(a,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?Ac.withCacheSize(this.cacheSizeBytes):Ac.DEFAULT;return new yre(a=>N5.mi(a,r),this.serializer)}}class QD{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Dz(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=C2e.bind(null,this.syncEngine),await i2e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new l2e}()}createDatastore(t){const r=$_(t.databaseInfo.databaseId),a=function(i){return new zwe(i)}(t.databaseInfo);return function(i,o,l,c){return new qwe(i,o,l,c)}(t.authCredentials,t.appCheckCredentials,a,r)}createRemoteStore(t){return function(a,n,i,o,l){return new Wwe(a,n,i,o,l)}(this.localStore,this.datastore,t.asyncQueue,r=>Dz(this.syncEngine,r,0),function(){return Sz.v()?new Sz:new Mwe}())}createSyncEngine(t,r){return function(n,i,o,l,c,d,u){const f=new A2e(n,i,o,l,c,d);return u&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(n){const i=Yr(n);fr(tx,"RemoteStore shutting down."),i.Ea.add(5),await KN(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}QD.provider={build:()=>new QD};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Z0("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="FirestoreClient";class _2e{constructor(t,r,a,n,i){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=a,this.databaseInfo=n,this.user=ol.UNAUTHENTICATED,this.clientId=B_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(a,async o=>{fr(ip,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(a,o=>(fr(ip,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new U0;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=w8(r,"Failed to shutdown persistence");t.reject(a)}}),t.promise}}async function kB(e,t){e.asyncQueue.verifyOperationInProgress(),fr(ip,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let a=r.initialUser;e.setCredentialChangeListener(async n=>{a.isEqual(n)||(await wre(t.localStore,n),a=n)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Pz(e,t){e.asyncQueue.verifyOperationInProgress();const r=await T2e(e);fr(ip,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(a=>Tz(t.remoteStore,a)),e.setAppCheckTokenChangeListener((a,n)=>Tz(t.remoteStore,n)),e._onlineComponents=t}async function T2e(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){fr(ip,"Using user provided OfflineComponentProvider");try{await kB(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(n){return n.name==="FirebaseError"?n.code===_t.FAILED_PRECONDITION||n.code===_t.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}(r))throw r;ex("Error using user provided cache. Falling back to memory cache: "+r),await kB(e,new C5)}}else fr(ip,"Using default OfflineComponentProvider"),await kB(e,new S2e(void 0));return e._offlineComponents}async function Ure(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(fr(ip,"Using user provided OnlineComponentProvider"),await Pz(e,e._uninitializedComponentsProvider._online)):(fr(ip,"Using default OnlineComponentProvider"),await Pz(e,new QD))),e._onlineComponents}function B2e(e){return Ure(e).then(t=>t.syncEngine)}async function j5(e){const t=await Ure(e),r=t.eventManager;return r.onListen=m2e.bind(null,t.syncEngine),r.onUnlisten=x2e.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=p2e.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=v2e.bind(null,t.syncEngine),r}function I2e(e,t,r={}){const a=new U0;return e.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const u=new _8({next:A=>{u.Nu(),o.enqueueAndForget(()=>E8(i,f));const m=A.docs.has(l);!m&&A.fromCache?d.reject(new Yt(_t.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&A.fromCache&&c&&c.source==="server"?d.reject(new Yt(_t.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(A)},error:A=>d.reject(A)}),f=new j8(R_(l.path),u,{includeMetadataChanges:!0,qa:!0});return N8(i,f)}(await j5(e),e.asyncQueue,t,r,a)),a.promise}function O2e(e,t,r={}){const a=new U0;return e.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const u=new _8({next:A=>{u.Nu(),o.enqueueAndForget(()=>E8(i,f)),A.fromCache&&c.source==="server"?d.reject(new Yt(_t.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(A)},error:A=>d.reject(A)}),f=new j8(l,u,{includeMetadataChanges:!0,qa:!0});return N8(i,f)}(await j5(e),e.asyncQueue,t,r,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hre(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qre="firestore.googleapis.com",Lz=!0;class Mz{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Yt(_t.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qre,this.ssl=Lz}else this.host=t.host,this.ssl=t.ssl??Lz;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=bre;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<uwe)throw new Yt(_t.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Ote("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Hre(t.experimentalLongPollingOptions??{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Yt(_t.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Yt(_t.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Yt(_t.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(a,n){return a.timeoutSeconds===n.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class q_{constructor(t,r,a,n){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=a,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mz({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Yt(_t.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Yt(_t.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mz(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new Bte;switch(a.type){case"firstParty":return new z1e(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Yt(_t.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const a=Rz.get(r);a&&(fr("ComponentProvider","Removing Datastore"),Rz.delete(r),a.terminate())}(this),Promise.resolve()}}function zre(e,t,r,a={}){var d;e=Nl(e,q_);const n=mA(t),i=e._getSettings(),o={...i,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${r}`;n&&(N_(`https://${l}`),E_("Firestore",!0)),i.host!==Qre&&i.host!==l&&ex("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:n,emulatorOptions:a};if(!Zm(c,o)&&(e._setSettings(c),a.mockUserToken)){let u,f;if(typeof a.mockUserToken=="string")u=a.mockUserToken,f=ol.MOCK_USER;else{u=Cee(a.mockUserToken,(d=e._app)==null?void 0:d.options.projectId);const A=a.mockUserToken.sub||a.mockUserToken.user_id;if(!A)throw new Yt(_t.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ol(A)}e._authCredentials=new U1e(new Tte(u,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(t,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new bf(this.firestore,t,this._query)}}class hs{constructor(t,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new H0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new hs(this.firestore,t,this._key)}toJSON(){return{type:hs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,a){if(VN(r,hs._jsonSchema))return new hs(t,a||null,new br(Dn.fromString(r.referencePath)))}}hs._jsonSchemaVersion="firestore/documentReference/1.0",hs._jsonSchema={type:ki("string",hs._jsonSchemaVersion),referencePath:ki("string")};class H0 extends bf{constructor(t,r,a){super(t,r,R_(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new hs(this.firestore,null,new br(t))}withConverter(t){return new H0(this.firestore,t,this._path)}}function ut(e,t,...r){if(e=La(e),Ite("collection","path",t),e instanceof q_){const a=Dn.fromString(t,...r);return ZQ(a),new H0(e,null,a)}{if(!(e instanceof hs||e instanceof H0))throw new Yt(_t.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=e._path.child(Dn.fromString(t,...r));return ZQ(a),new H0(e.firestore,null,a)}}function $t(e,t,...r){if(e=La(e),arguments.length===1&&(t=B_.newId()),Ite("doc","path",t),e instanceof q_){const a=Dn.fromString(t,...r);return JQ(a),new hs(e,null,new br(a))}{if(!(e instanceof hs||e instanceof H0))throw new Yt(_t.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=e._path.child(Dn.fromString(t,...r));return JQ(a),new hs(e.firestore,e instanceof H0?e.converter:null,new br(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uz="AsyncQueue";class Hz{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ere(this,"async_queue_retry"),this._c=()=>{const a=jB();a&&fr(Uz,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=t;const r=jB();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=jB();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new U0;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!I1(t))throw t;fr(Uz,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(a=>{throw this.nc=a,this.rc=!1,Z0("INTERNAL UNHANDLED ERROR: ",Qz(a)),a}).then(a=>(this.rc=!1,a))));return this.ac=r,r}enqueueAfterDelay(t,r,a){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const n=y8.createAndSchedule(this,t,r,a,i=>this.hc(i));return this.tc.push(n),n}uc(){this.nc&&zr(47125,{Pc:Qz(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function Qz(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zz(e){return function(r,a){if(typeof r!="object"||r===null)return!1;const n=r;for(const i of a)if(i in n&&typeof n[i]=="function")return!0;return!1}(e,["next","error","complete"])}class mf extends q_{constructor(t,r,a,n){super(t,r,a,n),this.type="firestore",this._queue=new Hz,this._persistenceKey=(n==null?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Hz(t),this._firestoreClient=void 0,await t}}}function T8(e,t){const r=typeof e=="object"?e:HN(),a=typeof e=="string"?e:g5,n=xx(r,"firestore").getImmediate({identifier:a});if(!n._initialized){const i=UR("firestore");i&&zre(n,...i)}return n}function D1(e){if(e._terminated)throw new Yt(_t.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||D2e(e),e._firestoreClient}function D2e(e){var a,n,i;const t=e._freezeSettings(),r=function(l,c,d,u){return new iye(l,c,d,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Hre(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(e._databaseId,((a=e._app)==null?void 0:a.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(n=t.localCache)!=null&&n._offlineComponentProvider&&((i=t.localCache)!=null&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new _2e(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ld(Ao.fromBase64String(t))}catch(r){throw new Yt(_t.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new ld(Ao.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:ld._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(VN(t,ld._jsonSchema))return ld.fromBase64String(t.bytes)}}ld._jsonSchemaVersion="firestore/bytes/1.0",ld._jsonSchema={type:ki("string",ld._jsonSchemaVersion),bytes:ki("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Yt(_t.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lo(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Yt(_t.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Yt(_t.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ea(this._lat,t._lat)||Ea(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:of._jsonSchemaVersion}}static fromJSON(t){if(VN(t,of._jsonSchema))return new of(t.latitude,t.longitude)}}of._jsonSchemaVersion="firestore/geoPoint/1.0",of._jsonSchema={type:ki("string",of._jsonSchemaVersion),latitude:ki("number"),longitude:ki("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(a,n){if(a.length!==n.length)return!1;for(let i=0;i<a.length;++i)if(a[i]!==n[i])return!1;return!0}(this._values,t._values)}toJSON(){return{type:lf._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(VN(t,lf._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new lf(t.vectorValues);throw new Yt(_t.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}lf._jsonSchemaVersion="firestore/vectorValue/1.0",lf._jsonSchema={type:ki("string",lf._jsonSchemaVersion),vectorValues:ki("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2e=/^__.*__$/;class P2e{constructor(t,r,a){this.data=t,this.fieldMask=r,this.fieldTransforms=a}toMutation(t,r){return this.fieldMask!==null?new yp(t,this.data,this.fieldMask,r,this.fieldTransforms):new GN(t,this.data,r,this.fieldTransforms)}}class $re{constructor(t,r,a){this.data=t,this.fieldMask=r,this.fieldTransforms=a}toMutation(t,r){return new yp(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function Vre(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zr(40011,{Ac:e})}}class K_{constructor(t,r,a,n,i,o){this.settings=t,this.databaseId=r,this.serializer=a,this.ignoreUndefinedProperties=n,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new K_({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var n;const r=(n=this.path)==null?void 0:n.child(t),a=this.Vc({path:r,fc:!1});return a.gc(t),a}yc(t){var n;const r=(n=this.path)==null?void 0:n.child(t),a=this.Vc({path:r,fc:!1});return a.Rc(),a}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return k5(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Vre(this.Ac)&&F2e.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class R2e{constructor(t,r,a){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=a||$_(t)}Cc(t,r,a,n=!1){return new K_({Ac:t,methodName:r,Dc:a,path:lo.emptyPath(),fc:!1,bc:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function R1(e){const t=e._freezeSettings(),r=$_(e._databaseId);return new R2e(e._databaseId,!!t.ignoreUndefinedProperties,r)}function B8(e,t,r,a,n,i={}){const o=e.Cc(i.merge||i.mergeFields?2:0,t,r,n);D8("Data must be an object, but it was:",o,a);const l=Wre(a,o);let c,d;if(i.merge)c=new hd(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const f of i.mergeFields){const A=zD(t,f,r);if(!o.contains(A))throw new Yt(_t.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);Yre(u,A)||u.push(A)}c=new hd(u),d=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=o.fieldTransforms;return new P2e(new vc(l),c,d)}class W_ extends P1{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof W_}}function L2e(e,t,r){return new K_({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class I8 extends P1{_toFieldTransform(t){return new ore(t.path,new K2)}isEqual(t){return t instanceof I8}}class O8 extends P1{constructor(t,r){super(t),this.vc=r}_toFieldTransform(t){const r=L2e(this,t,!0),a=this.vc.map(i=>L1(i,r)),n=new Wb(a);return new ore(t.path,n)}isEqual(t){return t instanceof O8&&Zm(this.vc,t.vc)}}function Gre(e,t,r,a){const n=e.Cc(1,t,r);D8("Data must be an object, but it was:",n,a);const i=[],o=vc.empty();bp(a,(c,d)=>{const u=F8(t,c,r);d=La(d);const f=n.yc(u);if(d instanceof W_)i.push(u);else{const A=L1(d,f);A!=null&&(i.push(u),o.set(u,A))}});const l=new hd(i);return new $re(o,l,n.fieldTransforms)}function qre(e,t,r,a,n,i){const o=e.Cc(1,t,r),l=[zD(t,a,r)],c=[n];if(i.length%2!=0)throw new Yt(_t.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<i.length;A+=2)l.push(zD(t,i[A])),c.push(i[A+1]);const d=[],u=vc.empty();for(let A=l.length-1;A>=0;--A)if(!Yre(d,l[A])){const m=l[A];let g=c[A];g=La(g);const x=o.yc(m);if(g instanceof W_)d.push(m);else{const v=L1(g,x);v!=null&&(d.push(m),u.set(m,v))}}const f=new hd(d);return new $re(u,f,o.fieldTransforms)}function Kre(e,t,r,a=!1){return L1(r,e.Cc(a?4:3,t))}function L1(e,t){if(Xre(e=La(e)))return D8("Unsupported field value:",t,e),Wre(e,t);if(e instanceof P1)return function(a,n){if(!Vre(n.Ac))throw n.Sc(`${a._methodName}() can only be used with update() and set()`);if(!n.path)throw n.Sc(`${a._methodName}() is not currently supported inside arrays`);const i=a._toFieldTransform(n);i&&n.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(a,n){const i=[];let o=0;for(const l of a){let c=L1(l,n.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(e,t)}return function(a,n){if((a=La(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return _ye(n.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const i=dr.fromDate(a);return{timestampValue:w5(n.serializer,i)}}if(a instanceof dr){const i=new dr(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:w5(n.serializer,i)}}if(a instanceof of)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof ld)return{bytesValue:hre(n.serializer,a._byteString)};if(a instanceof hs){const i=n.databaseId,o=a.firestore._databaseId;if(!o.isEqual(i))throw n.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:f8(a.firestore._databaseId||n.databaseId,a._key.path)}}if(a instanceof lf)return function(o,l){return{mapValue:{fields:{[Qte]:{stringValue:zte},[x5]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return c8(l.serializer,d)})}}}}}}(a,n);throw n.Sc(`Unsupported field value: ${I_(a)}`)}(e,t)}function Wre(e,t){const r={};return Pte(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):bp(e,(a,n)=>{const i=L1(n,t.mc(a));i!=null&&(r[a]=i)}),{mapValue:{fields:r}}}function Xre(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof dr||e instanceof of||e instanceof ld||e instanceof hs||e instanceof P1||e instanceof lf)}function D8(e,t,r){if(!Xre(r)||!Dte(r)){const a=I_(r);throw a==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+a)}}function zD(e,t,r){if((t=La(t))instanceof F1)return t._internalPath;if(typeof t=="string")return F8(e,t);throw k5("Field path arguments must be of type string or ",e,!1,void 0,r)}const M2e=new RegExp("[~\\*/\\[\\]]");function F8(e,t,r){if(t.search(M2e)>=0)throw k5(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new F1(...t.split("."))._internalPath}catch{throw k5(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function k5(e,t,r,a,n){const i=a&&!a.isEmpty(),o=n!==void 0;let l=`Function ${t}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${a}`),o&&(c+=` in document ${n}`),c+=")"),new Yt(_t.INVALID_ARGUMENT,l+e+c)}function Yre(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(t,r,a,n,i){this._firestore=t,this._userDataWriter=r,this._key=a,this._document=n,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new hs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new U2e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(X_("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class U2e extends P8{data(){return super.data()}}function X_(e,t){return typeof t=="string"?F8(e,t):t instanceof F1?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jre(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Yt(_t.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class R8{}class XN extends R8{}function jt(e,t,...r){let a=[];t instanceof R8&&a.push(t),a=a.concat(r),function(i){const o=i.filter(c=>c instanceof Y_).length,l=i.filter(c=>c instanceof YN).length;if(o>1||o>0&&l>0)throw new Yt(_t.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const n of a)e=n._apply(e);return e}class YN extends XN{constructor(t,r,a){super(),this._field=t,this._op=r,this._value=a,this.type="where"}static _create(t,r,a){return new YN(t,r,a)}_apply(t){const r=this._parse(t);return eae(t._query,r),new bf(t.firestore,t.converter,OD(t._query,r))}_parse(t){const r=R1(t.firestore);return function(i,o,l,c,d,u,f){let A;if(d.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Yt(_t.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Vz(f,u);const g=[];for(const x of f)g.push($z(c,i,x));A={arrayValue:{values:g}}}else A=$z(c,i,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Vz(f,u),A=Kre(l,o,f,u==="in"||u==="not-in");return Ci.create(d,u,A)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function Kt(e,t,r){const a=t,n=X_("where",e);return YN._create(n,a,r)}class Y_ extends R8{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new Y_(t,r)}_parse(t){const r=this._queryConstraints.map(a=>a._parse(t)).filter(a=>a.getFilters().length>0);return r.length===1?r[0]:Af.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(n,i){let o=n;const l=i.getFlattenedFilters();for(const c of l)eae(o,c),o=OD(o,c)}(t._query,r),new bf(t.firestore,t.converter,OD(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class J_ extends XN{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new J_(t,r)}_apply(t){const r=function(n,i,o){if(n.startAt!==null)throw new Yt(_t.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(n.endAt!==null)throw new Yt(_t.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new q2(i,o)}(t._query,this._field,this._direction);return new bf(t.firestore,t.converter,function(n,i){const o=n.explicitOrderBy.concat([i]);return new yx(n.path,n.collectionGroup,o,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}(t._query,r))}}function Gt(e,t="asc"){const r=t,a=X_("orderBy",e);return J_._create(a,r)}class Z_ extends XN{constructor(t,r,a){super(),this.type=t,this._limit=r,this._limitType=a}static _create(t,r,a){return new Z_(t,r,a)}_apply(t){return new bf(t.firestore,t.converter,b5(t._query,this._limit,this._limitType))}}function El(e){return W1e("limit",e),Z_._create("limit",e,"F")}class e4 extends XN{constructor(t,r,a){super(),this.type=t,this._docOrFields=r,this._inclusive=a}static _create(t,r,a){return new e4(t,r,a)}_apply(t){const r=H2e(t,this.type,this._docOrFields,this._inclusive);return new bf(t.firestore,t.converter,function(n,i){return new yx(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,i,n.endAt)}(t._query,r))}}function Zre(...e){return e4._create("startAfter",e,!1)}function H2e(e,t,r,a){if(r[0]=La(r[0]),r[0]instanceof P8)return function(i,o,l,c,d){if(!c)throw new Yt(_t.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const u=[];for(const f of vb(i))if(f.field.isKeyField())u.push(v5(o,c.key));else{const A=c.data.field(f.field);if(F_(A))throw new Yt(_t.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(A===null){const m=f.field.canonicalString();throw new Yt(_t.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}u.push(A)}return new Kb(u,d)}(e._query,e.firestore._databaseId,t,r[0]._document,a);{const n=R1(e.firestore);return function(o,l,c,d,u,f){const A=o.explicitOrderBy;if(u.length>A.length)throw new Yt(_t.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let g=0;g<u.length;g++){const x=u[g];if(A[g].field.isKeyField()){if(typeof x!="string")throw new Yt(_t.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof x}`);if(!l8(o)&&x.indexOf("/")!==-1)throw new Yt(_t.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${x}' contains a slash.`);const v=o.path.child(Dn.fromString(x));if(!br.isDocumentKey(v))throw new Yt(_t.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const y=new br(v);m.push(v5(l,y))}else{const v=Kre(c,d,x);m.push(v)}}return new Kb(m,f)}(e._query,e.firestore._databaseId,n,t,r,a)}}function $z(e,t,r){if(typeof(r=La(r))=="string"){if(r==="")throw new Yt(_t.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!l8(t)&&r.indexOf("/")!==-1)throw new Yt(_t.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=t.path.child(Dn.fromString(r));if(!br.isDocumentKey(a))throw new Yt(_t.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return v5(e,new br(a))}if(r instanceof hs)return v5(e,r._key);throw new Yt(_t.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${I_(r)}.`)}function Vz(e,t){if(!Array.isArray(e)||e.length===0)throw new Yt(_t.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function eae(e,t){const r=function(n,i){for(const o of n)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(n){switch(n){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Yt(_t.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Yt(_t.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class tae{convertValue(t,r="none"){switch(np(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ti(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(ap(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw zr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const a={};return bp(t,(n,i)=>{a[n]=this.convertValue(i,r)}),a}convertVectorValue(t){var a,n,i;const r=(i=(n=(a=t.fields)==null?void 0:a[x5].arrayValue)==null?void 0:n.values)==null?void 0:i.map(o=>ti(o.doubleValue));return new lf(r)}convertGeoPoint(t){return new of(ti(t.latitude),ti(t.longitude))}convertArray(t,r){return(t.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(t,r){switch(r){case"previous":const a=P_(t);return a==null?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(V2(t));default:return null}}convertTimestamp(t){const r=rp(t);return new dr(r.seconds,r.nanos)}convertDocumentKey(t,r){const a=Dn.fromString(t);un(vre(a),9688,{name:t});const n=new Vb(a.get(1),a.get(3)),i=new br(a.popFirst(5));return n.isEqual(r)||Z0(`Document ${i} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L8(e,t,r){let a;return a=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,a}class rb{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class zm extends P8{constructor(t,r,a,n,i,o){super(t,r,a,n,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new d2(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const a=this._document.data.field(X_("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Yt(_t.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=zm._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}zm._jsonSchemaVersion="firestore/documentSnapshot/1.0",zm._jsonSchema={type:ki("string",zm._jsonSchemaVersion),bundleSource:ki("string","DocumentSnapshot"),bundleName:ki("string"),bundle:ki("string")};class d2 extends zm{data(t={}){return super.data(t)}}class $m{constructor(t,r,a,n){this._firestore=t,this._userDataWriter=r,this._snapshot=n,this.metadata=new rb(n.hasPendingWrites,n.fromCache),this.query=a}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(a=>{t.call(r,new d2(this._firestore,this._userDataWriter,a.key,a,new rb(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Yt(_t.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(n,i){if(n._snapshot.oldDocs.isEmpty()){let o=0;return n._snapshot.docChanges.map(l=>{const c=new d2(n._firestore,n._userDataWriter,l.doc.key,l.doc,new rb(n._snapshot.mutatedKeys.has(l.doc.key),n._snapshot.fromCache),n.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new d2(n._firestore,n._userDataWriter,l.doc.key,l.doc,new rb(n._snapshot.mutatedKeys.has(l.doc.key),n._snapshot.fromCache),n.query.converter);let d=-1,u=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),u=o.indexOf(l.doc.key)),{type:Q2e(l.type),doc:c,oldIndex:d,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Yt(_t.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=$m._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=B_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],a=[],n=[];return this.docs.forEach(i=>{i._document!==null&&(r.push(i._document),a.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),n.push(i.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Q2e(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(e){e=Nl(e,hs);const t=Nl(e.firestore,mf);return I2e(D1(t),e._key).then(r=>rae(t,e,r))}$m._jsonSchemaVersion="firestore/querySnapshot/1.0",$m._jsonSchema={type:ki("string",$m._jsonSchemaVersion),bundleSource:ki("string","QuerySnapshot"),bundleName:ki("string"),bundle:ki("string")};class M8 extends tae{constructor(t){super(),this.firestore=t}convertBytes(t){return new ld(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new hs(this.firestore,null,r)}}function Nr(e){e=Nl(e,bf);const t=Nl(e.firestore,mf),r=D1(t),a=new M8(t);return Jre(e._query),O2e(r,e._query).then(n=>new $m(t,a,e,n))}function Us(e,t,r){e=Nl(e,hs);const a=Nl(e.firestore,mf),n=L8(e.converter,t,r);return M1(a,[B8(R1(a),"setDoc",e._key,n,e.converter!==null,r).toMutation(e._key,Vl.none())])}function zi(e,t,r,...a){e=Nl(e,hs);const n=Nl(e.firestore,mf),i=R1(n);let o;return o=typeof(t=La(t))=="string"||t instanceof F1?qre(i,"updateDoc",e._key,t,r,a):Gre(i,"updateDoc",e._key,t),M1(n,[o.toMutation(e._key,Vl.exists(!0))])}function Ua(e){return M1(Nl(e.firestore,mf),[new Q_(e._key,Vl.none())])}function Kr(e,t){const r=Nl(e.firestore,mf),a=$t(e),n=L8(e.converter,t);return M1(r,[B8(R1(e.firestore),"addDoc",a._key,n,e.converter!==null,{}).toMutation(a._key,Vl.exists(!1))]).then(()=>a)}function rr(e,...t){var c,d,u;e=La(e);let r={includeMetadataChanges:!1,source:"default"},a=0;typeof t[a]!="object"||zz(t[a])||(r=t[a++]);const n={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(zz(t[a])){const f=t[a];t[a]=(c=f.next)==null?void 0:c.bind(f),t[a+1]=(d=f.error)==null?void 0:d.bind(f),t[a+2]=(u=f.complete)==null?void 0:u.bind(f)}let i,o,l;if(e instanceof hs)o=Nl(e.firestore,mf),l=R_(e._key.path),i={next:f=>{t[a]&&t[a](rae(o,e,f))},error:t[a+1],complete:t[a+2]};else{const f=Nl(e,bf);o=Nl(f.firestore,mf),l=f._query;const A=new M8(o);i={next:m=>{t[a]&&t[a](new $m(o,A,f,m))},error:t[a+1],complete:t[a+2]},Jre(e._query)}return function(A,m,g,x){const v=new _8(x),y=new j8(m,v,g);return A.asyncQueue.enqueueAndForget(async()=>N8(await j5(A),y)),()=>{v.Nu(),A.asyncQueue.enqueueAndForget(async()=>E8(await j5(A),y))}}(D1(o),l,n,i)}function M1(e,t){return function(a,n){const i=new U0;return a.asyncQueue.enqueueAndForget(async()=>b2e(await B2e(a),n,i)),i.promise}(D1(e),t)}function rae(e,t,r){const a=r.docs.get(t._key),n=new M8(e);return new zm(e,n,t._key,a,new rb(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aae{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=R1(t)}set(t,r,a){this._verifyNotCommitted();const n=SB(t,this._firestore),i=L8(n.converter,r,a),o=B8(this._dataReader,"WriteBatch.set",n._key,i,n.converter!==null,a);return this._mutations.push(o.toMutation(n._key,Vl.none())),this}update(t,r,a,...n){this._verifyNotCommitted();const i=SB(t,this._firestore);let o;return o=typeof(r=La(r))=="string"||r instanceof F1?qre(this._dataReader,"WriteBatch.update",i._key,r,a,n):Gre(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(o.toMutation(i._key,Vl.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=SB(t,this._firestore);return this._mutations=this._mutations.concat(new Q_(r._key,Vl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Yt(_t.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function SB(e,t){if((e=La(e)).firestore!==t)throw new Yt(_t.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Da(){return new I8("serverTimestamp")}function nae(...e){return new O8("arrayUnion",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(e){return D1(e=Nl(e,mf)),new aae(e,t=>M1(e,t))}(function(t,r=!0){(function(n){T1=n})(vx),Dh(new ff("firestore",(a,{instanceIdentifier:n,options:i})=>{const o=a.getProvider("app").getImmediate(),l=new mf(new H1e(a.getProvider("auth-internal")),new $1e(o,a.getProvider("app-check-internal")),function(d,u){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Yt(_t.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vb(d.options.projectId,u)}(o,n),o);return i={useFetchStreams:r,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),pd(KQ,WQ,t),pd(KQ,WQ,"esm2020")})();const Jb=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:tae,Bytes:ld,CollectionReference:H0,DocumentReference:hs,DocumentSnapshot:zm,FieldPath:F1,FieldValue:P1,Firestore:mf,FirestoreError:Yt,GeoPoint:of,Query:bf,QueryCompositeFilterConstraint:Y_,QueryConstraint:XN,QueryDocumentSnapshot:d2,QueryFieldFilterConstraint:YN,QueryLimitConstraint:Z_,QueryOrderByConstraint:J_,QuerySnapshot:$m,QueryStartAtConstraint:e4,SnapshotMetadata:rb,Timestamp:dr,VectorValue:lf,WriteBatch:aae,_AutoId:B_,_ByteString:Ao,_DatabaseId:Vb,_DocumentKey:br,_EmptyAuthCredentialsProvider:Bte,_FieldPath:lo,_cast:Nl,_logWarn:ex,_validateIsNotUsedTogether:Ote,addDoc:Kr,arrayUnion:nae,collection:ut,connectFirestoreEmulator:zre,deleteDoc:Ua,doc:$t,ensureFirestoreConfigured:D1,executeWrite:M1,getDoc:tA,getDocs:Nr,getFirestore:T8,limit:El,onSnapshot:rr,orderBy:Gt,query:jt,serverTimestamp:Da,setDoc:Us,setLogLevel:M1e,startAfter:Zre,updateDoc:zi,where:Kt,writeBatch:wp},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sae="firebasestorage.googleapis.com",iae="storageBucket",z2e=120*1e3,$2e=600*1e3,V2e=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends vf{constructor(t,r,a=0){super(_B(t),`Firebase Storage: ${r} (${_B(t)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,os.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return _B(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Vn;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Vn||(Vn={}));function _B(e){return"storage/"+e}function U8(){const e="An unknown error occurred, please check the error payload for server response.";return new os(Vn.UNKNOWN,e)}function G2e(e){return new os(Vn.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function q2e(e){return new os(Vn.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function K2e(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new os(Vn.UNAUTHENTICATED,e)}function W2e(){return new os(Vn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function X2e(e){return new os(Vn.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function oae(){return new os(Vn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lae(){return new os(Vn.CANCELED,"User canceled the upload/download.")}function Y2e(e){return new os(Vn.INVALID_URL,"Invalid URL '"+e+"'.")}function J2e(e){return new os(Vn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Z2e(){return new os(Vn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+iae+"' property when initializing the app?")}function cae(){return new os(Vn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function eNe(){return new os(Vn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function tNe(){return new os(Vn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function rNe(e){return new os(Vn.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function S5(e){return new os(Vn.INVALID_ARGUMENT,e)}function dae(){return new os(Vn.APP_DELETED,"The Firebase app was deleted.")}function uae(e){return new os(Vn.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function u2(e,t){return new os(Vn.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function ew(e){throw new os(Vn.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let a;try{a=vl.makeFromUrl(t,r)}catch{return new vl(t,"")}if(a.path==="")return a;throw J2e(t)}static makeFromUrl(t,r){let a=null;const n="([A-Za-z0-9.\\-_]+)";function i(B){B.path.charAt(B.path.length-1)==="/"&&(B.path_=B.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+n+o,"i"),c={bucket:1,path:3};function d(B){B.path_=decodeURIComponent(B.path)}const u="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${u}/b/${n}/o${A}`,"i"),g={bucket:1,path:3},x=r===sae?"(?:storage.googleapis.com|storage.cloud.google.com)":r,v="([^?#]*)",y=new RegExp(`^https?://${x}/${n}/${v}`,"i"),E=[{regex:l,indices:c,postModify:i},{regex:m,indices:g,postModify:d},{regex:y,indices:{bucket:1,path:2},postModify:d}];for(let B=0;B<E.length;B++){const _=E[B],I=_.regex.exec(t);if(I){const j=I[_.indices.bucket];let k=I[_.indices.path];k||(k=""),a=new vl(j,k),_.postModify(a);break}}if(a==null)throw Y2e(t);return a}}class aNe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nNe(e,t,r){let a=1,n=null,i=null,o=!1,l=0;function c(){return l===2}let d=!1;function u(...v){d||(d=!0,t.apply(null,v))}function f(v){n=setTimeout(()=>{n=null,e(m,c())},v)}function A(){i&&clearTimeout(i)}function m(v,...y){if(d){A();return}if(v){A(),u.call(null,v,...y);return}if(c()||o){A(),u.call(null,v,...y);return}a<64&&(a*=2);let E;l===1?(l=2,E=0):E=(a+Math.random())*1e3,f(E)}let g=!1;function x(v){g||(g=!0,A(),!d&&(n!==null?(v||(l=2),clearTimeout(n),f(0)):v||(l=1)))}return f(0),i=setTimeout(()=>{o=!0,x(!0)},r),x}function sNe(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iNe(e){return e!==void 0}function oNe(e){return typeof e=="function"}function lNe(e){return typeof e=="object"&&!Array.isArray(e)}function t4(e){return typeof e=="string"||e instanceof String}function Gz(e){return H8()&&e instanceof Blob}function H8(){return typeof Blob<"u"}function $D(e,t,r,a){if(a<t)throw S5(`Invalid value for '${e}'. Expected ${t} or greater.`);if(a>r)throw S5(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(e,t,r){let a=t;return r==null&&(a=`https://${t}`),`${r}://${a}/v0${e}`}function fae(e){const t=encodeURIComponent;let r="?";for(const a in e)if(e.hasOwnProperty(a)){const n=t(a)+"="+t(e[a]);r=r+n+"&"}return r=r.slice(0,-1),r}var Dg;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Dg||(Dg={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hae(e,t){const r=e>=500&&e<600,n=[408,429].indexOf(e)!==-1,i=t.indexOf(e)!==-1;return r||n||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cNe{constructor(t,r,a,n,i,o,l,c,d,u,f,A=!0,m=!1){this.url_=t,this.method_=r,this.headers_=a,this.body_=n,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=u,this.connectionFactory_=f,this.retry=A,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const t=(a,n)=>{if(n){a(!1,new $C(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Dg.NO_ERROR,c=i.getStatus();if(!l||hae(c,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===Dg.ABORT;a(!1,new $C(!1,null,u));return}const d=this.successCodes_.indexOf(c)!==-1;a(!0,new $C(d,i))})},r=(a,n)=>{const i=this.resolve_,o=this.reject_,l=n.connection;if(n.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());iNe(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=U8();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(n.canceled){const c=this.appDelete_?dae():lae();o(c)}else{const c=oae();o(c)}};this.canceled_?r(!1,new $C(!1,null,!0)):this.backoffId_=nNe(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&sNe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $C{constructor(t,r,a){this.wasSuccessCode=t,this.connection=r,this.canceled=!!a}}function dNe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function uNe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function fNe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function hNe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function ANe(e,t,r,a,n,i,o=!0,l=!1){const c=fae(e.urlParams),d=e.url+c,u=Object.assign({},e.headers);return fNe(u,t),dNe(u,r),uNe(u,i),hNe(u,a),new cNe(d,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mNe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function pNe(...e){const t=mNe();if(t!==void 0){const r=new t;for(let a=0;a<e.length;a++)r.append(e[a]);return r.getBlob()}else{if(H8())return new Blob(e);throw new os(Vn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function gNe(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xNe(e){if(typeof atob>"u")throw rNe("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class TB{constructor(t,r){this.data=t,this.contentType=r||null}}function Aae(e,t){switch(e){case tf.RAW:return new TB(mae(t));case tf.BASE64:case tf.BASE64URL:return new TB(pae(e,t));case tf.DATA_URL:return new TB(bNe(t),yNe(t))}throw U8()}function mae(e){const t=[];for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);if(a<=127)t.push(a);else if(a<=2047)t.push(192|a>>6,128|a&63);else if((a&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const i=a,o=e.charCodeAt(++r);a=65536|(i&1023)<<10|o&1023,t.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63)}else(a&64512)===56320?t.push(239,191,189):t.push(224|a>>12,128|a>>6&63,128|a&63)}return new Uint8Array(t)}function vNe(e){let t;try{t=decodeURIComponent(e)}catch{throw u2(tf.DATA_URL,"Malformed data URL.")}return mae(t)}function pae(e,t){switch(e){case tf.BASE64:{const n=t.indexOf("-")!==-1,i=t.indexOf("_")!==-1;if(n||i)throw u2(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case tf.BASE64URL:{const n=t.indexOf("+")!==-1,i=t.indexOf("/")!==-1;if(n||i)throw u2(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=xNe(t)}catch(n){throw n.message.includes("polyfill")?n:u2(e,"Invalid character found")}const a=new Uint8Array(r.length);for(let n=0;n<r.length;n++)a[n]=r.charCodeAt(n);return a}class gae{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw u2(tf.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const a=r[1]||null;a!=null&&(this.base64=wNe(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-7):a),this.rest=t.substring(t.indexOf(",")+1)}}function bNe(e){const t=new gae(e);return t.base64?pae(tf.BASE64,t.rest):vNe(t.rest)}function yNe(e){return new gae(e).contentType}function wNe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(t,r){let a=0,n="";Gz(t)?(this.data_=t,a=t.size,n=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),a=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),a=t.length),this.size_=a,this.type_=n}size(){return this.size_}type(){return this.type_}slice(t,r){if(Gz(this.data_)){const a=this.data_,n=gNe(a,t,r);return n===null?null:new Ah(n)}else{const a=new Uint8Array(this.data_.buffer,t,r-t);return new Ah(a,!0)}}static getBlob(...t){if(H8()){const r=t.map(a=>a instanceof Ah?a.data_:a);return new Ah(pNe.apply(null,r))}else{const r=t.map(o=>t4(o)?Aae(tf.RAW,o).data:o.data_);let a=0;r.forEach(o=>{a+=o.byteLength});const n=new Uint8Array(a);let i=0;return r.forEach(o=>{for(let l=0;l<o.length;l++)n[i++]=o[l]}),new Ah(n,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q8(e){let t;try{t=JSON.parse(e)}catch{return null}return lNe(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NNe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function ENe(e,t){const r=t.split("/").filter(a=>a.length>0).join("/");return e.length===0?r:e+"/"+r}function xae(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CNe(e,t){return t}class Pl{constructor(t,r,a,n){this.server=t,this.local=r||t,this.writable=!!a,this.xform=n||CNe}}let VC=null;function jNe(e){return!t4(e)||e.length<2?e:xae(e)}function z8(){if(VC)return VC;const e=[];e.push(new Pl("bucket")),e.push(new Pl("generation")),e.push(new Pl("metageneration")),e.push(new Pl("name","fullPath",!0));function t(i,o){return jNe(o)}const r=new Pl("name");r.xform=t,e.push(r);function a(i,o){return o!==void 0?Number(o):o}const n=new Pl("size");return n.xform=a,e.push(n),e.push(new Pl("timeCreated")),e.push(new Pl("updated")),e.push(new Pl("md5Hash",null,!0)),e.push(new Pl("cacheControl",null,!0)),e.push(new Pl("contentDisposition",null,!0)),e.push(new Pl("contentEncoding",null,!0)),e.push(new Pl("contentLanguage",null,!0)),e.push(new Pl("contentType",null,!0)),e.push(new Pl("metadata","customMetadata",!0)),VC=e,VC}function kNe(e,t){function r(){const a=e.bucket,n=e.fullPath,i=new vl(a,n);return t._makeStorageReference(i)}Object.defineProperty(e,"ref",{get:r})}function SNe(e,t,r){const a={};a.type="file";const n=r.length;for(let i=0;i<n;i++){const o=r[i];a[o.local]=o.xform(a,t[o.server])}return kNe(a,e),a}function vae(e,t,r){const a=Q8(t);return a===null?null:SNe(e,a,r)}function _Ne(e,t,r,a){const n=Q8(t);if(n===null||!t4(n.downloadTokens))return null;const i=n.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(d=>{const u=e.bucket,f=e.fullPath,A="/b/"+o(u)+"/o/"+o(f),m=Ex(A,r,a),g=fae({alt:"media",token:d});return m+g})[0]}function bae(e,t){const r={},a=t.length;for(let n=0;n<a;n++){const i=t[n];i.writable&&(r[i.server]=e[i.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz="prefixes",Kz="items";function TNe(e,t,r){const a={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[qz])for(const n of r[qz]){const i=n.replace(/\/$/,""),o=e._makeStorageReference(new vl(t,i));a.prefixes.push(o)}if(r[Kz])for(const n of r[Kz]){const i=e._makeStorageReference(new vl(t,n.name));a.items.push(i)}return a}function BNe(e,t,r){const a=Q8(r);return a===null?null:TNe(e,t,a)}class Np{constructor(t,r,a,n){this.url=t,this.method=r,this.handler=a,this.timeout=n,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(e){if(!e)throw U8()}function $8(e,t){function r(a,n){const i=vae(e,n,t);return Sh(i!==null),i}return r}function INe(e,t){function r(a,n){const i=BNe(e,t,n);return Sh(i!==null),i}return r}function ONe(e,t){function r(a,n){const i=vae(e,n,t);return Sh(i!==null),_Ne(i,n,e.host,e._protocol)}return r}function U1(e){function t(r,a){let n;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?n=W2e():n=K2e():r.getStatus()===402?n=q2e(e.bucket):r.getStatus()===403?n=X2e(e.path):n=a,n.status=r.getStatus(),n.serverResponse=a.serverResponse,n}return t}function V8(e){const t=U1(e);function r(a,n){let i=t(a,n);return a.getStatus()===404&&(i=G2e(e.path)),i.serverResponse=n.serverResponse,i}return r}function DNe(e,t,r){const a=t.fullServerUrl(),n=Ex(a,e.host,e._protocol),i="GET",o=e.maxOperationRetryTime,l=new Np(n,i,$8(e,r),o);return l.errorHandler=V8(t),l}function FNe(e,t,r,a,n){const i={};t.isRoot?i.prefix="":i.prefix=t.path+"/",r.length>0&&(i.delimiter=r),a&&(i.pageToken=a),n&&(i.maxResults=n);const o=t.bucketOnlyServerUrl(),l=Ex(o,e.host,e._protocol),c="GET",d=e.maxOperationRetryTime,u=new Np(l,c,INe(e,t.bucket),d);return u.urlParams=i,u.errorHandler=U1(t),u}function PNe(e,t,r){const a=t.fullServerUrl(),n=Ex(a,e.host,e._protocol),i="GET",o=e.maxOperationRetryTime,l=new Np(n,i,ONe(e,r),o);return l.errorHandler=V8(t),l}function RNe(e,t){const r=t.fullServerUrl(),a=Ex(r,e.host,e._protocol),n="DELETE",i=e.maxOperationRetryTime;function o(c,d){}const l=new Np(a,n,o,i);return l.successCodes=[200,204],l.errorHandler=V8(t),l}function LNe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function yae(e,t,r){const a=Object.assign({},r);return a.fullPath=e.path,a.size=t.size(),a.contentType||(a.contentType=LNe(null,t)),a}function wae(e,t,r,a,n){const i=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let E="";for(let B=0;B<2;B++)E=E+Math.random().toString().slice(2);return E}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const d=yae(t,a,n),u=bae(d,r),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,A=`\r
--`+c+"--",m=Ah.getBlob(f,a,A);if(m===null)throw cae();const g={name:d.fullPath},x=Ex(i,e.host,e._protocol),v="POST",y=e.maxUploadRetryTime,N=new Np(x,v,$8(e,r),y);return N.urlParams=g,N.headers=o,N.body=m.uploadData(),N.errorHandler=U1(t),N}class _5{constructor(t,r,a,n){this.current=t,this.total=r,this.finalized=!!a,this.metadata=n||null}}function G8(e,t){let r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch{Sh(!1)}return Sh(!!r&&(t||["active"]).indexOf(r)!==-1),r}function MNe(e,t,r,a,n){const i=t.bucketOnlyServerUrl(),o=yae(t,a,n),l={name:o.fullPath},c=Ex(i,e.host,e._protocol),d="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${a.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=bae(o,r),A=e.maxUploadRetryTime;function m(x){G8(x);let v;try{v=x.getResponseHeader("X-Goog-Upload-URL")}catch{Sh(!1)}return Sh(t4(v)),v}const g=new Np(c,d,m,A);return g.urlParams=l,g.headers=u,g.body=f,g.errorHandler=U1(t),g}function UNe(e,t,r,a){const n={"X-Goog-Upload-Command":"query"};function i(d){const u=G8(d,["active","final"]);let f=null;try{f=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Sh(!1)}f||Sh(!1);const A=Number(f);return Sh(!isNaN(A)),new _5(A,a.size(),u==="final")}const o="POST",l=e.maxUploadRetryTime,c=new Np(r,o,i,l);return c.headers=n,c.errorHandler=U1(t),c}const Wz=256*1024;function HNe(e,t,r,a,n,i,o,l){const c=new _5(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=a.size()),a.size()!==c.total)throw eNe();const d=c.total-c.current;let u=d;n>0&&(u=Math.min(u,n));const f=c.current,A=f+u;let m="";u===0?m="finalize":d===u?m="upload, finalize":m="upload";const g={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${c.current}`},x=a.slice(f,A);if(x===null)throw cae();function v(B,_){const I=G8(B,["active","final"]),j=c.current+u,k=a.size();let T;return I==="final"?T=$8(t,i)(B,_):T=null,new _5(j,k,I==="final",T)}const y="POST",N=t.maxUploadRetryTime,E=new Np(r,y,v,N);return E.headers=g,E.body=x.uploadData(),E.progressCallback=l||null,E.errorHandler=U1(e),E}const Ml={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function BB(e){switch(e){case"running":case"pausing":case"canceling":return Ml.RUNNING;case"paused":return Ml.PAUSED;case"success":return Ml.SUCCESS;case"canceled":return Ml.CANCELED;case"error":return Ml.ERROR;default:return Ml.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QNe{constructor(t,r,a){if(oNe(t)||r!=null||a!=null)this.next=t,this.error=r??void 0,this.complete=a??void 0;else{const i=t;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class zNe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Dg.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Dg.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Dg.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,a,n,i){if(this.sent_)throw ew("cannot .send() more than once");if(mA(t)&&a&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ew("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ew("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ew("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ew("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class $Ne extends zNe{initXhr(){this.xhr_.responseType="text"}}function S0(){return new $Ne}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nae{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,r,a=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=r,this._metadata=a,this._mappings=z8(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=n=>{if(this._request=void 0,this._chunkMultiplier=1,n._codeEquals(Vn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(hae(n.status,[]))if(i)n=oae();else{this.sleepTime=Math.max(this.sleepTime*2,V2e),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=n,this._transition("error")}},this._metadataErrorHandler=n=>{this._request=void 0,n._codeEquals(Vn.CANCELED)?this.completeTransitions_():(this._error=n,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((n,i)=>{this._resolve=n,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return r=>this._updateProgress(t+r)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,a])=>{switch(this._state){case"running":t(r,a);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,r)=>{const a=MNe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),n=this._ref.storage._makeRequest(a,S0,t,r);this._request=n,n.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((r,a)=>{const n=UNe(this._ref.storage,this._ref._location,t,this._blob),i=this._ref.storage._makeRequest(n,S0,r,a);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=Wz*this._chunkMultiplier,r=new _5(this._transferred,this._blob.size()),a=this._uploadUrl;this._resolveToken((n,i)=>{let o;try{o=HNe(this._ref._location,this._ref.storage,a,this._blob,t,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(o,S0,n,i,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Wz*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,r)=>{const a=DNe(this._ref.storage,this._ref._location,this._mappings),n=this._ref.storage._makeRequest(a,S0,t,r);this._request=n,n.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,r)=>{const a=wae(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),n=this._ref.storage._makeRequest(a,S0,t,r);this._request=n,n.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const r=this._transferred;this._transferred=t,this._transferred!==r&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=t,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=lae(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=BB(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,r,a,n){const i=new QNe(r||void 0,a||void 0,n||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(t,r){return this._promise.then(t,r)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const r=this._observers.indexOf(t);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(BB(this._state)){case Ml.SUCCESS:mv(this._resolve.bind(null,this.snapshot))();break;case Ml.CANCELED:case Ml.ERROR:const r=this._reject;mv(r.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(BB(this._state)){case Ml.RUNNING:case Ml.PAUSED:t.next&&mv(t.next.bind(t,this.snapshot))();break;case Ml.SUCCESS:t.complete&&mv(t.complete.bind(t))();break;case Ml.CANCELED:case Ml.ERROR:t.error&&mv(t.error.bind(t,this._error))();break;default:t.error&&mv(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(t,r){this._service=t,r instanceof vl?this._location=r:this._location=vl.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new rx(t,r)}get root(){const t=new vl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xae(this._location.path)}get storage(){return this._service}get parent(){const t=NNe(this._location.path);if(t===null)return null;const r=new vl(this._location.bucket,t);return new rx(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw uae(t)}}function VNe(e,t,r){e._throwIfRoot("uploadBytes");const a=wae(e.storage,e._location,z8(),new Ah(t,!0),r);return e.storage.makeRequestWithTokens(a,S0).then(n=>({metadata:n,ref:e}))}function GNe(e,t,r){return e._throwIfRoot("uploadBytesResumable"),new Nae(e,new Ah(t),r)}function qNe(e){const t={prefixes:[],items:[]};return Eae(e,t).then(()=>t)}async function Eae(e,t,r){const n=await KNe(e,{pageToken:r});t.prefixes.push(...n.prefixes),t.items.push(...n.items),n.nextPageToken!=null&&await Eae(e,t,n.nextPageToken)}function KNe(e,t){t!=null&&typeof t.maxResults=="number"&&$D("options.maxResults",1,1e3,t.maxResults);const r=t||{},a=FNe(e.storage,e._location,"/",r.pageToken,r.maxResults);return e.storage.makeRequestWithTokens(a,S0)}function WNe(e){e._throwIfRoot("getDownloadURL");const t=PNe(e.storage,e._location,z8());return e.storage.makeRequestWithTokens(t,S0).then(r=>{if(r===null)throw tNe();return r})}function XNe(e){e._throwIfRoot("deleteObject");const t=RNe(e.storage,e._location);return e.storage.makeRequestWithTokens(t,S0)}function YNe(e,t){const r=ENe(e._location.path,t),a=new vl(e._location.bucket,r);return new rx(e.storage,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JNe(e){return/^[A-Za-z]+:\/\//.test(e)}function ZNe(e,t){return new rx(e,t)}function Cae(e,t){if(e instanceof q8){const r=e;if(r._bucket==null)throw Z2e();const a=new rx(r,r._bucket);return t!=null?Cae(a,t):a}else return t!==void 0?YNe(e,t):e}function eEe(e,t){if(t&&JNe(t)){if(e instanceof q8)return ZNe(e,t);throw S5("To use ref(service, url), the first argument must be a Storage instance.")}else return Cae(e,t)}function Xz(e,t){const r=t==null?void 0:t[iae];return r==null?null:vl.makeFromBucketSpec(r,e)}function tEe(e,t,r,a={}){e.host=`${t}:${r}`;const n=mA(t);n&&(N_(`https://${e.host}/b`),E_("Storage",!0)),e._isUsingEmulator=!0,e._protocol=n?"https":"http";const{mockUserToken:i}=a;i&&(e._overrideAuthToken=typeof i=="string"?i:Cee(i,e.app.options.projectId))}class q8{constructor(t,r,a,n,i,o=!1){this.app=t,this._authProvider=r,this._appCheckProvider=a,this._url=n,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=sae,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=z2e,this._maxUploadRetryTime=$2e,this._requests=new Set,n!=null?this._bucket=vl.makeFromBucketSpec(n,this._host):this._bucket=Xz(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=vl.makeFromBucketSpec(this._url,t):this._bucket=Xz(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){$D("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){$D("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(od(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new rx(this,t)}_makeRequest(t,r,a,n,i=!0){if(this._deleted)return new aNe(dae());{const o=ANe(t,this._appId,a,n,r,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,r){const[a,n]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,a,n).getPromise()}}const Yz="@firebase/storage",Jz="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jae="storage";function H1(e,t,r){return e=La(e),VNe(e,t,r)}function K8(e,t,r){return e=La(e),GNe(e,t,r)}function kae(e){return e=La(e),qNe(e)}function gA(e){return e=La(e),WNe(e)}function r4(e){return e=La(e),XNe(e)}function vu(e,t){return e=La(e),eEe(e,t)}function a4(e=HN(),t){e=La(e);const a=xx(e,jae).getImmediate({identifier:t}),n=UR("storage");return n&&Sae(a,...n),a}function Sae(e,t,r,a={}){tEe(e,t,r,a)}function rEe(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),n=e.getProvider("app-check-internal");return new q8(r,a,n,t,vx)}function aEe(){Dh(new ff(jae,rEe,"PUBLIC").setMultipleInstances(!0)),pd(Yz,Jz,""),pd(Yz,Jz,"esm2020")}aEe();const nEe=Object.freeze(Object.defineProperty({__proto__:null,StorageError:os,get StorageErrorCode(){return Vn},StringFormat:tf,_FbsBlob:Ah,_Location:vl,_TaskState:Ml,_UploadTask:Nae,_dataFromString:Aae,_invalidArgument:S5,_invalidRootOperation:uae,connectStorageEmulator:Sae,deleteObject:r4,getDownloadURL:gA,getStorage:a4,listAll:kae,ref:vu,uploadBytes:H1,uploadBytesResumable:K8},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sEe="type.googleapis.com/google.protobuf.Int64Value",iEe="type.googleapis.com/google.protobuf.UInt64Value";function _ae(e,t){const r={};for(const a in e)e.hasOwnProperty(a)&&(r[a]=t(e[a]));return r}function T5(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>T5(t));if(typeof e=="function"||typeof e=="object")return _ae(e,t=>T5(t));throw new Error("Data cannot be encoded in JSON: "+e)}function Zb(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case sEe:case iEe:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>Zb(t)):typeof e=="function"||typeof e=="object"?_ae(e,t=>Zb(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W8="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zz={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class wc extends vf{constructor(t,r,a){super(`${W8}/${t}`,r||""),this.details=a,Object.setPrototypeOf(this,wc.prototype)}}function oEe(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function B5(e,t){let r=oEe(e),a=r,n;try{const i=t&&t.error;if(i){const o=i.status;if(typeof o=="string"){if(!Zz[o])return new wc("internal","internal");r=Zz[o],a=o}const l=i.message;typeof l=="string"&&(a=l),n=i.details,n!==void 0&&(n=Zb(n))}}catch{}return r==="ok"?null:new wc(r,a,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lEe{constructor(t,r,a,n){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,od(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=a.getImmediate({optional:!0}),this.auth||r.get().then(i=>this.auth=i,()=>{}),this.messaging||a.get().then(i=>this.messaging=i,()=>{}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),a=await this.getMessagingToken(),n=await this.getAppCheckToken(t);return{authToken:r,messagingToken:a,appCheckToken:n}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="us-central1",cEe=/^data: (.*?)(?:\n|$)/;function dEe(e){let t=null;return{promise:new Promise((r,a)=>{t=setTimeout(()=>{a(new wc("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class uEe{constructor(t,r,a,n,i=VD,o=(...l)=>fetch(...l)){this.app=t,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new lEe(t,r,a,n),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(i);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=VD}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function fEe(e,t,r){const a=mA(t);e.emulatorOrigin=`http${a?"s":""}://${t}:${r}`,a&&(N_(e.emulatorOrigin),E_("Functions",!0))}function hEe(e,t,r){const a=n=>mEe(e,t,n,{});return a.stream=(n,i)=>gEe(e,t,n,i),a}async function AEe(e,t,r,a){r["Content-Type"]="application/json";let n;try{n=await a(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await n.json()}catch{}return{status:n.status,json:i}}async function Tae(e,t){const r={},a=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return a.authToken&&(r.Authorization="Bearer "+a.authToken),a.messagingToken&&(r["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=a.appCheckToken),r}function mEe(e,t,r,a){const n=e._url(t);return pEe(e,n,r,a)}async function pEe(e,t,r,a){r=T5(r);const n={data:r},i=await Tae(e,a),o=a.timeout||7e4,l=dEe(o),c=await Promise.race([AEe(t,n,i,e.fetchImpl),l.promise,e.cancelAllRequests]);if(l.cancel(),!c)throw new wc("cancelled","Firebase Functions instance was deleted.");const d=B5(c.status,c.json);if(d)throw d;if(!c.json)throw new wc("internal","Response is not valid JSON object.");let u=c.json.data;if(typeof u>"u"&&(u=c.json.result),typeof u>"u")throw new wc("internal","Response is missing data field.");return{data:Zb(u)}}function gEe(e,t,r,a){const n=e._url(t);return xEe(e,n,r,a||{})}async function xEe(e,t,r,a){var A;r=T5(r);const n={data:r},i=await Tae(e,a);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(n),headers:i,signal:a==null?void 0:a.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const x=new wc("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const g=B5(0,null);return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}let l,c;const d=new Promise((m,g)=>{l=m,c=g});(A=a==null?void 0:a.signal)==null||A.addEventListener("abort",()=>{const m=new wc("cancelled","Request was cancelled.");c(m)});const u=o.body.getReader(),f=vEe(u,l,c,a==null?void 0:a.signal);return{stream:{[Symbol.asyncIterator](){const m=f.getReader();return{async next(){const{value:g,done:x}=await m.read();return{value:g,done:x}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:d}}function vEe(e,t,r,a){const n=(o,l)=>{const c=o.match(cEe);if(!c)return;const d=c[1];try{const u=JSON.parse(d);if("result"in u){t(Zb(u.result));return}if("message"in u){l.enqueue(Zb(u.message));return}if("error"in u){const f=B5(0,u);l.error(f),r(f);return}}catch(u){if(u instanceof wc){l.error(u),r(u);return}}},i=new TextDecoder;return new ReadableStream({start(o){let l="";return c();async function c(){if(a!=null&&a.aborted){const d=new wc("cancelled","Request was cancelled");return o.error(d),r(d),Promise.resolve()}try{const{value:d,done:u}=await e.read();if(u){l.trim()&&n(l.trim(),o),o.close();return}if(a!=null&&a.aborted){const A=new wc("cancelled","Request was cancelled");o.error(A),r(A),await e.cancel();return}l+=i.decode(d,{stream:!0});const f=l.split(`
`);l=f.pop()||"";for(const A of f)A.trim()&&n(A.trim(),o);return c()}catch(d){const u=d instanceof wc?d:B5(0,null);o.error(u),r(u)}}},cancel(){return e.cancel()}})}const e$="@firebase/functions",t$="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bEe="auth-internal",yEe="app-check-internal",wEe="messaging-internal";function NEe(e){const t=(r,{instanceIdentifier:a})=>{const n=r.getProvider("app").getImmediate(),i=r.getProvider(bEe),o=r.getProvider(wEe),l=r.getProvider(yEe);return new uEe(n,i,o,l,a)};Dh(new ff(W8,t,"PUBLIC").setMultipleInstances(!0)),pd(e$,t$,e),pd(e$,t$,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(e=HN(),t=VD){const a=xx(La(e),W8).getImmediate({identifier:t}),n=UR("functions");return n&&EEe(a,...n),a}function EEe(e,t,r){fEe(La(e),t,r)}function cl(e,t,r){return hEe(La(e),t)}NEe();const pv={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyBX_n9qoSh0N2c1OAPurBAl6FC9ltX4tK0",VITE_FIREBASE_APP_ID:"1:978612067917:web:299137755ec80939d7c604",VITE_FIREBASE_AUTH_DOMAIN:"plania-clase.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"978612067917",VITE_FIREBASE_PROJECT_ID:"plania-clase",VITE_FIREBASE_STORAGE_BUCKET:"plania-clase.firebasestorage.app",VITE_GOOGLE_MAPS_API_KEY:"AIzaSyDjpSq97TvCxx7jIY7fEapTysmiZ1H30bg"},CEe={apiKey:"AIzaSyBX_n9qoSh0N2c1OAPurBAl6FC9ltX4tK0",authDomain:"plania-clase.firebaseapp.com",projectId:"plania-clase",storageBucket:"plania-clase.firebasestorage.app",messagingSenderId:"978612067917",appId:"1:978612067917:web:299137755ec80939d7c604"},Cx=zR(CEe),ln=dte(Cx),lr=T8(Cx),jx=a4(Cx),ax=k0(Cx,"us-central1");try{const e=(pv==null?void 0:pv.VITE_APPCHECK_SITE_KEY)||(pv==null?void 0:pv.VITE_RECAPTCHA_V3_SITE_KEY);e?F1e(Cx,{provider:new r8(e),isTokenAutoRefreshEnabled:!0}):console.warn("[AppCheck] Falta VITE_APPCHECK_SITE_KEY o VITE_RECAPTCHA_V3_SITE_KEY. Las funciones con App Check pueden fallar.")}catch{}const X8=Object.freeze(Object.defineProperty({__proto__:null,app:Cx,auth:ln,db:lr,functions:ax,storage:jx},Symbol.toStringTag,{value:"Module"})),jEe=async(e,t)=>{try{return(await Rve(ln,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},IB=async()=>{try{await Uve(ln)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},kEe=async e=>{try{await Pve(ln,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},Bae=async e=>{try{const t=$t(lr,"usuarios",e),r=await tA(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontró perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SEe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_Ee=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),r$=e=>{const t=_Ee(e);return t.charAt(0).toUpperCase()+t.slice(1)},Iae=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim(),TEe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BEe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IEe=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:o,...l},c)=>w.createElement("svg",{ref:c,...BEe,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:Iae("lucide",n),...!i&&!TEe(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,u])=>w.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=(e,t)=>{const r=w.forwardRef(({className:a,...n},i)=>w.createElement(IEe,{ref:i,iconNode:t,className:Iae(`lucide-${SEe(r$(e))}`,`lucide-${e}`,a),...n}));return r.displayName=r$(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OEe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],DEe=kt("activity",OEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FEe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],GC=kt("arrow-left",FEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PEe=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],REe=kt("arrow-up-down",PEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LEe=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],MEe=kt("award",LEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UEe=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],HEe=kt("bell-ring",UEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QEe=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],zEe=kt("bell",QEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Ee=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],VEe=kt("book-marked",$Ee);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GEe=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],qEe=kt("book-open-check",GEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KEe=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Rs=kt("book-open",KEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WEe=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],a$=kt("book",WEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XEe=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],YEe=kt("brain-circuit",XEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JEe=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],X2=kt("brain",JEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZEe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],e1=kt("briefcase",ZEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eCe=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],yb=kt("building-2",eCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tCe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],n$=kt("building",tCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rCe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Y8=kt("calculator",rCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aCe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],J8=kt("calendar-check",aCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nCe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ro=kt("calendar",nCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sCe=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],iCe=kt("camera",sCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oCe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],bl=kt("chart-column",oCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lCe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],cCe=kt("chart-line",lCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dCe=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],uCe=kt("chart-no-axes-column-increasing",dCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fCe=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],Oae=kt("chart-no-axes-column",fCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hCe=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],wb=kt("chart-pie",hCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ACe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Dae=kt("check",ACe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mCe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Sk=kt("chevron-down",mCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pCe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Y2=kt("chevron-left",pCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gCe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],n4=kt("chevron-right",gCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xCe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],jc=kt("circle-alert",xCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vCe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],JN=kt("circle-check-big",vCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bCe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],dn=kt("circle-check",bCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yCe=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],wCe=kt("circle-play",yCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NCe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],qC=kt("circle-plus",NCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ECe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Fae=kt("circle-question-mark",ECe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CCe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],mh=kt("circle-x",CCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jCe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kCe=kt("circle",jCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SCe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],Lw=kt("clipboard-check",SCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Ce=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],rA=kt("clipboard-list",_Ce);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TCe=[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],BCe=kt("clock-3",TCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ICe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],bc=kt("clock",ICe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OCe=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],s$=kt("cloud-upload",OCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DCe=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],FCe=kt("cog",DCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PCe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],pf=kt("download",PCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RCe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Fg=kt("external-link",RCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LCe=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],MCe=kt("eye-off",LCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UCe=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Pg=kt("eye",UCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HCe=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],QCe=kt("factory",HCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zCe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],GD=kt("file-check",zCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Ce=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],VCe=kt("file-down",$Ce);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GCe=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],i$=kt("file-pen",GCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qCe=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],KCe=kt("file-play",qCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WCe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],s4=kt("file-spreadsheet",WCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XCe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Lo=kt("file-text",XCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YCe=[["path",{d:"M15 2a2 2 0 0 1 1.414.586l4 4A2 2 0 0 1 21 8v7a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z",key:"1vo8kb"}],["path",{d:"M15 2v4a2 2 0 0 0 2 2h4",key:"sud9ri"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]],OB=kt("files",YCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JCe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],Pae=kt("film",JCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZCe=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M2 10h20",key:"1ir3d8"}]],eje=kt("folder-closed",ZCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tje=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],o$=kt("folder-open",tje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rje=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],aje=kt("folder",rje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nje=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ZN=kt("funnel",nje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sje=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],I5=kt("gauge",sje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ije=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],oje=kt("globe",ije);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lje=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],op=kt("graduation-cap",lje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cje=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],dje=kt("hash",cje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uje=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],fje=kt("heart",uje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hje=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],Rae=kt("hourglass",hje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aje=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],O5=kt("image",Aje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mje=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],pje=kt("info",mje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gje=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Lae=kt("layout-dashboard",gje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xje=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],i4=kt("layers",xje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vje=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],bje=kt("layout-grid",vje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yje=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],wje=kt("layout-list",yje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nje=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Eje=kt("lightbulb",Nje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cje=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],l$=kt("link-2",Cje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jje=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],D5=kt("link",jje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kje=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],Nb=kt("list-checks",kje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sje=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],_je=kt("list-ordered",Sje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tje=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],si=kt("loader-circle",Tje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bje=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mae=kt("mail",Bje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ije=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],J2=kt("map-pin",Ije);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oje=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Dje=kt("map",Oje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fje=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],Uae=kt("megaphone",Fje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pje=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Rje=kt("menu",Pje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lje=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Q1=kt("message-square",Lje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mje=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],c$=kt("notebook-pen",Mje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uje=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Hje=kt("palette",Uje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qje=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],ab=kt("paperclip",Qje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zje=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Z2=kt("pen-line",zje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $je=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],o4=kt("pencil",$je);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vje=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],Gje=kt("percent",Vje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qje=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Kje=kt("phone",qje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wje=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],qD=kt("pin",Wje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xje=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Si=kt("plus",Xje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yje=[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]],KD=kt("presentation",Yje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jje=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],Zje=kt("puzzle",Jje);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eke=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],_k=kt("refresh-ccw",eke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tke=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],_h=kt("refresh-cw",tke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rke=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],ake=kt("rocket",rke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nke=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],ske=kt("rotate-cw",nke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ike=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],oke=kt("route",ike);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lke=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],cke=kt("ruler",lke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dke=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],kl=kt("save",dke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uke=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Im=kt("school",uke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fke=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],d$=kt("scroll-text",fke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hke=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],z1=kt("search",hke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ake=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Z8=kt("send",Ake);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mke=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],eL=kt("settings",mke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pke=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],gke=kt("shield-check",pke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xke=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Rg=kt("sparkles",xke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vke=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],O0=kt("square-pen",vke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bke=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],WD=kt("square-plus",bke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yke=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Hae=kt("star",yke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wke=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Nke=kt("tag",wke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],t1=kt("target",Eke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cke=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ia=kt("trash-2",Cke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jke=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],F5=kt("trending-up",jke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kke=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],r1=kt("triangle-alert",kke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ske=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 16h.01",key:"plv8zi"}],["path",{d:"M22 7a1 1 0 0 0-1-1h-2a2 2 0 0 1-1.143-.359L13.143 2.36a2 2 0 0 0-2.286-.001L6.143 5.64A2 2 0 0 1 5 6H3a1 1 0 0 0-1 1v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2z",key:"1ogmi3"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["path",{d:"M6 16h.01",key:"1pmjb7"}],["circle",{cx:"12",cy:"10",r:"2",key:"1yojzk"}]],_ke=kt("university",Ske);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tke=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],kx=kt("upload",Tke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bke=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],u$=kt("user-cog",Bke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ike=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],f$=kt("user-minus",Ike);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oke=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],P5=kt("user-plus",Oke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dke=[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]],Fke=kt("user-round",Dke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pke=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Lg=kt("user",Pke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rke=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],Kv=kt("users-round",Rke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lke=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],_i=kt("users",Lke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mke=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],cd=kt("video",Mke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uke=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Qae=kt("wand-sparkles",Uke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hke=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],f2=kt("wrench",Hke);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qke=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ho=kt("x",Qke);var Tt=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(Tt||{}),sa=(e=>(e.EVALUACION="Evaluación",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedagógica",e))(sa||{}),mg=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Guía de Aprendizaje",e.RUBRICA="Rúbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(mg||{});const zke=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),$ke=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Hs,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 3.75H6A2.25 2.25 0 003.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0120.25 6v1.5m0 9V18A2.25 2.25 0 0118 20.25h-1.5m-9 0H6A2.25 2.25 0 013.75 18v-1.5M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),Hs="w-5 h-5",l4="w-16 h-16",tL=()=>s.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-32 h-32 object-contain"}),Vke=({className:e,...t})=>s.jsxs("svg",{className:e??"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",...t,children:[s.jsx("path",{d:"M9 18h6"}),s.jsx("path",{d:"M10 22h4"}),s.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),Gke=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),Tk=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Hs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Mw=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Hs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),Uw=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Hs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),zae=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),qke=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:l4,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),Kke=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:l4,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),Wke=()=>s.jsx(FCe,{className:l4}),Xke=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:l4,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),Yke=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Hs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),tw=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Hs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),KC=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Hs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),WC=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Hs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),XC=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Hs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),rh=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Hs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),DB=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Hs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),Jke=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Hs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),Zke=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Hs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),e5e=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Hs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),t5e=()=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Hs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),YC=()=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Hs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),r5e=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Hs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),FB=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Hs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),a5e=()=>s.jsx(f2,{className:Hs}),n5e=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Hs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),h$=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Hs,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),JC=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Hs,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),A$=[{id:Tt.SUBDIRECCION,label:"Subdirección Pedagógica",icon:s.jsx(qke,{})},{id:Tt.PROFESORADO,label:"Profesorado",icon:s.jsx(Kke,{})},{id:Tt.COORDINACION_TP,label:"Coordinación TP",icon:s.jsx(Wke,{})},{id:Tt.ESTUDIANTE,label:"Estudiantes",icon:s.jsx(Xke,{})}],s5e={[Tt.SUBDIRECCION]:[{name:"Intranet",icon:s.jsx(Tk,{})},{name:"Planificación",icon:s.jsx(DB,{})},{name:"Documentación",icon:s.jsx(rh,{})},{name:"Dashboard",icon:s.jsx(Yke,{})},{name:"Administración",icon:s.jsx(t5e,{})},{name:"Horario del liceo",icon:s.jsx(WC,{})},{name:"Multicopias",icon:s.jsx(tw,{})},{name:"Evaluación de Ensayo",icon:s.jsx(rh,{})},{name:"Seguimiento Curricular",icon:s.jsx(n5e,{})},{name:"Acompañamiento docente",icon:s.jsx(e5e,{})},{name:"Análisis Taxonómico",icon:s.jsx(h$,{})},{name:"SIMCE",icon:s.jsx(JC,{})},{name:"Interdisciplinario",icon:s.jsx(FB,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:s.jsx(tw,{})},{name:"Crear horarios",icon:s.jsx(WC,{})},{name:"Seguimiento de acciones pedagógicas",icon:s.jsx(XC,{})},{name:"Inclusión",icon:s.jsx(YC,{})},{name:"Calendario Académico",icon:s.jsx(KC,{})},{name:"Muro de Anuncios",icon:s.jsx(Mw,{})},{name:"Mensajería Interna",icon:s.jsx(Uw,{})},{name:"Generador de Actas",icon:s.jsx(rh,{})}],[Tt.PROFESORADO]:[{name:"Intranet",icon:s.jsx(Tk,{})},{name:"Documentación",icon:s.jsx(rh,{})},{name:"Planificación",icon:s.jsx(DB,{})},{name:"Mis Acompañamientos",icon:s.jsx(r5e,{})},{name:"Recursos de Aprendizaje",icon:s.jsx(Jke,{})},{name:"Análisis Taxonómico",icon:s.jsx(h$,{})},{name:"SIMCE",icon:s.jsx(JC,{})},{name:"Interdisciplinario",icon:s.jsx(FB,{})},{name:"Inclusión",icon:s.jsx(YC,{})},{name:"Multicopias",icon:s.jsx(tw,{})},{name:"Actividades Remotas",icon:s.jsx(Zke,{})},{name:"Evaluación de Ensayo",icon:s.jsx(rh,{})},{name:"Evaluación de Aprendizajes",icon:s.jsx(rh,{})},{name:"Evaluaciones Formativas",icon:s.jsx(XC,{})},{name:"Desarrollo Profesional",icon:s.jsx(YC,{})},{name:"Evaluación de Competencias",icon:s.jsx($ke,{})},{name:"Calendario Académico",icon:s.jsx(KC,{})},{name:"Muro de Anuncios",icon:s.jsx(Mw,{})},{name:"Mensajería Interna",icon:s.jsx(Uw,{})},{name:"Generador de Actas",icon:s.jsx(tw,{})}],[Tt.COORDINACION_TP]:[{name:"Intranet",icon:s.jsx(Tk,{})},{name:"Documentación",icon:s.jsx(rh,{})},{name:"Seguimiento Dual",icon:s.jsx(XC,{})},{name:"Asistencia Dual",icon:s.jsx(WC,{})},{name:"Pañol",icon:s.jsx(a5e,{})},{name:"SIMCE",icon:s.jsx(JC,{})},{name:"Evaluación de Ensayo",icon:s.jsx(rh,{})},{name:"Multicopias",icon:s.jsx(tw,{})},{name:"Gestión de Empresas",icon:s.jsx(zke,{})},{name:"Calendario Académico",icon:s.jsx(KC,{})},{name:"Muro de Anuncios",icon:s.jsx(Mw,{})},{name:"Mensajería Interna",icon:s.jsx(Uw,{})},{name:"Alternancia TP",icon:"🔄"},{name:"Desarrollo Profesional",icon:s.jsx(YC,{})},{name:"Generador de Actas",icon:s.jsx(rh,{})}],[Tt.ESTUDIANTE]:[{name:"Documentación",icon:s.jsx(rh,{})},{name:"Auto-aprendizaje",icon:s.jsx(DB,{})},{name:"Evaluación Formativa",icon:s.jsx(XC,{})},{name:"SIMCE",icon:s.jsx(JC,{})},{name:"Tareas Interdisciplinarias",icon:s.jsx(FB,{})},{name:"Asistencia a Empresa",icon:s.jsx(WC,{})},{name:"Calendario Académico",icon:s.jsx(KC,{})},{name:"Muro de Anuncios",icon:s.jsx(Mw,{})},{name:"Mensajería Interna",icon:s.jsx(Uw,{})}]},D0=["1º Medio","2º Medio","3º Medio","4º Medio"],cn=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],on=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],XD=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],Th=["Lunes","Martes","Miércoles","Jueves","Viernes"],Is=[{bloque:1,inicio:"08:30",fin:"09:10"},{bloque:2,inicio:"09:10",fin:"09:50"},{bloque:3,inicio:"10:10",fin:"10:50"},{bloque:4,inicio:"10:50",fin:"11:30"},{bloque:5,inicio:"11:40",fin:"12:20"},{bloque:6,inicio:"12:20",fin:"13:00"},{bloque:7,inicio:"13:40",fin:"14:20"},{bloque:8,inicio:"14:20",fin:"15:00"},{bloque:9,inicio:"15:10",fin:"15:50"},{bloque:10,inicio:"15:50",fin:"16:30"}],Eb={[sa.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[sa.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[sa.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[sa.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},i5e=Object.values(mg),PB=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],RB=["Vinculado","Desvinculado","En proceso","Empresa"],Vm=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],o5e=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],R5=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],h2=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],$ae=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],ZC=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],l5e=["Mecánica Industrial","Mecánica Automotriz"],c5e=["INACAP","UNAB","DUOC","Universidad de Las Américas"],d5e={"Mecánica Automotriz":["3ºA","3ºB","4ºA","4ºB"],"Mecánica Industrial":["3ºC","3ºD","4ºC","4ºD"]},u5e=["Pasantía","Visita","Certificación","Formación en empresa"],f5e={"Mecánica Industrial":["Soldadura industrial","Mantenimiento de herramientas","Medición y verificación","Mecánica de banco","Torneado de piezas y conjuntos mecánicos","Fresado de piezas mecánicas","Taladrado de piezas mecánicas","Rectificado de piezas mecánicas","Fabricación asistida por computador (CNC)"],"Mecánica Automotriz":["Ajuste de motores","Lectura de planos y manuales técnicos","Manejo de residuos y desechos automotrices","Mantenimiento de sistemas de seguridad y confortabilidad","Mantenimiento de sistemas eléctricos y electrónicos","Mantenimiento de motores","Mantenimiento de sistemas hidráulicos y neumáticos","Mantenimiento de los sistemas de transmisión y frenos","Mantenimiento de sistemas de dirección y suspensión","Emprendimiento y empleabilidad"]},h5e={"Mecánica Automotriz":{"Ajuste de motores":["Reparar y probar el funcionamiento de motores (gasolina, diésel, gas e híbridos), incluyendo sistemas de control de emisiones, lubricación y refrigeración, usando herramientas e instrumentos apropiados y siguiendo especificaciones del fabricante."],"Lectura de planos y manuales técnicos":["Leer e interpretar información técnica (manuales, planos, diagramas y normas de emisiones) para resolver diagnósticos y fallas."],"Manejo de residuos y desechos automotrices":["Aplicar procedimientos y normativas de seguridad, higiene y cuidado ambiental en la manipulación y disposición de residuos y desechos automotrices."],"Mantenimiento de sistemas de seguridad y confortabilidad":["Diagnosticar, reparar y mantener sistemas de seguridad (frenos ABS, airbags) y confortabilidad (climatización, cierre centralizado, asientos eléctricos) según especificaciones técnicas."],"Mantenimiento de sistemas eléctricos y electrónicos":["Reemplazar, ajustar y probar sistemas eléctricos y electrónicos automotrices, siguiendo procedimientos y normas internacionales."],"Mantenimiento de motores":["Realizar mantenimiento preventivo y correctivo de motores y sus sistemas asociados, verificando tolerancias y parámetros operativos según especificaciones."],"Mantenimiento de sistemas hidráulicos y neumáticos":["Inspeccionar, diagnosticar y reparar sistemas hidráulicos y neumáticos de vehículos automotrices."],"Mantenimiento de los sistemas de transmisión y frenos":["Verificar, ajustar o reemplazar componentes de transmisión y frenos, según manual del fabricante."],"Mantenimiento de sistemas de dirección y suspensión":["Diagnosticar, alinear y corregir sistemas de dirección y suspensión, cumpliendo normas de seguridad."],"Emprendimiento y empleabilidad":["Desarrollar un proyecto o plan de negocio relacionado con el sector automotriz, aplicando conceptos de gestión, marketing y normativa vigente."]},"Mecánica Industrial":{"Soldadura industrial":["Ejecutar procesos de corte y soldadura (oxiacetileno, arco manual, TIG, MIG) en distintas posiciones y materiales, aplicando normas de seguridad, higiene y cuidado ambiental."],"Mantenimiento de herramientas":["Mantener y reparar herramientas manuales y de máquinas, asegurando su operatividad y prolongando su vida útil."],"Medición y verificación":["Utilizar instrumentos de medición y verificación para controlar dimensiones y tolerancias según planos y especificaciones técnicas."],"Mecánica de banco":["Realizar operaciones manuales de mecanizado, ajuste, limado, roscado y ensamblaje, siguiendo planos y tolerancias indicadas."],"Torneado de piezas y conjuntos mecánicos":["Operar tornos convencionales para fabricar piezas y conjuntos mecánicos, cumpliendo con las especificaciones técnicas y de seguridad."],"Fresado de piezas mecánicas":["Operar fresadoras para fabricar piezas mecánicas, seleccionando herramientas de corte y parámetros de mecanizado adecuados."],"Taladrado de piezas mecánicas":["Ejecutar operaciones de taladrado, escariado y roscado en taladros de banco o columna, cumpliendo especificaciones técnicas y de seguridad."],"Rectificado de piezas mecánicas":["Utilizar rectificadoras para mejorar el acabado y precisión dimensional de piezas mecánicas, cumpliendo tolerancias indicadas."],"Fabricación asistida por computador (CNC)":["Programar y operar máquinas CNC para fabricar piezas mecánicas con precisión, optimizando procesos y aplicando normas de seguridad."]}},_0={"Liderazgo Curricular":["Planificación y organización del currículo","Asegurar la cobertura y secuenciación de los contenidos","Monitoreo del cumplimiento de los planes de estudio"],"Prácticas Pedagógicas en el Aula":["Estrategias de enseñanza y metodologías activas","Evaluación de los aprendizajes para retroalimentar el proceso","Uso de recursos y tecnologías para apoyar la enseñanza"],"Acompañamiento y Desarrollo Profesional Docente":["Observación de clases y retroalimentación","Planes de formación continua y actualización pedagógica","Fomento de comunidades de aprendizaje docente"],"Monitoreo y Evaluación de los Aprendizajes":["Uso de datos e indicadores para tomar decisiones pedagógicas","Evaluaciones internas y externas","Ajuste de estrategias según resultados y metas de aprendizaje"]},m$=["Pendiente","En Proceso","Cumplida"],p$=["PROFESORADO","SUBDIRECCION","COORDINACION_TP"],A5e=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[a,n]=w.useState(""),[i,o]=w.useState(""),[l,c]=w.useState("login"),d=A=>{A.preventDefault(),e(a,i)},u=A=>{A.preventDefault(),t(a),c("forgot_sent")},f=()=>l==="forgot"?s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a,onChange:A=>n(A.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),s.jsx("div",{className:"text-sm text-center",children:s.jsx("button",{type:"button",onClick:()=>c("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):l==="forgot_sent"?s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),s.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",s.jsx("strong",{children:a}),", hemos enviado un enlace para restablecer su contraseña."]}),s.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),s.jsx("button",{type:"button",onClick:()=>{c("login"),n("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):s.jsxs("form",{onSubmit:d,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a,onChange:A=>n(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:i,onChange:A=>o(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&s.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:s.jsx("p",{children:r})}),s.jsx("div",{className:"text-sm text-center",children:s.jsx("button",{type:"button",onClick:()=>c("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),s.jsx("div",{children:s.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[s.jsxs("div",{className:"text-center mb-10",children:[s.jsx("div",{className:"mb-4 flex justify-center items-center",children:s.jsx(tL,{})}),s.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:l==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),s.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:f()}),s.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},ej=({trigger:e,children:t,onOpen:r})=>{const[a,n]=w.useState(!1),i=w.useRef(null),o=()=>{const c=!a;n(c),c&&r&&r()},l=c=>{i.current&&!i.current.contains(c.target)&&n(!1)};return w.useEffect(()=>(document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}),[]),s.jsxs("div",{className:"relative",ref:i,children:[s.jsx("div",{onClick:o,children:e}),a&&s.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>n(!1),children:t})]})},g$="usuariosLiceo",m5e=({user:e,onClose:t,onSave:r})=>{const[a,n]=w.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),i=l=>{n({...a,[l.target.name]:l.target.value})},o=l=>{l.preventDefault();const c={...e,...a};try{const d=localStorage.getItem(g$);let u=d?JSON.parse(d):[];const f=u.findIndex(A=>A.id===e.id);f>-1?u[f]=c:u.push(c),localStorage.setItem(g$,JSON.stringify(u)),r(c),t()}catch(d){console.error("Failed to save user profile:",d),alert("No se pudo guardar el perfil.")}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:l=>l.stopPropagation(),children:s.jsxs("form",{onSubmit:o,children:[s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),s.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:a.fotoUrl,onChange:i,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),s.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:a.nombreCompleto,onChange:i,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),s.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:i,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),s.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[s.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},x$="usuariosLiceo",p5e=({user:e,onClose:t,onSave:r})=>{const[a,n]=w.useState(""),[i,o]=w.useState(""),[l,c]=w.useState(null),d=u=>{if(u.preventDefault(),c(null),!a){c("La contraseña no puede estar en blanco.");return}if(a!==i){c("Las contraseñas no coinciden.");return}const f={...e,password:a};try{const A=localStorage.getItem(x$);let m=A?JSON.parse(A):[];const g=m.findIndex(x=>x.id===e.id);g>-1?m[g]=f:m.push(f),localStorage.setItem(x$,JSON.stringify(m)),r(f),t()}catch(A){console.error("Failed to save new password:",A),c("No se pudo guardar la nueva contraseña.")}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:u=>u.stopPropagation(),children:s.jsxs("form",{onSubmit:d,children:[s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),s.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:a,onChange:u=>n(u.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:i,onChange:u=>o(u.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l&&s.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:s.jsx("p",{children:l})})]})]}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[s.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})};async function Vae(e){const t={...e,docenteEmailLower:e.docenteEmail?e.docenteEmail.toLowerCase():e.docenteEmailLower,leida:!1,createdAt:Da()};return Object.keys(t).forEach(a=>t[a]===void 0&&delete t[a]),(await Kr(ut(lr,"notificaciones"),t)).id}function g5e(e,t){const r=[];let a=[],n=[];const i=()=>{const o=new Map;[...a,...n].forEach(c=>{c.id&&(o.has(c.id)||o.set(c.id,c))});const l=Array.from(o.values()).sort((c,d)=>{var A,m;const u=(A=c.createdAt)!=null&&A.toDate?c.createdAt.toDate().getTime():0;return((m=d.createdAt)!=null&&m.toDate?d.createdAt.toDate().getTime():0)-u});t(l)};if(e.email){const o=jt(ut(lr,"notificaciones"),Kt("docenteEmailLower","==",e.email.toLowerCase()),Gt("createdAt","desc"));r.push(rr(o,l=>{a=l.docs.map(c=>({id:c.id,...c.data()})),i()}))}if(e.nombreCompleto){const o=jt(ut(lr,"notificaciones"),Kt("docenteNombre","==",e.nombreCompleto),Gt("createdAt","desc"));r.push(rr(o,l=>{n=l.docs.map(c=>({id:c.id,...c.data()})),i()}))}return()=>r.forEach(o=>o())}async function x5e(e){const t=$t(lr,"notificaciones",e);await zi(t,{leida:!0})}async function v5e(e){const t=$t(lr,"notificaciones",e);await Ua(t)}const v$="anunciosMuro",b$="mensajesInternos",y$="lir-read-status",b5e=({user:e})=>{if(e.fotoUrl)return s.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(a=>a).map(a=>a[0]).join("").toUpperCase();return s.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},y5e=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:a,onChangeProfile:n,canChangeProfile:i,toggleSidebar:o,unreadMessagesCount:l,refreshUnreadCount:c})=>{const[d,u]=w.useState([]),[f,A]=w.useState([]),[m,g]=w.useState(!1),[x,v]=w.useState(!1),[y,N]=w.useState([]),E=w.useCallback(()=>{try{const T=localStorage.getItem(`${y$}-${e.id}`);return T?JSON.parse(T):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),B=w.useCallback(T=>{try{localStorage.setItem(`${y$}-${e.id}`,JSON.stringify(T))}catch(L){console.error("Failed to set read status:",L)}},[e.id]);w.useEffect(()=>{const T=JSON.parse(localStorage.getItem(v$)||"[]"),L=E();u(T.filter(S=>!L.announcements.includes(S.id)));const F=JSON.parse(localStorage.getItem(b$)||"[]");A(F.filter(S=>S.para===e.email).sort((S,M)=>new Date(M.fecha).getTime()-new Date(S.fecha).getTime()).slice(0,5))},[e.id,E,l]),w.useEffect(()=>{if(!((e==null?void 0:e.profile)===Tt.SUBDIRECCION||(e==null?void 0:e.profile)===Tt.PROFESORADO||(e==null?void 0:e.profile)===Tt.COORDINACION_TP)||!(e!=null&&e.email))return;const L=g5e({email:e.email,nombreCompleto:e.nombreCompleto},F=>{const S=F.filter(M=>M.tipo&&(M.tipo.toLowerCase()==="pie"||M.tipo==="nueva_intervencion"));N(S)});return()=>L()},[e==null?void 0:e.email,e==null?void 0:e.nombreCompleto,e==null?void 0:e.profile]);const _=()=>{const T=E(),L=JSON.parse(localStorage.getItem(v$)||"[]").map(F=>F.id);T.announcements=L,B(T),u([])},I=()=>{const T=E(),F=JSON.parse(localStorage.getItem(b$)||"[]").filter(S=>S.para===e.email).map(S=>S.id);T.messages=[...new Set([...T.messages,...F])],B(T),c()},j=y.filter(T=>!T.leida).length,k=T=>{var L;try{const F=(L=T.createdAt)!=null&&L.toDate?T.createdAt.toDate():new Date(T.createdAt);return F?F.toLocaleString("es-CL"):""}catch{return""}};return s.jsxs(s.Fragment,{children:[s.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:s.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:o,children:s.jsx(Gke,{})}),s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[s.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),s.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),s.jsx("div",{className:"flex-1 flex justify-center",children:s.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:s.jsx(Tk,{})})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ej,{onOpen:_,trigger:s.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Anuncios",children:[s.jsx(Mw,{}),d.length>0&&s.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:d.length})]}),children:s.jsxs("div",{className:"p-2",children:[s.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),s.jsxs("ul",{className:"mt-1",children:[d.slice(0,3).map(T=>s.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[s.jsx("p",{className:"font-bold dark:text-slate-200",children:T.titulo}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:T.mensaje})]},T.id)),d.length===0&&s.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),s.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),(e.profile===Tt.SUBDIRECCION||e.profile===Tt.PROFESORADO||e.profile===Tt.COORDINACION_TP)&&s.jsx(ej,{trigger:s.jsxs("button",{className:"relative p-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-700 dark:bg-sky-900/30 dark:hover:bg-sky-900/40 dark:text-sky-300 transition-colors",title:"Notificaciones PIE",children:[s.jsx(Zje,{className:"w-5 h-5"}),j>0&&s.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:j})]}),children:s.jsxs("div",{className:"p-2 w-80",children:[s.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Notificaciones PIE"}),s.jsxs("ul",{className:"mt-1 max-h-80 overflow-y-auto divide-y dark:divide-slate-700",children:[y.length===0&&s.jsx("li",{className:"p-3 text-sm text-slate-500 dark:text-slate-400",children:"No hay notificaciones."}),y.map(T=>s.jsx("li",{className:"p-2 text-sm",children:s.jsxs("div",{className:"flex justify-between items-start gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:T.titulo}),s.jsx("div",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-line",children:T.mensaje}),T.estudianteNombre&&s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Estudiante: ",s.jsx("b",{children:T.estudianteNombre})]}),s.jsx("div",{className:"text-[11px] text-slate-400 mt-1",children:k(T)})]}),s.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-1",children:[!T.leida&&s.jsx("button",{onClick:()=>T.id&&x5e(T.id),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded hover:bg-green-200",children:"Marcar leída"}),s.jsx("button",{onClick:()=>T.id&&v5e(T.id),className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded hover:bg-red-200",children:"Eliminar"})]})]})},T.id))]})]})}),s.jsx(ej,{onOpen:I,trigger:s.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[s.jsx(Uw,{}),l>0&&s.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:l})]}),children:s.jsxs("div",{className:"p-2",children:[s.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),s.jsxs("ul",{className:"mt-1",children:[f.slice(0,3).map(T=>s.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[s.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",T.de]}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:T.asunto})]},T.id)),f.length===0&&s.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),s.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),s.jsx(ej,{trigger:s.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:s.jsx(b5e,{user:e})}),children:s.jsxs("div",{className:"p-2",children:[s.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),s.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[s.jsx("li",{children:s.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),s.jsx("li",{children:s.jsx("button",{onClick:()=>v(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),i&&s.jsx("li",{children:s.jsx("button",{onClick:n,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),s.jsx("li",{children:s.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),m&&s.jsx(m5e,{user:e,onClose:()=>g(!1),onSave:a}),x&&s.jsx(p5e,{user:e,onClose:()=>v(!1),onSave:a})]})},w5e={apiKey:"AIzaSyBX_n9qoSh0N2c1OAPurBAl6FC9ltX4tK0",authDomain:"plania-clase.firebaseapp.com",projectId:"plania-clase",storageBucket:"plania-clase.firebasestorage.app",messagingSenderId:"978612067917",appId:"1:978612067917:web:299137755ec80939d7c604",measurementId:void 0},rL=vQ().length?vQ()[0]:zR(w5e),st=T8(rL),eN=dte(rL),c4=a4(rL),aL=Object.freeze(Object.defineProperty({__proto__:null,auth:eN,db:st,storage:c4},Symbol.toStringTag,{value:"Module"})),d4="reemplazos_docentes",N5e="usuarios",Gae=e=>{var r,a,n,i;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((i=(n=t.fechaActualizacion)==null?void 0:n.toDate)==null?void 0:i.call(n).toISOString())||t.fechaActualizacion}},E5e=e=>{const t=e.data();return{id:e.id,...t}},C5e=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:dr.fromDate(new Date),fechaActualizacion:dr.fromDate(new Date)};return(await Kr(ut(st,d4),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},j5e=async(e,t)=>{try{const r=$t(st,d4,e),a=await tA(r);if(!a.exists()||a.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await Ua(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},k5e=(e,t,r=50)=>{try{const a=jt(ut(st,d4),Kt("userId","==",e),Gt("diaAusencia","desc"),El(r));return rr(a,n=>{const i=n.docs.map(Gae);t(i)},n=>{console.error("Error en suscripción a reemplazos:",n),t([])})}catch(a){return console.error("Error al crear la suscripción de reemplazos:",a),()=>{}}},S5e=e=>{try{const t=jt(ut(st,N5e),Kt("profile","==",Tt.PROFESORADO));return rr(t,a=>{const n=a.docs.map(E5e);e(n)},a=>{console.error("Error al obtener la lista de profesores:",a),e([])})}catch(t){return console.error("Error al crear la suscripción de profesores:",t),()=>{}}},_5e=async(e,t)=>{try{if(!t.trim())return[];const r=jt(ut(st,d4),Kt("userId","==",e),Gt("diaAusencia","desc"),El(100)),n=(await Nr(r)).docs.map(Gae),i=t.toLowerCase();return n.filter(o=>o.docenteAusente.toLowerCase().includes(i)||o.docenteReemplazante.toLowerCase().includes(i)||o.curso.toLowerCase().includes(i)||o.diaAusencia.includes(i)||o.asignaturaAusente.toLowerCase().includes(i)||o.asignaturaReemplazante.toLowerCase().includes(i))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var L5={};L5.version="0.18.5";var qae=1252,T5e=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],nL={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},sL=function(e){T5e.indexOf(e)!=-1&&(qae=nL[0]=e)};function B5e(){sL(1252)}var rf=function(e){sL(e)};function iL(){rf(1200),B5e()}function w$(e){for(var t=[],r=0,a=e.length;r<a;++r)t[r]=e.charCodeAt(r);return t}function I5e(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function Kae(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Hw=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?I5e(e.slice(2)):t==254&&r==255?Kae(e.slice(2)):t==65279?e.slice(1):e},tj=function(t){return String.fromCharCode(t)},N$=function(t){return String.fromCharCode(t)},tN,Om="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function rN(e){for(var t="",r=0,a=0,n=0,i=0,o=0,l=0,c=0,d=0;d<e.length;)r=e.charCodeAt(d++),i=r>>2,a=e.charCodeAt(d++),o=(r&3)<<4|a>>4,n=e.charCodeAt(d++),l=(a&15)<<2|n>>6,c=n&63,isNaN(a)?l=c=64:isNaN(n)&&(c=64),t+=Om.charAt(i)+Om.charAt(o)+Om.charAt(l)+Om.charAt(c);return t}function vd(e){var t="",r=0,a=0,n=0,i=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)i=Om.indexOf(e.charAt(d++)),o=Om.indexOf(e.charAt(d++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=Om.indexOf(e.charAt(d++)),a=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(a)),c=Om.indexOf(e.charAt(d++)),n=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(n));return t}var fa=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),xA=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function lp(e){return fa?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function E$(e){return fa?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var dd=function(t){return fa?xA(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function u4(e){if(typeof ArrayBuffer>"u")return dd(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a!=e.length;++a)r[a]=e.charCodeAt(a)&255;return t}function Ep(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function O5e(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function oL(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return oL(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var co=fa?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:xA(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var a=new Uint8Array(r),n=0;for(t=0,r=0;t<e.length;r+=n,++t)if(n=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),r)}return a}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function D5e(e){for(var t=[],r=0,a=e.length+250,n=lp(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)n[r++]=o;else if(o<2048)n[r++]=192|o>>6&31,n[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;n[r++]=240|o>>8&7,n[r++]=128|o>>2&63,n[r++]=128|l>>6&15|(o&3)<<4,n[r++]=128|l&63}else n[r++]=224|o>>12&15,n[r++]=128|o>>6&63,n[r++]=128|o&63;r>a&&(t.push(n.slice(0,r)),r=0,n=lp(65535),a=65530)}return t.push(n.slice(0,r)),co(t)}var Gl=/\u0000/g,Qw=/[\u0001-\u0006]/g;function Cb(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function af(e,t){var r=""+e;return r.length>=t?r:Os("0",t-r.length)+r}function lL(e,t){var r=""+e;return r.length>=t?r:Os(" ",t-r.length)+r}function M5(e,t){var r=""+e;return r.length>=t?r:r+Os(" ",t-r.length)}function F5e(e,t){var r=""+Math.round(e);return r.length>=t?r:Os("0",t-r.length)+r}function P5e(e,t){var r=""+e;return r.length>=t?r:Os("0",t-r.length)+r}var C$=Math.pow(2,32);function gv(e,t){if(e>C$||e<-C$)return F5e(e,t);var r=Math.round(e);return P5e(r,t)}function U5(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var j$=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],LB=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function R5e(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Fr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},k$={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},L5e={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function H5(e,t,r){for(var a=e<0?-1:1,n=e*a,i=0,o=1,l=0,c=1,d=0,u=0,f=Math.floor(n);d<t&&(f=Math.floor(n),l=f*o+i,u=f*d+c,!(n-f<5e-8));)n=1/(n-f),i=o,o=l,c=d,d=u;if(u>t&&(d>t?(u=c,l=i):(u=d,l=o)),!r)return[0,a*l,u];var A=Math.floor(a*l/u);return[A,a*l-A*u,u]}function Eg(e,t,r){if(e>2958465||e<0)return null;var a=e|0,n=Math.floor(86400*(e-a)),i=0,o=[],l={D:a,T:n,u:86400*(e-a)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(a+=1462),l.u>.9999&&(l.u=0,++n==86400&&(l.T=n=0,++a,++l.D)),a===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(a===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{a>60&&--a;var c=new Date(1900,0,1);c.setDate(c.getDate()+a-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),a<60&&(i=(i+6)%7),r&&(i=$5e(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=n%60,n=Math.floor(n/60),l.M=n%60,n=Math.floor(n/60),l.H=n,l.q=i,l}var Wae=new Date(1899,11,31,0,0,0),M5e=Wae.getTime(),U5e=new Date(1900,2,1,0,0,0);function Xae(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=U5e&&(r+=1440*60*1e3),(r-(M5e+(e.getTimezoneOffset()-Wae.getTimezoneOffset())*6e4))/(1440*60*1e3)}function cL(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function H5e(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Q5e(e){var t=e<0?12:11,r=cL(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function z5e(e){var t=cL(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function aN(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Q5e(e):t===10?r=e.toFixed(10).substr(0,12):r=z5e(e),cL(H5e(r.toUpperCase()))}function nx(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):aN(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return pu(14,Xae(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function $5e(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function V5e(e,t,r,a){var n="",i=0,o=0,l=r.y,c,d=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,d=2;break;default:c=l%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,d=t.length;break;case 3:return LB[r.m-1][1];case 5:return LB[r.m-1][0];default:return LB[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,d=t.length;break;case 3:return j$[r.q][0];default:return j$[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?af(r.S,t.length):(a>=2?o=a===3?1e3:100:o=a===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(n=af(i,2+a),t==="ss"?n.substr(0,2):"."+n.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:c=l,d=1;break}var u=d>0?af(c,d):"";return u}function Dm(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,a=e.substr(0,r);r!=e.length;r+=t)a+=(a.length>0?",":"")+e.substr(r,t);return a}var Yae=/%/g;function G5e(e,t,r){var a=t.replace(Yae,""),n=t.length-a.length;return Q0(e,a,r*Math.pow(10,2*n))+Os("%",n)}function q5e(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Q0(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function Jae(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Jae(e,-t);var n=e.indexOf(".");n===-1&&(n=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%n;if(i<0&&(i+=n),r=(t/Math.pow(10,i)).toPrecision(a+1+(n+i)%n),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,n)+"."+r.substr(2+n),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(n+i)%n)+"."+u.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Zae=/# (\?+)( ?)\/( ?)(\d+)/;function K5e(e,t,r){var a=parseInt(e[4],10),n=Math.round(t*a),i=Math.floor(n/a),o=n-i*a,l=a;return r+(i===0?"":""+i)+" "+(o===0?Os(" ",e[1].length+1+e[4].length):lL(o,e[1].length)+e[2]+"/"+e[3]+af(l,e[4].length))}function W5e(e,t,r){return r+(t===0?"":""+t)+Os(" ",e[1].length+2+e[4].length)}var ene=/^#*0*\.([0#]+)/,tne=/\).*[0#]/,rne=/\(###\) ###\\?-####/;function Ul(e){for(var t="",r,a=0;a!=e.length;++a)switch(r=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function S$(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function _$(e,t){var r=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(r*a)).length?0:Math.round(r*a)}function X5e(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Y5e(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Jd(e,t,r){if(e.charCodeAt(0)===40&&!t.match(tne)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Jd("n",a,r):"("+Jd("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return q5e(e,t,r);if(t.indexOf("%")!==-1)return G5e(e,t,r);if(t.indexOf("E")!==-1)return Jae(t,r);if(t.charCodeAt(0)===36)return"$"+Jd(e,t.substr(t.charAt(1)==" "?2:1),r);var n,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+gv(c,t.length);if(t.match(/^[#?]+$/))return n=gv(r,0),n==="0"&&(n=""),n.length>t.length?n:Ul(t.substr(0,t.length-n.length))+n;if(i=t.match(Zae))return K5e(i,c,d);if(t.match(/^#+0+$/))return d+gv(c,t.length-t.indexOf("0"));if(i=t.match(ene))return n=S$(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Ul(i[1])).replace(/\.$/,"."+Ul(i[1])).replace(/\.(\d*)$/,function(g,x){return"."+x+Os("0",Ul(i[1]).length-x.length)}),t.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+S$(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+Dm(gv(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Jd(e,t,-r):Dm(""+(Math.floor(r)+X5e(r,i[1].length)))+"."+af(_$(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Jd(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return n=Cb(Jd(e,t.replace(/[\\-]/g,""),r)),o=0,Cb(Cb(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<n.length?n.charAt(o++):g==="0"?"0":""}));if(t.match(rne))return n=Jd(e,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=H5(c,Math.pow(10,o)-1,!1),n=""+d,u=Q0("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),n+=u+i[2]+"/"+i[3],u=M5(l[2],o),u.length<i[4].length&&(u=Ul(i[4].substr(i[4].length-u.length))+u),n+=u,n;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=H5(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?lL(l[1],o)+i[2]+"/"+i[3]+M5(l[2],o):Os(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return n=gv(r,0),t.length<=n.length?n:Ul(t.substr(0,t.length-n.length))+n;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=n.indexOf(".");var f=t.indexOf(".")-o,A=t.length-n.length-f;return Ul(t.substr(0,f)+n+t.substr(t.length-A))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=_$(r,i[1].length),r<0?"-"+Jd(e,t,-r):Dm(Y5e(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?af(0,3-g.length):"")+g})+"."+af(o,i[1].length);switch(t){case"###,##0.00":return Jd(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=Dm(gv(c,0));return m!=="0"?d+m:"";case"###,###.00":return Jd(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Jd(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function J5e(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Q0(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function Z5e(e,t,r){var a=t.replace(Yae,""),n=t.length-a.length;return Q0(e,a,r*Math.pow(10,2*n))+Os("%",n)}function ane(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+ane(e,-t);var n=e.indexOf(".");n===-1&&(n=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%n;if(i<0&&(i+=n),r=(t/Math.pow(10,i)).toPrecision(a+1+(n+i)%n),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(n+i)%n)+"."+u.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function ih(e,t,r){if(e.charCodeAt(0)===40&&!t.match(tne)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ih("n",a,r):"("+ih("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return J5e(e,t,r);if(t.indexOf("%")!==-1)return Z5e(e,t,r);if(t.indexOf("E")!==-1)return ane(t,r);if(t.charCodeAt(0)===36)return"$"+ih(e,t.substr(t.charAt(1)==" "?2:1),r);var n,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+af(c,t.length);if(t.match(/^[#?]+$/))return n=""+r,r===0&&(n=""),n.length>t.length?n:Ul(t.substr(0,t.length-n.length))+n;if(i=t.match(Zae))return W5e(i,c,d);if(t.match(/^#+0+$/))return d+af(c,t.length-t.indexOf("0"));if(i=t.match(ene))return n=(""+r).replace(/^([^\.]+)$/,"$1."+Ul(i[1])).replace(/\.$/,"."+Ul(i[1])),n=n.replace(/\.(\d*)$/,function(g,x){return"."+x+Os("0",Ul(i[1]).length-x.length)}),t.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+Dm(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ih(e,t,-r):Dm(""+r)+"."+Os("0",i[1].length);if(i=t.match(/^#,#*,#0/))return ih(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return n=Cb(ih(e,t.replace(/[\\-]/g,""),r)),o=0,Cb(Cb(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<n.length?n.charAt(o++):g==="0"?"0":""}));if(t.match(rne))return n=ih(e,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=H5(c,Math.pow(10,o)-1,!1),n=""+d,u=Q0("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),n+=u+i[2]+"/"+i[3],u=M5(l[2],o),u.length<i[4].length&&(u=Ul(i[4].substr(i[4].length-u.length))+u),n+=u,n;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=H5(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?lL(l[1],o)+i[2]+"/"+i[3]+M5(l[2],o):Os(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return n=""+r,t.length<=n.length?n:Ul(t.substr(0,t.length-n.length))+n;if(i=t.match(/^([#0]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=n.indexOf(".");var f=t.indexOf(".")-o,A=t.length-n.length-f;return Ul(t.substr(0,f)+n+t.substr(t.length-A))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+ih(e,t,-r):Dm(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?af(0,3-g.length):"")+g})+"."+af(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=Dm(""+c);return m!=="0"?d+m:"";default:if(t.match(/\.[0#?]*$/))return ih(e,t.slice(0,t.lastIndexOf(".")),r)+Ul(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Q0(e,t,r){return(r|0)===r?ih(e,t,r):Jd(e,t,r)}function eSe(e){for(var t=[],r=!1,a=0,n=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(n,a-n),n=a+1}if(t[t.length]=e.substr(n),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var nne=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function $1(e){for(var t=0,r="",a="";t<e.length;)switch(r=e.charAt(t)){case"G":U5(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(a=r;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(nne))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function tSe(e,t,r,a){for(var n=[],i="",o=0,l="",c="t",d,u,f,A="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!U5(e,o))throw new Error("unrecognized character "+l+" in "+e);n[n.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(f=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(f);n[n.length]={t:"t",v:i},++o;break;case"\\":var m=e.charAt(++o),g=m==="("||m===")"?m:"t";n[n.length]={t:g,v:m},++o;break;case"_":n[n.length]={t:"t",v:" "},o+=2;break;case"@":n[n.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(d==null&&(d=Eg(t,r,e.charAt(o+1)==="2"),d==null))return"";n[n.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=Eg(t,r),d==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=A),n[n.length]={t:l,v:i},c=l;break;case"A":case"a":case"上":var x={t:l,v:l};if(d==null&&(d=Eg(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(d!=null&&(x.v=d.H>=12?"P":"A"),x.t="T",A="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(d!=null&&(x.v=d.H>=12?"PM":"AM"),x.t="T",o+=5,A="h"):e.substr(o,5).toUpperCase()==="上午/下午"?(d!=null&&(x.v=d.H>=12?"下午":"上午"),x.t="T",o+=5,A="h"):(x.t="t",++o),d==null&&x.t==="T")return"";n[n.length]=x,c=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(nne)){if(d==null&&(d=Eg(t,r),d==null))return"";n[n.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",$1(e)||(n[n.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;n[n.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;n[n.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;n[n.length]={t:l,v:i},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":n[n.length]={t:a===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);n[n.length]={t:"D",v:i};break;case" ":n[n.length]={t:l,v:l},++o;break;case"$":n[n.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);n[n.length]={t:"t",v:l},++o;break}var v=0,y=0,N;for(o=n.length-1,c="t";o>=0;--o)switch(n[o].t){case"h":case"H":n[o].t=A,c="h",v<1&&(v=1);break;case"s":(N=n[o].v.match(/\.0+$/))&&(y=Math.max(y,N[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":c=n[o].t;break;case"m":c==="s"&&(n[o].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&n[o].v.match(/[Hh]/)&&(v=1),v<2&&n[o].v.match(/[Mm]/)&&(v=2),v<3&&n[o].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var E="",B;for(o=0;o<n.length;++o)switch(n[o].t){case"t":case"T":case" ":case"D":break;case"X":n[o].v="",n[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[o].v=V5e(n[o].t.charCodeAt(0),n[o].v,d,y),n[o].t="t";break;case"n":case"?":for(B=o+1;n[B]!=null&&((l=n[B].t)==="?"||l==="D"||(l===" "||l==="t")&&n[B+1]!=null&&(n[B+1].t==="?"||n[B+1].t==="t"&&n[B+1].v==="/")||n[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(n[B].v==="/"||n[B].v===" "&&n[B+1]!=null&&n[B+1].t=="?"));)n[o].v+=n[B].v,n[B]={v:"",t:";"},++B;E+=n[o].v,o=B-1;break;case"G":n[o].t="t",n[o].v=nx(t,r);break}var _="",I,j;if(E.length>0){E.charCodeAt(0)==40?(I=t<0&&E.charCodeAt(0)===45?-t:t,j=Q0("n",E,I)):(I=t<0&&a>1?-t:t,j=Q0("n",E,I),I<0&&n[0]&&n[0].t=="t"&&(j=j.substr(1),n[0].v="-"+n[0].v)),B=j.length-1;var k=n.length;for(o=0;o<n.length;++o)if(n[o]!=null&&n[o].t!="t"&&n[o].v.indexOf(".")>-1){k=o;break}var T=n.length;if(k===n.length&&j.indexOf("E")===-1){for(o=n.length-1;o>=0;--o)n[o]==null||"n?".indexOf(n[o].t)===-1||(B>=n[o].v.length-1?(B-=n[o].v.length,n[o].v=j.substr(B+1,n[o].v.length)):B<0?n[o].v="":(n[o].v=j.substr(0,B+1),B=-1),n[o].t="t",T=o);B>=0&&T<n.length&&(n[T].v=j.substr(0,B+1)+n[T].v)}else if(k!==n.length&&j.indexOf("E")===-1){for(B=j.indexOf(".")-1,o=k;o>=0;--o)if(!(n[o]==null||"n?".indexOf(n[o].t)===-1)){for(u=n[o].v.indexOf(".")>-1&&o===k?n[o].v.indexOf(".")-1:n[o].v.length-1,_=n[o].v.substr(u+1);u>=0;--u)B>=0&&(n[o].v.charAt(u)==="0"||n[o].v.charAt(u)==="#")&&(_=j.charAt(B--)+_);n[o].v=_,n[o].t="t",T=o}for(B>=0&&T<n.length&&(n[T].v=j.substr(0,B+1)+n[T].v),B=j.indexOf(".")+1,o=k;o<n.length;++o)if(!(n[o]==null||"n?(".indexOf(n[o].t)===-1&&o!==k)){for(u=n[o].v.indexOf(".")>-1&&o===k?n[o].v.indexOf(".")+1:0,_=n[o].v.substr(0,u);u<n[o].v.length;++u)B<j.length&&(_+=j.charAt(B++));n[o].v=_,n[o].t="t",T=o}}}for(o=0;o<n.length;++o)n[o]!=null&&"n?".indexOf(n[o].t)>-1&&(I=a>1&&t<0&&o>0&&n[o-1].v==="-"?-t:t,n[o].v=Q0(n[o].t,n[o].v,I),n[o].t="t");var L="";for(o=0;o!==n.length;++o)n[o]!=null&&(L+=n[o].v);return L}var T$=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function B$(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function rSe(e,t){var r=eSe(e),a=r.length,n=r[a-1].indexOf("@");if(a<4&&n>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||n>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=n>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=n>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=n>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(T$),l=r[1].match(T$);return B$(t,o)?[a,r[0]]:B$(t,l)?[a,r[1]]:[a,r[o!=null&&l!=null?2:1]]}return[a,i]}function pu(e,t,r){r==null&&(r={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?a=r.dateNF:a=e;break;case"number":e==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:Fr)[e],a==null&&(a=r.table&&r.table[k$[e]]||Fr[k$[e]]),a==null&&(a=L5e[e]||"General");break}if(U5(a,0))return nx(t,r);t instanceof Date&&(t=Xae(t,r.date1904));var n=rSe(a,t);if(U5(n[1]))return nx(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return tSe(n[1],t,r,n[0])}function z0(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Fr[r]==null){t<0&&(t=r);continue}if(Fr[r]==e){t=r;break}}t<0&&(t=391)}return Fr[t]=e,t}function f4(e){for(var t=0;t!=392;++t)e[t]!==void 0&&z0(e[t],t)}function V1(){Fr=R5e()}var aSe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},sne=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function nSe(e){var t=typeof e=="number"?Fr[e]:e;return t=t.replace(sne,"(\\d+)"),new RegExp("^"+t+"$")}function sSe(e,t,r){var a=-1,n=-1,i=-1,o=-1,l=-1,c=-1;(t.match(sne)||[]).forEach(function(f,A){var m=parseInt(r[A+1],10);switch(f.toLowerCase().charAt(0)){case"y":a=m;break;case"d":i=m;break;case"h":o=m;break;case"s":c=m;break;case"m":o>=0?l=m:n=m;break}}),c>=0&&l==-1&&n>=0&&(l=n,n=-1);var d=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?d:a==-1&&n==-1&&i==-1?u:d+"T"+u}var iSe=function(){var e={};e.version="1.2.0";function t(){for(var j=0,k=new Array(256),T=0;T!=256;++T)j=T,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,k[T]=j;return typeof Int32Array<"u"?new Int32Array(k):k}var r=t();function a(j){var k=0,T=0,L=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(L=0;L!=256;++L)F[L]=j[L];for(L=0;L!=256;++L)for(T=j[L],k=256+L;k<4096;k+=256)T=F[k]=T>>>8^j[T&255];var S=[];for(L=1;L!=16;++L)S[L-1]=typeof Int32Array<"u"?F.subarray(L*256,L*256+256):F.slice(L*256,L*256+256);return S}var n=a(r),i=n[0],o=n[1],l=n[2],c=n[3],d=n[4],u=n[5],f=n[6],A=n[7],m=n[8],g=n[9],x=n[10],v=n[11],y=n[12],N=n[13],E=n[14];function B(j,k){for(var T=k^-1,L=0,F=j.length;L<F;)T=T>>>8^r[(T^j.charCodeAt(L++))&255];return~T}function _(j,k){for(var T=k^-1,L=j.length-15,F=0;F<L;)T=E[j[F++]^T&255]^N[j[F++]^T>>8&255]^y[j[F++]^T>>16&255]^v[j[F++]^T>>>24]^x[j[F++]]^g[j[F++]]^m[j[F++]]^A[j[F++]]^f[j[F++]]^u[j[F++]]^d[j[F++]]^c[j[F++]]^l[j[F++]]^o[j[F++]]^i[j[F++]]^r[j[F++]];for(L+=15;F<L;)T=T>>>8^r[(T^j[F++])&255];return~T}function I(j,k){for(var T=k^-1,L=0,F=j.length,S=0,M=0;L<F;)S=j.charCodeAt(L++),S<128?T=T>>>8^r[(T^S)&255]:S<2048?(T=T>>>8^r[(T^(192|S>>6&31))&255],T=T>>>8^r[(T^(128|S&63))&255]):S>=55296&&S<57344?(S=(S&1023)+64,M=j.charCodeAt(L++)&1023,T=T>>>8^r[(T^(240|S>>8&7))&255],T=T>>>8^r[(T^(128|S>>2&63))&255],T=T>>>8^r[(T^(128|M>>6&15|(S&3)<<4))&255],T=T>>>8^r[(T^(128|M&63))&255]):(T=T>>>8^r[(T^(224|S>>12&15))&255],T=T>>>8^r[(T^(128|S>>6&63))&255],T=T>>>8^r[(T^(128|S&63))&255]);return~T}return e.table=r,e.bstr=B,e.buf=_,e.str=I,e}(),jr=function(){var t={};t.version="1.2.1";function r(Se,Ve){for(var Me=Se.split("/"),He=Ve.split("/"),Ne=0,xe=0,Fe=Math.min(Me.length,He.length);Ne<Fe;++Ne){if(xe=Me[Ne].length-He[Ne].length)return xe;if(Me[Ne]!=He[Ne])return Me[Ne]<He[Ne]?-1:1}return Me.length-He.length}function a(Se){if(Se.charAt(Se.length-1)=="/")return Se.slice(0,-1).indexOf("/")===-1?Se:a(Se.slice(0,-1));var Ve=Se.lastIndexOf("/");return Ve===-1?Se:Se.slice(0,Ve+1)}function n(Se){if(Se.charAt(Se.length-1)=="/")return n(Se.slice(0,-1));var Ve=Se.lastIndexOf("/");return Ve===-1?Se:Se.slice(Ve+1)}function i(Se,Ve){typeof Ve=="string"&&(Ve=new Date(Ve));var Me=Ve.getHours();Me=Me<<6|Ve.getMinutes(),Me=Me<<5|Ve.getSeconds()>>>1,Se.write_shift(2,Me);var He=Ve.getFullYear()-1980;He=He<<4|Ve.getMonth()+1,He=He<<5|Ve.getDate(),Se.write_shift(2,He)}function o(Se){var Ve=Se.read_shift(2)&65535,Me=Se.read_shift(2)&65535,He=new Date,Ne=Me&31;Me>>>=5;var xe=Me&15;Me>>>=4,He.setMilliseconds(0),He.setFullYear(Me+1980),He.setMonth(xe-1),He.setDate(Ne);var Fe=Ve&31;Ve>>>=5;var Ge=Ve&63;return Ve>>>=6,He.setHours(Ve),He.setMinutes(Ge),He.setSeconds(Fe<<1),He}function l(Se){Oo(Se,0);for(var Ve={},Me=0;Se.l<=Se.length-4;){var He=Se.read_shift(2),Ne=Se.read_shift(2),xe=Se.l+Ne,Fe={};switch(He){case 21589:Me=Se.read_shift(1),Me&1&&(Fe.mtime=Se.read_shift(4)),Ne>5&&(Me&2&&(Fe.atime=Se.read_shift(4)),Me&4&&(Fe.ctime=Se.read_shift(4))),Fe.mtime&&(Fe.mt=new Date(Fe.mtime*1e3));break}Se.l=xe,Ve[He]=Fe}return Ve}var c;function d(){return c||(c={})}function u(Se,Ve){if(Se[0]==80&&Se[1]==75)return Rr(Se,Ve);if((Se[0]|32)==109&&(Se[1]|32)==105)return Qs(Se,Ve);if(Se.length<512)throw new Error("CFB file size "+Se.length+" < 512");var Me=3,He=512,Ne=0,xe=0,Fe=0,Ge=0,Ue=0,Ye=[],et=Se.slice(0,512);Oo(et,0);var Nt=f(et);switch(Me=Nt[0],Me){case 3:He=512;break;case 4:He=4096;break;case 0:if(Nt[1]==0)return Rr(Se,Ve);default:throw new Error("Major Version: Expected 3 or 4 saw "+Me)}He!==512&&(et=Se.slice(0,He),Oo(et,28));var Et=Se.slice(0,He);A(et,Me);var zt=et.read_shift(4,"i");if(Me===3&&zt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+zt);et.l+=4,Fe=et.read_shift(4,"i"),et.l+=4,et.chk("00100000","Mini Stream Cutoff Size: "),Ge=et.read_shift(4,"i"),Ne=et.read_shift(4,"i"),Ue=et.read_shift(4,"i"),xe=et.read_shift(4,"i");for(var Dt=-1,Vt=0;Vt<109&&(Dt=et.read_shift(4,"i"),!(Dt<0));++Vt)Ye[Vt]=Dt;var kr=m(Se,He);v(Ue,xe,kr,He,Ye);var ea=N(kr,Fe,Ye,He);ea[Fe].name="!Directory",Ne>0&&Ge!==M&&(ea[Ge].name="!MiniFAT"),ea[Ye[0]].name="!FAT",ea.fat_addrs=Ye,ea.ssz=He;var ta={},oa=[],bs=[],Uo=[];E(Fe,ea,kr,oa,Ne,ta,bs,Ge),g(bs,Uo,oa),oa.shift();var ys={FileIndex:bs,FullPaths:Uo};return Ve&&Ve.raw&&(ys.raw={header:Et,sectors:kr}),ys}function f(Se){if(Se[Se.l]==80&&Se[Se.l+1]==75)return[0,0];Se.chk(H,"Header Signature: "),Se.l+=16;var Ve=Se.read_shift(2,"u");return[Se.read_shift(2,"u"),Ve]}function A(Se,Ve){var Me=9;switch(Se.l+=2,Me=Se.read_shift(2)){case 9:if(Ve!=3)throw new Error("Sector Shift: Expected 9 saw "+Me);break;case 12:if(Ve!=4)throw new Error("Sector Shift: Expected 12 saw "+Me);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Me)}Se.chk("0600","Mini Sector Shift: "),Se.chk("000000000000","Reserved: ")}function m(Se,Ve){for(var Me=Math.ceil(Se.length/Ve)-1,He=[],Ne=1;Ne<Me;++Ne)He[Ne-1]=Se.slice(Ne*Ve,(Ne+1)*Ve);return He[Me-1]=Se.slice(Me*Ve),He}function g(Se,Ve,Me){for(var He=0,Ne=0,xe=0,Fe=0,Ge=0,Ue=Me.length,Ye=[],et=[];He<Ue;++He)Ye[He]=et[He]=He,Ve[He]=Me[He];for(;Ge<et.length;++Ge)He=et[Ge],Ne=Se[He].L,xe=Se[He].R,Fe=Se[He].C,Ye[He]===He&&(Ne!==-1&&Ye[Ne]!==Ne&&(Ye[He]=Ye[Ne]),xe!==-1&&Ye[xe]!==xe&&(Ye[He]=Ye[xe])),Fe!==-1&&(Ye[Fe]=He),Ne!==-1&&He!=Ye[He]&&(Ye[Ne]=Ye[He],et.lastIndexOf(Ne)<Ge&&et.push(Ne)),xe!==-1&&He!=Ye[He]&&(Ye[xe]=Ye[He],et.lastIndexOf(xe)<Ge&&et.push(xe));for(He=1;He<Ue;++He)Ye[He]===He&&(xe!==-1&&Ye[xe]!==xe?Ye[He]=Ye[xe]:Ne!==-1&&Ye[Ne]!==Ne&&(Ye[He]=Ye[Ne]));for(He=1;He<Ue;++He)if(Se[He].type!==0){if(Ge=He,Ge!=Ye[Ge])do Ge=Ye[Ge],Ve[He]=Ve[Ge]+"/"+Ve[He];while(Ge!==0&&Ye[Ge]!==-1&&Ge!=Ye[Ge]);Ye[He]=-1}for(Ve[0]+="/",He=1;He<Ue;++He)Se[He].type!==2&&(Ve[He]+="/")}function x(Se,Ve,Me){for(var He=Se.start,Ne=Se.size,xe=[],Fe=He;Me&&Ne>0&&Fe>=0;)xe.push(Ve.slice(Fe*S,Fe*S+S)),Ne-=S,Fe=pg(Me,Fe*4);return xe.length===0?St(0):co(xe).slice(0,Se.size)}function v(Se,Ve,Me,He,Ne){var xe=M;if(Se===M){if(Ve!==0)throw new Error("DIFAT chain shorter than expected")}else if(Se!==-1){var Fe=Me[Se],Ge=(He>>>2)-1;if(!Fe)return;for(var Ue=0;Ue<Ge&&(xe=pg(Fe,Ue*4))!==M;++Ue)Ne.push(xe);v(pg(Fe,He-4),Ve-1,Me,He,Ne)}}function y(Se,Ve,Me,He,Ne){var xe=[],Fe=[];Ne||(Ne=[]);var Ge=He-1,Ue=0,Ye=0;for(Ue=Ve;Ue>=0;){Ne[Ue]=!0,xe[xe.length]=Ue,Fe.push(Se[Ue]);var et=Me[Math.floor(Ue*4/He)];if(Ye=Ue*4&Ge,He<4+Ye)throw new Error("FAT boundary crossed: "+Ue+" 4 "+He);if(!Se[et])break;Ue=pg(Se[et],Ye)}return{nodes:xe,data:z$([Fe])}}function N(Se,Ve,Me,He){var Ne=Se.length,xe=[],Fe=[],Ge=[],Ue=[],Ye=He-1,et=0,Nt=0,Et=0,zt=0;for(et=0;et<Ne;++et)if(Ge=[],Et=et+Ve,Et>=Ne&&(Et-=Ne),!Fe[Et]){Ue=[];var Dt=[];for(Nt=Et;Nt>=0;){Dt[Nt]=!0,Fe[Nt]=!0,Ge[Ge.length]=Nt,Ue.push(Se[Nt]);var Vt=Me[Math.floor(Nt*4/He)];if(zt=Nt*4&Ye,He<4+zt)throw new Error("FAT boundary crossed: "+Nt+" 4 "+He);if(!Se[Vt]||(Nt=pg(Se[Vt],zt),Dt[Nt]))break}xe[Et]={nodes:Ge,data:z$([Ue])}}return xe}function E(Se,Ve,Me,He,Ne,xe,Fe,Ge){for(var Ue=0,Ye=He.length?2:0,et=Ve[Se].data,Nt=0,Et=0,zt;Nt<et.length;Nt+=128){var Dt=et.slice(Nt,Nt+128);Oo(Dt,64),Et=Dt.read_shift(2),zt=pL(Dt,0,Et-Ye),He.push(zt);var Vt={name:zt,type:Dt.read_shift(1),color:Dt.read_shift(1),L:Dt.read_shift(4,"i"),R:Dt.read_shift(4,"i"),C:Dt.read_shift(4,"i"),clsid:Dt.read_shift(16),state:Dt.read_shift(4,"i"),start:0,size:0},kr=Dt.read_shift(2)+Dt.read_shift(2)+Dt.read_shift(2)+Dt.read_shift(2);kr!==0&&(Vt.ct=B(Dt,Dt.l-8));var ea=Dt.read_shift(2)+Dt.read_shift(2)+Dt.read_shift(2)+Dt.read_shift(2);ea!==0&&(Vt.mt=B(Dt,Dt.l-8)),Vt.start=Dt.read_shift(4,"i"),Vt.size=Dt.read_shift(4,"i"),Vt.size<0&&Vt.start<0&&(Vt.size=Vt.type=0,Vt.start=M,Vt.name=""),Vt.type===5?(Ue=Vt.start,Ne>0&&Ue!==M&&(Ve[Ue].name="!StreamData")):Vt.size>=4096?(Vt.storage="fat",Ve[Vt.start]===void 0&&(Ve[Vt.start]=y(Me,Vt.start,Ve.fat_addrs,Ve.ssz)),Ve[Vt.start].name=Vt.name,Vt.content=Ve[Vt.start].data.slice(0,Vt.size)):(Vt.storage="minifat",Vt.size<0?Vt.size=0:Ue!==M&&Vt.start!==M&&Ve[Ue]&&(Vt.content=x(Vt,Ve[Ue].data,(Ve[Ge]||{}).data))),Vt.content&&Oo(Vt.content,0),xe[zt]=Vt,Fe.push(Vt)}}function B(Se,Ve){return new Date((id(Se,Ve+4)/1e7*Math.pow(2,32)+id(Se,Ve)/1e7-11644473600)*1e3)}function _(Se,Ve){return d(),u(c.readFileSync(Se),Ve)}function I(Se,Ve){var Me=Ve&&Ve.type;switch(Me||fa&&Buffer.isBuffer(Se)&&(Me="buffer"),Me||"base64"){case"file":return _(Se,Ve);case"base64":return u(dd(vd(Se)),Ve);case"binary":return u(dd(Se),Ve)}return u(Se,Ve)}function j(Se,Ve){var Me=Ve||{},He=Me.root||"Root Entry";if(Se.FullPaths||(Se.FullPaths=[]),Se.FileIndex||(Se.FileIndex=[]),Se.FullPaths.length!==Se.FileIndex.length)throw new Error("inconsistent CFB structure");Se.FullPaths.length===0&&(Se.FullPaths[0]=He+"/",Se.FileIndex[0]={name:He,type:5}),Me.CLSID&&(Se.FileIndex[0].clsid=Me.CLSID),k(Se)}function k(Se){var Ve="Sh33tJ5";if(!jr.find(Se,"/"+Ve)){var Me=St(4);Me[0]=55,Me[1]=Me[3]=50,Me[2]=54,Se.FileIndex.push({name:Ve,type:2,content:Me,size:4,L:69,R:69,C:69}),Se.FullPaths.push(Se.FullPaths[0]+Ve),T(Se)}}function T(Se,Ve){j(Se);for(var Me=!1,He=!1,Ne=Se.FullPaths.length-1;Ne>=0;--Ne){var xe=Se.FileIndex[Ne];switch(xe.type){case 0:He?Me=!0:(Se.FileIndex.pop(),Se.FullPaths.pop());break;case 1:case 2:case 5:He=!0,isNaN(xe.R*xe.L*xe.C)&&(Me=!0),xe.R>-1&&xe.L>-1&&xe.R==xe.L&&(Me=!0);break;default:Me=!0;break}}if(!(!Me&&!Ve)){var Fe=new Date(1987,1,19),Ge=0,Ue=Object.create?Object.create(null):{},Ye=[];for(Ne=0;Ne<Se.FullPaths.length;++Ne)Ue[Se.FullPaths[Ne]]=!0,Se.FileIndex[Ne].type!==0&&Ye.push([Se.FullPaths[Ne],Se.FileIndex[Ne]]);for(Ne=0;Ne<Ye.length;++Ne){var et=a(Ye[Ne][0]);He=Ue[et],He||(Ye.push([et,{name:n(et).replace("/",""),type:1,clsid:Q,ct:Fe,mt:Fe,content:null}]),Ue[et]=!0)}for(Ye.sort(function(zt,Dt){return r(zt[0],Dt[0])}),Se.FullPaths=[],Se.FileIndex=[],Ne=0;Ne<Ye.length;++Ne)Se.FullPaths[Ne]=Ye[Ne][0],Se.FileIndex[Ne]=Ye[Ne][1];for(Ne=0;Ne<Ye.length;++Ne){var Nt=Se.FileIndex[Ne],Et=Se.FullPaths[Ne];if(Nt.name=n(Et).replace("/",""),Nt.L=Nt.R=Nt.C=-(Nt.color=1),Nt.size=Nt.content?Nt.content.length:0,Nt.start=0,Nt.clsid=Nt.clsid||Q,Ne===0)Nt.C=Ye.length>1?1:-1,Nt.size=0,Nt.type=5;else if(Et.slice(-1)=="/"){for(Ge=Ne+1;Ge<Ye.length&&a(Se.FullPaths[Ge])!=Et;++Ge);for(Nt.C=Ge>=Ye.length?-1:Ge,Ge=Ne+1;Ge<Ye.length&&a(Se.FullPaths[Ge])!=a(Et);++Ge);Nt.R=Ge>=Ye.length?-1:Ge,Nt.type=1}else a(Se.FullPaths[Ne+1]||"")==a(Et)&&(Nt.R=Ne+1),Nt.type=2}}}function L(Se,Ve){var Me=Ve||{};if(Me.fileType=="mad")return tr(Se,Me);switch(T(Se),Me.fileType){case"zip":return Rn(Se,Me)}var He=function(zt){for(var Dt=0,Vt=0,kr=0;kr<zt.FileIndex.length;++kr){var ea=zt.FileIndex[kr];if(ea.content){var ta=ea.content.length;ta>0&&(ta<4096?Dt+=ta+63>>6:Vt+=ta+511>>9)}}for(var oa=zt.FullPaths.length+3>>2,bs=Dt+7>>3,Uo=Dt+127>>7,ys=bs+Vt+oa+Uo,fi=ys+127>>7,zs=fi<=109?0:Math.ceil((fi-109)/127);ys+fi+zs+127>>7>fi;)zs=++fi<=109?0:Math.ceil((fi-109)/127);var Bi=[1,zs,fi,Uo,oa,Vt,Dt,0];return zt.FileIndex[0].size=Dt<<6,Bi[7]=(zt.FileIndex[0].start=Bi[0]+Bi[1]+Bi[2]+Bi[3]+Bi[4]+Bi[5])+(Bi[6]+7>>3),Bi}(Se),Ne=St(He[7]<<9),xe=0,Fe=0;{for(xe=0;xe<8;++xe)Ne.write_shift(1,K[xe]);for(xe=0;xe<8;++xe)Ne.write_shift(2,0);for(Ne.write_shift(2,62),Ne.write_shift(2,3),Ne.write_shift(2,65534),Ne.write_shift(2,9),Ne.write_shift(2,6),xe=0;xe<3;++xe)Ne.write_shift(2,0);for(Ne.write_shift(4,0),Ne.write_shift(4,He[2]),Ne.write_shift(4,He[0]+He[1]+He[2]+He[3]-1),Ne.write_shift(4,0),Ne.write_shift(4,4096),Ne.write_shift(4,He[3]?He[0]+He[1]+He[2]-1:M),Ne.write_shift(4,He[3]),Ne.write_shift(-4,He[1]?He[0]-1:M),Ne.write_shift(4,He[1]),xe=0;xe<109;++xe)Ne.write_shift(-4,xe<He[2]?He[1]+xe:-1)}if(He[1])for(Fe=0;Fe<He[1];++Fe){for(;xe<236+Fe*127;++xe)Ne.write_shift(-4,xe<He[2]?He[1]+xe:-1);Ne.write_shift(-4,Fe===He[1]-1?M:Fe+1)}var Ge=function(zt){for(Fe+=zt;xe<Fe-1;++xe)Ne.write_shift(-4,xe+1);zt&&(++xe,Ne.write_shift(-4,M))};for(Fe=xe=0,Fe+=He[1];xe<Fe;++xe)Ne.write_shift(-4,G.DIFSECT);for(Fe+=He[2];xe<Fe;++xe)Ne.write_shift(-4,G.FATSECT);Ge(He[3]),Ge(He[4]);for(var Ue=0,Ye=0,et=Se.FileIndex[0];Ue<Se.FileIndex.length;++Ue)et=Se.FileIndex[Ue],et.content&&(Ye=et.content.length,!(Ye<4096)&&(et.start=Fe,Ge(Ye+511>>9)));for(Ge(He[6]+7>>3);Ne.l&511;)Ne.write_shift(-4,G.ENDOFCHAIN);for(Fe=xe=0,Ue=0;Ue<Se.FileIndex.length;++Ue)et=Se.FileIndex[Ue],et.content&&(Ye=et.content.length,!(!Ye||Ye>=4096)&&(et.start=Fe,Ge(Ye+63>>6)));for(;Ne.l&511;)Ne.write_shift(-4,G.ENDOFCHAIN);for(xe=0;xe<He[4]<<2;++xe){var Nt=Se.FullPaths[xe];if(!Nt||Nt.length===0){for(Ue=0;Ue<17;++Ue)Ne.write_shift(4,0);for(Ue=0;Ue<3;++Ue)Ne.write_shift(4,-1);for(Ue=0;Ue<12;++Ue)Ne.write_shift(4,0);continue}et=Se.FileIndex[xe],xe===0&&(et.start=et.size?et.start-1:M);var Et=xe===0&&Me.root||et.name;if(Ye=2*(Et.length+1),Ne.write_shift(64,Et,"utf16le"),Ne.write_shift(2,Ye),Ne.write_shift(1,et.type),Ne.write_shift(1,et.color),Ne.write_shift(-4,et.L),Ne.write_shift(-4,et.R),Ne.write_shift(-4,et.C),et.clsid)Ne.write_shift(16,et.clsid,"hex");else for(Ue=0;Ue<4;++Ue)Ne.write_shift(4,0);Ne.write_shift(4,et.state||0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,et.start),Ne.write_shift(4,et.size),Ne.write_shift(4,0)}for(xe=1;xe<Se.FileIndex.length;++xe)if(et=Se.FileIndex[xe],et.size>=4096)if(Ne.l=et.start+1<<9,fa&&Buffer.isBuffer(et.content))et.content.copy(Ne,Ne.l,0,et.size),Ne.l+=et.size+511&-512;else{for(Ue=0;Ue<et.size;++Ue)Ne.write_shift(1,et.content[Ue]);for(;Ue&511;++Ue)Ne.write_shift(1,0)}for(xe=1;xe<Se.FileIndex.length;++xe)if(et=Se.FileIndex[xe],et.size>0&&et.size<4096)if(fa&&Buffer.isBuffer(et.content))et.content.copy(Ne,Ne.l,0,et.size),Ne.l+=et.size+63&-64;else{for(Ue=0;Ue<et.size;++Ue)Ne.write_shift(1,et.content[Ue]);for(;Ue&63;++Ue)Ne.write_shift(1,0)}if(fa)Ne.l=Ne.length;else for(;Ne.l<Ne.length;)Ne.write_shift(1,0);return Ne}function F(Se,Ve){var Me=Se.FullPaths.map(function(Ue){return Ue.toUpperCase()}),He=Me.map(function(Ue){var Ye=Ue.split("/");return Ye[Ye.length-(Ue.slice(-1)=="/"?2:1)]}),Ne=!1;Ve.charCodeAt(0)===47?(Ne=!0,Ve=Me[0].slice(0,-1)+Ve):Ne=Ve.indexOf("/")!==-1;var xe=Ve.toUpperCase(),Fe=Ne===!0?Me.indexOf(xe):He.indexOf(xe);if(Fe!==-1)return Se.FileIndex[Fe];var Ge=!xe.match(Qw);for(xe=xe.replace(Gl,""),Ge&&(xe=xe.replace(Qw,"!")),Fe=0;Fe<Me.length;++Fe)if((Ge?Me[Fe].replace(Qw,"!"):Me[Fe]).replace(Gl,"")==xe||(Ge?He[Fe].replace(Qw,"!"):He[Fe]).replace(Gl,"")==xe)return Se.FileIndex[Fe];return null}var S=64,M=-2,H="d0cf11e0a1b11ae1",K=[208,207,17,224,161,177,26,225],Q="00000000000000000000000000000000",G={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:M,FREESECT:-1,HEADER_SIGNATURE:H,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Q,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function X(Se,Ve,Me){d();var He=L(Se,Me);c.writeFileSync(Ve,He)}function Z(Se){for(var Ve=new Array(Se.length),Me=0;Me<Se.length;++Me)Ve[Me]=String.fromCharCode(Se[Me]);return Ve.join("")}function U(Se,Ve){var Me=L(Se,Ve);switch(Ve&&Ve.type||"buffer"){case"file":return d(),c.writeFileSync(Ve.filename,Me),Me;case"binary":return typeof Me=="string"?Me:Z(Me);case"base64":return rN(typeof Me=="string"?Me:Z(Me));case"buffer":if(fa)return Buffer.isBuffer(Me)?Me:xA(Me);case"array":return typeof Me=="string"?dd(Me):Me}return Me}var Y;function P(Se){try{var Ve=Se.InflateRaw,Me=new Ve;if(Me._processChunk(new Uint8Array([3,0]),Me._finishFlushFlag),Me.bytesRead)Y=Se;else throw new Error("zlib does not expose bytesRead")}catch(He){console.error("cannot use native zlib: "+(He.message||He))}}function D(Se,Ve){if(!Y)return yr(Se,Ve);var Me=Y.InflateRaw,He=new Me,Ne=He._processChunk(Se.slice(Se.l),He._finishFlushFlag);return Se.l+=He.bytesRead,Ne}function W(Se){return Y?Y.deflateRawSync(Se):ct(Se)}var J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ce=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ie=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function re(Se){var Ve=(Se<<1|Se<<11)&139536|(Se<<5|Se<<15)&558144;return(Ve>>16|Ve>>8|Ve)&255}for(var de=typeof Uint8Array<"u",oe=de?new Uint8Array(256):[],be=0;be<256;++be)oe[be]=re(be);function q(Se,Ve){var Me=oe[Se&255];return Ve<=8?Me>>>8-Ve:(Me=Me<<8|oe[Se>>8&255],Ve<=16?Me>>>16-Ve:(Me=Me<<8|oe[Se>>16&255],Me>>>24-Ve))}function we(Se,Ve){var Me=Ve&7,He=Ve>>>3;return(Se[He]|(Me<=6?0:Se[He+1]<<8))>>>Me&3}function Te(Se,Ve){var Me=Ve&7,He=Ve>>>3;return(Se[He]|(Me<=5?0:Se[He+1]<<8))>>>Me&7}function Ee(Se,Ve){var Me=Ve&7,He=Ve>>>3;return(Se[He]|(Me<=4?0:Se[He+1]<<8))>>>Me&15}function ue(Se,Ve){var Me=Ve&7,He=Ve>>>3;return(Se[He]|(Me<=3?0:Se[He+1]<<8))>>>Me&31}function ge(Se,Ve){var Me=Ve&7,He=Ve>>>3;return(Se[He]|(Me<=1?0:Se[He+1]<<8))>>>Me&127}function he(Se,Ve,Me){var He=Ve&7,Ne=Ve>>>3,xe=(1<<Me)-1,Fe=Se[Ne]>>>He;return Me<8-He||(Fe|=Se[Ne+1]<<8-He,Me<16-He)||(Fe|=Se[Ne+2]<<16-He,Me<24-He)||(Fe|=Se[Ne+3]<<24-He),Fe&xe}function ve(Se,Ve,Me){var He=Ve&7,Ne=Ve>>>3;return He<=5?Se[Ne]|=(Me&7)<<He:(Se[Ne]|=Me<<He&255,Se[Ne+1]=(Me&7)>>8-He),Ve+3}function le(Se,Ve,Me){var He=Ve&7,Ne=Ve>>>3;return Me=(Me&1)<<He,Se[Ne]|=Me,Ve+1}function ne(Se,Ve,Me){var He=Ve&7,Ne=Ve>>>3;return Me<<=He,Se[Ne]|=Me&255,Me>>>=8,Se[Ne+1]=Me,Ve+8}function Ae(Se,Ve,Me){var He=Ve&7,Ne=Ve>>>3;return Me<<=He,Se[Ne]|=Me&255,Me>>>=8,Se[Ne+1]=Me&255,Se[Ne+2]=Me>>>8,Ve+16}function pe(Se,Ve){var Me=Se.length,He=2*Me>Ve?2*Me:Ve+5,Ne=0;if(Me>=Ve)return Se;if(fa){var xe=E$(He);if(Se.copy)Se.copy(xe);else for(;Ne<Se.length;++Ne)xe[Ne]=Se[Ne];return xe}else if(de){var Fe=new Uint8Array(He);if(Fe.set)Fe.set(Se);else for(;Ne<Me;++Ne)Fe[Ne]=Se[Ne];return Fe}return Se.length=He,Se}function ke(Se){for(var Ve=new Array(Se),Me=0;Me<Se;++Me)Ve[Me]=0;return Ve}function Le(Se,Ve,Me){var He=1,Ne=0,xe=0,Fe=0,Ge=0,Ue=Se.length,Ye=de?new Uint16Array(32):ke(32);for(xe=0;xe<32;++xe)Ye[xe]=0;for(xe=Ue;xe<Me;++xe)Se[xe]=0;Ue=Se.length;var et=de?new Uint16Array(Ue):ke(Ue);for(xe=0;xe<Ue;++xe)Ye[Ne=Se[xe]]++,He<Ne&&(He=Ne),et[xe]=0;for(Ye[0]=0,xe=1;xe<=He;++xe)Ye[xe+16]=Ge=Ge+Ye[xe-1]<<1;for(xe=0;xe<Ue;++xe)Ge=Se[xe],Ge!=0&&(et[xe]=Ye[Ge+16]++);var Nt=0;for(xe=0;xe<Ue;++xe)if(Nt=Se[xe],Nt!=0)for(Ge=q(et[xe],He)>>He-Nt,Fe=(1<<He+4-Nt)-1;Fe>=0;--Fe)Ve[Ge|Fe<<Nt]=Nt&15|xe<<4;return He}var qe=de?new Uint16Array(512):ke(512),ze=de?new Uint16Array(32):ke(32);if(!de){for(var Re=0;Re<512;++Re)qe[Re]=0;for(Re=0;Re<32;++Re)ze[Re]=0}(function(){for(var Se=[],Ve=0;Ve<32;Ve++)Se.push(5);Le(Se,ze,32);var Me=[];for(Ve=0;Ve<=143;Ve++)Me.push(8);for(;Ve<=255;Ve++)Me.push(9);for(;Ve<=279;Ve++)Me.push(7);for(;Ve<=287;Ve++)Me.push(8);Le(Me,qe,288)})();var We=function(){for(var Ve=de?new Uint8Array(32768):[],Me=0,He=0;Me<ie.length-1;++Me)for(;He<ie[Me+1];++He)Ve[He]=Me;for(;He<32768;++He)Ve[He]=29;var Ne=de?new Uint8Array(259):[];for(Me=0,He=0;Me<ce.length-1;++Me)for(;He<ce[Me+1];++He)Ne[He]=Me;function xe(Ge,Ue){for(var Ye=0;Ye<Ge.length;){var et=Math.min(65535,Ge.length-Ye),Nt=Ye+et==Ge.length;for(Ue.write_shift(1,+Nt),Ue.write_shift(2,et),Ue.write_shift(2,~et&65535);et-- >0;)Ue[Ue.l++]=Ge[Ye++]}return Ue.l}function Fe(Ge,Ue){for(var Ye=0,et=0,Nt=de?new Uint16Array(32768):[];et<Ge.length;){var Et=Math.min(65535,Ge.length-et);if(Et<10){for(Ye=ve(Ue,Ye,+(et+Et==Ge.length)),Ye&7&&(Ye+=8-(Ye&7)),Ue.l=Ye/8|0,Ue.write_shift(2,Et),Ue.write_shift(2,~Et&65535);Et-- >0;)Ue[Ue.l++]=Ge[et++];Ye=Ue.l*8;continue}Ye=ve(Ue,Ye,+(et+Et==Ge.length)+2);for(var zt=0;Et-- >0;){var Dt=Ge[et];zt=(zt<<5^Dt)&32767;var Vt=-1,kr=0;if((Vt=Nt[zt])&&(Vt|=et&-32768,Vt>et&&(Vt-=32768),Vt<et))for(;Ge[Vt+kr]==Ge[et+kr]&&kr<250;)++kr;if(kr>2){Dt=Ne[kr],Dt<=22?Ye=ne(Ue,Ye,oe[Dt+1]>>1)-1:(ne(Ue,Ye,3),Ye+=5,ne(Ue,Ye,oe[Dt-23]>>5),Ye+=3);var ea=Dt<8?0:Dt-4>>2;ea>0&&(Ae(Ue,Ye,kr-ce[Dt]),Ye+=ea),Dt=Ve[et-Vt],Ye=ne(Ue,Ye,oe[Dt]>>3),Ye-=3;var ta=Dt<4?0:Dt-2>>1;ta>0&&(Ae(Ue,Ye,et-Vt-ie[Dt]),Ye+=ta);for(var oa=0;oa<kr;++oa)Nt[zt]=et&32767,zt=(zt<<5^Ge[et])&32767,++et;Et-=kr-1}else Dt<=143?Dt=Dt+48:Ye=le(Ue,Ye,1),Ye=ne(Ue,Ye,oe[Dt]),Nt[zt]=et&32767,++et}Ye=ne(Ue,Ye,0)-1}return Ue.l=(Ye+7)/8|0,Ue.l}return function(Ue,Ye){return Ue.length<8?xe(Ue,Ye):Fe(Ue,Ye)}}();function ct(Se){var Ve=St(50+Math.floor(Se.length*1.1)),Me=We(Se,Ve);return Ve.slice(0,Me)}var Ze=de?new Uint16Array(32768):ke(32768),Qe=de?new Uint16Array(32768):ke(32768),wt=de?new Uint16Array(128):ke(128),ar=1,qt=1;function gr(Se,Ve){var Me=ue(Se,Ve)+257;Ve+=5;var He=ue(Se,Ve)+1;Ve+=5;var Ne=Ee(Se,Ve)+4;Ve+=4;for(var xe=0,Fe=de?new Uint8Array(19):ke(19),Ge=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ue=1,Ye=de?new Uint8Array(8):ke(8),et=de?new Uint8Array(8):ke(8),Nt=Fe.length,Et=0;Et<Ne;++Et)Fe[J[Et]]=xe=Te(Se,Ve),Ue<xe&&(Ue=xe),Ye[xe]++,Ve+=3;var zt=0;for(Ye[0]=0,Et=1;Et<=Ue;++Et)et[Et]=zt=zt+Ye[Et-1]<<1;for(Et=0;Et<Nt;++Et)(zt=Fe[Et])!=0&&(Ge[Et]=et[zt]++);var Dt=0;for(Et=0;Et<Nt;++Et)if(Dt=Fe[Et],Dt!=0){zt=oe[Ge[Et]]>>8-Dt;for(var Vt=(1<<7-Dt)-1;Vt>=0;--Vt)wt[zt|Vt<<Dt]=Dt&7|Et<<3}var kr=[];for(Ue=1;kr.length<Me+He;)switch(zt=wt[ge(Se,Ve)],Ve+=zt&7,zt>>>=3){case 16:for(xe=3+we(Se,Ve),Ve+=2,zt=kr[kr.length-1];xe-- >0;)kr.push(zt);break;case 17:for(xe=3+Te(Se,Ve),Ve+=3;xe-- >0;)kr.push(0);break;case 18:for(xe=11+ge(Se,Ve),Ve+=7;xe-- >0;)kr.push(0);break;default:kr.push(zt),Ue<zt&&(Ue=zt);break}var ea=kr.slice(0,Me),ta=kr.slice(Me);for(Et=Me;Et<286;++Et)ea[Et]=0;for(Et=He;Et<30;++Et)ta[Et]=0;return ar=Le(ea,Ze,286),qt=Le(ta,Qe,30),Ve}function Pr(Se,Ve){if(Se[0]==3&&!(Se[1]&3))return[lp(Ve),2];for(var Me=0,He=0,Ne=E$(Ve||1<<18),xe=0,Fe=Ne.length>>>0,Ge=0,Ue=0;(He&1)==0;){if(He=Te(Se,Me),Me+=3,He>>>1)He>>1==1?(Ge=9,Ue=5):(Me=gr(Se,Me),Ge=ar,Ue=qt);else{Me&7&&(Me+=8-(Me&7));var Ye=Se[Me>>>3]|Se[(Me>>>3)+1]<<8;if(Me+=32,Ye>0)for(!Ve&&Fe<xe+Ye&&(Ne=pe(Ne,xe+Ye),Fe=Ne.length);Ye-- >0;)Ne[xe++]=Se[Me>>>3],Me+=8;continue}for(;;){!Ve&&Fe<xe+32767&&(Ne=pe(Ne,xe+32767),Fe=Ne.length);var et=he(Se,Me,Ge),Nt=He>>>1==1?qe[et]:Ze[et];if(Me+=Nt&15,Nt>>>=4,(Nt>>>8&255)===0)Ne[xe++]=Nt;else{if(Nt==256)break;Nt-=257;var Et=Nt<8?0:Nt-4>>2;Et>5&&(Et=0);var zt=xe+ce[Nt];Et>0&&(zt+=he(Se,Me,Et),Me+=Et),et=he(Se,Me,Ue),Nt=He>>>1==1?ze[et]:Qe[et],Me+=Nt&15,Nt>>>=4;var Dt=Nt<4?0:Nt-2>>1,Vt=ie[Nt];for(Dt>0&&(Vt+=he(Se,Me,Dt),Me+=Dt),!Ve&&Fe<zt&&(Ne=pe(Ne,zt+100),Fe=Ne.length);xe<zt;)Ne[xe]=Ne[xe-Vt],++xe}}}return Ve?[Ne,Me+7>>>3]:[Ne.slice(0,xe),Me+7>>>3]}function yr(Se,Ve){var Me=Se.slice(Se.l||0),He=Pr(Me,Ve);return Se.l+=He[1],He[0]}function Tn(Se,Ve){if(Se)typeof console<"u"&&console.error(Ve);else throw new Error(Ve)}function Rr(Se,Ve){var Me=Se;Oo(Me,0);var He=[],Ne=[],xe={FileIndex:He,FullPaths:Ne};j(xe,{root:Ve.root});for(var Fe=Me.length-4;(Me[Fe]!=80||Me[Fe+1]!=75||Me[Fe+2]!=5||Me[Fe+3]!=6)&&Fe>=0;)--Fe;Me.l=Fe+4,Me.l+=4;var Ge=Me.read_shift(2);Me.l+=6;var Ue=Me.read_shift(4);for(Me.l=Ue,Fe=0;Fe<Ge;++Fe){Me.l+=20;var Ye=Me.read_shift(4),et=Me.read_shift(4),Nt=Me.read_shift(2),Et=Me.read_shift(2),zt=Me.read_shift(2);Me.l+=8;var Dt=Me.read_shift(4),Vt=l(Me.slice(Me.l+Nt,Me.l+Nt+Et));Me.l+=Nt+Et+zt;var kr=Me.l;Me.l=Dt+4,Ha(Me,Ye,et,xe,Vt),Me.l=kr}return xe}function Ha(Se,Ve,Me,He,Ne){Se.l+=2;var xe=Se.read_shift(2),Fe=Se.read_shift(2),Ge=o(Se);if(xe&8257)throw new Error("Unsupported ZIP encryption");for(var Ue=Se.read_shift(4),Ye=Se.read_shift(4),et=Se.read_shift(4),Nt=Se.read_shift(2),Et=Se.read_shift(2),zt="",Dt=0;Dt<Nt;++Dt)zt+=String.fromCharCode(Se[Se.l++]);if(Et){var Vt=l(Se.slice(Se.l,Se.l+Et));(Vt[21589]||{}).mt&&(Ge=Vt[21589].mt),((Ne||{})[21589]||{}).mt&&(Ge=Ne[21589].mt)}Se.l+=Et;var kr=Se.slice(Se.l,Se.l+Ye);switch(Fe){case 8:kr=D(Se,et);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Fe)}var ea=!1;xe&8&&(Ue=Se.read_shift(4),Ue==134695760&&(Ue=Se.read_shift(4),ea=!0),Ye=Se.read_shift(4),et=Se.read_shift(4)),Ye!=Ve&&Tn(ea,"Bad compressed size: "+Ve+" != "+Ye),et!=Me&&Tn(ea,"Bad uncompressed size: "+Me+" != "+et),ca(He,zt,kr,{unsafe:!0,mt:Ge})}function Rn(Se,Ve){var Me=Ve||{},He=[],Ne=[],xe=St(1),Fe=Me.compression?8:0,Ge=0,Ue=0,Ye=0,et=0,Nt=0,Et=Se.FullPaths[0],zt=Et,Dt=Se.FileIndex[0],Vt=[],kr=0;for(Ue=1;Ue<Se.FullPaths.length;++Ue)if(zt=Se.FullPaths[Ue].slice(Et.length),Dt=Se.FileIndex[Ue],!(!Dt.size||!Dt.content||zt=="Sh33tJ5")){var ea=et,ta=St(zt.length);for(Ye=0;Ye<zt.length;++Ye)ta.write_shift(1,zt.charCodeAt(Ye)&127);ta=ta.slice(0,ta.l),Vt[Nt]=iSe.buf(Dt.content,0);var oa=Dt.content;Fe==8&&(oa=W(oa)),xe=St(30),xe.write_shift(4,67324752),xe.write_shift(2,20),xe.write_shift(2,Ge),xe.write_shift(2,Fe),Dt.mt?i(xe,Dt.mt):xe.write_shift(4,0),xe.write_shift(-4,Vt[Nt]),xe.write_shift(4,oa.length),xe.write_shift(4,Dt.content.length),xe.write_shift(2,ta.length),xe.write_shift(2,0),et+=xe.length,He.push(xe),et+=ta.length,He.push(ta),et+=oa.length,He.push(oa),xe=St(46),xe.write_shift(4,33639248),xe.write_shift(2,0),xe.write_shift(2,20),xe.write_shift(2,Ge),xe.write_shift(2,Fe),xe.write_shift(4,0),xe.write_shift(-4,Vt[Nt]),xe.write_shift(4,oa.length),xe.write_shift(4,Dt.content.length),xe.write_shift(2,ta.length),xe.write_shift(2,0),xe.write_shift(2,0),xe.write_shift(2,0),xe.write_shift(2,0),xe.write_shift(4,0),xe.write_shift(4,ea),kr+=xe.l,Ne.push(xe),kr+=ta.length,Ne.push(ta),++Nt}return xe=St(22),xe.write_shift(4,101010256),xe.write_shift(2,0),xe.write_shift(2,0),xe.write_shift(2,Nt),xe.write_shift(2,Nt),xe.write_shift(4,kr),xe.write_shift(4,et),xe.write_shift(2,0),co([co(He),co(Ne),xe])}var Lr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function pr(Se,Ve){if(Se.ctype)return Se.ctype;var Me=Se.name||"",He=Me.match(/\.([^\.]+)$/);return He&&Lr[He[1]]||Ve&&(He=(Me=Ve).match(/[\.\\]([^\.\\])+$/),He&&Lr[He[1]])?Lr[He[1]]:"application/octet-stream"}function Jr(Se){for(var Ve=rN(Se),Me=[],He=0;He<Ve.length;He+=76)Me.push(Ve.slice(He,He+76));return Me.join(`\r
`)+`\r
`}function vs(Se){var Ve=Se.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ye){var et=Ye.charCodeAt(0).toString(16).toUpperCase();return"="+(et.length==1?"0"+et:et)});Ve=Ve.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ve.charAt(0)==`
`&&(Ve="=0D"+Ve.slice(1)),Ve=Ve.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Me=[],He=Ve.split(`\r
`),Ne=0;Ne<He.length;++Ne){var xe=He[Ne];if(xe.length==0){Me.push("");continue}for(var Fe=0;Fe<xe.length;){var Ge=76,Ue=xe.slice(Fe,Fe+Ge);Ue.charAt(Ge-1)=="="?Ge--:Ue.charAt(Ge-2)=="="?Ge-=2:Ue.charAt(Ge-3)=="="&&(Ge-=3),Ue=xe.slice(Fe,Fe+Ge),Fe+=Ge,Fe<xe.length&&(Ue+="="),Me.push(Ue)}}return Me.join(`\r
`)}function Za(Se){for(var Ve=[],Me=0;Me<Se.length;++Me){for(var He=Se[Me];Me<=Se.length&&He.charAt(He.length-1)=="=";)He=He.slice(0,He.length-1)+Se[++Me];Ve.push(He)}for(var Ne=0;Ne<Ve.length;++Ne)Ve[Ne]=Ve[Ne].replace(/[=][0-9A-Fa-f]{2}/g,function(xe){return String.fromCharCode(parseInt(xe.slice(1),16))});return dd(Ve.join(`\r
`))}function Ln(Se,Ve,Me){for(var He="",Ne="",xe="",Fe,Ge=0;Ge<10;++Ge){var Ue=Ve[Ge];if(!Ue||Ue.match(/^\s*$/))break;var Ye=Ue.match(/^(.*?):\s*([^\s].*)$/);if(Ye)switch(Ye[1].toLowerCase()){case"content-location":He=Ye[2].trim();break;case"content-type":xe=Ye[2].trim();break;case"content-transfer-encoding":Ne=Ye[2].trim();break}}switch(++Ge,Ne.toLowerCase()){case"base64":Fe=dd(vd(Ve.slice(Ge).join("")));break;case"quoted-printable":Fe=Za(Ve.slice(Ge));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ne)}var et=ca(Se,He.slice(Me.length),Fe,{unsafe:!0});xe&&(et.ctype=xe)}function Qs(Se,Ve){if(Z(Se.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Me=Ve&&Ve.root||"",He=(fa&&Buffer.isBuffer(Se)?Se.toString("binary"):Z(Se)).split(`\r
`),Ne=0,xe="";for(Ne=0;Ne<He.length;++Ne)if(xe=He[Ne],!!/^Content-Location:/i.test(xe)&&(xe=xe.slice(xe.indexOf("file")),Me||(Me=xe.slice(0,xe.lastIndexOf("/")+1)),xe.slice(0,Me.length)!=Me))for(;Me.length>0&&(Me=Me.slice(0,Me.length-1),Me=Me.slice(0,Me.lastIndexOf("/")+1),xe.slice(0,Me.length)!=Me););var Fe=(He[1]||"").match(/boundary="(.*?)"/);if(!Fe)throw new Error("MAD cannot find boundary");var Ge="--"+(Fe[1]||""),Ue=[],Ye=[],et={FileIndex:Ue,FullPaths:Ye};j(et);var Nt,Et=0;for(Ne=0;Ne<He.length;++Ne){var zt=He[Ne];zt!==Ge&&zt!==Ge+"--"||(Et++&&Ln(et,He.slice(Nt,Ne),Me),Nt=Ne)}return et}function tr(Se,Ve){var Me=Ve||{},He=Me.boundary||"SheetJS";He="------="+He;for(var Ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+He.slice(2)+'"',"","",""],xe=Se.FullPaths[0],Fe=xe,Ge=Se.FileIndex[0],Ue=1;Ue<Se.FullPaths.length;++Ue)if(Fe=Se.FullPaths[Ue].slice(xe.length),Ge=Se.FileIndex[Ue],!(!Ge.size||!Ge.content||Fe=="Sh33tJ5")){Fe=Fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(kr){return"_x"+kr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(kr){return"_u"+kr.charCodeAt(0).toString(16)+"_"});for(var Ye=Ge.content,et=fa&&Buffer.isBuffer(Ye)?Ye.toString("binary"):Z(Ye),Nt=0,Et=Math.min(1024,et.length),zt=0,Dt=0;Dt<=Et;++Dt)(zt=et.charCodeAt(Dt))>=32&&zt<128&&++Nt;var Vt=Nt>=Et*4/5;Ne.push(He),Ne.push("Content-Location: "+(Me.root||"file:///C:/SheetJS/")+Fe),Ne.push("Content-Transfer-Encoding: "+(Vt?"quoted-printable":"base64")),Ne.push("Content-Type: "+pr(Ge,Fe)),Ne.push(""),Ne.push(Vt?vs(et):Jr(et))}return Ne.push(He+`--\r
`),Ne.join(`\r
`)}function va(Se){var Ve={};return j(Ve,Se),Ve}function ca(Se,Ve,Me,He){var Ne=He&&He.unsafe;Ne||j(Se);var xe=!Ne&&jr.find(Se,Ve);if(!xe){var Fe=Se.FullPaths[0];Ve.slice(0,Fe.length)==Fe?Fe=Ve:(Fe.slice(-1)!="/"&&(Fe+="/"),Fe=(Fe+Ve).replace("//","/")),xe={name:n(Ve),type:2},Se.FileIndex.push(xe),Se.FullPaths.push(Fe),Ne||jr.utils.cfb_gc(Se)}return xe.content=Me,xe.size=Me?Me.length:0,He&&(He.CLSID&&(xe.clsid=He.CLSID),He.mt&&(xe.mt=He.mt),He.ct&&(xe.ct=He.ct)),xe}function Fa(Se,Ve){j(Se);var Me=jr.find(Se,Ve);if(Me){for(var He=0;He<Se.FileIndex.length;++He)if(Se.FileIndex[He]==Me)return Se.FileIndex.splice(He,1),Se.FullPaths.splice(He,1),!0}return!1}function Xa(Se,Ve,Me){j(Se);var He=jr.find(Se,Ve);if(He){for(var Ne=0;Ne<Se.FileIndex.length;++Ne)if(Se.FileIndex[Ne]==He)return Se.FileIndex[Ne].name=n(Me),Se.FullPaths[Ne]=Me,!0}return!1}function en(Se){T(Se,!0)}return t.find=F,t.read=I,t.parse=u,t.write=U,t.writeFile=X,t.utils={cfb_new:va,cfb_add:ca,cfb_del:Fa,cfb_mov:Xa,cfb_gc:en,ReadShift:A2,CheckField:kne,prep_blob:Oo,bconcat:co,use_zlib:P,_deflateRaw:ct,_inflateRaw:yr,consts:G},t}();function oSe(e){return typeof e=="string"?u4(e):Array.isArray(e)?O5e(e):e}function eE(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=u4(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var a=r=="utf8"?vh(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,e);if(typeof Blob<"u"){var n=new Blob([oSe(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(n,e);if(typeof saveAs<"u")return saveAs(n,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(n);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=Ep(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function lSe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+e)}function Ms(e){for(var t=Object.keys(e),r=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&r.push(t[a]);return r}function I$(e,t){for(var r=[],a=Ms(e),n=0;n!==a.length;++n)r[e[a[n]][t]]==null&&(r[e[a[n]][t]]=a[n]);return r}function h4(e){for(var t=[],r=Ms(e),a=0;a!==r.length;++a)t[e[r[a]]]=r[a];return t}function A4(e){for(var t=[],r=Ms(e),a=0;a!==r.length;++a)t[e[r[a]]]=parseInt(r[a],10);return t}function cSe(e){for(var t=[],r=Ms(e),a=0;a!==r.length;++a)t[e[r[a]]]==null&&(t[e[r[a]]]=[]),t[e[r[a]]].push(r[a]);return t}var Q5=new Date(1899,11,30,0,0,0);function Qi(e,t){var r=e.getTime(),a=Q5.getTime()+(e.getTimezoneOffset()-Q5.getTimezoneOffset())*6e4;return(r-a)/(1440*60*1e3)}var ine=new Date,dSe=Q5.getTime()+(ine.getTimezoneOffset()-Q5.getTimezoneOffset())*6e4,O$=ine.getTimezoneOffset();function m4(e){var t=new Date;return t.setTime(e*24*60*60*1e3+dSe),t.getTimezoneOffset()!==O$&&t.setTime(t.getTime()+(t.getTimezoneOffset()-O$)*6e4),t}function uSe(e){var t=0,r=0,a=!1,n=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!n)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=n.length;++i)if(n[i]){switch(r=1,i>3&&(a=!0),n[i].slice(n[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+n[i].slice(n[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(a)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(n[i],10)}return t}var D$=new Date("2017-02-19T19:06:09.000Z"),one=isNaN(D$.getFullYear())?new Date("2/19/17"):D$,fSe=one.getFullYear()==2017;function Xn(e,t){var r=new Date(e);if(fSe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(one.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return e.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var n=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function sx(e,t){if(fa&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return vh(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return vh(Kae(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return vh(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return vh(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(i){return r[i]||i})}catch{}for(var a=[],n=0;n!=e.length;++n)a.push(String.fromCharCode(e[n]));return a.join("")}function Yn(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Yn(e[r]));return t}function Os(e,t){for(var r="";r.length<t;)r+=e;return r}function cf(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(n,i){return r=-r,i}),!isNaN(t=Number(a)))?t/r:t}var hSe=["january","february","march","april","may","june","july","august","september","october","november","december"];function a1(e){var t=new Date(e),r=new Date(NaN),a=t.getYear(),n=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&hSe.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return a<0||a>8099?r:(n>0||i>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var ASe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,a,n){if(e||typeof a=="string")return r.split(a);for(var i=r.split(a),o=[i[0]],l=1;l<i.length;++l)o.push(n),o.push(i[l]);return o}}();function lne(e){return e?e.content&&e.type?sx(e.content,!0):e.data?Hw(e.data):e.asNodeBuffer&&fa?Hw(e.asNodeBuffer().toString("binary")):e.asBinary?Hw(e.asBinary()):e._data&&e._data.getContent?Hw(sx(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function cne(e){if(!e)return null;if(e.data)return w$(e.data);if(e.asNodeBuffer&&fa)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?w$(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function mSe(e){return e&&e.name.slice(-4)===".bin"?cne(e):lne(e)}function ru(e,t){for(var r=e.FullPaths||Ms(e.files),a=t.toLowerCase().replace(/[\/]/g,"\\"),n=a.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==o||n==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function dL(e,t){var r=ru(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function yi(e,t,r){if(!r)return mSe(dL(e,t));if(!t)return null;try{return yi(e,t)}catch{return null}}function ud(e,t,r){if(!r)return lne(dL(e,t));if(!t)return null;try{return ud(e,t)}catch{return null}}function pSe(e,t,r){return cne(dL(e,t))}function F$(e){for(var t=e.FullPaths||Ms(e.files),r=[],a=0;a<t.length;++a)t[a].slice(-1)!="/"&&r.push(t[a].replace(/^Root Entry[\/]/,""));return r.sort()}function na(e,t,r){if(e.FullPaths){if(typeof r=="string"){var a;return fa?a=xA(r):a=D5e(r),jr.utils.cfb_add(e,t,a)}jr.utils.cfb_add(e,t,r)}else e.file(t,r)}function uL(){return jr.utils.cfb_new()}function dne(e,t){switch(t.type){case"base64":return jr.read(e,{type:"base64"});case"binary":return jr.read(e,{type:"binary"});case"buffer":case"array":return jr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function zw(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var a=e.split("/");a.length!==0;){var n=a.shift();n===".."?r.pop():n!=="."&&r.push(n)}return r.join("/")}var di=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,gSe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,P$=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,xSe=/<[^>]*>/g,Tl=di.match(P$)?P$:xSe,vSe=/<\w*:/,bSe=/<(\/?)\w+:/;function Vr(e,t,r){for(var a={},n=0,i=0;n!==e.length&&!((i=e.charCodeAt(n))===32||i===10||i===13);++n);if(t||(a[0]=e.slice(0,n)),n===e.length)return a;var o=e.match(gSe),l=0,c="",d=0,u="",f="",A=1;if(o)for(d=0;d!=o.length;++d){for(f=o[d],i=0;i!=f.length&&f.charCodeAt(i)!==61;++i);for(u=f.slice(0,i).trim();f.charCodeAt(i+1)==32;)++i;for(A=(n=f.charCodeAt(i+1))==34||n==39?1:0,c=f.slice(i+1+A,f.length-A),l=0;l!=u.length&&u.charCodeAt(l)!==58;++l);if(l===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),a[u]=c,a[u.toLowerCase()]=c;else{var m=(l===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(l+1);if(a[m]&&u.slice(l-3,l)=="ext")continue;a[m]=c,a[m.toLowerCase()]=c}}return a}function Mh(e){return e.replace(bSe,"<$1")}var une={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},fL=h4(une),Ra=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(a){var n=a+"",i=n.indexOf("<![CDATA[");if(i==-1)return n.replace(e,function(l,c){return une[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=n.indexOf("]]>");return r(n.slice(0,i))+n.slice(i+9,o)+r(n.slice(o+3))}}(),hL=/[&<>'"]/g,ySe=/[\u0000-\u0008\u000b-\u001f]/g;function yn(e){var t=e+"";return t.replace(hL,function(r){return fL[r]}).replace(ySe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function R$(e){return yn(e).replace(/ /g,"_x0020_")}var fne=/[\u0000-\u001f]/g;function AL(e){var t=e+"";return t.replace(hL,function(r){return fL[r]}).replace(/\n/g,"<br/>").replace(fne,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function wSe(e){var t=e+"";return t.replace(hL,function(r){return fL[r]}).replace(fne,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var L$=function(){var e=/&#(\d+);/g;function t(r,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(e,t)}}();function NSe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Kn(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function MB(e){for(var t="",r=0,a=0,n=0,i=0,o=0,l=0;r<e.length;){if(a=e.charCodeAt(r++),a<128){t+=String.fromCharCode(a);continue}if(n=e.charCodeAt(r++),a>191&&a<224){o=(a&31)<<6,o|=n&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),a<240){t+=String.fromCharCode((a&15)<<12|(n&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((a&7)<<18|(n&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function M$(e){var t=lp(2*e.length),r,a,n=1,i=0,o=0,l;for(a=0;a<e.length;a+=n)n=1,(l=e.charCodeAt(a))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(a+1)&63),n=2):l<240?(r=(l&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),n=3):(n=4,r=(l&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function U$(e){return xA(e,"binary").toString("utf8")}var rj="foo bar bazâð£",Sn=fa&&(U$(rj)==MB(rj)&&U$||M$(rj)==MB(rj)&&M$)||MB,vh=fa?function(e){return xA(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,a=0,n=0;r<e.length;)switch(a=e.charCodeAt(r++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,n=e.charCodeAt(r++)-56320+(a<<10),t.push(String.fromCharCode(240+(n>>18&7))),t.push(String.fromCharCode(144+(n>>12&63))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},nN=function(){var e={};return function(r,a){var n=r+"|"+(a||"");return e[n]?e[n]:e[n]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",a||"")}}(),hne=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),n=0;n<e.length;++n)a=a.replace(e[n][0],e[n][1]);return a}}(),ESe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),CSe=/<\/?(?:vt:)?variant>/g,jSe=/<(?:vt:)([^>]*)>([\s\S]*)</;function H$(e,t){var r=Vr(e),a=e.match(ESe(r.baseType))||[],n=[];if(a.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+a.length+" != "+r.size);return n}return a.forEach(function(i){var o=i.replace(CSe,"").match(jSe);o&&n.push({v:Sn(o[2]),t:o[1]})}),n}var Ane=/(^\s|\s$|\n)/;function Do(e,t){return"<"+e+(t.match(Ane)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function sN(e){return Ms(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Wt(e,t,r){return"<"+e+(r!=null?sN(r):"")+(t!=null?(t.match(Ane)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function YD(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function kSe(e,t){switch(typeof e){case"string":var r=Wt("vt:lpwstr",yn(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Wt((e|0)==e?"vt:i4":"vt:r8",yn(String(e)));case"boolean":return Wt("vt:bool",e?"true":"false")}if(e instanceof Date)return Wt("vt:filetime",YD(e));throw new Error("Unable to serialize "+e)}function mL(e){if(fa&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Sn(Ep(oL(e)));throw new Error("Bad input format: expected Buffer or string")}var iN=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Mi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Sx=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],sd={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function SSe(e,t){for(var r=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),n=e[t+6]&15,i=5;i>=0;--i)n=n*256+e[t+i];return a==2047?n==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,n+=Math.pow(2,52)),r*Math.pow(2,a-52)*n)}function _Se(e,t,r){var a=(t<0||1/t==-1/0?1:0)<<7,n=0,i=0,o=a?-t:t;isFinite(o)?o==0?n=i=0:(n=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-n),n<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?n=-1022:(i-=Math.pow(2,52),n+=1023)):(n=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(n&15)<<4|i&15,e[r+7]=n>>4|a}var Q$=function(e){for(var t=[],r=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var n=0,i=e[0][a].length;n<i;n+=r)t.push.apply(t,e[0][a].slice(n,n+r));return t},z$=fa?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:xA(t)})):Q$(e)}:Q$,$$=function(e,t,r){for(var a=[],n=t;n<r;n+=2)a.push(String.fromCharCode(F0(e,n)));return a.join("").replace(Gl,"")},pL=fa?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Gl,""):$$(e,t,r)}:$$,V$=function(e,t,r){for(var a=[],n=t;n<t+r;++n)a.push(("0"+e[n].toString(16)).slice(-2));return a.join("")},mne=fa?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):V$(e,t,r)}:V$,G$=function(e,t,r){for(var a=[],n=t;n<r;n++)a.push(String.fromCharCode(Wv(e,n)));return a.join("")},tE=fa?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf8",r,a):G$(t,r,a)}:G$,pne=function(e,t){var r=id(e,t);return r>0?tE(e,t+4,t+4+r-1):""},gne=pne,xne=function(e,t){var r=id(e,t);return r>0?tE(e,t+4,t+4+r-1):""},vne=xne,bne=function(e,t){var r=2*id(e,t);return r>0?tE(e,t+4,t+4+r-1):""},yne=bne,wne=function(t,r){var a=id(t,r);return a>0?pL(t,r+4,r+4+a):""},Nne=wne,Ene=function(e,t){var r=id(e,t);return r>0?tE(e,t+4,t+4+r):""},Cne=Ene,jne=function(e,t){return SSe(e,t)},z5=jne,gL=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};fa&&(gne=function(t,r){if(!Buffer.isBuffer(t))return pne(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},vne=function(t,r){if(!Buffer.isBuffer(t))return xne(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},yne=function(t,r){if(!Buffer.isBuffer(t))return bne(t,r);var a=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a-1)},Nne=function(t,r){if(!Buffer.isBuffer(t))return wne(t,r);var a=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a)},Cne=function(t,r){if(!Buffer.isBuffer(t))return Ene(t,r);var a=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+a)},z5=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):jne(t,r)},gL=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Wv=function(e,t){return e[t]},F0=function(e,t){return e[t+1]*256+e[t]},TSe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},id=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},pg=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},BSe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function A2(e,t){var r="",a,n,i=[],o,l,c,d;switch(t){case"dbcs":if(d=this.l,fa&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(F0(this,d)),d+=2;e*=2;break;case"utf8":r=tE(this,this.l,this.l+e);break;case"utf16le":e*=2,r=pL(this,this.l,this.l+e);break;case"wstr":return A2.call(this,e,"dbcs");case"lpstr-ansi":r=gne(this,this.l),e=4+id(this,this.l);break;case"lpstr-cp":r=vne(this,this.l),e=4+id(this,this.l);break;case"lpwstr":r=yne(this,this.l),e=4+2*id(this,this.l);break;case"lpp4":e=4+id(this,this.l),r=Nne(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+id(this,this.l),r=Cne(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=Wv(this,this.l+e++))!==0;)i.push(tj(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=F0(this,this.l+e))!==0;)i.push(tj(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=Wv(this,d),this.l=d+1,l=A2.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(tj(F0(this,d))),d+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=Wv(this,d),this.l=d+1,l=A2.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(tj(Wv(this,d))),d+=1}r=i.join("");break;default:switch(e){case 1:return a=Wv(this,this.l),this.l++,a;case 2:return a=(t==="i"?TSe:F0)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(a=(e>0?pg:BSe)(this,this.l),this.l+=4,a):(n=id(this,this.l),this.l+=4,n);case 8:case-8:if(t==="f")return e==8?n=z5(this,this.l):n=z5([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;e=8;case 16:r=mne(this,this.l,e);break}}return this.l+=e,r}var ISe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},OSe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},DSe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function FSe(e,t,r){var a=0,n=0;if(r==="dbcs"){for(n=0;n!=t.length;++n)DSe(this,t.charCodeAt(n),this.l+2*n);a=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=t.length;++n)this[this.l+n]=t.charCodeAt(n)&255;a=t.length}else if(r==="hex"){for(;n<e;++n)this[this.l++]=parseInt(t.slice(2*n,2*n+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(n=0;n<Math.min(t.length,e);++n){var o=t.charCodeAt(n);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,ISe(this,t,this.l);break;case 8:if(a=8,r==="f"){_Se(this,t,this.l);break}case 16:break;case-4:a=4,OSe(this,t,this.l);break}return this.l+=a,this}function kne(e,t){var r=mne(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Oo(e,t){e.l=t,e.read_shift=A2,e.chk=kne,e.write_shift=FSe}function Sl(e,t){e.l+=t}function St(e){var t=lp(e);return Oo(t,0),t}function vA(e,t,r){if(e){var a,n,i;Oo(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var d=fN[l]||fN[65535];for(a=e.read_shift(1),i=a&127,n=1;n<4&&a&128;++n)i+=((a=e.read_shift(1))&127)<<7*n;c=e.l+i;var u=d.f&&d.f(e,i,r);if(e.l=c,t(u,d,l))return}}}function kc(){var e=[],t=fa?256:2048,r=function(d){var u=St(d);return Oo(u,0),u},a=r(t),n=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},i=function(d){return a&&d<a.length-a.l?a:(n(),a=r(Math.max(d+1,t)))},o=function(){return n(),co(e)},l=function(d){n(),a=d,a.l==null&&(a.l=a.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function Ut(e,t,r,a){var n=+t,i;if(!isNaN(n)){a||(a=fN[n].p||(r||[]).length||0),i=1+(n>=128?1:0)+1,a>=128&&++i,a>=16384&&++i,a>=2097152&&++i;var o=e.next(i);n<=127?o.write_shift(1,n):(o.write_shift(1,(n&127)+128),o.write_shift(1,n>>7));for(var l=0;l!=4;++l)if(a>=128)o.write_shift(1,(a&127)+128),a>>=7;else{o.write_shift(1,a);break}a>0&&gL(r)&&e.push(r)}}function m2(e,t,r){var a=Yn(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function q$(e,t,r){var a=Yn(e);return a.s=m2(a.s,t.s,r),a.e=m2(a.e,t.s,r),a}function p2(e,t){if(e.cRel&&e.c<0)for(e=Yn(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Yn(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Hr(e);return!e.cRel&&e.cRel!=null&&(r=LSe(r)),!e.rRel&&e.rRel!=null&&(r=PSe(r)),r}function UB(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+As(e.s.c)+":"+(e.e.cRel?"":"$")+As(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+li(e.s.r)+":"+(e.e.rRel?"":"$")+li(e.e.r):p2(e.s,t.biff)+":"+p2(e.e,t.biff)}function xL(e){return parseInt(RSe(e),10)-1}function li(e){return""+(e+1)}function PSe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function RSe(e){return e.replace(/\$(\d+)$/,"$1")}function vL(e){for(var t=MSe(e),r=0,a=0;a!==t.length;++a)r=26*r+t.charCodeAt(a)-64;return r-1}function As(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function LSe(e){return e.replace(/^([A-Z])/,"$$$1")}function MSe(e){return e.replace(/^\$([A-Z])/,"$1")}function USe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ms(e){for(var t=0,r=0,a=0;a<e.length;++a){var n=e.charCodeAt(a);n>=48&&n<=57?t=10*t+(n-48):n>=65&&n<=90&&(r=26*r+(n-64))}return{c:r-1,r:t-1}}function Hr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function _c(e){var t=e.indexOf(":");return t==-1?{s:ms(e),e:ms(e)}:{s:ms(e.slice(0,t)),e:ms(e.slice(t+1))}}function Zr(e,t){return typeof t>"u"||typeof t=="number"?Zr(e.s,e.e):(typeof e!="string"&&(e=Hr(e)),typeof t!="string"&&(t=Hr(t)),e==t?e:e+":"+t)}function Ma(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,n=0,i=e.length;for(r=0;a<i&&!((n=e.charCodeAt(a)-64)<1||n>26);++a)r=26*r+n;for(t.s.c=--r,r=0;a<i&&!((n=e.charCodeAt(a)-48)<0||n>9);++a)r=10*r+n;if(t.s.r=--r,a===i||n!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,r=0;a!=i&&!((n=e.charCodeAt(a)-64)<1||n>26);++a)r=26*r+n;for(t.e.c=--r,r=0;a!=i&&!((n=e.charCodeAt(a)-48)<0||n>9);++a)r=10*r+n;return t.e.r=--r,t}function K$(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=pu(e.z,r?Qi(t):t)}catch{}try{return e.w=pu((e.XF||{}).numFmtId||(r?14:0),r?Qi(t):t)}catch{return""+t}}function aA(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?bA[e.v]||e.v:t==null?K$(e,e.v):K$(e,t))}function Cp(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",a={};return a[r]=e,{SheetNames:[r],Sheets:a}}function Sne(e,t,r){var a=r||{},n=e?Array.isArray(e):a.dense,i=e||(n?[]:{}),o=0,l=0;if(i&&a.origin!=null){if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?ms(a.origin):a.origin;o=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=Ma(i["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),o==-1&&(d.e.r=o=u.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var A=0;A!=t[f].length;++A)if(!(typeof t[f][A]>"u")){var m={v:t[f][A]},g=o+f,x=l+A;if(d.s.r>g&&(d.s.r=g),d.s.c>x&&(d.s.c=x),d.e.r<g&&(d.e.r=g),d.e.c<x&&(d.e.c=x),t[f][A]&&typeof t[f][A]=="object"&&!Array.isArray(t[f][A])&&!(t[f][A]instanceof Date))m=t[f][A];else if(Array.isArray(m.v)&&(m.f=t[f][A][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(a.nullError)m.t="e",m.v=0;else if(a.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=a.dateNF||Fr[14],a.cellDates?(m.t="d",m.w=pu(m.z,Qi(m.v))):(m.t="n",m.v=Qi(m.v),m.w=pu(m.z,m.v))):m.t="s";if(n)i[g]||(i[g]=[]),i[g][x]&&i[g][x].z&&(m.z=i[g][x].z),i[g][x]=m;else{var v=Hr({c:x,r:g});i[v]&&i[v].z&&(m.z=i[v].z),i[v]=m}}}return d.s.c<1e7&&(i["!ref"]=Zr(d)),i}function G1(e,t){return Sne(null,e,t)}function HSe(e){return e.read_shift(4,"i")}function df(e,t){return t||(t=St(4)),t.write_shift(4,e),t}function Cl(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function uo(e,t){var r=!1;return t==null&&(r=!0,t=St(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function QSe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function zSe(e,t){return t||(t=St(4)),t.write_shift(2,0),t.write_shift(2,0),t}function bL(e,t){var r=e.l,a=e.read_shift(1),n=Cl(e),i=[],o={t:n,h:n};if((a&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(QSe(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function $Se(e,t){var r=!1;return t==null&&(r=!0,t=St(15+4*e.t.length)),t.write_shift(1,0),uo(e.t,t),r?t.slice(0,t.l):t}var VSe=bL;function GSe(e,t){var r=!1;return t==null&&(r=!0,t=St(23+4*e.t.length)),t.write_shift(1,1),uo(e.t,t),t.write_shift(4,1),zSe({},t),r?t.slice(0,t.l):t}function bu(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function _x(e,t){return t==null&&(t=St(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Tx(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Bx(e,t){return t==null&&(t=St(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var qSe=Cl,_ne=uo;function yL(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function $5(e,t){var r=!1;return t==null&&(r=!0,t=St(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var KSe=Cl,JD=yL,wL=$5;function NL(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,a=t[0]&2;e.l+=4;var n=a===0?z5([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):pg(t,0)>>2;return r?n/100:n}function Tne(e,t){t==null&&(t=St(4));var r=0,a=0,n=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?a=1:n==(n|0)&&n>=-536870912&&n<1<<29&&(a=1,r=1),a)t.write_shift(-4,((r?n:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function Bne(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function WSe(e,t){return t||(t=St(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Ix=Bne,q1=WSe;function pl(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function ix(e,t){return(t||St(8)).write_shift(8,e,"f")}function XSe(e){var t={},r=e.read_shift(1),a=r>>>1,n=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=n;var d=Mg[n];d&&(t.rgb=lN(d));break;case 2:t.rgb=lN([o,l,c]);break;case 3:t.theme=n;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function V5(e,t){if(t||(t=St(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var a=e.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),t.write_shift(1,parseInt(a.slice(0,2),16)),t.write_shift(1,parseInt(a.slice(2,4),16)),t.write_shift(1,parseInt(a.slice(4,6),16)),t.write_shift(1,255)}return t}function YSe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function JSe(e,t){t||(t=St(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function Ine(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=e.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function ZSe(e){return Ine(e,1)}function e_e(e){return Ine(e,2)}var EL=2,fc=3,aj=11,W$=12,G5=19,nj=64,t_e=65,r_e=71,a_e=4108,n_e=4126,so=80,One=81,s_e=[so,One],ZD={1:{n:"CodePage",t:EL},2:{n:"Category",t:so},3:{n:"PresentationFormat",t:so},4:{n:"ByteCount",t:fc},5:{n:"LineCount",t:fc},6:{n:"ParagraphCount",t:fc},7:{n:"SlideCount",t:fc},8:{n:"NoteCount",t:fc},9:{n:"HiddenCount",t:fc},10:{n:"MultimediaClipCount",t:fc},11:{n:"ScaleCrop",t:aj},12:{n:"HeadingPairs",t:a_e},13:{n:"TitlesOfParts",t:n_e},14:{n:"Manager",t:so},15:{n:"Company",t:so},16:{n:"LinksUpToDate",t:aj},17:{n:"CharacterCount",t:fc},19:{n:"SharedDoc",t:aj},22:{n:"HyperlinksChanged",t:aj},23:{n:"AppVersion",t:fc,p:"version"},24:{n:"DigSig",t:t_e},26:{n:"ContentType",t:so},27:{n:"ContentStatus",t:so},28:{n:"Language",t:so},29:{n:"Version",t:so},255:{},2147483648:{n:"Locale",t:G5},2147483651:{n:"Behavior",t:G5},1919054434:{}},eF={1:{n:"CodePage",t:EL},2:{n:"Title",t:so},3:{n:"Subject",t:so},4:{n:"Author",t:so},5:{n:"Keywords",t:so},6:{n:"Comments",t:so},7:{n:"Template",t:so},8:{n:"LastAuthor",t:so},9:{n:"RevNumber",t:so},10:{n:"EditTime",t:nj},11:{n:"LastPrinted",t:nj},12:{n:"CreatedDate",t:nj},13:{n:"ModifiedDate",t:nj},14:{n:"PageCount",t:fc},15:{n:"WordCount",t:fc},16:{n:"CharCount",t:fc},17:{n:"Thumbnail",t:r_e},18:{n:"Application",t:so},19:{n:"DocSecurity",t:fc},255:{},2147483648:{n:"Locale",t:G5},2147483651:{n:"Behavior",t:G5},1919054434:{}},X$={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},i_e=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function o_e(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var l_e=o_e([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Mg=Yn(l_e),bA={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Dne={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},tF={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},sj={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function CL(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function c_e(e){var t=CL();if(!e||!e.match)return t;var r={};if((e.match(Tl)||[]).forEach(function(a){var n=Vr(a);switch(n[0].replace(vSe,"<")){case"<?xml":break;case"<Types":t.xmlns=n["xmlns"+(n[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[n.Extension]=n.ContentType;break;case"<Override":t[tF[n.ContentType]]!==void 0&&t[tF[n.ContentType]].push(n.PartName);break}}),t.xmlns!==Mi.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function Fne(e,t){var r=cSe(tF),a=[],n;a[a.length]=di,a[a.length]=Wt("Types",null,{xmlns:Mi.CT,"xmlns:xsd":Mi.xsd,"xmlns:xsi":Mi.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Wt("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(n=e[c][0],a[a.length]=Wt("Override",null,{PartName:(n[0]=="/"?"":"/")+n,ContentType:sj[c][t.bookType]||sj[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(d){a[a.length]=Wt("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:sj[c][t.bookType]||sj[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(d){a[a.length]=Wt("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:r[c][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var xa={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function oN(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function g2(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var a={};return(e.match(Tl)||[]).forEach(function(n){var i=Vr(n);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:zw(i.Target,t);r[l]=o,a[i.Id]=o}}),r["!id"]=a,r}function jb(e){var t=[di,Wt("Relationships",null,{xmlns:Mi.RELS})];return Ms(e["!id"]).forEach(function(r){t[t.length]=Wt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function xn(e,t,r,a,n,i){if(n||(n={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,n.Id="rId"+t,n.Type=a,n.Target=r,[xa.HLINK,xa.XPATH,xa.XMISS].indexOf(n.Type)>-1&&(n.TargetMode="External"),e["!id"][n.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][n.Id]=n,e[("/"+n.Target).replace("//","/")]=n,t}var d_e="application/vnd.oasis.opendocument.spreadsheet";function u_e(e,t){for(var r=mL(e),a,n;a=iN.exec(r);)switch(a[3]){case"manifest":break;case"file-entry":if(n=Vr(a[0],!1),n.path=="/"&&n.type!==d_e)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw a}}function f_e(e){var t=[di];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function Y$(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function h_e(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function A_e(e){var t=[di];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(Y$(e[r][0],e[r][1])),t.push(h_e("",e[r][0]));return t.push(Y$("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function Pne(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+L5.version+"</meta:generator></office:meta></office:document-meta>"}var mu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],m_e=function(){for(var e=new Array(mu.length),t=0;t<mu.length;++t){var r=mu[t],a="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return e}();function Rne(e){var t={};e=Sn(e);for(var r=0;r<mu.length;++r){var a=mu[r],n=e.match(m_e[r]);n!=null&&n.length>0&&(t[a[1]]=Ra(n[1])),a[2]==="date"&&t[a[1]]&&(t[a[1]]=Xn(t[a[1]]))}return t}function HB(e,t,r,a,n){n[e]!=null||t==null||t===""||(n[e]=t,t=yn(t),a[a.length]=r?Wt(e,t,r):Do(e,t))}function Lne(e,t){var r=t||{},a=[di,Wt("cp:coreProperties",null,{"xmlns:cp":Mi.CORE_PROPS,"xmlns:dc":Mi.dc,"xmlns:dcterms":Mi.dcterms,"xmlns:dcmitype":Mi.dcmitype,"xmlns:xsi":Mi.xsi})],n={};if(!e&&!r.Props)return a.join("");e&&(e.CreatedDate!=null&&HB("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:YD(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,n),e.ModifiedDate!=null&&HB("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:YD(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,n));for(var i=0;i!=mu.length;++i){var o=mu[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&HB(o[0],l,null,a,n)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var Ug=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Mne=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Une(e,t,r,a){var n=[];if(typeof e=="string")n=H$(e,a);else for(var i=0;i<e.length;++i)n=n.concat(e[i].map(function(u){return{v:u}}));var o=typeof t=="string"?H$(t,a).map(function(u){return u.v}):t,l=0,c=0;if(o.length>0)for(var d=0;d!==n.length;d+=2){switch(c=+n[d+1].v,n[d].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function p_e(e,t,r){var a={};return t||(t={}),e=Sn(e),Ug.forEach(function(n){var i=(e.match(nN(n[0]))||[])[1];switch(n[2]){case"string":i&&(t[n[1]]=Ra(i));break;case"bool":t[n[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+n[0]+"[^>]*>([\\s\\S]*?)</"+n[0]+">"));o&&o.length>0&&(a[n[1]]=o[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&Une(a.HeadingPairs,a.TitlesOfParts,t,r),t}function Hne(e){var t=[],r=Wt;return e||(e={}),e.Application="SheetJS",t[t.length]=di,t[t.length]=Wt("Properties",null,{xmlns:Mi.EXT_PROPS,"xmlns:vt":Mi.vt}),Ug.forEach(function(a){if(e[a[1]]!==void 0){var n;switch(a[2]){case"string":n=yn(String(e[a[1]]));break;case"bool":n=e[a[1]]?"true":"false";break}n!==void 0&&(t[t.length]=r(a[0],n))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(a){return"<vt:lpstr>"+yn(a)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var g_e=/<[^>]+>[^<]*/g;function x_e(e,t){var r={},a="",n=e.match(g_e);if(n)for(var i=0;i!=n.length;++i){var o=n[i],l=Vr(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":a=Ra(l.name);break;case"</property>":a=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),d=c[0].slice(4),u=c[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[a]=Ra(u);break;case"bool":r[a]=Kn(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[a]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[a]=parseFloat(u);break;case"filetime":case"date":r[a]=Xn(u);break;case"cy":case"error":r[a]=Ra(u);break;default:if(d.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,d,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function Qne(e){var t=[di,Wt("Properties",null,{xmlns:Mi.CUST_PROPS,"xmlns:vt":Mi.vt})];if(!e)return t.join("");var r=1;return Ms(e).forEach(function(n){++r,t[t.length]=Wt("property",kSe(e[n]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:yn(n)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var rF={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},QB;function v_e(e,t,r){QB||(QB=h4(rF)),t=QB[t]||t,e[t]=r}function b_e(e,t){var r=[];return Ms(rF).map(function(a){for(var n=0;n<mu.length;++n)if(mu[n][1]==a)return mu[n];for(n=0;n<Ug.length;++n)if(Ug[n][1]==a)return Ug[n];throw a}).forEach(function(a){if(e[a[1]]!=null){var n=t&&t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:e[a[1]];switch(a[2]){case"date":n=new Date(n).toISOString().replace(/\.\d*Z/,"Z");break}typeof n=="number"?n=String(n):n===!0||n===!1?n=n?"1":"0":n instanceof Date&&(n=new Date(n).toISOString().replace(/\.\d*Z/,"")),r.push(Do(rF[a[1]]||a[1],n))}}),Wt("DocumentProperties",r.join(""),{xmlns:sd.o})}function y_e(e,t){var r=["Worksheets","SheetNames"],a="CustomDocumentProperties",n=[];return e&&Ms(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<mu.length;++o)if(i==mu[o][1])return;for(o=0;o<Ug.length;++o)if(i==Ug[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),n.push(Wt(R$(i),l,{"dt:dt":c}))}}),t&&Ms(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),n.push(Wt(R$(i),o,{"dt:dt":l}))}}),"<"+a+' xmlns="'+sd.o+'">'+n.join("")+"</"+a+">"}function jL(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function w_e(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,a=r%Math.pow(2,32),n=(r-a)/Math.pow(2,32);a*=1e7,n*=1e7;var i=a/Math.pow(2,32)|0;i>0&&(a=a%Math.pow(2,32),n+=i);var o=St(8);return o.write_shift(4,a),o.write_shift(4,n),o}function zne(e,t,r){var a=e.l,n=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-a&3;)++e.l;return n}function $ne(e,t,r){var a=e.read_shift(0,"lpwstr");return a}function Vne(e,t,r){return t===31?$ne(e):zne(e,t,r)}function aF(e,t,r){return Vne(e,t,r===!1?0:4)}function N_e(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Vne(e,t,0)}function E_e(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a){var n=e.l;r[a]=e.read_shift(0,"lpwstr").replace(Gl,""),e.l-n&2&&(e.l+=2)}return r}function C_e(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a)r[a]=e.read_shift(0,"lpstr-cp").replace(Gl,"");return r}function j_e(e){var t=e.l,r=q5(e,One);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var a=q5(e,fc);return[r,a]}function k_e(e){for(var t=e.read_shift(4),r=[],a=0;a<t/2;++a)r.push(j_e(e));return r}function J$(e,t){for(var r=e.read_shift(4),a={},n=0;n!=r;++n){var i=e.read_shift(4),o=e.read_shift(4);a[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(Gl,"").replace(Qw,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),a}function Gne(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function S_e(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function q5(e,t,r){var a=e.read_shift(2),n,i=r||{};if(e.l+=2,t!==W$&&a!==t&&s_e.indexOf(t)===-1&&!((t&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+t+" saw "+a);switch(t===W$?a:t){case 2:return n=e.read_shift(2,"i"),i.raw||(e.l+=2),n;case 3:return n=e.read_shift(4,"i"),n;case 11:return e.read_shift(4)!==0;case 19:return n=e.read_shift(4),n;case 30:return zne(e,a,4).replace(Gl,"");case 31:return $ne(e);case 64:return jL(e);case 65:return Gne(e);case 71:return S_e(e);case 80:return aF(e,a,!i.raw).replace(Gl,"");case 81:return N_e(e,a).replace(Gl,"");case 4108:return k_e(e);case 4126:case 4127:return a==4127?E_e(e):C_e(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function Z$(e,t){var r=St(4),a=St(4);switch(r.write_shift(4,e==80?31:e),e){case 3:a.write_shift(-4,t);break;case 5:a=St(8),a.write_shift(8,t,"f");break;case 11:a.write_shift(4,t?1:0);break;case 64:a=w_e(t);break;case 31:case 80:for(a=St(4+2*(t.length+1)+(t.length%2?0:2)),a.write_shift(4,t.length+1),a.write_shift(0,t,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return co([r,a])}function eV(e,t){var r=e.l,a=e.read_shift(4),n=e.read_shift(4),i=[],o=0,l=0,c=-1,d={};for(o=0;o!=n;++o){var u=e.read_shift(4),f=e.read_shift(4);i[o]=[u,f+r]}i.sort(function(N,E){return N[1]-E[1]});var A={};for(o=0;o!=n;++o){if(e.l!==i[o][1]){var m=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,m=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],m=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],m=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(m=!1,e.l=i[o][1]),m)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var g=t[i[o][0]];if(A[g.n]=q5(e,g.t,{raw:!0}),g.p==="version"&&(A[g.n]=String(A[g.n]>>16)+"."+("0000"+String(A[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(A[g.n]){case 0:A[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:rf(l=A[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+A[g.n])}}else if(i[o][0]===1){if(l=A.CodePage=q5(e,EL),rf(l),c!==-1){var x=e.l;e.l=i[c][1],d=J$(e,l),e.l=x}}else if(i[o][0]===0){if(l===0){c=o,e.l=i[o+1][1];continue}d=J$(e,l)}else{var v=d[i[o][0]],y;switch(e[e.l]){case 65:e.l+=4,y=Gne(e);break;case 30:e.l+=4,y=aF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=aF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=Js(e,4);break;case 64:e.l+=4,y=Xn(jL(e));break;default:throw new Error("unparsed value: "+e[e.l])}A[v]=y}}return e.l=r+a,A}var qne=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function __e(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function tV(e,t,r){var a=St(8),n=[],i=[],o=8,l=0,c=St(8),d=St(8);if(c.write_shift(4,2),c.write_shift(4,1200),d.write_shift(4,1),i.push(c),n.push(d),o+=8+c.length,!t){d=St(8),d.write_shift(4,0),n.unshift(d);var u=[St(4)];for(u[0].write_shift(4,e.length),l=0;l<e.length;++l){var f=e[l][0];for(c=St(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);u.push(c)}c=co(u),i.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(qne.indexOf(e[l][0])>-1||Mne.indexOf(e[l][0])>-1)&&e[l][1]!=null){var A=e[l][1],m=0;if(t){m=+t[e[l][0]];var g=r[m];if(g.p=="version"&&typeof A=="string"){var x=A.split(".");A=(+x[0]<<16)+(+x[1]||0)}c=Z$(g.t,A)}else{var v=__e(A);v==-1&&(v=31,A=String(A)),c=Z$(v,A)}i.push(c),d=St(8),d.write_shift(4,t?m:2+l),n.push(d),o+=8+c.length}var y=8*(i.length+1);for(l=0;l<i.length;++l)n[l].write_shift(4,y),y+=i[l].length;return a.write_shift(4,o),a.write_shift(4,i.length),co([a].concat(n).concat(i))}function rV(e,t,r){var a=e.content;if(!a)return{};Oo(a,0);var n,i,o,l,c=0;a.chk("feff","Byte Order: "),a.read_shift(2);var d=a.read_shift(4),u=a.read_shift(16);if(u!==jr.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(n=a.read_shift(4),n!==1&&n!==2)throw new Error("Unrecognized #Sets: "+n);if(i=a.read_shift(16),l=a.read_shift(4),n===1&&l!==a.l)throw new Error("Length mismatch: "+l+" !== "+a.l);n===2&&(o=a.read_shift(16),c=a.read_shift(4));var f=eV(a,t),A={SystemIdentifier:d};for(var m in f)A[m]=f[m];if(A.FMTID=i,n===1)return A;if(c-a.l==2&&(a.l+=2),a.l!==c)throw new Error("Length mismatch 2: "+a.l+" !== "+c);var g;try{g=eV(a,null)}catch{}for(m in g)A[m]=g[m];return A.FMTID=[i,o],A}function aV(e,t,r,a,n,i){var o=St(n?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,jr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,n?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,n?68:48);var c=tV(e,r,a);if(l.push(c),n){var d=tV(n,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+c.length),l.push(d)}return co(l)}function om(e,t){return e.read_shift(t),null}function T_e(e,t){t||(t=St(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function B_e(e,t,r){for(var a=[],n=e.l+t;e.l<n;)a.push(r(e,n-e.l));if(n!==e.l)throw new Error("Slurp error");return a}function Js(e,t){return e.read_shift(t)===1}function Hl(e,t){return t||(t=St(2)),t.write_shift(2,+!!e),t}function wi(e){return e.read_shift(2,"u")}function nu(e,t){return t||(t=St(2)),t.write_shift(2,e),t}function Kne(e,t){return B_e(e,t,wi)}function I_e(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function Wne(e,t,r){return r||(r=St(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function rE(e,t,r){var a=e.read_shift(r&&r.biff>=12?2:1),n="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(n="dbcs-cont")}else r.biff==12&&(n="wstr");r.biff>=2&&r.biff<=5&&(n="cpstr");var o=a?e.read_shift(a,n):"";return o}function O_e(e){var t=e.read_shift(2),r=e.read_shift(1),a=r&4,n=r&8,i=1+(r&1),o=0,l,c={};n&&(o=e.read_shift(2)),a&&(l=e.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",u=t===0?"":e.read_shift(t,d);return n&&(e.l+=4*o),a&&(e.l+=l),c.t=u,n||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function D_e(e){var t=e.t||"",r=St(3);r.write_shift(2,t.length),r.write_shift(1,1);var a=St(2*t.length);a.write_shift(2*t.length,t,"utf16le");var n=[r,a];return co(n)}function ox(e,t,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var n=e.read_shift(1);return n===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function aE(e,t,r){var a=e.read_shift(r&&r.biff==2?1:2);return a===0?(e.l++,""):ox(e,a,r)}function Ox(e,t,r){if(r.biff>5)return aE(e,t,r);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Xne(e,t,r){return r||(r=St(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function F_e(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function P_e(e){var t=e.read_shift(4),r=e.l,a=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),e.l=r);var n=e.read_shift((a?t-24:t)>>1,"utf16le").replace(Gl,"");return a&&(e.l+=24),n}function R_e(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var a=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var n=e.read_shift(4);if(n===0)return r+a.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(Gl,"");return r+o}function L_e(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return P_e(e);case"0303000000000000c000000000000046":return R_e(e);default:throw new Error("Unsupported Moniker "+r)}}function ij(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Gl,""):"";return r}function nV(e,t){t||(t=St(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function M_e(e,t){var r=e.l+t,a=e.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var n=e.read_shift(2);e.l+=2;var i,o,l,c,d="",u,f;n&16&&(i=ij(e,r-e.l)),n&128&&(o=ij(e,r-e.l)),(n&257)===257&&(l=ij(e,r-e.l)),(n&257)===1&&(c=L_e(e,r-e.l)),n&8&&(d=ij(e,r-e.l)),n&32&&(u=e.read_shift(16)),n&64&&(f=jL(e)),e.l=r;var A=o||l||c||"";A&&d&&(A+="#"+d),A||(A="#"+d),n&2&&A.charAt(0)=="/"&&A.charAt(1)!="/"&&(A="file://"+A);var m={Target:A};return u&&(m.guid=u),f&&(m.time=f),i&&(m.Tooltip=i),m}function U_e(e){var t=St(512),r=0,a=e.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var n=a.indexOf("#"),i=n>-1?31:23;switch(a.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)a=a.slice(1),nV(a,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=n>-1?a.slice(0,n):a;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&nV(n>-1?a.slice(n+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;a.slice(c*3,c*3+3)=="../"||a.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,a.length-3*c+1),r=0;r<a.length-3*c;++r)t.write_shift(1,a.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Yne(e){var t=e.read_shift(1),r=e.read_shift(1),a=e.read_shift(1),n=e.read_shift(1);return[t,r,a,n]}function Jne(e,t){var r=Yne(e);return r[3]=0,r}function Uh(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return{r:t,c:r,ixfe:a}}function lx(e,t,r,a){return a||(a=St(6)),a.write_shift(2,e),a.write_shift(2,t),a.write_shift(2,r||0),a}function H_e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Q_e(e,t,r){return t===0?"":Ox(e,t,r)}function z_e(e,t,r){var a=r.biff>8?4:2,n=e.read_shift(a),i=e.read_shift(a,"i"),o=e.read_shift(a,"i");return[n,i,o]}function Zne(e){var t=e.read_shift(2),r=NL(e);return[t,r]}function $_e(e,t,r){e.l+=4,t-=4;var a=e.l+t,n=rE(e,t,r),i=e.read_shift(2);if(a-=e.l,i!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+i);return e.l+=i,n}function p4(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),n=e.read_shift(2);return{s:{c:a,r:t},e:{c:n,r}}}function ese(e,t){return t||(t=St(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function tse(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(1),n=e.read_shift(1);return{s:{c:a,r:t},e:{c:n,r}}}var V_e=tse;function rse(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return e.l+=12,[r,t,a]}function G_e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function q_e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Zo(e){e.l+=2,e.l+=e.read_shift(2)}var K_e={0:Zo,4:Zo,5:Zo,6:Zo,7:q_e,8:Zo,9:Zo,10:Zo,11:Zo,12:Zo,13:G_e,14:Zo,15:Zo,16:Zo,17:Zo,18:Zo,19:Zo,20:Zo,21:rse};function W_e(e,t){for(var r=e.l+t,a=[];e.l<r;){var n=e.read_shift(2);e.l-=2;try{a.push(K_e[n](e,r-e.l))}catch{return e.l=r,a}}return e.l!=r&&(e.l=r),a}function oj(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function kL(e,t,r){var a=1536,n=16;switch(r.bookType){case"biff8":break;case"biff5":a=1280,n=8;break;case"biff4":a=4,n=6;break;case"biff3":a=3,n=6;break;case"biff2":a=2,n=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=St(n);return i.write_shift(2,a),i.write_shift(2,t),n>4&&i.write_shift(2,29282),n>6&&i.write_shift(2,1997),n>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function X_e(e,t){return t===0||e.read_shift(2),1200}function Y_e(e,t,r){if(r.enc)return e.l+=t,"";var a=e.l,n=Ox(e,0,r);return e.read_shift(t+a-e.l),n}function J_e(e,t){var r=!t||t.biff==8,a=St(r?112:54);for(a.write_shift(t.biff==8?2:1,7),r&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(r?0:536870912));a.l<a.length;)a.write_shift(1,r?0:32);return a}function Z_e(e,t,r){var a=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function e4e(e,t,r){var a=e.read_shift(4),n=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=rE(e,0,r);return o.length===0&&(o="Sheet1"),{pos:a,hs:n,dt:i,name:o}}function t4e(e,t){var r=!t||t.biff>=8?2:1,a=St(8+r*e.name.length);a.write_shift(4,e.pos),a.write_shift(1,e.hs||0),a.write_shift(1,e.dt),a.write_shift(1,e.name.length),t.biff>=8&&a.write_shift(1,1),a.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var n=a.slice(0,a.l);return n.l=a.l,n}function r4e(e,t){for(var r=e.l+t,a=e.read_shift(4),n=e.read_shift(4),i=[],o=0;o!=n&&e.l<r;++o)i.push(O_e(e));return i.Count=a,i.Unique=n,i}function a4e(e,t){var r=St(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var a=[],n=0;n<e.length;++n)a[n]=D_e(e[n]);var i=co([r].concat(a));return i.parts=[r.length].concat(a.map(function(o){return o.length})),i}function n4e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function s4e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var a=e.read_shift(1);return e.l+=3,a&7&&(t.level=a&7),a&32&&(t.hidden=!0),a&64&&(t.hpt=r/20),t}function i4e(e){var t=H_e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function o4e(e){return e.read_shift(2),e.read_shift(4)}function sV(e,t,r){var a=0;r&&r.biff==2||(a=e.read_shift(2));var n=e.read_shift(2);r&&r.biff==2&&(a=1-(n>>15),n&=32767);var i={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[i,n]}function l4e(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),d=e.read_shift(2);return{Pos:[t,r],Dim:[a,n],Flags:i,CurTab:o,FirstTab:l,Selected:c,TabRatio:d}}function c4e(){var e=St(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function d4e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var a=e.read_shift(2);return{RTL:a&64}}function u4e(e){var t=St(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function f4e(){}function h4e(e,t,r){var a={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return a.name=rE(e,0,r),a}function A4e(e,t){var r=e.name||"Arial",a=t&&t.biff==5,n=a?15+r.length:16+2*r.length,i=St(n);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),a||i.write_shift(1,1),i.write_shift((a?1:2)*r.length,r,a?"sbcs":"utf16le"),i}function m4e(e){var t=Uh(e);return t.isst=e.read_shift(4),t}function p4e(e,t,r,a){var n=St(10);return lx(e,t,a,n),n.write_shift(4,r),n}function g4e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=e.l+t,n=Uh(e);r.biff==2&&e.l++;var i=aE(e,a-e.l,r);return n.val=i,n}function x4e(e,t,r,a,n){var i=!n||n.biff==8,o=St(8+ +i+(1+i)*r.length);return lx(e,t,a,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function v4e(e,t,r){var a=e.read_shift(2),n=Ox(e,0,r);return[a,n]}function b4e(e,t,r,a){var n=r&&r.biff==5;a||(a=St(n?3+t.length:5+2*t.length)),a.write_shift(2,e),a.write_shift(n?1:2,t.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*t.length,t,n?"sbcs":"utf16le");var i=a.length>a.l?a.slice(0,a.l):a;return i.l==null&&(i.l=i.length),i}var y4e=Ox;function iV(e,t,r){var a=e.l+t,n=r.biff==8||!r.biff?4:2,i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2),c=e.read_shift(2);return e.l=a,{s:{r:i,c:l},e:{r:o,c}}}function w4e(e,t){var r=t.biff==8||!t.biff?4:2,a=St(2*r+6);return a.write_shift(r,e.s.r),a.write_shift(r,e.e.r+1),a.write_shift(2,e.s.c),a.write_shift(2,e.e.c+1),a.write_shift(2,0),a}function N4e(e){var t=e.read_shift(2),r=e.read_shift(2),a=Zne(e);return{r:t,c:r,ixfe:a[0],rknum:a[1]}}function E4e(e,t){for(var r=e.l+t-2,a=e.read_shift(2),n=e.read_shift(2),i=[];e.l<r;)i.push(Zne(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-n+1)throw new Error("MulRK length mismatch");return{r:a,c:n,C:o,rkrec:i}}function C4e(e,t){for(var r=e.l+t-2,a=e.read_shift(2),n=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-n+1)throw new Error("MulBlank length mismatch");return{r:a,c:n,C:o,ixfe:i}}function j4e(e,t,r,a){var n={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return n.patternType=i_e[l>>26],a.cellStyles&&(n.alc=i&7,n.fWrap=i>>3&1,n.alcV=i>>4&7,n.fJustLast=i>>7&1,n.trot=i>>8&255,n.cIndent=i>>16&15,n.fShrinkToFit=i>>20&1,n.iReadOrder=i>>22&2,n.fAtrNum=i>>26&1,n.fAtrFnt=i>>27&1,n.fAtrAlc=i>>28&1,n.fAtrBdr=i>>29&1,n.fAtrPat=i>>30&1,n.fAtrProt=i>>31&1,n.dgLeft=o&15,n.dgRight=o>>4&15,n.dgTop=o>>8&15,n.dgBottom=o>>12&15,n.icvLeft=o>>16&127,n.icvRight=o>>23&127,n.grbitDiag=o>>30&3,n.icvTop=l&127,n.icvBottom=l>>7&127,n.icvDiag=l>>14&127,n.dgDiag=l>>21&15,n.icvFore=c&127,n.icvBack=c>>7&127,n.fsxButton=c>>14&1),n}function k4e(e,t,r){var a={};return a.ifnt=e.read_shift(2),a.numFmtId=e.read_shift(2),a.flags=e.read_shift(2),a.fStyle=a.flags>>2&1,t-=6,a.data=j4e(e,t,a.fStyle,r),a}function oV(e,t,r,a){var n=r&&r.biff==5;a||(a=St(n?16:20)),a.write_shift(2,0),e.style?(a.write_shift(2,e.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,e.numFmtId||0),a.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&n&&(i|=1024),a.write_shift(4,i),a.write_shift(4,0),n||a.write_shift(4,0),a.write_shift(2,0),a}function S4e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function _4e(e){var t=St(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function lV(e,t,r){var a=Uh(e);(r.biff==2||t==9)&&++e.l;var n=I_e(e);return a.val=n,a.t=n===!0||n===!1?"b":"e",a}function T4e(e,t,r,a,n,i){var o=St(8);return lx(e,t,a,o),Wne(r,i,o),o}function B4e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=Uh(e),n=pl(e);return a.val=n,a}function I4e(e,t,r,a){var n=St(14);return lx(e,t,a,n),ix(r,n),n}var cV=Q_e;function O4e(e,t,r){var a=e.l+t,n=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,n];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=ox(e,i),l=[];a>e.l;)l.push(aE(e));return[i,n,o,l]}function dV(e,t,r){var a=e.read_shift(2),n,i={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return r.sbcch===14849&&(n=$_e(e,t-2,r)),i.body=n||e.read_shift(t-2),typeof n=="string"&&(i.Name=n),i}var D4e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function uV(e,t,r){var a=e.l+t,n=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var d=ox(e,o,r);n&32&&(d=D4e[d.charCodeAt(0)]);var u=a-e.l;r&&r.biff==2&&--u;var f=a==e.l||l===0||!(u>0)?[]:WIe(e,u,r,l);return{chKey:i,Name:d,itab:c,rgce:f}}function ase(e,t,r){if(r.biff<8)return F4e(e,t,r);for(var a=[],n=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)a.push(z_e(e,r.biff>8?12:6,r));if(e.l!=n)throw new Error("Bad ExternSheet: "+e.l+" != "+n);return a}function F4e(e,t,r){e[e.l+1]==3&&e[e.l]++;var a=rE(e,t,r);return a.charCodeAt(0)==3?a.slice(1):a}function P4e(e,t,r){if(r.biff<8){e.l+=t;return}var a=e.read_shift(2),n=e.read_shift(2),i=ox(e,a,r),o=ox(e,n,r);return[i,o]}function R4e(e,t,r){var a=tse(e);e.l++;var n=e.read_shift(1);return t-=8,[XIe(e,t,r),n,a]}function fV(e,t,r){var a=V_e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[a,qIe(e,t,r)]}function L4e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,a=e.read_shift(4);return[t,r,a]}function M4e(e,t,r){if(!(r.biff<8)){var a=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=Ox(e,0,r);return r.biff<8&&e.read_shift(1),[{r:a,c:n},l,o,i]}}function U4e(e,t,r){return M4e(e,t,r)}function H4e(e,t){for(var r=[],a=e.read_shift(2);a--;)r.push(p4(e));return r}function Q4e(e){var t=St(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)ese(e[r],t);return t}function z4e(e,t,r){if(r&&r.biff<8)return V4e(e,t,r);var a=rse(e),n=W_e(e,t-22,a[1]);return{cmo:a,ft:n}}var $4e={8:function(e,t){var r=e.l+t;e.l+=10;var a=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var n=e.read_shift(1);return e.l+=n,e.l=r,{fmt:a}}};function V4e(e,t,r){e.l+=4;var a=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push(($4e[a]||Sl)(e,t,r)),{cmo:[n,a,i],ft:o}}function G4e(e,t,r){var a=e.l,n="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=F_e(e,6,r);var l=e.read_shift(2);e.read_shift(2),wi(e,2);var c=e.read_shift(2);e.l+=c;for(var d=1;d<e.lens.length-1;++d){if(e.l-a!=e.lens[d])throw new Error("TxO: bad continue record");var u=e[e.l],f=ox(e,e.lens[d+1]-e.lens[d]-1);if(n+=f,n.length>=(u?l:2*l))break}if(n.length!==l&&n.length!==l*2)throw new Error("cchText: "+l+" != "+n.length);return e.l=a+t,{t:n}}catch{return e.l=a+t,{t:n}}}function q4e(e,t){var r=p4(e);e.l+=16;var a=M_e(e,t-24);return[r,a]}function K4e(e){var t=St(24),r=ms(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<16;++n)t.write_shift(1,parseInt(a[n],16));return co([t,U_e(e[1])])}function W4e(e,t){e.read_shift(2);var r=p4(e),a=e.read_shift((t-10)/2,"dbcs-cont");return a=a.replace(Gl,""),[r,a]}function X4e(e){var t=e[1].Tooltip,r=St(10+2*(t.length+1));r.write_shift(2,2048);var a=ms(e[0]);r.write_shift(2,a.r),r.write_shift(2,a.r),r.write_shift(2,a.c),r.write_shift(2,a.c);for(var n=0;n<t.length;++n)r.write_shift(2,t.charCodeAt(n));return r.write_shift(2,0),r}function Y4e(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=X$[r]||r,r=e.read_shift(2),t[1]=X$[r]||r,t}function J4e(e){return e||(e=St(4)),e.write_shift(2,1),e.write_shift(2,1),e}function Z4e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Jne(e));return r}function e3e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Jne(e));return r}function t3e(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function nse(e,t,r){if(!r.cellStyles)return Sl(e,t);var a=r&&r.biff>=12?4:2,n=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(a),c=e.read_shift(2);a==2&&(e.l+=2);var d={s:n,e:i,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function r3e(e,t){var r=St(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var a=0;return e.hidden&&(a|=1),r.write_shift(1,a),a=e.level||0,r.write_shift(1,a),r.write_shift(2,0),r}function a3e(e,t){var r={};return t<32||(e.l+=16,r.header=pl(e),r.footer=pl(e),e.l+=2),r}function n3e(e,t,r){var a={area:!1};if(r.biff!=5)return e.l+=t,a;var n=e.read_shift(1);return e.l+=3,n&16&&(a.area=!0),a}function s3e(e){for(var t=St(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var i3e=Uh,o3e=Kne,l3e=aE;function c3e(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),n={fmt:t,env:r,len:a,data:e.slice(e.l,e.l+a)};return e.l+=a,n}function d3e(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var a=Uh(e);++e.l;var n=Ox(e,t-7,r);return a.t="str",a.val=n,a}function u3e(e){var t=Uh(e);++e.l;var r=pl(e);return t.t="n",t.val=r,t}function f3e(e,t,r){var a=St(15);return oE(a,e,t),a.write_shift(8,r,"f"),a}function h3e(e){var t=Uh(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function A3e(e,t,r){var a=St(9);return oE(a,e,t),a.write_shift(2,r),a}function m3e(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function p3e(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function g3e(e,t,r){var a=e.l+t,n=Uh(e),i=e.read_shift(2),o=ox(e,i,r);return e.l=a,n.t="str",n.val=o,n}var x3e=[2,3,48,49,131,139,140,245],nF=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=h4({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var d=[],u=lp(1);switch(c.type){case"base64":u=dd(vd(l));break;case"binary":u=dd(l);break;case"buffer":case"array":u=l;break}Oo(u,0);var f=u.read_shift(1),A=!!(f&136),m=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:m=!0,A=!0;break;case 49:m=!0,A=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var x=0,v=521;f==2&&(x=u.read_shift(2)),u.l+=3,f!=2&&(x=u.read_shift(4)),x>1048576&&(x=1e6),f!=2&&(v=u.read_shift(2));var y=u.read_shift(2),N=c.codepage||1252;f!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(N=e[u[u.l]]),u.l+=1,u.l+=2),g&&(u.l+=36);for(var E=[],B={},_=Math.min(u.length,f==2?521:v-10-(m?264:0)),I=g?32:11;u.l<_&&u[u.l]!=13;)switch(B={},B.name=tN.utils.decode(N,u.slice(u.l,u.l+I)).replace(/[\u0000\r\n].*$/g,""),u.l+=I,B.type=String.fromCharCode(u.read_shift(1)),f!=2&&!g&&(B.offset=u.read_shift(4)),B.len=u.read_shift(1),f==2&&(B.offset=u.read_shift(2)),B.dec=u.read_shift(1),B.name.length&&E.push(B),f!=2&&(u.l+=g?13:14),B.type){case"B":(!m||B.len!=8)&&c.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+B.type)}if(u[u.l]!==13&&(u.l=v-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=v;var j=0,k=0;for(d[0]=[],k=0;k!=E.length;++k)d[0][k]=E[k].name;for(;x-- >0;){if(u[u.l]===42){u.l+=y;continue}for(++u.l,d[++j]=[],k=0,k=0;k!=E.length;++k){var T=u.slice(u.l,u.l+E[k].len);u.l+=E[k].len,Oo(T,0);var L=tN.utils.decode(N,T);switch(E[k].type){case"C":L.trim().length&&(d[j][k]=L.replace(/\s+$/,""));break;case"D":L.length===8?d[j][k]=new Date(+L.slice(0,4),+L.slice(4,6)-1,+L.slice(6,8)):d[j][k]=L;break;case"F":d[j][k]=parseFloat(L.trim());break;case"+":case"I":d[j][k]=g?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(L.trim().toUpperCase()){case"Y":case"T":d[j][k]=!0;break;case"N":case"F":d[j][k]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+L+"|")}break;case"M":if(!A)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));d[j][k]="##MEMO##"+(g?parseInt(L.trim(),10):T.read_shift(4));break;case"N":L=L.replace(/\u0000/g,"").trim(),L&&L!="."&&(d[j][k]=+L||0);break;case"@":d[j][k]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":d[j][k]=new Date((T.read_shift(4)-2440588)*864e5+T.read_shift(4));break;case"Y":d[j][k]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[j][k]=-T.read_shift(-8,"f");break;case"B":if(m&&E[k].len==8){d[j][k]=T.read_shift(8,"f");break}case"G":case"P":T.l+=E[k].len;break;case"0":if(E[k].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+E[k].type)}}}if(f!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=E,d}function a(l,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=G1(r(l,d),d);return u["!cols"]=d.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete d.DBF,u}function n(l,c){try{return Cp(a(l,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var d=c||{};if(+d.codepage>=0&&rf(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=kc(),f=X5(l,{header:1,raw:!0,cellDates:!0}),A=f[0],m=f.slice(1),g=l["!cols"]||[],x=0,v=0,y=0,N=1;for(x=0;x<A.length;++x){if(((g[x]||{}).DBF||{}).name){A[x]=g[x].DBF.name,++y;continue}if(A[x]!=null){if(++y,typeof A[x]=="number"&&(A[x]=A[x].toString(10)),typeof A[x]!="string")throw new Error("DBF Invalid column name "+A[x]+" |"+typeof A[x]+"|");if(A.indexOf(A[x])!==x){for(v=0;v<1024;++v)if(A.indexOf(A[x]+"_"+v)==-1){A[x]+="_"+v;break}}}}var E=Ma(l["!ref"]),B=[],_=[],I=[];for(x=0;x<=E.e.c-E.s.c;++x){var j="",k="",T=0,L=[];for(v=0;v<m.length;++v)m[v][x]!=null&&L.push(m[v][x]);if(L.length==0||A[x]==null){B[x]="?";continue}for(v=0;v<L.length;++v){switch(typeof L[v]){case"number":k="B";break;case"string":k="C";break;case"boolean":k="L";break;case"object":k=L[v]instanceof Date?"D":"C";break;default:k="C"}T=Math.max(T,String(L[v]).length),j=j&&j!=k?"C":k}T>250&&(T=250),k=((g[x]||{}).DBF||{}).type,k=="C"&&g[x].DBF.len>T&&(T=g[x].DBF.len),j=="B"&&k=="N"&&(j="N",I[x]=g[x].DBF.dec,T=g[x].DBF.len),_[x]=j=="C"||k=="N"?T:i[j]||0,N+=_[x],B[x]=j}var F=u.next(32);for(F.write_shift(4,318902576),F.write_shift(4,m.length),F.write_shift(2,296+32*y),F.write_shift(2,N),x=0;x<4;++x)F.write_shift(4,0);for(F.write_shift(4,0|(+t[qae]||3)<<8),x=0,v=0;x<A.length;++x)if(A[x]!=null){var S=u.next(32),M=(A[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);S.write_shift(1,M,"sbcs"),S.write_shift(1,B[x]=="?"?"C":B[x],"sbcs"),S.write_shift(4,v),S.write_shift(1,_[x]||i[B[x]]||0),S.write_shift(1,I[x]||0),S.write_shift(1,2),S.write_shift(4,0),S.write_shift(1,0),S.write_shift(4,0),S.write_shift(4,0),v+=_[x]||i[B[x]]||0}var H=u.next(264);for(H.write_shift(4,13),x=0;x<65;++x)H.write_shift(4,0);for(x=0;x<m.length;++x){var K=u.next(N);for(K.write_shift(1,0),v=0;v<A.length;++v)if(A[v]!=null)switch(B[v]){case"L":K.write_shift(1,m[x][v]==null?63:m[x][v]?84:70);break;case"B":K.write_shift(8,m[x][v]||0,"f");break;case"N":var Q="0";for(typeof m[x][v]=="number"&&(Q=m[x][v].toFixed(I[v]||0)),y=0;y<_[v]-Q.length;++y)K.write_shift(1,32);K.write_shift(1,Q,"sbcs");break;case"D":m[x][v]?(K.write_shift(4,("0000"+m[x][v].getFullYear()).slice(-4),"sbcs"),K.write_shift(2,("00"+(m[x][v].getMonth()+1)).slice(-2),"sbcs"),K.write_shift(2,("00"+m[x][v].getDate()).slice(-2),"sbcs")):K.write_shift(8,"00000000","sbcs");break;case"C":var G=String(m[x][v]!=null?m[x][v]:"").slice(0,_[v]);for(K.write_shift(1,G,"sbcs"),y=0;y<_[v]-G.length;++y)K.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:n,to_sheet:a,from_sheet:o}}(),sse=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ms(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(A,m){var g=e[m];return typeof g=="number"?N$(g):g},a=function(A,m,g){var x=m.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return x==59?A:N$(x)};e["|"]=254;function n(A,m){switch(m.type){case"base64":return i(vd(A),m);case"binary":return i(A,m);case"buffer":return i(fa&&Buffer.isBuffer(A)?A.toString("binary"):Ep(A),m);case"array":return i(sx(A),m)}throw new Error("Unrecognized type "+m.type)}function i(A,m){var g=A.split(/[\n\r]+/),x=-1,v=-1,y=0,N=0,E=[],B=[],_=null,I={},j=[],k=[],T=[],L=0,F;for(+m.codepage>=0&&rf(+m.codepage);y!==g.length;++y){L=0;var S=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,r),M=S.replace(/;;/g,"\0").split(";").map(function(J){return J.replace(/\u0000/g,";")}),H=M[0],K;if(S.length>0)switch(H){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":M[1].charAt(0)=="P"&&B.push(S.slice(3).replace(/;;/g,";"));break;case"C":var Q=!1,G=!1,X=!1,Z=!1,U=-1,Y=-1;for(N=1;N<M.length;++N)switch(M[N].charAt(0)){case"A":break;case"X":v=parseInt(M[N].slice(1))-1,G=!0;break;case"Y":for(x=parseInt(M[N].slice(1))-1,G||(v=0),F=E.length;F<=x;++F)E[F]=[];break;case"K":K=M[N].slice(1),K.charAt(0)==='"'?K=K.slice(1,K.length-1):K==="TRUE"?K=!0:K==="FALSE"?K=!1:isNaN(cf(K))?isNaN(a1(K).getDate())||(K=Xn(K)):(K=cf(K),_!==null&&$1(_)&&(K=m4(K))),Q=!0;break;case"E":Z=!0;var P=kb(M[N].slice(1),{r:x,c:v});E[x][v]=[E[x][v],P];break;case"S":X=!0,E[x][v]=[E[x][v],"S5S"];break;case"G":break;case"R":U=parseInt(M[N].slice(1))-1;break;case"C":Y=parseInt(M[N].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+S)}if(Q&&(E[x][v]&&E[x][v].length==2?E[x][v][0]=K:E[x][v]=K,_=null),X){if(Z)throw new Error("SYLK shared formula cannot have own formula");var D=U>-1&&E[U][Y];if(!D||!D[1])throw new Error("SYLK shared formula cannot find base");E[x][v][1]=Nse(D[1],{r:x-U,c:v-Y})}break;case"F":var W=0;for(N=1;N<M.length;++N)switch(M[N].charAt(0)){case"X":v=parseInt(M[N].slice(1))-1,++W;break;case"Y":for(x=parseInt(M[N].slice(1))-1,F=E.length;F<=x;++F)E[F]=[];break;case"M":L=parseInt(M[N].slice(1))/20;break;case"F":break;case"G":break;case"P":_=B[parseInt(M[N].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(T=M[N].slice(1).split(" "),F=parseInt(T[0],10);F<=parseInt(T[1],10);++F)L=parseInt(T[2],10),k[F-1]=L===0?{hidden:!0}:{wch:L},cp(k[F-1]);break;case"C":v=parseInt(M[N].slice(1))-1,k[v]||(k[v]={});break;case"R":x=parseInt(M[N].slice(1))-1,j[x]||(j[x]={}),L>0?(j[x].hpt=L,j[x].hpx=s1(L)):L===0&&(j[x].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+S)}W<1&&(_=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+S)}}return j.length>0&&(I["!rows"]=j),k.length>0&&(I["!cols"]=k),m&&m.sheetRows&&(E=E.slice(0,m.sheetRows)),[E,I]}function o(A,m){var g=n(A,m),x=g[0],v=g[1],y=G1(x,m);return Ms(v).forEach(function(N){y[N]=v[N]}),y}function l(A,m){return Cp(o(A,m),m)}function c(A,m,g,x){var v="C;Y"+(g+1)+";X"+(x+1)+";K";switch(A.t){case"n":v+=A.v||0,A.f&&!A.F&&(v+=";E"+OL(A.f,{r:g,c:x}));break;case"b":v+=A.v?"TRUE":"FALSE";break;case"e":v+=A.w||A.v;break;case"d":v+='"'+(A.w||A.v)+'"';break;case"s":v+='"'+A.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function d(A,m){m.forEach(function(g,x){var v="F;W"+(x+1)+" "+(x+1)+" ";g.hidden?v+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=cN(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=dN(g.wpx)),typeof g.wch=="number"&&(v+=Math.round(g.wch))),v.charAt(v.length-1)!=" "&&A.push(v)})}function u(A,m){m.forEach(function(g,x){var v="F;";g.hidden?v+="M0;":g.hpt?v+="M"+20*g.hpt+";":g.hpx&&(v+="M"+20*uN(g.hpx)+";"),v.length>2&&A.push(v+"R"+(x+1))})}function f(A,m){var g=["ID;PWXL;N;E"],x=[],v=Ma(A["!ref"]),y,N=Array.isArray(A),E=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),A["!cols"]&&d(g,A["!cols"]),A["!rows"]&&u(g,A["!rows"]),g.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var B=v.s.r;B<=v.e.r;++B)for(var _=v.s.c;_<=v.e.c;++_){var I=Hr({r:B,c:_});y=N?(A[B]||[])[_]:A[I],!(!y||y.v==null&&(!y.f||y.F))&&x.push(c(y,A,B,_))}return g.join(E)+E+x.join(E)+E+"E"+E}return{to_workbook:l,to_sheet:o,from_sheet:f}}(),ise=function(){function e(i,o){switch(o.type){case"base64":return t(vd(i),o);case"binary":return t(i,o);case"buffer":return t(fa&&Buffer.isBuffer(i)?i.toString("binary"):Ep(i),o);case"array":return t(sx(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),c=-1,d=-1,u=0,f=[];u!==l.length;++u){if(l[u].trim()==="BOT"){f[++c]=[],d=0;continue}if(!(c<0)){var A=l[u].trim().split(","),m=A[0],g=A[1];++u;for(var x=l[u]||"";(x.match(/["]/g)||[]).length&1&&u<l.length-1;)x+=`
`+l[++u];switch(x=x.trim(),+m){case-1:if(x==="BOT"){f[++c]=[],d=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?f[c][d]=!0:x==="FALSE"?f[c][d]=!1:isNaN(cf(g))?isNaN(a1(g).getDate())?f[c][d]=g:f[c][d]=Xn(g):f[c][d]=cf(g),++d;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),f[c][d++]=x!==""?x:null;break}if(x==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(i,o){return G1(e(i,o),o)}function a(i,o){return Cp(r(i,o),o)}var n=function(){var i=function(c,d,u,f,A){c.push(d),c.push(u+","+f),c.push('"'+A.replace(/"/g,'""')+'"')},o=function(c,d,u,f){c.push(d+","+u),c.push(d==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var d=[],u=Ma(c["!ref"]),f,A=Array.isArray(c);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,u.e.r-u.s.r+1,""),i(d,"TUPLES",0,u.e.c-u.s.c+1,""),i(d,"DATA",0,0,"");for(var m=u.s.r;m<=u.e.r;++m){o(d,-1,0,"BOT");for(var g=u.s.c;g<=u.e.c;++g){var x=Hr({r:m,c:g});if(f=A?(c[m]||[])[g]:c[x],!f){o(d,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?o(d,1,0,"="+f.f):o(d,1,0,""):o(d,0,v,"V");break;case"b":o(d,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(d,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=pu(f.z||Fr[14],Qi(Xn(f.v)))),o(d,0,f.w,"V");break;default:o(d,1,0,"")}}}o(d,-1,0,"EOD");var y=`\r
`,N=d.join(y);return N}}();return{to_workbook:a,to_sheet:r,from_sheet:n}}(),ose=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,A){for(var m=f.split(`
`),g=-1,x=-1,v=0,y=[];v!==m.length;++v){var N=m[v].trim().split(":");if(N[0]==="cell"){var E=ms(N[1]);if(y.length<=E.r)for(g=y.length;g<=E.r;++g)y[g]||(y[g]=[]);switch(g=E.r,x=E.c,N[2]){case"t":y[g][x]=e(N[3]);break;case"v":y[g][x]=+N[3];break;case"vtf":var B=N[N.length-1];case"vtc":switch(N[3]){case"nl":y[g][x]=!!+N[4];break;default:y[g][x]=+N[4];break}N[2]=="vtf"&&(y[g][x]=[y[g][x],B])}}}return A&&A.sheetRows&&(y=y.slice(0,A.sheetRows)),y}function a(f,A){return G1(r(f,A),A)}function n(f,A){return Cp(a(f,A),A)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(f){if(!f||!f["!ref"])return"";for(var A=[],m=[],g,x="",v=_c(f["!ref"]),y=Array.isArray(f),N=v.s.r;N<=v.e.r;++N)for(var E=v.s.c;E<=v.e.c;++E)if(x=Hr({r:N,c:E}),g=y?(f[N]||[])[E]:f[x],!(!g||g.v==null||g.t==="z")){switch(m=["cell",x,"t"],g.t){case"s":case"str":m.push(t(g.v));break;case"n":g.f?(m[2]="vtf",m[3]="n",m[4]=g.v,m[5]=t(g.f)):(m[2]="v",m[3]=g.v);break;case"b":m[2]="vt"+(g.f?"f":"c"),m[3]="nl",m[4]=g.v?"1":"0",m[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var B=Qi(Xn(g.v));m[2]="vtc",m[3]="nd",m[4]=""+B,m[5]=g.w||pu(g.z||Fr[14],B);break;case"e":continue}A.push(m.join(":"))}return A.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),A.push("valueformat:1:text-wiki"),A.join(`
`)}function u(f){return[i,o,l,o,d(f),c].join(`
`)}return{to_workbook:n,to_sheet:a,from_sheet:u}}(),n1=function(){function e(u,f,A,m,g){g.raw?f[A][m]=u:u===""||(u==="TRUE"?f[A][m]=!0:u==="FALSE"?f[A][m]=!1:isNaN(cf(u))?isNaN(a1(u).getDate())?f[A][m]=u:f[A][m]=Xn(u):f[A][m]=cf(u))}function t(u,f){var A=f||{},m=[];if(!u||u.length===0)return m;for(var g=u.split(/[\r\n]/),x=g.length-1;x>=0&&g[x].length===0;)--x;for(var v=10,y=0,N=0;N<=x;++N)y=g[N].indexOf(" "),y==-1?y=g[N].length:y++,v=Math.max(v,y);for(N=0;N<=x;++N){m[N]=[];var E=0;for(e(g[N].slice(0,v).trim(),m,N,E,A),E=1;E<=(g[N].length-v)/10+1;++E)e(g[N].slice(v+(E-1)*10,v+E*10).trim(),m,N,E,A)}return A.sheetRows&&(m=m.slice(0,A.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function n(u){for(var f={},A=!1,m=0,g=0;m<u.length;++m)(g=u.charCodeAt(m))==34?A=!A:!A&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m]);if(!g.length){f=a;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m])}return g.sort(function(x,v){return x[0]-v[0]||a[x[1]]-a[v[1]]}),r[g.pop()[1]]||44}function i(u,f){var A=f||{},m="",g=A.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(m=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(m=u.charAt(4),u=u.slice(6)):m=n(u.slice(0,1024)):A&&A.FS?m=A.FS:m=n(u.slice(0,1024));var v=0,y=0,N=0,E=0,B=0,_=m.charCodeAt(0),I=!1,j=0,k=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var T=A.dateNF!=null?nSe(A.dateNF):null;function L(){var F=u.slice(E,B),S={};if(F.charAt(0)=='"'&&F.charAt(F.length-1)=='"'&&(F=F.slice(1,-1).replace(/""/g,'"')),F.length===0)S.t="z";else if(A.raw)S.t="s",S.v=F;else if(F.trim().length===0)S.t="s",S.v=F;else if(F.charCodeAt(0)==61)F.charCodeAt(1)==34&&F.charCodeAt(F.length-1)==34?(S.t="s",S.v=F.slice(2,-1).replace(/""/g,'"')):OBe(F)?(S.t="n",S.f=F.slice(1)):(S.t="s",S.v=F);else if(F=="TRUE")S.t="b",S.v=!0;else if(F=="FALSE")S.t="b",S.v=!1;else if(!isNaN(N=cf(F)))S.t="n",A.cellText!==!1&&(S.w=F),S.v=N;else if(!isNaN(a1(F).getDate())||T&&F.match(T)){S.z=A.dateNF||Fr[14];var M=0;T&&F.match(T)&&(F=sSe(F,A.dateNF,F.match(T)||[]),M=1),A.cellDates?(S.t="d",S.v=Xn(F,M)):(S.t="n",S.v=Qi(Xn(F,M))),A.cellText!==!1&&(S.w=pu(S.z,S.v instanceof Date?Qi(S.v):S.v)),A.cellNF||delete S.z}else S.t="s",S.v=F;if(S.t=="z"||(A.dense?(g[v]||(g[v]=[]),g[v][y]=S):g[Hr({c:y,r:v})]=S),E=B+1,k=u.charCodeAt(E),x.e.c<y&&(x.e.c=y),x.e.r<v&&(x.e.r=v),j==_)++y;else if(y=0,++v,A.sheetRows&&A.sheetRows<=v)return!0}e:for(;B<u.length;++B)switch(j=u.charCodeAt(B)){case 34:k===34&&(I=!I);break;case _:case 10:case 13:if(!I&&L())break e;break}return B-E>0&&L(),g["!ref"]=Zr(x),g}function o(u,f){return!(f&&f.PRN)||f.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,f):G1(t(u,f),f)}function l(u,f){var A="",m=f.type=="string"?[0,0,0,0]:HL(u,f);switch(f.type){case"base64":A=vd(u);break;case"binary":A=u;break;case"buffer":f.codepage==65001?A=u.toString("utf8"):f.codepage&&typeof tN<"u"||(A=fa&&Buffer.isBuffer(u)?u.toString("binary"):Ep(u));break;case"array":A=sx(u);break;case"string":A=u;break;default:throw new Error("Unrecognized type "+f.type)}return m[0]==239&&m[1]==187&&m[2]==191?A=Sn(A.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?A=Sn(A):f.type=="binary"&&typeof tN<"u",A.slice(0,19)=="socialcalc:version:"?ose.to_sheet(f.type=="string"?A:Sn(A),f):o(A,f)}function c(u,f){return Cp(l(u,f),f)}function d(u){for(var f=[],A=Ma(u["!ref"]),m,g=Array.isArray(u),x=A.s.r;x<=A.e.r;++x){for(var v=[],y=A.s.c;y<=A.e.c;++y){var N=Hr({r:x,c:y});if(m=g?(u[x]||[])[y]:u[N],!m||m.v==null){v.push("          ");continue}for(var E=(m.w||(aA(m),m.w)||"").slice(0,10);E.length<10;)E+=" ";v.push(E+(y===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:d}}();function v3e(e,t){var r=t||{},a=!!r.WTF;r.WTF=!0;try{var n=sse.to_workbook(e,r);return r.WTF=a,n}catch(i){if(r.WTF=a,!i.message.match(/SYLK bad record ID/)&&a)throw i;return n1.to_workbook(e,t)}}var Hg=function(){function e(P,D,W){if(P){Oo(P,P.l||0);for(var J=W.Enum||U;P.l<P.length;){var ce=P.read_shift(2),ie=J[ce]||J[65535],re=P.read_shift(2),de=P.l+re,oe=ie.f&&ie.f(P,re,W);if(P.l=de,D(oe,ie,ce))return}}}function t(P,D){switch(D.type){case"base64":return r(dd(vd(P)),D);case"binary":return r(dd(P),D);case"buffer":case"array":return r(P,D)}throw"Unsupported type "+D.type}function r(P,D){if(!P)return P;var W=D||{},J=W.dense?[]:{},ce="Sheet1",ie="",re=0,de={},oe=[],be=[],q={s:{r:0,c:0},e:{r:0,c:0}},we=W.sheetRows||0;if(P[2]==0&&(P[3]==8||P[3]==9)&&P.length>=16&&P[14]==5&&P[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(P[2]==2)W.Enum=U,e(P,function(ge,he,ve){switch(ve){case 0:W.vers=ge,ge>=4096&&(W.qpro=!0);break;case 6:q=ge;break;case 204:ge&&(ie=ge);break;case 222:ie=ge;break;case 15:case 51:W.qpro||(ge[1].v=ge[1].v.slice(1));case 13:case 14:case 16:ve==14&&(ge[2]&112)==112&&(ge[2]&15)>1&&(ge[2]&15)<15&&(ge[1].z=W.dateNF||Fr[14],W.cellDates&&(ge[1].t="d",ge[1].v=m4(ge[1].v))),W.qpro&&ge[3]>re&&(J["!ref"]=Zr(q),de[ce]=J,oe.push(ce),J=W.dense?[]:{},q={s:{r:0,c:0},e:{r:0,c:0}},re=ge[3],ce=ie||"Sheet"+(re+1),ie="");var le=W.dense?(J[ge[0].r]||[])[ge[0].c]:J[Hr(ge[0])];if(le){le.t=ge[1].t,le.v=ge[1].v,ge[1].z!=null&&(le.z=ge[1].z),ge[1].f!=null&&(le.f=ge[1].f);break}W.dense?(J[ge[0].r]||(J[ge[0].r]=[]),J[ge[0].r][ge[0].c]=ge[1]):J[Hr(ge[0])]=ge[1];break}},W);else if(P[2]==26||P[2]==14)W.Enum=Y,P[2]==14&&(W.qpro=!0,P.l=0),e(P,function(ge,he,ve){switch(ve){case 204:ce=ge;break;case 22:ge[1].v=ge[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ge[3]>re&&(J["!ref"]=Zr(q),de[ce]=J,oe.push(ce),J=W.dense?[]:{},q={s:{r:0,c:0},e:{r:0,c:0}},re=ge[3],ce="Sheet"+(re+1)),we>0&&ge[0].r>=we)break;W.dense?(J[ge[0].r]||(J[ge[0].r]=[]),J[ge[0].r][ge[0].c]=ge[1]):J[Hr(ge[0])]=ge[1],q.e.c<ge[0].c&&(q.e.c=ge[0].c),q.e.r<ge[0].r&&(q.e.r=ge[0].r);break;case 27:ge[14e3]&&(be[ge[14e3][0]]=ge[14e3][1]);break;case 1537:be[ge[0]]=ge[1],ge[0]==re&&(ce=ge[1]);break}},W);else throw new Error("Unrecognized LOTUS BOF "+P[2]);if(J["!ref"]=Zr(q),de[ie||ce]=J,oe.push(ie||ce),!be.length)return{SheetNames:oe,Sheets:de};for(var Te={},Ee=[],ue=0;ue<be.length;++ue)de[oe[ue]]?(Ee.push(be[ue]||oe[ue]),Te[be[ue]]=de[be[ue]]||de[oe[ue]]):(Ee.push(be[ue]),Te[be[ue]]={"!ref":"A1"});return{SheetNames:Ee,Sheets:Te}}function a(P,D){var W=D||{};if(+W.codepage>=0&&rf(+W.codepage),W.type=="string")throw new Error("Cannot write WK1 to JS string");var J=kc(),ce=Ma(P["!ref"]),ie=Array.isArray(P),re=[];Xt(J,0,i(1030)),Xt(J,6,c(ce));for(var de=Math.min(ce.e.r,8191),oe=ce.s.r;oe<=de;++oe)for(var be=li(oe),q=ce.s.c;q<=ce.e.c;++q){oe===ce.s.r&&(re[q]=As(q));var we=re[q]+be,Te=ie?(P[oe]||[])[q]:P[we];if(!(!Te||Te.t=="z"))if(Te.t=="n")(Te.v|0)==Te.v&&Te.v>=-32768&&Te.v<=32767?Xt(J,13,m(oe,q,Te.v)):Xt(J,14,x(oe,q,Te.v));else{var Ee=aA(Te);Xt(J,15,f(oe,q,Ee.slice(0,239)))}}return Xt(J,1),J.end()}function n(P,D){var W=D||{};if(+W.codepage>=0&&rf(+W.codepage),W.type=="string")throw new Error("Cannot write WK3 to JS string");var J=kc();Xt(J,0,o(P));for(var ce=0,ie=0;ce<P.SheetNames.length;++ce)(P.Sheets[P.SheetNames[ce]]||{})["!ref"]&&Xt(J,27,Z(P.SheetNames[ce],ie++));var re=0;for(ce=0;ce<P.SheetNames.length;++ce){var de=P.Sheets[P.SheetNames[ce]];if(!(!de||!de["!ref"])){for(var oe=Ma(de["!ref"]),be=Array.isArray(de),q=[],we=Math.min(oe.e.r,8191),Te=oe.s.r;Te<=we;++Te)for(var Ee=li(Te),ue=oe.s.c;ue<=oe.e.c;++ue){Te===oe.s.r&&(q[ue]=As(ue));var ge=q[ue]+Ee,he=be?(de[Te]||[])[ue]:de[ge];if(!(!he||he.t=="z"))if(he.t=="n")Xt(J,23,L(Te,ue,re,he.v));else{var ve=aA(he);Xt(J,22,j(Te,ue,re,ve.slice(0,239)))}}++re}}return Xt(J,1),J.end()}function i(P){var D=St(2);return D.write_shift(2,P),D}function o(P){var D=St(26);D.write_shift(2,4096),D.write_shift(2,4),D.write_shift(4,0);for(var W=0,J=0,ce=0,ie=0;ie<P.SheetNames.length;++ie){var re=P.SheetNames[ie],de=P.Sheets[re];if(!(!de||!de["!ref"])){++ce;var oe=_c(de["!ref"]);W<oe.e.r&&(W=oe.e.r),J<oe.e.c&&(J=oe.e.c)}}return W>8191&&(W=8191),D.write_shift(2,W),D.write_shift(1,ce),D.write_shift(1,J),D.write_shift(2,0),D.write_shift(2,0),D.write_shift(1,1),D.write_shift(1,2),D.write_shift(4,0),D.write_shift(4,0),D}function l(P,D,W){var J={s:{c:0,r:0},e:{c:0,r:0}};return D==8&&W.qpro?(J.s.c=P.read_shift(1),P.l++,J.s.r=P.read_shift(2),J.e.c=P.read_shift(1),P.l++,J.e.r=P.read_shift(2),J):(J.s.c=P.read_shift(2),J.s.r=P.read_shift(2),D==12&&W.qpro&&(P.l+=2),J.e.c=P.read_shift(2),J.e.r=P.read_shift(2),D==12&&W.qpro&&(P.l+=2),J.s.c==65535&&(J.s.c=J.e.c=J.s.r=J.e.r=0),J)}function c(P){var D=St(8);return D.write_shift(2,P.s.c),D.write_shift(2,P.s.r),D.write_shift(2,P.e.c),D.write_shift(2,P.e.r),D}function d(P,D,W){var J=[{c:0,r:0},{t:"n",v:0},0,0];return W.qpro&&W.vers!=20768?(J[0].c=P.read_shift(1),J[3]=P.read_shift(1),J[0].r=P.read_shift(2),P.l+=2):(J[2]=P.read_shift(1),J[0].c=P.read_shift(2),J[0].r=P.read_shift(2)),J}function u(P,D,W){var J=P.l+D,ce=d(P,D,W);if(ce[1].t="s",W.vers==20768){P.l++;var ie=P.read_shift(1);return ce[1].v=P.read_shift(ie,"utf8"),ce}return W.qpro&&P.l++,ce[1].v=P.read_shift(J-P.l,"cstr"),ce}function f(P,D,W){var J=St(7+W.length);J.write_shift(1,255),J.write_shift(2,D),J.write_shift(2,P),J.write_shift(1,39);for(var ce=0;ce<J.length;++ce){var ie=W.charCodeAt(ce);J.write_shift(1,ie>=128?95:ie)}return J.write_shift(1,0),J}function A(P,D,W){var J=d(P,D,W);return J[1].v=P.read_shift(2,"i"),J}function m(P,D,W){var J=St(7);return J.write_shift(1,255),J.write_shift(2,D),J.write_shift(2,P),J.write_shift(2,W,"i"),J}function g(P,D,W){var J=d(P,D,W);return J[1].v=P.read_shift(8,"f"),J}function x(P,D,W){var J=St(13);return J.write_shift(1,255),J.write_shift(2,D),J.write_shift(2,P),J.write_shift(8,W,"f"),J}function v(P,D,W){var J=P.l+D,ce=d(P,D,W);if(ce[1].v=P.read_shift(8,"f"),W.qpro)P.l=J;else{var ie=P.read_shift(2);B(P.slice(P.l,P.l+ie),ce),P.l+=ie}return ce}function y(P,D,W){var J=D&32768;return D&=-32769,D=(J?P:0)+(D>=8192?D-16384:D),(J?"":"$")+(W?As(D):li(D))}var N={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},E=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function B(P,D){Oo(P,0);for(var W=[],J=0,ce="",ie="",re="",de="";P.l<P.length;){var oe=P[P.l++];switch(oe){case 0:W.push(P.read_shift(8,"f"));break;case 1:ie=y(D[0].c,P.read_shift(2),!0),ce=y(D[0].r,P.read_shift(2),!1),W.push(ie+ce);break;case 2:{var be=y(D[0].c,P.read_shift(2),!0),q=y(D[0].r,P.read_shift(2),!1);ie=y(D[0].c,P.read_shift(2),!0),ce=y(D[0].r,P.read_shift(2),!1),W.push(be+q+":"+ie+ce)}break;case 3:if(P.l<P.length){console.error("WK1 premature formula end");return}break;case 4:W.push("("+W.pop()+")");break;case 5:W.push(P.read_shift(2));break;case 6:{for(var we="";oe=P[P.l++];)we+=String.fromCharCode(oe);W.push('"'+we.replace(/"/g,'""')+'"')}break;case 8:W.push("-"+W.pop());break;case 23:W.push("+"+W.pop());break;case 22:W.push("NOT("+W.pop()+")");break;case 20:case 21:de=W.pop(),re=W.pop(),W.push(["AND","OR"][oe-20]+"("+re+","+de+")");break;default:if(oe<32&&E[oe])de=W.pop(),re=W.pop(),W.push(re+E[oe]+de);else if(N[oe]){if(J=N[oe][1],J==69&&(J=P[P.l++]),J>W.length){console.error("WK1 bad formula parse 0x"+oe.toString(16)+":|"+W.join("|")+"|");return}var Te=W.slice(-J);W.length-=J,W.push(N[oe][0]+"("+Te.join(",")+")")}else return oe<=7?console.error("WK1 invalid opcode "+oe.toString(16)):oe<=24?console.error("WK1 unsupported op "+oe.toString(16)):oe<=30?console.error("WK1 invalid opcode "+oe.toString(16)):oe<=115?console.error("WK1 unsupported function opcode "+oe.toString(16)):console.error("WK1 unrecognized opcode "+oe.toString(16))}}W.length==1?D[1].f=""+W[0]:console.error("WK1 bad formula parse |"+W.join("|")+"|")}function _(P){var D=[{c:0,r:0},{t:"n",v:0},0];return D[0].r=P.read_shift(2),D[3]=P[P.l++],D[0].c=P[P.l++],D}function I(P,D){var W=_(P);return W[1].t="s",W[1].v=P.read_shift(D-4,"cstr"),W}function j(P,D,W,J){var ce=St(6+J.length);ce.write_shift(2,P),ce.write_shift(1,W),ce.write_shift(1,D),ce.write_shift(1,39);for(var ie=0;ie<J.length;++ie){var re=J.charCodeAt(ie);ce.write_shift(1,re>=128?95:re)}return ce.write_shift(1,0),ce}function k(P,D){var W=_(P);W[1].v=P.read_shift(2);var J=W[1].v>>1;if(W[1].v&1)switch(J&7){case 0:J=(J>>3)*5e3;break;case 1:J=(J>>3)*500;break;case 2:J=(J>>3)/20;break;case 3:J=(J>>3)/200;break;case 4:J=(J>>3)/2e3;break;case 5:J=(J>>3)/2e4;break;case 6:J=(J>>3)/16;break;case 7:J=(J>>3)/64;break}return W[1].v=J,W}function T(P,D){var W=_(P),J=P.read_shift(4),ce=P.read_shift(4),ie=P.read_shift(2);if(ie==65535)return J===0&&ce===3221225472?(W[1].t="e",W[1].v=15):J===0&&ce===3489660928?(W[1].t="e",W[1].v=42):W[1].v=0,W;var re=ie&32768;return ie=(ie&32767)-16446,W[1].v=(1-re*2)*(ce*Math.pow(2,ie+32)+J*Math.pow(2,ie)),W}function L(P,D,W,J){var ce=St(14);if(ce.write_shift(2,P),ce.write_shift(1,W),ce.write_shift(1,D),J==0)return ce.write_shift(4,0),ce.write_shift(4,0),ce.write_shift(2,65535),ce;var ie=0,re=0,de=0,oe=0;return J<0&&(ie=1,J=-J),re=Math.log2(J)|0,J/=Math.pow(2,re-31),oe=J>>>0,(oe&2147483648)==0&&(J/=2,++re,oe=J>>>0),J-=oe,oe|=2147483648,oe>>>=0,J*=Math.pow(2,32),de=J>>>0,ce.write_shift(4,de),ce.write_shift(4,oe),re+=16383+(ie?32768:0),ce.write_shift(2,re),ce}function F(P,D){var W=T(P);return P.l+=D-14,W}function S(P,D){var W=_(P),J=P.read_shift(4);return W[1].v=J>>6,W}function M(P,D){var W=_(P),J=P.read_shift(8,"f");return W[1].v=J,W}function H(P,D){var W=M(P);return P.l+=D-10,W}function K(P,D){return P[P.l+D-1]==0?P.read_shift(D,"cstr"):""}function Q(P,D){var W=P[P.l++];W>D-1&&(W=D-1);for(var J="";J.length<W;)J+=String.fromCharCode(P[P.l++]);return J}function G(P,D,W){if(!(!W.qpro||D<21)){var J=P.read_shift(1);P.l+=17,P.l+=1,P.l+=2;var ce=P.read_shift(D-21,"cstr");return[J,ce]}}function X(P,D){for(var W={},J=P.l+D;P.l<J;){var ce=P.read_shift(2);if(ce==14e3){for(W[ce]=[0,""],W[ce][0]=P.read_shift(2);P[P.l];)W[ce][1]+=String.fromCharCode(P[P.l]),P.l++;P.l++}}return W}function Z(P,D){var W=St(5+P.length);W.write_shift(2,14e3),W.write_shift(2,D);for(var J=0;J<P.length;++J){var ce=P.charCodeAt(J);W[W.l++]=ce>127?95:ce}return W[W.l++]=0,W}var U={0:{n:"BOF",f:wi},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:A},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:K},222:{n:"SHEETNAMELP",f:Q},65535:{n:""}},Y={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:I},23:{n:"NUMBER17",f:T},24:{n:"NUMBER18",f:k},25:{n:"FORMULA19",f:F},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:X},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:S},38:{n:"??"},39:{n:"NUMBER27",f:M},40:{n:"FORMULA28",f:H},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:K},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:G},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:n,to_workbook:t}}();function b3e(e){var t={},r=e.match(Tl),a=0,n=!1;if(r)for(;a!=r.length;++a){var i=Vr(r[a]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=nL[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(i[0].charCodeAt(1)!==47&&!n)throw new Error("Unrecognized rich format "+i[0])}}return t}var y3e=function(){var e=nN("t"),t=nN("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Ra(o[1])},c=i.match(t);return c&&(l.s=b3e(c[1])),l}var a=/<(?:\w+:)?r>/g,n=/<\/(?:\w+:)?r>/;return function(o){return o.replace(a,"").split(n).map(r).filter(function(l){return l.v})}}(),w3e=function(){var t=/(\r\n|\n)/g;function r(n,i,o){var l=[];n.u&&l.push("text-decoration: underline;"),n.uval&&l.push("text-underline-style:"+n.uval+";"),n.sz&&l.push("font-size:"+n.sz+"pt;"),n.outline&&l.push("text-effect: outline;"),n.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),n.b&&(i.push("<b>"),o.push("</b>")),n.i&&(i.push("<i>"),o.push("</i>")),n.strike&&(i.push("<s>"),o.push("</s>"));var c=n.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),n}function a(n){var i=[[],n.v,[]];return n.v?(n.s&&r(n.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(a).join("")}}(),N3e=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,E3e=/<(?:\w+:)?r>/,C3e=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function SL(e,t){var r=t?t.cellHTML:!0,a={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=Ra(Sn(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=Sn(e),r&&(a.h=AL(a.t))):e.match(E3e)&&(a.r=Sn(e),a.t=Ra(Sn((e.replace(C3e,"").match(N3e)||[]).join("").replace(Tl,""))),r&&(a.h=w3e(y3e(a.r)))),a):{t:""}}var j3e=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,k3e=/<(?:\w+:)?(?:si|sstItem)>/g,S3e=/<\/(?:\w+:)?(?:si|sstItem)>/;function _3e(e,t){var r=[],a="";if(!e)return r;var n=e.match(j3e);if(n){a=n[2].replace(k3e,"").split(S3e);for(var i=0;i!=a.length;++i){var o=SL(a[i].trim(),t);o!=null&&(r[r.length]=o)}n=Vr(n[1]),r.Count=n.count,r.Unique=n.uniqueCount}return r}var T3e=/^\s|\s$|[\t\n\r]/;function lse(e,t){if(!t.bookSST)return"";var r=[di];r[r.length]=Wt("sst",null,{xmlns:Sx[0],count:e.Count,uniqueCount:e.Unique});for(var a=0;a!=e.length;++a)if(e[a]!=null){var n=e[a],i="<si>";n.r?i+=n.r:(i+="<t",n.t||(n.t=""),n.t.match(T3e)&&(i+=' xml:space="preserve"'),i+=">"+yn(n.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function B3e(e){return[e.read_shift(4),e.read_shift(4)]}function I3e(e,t){var r=[],a=!1;return vA(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(o.T,!a||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function O3e(e,t){return t||(t=St(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var D3e=$Se;function F3e(e){var t=kc();Ut(t,159,O3e(e));for(var r=0;r<e.length;++r)Ut(t,19,D3e(e[r]));return Ut(t,160),t.end()}function cse(e){for(var t=[],r=e.split(""),a=0;a<r.length;++a)t[a]=r[a].charCodeAt(0);return t}function $0(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function P3e(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=$0(e,4),t.U=$0(e,4),t.W=$0(e,4),t}function R3e(e){for(var t=e.read_shift(4),r=e.l+t-4,a={},n=e.read_shift(4),i=[];n-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(a.name=e.read_shift(0,"lpp4"),a.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return a}function L3e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(R3e(e));return t}function M3e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function U3e(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=$0(e,4),t.U=$0(e,4),t.W=$0(e,4),t}function H3e(e){var t=U3e(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function dse(e,t){var r=e.l+t,a={};a.Flags=e.read_shift(4)&63,e.l+=4,a.AlgID=e.read_shift(4);var n=!1;switch(a.AlgID){case 26126:case 26127:case 26128:n=a.Flags==36;break;case 26625:n=a.Flags==4;break;case 0:n=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!n)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=e.read_shift(4),a.KeySize=e.read_shift(4),a.ProviderType=e.read_shift(4),e.l+=8,a.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,a}function use(e,t){var r={},a=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,a),e.l=a,r}function Q3e(e){var t=$0(e);switch(t.Minor){case 2:return[t.Minor,z3e(e)];case 3:return[t.Minor,$3e()];case 4:return[t.Minor,V3e(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function z3e(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),a=dse(e,r),n=use(e,e.length-e.l);return{t:"Std",h:a,v:n}}function $3e(){throw new Error("File is password-protected: ECMA-376 Extensible")}function V3e(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),a={};return r.replace(Tl,function(i){var o=Vr(i);switch(Mh(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){a[l]=o[l]});break;case"<dataIntegrity":a.encryptedHmacKey=o.encryptedHmacKey,a.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(o);break;default:throw o[0]}}),a}function G3e(e,t){var r={},a=r.EncryptionVersionInfo=$0(e,4);if(t-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);r.Flags=e.read_shift(4),t-=4;var n=e.read_shift(4);return t-=4,r.EncryptionHeader=dse(e,n),t-=n,r.EncryptionVerifier=use(e,t),r}function q3e(e){var t={},r=t.EncryptionVersionInfo=$0(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function _L(e){var t=0,r,a=cse(e),n=a.length+1,i,o,l,c,d;for(r=lp(n),r[0]=a.length,i=1;i!=n;++i)r[i]=a[i-1];for(i=n-1;i>=0;--i)o=r[i],l=(t&16384)===0?0:1,c=t<<1&32767,d=l|c,t=d^o;return t^52811}var fse=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(o){return(o/2|o*128)&255},n=function(o,l){return a(o^l)},i=function(o){for(var l=t[o.length-1],c=104,d=o.length-1;d>=0;--d)for(var u=o[d],f=0;f!=7;++f)u&64&&(l^=r[c]),u*=2,--c;return l};return function(o){for(var l=cse(o),c=i(l),d=l.length,u=lp(16),f=0;f!=16;++f)u[f]=0;var A,m,g;for((d&1)===1&&(A=c>>8,u[d]=n(e[0],A),--d,A=c&255,m=l[l.length-1],u[d]=n(m,A));d>0;)--d,A=c>>8,u[d]=n(l[d],A),--d,A=c&255,u[d]=n(l[d],A);for(d=15,g=15-l.length;g>0;)A=c>>8,u[d]=n(e[g],A),--d,--g,A=c&255,u[d]=n(l[d],A),--d,--g;return u}}(),K3e=function(e,t,r,a,n){n||(n=t),a||(a=fse(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=a[r],o=(o>>5|o<<3)&255,n[i]=o,++r;return[n,r,a]},W3e=function(e){var t=0,r=fse(e);return function(a){var n=K3e("",a,t,r);return t=n[1],n[0]}};function X3e(e,t,r,a){var n={key:wi(e),verificationBytes:wi(e)};return r.password&&(n.verifier=_L(r.password)),a.valid=n.verificationBytes===n.verifier,a.valid&&(a.insitu=W3e(r.password)),n}function Y3e(e,t,r){var a=r||{};return a.Info=e.read_shift(2),e.l-=2,a.Info===1?a.Data=q3e(e):a.Data=G3e(e,t),a}function J3e(e,t,r){var a={Type:r.biff>=8?e.read_shift(2):0};return a.Type?Y3e(e,t-2,a):X3e(e,r.biff>=8?t:t-2,r,a),a}var hse=function(){function e(n,i){switch(i.type){case"base64":return t(vd(n),i);case"binary":return t(n,i);case"buffer":return t(fa&&Buffer.isBuffer(n)?n.toString("binary"):Ep(n),i);case"array":return t(sx(n),i)}throw new Error("Unrecognized type "+i.type)}function t(n,i){var o=i||{},l=o.dense?[]:{},c=n.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,f){Array.isArray(l)&&(l[f]=[]);for(var A=/\\\w+\b/g,m=0,g,x=-1;g=A.exec(u);){switch(g[0]){case"\\cell":var v=u.slice(m,A.lastIndex-g[0].length);if(v[0]==" "&&(v=v.slice(1)),++x,v.length){var y={v,t:"s"};Array.isArray(l)?l[f][x]=y:l[Hr({r:f,c:x})]=y}break}m=A.lastIndex}x>d.e.c&&(d.e.c=x)}),l["!ref"]=Zr(d),l}function r(n,i){return Cp(e(n,i),i)}function a(n){for(var i=["{\\rtf1\\ansi"],o=Ma(n["!ref"]),l,c=Array.isArray(n),d=o.s.r;d<=o.e.r;++d){i.push("\\trowd\\trautofit1");for(var u=o.s.c;u<=o.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=o.s.c;u<=o.e.c;++u){var f=Hr({r:d,c:u});l=c?(n[d]||[])[u]:n[f],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(aA(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:a}}();function Z3e(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function lN(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function eTe(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255,n=Math.max(t,r,a),i=Math.min(t,r,a),o=n-i;if(o===0)return[0,0,t];var l=0,c=0,d=n+i;switch(c=o/(d>1?2-d:d),n){case t:l=((r-a)/o+6)%6;break;case r:l=(a-t)/o+2;break;case a:l=(t-r)/o+4;break}return[l/6,c,d/2]}function tTe(e){var t=e[0],r=e[1],a=e[2],n=r*2*(a<.5?a:1-a),i=a-n/2,o=[i,i,i],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=n*l,o[0]+=n,o[1]+=c;break;case 1:c=n*(2-l),o[0]+=c,o[1]+=n;break;case 2:c=n*(l-2),o[1]+=n,o[2]+=c;break;case 3:c=n*(4-l),o[1]+=c,o[2]+=n;break;case 4:c=n*(l-4),o[2]+=n,o[0]+=c;break;case 5:c=n*(6-l),o[2]+=c,o[0]+=n;break}for(var d=0;d!=3;++d)o[d]=Math.round(o[d]*255);return o}function K5(e,t){if(t===0)return e;var r=eTe(Z3e(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),lN(tTe(r))}var Ase=6,rTe=15,aTe=1,hl=Ase;function cN(e){return Math.floor((e+Math.round(128/hl)/256)*hl)}function dN(e){return Math.floor((e-5)/hl*100+.5)/100}function W5(e){return Math.round((e*hl+5)/hl*256)/256}function zB(e){return W5(dN(cN(e)))}function TL(e){var t=Math.abs(e-zB(e)),r=hl;if(t>.005)for(hl=aTe;hl<rTe;++hl)Math.abs(e-zB(e))<=t&&(t=Math.abs(e-zB(e)),r=hl);hl=r}function cp(e){e.width?(e.wpx=cN(e.width),e.wch=dN(e.wpx),e.MDW=hl):e.wpx?(e.wch=dN(e.wpx),e.width=W5(e.wch),e.MDW=hl):typeof e.wch=="number"&&(e.width=W5(e.wch),e.wpx=cN(e.width),e.MDW=hl),e.customWidth&&delete e.customWidth}var nTe=96,mse=nTe;function uN(e){return e*96/mse}function s1(e){return e*mse/96}var sTe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function iTe(e,t,r,a){t.Borders=[];var n={},i=!1;(e[0].match(Tl)||[]).forEach(function(o){var l=Vr(o);switch(Mh(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":n={},l.diagonalUp&&(n.diagonalUp=Kn(l.diagonalUp)),l.diagonalDown&&(n.diagonalDown=Kn(l.diagonalDown)),t.Borders.push(n);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function oTe(e,t,r,a){t.Fills=[];var n={},i=!1;(e[0].match(Tl)||[]).forEach(function(o){var l=Vr(o);switch(Mh(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":n={},t.Fills.push(n);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(n),n={};break;case"<patternFill":case"<patternFill>":l.patternType&&(n.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":n.bgColor||(n.bgColor={}),l.indexed&&(n.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(n.bgColor.theme=parseInt(l.theme,10)),l.tint&&(n.bgColor.tint=parseFloat(l.tint)),l.rgb&&(n.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":n.fgColor||(n.fgColor={}),l.theme&&(n.fgColor.theme=parseInt(l.theme,10)),l.tint&&(n.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(n.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function lTe(e,t,r,a){t.Fonts=[];var n={},i=!1;(e[0].match(Tl)||[]).forEach(function(o){var l=Vr(o);switch(Mh(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(n),n={};break;case"<name":l.val&&(n.name=Sn(l.val));break;case"<name/>":case"</name>":break;case"<b":n.bold=l.val?Kn(l.val):1;break;case"<b/>":n.bold=1;break;case"<i":n.italic=l.val?Kn(l.val):1;break;case"<i/>":n.italic=1;break;case"<u":switch(l.val){case"none":n.underline=0;break;case"single":n.underline=1;break;case"double":n.underline=2;break;case"singleAccounting":n.underline=33;break;case"doubleAccounting":n.underline=34;break}break;case"<u/>":n.underline=1;break;case"<strike":n.strike=l.val?Kn(l.val):1;break;case"<strike/>":n.strike=1;break;case"<outline":n.outline=l.val?Kn(l.val):1;break;case"<outline/>":n.outline=1;break;case"<shadow":n.shadow=l.val?Kn(l.val):1;break;case"<shadow/>":n.shadow=1;break;case"<condense":n.condense=l.val?Kn(l.val):1;break;case"<condense/>":n.condense=1;break;case"<extend":n.extend=l.val?Kn(l.val):1;break;case"<extend/>":n.extend=1;break;case"<sz":l.val&&(n.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(n.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(n.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(n.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=nL[parseInt(l.val,10)];break;case"<color":if(n.color||(n.color={}),l.auto&&(n.color.auto=Kn(l.auto)),l.rgb)n.color.rgb=l.rgb.slice(-6);else if(l.indexed){n.color.index=parseInt(l.indexed,10);var c=Mg[n.color.index];n.color.index==81&&(c=Mg[1]),c||(c=Mg[1]),n.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(n.color.theme=parseInt(l.theme,10),l.tint&&(n.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(n.color.rgb=K5(r.themeElements.clrScheme[n.color.theme].rgb,n.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function cTe(e,t,r){t.NumberFmt=[];for(var a=Ms(Fr),n=0;n<a.length;++n)t.NumberFmt[a[n]]=Fr[a[n]];var i=e[0].match(Tl);if(i)for(n=0;n<i.length;++n){var o=Vr(i[n]);switch(Mh(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Ra(Sn(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}z0(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function dTe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&(t[t.length]=Wt("numFmt",null,{numFmtId:a,formatCode:yn(e[a])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Wt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var lj=["numFmtId","fillId","fontId","borderId","xfId"],cj=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function uTe(e,t,r){t.CellXf=[];var a,n=!1;(e[0].match(Tl)||[]).forEach(function(i){var o=Vr(i),l=0;switch(Mh(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=o,delete a[0],l=0;l<lj.length;++l)a[lj[l]]&&(a[lj[l]]=parseInt(a[lj[l]],10));for(l=0;l<cj.length;++l)a[cj[l]]&&(a[cj[l]]=Kn(a[cj[l]]));if(t.NumberFmt&&a.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[a.numFmtId]==t.NumberFmt[l]){a.numFmtId=l;break}}t.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=Kn(o.wrapText)),a.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":n=!0;break;case"</AlternateContent>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(r&&r.WTF&&!n)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function fTe(e){var t=[];return t[t.length]=Wt("cellXfs",null),e.forEach(function(r){t[t.length]=Wt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Wt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var hTe=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,n=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,d){var u={};if(!l)return u;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(t))&&cTe(f,u,d),(f=l.match(n))&&lTe(f,u,c,d),(f=l.match(a))&&oTe(f,u,c,d),(f=l.match(i))&&iTe(f,u,c,d),(f=l.match(r))&&uTe(f,u,d),u}}();function pse(e,t){var r=[di,Wt("styleSheet",null,{xmlns:Sx[0],"xmlns:vt":Mi.vt})],a;return e.SSF&&(a=dTe(e.SSF))!=null&&(r[r.length]=a),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=fTe(t.cellXfs))&&(r[r.length]=a),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function ATe(e,t){var r=e.read_shift(2),a=Cl(e);return[r,a]}function mTe(e,t,r){r||(r=St(6+4*t.length)),r.write_shift(2,e),uo(t,r);var a=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),a}function pTe(e,t,r){var a={};a.sz=e.read_shift(2)/20;var n=YSe(e);n.fItalic&&(a.italic=1),n.fCondense&&(a.condense=1),n.fExtend&&(a.extend=1),n.fShadow&&(a.shadow=1),n.fOutline&&(a.outline=1),n.fStrikeout&&(a.strike=1);var i=e.read_shift(2);switch(i===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(a.underline=o);var l=e.read_shift(1);l>0&&(a.family=l);var c=e.read_shift(1);switch(c>0&&(a.charset=c),e.l++,a.color=XSe(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=Cl(e),a}function gTe(e,t){t||(t=St(153)),t.write_shift(2,e.sz*20),JSe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),V5(e.color,t);var a=0;return a=2,t.write_shift(1,a),uo(e.name,t),t.length>t.l?t.slice(0,t.l):t}var xTe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],$B,vTe=Sl;function hV(e,t){t||(t=St(84)),$B||($B=h4(xTe));var r=$B[e.patternType];r==null&&(r=40),t.write_shift(4,r);var a=0;if(r!=40)for(V5({auto:1},t),V5({auto:1},t);a<12;++a)t.write_shift(4,0);else{for(;a<4;++a)t.write_shift(4,0);for(;a<12;++a)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function bTe(e,t){var r=e.l+t,a=e.read_shift(2),n=e.read_shift(2);return e.l=r,{ixfe:a,numFmtId:n}}function gse(e,t,r){r||(r=St(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var a=0;return r.write_shift(1,a),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function rw(e,t){return t||(t=St(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var yTe=Sl;function wTe(e,t){return t||(t=St(51)),t.write_shift(1,0),rw(null,t),rw(null,t),rw(null,t),rw(null,t),rw(null,t),t.length>t.l?t.slice(0,t.l):t}function NTe(e,t){return t||(t=St(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),$5(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function ETe(e,t,r){var a=St(2052);return a.write_shift(4,e),$5(t,a),$5(r,a),a.length>a.l?a.slice(0,a.l):a}function CTe(e,t,r){var a={};a.NumberFmt=[];for(var n in Fr)a.NumberFmt[n]=Fr[n];a.CellXf=[],a.Fonts=[];var i=[],o=!1;return vA(e,function(c,d,u){switch(u){case 44:a.NumberFmt[c[0]]=c[1],z0(c[1],c[0]);break;case 43:a.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=K5(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&a.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(u),o=!0;break;case 38:i.pop(),o=!1;break;default:if(d.T>0)i.push(u);else if(d.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),a}function jTe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var n=a[0];n<=a[1];++n)t[n]!=null&&++r}),r!=0&&(Ut(e,615,df(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var n=a[0];n<=a[1];++n)t[n]!=null&&Ut(e,44,mTe(n,t[n]))}),Ut(e,616))}}function kTe(e){var t=1;Ut(e,611,df(t)),Ut(e,43,gTe({sz:12,color:{theme:1},name:"Calibri",family:2})),Ut(e,612)}function STe(e){var t=2;Ut(e,603,df(t)),Ut(e,45,hV({patternType:"none"})),Ut(e,45,hV({patternType:"gray125"})),Ut(e,604)}function _Te(e){var t=1;Ut(e,613,df(t)),Ut(e,46,wTe()),Ut(e,614)}function TTe(e){var t=1;Ut(e,626,df(t)),Ut(e,47,gse({numFmtId:0},65535)),Ut(e,627)}function BTe(e,t){Ut(e,617,df(t.length)),t.forEach(function(r){Ut(e,47,gse(r,0))}),Ut(e,618)}function ITe(e){var t=1;Ut(e,619,df(t)),Ut(e,48,NTe({xfId:0,name:"Normal"})),Ut(e,620)}function OTe(e){var t=0;Ut(e,505,df(t)),Ut(e,506)}function DTe(e){var t=0;Ut(e,508,ETe(t,"TableStyleMedium9","PivotStyleMedium4")),Ut(e,509)}function FTe(e,t){var r=kc();return Ut(r,278),jTe(r,e.SSF),kTe(r),STe(r),_Te(r),TTe(r),BTe(r,t.cellXfs),ITe(r),OTe(r),DTe(r),Ut(r,279),r.end()}var PTe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function RTe(e,t,r){t.themeElements.clrScheme=[];var a={};(e[0].match(Tl)||[]).forEach(function(n){var i=Vr(n);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=i.val;break;case"<a:sysClr":a.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[PTe.indexOf(i[0])]=a,a={}):a.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function LTe(){}function MTe(){}var UTe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,HTe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,QTe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function zTe(e,t,r){t.themeElements={};var a;[["clrScheme",UTe,RTe],["fontScheme",HTe,LTe],["fmtScheme",QTe,MTe]].forEach(function(n){if(!(a=e.match(n[1])))throw new Error(n[0]+" not found in themeElements");n[2](a,t,r)})}var $Te=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function xse(e,t){(!e||e.length===0)&&(e=BL());var r,a={};if(!(r=e.match($Te)))throw new Error("themeElements not found in theme");return zTe(r[0],a,t),a.raw=e,a}function BL(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[di];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function VTe(e,t,r){var a=e.l+t,n=e.read_shift(4);if(n!==124226){if(!r.cellStyles){e.l=a;return}var i=e.slice(e.l);e.l=a;var o;try{o=dne(i,{type:"array"})}catch{return}var l=ud(o,"theme/theme/theme1.xml",!0);if(l)return xse(l,r)}}function GTe(e){return e.read_shift(4)}function qTe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=KTe(e,4);break;case 2:t.xclrValue=Yne(e);break;case 3:t.xclrValue=GTe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function KTe(e,t){return Sl(e,t)}function WTe(e,t){return Sl(e,t)}function XTe(e){var t=e.read_shift(2),r=e.read_shift(2)-4,a=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=qTe(e);break;case 6:a[1]=WTe(e,r);break;case 14:case 15:a[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return a}function YTe(e,t){var r=e.l+t;e.l+=2;var a=e.read_shift(2);e.l+=2;for(var n=e.read_shift(2),i=[];n-- >0;)i.push(XTe(e,r-e.l));return{ixfe:a,ext:i}}function JTe(e,t){t.forEach(function(r){r[0]})}function ZTe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Cl(e)}}function eBe(e){var t=St(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),uo(e.name,t),t.slice(0,t.l)}function tBe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function rBe(e){var t=St(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function aBe(e,t){var r=St(8+2*t.length);return r.write_shift(4,e),uo(t,r),r.slice(0,r.l)}function nBe(e){return e.l+=4,e.read_shift(4)!=0}function sBe(e,t){var r=St(8);return r.write_shift(4,e),r.write_shift(4,1),r}function iBe(e,t,r){var a={Types:[],Cell:[],Value:[]},n=r||{},i=[],o=!1,l=2;return vA(e,function(c,d,u){switch(u){case 335:a.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?a.Cell.push({type:a.Types[f[0]-1].name,index:f[1]}):l==0&&a.Value.push({type:a.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:i.push(u),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!d.T){if(!o||n.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),a}function oBe(){var e=kc();return Ut(e,332),Ut(e,334,df(1)),Ut(e,335,eBe({name:"XLDAPR",version:12e4,flags:3496657072})),Ut(e,336),Ut(e,339,aBe(1,"XLDAPR")),Ut(e,52),Ut(e,35,df(514)),Ut(e,4096,df(0)),Ut(e,4097,nu(1)),Ut(e,36),Ut(e,53),Ut(e,340),Ut(e,337,sBe(1)),Ut(e,51,rBe([[1,0]])),Ut(e,338),Ut(e,333),e.end()}function lBe(e,t,r){var a={Types:[],Cell:[],Value:[]};if(!e)return a;var n=!1,i=2,o;return e.replace(Tl,function(l){var c=Vr(l);switch(Mh(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<a.Types.length;++d)a.Types[d].name==c.name&&(o=a.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?a.Cell.push({type:a.Types[c.t-1].name,index:+c.v}):i==0&&a.Value.push({type:a.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!n&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),a}function vse(){var e=[di];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function cBe(e){var t=[];if(!e)return t;var r=1;return(e.match(Tl)||[]).forEach(function(a){var n=Vr(a);switch(n[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete n[0],n.i?r=n.i:n.i=r,t.push(n);break}}),t}function dBe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Hr(r);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}function uBe(e,t,r){var a=[];return vA(e,function(i,o,l){switch(l){case 63:a.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),a}function fBe(e,t,r,a){if(!e)return e;var n=a||{},i=!1;vA(e,function(l,c,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||n.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},n)}function hBe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var nb=1024;function bse(e,t){for(var r=[21600,21600],a=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),n=[Wt("xml",null,{"xmlns:v":sd.v,"xmlns:o":sd.o,"xmlns:x":sd.x,"xmlns:mv":sd.mv}).replace(/\/>/,">"),Wt("o:shapelayout",Wt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Wt("v:shapetype",[Wt("v:stroke",null,{joinstyle:"miter"}),Wt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:a})];nb<e*1e3;)nb+=1e3;return t.forEach(function(i){var o=ms(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?Wt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=Wt("v:fill",c,l),u={on:"t",obscured:"t"};++nb,n=n.concat(["<v:shape"+sN({id:"_x0000_s"+nb,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,Wt("v:shadow",null,u),Wt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Do("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Do("x:AutoFill","False"),Do("x:Row",String(o.r)),Do("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),n.push("</xml>"),n.join("")}function AV(e,t,r,a){var n=Array.isArray(e),i;t.forEach(function(o){var l=ms(o.ref);if(n?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},n?e[l.r][l.c]=i:e[o.ref]=i;var c=Ma(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var d=Zr(c);d!==e["!ref"]&&(e["!ref"]=d)}i.c||(i.c=[]);var u={a:o.author,t:o.t,r:o.r,T:r};o.h&&(u.h=o.h);for(var f=i.c.length-1;f>=0;--f){if(!r&&i.c[f].T)return;r&&!i.c[f].T&&i.c.splice(f,1)}if(r&&a){for(f=0;f<a.length;++f)if(u.a==a[f].id){u.a=a[f].name||u.a;break}}i.c.push(u)})}function ABe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],a=[],n=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);n&&n[1]&&n[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=Vr(l[0]),d={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},u=ms(c.ref);if(!(t.sheetRows&&t.sheetRows<=u.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),A=!!f&&!!f[1]&&SL(f[1])||{r:"",t:"",h:""};d.r=A.r,A.r=="<t></t>"&&(A.t=A.h=""),d.t=(A.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(d.h=A.h),a.push(d)}}}}),a}function yse(e){var t=[di,Wt("comments",null,{xmlns:Sx[0]})],r=[];return t.push("<authors>"),e.forEach(function(a){a[1].forEach(function(n){var i=yn(n.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),n.T&&n.ID&&r.indexOf("tc="+n.ID)==-1&&(r.push("tc="+n.ID),t.push("<author>tc="+n.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(a){var n=0,i=[];if(a[1][0]&&a[1][0].T&&a[1][0].ID?n=r.indexOf("tc="+a[1][0].ID):a[1].forEach(function(c){c.a&&(n=r.indexOf(yn(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+a[0]+'" authorId="'+n+'"><text>'),i.length<=1)t.push(Do("t",yn(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(Do("t",yn(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function mBe(e,t){var r=[],a=!1,n={},i=0;return e.replace(Tl,function(l,c){var d=Vr(l);switch(Mh(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":n={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":n.t!=null&&r.push(n);break;case"<text>":case"<text":i=c+l.length;break;case"</text>":n.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return l}),r}function pBe(e,t,r){var a=[di,Wt("ThreadedComments",null,{xmlns:Mi.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(n){var i="";(n[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:n[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),a.push(Wt("threadedComment",Do("text",o.t||""),c))})}),a.push("</ThreadedComments>"),a.join("")}function gBe(e,t){var r=[],a=!1;return e.replace(Tl,function(i){var o=Vr(i);switch(Mh(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function xBe(e){var t=[di,Wt("personList",null,{xmlns:Mi.TCMNT,"xmlns:x":Sx[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,a){t.push(Wt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function vBe(e){var t={};t.iauthor=e.read_shift(4);var r=Ix(e);return t.rfx=r.s,t.ref=Hr(r.s),e.l+=16,t}function bBe(e,t){return t==null&&(t=St(36)),t.write_shift(4,e[1].iauthor),q1(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var yBe=Cl;function wBe(e){return uo(e.slice(0,54))}function NBe(e,t){var r=[],a=[],n={},i=!1;return vA(e,function(l,c,d){switch(d){case 632:a.push(l);break;case 635:n=l;break;case 637:n.t=l.t,n.h=l.h,n.r=l.r;break;case 636:if(n.author=a[n.iauthor],delete n.iauthor,t.sheetRows&&n.rfx&&t.sheetRows<=n.rfx.r)break;n.t||(n.t=""),delete n.rfx,r.push(n);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function EBe(e){var t=kc(),r=[];return Ut(t,628),Ut(t,630),e.forEach(function(a){a[1].forEach(function(n){r.indexOf(n.a)>-1||(r.push(n.a.slice(0,54)),Ut(t,632,wBe(n.a)))})}),Ut(t,631),Ut(t,633),e.forEach(function(a){a[1].forEach(function(n){n.iauthor=r.indexOf(n.a);var i={s:ms(a[0]),e:ms(a[0])};Ut(t,635,bBe([i,n])),n.t&&n.t.length>0&&Ut(t,637,GSe(n)),Ut(t,636),delete n.iauthor})}),Ut(t,634),Ut(t,629),t.end()}var CBe="application/vnd.ms-office.vbaProject";function jBe(e){var t=jr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,a){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var n=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");jr.utils.cfb_add(t,n,e.FileIndex[a].content)}}),jr.write(t)}function kBe(e,t){t.FullPaths.forEach(function(r,a){if(a!=0){var n=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");n.slice(-1)!=="/"&&jr.utils.cfb_add(e,n,t.FileIndex[a].content)}})}var wse=["xlsb","xlsm","xlam","biff8","xla"];function SBe(){return{"!type":"dialog"}}function _Be(){return{"!type":"dialog"}}function TBe(){return{"!type":"macro"}}function BBe(){return{"!type":"macro"}}var kb=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(a,n,i,o){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,u=o.length>0?parseInt(o,10)|0:0;return l?u+=t.c:--u,c?d+=t.r:--d,n+(l?"":"$")+As(u)+(c?"":"$")+li(d)}return function(n,i){return t=i,n.replace(e,r)}}(),IL=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,OL=function(){return function(t,r){return t.replace(IL,function(a,n,i,o,l,c){var d=vL(o)-(i?0:r.c),u=xL(c)-(l?0:r.r),f=u==0?"":l?u+1:"["+u+"]",A=d==0?"":i?d+1:"["+d+"]";return n+"R"+f+"C"+A})}}();function Nse(e,t){return e.replace(IL,function(r,a,n,i,o,l){return a+(n=="$"?n+i:As(vL(i)+t.c))+(o=="$"?o+l:li(xL(l)+t.r))})}function IBe(e,t,r){var a=_c(t),n=a.s,i=ms(r),o={r:i.r-n.r,c:i.c-n.c};return Nse(e,o)}function OBe(e){return e.length!=1}function mV(e){return e.replace(/_xlfn\./g,"")}function xi(e){e.l+=1}function dp(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Ese(e,t,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return Cse(e);r.biff==12&&(a=4)}var n=e.read_shift(a),i=e.read_shift(a),o=dp(e),l=dp(e);return{s:{r:n,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function Cse(e){var t=dp(e),r=dp(e),a=e.read_shift(1),n=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:r[0],c:n,cRel:r[1],rRel:r[2]}}}function DBe(e,t,r){if(r.biff<8)return Cse(e);var a=e.read_shift(r.biff==12?4:2),n=e.read_shift(r.biff==12?4:2),i=dp(e),o=dp(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:n,c:o[0],cRel:o[1],rRel:o[2]}}}function jse(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return FBe(e);var a=e.read_shift(r&&r.biff==12?4:2),n=dp(e);return{r:a,c:n[0],cRel:n[1],rRel:n[2]}}function FBe(e){var t=dp(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function PBe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function RBe(e,t,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return LBe(e);var n=e.read_shift(a>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;n>524287;)n-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:n,c:i,cRel:o,rRel:l}}function LBe(e){var t=e.read_shift(2),r=e.read_shift(1),a=(t&32768)>>15,n=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),n==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:n,rRel:a}}function MBe(e,t,r){var a=(e[e.l++]&96)>>5,n=Ese(e,r.biff>=2&&r.biff<=5?6:8,r);return[a,n]}function UBe(e,t,r){var a=(e[e.l++]&96)>>5,n=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=Ese(e,i,r);return[a,n,o]}function HBe(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function QBe(e,t,r){var a=(e[e.l++]&96)>>5,n=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[a,n]}function zBe(e,t,r){var a=(e[e.l++]&96)>>5,n=DBe(e,t-1,r);return[a,n]}function $Be(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[a]}function pV(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function VBe(e,t,r){e.l+=2;for(var a=e.read_shift(r&&r.biff==2?1:2),n=[],i=0;i<=a;++i)n.push(e.read_shift(r&&r.biff==2?1:2));return n}function GBe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function qBe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function KBe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function WBe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[a]}function kse(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function XBe(e){return e.read_shift(2),kse(e)}function YBe(e){return e.read_shift(2),kse(e)}function JBe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var n=jse(e,0,r);return[a,n]}function ZBe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var n=RBe(e,0,r);return[a,n]}function eIe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var n=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=jse(e,0,r);return[a,n,i]}function tIe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var n=e.read_shift(r&&r.biff<=3?1:2);return[n6e[n],Tse[n],a]}function rIe(e,t,r){var a=e[e.l++],n=e.read_shift(1),i=r&&r.biff<=3?[a==88?-1:0,e.read_shift(1)]:aIe(e);return[n,(i[0]===0?Tse:a6e)[i[1]]]}function aIe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function nIe(e,t,r){e.l+=r&&r.biff==2?3:4}function sIe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),n=e.read_shift(r&&r.biff==2?1:2);return[a,n]}function iIe(e){return e.l++,bA[e.read_shift(1)]}function oIe(e){return e.l++,e.read_shift(2)}function lIe(e){return e.l++,e.read_shift(1)!==0}function cIe(e){return e.l++,pl(e)}function dIe(e,t,r){return e.l++,rE(e,t-1,r)}function uIe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Js(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=bA[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=pl(e);break;case 2:r[1]=Ox(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function fIe(e,t,r){for(var a=e.read_shift(r.biff==12?4:2),n=[],i=0;i!=a;++i)n.push((r.biff==12?Ix:p4)(e));return n}function hIe(e,t,r){var a=0,n=0;r.biff==12?(a=e.read_shift(4),n=e.read_shift(4)):(n=1+e.read_shift(1),a=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--n==0&&(n=256));for(var i=0,o=[];i!=a&&(o[i]=[]);++i)for(var l=0;l!=n;++l)o[i][l]=uIe(e,r.biff);return o}function AIe(e,t,r){var a=e.read_shift(1)>>>5&3,n=!r||r.biff>=8?4:2,i=e.read_shift(n);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,i]}function mIe(e,t,r){if(r.biff==5)return pIe(e);var a=e.read_shift(1)>>>5&3,n=e.read_shift(2),i=e.read_shift(4);return[a,n,i]}function pIe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,r,a]}function gIe(e,t,r){var a=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var n=e.read_shift(r&&r.biff==2?1:2);return[a,n]}function xIe(e,t,r){var a=e.read_shift(1)>>>5&3,n=e.read_shift(r&&r.biff==2?1:2);return[a,n]}function vIe(e,t,r){var a=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[a]}function bIe(e,t,r){var a=(e[e.l++]&96)>>5,n=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[a,n]}var yIe=Sl,wIe=Sl,NIe=Sl;function nE(e,t,r){return e.l+=2,[PBe(e)]}function DL(e){return e.l+=6,[]}var EIe=nE,CIe=DL,jIe=DL,kIe=nE;function Sse(e){return e.l+=2,[wi(e),e.read_shift(2)&1]}var SIe=nE,_Ie=Sse,TIe=DL,BIe=nE,IIe=nE,OIe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function DIe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),n=e.read_shift(2),i=e.read_shift(2),o=OIe[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:a,c:n,C:i}}function FIe(e){return e.l+=2,[e.read_shift(4)]}function PIe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function RIe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function LIe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function MIe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function UIe(e){return e.l+=4,[0,0]}var gV={1:{n:"PtgExp",f:sIe},2:{n:"PtgTbl",f:NIe},3:{n:"PtgAdd",f:xi},4:{n:"PtgSub",f:xi},5:{n:"PtgMul",f:xi},6:{n:"PtgDiv",f:xi},7:{n:"PtgPower",f:xi},8:{n:"PtgConcat",f:xi},9:{n:"PtgLt",f:xi},10:{n:"PtgLe",f:xi},11:{n:"PtgEq",f:xi},12:{n:"PtgGe",f:xi},13:{n:"PtgGt",f:xi},14:{n:"PtgNe",f:xi},15:{n:"PtgIsect",f:xi},16:{n:"PtgUnion",f:xi},17:{n:"PtgRange",f:xi},18:{n:"PtgUplus",f:xi},19:{n:"PtgUminus",f:xi},20:{n:"PtgPercent",f:xi},21:{n:"PtgParen",f:xi},22:{n:"PtgMissArg",f:xi},23:{n:"PtgStr",f:dIe},26:{n:"PtgSheet",f:PIe},27:{n:"PtgEndSheet",f:RIe},28:{n:"PtgErr",f:iIe},29:{n:"PtgBool",f:lIe},30:{n:"PtgInt",f:oIe},31:{n:"PtgNum",f:cIe},32:{n:"PtgArray",f:$Be},33:{n:"PtgFunc",f:tIe},34:{n:"PtgFuncVar",f:rIe},35:{n:"PtgName",f:AIe},36:{n:"PtgRef",f:JBe},37:{n:"PtgArea",f:MBe},38:{n:"PtgMemArea",f:gIe},39:{n:"PtgMemErr",f:yIe},40:{n:"PtgMemNoMem",f:wIe},41:{n:"PtgMemFunc",f:xIe},42:{n:"PtgRefErr",f:vIe},43:{n:"PtgAreaErr",f:HBe},44:{n:"PtgRefN",f:ZBe},45:{n:"PtgAreaN",f:zBe},46:{n:"PtgMemAreaN",f:LIe},47:{n:"PtgMemNoMemN",f:MIe},57:{n:"PtgNameX",f:mIe},58:{n:"PtgRef3d",f:eIe},59:{n:"PtgArea3d",f:UBe},60:{n:"PtgRefErr3d",f:bIe},61:{n:"PtgAreaErr3d",f:QBe},255:{}},HIe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},QIe={1:{n:"PtgElfLel",f:Sse},2:{n:"PtgElfRw",f:BIe},3:{n:"PtgElfCol",f:EIe},6:{n:"PtgElfRwV",f:IIe},7:{n:"PtgElfColV",f:kIe},10:{n:"PtgElfRadical",f:SIe},11:{n:"PtgElfRadicalS",f:TIe},13:{n:"PtgElfColS",f:CIe},15:{n:"PtgElfColSV",f:jIe},16:{n:"PtgElfRadicalLel",f:_Ie},25:{n:"PtgList",f:DIe},29:{n:"PtgSxName",f:FIe},255:{}},zIe={0:{n:"PtgAttrNoop",f:UIe},1:{n:"PtgAttrSemi",f:WBe},2:{n:"PtgAttrIf",f:qBe},4:{n:"PtgAttrChoose",f:VBe},8:{n:"PtgAttrGoto",f:GBe},16:{n:"PtgAttrSum",f:nIe},32:{n:"PtgAttrBaxcel",f:pV},33:{n:"PtgAttrBaxcel",f:pV},64:{n:"PtgAttrSpace",f:XBe},65:{n:"PtgAttrSpaceSemi",f:YBe},128:{n:"PtgAttrIfError",f:KBe},255:{}};function sE(e,t,r,a){if(a.biff<8)return Sl(e,t);for(var n=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=hIe(e,0,a),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=fIe(e,r[o][1],a),i.push(r[o][2]);break;case"PtgExp":a&&a.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=n-e.l,t!==0&&i.push(Sl(e,t)),i}function iE(e,t,r){for(var a=e.l+t,n,i,o=[];a!=e.l;)t=a-e.l,i=e[e.l],n=gV[i]||gV[HIe[i]],(i===24||i===25)&&(n=(i===24?QIe:zIe)[e[e.l+1]]),!n||!n.f?Sl(e,t):o.push([n.n,n.f(e,t,r)]);return o}function $Ie(e){for(var t=[],r=0;r<e.length;++r){for(var a=e[r],n=[],i=0;i<a.length;++i){var o=a[i];if(o)switch(o[0]){case 2:n.push('"'+o[1].replace(/"/g,'""')+'"');break;default:n.push(o[1])}else n.push("")}t.push(n.join(","))}return t.join(";")}var VIe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function GIe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function _se(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var n="";if(r.biff>8)switch(e[a[0]][0]){case 357:return n=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?n:n+":"+e.SheetNames[a[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return n=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?n:n+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[a[0]][0][3]?(n=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?n:n+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function xV(e,t,r){var a=_se(e,t,r);return a=="#REF"?a:GIe(a,r)}function dl(e,t,r,a,n){var i=n&&n.biff||8,o={s:{c:0,r:0}},l=[],c,d,u,f=0,A=0,m,g="";if(!e[0]||!e[0][0])return"";for(var x=-1,v="",y=0,N=e[0].length;y<N;++y){var E=e[0][y];switch(E[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),d=l.pop(),x>=0){switch(e[0][x][1][0]){case 0:v=Os(" ",e[0][x][1][1]);break;case 1:v=Os("\r",e[0][x][1][1]);break;default:if(v="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}d=d+v,x=-1}l.push(d+VIe[E[0]]+c);break;case"PtgIsect":c=l.pop(),d=l.pop(),l.push(d+" "+c);break;case"PtgUnion":c=l.pop(),d=l.pop(),l.push(d+","+c);break;case"PtgRange":c=l.pop(),d=l.pop(),l.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=m2(E[1][1],o,n),l.push(p2(u,i));break;case"PtgRefN":u=r?m2(E[1][1],r,n):E[1][1],l.push(p2(u,i));break;case"PtgRef3d":f=E[1][1],u=m2(E[1][2],o,n),g=xV(a,f,n),l.push(g+"!"+p2(u,i));break;case"PtgFunc":case"PtgFuncVar":var B=E[1][0],_=E[1][1];B||(B=0),B&=127;var I=B==0?[]:l.slice(-B);l.length-=B,_==="User"&&(_=I.shift()),l.push(_+"("+I.join(",")+")");break;case"PtgBool":l.push(E[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(E[1]);break;case"PtgNum":l.push(String(E[1]));break;case"PtgStr":l.push('"'+E[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(E[1]);break;case"PtgAreaN":m=q$(E[1][1],r?{s:r}:o,n),l.push(UB(m,n));break;case"PtgArea":m=q$(E[1][1],o,n),l.push(UB(m,n));break;case"PtgArea3d":f=E[1][1],m=E[1][2],g=xV(a,f,n),l.push(g+"!"+UB(m,n));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":A=E[1][2];var j=(a.names||[])[A-1]||(a[0]||[])[A],k=j?j.Name:"SH33TJSNAME"+String(A);k&&k.slice(0,6)=="_xlfn."&&!n.xlfn&&(k=k.slice(6)),l.push(k);break;case"PtgNameX":var T=E[1][1];A=E[1][2];var L;if(n.biff<=5)T<0&&(T=-T),a[T]&&(L=a[T][A]);else{var F="";if(((a[T]||[])[0]||[])[0]==14849||(((a[T]||[])[0]||[])[0]==1025?a[T][A]&&a[T][A].itab>0&&(F=a.SheetNames[a[T][A].itab-1]+"!"):F=a.SheetNames[A-1]+"!"),a[T]&&a[T][A])F+=a[T][A].Name;else if(a[0]&&a[0][A])F+=a[0][A].Name;else{var S=(_se(a,T,n)||"").split(";;");S[A-1]?F=S[A-1]:F+="SH33TJSERRX"}l.push(F);break}L||(L={Name:"SH33TJSERRY"}),l.push(L.Name);break;case"PtgParen":var M="(",H=")";if(x>=0){switch(v="",e[0][x][1][0]){case 2:M=Os(" ",e[0][x][1][1])+M;break;case 3:M=Os("\r",e[0][x][1][1])+M;break;case 4:H=Os(" ",e[0][x][1][1])+H;break;case 5:H=Os("\r",e[0][x][1][1])+H;break;default:if(n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}x=-1}l.push(M+l.pop()+H);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":u={c:E[1][1],r:E[1][0]};var K={c:r.c,r:r.r};if(a.sharedf[Hr(u)]){var Q=a.sharedf[Hr(u)];l.push(dl(Q,o,K,a,n))}else{var G=!1;for(c=0;c!=a.arrayf.length;++c)if(d=a.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){l.push(dl(d[1],o,K,a,n)),G=!0;break}G||l.push(E[1])}break;case"PtgArray":l.push("{"+$Ie(E[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+E[1].idx+"[#"+E[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(E));default:throw new Error("Unrecognized Formula Token: "+String(E))}var X=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(n.biff!=3&&x>=0&&X.indexOf(e[0][y][0])==-1){E=e[0][x];var Z=!0;switch(E[1][0]){case 4:Z=!1;case 0:v=Os(" ",E[1][1]);break;case 5:Z=!1;case 1:v=Os("\r",E[1][1]);break;default:if(v="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+E[1][0])}l.push((Z?v:"")+l.pop()+(Z?"":v)),x=-1}}if(l.length>1&&n.WTF)throw new Error("bad formula stack");return l[0]}function qIe(e,t,r){var a=e.l+t,n=r.biff==2?1:2,i,o=e.read_shift(n);if(o==65535)return[[],Sl(e,t-2)];var l=iE(e,o,r);return t!==o+n&&(i=sE(e,t-o-n,l,r)),e.l=a,[l,i]}function KIe(e,t,r){var a=e.l+t,n=r.biff==2?1:2,i,o=e.read_shift(n);if(o==65535)return[[],Sl(e,t-2)];var l=iE(e,o,r);return t!==o+n&&(i=sE(e,t-o-n,l,r)),e.l=a,[l,i]}function WIe(e,t,r,a){var n=e.l+t,i=iE(e,a,r),o;return n!==e.l&&(o=sE(e,n-e.l,i,r)),[i,o]}function XIe(e,t,r){var a=e.l+t,n,i=e.read_shift(2),o=iE(e,i,r);return i==65535?[[],Sl(e,t-2)]:(t!==i+2&&(n=sE(e,a-i-2,o,r)),[o,n])}function YIe(e){var t;if(F0(e,e.l+6)!==65535)return[pl(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function JIe(e){if(e==null){var t=St(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return ix(e);return ix(0)}function VB(e,t,r){var a=e.l+t,n=Uh(e);r.biff==2&&++e.l;var i=YIe(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=KIe(e,a-e.l,r);return{cell:n,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function ZIe(e,t,r,a,n){var i=lx(t,r,n),o=JIe(e.v),l=St(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var d=St(e.bf.length),u=0;u<e.bf.length;++u)d[u]=e.bf[u];var f=co([i,o,l,d]);return f}function g4(e,t,r){var a=e.read_shift(4),n=iE(e,a,r),i=e.read_shift(4),o=i>0?sE(e,i,n,r):null;return[n,o]}var e6e=g4,x4=g4,t6e=g4,r6e=g4,a6e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Tse={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},n6e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function vV(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function s6e(e){var t="of:="+e.replace(IL,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function GB(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function i6e(e){return e.replace(/\./,"!")}var x2={},Sb={},v2=typeof Map<"u";function FL(e,t,r){var a=0,n=e.length;if(r){if(v2?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=v2?r.get(t):r[t];a<i.length;++a)if(e[i[a]].t===t)return e.Count++,i[a]}}else for(;a<n;++a)if(e[a].t===t)return e.Count++,a;return e[n]={t},e.Count++,e.Unique++,r&&(v2?(r.has(t)||r.set(t,[]),r.get(t).push(n)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(n))),n}function v4(e,t){var r={min:e+1,max:e+1},a=-1;return t.MDW&&(hl=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?a=dN(t.wpx):t.wch!=null&&(a=t.wch),a>-1?(r.width=W5(a),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Qg(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function jp(e,t,r){var a=r.revssf[t.z!=null?t.z:"General"],n=60,i=e.length;if(a==null&&r.ssf){for(;n<392;++n)if(r.ssf[n]==null){z0(t.z,n),r.ssf[n]=t.z,r.revssf[t.z]=a=n;break}}for(n=0;n!=i;++n)if(e[n].numFmtId===a)return n;return e[i]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function Bse(e,t,r,a,n,i){try{a.cellNF&&(e.z=Fr[t])}catch(l){if(a.WTF)throw l}if(!(e.t==="z"&&!a.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Xn(e.v)),(!a||a.cellText!==!1)&&e.t!=="z")try{if(Fr[t]==null&&z0(aSe[t]||"General",t),e.t==="e")e.w=e.w||bA[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=aN(e.v);else if(e.t==="d"){var o=Qi(e.v);(o|0)===o?e.w=o.toString(10):e.w=aN(o)}else{if(e.v===void 0)return"";e.w=nx(e.v,Sb)}else e.t==="d"?e.w=pu(t,Qi(e.v),Sb):e.w=pu(t,e.v,Sb)}catch(l){if(a.WTF)throw l}if(a.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=K5(n.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),a.WTF&&(e.s.fgColor.raw_rgb=n.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=K5(n.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),a.WTF&&(e.s.bgColor.raw_rgb=n.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(a.WTF&&i.Fills)throw l}}}function o6e(e,t,r){if(e&&e["!ref"]){var a=Ma(e["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function l6e(e,t){var r=Ma(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Zr(r))}var c6e=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,d6e=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,u6e=/<(?:\w:)?hyperlink [^>]*>/mg,f6e=/"(\w*:\w*)"/,h6e=/<(?:\w:)?col\b[^>]*[\/]?>/g,A6e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,m6e=/<(?:\w:)?pageMargins[^>]*\/>/g,Ise=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,p6e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,g6e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function x6e(e,t,r,a,n,i,o){if(!e)return e;a||(a={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",u="",f=e.match(d6e);f?(d=e.slice(0,f.index),u=e.slice(f.index+f[0].length)):d=u=e;var A=d.match(Ise);A?PL(A[0],l,n,r):(A=d.match(p6e))&&b6e(A[0],A[1]||"",l,n,r);var m=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var g=d.slice(m,m+50).match(f6e);g&&l6e(l,g[1])}var x=d.match(g6e);x&&x[1]&&O6e(x[1],n);var v=[];if(t.cellStyles){var y=d.match(h6e);y&&S6e(v,y)}f&&P6e(f[1],l,t,c,i,o);var N=u.match(A6e);N&&(l["!autofilter"]=T6e(N[0]));var E=[],B=u.match(c6e);if(B)for(m=0;m!=B.length;++m)E[m]=Ma(B[m].slice(B[m].indexOf('"')+1));var _=u.match(u6e);_&&C6e(l,_,a);var I=u.match(m6e);if(I&&(l["!margins"]=j6e(Vr(I[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=Zr(c)),t.sheetRows>0&&l["!ref"]){var j=Ma(l["!ref"]);t.sheetRows<=+j.e.r&&(j.e.r=t.sheetRows-1,j.e.r>c.e.r&&(j.e.r=c.e.r),j.e.r<j.s.r&&(j.s.r=j.e.r),j.e.c>c.e.c&&(j.e.c=c.e.c),j.e.c<j.s.c&&(j.s.c=j.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Zr(j))}return v.length>0&&(l["!cols"]=v),E.length>0&&(l["!merges"]=E),l}function v6e(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Zr(e[r])+'"/>';return t+"</mergeCells>"}function PL(e,t,r,a){var n=Vr(e);r.Sheets[a]||(r.Sheets[a]={}),n.codeName&&(r.Sheets[a].CodeName=Ra(Sn(n.codeName)))}function b6e(e,t,r,a,n){PL(e.slice(0,e.indexOf(">")),r,a,n)}function y6e(e,t,r,a,n){var i=!1,o={},l=null;if(a.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,o.codeName=vh(yn(c))}if(e&&e["!outline"]){var d={summaryBelow:1,summaryRight:1};e["!outline"].above&&(d.summaryBelow=0),e["!outline"].left&&(d.summaryRight=0),l=(l||"")+Wt("outlinePr",null,d)}!i&&!l||(n[n.length]=Wt("sheetPr",l,o))}var w6e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],N6e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function E6e(e){var t={sheet:1};return w6e.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),N6e.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=_L(e.password).toString(16).toUpperCase()),Wt("sheetProtection",null,t)}function C6e(e,t,r){for(var a=Array.isArray(e),n=0;n!=t.length;++n){var i=Vr(Sn(t[n]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+Ra(i.location))):(i.Target="#"+Ra(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=Ma(i.ref),c=l.s.r;c<=l.e.r;++c)for(var d=l.s.c;d<=l.e.c;++d){var u=Hr({c:d,r:c});a?(e[c]||(e[c]=[]),e[c][d]||(e[c][d]={t:"z",v:void 0}),e[c][d].l=i):(e[u]||(e[u]={t:"z",v:void 0}),e[u].l=i)}}}function j6e(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function k6e(e){return Qg(e),Wt("pageMargins",null,e)}function S6e(e,t){for(var r=!1,a=0;a!=t.length;++a){var n=Vr(t[a],!0);n.hidden&&(n.hidden=Kn(n.hidden));var i=parseInt(n.min,10)-1,o=parseInt(n.max,10)-1;for(n.outlineLevel&&(n.level=+n.outlineLevel||0),delete n.min,delete n.max,n.width=+n.width,!r&&n.width&&(r=!0,TL(n.width)),cp(n);i<=o;)e[i++]=Yn(n)}}function _6e(e,t){for(var r=["<cols>"],a,n=0;n!=t.length;++n)(a=t[n])&&(r[r.length]=Wt("col",null,v4(n,a)));return r[r.length]="</cols>",r.join("")}function T6e(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function B6e(e,t,r,a){var n=typeof e.ref=="string"?e.ref:Zr(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=_c(n);o.s.r==o.e.r&&(o.e.r=_c(t["!ref"]).e.r,n=Zr(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==a){c.Ref="'"+r.SheetNames[a]+"'!"+n;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+n}),Wt("autoFilter",null,{ref:n})}var I6e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function O6e(e,t){t.Views||(t.Views=[{}]),(e.match(I6e)||[]).forEach(function(r,a){var n=Vr(r);t.Views[a]||(t.Views[a]={}),+n.zoomScale&&(t.Views[a].zoom=+n.zoomScale),Kn(n.rightToLeft)&&(t.Views[a].RTL=!0)})}function D6e(e,t,r,a){var n={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(n.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),Wt("sheetViews",Wt("sheetView",null,n),{})}function F6e(e,t,r,a){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var n="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":n=e.v?"1":"0";break;case"n":n=""+e.v;break;case"e":n=bA[e.v];break;case"d":a&&a.cellDates?n=Xn(e.v,-1).toISOString():(e=Yn(e),e.t="n",n=""+(e.v=Qi(Xn(e.v)))),typeof e.z>"u"&&(e.z=Fr[14]);break;default:n=e.v;break}var l=Do("v",yn(n)),c={r:t},d=jp(a.cellXfs,e,a);switch(d!==0&&(c.s=d),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){l=Do("v",""+FL(a.Strings,e.v,a.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=Wt("f",yn(e.f),u)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Wt("c",l,c)}var P6e=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,n=/ref=["']([^"']*)["']/,i=nN("v"),o=nN("f");return function(c,d,u,f,A,m){for(var g=0,x="",v=[],y=[],N=0,E=0,B=0,_="",I,j,k=0,T=0,L,F,S=0,M=0,H=Array.isArray(m.CellXf),K,Q=[],G=[],X=Array.isArray(d),Z=[],U={},Y=!1,P=!!u.sheetStubs,D=c.split(t),W=0,J=D.length;W!=J;++W){x=D[W].trim();var ce=x.length;if(ce!==0){var ie=0;e:for(g=0;g<ce;++g)switch(x[g]){case">":if(x[g-1]!="/"){++g;break e}if(u&&u.cellStyles){if(j=Vr(x.slice(ie,g),!0),k=j.r!=null?parseInt(j.r,10):k+1,T=-1,u.sheetRows&&u.sheetRows<k)continue;U={},Y=!1,j.ht&&(Y=!0,U.hpt=parseFloat(j.ht),U.hpx=s1(U.hpt)),j.hidden=="1"&&(Y=!0,U.hidden=!0),j.outlineLevel!=null&&(Y=!0,U.level=+j.outlineLevel),Y&&(Z[k-1]=U)}break;case"<":ie=g;break}if(ie>=g)break;if(j=Vr(x.slice(ie,g),!0),k=j.r!=null?parseInt(j.r,10):k+1,T=-1,!(u.sheetRows&&u.sheetRows<k)){f.s.r>k-1&&(f.s.r=k-1),f.e.r<k-1&&(f.e.r=k-1),u&&u.cellStyles&&(U={},Y=!1,j.ht&&(Y=!0,U.hpt=parseFloat(j.ht),U.hpx=s1(U.hpt)),j.hidden=="1"&&(Y=!0,U.hidden=!0),j.outlineLevel!=null&&(Y=!0,U.level=+j.outlineLevel),Y&&(Z[k-1]=U)),v=x.slice(g).split(e);for(var re=0;re!=v.length&&v[re].trim().charAt(0)=="<";++re);for(v=v.slice(re),g=0;g!=v.length;++g)if(x=v[g].trim(),x.length!==0){if(y=x.match(r),N=g,E=0,B=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,y!=null&&y.length===2){for(N=0,_=y[1],E=0;E!=_.length&&!((B=_.charCodeAt(E)-64)<1||B>26);++E)N=26*N+B;--N,T=N}else++T;for(E=0;E!=x.length&&x.charCodeAt(E)!==62;++E);if(++E,j=Vr(x.slice(0,E),!0),j.r||(j.r=Hr({r:k-1,c:T})),_=x.slice(E),I={t:""},(y=_.match(i))!=null&&y[1]!==""&&(I.v=Ra(y[1])),u.cellFormula){if((y=_.match(o))!=null&&y[1]!==""){if(I.f=Ra(Sn(y[1])).replace(/\r\n/g,`
`),u.xlfn||(I.f=mV(I.f)),y[0].indexOf('t="array"')>-1)I.F=(_.match(n)||[])[1],I.F.indexOf(":")>-1&&Q.push([Ma(I.F),I.F]);else if(y[0].indexOf('t="shared"')>-1){F=Vr(y[0]);var de=Ra(Sn(y[1]));u.xlfn||(de=mV(de)),G[parseInt(F.si,10)]=[F,de,j.r]}}else(y=_.match(/<f[^>]*\/>/))&&(F=Vr(y[0]),G[F.si]&&(I.f=IBe(G[F.si][1],G[F.si][2],j.r)));var oe=ms(j.r);for(E=0;E<Q.length;++E)oe.r>=Q[E][0].s.r&&oe.r<=Q[E][0].e.r&&oe.c>=Q[E][0].s.c&&oe.c<=Q[E][0].e.c&&(I.F=Q[E][1])}if(j.t==null&&I.v===void 0)if(I.f||I.F)I.v=0,I.t="n";else if(P)I.t="z";else continue;else I.t=j.t||"n";switch(f.s.c>T&&(f.s.c=T),f.e.c<T&&(f.e.c=T),I.t){case"n":if(I.v==""||I.v==null){if(!P)continue;I.t="z"}else I.v=parseFloat(I.v);break;case"s":if(typeof I.v>"u"){if(!P)continue;I.t="z"}else L=x2[parseInt(I.v,10)],I.v=L.t,I.r=L.r,u.cellHTML&&(I.h=L.h);break;case"str":I.t="s",I.v=I.v!=null?Sn(I.v):"",u.cellHTML&&(I.h=AL(I.v));break;case"inlineStr":y=_.match(a),I.t="s",y!=null&&(L=SL(y[1]))?(I.v=L.t,u.cellHTML&&(I.h=L.h)):I.v="";break;case"b":I.v=Kn(I.v);break;case"d":u.cellDates?I.v=Xn(I.v,1):(I.v=Qi(Xn(I.v,1)),I.t="n");break;case"e":(!u||u.cellText!==!1)&&(I.w=I.v),I.v=Dne[I.v];break}if(S=M=0,K=null,H&&j.s!==void 0&&(K=m.CellXf[j.s],K!=null&&(K.numFmtId!=null&&(S=K.numFmtId),u.cellStyles&&K.fillId!=null&&(M=K.fillId))),Bse(I,S,M,u,A,m),u.cellDates&&H&&I.t=="n"&&$1(Fr[S])&&(I.t="d",I.v=m4(I.v)),j.cm&&u.xlmeta){var be=(u.xlmeta.Cell||[])[+j.cm-1];be&&be.type=="XLDAPR"&&(I.D=!0)}if(X){var q=ms(j.r);d[q.r]||(d[q.r]=[]),d[q.r][q.c]=I}else d[j.r]=I}}}}Z.length>0&&(d["!rows"]=Z)}}();function R6e(e,t,r,a){var n=[],i=[],o=Ma(e["!ref"]),l="",c,d="",u=[],f=0,A=0,m=e["!rows"],g=Array.isArray(e),x={r:d},v,y=-1;for(A=o.s.c;A<=o.e.c;++A)u[A]=As(A);for(f=o.s.r;f<=o.e.r;++f){for(i=[],d=li(f),A=o.s.c;A<=o.e.c;++A){c=u[A]+d;var N=g?(e[f]||[])[A]:e[c];N!==void 0&&(l=F6e(N,c,e,t))!=null&&i.push(l)}(i.length>0||m&&m[f])&&(x={r:d},m&&m[f]&&(v=m[f],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=uN(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level)),n[n.length]=Wt("row",i.join(""),x))}if(m)for(;f<m.length;++f)m&&m[f]&&(x={r:f+1},v=m[f],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=uN(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level),n[n.length]=Wt("row","",x));return n.join("")}function Ose(e,t,r,a){var n=[di,Wt("worksheet",null,{xmlns:Sx[0],"xmlns:r":Mi.r})],i=r.SheetNames[e],o=0,l="",c=r.Sheets[i];c==null&&(c={});var d=c["!ref"]||"A1",u=Ma(d);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),d=Zr(u)}a||(a={}),c["!comments"]=[];var f=[];y6e(c,r,e,t,n),n[n.length]=Wt("dimension",null,{ref:d}),n[n.length]=D6e(c,t,e,r),t.sheetFormat&&(n[n.length]=Wt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(n[n.length]=_6e(c,c["!cols"])),n[o=n.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=R6e(c,t),l.length>0&&(n[n.length]=l)),n.length>o+1&&(n[n.length]="</sheetData>",n[o]=n[o].replace("/>",">")),c["!protect"]&&(n[n.length]=E6e(c["!protect"])),c["!autofilter"]!=null&&(n[n.length]=B6e(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(n[n.length]=v6e(c["!merges"]));var A=-1,m,g=-1;return c["!links"].length>0&&(n[n.length]="<hyperlinks>",c["!links"].forEach(function(x){x[1].Target&&(m={ref:x[0]},x[1].Target.charAt(0)!="#"&&(g=xn(a,-1,yn(x[1].Target).replace(/#.*$/,""),xa.HLINK),m["r:id"]="rId"+g),(A=x[1].Target.indexOf("#"))>-1&&(m.location=yn(x[1].Target.slice(A+1))),x[1].Tooltip&&(m.tooltip=yn(x[1].Tooltip)),n[n.length]=Wt("hyperlink",null,m))}),n[n.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(n[n.length]=k6e(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(n[n.length]=Do("ignoredErrors",Wt("ignoredError",null,{numberStoredAsText:1,sqref:d}))),f.length>0&&(g=xn(a,-1,"../drawings/drawing"+(e+1)+".xml",xa.DRAW),n[n.length]=Wt("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=xn(a,-1,"../drawings/vmlDrawing"+(e+1)+".vml",xa.VML),n[n.length]=Wt("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),n.length>1&&(n[n.length]="</worksheet>",n[1]=n[1].replace("/>",">")),n.join("")}function L6e(e,t){var r={},a=e.l+t;r.r=e.read_shift(4),e.l+=4;var n=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=a,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=n/20),r}function M6e(e,t,r){var a=St(145),n=(r["!rows"]||[])[e]||{};a.write_shift(4,e),a.write_shift(4,0);var i=320;n.hpx?i=uN(n.hpx)*20:n.hpt&&(i=n.hpt*20),a.write_shift(2,i),a.write_shift(1,0);var o=0;n.level&&(o|=n.level),n.hidden&&(o|=16),(n.hpx||n.hpt)&&(o|=32),a.write_shift(1,o),a.write_shift(1,0);var l=0,c=a.l;a.l+=4;for(var d={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var f=-1,A=-1,m=u<<10;m<u+1<<10;++m){d.c=m;var g=Array.isArray(r)?(r[d.r]||[])[d.c]:r[Hr(d)];g&&(f<0&&(f=m),A=m)}f<0||(++l,a.write_shift(4,f),a.write_shift(4,A))}var x=a.l;return a.l=c,a.write_shift(4,l),a.l=x,a.length>a.l?a.slice(0,a.l):a}function U6e(e,t,r,a){var n=M6e(a,r,t);(n.length>17||(t["!rows"]||[])[a])&&Ut(e,0,n)}var H6e=Ix,Q6e=q1;function z6e(){}function $6e(e,t){var r={},a=e[e.l];return++e.l,r.above=!(a&64),r.left=!(a&128),e.l+=18,r.name=qSe(e),r}function V6e(e,t,r){r==null&&(r=St(84+4*e.length));var a=192;t&&(t.above&&(a&=-65),t.left&&(a&=-129)),r.write_shift(1,a);for(var n=1;n<3;++n)r.write_shift(1,0);return V5({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),_ne(e,r),r.slice(0,r.l)}function G6e(e){var t=bu(e);return[t]}function q6e(e,t,r){return r==null&&(r=St(8)),_x(t,r)}function K6e(e){var t=Tx(e);return[t]}function W6e(e,t,r){return r==null&&(r=St(4)),Bx(t,r)}function X6e(e){var t=bu(e),r=e.read_shift(1);return[t,r,"b"]}function Y6e(e,t,r){return r==null&&(r=St(9)),_x(t,r),r.write_shift(1,e.v?1:0),r}function J6e(e){var t=Tx(e),r=e.read_shift(1);return[t,r,"b"]}function Z6e(e,t,r){return r==null&&(r=St(5)),Bx(t,r),r.write_shift(1,e.v?1:0),r}function eOe(e){var t=bu(e),r=e.read_shift(1);return[t,r,"e"]}function tOe(e,t,r){return r==null&&(r=St(9)),_x(t,r),r.write_shift(1,e.v),r}function rOe(e){var t=Tx(e),r=e.read_shift(1);return[t,r,"e"]}function aOe(e,t,r){return r==null&&(r=St(8)),Bx(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function nOe(e){var t=bu(e),r=e.read_shift(4);return[t,r,"s"]}function sOe(e,t,r){return r==null&&(r=St(12)),_x(t,r),r.write_shift(4,t.v),r}function iOe(e){var t=Tx(e),r=e.read_shift(4);return[t,r,"s"]}function oOe(e,t,r){return r==null&&(r=St(8)),Bx(t,r),r.write_shift(4,t.v),r}function lOe(e){var t=bu(e),r=pl(e);return[t,r,"n"]}function cOe(e,t,r){return r==null&&(r=St(16)),_x(t,r),ix(e.v,r),r}function Dse(e){var t=Tx(e),r=pl(e);return[t,r,"n"]}function dOe(e,t,r){return r==null&&(r=St(12)),Bx(t,r),ix(e.v,r),r}function uOe(e){var t=bu(e),r=NL(e);return[t,r,"n"]}function fOe(e,t,r){return r==null&&(r=St(12)),_x(t,r),Tne(e.v,r),r}function hOe(e){var t=Tx(e),r=NL(e);return[t,r,"n"]}function AOe(e,t,r){return r==null&&(r=St(8)),Bx(t,r),Tne(e.v,r),r}function mOe(e){var t=bu(e),r=bL(e);return[t,r,"is"]}function pOe(e){var t=bu(e),r=Cl(e);return[t,r,"str"]}function gOe(e,t,r){return r==null&&(r=St(12+4*e.v.length)),_x(t,r),uo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function xOe(e){var t=Tx(e),r=Cl(e);return[t,r,"str"]}function vOe(e,t,r){return r==null&&(r=St(8+4*e.v.length)),Bx(t,r),uo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function bOe(e,t,r){var a=e.l+t,n=bu(e);n.r=r["!row"];var i=e.read_shift(1),o=[n,i,"b"];if(r.cellFormula){e.l+=2;var l=x4(e,a-e.l,r);o[3]=dl(l,null,n,r.supbooks,r)}else e.l=a;return o}function yOe(e,t,r){var a=e.l+t,n=bu(e);n.r=r["!row"];var i=e.read_shift(1),o=[n,i,"e"];if(r.cellFormula){e.l+=2;var l=x4(e,a-e.l,r);o[3]=dl(l,null,n,r.supbooks,r)}else e.l=a;return o}function wOe(e,t,r){var a=e.l+t,n=bu(e);n.r=r["!row"];var i=pl(e),o=[n,i,"n"];if(r.cellFormula){e.l+=2;var l=x4(e,a-e.l,r);o[3]=dl(l,null,n,r.supbooks,r)}else e.l=a;return o}function NOe(e,t,r){var a=e.l+t,n=bu(e);n.r=r["!row"];var i=Cl(e),o=[n,i,"str"];if(r.cellFormula){e.l+=2;var l=x4(e,a-e.l,r);o[3]=dl(l,null,n,r.supbooks,r)}else e.l=a;return o}var EOe=Ix,COe=q1;function jOe(e,t){return t==null&&(t=St(4)),t.write_shift(4,e),t}function kOe(e,t){var r=e.l+t,a=Ix(e),n=yL(e),i=Cl(e),o=Cl(e),l=Cl(e);e.l=r;var c={rfx:a,relId:n,loc:i,display:l};return o&&(c.Tooltip=o),c}function SOe(e,t){var r=St(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));q1({s:ms(e[0]),e:ms(e[0])},r),wL("rId"+t,r);var a=e[1].Target.indexOf("#"),n=a==-1?"":e[1].Target.slice(a+1);return uo(n||"",r),uo(e[1].Tooltip||"",r),uo("",r),r.slice(0,r.l)}function _Oe(){}function TOe(e,t,r){var a=e.l+t,n=Bne(e),i=e.read_shift(1),o=[n];if(o[2]=i,r.cellFormula){var l=e6e(e,a-e.l,r);o[1]=l}else e.l=a;return o}function BOe(e,t,r){var a=e.l+t,n=Ix(e),i=[n];if(r.cellFormula){var o=r6e(e,a-e.l,r);i[1]=o,e.l=a}else e.l=a;return i}function IOe(e,t,r){r==null&&(r=St(18));var a=v4(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(a.width||10)*256),r.write_shift(4,0);var n=0;return t.hidden&&(n|=1),typeof a.width=="number"&&(n|=2),t.level&&(n|=t.level<<8),r.write_shift(2,n),r}var Fse=["left","right","top","bottom","header","footer"];function OOe(e){var t={};return Fse.forEach(function(r){t[r]=pl(e)}),t}function DOe(e,t){return t==null&&(t=St(48)),Qg(e),Fse.forEach(function(r){ix(e[r],t)}),t}function FOe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function POe(e,t,r){r==null&&(r=St(30));var a=924;return(((t||{}).Views||[])[0]||{}).RTL&&(a|=32),r.write_shift(2,a),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function ROe(e){var t=St(24);return t.write_shift(4,4),t.write_shift(4,1),q1(e,t),t}function LOe(e,t){return t==null&&(t=St(66)),t.write_shift(2,e.password?_L(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function MOe(){}function UOe(){}function HOe(e,t,r,a,n,i,o){if(!e)return e;var l=t||{};a||(a={"!id":{}});var c=l.dense?[]:{},d,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,A=!1,m,g,x,v,y,N,E,B,_,I=[];l.biff=12,l["!row"]=0;var j=0,k=!1,T=[],L={},F=l.supbooks||n.supbooks||[[]];if(F.sharedf=L,F.arrayf=T,F.SheetNames=n.SheetNames||n.Sheets.map(function(X){return X.name}),!l.supbooks&&(l.supbooks=F,n.Names))for(var S=0;S<n.Names.length;++S)F[0][S+1]=n.Names[S];var M=[],H=[],K=!1;fN[16]={n:"BrtShortReal",f:Dse};var Q;if(vA(e,function(Z,U,Y){if(!A)switch(Y){case 148:d=Z;break;case 0:m=Z,l.sheetRows&&l.sheetRows<=m.r&&(A=!0),B=li(v=m.r),l["!row"]=m.r,(Z.hidden||Z.hpt||Z.level!=null)&&(Z.hpt&&(Z.hpx=s1(Z.hpt)),H[Z.r]=Z);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:Z[2]},Z[2]){case"n":g.v=Z[1];break;case"s":E=x2[Z[1]],g.v=E.t,g.r=E.r;break;case"b":g.v=!!Z[1];break;case"e":g.v=Z[1],l.cellText!==!1&&(g.w=bA[g.v]);break;case"str":g.t="s",g.v=Z[1];break;case"is":g.t="s",g.v=Z[1].t;break}if((x=o.CellXf[Z[0].iStyleRef])&&Bse(g,x.numFmtId,null,l,i,o),y=Z[0].c==-1?y+1:Z[0].c,l.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[As(y)+B]=g,l.cellFormula){for(k=!1,j=0;j<T.length;++j){var P=T[j];m.r>=P[0].s.r&&m.r<=P[0].e.r&&y>=P[0].s.c&&y<=P[0].e.c&&(g.F=Zr(P[0]),k=!0)}!k&&Z.length>3&&(g.f=Z[3])}if(u.s.r>m.r&&(u.s.r=m.r),u.s.c>y&&(u.s.c=y),u.e.r<m.r&&(u.e.r=m.r),u.e.c<y&&(u.e.c=y),l.cellDates&&x&&g.t=="n"&&$1(Fr[x.numFmtId])){var D=Eg(g.v);D&&(g.t="d",g.v=new Date(D.y,D.m-1,D.d,D.H,D.M,D.S,D.u))}Q&&(Q.type=="XLDAPR"&&(g.D=!0),Q=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;g={t:"z",v:void 0},y=Z[0].c==-1?y+1:Z[0].c,l.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[As(y)+B]=g,u.s.r>m.r&&(u.s.r=m.r),u.s.c>y&&(u.s.c=y),u.e.r<m.r&&(u.e.r=m.r),u.e.c<y&&(u.e.c=y),Q&&(Q.type=="XLDAPR"&&(g.D=!0),Q=void 0);break;case 176:I.push(Z);break;case 49:Q=((l.xlmeta||{}).Cell||[])[Z-1];break;case 494:var W=a["!id"][Z.relId];for(W?(Z.Target=W.Target,Z.loc&&(Z.Target+="#"+Z.loc),Z.Rel=W):Z.relId==""&&(Z.Target="#"+Z.loc),v=Z.rfx.s.r;v<=Z.rfx.e.r;++v)for(y=Z.rfx.s.c;y<=Z.rfx.e.c;++y)l.dense?(c[v]||(c[v]=[]),c[v][y]||(c[v][y]={t:"z",v:void 0}),c[v][y].l=Z):(N=Hr({c:y,r:v}),c[N]||(c[N]={t:"z",v:void 0}),c[N].l=Z);break;case 426:if(!l.cellFormula)break;T.push(Z),_=l.dense?c[v][y]:c[As(y)+B],_.f=dl(Z[1],u,{r:m.r,c:y},F,l),_.F=Zr(Z[0]);break;case 427:if(!l.cellFormula)break;L[Hr(Z[0].s)]=Z[1],_=l.dense?c[v][y]:c[As(y)+B],_.f=dl(Z[1],u,{r:m.r,c:y},F,l);break;case 60:if(!l.cellStyles)break;for(;Z.e>=Z.s;)M[Z.e--]={width:Z.w/256,hidden:!!(Z.flags&1),level:Z.level},K||(K=!0,TL(Z.w/256)),cp(M[Z.e+1]);break;case 161:c["!autofilter"]={ref:Zr(Z)};break;case 476:c["!margins"]=Z;break;case 147:n.Sheets[r]||(n.Sheets[r]={}),Z.name&&(n.Sheets[r].CodeName=Z.name),(Z.above||Z.left)&&(c["!outline"]={above:Z.above,left:Z.left});break;case 137:n.Views||(n.Views=[{}]),n.Views[0]||(n.Views[0]={}),Z.RTL&&(n.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!U.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+Y.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(u.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(c["!ref"]=Zr(d||u)),l.sheetRows&&c["!ref"]){var G=Ma(c["!ref"]);l.sheetRows<=+G.e.r&&(G.e.r=l.sheetRows-1,G.e.r>u.e.r&&(G.e.r=u.e.r),G.e.r<G.s.r&&(G.s.r=G.e.r),G.e.c>u.e.c&&(G.e.c=u.e.c),G.e.c<G.s.c&&(G.s.c=G.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Zr(G))}return I.length>0&&(c["!merges"]=I),M.length>0&&(c["!cols"]=M),H.length>0&&(c["!rows"]=H),c}function QOe(e,t,r,a,n,i,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=Yn(t),t.z=t.z||Fr[14],t.v=Qi(Xn(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:a};switch(c.s=jp(n.cellXfs,t,n),t.l&&i["!links"].push([Hr(c),t.l]),t.c&&i["!comments"].push([Hr(c),t.c]),t.t){case"s":case"str":return n.bookSST?(l=FL(n.Strings,t.v,n.revStrings),c.t="s",c.v=l,o?Ut(e,18,oOe(t,c)):Ut(e,7,sOe(t,c))):(c.t="str",o?Ut(e,17,vOe(t,c)):Ut(e,6,gOe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?Ut(e,13,AOe(t,c)):Ut(e,2,fOe(t,c)):o?Ut(e,16,dOe(t,c)):Ut(e,5,cOe(t,c)),!0;case"b":return c.t="b",o?Ut(e,15,Z6e(t,c)):Ut(e,4,Y6e(t,c)),!0;case"e":return c.t="e",o?Ut(e,14,aOe(t,c)):Ut(e,3,tOe(t,c)),!0}return o?Ut(e,12,W6e(t,c)):Ut(e,1,q6e(t,c)),!0}function zOe(e,t,r,a){var n=Ma(t["!ref"]||"A1"),i,o="",l=[];Ut(e,145);var c=Array.isArray(t),d=n.e.r;t["!rows"]&&(d=Math.max(n.e.r,t["!rows"].length-1));for(var u=n.s.r;u<=d;++u){o=li(u),U6e(e,t,n,u);var f=!1;if(u<=n.e.r)for(var A=n.s.c;A<=n.e.c;++A){u===n.s.r&&(l[A]=As(A)),i=l[A]+o;var m=c?(t[u]||[])[A]:t[i];if(!m){f=!1;continue}f=QOe(e,m,u,A,a,t,f)}}Ut(e,146)}function $Oe(e,t){!t||!t["!merges"]||(Ut(e,177,jOe(t["!merges"].length)),t["!merges"].forEach(function(r){Ut(e,176,COe(r))}),Ut(e,178))}function VOe(e,t){!t||!t["!cols"]||(Ut(e,390),t["!cols"].forEach(function(r,a){r&&Ut(e,60,IOe(a,r))}),Ut(e,391))}function GOe(e,t){!t||!t["!ref"]||(Ut(e,648),Ut(e,649,ROe(Ma(t["!ref"]))),Ut(e,650))}function qOe(e,t,r){t["!links"].forEach(function(a){if(a[1].Target){var n=xn(r,-1,a[1].Target.replace(/#.*$/,""),xa.HLINK);Ut(e,494,SOe(a,n))}}),delete t["!links"]}function KOe(e,t,r,a){if(t["!comments"].length>0){var n=xn(a,-1,"../drawings/vmlDrawing"+(r+1)+".vml",xa.VML);Ut(e,551,wL("rId"+n)),t["!legacy"]=n}}function WOe(e,t,r,a){if(t["!autofilter"]){var n=t["!autofilter"],i=typeof n.ref=="string"?n.ref:Zr(n.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=_c(i);l.s.r==l.e.r&&(l.e.r=_c(t["!ref"]).e.r,i=Zr(l));for(var c=0;c<o.length;++c){var d=o[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==a){d.Ref="'"+r.SheetNames[a]+"'!"+i;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+i}),Ut(e,161,q1(Ma(i))),Ut(e,162)}}function XOe(e,t,r){Ut(e,133),Ut(e,137,POe(t,r)),Ut(e,138),Ut(e,134)}function YOe(e,t){t["!protect"]&&Ut(e,535,LOe(t["!protect"]))}function JOe(e,t,r,a){var n=kc(),i=r.SheetNames[e],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=Ma(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Ut(n,129),(r.vbaraw||o["!outline"])&&Ut(n,147,V6e(l,o["!outline"])),Ut(n,148,Q6e(c)),XOe(n,o,r.Workbook),VOe(n,o),zOe(n,o,e,t),YOe(n,o),WOe(n,o,r,e),$Oe(n,o),qOe(n,o,a),o["!margins"]&&Ut(n,476,DOe(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&GOe(n,o),KOe(n,o,e,a),Ut(n,130),n.end()}function ZOe(e){var t=[],r=e.match(/^<c:numCache>/),a;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var n=Ra((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){a=i.replace(/<.*?>/g,"")}),[t,n,a]}function eDe(e,t,r,a,n,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,c=0,d="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var A=ZOe(f);u.s.r=u.s.c=0,u.e.c=l,d=As(l),A[0].forEach(function(m,g){o[d+li(g)]={t:"n",v:m,z:A[1]},c=g}),u.e.r<c&&(u.e.r=c),++l}),l>0&&(o["!ref"]=Zr(u)),o}function tDe(e,t,r,a,n){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(Ise);return l&&PL(l[0],i,n,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}function rDe(e,t){e.l+=10;var r=Cl(e);return{name:r}}function aDe(e,t,r,a,n){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return vA(e,function(c,d,u){switch(u){case 550:i["!rel"]=c;break;case 651:n.Sheets[r]||(n.Sheets[r]={}),c.name&&(n.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},t),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}var RL=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],nDe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],sDe=[],iDe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function bV(e,t){for(var r=0;r!=e.length;++r)for(var a=e[r],n=0;n!=t.length;++n){var i=t[n];if(a[i[0]]==null)a[i[0]]=i[1];else switch(i[2]){case"bool":typeof a[i[0]]=="string"&&(a[i[0]]=Kn(a[i[0]]));break;case"int":typeof a[i[0]]=="string"&&(a[i[0]]=parseInt(a[i[0]],10));break}}}function yV(e,t){for(var r=0;r!=t.length;++r){var a=t[r];if(e[a[0]]==null)e[a[0]]=a[1];else switch(a[2]){case"bool":typeof e[a[0]]=="string"&&(e[a[0]]=Kn(e[a[0]]));break;case"int":typeof e[a[0]]=="string"&&(e[a[0]]=parseInt(e[a[0]],10));break}}}function Pse(e){yV(e.WBProps,RL),yV(e.CalcPr,iDe),bV(e.WBView,nDe),bV(e.Sheets,sDe),Sb.date1904=Kn(e.WBProps.date1904)}function oDe(e){return!e.Workbook||!e.Workbook.WBProps?"false":Kn(e.Workbook.WBProps.date1904)?"true":"false"}var lDe="][*?/\\".split("");function Rse(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return lDe.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function cDe(e,t,r){e.forEach(function(a,n){Rse(a);for(var i=0;i<n;++i)if(a==e[i])throw new Error("Duplicate Sheet Name: "+a);if(r){var o=t&&t[n]&&t[n].CodeName||a;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function dDe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];cDe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)o6e(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var uDe=/<\w+:workbook/;function fDe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,n="xmlns",i={},o=0;if(e.replace(Tl,function(c,d){var u=Vr(c);switch(Mh(u[0])){case"<?xml":break;case"<workbook":c.match(uDe)&&(n="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=u[n];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":RL.forEach(function(f){if(u[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Kn(u[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(u[f[0]],10);break;default:r.WBProps[f[0]]=u[f[0]]}}),u.codeName&&(r.WBProps.CodeName=Sn(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=Ra(Sn(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":i={},i.Name=Sn(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),Kn(u.hidden||"0")&&(i.Hidden=!0),o=d+c.length;break;case"</definedName>":i.Ref=Ra(Sn(e.slice(o,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&t.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return c}),Sx.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Pse(r),r}function Lse(e){var t=[di];t[t.length]=Wt("workbook",null,{xmlns:Sx[0],"xmlns:r":Mi.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(RL.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(a[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(a.codeName=e.Workbook.WBProps.CodeName,delete a.CodeName)),t[t.length]=Wt("workbookPr",null,a);var n=e.Workbook&&e.Workbook.Sheets||[],i=0;if(n&&n[0]&&n[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!n[i]||!n[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:yn(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),n[i])switch(n[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=Wt("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=Wt("definedName",yn(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function hDe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=JD(e),r.name=Cl(e),r}function ADe(e,t){return t||(t=St(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),wL(e.strRelID,t),uo(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function mDe(e,t){var r={},a=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var n=t>8?Cl(e):"";return n.length>0&&(r.CodeName=n),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function pDe(e,t){t||(t=St(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),_ne(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function gDe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function xDe(e,t,r){var a=e.l+t;e.l+=4,e.l+=1;var n=e.read_shift(4),i=KSe(e),o=t6e(e,0,r),l=yL(e);e.l=a;var c={Name:i,Ptg:o};return n<268435455&&(c.Sheet=n),l&&(c.Comment=l),c}function vDe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],n=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],fN[16]={n:"BrtFRTArchID$",f:gDe},vA(e,function(c,d,u){switch(u){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=dl(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([u,c]):o[0]=[u,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(u),n=!0;break;case 36:a.pop(),n=!1;break;case 37:a.push(u),n=!0;break;case 38:a.pop(),n=!1;break;case 16:break;default:if(!d.T){if(!n||t.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},t),Pse(r),r.Names=i,r.supbooks=o,r}function bDe(e,t){Ut(e,143);for(var r=0;r!=t.SheetNames.length;++r){var a=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,n={Hidden:a,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Ut(e,156,ADe(n))}Ut(e,144)}function yDe(e,t){t||(t=St(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return uo("SheetJS",t),uo(L5.version,t),uo(L5.version,t),uo("7262",t),t.length>t.l?t.slice(0,t.l):t}function wDe(e,t){t||(t=St(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function NDe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,a=0,n=-1,i=-1;a<r.length;++a)!r[a]||!r[a].Hidden&&n==-1?n=a:r[a].Hidden==1&&i==-1&&(i=a);i>n||(Ut(e,135),Ut(e,158,wDe(n)),Ut(e,136))}}function EDe(e,t){var r=kc();return Ut(r,131),Ut(r,128,yDe()),Ut(r,153,pDe(e.Workbook&&e.Workbook.WBProps||null)),NDe(r,e),bDe(r,e),Ut(r,132),r.end()}function CDe(e,t,r){return t.slice(-4)===".bin"?vDe(e,r):fDe(e,r)}function jDe(e,t,r,a,n,i,o,l){return t.slice(-4)===".bin"?HOe(e,a,r,n,i,o,l):x6e(e,a,r,n,i,o,l)}function kDe(e,t,r,a,n,i,o,l){return t.slice(-4)===".bin"?aDe(e,a,r,n,i):tDe(e,a,r,n,i)}function SDe(e,t,r,a,n,i,o,l){return t.slice(-4)===".bin"?TBe():BBe()}function _De(e,t,r,a,n,i,o,l){return t.slice(-4)===".bin"?SBe():_Be()}function TDe(e,t,r,a){return t.slice(-4)===".bin"?CTe(e,r,a):hTe(e,r,a)}function BDe(e,t,r){return xse(e,r)}function IDe(e,t,r){return t.slice(-4)===".bin"?I3e(e,r):_3e(e,r)}function ODe(e,t,r){return t.slice(-4)===".bin"?NBe(e,r):ABe(e,r)}function DDe(e,t,r){return t.slice(-4)===".bin"?uBe(e):cBe(e)}function FDe(e,t,r,a){return r.slice(-4)===".bin"?fBe(e,t,r,a):void 0}function PDe(e,t,r){return t.slice(-4)===".bin"?iBe(e,t,r):lBe(e,t,r)}function RDe(e,t,r){return(t.slice(-4)===".bin"?EDe:Lse)(e)}function LDe(e,t,r,a,n){return(t.slice(-4)===".bin"?JOe:Ose)(e,r,a,n)}function MDe(e,t,r){return(t.slice(-4)===".bin"?FTe:pse)(e,r)}function UDe(e,t,r){return(t.slice(-4)===".bin"?F3e:lse)(e,r)}function HDe(e,t,r){return(t.slice(-4)===".bin"?EBe:yse)(e)}function QDe(e){return(e.slice(-4)===".bin"?oBe:vse)()}var Mse=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Use=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Vu(e,t){var r=e.split(/\s+/),a=[];if(a[0]=r[0],r.length===1)return a;var n=e.match(Mse),i,o,l,c;if(n)for(c=0;c!=n.length;++c)i=n[c].match(Use),(o=i[1].indexOf(":"))===-1?a[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),a[l]=i[2].slice(1,i[2].length-1));return a}function zDe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var a=e.match(Mse),n,i,o,l;if(a)for(l=0;l!=a.length;++l)n=a[l].match(Use),(i=n[1].indexOf(":"))===-1?r[n[1]]=n[2].slice(1,n[2].length-1):(n[1].slice(0,6)==="xmlns:"?o="xmlns"+n[1].slice(6):o=n[1].slice(i+1),r[o]=n[2].slice(1,n[2].length-1));return r}var b2;function $De(e,t){var r=b2[e]||Ra(e);return r==="General"?nx(t):pu(r,t)}function VDe(e,t,r,a){var n=a;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":n=Kn(a);break;case"i2":case"int":n=parseInt(a,10);break;case"r4":case"float":n=parseFloat(a);break;case"date":case"dateTime.tz":n=Xn(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Ra(t)]=n}function GDe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||bA[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=aN(e.v):e.w=nx(e.v):e.w=$De(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var a=b2[t]||t||"General";if(r.cellNF&&(e.z=a),r.cellDates&&e.t=="n"&&$1(a)){var n=Eg(e.v);n&&(e.t="d",e.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}catch(i){if(r.WTF)throw i}}}function qDe(e,t,r){if(r.cellStyles&&t.Interior){var a=t.Interior;a.Pattern&&(a.patternType=sTe[a.Pattern]||a.Pattern)}e[t.ID]=t}function KDe(e,t,r,a,n,i,o,l,c,d){var u="General",f=a.StyleID,A={};d=d||{};var m=[],g=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&o&&(f=o.StyleID);i[f]!==void 0&&(i[f].nf&&(u=i[f].nf),i[f].Interior&&m.push(i[f].Interior),!!i[f].Parent);)f=i[f].Parent;switch(r.Type){case"Boolean":a.t="b",a.v=Kn(e);break;case"String":a.t="s",a.r=L$(Ra(e)),a.v=e.indexOf("<")>-1?Ra(t||e).replace(/<.*?>/g,""):a.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),a.v=(Xn(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),a.v!==a.v?a.v=Ra(e):a.v<60&&(a.v=a.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+e),a.t||(a.t="n");break;case"Error":a.t="e",a.v=Dne[e],d.cellText!==!1&&(a.w=e);break;default:e==""&&t==""?a.t="z":(a.t="s",a.v=L$(t||e));break}if(GDe(a,u,d),d.cellFormula!==!1)if(a.Formula){var x=Ra(a.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),a.f=kb(x,n),delete a.Formula,a.ArrayRange=="RC"?a.F=kb("RC:RC",n):a.ArrayRange&&(a.F=kb(a.ArrayRange,n),c.push([Ma(a.F),a.F]))}else for(g=0;g<c.length;++g)n.r>=c[g][0].s.r&&n.r<=c[g][0].e.r&&n.c>=c[g][0].s.c&&n.c<=c[g][0].e.c&&(a.F=c[g][1]);d.cellStyles&&(m.forEach(function(v){!A.patternType&&v.patternType&&(A.patternType=v.patternType)}),a.s=A),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function WDe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function qB(e,t){var r=t||{};V1();var a=Hw(mL(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(a=Sn(a));var n=a.slice(0,1024).toLowerCase(),i=!1;if(n=n.replace(/".*?"/g,""),(n.indexOf(">")&1023)>Math.min(n.indexOf(",")&1023,n.indexOf(";")&1023)){var o=Yn(r);return o.type="string",n1.to_workbook(a,o)}if(n.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(he){n.indexOf("<"+he)>=0&&(i=!0)}),i)return DFe(a,r);b2={"General Number":"General","General Date":Fr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Fr[15],"Short Date":Fr[14],"Long Time":Fr[19],"Medium Time":Fr[18],"Short Time":Fr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Fr[2],Standard:Fr[4],Percent:Fr[10],Scientific:Fr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],d,u={},f=[],A=r.dense?[]:{},m="",g={},x={},v=Vu('<Data ss:Type="String">'),y=0,N=0,E=0,B={s:{r:2e6,c:2e6},e:{r:0,c:0}},_={},I={},j="",k=0,T=[],L={},F={},S=0,M=[],H=[],K={},Q=[],G,X=!1,Z=[],U=[],Y={},P=0,D=0,W={Sheets:[],WBProps:{date1904:!1}},J={};iN.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var ce="";l=iN.exec(a);)switch(l[3]=(ce=l[3]).toLowerCase()){case"data":if(ce=="data"){if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?KDe(a.slice(y,l.index),j,v,c[c.length-1][0]=="comment"?K:g,{c:N,r:E},_,Q[N],x,Z,r):(j="",v=Vu(l[0]),y=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(H.length>0&&(g.c=H),(!r.sheetRows||r.sheetRows>E)&&g.v!==void 0&&(r.dense?(A[E]||(A[E]=[]),A[E][N]=g):A[As(N)+li(E)]=g),g.HRef&&(g.l={Target:Ra(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(P=N+(parseInt(g.MergeAcross,10)|0),D=E+(parseInt(g.MergeDown,10)|0),T.push({s:{c:N,r:E},e:{c:P,r:D}})),!r.sheetStubs)g.MergeAcross?N=P+1:++N;else if(g.MergeAcross||g.MergeDown){for(var ie=N;ie<=P;++ie)for(var re=E;re<=D;++re)(ie>N||re>E)&&(r.dense?(A[re]||(A[re]=[]),A[re][ie]={t:"z"}):A[As(ie)+li(re)]={t:"z"});N=P+1}else++N;else g=zDe(l[0]),g.Index&&(N=+g.Index-1),N<B.s.c&&(B.s.c=N),N>B.e.c&&(B.e.c=N),l[0].slice(-2)==="/>"&&++N,H=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(E<B.s.r&&(B.s.r=E),E>B.e.r&&(B.e.r=E),l[0].slice(-2)==="/>"&&(x=Vu(l[0]),x.Index&&(E=+x.Index-1)),N=0,++E):(x=Vu(l[0]),x.Index&&(E=+x.Index-1),Y={},(x.AutoFitHeight=="0"||x.Height)&&(Y.hpx=parseInt(x.Height,10),Y.hpt=uN(Y.hpx),U[E]=Y),x.Hidden=="1"&&(Y.hidden=!0,U[E]=Y));break;case"worksheet":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));f.push(m),B.s.r<=B.e.r&&B.s.c<=B.e.c&&(A["!ref"]=Zr(B),r.sheetRows&&r.sheetRows<=B.e.r&&(A["!fullref"]=A["!ref"],B.e.r=r.sheetRows-1,A["!ref"]=Zr(B))),T.length&&(A["!merges"]=T),Q.length>0&&(A["!cols"]=Q),U.length>0&&(A["!rows"]=U),u[m]=A}else B={s:{r:2e6,c:2e6},e:{r:0,c:0}},E=N=0,c.push([l[3],!1]),d=Vu(l[0]),m=Ra(d.Name),A=r.dense?[]:{},T=[],Z=[],U=[],J={name:m,Hidden:0},W.Sheets.push(J);break;case"table":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),Q=[],X=!1}break;case"style":l[1]==="/"?qDe(_,I,r):I=Vu(l[0]);break;case"numberformat":I.nf=Ra(Vu(l[0]).Format||"General"),b2[I.nf]&&(I.nf=b2[I.nf]);for(var de=0;de!=392&&Fr[de]!=I.nf;++de);if(de==392){for(de=57;de!=392;++de)if(Fr[de]==null){z0(I.nf,de);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(G=Vu(l[0]),G.Hidden&&(G.hidden=!0,delete G.Hidden),G.Width&&(G.wpx=parseInt(G.Width,10)),!X&&G.wpx>10){X=!0,hl=Ase;for(var oe=0;oe<Q.length;++oe)Q[oe]&&cp(Q[oe])}X&&cp(G),Q[G.Index-1||Q.length]=G;for(var be=0;be<+G.Span;++be)Q[Q.length]=Yn(G);break;case"namedrange":if(l[1]==="/")break;W.Names||(W.Names=[]);var q=Vr(l[0]),we={Name:q.Name,Ref:kb(q.RefersTo.slice(1),{r:0,c:0})};W.Sheets.length>0&&(we.Sheet=W.Sheets.length-1),W.Names.push(we);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?j+=a.slice(k,l.index):k=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;I.Interior=Vu(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?v_e(L,ce,a.slice(S,l.index)):S=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));WDe(K),H.push(K)}else c.push([l[3],!1]),d=Vu(l[0]),K={a:d.Author};break;case"autofilter":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Te=Vu(l[0]);A["!autofilter"]={ref:kb(Te.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return jV(a,r);var Ee=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Ee=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Ee=!1}break;case"excelworkbook":switch(l[3]){case"date1904":W.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Ee=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:Ee=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(a.slice(S,l.index)){case"SheetHidden":J.Hidden=1;break;case"SheetVeryHidden":J.Hidden=2;break}else S=l.index+l[0].length;break;case"header":A["!margins"]||Qg(A["!margins"]={},"xlml"),isNaN(+Vr(l[0]).Margin)||(A["!margins"].header=+Vr(l[0]).Margin);break;case"footer":A["!margins"]||Qg(A["!margins"]={},"xlml"),isNaN(+Vr(l[0]).Margin)||(A["!margins"].footer=+Vr(l[0]).Margin);break;case"pagemargins":var ue=Vr(l[0]);A["!margins"]||Qg(A["!margins"]={},"xlml"),isNaN(+ue.Top)||(A["!margins"].top=+ue.Top),isNaN(+ue.Left)||(A["!margins"].left=+ue.Left),isNaN(+ue.Right)||(A["!margins"].right=+ue.Right),isNaN(+ue.Bottom)||(A["!margins"].bottom=+ue.Bottom);break;case"displayrighttoleft":W.Views||(W.Views=[]),W.Views[0]||(W.Views[0]={}),W.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":A["!outline"]||(A["!outline"]={}),A["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":A["!outline"]||(A["!outline"]={}),A["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Ee=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Ee=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Ee=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Ee=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Ee=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Ee=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Ee=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Ee=!1}break;case"smarttags":break;default:Ee=!1;break}if(Ee||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?VDe(F,ce,M,a.slice(S,l.index)):(M=l,S=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var ge={};return!r.bookSheets&&!r.bookProps&&(ge.Sheets=u),ge.SheetNames=f,ge.Workbook=W,ge.SSF=Yn(Fr),ge.Props=L,ge.Custprops=F,ge}function sF(e,t){switch(ML(t=t||{}),t.type||"base64"){case"base64":return qB(vd(e),t);case"binary":case"buffer":case"file":return qB(e,t);case"array":return qB(Ep(e),t)}}function XDe(e,t){var r=[];return e.Props&&r.push(b_e(e.Props,t)),e.Custprops&&r.push(y_e(e.Props,e.Custprops)),r.join("")}function YDe(){return""}function JDe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(a,n){var i=[];i.push(Wt("NumberFormat",null,{"ss:Format":yn(Fr[a.numFmtId])}));var o={"ss:ID":"s"+(21+n)};r.push(Wt("Style",i.join(""),o))}),Wt("Styles",r.join(""))}function Hse(e){return Wt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+OL(e.Ref,{r:0,c:0})})}function ZDe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],a=0;a<t.length;++a){var n=t[a];n.Sheet==null&&(n.Name.match(/^_xlfn\./)||r.push(Hse(n)))}return Wt("Names",r.join(""))}function eFe(e,t,r,a){if(!e||!((a||{}).Workbook||{}).Names)return"";for(var n=a.Workbook.Names,i=[],o=0;o<n.length;++o){var l=n[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(Hse(l)))}return i.join("")}function tFe(e,t,r,a){if(!e)return"";var n=[];if(e["!margins"]&&(n.push("<PageSetup>"),e["!margins"].header&&n.push(Wt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&n.push(Wt("Footer",null,{"x:Margin":e["!margins"].footer})),n.push(Wt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),n.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[r])if(a.Workbook.Sheets[r].Hidden)n.push(Wt("Visible",a.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(a.Workbook.Sheets[i]&&!a.Workbook.Sheets[i].Hidden);++i);i==r&&n.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&n.push("<DisplayRightToLeft/>"),e["!protect"]&&(n.push(Do("ProtectContents","True")),e["!protect"].objects&&n.push(Do("ProtectObjects","True")),e["!protect"].scenarios&&n.push(Do("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?n.push(Do("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&n.push(Do("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&n.push("<"+o[1]+"/>")})),n.length==0?"":Wt("WorksheetOptions",n.join(""),{xmlns:sd.x})}function rFe(e){return e.map(function(t){var r=NSe(t.t||""),a=Wt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Wt("Comment",a,{"ss:Author":t.a})}).join("")}function aFe(e,t,r,a,n,i,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+yn(OL(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=ms(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=yn(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=yn(e.l.Tooltip))),r["!merges"])for(var d=r["!merges"],u=0;u!=d.length;++u)d[u].s.c!=o.c||d[u].s.r!=o.r||(d[u].e.c>d[u].s.c&&(l["ss:MergeAcross"]=d[u].e.c-d[u].s.c),d[u].e.r>d[u].s.r&&(l["ss:MergeDown"]=d[u].e.r-d[u].s.r));var f="",A="";switch(e.t){case"z":if(!a.sheetStubs)return"";break;case"n":f="Number",A=String(e.v);break;case"b":f="Boolean",A=e.v?"1":"0";break;case"e":f="Error",A=bA[e.v];break;case"d":f="DateTime",A=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Fr[14]);break;case"s":f="String",A=wSe(e.v||"");break}var m=jp(a.cellXfs,e,a);l["ss:StyleID"]="s"+(21+m),l["ss:Index"]=o.c+1;var g=e.v!=null?A:"",x=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(x+=rFe(e.c)),Wt("Cell",x,l)}function nFe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=s1(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function sFe(e,t,r,a){if(!e["!ref"])return"";var n=Ma(e["!ref"]),i=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(v,y){cp(v);var N=!!v.width,E=v4(y,v),B={"ss:Index":y+1};N&&(B["ss:Width"]=cN(E.width)),v.hidden&&(B["ss:Hidden"]="1"),l.push(Wt("Column",null,B))});for(var c=Array.isArray(e),d=n.s.r;d<=n.e.r;++d){for(var u=[nFe(d,(e["!rows"]||[])[d])],f=n.s.c;f<=n.e.c;++f){var A=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>f)&&!(i[o].s.r>d)&&!(i[o].e.c<f)&&!(i[o].e.r<d)){(i[o].s.c!=f||i[o].s.r!=d)&&(A=!0);break}if(!A){var m={r:d,c:f},g=Hr(m),x=c?(e[d]||[])[f]:e[g];u.push(aFe(x,g,e,t,r,a,m))}}u.push("</Row>"),u.length>2&&l.push(u.join(""))}return l.join("")}function iFe(e,t,r){var a=[],n=r.SheetNames[e],i=r.Sheets[n],o=i?eFe(i,t,e,r):"";return o.length>0&&a.push("<Names>"+o+"</Names>"),o=i?sFe(i,t,e,r):"",o.length>0&&a.push("<Table>"+o+"</Table>"),a.push(tFe(i,t,e,r)),a.join("")}function oFe(e,t){t||(t={}),e.SSF||(e.SSF=Yn(Fr)),e.SSF&&(V1(),f4(e.SSF),t.revssf=A4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],jp(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(XDe(e,t)),r.push(YDe()),r.push(""),r.push("");for(var a=0;a<e.SheetNames.length;++a)r.push(Wt("Worksheet",iFe(a,t,e),{"ss:Name":yn(e.SheetNames[a])}));return r[2]=JDe(e,t),r[3]=ZDe(e),di+Wt("Workbook",r.join(""),{xmlns:sd.ss,"xmlns:o":sd.o,"xmlns:x":sd.x,"xmlns:ss":sd.ss,"xmlns:dt":sd.dt,"xmlns:html":sd.html})}function lFe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=ZSe(r),r.length-r.l<=4)return t;var a=r.read_shift(4);if(a==0||a>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(a=r.read_shift(4),a!==1907505652)||(t.UnicodeClipboardFormat=e_e(r),a=r.read_shift(4),a==0||a>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var cFe=[60,1084,2066,2165,2175];function dFe(e,t,r,a,n){var i=a,o=[],l=r.slice(r.l,r.l+i);if(n&&n.enc&&n.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:n.enc.insitu(l)}o.push(l),r.l+=i;for(var c=F0(r,r.l),d=iF[c],u=0;d!=null&&cFe.indexOf(c)>-1;)i=F0(r,r.l+2),u=r.l+4,c==2066?u+=4:(c==2165||c==2175)&&(u+=12),l=r.slice(u,r.l+4+i),o.push(l),r.l+=4+i,d=iF[c=F0(r,r.l)];var f=co(o);Oo(f,0);var A=0;f.lens=[];for(var m=0;m<o.length;++m)f.lens.push(A),A+=o[m].length;if(f.length<a)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+a;return t.f(f,f.length,n)}function ah(e,t,r){if(e.t!=="z"&&e.XF){var a=0;try{a=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Fr[a])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||bA[e.v]:a===0||a=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=aN(e.v):e.w=nx(e.v):e.w=pu(a,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&a&&e.t=="n"&&$1(Fr[a]||String(a))){var n=Eg(e.v);n&&(e.t="d",e.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}}function dj(e,t,r){return{v:e,ixfe:t,t:r}}function uFe(e,t){var r={opts:{}},a={},n=t.dense?[]:{},i={},o={},l=null,c=[],d="",u={},f,A="",m,g,x,v,y={},N=[],E,B,_=[],I=[],j={Sheets:[],WBProps:{date1904:!1},Views:[{}]},k={},T=function(ct){return ct<8?Mg[ct]:ct<64&&I[ct-8]||Mg[ct]},L=function(ct,Ze,Qe){var wt=Ze.XF.data;if(!(!wt||!wt.patternType||!Qe||!Qe.cellStyles)){Ze.s={},Ze.s.patternType=wt.patternType;var ar;(ar=lN(T(wt.icvFore)))&&(Ze.s.fgColor={rgb:ar}),(ar=lN(T(wt.icvBack)))&&(Ze.s.bgColor={rgb:ar})}},F=function(ct,Ze,Qe){if(!(Y>1)&&!(Qe.sheetRows&&ct.r>=Qe.sheetRows)){if(Qe.cellStyles&&Ze.XF&&Ze.XF.data&&L(ct,Ze,Qe),delete Ze.ixfe,delete Ze.XF,f=ct,A=Hr(ct),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),ct.r<o.s.r&&(o.s.r=ct.r),ct.c<o.s.c&&(o.s.c=ct.c),ct.r+1>o.e.r&&(o.e.r=ct.r+1),ct.c+1>o.e.c&&(o.e.c=ct.c+1),Qe.cellFormula&&Ze.f){for(var wt=0;wt<N.length;++wt)if(!(N[wt][0].s.c>ct.c||N[wt][0].s.r>ct.r)&&!(N[wt][0].e.c<ct.c||N[wt][0].e.r<ct.r)){Ze.F=Zr(N[wt][0]),(N[wt][0].s.c!=ct.c||N[wt][0].s.r!=ct.r)&&delete Ze.f,Ze.f&&(Ze.f=""+dl(N[wt][1],o,ct,Z,S));break}}Qe.dense?(n[ct.r]||(n[ct.r]=[]),n[ct.r][ct.c]=Ze):n[A]=Ze}},S={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:N,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(S.password=t.password);var M,H=[],K=[],Q=[],G=[],X=!1,Z=[];Z.SheetNames=S.snames,Z.sharedf=S.sharedf,Z.arrayf=S.arrayf,Z.names=[],Z.XTI=[];var U=0,Y=0,P=0,D=[],W=[],J;S.codepage=1200,rf(1200);for(var ce=!1;e.l<e.length-1;){var ie=e.l,re=e.read_shift(2);if(re===0&&U===10)break;var de=e.l===e.length?0:e.read_shift(2),oe=iF[re];if(oe&&oe.f){if(t.bookSheets&&U===133&&re!==133)break;if(U=re,oe.r===2||oe.r==12){var be=e.read_shift(2);if(de-=2,!S.enc&&be!==re&&((be&255)<<8|be>>8)!==re)throw new Error("rt mismatch: "+be+"!="+re);oe.r==12&&(e.l+=10,de-=10)}var q={};if(re===10?q=oe.f(e,de,S):q=dFe(re,oe,e,de,S),Y==0&&[9,521,1033,2057].indexOf(U)===-1)continue;switch(re){case 34:r.opts.Date1904=j.WBProps.date1904=q;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(S.enc||(e.l=0),S.enc=q,!t.password)throw new Error("File is password-protected");if(q.valid==null)throw new Error("Encryption scheme unsupported");if(!q.valid)throw new Error("Password is incorrect");break;case 92:S.lastuser=q;break;case 66:var we=Number(q);switch(we){case 21010:we=1200;break;case 32768:we=1e4;break;case 32769:we=1252;break}rf(S.codepage=we),ce=!0;break;case 317:S.rrtabid=q;break;case 25:S.winlocked=q;break;case 439:r.opts.RefreshAll=q;break;case 12:r.opts.CalcCount=q;break;case 16:r.opts.CalcDelta=q;break;case 17:r.opts.CalcIter=q;break;case 13:r.opts.CalcMode=q;break;case 14:r.opts.CalcPrecision=q;break;case 95:r.opts.CalcSaveRecalc=q;break;case 15:S.CalcRefMode=q;break;case 2211:r.opts.FullCalc=q;break;case 129:q.fDialog&&(n["!type"]="dialog"),q.fBelow||((n["!outline"]||(n["!outline"]={})).above=!0),q.fRight||((n["!outline"]||(n["!outline"]={})).left=!0);break;case 224:_.push(q);break;case 430:Z.push([q]),Z[Z.length-1].XTI=[];break;case 35:case 547:Z[Z.length-1].push(q);break;case 24:case 536:J={Name:q.Name,Ref:dl(q.rgce,o,null,Z,S)},q.itab>0&&(J.Sheet=q.itab-1),Z.names.push(J),Z[0]||(Z[0]=[],Z[0].XTI=[]),Z[Z.length-1].push(q),q.Name=="_xlnm._FilterDatabase"&&q.itab>0&&q.rgce&&q.rgce[0]&&q.rgce[0][0]&&q.rgce[0][0][0]=="PtgArea3d"&&(W[q.itab-1]={ref:Zr(q.rgce[0][0][1][2])});break;case 22:S.ExternCount=q;break;case 23:Z.length==0&&(Z[0]=[],Z[0].XTI=[]),Z[Z.length-1].XTI=Z[Z.length-1].XTI.concat(q),Z.XTI=Z.XTI.concat(q);break;case 2196:if(S.biff<8)break;J!=null&&(J.Comment=q[1]);break;case 18:n["!protect"]=q;break;case 19:q!==0&&S.WTF&&console.error("Password verifier: "+q);break;case 133:i[q.pos]=q,S.snames.push(q.name);break;case 10:{if(--Y)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,n["!ref"]=Zr(o),t.sheetRows&&t.sheetRows<=o.e.r){var Te=o.e.r;o.e.r=t.sheetRows-1,n["!fullref"]=n["!ref"],n["!ref"]=Zr(o),o.e.r=Te}o.e.r++,o.e.c++}H.length>0&&(n["!merges"]=H),K.length>0&&(n["!objects"]=K),Q.length>0&&(n["!cols"]=Q),G.length>0&&(n["!rows"]=G),j.Sheets.push(k)}d===""?u=n:a[d]=n,n=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(S.biff===8&&(S.biff={9:2,521:3,1033:4}[re]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[q.BIFFVer]||8),S.biffguess=q.BIFFVer==0,q.BIFFVer==0&&q.dt==4096&&(S.biff=5,ce=!0,rf(S.codepage=28591)),S.biff==8&&q.BIFFVer==0&&q.dt==16&&(S.biff=2),Y++)break;if(n=t.dense?[]:{},S.biff<8&&!ce&&(ce=!0,rf(S.codepage=t.codepage||1252)),S.biff<5||q.BIFFVer==0&&q.dt==4096){d===""&&(d="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var Ee={pos:e.l-de,name:d};i[Ee.pos]=Ee,S.snames.push(d)}else d=(i[ie]||{name:""}).name;q.dt==32&&(n["!type"]="chart"),q.dt==64&&(n["!type"]="macro"),H=[],K=[],S.arrayf=N=[],Q=[],G=[],X=!1,k={Hidden:(i[ie]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:n["!type"]=="chart"&&(t.dense?(n[q.r]||[])[q.c]:n[Hr({c:q.c,r:q.r})])&&++q.c,E={ixfe:q.ixfe,XF:_[q.ixfe]||{},v:q.val,t:"n"},P>0&&(E.z=D[E.ixfe>>8&63]),ah(E,t,r.opts.Date1904),F({c:q.c,r:q.r},E,t);break;case 5:case 517:E={ixfe:q.ixfe,XF:_[q.ixfe],v:q.val,t:q.t},P>0&&(E.z=D[E.ixfe>>8&63]),ah(E,t,r.opts.Date1904),F({c:q.c,r:q.r},E,t);break;case 638:E={ixfe:q.ixfe,XF:_[q.ixfe],v:q.rknum,t:"n"},P>0&&(E.z=D[E.ixfe>>8&63]),ah(E,t,r.opts.Date1904),F({c:q.c,r:q.r},E,t);break;case 189:for(var ue=q.c;ue<=q.C;++ue){var ge=q.rkrec[ue-q.c][0];E={ixfe:ge,XF:_[ge],v:q.rkrec[ue-q.c][1],t:"n"},P>0&&(E.z=D[E.ixfe>>8&63]),ah(E,t,r.opts.Date1904),F({c:ue,r:q.r},E,t)}break;case 6:case 518:case 1030:{if(q.val=="String"){l=q;break}if(E=dj(q.val,q.cell.ixfe,q.tt),E.XF=_[E.ixfe],t.cellFormula){var he=q.formula;if(he&&he[0]&&he[0][0]&&he[0][0][0]=="PtgExp"){var ve=he[0][0][1][0],le=he[0][0][1][1],ne=Hr({r:ve,c:le});y[ne]?E.f=""+dl(q.formula,o,q.cell,Z,S):E.F=((t.dense?(n[ve]||[])[le]:n[ne])||{}).F}else E.f=""+dl(q.formula,o,q.cell,Z,S)}P>0&&(E.z=D[E.ixfe>>8&63]),ah(E,t,r.opts.Date1904),F(q.cell,E,t),l=q}break;case 7:case 519:if(l)l.val=q,E=dj(q,l.cell.ixfe,"s"),E.XF=_[E.ixfe],t.cellFormula&&(E.f=""+dl(l.formula,o,l.cell,Z,S)),P>0&&(E.z=D[E.ixfe>>8&63]),ah(E,t,r.opts.Date1904),F(l.cell,E,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{N.push(q);var Ae=Hr(q[0].s);if(m=t.dense?(n[q[0].s.r]||[])[q[0].s.c]:n[Ae],t.cellFormula&&m){if(!l||!Ae||!m)break;m.f=""+dl(q[1],o,q[0],Z,S),m.F=Zr(q[0])}}break;case 1212:{if(!t.cellFormula)break;if(A){if(!l)break;y[Hr(l.cell)]=q[0],m=t.dense?(n[l.cell.r]||[])[l.cell.c]:n[Hr(l.cell)],(m||{}).f=""+dl(q[0],o,f,Z,S)}}break;case 253:E=dj(c[q.isst].t,q.ixfe,"s"),c[q.isst].h&&(E.h=c[q.isst].h),E.XF=_[E.ixfe],P>0&&(E.z=D[E.ixfe>>8&63]),ah(E,t,r.opts.Date1904),F({c:q.c,r:q.r},E,t);break;case 513:t.sheetStubs&&(E={ixfe:q.ixfe,XF:_[q.ixfe],t:"z"},P>0&&(E.z=D[E.ixfe>>8&63]),ah(E,t,r.opts.Date1904),F({c:q.c,r:q.r},E,t));break;case 190:if(t.sheetStubs)for(var pe=q.c;pe<=q.C;++pe){var ke=q.ixfe[pe-q.c];E={ixfe:ke,XF:_[ke],t:"z"},P>0&&(E.z=D[E.ixfe>>8&63]),ah(E,t,r.opts.Date1904),F({c:pe,r:q.r},E,t)}break;case 214:case 516:case 4:E=dj(q.val,q.ixfe,"s"),E.XF=_[E.ixfe],P>0&&(E.z=D[E.ixfe>>8&63]),ah(E,t,r.opts.Date1904),F({c:q.c,r:q.r},E,t);break;case 0:case 512:Y===1&&(o=q);break;case 252:c=q;break;case 1054:if(S.biff==4){D[P++]=q[1];for(var Le=0;Le<P+163&&Fr[Le]!=q[1];++Le);Le>=163&&z0(q[1],P+163)}else z0(q[1],q[0]);break;case 30:{D[P++]=q;for(var qe=0;qe<P+163&&Fr[qe]!=q;++qe);qe>=163&&z0(q,P+163)}break;case 229:H=H.concat(q);break;case 93:K[q.cmo[0]]=S.lastobj=q;break;case 438:S.lastobj.TxO=q;break;case 127:S.lastobj.ImData=q;break;case 440:for(v=q[0].s.r;v<=q[0].e.r;++v)for(x=q[0].s.c;x<=q[0].e.c;++x)m=t.dense?(n[v]||[])[x]:n[Hr({c:x,r:v})],m&&(m.l=q[1]);break;case 2048:for(v=q[0].s.r;v<=q[0].e.r;++v)for(x=q[0].s.c;x<=q[0].e.c;++x)m=t.dense?(n[v]||[])[x]:n[Hr({c:x,r:v})],m&&m.l&&(m.l.Tooltip=q[1]);break;case 28:{if(S.biff<=5&&S.biff>=2)break;m=t.dense?(n[q[0].r]||[])[q[0].c]:n[Hr(q[0])];var ze=K[q[2]];m||(t.dense?(n[q[0].r]||(n[q[0].r]=[]),m=n[q[0].r][q[0].c]={t:"z"}):m=n[Hr(q[0])]={t:"z"},o.e.r=Math.max(o.e.r,q[0].r),o.s.r=Math.min(o.s.r,q[0].r),o.e.c=Math.max(o.e.c,q[0].c),o.s.c=Math.min(o.s.c,q[0].c)),m.c||(m.c=[]),g={a:q[1],t:ze.TxO.t},m.c.push(g)}break;case 2173:JTe(_[q.ixfe],q.ext);break;case 125:{if(!S.cellStyles)break;for(;q.e>=q.s;)Q[q.e--]={width:q.w/256,level:q.level||0,hidden:!!(q.flags&1)},X||(X=!0,TL(q.w/256)),cp(Q[q.e+1])}break;case 520:{var Re={};q.level!=null&&(G[q.r]=Re,Re.level=q.level),q.hidden&&(G[q.r]=Re,Re.hidden=!0),q.hpt&&(G[q.r]=Re,Re.hpt=q.hpt,Re.hpx=s1(q.hpt))}break;case 38:case 39:case 40:case 41:n["!margins"]||Qg(n["!margins"]={}),n["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[re]]=q;break;case 161:n["!margins"]||Qg(n["!margins"]={}),n["!margins"].header=q.header,n["!margins"].footer=q.footer;break;case 574:q.RTL&&(j.Views[0].RTL=!0);break;case 146:I=q;break;case 2198:M=q;break;case 140:B=q;break;case 442:d?k.CodeName=q||k.name:j.WBProps.CodeName=q||"ThisWorkbook";break}}else oe||console.error("Missing Info for XLS Record 0x"+re.toString(16)),e.l+=de}return r.SheetNames=Ms(i).sort(function(We,ct){return Number(We)-Number(ct)}).map(function(We){return i[We].name}),t.bookSheets||(r.Sheets=a),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&W.forEach(function(We,ct){r.Sheets[r.SheetNames[ct]]["!autofilter"]=We}),r.Strings=c,r.SSF=Yn(Fr),S.enc&&(r.Encryption=S.enc),M&&(r.Themes=M),r.Metadata={},B!==void 0&&(r.Metadata.Country=B),Z.names.length>0&&(j.Names=Z.names),r.Workbook=j,r}var y2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function fFe(e,t,r){var a=jr.find(e,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var n=rV(a,ZD,y2.DSI);for(var i in n)t[i]=n[i]}catch(d){if(r.WTF)throw d}var o=jr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=rV(o,eF,y2.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(d){if(r.WTF)throw d}t.HeadingPairs&&t.TitlesOfParts&&(Une(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function hFe(e,t){var r=[],a=[],n=[],i=0,o,l=I$(ZD,"n"),c=I$(eF,"n");if(e.Props)for(o=Ms(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?a:n).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=Ms(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?a:n).push([o[i],e.Custprops[o[i]]]);var d=[];for(i=0;i<n.length;++i)qne.indexOf(n[i][0])>-1||Mne.indexOf(n[i][0])>-1||n[i][1]!=null&&d.push(n[i]);a.length&&jr.utils.cfb_add(t,"/SummaryInformation",aV(a,y2.SI,c,eF)),(r.length||d.length)&&jr.utils.cfb_add(t,"/DocumentSummaryInformation",aV(r,y2.DSI,l,ZD,d.length?d:null,y2.UDI))}function Qse(e,t){t||(t={}),ML(t),iL(),t.codepage&&sL(t.codepage);var r,a;if(e.FullPaths){if(jr.find(e,"/encryption"))throw new Error("File is password-protected");r=jr.find(e,"!CompObj"),a=jr.find(e,"/Workbook")||jr.find(e,"/Book")}else{switch(t.type){case"base64":e=dd(vd(e));break;case"binary":e=dd(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Oo(e,0),a={content:e}}var n,i;if(r&&lFe(r),t.bookProps&&!t.bookSheets)n={};else{var o=fa?"buffer":"array";if(a&&a.content)n=uFe(a.content,t);else if((i=jr.find(e,"PerfectOffice_MAIN"))&&i.content)n=Hg.to_workbook(i.content,(t.type=o,t));else if((i=jr.find(e,"NativeContent_MAIN"))&&i.content)n=Hg.to_workbook(i.content,(t.type=o,t));else throw(i=jr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&jr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(n.vbaraw=jBe(e))}var l={};return e.FullPaths&&fFe(e,l,t),n.Props=n.Custprops=l,t.bookFiles&&(n.cfb=e),n}function AFe(e,t){var r=t||{},a=jr.utils.cfb_new({root:"R"}),n="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":n="/Workbook",r.biff=8;break;case"biff5":n="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return jr.utils.cfb_add(a,n,zse(e,r)),r.biff==8&&(e.Props||e.Custprops)&&hFe(e,a),r.biff==8&&e.vbaraw&&kBe(a,jr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),a}var fN={0:{f:L6e},1:{f:G6e},2:{f:uOe},3:{f:eOe},4:{f:X6e},5:{f:lOe},6:{f:pOe},7:{f:nOe},8:{f:NOe},9:{f:wOe},10:{f:bOe},11:{f:yOe},12:{f:K6e},13:{f:hOe},14:{f:rOe},15:{f:J6e},16:{f:Dse},17:{f:xOe},18:{f:iOe},19:{f:bL},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:xDe},40:{},42:{},43:{f:pTe},44:{f:ATe},45:{f:vTe},46:{f:yTe},47:{f:bTe},48:{},49:{f:HSe},50:{},51:{f:tBe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:nse},62:{f:mOe},63:{f:dBe},64:{f:MOe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Sl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:FOe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:$6e},148:{f:H6e,p:16},151:{f:_Oe},152:{},153:{f:mDe},154:{},155:{},156:{f:hDe},157:{},158:{},159:{T:1,f:B3e},160:{T:-1},161:{T:1,f:Ix},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:EOe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:ZTe},336:{T:-1},337:{f:nBe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:JD},357:{},358:{},359:{},360:{T:1},361:{},362:{f:ase},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:TOe},427:{f:BOe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:OOe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:z6e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:kOe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:JD},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:yBe},633:{T:1},634:{T:-1},635:{T:1,f:vBe},636:{T:-1},637:{f:VSe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:rDe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:UOe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},iF={6:{f:VB},10:{f:om},12:{f:wi},13:{f:wi},14:{f:Js},15:{f:Js},16:{f:pl},17:{f:Js},18:{f:Js},19:{f:wi},20:{f:cV},21:{f:cV},23:{f:ase},24:{f:uV},25:{f:Js},26:{},27:{},28:{f:U4e},29:{},34:{f:Js},35:{f:dV},38:{f:pl},39:{f:pl},40:{f:pl},41:{f:pl},42:{f:Js},43:{f:Js},47:{f:J3e},49:{f:h4e},51:{f:wi},60:{},61:{f:l4e},64:{f:Js},65:{f:f4e},66:{f:wi},77:{},80:{},81:{},82:{},85:{f:wi},89:{},90:{},91:{},92:{f:Y_e},93:{f:z4e},94:{},95:{f:Js},96:{},97:{},99:{f:Js},125:{f:nse},128:{f:S4e},129:{f:Z_e},130:{f:wi},131:{f:Js},132:{f:Js},133:{f:e4e},134:{},140:{f:Y4e},141:{f:wi},144:{},146:{f:e3e},151:{},152:{},153:{},154:{},155:{},156:{f:wi},157:{},158:{},160:{f:o3e},161:{f:a3e},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:E4e},190:{f:C4e},193:{f:om},197:{},198:{},199:{},200:{},201:{},202:{f:Js},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:wi},220:{},221:{f:Js},222:{},224:{f:k4e},225:{f:X_e},226:{f:om},227:{},229:{f:H4e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:r4e},253:{f:m4e},255:{f:n4e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Kne},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Js},353:{f:om},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:O4e},431:{f:Js},432:{},433:{},434:{},437:{},438:{f:G4e},439:{f:Js},440:{f:q4e},441:{},442:{f:aE},443:{},444:{f:wi},445:{},446:{},448:{f:om},449:{f:o4e,r:2},450:{f:om},512:{f:iV},513:{f:i3e},515:{f:B4e},516:{f:g4e},517:{f:lV},519:{f:l3e},520:{f:s4e},523:{},545:{f:fV},549:{f:sV},566:{},574:{f:d4e},638:{f:N4e},659:{},1048:{},1054:{f:v4e},1084:{},1212:{f:R4e},2048:{f:W4e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:oj},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:om},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:t3e,r:12},2173:{f:YTe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Js,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:P4e,r:12},2197:{},2198:{f:VTe,r:12},2199:{},2200:{},2201:{},2202:{f:L4e,r:12},2203:{f:om},2204:{},2205:{},2206:{},2207:{},2211:{f:i4e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:wi},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:n3e},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Z4e},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:iV},1:{},2:{f:h3e},3:{f:u3e},4:{f:d3e},5:{f:lV},7:{f:m3e},8:{},9:{f:oj},11:{},22:{f:wi},30:{f:y4e},31:{},32:{},33:{f:fV},36:{},37:{f:sV},50:{f:p3e},62:{},52:{},67:{},68:{f:wi},69:{},86:{},126:{},127:{f:c3e},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:g3e},223:{},234:{},354:{},421:{},518:{f:VB},521:{f:oj},536:{f:uV},547:{f:dV},561:{},579:{},1030:{f:VB},1033:{f:oj},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Xt(e,t,r,a){var n=t;if(!isNaN(n)){var i=a||(r||[]).length||0,o=e.next(4);o.write_shift(2,n),o.write_shift(2,i),i>0&&gL(r)&&e.push(r)}}function mFe(e,t,r,a){var n=(r||[]).length||0;if(n<=8224)return Xt(e,t,r,n);var i=t;if(!isNaN(i)){for(var o=r.parts||[],l=0,c=0,d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;var u=e.next(4);for(u.write_shift(2,i),u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d;c<n;){for(u=e.next(4),u.write_shift(2,60),d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d}}}function oE(e,t,r){return e||(e=St(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function pFe(e,t,r,a){var n=St(9);return oE(n,e,t),Wne(r,a||"b",n),n}function gFe(e,t,r){var a=St(8+2*r.length);return oE(a,e,t),a.write_shift(1,r.length),a.write_shift(r.length,r,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function xFe(e,t,r,a){if(t.v!=null)switch(t.t){case"d":case"n":var n=t.t=="d"?Qi(Xn(t.v)):t.v;n==(n|0)&&n>=0&&n<65536?Xt(e,2,A3e(r,a,n)):Xt(e,3,f3e(r,a,n));return;case"b":case"e":Xt(e,5,pFe(r,a,t.v,t.t));return;case"s":case"str":Xt(e,4,gFe(r,a,(t.v||"").slice(0,255)));return}Xt(e,1,oE(null,r,a))}function vFe(e,t,r,a){var n=Array.isArray(t),i=Ma(t["!ref"]||"A1"),o,l="",c=[];if(i.e.c>255||i.e.r>16383){if(a.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=Zr(i)}for(var d=i.s.r;d<=i.e.r;++d){l=li(d);for(var u=i.s.c;u<=i.e.c;++u){d===i.s.r&&(c[u]=As(u)),o=c[u]+l;var f=n?(t[d]||[])[u]:t[o];f&&xFe(e,f,d,u)}}}function bFe(e,t){for(var r=t||{},a=kc(),n=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(n=i);if(n==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Xt(a,r.biff==4?1033:r.biff==3?521:9,kL(e,16,r)),vFe(a,e.Sheets[e.SheetNames[n]],n,r),Xt(a,10),a.end()}function yFe(e,t,r){Xt(e,49,A4e({sz:12,name:"Arial"},r))}function wFe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var n=a[0];n<=a[1];++n)t[n]!=null&&Xt(e,1054,b4e(n,t[n],r))})}function NFe(e,t){var r=St(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Xt(e,2151,r),r=St(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),ese(Ma(t["!ref"]||"A1"),r),r.write_shift(4,4),Xt(e,2152,r)}function EFe(e,t){for(var r=0;r<16;++r)Xt(e,224,oV({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(a){Xt(e,224,oV(a,0,t))})}function CFe(e,t){for(var r=0;r<t["!links"].length;++r){var a=t["!links"][r];Xt(e,440,K4e(a)),a[1].Tooltip&&Xt(e,2048,X4e(a))}delete t["!links"]}function jFe(e,t){if(t){var r=0;t.forEach(function(a,n){++r<=256&&a&&Xt(e,125,r3e(v4(n,a),n))})}}function kFe(e,t,r,a,n){var i=16+jp(n.cellXfs,t,n);if(t.v==null&&!t.bf){Xt(e,513,lx(r,a,i));return}if(t.bf)Xt(e,6,ZIe(t,r,a,n,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?Qi(Xn(t.v)):t.v;Xt(e,515,I4e(r,a,o,i));break;case"b":case"e":Xt(e,517,T4e(r,a,t.v,i,n,t.t));break;case"s":case"str":if(n.bookSST){var l=FL(n.Strings,t.v,n.revStrings);Xt(e,253,p4e(r,a,l,i))}else Xt(e,516,x4e(r,a,(t.v||"").slice(0,255),i,n));break;default:Xt(e,513,lx(r,a,i))}}function SFe(e,t,r){var a=kc(),n=r.SheetNames[e],i=r.Sheets[n]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),d=t.biff==8,u,f="",A=[],m=Ma(i["!ref"]||"A1"),g=d?65536:16384;if(m.e.c>255||m.e.r>=g){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,g-1)}Xt(a,2057,kL(r,16,t)),Xt(a,13,nu(1)),Xt(a,12,nu(100)),Xt(a,15,Hl(!0)),Xt(a,17,Hl(!1)),Xt(a,16,ix(.001)),Xt(a,95,Hl(!0)),Xt(a,42,Hl(!1)),Xt(a,43,Hl(!1)),Xt(a,130,nu(1)),Xt(a,128,_4e()),Xt(a,131,Hl(!1)),Xt(a,132,Hl(!1)),d&&jFe(a,i["!cols"]),Xt(a,512,w4e(m,t)),d&&(i["!links"]=[]);for(var x=m.s.r;x<=m.e.r;++x){f=li(x);for(var v=m.s.c;v<=m.e.c;++v){x===m.s.r&&(A[v]=As(v)),u=A[v]+f;var y=c?(i[x]||[])[v]:i[u];y&&(kFe(a,y,x,v,t),d&&y.l&&i["!links"].push([u,y.l]))}}var N=l.CodeName||l.name||n;return d&&Xt(a,574,u4e((o.Views||[])[0])),d&&(i["!merges"]||[]).length&&Xt(a,229,Q4e(i["!merges"])),d&&CFe(a,i),Xt(a,442,Xne(N)),d&&NFe(a,i),Xt(a,10),a.end()}function _Fe(e,t,r){var a=kc(),n=(e||{}).Workbook||{},i=n.Sheets||[],o=n.WBProps||{},l=r.biff==8,c=r.biff==5;if(Xt(a,2057,kL(e,5,r)),r.bookType=="xla"&&Xt(a,135),Xt(a,225,l?nu(1200):null),Xt(a,193,T_e(2)),c&&Xt(a,191),c&&Xt(a,192),Xt(a,226),Xt(a,92,J_e("SheetJS",r)),Xt(a,66,nu(l?1200:1252)),l&&Xt(a,353,nu(0)),l&&Xt(a,448),Xt(a,317,s3e(e.SheetNames.length)),l&&e.vbaraw&&Xt(a,211),l&&e.vbaraw){var d=o.CodeName||"ThisWorkbook";Xt(a,442,Xne(d))}Xt(a,156,nu(17)),Xt(a,25,Hl(!1)),Xt(a,18,Hl(!1)),Xt(a,19,nu(0)),l&&Xt(a,431,Hl(!1)),l&&Xt(a,444,nu(0)),Xt(a,61,c4e()),Xt(a,64,Hl(!1)),Xt(a,141,nu(0)),Xt(a,34,Hl(oDe(e)=="true")),Xt(a,14,Hl(!0)),l&&Xt(a,439,Hl(!1)),Xt(a,218,nu(0)),yFe(a,e,r),wFe(a,e.SSF,r),EFe(a,r),l&&Xt(a,352,Hl(!1));var u=a.end(),f=kc();l&&Xt(f,140,J4e()),l&&r.Strings&&mFe(f,252,a4e(r.Strings)),Xt(f,10);var A=f.end(),m=kc(),g=0,x=0;for(x=0;x<e.SheetNames.length;++x)g+=(l?12:11)+(l?2:1)*e.SheetNames[x].length;var v=u.length+g+A.length;for(x=0;x<e.SheetNames.length;++x){var y=i[x]||{};Xt(m,133,t4e({pos:v,hs:y.Hidden||0,dt:0,name:e.SheetNames[x]},r)),v+=t[x].length}var N=m.end();if(g!=N.length)throw new Error("BS8 "+g+" != "+N.length);var E=[];return u.length&&E.push(u),N.length&&E.push(N),A.length&&E.push(A),co(E)}function TFe(e,t){var r=t||{},a=[];e&&!e.SSF&&(e.SSF=Yn(Fr)),e&&e.SSF&&(V1(),f4(e.SSF),r.revssf=A4(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,UL(r),r.cellXfs=[],jp(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var n=0;n<e.SheetNames.length;++n)a[a.length]=SFe(n,r,e);return a.unshift(_Fe(e,a,r)),co(a)}function zse(e,t){for(var r=0;r<=e.SheetNames.length;++r){var a=e.Sheets[e.SheetNames[r]];if(!(!a||!a["!ref"])){var n=_c(a["!ref"]);n.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return TFe(e,t);case 4:case 3:case 2:return bFe(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function wV(e,t){var r=t||{},a=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var n=e.match(/<table/i);if(!n)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=n.index,l=i&&i.index||e.length,c=ASe(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,u=0,f=0,A=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(o=0;o<c.length;++o){var x=c[o].trim(),v=x.slice(0,3).toLowerCase();if(v=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}u=0;continue}if(!(v!="<td"&&v!="<th")){var y=x.split(/<\/t[dh]>/i);for(l=0;l<y.length;++l){var N=y[l].trim();if(N.match(/<t[dh]/i)){for(var E=N,B=0;E.charAt(0)=="<"&&(B=E.indexOf(">"))>-1;)E=E.slice(B+1);for(var _=0;_<g.length;++_){var I=g[_];I.s.c==u&&I.s.r<d&&d<=I.e.r&&(u=I.e.c+1,_=-1)}var j=Vr(N.slice(0,N.indexOf(">")));A=j.colspan?+j.colspan:1,((f=+j.rowspan)>1||A>1)&&g.push({s:{r:d,c:u},e:{r:d+(f||1)-1,c:u+A-1}});var k=j.t||j["data-t"]||"";if(!E.length){u+=A;continue}if(E=hne(E),m.s.r>d&&(m.s.r=d),m.e.r<d&&(m.e.r=d),m.s.c>u&&(m.s.c=u),m.e.c<u&&(m.e.c=u),!E.length){u+=A;continue}var T={t:"s",v:E};r.raw||!E.trim().length||k=="s"||(E==="TRUE"?T={t:"b",v:!0}:E==="FALSE"?T={t:"b",v:!1}:isNaN(cf(E))?isNaN(a1(E).getDate())||(T={t:"d",v:Xn(E)},r.cellDates||(T={t:"n",v:Qi(T.v)}),T.z=r.dateNF||Fr[14]):T={t:"n",v:cf(E)}),r.dense?(a[d]||(a[d]=[]),a[d][u]=T):a[Hr({r:d,c:u})]=T,u+=A}}}}return a["!ref"]=Zr(m),g.length&&(a["!merges"]=g),a}function BFe(e,t,r,a){for(var n=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,d=0;d<n.length;++d)if(!(n[d].s.r>r||n[d].s.c>o)&&!(n[d].e.r<r||n[d].e.c<o)){if(n[d].s.r<r||n[d].s.c<o){l=-1;break}l=n[d].e.r-n[d].s.r+1,c=n[d].e.c-n[d].s.c+1;break}if(!(l<0)){var u=Hr({r,c:o}),f=a.dense?(e[r]||[])[o]:e[u],A=f&&f.v!=null&&(f.h||AL(f.w||(aA(f),f.w)||""))||"",m={};l>1&&(m.rowspan=l),c>1&&(m.colspan=c),a.editable?A='<span contenteditable="true">'+A+"</span>":f&&(m["data-t"]=f&&f.t||"z",f.v!=null&&(m["data-v"]=f.v),f.z!=null&&(m["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(A='<a href="'+f.l.Target+'">'+A+"</a>")),m.id=(a.id||"sjs")+"-"+u,i.push(Wt("td",A,m))}}var g="<tr>";return g+i.join("")+"</tr>"}var IFe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',OFe="</body></html>";function DFe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Cp(wV(r[0],t),t);var a=zL();return r.forEach(function(n,i){$L(a,wV(n,t),"Sheet"+(i+1))}),a}function FFe(e,t,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function $se(e,t){var r=t||{},a=r.header!=null?r.header:IFe,n=r.footer!=null?r.footer:OFe,i=[a],o=_c(e["!ref"]);r.dense=Array.isArray(e),i.push(FFe(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(BFe(e,o,l,r));return i.push("</table>"+n),i.join("")}function Vse(e,t,r){var a=r||{},n=0,i=0;if(a.origin!=null)if(typeof a.origin=="number")n=a.origin;else{var o=typeof a.origin=="string"?ms(a.origin):a.origin;n=o.r,i=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(a.sheetRows||1e7,l.length),d={s:{r:0,c:0},e:{r:n,c:i}};if(e["!ref"]){var u=_c(e["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),n==-1&&(d.e.r=n=u.e.r+1)}var f=[],A=0,m=e["!rows"]||(e["!rows"]=[]),g=0,x=0,v=0,y=0,N=0,E=0;for(e["!cols"]||(e["!cols"]=[]);g<l.length&&x<c;++g){var B=l[g];if(NV(B)){if(a.display)continue;m[x]={hidden:!0}}var _=B.children;for(v=y=0;v<_.length;++v){var I=_[v];if(!(a.display&&NV(I))){var j=I.hasAttribute("data-v")?I.getAttribute("data-v"):I.hasAttribute("v")?I.getAttribute("v"):hne(I.innerHTML),k=I.getAttribute("data-z")||I.getAttribute("z");for(A=0;A<f.length;++A){var T=f[A];T.s.c==y+i&&T.s.r<x+n&&x+n<=T.e.r&&(y=T.e.c+1-i,A=-1)}E=+I.getAttribute("colspan")||1,((N=+I.getAttribute("rowspan")||1)>1||E>1)&&f.push({s:{r:x+n,c:y+i},e:{r:x+n+(N||1)-1,c:y+i+(E||1)-1}});var L={t:"s",v:j},F=I.getAttribute("data-t")||I.getAttribute("t")||"";j!=null&&(j.length==0?L.t=F||"z":a.raw||j.trim().length==0||F=="s"||(j==="TRUE"?L={t:"b",v:!0}:j==="FALSE"?L={t:"b",v:!1}:isNaN(cf(j))?isNaN(a1(j).getDate())||(L={t:"d",v:Xn(j)},a.cellDates||(L={t:"n",v:Qi(L.v)}),L.z=a.dateNF||Fr[14]):L={t:"n",v:cf(j)})),L.z===void 0&&k!=null&&(L.z=k);var S="",M=I.getElementsByTagName("A");if(M&&M.length)for(var H=0;H<M.length&&!(M[H].hasAttribute("href")&&(S=M[H].getAttribute("href"),S.charAt(0)!="#"));++H);S&&S.charAt(0)!="#"&&(L.l={Target:S}),a.dense?(e[x+n]||(e[x+n]=[]),e[x+n][y+i]=L):e[Hr({c:y+i,r:x+n})]=L,d.e.c<y+i&&(d.e.c=y+i),y+=E}}++x}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),d.e.r=Math.max(d.e.r,x-1+n),e["!ref"]=Zr(d),x>=c&&(e["!fullref"]=Zr((d.e.r=l.length-g+x-1+n,d))),e}function Gse(e,t){var r=t||{},a=r.dense?[]:{};return Vse(a,e,t)}function PFe(e,t){return Cp(Gse(e,t),t)}function NV(e){var t="",r=RFe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function RFe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function LFe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,n){return Array(parseInt(n,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Ra(t.replace(/<[^>]*>/g,""));return[r]}var EV={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function qse(e,t){var r=t||{},a=mL(e),n=[],i,o,l={name:""},c="",d=0,u,f,A={},m=[],g=r.dense?[]:{},x,v,y={value:""},N="",E=0,B=[],_=-1,I=-1,j={s:{r:1e6,c:1e7},e:{r:0,c:0}},k=0,T={},L=[],F={},S=0,M=0,H=[],K=1,Q=1,G=[],X={Names:[]},Z={},U=["",""],Y=[],P={},D="",W=0,J=!1,ce=!1,ie=0;for(iN.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=iN.exec(a);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"工作表":x[1]==="/"?(j.e.c>=j.s.c&&j.e.r>=j.s.r?g["!ref"]=Zr(j):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=j.e.r&&(g["!fullref"]=g["!ref"],j.e.r=r.sheetRows-1,g["!ref"]=Zr(j)),L.length&&(g["!merges"]=L),H.length&&(g["!rows"]=H),u.name=u.名称||u.name,typeof JSON<"u"&&JSON.stringify(u),m.push(u.name),A[u.name]=g,ce=!1):x[0].charAt(x[0].length-2)!=="/"&&(u=Vr(x[0],!1),_=I=-1,j.s.r=j.s.c=1e7,j.e.r=j.e.c=0,g=r.dense?[]:{},L=[],H=[],ce=!0);break;case"table-row-group":x[1]==="/"?--k:++k;break;case"table-row":case"行":if(x[1]==="/"){_+=K,K=1;break}if(f=Vr(x[0],!1),f.行号?_=f.行号-1:_==-1&&(_=0),K=+f["number-rows-repeated"]||1,K<10)for(ie=0;ie<K;++ie)k>0&&(H[_+ie]={level:k});I=-1;break;case"covered-table-cell":x[1]!=="/"&&++I,r.sheetStubs&&(r.dense?(g[_]||(g[_]=[]),g[_][I]={t:"z"}):g[Hr({r:_,c:I})]={t:"z"}),N="",B=[];break;case"table-cell":case"数据":if(x[0].charAt(x[0].length-2)==="/")++I,y=Vr(x[0],!1),Q=parseInt(y["number-columns-repeated"]||"1",10),v={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(v.f=vV(Ra(y.formula))),(y.数据类型||y["value-type"])=="string"&&(v.t="s",v.v=Ra(y["string-value"]||""),r.dense?(g[_]||(g[_]=[]),g[_][I]=v):g[Hr({r:_,c:I})]=v),I+=Q-1;else if(x[1]!=="/"){++I,N="",E=0,B=[],Q=1;var re=K?_+K-1:_;if(I>j.e.c&&(j.e.c=I),I<j.s.c&&(j.s.c=I),_<j.s.r&&(j.s.r=_),re>j.e.r&&(j.e.r=re),y=Vr(x[0],!1),Y=[],P={},v={t:y.数据类型||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Ra(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(S=parseInt(y["number-matrix-rows-spanned"],10)||0,M=parseInt(y["number-matrix-columns-spanned"],10)||0,F={s:{r:_,c:I},e:{r:_+S-1,c:I+M-1}},v.F=Zr(F),G.push([F,v.F])),y.formula)v.f=vV(y.formula);else for(ie=0;ie<G.length;++ie)_>=G[ie][0].s.r&&_<=G[ie][0].e.r&&I>=G[ie][0].s.c&&I<=G[ie][0].e.c&&(v.F=G[ie][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(S=parseInt(y["number-rows-spanned"],10)||0,M=parseInt(y["number-columns-spanned"],10)||0,F={s:{r:_,c:I},e:{r:_+S-1,c:I+M-1}},L.push(F)),y["number-columns-repeated"]&&(Q=parseInt(y["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Kn(y["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(y.value);break;case"percentage":v.t="n",v.v=parseFloat(y.value);break;case"currency":v.t="n",v.v=parseFloat(y.value);break;case"date":v.t="d",v.v=Xn(y["date-value"]),r.cellDates||(v.t="n",v.v=Qi(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=uSe(y["time-value"])/86400,r.cellDates&&(v.t="d",v.v=m4(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(y.数据数值);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",y["string-value"]!=null&&(N=Ra(y["string-value"]),B=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(J=!1,v.t==="s"&&(v.v=N||"",B.length&&(v.R=B),J=E==0),Z.Target&&(v.l=Z),Y.length>0&&(v.c=Y,Y=[]),N&&r.cellText!==!1&&(v.w=N),J&&(v.t="z",delete v.v),(!J||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=_))for(var de=0;de<K;++de){if(Q=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(g[_+de]||(g[_+de]=[]),g[_+de][I]=de==0?v:Yn(v);--Q>0;)g[_+de][I+Q]=Yn(v);else for(g[Hr({r:_+de,c:I})]=v;--Q>0;)g[Hr({r:_+de,c:I+Q})]=Yn(v);j.e.c<=I&&(j.e.c=I)}Q=parseInt(y["number-columns-repeated"]||"1",10),I+=Q-1,Q=0,v={},N="",B=[]}Z={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((i=n.pop())[0]!==x[3])throw"Bad state: "+i}else x[0].charAt(x[0].length-2)!=="/"&&n.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((i=n.pop())[0]!==x[3])throw"Bad state: "+i;P.t=N,B.length&&(P.R=B),P.a=D,Y.push(P)}else x[0].charAt(x[0].length-2)!=="/"&&n.push([x[3],!1]);D="",W=0,N="",E=0,B=[];break;case"creator":x[1]==="/"?D=a.slice(W,x.index):W=x.index+x[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((i=n.pop())[0]!==x[3])throw"Bad state: "+i}else x[0].charAt(x[0].length-2)!=="/"&&n.push([x[3],!1]);N="",E=0,B=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(T[l.name]=c,(i=n.pop())[0]!==x[3])throw"Bad state: "+i}else x[0].charAt(x[0].length-2)!=="/"&&(c="",l=Vr(x[0],!1),n.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(n[n.length-1][0]){case"time-style":case"date-style":o=Vr(x[0],!1),c+=EV[x[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(n[n.length-1][0]){case"time-style":case"date-style":o=Vr(x[0],!1),c+=EV[x[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(n[n.length-1][0]){case"number-style":case"date-style":case"time-style":c+=a.slice(d,x.index);break}else d=x.index+x[0].length;break;case"named-range":o=Vr(x[0],!1),U=GB(o["cell-range-address"]);var oe={Name:o.name,Ref:U[0]+"!"+U[1]};ce&&(oe.Sheet=m.length),X.Names.push(oe);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(n[n.length-1][0])>-1)break;if(x[1]==="/"&&(!y||!y["string-value"])){var be=LFe(a.slice(E,x.index));N=(N.length>0?N+`
`:"")+be[0]}else Vr(x[0],!1),E=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{U=GB(Vr(x[0])["target-range-address"]),A[U[0]]["!autofilter"]={ref:U[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(Z=Vr(x[0],!1),!Z.href)break;Z.Target=Ra(Z.href),delete Z.href,Z.Target.charAt(0)=="#"&&Z.Target.indexOf(".")>-1?(U=GB(Z.Target.slice(1)),Z.Target="#"+U[0]+"!"+U[1]):Z.Target.match(/^\.\.[\\\/]/)&&(Z.Target=Z.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(x)}}var q={Sheets:A,SheetNames:m,Workbook:X};return r.bookSheets&&delete q.Sheets,q}function CV(e,t){t=t||{},ru(e,"META-INF/manifest.xml")&&u_e(yi(e,"META-INF/manifest.xml"),t);var r=ud(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var a=qse(Sn(r),t);return ru(e,"meta.xml")&&(a.Props=Rne(yi(e,"meta.xml"))),a}function jV(e,t){return qse(e,t)}var MFe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+sN({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return di+t}}(),kV=function(){var e=function(i){return yn(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,a=function(i,o,l){var c=[];c.push('      <table:table table:name="'+yn(o.SheetNames[l])+`" table:style-name="ta1">
`);var d=0,u=0,f=_c(i["!ref"]||"A1"),A=i["!merges"]||[],m=0,g=Array.isArray(i);if(i["!cols"])for(u=0;u<=f.e.c;++u)c.push("        <table:table-column"+(i["!cols"][u]?' table:style-name="co'+i["!cols"][u].ods+'"':"")+`></table:table-column>
`);var x="",v=i["!rows"]||[];for(d=0;d<f.s.r;++d)x=v[d]?' table:style-name="ro'+v[d].ods+'"':"",c.push("        <table:table-row"+x+`></table:table-row>
`);for(;d<=f.e.r;++d){for(x=v[d]?' table:style-name="ro'+v[d].ods+'"':"",c.push("        <table:table-row"+x+`>
`),u=0;u<f.s.c;++u)c.push(t);for(;u<=f.e.c;++u){var y=!1,N={},E="";for(m=0;m!=A.length;++m)if(!(A[m].s.c>u)&&!(A[m].s.r>d)&&!(A[m].e.c<u)&&!(A[m].e.r<d)){(A[m].s.c!=u||A[m].s.r!=d)&&(y=!0),N["table:number-columns-spanned"]=A[m].e.c-A[m].s.c+1,N["table:number-rows-spanned"]=A[m].e.r-A[m].s.r+1;break}if(y){c.push(r);continue}var B=Hr({r:d,c:u}),_=g?(i[d]||[])[u]:i[B];if(_&&_.f&&(N["table:formula"]=yn(s6e(_.f)),_.F&&_.F.slice(0,B.length)==B)){var I=_c(_.F);N["table:number-matrix-columns-spanned"]=I.e.c-I.s.c+1,N["table:number-matrix-rows-spanned"]=I.e.r-I.s.r+1}if(!_){c.push(t);continue}switch(_.t){case"b":E=_.v?"TRUE":"FALSE",N["office:value-type"]="boolean",N["office:boolean-value"]=_.v?"true":"false";break;case"n":E=_.w||String(_.v||0),N["office:value-type"]="float",N["office:value"]=_.v||0;break;case"s":case"str":E=_.v==null?"":_.v,N["office:value-type"]="string";break;case"d":E=_.w||Xn(_.v).toISOString(),N["office:value-type"]="date",N["office:date-value"]=Xn(_.v).toISOString(),N["table:style-name"]="ce1";break;default:c.push(t);continue}var j=e(E);if(_.l&&_.l.Target){var k=_.l.Target;k=k.charAt(0)=="#"?"#"+i6e(k.slice(1)):k,k.charAt(0)!="#"&&!k.match(/^\w+:/)&&(k="../"+k),j=Wt("text:a",j,{"xlink:href":k.replace(/&/g,"&amp;")})}c.push("          "+Wt("table:table-cell",Wt("text:p",j,{}),N)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},n=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var u=0;u<d["!cols"].length;++u)if(d["!cols"][u]){var f=d["!cols"][u];if(f.width==null&&f.wpx==null&&f.wch==null)continue;cp(f),f.ods=l;var A=d["!cols"][u].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+A+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var u=0;u<d["!rows"].length;++u)if(d["!rows"][u]){d["!rows"][u].ods=c;var f=d["!rows"][u].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var c=[di],d=sN({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=sN({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+d+u+`>
`),c.push(Pne().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+d+`>
`),n(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(a(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function Kse(e,t){if(t.bookType=="fods")return kV(e,t);var r=uL(),a="",n=[],i=[];return a="mimetype",na(r,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",na(r,a,kV(e,t)),n.push([a,"text/xml"]),i.push([a,"ContentFile"]),a="styles.xml",na(r,a,MFe(e,t)),n.push([a,"text/xml"]),i.push([a,"StylesFile"]),a="meta.xml",na(r,a,di+Pne()),n.push([a,"text/xml"]),i.push([a,"MetadataFile"]),a="manifest.rdf",na(r,a,A_e(i)),n.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",na(r,a,f_e(n)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function cx(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function oF(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Sn(Ep(e))}function UFe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):dd(vh(e))}function HFe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var a=0;a<t.length;++a)if(e[r+a]!=t[a])continue e;return!0}return!1}function up(e){var t=e.reduce(function(n,i){return n+i.length},0),r=new Uint8Array(t),a=0;return e.forEach(function(n){r.set(n,a),a+=n.length}),r}function SV(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function QFe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,a=e[t+14]&1,n=t+13;n>=t;--n)a=a*256+e[n];return(e[t+15]&128?-a:a)*Math.pow(10,r-6176)}function zFe(e,t,r){var a=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,n=r/Math.pow(10,a-6176);e[t+15]|=a>>7,e[t+14]|=(a&127)<<1;for(var i=0;n>=1;++i,n/=256)e[t+i]=n&255;e[t+15]|=r>=0?0:128}function hN(e,t){var r=t?t[0]:0,a=e[r]&127;e:if(e[r++]>=128&&(a|=(e[r]&127)<<7,e[r++]<128||(a|=(e[r]&127)<<14,e[r++]<128)||(a|=(e[r]&127)<<21,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),a}function gn(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Ls(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Ka(e){for(var t=[],r=[0];r[0]<e.length;){var a=r[0],n=hN(e,r),i=n&7;n=Math.floor(n/8);var o=0,l;if(n==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=hN(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(n," at offset ").concat(a))}var d={data:l,type:i};t[n]==null?t[n]=[d]:t[n].push(d)}return t}function ko(e){var t=[];return e.forEach(function(r,a){r.forEach(function(n){n.data&&(t.push(gn(a*8+n.type)),n.type==2&&t.push(gn(n.data.length)),t.push(n.data))})}),up(t)}function LL(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function Zd(e){for(var t,r=[],a=[0];a[0]<e.length;){var n=hN(e,a),i=Ka(e.slice(a[0],a[0]+n));a[0]+=n;var o={id:Ls(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=Ka(l.data),d=Ls(c[3][0].data);o.messages.push({meta:c,data:e.slice(a[0],a[0]+d)}),a[0]+=d}),(t=i[3])!=null&&t[0]&&(o.merge=Ls(i[3][0].data)>>>0>0),r.push(o)}return r}function xv(e){var t=[];return e.forEach(function(r){var a=[];a[1]=[{data:gn(r.id),type:0}],a[2]=[],r.merge!=null&&(a[3]=[{data:gn(+!!r.merge),type:0}]);var n=[];r.messages.forEach(function(o){n.push(o.data),o.meta[3]=[{type:0,data:gn(o.data.length)}],a[2].push({data:ko(o.meta),type:2})});var i=ko(a);t.push(gn(i.length)),t.push(i),n.forEach(function(o){return t.push(o)})}),up(t)}function $Fe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],a=hN(t,r),n=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}n.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,d=0;if(i==1?(d=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),n=[up(n)],c==0)throw new Error("Invalid offset 0");if(c>n[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(n.push(n[0].slice(-c)),d-=c;d>=n[n.length-1].length;)n.push(n[n.length-1]),d-=n[n.length-1].length;n.push(n[0].slice(-c,-c+d))}}var u=up(n);if(u.length!=a)throw new Error("Unexpected length: ".concat(u.length," != ").concat(a));return u}function eu(e){for(var t=[],r=0;r<e.length;){var a=e[r++],n=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push($Fe(a,e.slice(r,r+n))),r+=n}if(r!==e.length)throw new Error("data is not a valid framed stream!");return up(t)}function vv(e){for(var t=[],r=0;r<e.length;){var a=Math.min(e.length-r,268435455),n=new Uint8Array(4);t.push(n);var i=gn(a),o=i.length;t.push(i),a<=60?(o++,t.push(new Uint8Array([a-1<<2]))):a<=256?(o+=2,t.push(new Uint8Array([240,a-1&255]))):a<=65536?(o+=3,t.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(o+=4,t.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(o+=5,t.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),t.push(e.slice(r,r+a)),o+=a,n[0]=0,n[1]=o&255,n[2]=o>>8&255,n[3]=o>>16&255,r+=a}return up(t)}function VFe(e,t,r,a){var n=cx(e),i=n.getUint32(4,!0),o=(a>1?12:8)+SV(i&(a>1?3470:398))*4,l=-1,c=-1,d=NaN,u=new Date(2001,0,1);i&512&&(l=n.getUint32(o,!0),o+=4),o+=SV(i&(a>1?12288:4096))*4,i&16&&(c=n.getUint32(o,!0),o+=4),i&32&&(d=n.getFloat64(o,!0),o+=8),i&64&&(u.setTime(u.getTime()+n.getFloat64(o,!0)*1e3),o+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:d};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:d>0};break;case 7:f={t:"n",v:d/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(d))f={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function GFe(e,t,r){var a=cx(e),n=a.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,d=NaN,u=new Date(2001,0,1);n&1&&(c=QFe(e,i),i+=16),n&2&&(d=a.getFloat64(i,!0),i+=8),n&4&&(u.setTime(u.getTime()+a.getFloat64(i,!0)*1e3),i+=8),n&8&&(l=a.getUint32(i,!0),i+=4),n&16&&(o=a.getUint32(i,!0),i+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:d>0};break;case 7:f={t:"n",v:d/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(n&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(n&31," : ").concat(e.slice(0,4)))}return f}function KB(e,t){var r=new Uint8Array(32),a=cx(r),n=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,zFe(r,n,e.v),i|=1,n+=16;break;case"b":r[1]=6,a.setFloat64(n,e.v?1:0,!0),i|=2,n+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,a.setUint32(n,t.indexOf(e.v),!0),i|=8,n+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(8,i,!0),r.slice(0,n)}function WB(e,t){var r=new Uint8Array(32),a=cx(r),n=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,a.setFloat64(n,e.v,!0),i|=32,n+=8;break;case"b":r[2]=6,a.setFloat64(n,e.v?1:0,!0),i|=32,n+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,a.setUint32(n,t.indexOf(e.v),!0),i|=16,n+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(4,i,!0),r.slice(0,n)}function qFe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return VFe(e,t,r,e[0]);case 5:return GFe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function ll(e){var t=Ka(e);return hN(t[1][0].data)}function _V(e,t){var r=Ka(t.data),a=Ls(r[1][0].data),n=r[3],i=[];return(n||[]).forEach(function(o){var l=Ka(o.data),c=Ls(l[1][0].data)>>>0;switch(a){case 1:i[c]=oF(l[3][0].data);break;case 8:{var d=e[ll(l[9][0].data)][0],u=Ka(d.data),f=e[ll(u[1][0].data)][0],A=Ls(f.meta[1][0].data);if(A!=2001)throw new Error("2000 unexpected reference to ".concat(A));var m=Ka(f.data);i[c]=m[3].map(function(g){return oF(g.data)}).join("")}break}}),i}function KFe(e,t){var r,a,n,i,o,l,c,d,u,f,A,m,g,x,v=Ka(e),y=Ls(v[1][0].data)>>>0,N=Ls(v[2][0].data)>>>0,E=((a=(r=v[8])==null?void 0:r[0])==null?void 0:a.data)&&Ls(v[8][0].data)>0||!1,B,_;if((i=(n=v[7])==null?void 0:n[0])!=null&&i.data&&t!=0)B=(l=(o=v[7])==null?void 0:o[0])==null?void 0:l.data,_=(d=(c=v[6])==null?void 0:c[0])==null?void 0:d.data;else if((f=(u=v[4])==null?void 0:u[0])!=null&&f.data&&t!=1)B=(m=(A=v[4])==null?void 0:A[0])==null?void 0:m.data,_=(x=(g=v[3])==null?void 0:g[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var I=E?4:1,j=cx(B),k=[],T=0;T<B.length/2;++T){var L=j.getUint16(T*2,!0);L<65535&&k.push([T,L])}if(k.length!=N)throw"Expected ".concat(N," cells, found ").concat(k.length);var F=[];for(T=0;T<k.length-1;++T)F[k[T][0]]=_.subarray(k[T][1]*I,k[T+1][1]*I);return k.length>=1&&(F[k[k.length-1][0]]=_.subarray(k[k.length-1][1]*I)),{R:y,cells:F}}function WFe(e,t){var r,a=Ka(t.data),n=(r=a==null?void 0:a[7])!=null&&r[0]?Ls(a[7][0].data)>>>0>0?1:0:-1,i=LL(a[5],function(o){return KFe(o,n)});return{nrows:Ls(a[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,d){if(o[l.R][d])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(d));o[l.R][d]=c}),o},[])}}function XFe(e,t,r){var a,n=Ka(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(Ls(n[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(n[6][0].data));if(i.e.c=(Ls(n[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(n[7][0].data));r["!ref"]=Zr(i);var o=Ka(n[4][0].data),l=_V(e,e[ll(o[4][0].data)][0]),c=(a=o[17])!=null&&a[0]?_V(e,e[ll(o[17][0].data)][0]):[],d=Ka(o[3][0].data),u=0;d[1].forEach(function(f){var A=Ka(f.data),m=e[ll(A[2][0].data)][0],g=Ls(m.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var x=WFe(e,m);x.data.forEach(function(v,y){v.forEach(function(N,E){var B=Hr({r:u+y,c:E}),_=qFe(N,l,c);_&&(r[B]=_)})}),u+=x.nrows})}function YFe(e,t){var r=Ka(t.data),a={"!ref":"A1"},n=e[ll(r[2][0].data)],i=Ls(n[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return XFe(e,n[0],a),a}function JFe(e,t){var r,a=Ka(t.data),n={name:(r=a[1])!=null&&r[0]?oF(a[1][0].data):"",sheets:[]},i=LL(a[2],ll);return i.forEach(function(o){e[o].forEach(function(l){var c=Ls(l.meta[1][0].data);c==6e3&&n.sheets.push(YFe(e,l))})}),n}function ZFe(e,t){var r=zL(),a=Ka(t.data),n=LL(a[1],ll);if(n.forEach(function(i){e[i].forEach(function(o){var l=Ls(o.meta[1][0].data);if(l==2){var c=JFe(e,o);c.sheets.forEach(function(d,u){$L(r,d,u==0?c.name:c.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function XB(e){var t,r,a,n,i={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var d;try{d=eu(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var u;try{u=Zd(d)}catch(f){return console.log("## "+(f.message||f))}u.forEach(function(f){i[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var l=((n=(a=(r=(t=i==null?void 0:i[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:a[1])==null?void 0:n[0].data)&&Ls(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(c){i[c].forEach(function(d){var u=Ls(d.meta[1][0].data)>>>0;if(u==1)if(!l)l=d;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return ZFe(i,l)}function ePe(e,t,r){var a,n,i,o;if(!((a=e[6])!=null&&a[0])||!((n=e[7])!=null&&n[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&Ls(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,d=cx(e[7][0].data),u=0,f=[],A=cx(e[4][0].data),m=0,g=[],x=0;x<t.length;++x){if(t[x]==null){d.setUint16(x*2,65535,!0),A.setUint16(x*2,65535);continue}d.setUint16(x*2,u,!0),A.setUint16(x*2,m,!0);var v,y;switch(typeof t[x]){case"string":v=KB({t:"s",v:t[x]},r),y=WB({t:"s",v:t[x]},r);break;case"number":v=KB({t:"n",v:t[x]},r),y=WB({t:"n",v:t[x]},r);break;case"boolean":v=KB({t:"b",v:t[x]},r),y=WB({t:"b",v:t[x]},r);break;default:throw new Error("Unsupported value "+t[x])}f.push(v),u+=v.length,g.push(y),m+=y.length,++c}for(e[2][0].data=gn(c);x<e[7][0].data.length/2;++x)d.setUint16(x*2,65535,!0),A.setUint16(x*2,65535,!0);return e[6][0].data=up(f),e[3][0].data=up(g),c}function tPe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var a=_c(r["!ref"]);a.s.r=a.s.c=0;var n=!1;a.e.c>9&&(n=!0,a.e.c=9),a.e.r>49&&(n=!0,a.e.r=49),n&&console.error("The Numbers writer is currently limited to ".concat(Zr(a)));var i=X5(r,{range:a,header:1}),o=["~Sh33tJ5~"];i.forEach(function(D){return D.forEach(function(W){typeof W=="string"&&o.push(W)})});var l={},c=[],d=jr.read(t.numbers,{type:"base64"});d.FileIndex.map(function(D,W){return[D,d.FullPaths[W]]}).forEach(function(D){var W=D[0],J=D[1];if(W.type==2&&W.name.match(/\.iwa/)){var ce=W.content,ie=eu(ce),re=Zd(ie);re.forEach(function(de){c.push(de.id),l[de.id]={deps:[],location:J,type:Ls(de.messages[0].meta[1][0].data)}})}}),c.sort(function(D,W){return D-W});var u=c.filter(function(D){return D>1}).map(function(D){return[D,gn(D)]});d.FileIndex.map(function(D,W){return[D,d.FullPaths[W]]}).forEach(function(D){var W=D[0];if(D[1],!!W.name.match(/\.iwa/)){var J=Zd(eu(W.content));J.forEach(function(ce){ce.messages.forEach(function(ie){u.forEach(function(re){ce.messages.some(function(de){return Ls(de.meta[1][0].data)!=11006&&HFe(de.data,re[1])})&&l[re[0]].deps.push(ce.id)})})})}});for(var f=jr.find(d,l[1].location),A=Zd(eu(f.content)),m,g=0;g<A.length;++g){var x=A[g];x.id==1&&(m=x)}var v=ll(Ka(m.messages[0].data)[1][0].data);for(f=jr.find(d,l[v].location),A=Zd(eu(f.content)),g=0;g<A.length;++g)x=A[g],x.id==v&&(m=x);for(v=ll(Ka(m.messages[0].data)[2][0].data),f=jr.find(d,l[v].location),A=Zd(eu(f.content)),g=0;g<A.length;++g)x=A[g],x.id==v&&(m=x);for(v=ll(Ka(m.messages[0].data)[2][0].data),f=jr.find(d,l[v].location),A=Zd(eu(f.content)),g=0;g<A.length;++g)x=A[g],x.id==v&&(m=x);var y=Ka(m.messages[0].data);{y[6][0].data=gn(a.e.r+1),y[7][0].data=gn(a.e.c+1);var N=ll(y[46][0].data),E=jr.find(d,l[N].location),B=Zd(eu(E.content));{for(var _=0;_<B.length&&B[_].id!=N;++_);if(B[_].id!=N)throw"Bad ColumnRowUIDMapArchive";var I=Ka(B[_].messages[0].data);I[1]=[],I[2]=[],I[3]=[];for(var j=0;j<=a.e.c;++j){var k=[];k[1]=k[2]=[{type:0,data:gn(j+420690)}],I[1].push({type:2,data:ko(k)}),I[2].push({type:0,data:gn(j)}),I[3].push({type:0,data:gn(j)})}I[4]=[],I[5]=[],I[6]=[];for(var T=0;T<=a.e.r;++T)k=[],k[1]=k[2]=[{type:0,data:gn(T+726270)}],I[4].push({type:2,data:ko(k)}),I[5].push({type:0,data:gn(T)}),I[6].push({type:0,data:gn(T)});B[_].messages[0].data=ko(I)}E.content=vv(xv(B)),E.size=E.content.length,delete y[46];var L=Ka(y[4][0].data);{L[7][0].data=gn(a.e.r+1);var F=Ka(L[1][0].data),S=ll(F[2][0].data);E=jr.find(d,l[S].location),B=Zd(eu(E.content));{if(B[0].id!=S)throw"Bad HeaderStorageBucket";var M=Ka(B[0].messages[0].data);for(T=0;T<i.length;++T){var H=Ka(M[2][0].data);H[1][0].data=gn(T),H[4][0].data=gn(i[T].length),M[2][T]={type:M[2][0].type,data:ko(H)}}B[0].messages[0].data=ko(M)}E.content=vv(xv(B)),E.size=E.content.length;var K=ll(L[2][0].data);E=jr.find(d,l[K].location),B=Zd(eu(E.content));{if(B[0].id!=K)throw"Bad HeaderStorageBucket";for(M=Ka(B[0].messages[0].data),j=0;j<=a.e.c;++j)H=Ka(M[2][0].data),H[1][0].data=gn(j),H[4][0].data=gn(a.e.r+1),M[2][j]={type:M[2][0].type,data:ko(H)};B[0].messages[0].data=ko(M)}E.content=vv(xv(B)),E.size=E.content.length;var Q=ll(L[4][0].data);(function(){for(var D=jr.find(d,l[Q].location),W=Zd(eu(D.content)),J,ce=0;ce<W.length;++ce){var ie=W[ce];ie.id==Q&&(J=ie)}var re=Ka(J.messages[0].data);{re[3]=[];var de=[];o.forEach(function(q,we){de[1]=[{type:0,data:gn(we)}],de[2]=[{type:0,data:gn(1)}],de[3]=[{type:2,data:UFe(q)}],re[3].push({type:2,data:ko(de)})})}J.messages[0].data=ko(re);var oe=xv(W),be=vv(oe);D.content=be,D.size=D.content.length})();var G=Ka(L[3][0].data);{var X=G[1][0];delete G[2];var Z=Ka(X.data);{var U=ll(Z[2][0].data);(function(){for(var D=jr.find(d,l[U].location),W=Zd(eu(D.content)),J,ce=0;ce<W.length;++ce){var ie=W[ce];ie.id==U&&(J=ie)}var re=Ka(J.messages[0].data);{delete re[6],delete G[7];var de=new Uint8Array(re[5][0].data);re[5]=[];for(var oe=0,be=0;be<=a.e.r;++be){var q=Ka(de);oe+=ePe(q,i[be],o),q[1][0].data=gn(be),re[5].push({data:ko(q),type:2})}re[1]=[{type:0,data:gn(a.e.c+1)}],re[2]=[{type:0,data:gn(a.e.r+1)}],re[3]=[{type:0,data:gn(oe)}],re[4]=[{type:0,data:gn(a.e.r+1)}]}J.messages[0].data=ko(re);var we=xv(W),Te=vv(we);D.content=Te,D.size=D.content.length})()}X.data=ko(Z)}L[3][0].data=ko(G)}y[4][0].data=ko(L)}m.messages[0].data=ko(y);var Y=xv(A),P=vv(Y);return f.content=P,f.size=f.content.length,d}function Wse(e){return function(r){for(var a=0;a!=e.length;++a){var n=e[a];r[n[0]]===void 0&&(r[n[0]]=n[1]),n[2]==="n"&&(r[n[0]]=Number(r[n[0]]))}}}function ML(e){Wse([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function UL(e){Wse([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function rPe(e){return xa.WS.indexOf(e)>-1?"sheet":e==xa.CS?"chart":e==xa.DS?"dialog":e==xa.MS?"macro":e&&e.length?e:"sheet"}function aPe(e,t){if(!e)return 0;try{e=t.map(function(a){return a.id||(a.id=a.strRelID),[a.name,e["!id"][a.id].Target,rPe(e["!id"][a.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function nPe(e,t,r,a,n,i,o,l,c,d,u,f){try{i[a]=g2(ud(e,r,!0),t);var A=yi(e,t),m;switch(l){case"sheet":m=jDe(A,t,n,c,i[a],d,u,f);break;case"chart":if(m=kDe(A,t,n,c,i[a],d,u,f),!m||!m["!drawel"])break;var g=zw(m["!drawel"].Target,t),x=oN(g),v=hBe(ud(e,g,!0),g2(ud(e,x,!0),g)),y=zw(v,g),N=oN(y);m=eDe(ud(e,y,!0),y,c,g2(ud(e,N,!0),y),d,m);break;case"macro":m=SDe(A,t,n,c,i[a],d,u,f);break;case"dialog":m=_De(A,t,n,c,i[a],d,u,f);break;default:throw new Error("Unrecognized sheet type "+l)}o[a]=m;var E=[];i&&i[a]&&Ms(i[a]).forEach(function(B){var _="";if(i[a][B].Type==xa.CMNT){_=zw(i[a][B].Target,t);var I=ODe(yi(e,_,!0),_,c);if(!I||!I.length)return;AV(m,I,!1)}i[a][B].Type==xa.TCMNT&&(_=zw(i[a][B].Target,t),E=E.concat(mBe(yi(e,_,!0),c)))}),E&&E.length&&AV(m,E,!0,c.people||[])}catch(B){if(c.WTF)throw B}}function qd(e){return e.charAt(0)=="/"?e.slice(1):e}function sPe(e,t){if(V1(),t=t||{},ML(t),ru(e,"META-INF/manifest.xml")||ru(e,"objectdata.xml"))return CV(e,t);if(ru(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof XB<"u"){if(e.FileIndex)return XB(e);var r=jr.utils.cfb_new();return F$(e).forEach(function(H){na(r,H,pSe(e,H))}),XB(r)}throw new Error("Unsupported NUMBERS file")}if(!ru(e,"[Content_Types].xml"))throw ru(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):ru(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=F$(e),n=c_e(ud(e,"[Content_Types].xml")),i=!1,o,l;if(n.workbooks.length===0&&(l="xl/workbook.xml",yi(e,l,!0)&&n.workbooks.push(l)),n.workbooks.length===0){if(l="xl/workbook.bin",!yi(e,l,!0))throw new Error("Could not find workbook");n.workbooks.push(l),i=!0}n.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},d={};if(!t.bookSheets&&!t.bookProps){if(x2=[],n.sst)try{x2=IDe(yi(e,qd(n.sst)),n.sst,t)}catch(H){if(t.WTF)throw H}t.cellStyles&&n.themes.length&&(c=BDe(ud(e,n.themes[0].replace(/^\//,""),!0)||"",n.themes[0],t)),n.style&&(d=TDe(yi(e,qd(n.style)),n.style,c,t))}n.links.map(function(H){try{var K=g2(ud(e,oN(qd(H))),H);return FDe(yi(e,qd(H)),K,H,t)}catch{}});var u=CDe(yi(e,qd(n.workbooks[0])),n.workbooks[0],t),f={},A="";n.coreprops.length&&(A=yi(e,qd(n.coreprops[0]),!0),A&&(f=Rne(A)),n.extprops.length!==0&&(A=yi(e,qd(n.extprops[0]),!0),A&&p_e(A,f,t)));var m={};(!t.bookSheets||t.bookProps)&&n.custprops.length!==0&&(A=ud(e,qd(n.custprops[0]),!0),A&&(m=x_e(A,t)));var g={};if((t.bookSheets||t.bookProps)&&(u.Sheets?o=u.Sheets.map(function(K){return K.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),t.bookProps&&(g.Props=f,g.Custprops=m),t.bookSheets&&typeof o<"u"&&(g.SheetNames=o),t.bookSheets?g.SheetNames:t.bookProps))return g;o={};var x={};t.bookDeps&&n.calcchain&&(x=DDe(yi(e,qd(n.calcchain)),n.calcchain));var v=0,y={},N,E;{var B=u.Sheets;f.Worksheets=B.length,f.SheetNames=[];for(var _=0;_!=B.length;++_)f.SheetNames[_]=B[_].name}var I=i?"bin":"xml",j=n.workbooks[0].lastIndexOf("/"),k=(n.workbooks[0].slice(0,j+1)+"_rels/"+n.workbooks[0].slice(j+1)+".rels").replace(/^\//,"");ru(e,k)||(k="xl/_rels/workbook."+I+".rels");var T=g2(ud(e,k,!0),k.replace(/_rels.*/,"s5s"));(n.metadata||[]).length>=1&&(t.xlmeta=PDe(yi(e,qd(n.metadata[0])),n.metadata[0],t)),(n.people||[]).length>=1&&(t.people=gBe(yi(e,qd(n.people[0])),t)),T&&(T=aPe(T,u.Sheets));var L=yi(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=f.Worksheets;++v){var F="sheet";if(T&&T[v]?(N="xl/"+T[v][1].replace(/[\/]?xl\//,""),ru(e,N)||(N=T[v][1]),ru(e,N)||(N=k.replace(/_rels\/.*$/,"")+T[v][1]),F=T[v][2]):(N="xl/worksheets/sheet"+(v+1-L)+"."+I,N=N.replace(/sheet0\./,"sheet.")),E=N.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(f.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var S=!1,M=0;M!=t.sheets.length;++M)typeof t.sheets[M]=="number"&&t.sheets[M]==v&&(S=1),typeof t.sheets[M]=="string"&&t.sheets[M].toLowerCase()==f.SheetNames[v].toLowerCase()&&(S=1);if(!S)continue e}}nPe(e,N,E,f.SheetNames[v],v,y,o,F,t,u,c,d)}return g={Directory:n,Workbook:u,Props:f,Custprops:m,Deps:x,Sheets:o,SheetNames:f.SheetNames,Strings:x2,Styles:d,Themes:c,SSF:Yn(Fr)},t&&t.bookFiles&&(e.files?(g.keys=a,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(H,K){H=H.replace(/^Root Entry[\/]/,""),g.keys.push(H),g.files[H]=e.FileIndex[K]}))),t&&t.bookVBA&&(n.vba.length>0?g.vbaraw=yi(e,qd(n.vba[0]),!0):n.defaults&&n.defaults.bin===CBe&&(g.vbaraw=yi(e,"xl/vbaProject.bin",!0))),g}function iPe(e,t){var r=t||{},a="Workbook",n=jr.find(e,a);try{if(a="/!DataSpaces/Version",n=jr.find(e,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(P3e(n.content),a="/!DataSpaces/DataSpaceMap",n=jr.find(e,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=L3e(n.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",n=jr.find(e,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=M3e(n.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",n=jr.find(e,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);H3e(n.content)}catch{}if(a="/EncryptionInfo",n=jr.find(e,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=Q3e(n.content);if(a="/EncryptedPackage",n=jr.find(e,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],n.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],n.content,r.password||"",r);throw new Error("File is password-protected")}function oPe(e,t){return t.bookType=="ods"?Kse(e,t):t.bookType=="numbers"?tPe(e,t):t.bookType=="xlsb"?lPe(e,t):cPe(e,t)}function lPe(e,t){nb=1024,e&&!e.SSF&&(e.SSF=Yn(Fr)),e&&e.SSF&&(V1(),f4(e.SSF),t.revssf=A4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,v2?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",a=wse.indexOf(t.bookType)>-1,n=CL();UL(t=t||{});var i=uL(),o="",l=0;if(t.cellXfs=[],jp(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",na(i,o,Lne(e.Props,t)),n.coreprops.push(o),xn(t.rels,2,o,xa.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,na(i,o,Hne(e.Props)),n.extprops.push(o),xn(t.rels,3,o,xa.EXT_PROPS),e.Custprops!==e.Props&&Ms(e.Custprops||{}).length>0&&(o="docProps/custom.xml",na(i,o,Qne(e.Custprops)),n.custprops.push(o),xn(t.rels,4,o,xa.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var u={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],A=(f||{})["!type"]||"sheet";switch(A){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,na(i,o,LDe(l-1,o,t,e,u)),n.sheets.push(o),xn(t.wbrels,-1,"worksheets/sheet"+l+"."+r,xa.WS[0])}if(f){var m=f["!comments"],g=!1,x="";m&&m.length>0&&(x="xl/comments"+l+"."+r,na(i,x,HDe(m,x)),n.comments.push(x),xn(u,-1,"../comments"+l+"."+r,xa.CMNT),g=!0),f["!legacy"]&&g&&na(i,"xl/drawings/vmlDrawing"+l+".vml",bse(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}u["!id"].rId1&&na(i,oN(o),jb(u))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,na(i,o,UDe(t.Strings,o,t)),n.strs.push(o),xn(t.wbrels,-1,"sharedStrings."+r,xa.SST)),o="xl/workbook."+r,na(i,o,RDe(e,o)),n.workbooks.push(o),xn(t.rels,1,o,xa.WB),o="xl/theme/theme1.xml",na(i,o,BL(e.Themes,t)),n.themes.push(o),xn(t.wbrels,-1,"theme/theme1.xml",xa.THEME),o="xl/styles."+r,na(i,o,MDe(e,o,t)),n.styles.push(o),xn(t.wbrels,-1,"styles."+r,xa.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",na(i,o,e.vbaraw),n.vba.push(o),xn(t.wbrels,-1,"vbaProject.bin",xa.VBA)),o="xl/metadata."+r,na(i,o,QDe(o)),n.metadata.push(o),xn(t.wbrels,-1,"metadata."+r,xa.XLMETA),na(i,"[Content_Types].xml",Fne(n,t)),na(i,"_rels/.rels",jb(t.rels)),na(i,"xl/_rels/workbook."+r+".rels",jb(t.wbrels)),delete t.revssf,delete t.ssf,i}function cPe(e,t){nb=1024,e&&!e.SSF&&(e.SSF=Yn(Fr)),e&&e.SSF&&(V1(),f4(e.SSF),t.revssf=A4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,v2?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",a=wse.indexOf(t.bookType)>-1,n=CL();UL(t=t||{});var i=uL(),o="",l=0;if(t.cellXfs=[],jp(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",na(i,o,Lne(e.Props,t)),n.coreprops.push(o),xn(t.rels,2,o,xa.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,na(i,o,Hne(e.Props)),n.extprops.push(o),xn(t.rels,3,o,xa.EXT_PROPS),e.Custprops!==e.Props&&Ms(e.Custprops||{}).length>0&&(o="docProps/custom.xml",na(i,o,Qne(e.Custprops)),n.custprops.push(o),xn(t.rels,4,o,xa.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},A=e.Sheets[e.SheetNames[l-1]],m=(A||{})["!type"]||"sheet";switch(m){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,na(i,o,Ose(l-1,t,e,f)),n.sheets.push(o),xn(t.wbrels,-1,"worksheets/sheet"+l+"."+r,xa.WS[0])}if(A){var g=A["!comments"],x=!1,v="";if(g&&g.length>0){var y=!1;g.forEach(function(N){N[1].forEach(function(E){E.T==!0&&(y=!0)})}),y&&(v="xl/threadedComments/threadedComment"+l+"."+r,na(i,v,pBe(g,u,t)),n.threadedcomments.push(v),xn(f,-1,"../threadedComments/threadedComment"+l+"."+r,xa.TCMNT)),v="xl/comments"+l+"."+r,na(i,v,yse(g)),n.comments.push(v),xn(f,-1,"../comments"+l+"."+r,xa.CMNT),x=!0}A["!legacy"]&&x&&na(i,"xl/drawings/vmlDrawing"+l+".vml",bse(l,A["!comments"])),delete A["!comments"],delete A["!legacy"]}f["!id"].rId1&&na(i,oN(o),jb(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,na(i,o,lse(t.Strings,t)),n.strs.push(o),xn(t.wbrels,-1,"sharedStrings."+r,xa.SST)),o="xl/workbook."+r,na(i,o,Lse(e)),n.workbooks.push(o),xn(t.rels,1,o,xa.WB),o="xl/theme/theme1.xml",na(i,o,BL(e.Themes,t)),n.themes.push(o),xn(t.wbrels,-1,"theme/theme1.xml",xa.THEME),o="xl/styles."+r,na(i,o,pse(e,t)),n.styles.push(o),xn(t.wbrels,-1,"styles."+r,xa.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",na(i,o,e.vbaraw),n.vba.push(o),xn(t.wbrels,-1,"vbaProject.bin",xa.VBA)),o="xl/metadata."+r,na(i,o,vse()),n.metadata.push(o),xn(t.wbrels,-1,"metadata."+r,xa.XLMETA),u.length>1&&(o="xl/persons/person.xml",na(i,o,xBe(u)),n.people.push(o),xn(t.wbrels,-1,"persons/person.xml",xa.PEOPLE)),na(i,"[Content_Types].xml",Fne(n,t)),na(i,"_rels/.rels",jb(t.rels)),na(i,"xl/_rels/workbook."+r+".rels",jb(t.wbrels)),delete t.revssf,delete t.ssf,i}function HL(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=vd(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function dPe(e,t){return jr.find(e,"EncryptedPackage")?iPe(e,t):Qse(e,t)}function uPe(e,t){var r,a=e,n=t||{};return n.type||(n.type=fa&&Buffer.isBuffer(e)?"buffer":"base64"),r=dne(a,n),sPe(r,n)}function Xse(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return sF(e.slice(r),t);default:break e}return n1.to_workbook(e,t)}function fPe(e,t){var r="",a=HL(e,t);switch(t.type){case"base64":r=vd(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=sx(e);break;default:throw new Error("Unrecognized type "+t.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(r=Sn(r)),t.type="binary",Xse(r,t)}function hPe(e,t){var r=e;return t.type=="base64"&&(r=vd(r)),r=tN.utils.decode(1200,r.slice(2),"str"),t.type="binary",Xse(r,t)}function APe(e){return e.match(/[^\x00-\x7F]/)?vh(e):e}function YB(e,t,r,a){return a?(r.type="string",n1.to_workbook(e,r)):n1.to_workbook(t,r)}function i1(e,t){iL();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return i1(new Uint8Array(e),(r=Yn(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var a=e,n=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Sb={},r.dateNF&&(Sb.dateNF=r.dateNF),r.type||(r.type=fa&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=fa?"buffer":"binary",a=lSe(e),typeof Uint8Array<"u"&&!fa&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,a=APe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Yn(r),r.type="array",i1(oL(a),r)}switch((n=HL(a,r))[0]){case 208:if(n[1]===207&&n[2]===17&&n[3]===224&&n[4]===161&&n[5]===177&&n[6]===26&&n[7]===225)return dPe(jr.read(a,r),r);break;case 9:if(n[1]<=8)return Qse(a,r);break;case 60:return sF(a,r);case 73:if(n[1]===73&&n[2]===42&&n[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(n[1]===68)return v3e(a,r);break;case 84:if(n[1]===65&&n[2]===66&&n[3]===76)return ise.to_workbook(a,r);break;case 80:return n[1]===75&&n[2]<9&&n[3]<9?uPe(a,r):YB(e,a,r,i);case 239:return n[3]===60?sF(a,r):YB(e,a,r,i);case 255:if(n[1]===254)return hPe(a,r);if(n[1]===0&&n[2]===2&&n[3]===0)return Hg.to_workbook(a,r);break;case 0:if(n[1]===0&&(n[2]>=2&&n[3]===0||n[2]===0&&(n[3]===8||n[3]===9)))return Hg.to_workbook(a,r);break;case 3:case 131:case 139:case 140:return nF.to_workbook(a,r);case 123:if(n[1]===92&&n[2]===114&&n[3]===116)return hse.to_workbook(a,r);break;case 10:case 13:case 32:return fPe(a,r);case 137:if(n[1]===80&&n[2]===78&&n[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return x3e.indexOf(n[0])>-1&&n[2]<=12&&n[3]<=31?nF.to_workbook(a,r):YB(e,a,r,i)}function Yse(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return eE(t.file,jr.write(e,{type:fa?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return jr.write(e,t)}function mPe(e,t){var r=Yn(t||{}),a=oPe(e,r);return pPe(a,r)}function pPe(e,t){var r={},a=fa?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=a;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=a;break;default:throw new Error("Unrecognized type "+t.type)}var n=e.FullPaths?jr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof n=="string"){if(t.type=="binary"||t.type=="base64")return n;n=new Uint8Array(u4(n))}return t.password&&typeof encrypt_agile<"u"?Yse(encrypt_agile(n,t.password),t):t.type==="file"?eE(t.file,n):t.type=="string"?Sn(n):n}function gPe(e,t){var r=t||{},a=AFe(e,r);return Yse(a,r)}function oh(e,t,r){r||(r="");var a=r+e;switch(t.type){case"base64":return rN(vh(a));case"binary":return vh(a);case"string":return e;case"file":return eE(t.file,a,"utf8");case"buffer":return fa?xA(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):oh(a,{type:"binary"}).split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function xPe(e,t){switch(t.type){case"base64":return rN(e);case"binary":return e;case"string":return e;case"file":return eE(t.file,e,"binary");case"buffer":return fa?xA(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function uj(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",a=0;a<e.length;++a)r+=String.fromCharCode(e[a]);return t.type=="base64"?rN(r):t.type=="string"?Sn(r):r;case"file":return eE(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function Jse(e,t){iL(),dDe(e);var r=Yn(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=Jse(e,r);return r.type="array",u4(a)}var n=0;if(r.sheet&&(typeof r.sheet=="number"?n=r.sheet:n=e.SheetNames.indexOf(r.sheet),!e.SheetNames[n]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return oh(oFe(e,r),r);case"slk":case"sylk":return oh(sse.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"htm":case"html":return oh($se(e.Sheets[e.SheetNames[n]],r),r);case"txt":return xPe(Zse(e.Sheets[e.SheetNames[n]],r),r);case"csv":return oh(QL(e.Sheets[e.SheetNames[n]],r),r,"\uFEFF");case"dif":return oh(ise.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"dbf":return uj(nF.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"prn":return oh(n1.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"rtf":return oh(hse.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"eth":return oh(ose.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"fods":return oh(Kse(e,r),r);case"wk1":return uj(Hg.sheet_to_wk1(e.Sheets[e.SheetNames[n]],r),r);case"wk3":return uj(Hg.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),uj(zse(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),gPe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return mPe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function vPe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function K1(e,t,r){var a={};return a.type="file",a.file=t,vPe(a),Jse(e,a)}function bPe(e,t,r,a,n,i,o,l){var c=li(r),d=l.defval,u=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,A=n===1?[]:{};if(n!==1)if(Object.defineProperty)try{Object.defineProperty(A,"__rowNum__",{value:r,enumerable:!1})}catch{A.__rowNum__=r}else A.__rowNum__=r;if(!o||e[r])for(var m=t.s.c;m<=t.e.c;++m){var g=o?e[r][m]:e[a[m]+c];if(g===void 0||g.t===void 0){if(d===void 0)continue;i[m]!=null&&(A[i[m]]=d);continue}var x=g.v;switch(g.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(i[m]!=null){if(x==null)if(g.t=="e"&&x===null)A[i[m]]=null;else if(d!==void 0)A[i[m]]=d;else if(u&&x===null)A[i[m]]=null;else continue;else A[i[m]]=u&&(g.t!=="n"||g.t==="n"&&l.rawNumbers!==!1)?x:aA(g,x,l);x!=null&&(f=!1)}}return{row:A,isempty:f}}function X5(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},a=0,n=1,i=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},u=d.range!=null?d.range:e["!ref"];switch(d.header===1?a=1:d.header==="A"?a=2:Array.isArray(d.header)?a=3:d.header==null&&(a=0),typeof u){case"string":c=Ma(u);break;case"number":c=Ma(e["!ref"]),c.s.r=u;break;default:c=u}a>0&&(n=0);var f=li(c.s.r),A=[],m=[],g=0,x=0,v=Array.isArray(e),y=c.s.r,N=0,E={};v&&!e[y]&&(e[y]=[]);var B=d.skipHidden&&e["!cols"]||[],_=d.skipHidden&&e["!rows"]||[];for(N=c.s.c;N<=c.e.c;++N)if(!(B[N]||{}).hidden)switch(A[N]=As(N),r=v?e[y][N]:e[A[N]+f],a){case 1:i[N]=N-c.s.c;break;case 2:i[N]=A[N];break;case 3:i[N]=d.header[N-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=aA(r,null,d),x=E[o]||0,!x)E[o]=1;else{do l=o+"_"+x++;while(E[l]);E[o]=x,E[l]=1}i[N]=l}for(y=c.s.r+n;y<=c.e.r;++y)if(!(_[y]||{}).hidden){var I=bPe(e,c,y,A,a,i,v,d);(I.isempty===!1||(a===1?d.blankrows!==!1:d.blankrows))&&(m[g++]=I.row)}return m.length=g,m}var TV=/"/g;function yPe(e,t,r,a,n,i,o,l){for(var c=!0,d=[],u="",f=li(r),A=t.s.c;A<=t.e.c;++A)if(a[A]){var m=l.dense?(e[r]||[])[A]:e[a[A]+f];if(m==null)u="";else if(m.v!=null){c=!1,u=""+(l.rawNumbers&&m.t=="n"?m.v:aA(m,null,l));for(var g=0,x=0;g!==u.length;++g)if((x=u.charCodeAt(g))===n||x===i||x===34||l.forceQuotes){u='"'+u.replace(TV,'""')+'"';break}u=="ID"&&(u='"ID"')}else m.f!=null&&!m.F?(c=!1,u="="+m.f,u.indexOf(",")>=0&&(u='"'+u.replace(TV,'""')+'"')):u="";d.push(u)}return l.blankrows===!1&&c?null:d.join(o)}function QL(e,t){var r=[],a=t??{};if(e==null||e["!ref"]==null)return"";var n=Ma(e["!ref"]),i=a.FS!==void 0?a.FS:",",o=i.charCodeAt(0),l=a.RS!==void 0?a.RS:`
`,c=l.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),u="",f=[];a.dense=Array.isArray(e);for(var A=a.skipHidden&&e["!cols"]||[],m=a.skipHidden&&e["!rows"]||[],g=n.s.c;g<=n.e.c;++g)(A[g]||{}).hidden||(f[g]=As(g));for(var x=0,v=n.s.r;v<=n.e.r;++v)(m[v]||{}).hidden||(u=yPe(e,n,v,f,o,c,i,a),u!=null&&(a.strip&&(u=u.replace(d,"")),(u||a.blankrows!==!1)&&r.push((x++?l:"")+u)));return delete a.dense,r.join("")}function Zse(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=QL(e,t);return r}function wPe(e){var t="",r,a="";if(e==null||e["!ref"]==null)return[];var n=Ma(e["!ref"]),i="",o=[],l,c=[],d=Array.isArray(e);for(l=n.s.c;l<=n.e.c;++l)o[l]=As(l);for(var u=n.s.r;u<=n.e.r;++u)for(i=li(u),l=n.s.c;l<=n.e.c;++l)if(t=o[l]+i,r=d?(e[u]||[])[l]:e[t],a="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;a=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}c[c.length]=t+"="+a}return c}function eie(e,t,r){var a=r||{},n=+!a.skipHeader,i=e||{},o=0,l=0;if(i&&a.origin!=null)if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?ms(a.origin):a.origin;o=c.r,l=c.c}var d,u={s:{c:0,r:0},e:{c:l,r:o+t.length-1+n}};if(i["!ref"]){var f=Ma(i["!ref"]);u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),o==-1&&(o=f.e.r+1,u.e.r=o+t.length-1+n)}else o==-1&&(o=0,u.e.r=t.length-1+n);var A=a.header||[],m=0;t.forEach(function(x,v){Ms(x).forEach(function(y){(m=A.indexOf(y))==-1&&(A[m=A.length]=y);var N=x[y],E="z",B="",_=Hr({c:l+m,r:o+v+n});d=AN(i,_),N&&typeof N=="object"&&!(N instanceof Date)?i[_]=N:(typeof N=="number"?E="n":typeof N=="boolean"?E="b":typeof N=="string"?E="s":N instanceof Date?(E="d",a.cellDates||(E="n",N=Qi(N)),B=a.dateNF||Fr[14]):N===null&&a.nullError&&(E="e",N=0),d?(d.t=E,d.v=N,delete d.w,delete d.R,B&&(d.z=B)):i[_]=d={t:E,v:N},B&&(d.z=B))})}),u.e.c=Math.max(u.e.c,l+A.length-1);var g=li(o);if(n)for(m=0;m<A.length;++m)i[As(m+l)+g]={t:"s",v:A[m]};return i["!ref"]=Zr(u),i}function NPe(e,t){return eie(null,e,t)}function AN(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var a=ms(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?AN(e,Hr(t)):AN(e,Hr({r:t,c:r||0}))}function EPe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function zL(){return{SheetNames:[],Sheets:{}}}function $L(e,t,r,a){var n=1;if(!r)for(;n<=65535&&e.SheetNames.indexOf(r="Sheet"+n)!=-1;++n,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);n=i&&+i[2]||0;var o=i&&i[1]||r;for(++n;n<=65535&&e.SheetNames.indexOf(r=o+n)!=-1;++n);}if(Rse(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function CPe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=EPe(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[a].Hidden=r}function jPe(e,t){return e.z=t,e}function tie(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function kPe(e,t,r){return tie(e,"#"+t,r)}function SPe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function _Pe(e,t,r,a){for(var n=typeof t!="string"?t:Ma(t),i=typeof t=="string"?t:Zr(t),o=n.s.r;o<=n.e.r;++o)for(var l=n.s.c;l<=n.e.c;++l){var c=AN(e,o,l);c.t="n",c.F=i,delete c.v,o==n.s.r&&l==n.s.c&&(c.f=r,a&&(c.D=!0))}return e}var Fs={encode_col:As,encode_row:li,encode_cell:Hr,encode_range:Zr,decode_col:vL,decode_row:xL,split_cell:USe,decode_cell:ms,decode_range:_c,format_cell:aA,sheet_add_aoa:Sne,sheet_add_json:eie,sheet_add_dom:Vse,aoa_to_sheet:G1,json_to_sheet:NPe,table_to_sheet:Gse,table_to_book:PFe,sheet_to_csv:QL,sheet_to_txt:Zse,sheet_to_json:X5,sheet_to_html:$se,sheet_to_formulae:wPe,sheet_to_row_object_array:X5,sheet_get_cell:AN,book_new:zL,book_append_sheet:$L,book_set_sheet_visibility:CPe,cell_set_number_format:jPe,cell_set_hyperlink:tie,cell_set_internal_link:kPe,cell_add_comment:SPe,sheet_set_array_formula:_Pe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function TPe({data:e,fileName:t,sheetName:r="Sheet 1"}){try{const a=Fs.book_new(),n=Fs.json_to_sheet(e);Fs.book_append_sheet(a,n,r),K1(a,`${t}.xlsx`)}catch(a){console.error("Error exporting to Excel:",a),alert("Hubo un error al generar el archivo de Excel. Por favor, intente de nuevo.")}}const BPe=Array.from({length:Is.length},(e,t)=>t+1),BV={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},IPe=e=>{const[t,r]=w.useState([]),[a,n]=w.useState(!0),[i,o]=w.useState(null);w.useEffect(()=>e?k5e(e,f=>{r(f),n(!1)}):void 0,[e]);const l=w.useCallback(async u=>{try{return o(null),await C5e(u,e)}catch(f){throw o(f instanceof Error?f.message:"Error al guardar"),f}},[e]),c=w.useCallback(async u=>{try{o(null),await j5e(u,e)}catch(f){throw o(f instanceof Error?f.message:"Error al eliminar"),f}},[e]),d=w.useCallback(async u=>{try{return o(null),u.trim()?await _5e(e,u):t}catch(f){return o(f instanceof Error?f.message:"Error en la búsqueda"),[]}},[e,t]);return{reemplazos:t,loading:a,error:i,save:l,remove:c,search:d}},OPe=()=>{const[e,t]=w.useState([]),[r,a]=w.useState(!0);w.useEffect(()=>S5e(o=>{t(o),a(!1)}),[]);const n=w.useMemo(()=>e.map(i=>i.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:n,loading:r}},bv=({label:e,icon:t,children:r})=>s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),s.jsxs("div",{className:"relative",children:[t&&s.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:t}),r]})]}),DPe="inline-flex items-center justify-center rounded-xl border text-sm px-3 py-2 transition-all",FPe="bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200 dark:border-emerald-700",PPe="bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700",lm=({title:e,value:t,icon:r})=>s.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[s.jsx("div",{className:"grid place-items-center h-12 w-12 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 text-slate-700 dark:from-slate-700 dark:to-slate-600 dark:text-slate-200",children:r}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:e}),s.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:t})]})]}),RPe=({data:e,title:t,period:r})=>{const a=Math.max(1,...e.map(i=>i.value)),n=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500","from-cyan-500 to-teal-500","from-rose-500 to-red-500","from-violet-500 to-purple-500"];return s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[s.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[s.jsx(bl,{className:"h-5 w-5 text-slate-400"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:t||`Reemplazos / Inasistencias por curso (${r==="month"?"mes":"total"})`})]}),e.length===0?s.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["No hay registros ",r==="month"?"este mes":"en el período seleccionado","."]}):s.jsx("div",{className:"grid gap-3",children:e.map((i,o)=>s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[s.jsx("span",{className:"font-medium",children:i.label}),s.jsx("span",{children:i.value})]}),s.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:s.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${n[o%n.length]}`,style:{width:`${i.value/a*100}%`}})})]},i.label))})]})},JB=({title:e,data:t,icon:r})=>{const a=Math.max(1,...t.map(i=>i.value)),n=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500"];return s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[s.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[r,s.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:e})]}),t.length===0?s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No hay registros para mostrar."}):s.jsx("div",{className:"grid gap-3",children:t.slice(0,5).map((i,o)=>s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[s.jsx("span",{className:"font-medium",children:i.label}),s.jsx("span",{children:i.value})]}),s.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:s.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${n[o%n.length]}`,style:{width:`${i.value/a*100}%`}})})]},i.label))})]})},LPe=({reemplazos:e,period:t})=>{const r=w.useMemo(()=>{if(t==="month"){const n=new Date,i=n.getMonth(),o=n.getFullYear();return(e||[]).filter(l=>{if(!l.diaAusencia)return!1;const c=new Date(l.diaAusencia+"T00:00:00");return c.getMonth()===i&&c.getFullYear()===o})}return e},[e,t]),a=w.useMemo(()=>{const n=r.length,i=r.filter(d=>d.resultado==="Hora realizada").length,o=n-i,l=n>0?i/n*100:0,c=d=>Object.entries(r.reduce((u,f)=>{const A=f[d];return A&&(u[A]=(u[A]||0)+1),u},{})).map(([u,f])=>({label:u,value:f})).sort((u,f)=>f.value-u.value);return{totalReemplazos:n,horasRealizadas:i,horasCubiertas:o,porcentajeRealizadas:l,setAusentes:new Set(r.map(d=>d.docenteAusente).filter(Boolean)),setReemplazan:new Set(r.map(d=>d.docenteReemplazante).filter(Boolean)),setCursos:new Set(r.map(d=>d.curso).filter(Boolean)),setAsigAusentes:new Set(r.map(d=>d.asignaturaAusente).filter(Boolean)),ausenciasPorProfesor:c("docenteAusente"),reemplazosPorProfesor:c("docenteReemplazante"),ausenciasPorAsignatura:c("asignaturaAusente")}},[r]);return a?s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsx(lm,{title:"Total Reemplazos",value:a.totalReemplazos,icon:s.jsx(HEe,{className:"h-6 w-6"})}),s.jsx(lm,{title:"Horas Realizadas",value:a.horasRealizadas,icon:s.jsx(dn,{className:"h-6 w-6"})}),s.jsx(lm,{title:"Horas Cubiertas",value:a.horasCubiertas,icon:s.jsx(Lw,{className:"h-6 w-6"})}),s.jsx(lm,{title:"Efectividad",value:`${a.porcentajeRealizadas.toFixed(1)}%`,icon:s.jsx(Gje,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsx(lm,{title:"Profesores ausentes (únicos)",value:a.setAusentes.size,icon:s.jsx(f$,{className:"h-6 w-6"})}),s.jsx(lm,{title:"Reemplazantes (únicos)",value:a.setReemplazan.size,icon:s.jsx(P5,{className:"h-6 w-6"})}),s.jsx(lm,{title:"Cursos (únicos)",value:a.setCursos.size,icon:s.jsx(_i,{className:"h-6 w-6"})}),s.jsx(lm,{title:"Asignaturas ausentes (únicas)",value:a.setAsigAusentes.size,icon:s.jsx(Rs,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsx(JB,{title:`Profesores con más ausencias (${t==="month"?"mes":"total"})`,data:a.ausenciasPorProfesor,icon:s.jsx(f$,{className:"h-5 w-5 text-slate-400"})}),s.jsx(JB,{title:`Profesores que más reemplazan (${t==="month"?"mes":"total"})`,data:a.reemplazosPorProfesor,icon:s.jsx(P5,{className:"h-5 w-5 text-slate-400"})})]}),s.jsx("div",{className:"grid gap-4",children:s.jsx(JB,{title:`Asignaturas con más ausencias (${t==="month"?"mes":"total"})`,data:a.ausenciasPorAsignatura,icon:s.jsx(Rs,{className:"h-5 w-5 text-slate-400"})})})]}):s.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:s.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[s.jsx(si,{className:"h-5 w-5 animate-spin"}),"Calculando estadísticas…"]})})},MPe=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:a,remove:n,search:i,loading:o,error:l}=IPe(t),{profesorNames:c,loading:d}=OPe(),[u,f]=w.useState(BV),[A,m]=w.useState(""),[g,x]=w.useState([]),[v,y]=w.useState(null),[N,E]=w.useState(!1),[B,_]=w.useState(!1),[I,j]=w.useState("month"),[k,T]=w.useState(null);w.useEffect(()=>{(async()=>{if(!A.trim()){x(r);return}_(!0);try{const Z=await i(A);x(Z)}finally{_(!1)}})()},[r,A,i]);const L=w.useMemo(()=>{let X=[...g];return k!==null&&X.sort((Z,U)=>{const Y=k.key,P=Z[Y],D=U[Y];if(P==null)return 1;if(D==null)return-1;let W=0;if(Y==="bloquesAfectados"){const J=P,ce=D;J.length<ce.length?W=-1:J.length>ce.length&&(W=1)}else{const J=String(P),ce=String(D);W=J.localeCompare(ce,"es",{numeric:!0})}return k.direction==="ascending"?W:-W}),X},[g,k]),F=X=>{let Z="ascending";k&&k.key===X&&k.direction==="ascending"&&(Z="descending"),T({key:X,direction:Z})},S=w.useCallback(X=>{const{name:Z,value:U}=X.target;f(Y=>({...Y,[Z]:U}))},[]),M=w.useCallback(X=>{f(Z=>{const Y=Z.bloquesAfectados.includes(X)?Z.bloquesAfectados.filter(P=>P!==X):[...Z.bloquesAfectados,X].sort((P,D)=>P-D);return{...Z,bloquesAfectados:Y}})},[]),H=w.useCallback(async X=>{X.preventDefault(),y(null),E(!0);const{docenteAusente:Z,asignaturaAusente:U,curso:Y,diaAusencia:P,bloquesAfectados:D,docenteReemplazante:W,asignaturaReemplazante:J}=u;if(!Z||!U||!Y||!P||!W||!J||D.length===0){y("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),E(!1);return}if(Z===W){y("El docente ausente y el reemplazante no pueden ser la misma persona."),E(!1);return}try{const ce=U.trim().toLowerCase()===J.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",ie={...u,resultado:ce};await a(ie),f(BV);const re=document.createElement("div");re.className="fixed top-4 right-4 z-50 rounded-lg bg-emerald-600 px-4 py-2 text-white shadow-lg",re.textContent=ce==="Hora realizada"?"✅ Reemplazo registrado — Hora realizada":"⚠️ Reemplazo registrado — Hora cubierta, no realizada",document.body.appendChild(re),setTimeout(()=>{document.body.contains(re)&&document.body.removeChild(re)},2500)}catch(ce){console.error(ce),y("Error al guardar el reemplazo. Intente nuevamente.")}finally{E(!1)}},[u,a]),K=w.useCallback(async X=>{if(window.confirm("¿Eliminar este registro?"))try{await n(X)}catch(Z){console.error(Z),alert("No se pudo eliminar. Intente nuevamente.")}},[n]),Q=w.useMemo(()=>{const X=I==="month"?r.filter(U=>{if(!U.diaAusencia)return!1;const Y=new Date(U.diaAusencia+"T00:00:00"),P=new Date;return Y.getMonth()===P.getMonth()&&Y.getFullYear()===P.getFullYear()}):r,Z={};for(const U of X){const Y=U.curso||"Sin curso";Z[Y]=(Z[Y]||0)+1}return Object.entries(Z).sort(([U],[Y])=>U.localeCompare(Y,"es")).map(([U,Y])=>({label:U,value:Y}))},[r,I]),G="w-full rounded-lg border bg-white pl-10 pr-4 py-2.5 text-slate-700 placeholder-slate-400 shadow-sm outline-none transition focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100";return!(e!=null&&e.id)&&!(e!=null&&e.email)?s.jsx("div",{className:"grid place-items-center rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm dark:border-slate-700 dark:bg-slate-800",children:s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Error: Usuario no autenticado."})}):s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Estadísticas"}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Mostrando datos para: ",I==="month"?"Mes Actual":"Total"]})]}),s.jsxs("div",{className:"flex items-center rounded-lg bg-slate-100 p-1 dark:bg-slate-700",children:[s.jsx("button",{onClick:()=>j("month"),className:`px-3 py-1 text-sm font-semibold rounded-md transition-colors ${I==="month"?"bg-white text-slate-800 shadow-sm dark:bg-slate-600 dark:text-white":"text-slate-600 hover:text-slate-800 dark:text-slate-300 dark:hover:text-white"}`,children:"Mes"}),s.jsx("button",{onClick:()=>j("total"),className:`px-3 py-1 text-sm font-semibold rounded-md transition-colors ${I==="total"?"bg-white text-slate-800 shadow-sm dark:bg-slate-600 dark:text-white":"text-slate-600 hover:text-slate-800 dark:text-slate-300 dark:hover:text-white"}`,children:"Total"})]})]}),s.jsx(LPe,{reemplazos:r,period:I})]}),s.jsx(RPe,{data:Q,title:`Reemplazos / Inasistencias por curso (${I==="month"?"mes":"total"})`,period:I}),s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Registro de Inasistencias y Reemplazos"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Complete el formulario para registrar una nueva suplencia."})]}),d?s.jsxs("div",{className:"flex items-center justify-center gap-2 py-8 text-slate-500",children:[s.jsx(si,{className:"h-5 w-5 animate-spin"})," Cargando profesores…"]}):s.jsxs("form",{onSubmit:H,className:"space-y-8",children:[s.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_i,{className:"h-5 w-5 text-slate-400"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Ausente"})]}),s.jsx(bv,{label:"Nombre",icon:s.jsx(op,{className:"h-5 w-5"}),children:s.jsxs("select",{name:"docenteAusente",value:u.docenteAusente,onChange:S,className:G,required:!0,disabled:N,children:[s.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(X=>s.jsx("option",{value:X,children:X},X))]})}),s.jsx(bv,{label:"Asignatura",icon:s.jsx(Rs,{className:"h-5 w-5"}),children:s.jsxs("select",{name:"asignaturaAusente",value:u.asignaturaAusente,onChange:S,className:G,required:!0,disabled:N,children:[s.jsx("option",{value:"",children:"Seleccione una asignatura"}),cn.map(X=>s.jsx("option",{value:X,children:X},X))]})}),s.jsx(bv,{label:"Curso",icon:s.jsx(_i,{className:"h-5 w-5"}),children:s.jsxs("select",{name:"curso",value:u.curso,onChange:S,className:G,required:!0,disabled:N,children:[s.jsx("option",{value:"",children:"Seleccione un curso"}),on.map(X=>s.jsx("option",{value:X,children:X},X))]})}),s.jsx(bv,{label:"Día de ausencia",icon:s.jsx(Ro,{className:"h-5 w-5"}),children:s.jsx("input",{type:"date",name:"diaAusencia",value:u.diaAusencia,onChange:S,className:G,required:!0,disabled:N})}),s.jsxs("div",{children:[s.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[s.jsx(bc,{className:"h-5 w-5 text-slate-400"}),s.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Bloques afectados"})]}),s.jsx("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-6",children:BPe.map(X=>{const Z=u.bloquesAfectados.includes(X);return s.jsx("button",{type:"button",onClick:()=>M(X),disabled:N,className:`${DPe} ${Z?FPe:PPe}`,"aria-pressed":Z,children:X},X)})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_i,{className:"h-5 w-5 text-slate-400"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Reemplazante"})]}),s.jsx(bv,{label:"Nombre",icon:s.jsx(op,{className:"h-5 w-5"}),children:s.jsxs("select",{name:"docenteReemplazante",value:u.docenteReemplazante,onChange:S,className:G,required:!0,disabled:N,children:[s.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(X=>s.jsx("option",{value:X,children:X},X))]})}),s.jsx(bv,{label:"Asignatura",icon:s.jsx(Rs,{className:"h-5 w-5"}),children:s.jsxs("select",{name:"asignaturaReemplazante",value:u.asignaturaReemplazante,onChange:S,className:G,required:!0,disabled:N,children:[s.jsx("option",{value:"",children:"Seleccione una asignatura"}),cn.map(X=>s.jsx("option",{value:X,children:X},X))]})}),u.asignaturaAusente&&u.asignaturaReemplazante&&s.jsxs("div",{className:"mt-4 rounded-xl border-2 border-dashed border-slate-200 p-4 dark:border-slate-700",children:[s.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Vista previa del resultado"}),s.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${u.asignaturaAusente.toLowerCase()===u.asignaturaReemplazante.toLowerCase()?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[s.jsx(dn,{className:"h-4 w-4"}),u.asignaturaAusente.toLowerCase()===u.asignaturaReemplazante.toLowerCase()?"Hora realizada":"Hora cubierta, no realizada"]}),s.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:u.asignaturaAusente.toLowerCase()===u.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden.":"Las asignaturas no coinciden."})]})]})]}),(v||l)&&s.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-red-700 dark:border-red-800 dark:bg-red-900/20 dark:text-red-300",children:v||l}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"submit",disabled:N||d,className:"inline-flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-2.5 font-semibold text-white shadow hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:N?s.jsxs(s.Fragment,{children:[s.jsx(si,{className:"h-4 w-4 animate-spin"})," Registrando…"]}):s.jsxs(s.Fragment,{children:[s.jsx(kl,{className:"h-4 w-4"})," Registrar Reemplazo"]})})})]})]}),s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[s.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Historial de Reemplazos"}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Mostrando ",L.length," de ",r.length," registros."]})]}),s.jsxs("div",{className:"flex w-full sm:w-auto items-center gap-2",children:[s.jsxs("div",{className:"relative w-full max-w-md",children:[s.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:B?s.jsx(si,{className:"h-5 w-5 animate-spin"}):s.jsx(z1,{className:"h-5 w-5"})}),s.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)…",value:A,onChange:X=>m(X.target.value),className:G+" pl-10",disabled:B})]}),s.jsxs("button",{onClick:()=>TPe({data:L.map(X=>({Fecha:X.diaAusencia,Curso:X.curso,"Docente Ausente":X.docenteAusente,"Asignatura Ausente":X.asignaturaAusente,"Docente Reemplazante":X.docenteReemplazante,"Asignatura Reemplazante":X.asignaturaReemplazante,"Bloques Afectados":X.bloquesAfectados.join(", "),Resultado:X.resultado})),fileName:`Historial_Reemplazos_${new Date().toISOString().split("T")[0]}`,sheetName:"Reemplazos"}),disabled:L.length===0,className:"inline-flex items-center gap-2 rounded-lg bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-emerald-700 disabled:opacity-50",title:"Descargar datos filtrados a Excel",children:[s.jsx(VCe,{className:"h-4 w-4"}),s.jsx("span",{children:"Excel"})]})]})]}),o?s.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-slate-500",children:[s.jsx(si,{className:"h-5 w-5 animate-spin"})," Cargando reemplazos…"]}):s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:s.jsxs("tr",{children:[[{label:"Fecha",key:"diaAusencia"},{label:"Curso",key:"curso"},{label:"Docente Ausente",key:"docenteAusente"},{label:"Docente Reemplazante",key:"docenteReemplazante"},{label:"Bloques",key:"bloquesAfectados"},{label:"Resultado",key:"resultado"}].map(X=>s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:s.jsxs("button",{onClick:()=>F(X.key),className:"flex items-center gap-1 hover:text-slate-700 dark:hover:text-slate-200",children:[X.label,s.jsx(REe,{className:"h-3 w-3"})]})},X.key)),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Acciones"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800",children:L.length>0?L.map(X=>s.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-200",children:new Date(X.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:X.curso}),s.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[X.docenteAusente,s.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:X.asignaturaAusente})]}),s.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[X.docenteReemplazante,s.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:X.asignaturaReemplazante})]}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:X.bloquesAfectados.join(", ")}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:s.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${X.resultado==="Hora realizada"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[s.jsx(dn,{className:"h-4 w-4"}),X.resultado]})}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:s.jsx("button",{onClick:()=>K(X.id),title:"Eliminar registro",className:"rounded-full p-2 text-red-600 hover:bg-red-50 hover:text-red-700 dark:text-red-300 dark:hover:bg-red-900/30",disabled:N,children:s.jsx(Ia,{className:"h-4 w-4"})})})]},X.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:A?"No se encontraron resultados para tu búsqueda.":"Aún no hay registros."})})})]}),L.length>0&&!A&&s.jsxs("div",{className:"mt-4 text-center text-sm text-slate-500 dark:text-slate-400",children:["Mostrando los últimos ",L.length," registros"]})]})]})]})},UPe=e=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const t=ut(lr,"reemplazos"),r=jt(t,Gt("fecha","desc"));return rr(r,n=>{const i=[];n.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log("✅ Reemplazos cargados para dashboard:",i.length),e(i)},n=>{throw console.error("❌ Error al cargar reemplazos:",n),n})}catch(t){throw console.error("❌ Error al configurar suscripción a reemplazos:",t),t}},HPe=e=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const t=ut(lr,"acompanamientos"),r=jt(t,Gt("fecha","desc"));return rr(r,n=>{const i=[];n.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log("✅ Acompañamientos cargados para dashboard:",i.length),e(i)},n=>{throw console.error("❌ Error al cargar acompañamientos:",n),n})}catch(t){throw console.error("❌ Error al configurar suscripción a acompañamientos:",t),t}},QPe=e=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const t=ut(lr,"calendar_events"),r=jt(t,Gt("date","asc"));return rr(r,n=>{const i=[];n.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log("✅ Eventos del calendario cargados para dashboard:",i.length),e(i)},n=>{throw console.error("❌ Error al cargar eventos del calendario:",n),n})}catch(t){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",t),t}},nh=({title:e,value:t,description:r,isLoading:a=!1})=>s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),a?s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),ng=({title:e,data:t,colorClass:r,valueFormatter:a=i=>String(i),isLoading:n=!1})=>{const i=w.useMemo(()=>t.map(l=>typeof l.value=="number"?l.value:parseFloat(String(l.value))||0),[t]),o=w.useMemo(()=>Math.max(...i,1),[i]);return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),n?s.jsxs("div",{className:"flex justify-center items-center py-8",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):s.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((l,c)=>(typeof c.value=="number"?c.value:0)-(typeof l.value=="number"?l.value:0)).map((l,c)=>{const d=typeof l.value=="number"?l.value:parseFloat(String(l.value))||0;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[s.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:l.label}),s.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a(l.value)})]}),s.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:s.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${d/o*100}%`}})})]},l.label+c)}):s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},zPe=()=>{const[e,t]=w.useState([]),[r,a]=w.useState([]),[n,i]=w.useState([]),[o,l]=w.useState(!0),[c,d]=w.useState(null);return w.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let u=0;const f=3,A=()=>{u++,u>=f&&(l(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const m=UPe(v=>{t(v),A()}),g=HPe(v=>{a(v),A()}),x=QPe(v=>{i(v),A()});return()=>{m(),g(),x()}}catch(m){console.error("❌ Error al configurar suscripciones del dashboard:",m),d(m instanceof Error?m.message:"Error al cargar datos del dashboard"),l(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:n,loading:o,error:c}},$Pe=({currentUser:e})=>{var f,A;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",e),console.log("🔍 Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log("🔍 Dashboard - Verificación de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log("🔍 Dashboard - Profile length:",(f=e==null?void 0:e.profile)==null?void 0:f.length),console.log("🔍 Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((A=e==null?void 0:e.profile)==null?void 0:A.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:a,loading:n,error:i}=zPe(),[o,l]=w.useState(h2);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:a.length,loading:n,error:i,currentUser:e==null?void 0:e.profile}),w.useEffect(()=>{try{const m=localStorage.getItem("acompanamientoDocenteCustomRubrica");l(m?JSON.parse(m):h2)}catch(m){console.error("Error al leer rúbrica personalizada",m),l(h2)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!e),console.log("🔍 Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log("❌ Dashboard - currentUser es null/undefined"),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",e.profile),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[s.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),s.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[s.jsx("p",{children:s.jsx("strong",{children:"Debug Info:"})}),s.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),s.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),s.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),i)return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[s.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),s.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:i}),s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const c=w.useMemo(()=>{const m=t.length;if(m===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const g=t.filter(_=>_.resultado==="Hora realizada").length,x=m-g,v=`${(g/m*100).toFixed(1)}%`,y=(_,I)=>_.reduce((j,k)=>{const T=k[I];return typeof T=="string"&&(j[T]=(j[T]||0)+1),j},{}),N=y(t,"docenteAusente"),E=y(t,"docenteReemplazante"),B=y(t,"curso");return{totalInasistencias:m,horasRealizadas:g,horasCubiertas:x,tasaCobertura:v,inasistenciasPorDocente:Object.entries(N).map(([_,I])=>({label:_,value:I})),reemplazosPorDocente:Object.entries(E).map(([_,I])=>({label:_,value:I})),inasistenciasPorCurso:Object.entries(B).map(([_,I])=>({label:_,value:I})),distribucionResultados:[{label:"Hora Realizada",value:g},{label:"Hora Cubierta",value:x}]}},[t]),d=w.useMemo(()=>{const m=r.length;if(m===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const g=new Map;o.forEach(I=>{I.criteria.forEach(j=>{g.set(j.name,I.domain)})});let x=0,v=0;const y={},N={};r.forEach(I=>{y[I.docente]||(y[I.docente]={total:0,count:0}),Object.entries(I.rubricaResultados).forEach(([j,k])=>{x+=k,v++,y[I.docente].total+=k,y[I.docente].count++;const T=g.get(j);T&&(N[T]||(N[T]={total:0,count:0}),N[T].total+=k,N[T].count++)})});const E=v>0?(x/v).toFixed(2):"N/A",B=Object.entries(y).map(([I,j])=>({label:I,value:j.count>0?(j.total/j.count).toFixed(2):0})),_=Object.entries(N).map(([I,j])=>({label:I,value:j.count>0?(j.total/j.count).toFixed(2):0}));return{totalAcompanamientos:m,promedioGeneral:E,desempenoPorDocente:B,desempenoPorDominio:_}},[r,o]),u=w.useMemo(()=>{const m={[sa.EVALUACION]:0,[sa.ACTO]:0,[sa.ACTIVIDAD_FOCALIZADA]:0,[sa.SALIDA_PEDAGOGICA]:0};for(const x of a)m.hasOwnProperty(x.type)&&m[x.type]++;const g=Object.entries(m).map(([x,v])=>({label:Eb[x].label,value:v}));return{totalEvaluaciones:m[sa.EVALUACION],totalActos:m[sa.ACTO],totalActividadesFocalizadas:m[sa.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:m[sa.SALIDA_PEDAGOGICA],distribucionEventos:g}},[a]);return n?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):c.totalInasistencias===0&&d.totalAcompanamientos===0&&a.length===0?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[s.jsx("span",{className:"text-6xl mb-4",children:"📊"}),s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),s.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[s.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),s.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),s.jsx("p",{children:"• Calendario Académico"})]})]}):s.jsxs("div",{className:"space-y-12 animate-fade-in",children:[s.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),s.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),s.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&s.jsxs("div",{className:"space-y-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(nh,{title:"Total Inasistencias",value:c.totalInasistencias,description:"Registros totales",isLoading:n}),s.jsx(nh,{title:"Horas Realizadas",value:c.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:n}),s.jsx(nh,{title:"Horas Cubiertas",value:c.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:n}),s.jsx(nh,{title:"Tasa de Cobertura Efectiva",value:c.tasaCobertura,description:"% de horas realizadas",isLoading:n})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsx(ng,{title:"Inasistencias por Docente",data:c.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:n}),s.jsx(ng,{title:"Reemplazos por Docente",data:c.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:n}),s.jsx(ng,{title:"Inasistencias por Curso",data:c.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:n}),s.jsx(ng,{title:"Distribución de Resultados",data:c.distribucionResultados,colorClass:"bg-green-400",isLoading:n})]})]}),r.length>0&&s.jsxs("div",{className:"space-y-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(nh,{title:"Total Acompañamientos",value:d.totalAcompanamientos,description:"Registros realizados",isLoading:n}),s.jsx(nh,{title:"Promedio General",value:d.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:n})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsx(ng,{title:"Desempeño Promedio por Docente",data:d.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:n}),s.jsx(ng,{title:"Desempeño Promedio por Dominio",data:d.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:n})]})]}),a.length>0&&s.jsxs("div",{className:"space-y-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(nh,{title:"Evaluaciones",value:u.totalEvaluaciones,description:"Eventos registrados",isLoading:n}),s.jsx(nh,{title:"Actos",value:u.totalActos,description:"Eventos registrados",isLoading:n}),s.jsx(nh,{title:"Act. Focalizadas",value:u.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:n}),s.jsx(nh,{title:"Salidas Pedagógicas",value:u.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:n})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsx(ng,{title:"Distribución de Eventos del Calendario",data:u.distribucionEventos,colorClass:"bg-violet-400",isLoading:n}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),n?s.jsxs("div",{className:"flex justify-center items-center py-8",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):s.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[a.filter(m=>new Date(m.date)>=new Date).slice(0,5).map((m,g)=>{var x,v;return s.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:m.responsables||"Evento sin título"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(m.date).toLocaleDateString("es-CL")}),m.ubicacion&&s.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",m.ubicacion]})]}),s.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((x=Eb[m.type])==null?void 0:x.color)||"bg-gray-100 text-gray-800"}`,children:((v=Eb[m.type])==null?void 0:v.label)||m.type})]})},m.id||g)}),a.filter(m=>new Date(m.date)>=new Date).length===0&&s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+a.length}),s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(m=>m.docenteAusente),...r.map(m=>m.docente)]).size}),s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(m=>m.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),s.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[s.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),s.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})},lF="carga_horaria_asignaciones",rie="usuarios",VPe=e=>{const t=e.data();return{id:e.id,...t}},GPe=e=>{const t=jt(ut(st,rie),Kt("profile","in",["PROFESORADO","SUBDIRECCION","COORDINACION_TP"]),Gt("nombreCompleto","asc"));return rr(t,a=>{const n=a.docs.map(i=>{const o=i.data();return{id:i.id,nombre:o.nombreCompleto||o.nombre||o.email||"Sin nombre",departamento:o.departamento||"General",horasContrato:o.horasContrato||44,perfil:o.profile||"PROFESORADO",email:o.email}});e(n)},a=>{console.error("Error al suscribirse a los docentes:",a),e([])})},qPe=async e=>{try{return(await Kr(ut(st,rie),{nombreCompleto:e.nombre,email:e.email,departamento:e.departamento||"General",horasContrato:e.horasContrato,profile:e.perfil,createdAt:Da()})).id}catch(t){throw console.error("Error al crear nuevo docente:",t),new Error("No se pudo crear el docente.")}},KPe=e=>{const t=jt(ut(st,lF),Gt("docenteNombre","asc"));return rr(t,a=>{const n=a.docs.map(i=>VPe(i));e(n)},a=>{console.error("Error al suscribirse a las asignaciones:",a),e([])})},WPe=async(e,t=!1)=>{try{if(t){const n=(await Nr(ut(st,lF))).docs.map(i=>Ua(i.ref));await Promise.all(n),console.log(`Se eliminaron ${n.length} asignaciones existentes`)}const r=e.map(a=>Kr(ut(st,lF),{...a,createdAt:Da(),updatedAt:Da()}));await Promise.all(r),console.log(`Se guardaron ${r.length} asignaciones`)}catch(r){throw console.error("Error al guardar asignaciones en batch:",r),new Error("No se pudieron guardar todas las asignaciones.")}},Y5=e=>{const t={44:38,43:37,42:36,41:35,40:35,39:34,38:33,37:32,36:31,35:30,34:29,33:29,32:28,31:27,30:26,29:25,28:24,27:23,26:22,25:22,24:21,23:20,22:19,21:18,20:17,19:16,18:16,17:15,16:14,15:13,14:12,13:11,12:10,11:10,10:9,9:8,8:7,7:6,6:5,5:4,4:3,3:2,2:1,1:1};return t[e]!==void 0?t[e]:Math.round(e*.65)},$w=e=>{const t=Y5(e);return e-t},Bk=e=>Object.values(e).reduce((t,r)=>t+(r||0),0),aie=(e,t)=>{const r=Y5(e.horasContrato),a=$w(e.horasContrato),n=t.filter(m=>m.docenteId===e.id),i=n.reduce((m,g)=>m+Bk(g.horasPorCurso),0),o=n.reduce((m,g)=>{if(g.funcionesLectivas&&g.funcionesLectivas.length>0)return m+g.funcionesLectivas.reduce((x,v)=>x+v.horas,0);if(g.funcionesNoLectivas&&g.funcionesNoLectivas.length>0)return m+g.funcionesNoLectivas.reduce((x,v)=>x+v.horas,0);{const x=g.otraFuncion&&parseInt(g.otraFuncion)||0;return m+x}},0),l=i+o,c=0,d=r-l,u=a-c,f=[],A=[];return l>r&&f.push(`Excede horas lectivas: ${l}/${r}`),c>a&&f.push(`Excede horas no lectivas: ${c}/${a}`),l<r&&l>0&&A.push(`Faltan ${d} horas lectivas`),{HA:r,HB:a,sumCursos:i,sumFunciones:c,sumFuncionesLectivas:o,totalHorasLectivas:l,restantesHA:d,restantesHB:u,horasContrato:e.horasContrato,valido:f.length===0,warnings:A,errors:f}},XPe=(e,t)=>{const r=aie(e,t),a=[];return r.errors.forEach(n=>{a.push({asignacionId:"",docenteId:e.id,tipo:"error",mensaje:`${e.nombre}: ${n}`})}),r.warnings.forEach(n=>{a.push({asignacionId:"",docenteId:e.id,tipo:"warning",mensaje:`${e.nombre}: ${n}`})}),a},YPe=e=>{const t=e.match(/^(\d+)([A-E])$/i);return t?`${t[1]}º${t[2].toUpperCase()}`:e},nie="horarios_generados",JPe=async e=>{try{const t=$t(st,nie,"global");await Us(t,{data:e})}catch(t){throw console.error("Error al guardar los horarios:",t),new Error("No se pudieron guardar los horarios generados.")}},sie=e=>{const t=$t(st,nie,"global");return rr(t,a=>{a.exists()?e(a.data().data||{}):e({})},a=>{console.error("Error al suscribirse a los horarios:",a),e({})})};var IV;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(IV||(IV={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OV;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(OV||(OV={}));var DV;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(DV||(DV={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=["user","model","function","system"];var PV;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(PV||(PV={}));var RV;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(RV||(RV={}));var LV;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(LV||(LV={}));var MV;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(MV||(MV={}));var w2;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(w2||(w2={}));var UV;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(UV||(UV={}));var HV;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(HV||(HV={}));var QV;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(QV||(QV={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class yv extends gl{constructor(t,r){super(t),this.response=r}}class iie extends gl{constructor(t,r,a,n){super(t),this.status=r,this.statusText=a,this.errorDetails=n}}class Gm extends gl{}class oie extends gl{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZPe="https://generativelanguage.googleapis.com",eRe="v1beta",tRe="0.24.1",rRe="genai-js";var dx;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(dx||(dx={}));class aRe{constructor(t,r,a,n,i){this.model=t,this.task=r,this.apiKey=a,this.stream=n,this.requestOptions=i}toString(){var t,r;const a=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||eRe;let i=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||ZPe}/${a}/${this.model}:${this.task}`;return this.stream&&(i+="?alt=sse"),i}}function nRe(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${rRe}/${tRe}`),t.join(" ")}async function sRe(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",nRe(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let a=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(a){if(!(a instanceof Headers))try{a=new Headers(a)}catch(n){throw new Gm(`unable to convert customHeaders value ${JSON.stringify(a)} to Headers: ${n.message}`)}for(const[n,i]of a.entries()){if(n==="x-goog-api-key")throw new Gm(`Cannot set reserved header name ${n}`);if(n==="x-goog-api-client")throw new Gm(`Header name ${n} can only be set using the apiClient field`);r.append(n,i)}}return r}async function iRe(e,t,r,a,n,i){const o=new aRe(e,t,r,a,i);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},dRe(i)),{method:"POST",headers:await sRe(o),body:n})}}async function lE(e,t,r,a,n,i={},o=fetch){const{url:l,fetchOptions:c}=await iRe(e,t,r,a,n,i);return oRe(l,c,o)}async function oRe(e,t,r=fetch){let a;try{a=await r(e,t)}catch(n){lRe(n,e)}return a.ok||await cRe(a,e),a}function lRe(e,t){let r=e;throw r.name==="AbortError"?(r=new oie(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof iie||e instanceof Gm||(r=new gl(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function cRe(e,t){let r="",a;try{const n=await e.json();r=n.error.message,n.error.details&&(r+=` ${JSON.stringify(n.error.details)}`,a=n.error.details)}catch{}throw new iie(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,a)}function dRe(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Ik(e.candidates[0]))throw new yv(`${vm(e)}`,e);return uRe(e)}else if(e.promptFeedback)throw new yv(`Text not available. ${vm(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ik(e.candidates[0]))throw new yv(`${vm(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),zV(e)[0]}else if(e.promptFeedback)throw new yv(`Function call not available. ${vm(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ik(e.candidates[0]))throw new yv(`${vm(e)}`,e);return zV(e)}else if(e.promptFeedback)throw new yv(`Function call not available. ${vm(e)}`,e)},e}function uRe(e){var t,r,a,n;const i=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const o of(n=(a=e.candidates)===null||a===void 0?void 0:a[0].content)===null||n===void 0?void 0:n.parts)o.text&&i.push(o.text),o.executableCode&&i.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&i.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}function zV(e){var t,r,a,n;const i=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const o of(n=(a=e.candidates)===null||a===void 0?void 0:a[0].content)===null||n===void 0?void 0:n.parts)o.functionCall&&i.push(o.functionCall);if(i.length>0)return i}const fRe=[w2.RECITATION,w2.SAFETY,w2.LANGUAGE];function Ik(e){return!!e.finishReason&&fRe.includes(e.finishReason)}function vm(e){var t,r,a;let n="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)n+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(n+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(n+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((a=e.candidates)===null||a===void 0)&&a[0]){const i=e.candidates[0];Ik(i)&&(n+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(n+=`: ${i.finishMessage}`))}return n}function mN(e){return this instanceof mN?(this.v=e,this):new mN(e)}function hRe(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=r.apply(e,t||[]),n,i=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(A){a[A]&&(n[A]=function(m){return new Promise(function(g,x){i.push([A,m,g,x])>1||l(A,m)})})}function l(A,m){try{c(a[A](m))}catch(g){f(i[0][3],g)}}function c(A){A.value instanceof mN?Promise.resolve(A.value.v).then(d,u):f(i[0][2],A)}function d(A){l("next",A)}function u(A){l("throw",A)}function f(A,m){A(m),i.shift(),i.length&&l(i[0][0],i[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function ARe(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=gRe(t),[a,n]=r.tee();return{stream:pRe(a),response:mRe(n)}}async function mRe(e){const t=[],r=e.getReader();for(;;){const{done:a,value:n}=await r.read();if(a)return VL(xRe(t));t.push(n)}}function pRe(e){return hRe(this,arguments,function*(){const r=e.getReader();for(;;){const{value:a,done:n}=yield mN(r.read());if(n)break;yield yield mN(VL(a))}})}function gRe(e){const t=e.getReader();return new ReadableStream({start(a){let n="";return i();function i(){return t.read().then(({value:o,done:l})=>{if(l){if(n.trim()){a.error(new gl("Failed to parse stream"));return}a.close();return}n+=o;let c=n.match($V),d;for(;c;){try{d=JSON.parse(c[1])}catch{a.error(new gl(`Error parsing JSON response: "${c[1]}"`));return}a.enqueue(d),n=n.substring(c[0].length),c=n.match($V)}return i()}).catch(o=>{let l=o;throw l.stack=o.stack,l.name==="AbortError"?l=new oie("Request aborted when reading from the stream"):l=new gl("Error reading from the stream"),l})}}})}function xRe(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const a of e){if(a.candidates){let n=0;for(const i of a.candidates)if(r.candidates||(r.candidates=[]),r.candidates[n]||(r.candidates[n]={index:n}),r.candidates[n].citationMetadata=i.citationMetadata,r.candidates[n].groundingMetadata=i.groundingMetadata,r.candidates[n].finishReason=i.finishReason,r.candidates[n].finishMessage=i.finishMessage,r.candidates[n].safetyRatings=i.safetyRatings,i.content&&i.content.parts){r.candidates[n].content||(r.candidates[n].content={role:i.content.role||"user",parts:[]});const o={};for(const l of i.content.parts)l.text&&(o.text=l.text),l.functionCall&&(o.functionCall=l.functionCall),l.executableCode&&(o.executableCode=l.executableCode),l.codeExecutionResult&&(o.codeExecutionResult=l.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),r.candidates[n].content.parts.push(o)}n++}a.usageMetadata&&(r.usageMetadata=a.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lie(e,t,r,a){const n=await lE(t,dx.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),a);return ARe(n)}async function cie(e,t,r,a){const i=await(await lE(t,dx.GENERATE_CONTENT,e,!1,JSON.stringify(r),a)).json();return{response:VL(i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function die(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function pN(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return vRe(t)}function vRe(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let a=!1,n=!1;for(const i of e)"functionResponse"in i?(r.parts.push(i),n=!0):(t.parts.push(i),a=!0);if(a&&n)throw new gl("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!a&&!n)throw new gl("No content is provided for sending chat message.");return a?t:r}function bRe(e,t){var r;let a={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const n=e.generateContentRequest!=null;if(e.contents){if(n)throw new Gm("CountTokensRequest must have one of contents or generateContentRequest, not both.");a.contents=e.contents}else if(n)a=Object.assign(Object.assign({},a),e.generateContentRequest);else{const i=pN(e);a.contents=[i]}return{generateContentRequest:a}}function VV(e){let t;return e.contents?t=e:t={contents:[pN(e)]},e.systemInstruction&&(t.systemInstruction=die(e.systemInstruction)),t}function yRe(e){return typeof e=="string"||Array.isArray(e)?{content:pN(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],wRe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function NRe(e){let t=!1;for(const r of e){const{role:a,parts:n}=r;if(!t&&a!=="user")throw new gl(`First content should be with role 'user', got ${a}`);if(!FV.includes(a))throw new gl(`Each item should include role field. Got ${a} but valid roles are: ${JSON.stringify(FV)}`);if(!Array.isArray(n))throw new gl("Content should have 'parts' property with an array of Parts");if(n.length===0)throw new gl("Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of n)for(const c of GV)c in l&&(i[c]+=1);const o=wRe[a];for(const l of GV)if(!o.includes(l)&&i[l]>0)throw new gl(`Content with role '${a}' can't contain '${l}' part`);t=!0}}function qV(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const a of r.parts)if(a===void 0||Object.keys(a).length===0||a.text!==void 0&&a.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV="SILENT_ERROR";class ERe{constructor(t,r,a,n={}){this.model=r,this.params=a,this._requestOptions=n,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,a!=null&&a.history&&(NRe(a.history),this._history=a.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var a,n,i,o,l,c;await this._sendPromise;const d=pN(t),u={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,d]},f=Object.assign(Object.assign({},this._requestOptions),r);let A;return this._sendPromise=this._sendPromise.then(()=>cie(this._apiKey,this.model,u,f)).then(m=>{var g;if(qV(m.response)){this._history.push(d);const x=Object.assign({parts:[],role:"model"},(g=m.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(x)}else{const x=vm(m.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}A=m}).catch(m=>{throw this._sendPromise=Promise.resolve(),m}),await this._sendPromise,A}async sendMessageStream(t,r={}){var a,n,i,o,l,c;await this._sendPromise;const d=pN(t),u={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,d]},f=Object.assign(Object.assign({},this._requestOptions),r),A=lie(this._apiKey,this.model,u,f);return this._sendPromise=this._sendPromise.then(()=>A).catch(m=>{throw new Error(KV)}).then(m=>m.response).then(m=>{if(qV(m)){this._history.push(d);const g=Object.assign({},m.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=vm(m);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(m=>{m.message!==KV&&console.error(m)}),A}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CRe(e,t,r,a){return(await lE(t,dx.COUNT_TOKENS,e,!1,JSON.stringify(r),a)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jRe(e,t,r,a){return(await lE(t,dx.EMBED_CONTENT,e,!1,JSON.stringify(r),a)).json()}async function kRe(e,t,r,a){const n=r.requests.map(o=>Object.assign(Object.assign({},o),{model:t}));return(await lE(t,dx.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:n}),a)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(t,r,a={}){this.apiKey=t,this._requestOptions=a,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=die(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var a;const n=VV(t),i=Object.assign(Object.assign({},this._requestOptions),r);return cie(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},n),i)}async generateContentStream(t,r={}){var a;const n=VV(t),i=Object.assign(Object.assign({},this._requestOptions),r);return lie(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},n),i)}startChat(t){var r;return new ERe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const a=bRe(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),n=Object.assign(Object.assign({},this._requestOptions),r);return CRe(this.apiKey,this.model,a,n)}async embedContent(t,r={}){const a=yRe(t),n=Object.assign(Object.assign({},this._requestOptions),r);return jRe(this.apiKey,this.model,a,n)}async batchEmbedContents(t,r={}){const a=Object.assign(Object.assign({},this._requestOptions),r);return kRe(this.apiKey,this.model,t,a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new gl("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new WV(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,a){if(!t.name)throw new Gm("Cached content must contain a `name` field.");if(!t.model)throw new Gm("Cached content must contain a `model` field.");const n=["model","systemInstruction"];for(const o of n)if(r!=null&&r[o]&&t[o]&&(r==null?void 0:r[o])!==t[o]){if(o==="model"){const l=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(l===c)continue}throw new Gm(`Different value for "${o}" specified in modelParams (${r[o]}) and cachedContent (${t[o]})`)}const i=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new WV(this.apiKey,i,a)}}const SRe=[{model:"gemini-2.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}},{model:"gemini-2.5-flash-lite",generationConfig:{temperature:.7,maxOutputTokens:1024}}],uie=()=>(console.warn("No se encontró la API key de Gemini"),null);async function _Re(e,t){try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),r}catch(r){return console.warn(`Modelo ${t.model} no disponible:`,r),null}}async function gN(){const e=uie();if(!e)return null;for(const t of SRe){const r=await _Re(e,t);if(r)return console.log(`Usando modelo ${t.model}`),r}return console.error("No se encontró ningún modelo de Gemini disponible"),null}function fie(e){try{const t=e.trim().replace(/^```json/i,"").replace(/^```/i,"").replace(/```$/i,"");return JSON.parse(t)}catch{return null}}function TRe(e){const t=[...e];for(let r=t.length-1;r>0;r--){const a=Math.floor(Math.random()*(r+1));[t[r],t[a]]=[t[a],t[r]]}return t}async function BRe(e,t=3){var a;const r=await gN();if(!r)return ZB(e,t);try{const n=`Genera ${t} preguntas de selección múltiple sobre el tema "${e}".
    Para cada pregunta, proporciona:
    1. Un enunciado claro y conciso
    2. 4 opciones de respuesta plausibles
    
    Devuelve las preguntas en formato JSON como este:
    {
      "preguntas": [
        {
          "enunciado": "¿Pregunta 1?",
          "opciones": ["Opción 1", "Opción 2", "Opción 3", "Opción 4"]
        }
      ]
    }`,o=(await r.generateContent(n)).response.text(),l=fie(o);return(a=l==null?void 0:l.preguntas)!=null&&a.length?l.preguntas.slice(0,t):(console.warn("Formato inesperado de respuesta:",o),ZB(e,t))}catch(n){return console.error("Error al generar preguntas:",n),ZB(e,t)}}async function IRe(e,t=30){var a;const r=await gN();if(!r)return eI(e);try{const n=e.filter(d=>d&&d.trim());if(n.length===0)return[];const i=`Analiza estas respuestas y extrae los conceptos clave con su relevancia:
    ${n.join(`
---
`)}
    
    Responde en formato JSON:
    {
      "keywords": [
        { "keyword": "concepto1", "score": 0.9 },
        { "keyword": "concepto2", "score": 0.8 }
      ]
    }
    
    Incluye hasta ${t} conceptos más relevantes.`,l=(await r.generateContent(i)).response.text(),c=fie(l);return(a=c==null?void 0:c.keywords)!=null&&a.length?c.keywords.filter(d=>d.keyword&&typeof d.score=="number").slice(0,t):(console.warn("Formato inesperado de respuesta:",l),eI(e))}catch(n){return console.error("Error al analizar respuestas:",n),eI(e)}}function ZB(e,t){const r=["Totalmente de acuerdo","De acuerdo","Neutral","En desacuerdo","Totalmente en desacuerdo"];return Array(t).fill(null).map((a,n)=>({enunciado:`Pregunta ${n+1} sobre ${e}`,opciones:TRe(r).slice(0,4)}))}function eI(e){const t=new Set(["el","la","los","las","un","una","unos","unas","de","del","a","ante","con","en","para","por","sobre","y","o","pero","si","no","que","cual","quien","como"]),r={},a=e.join(" ").toLowerCase().split(/\W+/).filter(n=>n.length>3&&!t.has(n));for(const n of a)r[n]=(r[n]||0)+1;return Object.entries(r).sort(([,n],[,i])=>i-n).slice(0,20).map(([n,i])=>({keyword:n,score:Math.min(1,i/a.length)}))}async function ORe(){const e=uie();if(!e)return null;const t={model:"gemini-2.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}};try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),console.log(`Usando modelo optimizado: ${t.model}`),r}catch(r){return console.warn("Modelo Pro no disponible, usando fallback:",r),gN()}}async function GL(e,t=2,r=!0,a="General"){var u,f;const n=e.substring(0,50).replace(/\n/g," ")+"...";console.log(`Iniciando generación con IA. Prompt: "${n}"`),console.log(`Configuración: maxRetries=${t}, useProModel=${r}`);try{const m=await cl(ax,"callGeminiGeneric")({prompt:e,module:a});if((u=m==null?void 0:m.data)!=null&&u.success&&typeof m.data.response=="string"&&m.data.response.length>0)return console.log("Respuesta obtenida vía Cloud Function (genérica)."),m.data.response;const x=await cl(ax,"callGeminiAI")({prompt:e,module:a});if((f=x==null?void 0:x.data)!=null&&f.success&&typeof x.data.response=="string"&&x.data.response.length>0)return console.log("Respuesta obtenida vía Cloud Function (secreto en backend)."),x.data.response}catch(A){const m=(A==null?void 0:A.message)||String(A);console.warn("Fallo llamada a Cloud Function callGeminiAI, intentando otras rutas:",m)}let i;try{if(r?(console.log("Intentando usar modelo Pro prioritariamente..."),i=await ORe(),i||(console.warn("Modelo Pro no disponible, intentando fallback a modelos alternativos"),i=await gN())):i=await gN(),!i)throw console.warn("IA en cliente no disponible (sin API key en frontend o sin conectividad). Usar fallback."),new Error("IA_NOT_AVAILABLE")}catch(A){throw console.warn("Inicialización de IA fallida, continuando con fallback:",A),new Error("IA_NOT_AVAILABLE")}let o=0,l,c="",d=0;for(;o<=t;){try{console.log(`Intento ${o+1}/${t+1} de generación con IA`);const A=e+`

IMPORTANTE: Devuelve SOLO el JSON estructurado sin comentarios adicionales. El JSON debe ser válido y parseable.`,m=await i.generateContent(A);if(m!=null&&m.response&&typeof m.response.text=="function"){const g=m.response.text();if(g&&g.length>100){if(console.log(`Respuesta generada exitosamente (${g.length} caracteres)`),g.includes("{")&&g.includes("}")||g.includes("[")&&g.includes("]"))return console.log("La respuesta contiene estructuras JSON"),g;if(console.warn("La respuesta no parece contener JSON válido"),g.length>d&&(c=g,d=g.length),o===t)return console.log("Usando la mejor respuesta disponible en el último intento"),c}else console.warn("Respuesta de IA demasiado corta, reintentando...")}else if(m){const g=typeof m=="string"?m:JSON.stringify(m);return console.warn("Formato de respuesta inesperado, usando fallback a string"),g}else console.warn("No se recibió respuesta válida del modelo")}catch(A){console.error(`Error en intento ${o+1}:`,A),l=A,A.message&&(A.message.includes("token")||A.message.includes("length")||A.message.includes("limit"))&&(console.log("Error relacionado con límites de tokens, intentando simplificar el prompt"),e=e.substring(0,Math.floor(e.length*.75)))}if(o++,o<=t){const A=Math.min(1e3*Math.pow(2,o),8e3);console.log(`Esperando ${A}ms antes de reintentar...`),await new Promise(m=>setTimeout(m,A))}}if(c)return console.log("Devolviendo la mejor respuesta disponible después de agotar reintentos"),c;throw console.error(`Todos los intentos de generación fallaron después de ${t+1} intentos`),l||new Error("No se pudo generar contenido después de múltiples intentos. Por favor, intente nuevamente.")}const Z5=e=>{const[t,r]=e.split(":").map(Number);return t*60+r},DRe=e=>e==="Viernes",XV=(e,t)=>{if(!DRe(e))return!0;const r=Is.find(a=>a.bloque===t);return!!r&&Z5(r.fin)<=Z5("13:00")},Vw=e=>{const t=(e||"").toLowerCase();return["mecánica","mecanica","taller","máquinas","maquinas","automotriz","electromecánica","electromecanica","metal","soldadura","tp"].some(r=>t.includes(r))},gg=e=>{const t=(e||"").toLowerCase();return["lenguaje","matem","historia","inglés","ingles","ciencias","biología","biologia","química","quimica","física","fisica","ed. física","educación física","ciudadanía","ciudadania"].some(r=>t.includes(r))},cF=e=>{const t=(e||"").toLowerCase();return["taller","práctica","practica","laboratorio","mecánica","mecanica","electr","maquin","tp"].some(r=>t.includes(r))},dF=e=>{const t=Is.find(r=>r.bloque===e);return t?Z5(t.inicio)>=Z5("13:40"):!1};function qL(){const e={};for(const t of Th){e[t]={};for(const r of Is){const a=String(r.bloque);e[t][a]={}}}return e}function hie(e){const t=[];for(const r of Object.keys(e)){const a=e[r];for(const n of Object.keys(a)){const i=a[n],o=new Map;for(const l of Object.keys(i)){const c=i[l];if(c!=null&&c.profesor){const d=o.get(c.profesor)||[];d.push(l),o.set(c.profesor,d)}}for(const[l,c]of o.entries())c.length>1&&t.push(`Tope docente ${l} el ${r} bloque ${n} en cursos: ${c.join(", ")}`)}}return t}function FRe(e,t){const r=qL();for(const a of e){if(!r[a.dia])continue;const n=String(a.bloque);r[a.dia][n]&&t.includes(a.curso)&&(r[a.dia][n][a.curso]={asignatura:a.asignatura,profesor:a.docente})}return r}function PRe(e,t,r){var u,f,A,m;const a=qL(),n=e.map(g=>({...g})),i={},o={},l=(g,x)=>`${g}|${x}`;for(const g of t)i[g]={};n.sort((g,x)=>x.horas-g.horas);const c=(g,x)=>Is.map(v=>v.bloque).filter(v=>!!a[x][String(v)][g]);for(const g of n){let x=g.horas;e:for(;x>0;){let v=!1;const y=[...Th].sort((N,E)=>{const B=c(g.curso,N).length;return c(g.curso,E).length-B});for(const N of y)if(!(r.terceroSoloPlanGeneral&&typeof g.curso=="string"&&g.curso.trim().startsWith("3º")&&!gg(g.asignatura)))for(let E=0;E<Is.length;E++){const _=Is[E].bloque;if(!XV(N,_)||r.practicasPM&&cF(g.asignatura)&&!dF(_))continue;const I=l(N,_),j=(u=i[g.curso])==null?void 0:u[I],k=(f=o[g.docente])==null?void 0:f[I],T=a[N][String(_)][g.curso];if(!j&&!k&&!T){const L=Vw(g.asignatura),F=gg(g.asignatura),S=Math.max(1,Math.min(10,r.maxConsecutivasMecanica??10)),M=Math.max(1,Math.min(3,r.maxConsecutivasPlanGeneral??3)),H=Q=>{const G=Z=>Q==="mec"?Vw(Z):gg(Z);let X=0;for(let Z=E-1;Z>=0;Z--){const U=Is[Z].bloque,Y=a[N][String(U)][g.curso];if(!Y)break;if(G(Y.asignatura))X++;else break}for(let Z=E+1;Z<Is.length;Z++){const U=Is[Z].bloque,Y=a[N][String(U)][g.curso];if(!Y)break;if(G(Y.asignatura))X++;else break}return X};if(L&&H("mec")+1>S||F&&H("pg")+1>M)continue;if(a[N][String(_)][g.curso]={asignatura:g.asignatura,profesor:g.docente},i[g.curso][I]=!0,o[g.docente]=o[g.docente]||{},o[g.docente][I]=!0,x--,v=!0,x===0)break e;const K=Is[E+1];if(K&&XV(N,K.bloque)){const Q=l(N,K.bloque),G=a[N][String(K.bloque)][g.curso],X=(A=o[g.docente])==null?void 0:A[Q],Z=()=>{if(r.practicasPM&&cF(g.asignatura)&&!dF(K.bloque))return!1;const U=Vw(g.asignatura),Y=gg(g.asignatura),P=D=>{const W=ce=>D==="mec"?Vw(ce):gg(ce);let J=1;for(let ce=E-1;ce>=0;ce--){const ie=Is[ce].bloque,re=a[N][String(ie)][g.curso];if(!re)break;if(W(re.asignatura))J++;else break}return J++,J};return!(U&&P("mec")>(r.maxConsecutivasMecanica??10)||Y&&P("pg")>(r.maxConsecutivasPlanGeneral??3))};if(x>0&&!((m=i[g.curso])!=null&&m[Q])&&!X&&!G&&Z()&&(a[N][String(K.bloque)][g.curso]={asignatura:g.asignatura,profesor:g.docente},i[g.curso][Q]=!0,o[g.docente][Q]=!0,x--,x===0))break e}}}if(!v)break}}const d=[];for(const g of n){let x=0;for(const y of Th)for(const N of Is){const E=a[y][String(N.bloque)][g.curso];E&&E.asignatura===g.asignatura&&E.profesor===g.docente&&x++}const v=g.horas-x;v>0&&d.push(`No se pudieron ubicar ${v} bloque(s) para ${g.asignatura} (${g.curso}) con ${g.docente}`)}for(const g of t)for(const x of Th){const v=Is.map(y=>y.bloque).filter(y=>!!a[x][String(y)][g]);if(v.length>0){const y=Math.min(...v),N=Math.max(...v);for(let E=y;E<=N;E++)if(!a[x][String(E)][g]){d.push(`Ventana detectada en ${g} el ${x} entre bloques ${y}–${N}`);break}}}return d.push(...hie(a)),{horarios:a,conflictos:d,fuente:"fallback"}}async function RRe(e,t,r,a){var o,l;const n={maxConsecutivasMecanica:(a==null?void 0:a.maxConsecutivasMecanica)??10,maxConsecutivasPlanGeneral:(a==null?void 0:a.maxConsecutivasPlanGeneral)??3,practicasPM:(a==null?void 0:a.practicasPM)??!1,terceroSoloPlanGeneral:(a==null?void 0:a.terceroSoloPlanGeneral)??!1},i=[];for(const c of e){const d=c.docenteNombre||((o=t.find(u=>u.id===c.docenteId))==null?void 0:o.nombre)||"Docente";for(const[u,f]of Object.entries(c.horasPorCurso||{})){const A=typeof f=="number"?f:0;A>0&&u&&i.push({curso:u,asignatura:c.asignaturaOModulo||"Asignatura",docente:d,horas:A})}}if(i.length===0)return{horarios:qL(),conflictos:[],fuente:"fallback"};try{const c={dias:Th,bloques:Is,cursos:r,demanda:i},d=`Genera un horario semanal sin topes de profesor entre cursos.
Reglas:
- Un docente no puede estar en más de un curso en el mismo día y bloque.
- Cada item de demanda representa cuántos bloques deben ubicarse.
- Usa solamente los días y bloques provistos.
- Distribuye equilibradamente a lo largo de la semana evitando ventanas (huecos) y procurando no dejar días completamente vacíos por curso.
- El día Viernes no se pueden asignar bloques que terminen después de las 13:00.
 - Máximo de bloques consecutivos de asignaturas de mecánica: ${n.maxConsecutivasMecanica}.
 - Máximo de bloques consecutivos de asignaturas de plan general: ${n.maxConsecutivasPlanGeneral}.
 - ${n.practicasPM?"Las asignaturas prácticas (taller/práctica/laboratorio/TP) deben ubicarse en horario PM (desde 13:40).":"Preferir, si es posible, las asignaturas prácticas en PM, pero no obligatorio."}
 - ${n.terceroSoloPlanGeneral?"Para cursos de 3º medio (3ºA, 3ºB, etc.), solo ubicar asignaturas de plan general.":"Sin restricción especial para 3º medio."}

Entrada JSON:
${JSON.stringify(c,null,2)}

Devuelve SOLO JSON válido con el formato:
{
	"sesiones": [
		{ "curso": "1ºA", "dia": "Lunes", "bloque": 1, "asignatura": "Matemática", "docente": "Nombre" }
	]
}`,u=await GL(d,2,!0,"Horarios"),f=typeof window<"u"&&typeof localStorage<"u"&&localStorage.getItem("DEBUG_HORARIO_AI")==="1";if(f)try{localStorage.setItem("HORARIO_AI_RAW",typeof u=="string"?u:String(u)),console.debug("[HORARIO_AI] RAW respuesta IA guardada en localStorage.HORARIO_AI_RAW")}catch{}const m=(y=>{let N=(y==null?void 0:y.trim())||"";const E=N.match(/```(?:json)?\s*([\s\S]*?)\s*```/i);if(E&&E[1]&&(N=E[1].trim()),!(N.startsWith("{")&&N.endsWith("}"))){const H=N.indexOf("{"),K=N.lastIndexOf("}");H!==-1&&K!==-1&&K>H&&(N=N.slice(H,K+1))}if(N=N.replace(/[“”]/g,'"').replace(/[‘’]/g,"'").replace(/\/(\/[^\n]*\n)/g,"").replace(/\/\*[\s\S]*?\*\//g,"").replace(/,\s*([}\]])/g,"$1"),f)try{localStorage.setItem("HORARIO_AI_JSON_CANDIDATE",N),console.debug("[HORARIO_AI] JSON candidato guardado en localStorage.HORARIO_AI_JSON_CANDIDATE")}catch{}const B=JSON.parse(N),_=H=>H.normalize("NFD").replace(/[\u0300-\u036f]/g,""),I=H=>{if(!H||typeof H!="string")return null;const K=_(H.toLowerCase().trim());return{lunes:"Lunes",martes:"Martes",miercoles:"Miércoles",jueves:"Jueves",viernes:"Viernes",monday:"Lunes",tuesday:"Martes",wednesday:"Miércoles",thursday:"Jueves",friday:"Viernes",lun:"Lunes",mar:"Martes",mie:"Miércoles",mier:"Miércoles",jue:"Jueves",vie:"Viernes"}[K]||null},j=H=>_(H.toLowerCase().replace(/[º°]/g,"").replace(/\s+/g,"")),k=new Map;(Array.isArray(r)?r:[]).forEach(H=>k.set(j(String(H)),String(H)));const T=H=>{if(!H||typeof H!="string")return null;let K=H.trim();K=K.replace("°","º"),K=K.replace(/º\s+/g,"º"),K=K.replace(/\s+/g,K.includes("º")?"":" ");const Q=j(K);if(k.has(Q))return k.get(Q);const G=K.match(/(\d{1,2})\s*º?\s*([A-Za-z])/);if(G){const X=`${G[1]}º${G[2].toUpperCase()}`,Z=j(X);if(k.has(Z))return k.get(Z)}return K},L=new Set(Is.map(H=>H.bloque)),F=new Set(Array.isArray(r)?r:[]),M=(H=>{if(!H)return[];let K=[];Array.isArray(H)?K=H:Array.isArray(H.sesiones)?K=H.sesiones:H.horario&&Array.isArray(H.horario.sesiones)?K=H.horario.sesiones:H.schedule&&Array.isArray(H.schedule.sessions)?K=H.schedule.sessions:Array.isArray(H.clases)?K=H.clases:Array.isArray(H.asignaciones)?K=H.asignaciones:Array.isArray(H.data)?K=H.data:Array.isArray(H.output)?K=H.output:Array.isArray(H.result)&&(K=H.result);const Q=[],G=X=>{if(!X||typeof X!="object")return;const Z=T(X.curso||X.cursoId||X.course||X.class||X.grupo),U=I(X.dia||X.día||X.day||X.weekday);let Y=X.bloque??X.block??X.slot??X.periodo??X.period;if(typeof Y=="string"){const W=Y.match(/(\d{1,2})/);W&&(Y=parseInt(W[1],10))}const P=(X.asignatura||X.materia||X.subject||X.asig||"").toString(),D=(X.docente||X.profesor||X.teacher||X.profe||"").toString();!Z||!U||!Y||!L.has(Y)||F.size&&!F.has(Z)||Q.push({curso:Z,dia:U,bloque:Y,asignatura:P,docente:D})};if(K.length>0)for(const X of K)G(X);else{if(H.horario&&typeof H.horario=="object")for(const X of Object.keys(H.horario)){const Z=I(X);if(!Z)continue;const U=H.horario[X];if(!(!U||typeof U!="object"))for(const Y of Object.keys(U)){let P=Y;if(typeof P=="string"){const W=P.match(/(\d{1,2})/);W&&(P=parseInt(W[1],10))}if(!L.has(P))continue;const D=U[Y];if(Array.isArray(D))for(const W of D)G({...W||{},dia:Z,bloque:P});else if(D&&typeof D=="object")for(const W of Object.keys(D)){const J=T(W),ce=D[W];ce&&typeof ce=="object"&&G({curso:J,dia:Z,bloque:P,asignatura:ce.asignatura,docente:ce.docente||ce.profesor||ce.teacher})}}}for(const X of Object.keys(H)){const Z=H[X];if(Array.isArray(Z))for(const U of Z)G(U)}}return Q})(B);if(f)try{localStorage.setItem("HORARIO_AI_SESIONES_COUNT",String(M.length))}catch{}return{sesiones:M}})(u);if(!((l=m==null?void 0:m.sesiones)!=null&&l.length))throw new Error("Respuesta IA sin sesiones");const g=FRe(m.sesiones,r),x=hie(g),v=[];for(const y of r)for(const N of Th){let E=0,B=0;for(const _ of Is){const I=g[N][String(_.bloque)][y];I&&(Vw(I.asignatura)?E++:E=0,gg(I.asignatura)?B++:B=0,E>(n.maxConsecutivasMecanica??10)&&v.push(`Exceso mecánica consecutiva en ${y} ${N}`),B>(n.maxConsecutivasPlanGeneral??3)&&v.push(`Exceso plan general consecutiva en ${y} ${N}`),n.practicasPM&&cF(I.asignatura)&&!dF(_.bloque)&&v.push(`Práctica fuera de PM en ${y} ${N} bloque ${_.bloque}`),n.terceroSoloPlanGeneral&&y.trim().startsWith("3º")&&!gg(I.asignatura)&&v.push(`3º medio con asignatura no plan general en ${y} ${N} bloque ${_.bloque}`))}}return{horarios:g,conflictos:[...x,...v],fuente:"IA"}}catch(c){return c instanceof Error&&c.message==="IA_NOT_AVAILABLE"?console.warn("IA no disponible. Generando horario con algoritmo fallback."):console.warn("Falla IA en generación de horario, usando fallback:",c),PRe(i,r,n)}}const LRe=`
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes scaleIn {
    from { transform: scale(0.95); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  @keyframes slideInFromBottom {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }

  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out forwards;
  }

  .animate-scaleIn {
    animation: scaleIn 0.3s ease-out forwards;
  }

  .animate-slideIn {
    animation: slideInFromBottom 0.3s ease-out forwards;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.05);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(0,0,0,0.15);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(0,0,0,0.25);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.05);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.15);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255,255,255,0.25);
  }
`,MRe=()=>{w.useEffect(()=>{const he=document.createElement("style");return he.innerHTML=LRe,document.head.appendChild(he),()=>{document.head.removeChild(he)}},[]);const[e,t]=w.useState([]),[r,a]=w.useState([]),[n,i]=w.useState({busqueda:"",curso:"",asignatura:"",departamento:""}),[o,l]=w.useState(!1),[c,d]=w.useState("docentes"),[u,f]=w.useState([]),[A,m]=w.useState(!1),[g,x]=w.useState(null),[v,y]=w.useState(null),[N,E]=w.useState([]),[B,_]=w.useState(null),[I,j]=w.useState(on[0]||""),[k,T]=w.useState(!1),[L,F]=w.useState({maxConsecutivasMecanica:10,maxConsecutivasPlanGeneral:3,practicasPM:!1,terceroSoloPlanGeneral:!1}),[S,M]=w.useState(!1),[H,K]=w.useState({nombre:"",email:"",departamento:"General",horasContrato:44,perfil:"PROFESORADO"}),[Q,G]=w.useState("");w.useEffect(()=>GPe(ve=>t(ve)),[]),w.useEffect(()=>KPe(ve=>{const le=ve.map(ne=>{let Ae=ne.funcionesLectivas||[];!Ae.length&&ne.funcionesNoLectivas&&ne.funcionesNoLectivas.length?Ae=ne.funcionesNoLectivas:!Ae.length&&ne.otraFuncion&&(Ae=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:ne.otraFuncion,horas:parseInt(ne.otraFuncion)||0}]);const{funcionesNoLectivas:pe,otraFuncion:ke,...Le}=ne;return{...Le,funcionesLectivas:Ae}});a(le)}),[]),w.useEffect(()=>sie(ve=>{x(ve&&Object.keys(ve).length>0?ve:null)}),[]);const X=w.useMemo(()=>{const he={};return e.forEach(ve=>{const le=r.filter(ne=>ne.docenteId===ve.id);he[ve.id]=aie(ve,le)}),he},[e,r]);w.useEffect(()=>{const he=[];e.forEach(ve=>he.push(...XPe(ve,r))),f(he)},[e,r]);const Z=w.useMemo(()=>Q?e.filter(he=>{var ve;return he.nombre.toLowerCase().includes(Q.toLowerCase())||((ve=he.email)==null?void 0:ve.toLowerCase().includes(Q.toLowerCase()))}):e,[e,Q]),U=w.useMemo(()=>r.filter(ve=>{const le=e.find(ne=>ne.id===ve.docenteId);return!(!le||n.busqueda&&!le.nombre.toLowerCase().includes(n.busqueda.toLowerCase())||n.asignatura&&ve.asignaturaOModulo!==n.asignatura||n.departamento&&le.departamento!==n.departamento||n.curso&&!Object.keys(ve.horasPorCurso).includes(n.curso))}).sort((ve,le)=>ve.docenteId!==le.docenteId?ve.docenteId.localeCompare(le.docenteId):(ve.asignaturaOModulo||"").localeCompare(le.asignaturaOModulo||"")),[r,e,n]),Y=async()=>{try{if(m(!0),!H.nombre||!H.email){alert("El nombre y email son obligatorios"),m(!1);return}await qPe(H),M(!1),K({nombre:"",email:"",departamento:"General",horasContrato:44,perfil:"PROFESORADO"}),alert("Docente creado exitosamente")}catch(he){console.error(he),alert("Error al crear docente")}finally{m(!1)}},P=w.useCallback(()=>{if(e.length===0)return;const he={id:`asig_${Date.now()}`,docenteId:e[0].id,docenteNombre:e[0].nombre,asignaturaOModulo:cn[0],funcionesLectivas:[],horasPorCurso:{},horasXAsig:0};a(ve=>[...ve,he])},[e]),D=w.useCallback((he,ve)=>{const le=r.filter(pe=>pe.docenteId===he).map(pe=>pe.asignaturaOModulo);let ne=cn[0];for(const pe of cn)if(!le.includes(pe)){ne=pe;break}const Ae={id:`asig_${Date.now()}`,docenteId:he,docenteNombre:ve,asignaturaOModulo:ne,funcionesLectivas:[],horasPorCurso:{},horasXAsig:0};a(pe=>[...pe,Ae])},[r]),W=w.useCallback(he=>a(ve=>ve.filter(le=>le.id!==he)),[]),J=w.useCallback(he=>{a(ve=>ve.map(le=>{if(le.id!==he)return le;const ne={id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:"",horas:0};return{...le,funcionesLectivas:[...le.funcionesLectivas||[],ne]}}))},[]),ce=w.useCallback((he,ve,le,ne)=>{a(Ae=>Ae.map(pe=>{if(pe.id!==he)return pe;const ke=(pe.funcionesLectivas||[]).map(Le=>Le.id===ve?{...Le,[le]:ne}:Le);return{...pe,funcionesLectivas:ke}}))},[]),ie=w.useCallback((he,ve)=>{a(le=>le.map(ne=>{if(ne.id!==he)return ne;const Ae=(ne.funcionesLectivas||[]).filter(pe=>pe.id!==ve);return{...ne,funcionesLectivas:Ae}}))},[]),re=w.useCallback((he,ve,le)=>{a(ne=>ne.map(Ae=>{if(Ae.id!==he)return Ae;const pe={...Ae,[ve]:le};if(ve==="docenteId"){const ke=e.find(Le=>Le.id===le);ke&&(pe.docenteNombre=ke.nombre)}return ve==="horasPorCurso"&&(pe.horasXAsig=Bk(le)),pe}))},[e]),de=w.useCallback((he,ve,le)=>{a(ne=>ne.map(Ae=>{if(Ae.id!==he)return Ae;const pe={...Ae.horasPorCurso};return le===0?delete pe[ve]:pe[ve]=le,{...Ae,horasPorCurso:pe,horasXAsig:Bk(pe)}}))},[]),oe=w.useCallback(he=>{m(!0);const ve=new FileReader;ve.onload=le=>{var ne;try{const Ae=new Uint8Array((ne=le.target)==null?void 0:ne.result),pe=i1(Ae,{type:"array"}),ke=pe.Sheets["Docentes 2025"]||pe.Sheets[pe.SheetNames[0]],Le=Fs.sheet_to_json(ke,{header:1});let qe=-1;for(let We=0;We<Le.length;We++){const ct=Le[We];if(ct&&ct.some(Ze=>typeof Ze=="string"&&(Ze.includes("Docente")||Ze.includes("ASIGNATURA")||on.some(Qe=>Ze.includes(Qe.replace("º","")))))){qe=We;break}}if(qe===-1){alert("No se encontró la fila de encabezado en el archivo");return}const ze=Le[qe],Re=[];for(let We=qe+1;We<Le.length;We++){const ct=Le[We];if(!ct||ct.length===0)continue;const Ze=ct[ze.indexOf("Docente")]||"";if(!Ze)continue;const Qe=e.find(Pr=>Pr.nombre.toLowerCase().includes(Ze.toLowerCase()));if(!Qe)continue;const wt={};ze.forEach((Pr,yr)=>{if(typeof Pr=="string"){const Tn=YPe(Pr.trim());if(on.includes(Tn)){const Rr=parseInt(ct[yr])||0;Rr>0&&(wt[Tn]=Rr)}}});let ar=[];const qt=ct[ze.indexOf("FUNCIONES LECTIVAS")]||ct[ze.indexOf("FUNCIONES NO LECTIVAS")]||ct[ze.indexOf("OTRA FUNCIÓN")]||"";typeof qt=="string"&&qt.includes(":")?ar=qt.split(",").map(Pr=>{const[yr,Tn]=Pr.split(":").map(Rr=>Rr.trim());return{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:yr,horas:parseInt(Tn)||0}}):qt&&(ar=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:qt,horas:0}]);const gr={id:`import_${Date.now()}_${We}`,docenteId:Qe.id,docenteNombre:Qe.nombre,asignaturaOModulo:ct[ze.indexOf("ASIGNATURA O MÓDULO")]||"",funcionesLectivas:ar,horasPorCurso:wt,horasXAsig:Bk(wt)};Re.push(gr)}a(Re),alert(`Se importaron ${Re.length} asignaciones exitosamente`)}catch(Ae){console.error("Error al importar:",Ae),alert("Error al procesar el archivo. Verifique el formato.")}finally{m(!1)}},ve.readAsArrayBuffer(he)},[e]),be=w.useCallback(()=>{const he=r.map(ne=>{const Ae=e.find(qe=>qe.id===ne.docenteId),pe=X[ne.docenteId];let ke="";ne.funcionesLectivas&&ne.funcionesLectivas.length>0?ke=ne.funcionesLectivas.map(qe=>`${qe.nombre}: ${qe.horas}h`).join(", "):ne.funcionesNoLectivas&&ne.funcionesNoLectivas.length>0?ke=ne.funcionesNoLectivas.map(qe=>`${qe.nombre}: ${qe.horas}h`).join(", "):ne.otraFuncion&&(ke=ne.otraFuncion);const Le={Docente:ne.docenteNombre,"ASIGNATURA O MÓDULO":ne.asignaturaOModulo||"","FUNCIONES LECTIVAS":ke,"HORAS X ASIG.":ne.horasXAsig||0};return on.forEach(qe=>Le[qe]=ne.horasPorCurso[qe]||0),pe&&(Le["HORAS LECTIVAS (HA)"]=pe.HA,Le["HORAS NO LECTIVAS (HB)"]=pe.HB,Le["HORAS CONTRATO"]=(Ae==null?void 0:Ae.horasContrato)||0),Le}),ve=Fs.json_to_sheet(he),le=Fs.book_new();Fs.book_append_sheet(le,ve,"Horarios"),K1(le,`horarios_${new Date().toISOString().split("T")[0]}.xlsx`)},[r,e,X]),q=w.useCallback(async()=>{try{m(!0);const he=on,ve=await RRe(r,e,he,L);y(ve.horarios),E(ve.conflictos||[]),_(ve.fuente),!I&&he.length&&j(he[0])}catch(he){console.error("Error al generar horario:",he),alert("No se pudo generar el horario.")}finally{m(!1)}},[r,e,I,L]),we=w.useCallback(async()=>{if(!v){alert("No hay un horario generado para guardar.");return}try{m(!0),await JPe(v),alert("Horario guardado exitosamente"),x(v)}catch(he){console.error("Error al guardar horario:",he),alert("Error al guardar el horario")}finally{m(!1)}},[v]),Te=w.useCallback(()=>{y(null),E([]),_(null)},[]),Ee=w.useCallback(async()=>{if(u.filter(ve=>ve.tipo==="error").length>0){alert("No se puede guardar. Hay errores que deben corregirse primero.");return}try{m(!0);const ve=[],le=[];r.forEach(Ae=>{let pe=Ae.funcionesLectivas||[];Ae.funcionesNoLectivas&&Ae.funcionesNoLectivas.length>0&&pe.length===0?pe=Ae.funcionesNoLectivas.map(Re=>({id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:Re.nombre,horas:Re.horas})):Ae.otraFuncion&&pe.length===0&&(pe=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:Ae.otraFuncion,horas:parseInt(Ae.otraFuncion)||0}]);const{funcionesNoLectivas:ke,otraFuncion:Le,...qe}=Ae,ze={...qe,funcionesLectivas:pe};if(Ae.id.startsWith("asig_")||Ae.id.startsWith("import_")){const{id:Re,...We}=ze;le.push(We)}else ve.push(ze)});const ne=[...ve.map(({id:Ae,...pe})=>pe),...le];await WPe(ne,!0),alert("Horarios guardados exitosamente")}catch(ve){console.error("Error al guardar horarios:",ve),alert("Error al guardar los horarios")}finally{m(!1)}},[u,r]),ue=he=>{const ve=X[he];return ve?ve.errors.length>0?"red":ve.warnings.length>0?"yellow":"green":"gray"},ge=()=>S?s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-96 max-w-full overflow-hidden animate-scaleIn",children:[s.jsx("div",{className:"p-5 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[s.jsx(P5,{className:"w-5 h-5"}),"Añadir Nuevo Docente"]}),s.jsx("button",{onClick:()=>M(!1),className:"text-white/80 hover:text-white p-1 rounded-full hover:bg-white/20 transition-all duration-200",disabled:A,children:s.jsx(ho,{className:"w-5 h-5"})})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1.5",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Nombre Completo"]}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:"text",value:H.nombre,onChange:he=>K({...H,nombre:he.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"Nombre Apellido",required:!0})})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1.5",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Email"]}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:"email",value:H.email,onChange:he=>K({...H,email:he.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"correo@ejemplo.com",required:!0})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Departamento"}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:"text",value:H.departamento,onChange:he=>K({...H,departamento:he.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"Ej: Matemáticas, Lenguaje, etc."})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Horas Contrato"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",value:H.horasContrato,onChange:he=>K({...H,horasContrato:parseInt(he.target.value)||0}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",min:1,max:44}),s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs",children:"horas"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Perfil"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:H.perfil,onChange:he=>K({...H,perfil:he.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 appearance-none",children:[s.jsx("option",{value:"PROFESORADO",children:"Profesorado"}),s.jsx("option",{value:"SUBDIRECCION",children:"Subdirección"}),s.jsx("option",{value:"COORDINACION_TP",children:"Coordinación TP"})]}),s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:s.jsx("svg",{className:"w-4 h-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),s.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>M(!1),className:"px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",disabled:A,children:"Cancelar"}),s.jsx("button",{onClick:Y,className:"px-4 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg shadow-sm disabled:opacity-50 transition-all duration-200 flex items-center gap-2",disabled:A||!H.nombre||!H.email,children:A?s.jsxs(s.Fragment,{children:[s.jsx(si,{className:"w-4 h-4 animate-spin"}),s.jsx("span",{children:"Guardando..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Dae,{className:"w-4 h-4"}),s.jsx("span",{children:"Guardar"})]})})]})]}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-750 px-6 py-3 text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Fae,{className:"w-3.5 h-3.5"}),s.jsxs("span",{children:["Los campos marcados con ",s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500 inline-block"})," son obligatorios"]})]})})]})}):null;return s.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-6 bg-gradient-to-r from-blue-600 to-indigo-700 dark:from-blue-800 dark:to-indigo-900 rounded-xl p-6 shadow-lg relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 bg-white dark:bg-gray-900 opacity-5",children:[s.jsx("div",{className:"w-96 h-96 rounded-full bg-white dark:bg-blue-600 absolute -top-20 -right-20 opacity-20"}),s.jsx("div",{className:"w-64 h-64 rounded-full bg-white dark:bg-indigo-600 absolute -bottom-10 -left-10 opacity-20"})]}),s.jsx("div",{className:"relative z-10",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center",children:[s.jsx(Ro,{className:"mr-3 h-8 w-8"}),"Crear Horarios"]}),s.jsx("p",{className:"text-blue-100 dark:text-blue-200 max-w-2xl",children:"Sistema de gestión de carga horaria docente con validación 65%/35% y visualización en tiempo real"})]}),s.jsxs("div",{className:"mt-4 md:mt-0 flex gap-3",children:[s.jsxs("button",{onClick:()=>l(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white text-sm rounded-lg transition-all duration-200 border border-white border-opacity-30",children:[s.jsx(wb,{className:"w-4 h-4"}),s.jsx("span",{children:"Ver estadísticas"})]}),s.jsxs("button",{onClick:Ee,disabled:u.some(he=>he.tipo==="error")||A,className:"flex items-center justify-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md",children:[s.jsx(kl,{className:"w-4 h-4"}),s.jsx("span",{children:A?"Guardando...":"Guardar cambios"})]})]})]})})]}),s.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[s.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-750 border-b border-gray-100 dark:border-gray-700 flex items-center",children:[s.jsx(ZN,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mr-2"}),s.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Filtros y acciones"})]}),s.jsxs("div",{className:"p-5",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[s.jsx("div",{className:"flex-1 md:max-w-xs",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(z1,{className:"text-gray-400 w-4 h-4"})}),s.jsx("input",{type:"text",placeholder:"Buscar docente...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",value:Q,onChange:he=>G(he.target.value)})]})}),s.jsxs("div",{className:"flex gap-3 flex-wrap",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Im,{className:"text-gray-400 w-4 h-4"})}),s.jsxs("select",{className:"pl-10 pr-8 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 min-w-[150px]",value:n.curso,onChange:he=>i(ve=>({...ve,curso:he.target.value})),children:[s.jsx("option",{value:"",children:"Todos los cursos"}),on.map(he=>s.jsx("option",{value:he,children:he},he))]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Rs,{className:"text-gray-400 w-4 h-4"})}),s.jsxs("select",{className:"pl-10 pr-8 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 min-w-[180px]",value:n.asignatura,onChange:he=>i(ve=>({...ve,asignatura:he.target.value})),children:[s.jsx("option",{value:"",children:"Todas las asignaturas"}),cn.map(he=>s.jsx("option",{value:he,children:he},he))]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[s.jsxs("button",{onClick:()=>M(!0),className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[s.jsx(P5,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"text-xs font-medium mt-1",children:"Nuevo Docente"})]}),s.jsxs("button",{onClick:P,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[s.jsx(Si,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"text-xs font-medium mt-1",children:"Agregar Asignatura"})]}),s.jsxs("label",{className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white rounded-lg transition-all duration-200 shadow-sm cursor-pointer group",children:[s.jsx(kx,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"text-xs font-medium mt-1",children:"Importar Excel"}),s.jsx("input",{type:"file",accept:".xlsx,.xls",className:"hidden",onChange:he=>{var ve;return((ve=he.target.files)==null?void 0:ve[0])&&oe(he.target.files[0])}})]}),s.jsxs("button",{onClick:be,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-purple-500 to-violet-600 hover:from-purple-600 hover:to-violet-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[s.jsx(s4,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"text-xs font-medium mt-1",children:"Exportar Excel"})]}),s.jsxs("button",{onClick:()=>T(!0),disabled:A||r.length===0,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-cyan-500 to-sky-600 hover:from-cyan-600 hover:to-sky-700 text-white rounded-lg transition-all duration-200 shadow-sm group disabled:opacity-50",title:"Generar horario semanal automáticamente (IA)",children:[A?s.jsx(si,{className:"w-5 h-5 animate-spin"}):s.jsx(_h,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"text-xs font-medium mt-1",children:"Generar horario (IA)"})]}),s.jsxs("button",{onClick:()=>l(!0),className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-indigo-500 to-blue-600 hover:from-indigo-600 hover:to-blue-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[s.jsx(bl,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"text-xs font-medium mt-1",children:"Abrir Resumen"})]}),s.jsxs("button",{onClick:Ee,disabled:u.some(he=>he.tipo==="error")||A,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white rounded-lg transition-all duration-200 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-amber-500 disabled:hover:to-orange-600 group",children:[A?s.jsx(si,{className:"w-5 h-5 animate-spin"}):s.jsx(kl,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"text-xs font-medium mt-1",children:A?"Guardando...":"Guardar"})]})]})]})]}),u.length>0&&s.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[s.jsxs("div",{className:"px-6 py-4 bg-red-50 dark:bg-red-900/20 border-b border-red-100 dark:border-red-800/30 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jc,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),s.jsxs("h3",{className:"font-medium text-red-700 dark:text-red-300",children:["Validaciones y Alertas (",u.length,")"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-800/30 text-red-700 dark:text-red-300 text-xs rounded-md flex items-center gap-1",children:[s.jsx(mh,{className:"w-3 h-3"})," ",u.filter(he=>he.tipo==="error").length," Errores"]}),s.jsxs("span",{className:"px-2 py-1 bg-yellow-100 dark:bg-yellow-800/30 text-yellow-700 dark:text-yellow-300 text-xs rounded-md flex items-center gap-1",children:[s.jsx(r1,{className:"w-3 h-3"})," ",u.filter(he=>he.tipo==="warning").length," Advertencias"]})]})]}),s.jsx("div",{className:"p-5",children:s.jsx("div",{className:"space-y-2.5 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:u.map((he,ve)=>s.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg shadow-sm ${he.tipo==="error"?"bg-red-50 dark:bg-red-900/10 text-red-700 dark:text-red-300 border-l-4 border-red-500 dark:border-red-600":"bg-yellow-50 dark:bg-yellow-900/10 text-yellow-700 dark:text-yellow-300 border-l-4 border-yellow-500 dark:border-yellow-600"}`,children:[he.tipo==="error"?s.jsx(mh,{className:"w-5 h-5 shrink-0"}):s.jsx(r1,{className:"w-5 h-5 shrink-0"}),s.jsx("span",{className:"text-sm",children:he.mensaje})]},ve))})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-100 dark:border-gray-700 overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(e1,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mr-2"}),s.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Asignaciones de Carga Horaria"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Correcto"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-yellow-500"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Advertencia"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Error"})]})]})]}),s.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full min-w-[1000px]",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky left-0 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 dark:bg-blue-500"}),s.jsx("span",{children:"Estado"})]})}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky left-14 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(_i,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"Docente"})]})}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(Rs,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"Asignatura"})]})}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(u$,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"Func. Lectivas"})]})}),s.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:s.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[s.jsx(bc,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"Hrs"})]})}),s.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",colSpan:on.length,children:s.jsxs("div",{className:"flex justify-center items-center gap-1.5",children:[s.jsx(Im,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"Cursos"}),s.jsx("span",{className:"ml-1 text-xs text-gray-400 font-normal",children:"(horas por curso)"})]})}),s.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:s.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[s.jsx(wb,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"HA/HB"})]})}),s.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky right-0 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:s.jsx("div",{className:"flex items-center justify-center gap-1.5",children:s.jsx("span",{children:"Acciones"})})})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:U.map((he,ve)=>{const le=X[he.docenteId],ne=ue(he.docenteId),Ae=ve===0||U[ve-1].docenteId!==he.docenteId,pe=ve===U.length-1||U[ve+1].docenteId!==he.docenteId,ke=U.filter(ze=>ze.docenteId===he.docenteId),Le=ke.length>1;let qe="hover:bg-gray-50 dark:hover:bg-gray-750 ";return Le&&(Ae?qe+="border-t-2 border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/10 ":qe+="bg-blue-50 dark:bg-blue-900/10 ",pe&&(qe+="border-b-2 border-blue-200 dark:border-blue-800 mb-1 ")),s.jsxs("tr",{className:qe,children:[s.jsx("td",{className:"px-1 py-2 sticky left-0 z-10 bg-inherit",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${ne==="green"?"bg-green-500":ne==="yellow"?"bg-yellow-500":ne==="red"?"bg-red-500":"bg-gray-500"}`}),Le&&Ae&&s.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium mt-1",children:ke.length})]})}),s.jsx("td",{className:"px-1 py-2 sticky left-10 z-10 bg-inherit",children:!Le||Ae?s.jsxs("div",{children:[s.jsx("select",{value:he.docenteId,onChange:ze=>re(he.id,"docenteId",ze.target.value),className:`w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs ${Le?"font-medium":""}`,children:(Z.length>0?Z:e).map(ze=>s.jsx("option",{value:ze.id,children:ze.nombre},ze.id))}),Le&&s.jsxs("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:[ke.length," asig."]})]}):s.jsx("div",{className:"pl-1 italic text-gray-500 dark:text-gray-400 text-xs whitespace-nowrap",children:"↳ Mismo"})}),s.jsxs("td",{className:"px-1 py-2",children:[s.jsxs("select",{value:he.asignaturaOModulo||"",onChange:ze=>re(he.id,"asignaturaOModulo",ze.target.value),className:`w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs ${Le?"border-blue-300 dark:border-blue-700":""}`,children:[s.jsx("option",{value:"",children:"Seleccionar..."}),cn.map(ze=>s.jsx("option",{value:ze,children:ze},ze))]}),Le&&!Ae&&s.jsx("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:"Adicional"})]}),s.jsx("td",{className:"px-1 py-2",children:s.jsxs("div",{className:"space-y-1 w-full min-w-[200px]",children:[(he.funcionesLectivas||[]).map(ze=>s.jsxs("div",{className:"flex gap-1 items-center",children:[s.jsx("input",{type:"text",value:ze.nombre,onChange:Re=>ce(he.id,ze.id,"nombre",Re.target.value),placeholder:"Nombre",className:"flex-grow px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-l bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"}),s.jsx("input",{type:"number",value:ze.horas,onChange:Re=>ce(he.id,ze.id,"horas",parseInt(Re.target.value)||0),min:0,max:44,className:"w-10 px-1 py-1 border-y border-r border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs text-center"}),s.jsx("button",{onClick:()=>ie(he.id,ze.id),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-r",title:"Eliminar función",children:s.jsx(Ia,{className:"w-3 h-3"})})]},ze.id)),!he.funcionesLectivas&&s.jsx("div",{className:"flex gap-1 items-center",children:s.jsx("input",{type:"text",value:he.otraFuncion||"",onChange:ze=>re(he.id,"otraFuncion",ze.target.value),placeholder:"Ej: Coordinador",className:"flex-grow px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"})}),s.jsxs("button",{onClick:()=>J(he.id),className:"flex items-center gap-1 text-xs text-blue-500 hover:text-blue-700 px-2 py-0.5 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",children:[s.jsx(Si,{className:"w-3 h-3"})," ",s.jsx("span",{className:"text-xs",children:"Agregar"})]})]})}),s.jsx("td",{className:"px-1 py-2 text-center",children:s.jsx("span",{className:"text-xs font-medium text-gray-900 dark:text-white",children:he.horasXAsig||0})}),s.jsx("td",{className:"px-1 py-2",children:s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-1",children:on.map(ze=>s.jsxs("div",{className:"flex flex-col items-center bg-gray-50 dark:bg-gray-750 p-1 rounded",children:[s.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:ze}),s.jsx("input",{type:"number",min:0,value:he.horasPorCurso[ze]||"",onChange:Re=>de(he.id,ze,parseInt(Re.target.value)||0),className:"w-10 h-7 px-1 py-0 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs text-center"})]},ze))})}),s.jsx("td",{className:"px-1 py-2 text-center whitespace-nowrap",children:le&&s.jsxs("div",{className:"space-y-0",children:[s.jsxs("div",{className:"text-blue-600 dark:text-blue-400 text-xs",children:["HA: ",le.HA," (",le.restantesHA>=0?"+":"",le.restantesHA,")"]}),s.jsxs("div",{className:"text-green-600 dark:text-green-400 text-xs",children:["HB: ",le.HB," (",le.restantesHB>=0?"+":"",le.restantesHB,")"]})]})}),s.jsx("td",{className:"px-1 py-2 text-center sticky right-0 z-10 bg-inherit",children:s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsx("button",{onClick:()=>D(he.docenteId,he.docenteNombre),className:"p-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",title:"Agregar otra asignatura a este docente",children:s.jsx(Si,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>W(he.id),className:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Eliminar esta asignación",children:s.jsx(Ia,{className:"w-3.5 h-3.5"})})]})})]},he.id)})})]})})]}),o&&s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-7xl w-full max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Panel de Resumen"}),s.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(ho,{})})]}),s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:s.jsxs("nav",{className:"flex -mb-px px-6",children:[s.jsx("button",{onClick:()=>d("docentes"),className:`px-6 py-3 font-medium text-sm ${c==="docentes"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Docente"}),s.jsx("button",{onClick:()=>d("cursos"),className:`px-6 py-3 font-medium text-sm ${c==="cursos"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Curso"}),s.jsx("button",{onClick:()=>d("funciones"),className:`px-6 py-3 font-medium text-sm ${c==="funciones"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Función"}),s.jsx("button",{onClick:()=>d("totales"),className:`px-6 py-3 font-medium text-sm ${c==="totales"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Totales Generales"})]})}),s.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[c==="docentes"&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Docente"}),s.jsx("div",{className:"grid gap-4",children:e.map(he=>{const ve=X[he.id],le=r.filter(ne=>ne.docenteId===he.id);return s.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:he.nombre}),s.jsx("div",{className:`w-3 h-3 rounded-full ${ue(he.id)==="green"?"bg-green-500":ue(he.id)==="yellow"?"bg-yellow-500":ue(he.id)==="red"?"bg-red-500":"bg-gray-500"}`})]}),ve&&s.jsxs("div",{children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Contrato:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[he.horasContrato,"h"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HA:"}),s.jsxs("span",{className:"ml-1 font-medium text-blue-600 dark:text-blue-400",children:[ve.sumCursos,"/",ve.HA]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HB:"}),s.jsxs("span",{className:"ml-1 font-medium text-green-600 dark:text-green-400",children:[ve.sumFunciones,"/",ve.HB]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Asignaciones:"}),s.jsx("span",{className:"ml-1 font-medium",children:le.length})]})]}),le.length>0&&s.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-2",children:[s.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Asignaturas asignadas:"}),s.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:le.map(ne=>s.jsxs("li",{className:"flex justify-between",children:[s.jsx("span",{children:ne.asignaturaOModulo||"Sin asignatura"}),s.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[ne.horasXAsig||0,"h"]})]},ne.id))})]}),s.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-2",children:[s.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Distribución por curso:"}),s.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:on.filter(ne=>le.some(Ae=>Ae.horasPorCurso[ne])).map(ne=>{const Ae=le.reduce((pe,ke)=>pe+(ke.horasPorCurso[ne]||0),0);return s.jsxs("li",{className:"flex justify-between",children:[s.jsx("span",{children:ne}),s.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[Ae,"h"]})]},ne)})})]})]}),le.some(ne=>(ne.funcionesLectivas||[]).length>0)&&s.jsxs("div",{className:"mt-2 border-t border-gray-100 dark:border-gray-700 pt-2",children:[s.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Funciones lectivas:"}),s.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:le.flatMap(ne=>(ne.funcionesLectivas||[]).map(Ae=>({id:`${ne.id}_${Ae.id}`,nombre:Ae.nombre,horas:Ae.horas}))).map(ne=>s.jsxs("li",{className:"flex justify-between",children:[s.jsx("span",{children:ne.nombre||"Sin nombre"}),s.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[ne.horas,"h"]})]},ne.id))})]})]})]},he.id)})})]}),c==="cursos"&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Curso"}),s.jsx("div",{className:"grid gap-4",children:on.filter(he=>r.some(ve=>ve.horasPorCurso[he])).map(he=>{const ve=r.filter(Ae=>Ae.horasPorCurso[he]),le=[];ve.forEach(Ae=>{const pe=le.findIndex(ke=>ke.id===Ae.docenteId);pe===-1?le.push({id:Ae.docenteId,nombre:Ae.docenteNombre,asignaciones:[Ae]}):le[pe].asignaciones.push(Ae)});const ne=ve.reduce((Ae,pe)=>Ae+(pe.horasPorCurso[he]||0),0);return s.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:he}),s.jsxs("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs rounded-md",children:["Total: ",ne,"h"]})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("h5",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Docentes asignados:"}),s.jsx("div",{className:"grid gap-2",children:le.map(Ae=>s.jsxs("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-750 rounded",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium",children:Ae.nombre}),s.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:[Ae.asignaciones.reduce((pe,ke)=>pe+(ke.horasPorCurso[he]||0),0),"h"]})]}),s.jsx("ul",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400 space-y-1 ml-2",children:Ae.asignaciones.filter(pe=>pe.horasPorCurso[he]).map(pe=>s.jsxs("li",{className:"flex justify-between",children:[s.jsx("span",{children:pe.asignaturaOModulo||"Sin asignatura"}),s.jsxs("span",{children:[pe.horasPorCurso[he],"h"]})]},pe.id))})]},Ae.id))})]})]},he)})})]}),c==="funciones"&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Funciones Lectivas"}),(()=>{const he=[];return r.forEach(ve=>{(ve.funcionesLectivas||[]).forEach(le=>{if(!le.nombre)return;const ne=he.find(Ae=>Ae.nombre===le.nombre);if(!ne)he.push({nombre:le.nombre,docentes:[{id:ve.docenteId,nombre:ve.docenteNombre,horas:le.horas}],totalHoras:le.horas});else{const Ae=ne.docentes.find(pe=>pe.id===ve.docenteId);Ae?Ae.horas+=le.horas:ne.docentes.push({id:ve.docenteId,nombre:ve.docenteNombre,horas:le.horas}),ne.totalHoras+=le.horas}})}),he.sort((ve,le)=>le.totalHoras-ve.totalHoras),he.length===0?s.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-750",children:s.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"No hay funciones lectivas asignadas."})}):s.jsx("div",{className:"grid gap-4",children:he.map((ve,le)=>s.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:ve.nombre}),s.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs rounded-md",children:["Total: ",ve.totalHoras,"h"]})]}),s.jsx("h5",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Docentes asignados:"}),s.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:ve.docentes.sort((ne,Ae)=>Ae.horas-ne.horas).map(ne=>s.jsxs("li",{className:"flex justify-between py-1 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[s.jsx("span",{children:ne.nombre}),s.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[ne.horas,"h"]})]},ne.id))})]},le))})})()]}),c==="totales"&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Resumen de Totales Generales"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800 shadow-md",children:[s.jsx("h4",{className:"text-lg font-bold text-blue-800 dark:text-blue-300 mb-2",children:"Total de Horas Lectivas"}),s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsx("div",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:(()=>{let he=0;return r.forEach(ve=>{ve.horasPorCurso&&Object.values(ve.horasPorCurso).forEach(le=>typeof le=="number"&&(he+=le)),(ve.funcionesLectivas||[]).forEach(le=>typeof le.horas=="number"&&(he+=le.horas))}),he})()}),s.jsx("span",{className:"text-sm text-blue-500 dark:text-blue-300",children:"horas"})]}),s.jsx("p",{className:"mt-3 text-sm text-blue-600 dark:text-blue-400",children:"Total de horas lectivas asignadas (HA)"})]}),s.jsxs("div",{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-900/20 rounded-xl border border-green-200 dark:border-green-800 shadow-md",children:[s.jsx("h4",{className:"text-lg font-bold text-green-800 dark:text-green-300 mb-2",children:"Total de Horas No Lectivas"}),s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsx("div",{className:"text-4xl font-bold text-green-600 dark:text-green-400",children:(()=>{let he=0;return e.forEach(ve=>{const le=typeof ve.horasContrato=="number"?ve.horasContrato:0;he+=$w(le)}),he})()}),s.jsx("span",{className:"text-sm text-green-500 dark:text-green-300",children:"horas"})]}),s.jsx("p",{className:"mt-3 text-sm text-green-600 dark:text-green-400",children:"Total de horas no lectivas (HB)"})]}),s.jsxs("div",{className:"p-6 bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/30 dark:to-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 shadow-md",children:[s.jsx("h4",{className:"text-lg font-bold text-amber-800 dark:text-amber-300 mb-2",children:"Total de Horas Contrato"}),s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsx("div",{className:"text-4xl font-bold text-amber-600 dark:text-amber-400",children:e.reduce((ve,le)=>{const ne=typeof le.horasContrato=="number"?le.horasContrato:0;return ve+ne},0)}),s.jsx("span",{className:"text-sm text-amber-500 dark:text-amber-300",children:"horas"})]}),s.jsx("p",{className:"mt-3 text-sm text-amber-600 dark:text-amber-400",children:"Total de horas contratadas (Lectivas + No lectivas)"})]})]}),s.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-md",children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Distribución de Horas"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Distribución Porcentual"}),(()=>{let he=0,ve=0;r.forEach(pe=>{pe.horasPorCurso&&Object.values(pe.horasPorCurso).forEach(ke=>typeof ke=="number"&&(he+=ke)),(pe.funcionesLectivas||[]).forEach(ke=>typeof ke.horas=="number"&&(he+=ke.horas))}),e.forEach(pe=>{const ke=typeof pe.horasContrato=="number"?pe.horasContrato:0;ve+=$w(ke)});const le=he+ve,ne=le>0?Math.round(he/le*100):0,Ae=le>0?Math.round(ve/le*100):0;return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Horas Lectivas (HA)"}),s.jsxs("span",{className:"font-bold",children:[ne,"%"]})]}),s.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-blue-500 dark:bg-blue-600 rounded-full",style:{width:`${ne}%`}})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsx("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Horas No Lectivas (HB)"}),s.jsxs("span",{className:"font-bold",children:[Ae,"%"]})]}),s.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-green-500 dark:bg-green-600 rounded-full",style:{width:`${Ae}%`}})})]}),s.jsxs("div",{className:"mt-4 p-3 bg-gray-100 dark:bg-gray-750 rounded-lg text-xs text-gray-700 dark:text-gray-300",children:[s.jsx("p",{children:s.jsx("strong",{children:"Distribución Objetivo:"})}),s.jsx("p",{children:"• Horas Lectivas (HA): 65% del contrato"}),s.jsx("p",{children:"• Horas No Lectivas (HB): 35% del contrato"}),s.jsx("p",{children:"• Horas Contrato Total = Horas Lectivas + Horas No Lectivas"}),s.jsx("div",{className:"mt-2",children:Math.abs(ne-65)<=5?s.jsx("p",{className:"text-green-600 dark:text-green-400 font-medium",children:"✓ La distribución está dentro de los parámetros recomendados"}):s.jsx("p",{className:"text-orange-600 dark:text-orange-400 font-medium",children:"⚠️ La distribución difiere de los parámetros recomendados"})})]})]})})()]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estadísticas Generales"}),s.jsxs("ul",{className:"space-y-3 text-sm",children:[s.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de docentes:"}),s.jsx("span",{className:"font-semibold",children:e.length})]}),s.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de asignaciones:"}),s.jsx("span",{className:"font-semibold",children:r.length})]}),s.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Promedio horas contrato:"}),s.jsxs("span",{className:"font-semibold",children:[e.length>0?(e.reduce((he,ve)=>he+(typeof ve.horasContrato=="number"?ve.horasContrato:0),0)/e.length).toFixed(1):"0"," horas"]})]})]})]}),u.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsxs("h5",{className:"text-md font-medium text-red-700 dark:text-red-300 mb-2",children:["Advertencias (",u.length,")"]}),s.jsx("div",{className:"max-h-32 overflow-y-auto p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:s.jsxs("ul",{className:"text-xs space-y-1 text-red-600 dark:text-red-400",children:[u.slice(0,5).map((he,ve)=>s.jsxs("li",{className:"flex items-center gap-1",children:[he.tipo==="error"?"❌":"⚠️",s.jsx("span",{children:he.mensaje})]},ve)),u.length>5&&s.jsxs("li",{className:"italic",children:["Y ",u.length-5," más..."]})]})})]})]})]})]})]})]})]})}),s.jsxs("div",{className:"mt-8 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[s.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ro,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Generación de Horario Semanal"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"relative",children:s.jsx("select",{className:"pl-3 pr-8 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm",value:I,onChange:he=>j(he.target.value),children:on.map(he=>s.jsx("option",{value:he,children:he},he))})}),v&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:we,disabled:A,className:"px-3 py-2 bg-emerald-500 hover:bg-emerald-600 text-white text-sm rounded-lg transition-all duration-200 shadow-sm",children:"Guardar horario"}),s.jsx("button",{onClick:Te,disabled:A,className:"px-3 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-100 text-sm rounded-lg transition-all duration-200",children:"Descartar"})]})]})]}),s.jsxs("div",{className:"p-5 space-y-4",children:[B&&s.jsxs("div",{className:`px-4 py-3 rounded-lg text-sm ${B==="IA"?"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":"bg-amber-50 text-amber-700 dark:bg-amber-900/20 dark:text-amber-300"}`,children:["Fuente: ",B==="IA"?"Generado por IA":"Generado por algoritmo (fallback)"]}),N.length>0&&s.jsxs("div",{className:"px-4 py-3 rounded-lg bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 text-sm",children:[s.jsxs("div",{className:"font-medium mb-1",children:["Conflictos detectados (",N.length,"):"]}),s.jsx("ul",{className:"list-disc ml-5 space-y-1",children:N.map((he,ve)=>s.jsx("li",{children:he},ve))})]}),v||g?s.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full min-w-[800px] border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left text-xs uppercase tracking-wider text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:"Bloque"}),Th.map(he=>s.jsx("th",{className:"px-3 py-2 text-center text-xs uppercase tracking-wider text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:he},he))]})}),s.jsx("tbody",{children:(()=>{const he=le=>{const[ne,Ae]=le.split(":").map(Number);return ne*60+Ae},ve=[];for(let le=0;le<Is.length;le++){const ne=Is[le];ve.push({type:"block",label:`Bloque ${ne.bloque}`,start:ne.inicio,end:ne.fin,bloque:ne.bloque});const Ae=Is[le+1];if(Ae&&he(Ae.inicio)-he(ne.fin)>0){const ke=ne.fin==="13:00"&&Ae.inicio==="13:40";ve.push({type:"break",label:ke?"Almuerzo":"Recreo",start:ne.fin,end:Ae.inicio})}}return ve.map((le,ne)=>{if(le.type==="break")return s.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[s.jsxs("td",{className:`px-3 py-2 text-sm font-medium whitespace-nowrap ${le.label==="Almuerzo"?"text-amber-700":"text-slate-600"}`,children:[le.label," ",le.start&&le.end?`(${le.start} – ${le.end})`:""]}),Th.map(pe=>s.jsx("td",{className:`px-3 py-2 align-top ${le.label==="Almuerzo"?"bg-amber-50 dark:bg-amber-900/20":"bg-slate-50 dark:bg-slate-800/50"}`},`${pe}_break_${ne}`))]},`break_${ne}`);const Ae=Is.find(pe=>pe.bloque===le.bloque);return s.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[s.jsxs("td",{className:"px-3 py-2 text-sm text-gray-700 dark:text-gray-300 whitespace-nowrap",children:[le.bloque,". ",le.start," - ",le.end]}),Th.map(pe=>{var qe,ze,Re;const ke=(Re=(ze=(qe=v||g)==null?void 0:qe[pe])==null?void 0:ze[String(le.bloque)])==null?void 0:Re[I],Le=pe==="Viernes"&&Ae&&Ae.fin>"13:00";return s.jsx("td",{className:`px-3 py-2 align-top ${Le?"bg-red-50 dark:bg-red-900/20":""}`,title:Le?"No permitido (Viernes > 13:00)":"",children:ke&&(ke.asignatura||ke.profesor)?s.jsxs("div",{className:`p-2 rounded border ${Le?"border-red-300 dark:border-red-700 bg-red-50/60 dark:bg-red-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-750"}`,children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:ke.asignatura}),s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:ke.profesor})]}):s.jsx("div",{className:`h-10 rounded ${Le?"bg-red-50/60 dark:bg-red-900/10 border border-red-200 dark:border-red-800":"bg-white dark:bg-gray-800 border border-dashed border-gray-200 dark:border-gray-700"}`})},`${pe}_${le.bloque}`)})]},`block_${le.bloque}`)})})()})]})}):s.jsx("div",{className:"px-4 py-3 rounded-lg bg-gray-50 dark:bg-gray-750 text-gray-600 dark:text-gray-300 text-sm",children:'Aún no hay un horario guardado ni generado. Usa "Generar horario (IA)" para crear una propuesta.'})]})]}),s.jsxs("div",{className:"mt-8 p-0 bg-gradient-to-r from-blue-500/5 to-indigo-500/5 dark:from-blue-900/10 dark:to-indigo-900/10 rounded-xl overflow-hidden border border-blue-200 dark:border-blue-800 shadow-sm",children:[s.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wb,{className:"w-5 h-5"}),s.jsx("h4",{className:"font-medium",children:"Información sobre Distribución de Horas"})]})}),s.jsxs("div",{className:"p-6 grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-700 dark:text-blue-300 shrink-0",children:s.jsx(Im,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Horas Lectivas (HA)"}),s.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Según tabla oficial (ej: 44h → ",Y5(44),"h, 30h → ",Y5(30),"h)"]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-700 dark:text-green-300 shrink-0",children:s.jsx(e1,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-green-900 dark:text-green-100",children:"Funciones Lectivas"}),s.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Las horas de las funciones se suman a las horas lectivas (HA)"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center text-amber-700 dark:text-amber-300 shrink-0",children:s.jsx(u$,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-amber-900 dark:text-amber-100",children:"Horas No Lectivas (HB)"}),s.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:["El resto del contrato (ej: 44h → ",$w(44),"h, 30h → ",$w(30),"h)"]})]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 mb-4",children:[s.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Fórmulas de cálculo"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs font-mono",children:"HA"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas Lectivas = 65% del Contrato"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"px-2 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 rounded text-xs font-mono",children:"HB"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas No Lectivas = 35% del Contrato"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"px-2 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-mono",children:"HC"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas Contrato = HA + HB"})]})]})]}),s.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700",children:[s.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Guía de semáforos"}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[s.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500 mb-1"}),s.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Completo"})]}),s.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[s.jsx("div",{className:"w-5 h-5 rounded-full bg-yellow-500 mb-1"}),s.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Faltan horas"})]}),s.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[s.jsx("div",{className:"w-5 h-5 rounded-full bg-red-500 mb-1"}),s.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Excede límites"})]})]})]})]})]})]}),s.jsx(ge,{}),k&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-lg overflow-hidden animate-scaleIn",children:[s.jsxs("div",{className:"p-5 bg-gradient-to-r from-cyan-500 to-sky-600 text-white flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Reglas para generar horario"}),s.jsx("button",{onClick:()=>T(!1),className:"text-white/80 hover:text-white p-1 rounded-full hover:bg-white/20 transition-all duration-200",children:s.jsx(ho,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6 space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Máximo de horas de mecánica juntas"}),s.jsx("select",{value:L.maxConsecutivasMecanica,onChange:he=>F(ve=>({...ve,maxConsecutivasMecanica:parseInt(he.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:Array.from({length:10},(he,ve)=>ve+1).map(he=>s.jsx("option",{value:he,children:he},he))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Máximo de horas de plan general juntas"}),s.jsx("select",{value:L.maxConsecutivasPlanGeneral,onChange:he=>F(ve=>({...ve,maxConsecutivasPlanGeneral:parseInt(he.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:[1,2,3].map(he=>s.jsx("option",{value:he,children:he},he))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Asignaturas prácticas en horario P.M."}),s.jsx("p",{className:"text-xs text-gray-500",children:"Ubica taller/práctica/laboratorio en bloques desde 13:40"})]}),s.jsx("input",{type:"checkbox",checked:!!L.practicasPM,onChange:he=>F(ve=>({...ve,practicasPM:he.target.checked})),className:"w-5 h-5"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"3º medio sólo horas de plan general"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Para cursos 3º*, restringe a asignaturas de plan general"})]}),s.jsx("input",{type:"checkbox",checked:!!L.terceroSoloPlanGeneral,onChange:he=>F(ve=>({...ve,terceroSoloPlanGeneral:he.target.checked})),className:"w-5 h-5"})]})]}),s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200",children:"Cancelar"}),s.jsxs("button",{onClick:async()=>{T(!1),await q()},className:"px-4 py-2 rounded-lg bg-cyan-600 hover:bg-cyan-700 text-white flex items-center gap-2",children:[s.jsx(_h,{className:"w-4 h-4"})," Generar con estas reglas"]})]})]})}),A&&s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-2xl flex flex-col items-center animate-pulse",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 dark:border-blue-800 border-solid rounded-full"}),s.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 dark:border-blue-400 border-t-transparent animate-spin rounded-full absolute top-0 left-0"})]}),s.jsx("p",{className:"mt-4 text-lg font-medium text-gray-700 dark:text-gray-300",children:"Procesando solicitud..."}),s.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Por favor, espere un momento"})]})})]})},b4="acciones_pedagogicas",URe=(e,t)=>{var n,i,o,l;if(t.dimension||t.subdimension||t.indicadores||t.avance!==void 0)return{id:e,fechaRegistro:t.fechaRegistro??"",responsable:t.responsable??"",dimension:t.dimension??"",subdimension:t.subdimension??"",descripcion:t.descripcion??"",objetivos:t.objetivos??"",indicadores:Array.isArray(t.indicadores)?t.indicadores:t.indicadores?String(t.indicadores).split(",").map(c=>c.trim()).filter(Boolean):[],cobertura:t.cobertura??"",fechaInicio:t.fechaInicio??"",fechaCumplimiento:t.fechaCumplimiento??"",estado:t.estado??"Pendiente",avance:typeof t.avance=="number"?t.avance:0,enlaces:Array.isArray(t.enlaces)?t.enlaces:t.enlaces?[String(t.enlaces)]:[],creadoTs:typeof t.creadoTs=="number"?t.creadoTs:((i=(n=t.creadoTs)==null?void 0:n.toMillis)==null?void 0:i.call(n))??Date.now()};const r=t,a=r.enlaceDocumento?[String(r.enlaceDocumento)]:[];return{id:e,fechaRegistro:r.fechaRegistro??"",responsable:r.responsable??"",dimension:r.area??"",subdimension:"",descripcion:r.descripcion??"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:r.fechaCumplimiento??"",estado:r.estado??"Pendiente",avance:0,enlaces:a,creadoTs:typeof r.creadoTs=="number"?r.creadoTs:((l=(o=r.creadoTs)==null?void 0:o.toMillis)==null?void 0:l.call(o))??Date.now()}};async function HRe(){const e=[];try{const t=jt(ut(st,b4),Gt("creadoTs","desc"));(await Nr(t)).docs.forEach(a=>e.push(URe(a.id,a.data())))}catch{}return e.sort((t,r)=>(r.creadoTs??0)-(t.creadoTs??0))}async function QRe(e){const t={fechaRegistro:e.fechaRegistro??new Date().toISOString().slice(0,10),responsable:e.responsable??"",dimension:e.dimension??e.area??"",subdimension:e.subdimension??"",descripcion:e.descripcion??"",objetivos:e.objetivos??"",indicadores:Array.isArray(e.indicadores)?e.indicadores:e.indicadores?String(e.indicadores).split(",").map(r=>r.trim()).filter(Boolean):[],cobertura:e.cobertura??"",fechaInicio:e.fechaInicio??"",fechaCumplimiento:e.fechaCumplimiento??"",estado:e.estado??"Pendiente",avance:typeof e.avance=="number"?e.avance:0,enlaces:Array.isArray(e.enlaces)?e.enlaces:e.enlaces?[String(e.enlaces)]:e.enlaceDocumento?[String(e.enlaceDocumento)]:[],creadoTs:dr.now()};await Kr(ut(st,b4),t)}async function zRe(e,t){const r=$t(ut(st,b4),e),a={...t};a.area&&!a.dimension&&(a.dimension=a.area,delete a.area),a.enlaceDocumento&&(a.enlaces=[String(a.enlaceDocumento)],delete a.enlaceDocumento),Array.isArray(a.indicadores)===!1&&typeof a.indicadores=="string"&&(a.indicadores=String(a.indicadores).split(",").map(n=>n.trim()).filter(Boolean)),await zi(r,a)}async function $Re(e){const t=$t(ut(st,b4),e);await Ua(t)}function Aie(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=Aie(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function ia(){for(var e,t,r=0,a="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=Aie(e))&&(a&&(a+=" "),a+=t);return a}var tI={},rI={},YV;function VRe(){return YV||(YV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(rI)),rI}var aI={},JV;function mie(){return JV||(JV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(aI)),aI}var nI={},ZV;function pie(){return ZV||(ZV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;return typeof r=="string"||typeof r=="symbol"?r:Object.is((a=r==null?void 0:r.valueOf)==null?void 0:a.call(r),-0)?"-0":String(r)}e.toKey=t}(nI)),nI}var sI={},eG;function KL(){return eG||(eG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const a=[],n=r.length;if(n===0)return a;let i=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(a.push(""),i++);i<n;){const d=r[i];l?d==="\\"&&i+1<n?(i++,o+=r[i]):d===l?l="":o+=d:c?d==='"'||d==="'"?l=d:d==="]"?(c=!1,a.push(o),o=""):o+=d:d==="["?(c=!0,o&&(a.push(o),o="")):d==="."?o&&(a.push(o),o=""):o+=d,i++}return o&&a.push(o),a}e.toPath=t}(sI)),sI}var tG;function WL(){return tG||(tG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VRe(),r=mie(),a=pie(),n=KL();function i(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?r.isDeepKey(c)?i(l,n.toPath(c),d):d:u}case"number":case"symbol":{typeof c=="number"&&(c=a.toKey(c));const u=l[c];return u===void 0?d:u}default:{if(Array.isArray(c))return o(l,c,d);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?d:u}}}function o(l,c,d){if(c.length===0)return d;let u=l;for(let f=0;f<c.length;f++){if(u==null||t.isUnsafeProperty(c[f]))return d;u=u[c[f]]}return u===void 0?d:u}e.get=i}(tI)),tI}var iI,rG;function GRe(){return rG||(rG=1,iI=WL().get),iI}var qRe=GRe();const fp=Kl(qRe);var oI={exports:{}},an={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aG;function KRe(){if(aG)return an;aG=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,a=e?Symbol.for("react.fragment"):60107,n=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,A=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,x=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,N=e?Symbol.for("react.scope"):60119;function E(_){if(typeof _=="object"&&_!==null){var I=_.$$typeof;switch(I){case t:switch(_=_.type,_){case c:case d:case a:case i:case n:case f:return _;default:switch(_=_&&_.$$typeof,_){case l:case u:case g:case m:case o:return _;default:return I}}case r:return I}}}function B(_){return E(_)===d}return an.AsyncMode=c,an.ConcurrentMode=d,an.ContextConsumer=l,an.ContextProvider=o,an.Element=t,an.ForwardRef=u,an.Fragment=a,an.Lazy=g,an.Memo=m,an.Portal=r,an.Profiler=i,an.StrictMode=n,an.Suspense=f,an.isAsyncMode=function(_){return B(_)||E(_)===c},an.isConcurrentMode=B,an.isContextConsumer=function(_){return E(_)===l},an.isContextProvider=function(_){return E(_)===o},an.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===t},an.isForwardRef=function(_){return E(_)===u},an.isFragment=function(_){return E(_)===a},an.isLazy=function(_){return E(_)===g},an.isMemo=function(_){return E(_)===m},an.isPortal=function(_){return E(_)===r},an.isProfiler=function(_){return E(_)===i},an.isStrictMode=function(_){return E(_)===n},an.isSuspense=function(_){return E(_)===f},an.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===a||_===d||_===i||_===n||_===f||_===A||typeof _=="object"&&_!==null&&(_.$$typeof===g||_.$$typeof===m||_.$$typeof===o||_.$$typeof===l||_.$$typeof===u||_.$$typeof===v||_.$$typeof===y||_.$$typeof===N||_.$$typeof===x)},an.typeOf=E,an}var nG;function WRe(){return nG||(nG=1,oI.exports=KRe()),oI.exports}var XRe=WRe(),fo=e=>e===0?0:e>0?1:-1,Tc=e=>typeof e=="number"&&e!=+e,Cg=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,sr=e=>(typeof e=="number"||e instanceof Number)&&!Tc(e),Ph=e=>sr(e)||typeof e=="string",YRe=0,xN=e=>{var t=++YRe;return"".concat(e||"").concat(t)},ql=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!sr(t)&&typeof t!="string")return a;var i;if(Cg(t)){if(r==null)return a;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Tc(i)&&(i=a),n&&r!=null&&i>r&&(i=r),i},gie=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},a=0;a<t;a++)if(!r[e[a]])r[e[a]]=!0;else return!0;return!1},sb=(e,t)=>sr(e)&&sr(t)?r=>e+r*(t-e):()=>t;function su(e,t,r){return sr(e)&&sr(t)?e+r*(t-e):t}function xie(e,t,r){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):fp(a,t))===r)}var $n=e=>e===null||typeof e>"u",cE=e=>$n(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),JRe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function XL(e){if(typeof e!="string")return!1;var t=JRe;return t.includes(e)}var ZRe=["viewBox","children"],sG=["points","pathLength"],lI={svg:ZRe,polygon:sG,polyline:sG},YL=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(w.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var a={};return Object.keys(r).forEach(n=>{XL(n)&&(a[n]=i=>r[n](r,i))}),a},e8e=(e,t,r)=>a=>(e(t,r,a),null),Dx=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(n=>{var i=e[n];XL(n)&&typeof i=="function"&&(a||(a={}),a[n]=e8e(i,t,r))}),a},t8e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function vie(e){if(typeof e!="string")return!1;var t=t8e;return t.includes(e)}function mo(e){var t=Object.entries(e).filter(r=>{var[a]=r;return vie(a)});return Object.fromEntries(t)}var iG=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",oG=null,cI=null,bie=e=>{if(e===oG&&Array.isArray(cI))return cI;var t=[];return w.Children.forEach(e,r=>{$n(r)||(XRe.isFragment(r)?t=t.concat(bie(r.props.children)):t.push(r))}),cI=t,oG=e,t};function dE(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(n=>iG(n)):a=[iG(t)],bie(e).forEach(n=>{var i=fp(n,"type.displayName")||fp(n,"type.name");a.indexOf(i)!==-1&&r.push(n)}),r}var yie=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,r8e=(e,t,r,a)=>{var n;if(typeof t=="symbol"||typeof t=="number")return!0;var i=(n=a&&(lI==null?void 0:lI[a]))!==null&&n!==void 0?n:[],o=t.startsWith("data-"),l=typeof e!="function"&&(!!a&&i.includes(t)||vie(t)),c=!!r&&XL(t);return o||l||c},Oa=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(w.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var n={};return Object.keys(a).forEach(i=>{var o;r8e((o=a)===null||o===void 0?void 0:o[i],i,t,r)&&(n[i]=a[i])}),n},a8e=["children","width","height","viewBox","className","style","title","desc"];function uF(){return uF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},uF.apply(null,arguments)}function n8e(e,t){if(e==null)return{};var r,a,n=s8e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function s8e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var JL=w.forwardRef((e,t)=>{var{children:r,width:a,height:n,viewBox:i,className:o,style:l,title:c,desc:d}=e,u=n8e(e,a8e),f=i||{width:a,height:n,x:0,y:0},A=ia("recharts-surface",o);return w.createElement("svg",uF({},Oa(u,!0,"svg"),{className:A,width:a,height:n,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),w.createElement("title",null,c),w.createElement("desc",null,d),r)}),i8e=["children","className"];function fF(){return fF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},fF.apply(null,arguments)}function o8e(e,t){if(e==null)return{};var r,a,n=l8e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function l8e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var _n=w.forwardRef((e,t)=>{var{children:r,className:a}=e,n=o8e(e,i8e),i=ia("recharts-layer",a);return w.createElement("g",fF({className:i},Oa(n,!0),{ref:t}),r)}),ZL=xee(),wie=w.createContext(null),c8e=()=>w.useContext(wie);function Qn(e){return function(){return e}}const Nie=Math.cos,eS=Math.sin,yf=Math.sqrt,tS=Math.PI,y4=2*tS,hF=Math.PI,AF=2*hF,dg=1e-6,d8e=AF-dg;function Eie(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function u8e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Eie;const r=10**t;return function(a){this._+=a[0];for(let n=1,i=a.length;n<i;++n)this._+=Math.round(arguments[n]*r)/r+a[n]}}class f8e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Eie:u8e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,n){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+n}`}bezierCurveTo(t,r,a,n,i,o){this._append`C${+t},${+r},${+a},${+n},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,a,n,i){if(t=+t,r=+r,a=+a,n=+n,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=a-t,d=n-r,u=o-t,f=l-r,A=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(A>dg)if(!(Math.abs(f*c-d*u)>dg)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=a-o,g=n-l,x=c*c+d*d,v=m*m+g*g,y=Math.sqrt(x),N=Math.sqrt(A),E=i*Math.tan((hF-Math.acos((x+A-v)/(2*y*N)))/2),B=E/N,_=E/y;Math.abs(B-1)>dg&&this._append`L${t+B*u},${r+B*f}`,this._append`A${i},${i},0,0,${+(f*m>u*g)},${this._x1=t+_*c},${this._y1=r+_*d}`}}arc(t,r,a,n,i,o){if(t=+t,r=+r,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(n),c=a*Math.sin(n),d=t+l,u=r+c,f=1^o,A=o?n-i:i-n;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>dg||Math.abs(this._y1-u)>dg)&&this._append`L${d},${u}`,a&&(A<0&&(A=A%AF+AF),A>d8e?this._append`A${a},${a},0,1,${f},${t-l},${r-c}A${a},${a},0,1,${f},${this._x1=d},${this._y1=u}`:A>dg&&this._append`A${a},${a},0,${+(A>=hF)},${f},${this._x1=t+a*Math.cos(i)},${this._y1=r+a*Math.sin(i)}`)}rect(t,r,a,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+n}h${-a}Z`}toString(){return this._}}function eM(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new f8e(t)}function tM(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Cie(e){this._context=e}Cie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function w4(e){return new Cie(e)}function jie(e){return e[0]}function kie(e){return e[1]}function Sie(e,t){var r=Qn(!0),a=null,n=w4,i=null,o=eM(l);e=typeof e=="function"?e:e===void 0?jie:Qn(e),t=typeof t=="function"?t:t===void 0?kie:Qn(t);function l(c){var d,u=(c=tM(c)).length,f,A=!1,m;for(a==null&&(i=n(m=o())),d=0;d<=u;++d)!(d<u&&r(f=c[d],d,c))===A&&((A=!A)?i.lineStart():i.lineEnd()),A&&i.point(+e(f,d,c),+t(f,d,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Qn(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Qn(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Qn(!!c),l):r},l.curve=function(c){return arguments.length?(n=c,a!=null&&(i=n(a)),l):n},l.context=function(c){return arguments.length?(c==null?a=i=null:i=n(a=c),l):a},l}function fj(e,t,r){var a=null,n=Qn(!0),i=null,o=w4,l=null,c=eM(d);e=typeof e=="function"?e:e===void 0?jie:Qn(+e),t=typeof t=="function"?t:Qn(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?kie:Qn(+r);function d(f){var A,m,g,x=(f=tM(f)).length,v,y=!1,N,E=new Array(x),B=new Array(x);for(i==null&&(l=o(N=c())),A=0;A<=x;++A){if(!(A<x&&n(v=f[A],A,f))===y)if(y=!y)m=A,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=A-1;g>=m;--g)l.point(E[g],B[g]);l.lineEnd(),l.areaEnd()}y&&(E[A]=+e(v,A,f),B[A]=+t(v,A,f),l.point(a?+a(v,A,f):E[A],r?+r(v,A,f):B[A]))}if(N)return l=null,N+""||null}function u(){return Sie().defined(n).curve(o).context(i)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:Qn(+f),a=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Qn(+f),d):e},d.x1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:Qn(+f),d):a},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:Qn(+f),r=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Qn(+f),d):t},d.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Qn(+f),d):r},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(r)},d.lineX1=function(){return u().x(a).y(t)},d.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Qn(!!f),d):n},d.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),d):o},d.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),d):i},d}class _ie{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function h8e(e){return new _ie(e,!0)}function A8e(e){return new _ie(e,!1)}const rM={draw(e,t){const r=yf(t/tS);e.moveTo(r,0),e.arc(0,0,r,0,y4)}},m8e={draw(e,t){const r=yf(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Tie=yf(1/3),p8e=Tie*2,g8e={draw(e,t){const r=yf(t/p8e),a=r*Tie;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},x8e={draw(e,t){const r=yf(t),a=-r/2;e.rect(a,a,r,r)}},v8e=.8908130915292852,Bie=eS(tS/10)/eS(7*tS/10),b8e=eS(y4/10)*Bie,y8e=-Nie(y4/10)*Bie,w8e={draw(e,t){const r=yf(t*v8e),a=b8e*r,n=y8e*r;e.moveTo(0,-r),e.lineTo(a,n);for(let i=1;i<5;++i){const o=y4*i/5,l=Nie(o),c=eS(o);e.lineTo(c*r,-l*r),e.lineTo(l*a-c*n,c*a+l*n)}e.closePath()}},dI=yf(3),N8e={draw(e,t){const r=-yf(t/(dI*3));e.moveTo(0,r*2),e.lineTo(-dI*r,-r),e.lineTo(dI*r,-r),e.closePath()}},Kd=-.5,Wd=yf(3)/2,mF=1/yf(12),E8e=(mF/2+1)*3,C8e={draw(e,t){const r=yf(t/E8e),a=r/2,n=r*mF,i=a,o=r*mF+r,l=-i,c=o;e.moveTo(a,n),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Kd*a-Wd*n,Wd*a+Kd*n),e.lineTo(Kd*i-Wd*o,Wd*i+Kd*o),e.lineTo(Kd*l-Wd*c,Wd*l+Kd*c),e.lineTo(Kd*a+Wd*n,Kd*n-Wd*a),e.lineTo(Kd*i+Wd*o,Kd*o-Wd*i),e.lineTo(Kd*l+Wd*c,Kd*c-Wd*l),e.closePath()}};function j8e(e,t){let r=null,a=eM(n);e=typeof e=="function"?e:Qn(e||rM),t=typeof t=="function"?t:Qn(t===void 0?64:+t);function n(){let i;if(r||(r=i=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return n.type=function(i){return arguments.length?(e=typeof i=="function"?i:Qn(i),n):e},n.size=function(i){return arguments.length?(t=typeof i=="function"?i:Qn(+i),n):t},n.context=function(i){return arguments.length?(r=i??null,n):r},n}function rS(){}function aS(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Iie(e){this._context=e}Iie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:aS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:aS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function k8e(e){return new Iie(e)}function Oie(e){this._context=e}Oie.prototype={areaStart:rS,areaEnd:rS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:aS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function S8e(e){return new Oie(e)}function Die(e){this._context=e}Die.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:aS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _8e(e){return new Die(e)}function Fie(e){this._context=e}Fie.prototype={areaStart:rS,areaEnd:rS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function T8e(e){return new Fie(e)}function lG(e){return e<0?-1:1}function cG(e,t,r){var a=e._x1-e._x0,n=t-e._x1,i=(e._y1-e._y0)/(a||n<0&&-0),o=(r-e._y1)/(n||a<0&&-0),l=(i*n+o*a)/(a+n);return(lG(i)+lG(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function dG(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function uI(e,t,r){var a=e._x0,n=e._y0,i=e._x1,o=e._y1,l=(i-a)/3;e._context.bezierCurveTo(a+l,n+l*t,i-l,o-l*r,i,o)}function nS(e){this._context=e}nS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:uI(this,this._t0,dG(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,uI(this,dG(this,r=cG(this,e,t)),r);break;default:uI(this,this._t0,r=cG(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Pie(e){this._context=new Rie(e)}(Pie.prototype=Object.create(nS.prototype)).point=function(e,t){nS.prototype.point.call(this,t,e)};function Rie(e){this._context=e}Rie.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,n,i){this._context.bezierCurveTo(t,e,a,r,i,n)}};function B8e(e){return new nS(e)}function I8e(e){return new Pie(e)}function Lie(e){this._context=e}Lie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=uG(e),n=uG(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(a[0][i],n[0][i],a[1][i],n[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function uG(e){var t,r=e.length-1,a,n=new Array(r),i=new Array(r),o=new Array(r);for(n[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)n[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(n[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=n[t]/i[t-1],i[t]-=a,o[t]-=a*o[t-1];for(n[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)n[t]=(o[t]-n[t+1])/i[t];for(i[r-1]=(e[r]+n[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-n[t+1];return[n,i]}function O8e(e){return new Lie(e)}function N4(e,t){this._context=e,this._t=t}N4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function D8e(e){return new N4(e,.5)}function F8e(e){return new N4(e,0)}function P8e(e){return new N4(e,1)}function o1(e,t){if((o=e.length)>1)for(var r=1,a,n,i=e[t[0]],o,l=i.length;r<o;++r)for(n=i,i=e[t[r]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(n[a][1])?n[a][0]:n[a][1]}function pF(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function R8e(e,t){return e[t]}function L8e(e){const t=[];return t.key=e,t}function M8e(){var e=Qn([]),t=pF,r=o1,a=R8e;function n(i){var o=Array.from(e.apply(this,arguments),L8e),l,c=o.length,d=-1,u;for(const f of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+a(f,o[l].key,d,i)]).data=f;for(l=0,u=tM(t(o));l<c;++l)o[u[l]].index=l;return r(o,u),o}return n.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Qn(Array.from(i)),n):e},n.value=function(i){return arguments.length?(a=typeof i=="function"?i:Qn(+i),n):a},n.order=function(i){return arguments.length?(t=i==null?pF:typeof i=="function"?i:Qn(Array.from(i)),n):t},n.offset=function(i){return arguments.length?(r=i??o1,n):r},n}function U8e(e,t){if((a=e.length)>0){for(var r,a,n=0,i=e[0].length,o;n<i;++n){for(o=r=0;r<a;++r)o+=e[r][n][1]||0;if(o)for(r=0;r<a;++r)e[r][n][1]/=o}o1(e,t)}}function H8e(e,t){if((n=e.length)>0){for(var r=0,a=e[t[0]],n,i=a.length;r<i;++r){for(var o=0,l=0;o<n;++o)l+=e[o][r][1]||0;a[r][1]+=a[r][0]=-l/2}o1(e,t)}}function Q8e(e,t){if(!(!((o=e.length)>0)||!((i=(n=e[t[0]]).length)>0))){for(var r=0,a=1,n,i,o;a<i;++a){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],f=u[a][1]||0,A=u[a-1][1]||0,m=(f-A)/2,g=0;g<l;++g){var x=e[t[g]],v=x[a][1]||0,y=x[a-1][1]||0;m+=v-y}c+=f,d+=m*f}n[a-1][1]+=n[a-1][0]=r,c&&(r-=d/c)}n[a-1][1]+=n[a-1][0]=r,o1(e,t)}}var z8e=["type","size","sizeType"];function gF(){return gF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},gF.apply(null,arguments)}function fG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function hG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fG(Object(r),!0).forEach(function(a){$8e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function $8e(e,t,r){return(t=V8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V8e(e){var t=G8e(e,"string");return typeof t=="symbol"?t:t+""}function G8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q8e(e,t){if(e==null)return{};var r,a,n=K8e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function K8e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Mie={symbolCircle:rM,symbolCross:m8e,symbolDiamond:g8e,symbolSquare:x8e,symbolStar:w8e,symbolTriangle:N8e,symbolWye:C8e},W8e=Math.PI/180,X8e=e=>{var t="symbol".concat(cE(e));return Mie[t]||rM},Y8e=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*W8e;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},J8e=(e,t)=>{Mie["symbol".concat(cE(e))]=t},aM=e=>{var{type:t="circle",size:r=64,sizeType:a="area"}=e,n=q8e(e,z8e),i=hG(hG({},n),{},{type:t,size:r,sizeType:a}),o=()=>{var f=X8e(t),A=j8e().type(f).size(Y8e(r,a,t));return A()},{className:l,cx:c,cy:d}=i,u=Oa(i,!0);return c===+c&&d===+d&&r===+r?w.createElement("path",gF({},u,{className:ia("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(d,")"),d:o()})):null};aM.registerSymbol=J8e;function xF(){return xF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},xF.apply(null,arguments)}function AG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Z8e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AG(Object(r),!0).forEach(function(a){nM(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function nM(e,t,r){return(t=eLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eLe(e){var t=tLe(e,"string");return typeof t=="symbol"?t:t+""}function tLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xd=32;class sM extends w.PureComponent{renderIcon(t,r){var{inactiveColor:a}=this.props,n=Xd/2,i=Xd/6,o=Xd/3,l=t.inactive?a:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return w.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:n,x2:Xd,y2:n,className:"recharts-legend-icon"});if(c==="line")return w.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(n,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(n,`
            H`).concat(Xd,"M").concat(2*o,",").concat(n,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(n),className:"recharts-legend-icon"});if(c==="rect")return w.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Xd/8,"h").concat(Xd,"v").concat(Xd*3/4,"h").concat(-Xd,"z"),className:"recharts-legend-icon"});if(w.isValidElement(t.legendIcon)){var d=Z8e({},t);return delete d.legendIcon,w.cloneElement(t.legendIcon,d)}return w.createElement(aM,{fill:l,cx:n,cy:n,size:Xd,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:a,formatter:n,inactiveColor:i,iconType:o}=this.props,l={x:0,y:0,width:Xd,height:Xd},c={display:a==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,f)=>{var A=u.formatter||n,m=ia({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:u.inactive});if(u.type==="none")return null;var g=u.inactive?i:u.color,x=A?A(u.value,u,f):u.value;return w.createElement("li",xF({className:m,style:c,key:"legend-item-".concat(f)},Dx(this.props,u,f)),w.createElement(JL,{width:r,height:r,viewBox:l,style:d,"aria-label":"".concat(x," legend icon")},this.renderIcon(u,o)),w.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},x))})}render(){var{payload:t,layout:r,align:a}=this.props;if(!t||!t.length)return null;var n={padding:0,margin:0,textAlign:r==="horizontal"?a:"left"};return w.createElement("ul",{className:"recharts-default-legend",style:n},this.renderItems())}}nM(sM,"displayName","Legend");nM(sM,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var fI={},hI={},mG;function rLe(){return mG||(mG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){const n=new Map;for(let i=0;i<r.length;i++){const o=r[i],l=a(o);n.has(l)||n.set(l,o)}return Array.from(n.values())}e.uniqBy=t}(hI)),hI}var AI={},pG;function E4(){return pG||(pG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(AI)),AI}var mI={},pI={},gI={},gG;function aLe(){return gG||(gG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(gI)),gI}var xG;function iM(){return xG||(xG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aLe();function r(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=r}(pI)),pI}var xI={},vG;function nLe(){return vG||(vG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(xI)),xI}var bG;function sLe(){return bG||(bG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iM(),r=nLe();function a(n){return r.isObjectLike(n)&&t.isArrayLike(n)}e.isArrayLikeObject=a}(mI)),mI}var vI={},bI={},yG;function iLe(){return yG||(yG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WL();function r(a){return function(n){return t.get(n,a)}}e.property=r}(bI)),bI}var yI={},wI={},NI={},EI={},wG;function Uie(){return wG||(wG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(EI)),EI}var CI={},NG;function Hie(){return NG||(NG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(CI)),CI}var jI={},EG;function oM(){return EG||(EG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){return r===a||Number.isNaN(r)&&Number.isNaN(a)}e.eq=t}(jI)),jI}var CG;function oLe(){return CG||(CG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lM(),r=Uie(),a=Hie(),n=oM();function i(f,A,m){return typeof m!="function"?t.isMatch(f,A):o(f,A,function g(x,v,y,N,E,B){const _=m(x,v,y,N,E,B);return _!==void 0?!!_:o(x,v,g,B)},new Map)}function o(f,A,m,g){if(A===f)return!0;switch(typeof A){case"object":return l(f,A,m,g);case"function":return Object.keys(A).length>0?o(f,{...A},m,g):n.eq(f,A);default:return r.isObject(f)?typeof A=="string"?A==="":!0:n.eq(f,A)}}function l(f,A,m,g){if(A==null)return!0;if(Array.isArray(A))return d(f,A,m,g);if(A instanceof Map)return c(f,A,m,g);if(A instanceof Set)return u(f,A,m,g);const x=Object.keys(A);if(f==null)return x.length===0;if(x.length===0)return!0;if(g&&g.has(A))return g.get(A)===f;g&&g.set(A,f);try{for(let v=0;v<x.length;v++){const y=x[v];if(!a.isPrimitive(f)&&!(y in f)||A[y]===void 0&&f[y]!==void 0||A[y]===null&&f[y]!==null||!m(f[y],A[y],y,f,A,g))return!1}return!0}finally{g&&g.delete(A)}}function c(f,A,m,g){if(A.size===0)return!0;if(!(f instanceof Map))return!1;for(const[x,v]of A.entries()){const y=f.get(x);if(m(y,v,x,f,A,g)===!1)return!1}return!0}function d(f,A,m,g){if(A.length===0)return!0;if(!Array.isArray(f))return!1;const x=new Set;for(let v=0;v<A.length;v++){const y=A[v];let N=!1;for(let E=0;E<f.length;E++){if(x.has(E))continue;const B=f[E];let _=!1;if(m(B,y,v,f,A,g)&&(_=!0),_){x.add(E),N=!0;break}}if(!N)return!1}return!0}function u(f,A,m,g){return A.size===0?!0:f instanceof Set?d([...f],[...A],m,g):!1}e.isMatchWith=i,e.isSetMatch=u}(NI)),NI}var jG;function lM(){return jG||(jG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oLe();function r(a,n){return t.isMatchWith(a,n,()=>{})}e.isMatch=r}(wI)),wI}var kI={},SI={},_I={},kG;function Qie(){return kG||(kG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(a=>Object.prototype.propertyIsEnumerable.call(r,a))}e.getSymbols=t}(_I)),_I}var TI={},SG;function cM(){return SG||(SG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(TI)),TI}var BI={},_G;function dM(){return _G||(_G=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",a="[object Number]",n="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",u="[object Array]",f="[object Function]",A="[object ArrayBuffer]",m="[object Object]",g="[object Error]",x="[object DataView]",v="[object Uint8Array]",y="[object Uint8ClampedArray]",N="[object Uint16Array]",E="[object Uint32Array]",B="[object BigUint64Array]",_="[object Int8Array]",I="[object Int16Array]",j="[object Int32Array]",k="[object BigInt64Array]",T="[object Float32Array]",L="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=A,e.arrayTag=u,e.bigInt64ArrayTag=k,e.bigUint64ArrayTag=B,e.booleanTag=n,e.dataViewTag=x,e.dateTag=l,e.errorTag=g,e.float32ArrayTag=T,e.float64ArrayTag=L,e.functionTag=f,e.int16ArrayTag=I,e.int32ArrayTag=j,e.int8ArrayTag=_,e.mapTag=c,e.numberTag=a,e.objectTag=m,e.regexpTag=t,e.setTag=d,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=N,e.uint32ArrayTag=E,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=y}(BI)),BI}var II={},TG;function lLe(){return TG||(TG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(II)),II}var BG;function zie(){return BG||(BG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qie(),r=cM(),a=dM(),n=Hie(),i=lLe();function o(u,f){return l(u,void 0,u,new Map,f)}function l(u,f,A,m=new Map,g=void 0){const x=g==null?void 0:g(u,f,A,m);if(x!=null)return x;if(n.isPrimitive(u))return u;if(m.has(u))return m.get(u);if(Array.isArray(u)){const v=new Array(u.length);m.set(u,v);for(let y=0;y<u.length;y++)v[y]=l(u[y],y,A,m,g);return Object.hasOwn(u,"index")&&(v.index=u.index),Object.hasOwn(u,"input")&&(v.input=u.input),v}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const v=new RegExp(u.source,u.flags);return v.lastIndex=u.lastIndex,v}if(u instanceof Map){const v=new Map;m.set(u,v);for(const[y,N]of u)v.set(y,l(N,y,A,m,g));return v}if(u instanceof Set){const v=new Set;m.set(u,v);for(const y of u)v.add(l(y,void 0,A,m,g));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const v=new(Object.getPrototypeOf(u)).constructor(u.length);m.set(u,v);for(let y=0;y<u.length;y++)v[y]=l(u[y],y,A,m,g);return v}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const v=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return m.set(u,v),c(v,u,A,m,g),v}if(typeof File<"u"&&u instanceof File){const v=new File([u],u.name,{type:u.type});return m.set(u,v),c(v,u,A,m,g),v}if(u instanceof Blob){const v=new Blob([u],{type:u.type});return m.set(u,v),c(v,u,A,m,g),v}if(u instanceof Error){const v=new u.constructor;return m.set(u,v),v.message=u.message,v.name=u.name,v.stack=u.stack,v.cause=u.cause,c(v,u,A,m,g),v}if(typeof u=="object"&&d(u)){const v=Object.create(Object.getPrototypeOf(u));return m.set(u,v),c(v,u,A,m,g),v}return u}function c(u,f,A=u,m,g){const x=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<x.length;v++){const y=x[v],N=Object.getOwnPropertyDescriptor(u,y);(N==null||N.writable)&&(u[y]=l(f[y],y,A,m,g))}}function d(u){switch(r.getTag(u)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c}(SI)),SI}var IG;function cLe(){return IG||(IG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zie();function r(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=r}(kI)),kI}var OG;function dLe(){return OG||(OG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lM(),r=cLe();function a(n){return n=r.cloneDeep(n),i=>t.isMatch(i,n)}e.matches=a}(yI)),yI}var OI={},DI={},FI={},DG;function uLe(){return DG||(DG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zie(),r=dM();function a(n,i){return t.cloneDeepWith(n,(o,l,c,d)=>{const u=i==null?void 0:i(o,l,c,d);if(u!=null)return u;if(typeof n=="object")switch(Object.prototype.toString.call(n)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new n.constructor(n==null?void 0:n.valueOf());return t.copyProperties(f,n),f}case r.argumentsTag:{const f={};return t.copyProperties(f,n),f.length=n.length,f[Symbol.iterator]=n[Symbol.iterator],f}default:return}})}e.cloneDeepWith=a}(FI)),FI}var FG;function fLe(){return FG||(FG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uLe();function r(a){return t.cloneDeepWith(a)}e.cloneDeep=r}(DI)),DI}var PI={},RI={},PG;function $ie(){return PG||(PG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(a,n=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<n;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=r}(RI)),RI}var LI={},RG;function hLe(){return RG||(RG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cM();function r(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=r}(LI)),LI}var LG;function ALe(){return LG||(LG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mie(),r=$ie(),a=hLe(),n=KL();function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=n.toPath(l):c=[l],c.length===0)return!1;let d=o;for(let u=0;u<c.length;u++){const f=c[u];if((d==null||!Object.hasOwn(d,f))&&!((Array.isArray(d)||a.isArguments(d))&&r.isIndex(f)&&f<d.length))return!1;d=d[f]}return!0}e.has=i}(PI)),PI}var MG;function mLe(){return MG||(MG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lM(),r=pie(),a=fLe(),n=WL(),i=ALe();function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=a.cloneDeep(c),function(d){const u=n.get(d,l);return u===void 0?i.has(d,l):c===void 0?u===void 0:t.isMatch(u,c)}}e.matchesProperty=o}(OI)),OI}var UG;function uM(){return UG||(UG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E4(),r=iLe(),a=dLe(),n=mLe();function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?n.matchesProperty(o[0],o[1]):a.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i}(vI)),vI}var HG;function pLe(){return HG||(HG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rLe(),r=E4(),a=sLe(),n=uM();function i(o,l=r.identity){return a.isArrayLikeObject(o)?t.uniqBy(Array.from(o),n.iteratee(l)):[]}e.uniqBy=i}(fI)),fI}var MI,QG;function gLe(){return QG||(QG=1,MI=pLe().uniqBy),MI}var xLe=gLe();const zG=Kl(xLe);function Vie(e,t,r){return t===!0?zG(e,r):typeof t=="function"?zG(e,t):e}var UI={exports:{}},HI={},QI={exports:{}},zI={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $G;function vLe(){if($G)return zI;$G=1;var e=k1();function t(f,A){return f===A&&(f!==0||1/f===1/A)||f!==f&&A!==A}var r=typeof Object.is=="function"?Object.is:t,a=e.useState,n=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(f,A){var m=A(),g=a({inst:{value:m,getSnapshot:A}}),x=g[0].inst,v=g[1];return i(function(){x.value=m,x.getSnapshot=A,c(x)&&v({inst:x})},[f,m,A]),n(function(){return c(x)&&v({inst:x}),f(function(){c(x)&&v({inst:x})})},[f]),o(m),m}function c(f){var A=f.getSnapshot;f=f.value;try{var m=A();return!r(f,m)}catch{return!0}}function d(f,A){return A()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return zI.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,zI}var VG;function bLe(){return VG||(VG=1,QI.exports=vLe()),QI.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GG;function yLe(){if(GG)return HI;GG=1;var e=k1(),t=bLe();function r(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var a=typeof Object.is=="function"?Object.is:r,n=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return HI.useSyncExternalStoreWithSelector=function(d,u,f,A,m){var g=i(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=l(function(){function y(I){if(!N){if(N=!0,E=I,I=A(I),m!==void 0&&x.hasValue){var j=x.value;if(m(j,I))return B=j}return B=I}if(j=B,a(E,I))return j;var k=A(I);return m!==void 0&&m(j,k)?(E=I,j):(E=I,B=k)}var N=!1,E,B,_=f===void 0?null:f;return[function(){return y(u())},_===null?void 0:function(){return y(_())}]},[u,f,A,m]);var v=n(d,g[0],g[1]);return o(function(){x.hasValue=!0,x.value=v},[v]),c(v),v},HI}var qG;function wLe(){return qG||(qG=1,UI.exports=yLe()),UI.exports}var Gie=wLe();const NLe=Kl(Gie);var fM=w.createContext(null),ELe=e=>e,Jn=()=>{var e=w.useContext(fM);return e?e.store.dispatch:ELe},Ok=()=>{},CLe=()=>Ok,jLe=(e,t)=>e===t;function or(e){var t=w.useContext(fM);return Gie.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:CLe,t?t.store.getState:Ok,t?t.store.getState:Ok,t?e:Ok,jLe)}function kLe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function SLe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function _Le(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${r}]`)}}var KG=e=>Array.isArray(e)?e:[e];function TLe(e){const t=Array.isArray(e[0])?e[0]:e;return _Le(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function BLe(e,t){const r=[],{length:a}=e;for(let n=0;n<a;n++)r.push(e[n].apply(null,t));return r}var ILe=class{constructor(e){this.value=e}deref(){return this.value}},OLe=typeof WeakRef<"u"?WeakRef:ILe,DLe=0,WG=1;function hj(){return{s:DLe,v:void 0,o:null,p:null}}function qie(e,t={}){let r=hj();const{resultEqualityCheck:a}=t;let n,i=0;function o(){var f;let l=r;const{length:c}=arguments;for(let A=0,m=c;A<m;A++){const g=arguments[A];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=l.o;x===null&&(l.o=x=new WeakMap);const v=x.get(g);v===void 0?(l=hj(),x.set(g,l)):l=v}else{let x=l.p;x===null&&(l.p=x=new Map);const v=x.get(g);v===void 0?(l=hj(),x.set(g,l)):l=v}}const d=l;let u;if(l.s===WG)u=l.v;else if(u=e.apply(null,arguments),i++,a){const A=((f=n==null?void 0:n.deref)==null?void 0:f.call(n))??n;A!=null&&a(A,u)&&(u=A,i!==0&&i--),n=typeof u=="object"&&u!==null||typeof u=="function"?new OLe(u):u}return d.s=WG,d.v=u,u}return o.clearCache=()=>{r=hj(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function FLe(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...n)=>{let i=0,o=0,l,c={},d=n.pop();typeof d=="object"&&(c=d,d=n.pop()),kLe(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const u={...r,...c},{memoize:f,memoizeOptions:A=[],argsMemoize:m=qie,argsMemoizeOptions:g=[]}=u,x=KG(A),v=KG(g),y=TLe(n),N=f(function(){return i++,d.apply(null,arguments)},...x),E=m(function(){o++;const _=BLe(y,arguments);return l=N.apply(null,_),l},...v);return Object.assign(E,{resultFunc:d,memoizedResultFunc:N,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:m})};return Object.assign(a,{withTypes:()=>a}),a}var xt=FLe(qie),PLe=Object.assign((e,t=xt)=>{SLe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),a=r.map(i=>e[i]);return t(a,(...i)=>i.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>PLe}),$I={},VI={},GI={},XG;function RLe(){return XG||(XG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const r=(a,n,i)=>{if(a!==n){const o=t(a),l=t(n);if(o===l&&o===0){if(a<n)return i==="desc"?1:-1;if(a>n)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=r}(GI)),GI}var qI={},KI={},YG;function Kie(){return YG||(YG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(KI)),KI}var JG;function LLe(){return JG||(JG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kie(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function n(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(a.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=n}(qI)),qI}var ZG;function MLe(){return ZG||(ZG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RLe(),r=LLe(),a=KL();function n(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const d=(m,g)=>{let x=m;for(let v=0;v<g.length&&x!=null;++v)x=x[g[v]];return x},u=(m,g)=>g==null||m==null?g:typeof m=="object"&&"key"in m?Object.hasOwn(g,m.key)?g[m.key]:d(g,m.path):typeof m=="function"?m(g):Array.isArray(m)?d(g,m):typeof g=="object"?g[m]:g,f=o.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:a.toPath(m)}));return i.map(m=>({original:m,criteria:f.map(g=>u(g,m))})).slice().sort((m,g)=>{for(let x=0;x<f.length;x++){const v=t.compareValues(m.criteria[x],g.criteria[x],l[x]);if(v!==0)return v}return 0}).map(m=>m.original)}e.orderBy=n}(VI)),VI}var WI={},eq;function ULe(){return eq||(eq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a=1){const n=[],i=Math.floor(a),o=(l,c)=>{for(let d=0;d<l.length;d++){const u=l[d];Array.isArray(u)&&c<i?o(u,c+1):n.push(u)}};return o(r,0),n}e.flatten=t}(WI)),WI}var XI={},tq;function Wie(){return tq||(tq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$ie(),r=iM(),a=Uie(),n=oM();function i(o,l,c){return a.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?n.eq(c[l],o):!1}e.isIterateeCall=i}(XI)),XI}var rq;function HLe(){return rq||(rq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MLe(),r=ULe(),a=Wie();function n(i,...o){const l=o.length;return l>1&&a.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&a.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=n}($I)),$I}var YI,aq;function QLe(){return aq||(aq=1,YI=HLe().sortBy),YI}var zLe=QLe();const C4=Kl(zLe);var Xie=e=>e.legend.settings,$Le=e=>e.legend.size,VLe=e=>e.legend.payload,GLe=xt([VLe,Xie],(e,t)=>{var{itemSorter:r}=t,a=e.flat(1);return r?C4(a,r):a});function qLe(){return or(GLe)}var Aj=1;function Yie(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=w.useState({height:0,left:0,top:0,width:0}),a=w.useCallback(n=>{if(n!=null){var i=n.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>Aj||Math.abs(o.left-t.left)>Aj||Math.abs(o.top-t.top)>Aj||Math.abs(o.width-t.width)>Aj)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function So(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var KLe=typeof Symbol=="function"&&Symbol.observable||"@@observable",nq=KLe,JI=()=>Math.random().toString(36).substring(7).split("").join("."),WLe={INIT:`@@redux/INIT${JI()}`,REPLACE:`@@redux/REPLACE${JI()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${JI()}`},sS=WLe;function hM(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Jie(e,t,r){if(typeof e!="function")throw new Error(So(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(So(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(So(1));return r(Jie)(e,t)}let a=e,n=t,i=new Map,o=i,l=0,c=!1;function d(){o===i&&(o=new Map,i.forEach((v,y)=>{o.set(y,v)}))}function u(){if(c)throw new Error(So(3));return n}function f(v){if(typeof v!="function")throw new Error(So(4));if(c)throw new Error(So(5));let y=!0;d();const N=l++;return o.set(N,v),function(){if(y){if(c)throw new Error(So(6));y=!1,d(),o.delete(N),i=null}}}function A(v){if(!hM(v))throw new Error(So(7));if(typeof v.type>"u")throw new Error(So(8));if(typeof v.type!="string")throw new Error(So(17));if(c)throw new Error(So(9));try{c=!0,n=a(n,v)}finally{c=!1}return(i=o).forEach(N=>{N()}),v}function m(v){if(typeof v!="function")throw new Error(So(10));a=v,A({type:sS.REPLACE})}function g(){const v=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(So(11));function N(){const B=y;B.next&&B.next(u())}return N(),{unsubscribe:v(N)}},[nq](){return this}}}return A({type:sS.INIT}),{dispatch:A,subscribe:f,getState:u,replaceReducer:m,[nq]:g}}function XLe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:sS.INIT})>"u")throw new Error(So(12));if(typeof r(void 0,{type:sS.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(So(13))})}function Zie(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const a=Object.keys(r);let n;try{XLe(r)}catch(i){n=i}return function(o={},l){if(n)throw n;let c=!1;const d={};for(let u=0;u<a.length;u++){const f=a[u],A=r[f],m=o[f],g=A(m,l);if(typeof g>"u")throw l&&l.type,new Error(So(14));d[f]=g,c=c||g!==m}return c=c||a.length!==Object.keys(o).length,c?d:o}}function iS(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...a)=>t(r(...a)))}function YLe(...e){return t=>(r,a)=>{const n=t(r,a);let i=()=>{throw new Error(So(15))};const o={getState:n.getState,dispatch:(c,...d)=>i(c,...d)},l=e.map(c=>c(o));return i=iS(...l)(n.dispatch),{...n,dispatch:i}}}function eoe(e){return hM(e)&&"type"in e&&typeof e.type=="string"}var toe=Symbol.for("immer-nothing"),sq=Symbol.for("immer-draftable"),bd=Symbol.for("immer-state");function Yu(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var l1=Object.getPrototypeOf;function ux(e){return!!e&&!!e[bd]}function nA(e){var t;return e?roe(e)||Array.isArray(e)||!!e[sq]||!!((t=e.constructor)!=null&&t[sq])||k4(e)||S4(e):!1}var JLe=Object.prototype.constructor.toString();function roe(e){if(!e||typeof e!="object")return!1;const t=l1(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===JLe}function oS(e,t){j4(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,a)=>t(a,r,e))}function j4(e){const t=e[bd];return t?t.type_:Array.isArray(e)?1:k4(e)?2:S4(e)?3:0}function vF(e,t){return j4(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function aoe(e,t,r){const a=j4(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function ZLe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function k4(e){return e instanceof Map}function S4(e){return e instanceof Set}function ug(e){return e.copy_||e.base_}function bF(e,t){if(k4(e))return new Map(e);if(S4(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=roe(e);if(t===!0||t==="class_only"&&!r){const a=Object.getOwnPropertyDescriptors(e);delete a[bd];let n=Reflect.ownKeys(a);for(let i=0;i<n.length;i++){const o=n[i],l=a[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(a[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(l1(e),a)}else{const a=l1(e);if(a!==null&&r)return{...e};const n=Object.create(a);return Object.assign(n,e)}}function AM(e,t=!1){return _4(e)||ux(e)||!nA(e)||(j4(e)>1&&(e.set=e.add=e.clear=e.delete=eMe),Object.freeze(e),t&&Object.entries(e).forEach(([r,a])=>AM(a,!0))),e}function eMe(){Yu(2)}function _4(e){return Object.isFrozen(e)}var tMe={};function fx(e){const t=tMe[e];return t||Yu(0,e),t}var vN;function noe(){return vN}function rMe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function iq(e,t){t&&(fx("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function yF(e){wF(e),e.drafts_.forEach(aMe),e.drafts_=null}function wF(e){e===vN&&(vN=e.parent_)}function oq(e){return vN=rMe(vN,e)}function aMe(e){const t=e[bd];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function lq(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[bd].modified_&&(yF(t),Yu(4)),nA(e)&&(e=lS(t,e),t.parent_||cS(t,e)),t.patches_&&fx("Patches").generateReplacementPatches_(r[bd].base_,e,t.patches_,t.inversePatches_)):e=lS(t,r,[]),yF(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==toe?e:void 0}function lS(e,t,r){if(_4(t))return t;const a=t[bd];if(!a)return oS(t,(n,i)=>cq(e,a,t,n,i,r)),t;if(a.scope_!==e)return t;if(!a.modified_)return cS(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const n=a.copy_;let i=n,o=!1;a.type_===3&&(i=new Set(n),n.clear(),o=!0),oS(i,(l,c)=>cq(e,a,n,l,c,r,o)),cS(e,n,!1),r&&e.patches_&&fx("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function cq(e,t,r,a,n,i,o){if(ux(n)){const l=i&&t&&t.type_!==3&&!vF(t.assigned_,a)?i.concat(a):void 0,c=lS(e,n,l);if(aoe(r,a,c),ux(c))e.canAutoFreeze_=!1;else return}else o&&r.add(n);if(nA(n)&&!_4(n)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;lS(e,n),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,a)&&cS(e,n)}}function cS(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&AM(t,r)}function nMe(e,t){const r=Array.isArray(e),a={type_:r?1:0,scope_:t?t.scope_:noe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=a,i=mM;r&&(n=[a],i=bN);const{revoke:o,proxy:l}=Proxy.revocable(n,i);return a.draft_=l,a.revoke_=o,l}var mM={get(e,t){if(t===bd)return e;const r=ug(e);if(!vF(r,t))return sMe(e,r,t);const a=r[t];return e.finalized_||!nA(a)?a:a===ZI(e.base_,t)?(e6(e),e.copy_[t]=EF(a,e)):a},has(e,t){return t in ug(e)},ownKeys(e){return Reflect.ownKeys(ug(e))},set(e,t,r){const a=soe(ug(e),t);if(a!=null&&a.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const n=ZI(ug(e),t),i=n==null?void 0:n[bd];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(ZLe(r,n)&&(r!==void 0||vF(e.base_,t)))return!0;e6(e),NF(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return ZI(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,e6(e),NF(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=ug(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty(){Yu(11)},getPrototypeOf(e){return l1(e.base_)},setPrototypeOf(){Yu(12)}},bN={};oS(mM,(e,t)=>{bN[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});bN.deleteProperty=function(e,t){return bN.set.call(this,e,t,void 0)};bN.set=function(e,t,r){return mM.set.call(this,e[0],t,r,e[0])};function ZI(e,t){const r=e[bd];return(r?ug(r):e)[t]}function sMe(e,t,r){var n;const a=soe(t,r);return a?"value"in a?a.value:(n=a.get)==null?void 0:n.call(e.draft_):void 0}function soe(e,t){if(!(t in e))return;let r=l1(e);for(;r;){const a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=l1(r)}}function NF(e){e.modified_||(e.modified_=!0,e.parent_&&NF(e.parent_))}function e6(e){e.copy_||(e.copy_=bF(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var iMe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,a)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(c=i,...d){return o.produce(c,u=>r.call(this,u,...d))}}typeof r!="function"&&Yu(6),a!==void 0&&typeof a!="function"&&Yu(7);let n;if(nA(t)){const i=oq(this),o=EF(t,void 0);let l=!0;try{n=r(o),l=!1}finally{l?yF(i):wF(i)}return iq(i,a),lq(n,i)}else if(!t||typeof t!="object"){if(n=r(t),n===void 0&&(n=t),n===toe&&(n=void 0),this.autoFreeze_&&AM(n,!0),a){const i=[],o=[];fx("Patches").generateReplacementPatches_(t,n,i,o),a(i,o)}return n}else Yu(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let a,n;return[this.produce(t,r,(o,l)=>{a=o,n=l}),a,n]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){nA(e)||Yu(8),ux(e)&&(e=V0(e));const t=oq(this),r=EF(e,void 0);return r[bd].isManual_=!0,wF(t),r}finishDraft(e,t){const r=e&&e[bd];(!r||!r.isManual_)&&Yu(9);const{scope_:a}=r;return iq(a,t),lq(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}r>-1&&(t=t.slice(r+1));const a=fx("Patches").applyPatches_;return ux(e)?a(e,t):this.produce(e,n=>a(n,t))}};function EF(e,t){const r=k4(e)?fx("MapSet").proxyMap_(e,t):S4(e)?fx("MapSet").proxySet_(e,t):nMe(e,t);return(t?t.scope_:noe()).drafts_.push(r),r}function V0(e){return ux(e)||Yu(10,e),ioe(e)}function ioe(e){if(!nA(e)||_4(e))return e;const t=e[bd];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=bF(e,t.scope_.immer_.useStrictShallowCopy_)}else r=bF(e,!0);return oS(r,(a,n)=>{aoe(r,a,ioe(n))}),t&&(t.finalized_=!1),r}var yd=new iMe,ooe=yd.produce;yd.produceWithPatches.bind(yd);yd.setAutoFreeze.bind(yd);yd.setUseStrictShallowCopy.bind(yd);yd.applyPatches.bind(yd);yd.createDraft.bind(yd);yd.finishDraft.bind(yd);function loe(e){return({dispatch:r,getState:a})=>n=>i=>typeof i=="function"?i(r,a,e):n(i)}var oMe=loe(),lMe=loe,cMe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?iS:iS.apply(null,arguments)};function gu(e,t){function r(...a){if(t){let n=t(...a);if(!n)throw new Error(gd(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:a[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=a=>eoe(a)&&a.type===e,r}var coe=class Gw extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Gw.prototype)}static get[Symbol.species](){return Gw}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Gw(...t[0].concat(this)):new Gw(...t.concat(this))}};function dq(e){return nA(e)?ooe(e,()=>{}):e}function mj(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function dMe(e){return typeof e=="boolean"}var uMe=()=>function(t){const{thunk:r=!0,immutableCheck:a=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=t??{};let o=new coe;return r&&(dMe(r)?o.push(oMe):o.push(lMe(r.extraArgument))),o},fMe="RTK_autoBatch",uq=e=>t=>{setTimeout(t,e)},hMe=(e={type:"raf"})=>t=>(...r)=>{const a=t(...r);let n=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:uq(10):e.type==="callback"?e.queueNotification:uq(e.timeout),d=()=>{o=!1,i&&(i=!1,l.forEach(u=>u()))};return Object.assign({},a,{subscribe(u){const f=()=>n&&u(),A=a.subscribe(f);return l.add(u),()=>{A(),l.delete(u)}},dispatch(u){var f;try{return n=!((f=u==null?void 0:u.meta)!=null&&f[fMe]),i=!n,i&&(o||(o=!0,c(d))),a.dispatch(u)}finally{n=!0}}})},AMe=e=>function(r){const{autoBatch:a=!0}=r??{};let n=new coe(e);return a&&n.push(hMe(typeof a=="object"?a:void 0)),n};function mMe(e){const t=uMe(),{reducer:r=void 0,middleware:a,devTools:n=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(hM(r))l=Zie(r);else throw new Error(gd(1));let c;typeof a=="function"?c=a(t):c=t();let d=iS;n&&(d=cMe({trace:!1,...typeof n=="object"&&n}));const u=YLe(...c),f=AMe(u);let A=typeof o=="function"?o(f):f();const m=d(...A);return Jie(l,i,m)}function doe(e){const t={},r=[];let a;const n={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(gd(28));if(l in t)throw new Error(gd(29));return t[l]=o,n},addMatcher(i,o){return r.push({matcher:i,reducer:o}),n},addDefaultCase(i){return a=i,n}};return e(n),[t,r,a]}function pMe(e){return typeof e=="function"}function gMe(e,t){let[r,a,n]=doe(t),i;if(pMe(e))i=()=>dq(e());else{const l=dq(e);i=()=>l}function o(l=i(),c){let d=[r[c.type],...a.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[n]),d.reduce((u,f)=>{if(f)if(ux(u)){const m=f(u,c);return m===void 0?u:m}else{if(nA(u))return ooe(u,A=>f(A,c));{const A=f(u,c);if(A===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return A}}return u},l)}return o.getInitialState=i,o}var xMe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",vMe=(e=21)=>{let t="",r=e;for(;r--;)t+=xMe[Math.random()*64|0];return t},bMe=Symbol.for("rtk-slice-createasyncthunk");function yMe(e,t){return`${e}/${t}`}function wMe({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[bMe];return function(n){const{name:i,reducerPath:o=i}=n;if(!i)throw new Error(gd(11));const l=(typeof n.reducers=="function"?n.reducers(EMe()):n.reducers)||{},c=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(B,_){const I=typeof B=="string"?B:B.type;if(!I)throw new Error(gd(12));if(I in d.sliceCaseReducersByType)throw new Error(gd(13));return d.sliceCaseReducersByType[I]=_,u},addMatcher(B,_){return d.sliceMatchers.push({matcher:B,reducer:_}),u},exposeAction(B,_){return d.actionCreators[B]=_,u},exposeCaseReducer(B,_){return d.sliceCaseReducersByName[B]=_,u}};c.forEach(B=>{const _=l[B],I={reducerName:B,type:yMe(i,B),createNotation:typeof n.reducers=="function"};jMe(_)?SMe(I,_,u,t):CMe(I,_,u)});function f(){const[B={},_=[],I=void 0]=typeof n.extraReducers=="function"?doe(n.extraReducers):[n.extraReducers],j={...B,...d.sliceCaseReducersByType};return gMe(n.initialState,k=>{for(let T in j)k.addCase(T,j[T]);for(let T of d.sliceMatchers)k.addMatcher(T.matcher,T.reducer);for(let T of _)k.addMatcher(T.matcher,T.reducer);I&&k.addDefaultCase(I)})}const A=B=>B,m=new Map,g=new WeakMap;let x;function v(B,_){return x||(x=f()),x(B,_)}function y(){return x||(x=f()),x.getInitialState()}function N(B,_=!1){function I(k){let T=k[B];return typeof T>"u"&&_&&(T=mj(g,I,y)),T}function j(k=A){const T=mj(m,_,()=>new WeakMap);return mj(T,k,()=>{const L={};for(const[F,S]of Object.entries(n.selectors??{}))L[F]=NMe(S,k,()=>mj(g,k,y),_);return L})}return{reducerPath:B,getSelectors:j,get selectors(){return j(I)},selectSlice:I}}const E={name:i,reducer:v,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:y,...N(o),injectInto(B,{reducerPath:_,...I}={}){const j=_??o;return B.inject({reducerPath:j,reducer:v},I),{...E,...N(j,!0)}}};return E}}function NMe(e,t,r,a){function n(i,...o){let l=t(i);return typeof l>"u"&&a&&(l=r()),e(l,...o)}return n.unwrapped=e,n}var Nd=wMe();function EMe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function CMe({type:e,reducerName:t,createNotation:r},a,n){let i,o;if("reducer"in a){if(r&&!kMe(a))throw new Error(gd(17));i=a.reducer,o=a.prepare}else i=a;n.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?gu(e,o):gu(e))}function jMe(e){return e._reducerDefinitionType==="asyncThunk"}function kMe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function SMe({type:e,reducerName:t},r,a,n){if(!n)throw new Error(gd(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=r,f=n(e,i,u);a.exposeAction(t,f),o&&a.addCase(f.fulfilled,o),l&&a.addCase(f.pending,l),c&&a.addCase(f.rejected,c),d&&a.addMatcher(f.settled,d),a.exposeCaseReducer(t,{fulfilled:o||pj,pending:l||pj,rejected:c||pj,settled:d||pj})}function pj(){}var _Me="task",uoe="listener",foe="completed",pM="cancelled",TMe=`task-${pM}`,BMe=`task-${foe}`,CF=`${uoe}-${pM}`,IMe=`${uoe}-${foe}`,T4=class{constructor(e){oB(this,"name","TaskAbortError");oB(this,"message");this.code=e,this.message=`${_Me} ${pM} (reason: ${e})`}},gM=(e,t)=>{if(typeof e!="function")throw new TypeError(gd(32))},dS=()=>{},hoe=(e,t=dS)=>(e.catch(t),e),Aoe=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),zg=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},$g=e=>{if(e.aborted){const{reason:t}=e;throw new T4(t)}};function moe(e,t){let r=dS;return new Promise((a,n)=>{const i=()=>n(new T4(e.reason));if(e.aborted){i();return}r=Aoe(e,i),t.finally(()=>r()).then(a,n)}).finally(()=>{r=dS})}var OMe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof T4?"cancelled":"rejected",error:r}}finally{t==null||t()}},uS=e=>t=>hoe(moe(e,t).then(r=>($g(e),r))),poe=e=>{const t=uS(e);return r=>t(new Promise(a=>setTimeout(a,r)))},{assign:_b}=Object,fq={},B4="listenerMiddleware",DMe=(e,t)=>{const r=a=>Aoe(e,()=>zg(a,e.reason));return(a,n)=>{gM(a);const i=new AbortController;r(i);const o=OMe(async()=>{$g(e),$g(i.signal);const l=await a({pause:uS(i.signal),delay:poe(i.signal),signal:i.signal});return $g(i.signal),l},()=>zg(i,BMe));return n!=null&&n.autoJoin&&t.push(o.catch(dS)),{result:uS(e)(o),cancel(){zg(i,TMe)}}}},FMe=(e,t)=>{const r=async(a,n)=>{$g(t);let i=()=>{};const l=[new Promise((c,d)=>{let u=e({predicate:a,effect:(f,A)=>{A.unsubscribe(),c([f,A.getState(),A.getOriginalState()])}});i=()=>{u(),d()}})];n!=null&&l.push(new Promise(c=>setTimeout(c,n,null)));try{const c=await moe(t,Promise.race(l));return $g(t),c}finally{i()}};return(a,n)=>hoe(r(a,n))},goe=e=>{let{type:t,actionCreator:r,matcher:a,predicate:n,effect:i}=e;if(t)n=gu(t).match;else if(r)t=r.type,n=r.match;else if(a)n=a;else if(!n)throw new Error(gd(21));return gM(i),{predicate:n,type:t,effect:i}},xoe=_b(e=>{const{type:t,predicate:r,effect:a}=goe(e);return{id:vMe(),effect:a,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(gd(22))}}},{withTypes:()=>xoe}),hq=(e,t)=>{const{type:r,effect:a,predicate:n}=goe(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===n)&&i.effect===a)},jF=e=>{e.pending.forEach(t=>{zg(t,CF)})},PMe=e=>()=>{e.forEach(jF),e.clear()},Aq=(e,t,r)=>{try{e(t,r)}catch(a){setTimeout(()=>{throw a},0)}},voe=_b(gu(`${B4}/add`),{withTypes:()=>voe}),RMe=gu(`${B4}/removeAll`),boe=_b(gu(`${B4}/remove`),{withTypes:()=>boe}),LMe=(...e)=>{console.error(`${B4}/error`,...e)},uE=(e={})=>{const t=new Map,{extra:r,onError:a=LMe}=e;gM(a);const n=u=>(u.unsubscribe=()=>t.delete(u.id),t.set(u.id,u),f=>{u.unsubscribe(),f!=null&&f.cancelActive&&jF(u)}),i=u=>{const f=hq(t,u)??xoe(u);return n(f)};_b(i,{withTypes:()=>i});const o=u=>{const f=hq(t,u);return f&&(f.unsubscribe(),u.cancelActive&&jF(f)),!!f};_b(o,{withTypes:()=>o});const l=async(u,f,A,m)=>{const g=new AbortController,x=FMe(i,g.signal),v=[];try{u.pending.add(g),await Promise.resolve(u.effect(f,_b({},A,{getOriginalState:m,condition:(y,N)=>x(y,N).then(Boolean),take:x,delay:poe(g.signal),pause:uS(g.signal),extra:r,signal:g.signal,fork:DMe(g.signal,v),unsubscribe:u.unsubscribe,subscribe:()=>{t.set(u.id,u)},cancelActiveListeners:()=>{u.pending.forEach((y,N,E)=>{y!==g&&(zg(y,CF),E.delete(y))})},cancel:()=>{zg(g,CF),u.pending.delete(g)},throwIfCancelled:()=>{$g(g.signal)}})))}catch(y){y instanceof T4||Aq(a,y,{raisedBy:"effect"})}finally{await Promise.all(v),zg(g,IMe),u.pending.delete(g)}},c=PMe(t);return{middleware:u=>f=>A=>{if(!eoe(A))return f(A);if(voe.match(A))return i(A.payload);if(RMe.match(A)){c();return}if(boe.match(A))return o(A.payload);let m=u.getState();const g=()=>{if(m===fq)throw new Error(gd(23));return m};let x;try{if(x=f(A),t.size>0){const v=u.getState(),y=Array.from(t.values());for(const N of y){let E=!1;try{E=N.predicate(A,v,m)}catch(B){E=!1,Aq(a,B,{raisedBy:"predicate"})}E&&l(N,A,u,g)}}}finally{m=fq}return x},startListening:i,stopListening:o,clearListeners:c}};function gd(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var MMe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},yoe=Nd({name:"chartLayout",initialState:MMe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:UMe,setLayout:HMe,setChartSize:QMe,setScale:zMe}=yoe.actions,$Me=yoe.reducer;function mq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function pq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mq(Object(r),!0).forEach(function(a){VMe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function VMe(e,t,r){return(t=GMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GMe(e){var t=qMe(e,"string");return typeof t=="symbol"?t:t+""}function qMe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fS=Math.PI/180,KMe=e=>e*180/Math.PI,Ja=(e,t,r,a)=>({x:e+Math.cos(-fS*a)*r,y:t+Math.sin(-fS*a)*r}),woe=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(r-(a.top||0)-(a.bottom||0)))/2},WMe=(e,t)=>{var{x:r,y:a}=e,{x:n,y:i}=t;return Math.sqrt((r-n)**2+(a-i)**2)},XMe=(e,t)=>{var{x:r,y:a}=e,{cx:n,cy:i}=t,o=WMe({x:r,y:a},{x:n,y:i});if(o<=0)return{radius:o,angle:0};var l=(r-n)/o,c=Math.acos(l);return a>i&&(c=2*Math.PI-c),{radius:o,angle:KMe(c),angleInRadian:c}},YMe=e=>{var{startAngle:t,endAngle:r}=e,a=Math.floor(t/360),n=Math.floor(r/360),i=Math.min(a,n);return{startAngle:t-i*360,endAngle:r-i*360}},JMe=(e,t)=>{var{startAngle:r,endAngle:a}=t,n=Math.floor(r/360),i=Math.floor(a/360),o=Math.min(n,i);return e+o*360},ZMe=(e,t)=>{var{x:r,y:a}=e,{radius:n,angle:i}=XMe({x:r,y:a},t),{innerRadius:o,outerRadius:l}=t;if(n<o||n>l||n===0)return null;var{startAngle:c,endAngle:d}=YMe(t),u=i,f;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;f=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;f=u>=d&&u<=c}return f?pq(pq({},t),{},{radius:n,angle:JMe(u,t)}):null},Noe=e=>!w.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function Eoe(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function gq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function iu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gq(Object(r),!0).forEach(function(a){e7e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function e7e(e,t,r){return(t=t7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t7e(e){var t=r7e(e,"string");return typeof t=="symbol"?t:t+""}function r7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bn(e,t,r){return $n(e)||$n(t)?r:Ph(t)?fp(e,t,r):typeof t=="function"?t(e):r}var a7e=(e,t,r,a,n)=>{var i,o=-1,l=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(a==="angleAxis"&&n!=null&&Math.abs(Math.abs(n[1]-n[0])-360)<=1e-6)for(var c=0;c<l;c++){var d=c>0?r[c-1].coordinate:r[l-1].coordinate,u=r[c].coordinate,f=c>=l-1?r[0].coordinate:r[c+1].coordinate,A=void 0;if(fo(u-d)!==fo(f-u)){var m=[];if(fo(f-u)===fo(n[1]-n[0])){A=f;var g=u+n[1]-n[0];m[0]=Math.min(g,(g+d)/2),m[1]=Math.max(g,(g+d)/2)}else{A=d;var x=f+n[1]-n[0];m[0]=Math.min(u,(x+u)/2),m[1]=Math.max(u,(x+u)/2)}var v=[Math.min(u,(A+u)/2),Math.max(u,(A+u)/2)];if(e>v[0]&&e<=v[1]||e>=m[0]&&e<=m[1]){({index:o}=r[c]);break}}else{var y=Math.min(d,f),N=Math.max(d,f);if(e>(y+u)/2&&e<=(N+u)/2){({index:o}=r[c]);break}}}else if(t){for(var E=0;E<l;E++)if(E===0&&e<=(t[E].coordinate+t[E+1].coordinate)/2||E>0&&E<l-1&&e>(t[E].coordinate+t[E-1].coordinate)/2&&e<=(t[E].coordinate+t[E+1].coordinate)/2||E===l-1&&e>(t[E].coordinate+t[E-1].coordinate)/2){({index:o}=t[E]);break}}return o},n7e=(e,t,r)=>{if(t&&r){var{width:a,height:n}=r,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&sr(e[i]))return iu(iu({},e),{},{[i]:e[i]+(a||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&sr(e[o]))return iu(iu({},e),{},{[o]:e[o]+(n||0)})}return e},Hh=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Coe=(e,t,r,a)=>{if(a)return e.map(l=>l.coordinate);var n,i,o=e.map(l=>(l.coordinate===t&&(n=!0),l.coordinate===r&&(i=!0),l.coordinate));return n||o.push(t),i||o.push(r),o},joe=(e,t,r)=>{if(!e)return null;var{duplicateDomain:a,type:n,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:u,ticks:f,niceTicks:A,axisType:m}=e;if(!o)return null;var g=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,x=n==="category"&&o.bandwidth?o.bandwidth()/g:0;if(x=m==="angleAxis"&&i&&i.length>=2?fo(i[0]-i[1])*2*x:x,f||A){var v=(f||A||[]).map((y,N)=>{var E=a?a.indexOf(y):y;return{coordinate:o(E)+x,value:y,offset:x,index:N}});return v.filter(y=>!Tc(y.coordinate))}return c&&d?d.map((y,N)=>({coordinate:o(y)+x,value:y,index:N,offset:x})):o.ticks&&u!=null?o.ticks(u).map((y,N)=>({coordinate:o(y)+x,value:y,offset:x,index:N})):o.domain().map((y,N)=>({coordinate:o(y)+x,value:a?a[y]:y,index:N,offset:x}))},xq=1e-4,s7e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,a=e.range(),n=Math.min(a[0],a[1])-xq,i=Math.max(a[0],a[1])+xq,o=e(t[0]),l=e(t[r-1]);(o<n||o>i||l<n||l>i)&&e.domain([t[0],t[r-1]])}},i7e=(e,t)=>{if(!t||t.length!==2||!sr(t[0])||!sr(t[1]))return e;var r=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),n=[e[0],e[1]];return(!sr(e[0])||e[0]<r)&&(n[0]=r),(!sr(e[1])||e[1]>a)&&(n[1]=a),n[0]>a&&(n[0]=a),n[1]<r&&(n[1]=r),n},o7e=e=>{var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var n=0,i=0,o=0;o<t;++o){var l=Tc(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=n,e[o][r][1]=n+l,n=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+l,i=e[o][r][1])}},l7e=e=>{var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var n=0,i=0;i<t;++i){var o=Tc(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=n,e[i][r][1]=n+o,n=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},c7e={sign:o7e,expand:U8e,none:o1,silhouette:H8e,wiggle:Q8e,positive:l7e},d7e=(e,t,r)=>{var a=c7e[r],n=M8e().keys(t).value((i,o)=>+bn(i,o,0)).order(pF).offset(a);return n(e)};function koe(e){return e==null?void 0:String(e)}function vq(e){var{axis:t,ticks:r,bandSize:a,entry:n,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!$n(n[t.dataKey])){var l=xie(r,"value",n[t.dataKey]);if(l)return l.coordinate+a/2}return r[i]?r[i].coordinate+a/2:null}var c=bn(n,$n(o)?t.dataKey:o);return $n(c)?null:t.scale(c)}var bq=e=>{var{axis:t,ticks:r,offset:a,bandSize:n,entry:i,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+a:null;var l=bn(i,t.dataKey,t.scale.domain()[o]);return $n(l)?null:t.scale(l)-n/2+a},u7e=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var a=Math.min(r[0],r[1]),n=Math.max(r[0],r[1]);return a<=0&&n>=0?0:n<0?n:a}return r[0]},f7e=e=>{var t=e.flat(2).filter(sr);return[Math.min(...t),Math.max(...t)]},h7e=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],A7e=(e,t,r)=>{if(e!=null)return h7e(Object.keys(e).reduce((a,n)=>{var i=e[n],{stackedData:o}=i,l=o.reduce((c,d)=>{var u=Eoe(d,t,r),f=f7e(u);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],a[0]),Math.max(l[1],a[1])]},[1/0,-1/0]))},yq=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,wq=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,hx=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!r||a>0)return a}if(e&&t&&t.length>=2){for(var n=C4(t,u=>u.coordinate),i=1/0,o=1,l=n.length;o<l;o++){var c=n[o],d=n[o-1];i=Math.min((c.coordinate||0)-(d.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function Nq(e){var{tooltipEntrySettings:t,dataKey:r,payload:a,value:n,name:i}=e;return iu(iu({},t),{},{dataKey:r,payload:a,value:n,name:i})}function kp(e,t){if(e)return String(e);if(typeof t=="string")return t}function m7e(e,t,r,a,n){if(r==="horizontal"||r==="vertical"){var i=e>=n.left&&e<=n.left+n.width&&t>=n.top&&t<=n.top+n.height;return i?{x:e,y:t}:null}return a?ZMe({x:e,y:t},a):null}var p7e=(e,t,r,a)=>{var n=t.find(d=>d&&d.index===r);if(n){if(e==="horizontal")return{x:n.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:n.coordinate};if(e==="centric"){var i=n.coordinate,{radius:o}=a;return iu(iu(iu({},a),Ja(a.cx,a.cy,o,i)),{},{angle:i,radius:o})}var l=n.coordinate,{angle:c}=a;return iu(iu(iu({},a),Ja(a.cx,a.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},g7e=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,yA=e=>e.layout.width,wA=e=>e.layout.height,x7e=e=>e.layout.scale,Soe=e=>e.layout.margin,xM=xt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),vM=xt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),_oe="data-recharts-item-index",Toe="data-recharts-item-data-key",I4=60;function Eq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function cm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Eq(Object(r),!0).forEach(function(a){v7e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Eq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function v7e(e,t,r){return(t=b7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b7e(e){var t=y7e(e,"string");return typeof t=="symbol"?t:t+""}function y7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var w7e=e=>e.brush.height,$i=xt([yA,wA,Soe,w7e,xM,vM,Xie,$Le],(e,t,r,a,n,i,o,l)=>{var c=i.reduce((g,x)=>{var{orientation:v}=x;if(!x.mirror&&!x.hide){var y=typeof x.width=="number"?x.width:I4;return cm(cm({},g),{},{[v]:g[v]+y})}return g},{left:r.left||0,right:r.right||0}),d=n.reduce((g,x)=>{var{orientation:v}=x;return!x.mirror&&!x.hide?cm(cm({},g),{},{[v]:fp(g,"".concat(v))+x.height}):g},{top:r.top||0,bottom:r.bottom||0}),u=cm(cm({},d),c),f=u.bottom;u.bottom+=a,u=n7e(u,o,l);var A=e-u.left-u.right,m=t-u.top-u.bottom;return cm(cm({brushBottom:f},u),{},{width:Math.max(A,0),height:Math.max(m,0)})}),N7e=xt($i,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Boe=xt(yA,wA,(e,t)=>({x:0,y:0,width:e,height:t})),E7e=w.createContext(null),Bl=()=>w.useContext(E7e)!=null,O4=e=>e.brush,D4=xt([O4,$i,Soe],(e,t,r)=>({height:e.height,x:sr(e.x)?e.x:t.left,y:sr(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:sr(e.width)?e.width:t.width})),bM=()=>{var e,t=Bl(),r=or(N7e),a=or(D4),n=(e=or(O4))===null||e===void 0?void 0:e.padding;return!t||!a||!n?r:{width:a.width-n.left-n.right,height:a.height-n.top-n.bottom,x:n.left,y:n.top}},C7e={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Ioe=()=>{var e;return(e=or($i))!==null&&e!==void 0?e:C7e},yM=()=>or(yA),wM=()=>or(wA),j7e={top:0,right:0,bottom:0,left:0},k7e=()=>{var e;return(e=or(t=>t.layout.margin))!==null&&e!==void 0?e:j7e},ha=e=>e.layout.layoutType,F4=()=>or(ha),S7e={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Ooe=Nd({name:"legend",initialState:S7e,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=V0(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:Cq,setLegendSettings:_7e,addLegendPayload:Doe,removeLegendPayload:Foe}=Ooe.actions,T7e=Ooe.reducer,B7e=["contextPayload"];function kF(){return kF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},kF.apply(null,arguments)}function jq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function c1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jq(Object(r),!0).forEach(function(a){NM(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function NM(e,t,r){return(t=I7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I7e(e){var t=O7e(e,"string");return typeof t=="symbol"?t:t+""}function O7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D7e(e,t){if(e==null)return{};var r,a,n=F7e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function F7e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function P7e(e){return e.value}function R7e(e){var{contextPayload:t}=e,r=D7e(e,B7e),a=Vie(t,e.payloadUniqBy,P7e),n=c1(c1({},r),{},{payload:a});return w.isValidElement(e.content)?w.cloneElement(e.content,n):typeof e.content=="function"?w.createElement(e.content,n):w.createElement(sM,n)}function L7e(e,t,r,a,n,i){var{layout:o,align:l,verticalAlign:c}=t,d,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?d={left:((a||0)-i.width)/2}:d=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?u={top:((n||0)-i.height)/2}:u=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),c1(c1({},d),u)}function M7e(e){var t=Jn();return w.useEffect(()=>{t(_7e(e))},[t,e]),null}function U7e(e){var t=Jn();return w.useEffect(()=>(t(Cq(e)),()=>{t(Cq({width:0,height:0}))}),[t,e]),null}function H7e(e){var t=qLe(),r=c8e(),a=k7e(),{width:n,height:i,wrapperStyle:o,portal:l}=e,[c,d]=Yie([t]),u=yM(),f=wM(),A=u-(a.left||0)-(a.right||0),m=Sp.getWidthOrHeight(e.layout,i,n,A),g=l?o:c1(c1({position:"absolute",width:(m==null?void 0:m.width)||n||"auto",height:(m==null?void 0:m.height)||i||"auto"},L7e(o,e,a,u,f,c)),o),x=l??r;if(x==null)return null;var v=w.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:d},w.createElement(M7e,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),w.createElement(U7e,{width:c.width,height:c.height}),w.createElement(R7e,kF({},e,m,{margin:a,chartWidth:u,chartHeight:f,contextPayload:t})));return ZL.createPortal(v,x)}class Sp extends w.PureComponent{static getWidthOrHeight(t,r,a,n){return t==="vertical"&&sr(r)?{height:r}:t==="horizontal"?{width:a||n}:null}render(){return w.createElement(H7e,this.props)}}NM(Sp,"displayName","Legend");NM(Sp,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function SF(){return SF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},SF.apply(null,arguments)}function kq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function t6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kq(Object(r),!0).forEach(function(a){Q7e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Q7e(e,t,r){return(t=z7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z7e(e){var t=$7e(e,"string");return typeof t=="symbol"?t:t+""}function $7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V7e(e){return Array.isArray(e)&&Ph(e[0])&&Ph(e[1])?e.join(" ~ "):e}var G7e=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:a={},labelStyle:n={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:f,accessibilityLayer:A=!1}=e,m=()=>{if(i&&i.length){var _={padding:0,margin:0},I=(l?C4(i,l):i).map((j,k)=>{if(j.type==="none")return null;var T=j.formatter||o||V7e,{value:L,name:F}=j,S=L,M=F;if(T){var H=T(L,F,j,k,i);if(Array.isArray(H))[S,M]=H;else if(H!=null)S=H;else return null}var K=t6({display:"block",paddingTop:4,paddingBottom:4,color:j.color||"#000"},a);return w.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(k),style:K},Ph(M)?w.createElement("span",{className:"recharts-tooltip-item-name"},M):null,Ph(M)?w.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,w.createElement("span",{className:"recharts-tooltip-item-value"},S),w.createElement("span",{className:"recharts-tooltip-item-unit"},j.unit||""))});return w.createElement("ul",{className:"recharts-tooltip-item-list",style:_},I)}return null},g=t6({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=t6({margin:0},n),v=!$n(u),y=v?u:"",N=ia("recharts-default-tooltip",c),E=ia("recharts-tooltip-label",d);v&&f&&i!==void 0&&i!==null&&(y=f(u,i));var B=A?{role:"status","aria-live":"assertive"}:{};return w.createElement("div",SF({className:N,style:g},B),w.createElement("p",{className:E,style:x},w.isValidElement(y)?y:"".concat(y)),m())},aw="recharts-tooltip-wrapper",q7e={visibility:"hidden"};function K7e(e){var{coordinate:t,translateX:r,translateY:a}=e;return ia(aw,{["".concat(aw,"-right")]:sr(r)&&t&&sr(t.x)&&r>=t.x,["".concat(aw,"-left")]:sr(r)&&t&&sr(t.x)&&r<t.x,["".concat(aw,"-bottom")]:sr(a)&&t&&sr(t.y)&&a>=t.y,["".concat(aw,"-top")]:sr(a)&&t&&sr(t.y)&&a<t.y})}function Sq(e){var{allowEscapeViewBox:t,coordinate:r,key:a,offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=e;if(i&&sr(i[a]))return i[a];var u=r[a]-l-(n>0?n:0),f=r[a]+n;if(t[a])return o[a]?u:f;var A=c[a];if(A==null)return 0;if(o[a]){var m=u,g=A;return m<g?Math.max(f,A):Math.max(u,A)}if(d==null)return 0;var x=f+l,v=A+d;return x>v?Math.max(u,A):Math.max(f,A)}function W7e(e){var{translateX:t,translateY:r,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function X7e(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:a,position:n,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,d,u,f;return o.height>0&&o.width>0&&r?(u=Sq({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:n,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=Sq({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:n,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=W7e({translateX:u,translateY:f,useTranslate3d:l})):d=q7e,{cssProperties:d,cssClasses:K7e({translateX:u,translateY:f,coordinate:r})}}function _q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function gj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_q(Object(r),!0).forEach(function(a){_F(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_q(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function _F(e,t,r){return(t=Y7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y7e(e){var t=J7e(e,"string");return typeof t=="symbol"?t:t+""}function J7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Z7e extends w.PureComponent{constructor(){super(...arguments),_F(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),_F(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,a,n,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&r!==void 0?r:0,y:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&n!==void 0?n:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:a,animationEasing:n,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:d,position:u,reverseDirection:f,useTranslate3d:A,viewBox:m,wrapperStyle:g,lastBoundingBox:x,innerRef:v,hasPortalFromProps:y}=this.props,{cssClasses:N,cssProperties:E}=X7e({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:f,tooltipBox:{height:x.height,width:x.width},useTranslate3d:A,viewBox:m}),B=y?{}:gj(gj({transition:c&&t?"transform ".concat(a,"ms ").concat(n):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),_=gj(gj({},B),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},g);return w.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:N,style:_,ref:v},i)}}var eUe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),_p={isSsr:eUe()},Poe=()=>or(e=>e.rootProps.accessibilityLayer);function Mo(e){return Number.isFinite(e)}function d1(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function TF(){return TF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},TF.apply(null,arguments)}function Tq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Bq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tq(Object(r),!0).forEach(function(a){tUe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function tUe(e,t,r){return(t=rUe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rUe(e){var t=aUe(e,"string");return typeof t=="symbol"?t:t+""}function aUe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Iq={curveBasisClosed:S8e,curveBasisOpen:_8e,curveBasis:k8e,curveBumpX:h8e,curveBumpY:A8e,curveLinearClosed:T8e,curveLinear:w4,curveMonotoneX:B8e,curveMonotoneY:I8e,curveNatural:O8e,curveStep:D8e,curveStepAfter:P8e,curveStepBefore:F8e},xj=e=>Mo(e.x)&&Mo(e.y),nw=e=>e.x,sw=e=>e.y,nUe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(cE(e));return(r==="curveMonotone"||r==="curveBump")&&t?Iq["".concat(r).concat(t==="vertical"?"Y":"X")]:Iq[r]||w4},sUe=e=>{var{type:t="linear",points:r=[],baseLine:a,layout:n,connectNulls:i=!1}=e,o=nUe(t,n),l=i?r.filter(xj):r,c;if(Array.isArray(a)){var d=i?a.filter(f=>xj(f)):a,u=l.map((f,A)=>Bq(Bq({},f),{},{base:d[A]}));return n==="vertical"?c=fj().y(sw).x1(nw).x0(f=>f.base.x):c=fj().x(nw).y1(sw).y0(f=>f.base.y),c.defined(xj).curve(o),c(u)}return n==="vertical"&&sr(a)?c=fj().y(sw).x1(nw).x0(a):sr(a)?c=fj().x(nw).y1(sw).y0(a):c=Sie().x(nw).y(sw),c.defined(xj).curve(o),c(l)},N2=e=>{var{className:t,points:r,path:a,pathRef:n}=e;if((!r||!r.length)&&!a)return null;var i=r&&r.length?sUe(e):a;return w.createElement("path",TF({},mo(e),YL(e),{className:ia("recharts-curve",t),d:i===null?void 0:i,ref:n}))},iUe=["x","y","top","left","width","height","className"];function BF(){return BF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},BF.apply(null,arguments)}function Oq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function oUe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Oq(Object(r),!0).forEach(function(a){lUe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function lUe(e,t,r){return(t=cUe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cUe(e){var t=dUe(e,"string");return typeof t=="symbol"?t:t+""}function dUe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uUe(e,t){if(e==null)return{};var r,a,n=fUe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function fUe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var hUe=(e,t,r,a,n,i)=>"M".concat(e,",").concat(n,"v").concat(a,"M").concat(i,",").concat(t,"h").concat(r),AUe=e=>{var{x:t=0,y:r=0,top:a=0,left:n=0,width:i=0,height:o=0,className:l}=e,c=uUe(e,iUe),d=oUe({x:t,y:r,top:a,left:n,width:i,height:o},c);return!sr(t)||!sr(r)||!sr(i)||!sr(o)||!sr(a)||!sr(n)?null:w.createElement("path",BF({},Oa(d,!0),{className:ia("recharts-cross",l),d:hUe(t,r,i,o,a,n)}))};function mUe(e,t,r,a){var n=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-n:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-n,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function Dq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function pUe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dq(Object(r),!0).forEach(function(a){gUe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function gUe(e,t,r){return(t=xUe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xUe(e){var t=vUe(e,"string");return typeof t=="symbol"?t:t+""}function vUe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ic(e,t){var r=pUe({},e),a=t,n=Object.keys(t),i=n.reduce((o,l)=>(o[l]===void 0&&a[l]!==void 0&&(o[l]=a[l]),o),r);return i}var r6={},a6={},n6={},Fq;function bUe(){return Fq||(Fq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const a=Object.getPrototypeOf(r);return a===null||a===Object.prototype||Object.getPrototypeOf(a)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(n6)),n6}var Pq;function yUe(){return Pq||(Pq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bUe(),r=Qie(),a=cM(),n=dM(),i=oM();function o(d,u,f){return l(d,u,void 0,void 0,void 0,void 0,f)}function l(d,u,f,A,m,g,x){const v=x(d,u,f,A,m,g);if(v!==void 0)return v;if(typeof d==typeof u)switch(typeof d){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return d===u;case"number":return d===u||Object.is(d,u);case"function":return d===u;case"object":return c(d,u,g,x)}return c(d,u,g,x)}function c(d,u,f,A){if(Object.is(d,u))return!0;let m=a.getTag(d),g=a.getTag(u);if(m===n.argumentsTag&&(m=n.objectTag),g===n.argumentsTag&&(g=n.objectTag),m!==g)return!1;switch(m){case n.stringTag:return d.toString()===u.toString();case n.numberTag:{const y=d.valueOf(),N=u.valueOf();return i.eq(y,N)}case n.booleanTag:case n.dateTag:case n.symbolTag:return Object.is(d.valueOf(),u.valueOf());case n.regexpTag:return d.source===u.source&&d.flags===u.flags;case n.functionTag:return d===u}f=f??new Map;const x=f.get(d),v=f.get(u);if(x!=null&&v!=null)return x===u;f.set(d,u),f.set(u,d);try{switch(m){case n.mapTag:{if(d.size!==u.size)return!1;for(const[y,N]of d.entries())if(!u.has(y)||!l(N,u.get(y),y,d,u,f,A))return!1;return!0}case n.setTag:{if(d.size!==u.size)return!1;const y=Array.from(d.values()),N=Array.from(u.values());for(let E=0;E<y.length;E++){const B=y[E],_=N.findIndex(I=>l(B,I,void 0,d,u,f,A));if(_===-1)return!1;N.splice(_,1)}return!0}case n.arrayTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:case n.bigUint64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.bigInt64ArrayTag:case n.float32ArrayTag:case n.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(d)!==Buffer.isBuffer(u)||d.length!==u.length)return!1;for(let y=0;y<d.length;y++)if(!l(d[y],u[y],y,d,u,f,A))return!1;return!0}case n.arrayBufferTag:return d.byteLength!==u.byteLength?!1:c(new Uint8Array(d),new Uint8Array(u),f,A);case n.dataViewTag:return d.byteLength!==u.byteLength||d.byteOffset!==u.byteOffset?!1:c(new Uint8Array(d),new Uint8Array(u),f,A);case n.errorTag:return d.name===u.name&&d.message===u.message;case n.objectTag:{if(!(c(d.constructor,u.constructor,f,A)||t.isPlainObject(d)&&t.isPlainObject(u)))return!1;const N=[...Object.keys(d),...r.getSymbols(d)],E=[...Object.keys(u),...r.getSymbols(u)];if(N.length!==E.length)return!1;for(let B=0;B<N.length;B++){const _=N[B],I=d[_];if(!Object.hasOwn(u,_))return!1;const j=u[_];if(!l(I,j,_,d,u,f,A))return!1}return!0}default:return!1}}finally{f.delete(d),f.delete(u)}}e.isEqualWith=o}(a6)),a6}var s6={},Rq;function wUe(){return Rq||(Rq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(s6)),s6}var Lq;function NUe(){return Lq||(Lq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yUe(),r=wUe();function a(n,i){return t.isEqualWith(n,i,r.noop)}e.isEqual=a}(r6)),r6}var i6,Mq;function EUe(){return Mq||(Mq=1,i6=NUe().isEqual),i6}var CUe=EUe();const jUe=Kl(CUe);var hS=1e-4,Roe=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Loe=(e,t)=>e.map((r,a)=>r*t**a).reduce((r,a)=>r+a),Uq=(e,t)=>r=>{var a=Roe(e,t);return Loe(a,r)},kUe=(e,t)=>r=>{var a=Roe(e,t),n=[...a.map((i,o)=>i*o).slice(1),0];return Loe(n,r)},Hq=function(){for(var t,r,a,n,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,a,r,n]=[0,0,1,1];break;case"ease":[t,a,r,n]=[.25,.1,.25,1];break;case"ease-in":[t,a,r,n]=[.42,0,1,1];break;case"ease-out":[t,a,r,n]=[.42,0,.58,1];break;case"ease-in-out":[t,a,r,n]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,a,r,n]=c[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else o.length===4&&([t,a,r,n]=o);var d=Uq(t,r),u=Uq(a,n),f=kUe(t,r),A=g=>g>1?1:g<0?0:g,m=g=>{for(var x=g>1?1:g,v=x,y=0;y<8;++y){var N=d(v)-x,E=f(v);if(Math.abs(N-x)<hS||E<hS)return u(v);v=A(v-N/E)}return u(v)};return m.isStepper=!1,m},SUe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:a=8,dt:n=17}=t,i=(o,l,c)=>{var d=-(o-l)*r,u=c*a,f=c+(d-u)*n/1e3,A=c*n/1e3+o;return Math.abs(A-l)<hS&&Math.abs(f)<hS?[l,0]:[A,f]};return i.isStepper=!0,i.dt=n,i},Moe=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Hq(e);case"spring":return SUe();default:if(e.split("(")[0]==="cubic-bezier")return Hq(e)}return typeof e=="function"?e:null};function Qq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function zq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qq(Object(r),!0).forEach(function(a){_Ue(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function _Ue(e,t,r){return(t=TUe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TUe(e){var t=BUe(e,"string");return typeof t=="symbol"?t:t+""}function BUe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IUe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),OUe=(e,t,r)=>e.map(a=>"".concat(IUe(a)," ").concat(t,"ms ").concat(r)).join(","),DUe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,a)=>r.filter(n=>a.includes(n))),yN=(e,t)=>Object.keys(t).reduce((r,a)=>zq(zq({},r),{},{[a]:e(a,t[a])}),{});function $q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Io(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$q(Object(r),!0).forEach(function(a){FUe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$q(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function FUe(e,t,r){return(t=PUe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PUe(e){var t=RUe(e,"string");return typeof t=="symbol"?t:t+""}function RUe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AS=(e,t,r)=>e+(t-e)*r,IF=e=>{var{from:t,to:r}=e;return t!==r},Uoe=(e,t,r)=>{var a=yN((n,i)=>{if(IF(i)){var[o,l]=e(i.from,i.to,i.velocity);return Io(Io({},i),{},{from:o,velocity:l})}return i},t);return r<1?yN((n,i)=>IF(i)?Io(Io({},i),{},{velocity:AS(i.velocity,a[n].velocity,r),from:AS(i.from,a[n].from,r)}):i,t):Uoe(e,a,r-1)};function LUe(e,t,r,a,n,i){var o,l=a.reduce((A,m)=>Io(Io({},A),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>yN((A,m)=>m.from,l),d=()=>!Object.values(l).filter(IF).length,u=null,f=A=>{o||(o=A);var m=A-o,g=m/r.dt;l=Uoe(r,l,g),n(Io(Io(Io({},e),t),c())),o=A,d()||(u=i.setTimeout(f))};return()=>(u=i.setTimeout(f),()=>{u()})}function MUe(e,t,r,a,n,i,o){var l=null,c=n.reduce((f,A)=>Io(Io({},f),{},{[A]:[e[A],t[A]]}),{}),d,u=f=>{d||(d=f);var A=(f-d)/a,m=yN((x,v)=>AS(...v,r(A)),c);if(i(Io(Io(Io({},e),t),m)),A<1)l=o.setTimeout(u);else{var g=yN((x,v)=>AS(...v,r(1)),c);i(Io(Io(Io({},e),t),g))}};return()=>(l=o.setTimeout(u),()=>{l()})}const Hoe=(e,t,r,a,n,i)=>{var o=DUe(e,t);return r.isStepper===!0?LUe(e,t,r,o,n,i):MUe(e,t,r,a,o,n,i)};function UUe(e){var t,r=()=>null,a=!1,n=null,i=o=>{if(!a){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...d]=l;if(typeof c=="number"){n=e.setTimeout(i.bind(null,d),c);return}i(c),n=e.setTimeout(i.bind(null,d));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{a=!0},start:o=>{a=!1,n&&(n(),n=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class HUe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),n=null,i=o=>{o-a>=r?t(o):typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(i))};return n=requestAnimationFrame(i),()=>{cancelAnimationFrame(n)}}}function QUe(){return UUe(new HUe)}var zUe=w.createContext(QUe);function Qoe(e,t){var r=w.useContext(zUe);return w.useMemo(()=>t??r(e),[e,t,r])}var $Ue=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function OF(){return OF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},OF.apply(null,arguments)}function VUe(e,t){if(e==null)return{};var r,a,n=GUe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function GUe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Vq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function dm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vq(Object(r),!0).forEach(function(a){jg(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function jg(e,t,r){return(t=qUe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qUe(e){var t=KUe(e,"string");return typeof t=="symbol"?t:t+""}function KUe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class EM extends w.PureComponent{constructor(t,r){super(t,r),jg(this,"mounted",!1),jg(this,"manager",void 0),jg(this,"stopJSAnimation",null),jg(this,"unSubscribe",null);var{isActive:a,attributeName:n,from:i,to:o,children:l,duration:c,animationManager:d}=this.props;if(this.manager=d,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!a||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(i){if(typeof l=="function"){this.state={style:i};return}this.state={style:n?{[n]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:a,attributeName:n,shouldReAnimate:i,to:o,from:l}=this.props,{style:c}=this.state;if(a){if(!r){var d={style:n?{[n]:o}:o};this.state&&c&&(n&&c[n]!==o||!n&&c!==o)&&this.setState(d);return}if(!(jUe(t.to,o)&&t.canBegin&&t.isActive)){var u=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=u||i?l:t.to;if(this.state&&c){var A={style:n?{[n]:f}:f};(n&&c[n]!==f||!n&&c!==f)&&this.setState(A)}this.runAnimation(dm(dm({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:a,duration:n,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,d=Hoe(r,a,Moe(i),n,this.changeStyle,this.manager.getTimeoutController()),u=()=>{this.stopJSAnimation=d()};this.manager.start([c,o,u,n,l])}runAnimation(t){var{begin:r,duration:a,attributeName:n,to:i,easing:o,onAnimationStart:l,onAnimationEnd:c,children:d}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof d=="function"||o==="spring"){this.runJSAnimation(t);return}var u=n?{[n]:i}:i,f=OUe(Object.keys(u),a,o);this.manager.start([l,r,dm(dm({},u),{},{transition:f}),a,c])}render(){var t=this.props,{children:r,begin:a,duration:n,attributeName:i,easing:o,isActive:l,from:c,to:d,canBegin:u,onAnimationEnd:f,shouldReAnimate:A,onAnimationReStart:m,animationManager:g}=t,x=VUe(t,$Ue),v=w.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!l||v===0||n<=0)return r;var N=E=>{var{style:B={},className:_}=E.props,I=w.cloneElement(E,dm(dm({},x),{},{style:dm(dm({},B),y),className:_}));return I};return v===1?N(w.Children.only(r)):w.createElement("div",null,w.Children.map(r,E=>N(E)))}}jg(EM,"displayName","Animate");jg(EM,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function mS(e){var t,r=Qoe((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return w.createElement(EM,OF({},e,{animationManager:r}))}function pS(){return pS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},pS.apply(null,arguments)}var Gq=(e,t,r,a,n)=>{var i=Math.min(Math.abs(r)/2,Math.abs(a)/2),o=a>=0?1:-1,l=r>=0?1:-1,c=a>=0&&r>=0||a<0&&r<0?1:0,d;if(i>0&&n instanceof Array){for(var u=[0,0,0,0],f=0,A=4;f<A;f++)u[f]=n[f]>i?i:n[f];d="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(d+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),d+="L ".concat(e+r-l*u[1],",").concat(t),u[1]>0&&(d+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*u[1])),d+="L ".concat(e+r,",").concat(t+a-o*u[2]),u[2]>0&&(d+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,`,
        `).concat(e+r-l*u[2],",").concat(t+a)),d+="L ".concat(e+l*u[3],",").concat(t+a),u[3]>0&&(d+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+a-o*u[3])),d+="Z"}else if(i>0&&n===+n&&n>0){var m=Math.min(i,n);d="M ".concat(e,",").concat(t+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(t,`
            L `).concat(e+r-l*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*m,`
            L `).concat(e+r,",").concat(t+a-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-l*m,",").concat(t+a,`
            L `).concat(e+l*m,",").concat(t+a,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+a-o*m," Z")}else d="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return d},WUe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zoe=e=>{var t=Ic(e,WUe),r=w.useRef(null),[a,n]=w.useState(-1);w.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&n(y)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:d,className:u}=t,{animationEasing:f,animationDuration:A,animationBegin:m,isAnimationActive:g,isUpdateAnimationActive:x}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var v=ia("recharts-rectangle",u);return x?w.createElement(mS,{canBegin:a>0,from:{width:l,height:c,x:i,y:o},to:{width:l,height:c,x:i,y:o},duration:A,animationEasing:f,isActive:x},y=>{var{width:N,height:E,x:B,y:_}=y;return w.createElement(mS,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:A,isActive:g,easing:f},w.createElement("path",pS({},Oa(t,!0),{className:v,d:Gq(B,_,N,E,d),ref:r})))}):w.createElement("path",pS({},Oa(t,!0),{className:v,d:Gq(i,o,l,c,d)}))};function $oe(e){var{cx:t,cy:r,radius:a,startAngle:n,endAngle:i}=e,o=Ja(t,r,a,n),l=Ja(t,r,a,i);return{points:[o,l],cx:t,cy:r,radius:a,startAngle:n,endAngle:i}}function DF(){return DF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},DF.apply(null,arguments)}var XUe=(e,t)=>{var r=fo(t-e),a=Math.min(Math.abs(t-e),359.999);return r*a},vj=e=>{var{cx:t,cy:r,radius:a,angle:n,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,d=l*(o?1:-1)+a,u=Math.asin(l/d)/fS,f=c?n:n+i*u,A=Ja(t,r,d,f),m=Ja(t,r,a,f),g=c?n-i*u:n,x=Ja(t,r,d*Math.cos(u*fS),g);return{center:A,circleTangency:m,lineTangency:x,theta:u}},Voe=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:n,startAngle:i,endAngle:o}=e,l=XUe(i,o),c=i+l,d=Ja(t,r,n,i),u=Ja(t,r,n,c),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(n,",").concat(n,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>c),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(a>0){var A=Ja(t,r,a,i),m=Ja(t,r,a,c);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=c),`,
            `).concat(A.x,",").concat(A.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},YUe=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:n,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}=e,u=fo(d-c),{circleTangency:f,lineTangency:A,theta:m}=vj({cx:t,cy:r,radius:n,angle:c,sign:u,cornerRadius:i,cornerIsExternal:l}),{circleTangency:g,lineTangency:x,theta:v}=vj({cx:t,cy:r,radius:n,angle:d,sign:-u,cornerRadius:i,cornerIsExternal:l}),y=l?Math.abs(c-d):Math.abs(c-d)-m-v;if(y<0)return o?"M ".concat(A.x,",").concat(A.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):Voe({cx:t,cy:r,innerRadius:a,outerRadius:n,startAngle:c,endAngle:d});var N="M ".concat(A.x,",").concat(A.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(n,",").concat(n,",0,").concat(+(y>180),",").concat(+(u<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(x.x,",").concat(x.y,`
  `);if(a>0){var{circleTangency:E,lineTangency:B,theta:_}=vj({cx:t,cy:r,radius:a,angle:c,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:I,lineTangency:j,theta:k}=vj({cx:t,cy:r,radius:a,angle:d,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),T=l?Math.abs(c-d):Math.abs(c-d)-_-k;if(T<0&&i===0)return"".concat(N,"L").concat(t,",").concat(r,"Z");N+="L".concat(j.x,",").concat(j.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(T>180),",").concat(+(u>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(B.x,",").concat(B.y,"Z")}else N+="L".concat(t,",").concat(r,"Z");return N},JUe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Goe=e=>{var t=Ic(e,JUe),{cx:r,cy:a,innerRadius:n,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:f}=t;if(i<n||d===u)return null;var A=ia("recharts-sector",f),m=i-n,g=ql(o,m,0,!0),x;return g>0&&Math.abs(d-u)<360?x=YUe({cx:r,cy:a,innerRadius:n,outerRadius:i,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):x=Voe({cx:r,cy:a,innerRadius:n,outerRadius:i,startAngle:d,endAngle:u}),w.createElement("path",DF({},Oa(t,!0),{className:A,d:x}))};function ZUe(e,t,r){var a,n,i,o;if(e==="horizontal")a=t.x,i=a,n=r.top,o=r.top+r.height;else if(e==="vertical")n=t.y,o=n,a=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:d,outerRadius:u,angle:f}=t,A=Ja(l,c,d,f),m=Ja(l,c,u,f);a=A.x,n=A.y,i=m.x,o=m.y}else return $oe(t);return[{x:a,y:n},{x:i,y:o}]}var o6={},l6={},c6={},qq;function e9e(){return qq||(qq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kie();function r(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=r}(c6)),c6}var Kq;function t9e(){return Kq||(Kq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e9e();function r(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=r}(l6)),l6}var Wq;function r9e(){return Wq||(Wq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wie(),r=t9e();function a(n,i,o){o&&typeof o!="number"&&t.isIterateeCall(n,i,o)&&(i=o=void 0),n=r.toFinite(n),i===void 0?(i=n,n=0):i=r.toFinite(i),o=o===void 0?n<i?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((i-n)/(o||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=n,n+=o;return c}e.range=a}(o6)),o6}var d6,Xq;function a9e(){return Xq||(Xq=1,d6=r9e().range),d6}var n9e=a9e();const qoe=Kl(n9e);function qm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function s9e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function CM(e){let t,r,a;e.length!==2?(t=qm,r=(l,c)=>qm(e(l),c),a=(l,c)=>e(l)-c):(t=e===qm||e===s9e?e:i9e,r=e,a=e);function n(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;r(l[f],c)<0?d=f+1:u=f}while(d<u)}return d}function i(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;r(l[f],c)<=0?d=f+1:u=f}while(d<u)}return d}function o(l,c,d=0,u=l.length){const f=n(l,c,d,u-1);return f>d&&a(l[f-1],c)>-a(l[f],c)?f-1:f}return{left:n,center:o,right:i}}function i9e(){return 0}function Koe(e){return e===null?NaN:+e}function*o9e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const l9e=CM(qm),fE=l9e.right;CM(Koe).center;class Yq extends Map{constructor(t,r=u9e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,n]of t)this.set(a,n)}get(t){return super.get(Jq(this,t))}has(t){return super.has(Jq(this,t))}set(t,r){return super.set(c9e(this,t),r)}delete(t){return super.delete(d9e(this,t))}}function Jq({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function c9e({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function d9e({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function u9e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function f9e(e=qm){if(e===qm)return Woe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function Woe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const h9e=Math.sqrt(50),A9e=Math.sqrt(10),m9e=Math.sqrt(2);function gS(e,t,r){const a=(t-e)/Math.max(0,r),n=Math.floor(Math.log10(a)),i=a/Math.pow(10,n),o=i>=h9e?10:i>=A9e?5:i>=m9e?2:1;let l,c,d;return n<0?(d=Math.pow(10,-n)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,n)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=r&&r<2?gS(e,t,r*2):[l,c,d]}function FF(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[n,i,o]=a?gS(t,e,r):gS(e,t,r);if(!(i>=n))return[];const l=i-n+1,c=new Array(l);if(a)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(n+d)/-o;else for(let d=0;d<l;++d)c[d]=(n+d)*o;return c}function PF(e,t,r){return t=+t,e=+e,r=+r,gS(e,t,r)[2]}function RF(e,t,r){t=+t,e=+e,r=+r;const a=t<e,n=a?PF(t,e,r):PF(e,t,r);return(a?-1:1)*(n<0?1/-n:n)}function Zq(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function eK(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function Xoe(e,t,r=0,a=1/0,n){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(n=n===void 0?Woe:f9e(n);a>r;){if(a-r>600){const c=a-r+1,d=t-r+1,u=Math.log(c),f=.5*Math.exp(2*u/3),A=.5*Math.sqrt(u*f*(c-f)/c)*(d-c/2<0?-1:1),m=Math.max(r,Math.floor(t-d*f/c+A)),g=Math.min(a,Math.floor(t+(c-d)*f/c+A));Xoe(e,t,m,g,n)}const i=e[t];let o=r,l=a;for(iw(e,r,t),n(e[a],i)>0&&iw(e,r,a);o<l;){for(iw(e,o,l),++o,--l;n(e[o],i)<0;)++o;for(;n(e[l],i)>0;)--l}n(e[r],i)===0?iw(e,r,l):(++l,iw(e,l,a)),l<=t&&(r=l+1),t<=l&&(a=l-1)}return e}function iw(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function p9e(e,t,r){if(e=Float64Array.from(o9e(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return eK(e);if(t>=1)return Zq(e);var a,n=(a-1)*t,i=Math.floor(n),o=Zq(Xoe(e,i).subarray(0,i+1)),l=eK(e.subarray(i+1));return o+(l-o)*(n-i)}}function g9e(e,t,r=Koe){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,n=(a-1)*t,i=Math.floor(n),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(n-i)}}function x9e(e,t,r){e=+e,t=+t,r=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+r;for(var a=-1,n=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(n);++a<n;)i[a]=e+a*r;return i}function yu(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function NA(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const LF=Symbol("implicit");function P4(){var e=new Yq,t=[],r=[],a=LF;function n(i){let o=e.get(i);if(o===void 0){if(a!==LF)return a;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return n.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Yq;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return n},n.range=function(i){return arguments.length?(r=Array.from(i),n):r.slice()},n.unknown=function(i){return arguments.length?(a=i,n):a},n.copy=function(){return P4(t,r).unknown(a)},yu.apply(n,arguments),n}function jM(){var e=P4().unknown(void 0),t=e.domain,r=e.range,a=0,n=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function f(){var A=t().length,m=n<a,g=m?n:a,x=m?a:n;i=(x-g)/Math.max(1,A-c+d*2),l&&(i=Math.floor(i)),g+=(x-g-i*(A-c))*u,o=i*(1-c),l&&(g=Math.round(g),o=Math.round(o));var v=x9e(A).map(function(y){return g+i*y});return r(m?v.reverse():v)}return e.domain=function(A){return arguments.length?(t(A),f()):t()},e.range=function(A){return arguments.length?([a,n]=A,a=+a,n=+n,f()):[a,n]},e.rangeRound=function(A){return[a,n]=A,a=+a,n=+n,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(A){return arguments.length?(l=!!A,f()):l},e.padding=function(A){return arguments.length?(c=Math.min(1,d=+A),f()):c},e.paddingInner=function(A){return arguments.length?(c=Math.min(1,A),f()):c},e.paddingOuter=function(A){return arguments.length?(d=+A,f()):d},e.align=function(A){return arguments.length?(u=Math.max(0,Math.min(1,A)),f()):u},e.copy=function(){return jM(t(),[a,n]).round(l).paddingInner(c).paddingOuter(d).align(u)},yu.apply(f(),arguments)}function Yoe(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Yoe(t())},e}function v9e(){return Yoe(jM.apply(null,arguments).paddingInner(1))}function kM(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Joe(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function hE(){}var wN=.7,xS=1/wN,Tb="\\s*([+-]?\\d+)\\s*",NN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",b9e=/^#([0-9a-f]{3,8})$/,y9e=new RegExp(`^rgb\\(${Tb},${Tb},${Tb}\\)$`),w9e=new RegExp(`^rgb\\(${Bh},${Bh},${Bh}\\)$`),N9e=new RegExp(`^rgba\\(${Tb},${Tb},${Tb},${NN}\\)$`),E9e=new RegExp(`^rgba\\(${Bh},${Bh},${Bh},${NN}\\)$`),C9e=new RegExp(`^hsl\\(${NN},${Bh},${Bh}\\)$`),j9e=new RegExp(`^hsla\\(${NN},${Bh},${Bh},${NN}\\)$`),tK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kM(hE,Ax,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:rK,formatHex:rK,formatHex8:k9e,formatHsl:S9e,formatRgb:aK,toString:aK});function rK(){return this.rgb().formatHex()}function k9e(){return this.rgb().formatHex8()}function S9e(){return Zoe(this).formatHsl()}function aK(){return this.rgb().formatRgb()}function Ax(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=b9e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?nK(t):r===3?new Nc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?bj(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?bj(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=y9e.exec(e))?new Nc(t[1],t[2],t[3],1):(t=w9e.exec(e))?new Nc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=N9e.exec(e))?bj(t[1],t[2],t[3],t[4]):(t=E9e.exec(e))?bj(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=C9e.exec(e))?oK(t[1],t[2]/100,t[3]/100,1):(t=j9e.exec(e))?oK(t[1],t[2]/100,t[3]/100,t[4]):tK.hasOwnProperty(e)?nK(tK[e]):e==="transparent"?new Nc(NaN,NaN,NaN,0):null}function nK(e){return new Nc(e>>16&255,e>>8&255,e&255,1)}function bj(e,t,r,a){return a<=0&&(e=t=r=NaN),new Nc(e,t,r,a)}function _9e(e){return e instanceof hE||(e=Ax(e)),e?(e=e.rgb(),new Nc(e.r,e.g,e.b,e.opacity)):new Nc}function MF(e,t,r,a){return arguments.length===1?_9e(e):new Nc(e,t,r,a??1)}function Nc(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}kM(Nc,MF,Joe(hE,{brighter(e){return e=e==null?xS:Math.pow(xS,e),new Nc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?wN:Math.pow(wN,e),new Nc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Nc(Vg(this.r),Vg(this.g),Vg(this.b),vS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sK,formatHex:sK,formatHex8:T9e,formatRgb:iK,toString:iK}));function sK(){return`#${kg(this.r)}${kg(this.g)}${kg(this.b)}`}function T9e(){return`#${kg(this.r)}${kg(this.g)}${kg(this.b)}${kg((isNaN(this.opacity)?1:this.opacity)*255)}`}function iK(){const e=vS(this.opacity);return`${e===1?"rgb(":"rgba("}${Vg(this.r)}, ${Vg(this.g)}, ${Vg(this.b)}${e===1?")":`, ${e})`}`}function vS(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Vg(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function kg(e){return e=Vg(e),(e<16?"0":"")+e.toString(16)}function oK(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ju(e,t,r,a)}function Zoe(e){if(e instanceof Ju)return new Ju(e.h,e.s,e.l,e.opacity);if(e instanceof hE||(e=Ax(e)),!e)return new Ju;if(e instanceof Ju)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,n=Math.min(t,r,a),i=Math.max(t,r,a),o=NaN,l=i-n,c=(i+n)/2;return l?(t===i?o=(r-a)/l+(r<a)*6:r===i?o=(a-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+n:2-i-n,o*=60):l=c>0&&c<1?0:o,new Ju(o,l,c,e.opacity)}function B9e(e,t,r,a){return arguments.length===1?Zoe(e):new Ju(e,t,r,a??1)}function Ju(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}kM(Ju,B9e,Joe(hE,{brighter(e){return e=e==null?xS:Math.pow(xS,e),new Ju(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wN:Math.pow(wN,e),new Ju(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,n=2*r-a;return new Nc(u6(e>=240?e-240:e+120,n,a),u6(e,n,a),u6(e<120?e+240:e-120,n,a),this.opacity)},clamp(){return new Ju(lK(this.h),yj(this.s),yj(this.l),vS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=vS(this.opacity);return`${e===1?"hsl(":"hsla("}${lK(this.h)}, ${yj(this.s)*100}%, ${yj(this.l)*100}%${e===1?")":`, ${e})`}`}}));function lK(e){return e=(e||0)%360,e<0?e+360:e}function yj(e){return Math.max(0,Math.min(1,e||0))}function u6(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const SM=e=>()=>e;function I9e(e,t){return function(r){return e+r*t}}function O9e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function D9e(e){return(e=+e)==1?ele:function(t,r){return r-t?O9e(t,r,e):SM(isNaN(t)?r:t)}}function ele(e,t){var r=t-e;return r?I9e(e,r):SM(isNaN(e)?t:e)}const bS=function e(t){var r=D9e(t);function a(n,i){var o=r((n=MF(n)).r,(i=MF(i)).r),l=r(n.g,i.g),c=r(n.b,i.b),d=ele(n.opacity,i.opacity);return function(u){return n.r=o(u),n.g=l(u),n.b=c(u),n.opacity=d(u),n+""}}return a.gamma=e,a}(1);function F9e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),n;return function(i){for(n=0;n<r;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}}function P9e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function R9e(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,n=new Array(a),i=new Array(r),o;for(o=0;o<a;++o)n[o]=W1(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<a;++o)i[o]=n[o](l);return i}}function L9e(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function Xu(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function M9e(e,t){var r={},a={},n;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in e?r[n]=W1(e[n],t[n]):a[n]=t[n];return function(i){for(n in r)a[n]=r[n](i);return a}}var UF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,f6=new RegExp(UF.source,"g");function U9e(e){return function(){return e}}function H9e(e){return function(t){return e(t)+""}}function tle(e,t){var r=UF.lastIndex=f6.lastIndex=0,a,n,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(a=UF.exec(e))&&(n=f6.exec(t));)(i=n.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(a=a[0])===(n=n[0])?l[o]?l[o]+=n:l[++o]=n:(l[++o]=null,c.push({i:o,x:Xu(a,n)})),r=f6.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?H9e(c[0].x):U9e(t):(t=c.length,function(d){for(var u=0,f;u<t;++u)l[(f=c[u]).i]=f.x(d);return l.join("")})}function W1(e,t){var r=typeof t,a;return t==null||r==="boolean"?SM(t):(r==="number"?Xu:r==="string"?(a=Ax(t))?(t=a,bS):tle:t instanceof Ax?bS:t instanceof Date?L9e:P9e(t)?F9e:Array.isArray(t)?R9e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?M9e:Xu)(e,t)}function _M(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var cK=180/Math.PI,HF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rle(e,t,r,a,n,i){var o,l,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*r+t*a)&&(r-=e*c,a-=t*c),(l=Math.sqrt(r*r+a*a))&&(r/=l,a/=l,c/=l),e*a<t*r&&(e=-e,t=-t,c=-c,o=-o),{translateX:n,translateY:i,rotate:Math.atan2(t,e)*cK,skewX:Math.atan(c)*cK,scaleX:o,scaleY:l}}var wj;function Q9e(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?HF:rle(t.a,t.b,t.c,t.d,t.e,t.f)}function z9e(e){return e==null||(wj||(wj=document.createElementNS("http://www.w3.org/2000/svg","g")),wj.setAttribute("transform",e),!(e=wj.transform.baseVal.consolidate()))?HF:(e=e.matrix,rle(e.a,e.b,e.c,e.d,e.e,e.f))}function ale(e,t,r,a){function n(d){return d.length?d.pop()+" ":""}function i(d,u,f,A,m,g){if(d!==f||u!==A){var x=m.push("translate(",null,t,null,r);g.push({i:x-4,x:Xu(d,f)},{i:x-2,x:Xu(u,A)})}else(f||A)&&m.push("translate("+f+t+A+r)}function o(d,u,f,A){d!==u?(d-u>180?u+=360:u-d>180&&(d+=360),A.push({i:f.push(n(f)+"rotate(",null,a)-2,x:Xu(d,u)})):u&&f.push(n(f)+"rotate("+u+a)}function l(d,u,f,A){d!==u?A.push({i:f.push(n(f)+"skewX(",null,a)-2,x:Xu(d,u)}):u&&f.push(n(f)+"skewX("+u+a)}function c(d,u,f,A,m,g){if(d!==f||u!==A){var x=m.push(n(m)+"scale(",null,",",null,")");g.push({i:x-4,x:Xu(d,f)},{i:x-2,x:Xu(u,A)})}else(f!==1||A!==1)&&m.push(n(m)+"scale("+f+","+A+")")}return function(d,u){var f=[],A=[];return d=e(d),u=e(u),i(d.translateX,d.translateY,u.translateX,u.translateY,f,A),o(d.rotate,u.rotate,f,A),l(d.skewX,u.skewX,f,A),c(d.scaleX,d.scaleY,u.scaleX,u.scaleY,f,A),d=u=null,function(m){for(var g=-1,x=A.length,v;++g<x;)f[(v=A[g]).i]=v.x(m);return f.join("")}}}var $9e=ale(Q9e,"px, ","px)","deg)"),V9e=ale(z9e,", ",")",")"),G9e=1e-12;function dK(e){return((e=Math.exp(e))+1/e)/2}function q9e(e){return((e=Math.exp(e))-1/e)/2}function K9e(e){return((e=Math.exp(2*e))-1)/(e+1)}const W9e=function e(t,r,a){function n(i,o){var l=i[0],c=i[1],d=i[2],u=o[0],f=o[1],A=o[2],m=u-l,g=f-c,x=m*m+g*g,v,y;if(x<G9e)y=Math.log(A/d)/t,v=function(j){return[l+j*m,c+j*g,d*Math.exp(t*j*y)]};else{var N=Math.sqrt(x),E=(A*A-d*d+a*x)/(2*d*r*N),B=(A*A-d*d-a*x)/(2*A*r*N),_=Math.log(Math.sqrt(E*E+1)-E),I=Math.log(Math.sqrt(B*B+1)-B);y=(I-_)/t,v=function(j){var k=j*y,T=dK(_),L=d/(r*N)*(T*K9e(t*k+_)-q9e(_));return[l+L*m,c+L*g,d*T/dK(t*k+_)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return n.rho=function(i){var o=Math.max(.001,+i),l=o*o,c=l*l;return e(o,l,c)},n}(Math.SQRT2,2,4);function X9e(e,t){t===void 0&&(t=e,e=W1);for(var r=0,a=t.length-1,n=t[0],i=new Array(a<0?0:a);r<a;)i[r]=e(n,n=t[++r]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return i[l](o-l)}}function Y9e(e){return function(){return e}}function yS(e){return+e}var uK=[0,1];function zl(e){return e}function QF(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Y9e(isNaN(t)?NaN:.5)}function J9e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function Z9e(e,t,r){var a=e[0],n=e[1],i=t[0],o=t[1];return n<a?(a=QF(n,a),i=r(o,i)):(a=QF(a,n),i=r(i,o)),function(l){return i(a(l))}}function eHe(e,t,r){var a=Math.min(e.length,t.length)-1,n=new Array(a),i=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)n[o]=QF(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=fE(e,l,1,a)-1;return i[c](n[c](l))}}function AE(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function R4(){var e=uK,t=uK,r=W1,a,n,i,o=zl,l,c,d;function u(){var A=Math.min(e.length,t.length);return o!==zl&&(o=J9e(e[0],e[A-1])),l=A>2?eHe:Z9e,c=d=null,f}function f(A){return A==null||isNaN(A=+A)?i:(c||(c=l(e.map(a),t,r)))(a(o(A)))}return f.invert=function(A){return o(n((d||(d=l(t,e.map(a),Xu)))(A)))},f.domain=function(A){return arguments.length?(e=Array.from(A,yS),u()):e.slice()},f.range=function(A){return arguments.length?(t=Array.from(A),u()):t.slice()},f.rangeRound=function(A){return t=Array.from(A),r=_M,u()},f.clamp=function(A){return arguments.length?(o=A?!0:zl,u()):o!==zl},f.interpolate=function(A){return arguments.length?(r=A,u()):r},f.unknown=function(A){return arguments.length?(i=A,f):i},function(A,m){return a=A,n=m,u()}}function TM(){return R4()(zl,zl)}function tHe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function wS(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function u1(e){return e=wS(Math.abs(e)),e?e[1]:NaN}function rHe(e,t){return function(r,a){for(var n=r.length,i=[],o=0,l=e[0],c=0;n>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),i.push(r.substring(n-=l,n+l)),!((c+=l+1)>a));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function aHe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var nHe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function EN(e){if(!(t=nHe.exec(e)))throw new Error("invalid format: "+e);var t;return new BM({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}EN.prototype=BM.prototype;function BM(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}BM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function sHe(e){e:for(var t=e.length,r=1,a=-1,n;r<t;++r)switch(e[r]){case".":a=n=r;break;case"0":a===0&&(a=r),n=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(n+1):e}var nle;function iHe(e,t){var r=wS(e,t);if(!r)return e+"";var a=r[0],n=r[1],i=n-(nle=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,o=a.length;return i===o?a:i>o?a+new Array(i-o+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+wS(e,Math.max(0,t+i-1))[0]}function fK(e,t){var r=wS(e,t);if(!r)return e+"";var a=r[0],n=r[1];return n<0?"0."+new Array(-n).join("0")+a:a.length>n+1?a.slice(0,n+1)+"."+a.slice(n+1):a+new Array(n-a.length+2).join("0")}const hK={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:tHe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>fK(e*100,t),r:fK,s:iHe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function AK(e){return e}var mK=Array.prototype.map,pK=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function oHe(e){var t=e.grouping===void 0||e.thousands===void 0?AK:rHe(mK.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",n=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?AK:aHe(mK.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(f){f=EN(f);var A=f.fill,m=f.align,g=f.sign,x=f.symbol,v=f.zero,y=f.width,N=f.comma,E=f.precision,B=f.trim,_=f.type;_==="n"?(N=!0,_="g"):hK[_]||(E===void 0&&(E=12),B=!0,_="g"),(v||A==="0"&&m==="=")&&(v=!0,A="0",m="=");var I=x==="$"?r:x==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",j=x==="$"?a:/[%p]/.test(_)?o:"",k=hK[_],T=/[defgprs%]/.test(_);E=E===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function L(F){var S=I,M=j,H,K,Q;if(_==="c")M=k(F)+M,F="";else{F=+F;var G=F<0||1/F<0;if(F=isNaN(F)?c:k(Math.abs(F),E),B&&(F=sHe(F)),G&&+F==0&&g!=="+"&&(G=!1),S=(G?g==="("?g:l:g==="-"||g==="("?"":g)+S,M=(_==="s"?pK[8+nle/3]:"")+M+(G&&g==="("?")":""),T){for(H=-1,K=F.length;++H<K;)if(Q=F.charCodeAt(H),48>Q||Q>57){M=(Q===46?n+F.slice(H+1):F.slice(H))+M,F=F.slice(0,H);break}}}N&&!v&&(F=t(F,1/0));var X=S.length+F.length+M.length,Z=X<y?new Array(y-X+1).join(A):"";switch(N&&v&&(F=t(Z+F,Z.length?y-M.length:1/0),Z=""),m){case"<":F=S+F+M+Z;break;case"=":F=S+Z+F+M;break;case"^":F=Z.slice(0,X=Z.length>>1)+S+F+M+Z.slice(X);break;default:F=Z+S+F+M;break}return i(F)}return L.toString=function(){return f+""},L}function u(f,A){var m=d((f=EN(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(u1(A)/3)))*3,x=Math.pow(10,-g),v=pK[8+g/3];return function(y){return m(x*y)+v}}return{format:d,formatPrefix:u}}var Nj,IM,sle;lHe({thousands:",",grouping:[3],currency:["$",""]});function lHe(e){return Nj=oHe(e),IM=Nj.format,sle=Nj.formatPrefix,Nj}function cHe(e){return Math.max(0,-u1(Math.abs(e)))}function dHe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(u1(t)/3)))*3-u1(Math.abs(e)))}function uHe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,u1(t)-u1(e))+1}function ile(e,t,r,a){var n=RF(e,t,r),i;switch(a=EN(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=dHe(n,o))&&(a.precision=i),sle(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=uHe(n,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=cHe(n))&&(a.precision=i-(a.type==="%")*2);break}}return IM(a)}function Tp(e){var t=e.domain;return e.ticks=function(r){var a=t();return FF(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var n=t();return ile(n[0],n[n.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),n=0,i=a.length-1,o=a[n],l=a[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=n,n=i,i=d);u-- >0;){if(d=PF(o,l,r),d===c)return a[n]=o,a[i]=l,t(a);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function ole(){var e=TM();return e.copy=function(){return AE(e,ole())},yu.apply(e,arguments),Tp(e)}function lle(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,yS),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return lle(e).unknown(t)},e=arguments.length?Array.from(e,yS):[0,1],Tp(r)}function cle(e,t){e=e.slice();var r=0,a=e.length-1,n=e[r],i=e[a],o;return i<n&&(o=r,r=a,a=o,o=n,n=i,i=o),e[r]=t.floor(n),e[a]=t.ceil(i),e}function gK(e){return Math.log(e)}function xK(e){return Math.exp(e)}function fHe(e){return-Math.log(-e)}function hHe(e){return-Math.exp(-e)}function AHe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function mHe(e){return e===10?AHe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function pHe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function vK(e){return(t,r)=>-e(-t,r)}function OM(e){const t=e(gK,xK),r=t.domain;let a=10,n,i;function o(){return n=pHe(a),i=mHe(a),r()[0]<0?(n=vK(n),i=vK(i),e(fHe,hHe)):e(gK,xK),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let d=c[0],u=c[c.length-1];const f=u<d;f&&([d,u]=[u,d]);let A=n(d),m=n(u),g,x;const v=l==null?10:+l;let y=[];if(!(a%1)&&m-A<v){if(A=Math.floor(A),m=Math.ceil(m),d>0){for(;A<=m;++A)for(g=1;g<a;++g)if(x=A<0?g/i(-A):g*i(A),!(x<d)){if(x>u)break;y.push(x)}}else for(;A<=m;++A)for(g=a-1;g>=1;--g)if(x=A>0?g/i(-A):g*i(A),!(x<d)){if(x>u)break;y.push(x)}y.length*2<v&&(y=FF(d,u,v))}else y=FF(A,m,Math.min(m-A,v)).map(i);return f?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=EN(c)).precision==null&&(c.trim=!0),c=IM(c)),l===1/0)return c;const d=Math.max(1,a*l/t.ticks().length);return u=>{let f=u/i(Math.round(n(u)));return f*a<a-.5&&(f*=a),f<=d?c(u):""}},t.nice=()=>r(cle(r(),{floor:l=>i(Math.floor(n(l))),ceil:l=>i(Math.ceil(n(l)))})),t}function dle(){const e=OM(R4()).domain([1,10]);return e.copy=()=>AE(e,dle()).base(e.base()),yu.apply(e,arguments),e}function bK(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function yK(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function DM(e){var t=1,r=e(bK(t),yK(t));return r.constant=function(a){return arguments.length?e(bK(t=+a),yK(t)):t},Tp(r)}function ule(){var e=DM(R4());return e.copy=function(){return AE(e,ule()).constant(e.constant())},yu.apply(e,arguments)}function wK(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function gHe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function xHe(e){return e<0?-e*e:e*e}function FM(e){var t=e(zl,zl),r=1;function a(){return r===1?e(zl,zl):r===.5?e(gHe,xHe):e(wK(r),wK(1/r))}return t.exponent=function(n){return arguments.length?(r=+n,a()):r},Tp(t)}function PM(){var e=FM(R4());return e.copy=function(){return AE(e,PM()).exponent(e.exponent())},yu.apply(e,arguments),e}function vHe(){return PM.apply(null,arguments).exponent(.5)}function NK(e){return Math.sign(e)*e*e}function bHe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function fle(){var e=TM(),t=[0,1],r=!1,a;function n(i){var o=bHe(e(i));return isNaN(o)?a:r?Math.round(o):o}return n.invert=function(i){return e.invert(NK(i))},n.domain=function(i){return arguments.length?(e.domain(i),n):e.domain()},n.range=function(i){return arguments.length?(e.range((t=Array.from(i,yS)).map(NK)),n):t.slice()},n.rangeRound=function(i){return n.range(i).round(!0)},n.round=function(i){return arguments.length?(r=!!i,n):r},n.clamp=function(i){return arguments.length?(e.clamp(i),n):e.clamp()},n.unknown=function(i){return arguments.length?(a=i,n):a},n.copy=function(){return fle(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},yu.apply(n,arguments),Tp(n)}function hle(){var e=[],t=[],r=[],a;function n(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=g9e(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?a:t[fE(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(qm),n()},i.range=function(o){return arguments.length?(t=Array.from(o),n()):t.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.quantiles=function(){return r.slice()},i.copy=function(){return hle().domain(e).range(t).unknown(a)},yu.apply(i,arguments)}function Ale(){var e=0,t=1,r=1,a=[.5],n=[0,1],i;function o(c){return c!=null&&c<=c?n[fE(a,c,0,r)]:i}function l(){var c=-1;for(a=new Array(r);++c<r;)a[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(n=Array.from(c)).length-1,l()):n.slice()},o.invertExtent=function(c){var d=n.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,a[0]]:d>=r?[a[r-1],t]:[a[d-1],a[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return Ale().domain([e,t]).range(n).unknown(i)},yu.apply(Tp(o),arguments)}function mle(){var e=[.5],t=[0,1],r,a=1;function n(i){return i!=null&&i<=i?t[fE(e,i,0,a)]:r}return n.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),n):e.slice()},n.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),n):t.slice()},n.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},n.unknown=function(i){return arguments.length?(r=i,n):r},n.copy=function(){return mle().domain(e).range(t).unknown(r)},yu.apply(n,arguments)}const h6=new Date,A6=new Date;function Vi(e,t,r,a){function n(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return n.floor=i=>(e(i=new Date(+i)),i),n.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),n.round=i=>{const o=n(i),l=n.ceil(i);return i-o<l-i?o:l},n.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),n.range=(i,o,l)=>{const c=[];if(i=n.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},n.filter=i=>Vi(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(n.count=(i,o)=>(h6.setTime(+i),A6.setTime(+o),e(h6),e(A6),Math.floor(r(h6,A6))),n.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?n.filter(a?o=>a(o)%i===0:o=>n.count(0,o)%i===0):n)),n}const NS=Vi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);NS.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Vi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):NS);NS.range;const P0=1e3,du=P0*60,R0=du*60,sA=R0*24,RM=sA*7,EK=sA*30,m6=sA*365,Sg=Vi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*P0)},(e,t)=>(t-e)/P0,e=>e.getUTCSeconds());Sg.range;const LM=Vi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*P0)},(e,t)=>{e.setTime(+e+t*du)},(e,t)=>(t-e)/du,e=>e.getMinutes());LM.range;const MM=Vi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*du)},(e,t)=>(t-e)/du,e=>e.getUTCMinutes());MM.range;const UM=Vi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*P0-e.getMinutes()*du)},(e,t)=>{e.setTime(+e+t*R0)},(e,t)=>(t-e)/R0,e=>e.getHours());UM.range;const HM=Vi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*R0)},(e,t)=>(t-e)/R0,e=>e.getUTCHours());HM.range;const mE=Vi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*du)/sA,e=>e.getDate()-1);mE.range;const L4=Vi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/sA,e=>e.getUTCDate()-1);L4.range;const ple=Vi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/sA,e=>Math.floor(e/sA));ple.range;function Fx(e){return Vi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*du)/RM)}const M4=Fx(0),ES=Fx(1),yHe=Fx(2),wHe=Fx(3),f1=Fx(4),NHe=Fx(5),EHe=Fx(6);M4.range;ES.range;yHe.range;wHe.range;f1.range;NHe.range;EHe.range;function Px(e){return Vi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/RM)}const U4=Px(0),CS=Px(1),CHe=Px(2),jHe=Px(3),h1=Px(4),kHe=Px(5),SHe=Px(6);U4.range;CS.range;CHe.range;jHe.range;h1.range;kHe.range;SHe.range;const QM=Vi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());QM.range;const zM=Vi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());zM.range;const iA=Vi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());iA.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});iA.range;const oA=Vi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());oA.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});oA.range;function gle(e,t,r,a,n,i){const o=[[Sg,1,P0],[Sg,5,5*P0],[Sg,15,15*P0],[Sg,30,30*P0],[i,1,du],[i,5,5*du],[i,15,15*du],[i,30,30*du],[n,1,R0],[n,3,3*R0],[n,6,6*R0],[n,12,12*R0],[a,1,sA],[a,2,2*sA],[r,1,RM],[t,1,EK],[t,3,3*EK],[e,1,m6]];function l(d,u,f){const A=u<d;A&&([d,u]=[u,d]);const m=f&&typeof f.range=="function"?f:c(d,u,f),g=m?m.range(d,+u+1):[];return A?g.reverse():g}function c(d,u,f){const A=Math.abs(u-d)/f,m=CM(([,,v])=>v).right(o,A);if(m===o.length)return e.every(RF(d/m6,u/m6,f));if(m===0)return NS.every(Math.max(RF(d,u,f),1));const[g,x]=o[A/o[m-1][2]<o[m][2]/A?m-1:m];return g.every(x)}return[l,c]}const[_He,THe]=gle(oA,zM,U4,ple,HM,MM),[BHe,IHe]=gle(iA,QM,M4,mE,UM,LM);function p6(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function g6(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ow(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function OHe(e){var t=e.dateTime,r=e.date,a=e.time,n=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=lw(n),u=cw(n),f=lw(i),A=cw(i),m=lw(o),g=cw(o),x=lw(l),v=cw(l),y=lw(c),N=cw(c),E={a:G,A:X,b:Z,B:U,c:null,d:TK,e:TK,f:rQe,g:fQe,G:AQe,H:ZHe,I:eQe,j:tQe,L:xle,m:aQe,M:nQe,p:Y,q:P,Q:OK,s:DK,S:sQe,u:iQe,U:oQe,V:lQe,w:cQe,W:dQe,x:null,X:null,y:uQe,Y:hQe,Z:mQe,"%":IK},B={a:D,A:W,b:J,B:ce,c:null,d:BK,e:BK,f:vQe,g:_Qe,G:BQe,H:pQe,I:gQe,j:xQe,L:ble,m:bQe,M:yQe,p:ie,q:re,Q:OK,s:DK,S:wQe,u:NQe,U:EQe,V:CQe,w:jQe,W:kQe,x:null,X:null,y:SQe,Y:TQe,Z:IQe,"%":IK},_={a:L,A:F,b:S,B:M,c:H,d:SK,e:SK,f:WHe,g:kK,G:jK,H:_K,I:_K,j:VHe,L:KHe,m:$He,M:GHe,p:T,q:zHe,Q:YHe,s:JHe,S:qHe,u:LHe,U:MHe,V:UHe,w:RHe,W:HHe,x:K,X:Q,y:kK,Y:jK,Z:QHe,"%":XHe};E.x=I(r,E),E.X=I(a,E),E.c=I(t,E),B.x=I(r,B),B.X=I(a,B),B.c=I(t,B);function I(de,oe){return function(be){var q=[],we=-1,Te=0,Ee=de.length,ue,ge,he;for(be instanceof Date||(be=new Date(+be));++we<Ee;)de.charCodeAt(we)===37&&(q.push(de.slice(Te,we)),(ge=CK[ue=de.charAt(++we)])!=null?ue=de.charAt(++we):ge=ue==="e"?" ":"0",(he=oe[ue])&&(ue=he(be,ge)),q.push(ue),Te=we+1);return q.push(de.slice(Te,we)),q.join("")}}function j(de,oe){return function(be){var q=ow(1900,void 0,1),we=k(q,de,be+="",0),Te,Ee;if(we!=be.length)return null;if("Q"in q)return new Date(q.Q);if("s"in q)return new Date(q.s*1e3+("L"in q?q.L:0));if(oe&&!("Z"in q)&&(q.Z=0),"p"in q&&(q.H=q.H%12+q.p*12),q.m===void 0&&(q.m="q"in q?q.q:0),"V"in q){if(q.V<1||q.V>53)return null;"w"in q||(q.w=1),"Z"in q?(Te=g6(ow(q.y,0,1)),Ee=Te.getUTCDay(),Te=Ee>4||Ee===0?CS.ceil(Te):CS(Te),Te=L4.offset(Te,(q.V-1)*7),q.y=Te.getUTCFullYear(),q.m=Te.getUTCMonth(),q.d=Te.getUTCDate()+(q.w+6)%7):(Te=p6(ow(q.y,0,1)),Ee=Te.getDay(),Te=Ee>4||Ee===0?ES.ceil(Te):ES(Te),Te=mE.offset(Te,(q.V-1)*7),q.y=Te.getFullYear(),q.m=Te.getMonth(),q.d=Te.getDate()+(q.w+6)%7)}else("W"in q||"U"in q)&&("w"in q||(q.w="u"in q?q.u%7:"W"in q?1:0),Ee="Z"in q?g6(ow(q.y,0,1)).getUTCDay():p6(ow(q.y,0,1)).getDay(),q.m=0,q.d="W"in q?(q.w+6)%7+q.W*7-(Ee+5)%7:q.w+q.U*7-(Ee+6)%7);return"Z"in q?(q.H+=q.Z/100|0,q.M+=q.Z%100,g6(q)):p6(q)}}function k(de,oe,be,q){for(var we=0,Te=oe.length,Ee=be.length,ue,ge;we<Te;){if(q>=Ee)return-1;if(ue=oe.charCodeAt(we++),ue===37){if(ue=oe.charAt(we++),ge=_[ue in CK?oe.charAt(we++):ue],!ge||(q=ge(de,be,q))<0)return-1}else if(ue!=be.charCodeAt(q++))return-1}return q}function T(de,oe,be){var q=d.exec(oe.slice(be));return q?(de.p=u.get(q[0].toLowerCase()),be+q[0].length):-1}function L(de,oe,be){var q=m.exec(oe.slice(be));return q?(de.w=g.get(q[0].toLowerCase()),be+q[0].length):-1}function F(de,oe,be){var q=f.exec(oe.slice(be));return q?(de.w=A.get(q[0].toLowerCase()),be+q[0].length):-1}function S(de,oe,be){var q=y.exec(oe.slice(be));return q?(de.m=N.get(q[0].toLowerCase()),be+q[0].length):-1}function M(de,oe,be){var q=x.exec(oe.slice(be));return q?(de.m=v.get(q[0].toLowerCase()),be+q[0].length):-1}function H(de,oe,be){return k(de,t,oe,be)}function K(de,oe,be){return k(de,r,oe,be)}function Q(de,oe,be){return k(de,a,oe,be)}function G(de){return o[de.getDay()]}function X(de){return i[de.getDay()]}function Z(de){return c[de.getMonth()]}function U(de){return l[de.getMonth()]}function Y(de){return n[+(de.getHours()>=12)]}function P(de){return 1+~~(de.getMonth()/3)}function D(de){return o[de.getUTCDay()]}function W(de){return i[de.getUTCDay()]}function J(de){return c[de.getUTCMonth()]}function ce(de){return l[de.getUTCMonth()]}function ie(de){return n[+(de.getUTCHours()>=12)]}function re(de){return 1+~~(de.getUTCMonth()/3)}return{format:function(de){var oe=I(de+="",E);return oe.toString=function(){return de},oe},parse:function(de){var oe=j(de+="",!1);return oe.toString=function(){return de},oe},utcFormat:function(de){var oe=I(de+="",B);return oe.toString=function(){return de},oe},utcParse:function(de){var oe=j(de+="",!0);return oe.toString=function(){return de},oe}}}var CK={"-":"",_:" ",0:"0"},po=/^\s*\d+/,DHe=/^%/,FHe=/[\\^$*+?|[\]().{}]/g;function Wa(e,t,r){var a=e<0?"-":"",n=(a?-e:e)+"",i=n.length;return a+(i<r?new Array(r-i+1).join(t)+n:n)}function PHe(e){return e.replace(FHe,"\\$&")}function lw(e){return new RegExp("^(?:"+e.map(PHe).join("|")+")","i")}function cw(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function RHe(e,t,r){var a=po.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function LHe(e,t,r){var a=po.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function MHe(e,t,r){var a=po.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function UHe(e,t,r){var a=po.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function HHe(e,t,r){var a=po.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function jK(e,t,r){var a=po.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function kK(e,t,r){var a=po.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function QHe(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function zHe(e,t,r){var a=po.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function $He(e,t,r){var a=po.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function SK(e,t,r){var a=po.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function VHe(e,t,r){var a=po.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function _K(e,t,r){var a=po.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function GHe(e,t,r){var a=po.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function qHe(e,t,r){var a=po.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function KHe(e,t,r){var a=po.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function WHe(e,t,r){var a=po.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function XHe(e,t,r){var a=DHe.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function YHe(e,t,r){var a=po.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function JHe(e,t,r){var a=po.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function TK(e,t){return Wa(e.getDate(),t,2)}function ZHe(e,t){return Wa(e.getHours(),t,2)}function eQe(e,t){return Wa(e.getHours()%12||12,t,2)}function tQe(e,t){return Wa(1+mE.count(iA(e),e),t,3)}function xle(e,t){return Wa(e.getMilliseconds(),t,3)}function rQe(e,t){return xle(e,t)+"000"}function aQe(e,t){return Wa(e.getMonth()+1,t,2)}function nQe(e,t){return Wa(e.getMinutes(),t,2)}function sQe(e,t){return Wa(e.getSeconds(),t,2)}function iQe(e){var t=e.getDay();return t===0?7:t}function oQe(e,t){return Wa(M4.count(iA(e)-1,e),t,2)}function vle(e){var t=e.getDay();return t>=4||t===0?f1(e):f1.ceil(e)}function lQe(e,t){return e=vle(e),Wa(f1.count(iA(e),e)+(iA(e).getDay()===4),t,2)}function cQe(e){return e.getDay()}function dQe(e,t){return Wa(ES.count(iA(e)-1,e),t,2)}function uQe(e,t){return Wa(e.getFullYear()%100,t,2)}function fQe(e,t){return e=vle(e),Wa(e.getFullYear()%100,t,2)}function hQe(e,t){return Wa(e.getFullYear()%1e4,t,4)}function AQe(e,t){var r=e.getDay();return e=r>=4||r===0?f1(e):f1.ceil(e),Wa(e.getFullYear()%1e4,t,4)}function mQe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Wa(t/60|0,"0",2)+Wa(t%60,"0",2)}function BK(e,t){return Wa(e.getUTCDate(),t,2)}function pQe(e,t){return Wa(e.getUTCHours(),t,2)}function gQe(e,t){return Wa(e.getUTCHours()%12||12,t,2)}function xQe(e,t){return Wa(1+L4.count(oA(e),e),t,3)}function ble(e,t){return Wa(e.getUTCMilliseconds(),t,3)}function vQe(e,t){return ble(e,t)+"000"}function bQe(e,t){return Wa(e.getUTCMonth()+1,t,2)}function yQe(e,t){return Wa(e.getUTCMinutes(),t,2)}function wQe(e,t){return Wa(e.getUTCSeconds(),t,2)}function NQe(e){var t=e.getUTCDay();return t===0?7:t}function EQe(e,t){return Wa(U4.count(oA(e)-1,e),t,2)}function yle(e){var t=e.getUTCDay();return t>=4||t===0?h1(e):h1.ceil(e)}function CQe(e,t){return e=yle(e),Wa(h1.count(oA(e),e)+(oA(e).getUTCDay()===4),t,2)}function jQe(e){return e.getUTCDay()}function kQe(e,t){return Wa(CS.count(oA(e)-1,e),t,2)}function SQe(e,t){return Wa(e.getUTCFullYear()%100,t,2)}function _Qe(e,t){return e=yle(e),Wa(e.getUTCFullYear()%100,t,2)}function TQe(e,t){return Wa(e.getUTCFullYear()%1e4,t,4)}function BQe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?h1(e):h1.ceil(e),Wa(e.getUTCFullYear()%1e4,t,4)}function IQe(){return"+0000"}function IK(){return"%"}function OK(e){return+e}function DK(e){return Math.floor(+e/1e3)}var wv,wle,Nle;OQe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function OQe(e){return wv=OHe(e),wle=wv.format,wv.parse,Nle=wv.utcFormat,wv.utcParse,wv}function DQe(e){return new Date(e)}function FQe(e){return e instanceof Date?+e:+new Date(+e)}function $M(e,t,r,a,n,i,o,l,c,d){var u=TM(),f=u.invert,A=u.domain,m=d(".%L"),g=d(":%S"),x=d("%I:%M"),v=d("%I %p"),y=d("%a %d"),N=d("%b %d"),E=d("%B"),B=d("%Y");function _(I){return(c(I)<I?m:l(I)<I?g:o(I)<I?x:i(I)<I?v:a(I)<I?n(I)<I?y:N:r(I)<I?E:B)(I)}return u.invert=function(I){return new Date(f(I))},u.domain=function(I){return arguments.length?A(Array.from(I,FQe)):A().map(DQe)},u.ticks=function(I){var j=A();return e(j[0],j[j.length-1],I??10)},u.tickFormat=function(I,j){return j==null?_:d(j)},u.nice=function(I){var j=A();return(!I||typeof I.range!="function")&&(I=t(j[0],j[j.length-1],I??10)),I?A(cle(j,I)):u},u.copy=function(){return AE(u,$M(e,t,r,a,n,i,o,l,c,d))},u}function PQe(){return yu.apply($M(BHe,IHe,iA,QM,M4,mE,UM,LM,Sg,wle).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function RQe(){return yu.apply($M(_He,THe,oA,zM,U4,L4,HM,MM,Sg,Nle).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function H4(){var e=0,t=1,r,a,n,i,o=zl,l=!1,c;function d(f){return f==null||isNaN(f=+f)?c:o(n===0?.5:(f=(i(f)-r)*n,l?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),a=i(t=+t),n=r===a?0:1/(a-r),d):[e,t]},d.clamp=function(f){return arguments.length?(l=!!f,d):l},d.interpolator=function(f){return arguments.length?(o=f,d):o};function u(f){return function(A){var m,g;return arguments.length?([m,g]=A,o=f(m,g),d):[o(0),o(1)]}}return d.range=u(W1),d.rangeRound=u(_M),d.unknown=function(f){return arguments.length?(c=f,d):c},function(f){return i=f,r=f(e),a=f(t),n=r===a?0:1/(a-r),d}}function Bp(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Ele(){var e=Tp(H4()(zl));return e.copy=function(){return Bp(e,Ele())},NA.apply(e,arguments)}function Cle(){var e=OM(H4()).domain([1,10]);return e.copy=function(){return Bp(e,Cle()).base(e.base())},NA.apply(e,arguments)}function jle(){var e=DM(H4());return e.copy=function(){return Bp(e,jle()).constant(e.constant())},NA.apply(e,arguments)}function VM(){var e=FM(H4());return e.copy=function(){return Bp(e,VM()).exponent(e.exponent())},NA.apply(e,arguments)}function LQe(){return VM.apply(null,arguments).exponent(.5)}function kle(){var e=[],t=zl;function r(a){if(a!=null&&!isNaN(a=+a))return t((fE(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let n of a)n!=null&&!isNaN(n=+n)&&e.push(n);return e.sort(qm),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,n)=>t(n/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(n,i)=>p9e(e,i/a))},r.copy=function(){return kle(t).domain(e)},NA.apply(r,arguments)}function Q4(){var e=0,t=.5,r=1,a=1,n,i,o,l,c,d=zl,u,f=!1,A;function m(x){return isNaN(x=+x)?A:(x=.5+((x=+u(x))-i)*(a*x<a*i?l:c),d(f?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([e,t,r]=x,n=u(e=+e),i=u(t=+t),o=u(r=+r),l=n===i?0:.5/(i-n),c=i===o?0:.5/(o-i),a=i<n?-1:1,m):[e,t,r]},m.clamp=function(x){return arguments.length?(f=!!x,m):f},m.interpolator=function(x){return arguments.length?(d=x,m):d};function g(x){return function(v){var y,N,E;return arguments.length?([y,N,E]=v,d=X9e(x,[y,N,E]),m):[d(0),d(.5),d(1)]}}return m.range=g(W1),m.rangeRound=g(_M),m.unknown=function(x){return arguments.length?(A=x,m):A},function(x){return u=x,n=x(e),i=x(t),o=x(r),l=n===i?0:.5/(i-n),c=i===o?0:.5/(o-i),a=i<n?-1:1,m}}function Sle(){var e=Tp(Q4()(zl));return e.copy=function(){return Bp(e,Sle())},NA.apply(e,arguments)}function _le(){var e=OM(Q4()).domain([.1,1,10]);return e.copy=function(){return Bp(e,_le()).base(e.base())},NA.apply(e,arguments)}function Tle(){var e=DM(Q4());return e.copy=function(){return Bp(e,Tle()).constant(e.constant())},NA.apply(e,arguments)}function GM(){var e=FM(Q4());return e.copy=function(){return Bp(e,GM()).exponent(e.exponent())},NA.apply(e,arguments)}function MQe(){return GM.apply(null,arguments).exponent(.5)}const qw=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:jM,scaleDiverging:Sle,scaleDivergingLog:_le,scaleDivergingPow:GM,scaleDivergingSqrt:MQe,scaleDivergingSymlog:Tle,scaleIdentity:lle,scaleImplicit:LF,scaleLinear:ole,scaleLog:dle,scaleOrdinal:P4,scalePoint:v9e,scalePow:PM,scaleQuantile:hle,scaleQuantize:Ale,scaleRadial:fle,scaleSequential:Ele,scaleSequentialLog:Cle,scaleSequentialPow:VM,scaleSequentialQuantile:kle,scaleSequentialSqrt:LQe,scaleSequentialSymlog:jle,scaleSqrt:vHe,scaleSymlog:ule,scaleThreshold:mle,scaleTime:PQe,scaleUtc:RQe,tickFormat:ile},Symbol.toStringTag,{value:"Module"}));var Ip=e=>e.chartData,z4=xt([Ip],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),$4=(e,t,r,a)=>a?z4(e):Ip(e);function A1(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Mo(t)&&Mo(r))return!0}return!1}function FK(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function UQe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,a]=e,n,i;if(Mo(r))n=r;else if(typeof r=="function")return;if(Mo(a))i=a;else if(typeof a=="function")return;var o=[n,i];if(A1(o))return o}}function HQe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,r);if(A1(a))return FK(a,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[n,i]=e,o,l;if(n==="auto")t!=null&&(o=Math.min(...t));else if(sr(n))o=n;else if(typeof n=="function")try{t!=null&&(o=n(t==null?void 0:t[0]))}catch{}else if(typeof n=="string"&&yq.test(n)){var c=yq.exec(n);if(c==null||t==null)o=void 0;else{var d=+c[1];o=t[0]-d}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(sr(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&wq.test(i)){var u=wq.exec(i);if(u==null||t==null)l=void 0;else{var f=+u[1];l=t[1]+f}}else l=t==null?void 0:t[1];var A=[o,l];if(A1(A))return t==null?A:FK(A,t,r)}}}var X1=1e9,QQe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},KM,is=!0,xu="[DecimalError] ",Gg=xu+"Invalid argument: ",qM=xu+"Exponent out of range: ",Y1=Math.floor,fg=Math.pow,zQe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,fd,io=1e7,qn=7,Ble=9007199254740991,jS=Y1(Ble/qn),hr={};hr.absoluteValue=hr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};hr.comparedTo=hr.cmp=function(e){var t,r,a,n,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,n=e.d.length,t=0,r=a<n?a:n;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===n?0:a>n^i.s<0?1:-1};hr.decimalPlaces=hr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*qn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};hr.dividedBy=hr.div=function(e){return G0(this,new this.constructor(e))};hr.dividedToIntegerBy=hr.idiv=function(e){var t=this,r=t.constructor;return Fn(G0(t,new r(e),0,1),r.precision)};hr.equals=hr.eq=function(e){return!this.cmp(e)};hr.exponent=function(){return Ti(this)};hr.greaterThan=hr.gt=function(e){return this.cmp(e)>0};hr.greaterThanOrEqualTo=hr.gte=function(e){return this.cmp(e)>=0};hr.isInteger=hr.isint=function(){return this.e>this.d.length-2};hr.isNegative=hr.isneg=function(){return this.s<0};hr.isPositive=hr.ispos=function(){return this.s>0};hr.isZero=function(){return this.s===0};hr.lessThan=hr.lt=function(e){return this.cmp(e)<0};hr.lessThanOrEqualTo=hr.lte=function(e){return this.cmp(e)<1};hr.logarithm=hr.log=function(e){var t,r=this,a=r.constructor,n=a.precision,i=n+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(fd))throw Error(xu+"NaN");if(r.s<1)throw Error(xu+(r.s?"NaN":"-Infinity"));return r.eq(fd)?new a(0):(is=!1,t=G0(CN(r,i),CN(e,i),i),is=!0,Fn(t,n))};hr.minus=hr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Dle(t,e):Ile(t,(e.s=-e.s,e))};hr.modulo=hr.mod=function(e){var t,r=this,a=r.constructor,n=a.precision;if(e=new a(e),!e.s)throw Error(xu+"NaN");return r.s?(is=!1,t=G0(r,e,0,1).times(e),is=!0,r.minus(t)):Fn(new a(r),n)};hr.naturalExponential=hr.exp=function(){return Ole(this)};hr.naturalLogarithm=hr.ln=function(){return CN(this)};hr.negated=hr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};hr.plus=hr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Ile(t,e):Dle(t,(e.s=-e.s,e))};hr.precision=hr.sd=function(e){var t,r,a,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Gg+e);if(t=Ti(n)+1,a=n.d.length-1,r=a*qn+1,a=n.d[a],a){for(;a%10==0;a/=10)r--;for(a=n.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};hr.squareRoot=hr.sqrt=function(){var e,t,r,a,n,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(xu+"NaN")}for(e=Ti(l),is=!1,n=Math.sqrt(+l),n==0||n==1/0?(t=bh(l.d),(t.length+e)%2==0&&(t+="0"),n=Math.sqrt(t),e=Y1((e+1)/2)-(e<0||e%2),n==1/0?t="5e"+e:(t=n.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new c(t)):a=new c(n.toString()),r=c.precision,n=o=r+3;;)if(i=a,a=i.plus(G0(l,i,o+2)).times(.5),bh(i.d).slice(0,o)===(t=bh(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),n==o&&t=="4999"){if(Fn(i,r+1,0),i.times(i).eq(l)){a=i;break}}else if(t!="9999")break;o+=4}return is=!0,Fn(a,r)};hr.times=hr.mul=function(e){var t,r,a,n,i,o,l,c,d,u=this,f=u.constructor,A=u.d,m=(e=new f(e)).d;if(!u.s||!e.s)return new f(0);for(e.s*=u.s,r=u.e+e.e,c=A.length,d=m.length,c<d&&(i=A,A=m,m=i,o=c,c=d,d=o),i=[],o=c+d,a=o;a--;)i.push(0);for(a=d;--a>=0;){for(t=0,n=c+a;n>a;)l=i[n]+m[a]*A[n-a-1]+t,i[n--]=l%io|0,t=l/io|0;i[n]=(i[n]+t)%io|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,is?Fn(e,f.precision):e};hr.toDecimalPlaces=hr.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(Rh(e,0,X1),t===void 0?t=a.rounding:Rh(t,0,8),Fn(r,e+Ti(r)+1,t))};hr.toExponential=function(e,t){var r,a=this,n=a.constructor;return e===void 0?r=mx(a,!0):(Rh(e,0,X1),t===void 0?t=n.rounding:Rh(t,0,8),a=Fn(new n(a),e+1,t),r=mx(a,!0,e+1)),r};hr.toFixed=function(e,t){var r,a,n=this,i=n.constructor;return e===void 0?mx(n):(Rh(e,0,X1),t===void 0?t=i.rounding:Rh(t,0,8),a=Fn(new i(n),e+Ti(n)+1,t),r=mx(a.abs(),!1,e+Ti(a)+1),n.isneg()&&!n.isZero()?"-"+r:r)};hr.toInteger=hr.toint=function(){var e=this,t=e.constructor;return Fn(new t(e),Ti(e)+1,t.rounding)};hr.toNumber=function(){return+this};hr.toPower=hr.pow=function(e){var t,r,a,n,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(fd);if(l=new c(l),!l.s){if(e.s<1)throw Error(xu+"Infinity");return l}if(l.eq(fd))return l;if(a=c.precision,e.eq(fd))return Fn(l,a);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=u<0?-u:u)<=Ble){for(n=new c(fd),t=Math.ceil(a/qn+4),is=!1;r%2&&(n=n.times(l),RK(n.d,t)),r=Y1(r/2),r!==0;)l=l.times(l),RK(l.d,t);return is=!0,e.s<0?new c(fd).div(n):Fn(n,a)}}else if(i<0)throw Error(xu+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,is=!1,n=e.times(CN(l,a+d)),is=!0,n=Ole(n),n.s=i,n};hr.toPrecision=function(e,t){var r,a,n=this,i=n.constructor;return e===void 0?(r=Ti(n),a=mx(n,r<=i.toExpNeg||r>=i.toExpPos)):(Rh(e,1,X1),t===void 0?t=i.rounding:Rh(t,0,8),n=Fn(new i(n),e,t),r=Ti(n),a=mx(n,e<=r||r<=i.toExpNeg,e)),a};hr.toSignificantDigits=hr.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Rh(e,1,X1),t===void 0?t=a.rounding:Rh(t,0,8)),Fn(new a(r),e,t)};hr.toString=hr.valueOf=hr.val=hr.toJSON=hr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ti(e),r=e.constructor;return mx(e,t<=r.toExpNeg||t>=r.toExpPos)};function Ile(e,t){var r,a,n,i,o,l,c,d,u=e.constructor,f=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),is?Fn(t,f):t;if(c=e.d,d=t.d,o=e.e,n=t.e,c=c.slice(),i=o-n,i){for(i<0?(a=c,i=-i,l=d.length):(a=d,n=o,l=c.length),o=Math.ceil(f/qn),l=o>l?o+1:l+1,i>l&&(i=l,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,a=d,d=c,c=a),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/io|0,c[i]%=io;for(r&&(c.unshift(r),++n),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=n,is?Fn(t,f):t}function Rh(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Gg+e)}function bh(e){var t,r,a,n=e.length-1,i="",o=e[0];if(n>0){for(i+=o,t=1;t<n;t++)a=e[t]+"",r=qn-a.length,r&&(i+=bm(r)),i+=a;o=e[t],a=o+"",r=qn-a.length,r&&(i+=bm(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var G0=function(){function e(a,n){var i,o=0,l=a.length;for(a=a.slice();l--;)i=a[l]*n+o,a[l]=i%io|0,o=i/io|0;return o&&a.unshift(o),a}function t(a,n,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(a[l]!=n[l]){c=a[l]>n[l]?1:-1;break}return c}function r(a,n,i){for(var o=0;i--;)a[i]-=o,o=a[i]<n[i]?1:0,a[i]=o*io+a[i]-n[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,n,i,o){var l,c,d,u,f,A,m,g,x,v,y,N,E,B,_,I,j,k,T=a.constructor,L=a.s==n.s?1:-1,F=a.d,S=n.d;if(!a.s)return new T(a);if(!n.s)throw Error(xu+"Division by zero");for(c=a.e-n.e,j=S.length,_=F.length,m=new T(L),g=m.d=[],d=0;S[d]==(F[d]||0);)++d;if(S[d]>(F[d]||0)&&--c,i==null?N=i=T.precision:o?N=i+(Ti(a)-Ti(n))+1:N=i,N<0)return new T(0);if(N=N/qn+2|0,d=0,j==1)for(u=0,S=S[0],N++;(d<_||u)&&N--;d++)E=u*io+(F[d]||0),g[d]=E/S|0,u=E%S|0;else{for(u=io/(S[0]+1)|0,u>1&&(S=e(S,u),F=e(F,u),j=S.length,_=F.length),B=j,x=F.slice(0,j),v=x.length;v<j;)x[v++]=0;k=S.slice(),k.unshift(0),I=S[0],S[1]>=io/2&&++I;do u=0,l=t(S,x,j,v),l<0?(y=x[0],j!=v&&(y=y*io+(x[1]||0)),u=y/I|0,u>1?(u>=io&&(u=io-1),f=e(S,u),A=f.length,v=x.length,l=t(f,x,A,v),l==1&&(u--,r(f,j<A?k:S,A))):(u==0&&(l=u=1),f=S.slice()),A=f.length,A<v&&f.unshift(0),r(x,f,v),l==-1&&(v=x.length,l=t(S,x,j,v),l<1&&(u++,r(x,j<v?k:S,v))),v=x.length):l===0&&(u++,x=[0]),g[d++]=u,l&&x[0]?x[v++]=F[B]||0:(x=[F[B]],v=1);while((B++<_||x[0]!==void 0)&&N--)}return g[0]||g.shift(),m.e=c,Fn(m,o?i+Ti(m)+1:i)}}();function Ole(e,t){var r,a,n,i,o,l,c=0,d=0,u=e.constructor,f=u.precision;if(Ti(e)>16)throw Error(qM+Ti(e));if(!e.s)return new u(fd);for(is=!1,l=f,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(a=Math.log(fg(2,d))/Math.LN10*2+5|0,l+=a,r=n=i=new u(fd),u.precision=l;;){if(n=Fn(n.times(e),l),r=r.times(++c),o=i.plus(G0(n,r,l)),bh(o.d).slice(0,l)===bh(i.d).slice(0,l)){for(;d--;)i=Fn(i.times(i),l);return u.precision=f,t==null?(is=!0,Fn(i,f)):i}i=o}}function Ti(e){for(var t=e.e*qn,r=e.d[0];r>=10;r/=10)t++;return t}function x6(e,t,r){if(t>e.LN10.sd())throw is=!0,r&&(e.precision=r),Error(xu+"LN10 precision limit exceeded");return Fn(new e(e.LN10),t)}function bm(e){for(var t="";e--;)t+="0";return t}function CN(e,t){var r,a,n,i,o,l,c,d,u,f=1,A=10,m=e,g=m.d,x=m.constructor,v=x.precision;if(m.s<1)throw Error(xu+(m.s?"NaN":"-Infinity"));if(m.eq(fd))return new x(0);if(t==null?(is=!1,d=v):d=t,m.eq(10))return t==null&&(is=!0),x6(x,d);if(d+=A,x.precision=d,r=bh(g),a=r.charAt(0),i=Ti(m),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)m=m.times(e),r=bh(m.d),a=r.charAt(0),f++;i=Ti(m),a>1?(m=new x("0."+r),i++):m=new x(a+"."+r.slice(1))}else return c=x6(x,d+2,v).times(i+""),m=CN(new x(a+"."+r.slice(1)),d-A).plus(c),x.precision=v,t==null?(is=!0,Fn(m,v)):m;for(l=o=m=G0(m.minus(fd),m.plus(fd),d),u=Fn(m.times(m),d),n=3;;){if(o=Fn(o.times(u),d),c=l.plus(G0(o,new x(n),d)),bh(c.d).slice(0,d)===bh(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(x6(x,d+2,v).times(i+""))),l=G0(l,new x(f),d),x.precision=v,t==null?(is=!0,Fn(l,v)):l;l=c,n+=2}}function PK(e,t){var r,a,n;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(n=t.length;t.charCodeAt(n-1)===48;)--n;if(t=t.slice(a,n),t){if(n-=a,r=r-a-1,e.e=Y1(r/qn),e.d=[],a=(r+1)%qn,r<0&&(a+=qn),a<n){for(a&&e.d.push(+t.slice(0,a)),n-=qn;a<n;)e.d.push(+t.slice(a,a+=qn));t=t.slice(a),a=qn-t.length}else a-=n;for(;a--;)t+="0";if(e.d.push(+t),is&&(e.e>jS||e.e<-jS))throw Error(qM+r)}else e.s=0,e.e=0,e.d=[0];return e}function Fn(e,t,r){var a,n,i,o,l,c,d,u,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(a=t-o,a<0)a+=qn,n=t,d=f[u=0];else{if(u=Math.ceil((a+1)/qn),i=f.length,u>=i)return e;for(d=i=f[u],o=1;i>=10;i/=10)o++;a%=qn,n=a-qn+o}if(r!==void 0&&(i=fg(10,o-n-1),l=d/i%10|0,c=t<0||f[u+1]!==void 0||d%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(a>0?n>0?d/fg(10,o-n):0:f[u-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=Ti(e),f.length=1,t=t-i-1,f[0]=fg(10,(qn-t%qn)%qn),e.e=Y1(-t/qn)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(a==0?(f.length=u,i=1,u--):(f.length=u+1,i=fg(10,qn-a),f[u]=n>0?(d/fg(10,o-n)%fg(10,n)|0)*i:0),c)for(;;)if(u==0){(f[0]+=i)==io&&(f[0]=1,++e.e);break}else{if(f[u]+=i,f[u]!=io)break;f[u--]=0,i=1}for(a=f.length;f[--a]===0;)f.pop();if(is&&(e.e>jS||e.e<-jS))throw Error(qM+Ti(e));return e}function Dle(e,t){var r,a,n,i,o,l,c,d,u,f,A=e.constructor,m=A.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new A(e),is?Fn(t,m):t;if(c=e.d,f=t.d,a=t.e,d=e.e,c=c.slice(),o=d-a,o){for(u=o<0,u?(r=c,o=-o,l=f.length):(r=f,a=d,l=c.length),n=Math.max(Math.ceil(m/qn),l)+2,o>n&&(o=n,r.length=1),r.reverse(),n=o;n--;)r.push(0);r.reverse()}else{for(n=c.length,l=f.length,u=n<l,u&&(l=n),n=0;n<l;n++)if(c[n]!=f[n]){u=c[n]<f[n];break}o=0}for(u&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,n=f.length-l;n>0;--n)c[l++]=0;for(n=f.length;n>o;){if(c[--n]<f[n]){for(i=n;i&&c[--i]===0;)c[i]=io-1;--c[i],c[n]+=io}c[n]-=f[n]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(t.d=c,t.e=a,is?Fn(t,m):t):new A(0)}function mx(e,t,r){var a,n=Ti(e),i=bh(e.d),o=i.length;return t?(r&&(a=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+bm(a):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(n<0?"e":"e+")+n):n<0?(i="0."+bm(-n-1)+i,r&&(a=r-o)>0&&(i+=bm(a))):n>=o?(i+=bm(n+1-o),r&&(a=r-n-1)>0&&(i=i+"."+bm(a))):((a=n+1)<o&&(i=i.slice(0,a)+"."+i.slice(a)),r&&(a=r-o)>0&&(n+1===o&&(i+="."),i+=bm(a))),e.s<0?"-"+i:i}function RK(e,t){if(e.length>t)return e.length=t,!0}function Fle(e){var t,r,a;function n(i){var o=this;if(!(o instanceof n))return new n(i);if(o.constructor=n,i instanceof n){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Gg+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return PK(o,i.toString())}else if(typeof i!="string")throw Error(Gg+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,zQe.test(i))PK(o,i);else throw Error(Gg+i)}if(n.prototype=hr,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.clone=Fle,n.config=n.set=$Qe,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return n.config(e),n}function $Qe(e){if(!e||typeof e!="object")throw Error(xu+"Object expected");var t,r,a,n=["precision",1,X1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<n.length;t+=3)if((a=e[r=n[t]])!==void 0)if(Y1(a)===a&&a>=n[t+1]&&a<=n[t+2])this[r]=a;else throw Error(Gg+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(Gg+r+": "+a);return this}var KM=Fle(QQe);fd=new KM(1);const vn=KM;var VQe=e=>e,Ple={},Rle=e=>e===Ple,LK=e=>function t(){return arguments.length===0||arguments.length===1&&Rle(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Lle=(e,t)=>e===1?t:LK(function(){for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];var i=a.filter(o=>o!==Ple).length;return i>=e?t(...a):Lle(e-i,LK(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var d=a.map(u=>Rle(u)?l.shift():u);return t(...d,...l)}))}),V4=e=>Lle(e.length,e),zF=(e,t)=>{for(var r=[],a=e;a<t;++a)r[a-e]=a;return r},GQe=V4((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),qQe=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return VQe;var n=r.reverse(),i=n[0],o=n.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}},$F=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),Mle=e=>{var t=null,r=null;return function(){for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return t&&n.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=n,r=e(...n)),r}};function Ule(e){var t;return e===0?t=1:t=Math.floor(new vn(e).abs().log(10).toNumber())+1,t}function Hle(e,t,r){for(var a=new vn(e),n=0,i=[];a.lt(t)&&n<1e5;)i.push(a.toNumber()),a=a.add(r),n++;return i}V4((e,t,r)=>{var a=+e,n=+t;return a+r*(n-a)});V4((e,t,r)=>{var a=t-+e;return a=a||1/0,(r-e)/a});V4((e,t,r)=>{var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});var Qle=e=>{var[t,r]=e,[a,n]=[t,r];return t>r&&([a,n]=[r,t]),[a,n]},zle=(e,t,r)=>{if(e.lte(0))return new vn(0);var a=Ule(e.toNumber()),n=new vn(10).pow(a),i=e.div(n),o=a!==1?.05:.1,l=new vn(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(n);return t?new vn(c.toNumber()):new vn(Math.ceil(c.toNumber()))},KQe=(e,t,r)=>{var a=new vn(1),n=new vn(e);if(!n.isint()&&r){var i=Math.abs(e);i<1?(a=new vn(10).pow(Ule(e)-1),n=new vn(Math.floor(n.div(a).toNumber())).mul(a)):i>1&&(n=new vn(Math.floor(e)))}else e===0?n=new vn(Math.floor((t-1)/2)):r||(n=new vn(Math.floor(e)));var o=Math.floor((t-1)/2),l=qQe(GQe(c=>n.add(new vn(c-o).mul(a)).toNumber()),zF);return l(0,t)},$le=function(t,r,a,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(a-1)))return{step:new vn(0),tickMin:new vn(0),tickMax:new vn(0)};var o=zle(new vn(r).sub(t).div(a-1),n,i),l;t<=0&&r>=0?l=new vn(0):(l=new vn(t).add(r).div(2),l=l.sub(new vn(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new vn(r).sub(l).div(o).toNumber()),u=c+d+1;return u>a?$le(t,r,a,n,i+1):(u<a&&(d=r>0?d+(a-u):d,c=r>0?c:c+(a-u)),{step:o,tickMin:l.sub(new vn(c).mul(o)),tickMax:l.add(new vn(d).mul(o))})};function WQe(e){var[t,r]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(a,2),[o,l]=Qle([t,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...zF(0,a-1).map(()=>1/0)]:[...zF(0,a-1).map(()=>-1/0),l];return t>r?$F(c):c}if(o===l)return KQe(o,a,n);var{step:d,tickMin:u,tickMax:f}=$le(o,l,i,n,0),A=Hle(u,f.add(new vn(.1).mul(d)),d);return t>r?$F(A):A}function XQe(e,t){var[r,a]=e,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=Qle([r,a]);if(i===-1/0||o===1/0)return[r,a];if(i===o)return[i];var l=Math.max(t,2),c=zle(new vn(o).sub(i).div(l-1),n,0),d=[...Hle(new vn(i),new vn(o),c),o];return n===!1&&(d=d.map(u=>Math.round(u))),r>a?$F(d):d}var YQe=Mle(WQe),JQe=Mle(XQe),Vle=e=>e.rootProps.maxBarSize,ZQe=e=>e.rootProps.barGap,Gle=e=>e.rootProps.barCategoryGap,eze=e=>e.rootProps.barSize,pE=e=>e.rootProps.stackOffset,WM=e=>e.options.chartName,XM=e=>e.rootProps.syncId,qle=e=>e.rootProps.syncMethod,YM=e=>e.options.eventEmitter,ph={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},pc={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},G4=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},tze={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ph.angleAxisId,includeHidden:!1,name:void 0,reversed:ph.reversed,scale:ph.scale,tick:ph.tick,tickCount:void 0,ticks:void 0,type:ph.type,unit:void 0},rze={allowDataOverflow:pc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:pc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:pc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:pc.scale,tick:pc.tick,tickCount:pc.tickCount,ticks:void 0,type:pc.type,unit:void 0},aze={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ph.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ph.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ph.scale,tick:ph.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},nze={allowDataOverflow:pc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:pc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:pc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:pc.scale,tick:pc.tick,tickCount:pc.tickCount,ticks:void 0,type:"category",unit:void 0},J1=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?aze:tze,gE=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?nze:rze,q4=e=>e.polarOptions,JM=xt([yA,wA,$i],woe),Kle=xt([q4,JM],(e,t)=>{if(e!=null)return ql(e.innerRadius,t,0)}),Wle=xt([q4,JM],(e,t)=>{if(e!=null)return ql(e.outerRadius,t,t*.8)}),sze=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},Xle=xt([q4],sze),ize=xt([J1,Xle],G4),Yle=xt([JM,Kle,Wle],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]}),oze=xt([gE,Yle],G4),Z1=xt([ha,q4,Kle,Wle,yA,wA],(e,t,r,a,n,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||a==null)){var{cx:o,cy:l,startAngle:c,endAngle:d}=t;return{cx:ql(o,n,n/2),cy:ql(l,i,i/2),innerRadius:r,outerRadius:a,startAngle:c,endAngle:d,clockWise:!1}}}),Pn=(e,t)=>t,xE=(e,t,r)=>r;function K4(e){return e==null?void 0:e.id}var Gi=e=>{var t=ha(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},ey=e=>e.tooltip.settings.axisId,qi=e=>{var t=Gi(e),r=ey(e);return ty(e,t,r)};function Jle(e,t,r){var{chartData:a=[]}=t,n=r==null?void 0:r.dataKey,i=new Map;return e.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:a;if(!(c==null||c.length===0)){var d=K4(o);c.forEach((u,f)=>{var A=n==null?f:String(bn(u,n,null)),m=bn(u,o.dataKey,0),g;i.has(A)?g=i.get(A):g={},Object.assign(g,{[d]:m}),i.set(A,g)})}}),Array.from(i.values())}function W4(e){return e.stackId!=null&&e.dataKey!=null}function MK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function kS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MK(Object(r),!0).forEach(function(a){lze(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function lze(e,t,r){return(t=cze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cze(e){var t=dze(e,"string");return typeof t=="symbol"?t:t+""}function dze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VF=[0,"auto"],td={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},EA=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??td},rd={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:VF,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:I4},Op=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??rd},uze={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},ZM=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??uze},ui=(e,t,r)=>{switch(t){case"xAxis":return EA(e,r);case"yAxis":return Op(e,r);case"zAxis":return ZM(e,r);case"angleAxis":return J1(e,r);case"radiusAxis":return gE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},fze=(e,t,r)=>{switch(t){case"xAxis":return EA(e,r);case"yAxis":return Op(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},ty=(e,t,r)=>{switch(t){case"xAxis":return EA(e,r);case"yAxis":return Op(e,r);case"angleAxis":return J1(e,r);case"radiusAxis":return gE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Zle=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function e7(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var X4=e=>e.graphicalItems.cartesianItems,hze=xt([Pn,xE],e7),t7=(e,t,r)=>e.filter(r).filter(a=>(t==null?void 0:t.includeHidden)===!0?!0:!a.hide),vE=xt([X4,ui,hze],t7),ece=xt([vE],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(W4)),tce=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),rce=xt([vE],tce),r7=e=>e.map(t=>t.data).filter(Boolean).flat(1),Aze=xt([vE],r7),a7=(e,t)=>{var{chartData:r=[],dataStartIndex:a,dataEndIndex:n}=t;return e.length>0?e:r.slice(a,n+1)},n7=xt([Aze,$4],a7),s7=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:bn(a,t.dataKey)})):r.length>0?r.map(a=>a.dataKey).flatMap(a=>e.map(n=>({value:bn(n,a)}))):e.map(a=>({value:a})),Y4=xt([n7,ui,vE],s7);function ace(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Rx(e){return e.filter(t=>Ph(t)||t instanceof Date).map(Number).filter(t=>Tc(t)===!1)}function mze(e,t,r){return!r||typeof t!="number"||Tc(t)?[]:r.length?Rx(r.flatMap(a=>{var n=bn(e,a.dataKey),i,o;if(Array.isArray(n)?[i,o]=n:i=o=n,!(!Mo(i)||!Mo(o)))return[t-i,t+o]})):[]}var pze=xt([ece,$4,qi],Jle),nce=(e,t,r)=>{var a={},n=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),a);return Object.fromEntries(Object.entries(n).map(i=>{var[o,l]=i,c=l.map(K4);return[o,{stackedData:d7e(e,c,r),graphicalItems:l}]}))},jN=xt([pze,ece,pE],nce),sce=(e,t,r)=>{var{dataStartIndex:a,dataEndIndex:n}=t;if(r!=="zAxis"){var i=A7e(e,a,n);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},gze=xt([jN,Ip,Pn],sce),ice=(e,t,r,a,n)=>r.length>0?e.flatMap(i=>r.flatMap(o=>{var l,c,d=(l=a[o.id])===null||l===void 0?void 0:l.filter(f=>ace(n,f)),u=bn(i,(c=t.dataKey)!==null&&c!==void 0?c:o.dataKey);return{value:u,errorDomain:mze(i,u,d)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(i=>({value:bn(i,t.dataKey),errorDomain:[]})):e.map(i=>({value:i,errorDomain:[]})),J4=e=>e.errorBars,oce=(e,t,r)=>e.flatMap(a=>t[a.id]).filter(Boolean).filter(a=>ace(r,a));xt([rce,J4,Pn],oce);var xze=xt([n7,ui,rce,J4,Pn],ice);function vze(e){var{value:t}=e;if(Ph(t)||t instanceof Date)return t}var UK=e=>{var t=e.flatMap(a=>[a.value,a.errorDomain]).flat(1),r=Rx(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},bze=(e,t,r)=>{var a=e.map(vze).filter(n=>n!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&gie(a))?qoe(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},i7=e=>{var t;if(e==null||!("domain"in e))return VF;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Rx(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:VF},SS=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var n=r.filter(Boolean);if(n.length!==0){var i=n.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},lce=e=>e.referenceElements.dots,ry=(e,t,r)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===r:a.yAxisId===r),yze=xt([lce,Pn,xE],ry),cce=e=>e.referenceElements.areas,wze=xt([cce,Pn,xE],ry),dce=e=>e.referenceElements.lines,Nze=xt([dce,Pn,xE],ry),uce=(e,t)=>{var r=Rx(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Eze=xt(yze,Pn,uce),fce=(e,t)=>{var r=Rx(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Cze=xt([wze,Pn],fce),hce=(e,t)=>{var r=Rx(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},jze=xt(Nze,Pn,hce),kze=xt(Eze,jze,Cze,(e,t,r)=>SS(e,r,t)),Ace=xt([ui],i7),o7=(e,t,r,a,n,i,o)=>{var l=UQe(t,e.allowDataOverflow);if(l!=null)return l;var c=i==="vertical"&&o==="xAxis"||i==="horizontal"&&o==="yAxis",d=c?SS(r,n,UK(a)):SS(n,UK(a));return HQe(t,d,e.allowDataOverflow)},Sze=xt([ui,Ace,gze,xze,kze,ha,Pn],o7),_ze=[0,1],l7=(e,t,r,a,n,i,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,d=Hh(t,i);return d&&l==null?qoe(0,r.length):c==="category"?bze(a,e,d):n==="expand"?_ze:o}},c7=xt([ui,ha,n7,Y4,pE,Pn,Sze],l7),mce=(e,t,r,a,n)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&n==="radiusAxis"?"band":t==="radial"&&n==="angleAxis"?"linear":o==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(cE(i));return l in qw?l:"point"}}},Dp=xt([ui,ha,Zle,WM,Pn],mce);function Tze(e){if(e!=null){if(e in qw)return qw[e]();var t="scale".concat(cE(e));if(t in qw)return qw[t]()}}function Z4(e,t,r,a){if(!(r==null||a==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(a);var n=Tze(t);if(n!=null){var i=n.domain(r).range(a);return s7e(i),i}}}var d7=(e,t,r)=>{var a=i7(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&A1(e))return YQe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&A1(e))return JQe(e,t.tickCount,t.allowDecimals)}},u7=xt([c7,ty,Dp],d7),f7=(e,t,r,a)=>{if(a!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&A1(t)&&Array.isArray(r)&&r.length>0){var n=t[0],i=r[0],o=t[1],l=r[r.length-1];return[Math.min(n,i),Math.max(o,l)]}return t},Bze=xt([ui,c7,u7,Pn],f7),Ize=xt(Y4,ui,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,a=Array.from(Rx(e.map(l=>l.value))).sort((l,c)=>l-c);if(a.length<2)return 1/0;var n=a[a.length-1]-a[0];if(n===0)return 1/0;for(var i=0;i<a.length-1;i++){var o=a[i+1]-a[i];r=Math.min(r,o)}return r/n}}),pce=xt(Ize,ha,Gle,$i,(e,t,r,a)=>a,(e,t,r,a,n)=>{if(!Mo(e))return 0;var i=t==="vertical"?a.height:a.width;if(n==="gap")return e*i/2;if(n==="no-gap"){var o=ql(r,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),Oze=(e,t)=>{var r=EA(e,t);return r==null||typeof r.padding!="string"?0:pce(e,"xAxis",t,r.padding)},Dze=(e,t)=>{var r=Op(e,t);return r==null||typeof r.padding!="string"?0:pce(e,"yAxis",t,r.padding)},Fze=xt(EA,Oze,(e,t)=>{var r,a;if(e==null)return{left:0,right:0};var{padding:n}=e;return typeof n=="string"?{left:t,right:t}:{left:((r=n.left)!==null&&r!==void 0?r:0)+t,right:((a=n.right)!==null&&a!==void 0?a:0)+t}}),Pze=xt(Op,Dze,(e,t)=>{var r,a;if(e==null)return{top:0,bottom:0};var{padding:n}=e;return typeof n=="string"?{top:t,bottom:t}:{top:((r=n.top)!==null&&r!==void 0?r:0)+t,bottom:((a=n.bottom)!==null&&a!==void 0?a:0)+t}}),Rze=xt([$i,Fze,D4,O4,(e,t,r)=>r],(e,t,r,a,n)=>{var{padding:i}=a;return n?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),Lze=xt([$i,ha,Pze,D4,O4,(e,t,r)=>r],(e,t,r,a,n,i)=>{var{padding:o}=n;return i?[a.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),bE=(e,t,r,a)=>{var n;switch(t){case"xAxis":return Rze(e,r,a);case"yAxis":return Lze(e,r,a);case"zAxis":return(n=ZM(e,r))===null||n===void 0?void 0:n.range;case"angleAxis":return Xle(e);case"radiusAxis":return Yle(e,r);default:return}},gce=xt([ui,bE],G4),ay=xt([ui,Dp,Bze,gce],Z4);xt([vE,J4,Pn],oce);function xce(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var e3=(e,t)=>t,t3=(e,t,r)=>r,Mze=xt(xM,e3,t3,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(xce)),Uze=xt(vM,e3,t3,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(xce)),vce=(e,t)=>({width:e.width,height:t.height}),Hze=(e,t)=>{var r=typeof t.width=="number"?t.width:I4;return{width:r,height:e.height}},bce=xt($i,EA,vce),Qze=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},zze=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},$ze=xt(wA,$i,Mze,e3,t3,(e,t,r,a,n)=>{var i={},o;return r.forEach(l=>{var c=vce(t,l);o==null&&(o=Qze(t,a,e));var d=a==="top"&&!n||a==="bottom"&&n;i[l.id]=o-Number(d)*c.height,o+=(d?-1:1)*c.height}),i}),Vze=xt(yA,$i,Uze,e3,t3,(e,t,r,a,n)=>{var i={},o;return r.forEach(l=>{var c=Hze(t,l);o==null&&(o=zze(t,a,e));var d=a==="left"&&!n||a==="right"&&n;i[l.id]=o-Number(d)*c.width,o+=(d?-1:1)*c.width}),i}),Gze=(e,t)=>{var r=$i(e),a=EA(e,t);if(a!=null){var n=$ze(e,a.orientation,a.mirror),i=n[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},qze=(e,t)=>{var r=$i(e),a=Op(e,t);if(a!=null){var n=Vze(e,a.orientation,a.mirror),i=n[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},yce=xt($i,Op,(e,t)=>{var r=typeof t.width=="number"?t.width:I4;return{width:r,height:e.height}}),HK=(e,t,r)=>{switch(t){case"xAxis":return bce(e,r).width;case"yAxis":return yce(e,r).height;default:return}},wce=(e,t,r,a)=>{if(r!=null){var{allowDuplicatedCategory:n,type:i,dataKey:o}=r,l=Hh(e,a),c=t.map(d=>d.value);if(o&&l&&i==="category"&&n&&gie(c))return c}},yE=xt([ha,Y4,ui,Pn],wce),h7=(e,t,r,a)=>{if(!(r==null||r.dataKey==null)){var{type:n,scale:i}=r,o=Hh(e,a);if(o&&(n==="number"||i!=="auto"))return t.map(l=>l.value)}},A7=xt([ha,Y4,ty,Pn],h7),QK=xt([ha,fze,Dp,ay,yE,A7,bE,u7,Pn],(e,t,r,a,n,i,o,l,c)=>{if(t==null)return null;var d=Hh(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:n,isCategorical:d,niceTicks:l,range:o,realScaleType:r,scale:a}}),Nce=(e,t,r,a,n,i,o,l,c)=>{if(!(t==null||a==null)){var d=Hh(e,c),{type:u,ticks:f,tickCount:A}=t,m=r==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,g=u==="category"&&a.bandwidth?a.bandwidth()/m:0;g=c==="angleAxis"&&i!=null&&i.length>=2?fo(i[0]-i[1])*2*g:g;var x=f||n;if(x){var v=x.map((y,N)=>{var E=o?o.indexOf(y):y;return{index:N,coordinate:a(E)+g,value:y,offset:g}});return v.filter(y=>!Tc(y.coordinate))}return d&&l?l.map((y,N)=>({coordinate:a(y)+g,value:y,index:N,offset:g})):a.ticks?a.ticks(A).map(y=>({coordinate:a(y)+g,value:y,offset:g})):a.domain().map((y,N)=>({coordinate:a(y)+g,value:o?o[y]:y,index:N,offset:g}))}},Ece=xt([ha,ty,Dp,ay,u7,bE,yE,A7,Pn],Nce),Cce=(e,t,r,a,n,i,o)=>{if(!(t==null||r==null||a==null||a[0]===a[1])){var l=Hh(e,o),{tickCount:c}=t,d=0;return d=o==="angleAxis"&&(a==null?void 0:a.length)>=2?fo(a[0]-a[1])*2*d:d,l&&i?i.map((u,f)=>({coordinate:r(u)+d,value:u,index:f,offset:d})):r.ticks?r.ticks(c).map(u=>({coordinate:r(u)+d,value:u,offset:d})):r.domain().map((u,f)=>({coordinate:r(u)+d,value:n?n[u]:u,index:f,offset:d}))}},hp=xt([ha,ty,ay,bE,yE,A7,Pn],Cce),Ap=xt(ui,ay,(e,t)=>{if(!(e==null||t==null))return kS(kS({},e),{},{scale:t})}),Kze=xt([ui,Dp,c7,gce],Z4);xt((e,t,r)=>ZM(e,r),Kze,(e,t)=>{if(!(e==null||t==null))return kS(kS({},e),{},{scale:t})});var Wze=xt([ha,xM,vM],(e,t,r)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),jce=e=>e.options.defaultTooltipEventType,kce=e=>e.options.validateTooltipEventTypes;function Sce(e,t,r){if(e==null)return t;var a=e?"axis":"item";return r==null?t:r.includes(a)?a:t}function m7(e,t){var r=jce(e),a=kce(e);return Sce(t,r,a)}function Xze(e){return or(t=>m7(t,e))}var _ce=(e,t)=>{var r,a=Number(t);if(!(Tc(a)||t==null))return a>=0?e==null||(r=e[a])===null||r===void 0?void 0:r.value:void 0},Yze=e=>e.tooltip.settings,km={active:!1,index:null,dataKey:void 0,coordinate:void 0},Jze={itemInteraction:{click:km,hover:km},axisInteraction:{click:km,hover:km},keyboardInteraction:km,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Tce=Nd({name:"tooltip",initialState:Jze,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=V0(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Zze,removeTooltipEntrySettings:e$e,setTooltipSettingsState:t$e,setActiveMouseOverItemIndex:Bce,mouseLeaveItem:r$e,mouseLeaveChart:Ice,setActiveClickItemIndex:a$e,setMouseOverAxisIndex:Oce,setMouseClickAxisIndex:n$e,setSyncInteraction:GF,setKeyboardInteraction:qF}=Tce.actions,s$e=Tce.reducer;function zK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Ej(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zK(Object(r),!0).forEach(function(a){i$e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function i$e(e,t,r){return(t=o$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o$e(e){var t=l$e(e,"string");return typeof t=="symbol"?t:t+""}function l$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c$e(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function d$e(e){return e.index!=null}var Dce=(e,t,r,a)=>{if(t==null)return km;var n=c$e(e,t,r);if(n==null)return km;if(n.active)return n;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(d$e(n)){if(i)return Ej(Ej({},n),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a};return Ej(Ej({},km),{},{coordinate:n.coordinate})},p7=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var a=Number(r);if(!Mo(a))return r;var n=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(n,Math.min(a,i)))},Fce=(e,t,r,a,n,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],d=c==null?void 0:l(c.positions,i);if(d!=null)return d;var u=n==null?void 0:n[Number(i)];if(u)switch(r){case"horizontal":return{x:u.coordinate,y:(a.top+t)/2};default:return{x:(a.left+e)/2,y:u.coordinate}}}},Pce=(e,t,r,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var n;return r==="hover"?n=e.itemInteraction.hover.dataKey:n=e.itemInteraction.click.dataKey,n==null&&a!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===n})},wE=e=>e.options.tooltipPayloadSearcher,ny=e=>e.tooltip;function $K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function VK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$K(Object(r),!0).forEach(function(a){u$e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$K(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function u$e(e,t,r){return(t=f$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f$e(e){var t=h$e(e,"string");return typeof t=="symbol"?t:t+""}function h$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A$e(e,t){return e??t}var Rce=(e,t,r,a,n,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:u}=r,f=[];return e.reduce((A,m)=>{var g,{dataDefinedOnItem:x,settings:v}=m,y=A$e(x,l),N=Array.isArray(y)?Eoe(y,d,u):y,E=(g=v==null?void 0:v.dataKey)!==null&&g!==void 0?g:a==null?void 0:a.dataKey,B=v==null?void 0:v.nameKey,_;if(a!=null&&a.dataKey&&Array.isArray(N)&&!Array.isArray(N[0])&&o==="axis"?_=xie(N,a.dataKey,n):_=i(N,t,c,B),Array.isArray(_))_.forEach(j=>{var k=VK(VK({},v),{},{name:j.name,unit:j.unit,color:void 0,fill:void 0});A.push(Nq({tooltipEntrySettings:k,dataKey:j.dataKey,payload:j.payload,value:bn(j.payload,j.dataKey),name:j.name}))});else{var I;A.push(Nq({tooltipEntrySettings:v,dataKey:E,payload:_,value:bn(_,E),name:(I=bn(_,B))!==null&&I!==void 0?I:v==null?void 0:v.name}))}return A},f)}},g7=xt([qi,ha,Zle,WM,Gi],mce),m$e=xt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),p$e=xt([Gi,ey],e7),NE=xt([m$e,qi,p$e],t7),g$e=xt([NE],e=>e.filter(W4)),x$e=xt([NE],r7),sy=xt([x$e,Ip],a7),v$e=xt([g$e,Ip,qi],Jle),x7=xt([sy,qi,NE],s7),b$e=xt([qi],i7),y$e=xt([NE],e=>e.filter(W4)),w$e=xt([v$e,y$e,pE],nce),N$e=xt([w$e,Ip,Gi],sce),E$e=xt([NE],tce),C$e=xt([sy,qi,E$e,J4,Gi],ice),j$e=xt([lce,Gi,ey],ry),k$e=xt([j$e,Gi],uce),S$e=xt([cce,Gi,ey],ry),_$e=xt([S$e,Gi],fce),T$e=xt([dce,Gi,ey],ry),B$e=xt([T$e,Gi],hce),I$e=xt([k$e,B$e,_$e],SS),O$e=xt([qi,b$e,N$e,C$e,I$e,ha,Gi],o7),Lce=xt([qi,ha,sy,x7,pE,Gi,O$e],l7),D$e=xt([Lce,qi,g7],d7),F$e=xt([qi,Lce,D$e,Gi],f7),Mce=e=>{var t=Gi(e),r=ey(e),a=!1;return bE(e,t,r,a)},Uce=xt([qi,Mce],G4),Hce=xt([qi,g7,F$e,Uce],Z4),P$e=xt([ha,x7,qi,Gi],wce),R$e=xt([ha,x7,qi,Gi],h7),L$e=(e,t,r,a,n,i,o,l)=>{if(t){var{type:c}=t,d=Hh(e,l);if(a){var u=r==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,f=c==="category"&&a.bandwidth?a.bandwidth()/u:0;return f=l==="angleAxis"&&n!=null&&(n==null?void 0:n.length)>=2?fo(n[0]-n[1])*2*f:f,d&&o?o.map((A,m)=>({coordinate:a(A)+f,value:A,index:m,offset:f})):a.domain().map((A,m)=>({coordinate:a(A)+f,value:i?i[A]:A,index:m,offset:f}))}}},CA=xt([ha,qi,g7,Hce,Mce,P$e,R$e,Gi],L$e),v7=xt([jce,kce,Yze],(e,t,r)=>Sce(r.shared,e,t)),Qce=e=>e.tooltip.settings.trigger,b7=e=>e.tooltip.settings.defaultIndex,r3=xt([ny,v7,Qce,b7],Dce),mp=xt([r3,sy],p7),zce=xt([CA,mp],_ce),$ce=xt([r3],e=>{if(e)return e.dataKey}),Vce=xt([ny,v7,Qce,b7],Pce),M$e=xt([yA,wA,ha,$i,CA,b7,Vce,wE],Fce),U$e=xt([r3,M$e],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),H$e=xt([r3],e=>e.active),Q$e=xt([Vce,mp,Ip,qi,zce,wE,v7],Rce),z$e=xt([Q$e],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function GK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function qK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GK(Object(r),!0).forEach(function(a){$$e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function $$e(e,t,r){return(t=V$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V$e(e){var t=G$e(e,"string");return typeof t=="symbol"?t:t+""}function G$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q$e=()=>or(qi),K$e=()=>{var e=q$e(),t=or(CA),r=or(Hce);return hx(qK(qK({},e),{},{scale:r}),t)},Gce=()=>or(WM),y7=(e,t)=>t,qce=(e,t,r)=>r,w7=(e,t,r,a)=>a,W$e=xt(CA,e=>C4(e,t=>t.coordinate)),N7=xt([ny,y7,qce,w7],Dce),Kce=xt([N7,sy],p7),X$e=(e,t,r)=>{if(t!=null){var a=ny(e);return t==="axis"?r==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:r==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},Wce=xt([ny,y7,qce,w7],Pce),_S=xt([yA,wA,ha,$i,CA,w7,Wce,wE],Fce),Y$e=xt([N7,_S],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),Xce=xt(CA,Kce,_ce),J$e=xt([Wce,Kce,Ip,qi,Xce,wE,y7],Rce),Z$e=xt([N7],e=>({isActive:e.active,activeIndex:e.index})),eVe=(e,t,r,a,n,i,o,l)=>{if(!(!e||!t||!a||!n||!i)){var c=m7e(e.chartX,e.chartY,t,r,l);if(c){var d=g7e(c,t),u=a7e(d,o,i,a,n),f=p7e(t,i,u,c);return{activeIndex:String(u),activeCoordinate:f}}}};function KF(){return KF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},KF.apply(null,arguments)}function KK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Cj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KK(Object(r),!0).forEach(function(a){tVe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function tVe(e,t,r){return(t=rVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rVe(e){var t=aVe(e,"string");return typeof t=="symbol"?t:t+""}function aVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nVe(e){var{coordinate:t,payload:r,index:a,offset:n,tooltipAxisBandSize:i,layout:o,cursor:l,tooltipEventType:c,chartName:d}=e,u=t,f=r,A=a;if(!l||!u||d!=="ScatterChart"&&c!=="axis")return null;var m,g;if(d==="ScatterChart")m=u,g=AUe;else if(d==="BarChart")m=mUe(o,u,n,i),g=zoe;else if(o==="radial"){var{cx:x,cy:v,radius:y,startAngle:N,endAngle:E}=$oe(u);m={cx:x,cy:v,startAngle:N,endAngle:E,innerRadius:y,outerRadius:y},g=Goe}else m={points:ZUe(o,u,n)},g=N2;var B=typeof l=="object"&&"className"in l?l.className:void 0,_=Cj(Cj(Cj(Cj({stroke:"#ccc",pointerEvents:"none"},n),m),Oa(l,!1)),{},{payload:f,payloadIndex:A,className:ia("recharts-tooltip-cursor",B)});return w.isValidElement(l)?w.cloneElement(l,_):w.createElement(g,_)}function sVe(e){var t=K$e(),r=Ioe(),a=F4(),n=Gce();return w.createElement(nVe,KF({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:a,tooltipAxisBandSize:t,chartName:n}))}var Yce=w.createContext(null),iVe=()=>w.useContext(Yce),v6={exports:{}},WK;function oVe(){return WK||(WK=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function n(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,f,A){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new n(u,f||c,A),g=r?r+d:d;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,f;if(this._eventsCount===0)return d;for(f in u=this._events)t.call(u,f)&&d.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var A=0,m=f.length,g=new Array(m);A<m;A++)g[A]=f[A].fn;return g},l.prototype.listenerCount=function(d){var u=r?r+d:d,f=this._events[u];return f?f.fn?1:f.length:0},l.prototype.emit=function(d,u,f,A,m,g){var x=r?r+d:d;if(!this._events[x])return!1;var v=this._events[x],y=arguments.length,N,E;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,f),!0;case 4:return v.fn.call(v.context,u,f,A),!0;case 5:return v.fn.call(v.context,u,f,A,m),!0;case 6:return v.fn.call(v.context,u,f,A,m,g),!0}for(E=1,N=new Array(y-1);E<y;E++)N[E-1]=arguments[E];v.fn.apply(v.context,N)}else{var B=v.length,_;for(E=0;E<B;E++)switch(v[E].once&&this.removeListener(d,v[E].fn,void 0,!0),y){case 1:v[E].fn.call(v[E].context);break;case 2:v[E].fn.call(v[E].context,u);break;case 3:v[E].fn.call(v[E].context,u,f);break;case 4:v[E].fn.call(v[E].context,u,f,A);break;default:if(!N)for(_=1,N=new Array(y-1);_<y;_++)N[_-1]=arguments[_];v[E].fn.apply(v[E].context,N)}}return!0},l.prototype.on=function(d,u,f){return i(this,d,u,f,!1)},l.prototype.once=function(d,u,f){return i(this,d,u,f,!0)},l.prototype.removeListener=function(d,u,f,A){var m=r?r+d:d;if(!this._events[m])return this;if(!u)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===u&&(!A||g.once)&&(!f||g.context===f)&&o(this,m);else{for(var x=0,v=[],y=g.length;x<y;x++)(g[x].fn!==u||A&&!g[x].once||f&&g[x].context!==f)&&v.push(g[x]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l}(v6)),v6.exports}var lVe=oVe();const cVe=Kl(lVe);var kN=new cVe,WF="recharts.syncEvent.tooltip",XK="recharts.syncEvent.brush";function a3(e,t){if(t){var r=Number.parseInt(t,10);if(!Tc(r))return e==null?void 0:e[r]}}var dVe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Jce=Nd({name:"options",initialState:dVe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),uVe=Jce.reducer,{createEventEmitter:fVe}=Jce.actions;function hVe(e){return e.tooltip.syncInteraction}var AVe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Zce=Nd({name:"chartData",initialState:AVe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:a}=t.payload;r!=null&&(e.dataStartIndex=r),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:YK,setDataStartEndIndexes:mVe,setComputedData:h1t}=Zce.actions,pVe=Zce.reducer,ede=()=>{};function gVe(){var e=or(XM),t=or(YM),r=Jn(),a=or(qle),n=or(CA),i=F4(),o=bM(),l=or(c=>c.rootProps.className);w.useEffect(()=>{if(e==null)return ede;var c=(d,u,f)=>{if(t!==f&&e===d){if(a==="index"){r(u);return}if(n!=null){var A;if(typeof a=="function"){var m={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},g=a(n,m);A=n[g]}else a==="value"&&(A=n.find(I=>String(I.value)===u.payload.label));var{coordinate:x}=u.payload;if(A==null||u.payload.active===!1||x==null||o==null){r(GF({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:v,y}=x,N=Math.min(v,o.x+o.width),E=Math.min(y,o.y+o.height),B={x:i==="horizontal"?A.coordinate:N,y:i==="horizontal"?E:A.coordinate},_=GF({active:u.payload.active,coordinate:B,dataKey:u.payload.dataKey,index:String(A.index),label:u.payload.label});r(_)}}};return kN.on(WF,c),()=>{kN.off(WF,c)}},[l,r,t,e,a,n,i,o])}function xVe(){var e=or(XM),t=or(YM),r=Jn();w.useEffect(()=>{if(e==null)return ede;var a=(n,i,o)=>{t!==o&&e===n&&r(mVe(i))};return kN.on(XK,a),()=>{kN.off(XK,a)}},[r,t,e])}function vVe(){var e=Jn();w.useEffect(()=>{e(fVe())},[e]),gVe(),xVe()}function bVe(e,t,r,a,n,i){var o=or(A=>X$e(A,e,t)),l=or(YM),c=or(XM),d=or(qle),u=or(hVe),f=u==null?void 0:u.active;w.useEffect(()=>{if(!f&&c!=null&&l!=null){var A=GF({active:i,coordinate:r,dataKey:o,index:n,label:typeof a=="number"?String(a):a});kN.emit(WF,c,A,l)}},[f,r,o,n,a,l,c,d,i])}function JK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function ZK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JK(Object(r),!0).forEach(function(a){yVe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function yVe(e,t,r){return(t=wVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wVe(e){var t=NVe(e,"string");return typeof t=="symbol"?t:t+""}function NVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EVe(e){return e.dataKey}function CVe(e,t){return w.isValidElement(e)?w.cloneElement(e,t):typeof e=="function"?w.createElement(e,t):w.createElement(G7e,t)}var eW=[],jVe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!_p.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ii(e){var t=Ic(e,jVe),{active:r,allowEscapeViewBox:a,animationDuration:n,animationEasing:i,content:o,filterNull:l,isAnimationActive:c,offset:d,payloadUniqBy:u,position:f,reverseDirection:A,useTranslate3d:m,wrapperStyle:g,cursor:x,shared:v,trigger:y,defaultIndex:N,portal:E,axisId:B}=t,_=Jn(),I=typeof N=="number"?String(N):N;w.useEffect(()=>{_(t$e({shared:v,trigger:y,axisId:B,active:r,defaultIndex:I}))},[_,v,y,B,r,I]);var j=bM(),k=Poe(),T=Xze(v),{activeIndex:L,isActive:F}=or(J=>Z$e(J,T,y,I)),S=or(J=>J$e(J,T,y,I)),M=or(J=>Xce(J,T,y,I)),H=or(J=>Y$e(J,T,y,I)),K=S,Q=iVe(),G=r??F,[X,Z]=Yie([K,G]),U=T==="axis"?M:void 0;bVe(T,y,H,U,L,G);var Y=E??Q;if(Y==null)return null;var P=K??eW;G||(P=eW),l&&P.length&&(P=Vie(K.filter(J=>J.value!=null&&(J.hide!==!0||t.includeHidden)),u,EVe));var D=P.length>0,W=w.createElement(Z7e,{allowEscapeViewBox:a,animationDuration:n,animationEasing:i,isAnimationActive:c,active:G,coordinate:H,hasPayload:D,offset:d,position:f,reverseDirection:A,useTranslate3d:m,viewBox:j,wrapperStyle:g,lastBoundingBox:X,innerRef:Z,hasPortalFromProps:!!E},CVe(o,ZK(ZK({},t),{},{payload:P,label:U,active:G,coordinate:H,accessibilityLayer:k})));return w.createElement(w.Fragment,null,ZL.createPortal(W,Y),G&&w.createElement(sVe,{cursor:x,tooltipEventType:T,coordinate:H,payload:K,index:L}))}var b6={},y6={},w6={},tW;function kVe(){return tW||(tW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a,{signal:n,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),d=i==null||i.includes("trailing"),u=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},f=()=>{d&&u(),x()};let A=null;const m=()=>{A!=null&&clearTimeout(A),A=setTimeout(()=>{A=null,f()},a)},g=()=>{A!==null&&(clearTimeout(A),A=null)},x=()=>{g(),o=void 0,l=null},v=()=>{u()},y=function(...N){if(n!=null&&n.aborted)return;o=this,l=N;const E=A==null;m(),c&&E&&u()};return y.schedule=m,y.cancel=x,y.flush=v,n==null||n.addEventListener("abort",x,{once:!0}),y}e.debounce=t}(w6)),w6}var rW;function SVe(){return rW||(rW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kVe();function r(a,n=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,d=Array(2);o&&(d[0]="leading"),l&&(d[1]="trailing");let u,f=null;const A=t.debounce(function(...x){u=a.apply(this,x),f=null},n,{edges:d}),m=function(...x){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(u=a.apply(this,x),f=Date.now(),A.cancel(),A.schedule(),u):(A.apply(this,x),u)},g=()=>(A.flush(),u);return m.cancel=A.cancel,m.flush=g,m}e.debounce=r}(y6)),y6}var aW;function _Ve(){return aW||(aW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SVe();function r(a,n=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(a,n,{leading:o,maxWait:n,trailing:l})}e.throttle=r}(b6)),b6}var N6,nW;function TVe(){return nW||(nW=1,N6=_Ve().throttle),N6}var BVe=TVe();const IVe=Kl(BVe);var E2=function(t,r){for(var a=arguments.length,n=new Array(a>2?a-2:0),i=2;i<a;i++)n[i-2]=arguments[i]};function sW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function E6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sW(Object(r),!0).forEach(function(a){OVe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function OVe(e,t,r){return(t=DVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DVe(e){var t=FVe(e,"string");return typeof t=="symbol"?t:t+""}function FVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oi=w.forwardRef((e,t)=>{var{aspect:r,initialDimension:a={width:-1,height:-1},width:n="100%",height:i="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:f,className:A,onResize:m,style:g={}}=e,x=w.useRef(null),v=w.useRef();v.current=m,w.useImperativeHandle(t,()=>x.current);var[y,N]=w.useState({containerWidth:a.width,containerHeight:a.height}),E=w.useCallback((_,I)=>{N(j=>{var k=Math.round(_),T=Math.round(I);return j.containerWidth===k&&j.containerHeight===T?j:{containerWidth:k,containerHeight:T}})},[]);w.useEffect(()=>{var _=T=>{var L,{width:F,height:S}=T[0].contentRect;E(F,S),(L=v.current)===null||L===void 0||L.call(v,F,S)};u>0&&(_=IVe(_,u,{trailing:!0,leading:!1}));var I=new ResizeObserver(_),{width:j,height:k}=x.current.getBoundingClientRect();return E(j,k),I.observe(x.current),()=>{I.disconnect()}},[E,u]);var B=w.useMemo(()=>{var{containerWidth:_,containerHeight:I}=y;if(_<0||I<0)return null;E2(Cg(n)||Cg(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,n,i),E2(!r||r>0,"The aspect(%s) must be greater than zero.",r);var j=Cg(n)?_:n,k=Cg(i)?I:i;return r&&r>0&&(j?k=j/r:k&&(j=k*r),c&&k>c&&(k=c)),E2(j>0||k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,j,k,n,i,o,l,r),w.Children.map(d,T=>w.cloneElement(T,{width:j,height:k,style:E6({width:j,height:k},T.props.style)}))},[r,d,i,c,l,o,y,n]);return w.createElement("div",{id:f?"".concat(f):void 0,className:ia("recharts-responsive-container",A),style:E6(E6({},g),{},{width:n,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:x},w.createElement("div",{style:{width:0,height:0,overflow:"visible"}},B))}),Lh=e=>null;Lh.displayName="Cell";function PVe(e,t,r){return(t=RVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RVe(e){var t=LVe(e,"string");return typeof t=="symbol"?t:t+""}function LVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class MVe{constructor(t){PVe(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;this.cache.delete(a)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function iW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function UVe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iW(Object(r),!0).forEach(function(a){HVe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function HVe(e,t,r){return(t=QVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QVe(e){var t=zVe(e,"string");return typeof t=="symbol"?t:t+""}function zVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $Ve={cacheSize:2e3,enableCache:!0},tde=UVe({},$Ve),oW=new MVe(tde.cacheSize),VVe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},lW="recharts_measurement_span";function GVe(e,t){var r=t.fontSize||"",a=t.fontFamily||"",n=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(a,"|").concat(n,"|").concat(i,"|").concat(o,"|").concat(l)}var cW=(e,t)=>{try{var r=document.getElementById(lW);r||(r=document.createElement("span"),r.setAttribute("id",lW),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,VVe,t),r.textContent="".concat(e);var a=r.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},C2=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||_p.isSsr)return{width:0,height:0};if(!tde.enableCache)return cW(t,r);var a=GVe(t,r),n=oW.get(a);if(n)return n;var i=cW(t,r);return oW.set(a,i),i},dW=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uW=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qVe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,KVe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,rde={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},WVe=Object.keys(rde),ib="NaN";function XVe(e,t){return e*rde[t]}class hc{static parse(t){var r,[,a,n]=(r=KVe.exec(t))!==null&&r!==void 0?r:[];return new hc(parseFloat(a),n??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Tc(t)&&(this.unit=""),r!==""&&!qVe.test(r)&&(this.num=NaN,this.unit=""),WVe.includes(r)&&(this.num=XVe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new hc(NaN,""):new hc(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new hc(NaN,""):new hc(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new hc(NaN,""):new hc(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new hc(NaN,""):new hc(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Tc(this.num)}}function ade(e){if(e.includes(ib))return ib;for(var t=e;t.includes("*")||t.includes("/");){var r,[,a,n,i]=(r=dW.exec(t))!==null&&r!==void 0?r:[],o=hc.parse(a??""),l=hc.parse(i??""),c=n==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return ib;t=t.replace(dW,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,u,f,A]=(d=uW.exec(t))!==null&&d!==void 0?d:[],m=hc.parse(u??""),g=hc.parse(A??""),x=f==="+"?m.add(g):m.subtract(g);if(x.isNaN())return ib;t=t.replace(uW,x.toString())}return t}var fW=/\(([^()]*)\)/;function YVe(e){for(var t=e,r;(r=fW.exec(t))!=null;){var[,a]=r;t=t.replace(fW,ade(a))}return t}function JVe(e){var t=e.replace(/\s+/g,"");return t=YVe(t),t=ade(t),t}function ZVe(e){try{return JVe(e)}catch{return ib}}function C6(e){var t=ZVe(e.slice(5,-1));return t===ib?"":t}var eGe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],tGe=["dx","dy","angle","className","breakAll"];function XF(){return XF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},XF.apply(null,arguments)}function hW(e,t){if(e==null)return{};var r,a,n=rGe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function rGe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var nde=/[ \f\n\r\t\v\u2028\u2029]+/,sde=e=>{var{children:t,breakAll:r,style:a}=e;try{var n=[];$n(t)||(r?n=t.toString().split(""):n=t.toString().split(nde));var i=n.map(l=>({word:l,width:C2(l,a).width})),o=r?0:C2(" ",a).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},aGe=(e,t,r,a,n)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,d=sr(i),u=o,f=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F.reduce((S,M)=>{var{word:H,width:K}=M,Q=S[S.length-1];if(Q&&(a==null||n||Q.width+K+r<Number(a)))Q.words.push(H),Q.width+=K+r;else{var G={words:[H],width:K};S.push(G)}return S},[])},A=f(t),m=L=>L.reduce((F,S)=>F.width>S.width?F:S);if(!d||n)return A;var g=A.length>i||m(A).width>Number(a);if(!g)return A;for(var x="…",v=L=>{var F=u.slice(0,L),S=sde({breakAll:c,style:l,children:F+x}).wordsWithComputedWidth,M=f(S),H=M.length>i||m(M).width>Number(a);return[H,M]},y=0,N=u.length-1,E=0,B;y<=N&&E<=u.length-1;){var _=Math.floor((y+N)/2),I=_-1,[j,k]=v(I),[T]=v(_);if(!j&&!T&&(y=_+1),j&&T&&(N=_-1),!j&&T){B=k;break}E++}return B||A},AW=e=>{var t=$n(e)?[]:e.toString().split(nde);return[{words:t}]},nGe=e=>{var{width:t,scaleToFit:r,children:a,style:n,breakAll:i,maxLines:o}=e;if((t||r)&&!_p.isSsr){var l,c,d=sde({breakAll:i,children:a,style:n});if(d){var{wordsWithComputedWidth:u,spaceWidth:f}=d;l=u,c=f}else return AW(a);return aGe({breakAll:i,children:a,maxLines:o,style:n},l,c,t,r)}return AW(a)},mW="#808080",iy=w.forwardRef((e,t)=>{var{x:r=0,y:a=0,lineHeight:n="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:d=mW}=e,u=hW(e,eGe),f=w.useMemo(()=>nGe({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:o,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,o,u.style,u.width]),{dx:A,dy:m,angle:g,className:x,breakAll:v}=u,y=hW(u,tGe);if(!Ph(r)||!Ph(a))return null;var N=r+(sr(A)?A:0),E=a+(sr(m)?m:0),B;switch(c){case"start":B=C6("calc(".concat(i,")"));break;case"middle":B=C6("calc(".concat((f.length-1)/2," * -").concat(n," + (").concat(i," / 2))"));break;default:B=C6("calc(".concat(f.length-1," * -").concat(n,")"));break}var _=[];if(o){var I=f[0].width,{width:j}=u;_.push("scale(".concat(sr(j)?j/I:1,")"))}return g&&_.push("rotate(".concat(g,", ").concat(N,", ").concat(E,")")),_.length&&(y.transform=_.join(" ")),w.createElement("text",XF({},Oa(y,!0),{ref:t,x:N,y:E,className:ia("recharts-text",x),textAnchor:l,fill:d.includes("url")?mW:d}),f.map((k,T)=>{var L=k.words.join(v?"":" ");return w.createElement("tspan",{x:N,dy:T===0?B:n,key:"".concat(L,"-").concat(T)},L)}))});iy.displayName="Text";var sGe=["offset"],iGe=["labelRef"];function pW(e,t){if(e==null)return{};var r,a,n=oGe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function oGe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function gW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Ss(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gW(Object(r),!0).forEach(function(a){lGe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function lGe(e,t,r){return(t=cGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cGe(e){var t=dGe(e,"string");return typeof t=="symbol"?t:t+""}function dGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function T0(){return T0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},T0.apply(null,arguments)}var uGe=e=>{var{value:t,formatter:r}=e,a=$n(e.children)?t:e.children;return typeof r=="function"?r(a):a},E7=e=>e!=null&&typeof e=="function",fGe=(e,t)=>{var r=fo(t-e),a=Math.min(Math.abs(t-e),360);return r*a},hGe=(e,t,r,a)=>{var{position:n,offset:i,className:o}=e,{cx:l,cy:c,innerRadius:d,outerRadius:u,startAngle:f,endAngle:A,clockWise:m}=a,g=(d+u)/2,x=fGe(f,A),v=x>=0?1:-1,y,N;n==="insideStart"?(y=f+v*i,N=m):n==="insideEnd"?(y=A-v*i,N=!m):n==="end"&&(y=A+v*i,N=m),N=x<=0?N:!N;var E=Ja(l,c,g,y),B=Ja(l,c,g,y+(N?1:-1)*359),_="M".concat(E.x,",").concat(E.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(N?0:1,`,
    `).concat(B.x,",").concat(B.y),I=$n(e.id)?xN("recharts-radial-line-"):e.id;return w.createElement("text",T0({},r,{dominantBaseline:"central",className:ia("recharts-radial-bar-label",o)}),w.createElement("defs",null,w.createElement("path",{id:I,d:_})),w.createElement("textPath",{xlinkHref:"#".concat(I)},t))},AGe=(e,t,r)=>{var{cx:a,cy:n,innerRadius:i,outerRadius:o,startAngle:l,endAngle:c}=e,d=(l+c)/2;if(r==="outside"){var{x:u,y:f}=Ja(a,n,o+t,d);return{x:u,y:f,textAnchor:u>=a?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:a,y:n,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:a,y:n,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:a,y:n,textAnchor:"middle",verticalAnchor:"end"};var A=(i+o)/2,{x:m,y:g}=Ja(a,n,A,d);return{x:m,y:g,textAnchor:"middle",verticalAnchor:"middle"}},mGe=(e,t)=>{var{parentViewBox:r,offset:a,position:n}=e,{x:i,y:o,width:l,height:c}=t,d=c>=0?1:-1,u=d*a,f=d>0?"end":"start",A=d>0?"start":"end",m=l>=0?1:-1,g=m*a,x=m>0?"end":"start",v=m>0?"start":"end";if(n==="top"){var y={x:i+l/2,y:o-d*a,textAnchor:"middle",verticalAnchor:f};return Ss(Ss({},y),r?{height:Math.max(o-r.y,0),width:l}:{})}if(n==="bottom"){var N={x:i+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:A};return Ss(Ss({},N),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{})}if(n==="left"){var E={x:i-g,y:o+c/2,textAnchor:x,verticalAnchor:"middle"};return Ss(Ss({},E),r?{width:Math.max(E.x-r.x,0),height:c}:{})}if(n==="right"){var B={x:i+l+g,y:o+c/2,textAnchor:v,verticalAnchor:"middle"};return Ss(Ss({},B),r?{width:Math.max(r.x+r.width-B.x,0),height:c}:{})}var _=r?{width:l,height:c}:{};return n==="insideLeft"?Ss({x:i+g,y:o+c/2,textAnchor:v,verticalAnchor:"middle"},_):n==="insideRight"?Ss({x:i+l-g,y:o+c/2,textAnchor:x,verticalAnchor:"middle"},_):n==="insideTop"?Ss({x:i+l/2,y:o+u,textAnchor:"middle",verticalAnchor:A},_):n==="insideBottom"?Ss({x:i+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:f},_):n==="insideTopLeft"?Ss({x:i+g,y:o+u,textAnchor:v,verticalAnchor:A},_):n==="insideTopRight"?Ss({x:i+l-g,y:o+u,textAnchor:x,verticalAnchor:A},_):n==="insideBottomLeft"?Ss({x:i+g,y:o+c-u,textAnchor:v,verticalAnchor:f},_):n==="insideBottomRight"?Ss({x:i+l-g,y:o+c-u,textAnchor:x,verticalAnchor:f},_):n&&typeof n=="object"&&(sr(n.x)||Cg(n.x))&&(sr(n.y)||Cg(n.y))?Ss({x:i+ql(n.x,l),y:o+ql(n.y,c),textAnchor:"end",verticalAnchor:"end"},_):Ss({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},_)},pGe=e=>"cx"in e&&sr(e.cx);function xc(e){var{offset:t=5}=e,r=pW(e,sGe),a=Ss({offset:t},r),{viewBox:n,position:i,value:o,children:l,content:c,className:d="",textBreakAll:u,labelRef:f}=a,A=or(Z1),m=bM(),g=i==="center"?m:A??m,x=n||g;if(!x||$n(o)&&$n(l)&&!w.isValidElement(c)&&typeof c!="function")return null;var v=Ss(Ss({},a),{},{viewBox:x});if(w.isValidElement(c)){var{labelRef:y}=v,N=pW(v,iGe);return w.cloneElement(c,N)}var E;if(typeof c=="function"){if(E=w.createElement(c,v),w.isValidElement(E))return E}else E=uGe(a);var B=pGe(x),_=Oa(a,!0);if(B&&(i==="insideStart"||i==="insideEnd"||i==="end"))return hGe(a,E,_,x);var I=B?AGe(x,a.offset,a.position):mGe(a,x);return w.createElement(iy,T0({ref:f,className:ia("recharts-label",d)},_,I,{breakAll:u}),E)}xc.displayName="Label";var ide=e=>{var{cx:t,cy:r,angle:a,startAngle:n,endAngle:i,r:o,radius:l,innerRadius:c,outerRadius:d,x:u,y:f,top:A,left:m,width:g,height:x,clockWise:v,labelViewBox:y}=e;if(y)return y;if(sr(g)&&sr(x)){if(sr(u)&&sr(f))return{x:u,y:f,width:g,height:x};if(sr(A)&&sr(m))return{x:A,y:m,width:g,height:x}}if(sr(u)&&sr(f))return{x:u,y:f,width:0,height:0};if(sr(t)&&sr(r))return{cx:t,cy:r,startAngle:n||a||0,endAngle:i||a||0,innerRadius:c||0,outerRadius:d||l||o||0,clockWise:v};if(e.viewBox)return e.viewBox},gGe=(e,t,r)=>{if(!e)return null;var a={viewBox:t,labelRef:r};return e===!0?w.createElement(xc,T0({key:"label-implicit"},a)):Ph(e)?w.createElement(xc,T0({key:"label-implicit",value:e},a)):w.isValidElement(e)?e.type===xc?w.cloneElement(e,Ss({key:"label-implicit"},a)):w.createElement(xc,T0({key:"label-implicit",content:e},a)):E7(e)?w.createElement(xc,T0({key:"label-implicit",content:e},a)):e&&typeof e=="object"?w.createElement(xc,T0({},e,{key:"label-implicit"},a)):null},xGe=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var{children:n,labelRef:i}=t,o=ide(t),l=dE(n,xc).map((d,u)=>w.cloneElement(d,{viewBox:r||o,key:"label-".concat(u)}));if(!a)return l;var c=gGe(t.label,r||o,i);return[c,...l]};xc.parseViewBox=ide;xc.renderCallByParent=xGe;var j6={},k6={},xW;function vGe(){return xW||(xW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(k6)),k6}var S6={},vW;function bGe(){return vW||(vW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(S6)),S6}var bW;function yGe(){return bW||(bW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vGe(),r=bGe(),a=iM();function n(i){if(a.isArrayLike(i))return t.last(r.toArray(i))}e.last=n}(j6)),j6}var _6,yW;function wGe(){return yW||(yW=1,_6=yGe().last),_6}var NGe=wGe();const ode=Kl(NGe);var EGe=["valueAccessor"],CGe=["data","dataKey","clockWise","id","textBreakAll"];function TS(){return TS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},TS.apply(null,arguments)}function wW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function NW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wW(Object(r),!0).forEach(function(a){jGe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function jGe(e,t,r){return(t=kGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kGe(e){var t=SGe(e,"string");return typeof t=="symbol"?t:t+""}function SGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EW(e,t){if(e==null)return{};var r,a,n=_Ge(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _Ge(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var TGe=e=>Array.isArray(e.value)?ode(e.value):e.value;function q0(e){var{valueAccessor:t=TGe}=e,r=EW(e,EGe),{data:a,dataKey:n,clockWise:i,id:o,textBreakAll:l}=r,c=EW(r,CGe);return!a||!a.length?null:w.createElement(_n,{className:"recharts-label-list"},a.map((d,u)=>{var f=$n(n)?t(d,u):bn(d&&d.payload,n),A=$n(o)?{}:{id:"".concat(o,"-").concat(u)};return w.createElement(xc,TS({},Oa(d,!0),c,A,{parentViewBox:d.parentViewBox,value:f,textBreakAll:l,viewBox:xc.parseViewBox($n(i)?d:NW(NW({},d),{},{clockWise:i})),key:"label-".concat(u),index:u}))}))}q0.displayName="LabelList";function BGe(e,t){return e?e===!0?w.createElement(q0,{key:"labelList-implicit",data:t}):w.isValidElement(e)||E7(e)?w.createElement(q0,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?w.createElement(q0,TS({data:t},e,{key:"labelList-implicit"})):null:null}function IGe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:a}=e,n=dE(a,q0).map((o,l)=>w.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return n;var i=BGe(e.label,t);return[i,...n]}q0.renderCallByParent=IGe;var OGe=["points","className","baseLinePoints","connectNulls"];function ob(){return ob=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ob.apply(null,arguments)}function DGe(e,t){if(e==null)return{};var r,a,n=FGe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function FGe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var CW=e=>e&&e.x===+e.x&&e.y===+e.y,PGe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(a=>{CW(a)?r[r.length-1].push(a):r[r.length-1].length>0&&r.push([])}),CW(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},j2=(e,t)=>{var r=PGe(e);t&&(r=[r.reduce((n,i)=>[...n,...i],[])]);var a=r.map(n=>n.reduce((i,o,l)=>"".concat(i).concat(l===0?"M":"L").concat(o.x,",").concat(o.y),"")).join("");return r.length===1?"".concat(a,"Z"):a},RGe=(e,t,r)=>{var a=j2(e,r);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(j2(t.reverse(),r).slice(1))},lde=e=>{var{points:t,className:r,baseLinePoints:a,connectNulls:n}=e,i=DGe(e,OGe);if(!t||!t.length)return null;var o=ia("recharts-polygon",r);if(a&&a.length){var l=i.stroke&&i.stroke!=="none",c=RGe(t,a,n);return w.createElement("g",{className:o},w.createElement("path",ob({},Oa(i,!0),{fill:c.slice(-1)==="Z"?i.fill:"none",stroke:"none",d:c})),l?w.createElement("path",ob({},Oa(i,!0),{fill:"none",d:j2(t,n)})):null,l?w.createElement("path",ob({},Oa(i,!0),{fill:"none",d:j2(a,n)})):null)}var d=j2(t,n);return w.createElement("path",ob({},Oa(i,!0),{fill:d.slice(-1)==="Z"?i.fill:"none",className:o,d}))};function YF(){return YF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},YF.apply(null,arguments)}var n3=e=>{var{cx:t,cy:r,r:a,className:n}=e,i=ia("recharts-dot",n);return t===+t&&r===+r&&a===+a?w.createElement("circle",YF({},mo(e),YL(e),{className:i,cx:t,cy:r,r:a})):null},C7=e=>e.graphicalItems.polarItems,LGe=xt([Pn,xE],e7),j7=xt([C7,ui,LGe],t7),MGe=xt([j7],r7),k7=xt([MGe,z4],a7),cde=xt([k7,ui,j7],s7),UGe=xt([k7,ui,j7],(e,t,r)=>r.length>0?e.flatMap(a=>r.flatMap(n=>{var i,o=bn(a,(i=t.dataKey)!==null&&i!==void 0?i:n.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:bn(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]}))),jW=()=>{},HGe=xt([ui,Ace,jW,UGe,jW,ha,Pn],o7),dde=xt([ui,ha,k7,cde,pE,Pn,HGe],l7),ude=xt([dde,ui,Dp],d7),QGe=xt([ui,dde,ude,Pn],f7),S7=(e,t,r)=>{switch(t){case"angleAxis":return J1(e,r);case"radiusAxis":return gE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},_7=(e,t,r)=>{switch(t){case"angleAxis":return ize(e,r);case"radiusAxis":return oze(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},oy=xt([S7,Dp,QGe,_7],Z4),fde=xt([ha,cde,ty,Pn],h7),ly=xt([ha,S7,Dp,oy,ude,_7,yE,fde,Pn],Nce);xt([ha,S7,oy,_7,yE,fde,Pn],Cce);var zGe=(e,t)=>ly(e,"angleAxis",t,!1),$Ge=xt([zGe],e=>{if(e)return e.map(t=>t.coordinate)}),VGe=(e,t)=>ly(e,"radiusAxis",t,!1),GGe=xt([VGe],e=>{if(e)return e.map(t=>t.coordinate)}),qGe=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function KGe(e,t){if(e==null)return{};var r,a,n=WGe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function WGe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function lA(){return lA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},lA.apply(null,arguments)}function kW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function m1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kW(Object(r),!0).forEach(function(a){XGe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function XGe(e,t,r){return(t=YGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YGe(e){var t=JGe(e,"string");return typeof t=="symbol"?t:t+""}function JGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZGe=(e,t,r,a)=>{var n="";return a.forEach((i,o)=>{var l=Ja(t,r,e,i);o?n+="L ".concat(l.x,",").concat(l.y):n+="M ".concat(l.x,",").concat(l.y)}),n+="Z",n},eqe=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:n,polarAngles:i,radialLines:o}=e;if(!i||!i.length||!o)return null;var l=m1({stroke:"#ccc"},mo(e));return w.createElement("g",{className:"recharts-polar-grid-angle"},i.map(c=>{var d=Ja(t,r,a,c),u=Ja(t,r,n,c);return w.createElement("line",lA({},l,{key:"line-".concat(c),x1:d.x,y1:d.y,x2:u.x,y2:u.y}))}))},tqe=e=>{var{cx:t,cy:r,radius:a,index:n}=e,i=m1(m1({stroke:"#ccc"},mo(e)),{},{fill:"none"});return w.createElement("circle",lA({},i,{className:ia("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(n),cx:t,cy:r,r:a}))},rqe=e=>{var{radius:t,index:r}=e,a=m1(m1({stroke:"#ccc"},mo(e)),{},{fill:"none"});return w.createElement("path",lA({},a,{className:ia("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:ZGe(t,e.cx,e.cy,e.polarAngles)}))},aqe=e=>{var{polarRadius:t,gridType:r}=e;return!t||!t.length?null:w.createElement("g",{className:"recharts-polar-grid-concentric"},t.map((a,n)=>{var i=n;return r==="circle"?w.createElement(tqe,lA({key:i},e,{radius:a,index:n})):w.createElement(rqe,lA({key:i},e,{radius:a,index:n}))}))},T7=e=>{var t,r,a,n,i,o,l,c,{gridType:d="polygon",radialLines:u=!0,angleAxisId:f=0,radiusAxisId:A=0,cx:m,cy:g,innerRadius:x,outerRadius:v}=e,y=KGe(e,qGe),N=or(Z1),E=m1({cx:(t=(r=N==null?void 0:N.cx)!==null&&r!==void 0?r:m)!==null&&t!==void 0?t:0,cy:(a=(n=N==null?void 0:N.cy)!==null&&n!==void 0?n:g)!==null&&a!==void 0?a:0,innerRadius:(i=(o=N==null?void 0:N.innerRadius)!==null&&o!==void 0?o:x)!==null&&i!==void 0?i:0,outerRadius:(l=(c=N==null?void 0:N.outerRadius)!==null&&c!==void 0?c:v)!==null&&l!==void 0?l:0},y),{polarAngles:B,polarRadius:_,cx:I,cy:j,innerRadius:k,outerRadius:T}=E,L=or(H=>$Ge(H,f)),F=or(H=>GGe(H,A)),S=Array.isArray(B)?B:L,M=Array.isArray(_)?_:F;return T<=0||S==null||M==null?null:w.createElement("g",{className:"recharts-polar-grid"},w.createElement(eqe,lA({cx:I,cy:j,innerRadius:k,outerRadius:T,gridType:d,radialLines:u},E,{polarAngles:S,polarRadius:M})),w.createElement(aqe,lA({cx:I,cy:j,innerRadius:k,outerRadius:T,gridType:d,radialLines:u},E,{polarAngles:S,polarRadius:M})))};T7.displayName="PolarGrid";var T6={},B6={},SW;function nqe(){return SW||(SW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){if(r.length===0)return;let n=r[0],i=a(n);for(let o=1;o<r.length;o++){const l=r[o],c=a(l);c>i&&(i=c,n=l)}return n}e.maxBy=t}(B6)),B6}var _W;function sqe(){return _W||(_W=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nqe(),r=E4(),a=uM();function n(i,o){if(i!=null)return t.maxBy(Array.from(i),a.iteratee(o??r.identity))}e.maxBy=n}(T6)),T6}var I6,TW;function iqe(){return TW||(TW=1,I6=sqe().maxBy),I6}var oqe=iqe();const lqe=Kl(oqe);var O6={},D6={},BW;function cqe(){return BW||(BW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){if(r.length===0)return;let n=r[0],i=a(n);for(let o=1;o<r.length;o++){const l=r[o],c=a(l);c<i&&(i=c,n=l)}return n}e.minBy=t}(D6)),D6}var IW;function dqe(){return IW||(IW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cqe(),r=E4(),a=uM();function n(i,o){if(i!=null)return t.minBy(Array.from(i),a.iteratee(o??r.identity))}e.minBy=n}(O6)),O6}var F6,OW;function uqe(){return OW||(OW=1,F6=dqe().minBy),F6}var fqe=uqe();const hqe=Kl(fqe);var Aqe={radiusAxis:{},angleAxis:{}},hde=Nd({name:"polarAxis",initialState:Aqe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:mqe,removeRadiusAxis:pqe,addAngleAxis:gqe,removeAngleAxis:xqe}=hde.actions,vqe=hde.reducer,bqe=["cx","cy","angle","axisLine"],yqe=["angle","tickFormatter","stroke","tick"];function SN(){return SN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},SN.apply(null,arguments)}function DW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function yh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DW(Object(r),!0).forEach(function(a){s3(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function s3(e,t,r){return(t=wqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wqe(e){var t=Nqe(e,"string");return typeof t=="symbol"?t:t+""}function Nqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ade(e,t){if(e==null)return{};var r,a,n=Eqe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Eqe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var mde="radiusAxis";function Cqe(e){var t=Jn();return w.useEffect(()=>(t(mqe(e)),()=>{t(pqe(e))})),null}var jqe=(e,t,r,a)=>{var{coordinate:n}=e;return Ja(r,a,n,t)},kqe=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},Sqe=(e,t,r,a)=>{var n=lqe(a,o=>o.coordinate||0),i=hqe(a,o=>o.coordinate||0);return{cx:t,cy:r,startAngle:e,endAngle:e,innerRadius:i.coordinate||0,outerRadius:n.coordinate||0}},_qe=(e,t)=>{var{cx:r,cy:a,angle:n,axisLine:i}=e,o=Ade(e,bqe),l=t.reduce((f,A)=>[Math.min(f[0],A.coordinate),Math.max(f[1],A.coordinate)],[1/0,-1/0]),c=Ja(r,a,l[0],n),d=Ja(r,a,l[1],n),u=yh(yh(yh({},mo(o)),{},{fill:"none"},Oa(i,!1)),{},{x1:c.x,y1:c.y,x2:d.x,y2:d.y});return w.createElement("line",SN({className:"recharts-polar-radius-axis-line"},u))},Tqe=(e,t,r)=>{var a;return w.isValidElement(e)?a=w.cloneElement(e,t):typeof e=="function"?a=e(t):a=w.createElement(iy,SN({},t,{className:"recharts-polar-radius-axis-tick-value"}),r),a},Bqe=(e,t)=>{var{angle:r,tickFormatter:a,stroke:n,tick:i}=e,o=Ade(e,yqe),l=kqe(e.orientation),c=mo(o),d=Oa(i,!1),u=t.map((f,A)=>{var m=jqe(f,e.angle,e.cx,e.cy),g=yh(yh(yh(yh({textAnchor:l,transform:"rotate(".concat(90-r,", ").concat(m.x,", ").concat(m.y,")")},c),{},{stroke:"none",fill:n},d),{},{index:A},m),{},{payload:f});return w.createElement(_n,SN({className:ia("recharts-polar-radius-axis-tick",Noe(i)),key:"tick-".concat(f.coordinate)},Dx(e,f,A)),Tqe(i,g,a?a(f.value,A):f.value))});return w.createElement(_n,{className:"recharts-polar-radius-axis-ticks"},u)},Iqe=e=>{var{radiusAxisId:t}=e,r=or(Z1),a=or(c=>oy(c,"radiusAxis",t)),n=or(c=>ly(c,"radiusAxis",t,!1));if(r==null||!n||!n.length)return null;var i=yh(yh(yh({},e),{},{scale:a},r),{},{radius:r.outerRadius}),{tick:o,axisLine:l}=i;return w.createElement(_n,{className:ia("recharts-polar-radius-axis",mde,i.className)},l&&_qe(i,n),o&&Bqe(i,n),xc.renderCallByParent(i,Sqe(i.angle,i.cx,i.cy,n)))};class EE extends w.PureComponent{render(){return w.createElement(w.Fragment,null,w.createElement(Cqe,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),w.createElement(Iqe,this.props))}}s3(EE,"displayName","PolarRadiusAxis");s3(EE,"axisType",mde);s3(EE,"defaultProps",pc);var Oqe=["children"];function cA(){return cA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},cA.apply(null,arguments)}function FW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function gh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FW(Object(r),!0).forEach(function(a){i3(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function i3(e,t,r){return(t=Dqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dqe(e){var t=Fqe(e,"string");return typeof t=="symbol"?t:t+""}function Fqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pqe(e,t){if(e==null)return{};var r,a,n=Rqe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Rqe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Lqe=Math.PI/180,PW=1e-5,pde="angleAxis";function Mqe(e){var t=Jn(),r=w.useMemo(()=>{var{children:i}=e,o=Pqe(e,Oqe);return o},[e]),a=or(i=>J1(i,r.id)),n=r===a;return w.useEffect(()=>(t(gqe(r)),()=>{t(xqe(r))}),[t,r]),n?e.children:null}var Uqe=(e,t)=>{var{cx:r,cy:a,radius:n,orientation:i,tickSize:o}=t,l=o||8,c=Ja(r,a,n,e.coordinate),d=Ja(r,a,n+(i==="inner"?-1:1)*l,e.coordinate);return{x1:c.x,y1:c.y,x2:d.x,y2:d.y}},Hqe=(e,t)=>{var r=Math.cos(-e.coordinate*Lqe);return r>PW?t==="outer"?"start":"end":r<-PW?t==="outer"?"end":"start":"middle"},Qqe=e=>{var{cx:t,cy:r,radius:a,axisLineType:n,axisLine:i,ticks:o}=e;if(!i)return null;var l=gh(gh({},mo(e)),{},{fill:"none"},Oa(i,!1));if(n==="circle")return w.createElement(n3,cA({className:"recharts-polar-angle-axis-line"},l,{cx:t,cy:r,r:a}));var c=o.map(d=>Ja(t,r,a,d.coordinate));return w.createElement(lde,cA({className:"recharts-polar-angle-axis-line"},l,{points:c}))},zqe=e=>{var{tick:t,tickProps:r,value:a}=e;return t?w.isValidElement(t)?w.cloneElement(t,r):typeof t=="function"?t(r):w.createElement(iy,cA({},r,{className:"recharts-polar-angle-axis-tick-value"}),a):null},$qe=e=>{var{tick:t,tickLine:r,tickFormatter:a,stroke:n,ticks:i}=e,o=mo(e),l=Oa(t,!1),c=gh(gh({},o),{},{fill:"none"},Oa(r,!1)),d=i.map((u,f)=>{var A=Uqe(u,e),m=Hqe(u,e.orientation),g=gh(gh(gh({},o),{},{textAnchor:m,stroke:"none",fill:n},l),{},{index:f,payload:u,x:A.x2,y:A.y2});return w.createElement(_n,cA({className:ia("recharts-polar-angle-axis-tick",Noe(t)),key:"tick-".concat(u.coordinate)},Dx(e,u,f)),r&&w.createElement("line",cA({className:"recharts-polar-angle-axis-tick-line"},c,A)),w.createElement(zqe,{tick:t,tickProps:g,value:a?a(u.value,f):u.value}))});return w.createElement(_n,{className:"recharts-polar-angle-axis-ticks"},d)},Vqe=e=>{var{angleAxisId:t}=e,r=or(Z1),a=or(l=>oy(l,"angleAxis",t)),n=Bl(),i=or(l=>ly(l,"angleAxis",t,n));if(r==null||!i||!i.length)return null;var o=gh(gh(gh({},e),{},{scale:a},r),{},{radius:r.outerRadius});return w.createElement(_n,{className:ia("recharts-polar-angle-axis",pde,o.className)},w.createElement(Qqe,cA({},o,{ticks:i})),w.createElement($qe,cA({},o,{ticks:i})))};class CE extends w.PureComponent{render(){return this.props.radius<=0?null:w.createElement(Mqe,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},w.createElement(Vqe,this.props))}}i3(CE,"displayName","PolarAngleAxis");i3(CE,"axisType",pde);i3(CE,"defaultProps",ph);function RW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function LW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RW(Object(r),!0).forEach(function(a){Gqe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Gqe(e,t,r){return(t=qqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qqe(e){var t=Kqe(e,"string");return typeof t=="symbol"?t:t+""}function Kqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wqe=(e,t)=>t,B7=xt([C7,Wqe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),Xqe=[],I7=(e,t,r)=>(r==null?void 0:r.length)===0?Xqe:r,gde=xt([z4,B7,I7],(e,t,r)=>{var{chartData:a}=e;if(t!=null){var n;if((t==null?void 0:t.data)!=null&&t.data.length>0?n=t.data:n=a,(!n||!n.length)&&r!=null&&(n=r.map(i=>LW(LW({},t.presentationProps),i.props))),n!=null)return n}}),Yqe=xt([gde,B7,I7],(e,t,r)=>{if(!(e==null||t==null))return e.map((a,n)=>{var i,o=bn(a,t.nameKey,t.name),l;return r!=null&&(i=r[n])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?l=r[n].props.fill:typeof a=="object"&&a!=null&&"fill"in a?l=a.fill:l=t.fill,{value:kp(o,t.dataKey),color:l,payload:a,type:t.legendType}})}),Jqe=xt([gde,B7,I7,$i],(e,t,r,a)=>{if(!(t==null||e==null))return zKe({offset:a,pieSettings:t,displayedData:e,cells:r})}),P6={},MW;function Zqe(){return MW||(MW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((n=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&n.writable)?!1:r.toString()===`[object ${i}]`}let a=r;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(r)===a}e.isPlainObject=t}(P6)),P6}var R6,UW;function eKe(){return UW||(UW=1,R6=Zqe().isPlainObject),R6}var tKe=eKe();const rKe=Kl(tKe);function BS(){return BS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},BS.apply(null,arguments)}var HW=(e,t,r,a,n)=>{var i=r-a,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-i/2,",").concat(t+n),o+="L ".concat(e+r-i/2-a,",").concat(t+n),o+="L ".concat(e,",").concat(t," Z"),o},aKe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},nKe=e=>{var t=Ic(e,aKe),r=w.useRef(),[a,n]=w.useState(-1);w.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&n(v)}catch{}},[]);var{x:i,y:o,upperWidth:l,lowerWidth:c,height:d,className:u}=t,{animationEasing:f,animationDuration:A,animationBegin:m,isUpdateAnimationActive:g}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||d!==+d||l===0&&c===0||d===0)return null;var x=ia("recharts-trapezoid",u);return g?w.createElement(mS,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:d,x:i,y:o},to:{upperWidth:l,lowerWidth:c,height:d,x:i,y:o},duration:A,animationEasing:f,isActive:g},v=>{var{upperWidth:y,lowerWidth:N,height:E,x:B,y:_}=v;return w.createElement(mS,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:A,easing:f},w.createElement("path",BS({},Oa(t,!0),{className:x,d:HW(B,_,y,N,E),ref:r})))}):w.createElement("g",null,w.createElement("path",BS({},Oa(t,!0),{className:x,d:HW(i,o,l,c,d)})))},sKe=["option","shapeType","propTransformer","activeClassName","isActive"];function iKe(e,t){if(e==null)return{};var r,a,n=oKe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function oKe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function QW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function IS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QW(Object(r),!0).forEach(function(a){lKe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function lKe(e,t,r){return(t=cKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cKe(e){var t=dKe(e,"string");return typeof t=="symbol"?t:t+""}function dKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uKe(e,t){return IS(IS({},t),e)}function fKe(e,t){return e==="symbols"}function zW(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return w.createElement(zoe,r);case"trapezoid":return w.createElement(nKe,r);case"sector":return w.createElement(Goe,r);case"symbols":if(fKe(t))return w.createElement(aM,r);break;default:return null}}function hKe(e){return w.isValidElement(e)?e.props:e}function xde(e){var{option:t,shapeType:r,propTransformer:a=uKe,activeClassName:n="recharts-active-shape",isActive:i}=e,o=iKe(e,sKe),l;if(w.isValidElement(t))l=w.cloneElement(t,IS(IS({},o),hKe(t)));else if(typeof t=="function")l=t(o);else if(rKe(t)&&typeof t!="boolean"){var c=a(t,o);l=w.createElement(zW,{shapeType:r,elementProps:c})}else{var d=o;l=w.createElement(zW,{shapeType:r,elementProps:d})}return i?w.createElement(_n,{className:n},l):l}var O7=(e,t)=>{var r=Jn();return(a,n)=>i=>{e==null||e(a,n,i),r(Bce({activeIndex:String(n),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}},D7=e=>{var t=Jn();return(r,a)=>n=>{e==null||e(r,a,n),t(r$e())}},F7=(e,t)=>{var r=Jn();return(a,n)=>i=>{e==null||e(a,n,i),r(a$e({activeIndex:String(n),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}};function o3(e){var{fn:t,args:r}=e,a=Jn(),n=Bl();return w.useEffect(()=>{if(!n){var i=t(r);return a(Zze(i)),()=>{a(e$e(i))}}},[t,r,a,n]),null}var vde=()=>{};function bde(e){var{legendPayload:t}=e,r=Jn(),a=Bl();return w.useEffect(()=>a?vde:(r(Doe(t)),()=>{r(Foe(t))}),[r,a,t]),null}function yde(e){var{legendPayload:t}=e,r=Jn(),a=or(ha);return w.useEffect(()=>a!=="centric"&&a!=="radial"?vde:(r(Doe(t)),()=>{r(Foe(t))}),[r,a,t]),null}function l3(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=w.useRef(xN(t)),a=w.useRef(e);return a.current!==e&&(r.current=xN(t),a.current=e),r.current}var L6,AKe=()=>{var[e]=w.useState(()=>xN("uid-"));return e},mKe=(L6=Gpe.useId)!==null&&L6!==void 0?L6:AKe;function pKe(e,t){var r=mKe();return t||(e?"".concat(e,"-").concat(r):r)}var gKe=w.createContext(void 0),c3=e=>{var{id:t,type:r,children:a}=e,n=pKe("recharts-".concat(r),t);return w.createElement(gKe.Provider,{value:n},a(n))},xKe={cartesianItems:[],polarItems:[]},wde=Nd({name:"graphicalItems",initialState:xKe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:a}=t.payload,n=V0(e).cartesianItems.indexOf(r);n>-1&&(e.cartesianItems[n]=a)},removeCartesianGraphicalItem(e,t){var r=V0(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=V0(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:vKe,replaceCartesianGraphicalItem:bKe,removeCartesianGraphicalItem:yKe,addPolarGraphicalItem:wKe,removePolarGraphicalItem:NKe}=wde.actions,EKe=wde.reducer;function Nde(e){var t=Jn(),r=w.useRef(null);return w.useEffect(()=>{r.current===null?t(vKe(e)):r.current!==e&&t(bKe({prev:r.current,next:e})),r.current=e},[t,e]),w.useEffect(()=>()=>{r.current&&(t(yKe(r.current)),r.current=null)},[t]),null}function Ede(e){var t=Jn();return w.useEffect(()=>(t(wKe(e)),()=>{t(NKe(e))}),[t,e]),null}function CKe(){}var jKe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},$W={t:0},M6={t:1};function d3(e){var t=Ic(e,jKe),{isActive:r,canBegin:a,duration:n,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c,children:d}=t,u=Qoe("JavascriptAnimate",t.animationManager),[f,A]=w.useState(r?$W:M6),m=w.useRef(null);return w.useEffect(()=>{r||A(M6)},[r]),w.useEffect(()=>{if(!r||!a)return CKe;var g=Hoe($W,M6,Moe(i),n,A,u.getTimeoutController()),x=()=>{m.current=g()};return u.start([c,o,x,n,l]),()=>{u.stop(),m.current&&m.current(),l()}},[r,a,n,i,o,c,l,u]),d(f.t)}var kKe=["onMouseEnter","onClick","onMouseLeave"],SKe=["id"],_Ke=["id"];function P7(e,t){if(e==null)return{};var r,a,n=TKe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function TKe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function VW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Ds(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VW(Object(r),!0).forEach(function(a){BKe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function BKe(e,t,r){return(t=IKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IKe(e){var t=OKe(e,"string");return typeof t=="symbol"?t:t+""}function OKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dA(){return dA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},dA.apply(null,arguments)}function DKe(e){var t=w.useMemo(()=>dE(e.children,Lh),[e.children]),r=or(a=>Yqe(a,e.id,t));return r==null?null:w.createElement(yde,{legendPayload:r})}function FKe(e){var{dataKey:t,nameKey:r,sectors:a,stroke:n,strokeWidth:i,fill:o,name:l,hide:c,tooltipType:d}=e;return{dataDefinedOnItem:a==null?void 0:a.map(u=>u.tooltipPayload),positions:a==null?void 0:a.map(u=>u.tooltipPosition),settings:{stroke:n,strokeWidth:i,fill:o,dataKey:t,nameKey:r,name:kp(l,t),hide:c,type:d,color:o,unit:""}}}var PKe=(e,t)=>e>t?"start":e<t?"end":"middle",RKe=(e,t,r)=>typeof t=="function"?t(e):ql(t,r,r*.8),LKe=(e,t,r)=>{var{top:a,left:n,width:i,height:o}=t,l=woe(i,o),c=n+ql(e.cx,i,i/2),d=a+ql(e.cy,o,o/2),u=ql(e.innerRadius,l,0),f=RKe(r,e.outerRadius,l),A=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:c,cy:d,innerRadius:u,outerRadius:f,maxRadius:A}},MKe=(e,t)=>{var r=fo(t-e),a=Math.min(Math.abs(t-e),360);return r*a},UKe=(e,t)=>{if(w.isValidElement(e))return w.cloneElement(e,t);if(typeof e=="function")return e(t);var r=ia("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return w.createElement(N2,dA({},t,{type:"linear",className:r}))},HKe=(e,t,r)=>{if(w.isValidElement(e))return w.cloneElement(e,t);var a=r;if(typeof e=="function"&&(a=e(t),w.isValidElement(a)))return a;var n=ia("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return w.createElement(iy,dA({},t,{alignmentBaseline:"middle",className:n}),a)};function QKe(e){var{sectors:t,props:r,showLabels:a}=e,{label:n,labelLine:i,dataKey:o}=r;if(!a||!n||!t)return null;var l=mo(r),c=Oa(n,!1),d=Oa(i,!1),u=typeof n=="object"&&"offsetRadius"in n&&n.offsetRadius||20,f=t.map((A,m)=>{var g=(A.startAngle+A.endAngle)/2,x=Ja(A.cx,A.cy,A.outerRadius+u,g),v=Ds(Ds(Ds(Ds({},l),A),{},{stroke:"none"},c),{},{index:m,textAnchor:PKe(x.x,A.cx)},x),y=Ds(Ds(Ds(Ds({},l),A),{},{fill:"none",stroke:A.fill},d),{},{index:m,points:[Ja(A.cx,A.cy,A.outerRadius,g),x],key:"line"});return w.createElement(_n,{key:"label-".concat(A.startAngle,"-").concat(A.endAngle,"-").concat(A.midAngle,"-").concat(m)},i&&UKe(i,y),HKe(n,v,bn(A,o)))});return w.createElement(_n,{className:"recharts-pie-labels"},f)}function Cde(e){var{sectors:t,activeShape:r,inactiveShape:a,allOtherPieProps:n,showLabels:i}=e,o=or(mp),{onMouseEnter:l,onClick:c,onMouseLeave:d}=n,u=P7(n,kKe),f=O7(l,n.dataKey),A=D7(d),m=F7(c,n.dataKey);return t==null?null:w.createElement(w.Fragment,null,t.map((g,x)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var v=r&&String(x)===o,y=o?a:null,N=v?r:y,E=Ds(Ds({},g),{},{stroke:g.stroke,tabIndex:-1,[_oe]:x,[Toe]:n.dataKey});return w.createElement(_n,dA({tabIndex:-1,className:"recharts-pie-sector"},Dx(u,g,x),{onMouseEnter:f(g,x),onMouseLeave:A(g,x),onClick:m(g,x),key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(x)}),w.createElement(xde,dA({option:N,isActive:v,shapeType:"sector"},E)))}),w.createElement(QKe,{sectors:t,props:n,showLabels:i}))}function zKe(e){var t,{pieSettings:r,displayedData:a,cells:n,offset:i}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:d,nameKey:u,tooltipType:f}=r,A=Math.abs(r.minAngle),m=MKe(l,c),g=Math.abs(m),x=a.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,v=a.filter(I=>bn(I,d,0)!==0).length,y=(g>=360?v:v-1)*x,N=g-v*A-y,E=a.reduce((I,j)=>{var k=bn(j,d,0);return I+(sr(k)?k:0)},0),B;if(E>0){var _;B=a.map((I,j)=>{var k=bn(I,d,0),T=bn(I,u,j),L=LKe(r,i,I),F=(sr(k)?k:0)/E,S,M=Ds(Ds({},I),n&&n[j]&&n[j].props);j?S=_.endAngle+fo(m)*x*(k!==0?1:0):S=l;var H=S+fo(m)*((k!==0?A:0)+F*N),K=(S+H)/2,Q=(L.innerRadius+L.outerRadius)/2,G=[{name:T,value:k,payload:M,dataKey:d,type:f}],X=Ja(L.cx,L.cy,Q,K);return _=Ds(Ds(Ds(Ds({},r.presentationProps),{},{percent:F,cornerRadius:o,name:T,tooltipPayload:G,midAngle:K,middleRadius:Q,tooltipPosition:X},M),L),{},{value:bn(I,d),startAngle:S,endAngle:H,payload:M,paddingAngle:fo(m)*x}),_})}return B}function $Ke(e){var{props:t,previousSectorsRef:r}=e,{sectors:a,isAnimationActive:n,animationBegin:i,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:d,onAnimationStart:u,onAnimationEnd:f}=t,A=l3(t,"recharts-pie-"),m=r.current,[g,x]=w.useState(!0),v=w.useCallback(()=>{typeof f=="function"&&f(),x(!1)},[f]),y=w.useCallback(()=>{typeof u=="function"&&u(),x(!0)},[u]);return w.createElement(d3,{begin:i,duration:o,isActive:n,easing:l,onAnimationStart:y,onAnimationEnd:v,key:A},N=>{var E=[],B=a&&a[0],_=B.startAngle;return a.forEach((I,j)=>{var k=m&&m[j],T=j>0?fp(I,"paddingAngle",0):0;if(k){var L=sb(k.endAngle-k.startAngle,I.endAngle-I.startAngle),F=Ds(Ds({},I),{},{startAngle:_+T,endAngle:_+L(N)+T});E.push(F),_=F.endAngle}else{var{endAngle:S,startAngle:M}=I,H=sb(0,S-M),K=H(N),Q=Ds(Ds({},I),{},{startAngle:_+T,endAngle:_+K+T});E.push(Q),_=Q.endAngle}}),r.current=E,w.createElement(_n,null,w.createElement(Cde,{sectors:E,activeShape:c,inactiveShape:d,allOtherPieProps:t,showLabels:!g}))})}function VKe(e){var{sectors:t,isAnimationActive:r,activeShape:a,inactiveShape:n}=e,i=w.useRef(null),o=i.current;return r&&t&&t.length&&(!o||o!==t)?w.createElement($Ke,{props:e,previousSectorsRef:i}):w.createElement(Cde,{sectors:t,activeShape:a,inactiveShape:n,allOtherPieProps:e,showLabels:!0})}function GKe(e){var{hide:t,className:r,rootTabIndex:a}=e,n=ia("recharts-pie",r);return t?null:w.createElement(_n,{tabIndex:a,className:n},w.createElement(VKe,e))}var qKe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!_p.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function KKe(e){var{id:t}=e,r=P7(e,SKe),a=w.useMemo(()=>dE(e.children,Lh),[e.children]),n=or(i=>Jqe(i,t,a));return w.createElement(w.Fragment,null,w.createElement(o3,{fn:FKe,args:Ds(Ds({},e),{},{sectors:n})}),w.createElement(GKe,dA({},r,{sectors:n})))}function cy(e){var t=Ic(e,qKe),{id:r}=t,a=P7(t,_Ke),n=mo(a);return w.createElement(c3,{id:r,type:"pie"},i=>w.createElement(w.Fragment,null,w.createElement(Ede,{type:"pie",id:i,data:a.data,dataKey:a.dataKey,hide:a.hide,angleAxisId:0,radiusAxisId:0,name:a.name,nameKey:a.nameKey,tooltipType:a.tooltipType,legendType:a.legendType,fill:a.fill,cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,paddingAngle:a.paddingAngle,minAngle:a.minAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius,cornerRadius:a.cornerRadius,presentationProps:n}),w.createElement(DKe,dA({},a,{id:i})),w.createElement(KKe,dA({},a,{id:i})),a.children))}cy.displayName="Pie";var WKe=xt([$i],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),XKe=xt([WKe,yA,wA],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),R7=()=>or(XKe),YKe=()=>or(z$e);function GW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function qW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GW(Object(r),!0).forEach(function(a){JKe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function JKe(e,t,r){return(t=ZKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZKe(e){var t=eWe(e,"string");return typeof t=="symbol"?t:t+""}function eWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tWe=e=>{var{point:t,childIndex:r,mainColor:a,activeDot:n,dataKey:i}=e;if(n===!1||t.x==null||t.y==null)return null;var o=qW(qW({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Oa(n,!1)),YL(n)),l;return w.isValidElement(n)?l=w.cloneElement(n,o):typeof n=="function"?l=n(o):l=w.createElement(n3,o),w.createElement(_n,{className:"recharts-active-dot"},l)};function JF(e){var{points:t,mainColor:r,activeDot:a,itemDataKey:n}=e,i=or(mp),o=YKe();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return $n(l)?null:tWe({point:l,childIndex:Number(i),mainColor:r,dataKey:n,activeDot:a})}function KW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function OS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KW(Object(r),!0).forEach(function(a){rWe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function rWe(e,t,r){return(t=aWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aWe(e){var t=nWe(e,"string");return typeof t=="symbol"?t:t+""}function nWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jde=(e,t)=>oy(e,"radiusAxis",t),sWe=xt([jde],e=>{if(e!=null)return{scale:e}}),iWe=xt([gE,jde],(e,t)=>{if(!(e==null||t==null))return OS(OS({},e),{},{scale:t})}),oWe=(e,t,r,a)=>ly(e,"radiusAxis",t,a),kde=(e,t,r)=>J1(e,r),Sde=(e,t,r)=>oy(e,"angleAxis",r),lWe=xt([kde,Sde],(e,t)=>{if(!(e==null||t==null))return OS(OS({},e),{},{scale:t})}),cWe=(e,t,r,a)=>ly(e,"angleAxis",r,a),dWe=xt([kde,Sde,Z1],(e,t,r)=>{if(!(r==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:r.cx,cy:r.cy}}),uWe=(e,t,r,a,n)=>n,fWe=xt([ha,iWe,oWe,lWe,cWe],(e,t,r,a,n)=>Hh(e,"radiusAxis")?hx(t,r,!1):hx(a,n,!1)),hWe=xt([C7,uWe],(e,t)=>{if(e.some(r=>r.type==="radar"&&t===r.dataKey))return t}),AWe=xt([sWe,dWe,z4,hWe,fWe],(e,t,r,a,n)=>{var{chartData:i,dataStartIndex:o,dataEndIndex:l}=r;if(!(e==null||t==null||i==null||n==null||a==null)){var c=i.slice(o,l+1);return NWe({radiusAxis:e,angleAxis:t,displayedData:c,dataKey:a,bandSize:n})}}),mWe=["id"];function pWe(e,t){if(e==null)return{};var r,a,n=gWe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function gWe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function WW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function $l(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WW(Object(r),!0).forEach(function(a){L7(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function L7(e,t,r){return(t=xWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xWe(e){var t=vWe(e,"string");return typeof t=="symbol"?t:t+""}function vWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p1(){return p1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},p1.apply(null,arguments)}function M7(e,t){return e&&e!=="none"?e:t}var bWe=e=>{var{dataKey:t,name:r,stroke:a,fill:n,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:M7(a,n),value:kp(r,t),payload:e}]};function yWe(e){var{dataKey:t,stroke:r,strokeWidth:a,fill:n,name:i,hide:o,tooltipType:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:n,nameKey:void 0,dataKey:t,name:kp(i,t),hide:o,type:l,color:M7(r,n),unit:""}}}function wWe(e,t){var r;return w.isValidElement(e)?r=w.cloneElement(e,t):typeof e=="function"?r=e(t):r=w.createElement(n3,p1({},t,{className:ia("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),r}function NWe(e){var{radiusAxis:t,angleAxis:r,displayedData:a,dataKey:n,bandSize:i}=e,{cx:o,cy:l}=r,c=!1,d=[],u=r.type!=="number"?i??0:0;a.forEach((A,m)=>{var g=bn(A,r.dataKey,m),x=bn(A,n),v=r.scale(g)+u,y=Array.isArray(x)?ode(x):x,N=$n(y)?void 0:t.scale(y);Array.isArray(x)&&x.length>=2&&(c=!0),d.push($l($l({},Ja(o,l,N,v)),{},{name:g,value:x,cx:o,cy:l,radius:N,angle:v,payload:A}))});var f=[];return c&&d.forEach(A=>{if(Array.isArray(A.value)){var m=A.value[0],g=$n(m)?void 0:t.scale(m);f.push($l($l({},A),{},{radius:g},Ja(o,l,g,A.angle)))}else f.push(A)}),{points:d,isRange:c,baseLinePoints:f}}function EWe(e){var{points:t,props:r}=e,{dot:a,dataKey:n}=r;if(!a)return null;var{id:i}=r,o=pWe(r,mWe),l=mo(o),c=Oa(a,!0),d=t.map((u,f)=>{var A=$l($l($l({key:"dot-".concat(f),r:3},l),c),{},{dataKey:n,cx:u.x,cy:u.y,index:f,payload:u});return wWe(a,A)});return w.createElement(_n,{className:"recharts-radar-dots"},d)}function _de(e){var{points:t,props:r,showLabels:a}=e;if(t==null)return null;var{shape:n,isRange:i,baseLinePoints:o,connectNulls:l}=r,c=f=>{var{onMouseEnter:A}=r;A&&A(r,f)},d=f=>{var{onMouseLeave:A}=r;A&&A(r,f)},u;return w.isValidElement(n)?u=w.cloneElement(n,$l($l({},r),{},{points:t})):typeof n=="function"?u=n($l($l({},r),{},{points:t})):u=w.createElement(lde,p1({},Oa(r,!0),{onMouseEnter:c,onMouseLeave:d,points:t,baseLinePoints:i?o:null,connectNulls:l})),w.createElement(_n,{className:"recharts-radar-polygon"},u,w.createElement(EWe,{props:r,points:t}),a&&q0.renderCallByParent(r,t))}function CWe(e){var{props:t,previousPointsRef:r}=e,{points:a,isAnimationActive:n,animationBegin:i,animationDuration:o,animationEasing:l,onAnimationEnd:c,onAnimationStart:d}=t,u=r.current,f=l3(t,"recharts-radar-"),[A,m]=w.useState(!0),g=w.useCallback(()=>{typeof c=="function"&&c(),m(!1)},[c]),x=w.useCallback(()=>{typeof d=="function"&&d(),m(!0)},[d]);return w.createElement(d3,{begin:i,duration:o,isActive:n,easing:l,key:"radar-".concat(f),onAnimationEnd:g,onAnimationStart:x},v=>{var y=u&&u.length/a.length,N=v===1?a:a.map((E,B)=>{var _=u&&u[Math.floor(B*y)];if(_){var I=sb(_.x,E.x),j=sb(_.y,E.y);return $l($l({},E),{},{x:I(v),y:j(v)})}var k=sb(E.cx,E.x),T=sb(E.cy,E.y);return $l($l({},E),{},{x:k(v),y:T(v)})});return v>0&&(r.current=N),w.createElement(_de,{points:N,props:t,showLabels:!A})})}function jWe(e){var{points:t,isAnimationActive:r,isRange:a}=e,n=w.useRef(void 0),i=n.current;return r&&t&&t.length&&!a&&(!i||i!==t)?w.createElement(CWe,{props:e,previousPointsRef:n}):w.createElement(_de,{points:t,props:e,showLabels:!0})}var kWe={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!_p.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class SWe extends w.PureComponent{render(){var{hide:t,className:r,points:a}=this.props;if(t)return null;var n=ia("recharts-radar",r);return w.createElement(w.Fragment,null,w.createElement(_n,{className:n},w.createElement(jWe,this.props)),w.createElement(JF,{points:a,mainColor:M7(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function _We(e){var t=Bl(),r=or(a=>AWe(a,e.radiusAxisId,e.angleAxisId,t,e.dataKey));return w.createElement(SWe,p1({},e,{points:r==null?void 0:r.points,baseLinePoints:r==null?void 0:r.baseLinePoints,isRange:r==null?void 0:r.isRange}))}class u3 extends w.PureComponent{render(){return w.createElement(c3,{id:this.props.id,type:"radar"},t=>w.createElement(w.Fragment,null,w.createElement(Ede,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),w.createElement(yde,{legendPayload:bWe(this.props)}),w.createElement(o3,{fn:yWe,args:this.props}),w.createElement(_We,p1({},this.props,{id:t}))))}}L7(u3,"displayName","Radar");L7(u3,"defaultProps",kWe);var TWe="Invariant failed";function BWe(e,t){throw new Error(TWe)}var IWe=["x","y"];function ZF(){return ZF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ZF.apply(null,arguments)}function XW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function dw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XW(Object(r),!0).forEach(function(a){OWe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function OWe(e,t,r){return(t=DWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DWe(e){var t=FWe(e,"string");return typeof t=="symbol"?t:t+""}function FWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PWe(e,t){if(e==null)return{};var r,a,n=RWe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function RWe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function LWe(e,t){var{x:r,y:a}=e,n=PWe(e,IWe),i="".concat(r),o=parseInt(i,10),l="".concat(a),c=parseInt(l,10),d="".concat(t.height||n.height),u=parseInt(d,10),f="".concat(t.width||n.width),A=parseInt(f,10);return dw(dw(dw(dw(dw({},t),n),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:A,name:t.name,radius:t.radius})}function Tde(e){return w.createElement(xde,ZF({shapeType:"rectangle",propTransformer:LWe,activeClassName:"recharts-active-bar"},e))}var MWe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,n)=>{if(sr(t))return t;var i=sr(a)||$n(a);return i?t(a,n):(i||BWe(),r)}},UWe={},Bde=Nd({name:"errorBars",initialState:UWe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:a}=t.payload;e[r]||(e[r]=[]),e[r].push(a)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:a}=t.payload;e[r]&&(e[r]=e[r].filter(n=>n.dataKey!==a.dataKey||n.direction!==a.direction))}}}),{addErrorBar:A1t,removeErrorBar:m1t}=Bde.actions,HWe=Bde.reducer,QWe=["children"];function zWe(e,t){if(e==null)return{};var r,a,n=$We(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $We(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var VWe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},GWe=w.createContext(VWe);function qWe(e){var{children:t}=e,r=zWe(e,QWe);return w.createElement(GWe.Provider,{value:r},t)}function U7(e,t){var r,a,n=or(d=>EA(d,e)),i=or(d=>Op(d,t)),o=(r=n==null?void 0:n.allowDataOverflow)!==null&&r!==void 0?r:td.allowDataOverflow,l=(a=i==null?void 0:i.allowDataOverflow)!==null&&a!==void 0?a:rd.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function Ide(e){var{xAxisId:t,yAxisId:r,clipPathId:a}=e,n=R7(),{needClipX:i,needClipY:o,needClip:l}=U7(t,r);if(!l)return null;var{x:c,y:d,width:u,height:f}=n;return w.createElement("clipPath",{id:"clipPath-".concat(a)},w.createElement("rect",{x:i?c:c-u/2,y:o?d:d-f/2,width:i?u:u*2,height:o?f:f*2}))}var KWe=["onMouseEnter","onMouseLeave","onClick"],WWe=["value","background","tooltipPosition"],XWe=["id"],YWe=["onMouseEnter","onClick","onMouseLeave"];function g1(){return g1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},g1.apply(null,arguments)}function YW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Al(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YW(Object(r),!0).forEach(function(a){JWe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function JWe(e,t,r){return(t=ZWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZWe(e){var t=eXe(e,"string");return typeof t=="symbol"?t:t+""}function eXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DS(e,t){if(e==null)return{};var r,a,n=tXe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function tXe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var rXe=e=>{var{dataKey:t,name:r,fill:a,legendType:n,hide:i}=e;return[{inactive:i,dataKey:t,type:n,color:a,value:kp(r,t),payload:e}]};function aXe(e){var{dataKey:t,stroke:r,strokeWidth:a,fill:n,name:i,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:n,dataKey:t,nameKey:void 0,name:kp(i,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function nXe(e){var t=or(mp),{data:r,dataKey:a,background:n,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,d=DS(i,KWe),u=O7(o,a),f=D7(l),A=F7(c,a);if(!n||r==null)return null;var m=Oa(n,!1);return w.createElement(w.Fragment,null,r.map((g,x)=>{var{value:v,background:y,tooltipPosition:N}=g,E=DS(g,WWe);if(!y)return null;var B=u(g,x),_=f(g,x),I=A(g,x),j=Al(Al(Al(Al(Al({option:n,isActive:String(x)===t},E),{},{fill:"#eee"},y),m),Dx(d,g,x)),{},{onMouseEnter:B,onMouseLeave:_,onClick:I,dataKey:a,index:x,className:"recharts-bar-background-rectangle"});return w.createElement(Tde,g1({key:"background-bar-".concat(x)},j))}))}function Ode(e){var{data:t,props:r,showLabels:a}=e,n=mo(r),{id:i}=n,o=DS(n,XWe),{shape:l,dataKey:c,activeBar:d}=r,u=or(mp),f=or($ce),{onMouseEnter:A,onClick:m,onMouseLeave:g}=r,x=DS(r,YWe),v=O7(A,c),y=D7(g),N=F7(m,c);return t?w.createElement(w.Fragment,null,t.map((E,B)=>{var _=d&&String(B)===u&&(f==null||c===f),I=_?d:l,j=Al(Al(Al({},o),E),{},{isActive:_,option:I,index:B,dataKey:c});return w.createElement(_n,g1({className:"recharts-bar-rectangle"},Dx(x,E,B),{onMouseEnter:v(E,B),onMouseLeave:y(E,B),onClick:N(E,B),key:"rectangle-".concat(E==null?void 0:E.x,"-").concat(E==null?void 0:E.y,"-").concat(E==null?void 0:E.value,"-").concat(B)}),w.createElement(Tde,j))}),a&&q0.renderCallByParent(r,t)):null}function sXe(e){var{props:t,previousRectanglesRef:r}=e,{data:a,layout:n,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:d,onAnimationStart:u}=t,f=r.current,A=l3(t,"recharts-bar-"),[m,g]=w.useState(!1),x=w.useCallback(()=>{typeof d=="function"&&d(),g(!1)},[d]),v=w.useCallback(()=>{typeof u=="function"&&u(),g(!0)},[u]);return w.createElement(d3,{begin:o,duration:l,isActive:i,easing:c,onAnimationEnd:x,onAnimationStart:v,key:A},y=>{var N=y===1?a:a==null?void 0:a.map((E,B)=>{var _=f&&f[B];if(_)return Al(Al({},E),{},{x:su(_.x,E.x,y),y:su(_.y,E.y,y),width:su(_.width,E.width,y),height:su(_.height,E.height,y)});if(n==="horizontal"){var I=su(0,E.height,y);return Al(Al({},E),{},{y:E.y+E.height-I,height:I})}var j=su(0,E.width,y);return Al(Al({},E),{},{width:j})});return y>0&&(r.current=N??null),N==null?null:w.createElement(_n,null,w.createElement(Ode,{props:t,data:N,showLabels:!m}))})}function iXe(e){var{data:t,isAnimationActive:r}=e,a=w.useRef(null);return r&&t&&t.length&&(a.current==null||a.current!==t)?w.createElement(sXe,{previousRectanglesRef:a,props:e}):w.createElement(Ode,{props:e,data:t,showLabels:!0})}var Dde=0,oXe=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:bn(e,t)}};class lXe extends w.PureComponent{render(){var{hide:t,data:r,dataKey:a,className:n,xAxisId:i,yAxisId:o,needClip:l,background:c,id:d}=this.props;if(t)return null;var u=ia("recharts-bar",n),f=d;return w.createElement(_n,{className:u,id:d},l&&w.createElement("defs",null,w.createElement(Ide,{clipPathId:f,xAxisId:i,yAxisId:o})),w.createElement(_n,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},w.createElement(nXe,{data:r,dataKey:a,background:c,allOtherBarProps:this.props}),w.createElement(iXe,this.props)),this.props.children)}}var cXe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!_p.isSsr,legendType:"rect",minPointSize:Dde,xAxisId:0,yAxisId:0};function dXe(e){var{xAxisId:t,yAxisId:r,hide:a,legendType:n,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u}=e,{needClip:f}=U7(t,r),A=F4(),m=Bl(),g=dE(e.children,Lh),x=or(N=>RXe(N,t,r,m,e.id,g));if(A!=="vertical"&&A!=="horizontal")return null;var v,y=x==null?void 0:x[0];return y==null||y.height==null||y.width==null?v=0:v=A==="vertical"?y.height/2:y.width/2,w.createElement(qWe,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:oXe,errorBarOffset:v},w.createElement(lXe,g1({},e,{layout:A,needClip:f,data:x,xAxisId:t,yAxisId:r,hide:a,legendType:n,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u})))}function uXe(e){var{layout:t,barSettings:{dataKey:r,minPointSize:a},pos:n,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:d,stackedData:u,displayedData:f,offset:A,cells:m}=e,g=t==="horizontal"?l:o,x=u?g.scale.domain():null,v=u7e({numericAxis:g});return f.map((y,N)=>{var E,B,_,I,j,k;u?E=i7e(u[N],x):(E=bn(y,r),Array.isArray(E)||(E=[v,E]));var T=MWe(a,Dde)(E[1],N);if(t==="horizontal"){var L,[F,S]=[l.scale(E[0]),l.scale(E[1])];B=bq({axis:o,ticks:c,bandSize:i,offset:n.offset,entry:y,index:N}),_=(L=S??F)!==null&&L!==void 0?L:void 0,I=n.size;var M=F-S;if(j=Tc(M)?0:M,k={x:B,y:A.top,width:I,height:A.height},Math.abs(T)>0&&Math.abs(j)<Math.abs(T)){var H=fo(j||T)*(Math.abs(T)-Math.abs(j));_-=H,j+=H}}else{var[K,Q]=[o.scale(E[0]),o.scale(E[1])];if(B=K,_=bq({axis:l,ticks:d,bandSize:i,offset:n.offset,entry:y,index:N}),I=Q-K,j=n.size,k={x:A.left,y:_,width:A.width,height:j},Math.abs(T)>0&&Math.abs(I)<Math.abs(T)){var G=fo(I||T)*(Math.abs(T)-Math.abs(I));I+=G}}if(B==null||_==null||I==null||j==null)return null;var X=Al(Al({},y),{},{x:B,y:_,width:I,height:j,value:u?E:E[1],payload:y,background:k,tooltipPosition:{x:B+I/2,y:_+j/2}},m&&m[N]&&m[N].props);return X}).filter(Boolean)}function Ec(e){var t=Ic(e,cXe),r=Bl();return w.createElement(c3,{id:t.id,type:"bar"},a=>w.createElement(w.Fragment,null,w.createElement(bde,{legendPayload:rXe(t)}),w.createElement(o3,{fn:aXe,args:t}),w.createElement(Nde,{type:"bar",id:a,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:koe(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),w.createElement(dXe,g1({},t,{id:a}))))}Ec.displayName="Bar";function JW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function jj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JW(Object(r),!0).forEach(function(a){fXe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fXe(e,t,r){return(t=hXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hXe(e){var t=AXe(e,"string");return typeof t=="symbol"?t:t+""}function AXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mXe=(e,t)=>t,pXe=(e,t,r)=>r,gXe=(e,t,r,a)=>a,xXe=(e,t,r,a,n)=>n,jE=xt([X4,xXe],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),vXe=xt([jE],e=>e==null?void 0:e.maxBarSize),bXe=(e,t,r,a,n,i)=>i,ZW=(e,t,r)=>{var a=r??e;if(!$n(a))return ql(a,t,0)},yXe=xt([ha,X4,mXe,pXe,gXe],(e,t,r,a,n)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===a).filter(i=>i.isPanorama===n).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),wXe=(e,t,r,a)=>{var n=ha(e);return n==="horizontal"?jN(e,"yAxis",r,a):jN(e,"xAxis",t,a)},NXe=(e,t,r)=>{var a=ha(e);return a==="horizontal"?HK(e,"xAxis",t):HK(e,"yAxis",r)},EXe=(e,t,r)=>{var a={},n=e.filter(W4),i=e.filter(d=>d.stackId==null),o=n.reduce((d,u)=>(d[u.stackId]||(d[u.stackId]=[]),d[u.stackId].push(u),d),a),l=Object.entries(o).map(d=>{var[u,f]=d,A=f.map(g=>g.dataKey),m=ZW(t,r,f[0].barSize);return{stackId:u,dataKeys:A,barSize:m}}),c=i.map(d=>{var u=[d.dataKey].filter(A=>A!=null),f=ZW(t,r,d.barSize);return{stackId:void 0,dataKeys:u,barSize:f}});return[...l,...c]},CXe=xt([yXe,eze,NXe],EXe),jXe=(e,t,r,a,n)=>{var i,o,l=jE(e,t,r,a,n);if(l!=null){var c=ha(e),d=Vle(e),{maxBarSize:u}=l,f=$n(u)?d:u,A,m;return c==="horizontal"?(A=Ap(e,"xAxis",t,a),m=hp(e,"xAxis",t,a)):(A=Ap(e,"yAxis",r,a),m=hp(e,"yAxis",r,a)),(i=(o=hx(A,m,!0))!==null&&o!==void 0?o:f)!==null&&i!==void 0?i:0}},Fde=(e,t,r,a)=>{var n=ha(e),i,o;return n==="horizontal"?(i=Ap(e,"xAxis",t,a),o=hp(e,"xAxis",t,a)):(i=Ap(e,"yAxis",r,a),o=hp(e,"yAxis",r,a)),hx(i,o)};function kXe(e,t,r,a,n){var i=a.length;if(!(i<1)){var o=ql(e,r,0,!0),l,c=[];if(Mo(a[0].barSize)){var d=!1,u=r/i,f=a.reduce((y,N)=>y+(N.barSize||0),0);f+=(i-1)*o,f>=r&&(f-=(i-1)*o,o=0),f>=r&&u>0&&(d=!0,u*=.9,f=i*u);var A=(r-f)/2>>0,m={offset:A-o,size:0};l=a.reduce((y,N)=>{var E,B={stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:m.offset+m.size+o,size:d?u:(E=N.barSize)!==null&&E!==void 0?E:0}},_=[...y,B];return m=_[_.length-1].position,_},c)}else{var g=ql(t,r,0,!0);r-2*g-(i-1)*o<=0&&(o=0);var x=(r-2*g-(i-1)*o)/i;x>1&&(x>>=0);var v=Mo(n)?Math.min(x,n):x;l=a.reduce((y,N,E)=>[...y,{stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:g+(x+o)*E+(x-v)/2,size:v}}],c)}return l}}var SXe=(e,t,r,a,n,i,o)=>{var l=$n(o)?t:o,c=kXe(r,a,n!==i?n:i,e,l);return n!==i&&c!=null&&(c=c.map(d=>jj(jj({},d),{},{position:jj(jj({},d.position),{},{offset:d.position.offset-n/2})}))),c},_Xe=xt([CXe,Vle,ZQe,Gle,jXe,Fde,vXe],SXe),TXe=(e,t,r,a)=>Ap(e,"xAxis",t,a),BXe=(e,t,r,a)=>Ap(e,"yAxis",r,a),IXe=(e,t,r,a)=>hp(e,"xAxis",t,a),OXe=(e,t,r,a)=>hp(e,"yAxis",r,a),DXe=xt([_Xe,jE],(e,t)=>{if(!(e==null||t==null)){var r=e.find(a=>a.stackId===t.stackId&&t.dataKey!=null&&a.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),FXe=(e,t)=>{var r=K4(t);if(!(!e||r==null||t==null)){var{stackId:a}=t;if(a!=null){var n=e[a];if(n){var{stackedData:i}=n;if(i)return i.find(o=>o.key===r)}}}},PXe=xt([wXe,jE],FXe),RXe=xt([$i,TXe,BXe,IXe,OXe,DXe,ha,$4,Fde,PXe,jE,bXe],(e,t,r,a,n,i,o,l,c,d,u,f)=>{var{chartData:A,dataStartIndex:m,dataEndIndex:g}=l;if(!(u==null||i==null||o!=="horizontal"&&o!=="vertical"||t==null||r==null||a==null||n==null||c==null)){var{data:x}=u,v;if(x!=null&&x.length>0?v=x:v=A==null?void 0:A.slice(m,g+1),v!=null)return uXe({layout:o,barSettings:u,pos:i,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:n,stackedData:d,displayedData:v,offset:e,cells:f})}}),Pde=e=>{var{chartData:t}=e,r=Jn(),a=Bl();return w.useEffect(()=>a?()=>{}:(r(YK(t)),()=>{r(YK(void 0))}),[t,r,a]),null},eX={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Rde=Nd({name:"brush",initialState:eX,reducers:{setBrushSettings(e,t){return t.payload==null?eX:t.payload}}}),{setBrushSettings:p1t}=Rde.actions,LXe=Rde.reducer;function MXe(e,t,r){return(t=UXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UXe(e){var t=HXe(e,"string");return typeof t=="symbol"?t:t+""}function HXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class H7{static create(t){return new H7(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+n}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),a=r[0],n=r[r.length-1];return a<=n?t>=a&&t<=n:t>=n&&t<=a}}MXe(H7,"EPS",1e-4);function QXe(e){return(e%180+180)%180}var zXe=function(t){var{width:r,height:a}=t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=QXe(n),o=i*Math.PI/180,l=Math.atan(a/r),c=o>l&&o<Math.PI-l?a/Math.sin(o):r/Math.cos(o);return Math.abs(c)},$Xe={dots:[],areas:[],lines:[]},Lde=Nd({name:"referenceElements",initialState:$Xe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=V0(e).dots.findIndex(a=>a===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=V0(e).areas.findIndex(a=>a===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=V0(e).lines.findIndex(a=>a===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:g1t,removeDot:x1t,addArea:v1t,removeArea:b1t,addLine:y1t,removeLine:w1t}=Lde.actions,VXe=Lde.reducer,GXe=w.createContext(void 0),qXe=e=>{var{children:t}=e,[r]=w.useState("".concat(xN("recharts"),"-clip")),a=R7();if(a==null)return null;var{x:n,y:i,width:o,height:l}=a;return w.createElement(GXe.Provider,{value:r},w.createElement("defs",null,w.createElement("clipPath",{id:r},w.createElement("rect",{x:n,y:i,height:l,width:o}))),t)};function U6(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function Mde(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],n=0;n<e.length;n+=t)a.push(e[n]);return a}function KXe(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return zXe(a,r)}function WXe(e,t,r){var a=r==="width",{x:n,y:i,width:o,height:l}=e;return t===1?{start:a?n:i,end:a?n+o:i+l}:{start:a?n+o:i+l,end:a?n:i}}function FS(e,t,r,a,n){if(e*t<e*a||e*t>e*n)return!1;var i=r();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-n)<=0}function XXe(e,t){return Mde(e,t+1)}function YXe(e,t,r,a,n){for(var i=(a||[]).slice(),{start:o,end:l}=t,c=0,d=1,u=o,f=function(){var g=a==null?void 0:a[c];if(g===void 0)return{v:Mde(a,d)};var x=c,v,y=()=>(v===void 0&&(v=r(g,x)),v),N=g.coordinate,E=c===0||FS(e,N,y,u,l);E||(c=0,u=o,d+=1),E&&(u=N+e*(y()/2+n),c+=d)},A;d<=i.length;)if(A=f(),A)return A.v;return[]}function tX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function il(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tX(Object(r),!0).forEach(function(a){JXe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tX(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function JXe(e,t,r){return(t=ZXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZXe(e){var t=eYe(e,"string");return typeof t=="symbol"?t:t+""}function eYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tYe(e,t,r,a,n){for(var i=(a||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,d=function(A){var m=i[A],g,x=()=>(g===void 0&&(g=r(m,A)),g);if(A===o-1){var v=e*(m.coordinate+e*x()/2-c);i[A]=m=il(il({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else i[A]=m=il(il({},m),{},{tickCoord:m.coordinate});var y=FS(e,m.tickCoord,x,l,c);y&&(c=m.tickCoord-e*(x()/2+n),i[A]=il(il({},m),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return i}function rYe(e,t,r,a,n,i){var o=(a||[]).slice(),l=o.length,{start:c,end:d}=t;if(i){var u=a[l-1],f=r(u,l-1),A=e*(u.coordinate+e*f/2-d);o[l-1]=u=il(il({},u),{},{tickCoord:A>0?u.coordinate-A*e:u.coordinate});var m=FS(e,u.tickCoord,()=>f,c,d);m&&(d=u.tickCoord-e*(f/2+n),o[l-1]=il(il({},u),{},{isShow:!0}))}for(var g=i?l-1:l,x=function(N){var E=o[N],B,_=()=>(B===void 0&&(B=r(E,N)),B);if(N===0){var I=e*(E.coordinate-e*_()/2-c);o[N]=E=il(il({},E),{},{tickCoord:I<0?E.coordinate-I*e:E.coordinate})}else o[N]=E=il(il({},E),{},{tickCoord:E.coordinate});var j=FS(e,E.tickCoord,_,c,d);j&&(c=E.tickCoord+e*(_()/2+n),o[N]=il(il({},E),{},{isShow:!0}))},v=0;v<g;v++)x(v);return o}function Q7(e,t,r){var{tick:a,ticks:n,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:d,unit:u,angle:f}=e;if(!n||!n.length||!a)return[];if(sr(c)||_p.isSsr){var A;return(A=XXe(n,sr(c)?c:0))!==null&&A!==void 0?A:[]}var m=[],g=l==="top"||l==="bottom"?"width":"height",x=u&&g==="width"?C2(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(E,B)=>{var _=typeof d=="function"?d(E.value,B):E.value;return g==="width"?KXe(C2(_,{fontSize:t,letterSpacing:r}),x,f):C2(_,{fontSize:t,letterSpacing:r})[g]},y=n.length>=2?fo(n[1].coordinate-n[0].coordinate):1,N=WXe(i,y,g);return c==="equidistantPreserveStart"?YXe(y,N,v,n,o):(c==="preserveStart"||c==="preserveStartEnd"?m=rYe(y,N,v,n,o,c==="preserveStartEnd"):m=tYe(y,N,v,n,o),m.filter(E=>E.isShow))}var aYe=["viewBox"],nYe=["viewBox"];function lb(){return lb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},lb.apply(null,arguments)}function rX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Ri(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rX(Object(r),!0).forEach(function(a){z7(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rX(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function aX(e,t){if(e==null)return{};var r,a,n=sYe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function sYe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function z7(e,t,r){return(t=iYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iYe(e){var t=oYe(e,"string");return typeof t=="symbol"?t:t+""}function oYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Fp extends w.Component{constructor(t){super(t),this.tickRefs=w.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:a}=t,n=aX(t,aYe),i=this.props,{viewBox:o}=i,l=aX(i,nYe);return!U6(a,o)||!U6(n,l)||!U6(r,this.state)}getTickLineCoord(t){var{x:r,y:a,width:n,height:i,orientation:o,tickSize:l,mirror:c,tickMargin:d}=this.props,u,f,A,m,g,x,v=c?-1:1,y=t.tickSize||l,N=sr(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":u=f=t.coordinate,m=a+ +!c*i,A=m-v*y,x=A-v*d,g=N;break;case"left":A=m=t.coordinate,f=r+ +!c*n,u=f-v*y,g=u-v*d,x=N;break;case"right":A=m=t.coordinate,f=r+ +c*n,u=f+v*y,g=u+v*d,x=N;break;default:u=f=t.coordinate,m=a+ +c*i,A=m+v*y,x=A+v*d,g=N;break}return{line:{x1:u,y1:A,x2:f,y2:m},tick:{x:g,y:x}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,a;switch(t){case"left":a=r?"start":"end";break;case"right":a=r?"end":"start";break;default:a="middle";break}return a}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:a,height:n,orientation:i,mirror:o,axisLine:l}=this.props,c=Ri(Ri(Ri({},Oa(this.props,!1)),Oa(l,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var d=+(i==="top"&&!o||i==="bottom"&&o);c=Ri(Ri({},c),{},{x1:t,y1:r+d*n,x2:t+a,y2:r+d*n})}else{var u=+(i==="left"&&!o||i==="right"&&o);c=Ri(Ri({},c),{},{x1:t+u*a,y1:r,x2:t+u*a,y2:r+n})}return w.createElement("line",lb({},c,{className:ia("recharts-cartesian-axis-line",fp(l,"className"))}))}static renderTickItem(t,r,a){var n,i=ia(r.className,"recharts-cartesian-axis-tick-value");if(w.isValidElement(t))n=w.cloneElement(t,Ri(Ri({},r),{},{className:i}));else if(typeof t=="function")n=t(Ri(Ri({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=ia(o,t.className)),n=w.createElement(iy,lb({},r,{className:o}),a)}return n}renderTicks(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:n,stroke:i,tick:o,tickFormatter:l,unit:c,padding:d}=this.props,u=Q7(Ri(Ri({},this.props),{},{ticks:a}),t,r),f=this.getTickTextAnchor(),A=this.getTickVerticalAnchor(),m=mo(this.props),g=Oa(o,!1),x=Ri(Ri({},m),{},{fill:"none"},Oa(n,!1)),v=u.map((y,N)=>{var{line:E,tick:B}=this.getTickLineCoord(y),_=Ri(Ri(Ri(Ri({textAnchor:f,verticalAnchor:A},m),{},{stroke:"none",fill:i},g),B),{},{index:N,payload:y,visibleTicksCount:u.length,tickFormatter:l,padding:d});return w.createElement(_n,lb({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},Dx(this.props,y,N)),n&&w.createElement("line",lb({},x,E,{className:ia("recharts-cartesian-axis-tick-line",fp(n,"className"))})),o&&Fp.renderTickItem(o,_,"".concat(typeof l=="function"?l(y.value,N):y.value).concat(c||"")))});return v.length>0?w.createElement("g",{className:"recharts-cartesian-axis-ticks"},v):null}render(){var{axisLine:t,width:r,height:a,className:n,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||a!=null&&a<=0?null:w.createElement(_n,{className:ia("recharts-cartesian-axis",n),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var d=c[0];if(d){var u=window.getComputedStyle(d).fontSize,f=window.getComputedStyle(d).letterSpacing;(u!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(d).fontSize,letterSpacing:window.getComputedStyle(d).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),xc.renderCallByParent(this.props))}}z7(Fp,"displayName","CartesianAxis");z7(Fp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var lYe=["x1","y1","x2","y2","key"],cYe=["offset"],dYe=["xAxisId","yAxisId"],uYe=["xAxisId","yAxisId"];function nX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function ml(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nX(Object(r),!0).forEach(function(a){fYe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nX(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fYe(e,t,r){return(t=hYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hYe(e){var t=AYe(e,"string");return typeof t=="symbol"?t:t+""}function AYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _g(){return _g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},_g.apply(null,arguments)}function PS(e,t){if(e==null)return{};var r,a,n=mYe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function mYe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var pYe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:a,y:n,width:i,height:o,ry:l}=e;return w.createElement("rect",{x:a,y:n,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Ude(e,t){var r;if(w.isValidElement(e))r=w.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:a,y1:n,x2:i,y2:o,key:l}=t,c=PS(t,lYe),d=mo(c),{offset:u}=d,f=PS(d,cYe);r=w.createElement("line",_g({},f,{x1:a,y1:n,x2:i,y2:o,fill:"none",key:l}))}return r}function gYe(e){var{x:t,width:r,horizontal:a=!0,horizontalPoints:n}=e;if(!a||!n||!n.length)return null;var{xAxisId:i,yAxisId:o}=e,l=PS(e,dYe),c=n.map((d,u)=>{var f=ml(ml({},l),{},{x1:t,y1:d,x2:t+r,y2:d,key:"line-".concat(u),index:u});return Ude(a,f)});return w.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function xYe(e){var{y:t,height:r,vertical:a=!0,verticalPoints:n}=e;if(!a||!n||!n.length)return null;var{xAxisId:i,yAxisId:o}=e,l=PS(e,uYe),c=n.map((d,u)=>{var f=ml(ml({},l),{},{x1:d,y1:t,x2:d,y2:t+r,key:"line-".concat(u),index:u});return Ude(a,f)});return w.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function vYe(e){var{horizontalFill:t,fillOpacity:r,x:a,y:n,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var d=l.map(f=>Math.round(f+n-n)).sort((f,A)=>f-A);n!==d[0]&&d.unshift(0);var u=d.map((f,A)=>{var m=!d[A+1],g=m?n+o-f:d[A+1]-f;if(g<=0)return null;var x=A%t.length;return w.createElement("rect",{key:"react-".concat(A),y:f,x:a,height:g,width:i,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function bYe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:a,x:n,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var d=c.map(f=>Math.round(f+n-n)).sort((f,A)=>f-A);n!==d[0]&&d.unshift(0);var u=d.map((f,A)=>{var m=!d[A+1],g=m?n+o-f:d[A+1]-f;if(g<=0)return null;var x=A%r.length;return w.createElement("rect",{key:"react-".concat(A),x:f,y:i,width:g,height:l,stroke:"none",fill:r[x],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var yYe=(e,t)=>{var{xAxis:r,width:a,height:n,offset:i}=e;return Coe(Q7(ml(ml(ml({},Fp.defaultProps),r),{},{ticks:joe(r),viewBox:{x:0,y:0,width:a,height:n}})),i.left,i.left+i.width,t)},wYe=(e,t)=>{var{yAxis:r,width:a,height:n,offset:i}=e;return Coe(Q7(ml(ml(ml({},Fp.defaultProps),r),{},{ticks:joe(r),viewBox:{x:0,y:0,width:a,height:n}})),i.top,i.top+i.height,t)},NYe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function uu(e){var t=yM(),r=wM(),a=Ioe(),n=ml(ml({},Ic(e,NYe)),{},{x:sr(e.x)?e.x:a.left,y:sr(e.y)?e.y:a.top,width:sr(e.width)?e.width:a.width,height:sr(e.height)?e.height:a.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:d,height:u,syncWithTicks:f,horizontalValues:A,verticalValues:m}=n,g=Bl(),x=or(T=>QK(T,"xAxis",i,g)),v=or(T=>QK(T,"yAxis",o,g));if(!sr(d)||d<=0||!sr(u)||u<=0||!sr(l)||l!==+l||!sr(c)||c!==+c)return null;var y=n.verticalCoordinatesGenerator||yYe,N=n.horizontalCoordinatesGenerator||wYe,{horizontalPoints:E,verticalPoints:B}=n;if((!E||!E.length)&&typeof N=="function"){var _=A&&A.length,I=N({yAxis:v?ml(ml({},v),{},{ticks:_?A:v.ticks}):void 0,width:t,height:r,offset:a},_?!0:f);E2(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(E=I)}if((!B||!B.length)&&typeof y=="function"){var j=m&&m.length,k=y({xAxis:x?ml(ml({},x),{},{ticks:j?m:x.ticks}):void 0,width:t,height:r,offset:a},j?!0:f);E2(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(B=k)}return w.createElement("g",{className:"recharts-cartesian-grid"},w.createElement(pYe,{fill:n.fill,fillOpacity:n.fillOpacity,x:n.x,y:n.y,width:n.width,height:n.height,ry:n.ry}),w.createElement(vYe,_g({},n,{horizontalPoints:E})),w.createElement(bYe,_g({},n,{verticalPoints:B})),w.createElement(gYe,_g({},n,{offset:a,horizontalPoints:E,xAxis:x,yAxis:v})),w.createElement(xYe,_g({},n,{offset:a,verticalPoints:B,xAxis:x,yAxis:v})))}uu.displayName="CartesianGrid";var Hde=(e,t,r,a)=>Ap(e,"xAxis",t,a),Qde=(e,t,r,a)=>hp(e,"xAxis",t,a),zde=(e,t,r,a)=>Ap(e,"yAxis",r,a),$de=(e,t,r,a)=>hp(e,"yAxis",r,a),EYe=xt([ha,Hde,zde,Qde,$de],(e,t,r,a,n)=>Hh(e,"xAxis")?hx(t,a,!1):hx(r,n,!1)),CYe=(e,t,r,a,n)=>n,Vde=xt([X4,CYe],(e,t)=>e.filter(r=>r.type==="area").find(r=>r.id===t)),jYe=(e,t,r,a,n)=>{var i,o=Vde(e,t,r,a,n);if(o!=null){var l=ha(e),c=Hh(l,"xAxis"),d;if(c?d=jN(e,"yAxis",r,a):d=jN(e,"xAxis",t,a),d!=null){var{stackId:u}=o,f=K4(o);if(!(u==null||f==null)){var A=(i=d[u])===null||i===void 0?void 0:i.stackedData;return A==null?void 0:A.find(m=>m.key===f)}}}},kYe=xt([ha,Hde,zde,Qde,$de,jYe,$4,EYe,Vde],(e,t,r,a,n,i,o,l,c)=>{var{chartData:d,dataStartIndex:u,dataEndIndex:f}=o;if(!(c==null||e!=="horizontal"&&e!=="vertical"||t==null||r==null||a==null||n==null||a.length===0||n.length===0||l==null)){var{data:A}=c,m;if(A&&A.length>0?m=A:m=d==null?void 0:d.slice(u,f+1),m!=null){var g=void 0;return qYe({layout:e,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:n,dataStartIndex:u,areaSettings:c,stackedData:i,displayedData:m,chartBaseValue:g,bandSize:l})}}}),SYe=["id"],_Ye=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Gde(e,t){if(e==null)return{};var r,a,n=TYe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function TYe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function sX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Tg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sX(Object(r),!0).forEach(function(a){BYe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sX(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function BYe(e,t,r){return(t=IYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IYe(e){var t=OYe(e,"string");return typeof t=="symbol"?t:t+""}function OYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K0(){return K0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},K0.apply(null,arguments)}function RS(e,t){return e&&e!=="none"?e:t}var DYe=e=>{var{dataKey:t,name:r,stroke:a,fill:n,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:RS(a,n),value:kp(r,t),payload:e}]};function FYe(e){var{dataKey:t,data:r,stroke:a,strokeWidth:n,fill:i,name:o,hide:l,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:a,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:kp(o,t),hide:l,type:e.tooltipType,color:RS(a,i),unit:c}}}var PYe=(e,t)=>{var r;if(w.isValidElement(e))r=w.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var a=ia("recharts-area-dot",typeof e!="boolean"?e.className:"");r=w.createElement(n3,K0({},t,{className:a}))}return r};function RYe(e,t){return e==null?!1:t?!0:e.length===1}function LYe(e){var{clipPathId:t,points:r,props:a}=e,{needClip:n,dot:i,dataKey:o}=a;if(!RYe(r,i))return null;var l=yie(i),c=mo(a),d=Oa(i,!0),u=r.map((A,m)=>{var g=Tg(Tg(Tg({key:"dot-".concat(m),r:3},c),d),{},{index:m,cx:A.x,cy:A.y,dataKey:o,value:A.value,payload:A.payload,points:r});return PYe(i,g)}),f={clipPath:n?"url(#clipPath-".concat(l?"":"dots-").concat(t,")"):void 0};return w.createElement(_n,K0({className:"recharts-area-dots"},f),u)}function eP(e){var{points:t,baseLine:r,needClip:a,clipPathId:n,props:i,showLabels:o}=e,{layout:l,type:c,stroke:d,connectNulls:u,isRange:f}=i,{id:A}=i,m=Gde(i,SYe),g=mo(m);return w.createElement(w.Fragment,null,(t==null?void 0:t.length)>1&&w.createElement(_n,{clipPath:a?"url(#clipPath-".concat(n,")"):void 0},w.createElement(N2,K0({},g,{id:A,points:t,connectNulls:u,type:c,baseLine:r,layout:l,stroke:"none",className:"recharts-area-area"})),d!=="none"&&w.createElement(N2,K0({},g,{className:"recharts-area-curve",layout:l,type:c,connectNulls:u,fill:"none",points:t})),d!=="none"&&f&&w.createElement(N2,K0({},g,{className:"recharts-area-curve",layout:l,type:c,connectNulls:u,fill:"none",points:r}))),w.createElement(LYe,{points:t,props:m,clipPathId:n}),o&&q0.renderCallByParent(m,t))}function MYe(e){var{alpha:t,baseLine:r,points:a,strokeWidth:n}=e,i=a[0].y,o=a[a.length-1].y;if(!Mo(i)||!Mo(o))return null;var l=t*Math.abs(i-o),c=Math.max(...a.map(d=>d.x||0));return sr(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(d=>d.x||0),c)),sr(c)?w.createElement("rect",{x:0,y:i<o?i:i-l,width:c+(n?parseInt("".concat(n),10):1),height:Math.floor(l)}):null}function UYe(e){var{alpha:t,baseLine:r,points:a,strokeWidth:n}=e,i=a[0].x,o=a[a.length-1].x;if(!Mo(i)||!Mo(o))return null;var l=t*Math.abs(i-o),c=Math.max(...a.map(d=>d.y||0));return sr(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(d=>d.y||0),c)),sr(c)?w.createElement("rect",{x:i<o?i:i-l,y:0,width:l,height:Math.floor(c+(n?parseInt("".concat(n),10):1))}):null}function HYe(e){var{alpha:t,layout:r,points:a,baseLine:n,strokeWidth:i}=e;return r==="vertical"?w.createElement(MYe,{alpha:t,points:a,baseLine:n,strokeWidth:i}):w.createElement(UYe,{alpha:t,points:a,baseLine:n,strokeWidth:i})}function QYe(e){var{needClip:t,clipPathId:r,props:a,previousPointsRef:n,previousBaselineRef:i}=e,{points:o,baseLine:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:f,onAnimationStart:A,onAnimationEnd:m}=a,g=l3(a,"recharts-area-"),[x,v]=w.useState(!0),y=w.useCallback(()=>{typeof m=="function"&&m(),v(!1)},[m]),N=w.useCallback(()=>{typeof A=="function"&&A(),v(!0)},[A]),E=n.current,B=i.current;return w.createElement(d3,{begin:d,duration:u,isActive:c,easing:f,onAnimationEnd:y,onAnimationStart:N,key:g},_=>{if(E){var I=E.length/o.length,j=_===1?o:o.map((T,L)=>{var F=Math.floor(L*I);if(E[F]){var S=E[F];return Tg(Tg({},T),{},{x:su(S.x,T.x,_),y:su(S.y,T.y,_)})}return T}),k;return sr(l)?k=su(B,l,_):$n(l)||Tc(l)?k=su(B,0,_):k=l.map((T,L)=>{var F=Math.floor(L*I);if(Array.isArray(B)&&B[F]){var S=B[F];return Tg(Tg({},T),{},{x:su(S.x,T.x,_),y:su(S.y,T.y,_)})}return T}),_>0&&(n.current=j,i.current=k),w.createElement(eP,{points:j,baseLine:k,needClip:t,clipPathId:r,props:a,showLabels:!x})}return _>0&&(n.current=o,i.current=l),w.createElement(_n,null,w.createElement("defs",null,w.createElement("clipPath",{id:"animationClipPath-".concat(r)},w.createElement(HYe,{alpha:_,points:o,baseLine:l,layout:a.layout,strokeWidth:a.strokeWidth}))),w.createElement(_n,{clipPath:"url(#animationClipPath-".concat(r,")")},w.createElement(eP,{points:o,baseLine:l,needClip:t,clipPathId:r,props:a,showLabels:!0})))})}function zYe(e){var{needClip:t,clipPathId:r,props:a}=e,{points:n,baseLine:i,isAnimationActive:o}=a,l=w.useRef(null),c=w.useRef(),d=l.current,u=c.current;return o&&n&&n.length&&(d!==n||u!==i)?w.createElement(QYe,{needClip:t,clipPathId:r,props:a,previousPointsRef:l,previousBaselineRef:c}):w.createElement(eP,{points:n,baseLine:i,needClip:t,clipPathId:r,props:a,showLabels:!0})}class $Ye extends w.PureComponent{render(){var t,{hide:r,dot:a,points:n,className:i,top:o,left:l,needClip:c,xAxisId:d,yAxisId:u,width:f,height:A,id:m,baseLine:g}=this.props;if(r)return null;var x=ia("recharts-area",i),v=m,{r:y=3,strokeWidth:N=2}=(t=Oa(a,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},E=yie(a),B=y*2+N;return w.createElement(w.Fragment,null,w.createElement(_n,{className:x},c&&w.createElement("defs",null,w.createElement(Ide,{clipPathId:v,xAxisId:d,yAxisId:u}),!E&&w.createElement("clipPath",{id:"clipPath-dots-".concat(v)},w.createElement("rect",{x:l-B/2,y:o-B/2,width:f+B,height:A+B}))),w.createElement(zYe,{needClip:c,clipPathId:v,props:this.props})),w.createElement(JF,{points:n,mainColor:RS(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(g)&&w.createElement(JF,{points:g,mainColor:RS(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var qde={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!_p.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function VYe(e){var t,r=Ic(e,qde),{activeDot:a,animationBegin:n,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,fill:d,fillOpacity:u,hide:f,isAnimationActive:A,legendType:m,stroke:g,xAxisId:x,yAxisId:v}=r,y=Gde(r,_Ye),N=F4(),E=Gce(),{needClip:B}=U7(x,v),_=Bl(),{points:I,isRange:j,baseLine:k}=(t=or(H=>kYe(H,x,v,_,e.id)))!==null&&t!==void 0?t:{},T=R7();if(N!=="horizontal"&&N!=="vertical"||T==null||E!=="AreaChart"&&E!=="ComposedChart")return null;var{height:L,width:F,x:S,y:M}=T;return!I||!I.length?null:w.createElement($Ye,K0({},y,{activeDot:a,animationBegin:n,animationDuration:i,animationEasing:o,baseLine:k,connectNulls:l,dot:c,fill:d,fillOpacity:u,height:L,hide:f,layout:N,isAnimationActive:A,isRange:j,legendType:m,needClip:B,points:I,stroke:g,width:F,left:S,top:M,xAxisId:x,yAxisId:v}))}var GYe=(e,t,r,a,n)=>{var i=r??t;if(sr(i))return i;var o=e==="horizontal"?n:a,l=o.scale.domain();if(o.type==="number"){var c=Math.max(l[0],l[1]),d=Math.min(l[0],l[1]);return i==="dataMin"?d:i==="dataMax"||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return i==="dataMin"?l[0]:i==="dataMax"?l[1]:l[0]};function qYe(e){var{areaSettings:{connectNulls:t,baseValue:r,dataKey:a},stackedData:n,layout:i,chartBaseValue:o,xAxis:l,yAxis:c,displayedData:d,dataStartIndex:u,xAxisTicks:f,yAxisTicks:A,bandSize:m}=e,g=n&&n.length,x=GYe(i,o,r,l,c),v=i==="horizontal",y=!1,N=d.map((B,_)=>{var I;g?I=n[u+_]:(I=bn(B,a),Array.isArray(I)?y=!0:I=[x,I]);var j=I[1]==null||g&&!t&&bn(B,a)==null;return v?{x:vq({axis:l,ticks:f,bandSize:m,entry:B,index:_}),y:j?null:c.scale(I[1]),value:I,payload:B}:{x:j?null:l.scale(I[1]),y:vq({axis:c,ticks:A,bandSize:m,entry:B,index:_}),value:I,payload:B}}),E;return g||y?E=N.map(B=>{var _=Array.isArray(B.value)?B.value[0]:null;return v?{x:B.x,y:_!=null&&B.y!=null?c.scale(_):null,payload:B.payload}:{x:_!=null?l.scale(_):null,y:B.y,payload:B.payload}}):E=v?c.scale(x):l.scale(x),{points:N,baseLine:E,isRange:y}}function Kde(e){var t=Ic(e,qde),r=Bl();return w.createElement(c3,{id:t.id,type:"area"},a=>w.createElement(w.Fragment,null,w.createElement(bde,{legendPayload:DYe(t)}),w.createElement(o3,{fn:FYe,args:t}),w.createElement(Nde,{type:"area",id:a,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:koe(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:r,connectNulls:t.connectNulls}),w.createElement(VYe,K0({},t,{id:a}))))}Kde.displayName="Area";function iX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function oX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iX(Object(r),!0).forEach(function(a){KYe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iX(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function KYe(e,t,r){return(t=WYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WYe(e){var t=XYe(e,"string");return typeof t=="symbol"?t:t+""}function XYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YYe={xAxis:{},yAxis:{},zAxis:{}},Wde=Nd({name:"cartesianAxis",initialState:YYe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:a}=t.payload;e.yAxis[r]&&(e.yAxis[r]=oX(oX({},e.yAxis[r]),{},{width:a}))}}}),{addXAxis:JYe,removeXAxis:ZYe,addYAxis:eJe,removeYAxis:tJe,addZAxis:N1t,removeZAxis:E1t,updateYAxisWidth:rJe}=Wde.actions,aJe=Wde.reducer,nJe=["children"],sJe=["dangerouslySetInnerHTML","ticks"];function Xde(e,t,r){return(t=iJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iJe(e){var t=oJe(e,"string");return typeof t=="symbol"?t:t+""}function oJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tP(){return tP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},tP.apply(null,arguments)}function Yde(e,t){if(e==null)return{};var r,a,n=lJe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function lJe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function cJe(e){var t=Jn(),r=w.useMemo(()=>{var{children:i}=e,o=Yde(e,nJe);return o},[e]),a=or(i=>EA(i,r.id)),n=r===a;return w.useEffect(()=>(t(JYe(r)),()=>{t(ZYe(r))}),[r,t]),n?e.children:null}var dJe=e=>{var{xAxisId:t,className:r}=e,a=or(Boe),n=Bl(),i="xAxis",o=or(m=>ay(m,i,t,n)),l=or(m=>Ece(m,i,t,n)),c=or(m=>bce(m,t)),d=or(m=>Gze(m,t));if(c==null||d==null)return null;var{dangerouslySetInnerHTML:u,ticks:f}=e,A=Yde(e,sJe);return w.createElement(Fp,tP({},A,{scale:o,x:d.x,y:d.y,width:c.width,height:c.height,className:ia("recharts-".concat(i," ").concat(i),r),viewBox:a,ticks:l}))},uJe=e=>{var t,r,a,n,i;return w.createElement(cJe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(n=e.minTickGap)!==null&&n!==void 0?n:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},w.createElement(dJe,e))};class yl extends w.Component{render(){return w.createElement(uJe,this.props)}}Xde(yl,"displayName","XAxis");Xde(yl,"defaultProps",{allowDataOverflow:td.allowDataOverflow,allowDecimals:td.allowDecimals,allowDuplicatedCategory:td.allowDuplicatedCategory,height:td.height,hide:!1,mirror:td.mirror,orientation:td.orientation,padding:td.padding,reversed:td.reversed,scale:td.scale,tickCount:td.tickCount,type:td.type,xAxisId:0});var fJe=e=>{var{ticks:t,label:r,labelGapWithTick:a=5,tickSize:n=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(u=>{if(u){var f=u.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=n+i,d=o+c+l+(r?a:0);return Math.round(d)}return 0},hJe=["dangerouslySetInnerHTML","ticks"];function Jde(e,t,r){return(t=AJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AJe(e){var t=mJe(e,"string");return typeof t=="symbol"?t:t+""}function mJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rP(){return rP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},rP.apply(null,arguments)}function pJe(e,t){if(e==null)return{};var r,a,n=gJe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function gJe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function xJe(e){var t=Jn();return w.useEffect(()=>(t(eJe(e)),()=>{t(tJe(e))}),[e,t]),null}var vJe=e=>{var t,{yAxisId:r,className:a,width:n,label:i}=e,o=w.useRef(null),l=w.useRef(null),c=or(Boe),d=Bl(),u=Jn(),f="yAxis",A=or(E=>ay(E,f,r,d)),m=or(E=>yce(E,r)),g=or(E=>qze(E,r)),x=or(E=>Ece(E,f,r,d));if(w.useLayoutEffect(()=>{var E;if(!(n!=="auto"||!m||E7(i)||w.isValidElement(i))){var B=o.current,_=B==null||(E=B.tickRefs)===null||E===void 0?void 0:E.current,{tickSize:I,tickMargin:j}=B.props,k=fJe({ticks:_,label:l.current,labelGapWithTick:5,tickSize:I,tickMargin:j});Math.round(m.width)!==Math.round(k)&&u(rJe({id:r,width:k}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,m==null?void 0:m.width,m,u,i,r,n]),m==null||g==null)return null;var{dangerouslySetInnerHTML:v,ticks:y}=e,N=pJe(e,hJe);return w.createElement(Fp,rP({},N,{ref:o,labelRef:l,scale:A,x:g.x,y:g.y,width:m.width,height:m.height,className:ia("recharts-".concat(f," ").concat(f),a),viewBox:c,ticks:x}))},bJe=e=>{var t,r,a,n,i;return w.createElement(w.Fragment,null,w.createElement(xJe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(n=e.minTickGap)!==null&&n!==void 0?n:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),w.createElement(vJe,e))},yJe={allowDataOverflow:rd.allowDataOverflow,allowDecimals:rd.allowDecimals,allowDuplicatedCategory:rd.allowDuplicatedCategory,hide:!1,mirror:rd.mirror,orientation:rd.orientation,padding:rd.padding,reversed:rd.reversed,scale:rd.scale,tickCount:rd.tickCount,type:rd.type,width:rd.width,yAxisId:0};class wl extends w.Component{render(){return w.createElement(bJe,this.props)}}Jde(wl,"displayName","YAxis");Jde(wl,"defaultProps",yJe);var H6={exports:{}},Q6={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lX;function wJe(){if(lX)return Q6;lX=1;var e=k1();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,n=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return Q6.useSyncExternalStoreWithSelector=function(c,d,u,f,A){var m=n(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=o(function(){function v(_){if(!y){if(y=!0,N=_,_=f(_),A!==void 0&&g.hasValue){var I=g.value;if(A(I,_))return E=I}return E=_}if(I=E,r(N,_))return I;var j=f(_);return A!==void 0&&A(I,j)?(N=_,I):(N=_,E=j)}var y=!1,N,E,B=u===void 0?null:u;return[function(){return v(d())},B===null?void 0:function(){return v(B())}]},[d,u,f,A]);var x=a(c,m[0],m[1]);return i(function(){g.hasValue=!0,g.value=x},[x]),l(x),x},Q6}var cX;function NJe(){return cX||(cX=1,H6.exports=wJe()),H6.exports}NJe();function EJe(e){e()}function CJe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){EJe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let a=e;for(;a;)r.push(a),a=a.next;return r},subscribe(r){let a=!0;const n=t={callback:r,next:null,prev:t};return n.prev?n.prev.next=n:e=n,function(){!a||e===null||(a=!1,n.next?n.next.prev=n.prev:t=n.prev,n.prev?n.prev.next=n.next:e=n.next)}}}}var dX={notify(){},get:()=>[]};function jJe(e,t){let r,a=dX,n=0,i=!1;function o(x){u();const v=a.subscribe(x);let y=!1;return()=>{y||(y=!0,v(),f())}}function l(){a.notify()}function c(){g.onStateChange&&g.onStateChange()}function d(){return i}function u(){n++,r||(r=e.subscribe(c),a=CJe())}function f(){n--,r&&n===0&&(r(),r=void 0,a.clear(),a=dX)}function A(){i||(i=!0,u())}function m(){i&&(i=!1,f())}const g={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:A,tryUnsubscribe:m,getListeners:()=>a};return g}var kJe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SJe=kJe(),_Je=()=>typeof navigator<"u"&&navigator.product==="ReactNative",TJe=_Je(),BJe=()=>SJe||TJe?w.useLayoutEffect:w.useEffect,IJe=BJe(),z6=Symbol.for("react-redux-context"),$6=typeof globalThis<"u"?globalThis:{};function OJe(){if(!w.createContext)return{};const e=$6[z6]??($6[z6]=new Map);let t=e.get(w.createContext);return t||(t=w.createContext(null),e.set(w.createContext,t)),t}var DJe=OJe();function FJe(e){const{children:t,context:r,serverState:a,store:n}=e,i=w.useMemo(()=>{const c=jJe(n);return{store:n,subscription:c,getServerState:a?()=>a:void 0}},[n,a]),o=w.useMemo(()=>n.getState(),[n]);IJe(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==n.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=r||DJe;return w.createElement(l.Provider,{value:i},t)}var PJe=FJe,RJe=(e,t)=>t,$7=xt([RJe,ha,Z1,Gi,Uce,CA,W$e,$i],eVe),V7=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/a)}},Zde=gu("mouseClick"),eue=uE();eue.startListening({actionCreator:Zde,effect:(e,t)=>{var r=e.payload,a=$7(t.getState(),V7(r));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(n$e({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var aP=gu("mouseMove"),tue=uE();tue.startListening({actionCreator:aP,effect:(e,t)=>{var r=e.payload,a=t.getState(),n=m7(a,a.tooltip.settings.shared),i=$7(a,V7(r));n==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(Oce({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(Ice()))}});function LJe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var uX={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},rue=Nd({name:"rootProps",initialState:uX,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:uX.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),MJe=rue.reducer,{updateOptions:UJe}=rue.actions,aue=Nd({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:HJe}=aue.actions,QJe=aue.reducer,nue=gu("keyDown"),sue=gu("focus"),G7=uE();G7.startListening({actionCreator:nue,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:n}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(p7(n,sy(r))),l=CA(r);if(i==="Enter"){var c=_S(r,"axis","hover",String(n.index));t.dispatch(qF({active:!n.active,activeIndex:n.index,activeDataKey:n.dataKey,activeCoordinate:c}));return}var d=Wze(r),u=d==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,A=o+f*u;if(!(l==null||A>=l.length||A<0)){var m=_S(r,"axis","hover",String(A));t.dispatch(qF({active:!0,activeIndex:A.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});G7.startListening({actionCreator:sue,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:n}=r.tooltip;if(!n.active&&n.index==null){var i="0",o=_S(r,"axis","hover",String(i));t.dispatch(qF({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var tu=gu("externalEvent"),iue=uE();iue.startListening({actionCreator:tu,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),a={activeCoordinate:U$e(r),activeDataKey:$ce(r),activeIndex:mp(r),activeLabel:zce(r),activeTooltipIndex:mp(r),isTooltipActive:H$e(r)};e.payload.handler(a,e.payload.reactEvent)}}});var zJe=xt([ny],e=>e.tooltipItemPayloads),$Je=xt([zJe,wE,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,a)=>{var n=e.find(l=>l.settings.dataKey===a);if(n!=null){var{positions:i}=n;if(i!=null){var o=t(i,r);return o}}}),oue=gu("touchMove"),lue=uE();lue.startListening({actionCreator:oue,effect:(e,t)=>{var r=e.payload,a=t.getState(),n=m7(a,a.tooltip.settings.shared);if(n==="axis"){var i=$7(a,V7({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(Oce({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(n==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(_oe),u=(o=c.getAttribute(Toe))!==null&&o!==void 0?o:void 0,f=$Je(t.getState(),d,u);t.dispatch(Bce({activeDataKey:u,activeIndex:d,activeCoordinate:f}))}}});var VJe=Zie({brush:LXe,cartesianAxis:aJe,chartData:pVe,errorBars:HWe,graphicalItems:EKe,layout:$Me,legend:T7e,options:uVe,polarAxis:vqe,polarOptions:QJe,referenceElements:VXe,rootProps:MJe,tooltip:s$e}),GJe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return mMe({reducer:VJe,preloadedState:t,middleware:a=>a({serializableCheck:!1}).concat([eue.middleware,tue.middleware,G7.middleware,iue.middleware,lue.middleware]),devTools:{serialize:{replacer:LJe},name:"recharts-".concat(r)}})};function cue(e){var{preloadedState:t,children:r,reduxStoreName:a}=e,n=Bl(),i=w.useRef(null);if(n)return r;i.current==null&&(i.current=GJe(t,a));var o=fM;return w.createElement(PJe,{context:o,store:i.current},r)}function due(e){var{layout:t,width:r,height:a,margin:n}=e,i=Jn(),o=Bl();return w.useEffect(()=>{o||(i(HMe(t)),i(QMe({width:r,height:a})),i(UMe(n)))},[i,o,t,r,a,n]),null}function uue(e){var t=Jn();return w.useEffect(()=>{t(UJe(e))},[t,e]),null}var qJe=["children"];function KJe(e,t){if(e==null)return{};var r,a,n=WJe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function WJe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function LS(){return LS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},LS.apply(null,arguments)}var XJe={width:"100%",height:"100%"},YJe=w.forwardRef((e,t)=>{var r=yM(),a=wM(),n=Poe();if(!d1(r)||!d1(a))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,d,u;return typeof o.tabIndex=="number"?d=o.tabIndex:d=n?0:void 0,typeof o.role=="string"?u=o.role:u=n?"application":void 0,w.createElement(JL,LS({},o,{title:l,desc:c,role:u,tabIndex:d,width:r,height:a,style:XJe,ref:t}),i)}),JJe=e=>{var{children:t}=e,r=or(D4);if(!r)return null;var{width:a,height:n,y:i,x:o}=r;return w.createElement(JL,{width:a,height:n,x:o,y:i},t)},fX=w.forwardRef((e,t)=>{var{children:r}=e,a=KJe(e,qJe),n=Bl();return n?w.createElement(JJe,null,r):w.createElement(YJe,LS({ref:t},a),r)});function ZJe(){var e=Jn(),[t,r]=w.useState(null),a=or(x7e);return w.useEffect(()=>{if(t!=null){var n=t.getBoundingClientRect(),i=n.width/t.offsetWidth;Mo(i)&&i!==a&&e(zMe(i))}},[t,e,a]),r}function hX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function eZe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hX(Object(r),!0).forEach(function(a){tZe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hX(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function tZe(e,t,r){return(t=rZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rZe(e){var t=aZe(e,"string");return typeof t=="symbol"?t:t+""}function aZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nZe=w.forwardRef((e,t)=>{var{children:r,className:a,height:n,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:f,onMouseUp:A,onTouchEnd:m,onTouchMove:g,onTouchStart:x,style:v,width:y}=e,N=Jn(),[E,B]=w.useState(null),[_,I]=w.useState(null);vVe();var j=ZJe(),k=w.useCallback(P=>{j(P),typeof t=="function"&&t(P),B(P),I(P)},[j,t,B,I]),T=w.useCallback(P=>{N(Zde(P)),N(tu({handler:i,reactEvent:P}))},[N,i]),L=w.useCallback(P=>{N(aP(P)),N(tu({handler:d,reactEvent:P}))},[N,d]),F=w.useCallback(P=>{N(Ice()),N(tu({handler:u,reactEvent:P}))},[N,u]),S=w.useCallback(P=>{N(aP(P)),N(tu({handler:f,reactEvent:P}))},[N,f]),M=w.useCallback(()=>{N(sue())},[N]),H=w.useCallback(P=>{N(nue(P.key))},[N]),K=w.useCallback(P=>{N(tu({handler:o,reactEvent:P}))},[N,o]),Q=w.useCallback(P=>{N(tu({handler:l,reactEvent:P}))},[N,l]),G=w.useCallback(P=>{N(tu({handler:c,reactEvent:P}))},[N,c]),X=w.useCallback(P=>{N(tu({handler:A,reactEvent:P}))},[N,A]),Z=w.useCallback(P=>{N(tu({handler:x,reactEvent:P}))},[N,x]),U=w.useCallback(P=>{N(oue(P)),N(tu({handler:g,reactEvent:P}))},[N,g]),Y=w.useCallback(P=>{N(tu({handler:m,reactEvent:P}))},[N,m]);return w.createElement(Yce.Provider,{value:E},w.createElement(wie.Provider,{value:_},w.createElement("div",{className:ia("recharts-wrapper",a),style:eZe({position:"relative",cursor:"default",width:y,height:n},v),onClick:T,onContextMenu:K,onDoubleClick:Q,onFocus:M,onKeyDown:H,onMouseDown:G,onMouseEnter:L,onMouseLeave:F,onMouseMove:S,onMouseUp:X,onTouchEnd:Y,onTouchMove:U,onTouchStart:Z,ref:k},r)))}),sZe=["children","className","width","height","style","compact","title","desc"];function iZe(e,t){if(e==null)return{};var r,a,n=oZe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function oZe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var fue=w.forwardRef((e,t)=>{var{children:r,className:a,width:n,height:i,style:o,compact:l,title:c,desc:d}=e,u=iZe(e,sZe),f=mo(u);return l?w.createElement(fX,{otherAttributes:f,title:c,desc:d},r):w.createElement(nZe,{className:a,style:o,width:n,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},w.createElement(fX,{otherAttributes:f,title:c,desc:d,ref:t},w.createElement(qXe,null,r)))}),lZe=["width","height"];function nP(){return nP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},nP.apply(null,arguments)}function cZe(e,t){if(e==null)return{};var r,a,n=dZe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function dZe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var uZe={top:5,right:5,bottom:5,left:5},fZe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:uZe,reverseStackOrder:!1,syncMethod:"index"},hue=w.forwardRef(function(t,r){var a,n=Ic(t.categoricalChartProps,fZe),{width:i,height:o}=n,l=cZe(n,lZe);if(!d1(i)||!d1(o))return null;var{chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,categoricalChartProps:A}=t,m={chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return w.createElement(cue,{preloadedState:{options:m},reduxStoreName:(a=A.id)!==null&&a!==void 0?a:c},w.createElement(Pde,{chartData:A.data}),w.createElement(due,{width:i,height:o,layout:n.layout,margin:n.margin}),w.createElement(uue,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),w.createElement(fue,nP({},l,{width:i,height:o,ref:r})))}),hZe=["axis","item"],Ad=w.forwardRef((e,t)=>w.createElement(hue,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:hZe,tooltipPayloadSearcher:a3,categoricalChartProps:e,ref:t}));function AZe(e){var t=Jn();return w.useEffect(()=>{t(HJe(e))},[t,e]),null}var mZe=["width","height","layout"];function sP(){return sP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},sP.apply(null,arguments)}function pZe(e,t){if(e==null)return{};var r,a,n=gZe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function gZe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var xZe={top:5,right:5,bottom:5,left:5},vZe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:xZe,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},Aue=w.forwardRef(function(t,r){var a,n=Ic(t.categoricalChartProps,vZe),{width:i,height:o,layout:l}=n,c=pZe(n,mZe);if(!d1(i)||!d1(o))return null;var{chartName:d,defaultTooltipEventType:u,validateTooltipEventTypes:f,tooltipPayloadSearcher:A}=t,m={chartName:d,defaultTooltipEventType:u,validateTooltipEventTypes:f,tooltipPayloadSearcher:A,eventEmitter:void 0};return w.createElement(cue,{preloadedState:{options:m},reduxStoreName:(a=n.id)!==null&&a!==void 0?a:d},w.createElement(Pde,{chartData:n.data}),w.createElement(due,{width:i,height:o,layout:l,margin:n.margin}),w.createElement(uue,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),w.createElement(AZe,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),w.createElement(fue,sP({width:i,height:o},c,{ref:r})))}),bZe=["item"],yZe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},kE=w.forwardRef((e,t)=>{var r=Ic(e,yZe);return w.createElement(Aue,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:bZe,tooltipPayloadSearcher:a3,categoricalChartProps:r,ref:t})}),wZe=["axis"],NZe={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},mue=w.forwardRef((e,t)=>{var r=Ic(e,NZe);return w.createElement(Aue,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:wZe,tooltipPayloadSearcher:a3,categoricalChartProps:r,ref:t})}),EZe=["axis"],CZe=w.forwardRef((e,t)=>w.createElement(hue,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:EZe,tooltipPayloadSearcher:a3,categoricalChartProps:e,ref:t}));const um=["#0ea5e9","#22c55e","#f59e0b","#ef4444","#8b5cf6","#14b8a6","#a3e635","#f472b6"],AX={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",dimension:"",subdimension:"",descripcion:"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:"",estado:"Pendiente",avance:0,enlaces:[]},uw="rounded-2xl border border-slate-100 dark:border-slate-800 bg-white/80 dark:bg-slate-900/60 shadow-sm backdrop-blur",jo="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-fuchsia-500/70 focus:border-fuchsia-500/70 transition",Yc="block text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-400 mb-2",V6="inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition",G6="bg-gradient-to-r from-fuchsia-600 to-rose-500 text-white shadow-sm",q6="bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200 hover:bg-slate-200/80 dark:hover:bg-slate-700",kj="rounded-2xl p-5 text-white shadow-md bg-gradient-to-br",jZe="from-sky-500 to-indigo-500",kZe="from-emerald-500 to-lime-500",SZe="from-amber-500 to-rose-500",_Ze="from-fuchsia-500 to-purple-600",K6={Pendiente:{badge:"bg-rose-50 text-rose-700 ring-1 ring-rose-200 dark:bg-rose-900/30 dark:text-rose-200 dark:ring-rose-800",icon:jc,dot:"bg-rose-500"},"En Proceso":{badge:"bg-amber-50 text-amber-700 ring-1 ring-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:ring-amber-800",icon:Rae,dot:"bg-amber-500"},Cumplida:{badge:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-200 dark:ring-emerald-800",icon:dn,dot:"bg-emerald-500"}},TZe=e=>{const t=K6[e].icon;return s.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ${K6[e].badge}`,children:[s.jsx("span",{className:`h-2 w-2 rounded-full ${K6[e].dot}`}),s.jsx(t,{className:"h-4 w-4"})," ",e]})},BZe=()=>{var Z,U;const[e,t]=w.useState("registro"),[r,a]=w.useState([]),[n,i]=w.useState(AX),[o,l]=w.useState(null),[c,d]=w.useState(null),[u,f]=w.useState(!1),[A,m]=w.useState(""),[g,x]=w.useState(""),[v,y]=w.useState(""),[N,E]=w.useState(""),B=w.useMemo(()=>_0[n.dimension]??[],[n.dimension]),_=w.useCallback(async()=>{f(!0);try{const Y=await HRe();a(Y)}catch(Y){console.error(Y),d("No se pudieron cargar las acciones.")}finally{f(!1)}},[]);w.useEffect(()=>{_()},[_]);const I=Y=>{const{name:P,value:D}=Y.target;i(W=>({...W,[P]:D}))},j=Y=>{const P=Y.split(",").map(D=>D.trim()).filter(Boolean);i(D=>({...D,indicadores:P}))},k=Y=>{const P=Y.split(",").map(D=>D.trim()).filter(Boolean);i(D=>({...D,enlaces:P}))},T=()=>{i(AX),l(null),d(null)},L=async Y=>{if(Y.preventDefault(),!n.responsable||!n.dimension||!n.subdimension||!n.descripcion||!n.fechaCumplimiento){d("Responsable, dimensión, subdimensión, descripción y fecha de cumplimiento son obligatorios.");return}try{o?await zRe(o,n):await QRe(n),await _(),T(),t("seguimiento")}catch(P){console.error(P),d("Error al guardar la acción.")}},F=Y=>{l(Y.id),i({...Y,enlaces:Y.enlaces??[],indicadores:Y.indicadores??[]}),window.scrollTo({top:0,behavior:"smooth"}),t("registro")},S=async Y=>{confirm("¿Eliminar esta acción?")&&(await $Re(Y),await _())},M=w.useMemo(()=>r.filter(Y=>{const P=!A||Y.responsable.toLowerCase().includes(A.toLowerCase())||Y.descripcion.toLowerCase().includes(A.toLowerCase())||Y.subdimension.toLowerCase().includes(A.toLowerCase()),D=!g||Y.dimension===g,W=!v||Y.subdimension===v,J=!N||Y.estado===N;return P&&D&&W&&J}),[r,A,g,v,N]),H=w.useMemo(()=>{const Y=new Map;return r.forEach(P=>Y.set(P.dimension,(Y.get(P.dimension)??0)+1)),Array.from(Y.entries()).map(([P,D])=>({name:P,value:D}))},[r]),K=w.useMemo(()=>{const Y=new Map;return r.forEach(P=>Y.set(P.estado,(Y.get(P.estado)??0)+1)),Array.from(Y.entries()).map(([P,D])=>({name:P,value:D}))},[r]),Q=w.useMemo(()=>{const Y=r.map(P=>P.avance??0);return Y.length?Math.round(Y.reduce((P,D)=>P+D,0)/Y.length):0},[r]),G=w.useMemo(()=>{const Y=new Map;return r.forEach(P=>Y.set(P.subdimension,(Y.get(P.subdimension)??0)+1)),Array.from(Y.entries()).map(([P,D])=>({name:P,value:D})).sort((P,D)=>D.value-P.value).slice(0,6)},[r]),X=()=>{const Y=["id","fechaRegistro","responsable","dimension","subdimension","descripcion","objetivos","indicadores","cobertura","fechaInicio","fechaCumplimiento","estado","avance","enlaces"],P=r.map(ie=>[ie.id,ie.fechaRegistro,ie.responsable,ie.dimension,ie.subdimension,ie.descripcion.replace(/\n/g," "),ie.objetivos??"",(ie.indicadores??[]).join("|"),ie.cobertura??"",ie.fechaInicio??"",ie.fechaCumplimiento,ie.estado,ie.avance??0,(ie.enlaces??[]).join("|")]),D=[Y.join(","),...P.map(ie=>ie.map(re=>`"${String(re).replace(/"/g,'""')}"`).join(","))].join(`
`),W=new Blob([D],{type:"text/csv;charset=utf-8"}),J=URL.createObjectURL(W),ce=document.createElement("a");ce.href=J,ce.download=`pme_acciones_${new Date().toISOString().slice(0,10)}.csv`,ce.click(),URL.revokeObjectURL(J)};return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-fuchsia-200/60 dark:border-fuchsia-700/30",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-fuchsia-500/20 via-rose-500/20 to-amber-400/20 blur-3xl"}),s.jsxs("div",{className:"relative p-6 md:p-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 bg-white/60 dark:bg-slate-900/40 backdrop-blur",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl md:text-3xl font-black bg-gradient-to-r from-fuchsia-600 via-rose-600 to-amber-600 bg-clip-text text-transparent flex items-center gap-3",children:[s.jsx(Rg,{className:"h-6 w-6 text-fuchsia-600"})," Seguimiento de Acciones (PME)"]}),s.jsxs("p",{className:"text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[s.jsx(Hje,{className:"h-4 w-4"})," Registro, seguimiento y dashboard por Dimensión/Subdimensión."]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:_,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/70 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-white",children:[s.jsx(_k,{className:"h-4 w-4"})," Refrescar"]}),s.jsxs("button",{onClick:X,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 to-rose-500 hover:opacity-90",children:[s.jsx(pf,{className:"h-4 w-4"})," CSV"]})]})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsxs("button",{onClick:()=>t("registro"),className:`${V6} ${e==="registro"?G6:q6}`,children:[s.jsx(rA,{className:"h-4 w-4"})," Registro"]}),s.jsxs("button",{onClick:()=>t("seguimiento"),className:`${V6} ${e==="seguimiento"?G6:q6}`,children:[s.jsx(Nb,{className:"h-4 w-4"})," Seguimiento"]}),s.jsxs("button",{onClick:()=>t("dashboard"),className:`${V6} ${e==="dashboard"?G6:q6}`,children:[s.jsx(cCe,{className:"h-4 w-4"})," Dashboard"]})]}),e==="registro"&&s.jsx("div",{className:uw,children:s.jsxs("form",{onSubmit:L,className:"p-6 md:p-8 space-y-6",children:[c&&s.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-rose-200 bg-rose-50 p-3 text-rose-700 dark:bg-rose-900/30 dark:text-rose-200 dark:border-rose-800",children:[s.jsx(jc,{className:"h-5 w-5"}),s.jsx("span",{children:c})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:Yc,children:"Fecha de Registro"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ro,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-500"}),s.jsx("input",{type:"date",name:"fechaRegistro",value:n.fechaRegistro,onChange:I,className:jo+" pl-10"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:Yc,children:"Responsable"}),s.jsxs("div",{className:"relative",children:[s.jsx(Lg,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-rose-500"}),s.jsx("input",{type:"text",name:"responsable",placeholder:"Nombre",value:n.responsable,onChange:I,className:jo+" pl-10"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:Yc,children:"Cobertura (niveles/cursos)"}),s.jsxs("div",{className:"relative",children:[s.jsx(t1,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-amber-500"}),s.jsx("input",{type:"text",name:"cobertura",placeholder:"2°A, 2°B, 3°Mecánica...",value:n.cobertura??"",onChange:I,className:jo+" pl-10"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:Yc,children:"Dimensión PME"}),s.jsxs("div",{className:"relative",children:[s.jsx(bje,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),s.jsxs("select",{name:"dimension",value:n.dimension,onChange:I,className:jo+" pl-10",children:[s.jsx("option",{value:"",children:"Selecciona una dimensión"}),Object.keys(_0).map(Y=>s.jsx("option",{value:Y,children:Y},Y))]})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:Yc,children:"Subdimensión"}),s.jsxs("div",{className:"relative",children:[s.jsx(ZN,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-sky-500"}),s.jsxs("select",{name:"subdimension",value:n.subdimension,onChange:I,className:jo+" pl-10",disabled:!n.dimension,children:[s.jsx("option",{value:"",children:n.dimension?"Selecciona una subdimensión":"Primero elige una dimensión"}),B.map(Y=>s.jsx("option",{value:Y,children:Y},Y))]})]})]}),s.jsxs("div",{className:"md:col-span-3",children:[s.jsx("label",{className:Yc,children:"Descripción de la Acción"}),s.jsxs("div",{className:"relative",children:[s.jsx(Lo,{className:"absolute left-3 top-3 h-4 w-4 text-fuchsia-500"}),s.jsx("textarea",{name:"descripcion",value:n.descripcion,onChange:I,rows:3,placeholder:"¿Qué se hará? ¿Dónde y con quién?",className:jo+" pl-10"})]})]}),s.jsxs("div",{className:"md:col-span-3",children:[s.jsx("label",{className:Yc,children:"Objetivos (opcional)"}),s.jsx("textarea",{name:"objetivos",value:n.objetivos??"",onChange:I,rows:2,placeholder:"Propósitos pedagógicos",className:jo})]}),s.jsxs("div",{children:[s.jsx("label",{className:Yc,children:"Indicadores (separados por coma)"}),s.jsx("input",{type:"text",value:(n.indicadores??[]).join(", "),onChange:Y=>j(Y.target.value),placeholder:"Cobertura OA, asistencia, resultados...",className:jo})]}),s.jsxs("div",{children:[s.jsx("label",{className:Yc,children:"Fecha de Inicio"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ro,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-violet-500"}),s.jsx("input",{type:"date",name:"fechaInicio",value:n.fechaInicio??"",onChange:I,className:jo+" pl-10"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:Yc,children:"Fecha de Cumplimiento"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ro,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),s.jsx("input",{type:"date",name:"fechaCumplimiento",value:n.fechaCumplimiento,onChange:I,className:jo+" pl-10"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:Yc,children:"Estado"}),s.jsx("select",{name:"estado",value:n.estado,onChange:I,className:jo,children:m$.map(Y=>s.jsx("option",{value:Y,children:Y},Y))})]}),s.jsxs("div",{children:[s.jsx("label",{className:Yc,children:"Avance (%)"}),s.jsxs("div",{className:"relative",children:[s.jsx(I5,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),s.jsx("input",{type:"number",min:0,max:100,name:"avance",value:n.avance??0,onChange:I,className:jo+" pl-10"})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:Yc,children:"Enlaces de evidencia (separados por coma)"}),s.jsxs("div",{className:"relative",children:[s.jsx(l$,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),s.jsx("input",{type:"text",value:(n.enlaces??[]).join(", "),onChange:Y=>k(Y.target.value),placeholder:"https://..., https://...",className:jo+" pl-10"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3",children:[o&&s.jsx("button",{type:"button",onClick:T,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white border border-slate-200 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700",children:"Cancelar"}),s.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 via-rose-500 to-amber-500 hover:opacity-90",children:[o?s.jsx(kl,{className:"h-4 w-4"}):s.jsx(Si,{className:"h-4 w-4"}),o?"Guardar cambios":"Registrar acción"]})]})]})}),e==="seguimiento"&&s.jsx("div",{className:uw,children:s.jsxs("div",{className:"p-4 md:p-6 space-y-5",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"relative md:col-span-2",children:[s.jsx(z1,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-600"}),s.jsx("input",{className:jo+" pl-10",placeholder:"Buscar por responsable, descripción o subdimensión...",value:A,onChange:Y=>m(Y.target.value)})]}),s.jsxs("select",{value:g,onChange:Y=>{x(Y.target.value),y("")},className:jo,children:[s.jsx("option",{value:"",children:"Todas las dimensiones"}),Object.keys(_0).map(Y=>s.jsx("option",{value:Y,children:Y},Y))]}),s.jsxs("select",{value:v,onChange:Y=>y(Y.target.value),className:jo,children:[s.jsx("option",{value:"",children:"Todas las subdimensiones"}),(_0[g]??Object.values(_0).flat()).map(Y=>s.jsx("option",{value:Y,children:Y},Y))]}),s.jsxs("select",{value:N,onChange:Y=>E(Y.target.value),className:jo,children:[s.jsx("option",{value:"",children:"Todos los estados"}),m$.map(Y=>s.jsx("option",{value:Y,children:Y},Y))]})]}),s.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-100 dark:border-slate-800",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[s.jsx("thead",{className:"bg-gradient-to-r from-fuchsia-50 to-rose-50 dark:from-slate-800 dark:to-slate-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-fuchsia-700 dark:text-fuchsia-300",children:"Responsable"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-rose-700 dark:text-rose-300",children:"Dimensión / Subdimensión"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-indigo-700 dark:text-indigo-300",children:"Descripción"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-amber-700 dark:text-amber-300",children:"Fechas"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-emerald-700 dark:text-emerald-300",children:"Estado"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-sky-700 dark:text-sky-300",children:"Avance"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Acciones"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800 bg-white dark:bg-slate-900/40",children:[M.map(Y=>{var P,D;return s.jsxs("tr",{className:"hover:bg-fuchsia-50/50 dark:hover:bg-slate-800/60 transition",children:[s.jsx("td",{className:"px-4 py-4 align-top text-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-fuchsia-500 to-rose-500 text-white flex items-center justify-center font-bold shadow-sm",children:((D=(P=Y.responsable)==null?void 0:P.slice(0,1))==null?void 0:D.toUpperCase())||"?"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Y.responsable}),s.jsx("div",{className:"text-xs text-slate-500",children:Y.cobertura})]})]})}),s.jsxs("td",{className:"px-4 py-4 align-top text-sm",children:[s.jsx("div",{className:"font-semibold text-indigo-700 dark:text-indigo-300",children:Y.dimension}),s.jsx("div",{className:"text-xs text-slate-500",children:Y.subdimension})]}),s.jsxs("td",{className:"px-4 py-4 align-top text-sm max-w-md",children:[s.jsx("div",{className:"text-slate-700 dark:text-slate-200",children:Y.descripcion}),Y.enlaces&&Y.enlaces.length>0&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Y.enlaces.map((W,J)=>s.jsxs("a",{href:W,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-fuchsia-700 hover:text-fuchsia-900 dark:text-fuchsia-300",children:[s.jsx(l$,{className:"h-3.5 w-3.5"})," Evidencia ",J+1]},J))})]}),s.jsxs("td",{className:"px-4 py-4 align-top text-sm whitespace-nowrap",children:[s.jsxs("div",{className:"text-xs text-slate-500",children:["Reg: ",Y.fechaRegistro||"-"]}),s.jsxs("div",{className:"text-xs text-slate-500",children:["Ini: ",Y.fechaInicio||"-"]}),s.jsxs("div",{className:"text-xs font-semibold text-emerald-700 dark:text-emerald-300",children:["Fin: ",Y.fechaCumplimiento]})]}),s.jsx("td",{className:"px-4 py-4 align-top text-center",children:TZe(Y.estado)}),s.jsxs("td",{className:"px-4 py-4 align-top",children:[s.jsx("div",{className:"w-28 h-2.5 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-fuchsia-500 via-rose-500 to-amber-500",style:{width:`${Math.min(Math.max(Y.avance??0,0),100)}%`}})}),s.jsxs("div",{className:"text-xs text-center mt-1",children:[Y.avance??0,"%"]})]}),s.jsx("td",{className:"px-4 py-4 align-top text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[s.jsx("button",{onClick:()=>F(Y),className:"p-2 rounded-lg hover:bg-amber-50 dark:hover:bg-slate-800",title:"Editar",children:s.jsx(o4,{className:"h-5 w-5 text-amber-600"})}),s.jsx("button",{onClick:()=>S(Y.id),className:"p-2 rounded-lg hover:bg-rose-50 dark:hover:bg-slate-800",title:"Eliminar",children:s.jsx(Ia,{className:"h-5 w-5 text-rose-600"})})]})})]},Y.id)}),M.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-slate-500",children:"Sin registros"})})]})]})})]})}),e==="dashboard"&&s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"xl:col-span-3 grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:`${kj} ${jZe}`,children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(bl,{className:"h-10 w-10 opacity-90"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase/relaxed",children:"Acciones totales"}),s.jsx("div",{className:"text-2xl font-black",children:r.length})]})]})}),s.jsx("div",{className:`${kj} ${kZe}`,children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(dn,{className:"h-10 w-10 opacity-90"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase/relaxed",children:"Cumplidas"}),s.jsx("div",{className:"text-2xl font-black",children:((Z=K.find(Y=>Y.name==="Cumplida"))==null?void 0:Z.value)??0})]})]})}),s.jsx("div",{className:`${kj} ${SZe}`,children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Rae,{className:"h-10 w-10 opacity-90"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase/relaxed",children:"En proceso"}),s.jsx("div",{className:"text-2xl font-black",children:((U=K.find(Y=>Y.name==="En Proceso"))==null?void 0:U.value)??0})]})]})}),s.jsx("div",{className:`${kj} ${_Ze}`,children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(I5,{className:"h-10 w-10 opacity-90"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase/relaxed",children:"Avance promedio"}),s.jsxs("div",{className:"text-2xl font-black",children:[Q,"%"]})]})]})})]}),s.jsxs("div",{className:uw+" p-5",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100",children:"Acciones por dimensión"})}),s.jsx("div",{className:"h-64",children:s.jsx(oi,{width:"100%",height:"100%",children:s.jsxs(Ad,{data:H,children:[s.jsx(uu,{strokeDasharray:"3 3"}),s.jsx(yl,{dataKey:"name",hide:!0}),s.jsx(wl,{allowDecimals:!1}),s.jsx(ii,{}),s.jsx(Ec,{dataKey:"value",children:H.map((Y,P)=>s.jsx(Lh,{fill:um[P%um.length]},P))})]})})}),s.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1",children:H.map((Y,P)=>s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"inline-block h-3 w-3 rounded-sm",style:{background:um[P%um.length]}}),s.jsx("span",{className:"flex-1",children:Y.name}),s.jsx("span",{className:"font-semibold",children:Y.value})]},P))})]}),s.jsxs("div",{className:uw+" p-5",children:[s.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Distribución por estado"}),s.jsx("div",{className:"h-64",children:s.jsx(oi,{width:"100%",height:"100%",children:s.jsxs(kE,{children:[s.jsx(cy,{data:K,dataKey:"value",nameKey:"name",outerRadius:90,label:!0,children:K.map((Y,P)=>s.jsx(Lh,{fill:um[P%um.length]},P))}),s.jsx(Sp,{}),s.jsx(ii,{})]})})})]}),s.jsxs("div",{className:uw+" p-5",children:[s.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Subdimensiones más trabajadas"}),s.jsxs("ul",{className:"space-y-2",children:[G.map((Y,P)=>s.jsxs("li",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{background:um[P%um.length]}}),Y.name]}),s.jsx("span",{className:"font-semibold",children:Y.value})]},P)),G.length===0&&s.jsx("li",{className:"text-slate-500",children:"Sin datos"})]})]})]})]})},IZe="modulepreload",OZe=function(e){return"/"+e},mX={},ps=function(t,r,a){let n=Promise.resolve();if(r&&r.length>0){let o=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=o(r.map(d=>{if(d=OZe(d),d in mX)return;mX[d]=!0;const u=d.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const A=document.createElement("link");if(A.rel=u?"stylesheet":IZe,u||(A.as="script"),A.crossOrigin="",A.href=d,c&&A.setAttribute("nonce",c),document.head.appendChild(A),u)return new Promise((m,g)=>{A.addEventListener("load",m),A.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},f3="presentacionesDidacticas",DZe=async(e,t)=>{const r=$t(ut(lr,f3)),a={...e,id:r.id,userId:t,fechaCreacion:new Date().toISOString(),estado:"generando"};return await Us(r,a),r.id},pX=async(e,t)=>{const r=$t(lr,f3,e);await zi(r,t)},FZe=async e=>{await Ua($t(lr,f3,e))},PZe=(e,t)=>{const r=jt(ut(lr,f3),Kt("userId","==",e),Gt("fechaCreacion","desc"));return rr(r,a=>{const n=a.docs.map(i=>i.data());t(n)})},RZe=async e=>{let t=null;try{const r=ln.currentUser;if(!r)throw new Error("Usuario no autenticado. Debe iniciar sesión para generar presentaciones.");console.log("Estado de autenticación:",{isLoggedIn:!!r,uid:r.uid,email:r.email});const a=await r.getIdToken(!0);console.log("Token actualizado correctamente, longitud:",a.length);const n=cl(ax,"generateSlides"),i={tema:e.tema,asignatura:e.asignatura,objetivosAprendizaje:e.objetivosAprendizaje,curso:e.curso,numDiapositivas:e.numDiapositivas,estilo:e.estilo,incluirImagenes:e.incluirImagenes,contenidoFuente:e.contenidoFuente||"",enlaces:e.enlaces||[],planificacionId:e.planificacionId,incluirActividades:!0,incluirEvaluacion:!0,formatoPedagogico:!0,userId:r.uid};t=await DZe({...e,userId:r.uid,fechaCreacion:new Date().toISOString(),estado:"generando",urlPresentacion:""},r.uid),console.log("Presentación guardada con ID:",t),console.log("Enviando solicitud a generateSlides con usuario:",r.uid),console.log("Datos enviados:",i);const o=await n(i);console.log("Respuesta de función:",o);const l=o.data;if(l.presentacionId&&l.url)try{const c={estado:"completada",urlPresentacion:l.url};l.demoMode&&(c.mensajeError="NOTA: Esta es una versión de demostración. La presentación no existe realmente."),await pX(t,c)}catch(c){console.warn("Error al actualizar la presentación en Firestore:",c)}return l}catch(r){if(console.error("Error al generar presentación:",r),console.error("Código:",r==null?void 0:r.code,"Mensaje:",r==null?void 0:r.message,"Detalles:",r==null?void 0:r.details),t)try{await pX(t,{estado:"error",mensajeError:(r==null?void 0:r.message)||"Error desconocido al generar la presentación"}),console.warn(`Presentación ${t} marcada como fallida`)}catch(a){console.error("Error al actualizar el estado de la presentación:",a)}throw r}},W6=async()=>{var t,r,a,n;const e=ln.currentUser;if(!e)throw new Error("Usuario no autenticado. Debe iniciar sesión para verificar la autorización.");try{const i=await e.getIdToken(),o=await fetch("https://us-central1-plania-clase.cloudfunctions.net/checkGoogleSlidesAuth",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({})});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);const l=await o.json();return{isAuthorized:l.isAuthorized||!1,message:l.message||"Estado de autorización desconocido"}}catch(i){if(console.error("Error al verificar autorización de Google Slides:",i),(t=i.message)!=null&&t.includes("cors")||(r=i.message)!=null&&r.includes("blocked")||(a=i.message)!=null&&a.includes("CORS")||(n=i.message)!=null&&n.includes("fetch")){console.warn("Error de red detectado, usando método alternativo para verificar autorización");try{const o=jt(ut(lr,"userTokens"),Kt("userId","==",e.uid)),l=await Nr(o);return{isAuthorized:!l.empty,message:l.empty?"Usuario no ha autorizado Google Slides (verificación directa)":"Usuario autorizado para Google Slides (verificación directa)"}}catch(o){return console.error("Error en verificación alternativa:",o),{isAuthorized:!1,message:"Error al verificar autorización"}}}return{isAuthorized:!1,message:`Error al verificar autorización: ${i.message||"Error desconocido"}`}}},LZe=()=>{const[e,t]=w.useState(!1),[r,a]=w.useState(null),n=async()=>{t(!0);try{const o=await cl(ax,"testGemini")();a(o.data)}catch(i){console.error("Error calling testGemini:",i),a({success:!1,error:i.message||"Error desconocido",type:"client_error"})}t(!1)};return s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-2xl mx-auto",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"🧪 Prueba de Gemini AI"}),s.jsx("button",{onClick:n,disabled:e,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50 mb-4",children:e?"Probando...":"Probar Gemini 1.5 Pro"}),r&&s.jsxs("div",{className:"bg-gray-100 p-4 rounded",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Resultado:"}),s.jsx("pre",{className:"text-sm overflow-auto max-h-96",children:JSON.stringify(r,null,2)}),r.success?s.jsx("div",{className:"mt-2 text-green-600",children:"✅ Gemini AI está funcionando correctamente"}):s.jsxs("div",{className:"mt-2 text-red-600",children:["❌ Problema detectado: ",r.error]})]})]})},MZe=({estilo:e,tema:t="Ejemplo de Presentación"})=>{const a=(()=>{switch(e){case"sobrio":return{colores:{fondo:"bg-slate-100",fondoDiapo:"bg-white",titulo:"text-slate-800",texto:"text-slate-600",acento:"bg-slate-200"},fuentes:{titulo:"font-serif",texto:"font-sans"},iconos:"🎭",descripcion:"Elegante y minimalista, balanceando profesionalismo con claridad pedagógica",ejemplo:["Título principal en fuente serif","Contenido organizado y claro","Paleta de colores neutros"]};case"visual":return{colores:{fondo:"bg-blue-50",fondoDiapo:"bg-white",titulo:"text-blue-800",texto:"text-slate-600",acento:"bg-blue-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"🎨",descripcion:"Dinámico y colorido, con énfasis en elementos gráficos e infografías",ejemplo:["Mayor uso de elementos visuales","Diagramas y representaciones gráficas","Paleta de colores vibrantes"]};case"academico":return{colores:{fondo:"bg-amber-50",fondoDiapo:"bg-white",titulo:"text-amber-800",texto:"text-slate-700",acento:"bg-amber-100"},fuentes:{titulo:"font-serif",texto:"font-serif"},iconos:"📚",descripcion:"Formal y riguroso, con énfasis en conceptos teóricos",ejemplo:["Estructura académica formal","Referencias y citas bibliográficas","Énfasis en conceptos teóricos"]};case"interactivo":return{colores:{fondo:"bg-green-50",fondoDiapo:"bg-white",titulo:"text-green-800",texto:"text-slate-600",acento:"bg-green-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"🤝",descripcion:"Participativo y colaborativo, con múltiples actividades",ejemplo:["Preguntas y actividades prácticas","Espacios para participación","Dinámicas grupales sugeridas"]};case"profesional":return{colores:{fondo:"bg-indigo-50",fondoDiapo:"bg-white",titulo:"text-indigo-800",texto:"text-slate-600",acento:"bg-indigo-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"💼",descripcion:"Corporativo y práctico, enfocado en aplicaciones reales",ejemplo:["Diseño corporativo y estructurado","Casos de estudio prácticos","Aplicaciones en contexto laboral"]};case"creativo":return{colores:{fondo:"bg-purple-50",fondoDiapo:"bg-white",titulo:"text-purple-800",texto:"text-slate-600",acento:"bg-purple-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"💡",descripcion:"Innovador y atractivo, estimula la imaginación",ejemplo:["Diseño creativo no convencional","Elementos visuales llamativos","Enfoque innovador del contenido"]};case"minimalista":return{colores:{fondo:"bg-gray-50",fondoDiapo:"bg-white",titulo:"text-gray-800",texto:"text-gray-600",acento:"bg-gray-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"⚪",descripcion:"Simple y esencial, centrado en lo más importante",ejemplo:["Diseño muy simplificado","Amplio espacio en blanco","Solo información esencial"]};default:return{colores:{fondo:"bg-slate-100",fondoDiapo:"bg-white",titulo:"text-slate-800",texto:"text-slate-600",acento:"bg-slate-200"},fuentes:{titulo:"font-serif",texto:"font-sans"},iconos:"🎭",descripcion:"Elegante y minimalista, balanceando profesionalismo con claridad pedagógica",ejemplo:["Título principal en fuente serif","Contenido organizado y claro","Paleta de colores neutros"]}}})();return s.jsxs("div",{className:`p-4 rounded-lg ${a.colores.fondo} transition-all`,children:[s.jsxs("h3",{className:"text-lg font-medium mb-2",children:["Vista previa: Estilo ",e]}),s.jsx("p",{className:"text-sm text-gray-500 mb-3",children:a.descripcion}),s.jsxs("div",{className:"shadow-md rounded-lg overflow-hidden",children:[s.jsxs("div",{className:`p-4 ${a.colores.fondoDiapo} border-b border-gray-200`,children:[s.jsx("h4",{className:`${a.fuentes.titulo} ${a.colores.titulo} text-lg font-bold mb-2`,children:t}),s.jsxs("div",{className:`${a.fuentes.texto} ${a.colores.texto} text-sm space-y-2`,children:[s.jsx("p",{children:"Diapositiva de título con subtítulo"}),s.jsx("div",{className:`w-2/3 h-2 ${a.colores.acento} rounded mt-2`})]})]}),s.jsxs("div",{className:`p-4 ${a.colores.fondoDiapo}`,children:[s.jsx("h4",{className:`${a.fuentes.titulo} ${a.colores.titulo} text-md font-bold mb-2`,children:"Características principales"}),s.jsx("ul",{className:`${a.fuentes.texto} ${a.colores.texto} text-xs space-y-1 list-disc pl-4`,children:a.ejemplo.map((n,i)=>s.jsx("li",{children:n},i))}),s.jsx("div",{className:"flex justify-end mt-2",children:s.jsx("span",{className:"text-lg",children:a.iconos})})]})]})]})},UZe=({userId:e,planificaciones:t})=>{const[r,a]=w.useState("presentaciones"),[n,i]=w.useState(null),[o,l]=w.useState({tema:"",objetivosAprendizaje:[],numDiapositivas:8,estilo:"sobrio",incluirImagenes:!0,incluirActividades:!0,incluirEvaluacion:!0,formatoPedagogico:!0,contenidoFuente:"",enlaces:""}),[c,d]=w.useState(!1),[u,f]=w.useState([]),[A,m]=w.useState(!1),[g,x]=w.useState(!1),[v,y]=w.useState(null),[N,E]=w.useState({isAuthorized:!1,message:"Verificando autorización...",checking:!0});w.useEffect(()=>e?PZe(e,M=>{f(M)}):void 0,[e]),w.useEffect(()=>{const S=async()=>{if(e)try{E(G=>({...G,checking:!0}));const Q=await W6();E({isAuthorized:Q.isAuthorized,message:Q.message,checking:!1})}catch(Q){E({isAuthorized:!1,message:`Error: ${Q.message||"No se pudo verificar la autorización"}`,checking:!1})}};S();const M=setTimeout(()=>{E(Q=>Q.checking?{isAuthorized:!1,message:"Timeout al verificar autorización",checking:!1}:Q)},1e4);if(new URLSearchParams(window.location.search).get("auth")==="success"){const Q=setTimeout(()=>{S()},2e3);return()=>{clearTimeout(Q),clearTimeout(M)}}return()=>clearTimeout(M)},[e]),w.useEffect(()=>{const S=async()=>{if(new URLSearchParams(window.location.search).get("auth")==="success"&&!N.isAuthorized)try{E(Q=>({...Q,checking:!0}));const K=await W6();E({isAuthorized:K.isAuthorized,message:K.message,checking:!1})}catch(K){E({isAuthorized:!1,message:`Error: ${K.message||"No se pudo verificar la autorización"}`,checking:!1})}};return window.addEventListener("popstate",S),()=>window.removeEventListener("popstate",S)},[N.isAuthorized]),w.useEffect(()=>{n&&("nombreUnidad"in n?l(S=>({...S,tema:n.nombreUnidad})):"nombreClase"in n&&l(S=>({...S,tema:n.nombreClase})))},[n]);const B=()=>{var S;if(!n)return[];if("lecciones"in n){const M=[];return(S=n.lecciones)==null||S.forEach(H=>{H.objetivosAprendizaje&&!M.includes(H.objetivosAprendizaje)&&M.push(H.objetivosAprendizaje)}),M}else if(n.detalleLeccionOrigen)return[n.detalleLeccionOrigen.objetivosAprendizaje];return[]},_=S=>{const{name:M,value:H,type:K}=S.target;if(K==="checkbox"){const Q=S.target.checked;l(G=>({...G,[M]:Q}))}else l(Q=>({...Q,[M]:H}))},I=S=>{const M=Array.from(S.target.selectedOptions,H=>H.value);l(H=>({...H,objetivosAprendizaje:M}))},j=async S=>{if(S.preventDefault(),!n){y("Debes seleccionar una planificación");return}if(o.objetivosAprendizaje.length===0){y("Debes seleccionar al menos un objetivo de aprendizaje");return}y(null),x(!0);try{const M={planificacionId:n.id,tema:o.tema,curso:n.nivel,asignatura:n.asignatura,objetivosAprendizaje:o.objetivosAprendizaje,numDiapositivas:o.numDiapositivas,estilo:o.estilo,incluirImagenes:o.incluirImagenes,contenidoFuente:o.contenidoFuente,enlaces:o.enlaces?o.enlaces.split(/[\s,]+/).filter(Boolean):[]};console.log("Datos para presentación:",M);const H=await RZe({...M,userId:e});console.log("Resultado de la función:",H),H&&H.url&&console.log("Presentación generada:",H.url)}catch(M){console.error("Error al generar presentación:",M);const H=(M==null?void 0:M.message)||"Error desconocido",K=(M==null?void 0:M.code)||"unknown";y(`Error (${K}): ${H}`)}finally{x(!1)}},k=async S=>{if(window.confirm("¿Estás seguro de que deseas eliminar esta presentación?"))try{m(!0),await FZe(S)}catch(M){console.error("Error al eliminar presentación:",M),y("Error al eliminar la presentación")}finally{m(!1)}},T=()=>s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Generar Presentación con IA"}),s.jsxs("form",{onSubmit:j,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Seleccionar Planificación"}),s.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",value:(n==null?void 0:n.id)||"",onChange:S=>{const M=t.find(H=>H.id===S.target.value);i(M||null)},required:!0,children:[s.jsx("option",{value:"",children:"Seleccione una planificación"}),s.jsx("optgroup",{label:"Unidades",children:t.filter(S=>S.tipo==="Unidad").map(S=>s.jsxs("option",{value:S.id,children:[S.tipo==="Unidad"?S.nombreUnidad:""," - ",S.asignatura," (",S.nivel,")"]},S.id))}),s.jsx("optgroup",{label:"Clases",children:t.filter(S=>S.tipo==="Clase").map(S=>s.jsxs("option",{value:S.id,children:[S.tipo==="Clase"?S.nombreClase:""," - ",S.asignatura," (",S.nivel,")"]},S.id))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tema"}),s.jsx("input",{type:"text",name:"tema",value:o.tema,onChange:_,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Objetivos de Aprendizaje (selecciona al menos uno)"}),s.jsx("select",{multiple:!0,name:"objetivosAprendizaje",value:o.objetivosAprendizaje,onChange:I,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",size:3,required:!0,children:B().map((S,M)=>s.jsx("option",{value:S,children:S},M))}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mantén presionado Ctrl (o Cmd) para seleccionar múltiples opciones"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nº de diapositivas"}),s.jsx("input",{type:"number",name:"numDiapositivas",value:o.numDiapositivas,onChange:_,min:4,max:20,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estilo de Presentación"}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 mt-2",children:[s.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="sobrio"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"sobrio"})),children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:s.jsx("span",{className:"text-2xl",children:"🎭"})}),s.jsx("span",{className:"font-medium",children:"Sobrio"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Elegante y minimalista"})]})}),s.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="visual"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"visual"})),children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:s.jsx("span",{className:"text-2xl",children:"🎨"})}),s.jsx("span",{className:"font-medium",children:"Visual"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Colorido y gráfico"})]})}),s.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="academico"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"academico"})),children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:s.jsx("span",{className:"text-2xl",children:"📚"})}),s.jsx("span",{className:"font-medium",children:"Académico"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Formal y riguroso"})]})}),s.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="interactivo"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"interactivo"})),children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:s.jsx("span",{className:"text-2xl",children:"🤝"})}),s.jsx("span",{className:"font-medium",children:"Interactivo"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Participativo y dinámico"})]})}),s.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="profesional"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"profesional"})),children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:s.jsx("span",{className:"text-2xl",children:"💼"})}),s.jsx("span",{className:"font-medium",children:"Profesional"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Corporativo y práctico"})]})}),s.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="creativo"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"creativo"})),children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:s.jsx("span",{className:"text-2xl",children:"💡"})}),s.jsx("span",{className:"font-medium",children:"Creativo"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Innovador y atractivo"})]})}),s.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="minimalista"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"minimalista"})),children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:s.jsx("span",{className:"text-2xl",children:"⚪"})}),s.jsx("span",{className:"font-medium",children:"Minimalista"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Simple y esencial"})]})})]}),s.jsxs("button",{type:"button",onClick:()=>d(!0),className:"mt-3 w-full flex items-center justify-center gap-2 py-2 text-sm font-medium text-indigo-700 bg-indigo-100 rounded-md hover:bg-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-300 dark:hover:bg-indigo-800/40 transition-colors",children:[s.jsx(Pg,{className:"w-4 h-4"}),s.jsx("span",{children:"Ver ejemplo del estilo seleccionado"})]}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto",children:[s.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[s.jsxs("h3",{className:"text-lg font-medium",children:["Vista previa de estilo: ",o.estilo]}),s.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(ho,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-5",children:[s.jsx(MZe,{estilo:o.estilo,tema:o.tema||"Tema de la presentación"}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("h4",{className:"font-medium mb-2",children:["Características del estilo ",o.estilo]}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[o.estilo==="sobrio"&&s.jsxs(s.Fragment,{children:[s.jsx("li",{children:"Diseño elegante y profesional"}),s.jsx("li",{children:"Colores neutros y tipografía clásica"}),s.jsx("li",{children:"Énfasis en la claridad y simplicidad"}),s.jsx("li",{children:"Ideal para presentaciones formales"})]}),o.estilo==="visual"&&s.jsxs(s.Fragment,{children:[s.jsx("li",{children:"Diseño colorido y dinámico"}),s.jsx("li",{children:"Mayor uso de gráficos e imágenes"}),s.jsx("li",{children:"Énfasis en elementos visuales e infografías"}),s.jsx("li",{children:"Ideal para mantener la atención visual"})]}),o.estilo==="academico"&&s.jsxs(s.Fragment,{children:[s.jsx("li",{children:"Diseño formal y riguroso"}),s.jsx("li",{children:"Espacio para citas y referencias"}),s.jsx("li",{children:"Énfasis en conceptos teóricos"}),s.jsx("li",{children:"Ideal para contenido académico complejo"})]}),o.estilo==="interactivo"&&s.jsxs(s.Fragment,{children:[s.jsx("li",{children:"Diseño participativo"}),s.jsx("li",{children:"Incluye actividades y preguntas"}),s.jsx("li",{children:"Énfasis en la participación activa"}),s.jsx("li",{children:"Ideal para clases dinámicas"})]}),o.estilo==="profesional"&&s.jsxs(s.Fragment,{children:[s.jsx("li",{children:"Diseño corporativo"}),s.jsx("li",{children:"Elementos de casos prácticos"}),s.jsx("li",{children:"Énfasis en aplicaciones reales"}),s.jsx("li",{children:"Ideal para formación profesional"})]}),o.estilo==="creativo"&&s.jsxs(s.Fragment,{children:[s.jsx("li",{children:"Diseño no convencional y llamativo"}),s.jsx("li",{children:"Elementos visuales originales"}),s.jsx("li",{children:"Énfasis en despertar la imaginación"}),s.jsx("li",{children:"Ideal para temas creativos o artísticos"})]}),o.estilo==="minimalista"&&s.jsxs(s.Fragment,{children:[s.jsx("li",{children:"Diseño extremadamente simplificado"}),s.jsx("li",{children:"Amplio espacio en blanco"}),s.jsx("li",{children:"Énfasis en lo esencial"}),s.jsx("li",{children:"Ideal para conceptos claros y concisos"})]})]})]})]}),s.jsx("div",{className:"p-4 bg-gray-100 dark:bg-slate-700 flex justify-end",children:s.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Cerrar vista previa"})})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"incluirImagenes",name:"incluirImagenes",checked:o.incluirImagenes,onChange:S=>l(M=>({...M,incluirImagenes:S.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"incluirImagenes",className:"text-sm text-gray-700 dark:text-gray-300",children:"🖼️ Incluir sugerencias para imágenes educativas"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"incluirActividades",name:"incluirActividades",checked:o.incluirActividades||!1,onChange:S=>l(M=>({...M,incluirActividades:S.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"incluirActividades",className:"text-sm text-gray-700 dark:text-gray-300",children:"✏️ Incluir actividades y ejercicios prácticos"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"incluirEvaluacion",name:"incluirEvaluacion",checked:o.incluirEvaluacion||!1,onChange:S=>l(M=>({...M,incluirEvaluacion:S.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"incluirEvaluacion",className:"text-sm text-gray-700 dark:text-gray-300",children:"📝 Incluir diapositiva de evaluación/reflexión"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"formatoPedagogico",name:"formatoPedagogico",checked:o.formatoPedagogico||!0,onChange:S=>l(M=>({...M,formatoPedagogico:S.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"formatoPedagogico",className:"text-sm text-gray-700 dark:text-gray-300",children:"📚 Aplicar estructura pedagógica avanzada"})]})]}),s.jsxs("div",{className:"hidden",children:[s.jsx("input",{type:"checkbox",id:"incluirImagenesOld",name:"incluirImagenesOld",checked:o.incluirImagenes,onChange:S=>l(M=>({...M,incluirImagenes:S.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"incluirImagenesOld",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Incluir imágenes libres de derechos"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Texto/recursos fuente (opcional)"}),s.jsx("textarea",{name:"contenidoFuente",value:o.contenidoFuente,onChange:_,rows:3,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",placeholder:"Pega aquí cualquier contenido de referencia para la presentación..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Enlaces (opcional)"}),s.jsx("input",{type:"text",name:"enlaces",value:o.enlaces,onChange:_,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",placeholder:"URLs separadas por comas o espacios"})]}),v&&s.jsx("div",{className:"text-red-500 text-sm p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:v}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:g||!n,className:"w-full flex items-center justify-center gap-2 p-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:g?s.jsxs(s.Fragment,{children:[s.jsx(si,{className:"w-4 h-4 animate-spin"}),"Generando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(KD,{className:"w-4 h-4"}),"Generar Presentación"]})})})]})]})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[s.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Mis Presentaciones"}),s.jsx("div",{className:"space-y-4",children:A?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(si,{className:"w-8 h-8 animate-spin text-indigo-500"})}):u.length===0?s.jsxs("div",{className:"text-center py-8 space-y-4",children:[s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No has generado presentaciones todavía"}),s.jsx("div",{className:"text-sm",children:N.checking?s.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[s.jsx(si,{className:"w-4 h-4 animate-spin"}),s.jsx("span",{children:"Verificando autorización..."})]}):s.jsxs("div",{className:`flex items-center justify-center gap-2 ${N.isAuthorized?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,children:[s.jsx("span",{children:N.isAuthorized?"✅":"⚠️"}),s.jsx("span",{children:N.message})]})}),!N.checking&&!N.isAuthorized&&s.jsx("div",{className:"flex justify-center",children:s.jsxs("button",{onClick:()=>{const S=`https://us-central1-plania-clase.cloudfunctions.net/slidesAuthorize?userId=${e}`;window.location.href=S},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(Fg,{className:"w-4 h-4"}),s.jsx("span",{children:"Autorizar Google Slides"})]})}),s.jsx("div",{className:"flex justify-center",children:s.jsxs("button",{onClick:async()=>{try{E(M=>({...M,checking:!0}));const S=await W6();E({isAuthorized:S.isAuthorized,message:S.message,checking:!1})}catch(S){E({isAuthorized:!1,message:`Error: ${S.message||"No se pudo verificar la autorización"}`,checking:!1})}},disabled:N.checking,className:`flex items-center gap-2 px-3 py-1 text-sm rounded-lg transition-colors ${N.isAuthorized?"text-green-600 hover:text-green-800 border border-green-300 hover:bg-green-50":"text-gray-600 hover:text-gray-800 border border-gray-300 hover:bg-gray-50"}`,children:[N.checking?s.jsx(si,{className:"w-3 h-3 animate-spin"}):s.jsx("span",{children:"🔄"}),s.jsx("span",{children:"Verificar estado"})]})})]}):u.map(S=>s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200",children:S.tema}),S.estado==="generando"?s.jsxs("span",{className:"flex items-center text-amber-500 text-xs gap-1",children:[s.jsx(si,{className:"w-3 h-3 animate-spin"}),"Generando"]}):S.estado==="error"?s.jsxs("span",{className:"flex items-center text-red-500 text-xs gap-1",children:[s.jsx(ho,{className:"w-3 h-3"}),"Error"]}):s.jsxs("span",{className:"flex items-center text-green-500 text-xs gap-1",children:[s.jsx(dn,{className:"w-3 h-3"}),"Lista"]})]}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[S.asignatura," - ",S.curso]}),s.jsxs("div",{className:"flex items-center text-xs text-gray-500 space-x-4 mt-2 flex-wrap",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Ro,{className:"w-3 h-3"}),new Date(S.fechaCreacion).toLocaleDateString()]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(OB,{className:"w-3 h-3"}),S.numDiapositivas," diapositivas"]}),s.jsxs("span",{className:`flex items-center gap-1 px-1.5 py-0.5 rounded-full ${S.estilo==="sobrio"?"bg-slate-100 text-slate-700":S.estilo==="visual"?"bg-blue-100 text-blue-700":S.estilo==="academico"?"bg-amber-100 text-amber-700":S.estilo==="interactivo"?"bg-green-100 text-green-700":S.estilo==="profesional"?"bg-indigo-100 text-indigo-700":S.estilo==="creativo"?"bg-purple-100 text-purple-700":(S.estilo==="minimalista","bg-gray-100 text-gray-700")}`,children:[S.estilo==="sobrio"&&"🎭",S.estilo==="visual"&&"🎨",S.estilo==="academico"&&"📚",S.estilo==="interactivo"&&"🤝",S.estilo==="profesional"&&"💼",S.estilo==="creativo"&&"💡",S.estilo==="minimalista"&&"⚪",S.estilo]})]}),s.jsxs("div",{className:"mt-3",children:[s.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300",children:"Objetivos de Aprendizaje:"}),s.jsx("ul",{className:"list-disc list-inside text-xs text-gray-600 dark:text-gray-400",children:S.objetivosAprendizaje.map((M,H)=>s.jsx("li",{className:"truncate",children:M.length>60?M.substring(0,57)+"...":M},H))})]}),S.mensajeError&&s.jsx("div",{className:"mt-2 text-xs italic text-amber-600 dark:text-amber-400",children:S.mensajeError}),s.jsxs("div",{className:"mt-3 flex justify-between",children:[S.estado==="completada"?s.jsxs(s.Fragment,{children:[s.jsxs("a",{href:S.esDemoMode||S.urlPresentacion.includes("example.com")?"#":S.urlPresentacion,onClick:M=>{(S.esDemoMode||S.urlPresentacion.includes("example.com"))&&(M.preventDefault(),alert("Esta es una versión de demostración. En la versión final, aquí verás una presentación real de Google Slides."))},target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center gap-1 text-sm ${S.esDemoMode||S.urlPresentacion.includes("example.com")?"text-amber-600 hover:text-amber-800":"text-blue-600 hover:text-blue-800"}`,children:[s.jsx(Fg,{className:"w-3 h-3"}),S.esDemoMode||S.urlPresentacion.includes("example.com")?"Ver Demo":"Abrir en Google Slides"]}),S.esDemoMode&&S.urlAutorizacion&&s.jsxs("a",{href:S.urlAutorizacion,target:"_blank",rel:"noopener noreferrer",className:"ml-4 inline-flex items-center gap-1 text-sm text-green-600 hover:text-green-800",children:[s.jsx(Fg,{className:"w-3 h-3"}),"Autorizar Google Slides"]})]}):s.jsx("span",{className:"text-gray-400 text-sm italic",children:"En progreso..."}),s.jsx("button",{onClick:()=>k(S.id),className:"text-red-500 hover:text-red-700",children:s.jsx(Ia,{className:"w-4 h-4"})})]})]},S.id))})]})})]}),L=()=>s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-xl shadow-md text-center",children:[s.jsx(a$,{className:"w-16 h-16 mx-auto text-gray-400"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mt-4",children:"Sección de Guías Didácticas"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta función estará disponible próximamente."})]}),F=()=>s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-xl shadow-md text-center",children:[s.jsx(OB,{className:"w-16 h-16 mx-auto text-gray-400"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mt-4",children:"Repositorio de Recursos"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta función estará disponible próximamente."})]});return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm p-1",children:s.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[s.jsxs("button",{onClick:()=>a("presentaciones"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="presentaciones"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[s.jsx(KD,{className:"w-4 h-4"}),s.jsx("span",{children:"Presentaciones"})]}),s.jsxs("button",{onClick:()=>a("guias"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="guias"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[s.jsx(a$,{className:"w-4 h-4"}),s.jsx("span",{children:"Guías"})]}),s.jsxs("button",{onClick:()=>a("recursos"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="recursos"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[s.jsx(OB,{className:"w-4 h-4"}),s.jsx("span",{children:"Recursos"})]})]})}),s.jsx("div",{className:"mb-6",children:s.jsx(LZe,{})}),s.jsxs("div",{children:[r==="presentaciones"&&T(),r==="guias"&&L(),r==="recursos"&&F()]})]})},SE="planificaciones",pue="actividades_calendario",q7=e=>{var r,a,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(a=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:a.call(r))==null?void 0:n.toISOString())||t.fechaCreacion,...t.detallesLeccion?{detallesLeccion:Array.isArray(t.detallesLeccion)?t.detallesLeccion:[]}:{}}},gue=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:dr.fromDate(new Date),fechaActualizacion:dr.fromDate(new Date)};return(await Kr(ut(st,SE),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},xue=async(e,t,r)=>{try{const a=$t(st,SE,e),n=await tA(a);if(!n.exists()||n.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await zi(a,{...t,fechaActualizacion:dr.fromDate(new Date)})}catch(a){throw console.error("Error al actualizar planificación:",a),new Error("No se pudo actualizar la planificación")}},vue=async(e,t)=>{try{const r=$t(st,SE,e),a=await tA(r);if(!a.exists()||a.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificación");await Ua(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},HZe=async e=>{try{const t=jt(ut(st,SE),Kt("userId","==",e),Gt("fechaCreacion","desc"));return(await Nr(t)).docs.map(q7)}catch(t){return console.error("Error al obtener planificaciones:",t),[]}},bue=(e,t)=>{const r=jt(ut(st,SE),Kt("userId","==",e),Gt("fechaCreacion","desc"));return rr(r,a=>{try{const n=a.docs.map(q7);console.log(`Recibiendo ${n.length} planificaciones del usuario ${e}`);const i=n.map(o=>o.tipo==="Unidad"&&!Array.isArray(o.detallesLeccion)?(console.warn(`Planificación ${o.id} tiene detallesLeccion inválidos, corrigiendo.`),{...o,detallesLeccion:[]}):o);t(i)}catch(n){console.error("Error procesando datos de planificaciones:",n),t([])}},a=>{console.error("Error en suscripción a planificaciones:",a)})},yue=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:dr.fromDate(new Date),fechaActualizacion:dr.fromDate(new Date)};return(await Kr(ut(st,pue),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},wue=(e,t)=>{const r=jt(ut(st,pue),Kt("userId","==",e),Gt("fecha","desc"));return rr(r,a=>{const n=a.docs.map(q7);t(n)},a=>{console.error("Error en suscripción a actividades:",a)})},iP=Object.freeze(Object.defineProperty({__proto__:null,deletePlanificacion:vue,getPlanificacionesByUser:HZe,saveActividad:yue,savePlanificacion:gue,subscribeToActividades:wue,subscribeToPlanificaciones:bue,updatePlanificacion:xue},Symbol.toStringTag,{value:"Module"})),K7="documentacion_docs";function Nue(e){const t=jt(ut(lr,K7),Gt("createdAt","desc"));return rr(t,r=>{const a=r.docs.map(n=>({id:n.id,...n.data()}));e(a)})}async function Eue(e,t,r){const a=$t(ut(lr,K7)),n={title:e,description:t||"",tags:r||[],createdAt:Da()};return await Us(a,n,{merge:!0}),a.id}async function Cue(e,t){const r=`documentacion/${e}/${t.name}`,a=vu(jx,r);await H1(a,t,{contentType:t.type});const n=await gA(a);return{storagePath:r,downloadURL:n,contentType:t.type}}async function MS(e,t,r,a,n,i){return(await cl(ax,"indexDocumentacionDoc")({docId:e,storagePath:t,title:r,description:a,tags:n,contentType:i})).data}async function QZe(e,t=3,r){return(await cl(ax,"documentacionQuery")({question:e,topK:t,tags:r})).data}async function jue(e){await Ua($t(lr,K7,e))}const zZe=(e,t)=>{const[r,a]=w.useState([]),[n,i]=w.useState(!0),[o,l]=w.useState(null),c=w.useCallback(async()=>{if(!e){console.warn("🛠️ cargarPlanificacionesDirectamente: userId nulo, no se pueden cargar planificaciones"),i(!1),l("No se pudo determinar la identidad del usuario"),a([]);return}try{console.log(`🛠️ Cargando planificaciones directamente para ${e}`);const{getPlanificacionesByUser:m}=await ps(async()=>{const{getPlanificacionesByUser:v}=await Promise.resolve().then(()=>iP);return{getPlanificacionesByUser:v}},void 0),g=await m(e);console.log(`🛠️ Obtenidas ${g.length} planificaciones directamente de Firestore`);const x=g.map(v=>v.tipo==="Unidad"&&!Array.isArray(v.detallesLeccion)?(console.log(`🛠️ Corrigiendo datos de planificación ${v.id}`),{...v,detallesLeccion:[]}):v);a(x),i(!1)}catch(m){console.error("🛠️ Error cargando planificaciones directamente:",m),l(m instanceof Error?m.message:"Error al cargar planificaciones directamente"),i(!1)}},[e]);w.useEffect(()=>{if(!e){console.log("🛠️ usePlanificaciones: userId nulo o vacío, no se cargarán planificaciones"),i(!1),l("ID de usuario no disponible"),a([]);return}console.log(`🛠️ usePlanificaciones: Cargando planificaciones para usuario ${e}`),i(!0),l(null);let m=null;try{m=bue(e,x=>{if(console.log(`🛠️ usePlanificaciones: Recibidos ${x.length} documentos por suscripción`),x.length===0){c();return}const v=x.map(y=>y.tipo==="Unidad"&&!Array.isArray(y.detallesLeccion)?(console.log(`🛠️ Corrigiendo datos de planificación ${y.id}`),{...y,detallesLeccion:[]}):y);a(v),i(!1)})}catch(x){console.error("🛠️ Error en hook usePlanificaciones:",x),l(x instanceof Error?x.message:"Error al cargar planificaciones"),c()}const g=setTimeout(()=>{n&&r.length===0&&(console.log("🛠️ Timeout: cargando planificaciones directamente como respaldo"),c())},5e3);return()=>{m&&m(),clearTimeout(g)}},[e,c]);const d=async m=>{try{return l(null),await gue(m,e)}catch(g){throw l(g.message||"Error al guardar planificación"),g}},u=async(m,g)=>{try{l(null),await xue(m,g,e)}catch(x){throw l(x.message||"Error al actualizar planificación"),x}},f=async m=>{try{l(null),await vue(m,e)}catch(g){throw l(g.message||"Error al eliminar planificación"),g}},A=w.useCallback(async()=>{try{if(!e)return{status:"error",message:"No hay usuario identificado. Datos del usuario no disponibles."};console.log("📊 Diagnóstico - ID de usuario:",e);const{getPlanificacionesByUser:m}=await ps(async()=>{const{getPlanificacionesByUser:y}=await Promise.resolve().then(()=>iP);return{getPlanificacionesByUser:y}},void 0),g=await m(e),x=g.filter(y=>y.tipo==="Unidad"),v=x.filter(y=>!Array.isArray(y.detallesLeccion)||y.detallesLeccion===void 0);if(console.log(`📊 Diagnóstico - Total planificaciones: ${g.length}, Unidades: ${x.length}, Inválidas: ${v.length}`),v.length>0){const{updateDoc:y,doc:N}=await ps(async()=>{const{updateDoc:B,doc:_}=await Promise.resolve().then(()=>Jb);return{updateDoc:B,doc:_}},void 0),{db:E}=await ps(async()=>{const{db:B}=await Promise.resolve().then(()=>aL);return{db:B}},void 0);for(const B of v)await y(N(E,"planificaciones",B.id),{detallesLeccion:[]});return{status:"repaired",message:`Se repararon ${v.length} planificaciones de ${x.length} totales.`}}else if(x.length===0)return{status:"empty",message:`No se encontraron planificaciones de unidad para el usuario ${e}. Cree una nueva planificación.`};return{status:"ok",message:`Todo correcto. ${x.length} planificaciones de unidad encontradas.`}}catch(m){return console.error("📊 Error en diagnóstico:",m),{status:"error",message:`Error: ${m instanceof Error?m.message:"Desconocido"}`}}},[e]);return{planificaciones:r,loading:n,error:o,save:d,update:u,remove:f,diagnosticarYReparar:A}},oP=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},$Ze=e=>{const[t,r]=w.useState([]),[a,n]=w.useState(!0),[i,o]=w.useState(null);w.useEffect(()=>{if(!e){n(!1);return}n(!0);try{return wue(e,d=>{r(d),n(!1)})}catch(c){o(c instanceof Error?c.message:"Error al cargar actividades"),n(!1)}},[e]);const l=w.useCallback(async c=>{try{return o(null),await yue(c,e)}catch(d){throw o(d instanceof Error?d.message:"Error al guardar actividad"),d}},[e]);return{actividades:t,loading:a,error:i,save:l}},VZe=({lesson:e,onClose:t,onSave:r,isLoading:a=!1})=>{const[n,i]=w.useState(e),o=c=>{i({...n,[c.target.name]:c.target.value})},l=async()=>{try{await r(n),t()}catch(c){console.error("Error al guardar lección:",c)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),s.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(n).map(([c,d])=>s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:c.replace(/([A-Z])/g," $1")}),s.jsx("textarea",{name:c,value:d,onChange:o,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:a})]},c))}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[s.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:a,children:"Cancelar"}),s.jsxs("button",{onClick:l,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a,children:[a&&s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},GZe=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:a=!1,onUpdatePlan:n})=>{var L,F,S;const[i,o]=w.useState(e.progreso??0),[l,c]=w.useState(!1),[d,u]=w.useState(((L=e.reflexionUnidad)==null?void 0:L.fortalezas)||""),[f,A]=w.useState(((F=e.reflexionUnidad)==null?void 0:F.mejoras)||""),[m,g]=w.useState(((S=e.reflexionUnidad)==null?void 0:S.debilidades)||""),x=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],v=(()=>{var H;const M=Object.fromEntries(x.map(K=>[K,""]));return(((H=e.reflexionUnidad)==null?void 0:H.ordenHabilidades)||[]).forEach((K,Q)=>{x.includes(K)&&(M[K]=Q+1)}),M})(),[y,N]=w.useState(v),[E,B]=w.useState(!1);w.useEffect(()=>{var H,K,Q,G;u(((H=e.reflexionUnidad)==null?void 0:H.fortalezas)||""),A(((K=e.reflexionUnidad)==null?void 0:K.mejoras)||""),g(((Q=e.reflexionUnidad)==null?void 0:Q.debilidades)||"");const M=Object.fromEntries(x.map(X=>[X,""]));(((G=e.reflexionUnidad)==null?void 0:G.ordenHabilidades)||[]).forEach((X,Z)=>{x.includes(X)&&(M[X]=Z+1)}),N(M)},[e.id]);const _=()=>{const M=d.trim().length>0&&f.trim().length>0&&m.trim().length>0,K=Object.entries(y).filter(([,Q])=>Q!=="").sort((Q,G)=>Q[1]-G[1]).map(([Q])=>Q).length>=1;return M&&K},I=async M=>{const H=parseInt(M.target.value,10);if(H===100&&!_()){alert("Para marcar la unidad como 100% completada, primero debes completar y guardar la Reflexión Docente (fortalezas, mejoras, desafíos y priorización de habilidades).");return}o(H),c(!0);try{e.id&&n&&(await n(e.id,{progreso:H}),console.log("✅ Progreso actualizado exitosamente"))}catch(K){console.error("❌ Error completo:",K),alert(`Error al guardar el avance: ${K.message}`),o(e.progreso??0)}finally{c(!1)}},j=(M,H)=>{N(K=>{const Q={...K};if(H!==""){const G=Object.keys(Q).find(X=>X!==M&&Q[X]===H);G&&(Q[G]="")}return Q[M]=H,Q})},k=()=>Object.entries(y).filter(([,M])=>M!=="").sort((M,H)=>M[1]-H[1]).map(([M])=>M),T=async()=>{if(!(!n||!e.id)){if(!_()){alert("La Reflexión Docente es obligatoria: completa Fortalezas, Mejoras, Desafíos y prioriza al menos una habilidad de Bloom.");return}B(!0);try{const M=k();await n(e.id,{reflexionUnidad:{fortalezas:d.trim(),mejoras:f.trim(),debilidades:m.trim(),ordenHabilidades:M}})}catch(M){console.error("❌ Error al guardar reflexión:",M),alert(`Error al guardar la reflexión: ${M.message}`)}finally{B(!1)}}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"range",min:0,max:100,value:i,onChange:I,disabled:l||a}),s.jsxs("span",{className:"font-bold w-12",children:[i,"%"]}),l&&s.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),s.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((M,H)=>s.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[s.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",H+1,": ",M.actividades]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Objetivo:"})," ",M.objetivosAprendizaje]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Contenidos:"})," ",M.contenidosConceptuales]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Habilidad (Bloom):"})," ",M.habilidadesBloom]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Perfil de Egreso:"})," ",M.perfilEgreso]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Interdisciplinariedad:"})," ",M.asignaturasInterdisciplinariedad]})]}),s.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 rounded-md",children:s.jsxs("p",{className:"font-medium",children:[s.jsx("strong",{children:"Actividades sugeridas:"})," ",M.actividades]})}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsx("button",{onClick:()=>t(H,M),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:a,children:"Editar"}),s.jsx("button",{onClick:()=>r(M,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:a,children:"Usar para Plan de Clase"})]})]},H))}),s.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[s.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-3",children:"Reflexión Docente"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:'Obligatoria. Se usa en el módulo "Seguimiento Curricular" para análisis y visualización.'}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Fortalezas ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:d,onChange:M=>u(M.target.value),rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Mejoras ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:f,onChange:M=>A(M.target.value),rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Desafíos ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:m,onChange:M=>g(M.target.value),rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Habilidades Bloom priorizadas (1 = mayor prioridad) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:x.map(M=>s.jsxs("div",{className:"flex items-center justify-between gap-3 p-2 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[s.jsx("span",{className:"text-slate-700 dark:text-slate-200",children:M}),s.jsxs("select",{value:y[M]===""?"":String(y[M]),onChange:H=>j(M,H.target.value===""?"":parseInt(H.target.value,10)),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"—"}),[1,2,3,4,5,6].map(H=>s.jsx("option",{value:H,children:H},H))]})]},M))}),s.jsx("div",{className:"mt-3 text-xs text-slate-500 dark:text-slate-400",children:"Selecciona números sin repetir. Solo se guardan las habilidades con número asignado."})]})]}),s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsxs("button",{onClick:T,disabled:E||a,className:"inline-flex items-center gap-2 bg-amber-500 hover:bg-amber-600 text-white font-semibold py-2 px-4 rounded-md disabled:opacity-50",children:[E?s.jsx("span",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin inline-block"}):s.jsx(kl,{className:"w-4 h-4"}),s.jsx("span",{children:"Guardar reflexión"})]})})]})]})},qZe=({plan:e,onBack:t,onSave:r,onDelete:a,isLoading:n=!1})=>{const[i,o]=w.useState(e),[l,c]=w.useState(!1);w.useEffect(()=>{console.log("Plan inicial:",e.momentosClase);const A=v=>{if(typeof v=="object"&&v!==null)return JSON.stringify(v);if(typeof v=="string")try{if(v.trim().startsWith("{")){const y=JSON.parse(v);return JSON.stringify(y)}}catch(y){console.log("No es JSON válido:",y)}return String(v)},m=A(e.momentosClase.inicio),g=A(e.momentosClase.desarrollo),x=A(e.momentosClase.cierre);console.log("Contenido procesado - inicio:",m),o(v=>({...v,momentosClase:{inicio:m,desarrollo:g,cierre:x}}))},[e]);const d=A=>{const{name:m,value:g}=A.target,[x,v]=m.split(".");o(x==="momentosClase"?y=>({...y,momentosClase:{...y.momentosClase,[v]:g}}):y=>({...y,[m]:g}))},u=async()=>{c(!0);try{await r((()=>{const m={...i};return Object.keys(m.momentosClase).forEach(g=>{const x=m.momentosClase[g];if(typeof x=="string"&&(x.includes("TIEMPO:")||x.includes("OBJETIVO:")||x.includes("ACTIVIDADES:")))try{const v=x.match(/TIEMPO:\s*(.*?)(?:\n\n|\n$)/s),y=x.match(/OBJETIVO:\s*(.*?)(?:\n\nACTIVIDADES:|\n$)/s);(v||y)&&console.log("Manteniendo formato para visualización")}catch(v){console.error("Error al procesar plan para guardar:",v)}}),m})())}catch(A){console.error("Error al guardar plan de clase:",A)}finally{c(!1)}},f=A=>{if(console.log("Formateando contenido:",typeof A,A!=null&&A.substring?A.substring(0,50):A),typeof A=="string")try{A.trim().startsWith("{")&&(A=JSON.parse(A),console.log("Contenido parseado a objeto:",A))}catch(m){console.log("Error al parsear JSON:",m)}if(typeof A=="object"&&A!==null)try{let m="";if(A.actividades&&Array.isArray(A.actividades)){m=`${A.tiempo?"TIEMPO: "+A.tiempo+`

`:""}`,m+=`${A.objetivo?`OBJETIVO:
`+A.objetivo+`

`:""}`,m+=`ACTIVIDADES:

`,A.actividades.forEach((x,v)=>{m+=`ACTIVIDAD ${v+1}: ${x.nombre||"Sin nombre"}
`,m+=`${x.descripcion||"Sin descripción"}

`;let y="";x.tipo&&(y+=`• Tipo: ${x.tipo}
`),x.recursos&&(y+=`• Recursos: ${x.recursos}
`),x.evaluacion&&(y+=`• Evaluación: ${x.evaluacion}
`),y&&(m+=`${y}
`)});let g="";return Object.keys(A).forEach(x=>{x!=="tiempo"&&x!=="objetivo"&&x!=="actividades"&&(g+=`• ${x.charAt(0).toUpperCase()+x.slice(1)}: ${typeof A[x]=="object"?JSON.stringify(A[x]):A[x]}
`)}),g&&(m+=`
INFORMACIÓN ADICIONAL:
${g}`),m}else{if(typeof A=="string")try{const y=JSON.parse(A);if(y.actividades||y.tiempo||y.objetivo)return f(y)}catch{}const x=JSON.stringify(A,null,2).replace(/[{}"]/g,"").replace(/,$/gm,"").replace(/^\s*\n/gm,"").split(`
`);let v="";return x.forEach(y=>{if(y.trim().startsWith("["))v+=`
`+y.trim()+`
`;else if(y.trim().startsWith("-"))v+="• "+y.trim().substring(1)+`
`;else if(y.includes(":")){const N=y.split(":");if(N.length>=2){const E=N[0].trim(),B=N.slice(1).join(":").trim();["tiempo","duración","objetivo","actividad","tipo","recursos","evaluación"].includes(E.toLowerCase())?v+=`${E.toUpperCase()}: ${B}
`:v+=`${E}: ${B}
`}else v+=y+`
`}else v+=y+`
`}),v}}catch(m){return console.error("Error al formatear contenido:",m),String(A)}return String(A)};return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),s.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:n||l,children:"← Volver"})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-transparent dark:from-blue-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-blue-400 dark:border-blue-600",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:"bg-blue-100 dark:bg-blue-800 p-1.5 rounded-lg",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-blue-600 dark:text-blue-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),s.jsx("label",{className:"font-bold text-lg text-blue-700 dark:text-blue-300",children:"Inicio de la Clase"})]}),s.jsx("textarea",{name:"momentosClase.inicio",value:f(i.momentosClase.inicio),onChange:d,rows:5,placeholder:"Describe las actividades iniciales, activación de conocimientos previos, motivación y presentación del objetivo de la clase...",className:"w-full p-3 border border-blue-200 dark:border-blue-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-blue-300 dark:focus:ring-blue-700 focus:border-blue-300 focus:outline-none transition-all",disabled:n||l})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-transparent dark:from-green-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-green-400 dark:border-green-600",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-1.5 rounded-lg",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-green-600 dark:text-green-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),s.jsx("label",{className:"font-bold text-lg text-green-700 dark:text-green-300",children:"Desarrollo de la Clase"})]}),s.jsx("textarea",{name:"momentosClase.desarrollo",value:f(i.momentosClase.desarrollo),onChange:d,rows:8,placeholder:"Describe las actividades principales de aprendizaje, secuencia didáctica, estrategias de enseñanza, actividades prácticas...",className:"w-full p-3 border border-green-200 dark:border-green-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-green-300 dark:focus:ring-green-700 focus:border-green-300 focus:outline-none transition-all",disabled:n||l})]}),s.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-transparent dark:from-amber-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-amber-400 dark:border-amber-600",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:"bg-amber-100 dark:bg-amber-800 p-1.5 rounded-lg",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-amber-600 dark:text-amber-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsx("label",{className:"font-bold text-lg text-amber-700 dark:text-amber-300",children:"Cierre de la Clase"})]}),s.jsx("textarea",{name:"momentosClase.cierre",value:f(i.momentosClase.cierre),onChange:d,rows:5,placeholder:"Describe las actividades de cierre, síntesis, metacognición, evaluación formativa y retroalimentación...",className:"w-full p-3 border border-amber-200 dark:border-amber-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-amber-300 dark:focus:ring-amber-700 focus:border-amber-300 focus:outline-none transition-all",disabled:n||l})]})]}),s.jsx("div",{className:"text-right mt-6",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("button",{onClick:()=>a(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:n||l,children:"🗑️ Eliminar Plan"}),s.jsxs("button",{onClick:u,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n||l,children:[l&&s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},KZe=({userId:e})=>{const{actividades:t,save:r}=$Ze(e),[a,n]=w.useState("list"),[i,o]=w.useState(null),[l,c]=w.useState(!1),[d,u]=w.useState(!1),f={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[A,m]=w.useState(f);w.useEffect(()=>{a==="summary"&&i&&g()},[a,i,e]);const g=async()=>{if(i)try{u(!1)}catch(I){console.error("Error al verificar evento en calendario:",I)}},x=I=>{const{name:j,value:k}=I.target;m(T=>({...T,[j]:k}))},v=(I,j,k)=>{m(T=>({...T,tareas:T.tareas.map(L=>L.id===I?{...L,[j]:k}:L)}))},y=()=>{m(I=>({...I,tareas:[...I.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},N=I=>{m(j=>({...j,tareas:j.tareas.filter(k=>k.id!==I)}))},E=async I=>{I.preventDefault(),c(!0);const j=`Eres un especialista en objetivos educacionales según el currículum nacional chileno. Basado en la siguiente información de una actividad pedagógica, genera un objetivo claro y conciso para esta.
    - Nombre: ${A.nombre}
    - Descripción: ${A.descripcion}
    - Tareas: ${A.tareas.map(k=>k.descripcion).join(", ")}
    
    El objetivo debe:
    - Ser breve y conciso (máximo 120 caracteres)
    - Empezar con un verbo en infinitivo (como establece el MINEDUC)
    - Enfocarse en el propósito principal de la actividad
    - Estar alineado con los aprendizajes esperados del currículum nacional
    - Ser medible y observable`;try{oP("Planificación - Actividad Calendario");const k=ln.currentUser,T=k?await k.getIdToken():null;if(!T)throw new Error("No se pudo obtener el token de autenticación");const L=await fetch("/api/generarObjetivoActividad",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify({prompt:j,formData:A})});let F="No generado";L.ok?F=(await L.json()).objetivo||F:(console.error("Error al generar objetivo con IA:",await L.text()),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él."));const S={...A,objetivo:F},M=await r(S),H={...S,id:M};o(H),n("summary")}catch(k){console.error("Error al guardar actividad:",k),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}finally{c(!1)}},B=I=>{console.log("Agregando al calendario:",I),u(!0)},_="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return a==="form"?s.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:s.jsxs("form",{onSubmit:E,className:"space-y-6",children:[s.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:"Detalles de la Actividad"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{name:"nombre",value:A.nombre,onChange:x,placeholder:"Nombre de la Actividad",className:_,required:!0,disabled:l}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("input",{name:"fecha",type:"date",value:A.fecha,onChange:x,className:_,required:!0,disabled:l}),s.jsx("input",{name:"hora",type:"time",value:A.hora,onChange:x,className:_,required:!0,disabled:l})]}),s.jsx("textarea",{name:"descripcion",value:A.descripcion,onChange:x,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:_,required:!0,disabled:l}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("input",{name:"ubicacion",value:A.ubicacion,onChange:x,placeholder:"Ubicación",className:_,required:!0,disabled:l}),s.jsx("input",{name:"participantes",value:A.participantes,onChange:x,placeholder:"Participantes",className:_,required:!0,disabled:l})]}),s.jsx("textarea",{name:"recursosGenerales",value:A.recursosGenerales,onChange:x,placeholder:"Recursos Generales Necesarios",rows:2,className:_,disabled:l})]})]}),s.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),s.jsx("button",{type:"button",onClick:y,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:l,children:"+ Agregar Tarea"})]}),s.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:A.tareas.map((I,j)=>s.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[s.jsx("button",{type:"button",onClick:()=>N(I.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:l,children:"×"}),s.jsx("textarea",{value:I.descripcion,onChange:k=>v(I.id,"descripcion",k.target.value),placeholder:`Descripción de la Tarea ${j+1}`,rows:2,className:_,required:!0,disabled:l}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[s.jsx("input",{value:I.responsable,onChange:k=>v(I.id,"responsable",k.target.value),placeholder:"Responsable",className:_,required:!0,disabled:l}),s.jsx("input",{value:I.recursos,onChange:k=>v(I.id,"recursos",k.target.value),placeholder:"Recursos Necesarios",className:_,disabled:l})]})]},I.id))})]}),s.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[s.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),s.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx("button",{type:"button",onClick:()=>n("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:l,children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:l?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):a==="summary"&&i?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[s.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[s.jsx("span",{className:"text-2xl",children:"✓"}),s.jsxs("div",{children:[s.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),s.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),s.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[s.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[s.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),s.jsx("span",{children:i.nombre})]}),s.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[s.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),s.jsx("span",{children:new Date(`${i.fecha}T${i.hora}`).toLocaleString("es-CL")})]}),s.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[s.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),s.jsx("p",{children:i.descripcion})]}),s.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[s.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),s.jsx("span",{children:i.ubicacion})]}),s.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[s.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),s.jsx("span",{children:i.participantes})]}),s.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[s.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),s.jsx("p",{children:i.recursosGenerales})]}),s.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[s.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),s.jsx("p",{children:i.objetivo})]})]}),s.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[s.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),s.jsx("button",{onClick:()=>B(i),disabled:d,className:`font-bold px-4 py-2 rounded-lg transition-colors ${d?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:d?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),s.jsx("button",{onClick:()=>{n("list"),o(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),s.jsx("button",{onClick:()=>{n("form"),m(f)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),s.jsx("div",{className:"space-y-3",children:t.length>0?t.map(I=>s.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:I.nombre}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(I.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",I.ubicacion]})]},I.id)):s.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},gX=({currentUser:e})=>{const t=(e==null?void 0:e.uid)||(e==null?void 0:e.id)||(e==null?void 0:e.email)||"";console.log("🔑 PlanificacionDocente - Usuario actual:",{uid:e==null?void 0:e.uid,id:e==null?void 0:e.id,email:e==null?void 0:e.email,nombreCompleto:e==null?void 0:e.nombreCompleto,usuarioSeleccionado:t});const r=t&&t.length>0;console.log("🔑 ID de usuario válido:",r);const{planificaciones:a,save:n,update:i,remove:o,loading:l,diagnosticarYReparar:c}=zZe(r?t:null),d={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[u,f]=w.useState(d),[A,m]=w.useState(null),[g,x]=w.useState(!1),[v,y]=w.useState(null),[N,E]=w.useState("unidad"),[B,_]=w.useState(null),[I,j]=w.useState(null),[k,T]=w.useState([]),[L,F]=w.useState([]),[S,M]=w.useState(""),[H,K]=w.useState(""),[Q,G]=w.useState("planificacion"),[X,Z]=w.useState(null),[U,Y]=w.useState(!1),P=(Ae,pe)=>{A&&j({planId:A.id,lessonIndex:Ae,lessonData:pe})},D=Ae=>{m(Ae),f({asignatura:Ae.asignatura,nivel:Ae.nivel,nombreUnidad:Ae.nombreUnidad,contenidos:Ae.contenidos,cantidadClases:Ae.cantidadClases,observaciones:Ae.observaciones,ideasParaUnidad:Ae.ideasParaUnidad})},W=async Ae=>{if(window.confirm("¿Estás seguro de que quieres eliminar esta planificación?"))try{await o(Ae),(A==null?void 0:A.id)===Ae&&m(null)}catch(pe){console.error("Error al eliminar planificación:",pe),alert("No se pudo eliminar la planificación.")}},J=async Ae=>{if(window.confirm("¿Estás seguro de que quieres eliminar este plan de clase?"))try{await o(Ae),_(null)}catch(pe){console.error("Error al eliminar plan de clase:",pe),alert("No se pudo eliminar el plan de clase.")}},ce=w.useMemo(()=>e.asignaturas||[],[e.asignaturas]),ie=w.useMemo(()=>{const Ae=e.cursos||[],pe=new Set;return Ae.forEach(ke=>{ke.startsWith("1º")?pe.add("1º Medio"):ke.startsWith("2º")?pe.add("2º Medio"):ke.startsWith("3º")?pe.add("3º Medio"):ke.startsWith("4º")&&pe.add("4º Medio")}),Array.from(pe)},[e.cursos]);w.useEffect(()=>{f(Ae=>({...Ae,asignatura:ce[0]||"",nivel:ie[0]||""}))},[ce,ie]);const re=Ae=>{const{name:pe,value:ke}=Ae.target;f(Le=>({...Le,[pe]:pe==="cantidadClases"?parseInt(ke,10):ke}))};w.useEffect(()=>{const Ae=Nue(pe=>{const ke=pe.filter(Le=>Array.isArray(Le.tags)&&Le.tags.includes("planificacion"));T(ke)});return()=>{try{typeof Ae=="function"&&Ae()}catch{}}},[]);const de=Ae=>{F(pe=>pe.includes(Ae)?pe.filter(ke=>ke!==Ae):[...pe,Ae])},oe=()=>{const{asignatura:Ae,nivel:pe,nombreUnidad:ke,contenidos:Le,cantidadClases:qe,observaciones:ze,ideasParaUnidad:Re}=u,We=k.filter(Ze=>L.includes(Ze.id)),ct=We.length>0?`

Documentos institucionales a considerar (Subdirección):
${We.map(Ze=>`- ${Ze.title}${Ze.description?`: ${Ze.description}`:""}`).join(`
`)}

Usa estas referencias para alinear la planificación con los lineamientos institucionales.`:"";return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica siguiendo fielmente las bases curriculares y los objetivos de aprendizaje del Currículum Nacional Chileno (MINEDUC) para ${Ae} en ${pe}. La planificación debe presentarse en formato JSON estructurado.

    **Información Base:**
    - Asignatura: ${Ae}
    - Nivel: ${pe}
    - Nombre de la Unidad: "${ke}"
    - Contenidos clave a trabajar (insumo principal): "${Le}"
    - Cantidad de clases para la unidad: ${qe}
    - Ideas y perspectiva del docente para la unidad: "${Re||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${ze||"Ninguna"}"
    
    **Orientaciones Curriculares Nacionales:**
    - Asegúrate que los objetivos estén alineados con las Bases Curriculares del MINEDUC para ${Ae} en ${pe}.
    - Contempla los Objetivos de Aprendizaje (OA) oficiales del currículum en línea chileno.
    - Incorpora los Objetivos de Aprendizaje Transversales (OAT) cuando sea apropiado.
    - Para niveles técnico-profesionales, considera los perfiles de egreso de cada especialidad.

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${qe} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.${ct}`},be=async Ae=>{Ae.preventDefault(),x(!0),y(null);try{oP("Planificación - Unidad");const pe=oe(),ke=ln.currentUser,Le=ke?await ke.getIdToken():null;if(!Le)throw new Error("No se pudo obtener el token de autenticación");const qe=await fetch("/api/generarUnidadPlanificacion",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Le}`},body:JSON.stringify({prompt:pe,unidadFormData:u})});if(!qe.ok){const We=await qe.text();throw console.error("Error response from backend:",We),new Error(`Error al generar la unidad con IA: ${qe.statusText}`)}const ze=await qe.json(),Re={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:u.asignatura,nivel:u.nivel,nombreUnidad:u.nombreUnidad,contenidos:u.contenidos,cantidadClases:u.cantidadClases,observaciones:u.observaciones,ideasParaUnidad:u.ideasParaUnidad,objetivosAprendizaje:ze.objetivosAprendizaje,indicadoresEvaluacion:ze.indicadoresEvaluacion,detallesLeccion:ze.detallesLeccion,documentosInstitucionales:k.filter(We=>L.includes(We.id)).map(We=>({id:We.id,title:We.title}))};if(A)await i(A.id,Re),m({...Re,id:A.id});else{const We=await n(Re);m({...Re,id:We})}}catch(pe){console.error("Error al generar planificación con IA",pe),y("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{x(!1)}},q=async(Ae,pe)=>{x(!0),y(null);const ke=()=>`Eres un experto pedagogo chileno especialista en diseño de planes de clase alineados con el currículum nacional. A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${pe.asignatura}
    - Nivel: ${pe.nivel}
    - Objetivo de la clase: ${Ae.objetivosAprendizaje}
    - Contenidos: ${Ae.contenidosConceptuales}
    - Actividades sugeridas: ${Ae.actividades}
    
    **Orientaciones didácticas**:
    - El plan debe seguir el modelo de diseño instruccional del Ministerio de Educación de Chile.
    - Incluir estrategias de aprendizaje activo y centrado en el estudiante.
    - Incorporar metodologías que desarrollen habilidades del siglo XXI según el currículum chileno.
    - Considerar momentos para activación de conocimientos previos, desarrollo de aprendizajes y metacognición/evaluación.
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{oP("Planificación - Utilizar Clase");const Le=ke(),qe=ln.currentUser,ze=qe?await qe.getIdToken():null;if(!ze)throw new Error("No se pudo obtener el token de autenticación");const Re=await fetch("/api/generarClasePlanificacion",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ze}`},body:JSON.stringify({prompt:Le,unitPlan:pe,lessonDetail:Ae,currentUser:e})});if(!Re.ok){const Ze=await Re.text();throw console.error("Error response from backend:",Ze),new Error(`Error al generar el plan de clase con IA: ${Re.statusText}`)}const We=await Re.json(),ct={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:pe.asignatura,nivel:pe.nivel,contenidos:Ae.contenidosConceptuales,observaciones:"",nombreClase:Ae.actividades,duracionClase:80,momentosClase:We,detalleLeccionOrigen:Ae};await n(ct),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),E("clase")}catch(Le){console.error("Error al generar plan de clase con IA",Le),y("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{x(!1)}},we=async Ae=>{if(I)try{const{planId:pe,lessonIndex:ke}=I,Le=a.find(Re=>Re.id===pe&&Re.tipo==="Unidad");if(!Le)return;const qe=[...Le.detallesLeccion];qe[ke]=Ae;const ze={...Le,detallesLeccion:qe};await i(pe,ze),m(ze),j(null)}catch(pe){console.error("Error al actualizar lección:",pe),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},Te="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",Ee=async()=>{try{console.log("🔄 Recargando planificaciones manualmente...");const{getPlanificacionesByUser:Ae}=await ps(async()=>{const{getPlanificacionesByUser:ke}=await Promise.resolve().then(()=>iP);return{getPlanificacionesByUser:ke}},void 0);if(!t){console.warn("🔄 No hay userId para recargar planificaciones");return}const pe=await Ae(t);console.log(`🔄 Obtenidas ${pe.length} planificaciones frescas`),alert(`Se han encontrado ${pe.length} planificaciones en la base de datos. Recargue la página para ver los cambios.`),window.location.reload()}catch(Ae){console.error("🔄 Error recargando planificaciones:",Ae),alert("Hubo un error al recargar las planificaciones. Intente recargar la página manualmente.")}},[ue,ge]=w.useState({visible:!1,ejecutando:!1,resultado:null}),he=async()=>{ge(pe=>({...pe,ejecutando:!0,resultado:null}));const Ae=await c();ge(pe=>({...pe,ejecutando:!1,resultado:Ae}))},ve=()=>{var Ae;return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>ge(pe=>({...pe,visible:!pe.visible})),className:"bg-slate-600 hover:bg-slate-700 text-white px-3 py-1 rounded-md text-sm",children:"Diagnóstico"}),s.jsxs("button",{onClick:Ee,className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md text-sm flex items-center gap-1",children:[s.jsx(_k,{className:"w-4 h-4"}),s.jsx("span",{children:"Recargar"})]})]})]}),ue.visible&&s.jsxs("div",{className:"mb-6 p-4 border border-slate-300 dark:border-slate-600 rounded-lg",children:[s.jsx("h3",{className:"font-bold text-lg mb-2",children:"Herramienta de Diagnóstico"}),s.jsx("p",{className:"text-sm text-slate-500 mb-3",children:"Esta herramienta intentará resolver problemas con las planificaciones que no aparecen en el historial."}),ue.resultado&&s.jsx("div",{className:`p-3 mb-3 rounded-md ${ue.resultado.status==="ok"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200":ue.resultado.status==="repaired"?"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200"}`,children:ue.resultado.message}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:he,disabled:ue.ejecutando,className:"bg-slate-700 hover:bg-slate-800 text-white px-4 py-2 rounded-md flex items-center gap-2 disabled:opacity-50",children:ue.ejecutando?s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx("span",{children:"Ejecutar diagnóstico"})}),((Ae=ue.resultado)==null?void 0:Ae.status)==="repaired"&&s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-md",children:"Recargar página"})]})]}),l?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):s.jsxs("form",{onSubmit:be,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),s.jsx("select",{name:"asignatura",value:u.asignatura,onChange:re,className:Te,required:!0,disabled:g,children:ce.map(pe=>s.jsx("option",{value:pe,children:pe},pe))})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),s.jsx("select",{name:"nivel",value:u.nivel,onChange:re,className:Te,required:!0,disabled:g,children:ie.map(pe=>s.jsx("option",{value:pe,children:pe},pe))})]}),s.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[s.jsx("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre de la Unidad"}),s.jsx("input",{type:"text",name:"nombreUnidad",value:u.nombreUnidad,onChange:re,className:Te,placeholder:"Ej: Introducción a la Programación",required:!0,disabled:g})]}),s.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[s.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos Clave"}),s.jsx("textarea",{name:"contenidos",value:u.contenidos,onChange:re,rows:3,placeholder:"Describe los temas, conceptos y habilidades principales que se deben abordar en la unidad. Sé lo más específico posible.",className:Te,required:!0,disabled:g})]}),s.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[s.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),s.jsx("textarea",{name:"ideasParaUnidad",value:u.ideasParaUnidad,onChange:re,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:Te,disabled:g})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),s.jsx("input",{type:"number",name:"cantidadClases",value:u.cantidadClases,onChange:re,className:Te,min:"1",max:"20",disabled:g})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),s.jsx("textarea",{name:"observaciones",value:u.observaciones,onChange:re,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:Te,disabled:g})]})]}),s.jsx("div",{className:"pt-4 text-right",children:s.jsx("button",{type:"submit",disabled:g||l,className:"bg-gradient-to-r from-indigo-600 to-indigo-700 text-white font-semibold py-3 px-6 rounded-lg hover:from-indigo-700 hover:to-indigo-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[180px] shadow-md hover:shadow-lg transition-all",children:g?s.jsx(_k,{className:"w-5 h-5 animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(Rg,{className:"w-5 h-5"}),s.jsx("span",{children:A?"Regenerar Plan":"Generar con IA"})]})})}),v&&s.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:v})]})]}),A&&s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),s.jsx(GZe,{plan:A,onEditLesson:P,onUseLesson:q,onUpdatePlan:i,isLoading:g})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),l?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):s.jsxs("div",{className:"space-y-4",children:[console.log("💾 RENDERIZANDO HISTORIAL - Cantidad de planificaciones:",a.length),console.log("💾 RENDERIZANDO HISTORIAL - Cantidad de unidades:",a.filter(pe=>pe.tipo==="Unidad").length),a.length>0?a.filter(pe=>pe.tipo==="Unidad").map(pe=>s.jsx("div",{className:`p-5 border rounded-xl transition-all ${(A==null?void 0:A.id)===pe.id?"bg-indigo-50/50 border-indigo-200 dark:bg-indigo-900/20 dark:border-indigo-500/30 shadow-lg shadow-indigo-100/20 dark:shadow-indigo-900/10":"bg-white hover:bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:hover:bg-slate-700/50"}`,children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:pe.nombreUnidad}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(pe.fechaCreacion).toLocaleString("es-CL")]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",pe.contenidos]}),s.jsx("div",{className:"mt-2 flex items-center gap-2",children:pe.reflexionUnidad&&pe.reflexionUnidad.fortalezas&&pe.reflexionUnidad.mejoras&&pe.reflexionUnidad.debilidades?s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",children:"Reflexión completa"}):s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300",children:"Reflexión pendiente"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>D(pe),className:"inline-flex items-center gap-1 px-3 py-1.5 text-indigo-700 bg-indigo-50 hover:bg-indigo-100 dark:text-indigo-300 dark:bg-indigo-900/30 dark:hover:bg-indigo-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:g,children:[s.jsx(i$,{className:"w-4 h-4"}),s.jsx("span",{children:"Editar"})]}),s.jsxs("button",{onClick:()=>W(pe.id),title:"Eliminar",className:"inline-flex items-center gap-1 px-3 py-1.5 text-red-700 bg-red-50 hover:bg-red-100 dark:text-red-300 dark:bg-red-900/30 dark:hover:bg-red-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:g,children:[s.jsx(Ia,{className:"w-4 h-4"}),s.jsx("span",{children:"Eliminar"})]})]})]})},pe.id)):s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})]})]})]})},le=()=>{const Ae=a.filter(pe=>pe.tipo==="Clase").sort((pe,ke)=>new Date(ke.fechaCreacion).getTime()-new Date(pe.fechaCreacion).getTime());return B?s.jsx(qZe,{plan:B,onBack:()=>_(null),onDelete:J,onSave:async pe=>{try{await i(pe.id,pe),_(pe)}catch(ke){console.error("Error al actualizar plan de clase:",ke),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:g}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-lg border border-slate-100 dark:border-slate-700/50",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx(VEe,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"}),s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Planes de Clase"})]}),l?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):s.jsx("div",{className:"space-y-4",children:Ae.length>0?Ae.map(pe=>s.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:pe.nombreClase}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(pe.fechaCreacion).toLocaleString("es-CL")]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",pe.contenidos]})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("button",{onClick:()=>_(pe),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},pe.id)):s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})},ne=()=>{if(!((e==null?void 0:e.profile)==="SUBDIRECCION"))return s.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Esta sección está disponible solo para Subdirección."})});const pe=Re=>{var ct;const We=((ct=Re.target.files)==null?void 0:ct[0])||null;Z(We)},ke=async Re=>{if(Re.preventDefault(),!(!X||!S.trim())){Y(!0);try{const We=Q.split(",").map(wt=>wt.trim()).filter(Boolean);We.includes("planificacion")||We.push("planificacion");const ct=await Eue(S.trim(),H.trim(),We),{storagePath:Ze,contentType:Qe}=await Cue(ct,X);await MS(ct,Ze,S.trim(),H.trim(),We,Qe),M(""),K(""),G("planificacion"),Z(null),alert("Documento subido e indexado correctamente.")}catch(We){console.error("Error subiendo documento de planificación:",We),alert("No se pudo subir/indexar el documento.")}finally{Y(!1)}}},Le=async Re=>{try{if(!Re.storagePath)return alert("El documento no tiene archivo asociado.");await MS(Re.id,Re.storagePath,Re.title,Re.description||"",Re.tags||["planificacion"],Re.contentType),alert("Reindexación encolada.")}catch(We){console.error("Error reindexando:",We),alert("Error reindexando el documento.")}},qe=async Re=>{try{if(!Re.storagePath)return alert("No hay archivo asociado.");const We=await gA(vu(jx,Re.storagePath));window.open(We,"_blank")}catch(We){console.error("Error obteniendo URL:",We),alert("No se pudo abrir el documento.")}},ze=async Re=>{if(confirm(`¿Eliminar "${Re.title}"? Esta acción no se puede deshacer.`))try{await jue(Re.id)}catch(We){console.error("Error eliminando documento:",We),alert("No se pudo eliminar el documento.")}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Repositorio institucional para Planificación"}),s.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:["Suba documentos (PDF/TXT/DOCX) que el profesorado podrá seleccionar al planificar. Se etiquetarán con ",s.jsx("strong",{children:"planificacion"}),"."]}),s.jsxs("form",{onSubmit:ke,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Título"}),s.jsx("input",{value:S,onChange:Re=>M(Re.target.value),className:Te,placeholder:"Ej: PEI 2025",required:!0})]}),s.jsxs("div",{className:"md:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tags (coma)"}),s.jsx("input",{value:Q,onChange:Re=>G(Re.target.value),className:Te})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripción"}),s.jsx("textarea",{value:H,onChange:Re=>K(Re.target.value),rows:2,className:Te,placeholder:"Breve descripción"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Archivo"}),s.jsx("input",{type:"file",accept:".pdf,.txt,.docx,application/pdf,text/plain,application/vnd.openxmlformats-officedocument.wordprocessingml.document",onChange:pe,className:"block w-full"})]}),s.jsx("div",{className:"md:col-span-2 flex justify-end",children:s.jsxs("button",{disabled:U||!X||!S.trim(),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg disabled:opacity-50 flex items-center gap-2",children:[U?s.jsx(_k,{className:"w-4 h-4 animate-spin"}):s.jsx(Si,{className:"w-4 h-4"}),s.jsx("span",{children:"Subir e indexar"})]})})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Documentos disponibles"}),k.length===0?s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'Aún no hay documentos institucionales con la etiqueta "planificacion".'}):s.jsx("div",{className:"space-y-3",children:k.map(Re=>s.jsxs("div",{className:"p-4 rounded-lg border dark:border-slate-700 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-100",children:Re.title}),Re.description&&s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:Re.description}),Array.isArray(Re.tags)&&Re.tags.length>0&&s.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:Re.tags.map(We=>s.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300",children:We},We))})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>qe(Re),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm",children:"Abrir"}),s.jsx("button",{onClick:()=>Le(Re),className:"text-amber-600 hover:text-amber-800 dark:text-amber-400 dark:hover:text-amber-300 text-sm",children:"Reindexar"}),s.jsx("button",{onClick:()=>ze(Re),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 text-sm",children:"Eliminar"})]})]},Re.id))})]})]})};return w.useEffect(()=>{if((async()=>{try{if(console.log("📊 Diagnóstico de planificaciones - Inicio"),console.log(`userId: ${t}`),!t){console.warn("📊 Sin userId, no se pueden obtener planificaciones");return}const{collection:pe,query:ke,where:Le,getDocs:qe}=await ps(async()=>{const{collection:ct,query:Ze,where:Qe,getDocs:wt}=await Promise.resolve().then(()=>Jb);return{collection:ct,query:Ze,where:Qe,getDocs:wt}},void 0),{db:ze}=await ps(async()=>{const{db:ct}=await Promise.resolve().then(()=>aL);return{db:ct}},void 0),Re=ke(pe(ze,"planificaciones"),Le("userId","==",t)),We=await qe(Re);if(console.log(`📊 Documentos en Firestore: ${We.docs.length}`),We.docs.length>0){console.log("📊 Primer documento:",We.docs[0].data());const ct=We.docs.filter(Qe=>Qe.data().tipo==="Unidad");console.log(`📊 Documentos de tipo Unidad: ${ct.length}`);const Ze=ct.filter(Qe=>Array.isArray(Qe.data().detallesLeccion)&&Qe.data().detallesLeccion!==void 0);if(console.log(`📊 Unidades con detallesLeccion válidos: ${Ze.length}`),ct.length>Ze.length){console.log(`📊 Intentando corregir ${ct.length-Ze.length} unidades inválidas...`);for(const Qe of ct){const wt=Qe.data();if(!Array.isArray(wt.detallesLeccion)||wt.detallesLeccion===void 0)try{console.log(`📊 Corrigiendo documento ${Qe.id}...`);const{doc:ar,updateDoc:qt}=await ps(async()=>{const{doc:gr,updateDoc:Pr}=await Promise.resolve().then(()=>Jb);return{doc:gr,updateDoc:Pr}},void 0);await qt(ar(ze,"planificaciones",Qe.id),{detallesLeccion:[]}),console.log(`📊 Documento ${Qe.id} corregido con éxito`)}catch(ar){console.error(`📊 Error al corregir documento ${Qe.id}:`,ar)}}}}console.log("📊 Diagnóstico de planificaciones - Finalizado")}catch(pe){console.error("📊 Error en diagnóstico de planificaciones:",pe)}})(),!l){console.log(`🔍 Verificando ${a.length} planificaciones recibidas...`),console.log("🔍 Tipos de planificaciones:",a.map(ke=>ke.tipo));const pe=a.filter(ke=>ke.tipo==="Unidad"&&(!Array.isArray(ke.detallesLeccion)||ke.detallesLeccion===void 0));pe.length>0&&(console.warn(`🔍 Encontradas ${pe.length} unidades con formato inválido`),pe.forEach(async ke=>{try{await i(ke.id,{...ke,detallesLeccion:[]}),console.log(`🔍 Reparada planificación ${ke.id}`)}catch(Le){console.error(`🔍 Error al reparar planificación ${ke.id}:`,Le)}}))}},[t,a,l,i]),e?r?s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[s.jsx(Lae,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400"}),s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación Docente"})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-2",children:s.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[s.jsxs("button",{onClick:()=>E("unidad"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${N==="unidad"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[s.jsx(Rs,{className:"w-4 h-4"}),s.jsx("span",{children:"Unidad"})]}),s.jsxs("button",{onClick:()=>E("clase"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${N==="clase"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[s.jsx(_ke,{className:"w-4 h-4"}),s.jsx("span",{children:"Clase"})]}),s.jsxs("button",{onClick:()=>E("calendario"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${N==="calendario"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[s.jsx(Ro,{className:"w-4 h-4"}),s.jsx("span",{children:"Actividades Calendario"})]}),s.jsxs("button",{onClick:()=>E("materiales"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${N==="materiales"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[s.jsx(KD,{className:"w-4 h-4"}),s.jsx("span",{children:"Mis Materiales"})]}),(e==null?void 0:e.profile)==="SUBDIRECCION"&&s.jsxs("button",{onClick:()=>E("config"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${N==="config"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[s.jsx(i$,{className:"w-4 h-4"}),s.jsx("span",{children:"Configuración"})]})]})}),N==="unidad"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Documentación institucional (opcional)"}),k.length===0?s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Subdirección aún no ha cargado documentos. Cuando existan, podrás seleccionarlos aquí para considerar en la generación."}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:k.map(Ae=>s.jsxs("label",{className:"flex items-start gap-2 p-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/30 cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"mt-1",checked:L.includes(Ae.id),onChange:()=>de(Ae.id)}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-100",children:Ae.title}),Ae.description&&s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:Ae.description})]})]},Ae.id))})]}),ve()]}),N==="clase"&&le(),N==="calendario"&&s.jsx(KZe,{userId:t}),N==="materiales"&&s.jsx(UZe,{userId:t,planificaciones:a}),N==="config"&&ne(),I&&s.jsx(VZe,{lesson:I.lessonData,onClose:()=>j(null),onSave:we,isLoading:g})]}):s.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700 rounded-lg p-8 max-w-2xl mx-auto my-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-amber-800 dark:text-amber-300 mb-4",children:"Error de identificación de usuario"}),s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-md p-4 mb-4 overflow-auto max-h-40",children:s.jsx("pre",{className:"text-xs text-slate-600 dark:text-slate-300 whitespace-pre-wrap",children:JSON.stringify(e,null,2)})}),s.jsx("p",{className:"text-amber-700 dark:text-amber-400 mb-4",children:"No se pudo determinar su identificador de usuario para cargar las planificaciones. Este problema puede deberse a:"}),s.jsxs("ul",{className:"list-disc pl-5 text-amber-700 dark:text-amber-400 mb-6 space-y-2",children:[s.jsx("li",{children:"La sesión no se ha inicializado correctamente"}),s.jsx("li",{children:"Su cuenta no tiene asignado un ID válido"}),s.jsx("li",{children:"Hay un problema en la sincronización con la base de datos"})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-600 hover:bg-amber-700 text-white py-2 px-6 rounded-md transition-colors",children:"Recargar aplicación"})})]}):s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),s.jsx("p",{className:"text-sm text-slate-400",children:"No se recibieron datos de usuario"})]})})},h3="events",WZe=async()=>{try{const e=jt(ut(lr,h3),Gt("date","asc"));return(await Nr(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},XZe=async e=>{try{return{id:(await Kr(ut(lr,h3),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},YZe=async(e,t)=>{try{const r=$t(lr,h3,e);await zi(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},JZe=async e=>{try{const t=$t(lr,h3,e);await Ua(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},ZZe=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],xX={[sa.EVALUACION]:s.jsx(Rs,{className:"h-4 w-4"}),[sa.ACTO]:s.jsx(Uae,{className:"h-4 w-4"}),[sa.ACTIVIDAD_FOCALIZADA]:s.jsx(t1,{className:"h-4 w-4"}),[sa.SALIDA_PEDAGOGICA]:s.jsx(oke,{className:"h-4 w-4"})},eet=e=>{switch(e.type){case sa.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case sa.ACTO:return`Acto: ${e.ubicacion}`;case sa.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case sa.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},tet=({isOpen:e,onClose:t,onSave:r,onDelete:a,event:n,date:i,isLoading:o})=>{const[l,c]=w.useState({});w.useEffect(()=>{c(n||{type:sa.EVALUACION,subtype:mg.PRUEBA_PARCIAL,asignatura:cn[0],curso:on[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[n,e]);const d="w-full rounded-md border border-white/30 bg-white/10 dark:bg-white/5 text-slate-800 dark:text-slate-100 placeholder-slate-400 backdrop-blur-md shadow-sm focus:outline-none focus:ring-4 focus:ring-yellow-400/30 focus:border-blue-300 dark:border-white/10 dark:focus:border-blue-400",u=x=>{const{name:v,value:y}=x.target;c(N=>({...N,[v]:y}))},f=x=>{c(v=>{if(v.type===sa.SALIDA_PEDAGOGICA){const y=v.cursos||[],N=y.includes(x)?y.filter(E=>E!==x):[...y,x];return{...v,cursos:N.sort()}}return v})},A=x=>{var y;x.preventDefault();let v;switch(l.type){case sa.EVALUACION:{const N={date:i,type:sa.EVALUACION,subtype:l.subtype,asignatura:l.asignatura,curso:l.curso,contenidos:l.contenidos};(l.subtype===mg.RUBRICA||l.subtype===mg.PAUTA_COTEJO)&&((y=l.enlace)!=null&&y.trim())&&(N.enlace=l.enlace.trim()),v=N;break}case sa.ACTO:v={date:i,type:sa.ACTO,responsables:l.responsables,ubicacion:l.ubicacion,horario:l.horario};break;case sa.ACTIVIDAD_FOCALIZADA:v={date:i,type:sa.ACTIVIDAD_FOCALIZADA,responsables:l.responsables,ubicacion:l.ubicacion,horario:l.horario};break;case sa.SALIDA_PEDAGOGICA:v={date:i,type:sa.SALIDA_PEDAGOGICA,responsable:l.responsable,ubicacion:l.ubicacion,cursos:l.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(v)};if(!e)return null;const m=new Date(`${i}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),g=()=>{switch(l.type){case sa.EVALUACION:return s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtipo"}),s.jsx("select",{id:"subtype",name:"subtype",value:l.subtype,onChange:u,required:!0,className:d,children:i5e.map(x=>s.jsx("option",{value:x,children:x},x))})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignatura"}),s.jsx("select",{id:"asignatura",name:"asignatura",value:l.asignatura,onChange:u,required:!0,className:d,children:cn.map(x=>s.jsx("option",{value:x,children:x},x))})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Curso"}),s.jsx("select",{id:"curso",name:"curso",value:l.curso,onChange:u,required:!0,className:d,children:on.map(x=>s.jsx("option",{value:x,children:x},x))})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contenidos"}),s.jsx("textarea",{id:"contenidos",name:"contenidos",value:l.contenidos||"",onChange:u,required:!0,rows:3,className:d})]}),(l.subtype===mg.RUBRICA||l.subtype===mg.PAUTA_COTEJO)&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),s.jsx("input",{id:"enlace",name:"enlace",type:"url",value:l.enlace||"",onChange:u,placeholder:"https://...",className:d})]})]});case sa.ACTO:case sa.ACTIVIDAD_FOCALIZADA:return s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsables"}),s.jsx("input",{id:"responsables",name:"responsables",type:"text",value:l.responsables||"",onChange:u,required:!0,className:d})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación"}),s.jsxs("div",{className:"relative",children:[s.jsx(J2,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),s.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:l.ubicacion||"",onChange:u,required:!0,className:`${d} pl-9`})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Horario"}),s.jsxs("div",{className:"relative",children:[s.jsx(bc,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),s.jsx("input",{id:"horario",name:"horario",type:"text",value:l.horario||"",onChange:u,required:!0,className:`${d} pl-9`})]})]})]});case sa.SALIDA_PEDAGOGICA:return s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsable"}),s.jsx("input",{id:"responsable",name:"responsable",type:"text",value:l.responsable||"",onChange:u,required:!0,className:d})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),s.jsxs("div",{className:"relative",children:[s.jsx(J2,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),s.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:l.ubicacion||"",onChange:u,required:!0,className:`${d} pl-9`})]})]}),s.jsxs("fieldset",{children:[s.jsx("legend",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),s.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border border-white/30 dark:border-white/10 p-2 rounded-md text-slate-700 dark:text-slate-300 bg-white/5 backdrop-blur-md",children:on.map(x=>s.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[s.jsx("input",{type:"checkbox",checked:(l.cursos||[]).includes(x),onChange:()=>f(x),className:"h-4 w-4 rounded text-yellow-500 focus:ring-yellow-400"}),s.jsx("span",{children:x})]},x))})]})]});default:return null}};return s.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4",onClick:t,style:{background:"rgba(2, 6, 23, 0.55)"},children:s.jsx("div",{className:"relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/20 bg-gradient-to-br from-blue-50/70 via-white/50 to-yellow-50/70 dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/70 backdrop-blur-2xl shadow-2xl",onClick:x=>x.stopPropagation(),children:s.jsxs("form",{onSubmit:A,children:[s.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:n?"Editar Evento":"Agregar Evento"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-300/90 font-semibold",children:m})]}),s.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 hover:bg-white/20 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:s.jsx(ho,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),s.jsx("select",{id:"type",name:"type",value:l.type,onChange:u,className:d,children:Object.values(sa).map(x=>s.jsx("option",{value:x,children:x},x))})]}),g()]})]}),s.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-t border-white/20 flex justify-between items-center",children:[s.jsx("div",{children:n&&a&&s.jsxs("button",{type:"button",onClick:a,disabled:o,className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:[s.jsx(Ia,{className:"h-4 w-4"}),o?"Eliminando...":"Eliminar"]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{type:"button",onClick:t,disabled:o,className:"inline-flex items-center gap-2 rounded-lg bg-white/20 px-4 py-2 font-semibold text-slate-800 hover:bg-white/30 backdrop-blur-md dark:bg-white/10 dark:text-slate-100 dark:hover:bg-white/20 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:[s.jsx(ho,{className:"h-4 w-4"}),"Cancelar"]}),s.jsxs("button",{type:"submit",disabled:o,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-yellow-500 px-4 py-2 font-bold text-white hover:opacity-95 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-300/40",children:[s.jsx(kl,{className:"h-4 w-4"}),o?"Guardando...":"Guardar"]})]})]})]})})})},ret=({profile:e})=>{const[t,r]=w.useState(new Date),[a,n]=w.useState([]),[i,o]=w.useState(!1),[l,c]=w.useState(null),[d,u]=w.useState(!1),[f,A]=w.useState(Object.values(sa)),[m,g]=w.useState(!1),[x,v]=w.useState(null),[y,N]=w.useState(null),E=w.useCallback(async()=>{o(!0);try{const F=await WZe();n(F),c(null)}catch(F){console.error("Error al cargar eventos desde Firestore",F),c("No se pudieron cargar los eventos desde la nube.")}finally{o(!1)}},[]);w.useEffect(()=>{E()},[E]);const B=w.useMemo(()=>{const F=t.getFullYear(),S=t.getMonth(),M=new Date(F,S,1).getDay(),H=new Date(F,S+1,0).getDate(),K=[];let Q=1;for(let G=0;G<6;G++){const X=[];for(let Z=0;Z<7;Z++)G===0&&Z<M||Q>H?X.push(null):(X.push(new Date(F,S,Q)),Q++);if(K.push(X),Q>H)break}return K},[t]),_=F=>{A(S=>S.includes(F)?S.filter(M=>M!==F):[...S,F])},I=()=>{f.length===Object.values(sa).length?A([]):A(Object.values(sa))},j=F=>{e!==Tt.ESTUDIANTE&&(v(F.toISOString().split("T")[0]),N(null),g(!0))},k=(F,S)=>{S.stopPropagation(),e!==Tt.ESTUDIANTE&&(v(F.date),N(F),g(!0))},T=async F=>{u(!0);try{y?await YZe(y.id,F):await XZe(F),await E(),g(!1)}catch(S){console.error("Error al guardar evento:",S);const M=S instanceof Error?S.message:"Error desconocido";c(`Error al guardar el evento: ${M}`)}finally{u(!1)}},L=async()=>{if(y){u(!0);try{await JZe(y.id),await E(),g(!1)}catch(F){console.error("Error al eliminar evento:",F);const S=F instanceof Error?F.message:"Error desconocido";c(`No se pudo eliminar el evento: ${S}`)}finally{u(!1)}}};return s.jsxs("div",{className:`relative overflow-hidden rounded-xl p-6 md:p-8 shadow-md space-y-6 animate-fade-in
                    bg-gradient-to-br from-blue-50 via-white to-yellow-50 dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[s.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[s.jsx("div",{className:"absolute -top-20 -left-16 h-64 w-64 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-yellow-300 to-yellow-200 dark:from-yellow-500/15 dark:to-yellow-400/10"}),s.jsx("div",{className:"absolute bottom-0 right-0 h-72 w-72 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-sky-300 to-blue-300 dark:from-sky-500/15 dark:to-blue-500/15"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 drop-shadow-sm",children:"Calendario Académico"}),s.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm",children:i&&s.jsx("span",{className:"px-2 py-1 rounded bg-white/30 dark:bg-white/10 backdrop-blur-md",children:"Cargando…"})})]}),l&&s.jsx("div",{className:"text-red-700 dark:text-red-400 bg-red-100/70 dark:bg-red-900/30 border border-red-300/50 dark:border-red-800/40 p-3 rounded-lg",children:l}),!i&&a.length===0&&s.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-yellow-400/40 bg-yellow-50/70 p-4 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-300 backdrop-blur-md",children:[s.jsx(pje,{className:"h-5 w-5 mt-0.5"}),s.jsx("p",{children:"No hay eventos registrados en la nube."})]}),s.jsxs("div",{className:"mb-2 rounded-xl border border-white/30 bg-white/30 dark:bg-white/10 backdrop-blur-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-2",children:[s.jsx(ZN,{className:"h-4 w-4"}),s.jsx("h2",{className:"text-lg font-semibold",children:"Filtrar por tipo de evento:"})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[s.jsx("button",{onClick:I,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-600 to-yellow-500 text-white hover:opacity-95 transition-colors",children:f.length===Object.values(sa).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(sa).map(F=>s.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2
                ${f.includes(F)?`shadow-sm ${Eb[F].color}`:"bg-white/40 text-slate-700 hover:bg-white/60 dark:bg-white/10 dark:text-slate-300 dark:hover:bg-white/20"}`,children:[s.jsx("input",{type:"checkbox",checked:f.includes(F),onChange:()=>_(F),className:"hidden"}),s.jsx("span",{className:"shrink-0",children:xX[F]}),s.jsx("span",{children:Eb[F].label})]},F))]})]}),s.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/30 dark:border-white/10 backdrop-blur-xl bg-white/30 dark:bg-white/5",children:[s.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-b border-white/20",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:s.jsx(Y2,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:s.jsx(n4,{className:"h-5 w-5"})})]}),s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),s.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-gradient-to-r from-blue-600 to-yellow-500 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:opacity-95",children:"Hoy"})]}),s.jsx("div",{className:"grid grid-cols-7 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:ZZe.map(F=>s.jsx("div",{className:`text-center font-semibold text-slate-600 dark:text-slate-300 text-sm py-3
                         bg-white/40 dark:bg-white/10
                         border-b border-r border-slate-200/80 dark:border-slate-700/70`,children:F},F))}),s.jsx("div",{className:"grid grid-cols-7 grid-rows-6 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:B.flat().map((F,S)=>{const M=F&&F.toDateString()===new Date().toDateString(),H=F==null?void 0:F.toISOString().split("T")[0],K=H?a.filter(Q=>Q.date===H&&f.includes(Q.type)):[];return s.jsx("div",{onClick:()=>F&&j(F),className:`border-b border-r border-slate-200/80 dark:border-slate-700/70
                            p-2 h-36 flex flex-col overflow-hidden relative group 
                            ${F?e!==Tt.ESTUDIANTE?"cursor-pointer hover:bg-white/40 dark:hover:bg-white/10":"":"bg-white/30 dark:bg-white/5"}`,children:F&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:`self-end text-sm font-semibold ${M?"bg-gradient-to-r from-blue-600 to-yellow-500 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-700 dark:text-slate-300"}`,children:F.getDate()}),s.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:K.map(Q=>s.jsxs("div",{onClick:G=>k(Q,G),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${Eb[Q.type].color}`,children:[s.jsx("span",{className:"shrink-0",children:xX[Q.type]}),s.jsx("span",{className:"truncate",children:eet(Q)})]},Q.id))}),e!==Tt.ESTUDIANTE&&s.jsx("button",{className:`absolute bottom-1 right-1 rounded-full h-7 w-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity 
                                   bg-gradient-to-r from-blue-600 to-yellow-500 text-white shadow`,"aria-label":"Agregar evento",children:s.jsx(Si,{className:"h-4 w-4"})})]})},S)})})]}),m&&s.jsx(tet,{isOpen:m,onClose:()=>g(!1),onSave:T,onDelete:L,event:y,date:x,isLoading:d})]})},A3="anuncios",aet=async e=>{try{const t=ut(lr,A3);let r=[];if((e==null?void 0:e.profile)==="ESTUDIANTE"){const a=[jt(t,Kt("destinatarios.tipo","==","Todos"),Gt("fechaPublicacion","desc")),...e!=null&&e.curso?[jt(t,Kt("destinatarios.tipo","==","Cursos"),Kt("destinatarios.cursos","array-contains",e.curso),Gt("fechaPublicacion","desc"))]:[]];for(const o of a){const l=await Nr(o);r.push(...l.docs)}const n=new Map;return r.forEach(o=>n.set(o.id,o)),Array.from(n.values()).map(o=>({id:o.id,...o.data()}))}else{const a=jt(t,Gt("fechaPublicacion","desc"));return(await Nr(a)).docs.map(i=>({id:i.id,...i.data()}))}}catch(t){throw console.error("Error al obtener anuncios:",t),new Error("No se pudieron cargar los anuncios")}},net=async e=>{try{return{id:(await Kr(ut(lr,A3),{...e,fechaPublicacion:e.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear anuncio:",t),new Error("No se pudo crear el anuncio")}},set=async(e,t)=>{try{const r=$t(lr,A3,e);await zi(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",e),new Error("No se pudo actualizar el anuncio")}},iet=async e=>{try{const t=$t(lr,A3,e);await Ua(t)}catch(t){throw console.error("Error al eliminar anuncio:",t,"ID:",e),new Error("No se pudo eliminar el anuncio")}},vX=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],oet=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState(!1),[i,o]=w.useState(null),[l,c]=w.useState({titulo:"",mensaje:"",adjunto:""}),[d,u]=w.useState({tipo:"Todos",cursos:[]}),f=w.useCallback(async()=>{n(!0);try{const j=await aet({profile:e.profile,curso:e.curso});r(j),o(null)}catch(j){console.error("Error al cargar anuncios desde Firestore",j),o("No se pudieron cargar los anuncios desde la nube.")}finally{n(!1)}},[]);w.useEffect(()=>{f()},[f]);const A=j=>{const{name:k,value:T}=j.target;c(L=>({...L,[k]:T}))},m=j=>{u({tipo:j,cursos:j==="Cursos"?[]:void 0})},g=j=>{u(k=>{var L;if(k.tipo!=="Cursos")return k;const T=(L=k.cursos)!=null&&L.includes(j)?k.cursos.filter(F=>F!==j):[...k.cursos||[],j];return{...k,cursos:T}})},x=async j=>{if(j.preventDefault(),!l.titulo||!l.mensaje){alert("Título y mensaje son obligatorios.");return}if(d.tipo==="Cursos"&&(!d.cursos||d.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const k={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:e.nombreCompleto,profileCreador:e.profile,destinatarios:d,...l};await net(k),await f(),c({titulo:"",mensaje:"",adjunto:""}),u({tipo:"Todos",cursos:[]})}catch(k){console.error("Error al crear anuncio:",k),o("Error al publicar el anuncio en la nube.")}},v=async j=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await iet(j),await f()}catch(k){console.error("Error al eliminar anuncio:",k),o("No se pudo eliminar el anuncio en la nube.")}},y=async j=>{try{const k=t.find(T=>T.id===j);k&&(await set(j,{destacado:!k.destacado}),await f())}catch(k){console.error("Error al actualizar anuncio:",k),o("No se pudo actualizar el estado del anuncio en la nube.")}},N=w.useMemo(()=>[...t].sort((j,k)=>j.destacado&&!k.destacado?-1:!j.destacado&&k.destacado?1:new Date(k.fechaPublicacion).getTime()-new Date(j.fechaPublicacion).getTime()),[t]),E=w.useMemo(()=>{const j=e.profile,k=e.curso;return N.filter(T=>{if(j===Tt.SUBDIRECCION)return!0;if(!T.destinatarios)return j!==Tt.ESTUDIANTE;const{tipo:L,cursos:F}=T.destinatarios;return L==="Todos"||L==="Profesores"&&j===Tt.PROFESORADO||L==="Coordinación TP"&&j===Tt.COORDINACION_TP?!0:L==="Cursos"?j===Tt.ESTUDIANTE?F==null?void 0:F.includes(k||""):!0:!1})},[N,e]),B=j=>e.profile===Tt.ESTUDIANTE?!1:e.profile===Tt.SUBDIRECCION||e.profile===j.profileCreador,_=()=>e.profile===Tt.SUBDIRECCION||e.profile===Tt.PROFESORADO,I="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),a&&s.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),i&&s.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:i}),e.profile!==Tt.ESTUDIANTE?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),s.jsx("input",{type:"text",name:"titulo",value:l.titulo,onChange:A,required:!0,className:I})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),s.jsx("textarea",{name:"mensaje",value:l.mensaje,onChange:A,required:!0,rows:4,className:I})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),s.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(j=>s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"destinatarioTipo",value:j,checked:d.tipo===j,onChange:()=>m(j),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),s.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:j.replace("Coordinación TP","Coord. TP")})]},j))})]}),d.tipo==="Cursos"&&s.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:on.map(j=>{var k;return s.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:(k=d.cursos)==null?void 0:k.includes(j),onChange:()=>g(j),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),s.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:j})]},j)})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),s.jsx("input",{type:"url",name:"adjunto",value:l.adjunto,onChange:A,placeholder:"https://ejemplo.com/documento.pdf",className:I})]}),s.jsx("div",{className:"pt-2 text-right",children:s.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!a&&E.length===0&&s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!a&&E.length>0&&E.map((j,k)=>{const T=vX[k%vX.length];return s.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${T.bg} ${T.rotate}`,children:[j.destacado&&s.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:s.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),s.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:j.titulo}),s.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:j.mensaje}),j.adjunto&&s.jsx("div",{className:"font-sans text-sm mb-4",children:s.jsxs("a",{href:j.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),s.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-bold",children:j.autor}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(j.fechaPublicacion).toLocaleString("es-CL")})]}),s.jsxs("div",{className:"flex items-center",children:[_()&&s.jsx("button",{onClick:()=>y(j.id),title:j.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:s.jsx("span",{className:`text-xl transition-opacity ${j.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),B(j)&&s.jsx("button",{onClick:()=>v(j.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},j.id)})})]})},kue="api_logs",cet=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:dr.fromDate(new Date)};await Kr(ut(st,kue),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},det=e=>{const t=jt(ut(st,kue),Gt("timestamp","desc"));return rr(t,a=>{const n=a.docs.map(i=>{var l,c;const o=i.data();return{id:i.id,...o,timestamp:((c=(l=o.timestamp)==null?void 0:l.toDate)==null?void 0:c.call(l).toISOString())||o.timestamp}});e(n)},a=>{console.error("Error al suscribirse a los logs de API:",a),e([])})},m3=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}cet(e,t)},W7="actas_de_reunion",uet=e=>{var r,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString())||t.fechaCreacion}},fet=e=>{const t=jt(ut(st,W7),Gt("fechaCreacion","desc"));return rr(t,a=>{const n=a.docs.map(i=>uet(i));e(n)},a=>{console.error("Error al suscribirse a las actas:",a),e([])})},het=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:dr.fromDate(new Date(e.fechaCreacion))};return(await Kr(ut(st,W7),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},Aet=async e=>{try{const t=$t(st,W7,e);await Ua(t)}catch(t){throw console.error("Error al eliminar el acta:",t),new Error("No se pudo eliminar el acta.")}},Sue=window.SpeechRecognition||window.webkitSpeechRecognition,bX=!!Sue,met=({isListening:e})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),pet=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState(null),[i,o]=w.useState({tipoReunion:PB[0],asistentes:"",textoReunion:""}),[l,c]=w.useState(!1),[d,u]=w.useState(!1),[f,A]=w.useState(!0),[m,g]=w.useState(null),x=w.useRef(null);w.useEffect(()=>{A(!0);const j=fet(k=>{r(k),!a&&k.length>0&&n(k[0]),A(!1)});return()=>j()},[a]);const v=j=>{const{name:k,value:T}=j.target;o(L=>({...L,[k]:T}))},y=w.useCallback(()=>{var j;if(!bX){g("El reconocimiento de voz no es compatible con este navegador.");return}l?(j=x.current)==null||j.stop():(x.current=new Sue,x.current.lang="es-CL",x.current.continuous=!0,x.current.interimResults=!0,x.current.onresult=k=>{let T="";for(let L=k.resultIndex;L<k.results.length;++L)k.results[L].isFinal&&(T+=k.results[L][0].transcript+". ");o(L=>({...L,textoReunion:L.textoReunion+T}))},x.current.onstart=()=>c(!0),x.current.onend=()=>c(!1),x.current.onerror=k=>{console.error("Speech recognition error",k.error),g(`Error de reconocimiento: ${k.error}`),c(!1)},x.current.start())},[l]),N=async j=>{j.preventDefault();const{tipoReunion:k,asistentes:T,textoReunion:L}=i;if(!k||!T.trim()||!L.trim()){g("Todos los campos son obligatorios.");return}u(!0),g(null);try{m3("Generador de Actas");const F="",M=new globalThis.GoogleGenerativeAI(F).getGenerativeModel({model:"gemini-pro-latest"}),H=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${L}"
                
                Asistentes a la reunión para referencia de nombres: ${T}
            `,X=(await(await M.generateContent(H)).response).text().replace(/^```json\s*|```\s*$/g,""),Z=JSON.parse(X),U={fechaCreacion:new Date().toISOString(),...i,...Z},Y=await het(U,e);o({tipoReunion:PB[0],asistentes:"",textoReunion:""})}catch(F){console.error("Error al analizar acta con IA:",F),g("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{u(!1)}},E=async j=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await Aet(j),(a==null?void 0:a.id)===j&&n(t.length>1?t[1]:null)}catch(k){console.error("Error deleting acta:",k),alert("No se pudo eliminar el acta.")}},B=j=>{n(j)},_=j=>j.temas||j.acuerdos||j.plazos||j.responsables?s.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),j.temas&&j.temas.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),s.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:j.temas.map((T,L)=>s.jsx("li",{children:T},L))})]}),j.acuerdos&&j.acuerdos.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),s.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:j.acuerdos.map((T,L)=>s.jsx("li",{children:T},L))})]}),j.plazos&&j.plazos.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),s.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:j.plazos.map((T,L)=>s.jsx("li",{children:T},L))})]}),j.responsables&&j.responsables.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),s.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:j.responsables.map((T,L)=>s.jsx("li",{children:T},L))})]})]}):null,I="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return f?s.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[s.jsxs("div",{className:"md:col-span-1 space-y-8",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),s.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",s.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),s.jsx("select",{name:"tipoReunion",value:i.tipoReunion,onChange:v,required:!0,className:I,children:PB.map(j=>s.jsx("option",{value:j,children:j},j))})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),s.jsx("textarea",{name:"asistentes",value:i.asistentes,onChange:v,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:I})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),s.jsxs("div",{className:"relative",children:[s.jsx("textarea",{name:"textoReunion",value:i.textoReunion,onChange:v,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:I}),bX&&s.jsx("button",{type:"button",onClick:y,title:l?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${l?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:s.jsx(met,{isListening:l})})]})]}),m&&s.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:m}),s.jsx("div",{className:"pt-2 text-right",children:s.jsx("button",{type:"submit",disabled:d,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:d?s.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),s.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.map(j=>s.jsxs("button",{onClick:()=>B(j),className:`w-full text-left p-3 rounded-lg border transition-colors ${(a==null?void 0:a.id)===j.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[s.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:j.tipoReunion}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(j.fechaCreacion).toLocaleDateString("es-CL")})]},j.id)):s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),s.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:a?s.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${a.tipoReunion}`}),s.jsx("button",{onClick:()=>E(a.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[s.jsx("strong",{children:"Fecha:"})," ",new Date(a.fechaCreacion).toLocaleString("es-CL")]}),s.jsx("h2",{children:"Asistentes"}),s.jsx("ul",{className:"list-disc pl-5",children:String(a.asistentes||"").split(",").map((j,k)=>j.trim()&&s.jsx("li",{children:j.trim()},k))}),_(a),s.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),s.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:s.jsx("p",{children:a.textoReunion})})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[s.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),s.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},X7="evaluaciones_pruebas",Y7="rubricas_estaticas",J7="rubricas_interactivas",get="usuarios",p3=e=>{var n,i,o;const t=e.data()||{},r=t.fechaCreacion,a=((o=(i=(n=r==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:i.toISOString)==null?void 0:o.call(i))??(typeof r=="string"?r:void 0);return{id:e.id,...t,fechaCreacion:a}},xet=e=>{const t=jt(ut(st,X7),Gt("fechaCreacion","desc"));return rr(t,a=>e(a.docs.map(n=>p3(n))),a=>{console.error("[subscribeToPruebas]",a),e([])})},vet=async e=>{const{id:t,fechaCreacion:r,...a}=e,n=$t(st,X7,t),i={...a,fechaCreacion:r?dr.fromDate(new Date(r)):Da()};await Us(n,i,{merge:!0})},bet=async e=>{await Ua($t(st,X7,e))},yet=e=>{const t=jt(ut(st,Y7),Gt("fechaCreacion","desc"));return rr(t,r=>e(r.docs.map(a=>p3(a))),r=>{console.error("[subscribeToRubricasEstaticas]",r),e([])})},lP=async e=>{const{id:t,fechaCreacion:r,...a}=e,n=$t(st,Y7,t),i={...a,fechaCreacion:r?dr.fromDate(new Date(r)):Da()};await Us(n,i,{merge:!0})},wet=async e=>{await Ua($t(st,Y7,e))},Net=e=>{const t=jt(ut(st,J7),Gt("curso","asc"));return rr(t,r=>e(r.docs.map(a=>p3(a))),r=>{console.error("[subscribeToRubricasInteractivas]",r),e([])})},Eet=async e=>{const t={...e,fechaCreacion:Da()};return(await Kr(ut(st,J7),t)).id},Cet=async(e,t)=>{const r=$t(st,J7,e);await Us(r,t,{merge:!0})},jet=e=>{const t=jt(ut(st,get),Gt("nombreCompleto","asc"));return rr(t,r=>e(r.docs.map(a=>p3(a))),r=>{console.error("[subscribeToAllUsers]",r),e([])})},_E=()=>{const[e,t]=w.useState(null),[r,a]=w.useState(!0);return w.useEffect(()=>{const n=Zee(eN,async i=>{if(console.log("[useAuth] FirebaseUser:",i),i&&i.email)try{const o=await Bae(i.email);console.log("[useAuth] Perfil Firestore:",o),t(o?{...o,uid:i.uid}:null)}catch(o){console.error("Error al obtener el perfil del usuario:",o),t(null)}else t(null);a(!1)});return()=>n()},[]),{currentUser:e,loading:r}};function wn(e){"@babel/helpers - typeof";return wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wn(e)}var xl=Uint8Array,md=Uint16Array,Z7=Int32Array,g3=new xl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),x3=new xl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),cP=new xl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_ue=function(e,t){for(var r=new md(31),a=0;a<31;++a)r[a]=t+=1<<e[a-1];for(var n=new Z7(r[30]),a=1;a<30;++a)for(var i=r[a];i<r[a+1];++i)n[i]=i-r[a]<<5|a;return{b:r,r:n}},Tue=_ue(g3,2),Bue=Tue.b,dP=Tue.r;Bue[28]=258,dP[258]=28;var Iue=_ue(x3,0),ket=Iue.b,yX=Iue.r,uP=new md(32768);for(var Wn=0;Wn<32768;++Wn){var fm=(Wn&43690)>>1|(Wn&21845)<<1;fm=(fm&52428)>>2|(fm&13107)<<2,fm=(fm&61680)>>4|(fm&3855)<<4,uP[Wn]=((fm&65280)>>8|(fm&255)<<8)>>1}var Ih=function(e,t,r){for(var a=e.length,n=0,i=new md(t);n<a;++n)e[n]&&++i[e[n]-1];var o=new md(t);for(n=1;n<t;++n)o[n]=o[n-1]+i[n-1]<<1;var l;if(r){l=new md(1<<t);var c=15-t;for(n=0;n<a;++n)if(e[n])for(var d=n<<4|e[n],u=t-e[n],f=o[e[n]-1]++<<u,A=f|(1<<u)-1;f<=A;++f)l[uP[f]>>c]=d}else for(l=new md(a),n=0;n<a;++n)e[n]&&(l[n]=uP[o[e[n]-1]++]>>15-e[n]);return l},pp=new xl(288);for(var Wn=0;Wn<144;++Wn)pp[Wn]=8;for(var Wn=144;Wn<256;++Wn)pp[Wn]=9;for(var Wn=256;Wn<280;++Wn)pp[Wn]=7;for(var Wn=280;Wn<288;++Wn)pp[Wn]=8;var _N=new xl(32);for(var Wn=0;Wn<32;++Wn)_N[Wn]=5;var _et=Ih(pp,9,0),Tet=Ih(pp,9,1),Bet=Ih(_N,5,0),Iet=Ih(_N,5,1),X6=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Gu=function(e,t,r){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(t&7)&r},Y6=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},eU=function(e){return(e+7)/8|0},Oue=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new xl(e.subarray(t,r))},Oet=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Wu=function(e,t,r){var a=new Error(t||Oet[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,Wu),!r)throw a;return a},Det=function(e,t,r,a){var n=e.length,i=0;if(!n||t.f&&!t.l)return r||new xl(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new xl(n*3));var d=function(be){var q=r.length;if(be>q){var we=new xl(Math.max(q*2,be));we.set(r),r=we}},u=t.f||0,f=t.p||0,A=t.b||0,m=t.l,g=t.d,x=t.m,v=t.n,y=n*8;do{if(!m){u=Gu(e,f,1);var N=Gu(e,f+1,3);if(f+=3,N)if(N==1)m=Tet,g=Iet,x=9,v=5;else if(N==2){var I=Gu(e,f,31)+257,j=Gu(e,f+10,15)+4,k=I+Gu(e,f+5,31)+1;f+=14;for(var T=new xl(k),L=new xl(19),F=0;F<j;++F)L[cP[F]]=Gu(e,f+F*3,7);f+=j*3;for(var S=X6(L),M=(1<<S)-1,H=Ih(L,S,1),F=0;F<k;){var K=H[Gu(e,f,M)];f+=K&15;var E=K>>4;if(E<16)T[F++]=E;else{var Q=0,G=0;for(E==16?(G=3+Gu(e,f,3),f+=2,Q=T[F-1]):E==17?(G=3+Gu(e,f,7),f+=3):E==18&&(G=11+Gu(e,f,127),f+=7);G--;)T[F++]=Q}}var X=T.subarray(0,I),Z=T.subarray(I);x=X6(X),v=X6(Z),m=Ih(X,x,1),g=Ih(Z,v,1)}else Wu(1);else{var E=eU(f)+4,B=e[E-4]|e[E-3]<<8,_=E+B;if(_>n){c&&Wu(0);break}l&&d(A+B),r.set(e.subarray(E,_),A),t.b=A+=B,t.p=f=_*8,t.f=u;continue}if(f>y){c&&Wu(0);break}}l&&d(A+131072);for(var U=(1<<x)-1,Y=(1<<v)-1,P=f;;P=f){var Q=m[Y6(e,f)&U],D=Q>>4;if(f+=Q&15,f>y){c&&Wu(0);break}if(Q||Wu(2),D<256)r[A++]=D;else if(D==256){P=f,m=null;break}else{var W=D-254;if(D>264){var F=D-257,J=g3[F];W=Gu(e,f,(1<<J)-1)+Bue[F],f+=J}var ce=g[Y6(e,f)&Y],ie=ce>>4;ce||Wu(3),f+=ce&15;var Z=ket[ie];if(ie>3){var J=x3[ie];Z+=Y6(e,f)&(1<<J)-1,f+=J}if(f>y){c&&Wu(0);break}l&&d(A+131072);var re=A+W;if(A<Z){var de=i-Z,oe=Math.min(Z,re);for(de+A<0&&Wu(3);A<oe;++A)r[A]=a[de+A]}for(;A<re;++A)r[A]=r[A-Z]}}t.l=m,t.p=P,t.b=A,t.f=u,m&&(u=1,t.m=x,t.d=g,t.n=v)}while(!u);return A!=r.length&&o?Oue(r,0,A):r.subarray(0,A)},y0=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8},fw=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8,e[a+2]|=r>>16},J6=function(e,t){for(var r=[],a=0;a<e.length;++a)e[a]&&r.push({s:a,f:e[a]});var n=r.length,i=r.slice();if(!n)return{t:Fue,l:0};if(n==1){var o=new xl(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(_,I){return _.f-I.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,u=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};u!=n-1;)l=r[r[d].f<r[f].f?d++:f++],c=r[d!=u&&r[d].f<r[f].f?d++:f++],r[u++]={s:-1,f:l.f+c.f,l,r:c};for(var A=i[0].s,a=1;a<n;++a)i[a].s>A&&(A=i[a].s);var m=new md(A+1),g=fP(r[u-1],m,0);if(g>t){var a=0,x=0,v=g-t,y=1<<v;for(i.sort(function(I,j){return m[j.s]-m[I.s]||I.f-j.f});a<n;++a){var N=i[a].s;if(m[N]>t)x+=y-(1<<g-m[N]),m[N]=t;else break}for(x>>=v;x>0;){var E=i[a].s;m[E]<t?x-=1<<t-m[E]++-1:++a}for(;a>=0&&x;--a){var B=i[a].s;m[B]==t&&(--m[B],++x)}g=t}return{t:new xl(m),l:g}},fP=function(e,t,r){return e.s==-1?Math.max(fP(e.l,t,r+1),fP(e.r,t,r+1)):t[e.s]=r},wX=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new md(++t),a=0,n=e[0],i=1,o=function(c){r[a++]=c},l=1;l<=t;++l)if(e[l]==n&&l!=t)++i;else{if(!n&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(n),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(n);i=1,n=e[l]}return{c:r.subarray(0,a),n:t}},hw=function(e,t){for(var r=0,a=0;a<t.length;++a)r+=e[a]*t[a];return r},Due=function(e,t,r){var a=r.length,n=eU(t+2);e[n]=a&255,e[n+1]=a>>8,e[n+2]=e[n]^255,e[n+3]=e[n+1]^255;for(var i=0;i<a;++i)e[n+i+4]=r[i];return(n+4+a)*8},NX=function(e,t,r,a,n,i,o,l,c,d,u){y0(t,u++,r),++n[256];for(var f=J6(n,15),A=f.t,m=f.l,g=J6(i,15),x=g.t,v=g.l,y=wX(A),N=y.c,E=y.n,B=wX(x),_=B.c,I=B.n,j=new md(19),k=0;k<N.length;++k)++j[N[k]&31];for(var k=0;k<_.length;++k)++j[_[k]&31];for(var T=J6(j,7),L=T.t,F=T.l,S=19;S>4&&!L[cP[S-1]];--S);var M=d+5<<3,H=hw(n,pp)+hw(i,_N)+o,K=hw(n,A)+hw(i,x)+o+14+3*S+hw(j,L)+2*j[16]+3*j[17]+7*j[18];if(c>=0&&M<=H&&M<=K)return Due(t,u,e.subarray(c,c+d));var Q,G,X,Z;if(y0(t,u,1+(K<H)),u+=2,K<H){Q=Ih(A,m,0),G=A,X=Ih(x,v,0),Z=x;var U=Ih(L,F,0);y0(t,u,E-257),y0(t,u+5,I-1),y0(t,u+10,S-4),u+=14;for(var k=0;k<S;++k)y0(t,u+3*k,L[cP[k]]);u+=3*S;for(var Y=[N,_],P=0;P<2;++P)for(var D=Y[P],k=0;k<D.length;++k){var W=D[k]&31;y0(t,u,U[W]),u+=L[W],W>15&&(y0(t,u,D[k]>>5&127),u+=D[k]>>12)}}else Q=_et,G=pp,X=Bet,Z=_N;for(var k=0;k<l;++k){var J=a[k];if(J>255){var W=J>>18&31;fw(t,u,Q[W+257]),u+=G[W+257],W>7&&(y0(t,u,J>>23&31),u+=g3[W]);var ce=J&31;fw(t,u,X[ce]),u+=Z[ce],ce>3&&(fw(t,u,J>>5&8191),u+=x3[ce])}else fw(t,u,Q[J]),u+=G[J]}return fw(t,u,Q[256]),u+G[256]},Fet=new Z7([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Fue=new xl(0),Pet=function(e,t,r,a,n,i){var o=i.z||e.length,l=new xl(a+o+5*(1+Math.ceil(o/7e3))+n),c=l.subarray(a,l.length-n),d=i.l,u=(i.r||0)&7;if(t){u&&(c[0]=i.r>>3);for(var f=Fet[t-1],A=f>>13,m=f&8191,g=(1<<r)-1,x=i.p||new md(32768),v=i.h||new md(g+1),y=Math.ceil(r/3),N=2*y,E=function(Te){return(e[Te]^e[Te+1]<<y^e[Te+2]<<N)&g},B=new Z7(25e3),_=new md(288),I=new md(32),j=0,k=0,T=i.i||0,L=0,F=i.w||0,S=0;T+2<o;++T){var M=E(T),H=T&32767,K=v[M];if(x[H]=K,v[M]=H,F<=T){var Q=o-T;if((j>7e3||L>24576)&&(Q>423||!d)){u=NX(e,c,0,B,_,I,k,L,S,T-S,u),L=j=k=0,S=T;for(var G=0;G<286;++G)_[G]=0;for(var G=0;G<30;++G)I[G]=0}var X=2,Z=0,U=m,Y=H-K&32767;if(Q>2&&M==E(T-Y))for(var P=Math.min(A,Q)-1,D=Math.min(32767,T),W=Math.min(258,Q);Y<=D&&--U&&H!=K;){if(e[T+X]==e[T+X-Y]){for(var J=0;J<W&&e[T+J]==e[T+J-Y];++J);if(J>X){if(X=J,Z=Y,J>P)break;for(var ce=Math.min(Y,J-2),ie=0,G=0;G<ce;++G){var re=T-Y+G&32767,de=x[re],oe=re-de&32767;oe>ie&&(ie=oe,K=re)}}}H=K,K=x[H],Y+=H-K&32767}if(Z){B[L++]=268435456|dP[X]<<18|yX[Z];var be=dP[X]&31,q=yX[Z]&31;k+=g3[be]+x3[q],++_[257+be],++I[q],F=T+X,++j}else B[L++]=e[T],++_[e[T]]}}for(T=Math.max(T,F);T<o;++T)B[L++]=e[T],++_[e[T]];u=NX(e,c,d,B,_,I,k,L,S,T-S,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=v,i.p=x,i.i=T,i.w=F)}else{for(var T=i.w||0;T<o+d;T+=65535){var we=T+65535;we>=o&&(c[u/8|0]=d,we=o),u=Due(c,u+1,e.subarray(T,we))}i.i=o}return Oue(l,0,a+eU(u)+n)},Pue=function(){var e=1,t=0;return{p:function(r){for(var a=e,n=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)n+=a+=r[o];a=(a&65535)+15*(a>>16),n=(n&65535)+15*(n>>16)}e=a,t=n},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Ret=function(e,t,r,a,n){if(!n&&(n={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new xl(i.length+e.length);o.set(i),o.set(e,i.length),e=o,n.w=i.length}return Pet(e,t.level==null?6:t.level,t.mem==null?n.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,a,n)},Rue=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Let=function(e,t){var r=t.level,a=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=a<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var n=Pue();n.p(t.dictionary),Rue(e,2,n.d())}},Met=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Wu(6,"invalid zlib data"),(e[1]>>5&1)==1&&Wu(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function hP(e,t){t||(t={});var r=Pue();r.p(e);var a=Ret(e,t,t.dictionary?6:2,4);return Let(a,t),Rue(a,a.length-4,r.d()),a}function Uet(e,t){return Det(e.subarray(Met(e),-4),{i:2},t,t)}var Het=typeof TextDecoder<"u"&&new TextDecoder,Qet=0;try{Het.decode(Fue,{stream:!0}),Qet=1}catch{}var Ur=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Z6(){Ur.console&&typeof Ur.console.log=="function"&&Ur.console.log.apply(Ur.console,arguments)}var On={log:Z6,warn:function(e){Ur.console&&(typeof Ur.console.warn=="function"?Ur.console.warn.apply(Ur.console,arguments):Z6.call(null,arguments))},error:function(e){Ur.console&&(typeof Ur.console.error=="function"?Ur.console.error.apply(Ur.console,arguments):Z6(e))}};function eO(e,t,r){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){hg(a.response,t,r)},a.onerror=function(){On.error("could not download file")},a.send()}function EX(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Sj(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var k2,AP,hg=Ur.saveAs||((typeof window>"u"?"undefined":wn(window))!=="object"||window!==Ur?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var a=Ur.URL||Ur.webkitURL,n=document.createElement("a");t=t||e.name||"download",n.download=t,n.rel="noopener",typeof e=="string"?(n.href=e,n.origin!==location.origin?EX(n.href)?eO(e,t,r):Sj(n,n.target="_blank"):Sj(n)):(n.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(n.href)},4e4),setTimeout(function(){Sj(n)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(EX(e))eO(e,t,r);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){Sj(a)})}else navigator.msSaveOrOpenBlob(function(n,i){return i===void 0?i={autoBom:!1}:wn(i)!=="object"&&(On.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}(e,r),t)}:function(e,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof e=="string")return eO(e,t,r);var n=e.type==="application/octet-stream",i=/constructor/i.test(Ur.HTMLElement)||Ur.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||n&&i)&&(typeof FileReader>"u"?"undefined":wn(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=u:location=u,a=null},l.readAsDataURL(e)}else{var c=Ur.URL||Ur.webkitURL,d=c.createObjectURL(e);a?a.location=d:location.href=d,a=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Lue(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],a=0;a<r.length;a++){var n=r[a].re,i=r[a].process,o=n.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function tO(e,t){var r=e[0],a=e[1],n=e[2],i=e[3];r=el(r,a,n,i,t[0],7,-680876936),i=el(i,r,a,n,t[1],12,-389564586),n=el(n,i,r,a,t[2],17,606105819),a=el(a,n,i,r,t[3],22,-1044525330),r=el(r,a,n,i,t[4],7,-176418897),i=el(i,r,a,n,t[5],12,1200080426),n=el(n,i,r,a,t[6],17,-1473231341),a=el(a,n,i,r,t[7],22,-45705983),r=el(r,a,n,i,t[8],7,1770035416),i=el(i,r,a,n,t[9],12,-1958414417),n=el(n,i,r,a,t[10],17,-42063),a=el(a,n,i,r,t[11],22,-1990404162),r=el(r,a,n,i,t[12],7,1804603682),i=el(i,r,a,n,t[13],12,-40341101),n=el(n,i,r,a,t[14],17,-1502002290),r=tl(r,a=el(a,n,i,r,t[15],22,1236535329),n,i,t[1],5,-165796510),i=tl(i,r,a,n,t[6],9,-1069501632),n=tl(n,i,r,a,t[11],14,643717713),a=tl(a,n,i,r,t[0],20,-373897302),r=tl(r,a,n,i,t[5],5,-701558691),i=tl(i,r,a,n,t[10],9,38016083),n=tl(n,i,r,a,t[15],14,-660478335),a=tl(a,n,i,r,t[4],20,-405537848),r=tl(r,a,n,i,t[9],5,568446438),i=tl(i,r,a,n,t[14],9,-1019803690),n=tl(n,i,r,a,t[3],14,-187363961),a=tl(a,n,i,r,t[8],20,1163531501),r=tl(r,a,n,i,t[13],5,-1444681467),i=tl(i,r,a,n,t[2],9,-51403784),n=tl(n,i,r,a,t[7],14,1735328473),r=rl(r,a=tl(a,n,i,r,t[12],20,-1926607734),n,i,t[5],4,-378558),i=rl(i,r,a,n,t[8],11,-2022574463),n=rl(n,i,r,a,t[11],16,1839030562),a=rl(a,n,i,r,t[14],23,-35309556),r=rl(r,a,n,i,t[1],4,-1530992060),i=rl(i,r,a,n,t[4],11,1272893353),n=rl(n,i,r,a,t[7],16,-155497632),a=rl(a,n,i,r,t[10],23,-1094730640),r=rl(r,a,n,i,t[13],4,681279174),i=rl(i,r,a,n,t[0],11,-358537222),n=rl(n,i,r,a,t[3],16,-722521979),a=rl(a,n,i,r,t[6],23,76029189),r=rl(r,a,n,i,t[9],4,-640364487),i=rl(i,r,a,n,t[12],11,-421815835),n=rl(n,i,r,a,t[15],16,530742520),r=al(r,a=rl(a,n,i,r,t[2],23,-995338651),n,i,t[0],6,-198630844),i=al(i,r,a,n,t[7],10,1126891415),n=al(n,i,r,a,t[14],15,-1416354905),a=al(a,n,i,r,t[5],21,-57434055),r=al(r,a,n,i,t[12],6,1700485571),i=al(i,r,a,n,t[3],10,-1894986606),n=al(n,i,r,a,t[10],15,-1051523),a=al(a,n,i,r,t[1],21,-2054922799),r=al(r,a,n,i,t[8],6,1873313359),i=al(i,r,a,n,t[15],10,-30611744),n=al(n,i,r,a,t[6],15,-1560198380),a=al(a,n,i,r,t[13],21,1309151649),r=al(r,a,n,i,t[4],6,-145523070),i=al(i,r,a,n,t[11],10,-1120210379),n=al(n,i,r,a,t[2],15,718787259),a=al(a,n,i,r,t[9],21,-343485551),e[0]=Fm(r,e[0]),e[1]=Fm(a,e[1]),e[2]=Fm(n,e[2]),e[3]=Fm(i,e[3])}function v3(e,t,r,a,n,i){return t=Fm(Fm(t,e),Fm(a,i)),Fm(t<<n|t>>>32-n,r)}function el(e,t,r,a,n,i,o){return v3(t&r|~t&a,e,t,n,i,o)}function tl(e,t,r,a,n,i,o){return v3(t&a|r&~a,e,t,n,i,o)}function rl(e,t,r,a,n,i,o){return v3(t^r^a,e,t,n,i,o)}function al(e,t,r,a,n,i,o){return v3(r^(t|~a),e,t,n,i,o)}function Mue(e){var t,r=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)tO(a,zet(e.substring(t-64,t)));e=e.substring(t-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(tO(a,n),t=0;t<16;t++)n[t]=0;return n[14]=8*r,tO(a,n),a}function zet(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}k2=Ur.atob.bind(Ur),AP=Ur.btoa.bind(Ur);var CX="0123456789abcdef".split("");function $et(e){for(var t="",r=0;r<4;r++)t+=CX[e>>8*r+4&15]+CX[e>>8*r&15];return t}function Vet(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function mP(e){return Mue(e).map(Vet).join("")}var Get=function(e){for(var t=0;t<e.length;t++)e[t]=$et(e[t]);return e.join("")}(Mue("hello"))!="5d41402abc4b2a76b9719d911017c592";function Fm(e,t){if(Get){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function pP(e,t){var r,a,n,i;if(e!==r){for(var o=(n=e,i=1+(256/e.length>>0),new Array(i+1).join(n)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}r=e,a=l}else l=a;var f=t.length,A=0,m=0,g="";for(c=0;c<f;c++)m=(m+(u=l[A=(A+1)%256]))%256,l[A]=l[m],l[m]=u,o=l[(l[A]+l[m])%256],g+=String.fromCharCode(t.charCodeAt(c)^o);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var jX={print:4,modify:8,copy:16,"annot-forms":32};function Xv(e,t,r,a){this.v=1,this.r=2;var n=192;e.forEach(function(l){if(jX.perm!==void 0)throw new Error("Invalid permission: "+l);n+=jX[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^n)),this.encryptionKey=mP(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=pP(this.encryptionKey,this.padding)}function Yv(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,a=0;a<r;a++){var n=e.charCodeAt(a);n<33||n===35||n===37||n===40||n===41||n===47||n===60||n===62||n===91||n===93||n===123||n===125||n>126?t+="#"+("0"+n.toString(16)).slice(-2):t+=e[a]}return t}function kX(e){if(wn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,a,n){if(n=n||!1,typeof r!="string"||typeof a!="function"||typeof n!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[a,!!n],i},this.unsubscribe=function(r){for(var a in t)if(t[a][r])return delete t[a][r],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),n=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,a)}catch(l){Ur.console&&On.error("jsPDF PubSub Error",l.message,l)}o[1]&&n.push(i)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function US(e){if(!(this instanceof US))return new US(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function Uue(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function xg(e,t,r,a,n){if(!(this instanceof xg))return new xg(e,t,r,a,n);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,Uue.call(this,a,n)}function cb(e,t,r,a,n){if(!(this instanceof cb))return new cb(e,t,r,a,n);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Uue.call(this,a,n)}function xr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],n=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;wn(e=e||{})==="object"&&(r=e.orientation,a=e.unit||a,n=e.format||n,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),a=a||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,A={},m={internal:{},__private__:{}};m.__private__.PubSub=kX;var g="1.3",x=m.__private__.getPdfVersion=function(){return g};m.__private__.setPdfVersion=function(te){g=te};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return v};var y=m.__private__.getPageFormat=function(te){return v[te]};n=n||"a4";var N={COMPAT:"compat",ADVANCED:"advanced"},E=N.COMPAT;function B(){this.saveGraphicsState(),ue(new tr(Ze,0,0,-Ze,0,Yi()*Ze).toString()+" cm"),this.setFontSize(this.getFontSize()/Ze),d="n",E=N.ADVANCED}function _(){this.restoreGraphicsState(),d="S",E=N.COMPAT}var I=m.__private__.combineFontStyleAndFontWeight=function(te,je){if(te=="bold"&&je=="normal"||te=="bold"&&je==400||te=="normal"&&je=="italic"||te=="bold"&&je=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return je&&(te=je==400||je==="normal"?te==="italic"?"italic":"normal":je!=700&&je!=="bold"||te!=="normal"?(je==700?"bold":je)+""+te:"bold"),te};m.advancedAPI=function(te){var je=E===N.COMPAT;return je&&B.call(this),typeof te!="function"||(te(this),je&&_.call(this)),this},m.compatAPI=function(te){var je=E===N.ADVANCED;return je&&_.call(this),typeof te!="function"||(te(this),je&&B.call(this)),this},m.isAdvancedAPI=function(){return E===N.ADVANCED};var j,k=function(te){if(E!==N.ADVANCED)throw new Error(te+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},T=m.roundToPrecision=m.__private__.roundToPrecision=function(te,je){var Ke=t||je;if(isNaN(te)||isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return te.toFixed(Ke).replace(/0+$/,"")};j=m.hpf=m.__private__.hpf=typeof c=="number"?function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.hpf");return T(te,c)}:c==="smart"?function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.hpf");return T(te,te>-1&&te<1?16:5)}:function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.hpf");return T(te,16)};var L=m.f2=m.__private__.f2=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.f2");return T(te,2)},F=m.__private__.f3=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.f3");return T(te,3)},S=m.scale=m.__private__.scale=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.scale");return E===N.COMPAT?te*Ze:E===N.ADVANCED?te:void 0},M=function(te){return E===N.COMPAT?Yi()-te:E===N.ADVANCED?te:void 0},H=function(te){return S(M(te))};m.__private__.setPrecision=m.setPrecision=function(te){typeof parseInt(te,10)=="number"&&(t=parseInt(te,10))};var K,Q="00000000000000000000000000000000",G=m.__private__.getFileId=function(){return Q},X=m.__private__.setFileId=function(te){return Q=te!==void 0&&/^[a-fA-F0-9]{32}$/.test(te)?te.toUpperCase():Q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(hn=new Xv(u.userPermissions,u.userPassword,u.ownerPassword,Q)),Q};m.setFileId=function(te){return X(te),this},m.getFileId=function(){return G()};var Z=m.__private__.convertDateToPDFDate=function(te){var je=te.getTimezoneOffset(),Ke=je<0?"+":"-",Je=Math.floor(Math.abs(je/60)),ot=Math.abs(je%60),Ct=[Ke,W(Je),"'",W(ot),"'"].join("");return["D:",te.getFullYear(),W(te.getMonth()+1),W(te.getDate()),W(te.getHours()),W(te.getMinutes()),W(te.getSeconds()),Ct].join("")},U=m.__private__.convertPDFDateToDate=function(te){var je=parseInt(te.substr(2,4),10),Ke=parseInt(te.substr(6,2),10)-1,Je=parseInt(te.substr(8,2),10),ot=parseInt(te.substr(10,2),10),Ct=parseInt(te.substr(12,2),10),Ht=parseInt(te.substr(14,2),10);return new Date(je,Ke,Je,ot,Ct,Ht,0)},Y=m.__private__.setCreationDate=function(te){var je;if(te===void 0&&(te=new Date),te instanceof Date)je=Z(te);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(te))throw new Error("Invalid argument passed to jsPDF.setCreationDate");je=te}return K=je},P=m.__private__.getCreationDate=function(te){var je=K;return te==="jsDate"&&(je=U(K)),je};m.setCreationDate=function(te){return Y(te),this},m.getCreationDate=function(te){return P(te)};var D,W=m.__private__.padd2=function(te){return("0"+parseInt(te)).slice(-2)},J=m.__private__.padd2Hex=function(te){return("00"+(te=te.toString())).substr(te.length)},ce=0,ie=[],re=[],de=0,oe=[],be=[],q=!1,we=re,Te=function(){ce=0,de=0,re=[],ie=[],oe=[],Me=en(),He=en()};m.__private__.setCustomOutputDestination=function(te){q=!0,we=te};var Ee=function(te){q||(we=te)};m.__private__.resetCustomOutputDestination=function(){q=!1,we=re};var ue=m.__private__.out=function(te){return te=te.toString(),de+=te.length+1,we.push(te),we},ge=m.__private__.write=function(te){return ue(arguments.length===1?te.toString():Array.prototype.join.call(arguments," "))},he=m.__private__.getArrayBuffer=function(te){for(var je=te.length,Ke=new ArrayBuffer(je),Je=new Uint8Array(Ke);je--;)Je[je]=te.charCodeAt(je);return Ke},ve=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return ve};var le=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(te){return le=E===N.ADVANCED?te/Ze:te,this};var ne,Ae=m.__private__.getFontSize=m.getFontSize=function(){return E===N.COMPAT?le:le*Ze},pe=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(te){return pe=te,this},m.__private__.getR2L=m.getR2L=function(){return pe};var ke,Le=m.__private__.setZoomMode=function(te){var je=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(te))ne=te;else if(isNaN(te)){if(je.indexOf(te)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+te+'" is not recognized.');ne=te}else ne=parseInt(te,10)};m.__private__.getZoomMode=function(){return ne};var qe,ze=m.__private__.setPageMode=function(te){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(te)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+te+'" is not recognized.');ke=te};m.__private__.getPageMode=function(){return ke};var Re=m.__private__.setLayoutMode=function(te){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(te)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+te+'" is not recognized.');qe=te};m.__private__.getLayoutMode=function(){return qe},m.__private__.setDisplayMode=m.setDisplayMode=function(te,je,Ke){return Le(te),Re(je),ze(Ke),this};var We={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(te){if(Object.keys(We).indexOf(te)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return We[te]},m.__private__.getDocumentProperties=function(){return We},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(te){for(var je in We)We.hasOwnProperty(je)&&te[je]&&(We[je]=te[je]);return this},m.__private__.setDocumentProperty=function(te,je){if(Object.keys(We).indexOf(te)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return We[te]=je};var ct,Ze,Qe,wt,ar,qt={},gr={},Pr=[],yr={},Tn={},Rr={},Ha={},Rn=null,Lr=0,pr=[],Jr=new kX(m),vs=e.hotfixes||[],Za={},Ln={},Qs=[],tr=function te(je,Ke,Je,ot,Ct,Ht){if(!(this instanceof te))return new te(je,Ke,Je,ot,Ct,Ht);isNaN(je)&&(je=1),isNaN(Ke)&&(Ke=0),isNaN(Je)&&(Je=0),isNaN(ot)&&(ot=1),isNaN(Ct)&&(Ct=0),isNaN(Ht)&&(Ht=0),this._matrix=[je,Ke,Je,ot,Ct,Ht]};Object.defineProperty(tr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(te){this._matrix[0]=te}}),Object.defineProperty(tr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(te){this._matrix[1]=te}}),Object.defineProperty(tr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(te){this._matrix[2]=te}}),Object.defineProperty(tr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(te){this._matrix[3]=te}}),Object.defineProperty(tr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(te){this._matrix[4]=te}}),Object.defineProperty(tr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(te){this._matrix[5]=te}}),Object.defineProperty(tr.prototype,"a",{get:function(){return this._matrix[0]},set:function(te){this._matrix[0]=te}}),Object.defineProperty(tr.prototype,"b",{get:function(){return this._matrix[1]},set:function(te){this._matrix[1]=te}}),Object.defineProperty(tr.prototype,"c",{get:function(){return this._matrix[2]},set:function(te){this._matrix[2]=te}}),Object.defineProperty(tr.prototype,"d",{get:function(){return this._matrix[3]},set:function(te){this._matrix[3]=te}}),Object.defineProperty(tr.prototype,"e",{get:function(){return this._matrix[4]},set:function(te){this._matrix[4]=te}}),Object.defineProperty(tr.prototype,"f",{get:function(){return this._matrix[5]},set:function(te){this._matrix[5]=te}}),Object.defineProperty(tr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(tr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(tr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(tr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),tr.prototype.join=function(te){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(j).join(te)},tr.prototype.multiply=function(te){var je=te.sx*this.sx+te.shy*this.shx,Ke=te.sx*this.shy+te.shy*this.sy,Je=te.shx*this.sx+te.sy*this.shx,ot=te.shx*this.shy+te.sy*this.sy,Ct=te.tx*this.sx+te.ty*this.shx+this.tx,Ht=te.tx*this.shy+te.ty*this.sy+this.ty;return new tr(je,Ke,Je,ot,Ct,Ht)},tr.prototype.decompose=function(){var te=this.sx,je=this.shy,Ke=this.shx,Je=this.sy,ot=this.tx,Ct=this.ty,Ht=Math.sqrt(te*te+je*je),Zt=(te/=Ht)*Ke+(je/=Ht)*Je;Ke-=te*Zt,Je-=je*Zt;var R=Math.sqrt(Ke*Ke+Je*Je);return Zt/=R,te*(Je/=R)<je*(Ke/=R)&&(te=-te,je=-je,Zt=-Zt,Ht=-Ht),{scale:new tr(Ht,0,0,R,0,0),translate:new tr(1,0,0,1,ot,Ct),rotate:new tr(te,je,-je,te,0,0),skew:new tr(1,0,Zt,1,0,0)}},tr.prototype.toString=function(te){return this.join(" ")},tr.prototype.inversed=function(){var te=this.sx,je=this.shy,Ke=this.shx,Je=this.sy,ot=this.tx,Ct=this.ty,Ht=1/(te*Je-je*Ke),Zt=Je*Ht,R=-je*Ht,se=-Ke*Ht,me=te*Ht;return new tr(Zt,R,se,me,-Zt*ot-se*Ct,-R*ot-me*Ct)},tr.prototype.applyToPoint=function(te){var je=te.x*this.sx+te.y*this.shx+this.tx,Ke=te.x*this.shy+te.y*this.sy+this.ty;return new ju(je,Ke)},tr.prototype.applyToRectangle=function(te){var je=this.applyToPoint(te),Ke=this.applyToPoint(new ju(te.x+te.w,te.y+te.h));return new Bf(je.x,je.y,Ke.x-je.x,Ke.y-je.y)},tr.prototype.clone=function(){var te=this.sx,je=this.shy,Ke=this.shx,Je=this.sy,ot=this.tx,Ct=this.ty;return new tr(te,je,Ke,Je,ot,Ct)},m.Matrix=tr;var va=m.matrixMult=function(te,je){return je.multiply(te)},ca=new tr(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=ca;var Fa=function(te,je){if(!Tn[te]){var Ke=(je instanceof xg?"Sh":"P")+(Object.keys(yr).length+1).toString(10);je.id=Ke,Tn[te]=Ke,yr[Ke]=je,Jr.publish("addPattern",je)}};m.ShadingPattern=xg,m.TilingPattern=cb,m.addShadingPattern=function(te,je){return k("addShadingPattern()"),Fa(te,je),this},m.beginTilingPattern=function(te){k("beginTilingPattern()"),Od(te.boundingBox[0],te.boundingBox[1],te.boundingBox[2]-te.boundingBox[0],te.boundingBox[3]-te.boundingBox[1],te.matrix)},m.endTilingPattern=function(te,je){k("endTilingPattern()"),je.stream=be[D].join(`
`),Fa(te,je),Jr.publish("endTilingPattern",je),Qs.pop().restore()};var Xa=m.__private__.newObject=function(){var te=en();return Se(te,!0),te},en=m.__private__.newObjectDeferred=function(){return ce++,ie[ce]=function(){return de},ce},Se=function(te,je){return je=typeof je=="boolean"&&je,ie[te]=de,je&&ue(te+" 0 obj"),te},Ve=m.__private__.newAdditionalObject=function(){var te={objId:en(),content:""};return oe.push(te),te},Me=en(),He=en(),Ne=m.__private__.decodeColorString=function(te){var je=te.split(" ");if(je.length!==2||je[1]!=="g"&&je[1]!=="G")je.length===5&&(je[4]==="k"||je[4]==="K")&&(je=[(1-je[0])*(1-je[3]),(1-je[1])*(1-je[3]),(1-je[2])*(1-je[3]),"r"]);else{var Ke=parseFloat(je[0]);je=[Ke,Ke,Ke,"r"]}for(var Je="#",ot=0;ot<3;ot++)Je+=("0"+Math.floor(255*parseFloat(je[ot])).toString(16)).slice(-2);return Je},xe=m.__private__.encodeColorString=function(te){var je;typeof te=="string"&&(te={ch1:te});var Ke=te.ch1,Je=te.ch2,ot=te.ch3,Ct=te.ch4,Ht=te.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ke=="string"&&Ke.charAt(0)!=="#"){var Zt=new Lue(Ke);if(Zt.ok)Ke=Zt.toHex();else if(!/^\d*\.?\d*$/.test(Ke))throw new Error('Invalid color "'+Ke+'" passed to jsPDF.encodeColorString.')}if(typeof Ke=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ke)&&(Ke="#"+Ke[1]+Ke[1]+Ke[2]+Ke[2]+Ke[3]+Ke[3]),typeof Ke=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ke)){var R=parseInt(Ke.substr(1),16);Ke=R>>16&255,Je=R>>8&255,ot=255&R}if(Je===void 0||Ct===void 0&&Ke===Je&&Je===ot)if(typeof Ke=="string")je=Ke+" "+Ht[0];else switch(te.precision){case 2:je=L(Ke/255)+" "+Ht[0];break;case 3:default:je=F(Ke/255)+" "+Ht[0]}else if(Ct===void 0||wn(Ct)==="object"){if(Ct&&!isNaN(Ct.a)&&Ct.a===0)return je=["1.","1.","1.",Ht[1]].join(" ");if(typeof Ke=="string")je=[Ke,Je,ot,Ht[1]].join(" ");else switch(te.precision){case 2:je=[L(Ke/255),L(Je/255),L(ot/255),Ht[1]].join(" ");break;default:case 3:je=[F(Ke/255),F(Je/255),F(ot/255),Ht[1]].join(" ")}}else if(typeof Ke=="string")je=[Ke,Je,ot,Ct,Ht[2]].join(" ");else switch(te.precision){case 2:je=[L(Ke),L(Je),L(ot),L(Ct),Ht[2]].join(" ");break;case 3:default:je=[F(Ke),F(Je),F(ot),F(Ct),Ht[2]].join(" ")}return je},Fe=m.__private__.getFilters=function(){return o},Ge=m.__private__.putStream=function(te){var je=(te=te||{}).data||"",Ke=te.filters||Fe(),Je=te.alreadyAppliedFilters||[],ot=te.addLength1||!1,Ct=je.length,Ht=te.objectId,Zt=function(Br){return Br};if(u!==null&&Ht===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Zt=hn.encryptor(Ht,0));var R={};Ke===!0&&(Ke=["FlateEncode"]);var se=te.additionalKeyValues||[],me=(R=xr.API.processDataByFilters!==void 0?xr.API.processDataByFilters(je,Ke):{data:je,reverseChain:[]}).reverseChain+(Array.isArray(Je)?Je.join(" "):Je.toString());if(R.data.length!==0&&(se.push({key:"Length",value:R.data.length}),ot===!0&&se.push({key:"Length1",value:Ct})),me.length!=0)if(me.split("/").length-1==1)se.push({key:"Filter",value:me});else{se.push({key:"Filter",value:"["+me+"]"});for(var Oe=0;Oe<se.length;Oe+=1)if(se[Oe].key==="DecodeParms"){for(var it=[],pt=0;pt<R.reverseChain.split("/").length-1;pt+=1)it.push("null");it.push(se[Oe].value),se[Oe].value="["+it.join(" ")+"]"}}ue("<<");for(var Qt=0;Qt<se.length;Qt++)ue("/"+se[Qt].key+" "+se[Qt].value);ue(">>"),R.data.length!==0&&(ue("stream"),ue(Zt(R.data)),ue("endstream"))},Ue=m.__private__.putPage=function(te){var je=te.number,Ke=te.data,Je=te.objId,ot=te.contentsObjId;Se(Je,!0),ue("<</Type /Page"),ue("/Parent "+te.rootDictionaryObjId+" 0 R"),ue("/Resources "+te.resourceDictionaryObjId+" 0 R"),ue("/MediaBox ["+parseFloat(j(te.mediaBox.bottomLeftX))+" "+parseFloat(j(te.mediaBox.bottomLeftY))+" "+j(te.mediaBox.topRightX)+" "+j(te.mediaBox.topRightY)+"]"),te.cropBox!==null&&ue("/CropBox ["+j(te.cropBox.bottomLeftX)+" "+j(te.cropBox.bottomLeftY)+" "+j(te.cropBox.topRightX)+" "+j(te.cropBox.topRightY)+"]"),te.bleedBox!==null&&ue("/BleedBox ["+j(te.bleedBox.bottomLeftX)+" "+j(te.bleedBox.bottomLeftY)+" "+j(te.bleedBox.topRightX)+" "+j(te.bleedBox.topRightY)+"]"),te.trimBox!==null&&ue("/TrimBox ["+j(te.trimBox.bottomLeftX)+" "+j(te.trimBox.bottomLeftY)+" "+j(te.trimBox.topRightX)+" "+j(te.trimBox.topRightY)+"]"),te.artBox!==null&&ue("/ArtBox ["+j(te.artBox.bottomLeftX)+" "+j(te.artBox.bottomLeftY)+" "+j(te.artBox.topRightX)+" "+j(te.artBox.topRightY)+"]"),typeof te.userUnit=="number"&&te.userUnit!==1&&ue("/UserUnit "+te.userUnit),Jr.publish("putPage",{objId:Je,pageContext:pr[je],pageNumber:je,page:Ke}),ue("/Contents "+ot+" 0 R"),ue(">>"),ue("endobj");var Ct=Ke.join(`
`);return E===N.ADVANCED&&(Ct+=`
Q`),Se(ot,!0),Ge({data:Ct,filters:Fe(),objectId:ot}),ue("endobj"),Je},Ye=m.__private__.putPages=function(){var te,je,Ke=[];for(te=1;te<=Lr;te++)pr[te].objId=en(),pr[te].contentsObjId=en();for(te=1;te<=Lr;te++)Ke.push(Ue({number:te,data:be[te],objId:pr[te].objId,contentsObjId:pr[te].contentsObjId,mediaBox:pr[te].mediaBox,cropBox:pr[te].cropBox,bleedBox:pr[te].bleedBox,trimBox:pr[te].trimBox,artBox:pr[te].artBox,userUnit:pr[te].userUnit,rootDictionaryObjId:Me,resourceDictionaryObjId:He}));Se(Me,!0),ue("<</Type /Pages");var Je="/Kids [";for(je=0;je<Lr;je++)Je+=Ke[je]+" 0 R ";ue(Je+"]"),ue("/Count "+Lr),ue(">>"),ue("endobj"),Jr.publish("postPutPages")},et=function(te){Jr.publish("putFont",{font:te,out:ue,newObject:Xa,putStream:Ge}),te.isAlreadyPutted!==!0&&(te.objectNumber=Xa(),ue("<<"),ue("/Type /Font"),ue("/BaseFont /"+Yv(te.postScriptName)),ue("/Subtype /Type1"),typeof te.encoding=="string"&&ue("/Encoding /"+te.encoding),ue("/FirstChar 32"),ue("/LastChar 255"),ue(">>"),ue("endobj"))},Nt=function(){for(var te in qt)qt.hasOwnProperty(te)&&(f===!1||f===!0&&A.hasOwnProperty(te))&&et(qt[te])},Et=function(te){te.objectNumber=Xa();var je=[];je.push({key:"Type",value:"/XObject"}),je.push({key:"Subtype",value:"/Form"}),je.push({key:"BBox",value:"["+[j(te.x),j(te.y),j(te.x+te.width),j(te.y+te.height)].join(" ")+"]"}),je.push({key:"Matrix",value:"["+te.matrix.toString()+"]"});var Ke=te.pages[1].join(`
`);Ge({data:Ke,additionalKeyValues:je,objectId:te.objectNumber}),ue("endobj")},zt=function(){for(var te in Za)Za.hasOwnProperty(te)&&Et(Za[te])},Dt=function(te,je){var Ke,Je=[],ot=1/(je-1);for(Ke=0;Ke<1;Ke+=ot)Je.push(Ke);if(Je.push(1),te[0].offset!=0){var Ct={offset:0,color:te[0].color};te.unshift(Ct)}if(te[te.length-1].offset!=1){var Ht={offset:1,color:te[te.length-1].color};te.push(Ht)}for(var Zt="",R=0,se=0;se<Je.length;se++){for(Ke=Je[se];Ke>te[R+1].offset;)R++;var me=te[R].offset,Oe=(Ke-me)/(te[R+1].offset-me),it=te[R].color,pt=te[R+1].color;Zt+=J(Math.round((1-Oe)*it[0]+Oe*pt[0]).toString(16))+J(Math.round((1-Oe)*it[1]+Oe*pt[1]).toString(16))+J(Math.round((1-Oe)*it[2]+Oe*pt[2]).toString(16))}return Zt.trim()},Vt=function(te,je){je||(je=21);var Ke=Xa(),Je=Dt(te.colors,je),ot=[];ot.push({key:"FunctionType",value:"0"}),ot.push({key:"Domain",value:"[0.0 1.0]"}),ot.push({key:"Size",value:"["+je+"]"}),ot.push({key:"BitsPerSample",value:"8"}),ot.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ot.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ge({data:Je,additionalKeyValues:ot,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ke}),ue("endobj"),te.objectNumber=Xa(),ue("<< /ShadingType "+te.type),ue("/ColorSpace /DeviceRGB");var Ct="/Coords ["+j(parseFloat(te.coords[0]))+" "+j(parseFloat(te.coords[1]))+" ";te.type===2?Ct+=j(parseFloat(te.coords[2]))+" "+j(parseFloat(te.coords[3])):Ct+=j(parseFloat(te.coords[2]))+" "+j(parseFloat(te.coords[3]))+" "+j(parseFloat(te.coords[4]))+" "+j(parseFloat(te.coords[5])),ue(Ct+="]"),te.matrix&&ue("/Matrix ["+te.matrix.toString()+"]"),ue("/Function "+Ke+" 0 R"),ue("/Extend [true true]"),ue(">>"),ue("endobj")},kr=function(te,je){var Ke=en(),Je=Xa();je.push({resourcesOid:Ke,objectOid:Je}),te.objectNumber=Je;var ot=[];ot.push({key:"Type",value:"/Pattern"}),ot.push({key:"PatternType",value:"1"}),ot.push({key:"PaintType",value:"1"}),ot.push({key:"TilingType",value:"1"}),ot.push({key:"BBox",value:"["+te.boundingBox.map(j).join(" ")+"]"}),ot.push({key:"XStep",value:j(te.xStep)}),ot.push({key:"YStep",value:j(te.yStep)}),ot.push({key:"Resources",value:Ke+" 0 R"}),te.matrix&&ot.push({key:"Matrix",value:"["+te.matrix.toString()+"]"}),Ge({data:te.stream,additionalKeyValues:ot,objectId:te.objectNumber}),ue("endobj")},ea=function(te){var je;for(je in yr)yr.hasOwnProperty(je)&&(yr[je]instanceof xg?Vt(yr[je]):yr[je]instanceof cb&&kr(yr[je],te))},ta=function(te){for(var je in te.objectNumber=Xa(),ue("<<"),te)switch(je){case"opacity":ue("/ca "+L(te[je]));break;case"stroke-opacity":ue("/CA "+L(te[je]))}ue(">>"),ue("endobj")},oa=function(){var te;for(te in Rr)Rr.hasOwnProperty(te)&&ta(Rr[te])},bs=function(){for(var te in ue("/XObject <<"),Za)Za.hasOwnProperty(te)&&Za[te].objectNumber>=0&&ue("/"+te+" "+Za[te].objectNumber+" 0 R");Jr.publish("putXobjectDict"),ue(">>")},Uo=function(){hn.oid=Xa(),ue("<<"),ue("/Filter /Standard"),ue("/V "+hn.v),ue("/R "+hn.r),ue("/U <"+hn.toHexString(hn.U)+">"),ue("/O <"+hn.toHexString(hn.O)+">"),ue("/P "+hn.P),ue(">>"),ue("endobj")},ys=function(){for(var te in ue("/Font <<"),qt)qt.hasOwnProperty(te)&&(f===!1||f===!0&&A.hasOwnProperty(te))&&ue("/"+te+" "+qt[te].objectNumber+" 0 R");ue(">>")},fi=function(){if(Object.keys(yr).length>0){for(var te in ue("/Shading <<"),yr)yr.hasOwnProperty(te)&&yr[te]instanceof xg&&yr[te].objectNumber>=0&&ue("/"+te+" "+yr[te].objectNumber+" 0 R");Jr.publish("putShadingPatternDict"),ue(">>")}},zs=function(te){if(Object.keys(yr).length>0){for(var je in ue("/Pattern <<"),yr)yr.hasOwnProperty(je)&&yr[je]instanceof m.TilingPattern&&yr[je].objectNumber>=0&&yr[je].objectNumber<te&&ue("/"+je+" "+yr[je].objectNumber+" 0 R");Jr.publish("putTilingPatternDict"),ue(">>")}},Bi=function(){if(Object.keys(Rr).length>0){var te;for(te in ue("/ExtGState <<"),Rr)Rr.hasOwnProperty(te)&&Rr[te].objectNumber>=0&&ue("/"+te+" "+Rr[te].objectNumber+" 0 R");Jr.publish("putGStateDict"),ue(">>")}},Nn=function(te){Se(te.resourcesOid,!0),ue("<<"),ue("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ys(),fi(),zs(te.objectOid),Bi(),bs(),ue(">>"),ue("endobj")},hi=function(){var te=[];Nt(),oa(),zt(),ea(te),Jr.publish("putResources"),te.forEach(Nn),Nn({resourcesOid:He,objectOid:Number.MAX_SAFE_INTEGER}),Jr.publish("postPutResources")},jf=function(){Jr.publish("putAdditionalObjects");for(var te=0;te<oe.length;te++){var je=oe[te];Se(je.objId,!0),ue(je.content),ue("endobj")}Jr.publish("postPutAdditionalObjects")},jA=function(te){gr[te.fontName]=gr[te.fontName]||{},gr[te.fontName][te.fontStyle]=te.id},Ed=function(te,je,Ke,Je,ot){var Ct={id:"F"+(Object.keys(qt).length+1).toString(10),postScriptName:te,fontName:je,fontStyle:Ke,encoding:Je,isStandardFont:ot||!1,metadata:{}};return Jr.publish("addFont",{font:Ct,instance:this}),qt[Ct.id]=Ct,jA(Ct),Ct.id},Gh=function(te){for(var je=0,Ke=ve.length;je<Ke;je++){var Je=Ed.call(this,te[je][0],te[je][1],te[je][2],ve[je][3],!0);f===!1&&(A[Je]=!0);var ot=te[je][0].split("-");jA({id:Je,fontName:ot[0],fontStyle:ot[1]||""})}Jr.publish("addFonts",{fonts:qt,dictionary:gr})},Ii=function(te){return te.foo=function(){try{return te.apply(this,arguments)}catch(Je){var je=Je.stack||"";~je.indexOf(" at ")&&(je=je.split(" at ")[1]);var Ke="Error in function "+je.split(`
`)[0].split("<")[0]+": "+Je.message;if(!Ur.console)throw new Error(Ke);Ur.console.error(Ke,Je),Ur.alert&&alert(Ke)}},te.foo.bar=te,te.foo},kf=function(te,je){var Ke,Je,ot,Ct,Ht,Zt,R,se,me;if(ot=(je=je||{}).sourceEncoding||"Unicode",Ht=je.outputEncoding,(je.autoencode||Ht)&&qt[ct].metadata&&qt[ct].metadata[ot]&&qt[ct].metadata[ot].encoding&&(Ct=qt[ct].metadata[ot].encoding,!Ht&&qt[ct].encoding&&(Ht=qt[ct].encoding),!Ht&&Ct.codePages&&(Ht=Ct.codePages[0]),typeof Ht=="string"&&(Ht=Ct[Ht]),Ht)){for(R=!1,Zt=[],Ke=0,Je=te.length;Ke<Je;Ke++)(se=Ht[te.charCodeAt(Ke)])?Zt.push(String.fromCharCode(se)):Zt.push(te[Ke]),Zt[Ke].charCodeAt(0)>>8&&(R=!0);te=Zt.join("")}for(Ke=te.length;R===void 0&&Ke!==0;)te.charCodeAt(Ke-1)>>8&&(R=!0),Ke--;if(!R)return te;for(Zt=je.noBOM?[]:[254,255],Ke=0,Je=te.length;Ke<Je;Ke++){if((me=(se=te.charCodeAt(Ke))>>8)>>8)throw new Error("Character at position "+Ke+" of string '"+te+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Zt.push(me),Zt.push(se-(me<<8))}return String.fromCharCode.apply(void 0,Zt)},ja=m.__private__.pdfEscape=m.pdfEscape=function(te,je){return kf(te,je).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Oi=m.__private__.beginPage=function(te){be[++Lr]=[],pr[Lr]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(te[0]),topRightY:Number(te[1])}},Xl(Lr),Ee(be[D])},Cd=function(te,je){var Ke,Je,ot;switch(r=je||r,typeof te=="string"&&(Ke=y(te.toLowerCase()),Array.isArray(Ke)&&(Je=Ke[0],ot=Ke[1])),Array.isArray(te)&&(Je=te[0]*Ze,ot=te[1]*Ze),isNaN(Je)&&(Je=n[0],ot=n[1]),(Je>14400||ot>14400)&&(On.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Je=Math.min(14400,Je),ot=Math.min(14400,ot)),n=[Je,ot],r.substr(0,1)){case"l":ot>Je&&(n=[ot,Je]);break;case"p":Je>ot&&(n=[ot,Je])}Oi(n),Xh(_d),ue(Di),Yh!==0&&ue(Yh+" J"),Cu!==0&&ue(Cu+" j"),Jr.publish("addPage",{pageNumber:Lr})},jd=function(te){te>0&&te<=Lr&&(be.splice(te,1),pr.splice(te,1),Lr--,D>Lr&&(D=Lr),this.setPage(D))},Xl=function(te){te>0&&te<=Lr&&(D=te)},Qa=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return be.length-1},kd=function(te,je,Ke){var Je,ot=void 0;return Ke=Ke||{},te=te!==void 0?te:qt[ct].fontName,je=je!==void 0?je:qt[ct].fontStyle,Je=te.toLowerCase(),gr[Je]!==void 0&&gr[Je][je]!==void 0?ot=gr[Je][je]:gr[te]!==void 0&&gr[te][je]!==void 0?ot=gr[te][je]:Ke.disableWarning===!1&&On.warn("Unable to look up font label for font '"+te+"', '"+je+"'. Refer to getFontList() for available fonts."),ot||Ke.noFallback||(ot=gr.times[je])==null&&(ot=gr.times.normal),ot},Ho=m.__private__.putInfo=function(){var te=Xa(),je=function(Je){return Je};for(var Ke in u!==null&&(je=hn.encryptor(te,0)),ue("<<"),ue("/Producer ("+ja(je("jsPDF "+xr.version))+")"),We)We.hasOwnProperty(Ke)&&We[Ke]&&ue("/"+Ke.substr(0,1).toUpperCase()+Ke.substr(1)+" ("+ja(je(We[Ke]))+")");ue("/CreationDate ("+ja(je(K))+")"),ue(">>"),ue("endobj")},Dc=m.__private__.putCatalog=function(te){var je=(te=te||{}).rootDictionaryObjId||Me;switch(Xa(),ue("<<"),ue("/Type /Catalog"),ue("/Pages "+je+" 0 R"),ne||(ne="fullwidth"),ne){case"fullwidth":ue("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ue("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ue("/OpenAction [3 0 R /Fit]");break;case"original":ue("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ke=""+ne;Ke.substr(Ke.length-1)==="%"&&(ne=parseInt(ne)/100),typeof ne=="number"&&ue("/OpenAction [3 0 R /XYZ null null "+L(ne)+"]")}switch(qe||(qe="continuous"),qe){case"continuous":ue("/PageLayout /OneColumn");break;case"single":ue("/PageLayout /SinglePage");break;case"two":case"twoleft":ue("/PageLayout /TwoColumnLeft");break;case"tworight":ue("/PageLayout /TwoColumnRight")}ke&&ue("/PageMode /"+ke),Jr.publish("putCatalog"),ue(">>"),ue("endobj")},kA=m.__private__.putTrailer=function(){ue("trailer"),ue("<<"),ue("/Size "+(ce+1)),ue("/Root "+ce+" 0 R"),ue("/Info "+(ce-1)+" 0 R"),u!==null&&ue("/Encrypt "+hn.oid+" 0 R"),ue("/ID [ <"+Q+"> <"+Q+"> ]"),ue(">>")},qh=m.__private__.putHeader=function(){ue("%PDF-"+g),ue("%ºß¬à")},Kh=m.__private__.putXRef=function(){var te="0000000000";ue("xref"),ue("0 "+(ce+1)),ue("0000000000 65535 f ");for(var je=1;je<=ce;je++)typeof ie[je]=="function"?ue((te+ie[je]()).slice(-10)+" 00000 n "):ie[je]!==void 0?ue((te+ie[je]).slice(-10)+" 00000 n "):ue("0000000000 00000 n ")},Fc=m.__private__.buildDocument=function(){Te(),Ee(re),Jr.publish("buildDocument"),qh(),Ye(),jf(),hi(),u!==null&&Uo(),Ho(),Dc();var te=de;return Kh(),kA(),ue("startxref"),ue(""+te),ue("%%EOF"),Ee(be[D]),re.join(`
`)},Sf=m.__private__.getBlob=function(te){return new Blob([he(te)],{type:"application/pdf"})},Pc=m.output=m.__private__.output=Ii(function(te,je){switch(typeof(je=je||{})=="string"?je={filename:je}:je.filename=je.filename||"generated.pdf",te){case void 0:return Fc();case"save":m.save(je.filename);break;case"arraybuffer":return he(Fc());case"blob":return Sf(Fc());case"bloburi":case"bloburl":if(Ur.URL!==void 0&&typeof Ur.URL.createObjectURL=="function")return Ur.URL&&Ur.URL.createObjectURL(Sf(Fc()))||void 0;On.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ke="",Je=Fc();try{Ke=AP(Je)}catch{Ke=AP(unescape(encodeURIComponent(Je)))}return"data:application/pdf;filename="+je.filename+";base64,"+Ke;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ur)==="[object Window]"){var ot="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ct=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';je.pdfObjectUrl&&(ot=je.pdfObjectUrl,Ct="");var Ht='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ot+'"'+Ct+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(je)+");<\/script></body></html>",Zt=Ur.open();return Zt!==null&&Zt.document.write(Ht),Zt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ur)==="[object Window]"){var R='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(je.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+je.filename+'" width="500px" height="400px" /></body></html>',se=Ur.open();if(se!==null){se.document.write(R);var me=this;se.document.documentElement.querySelector("#pdfViewer").onload=function(){se.document.title=je.filename,se.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(me.output("bloburl"))}}return se}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ur)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Oe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",je)+'"></iframe></body></html>',it=Ur.open();if(it!==null&&(it.document.write(Oe),it.document.title=je.filename),it||typeof safari>"u")return it;break;case"datauri":case"dataurl":return Ur.document.location.href=this.output("datauristring",je);default:return null}}),Yl=function(te){return Array.isArray(vs)===!0&&vs.indexOf(te)>-1};switch(a){case"pt":Ze=1;break;case"mm":Ze=72/25.4;break;case"cm":Ze=72/2.54;break;case"in":Ze=72;break;case"px":Ze=Yl("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ze=12;break;case"ex":Ze=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);Ze=a}var hn=null;Y(),X();var Rc=function(te){return u!==null?hn.encryptor(te,0):function(je){return je}},Jl=m.__private__.getPageInfo=m.getPageInfo=function(te){if(isNaN(te)||te%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:pr[te].objId,pageNumber:te,pageContext:pr[te]}},Tr=m.__private__.getPageInfoByObjId=function(te){if(isNaN(te)||te%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var je in pr)if(pr[je].objId===te)break;return Jl(je)},Zl=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:pr[D].objId,pageNumber:D,pageContext:pr[D]}};m.addPage=function(){return Cd.apply(this,arguments),this},m.setPage=function(){return Xl.apply(this,arguments),Ee.call(this,be[D]),this},m.insertPage=function(te){return this.addPage(),this.movePage(D,te),this},m.movePage=function(te,je){var Ke,Je;if(te>je){Ke=be[te],Je=pr[te];for(var ot=te;ot>je;ot--)be[ot]=be[ot-1],pr[ot]=pr[ot-1];be[je]=Ke,pr[je]=Je,this.setPage(je)}else if(te<je){Ke=be[te],Je=pr[te];for(var Ct=te;Ct<je;Ct++)be[Ct]=be[Ct+1],pr[Ct]=pr[Ct+1];be[je]=Ke,pr[je]=Je,this.setPage(je)}return this},m.deletePage=function(){return jd.apply(this,arguments),this},m.__private__.text=m.text=function(te,je,Ke,Je,ot){var Ct,Ht,Zt,R,se,me,Oe,it,pt,Qt=(Je=Je||{}).scope||this;if(typeof te=="number"&&typeof je=="number"&&(typeof Ke=="string"||Array.isArray(Ke))){var Br=Ke;Ke=je,je=te,te=Br}if(arguments[3]instanceof tr?(k("The transform parameter of text() with a Matrix value"),pt=ot):(Zt=arguments[4],R=arguments[5],wn(Oe=arguments[3])==="object"&&Oe!==null||(typeof Zt=="string"&&(R=Zt,Zt=null),typeof Oe=="string"&&(R=Oe,Oe=null),typeof Oe=="number"&&(Zt=Oe,Oe=null),Je={flags:Oe,angle:Zt,align:R})),isNaN(je)||isNaN(Ke)||te==null)throw new Error("Invalid arguments passed to jsPDF.text");if(te.length===0)return Qt;var ma="",Gr=!1,za=typeof Je.lineHeightFactor=="number"?Je.lineHeightFactor:Aa,tn=Qt.internal.scaleFactor;function ac(da){return da=da.split("	").join(Array(Je.TabLen||9).join(" ")),ja(da,Oe)}function ls(da){for(var ua,En=da.concat(),cs=[],sc=En.length;sc--;)typeof(ua=En.shift())=="string"?cs.push(ua):Array.isArray(da)&&(ua.length===1||ua[1]===void 0&&ua[2]===void 0)?cs.push(ua[0]):cs.push([ua[0],ua[1],ua[2]]);return cs}function Vo(da,ua){var En;if(typeof da=="string")En=ua(da)[0];else if(Array.isArray(da)){for(var cs,sc,Qf=da.concat(),zf=[],Bu=Qf.length;Bu--;)typeof(cs=Qf.shift())=="string"?zf.push(ua(cs)[0]):Array.isArray(cs)&&typeof cs[0]=="string"&&(sc=ua(cs[0],cs[1],cs[2]),zf.push([sc[0],sc[1],sc[2]]));En=zf}return En}var Fd=!1,Of=!0;if(typeof te=="string")Fd=!0;else if(Array.isArray(te)){var BA=te.concat();Ht=[];for(var Jh,$s=BA.length;$s--;)(typeof(Jh=BA.shift())!="string"||Array.isArray(Jh)&&typeof Jh[0]!="string")&&(Of=!1);Fd=Of}if(Fd===!1)throw new Error('Type of text must be string or Array. "'+te+'" is not recognized.');typeof te=="string"&&(te=te.match(/[\r?\n]/)?te.split(/\r\n|\r|\n/g):[te]);var Df=le/Qt.internal.scaleFactor,Zh=Df*(za-1);switch(Je.baseline){case"bottom":Ke-=Zh;break;case"top":Ke+=Df-Zh;break;case"hanging":Ke+=Df-2*Zh;break;case"middle":Ke+=Df/2-Zh}if((me=Je.maxWidth||0)>0&&(typeof te=="string"?te=Qt.splitTextToSize(te,me):Object.prototype.toString.call(te)==="[object Array]"&&(te=te.reduce(function(da,ua){return da.concat(Qt.splitTextToSize(ua,me))},[]))),Ct={text:te,x:je,y:Ke,options:Je,mutex:{pdfEscape:ja,activeFontKey:ct,fonts:qt,activeFontSize:le}},Jr.publish("preProcessText",Ct),te=Ct.text,Zt=(Je=Ct.options).angle,!(pt instanceof tr)&&Zt&&typeof Zt=="number"){Zt*=Math.PI/180,Je.rotationDirection===0&&(Zt=-Zt),E===N.ADVANCED&&(Zt=-Zt);var e0=Math.cos(Zt),IA=Math.sin(Zt);pt=new tr(e0,IA,-IA,e0,0,0)}else Zt&&Zt instanceof tr&&(pt=Zt);E!==N.ADVANCED||pt||(pt=ca),(se=Je.charSpace||Eu)!==void 0&&(ma+=j(S(se))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(it=Je.horizontalScale)!==void 0&&(ma+=j(100*it)+` Tz
`),Je.lang;var Go=-1,Ay=Je.renderingMode!==void 0?Je.renderingMode:Je.stroke,Pp=Qt.internal.getCurrentPageInfo().pageContext;switch(Ay){case 0:case!1:case"fill":Go=0;break;case 1:case!0:case"stroke":Go=1;break;case 2:case"fillThenStroke":Go=2;break;case 3:case"invisible":Go=3;break;case 4:case"fillAndAddForClipping":Go=4;break;case 5:case"strokeAndAddPathForClipping":Go=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Go=6;break;case 7:case"addToPathForClipping":Go=7}var Ux=Pp.usedRenderingMode!==void 0?Pp.usedRenderingMode:-1;Go!==-1?ma+=Go+` Tr
`:Ux!==-1&&(ma+=`0 Tr
`),Go!==-1&&(Pp.usedRenderingMode=Go),R=Je.align||"left";var nc,Ai=le*za,Ff=Qt.internal.pageSize.getWidth(),Rp=qt[ct];se=Je.charSpace||Eu,me=Je.maxWidth||0,Oe=Object.assign({autoencode:!0,noBOM:!0},Je.flags);var _u=[],Pf=function(da){return Qt.getStringUnitWidth(da,{font:Rp,charSpace:se,fontSize:le,doKerning:!1})*le/tn};if(Object.prototype.toString.call(te)==="[object Array]"){var bo;Ht=ls(te),R!=="left"&&(nc=Ht.map(Pf));var Fi,Rf=0;if(R==="right"){je-=nc[0],te=[],$s=Ht.length;for(var qo=0;qo<$s;qo++)qo===0?(Fi=Xi(je),bo=Ns(Ke)):(Fi=S(Rf-nc[qo]),bo=-Ai),te.push([Ht[qo],Fi,bo]),Rf=nc[qo]}else if(R==="center"){je-=nc[0]/2,te=[],$s=Ht.length;for(var Hc=0;Hc<$s;Hc++)Hc===0?(Fi=Xi(je),bo=Ns(Ke)):(Fi=S((Rf-nc[Hc])/2),bo=-Ai),te.push([Ht[Hc],Fi,bo]),Rf=nc[Hc]}else if(R==="left"){te=[],$s=Ht.length;for(var Pd=0;Pd<$s;Pd++)te.push(Ht[Pd])}else if(R==="justify"&&Rp.encoding==="Identity-H"){te=[],$s=Ht.length,me=me!==0?me:Ff;for(var Qc=0,Zn=0;Zn<$s;Zn++)if(bo=Zn===0?Ns(Ke):-Ai,Fi=Zn===0?Xi(je):Qc,Zn<$s-1){var zc=S((me-nc[Zn])/(Ht[Zn].split(" ").length-1)),Es=Ht[Zn].split(" ");te.push([Es[0]+" ",Fi,bo]),Qc=0;for(var Ko=1;Ko<Es.length;Ko++){var t0=(Pf(Es[Ko-1]+" "+Es[Ko])-Pf(Es[Ko]))*tn+zc;Ko==Es.length-1?te.push([Es[Ko],t0,0]):te.push([Es[Ko]+" ",t0,0]),Qc-=t0}}else te.push([Ht[Zn],Fi,bo]);te.push(["",Qc,0])}else{if(R!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(te=[],$s=Ht.length,me=me!==0?me:Ff,Zn=0;Zn<$s;Zn++)bo=Zn===0?Ns(Ke):-Ai,Fi=Zn===0?Xi(je):0,Zn<$s-1?_u.push(j(S((me-nc[Zn])/(Ht[Zn].split(" ").length-1)))):_u.push(0),te.push([Ht[Zn],Fi,bo])}}var Rd=typeof Je.R2L=="boolean"?Je.R2L:pe;Rd===!0&&(te=Vo(te,function(da,ua,En){return[da.split("").reverse().join(""),ua,En]})),Ct={text:te,x:je,y:Ke,options:Je,mutex:{pdfEscape:ja,activeFontKey:ct,fonts:qt,activeFontSize:le}},Jr.publish("postProcessText",Ct),te=Ct.text,Gr=Ct.mutex.isHex||!1;var OA=qt[ct].encoding;OA!=="WinAnsiEncoding"&&OA!=="StandardEncoding"||(te=Vo(te,function(da,ua,En){return[ac(da),ua,En]})),Ht=ls(te),te=[];for(var Lf,Mf,Uf,r0=0,DA=1,Hf=Array.isArray(Ht[0])?DA:r0,Tu="",a0=function(da,ua,En){var cs="";return En instanceof tr?(En=typeof Je.angle=="number"?va(En,new tr(1,0,0,1,da,ua)):va(new tr(1,0,0,1,da,ua),En),E===N.ADVANCED&&(En=va(new tr(1,0,0,-1,0,0),En)),cs=En.join(" ")+` Tm
`):cs=j(da)+" "+j(ua)+` Td
`,cs},es=0;es<Ht.length;es++){switch(Tu="",Hf){case DA:Uf=(Gr?"<":"(")+Ht[es][0]+(Gr?">":")"),Lf=parseFloat(Ht[es][1]),Mf=parseFloat(Ht[es][2]);break;case r0:Uf=(Gr?"<":"(")+Ht[es]+(Gr?">":")"),Lf=Xi(je),Mf=Ns(Ke)}_u!==void 0&&_u[es]!==void 0&&(Tu=_u[es]+` Tw
`),es===0?te.push(Tu+a0(Lf,Mf,pt)+Uf):Hf===r0?te.push(Tu+Uf):Hf===DA&&te.push(Tu+a0(Lf,Mf,pt)+Uf)}te=Hf===r0?te.join(` Tj
T* `):te.join(` Tj
`),te+=` Tj
`;var Ol=`BT
/`;return Ol+=ct+" "+le+` Tf
`,Ol+=j(le*za)+` TL
`,Ol+=Mc+`
`,Ol+=ma,Ol+=te,ue(Ol+="ET"),A[ct]=!0,Qt};var SA=m.__private__.clip=m.clip=function(te){return ue(te==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return SA("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ue("n"),this};var Ki=m.__private__.isValidStyle=function(te){var je=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(te)!==-1&&(je=!0),je};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(te){return Ki(te)&&(d=te),this};var Qo=m.__private__.getStyle=m.getStyle=function(te){var je=d;switch(te){case"D":case"S":je="S";break;case"F":je="f";break;case"FD":case"DF":je="B";break;case"f":case"f*":case"B":case"B*":je=te}return je},vo=m.close=function(){return ue("h"),this};m.stroke=function(){return ue("S"),this},m.fill=function(te){return ec("f",te),this},m.fillEvenOdd=function(te){return ec("f*",te),this},m.fillStroke=function(te){return ec("B",te),this},m.fillStrokeEvenOdd=function(te){return ec("B*",te),this};var ec=function(te,je){wn(je)==="object"?Lc(je,te):ue(te)},zo=function(te){te===null||E===N.ADVANCED&&te===void 0||(te=Qo(te),ue(te))};function Sd(te,je,Ke,Je,ot){var Ct=new cb(je||this.boundingBox,Ke||this.xStep,Je||this.yStep,this.gState,ot||this.matrix);Ct.stream=this.stream;var Ht=te+"$$"+this.cloneIndex+++"$$";return Fa(Ht,Ct),Ct}var Lc=function(te,je){var Ke=Tn[te.key],Je=yr[Ke];if(Je instanceof xg)ue("q"),ue(Wh(je)),Je.gState&&m.setGState(Je.gState),ue(te.matrix.toString()+" cm"),ue("/"+Ke+" sh"),ue("Q");else if(Je instanceof cb){var ot=new tr(1,0,0,-1,0,Yi());te.matrix&&(ot=ot.multiply(te.matrix||ca),Ke=Sd.call(Je,te.key,te.boundingBox,te.xStep,te.yStep,ot).id),ue("q"),ue("/Pattern cs"),ue("/"+Ke+" scn"),Je.gState&&m.setGState(Je.gState),ue(je),ue("Q")}},Wh=function(te){switch(te){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},$o=m.moveTo=function(te,je){return ue(j(S(te))+" "+j(H(je))+" m"),this},Wi=m.lineTo=function(te,je){return ue(j(S(te))+" "+j(H(je))+" l"),this},tc=m.curveTo=function(te,je,Ke,Je,ot,Ct){return ue([j(S(te)),j(H(je)),j(S(Ke)),j(H(Je)),j(S(ot)),j(H(Ct)),"c"].join(" ")),this};m.__private__.line=m.line=function(te,je,Ke,Je,ot){if(isNaN(te)||isNaN(je)||isNaN(Ke)||isNaN(Je)||!Ki(ot))throw new Error("Invalid arguments passed to jsPDF.line");return E===N.COMPAT?this.lines([[Ke-te,Je-je]],te,je,[1,1],ot||"S"):this.lines([[Ke-te,Je-je]],te,je,[1,1]).stroke()},m.__private__.lines=m.lines=function(te,je,Ke,Je,ot,Ct){var Ht,Zt,R,se,me,Oe,it,pt,Qt,Br,ma,Gr;if(typeof te=="number"&&(Gr=Ke,Ke=je,je=te,te=Gr),Je=Je||[1,1],Ct=Ct||!1,isNaN(je)||isNaN(Ke)||!Array.isArray(te)||!Array.isArray(Je)||!Ki(ot)||typeof Ct!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for($o(je,Ke),Ht=Je[0],Zt=Je[1],se=te.length,Br=je,ma=Ke,R=0;R<se;R++)(me=te[R]).length===2?(Br=me[0]*Ht+Br,ma=me[1]*Zt+ma,Wi(Br,ma)):(Oe=me[0]*Ht+Br,it=me[1]*Zt+ma,pt=me[2]*Ht+Br,Qt=me[3]*Zt+ma,Br=me[4]*Ht+Br,ma=me[5]*Zt+ma,tc(Oe,it,pt,Qt,Br,ma));return Ct&&vo(),zo(ot),this},m.path=function(te){for(var je=0;je<te.length;je++){var Ke=te[je],Je=Ke.c;switch(Ke.op){case"m":$o(Je[0],Je[1]);break;case"l":Wi(Je[0],Je[1]);break;case"c":tc.apply(this,Je);break;case"h":vo()}}return this},m.__private__.rect=m.rect=function(te,je,Ke,Je,ot){if(isNaN(te)||isNaN(je)||isNaN(Ke)||isNaN(Je)||!Ki(ot))throw new Error("Invalid arguments passed to jsPDF.rect");return E===N.COMPAT&&(Je=-Je),ue([j(S(te)),j(H(je)),j(S(Ke)),j(S(Je)),"re"].join(" ")),zo(ot),this},m.__private__.triangle=m.triangle=function(te,je,Ke,Je,ot,Ct,Ht){if(isNaN(te)||isNaN(je)||isNaN(Ke)||isNaN(Je)||isNaN(ot)||isNaN(Ct)||!Ki(Ht))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ke-te,Je-je],[ot-Ke,Ct-Je],[te-ot,je-Ct]],te,je,[1,1],Ht,!0),this},m.__private__.roundedRect=m.roundedRect=function(te,je,Ke,Je,ot,Ct,Ht){if(isNaN(te)||isNaN(je)||isNaN(Ke)||isNaN(Je)||isNaN(ot)||isNaN(Ct)||!Ki(Ht))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Zt=4/3*(Math.SQRT2-1);return ot=Math.min(ot,.5*Ke),Ct=Math.min(Ct,.5*Je),this.lines([[Ke-2*ot,0],[ot*Zt,0,ot,Ct-Ct*Zt,ot,Ct],[0,Je-2*Ct],[0,Ct*Zt,-ot*Zt,Ct,-ot,Ct],[2*ot-Ke,0],[-ot*Zt,0,-ot,-Ct*Zt,-ot,-Ct],[0,2*Ct-Je],[0,-Ct*Zt,ot*Zt,-Ct,ot,-Ct]],te+ot,je,[1,1],Ht,!0),this},m.__private__.ellipse=m.ellipse=function(te,je,Ke,Je,ot){if(isNaN(te)||isNaN(je)||isNaN(Ke)||isNaN(Je)||!Ki(ot))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ct=4/3*(Math.SQRT2-1)*Ke,Ht=4/3*(Math.SQRT2-1)*Je;return $o(te+Ke,je),tc(te+Ke,je-Ht,te+Ct,je-Je,te,je-Je),tc(te-Ct,je-Je,te-Ke,je-Ht,te-Ke,je),tc(te-Ke,je+Ht,te-Ct,je+Je,te,je+Je),tc(te+Ct,je+Je,te+Ke,je+Ht,te+Ke,je),zo(ot),this},m.__private__.circle=m.circle=function(te,je,Ke,Je){if(isNaN(te)||isNaN(je)||isNaN(Ke)||!Ki(Je))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(te,je,Ke,Ke,Je)},m.setFont=function(te,je,Ke){return Ke&&(je=I(je,Ke)),ct=kd(te,je,{disableWarning:!1}),this};var ws=m.__private__.getFont=m.getFont=function(){return qt[kd.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var te,je,Ke={};for(te in gr)if(gr.hasOwnProperty(te))for(je in Ke[te]=[],gr[te])gr[te].hasOwnProperty(je)&&Ke[te].push(je);return Ke},m.addFont=function(te,je,Ke,Je,ot){var Ct=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ct.indexOf(arguments[3])!==-1?ot=arguments[3]:arguments[3]&&Ct.indexOf(arguments[3])==-1&&(Ke=I(Ke,Je)),ot=ot||"Identity-H",Ed.call(this,te,je,Ke,ot)};var Aa,_d=e.lineWidth||.200025,rc=m.__private__.getLineWidth=m.getLineWidth=function(){return _d},Xh=m.__private__.setLineWidth=m.setLineWidth=function(te){return _d=te,ue(j(S(te))+" w"),this};m.__private__.setLineDash=xr.API.setLineDash=xr.API.setLineDashPattern=function(te,je){if(te=te||[],je=je||0,isNaN(je)||!Array.isArray(te))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return te=te.map(function(Ke){return j(S(Ke))}).join(" "),je=j(S(je)),ue("["+te+"] "+je+" d"),this};var wu=m.__private__.getLineHeight=m.getLineHeight=function(){return le*Aa};m.__private__.getLineHeight=m.getLineHeight=function(){return le*Aa};var Nu=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(te){return typeof(te=te||1.15)=="number"&&(Aa=te),this},Il=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Aa};Nu(e.lineHeight);var Xi=m.__private__.getHorizontalCoordinate=function(te){return S(te)},Ns=m.__private__.getVerticalCoordinate=function(te){return E===N.ADVANCED?te:pr[D].mediaBox.topRightY-pr[D].mediaBox.bottomLeftY-S(te)},_A=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(te){return j(Xi(te))},Td=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(te){return j(Ns(te))},Di=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Ne(Di)},m.__private__.setStrokeColor=m.setDrawColor=function(te,je,Ke,Je){return Di=xe({ch1:te,ch2:je,ch3:Ke,ch4:Je,pdfColorType:"draw",precision:2}),ue(Di),this};var Bd=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Ne(Bd)},m.__private__.setFillColor=m.setFillColor=function(te,je,Ke,Je){return Bd=xe({ch1:te,ch2:je,ch3:Ke,ch4:Je,pdfColorType:"fill",precision:2}),ue(Bd),this};var Mc=e.textColor||"0 g",_f=m.__private__.getTextColor=m.getTextColor=function(){return Ne(Mc)};m.__private__.setTextColor=m.setTextColor=function(te,je,Ke,Je){return Mc=xe({ch1:te,ch2:je,ch3:Ke,ch4:Je,pdfColorType:"text",precision:3}),this};var Eu=e.charSpace,Tf=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Eu||0)};m.__private__.setCharSpace=m.setCharSpace=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Eu=te,this};var Yh=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(te){var je=m.CapJoinStyles[te];if(je===void 0)throw new Error("Line cap style of '"+te+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Yh=je,ue(je+" J"),this};var Cu=0;m.__private__.setLineJoin=m.setLineJoin=function(te){var je=m.CapJoinStyles[te];if(je===void 0)throw new Error("Line join style of '"+te+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Cu=je,ue(je+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(te){if(te=te||0,isNaN(te))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ue(j(S(te))+" M"),this},m.GState=US,m.setGState=function(te){(te=typeof te=="string"?Rr[Ha[te]]:Id(null,te)).equals(Rn)||(ue("/"+te.id+" gs"),Rn=te)};var Id=function(te,je){if(!te||!Ha[te]){var Ke=!1;for(var Je in Rr)if(Rr.hasOwnProperty(Je)&&Rr[Je].equals(je)){Ke=!0;break}if(Ke)je=Rr[Je];else{var ot="GS"+(Object.keys(Rr).length+1).toString(10);Rr[ot]=je,je.id=ot}return te&&(Ha[te]=je.id),Jr.publish("addGState",je),je}};m.addGState=function(te,je){return Id(te,je),this},m.saveGraphicsState=function(){return ue("q"),Pr.push({key:ct,size:le,color:Mc}),this},m.restoreGraphicsState=function(){ue("Q");var te=Pr.pop();return ct=te.key,le=te.size,Mc=te.color,Rn=null,this},m.setCurrentTransformationMatrix=function(te){return ue(te.toString()+" cm"),this},m.comment=function(te){return ue("#"+te),this};var ju=function(te,je){var Ke=te||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ke},set:function(Ct){isNaN(Ct)||(Ke=parseFloat(Ct))}});var Je=je||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Je},set:function(Ct){isNaN(Ct)||(Je=parseFloat(Ct))}});var ot="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ot},set:function(Ct){ot=Ct.toString()}}),this},Bf=function(te,je,Ke,Je){ju.call(this,te,je),this.type="rect";var ot=Ke||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ot},set:function(Ht){isNaN(Ht)||(ot=parseFloat(Ht))}});var Ct=Je||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ct},set:function(Ht){isNaN(Ht)||(Ct=parseFloat(Ht))}}),this},ku=function(){this.page=Lr,this.currentPage=D,this.pages=be.slice(0),this.pagesContext=pr.slice(0),this.x=Qe,this.y=wt,this.matrix=ar,this.width=Dd(D),this.height=Yi(D),this.outputDestination=we,this.id="",this.objectNumber=-1};ku.prototype.restore=function(){Lr=this.page,D=this.currentPage,pr=this.pagesContext,be=this.pages,Qe=this.x,wt=this.y,ar=this.matrix,Su(D,this.width),If(D,this.height),we=this.outputDestination};var Od=function(te,je,Ke,Je,ot){Qs.push(new ku),Lr=D=0,be=[],Qe=te,wt=je,ar=ot,Oi([Ke,Je])},TA=function(te){if(Ln[te])Qs.pop().restore();else{var je=new ku,Ke="Xo"+(Object.keys(Za).length+1).toString(10);je.id=Ke,Ln[te]=Ke,Za[Ke]=je,Jr.publish("addFormObject",je),Qs.pop().restore()}};for(var Uc in m.beginFormObject=function(te,je,Ke,Je,ot){return Od(te,je,Ke,Je,ot),this},m.endFormObject=function(te){return TA(te),this},m.doFormObject=function(te,je){var Ke=Za[Ln[te]];return ue("q"),ue(je.toString()+" cm"),ue("/"+Ke.id+" Do"),ue("Q"),this},m.getFormObject=function(te){var je=Za[Ln[te]];return{x:je.x,y:je.y,width:je.width,height:je.height,matrix:je.matrix}},m.save=function(te,je){return te=te||"generated.pdf",(je=je||{}).returnPromise=je.returnPromise||!1,je.returnPromise===!1?(hg(Sf(Fc()),te),typeof hg.unload=="function"&&Ur.setTimeout&&setTimeout(hg.unload,911),this):new Promise(function(Ke,Je){try{var ot=hg(Sf(Fc()),te);typeof hg.unload=="function"&&Ur.setTimeout&&setTimeout(hg.unload,911),Ke(ot)}catch(Ct){Je(Ct.message)}})},xr.API)xr.API.hasOwnProperty(Uc)&&(Uc==="events"&&xr.API.events.length?function(te,je){var Ke,Je,ot;for(ot=je.length-1;ot!==-1;ot--)Ke=je[ot][0],Je=je[ot][1],te.subscribe.apply(te,[Ke].concat(typeof Je=="function"?[Je]:Je))}(Jr,xr.API.events):m[Uc]=xr.API[Uc]);var Dd=m.getPageWidth=function(te){return(pr[te=te||D].mediaBox.topRightX-pr[te].mediaBox.bottomLeftX)/Ze},Su=m.setPageWidth=function(te,je){pr[te].mediaBox.topRightX=je*Ze+pr[te].mediaBox.bottomLeftX},Yi=m.getPageHeight=function(te){return(pr[te=te||D].mediaBox.topRightY-pr[te].mediaBox.bottomLeftY)/Ze},If=m.setPageHeight=function(te,je){pr[te].mediaBox.topRightY=je*Ze+pr[te].mediaBox.bottomLeftY};return m.internal={pdfEscape:ja,getStyle:Qo,getFont:ws,getFontSize:Ae,getCharSpace:Tf,getTextColor:_f,getLineHeight:wu,getLineHeightFactor:Il,getLineWidth:rc,write:ge,getHorizontalCoordinate:Xi,getVerticalCoordinate:Ns,getCoordinateString:_A,getVerticalCoordinateString:Td,collections:{},newObject:Xa,newAdditionalObject:Ve,newObjectDeferred:en,newObjectDeferredBegin:Se,getFilters:Fe,putStream:Ge,events:Jr,scaleFactor:Ze,pageSize:{getWidth:function(){return Dd(D)},setWidth:function(te){Su(D,te)},getHeight:function(){return Yi(D)},setHeight:function(te){If(D,te)}},encryptionOptions:u,encryption:hn,getEncryptor:Rc,output:Pc,getNumberOfPages:Qa,pages:be,out:ue,f2:L,f3:F,getPageInfo:Jl,getPageInfoByObjId:Tr,getCurrentPageInfo:Zl,getPDFVersion:x,Point:ju,Rectangle:Bf,Matrix:tr,hasHotfix:Yl},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Dd(D)},set:function(te){Su(D,te)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Yi(D)},set:function(te){If(D,te)},enumerable:!0,configurable:!0}),Gh.call(m,ve),ct="F1",Cd(n,r),Jr.publish("initialized"),m}Xv.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Xv.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Xv.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Xv.prototype.processOwnerPassword=function(e,t){return pP(mP(t).substr(0,5),e)},Xv.prototype.encryptor=function(e,t){var r=mP(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return pP(r,a)}},US.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||wn(e)!==wn(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&a--;return a===0},xr.API={events:[]},xr.version="2.5.2";var Ts=xr.API,tU=1,Lx=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Nv=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Xr=function(e){return e.toFixed(2)},hm=function(e){return e.toFixed(5)};Ts.__acroform__={};var Oc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},SX=function(e){return e*tU},lh=function(e){var t=new Que,r=mr.internal.getHeight(e)||0,a=mr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Xr(a)),Number(Xr(r))],t},qet=Ts.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Ket=Ts.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},Wet=Ts.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},ri=Ts.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Wet(e,t-1)},ai=Ts.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return qet(e,t-1)},ni=Ts.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Ket(e,t-1)},Xet=Ts.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,n=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(n)||0,c.lowerLeft_Y=a(i+l)||0,c.upperRight_X=r(n+o)||0,c.upperRight_Y=a(i)||0,[Number(Xr(c.lowerLeft_X)),Number(Xr(c.lowerLeft_Y)),Number(Xr(c.upperRight_X)),Number(Xr(c.upperRight_Y))]},Yet=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,a=gP(e,r),n=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+n+" "+Xr(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=lh(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},gP=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},n=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");n=e.multiline?n.map(function(F){return F.split(`
`)}):n.map(function(F){return[F]});var i=r,o=mr.internal.getHeight(e)||0;o=o<0?-o:o;var l=mr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(F,S,M){if(F+1<n.length){var H=S+" "+n[F+1][0];return _j(H,e,M).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,u,f=_j("3",e,i).height,A=e.multiline?o-i:(o-f)/2,m=A+=2,g=0,x=0,v=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+_j(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var y="",N=0,E=0;E<n.length;E++)if(n.hasOwnProperty(E)){var B=!1;if(n[E].length!==1&&v!==n[E].length-1){if((f+2)*(N+2)+2>o)continue e;y+=n[E][v],B=!0,x=E,E--}else{y=(y+=n[E][v]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var _=parseInt(E),I=c(_,y,i),j=E>=n.length-1;if(I&&!j){y+=" ",v=0;continue}if(I||j){if(j)x=_;else if(e.multiline&&(f+2)*(N+2)+2>o)continue e}else{if(!e.multiline||(f+2)*(N+2)+2>o)continue e;x=_}}for(var k="",T=g;T<=x;T++){var L=n[T];if(e.multiline){if(T===x){k+=L[v]+" ",v=(v+1)%L.length;continue}if(T===g){k+=L[L.length-1]+" ";continue}}k+=L[0]+" "}switch(k=k.substr(k.length-1)==" "?k.substr(0,k.length-1):k,u=_j(k,e,i).width,e.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;case"left":default:d=2}t+=Xr(d)+" "+Xr(m)+` Td
`,t+="("+Lx(k)+`) Tj
`,t+=-Xr(d)+` 0 Td
`,m=-(i+2),u=0,g=B?x:x+1,N++,y=""}break}return a.text=t,a.fontSize=i,a},_j=function(e,t,r){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),n=t.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:n}},Jet={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Zet=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(a){return a.type===r.type&&a.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},ett=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var a=r,n=e[r];t.internal.newObjectDeferredBegin(n.objId,!0),wn(n)==="object"&&typeof n.putStream=="function"&&n.putStream(),delete e[a]}},ttt=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(wf.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Jet)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");tU=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new zue,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in a)if(a.hasOwnProperty(n)){var i=a[n];i.objId=void 0,i.hasAnnotation&&Zet(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(a,n){var i=!a;for(var o in a||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(o)){var l=a[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=Xet(l.Rect,n)),n.internal.newObjectDeferredBegin(l.objId,!0),l.DA=mr.createDefaultAppearanceStream(l),wn(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=Yet(l);c.push({key:"AP",value:"<</N "+u+">>"}),n.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var f="";for(var A in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(A)){var m=l.appearanceStreamContent[A];if(f+="/"+A+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var g=m[o];typeof g=="function"&&(g=g.call(n,l)),f+="/"+o+" "+g+" ",n.internal.acroformPlugin.xForms.indexOf(g)>=0||n.internal.acroformPlugin.xForms.push(g)}}else typeof(g=m)=="function"&&(g=g.call(n,l)),f+="/"+o+" "+g,n.internal.acroformPlugin.xForms.indexOf(g)>=0||n.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}n.internal.putStream({additionalKeyValues:c,objectId:l.objId}),n.internal.out("endobj")}i&&ett(n.internal.acroformPlugin.xForms,n)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},Hue=Ts.__acroform__.arrayToPdfArray=function(e,t,r){var a=function(o){return o};if(Array.isArray(e)){for(var n="[",i=0;i<e.length;i++)switch(i!==0&&(n+=" "),wn(e[i])){case"boolean":case"number":case"object":n+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(a=r.internal.getEncryptor(t)),n+="("+Lx(a(e[i].toString()))+")"):n+=e[i].toString()}return n+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},rO=function(e,t,r){var a=function(n){return n};return t!==void 0&&r&&(a=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Lx(a(e))+")"},wh=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};wh.prototype.toString=function(){return this.objId+" 0 R"},wh.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},wh.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var a=t[r],n=this[a];n&&(Array.isArray(n)?e.push({key:a,value:Hue(n,this.objId,this.scope)}):n instanceof wh?(n.scope=this.scope,e.push({key:a,value:n.objId+" 0 R"})):typeof n!="function"&&e.push({key:a,value:n}))}return e};var Que=function(){wh.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Oc(Que,wh);var zue=function(){wh.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Lx(r(e))+")"}},set:function(r){e=r}})};Oc(zue,wh);var wf=function e(){wh.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ri(t,3)},set:function(y){y?this.F=ai(t,3):this.F=ni(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(y){a=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(y){a[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(y){a[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(y){a[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(y){a[3]=y}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof HS)return;i="FieldObject"+e.FieldNum++}var y=function(N){return N};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Lx(y(i))+")"},set:function(y){i=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(y){i=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/tU:d},set:function(y){d=y}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof HS||this instanceof qg))return rO(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var A=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof oo?A:rO(A,this.objId,this.scope)},set:function(y){y=y.toString(),A=this instanceof oo?y:y.substr(0,1)==="("?Nv(y.substr(1,y.length-2)):Nv(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof oo?Nv(A.substr(1,A.length-1)):A},set:function(y){y=y.toString(),A=this instanceof oo?"/"+y:y}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof oo?m:rO(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=this instanceof oo?y:y.substr(0,1)==="("?Nv(y.substr(1,y.length-2)):Nv(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof oo?Nv(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof oo?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(y){y=!!y,x=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,1)},set:function(y){y?this.Ff=ai(this.Ff,1):this.Ff=ni(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,2)},set:function(y){y?this.Ff=ai(this.Ff,2):this.Ff=ni(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,3)},set:function(y){y?this.Ff=ai(this.Ff,3):this.Ff=ni(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');v=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(v){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};Oc(wf,wh);var Bb=function(){wf.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Hue(t,this.objId,this.scope)},set:function(r){var a,n;n=[],typeof(a=r)=="string"&&(n=function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d}(a,/\((.*?)\)/g)),t=n}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,18)},set:function(r){r?this.Ff=ai(this.Ff,18):this.Ff=ni(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ai(this.Ff,19):this.Ff=ni(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,20)},set:function(r){r?(this.Ff=ai(this.Ff,20),t.sort()):this.Ff=ni(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,22)},set:function(r){r?this.Ff=ai(this.Ff,22):this.Ff=ni(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,23)},set:function(r){r?this.Ff=ai(this.Ff,23):this.Ff=ni(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,27)},set:function(r){r?this.Ff=ai(this.Ff,27):this.Ff=ni(this.Ff,27)}}),this.hasAppearanceStream=!1};Oc(Bb,wf);var Ib=function(){Bb.call(this),this.fontName="helvetica",this.combo=!1};Oc(Ib,Bb);var Ob=function(){Ib.call(this),this.combo=!0};Oc(Ob,Ib);var Dk=function(){Ob.call(this),this.edit=!0};Oc(Dk,Ob);var oo=function(){wf.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,15)},set:function(r){r?this.Ff=ai(this.Ff,15):this.Ff=ni(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,16)},set:function(r){r?this.Ff=ai(this.Ff,16):this.Ff=ni(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,17)},set:function(r){r?this.Ff=ai(this.Ff,17):this.Ff=ni(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,26)},set:function(r){r?this.Ff=ai(this.Ff,26):this.Ff=ni(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,n=[];for(a in n.push("<<"),t)n.push("/"+a+" ("+Lx(r(t[a]))+")");return n.push(">>"),n.join(`
`)}},set:function(r){wn(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Oc(oo,wf);var Fk=function(){oo.call(this),this.pushButton=!0};Oc(Fk,oo);var Db=function(){oo.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Oc(Db,oo);var HS=function(){var e,t;wf.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(n){t=n}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(l){return l};this.scope&&(n=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),a)o.push("/"+i+" ("+Lx(n(a[i]))+")");return o.push(">>"),o.join(`
`)},set:function(n){wn(n)==="object"&&(a=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(n){typeof n=="string"&&(a.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(n){r=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(n){r="/"+n}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=mr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Oc(HS,wf),Db.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Db.prototype.createOption=function(e){var t=new HS;return t.Parent=this,t.optionName=e,this.Kids.push(t),rtt.call(this.scope,t),t};var Pk=function(){oo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=mr.CheckBox.createAppearanceStream()};Oc(Pk,oo);var qg=function(){wf.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,13)},set:function(t){t?this.Ff=ai(this.Ff,13):this.Ff=ni(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,21)},set:function(t){t?this.Ff=ai(this.Ff,21):this.Ff=ni(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,23)},set:function(t){t?this.Ff=ai(this.Ff,23):this.Ff=ni(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,24)},set:function(t){t?this.Ff=ai(this.Ff,24):this.Ff=ni(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,25)},set:function(t){t?this.Ff=ai(this.Ff,25):this.Ff=ni(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,26)},set:function(t){t?this.Ff=ai(this.Ff,26):this.Ff=ni(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Oc(qg,wf);var Rk=function(){qg.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ri(this.Ff,14)},set:function(e){e?this.Ff=ai(this.Ff,14):this.Ff=ni(this.Ff,14)}}),this.password=!0};Oc(Rk,qg);var mr={CheckBox:{createAppearanceStream:function(){return{N:{On:mr.CheckBox.YesNormal},D:{On:mr.CheckBox.YesPushDown,Off:mr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=lh(e);t.scope=e.scope;var r=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),i=gP(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Xr(mr.internal.getWidth(e))+" "+Xr(mr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+Xr(i.fontSize)+" Tf "+n),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=lh(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),n=[],i=mr.internal.getHeight(e),o=mr.internal.getWidth(e),l=gP(e,e.caption);return n.push("1 g"),n.push("0 0 "+Xr(o)+" "+Xr(i)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+Xr(o-1)+" "+Xr(i-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+r+" "+Xr(l.fontSize)+" Tf "+a),n.push(l.text),n.push("ET"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=lh(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Xr(mr.internal.getWidth(e))+" "+Xr(mr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:mr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=mr.RadioButton.Circle.YesNormal,t.D[e]=mr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=lh(e);t.scope=e.scope;var r=[],a=mr.internal.getWidth(e)<=mr.internal.getHeight(e)?mr.internal.getWidth(e)/4:mr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var n=mr.internal.Bezier_C,i=Number((a*n).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+hm(mr.internal.getWidth(e)/2)+" "+hm(mr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=lh(e);t.scope=e.scope;var r=[],a=mr.internal.getWidth(e)<=mr.internal.getHeight(e)?mr.internal.getWidth(e)/4:mr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var n=Number((2*a).toFixed(5)),i=Number((n*mr.internal.Bezier_C).toFixed(5)),o=Number((a*mr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+hm(mr.internal.getWidth(e)/2)+" "+hm(mr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+hm(mr.internal.getWidth(e)/2)+" "+hm(mr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=lh(e);t.scope=e.scope;var r=[],a=mr.internal.getWidth(e)<=mr.internal.getHeight(e)?mr.internal.getWidth(e)/4:mr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var n=Number((2*a).toFixed(5)),i=Number((n*mr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+hm(mr.internal.getWidth(e)/2)+" "+hm(mr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:mr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=mr.RadioButton.Cross.YesNormal,t.D[e]=mr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=lh(e);t.scope=e.scope;var r=[],a=mr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Xr(mr.internal.getWidth(e)-2)+" "+Xr(mr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Xr(a.x1.x)+" "+Xr(a.x1.y)+" m"),r.push(Xr(a.x2.x)+" "+Xr(a.x2.y)+" l"),r.push(Xr(a.x4.x)+" "+Xr(a.x4.y)+" m"),r.push(Xr(a.x3.x)+" "+Xr(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=lh(e);t.scope=e.scope;var r=mr.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+Xr(mr.internal.getWidth(e))+" "+Xr(mr.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Xr(mr.internal.getWidth(e)-2)+" "+Xr(mr.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(Xr(r.x1.x)+" "+Xr(r.x1.y)+" m"),a.push(Xr(r.x2.x)+" "+Xr(r.x2.y)+" l"),a.push(Xr(r.x4.x)+" "+Xr(r.x4.y)+" m"),a.push(Xr(r.x3.x)+" "+Xr(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=lh(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Xr(mr.internal.getWidth(e))+" "+Xr(mr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};mr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=mr.internal.getWidth(e),r=mr.internal.getHeight(e),a=Math.min(t,r);return{x1:{x:(t-a)/2,y:(r-a)/2+a},x2:{x:(t-a)/2+a,y:(r-a)/2},x3:{x:(t-a)/2,y:(r-a)/2},x4:{x:(t-a)/2+a,y:(r-a)/2+a}}}},mr.internal.getWidth=function(e){var t=0;return wn(e)==="object"&&(t=SX(e.Rect[2])),t},mr.internal.getHeight=function(e){var t=0;return wn(e)==="object"&&(t=SX(e.Rect[3])),t};var rtt=Ts.addField=function(e){if(ttt(this,e),!(e instanceof wf))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ts.AcroFormChoiceField=Bb,Ts.AcroFormListBox=Ib,Ts.AcroFormComboBox=Ob,Ts.AcroFormEditBox=Dk,Ts.AcroFormButton=oo,Ts.AcroFormPushButton=Fk,Ts.AcroFormRadioButton=Db,Ts.AcroFormCheckBox=Pk,Ts.AcroFormTextField=qg,Ts.AcroFormPasswordField=Rk,Ts.AcroFormAppearance=mr,Ts.AcroForm={ChoiceField:Bb,ListBox:Ib,ComboBox:Ob,EditBox:Dk,Button:oo,PushButton:Fk,RadioButton:Db,CheckBox:Pk,TextField:qg,PasswordField:Rk,Appearance:mr},xr.AcroForm={ChoiceField:Bb,ListBox:Ib,ComboBox:Ob,EditBox:Dk,Button:oo,PushButton:Fk,RadioButton:Db,CheckBox:Pk,TextField:qg,PasswordField:Rk,Appearance:mr};xr.AcroForm;function $ue(e){return e.reduce(function(t,r,a){return t[r]=a,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(F,S){var M,H,K,Q,G,X=t;if((S=S||t)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(I(F))for(G in r)for(K=r[G],M=0;M<K.length;M+=1){for(Q=!0,H=0;H<K[M].length;H+=1)if(K[M][H]!==void 0&&K[M][H]!==F[H]){Q=!1;break}if(Q===!0){X=G;break}}else for(G in r)for(K=r[G],M=0;M<K.length;M+=1){for(Q=!0,H=0;H<K[M].length;H+=1)if(K[M][H]!==void 0&&K[M][H]!==F.charCodeAt(H)){Q=!1;break}if(Q===!0){X=G;break}}return X===t&&S!==t&&(X=S),X},n=function F(S){for(var M=this.internal.write,H=this.internal.putStream,K=(0,this.internal.getFilters)();K.indexOf("FlateEncode")!==-1;)K.splice(K.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var Q=[];if(Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Image"}),Q.push({key:"Width",value:S.width}),Q.push({key:"Height",value:S.height}),S.colorSpace===v.INDEXED?Q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(Q.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===v.DEVICE_CMYK&&Q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Q.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&Q.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)){for(var G="",X=0,Z=S.transparency.length;X<Z;X++)G+=S.transparency[X]+" "+S.transparency[X]+" ";Q.push({key:"Mask",value:"["+G+"]"})}S.sMask!==void 0&&Q.push({key:"SMask",value:S.objectId+1+" 0 R"});var U=S.filter!==void 0?["/"+S.filter]:void 0;if(H({data:S.data,additionalKeyValues:Q,alreadyAppliedFilters:U,objectId:S.objectId}),M("endobj"),"sMask"in S&&S.sMask!==void 0){var Y="/Predictor "+S.predictor+" /Colors 1 /BitsPerComponent "+S.bitsPerComponent+" /Columns "+S.width,P={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:S.bitsPerComponent,decodeParameters:Y,data:S.sMask};"filter"in S&&(P.filter=S.filter),F.call(this,P)}if(S.colorSpace===v.INDEXED){var D=this.internal.newObject();H({data:k(new Uint8Array(S.palette)),objectId:D}),M("endobj")}},i=function(){var F=this.internal.collections.addImage_images;for(var S in F)n.call(this,F[S])},o=function(){var F,S=this.internal.collections.addImage_images,M=this.internal.write;for(var H in S)M("/I"+(F=S[H]).index,F.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var F=this.internal.collections.addImage_images;return l.call(this),F},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(F){return typeof e["process"+F.toUpperCase()]=="function"},f=function(F){return wn(F)==="object"&&F.nodeType===1},A=function(F,S){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var M=""+F.getAttribute("src");if(M.indexOf("data:image/")===0)return k2(unescape(M).split("base64,").pop());var H=e.loadFile(M,!0);if(H!==void 0)return H}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var K;switch(S){case"PNG":K="image/png";break;case"WEBP":K="image/webp";break;case"JPEG":case"JPG":default:K="image/jpeg"}return k2(F.toDataURL(K,1).split("base64,").pop())}},m=function(F){var S=this.internal.collections.addImage_images;if(S){for(var M in S)if(F===S[M].alias)return S[M]}},g=function(F,S,M){return F||S||(F=-96,S=-96),F<0&&(F=-1*M.width*72/F/this.internal.scaleFactor),S<0&&(S=-1*M.height*72/S/this.internal.scaleFactor),F===0&&(F=S*M.width/M.height),S===0&&(S=F*M.height/M.width),[F,S]},x=function(F,S,M,H,K,Q){var G=g.call(this,M,H,K),X=this.internal.getCoordinateString,Z=this.internal.getVerticalCoordinateString,U=c.call(this);if(M=G[0],H=G[1],U[K.index]=K,Q){Q*=Math.PI/180;var Y=Math.cos(Q),P=Math.sin(Q),D=function(J){return J.toFixed(4)},W=[D(Y),D(P),D(-1*P),D(Y),0,0,"cm"]}this.internal.write("q"),Q?(this.internal.write([1,"0","0",1,X(F),Z(S+H),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([X(M),"0","0",X(H),"0","0","cm"].join(" "))):this.internal.write([X(M),"0","0",X(H),X(F),Z(S+H),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+K.index+" Do"),this.internal.write("Q")},v=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=e.__addimage__.sHashCode=function(F){var S,M,H=0;if(typeof F=="string")for(M=F.length,S=0;S<M;S++)H=(H<<5)-H+F.charCodeAt(S),H|=0;else if(I(F))for(M=F.byteLength/2,S=0;S<M;S++)H=(H<<5)-H+F[S],H|=0;return H},E=e.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var S=!0;return F.length===0&&(S=!1),F.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(S=!1),S},B=e.__addimage__.extractImageFromDataUrl=function(F){var S=(F=F||"").split("base64,"),M=null;if(S.length===2){var H=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(S[0]);Array.isArray(H)&&(M={mimeType:H[1],charset:H[2],data:S[1]})}return M},_=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(F){return _()&&F instanceof ArrayBuffer};var I=e.__addimage__.isArrayBufferView=function(F){return _()&&typeof Uint32Array<"u"&&(F instanceof Int8Array||F instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array)},j=e.__addimage__.binaryStringToUint8Array=function(F){for(var S=F.length,M=new Uint8Array(S),H=0;H<S;H++)M[H]=F.charCodeAt(H);return M},k=e.__addimage__.arrayBufferToBinaryString=function(F){for(var S="",M=I(F)?F:new Uint8Array(F),H=0;H<M.length;H+=8192)S+=String.fromCharCode.apply(null,M.subarray(H,H+8192));return S};e.addImage=function(){var F,S,M,H,K,Q,G,X,Z;if(typeof arguments[1]=="number"?(S=t,M=arguments[1],H=arguments[2],K=arguments[3],Q=arguments[4],G=arguments[5],X=arguments[6],Z=arguments[7]):(S=arguments[1],M=arguments[2],H=arguments[3],K=arguments[4],Q=arguments[5],G=arguments[6],X=arguments[7],Z=arguments[8]),wn(F=arguments[0])==="object"&&!f(F)&&"imageData"in F){var U=F;F=U.imageData,S=U.format||S||t,M=U.x||M||0,H=U.y||H||0,K=U.w||U.width||K,Q=U.h||U.height||Q,G=U.alias||G,X=U.compression||X,Z=U.rotation||U.angle||Z}var Y=this.internal.getFilters();if(X===void 0&&Y.indexOf("FlateEncode")!==-1&&(X="SLOW"),isNaN(M)||isNaN(H))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var P=T.call(this,F,S,G,X);return x.call(this,M,H,K,Q,P,Z),this};var T=function(F,S,M,H){var K,Q,G;if(typeof F=="string"&&a(F)===t){F=unescape(F);var X=L(F,!1);(X!==""||(X=e.loadFile(F,!0))!==void 0)&&(F=X)}if(f(F)&&(F=A(F,S)),S=a(F,S),!u(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((G=M)==null||G.length===0)&&(M=function(Z){return typeof Z=="string"||I(Z)?N(Z):I(Z.data)?N(Z.data):null}(F)),(K=m.call(this,M))||(_()&&(F instanceof Uint8Array||S==="RGBA"||(Q=F,F=j(F))),K=this["process"+S.toUpperCase()](F,d.call(this),M,function(Z){return Z&&typeof Z=="string"&&(Z=Z.toUpperCase()),Z in e.image_compression?Z:y.NONE}(H),Q)),!K)throw new Error("An unknown error occurred whilst processing the image.");return K},L=e.__addimage__.convertBase64ToBinaryString=function(F,S){var M;S=typeof S!="boolean"||S;var H,K="";if(typeof F=="string"){H=(M=B(F))!==null?M.data:F;try{K=k2(H)}catch(Q){if(S)throw E(H)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return K};e.getImageProperties=function(F){var S,M,H="";if(f(F)&&(F=A(F)),typeof F=="string"&&a(F)===t&&((H=L(F,!1))===""&&(H=e.loadFile(F)||""),F=H),M=a(F),!u(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(!_()||F instanceof Uint8Array||(F=j(F)),!(S=this["process"+M.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=M,S}})(xr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};xr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var a,n,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,f=0;f<d.length&&!u;f++)switch((a=d[f]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var A=0;A<d.length;A++){a=d[A];var m=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(x.objId),N=a.title||"Note";i="<</Type /Annot /Subtype /Text "+(n="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y)+"] ")+"/Contents ("+m(y(a.contents))+")",i+=" /Popup "+v.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+m(y(N))+") >>",x.content=i;var E=x.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+o(a.bounds.x+30)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w+30)+" "+l(a.bounds.y)+"] ")+" /Parent "+E,a.open&&(i+=" /Open true"),i+=" >>",v.content=i,this.internal.write(x.objId,"0 R",v.objId,"0 R");break;case"freetext":n="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y+a.bounds.h)+"] ";var B=a.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+m(g(a.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+B+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(a.options.name){var _=this.annotations._nameMap[a.options.name];a.options.pageNumber=_.page,a.options.top=_.y}else a.options.top||(a.options.top=0);if(n="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",i="",a.options.url)i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+m(g(a.options.url))+") >>";else if(a.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,i+=" /FitV "+a.options.left+"]";break;case"XYZ":default:var I=l(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),i+=" /XYZ "+a.options.left+" "+I+" "+a.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},e.link=function(r,a,n,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(a),w:c(r+n),h:d(a+i)},options:o,type:"link"})},e.textWithLink=function(r,a,n,i){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var u=this.splitTextToSize(r,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(r,a,n,i),n+=.2*d,i.align==="center"&&(a-=c/2),i.align==="right"&&(a-=c),this.link(a,n-d,l,o,i),c},e.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}}(xr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},l=e.__arabicParser__.isArabicEndLetter=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(x){return o(x)&&n.indexOf(x.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(x){var v=0,y=r,N="",E=0;for(v=0;v<x.length;v+=1)y[x.charCodeAt(v)]!==void 0?(E++,typeof(y=y[x.charCodeAt(v)])=="number"&&(N+=String.fromCharCode(y),y=r,E=0),v===x.length-1&&(y=r,N+=x.charAt(v-(E-1)),v-=E-1,E=0)):(y=r,N+=x.charAt(v-E),v-=E,E=0);return N};e.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&a[x.charCodeAt(0)]!==void 0};var A=e.__arabicParser__.getCorrectForm=function(x,v,y){return o(x)?i(x)===!1?-1:!d(x)||!o(v)&&!o(y)||!o(y)&&l(v)||l(x)&&!o(v)||l(x)&&c(v)||l(x)&&l(v)?0:u(x)&&o(v)&&!l(v)&&o(y)&&d(y)?3:l(x)||!o(y)?1:2:-1},m=function(x){var v=0,y=0,N=0,E="",B="",_="",I=(x=x||"").split("\\s+"),j=[];for(v=0;v<I.length;v+=1){for(j.push(""),y=0;y<I[v].length;y+=1)E=I[v][y],B=I[v][y-1],_=I[v][y+1],o(E)?(N=A(E,B,_),j[v]+=N!==-1?String.fromCharCode(t[E.charCodeAt(0)][N]):E):j[v]+=E;j[v]=f(j[v])}return j.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var x,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(v)){var N=0;for(y=[],N=0;N<v.length;N+=1)Array.isArray(v[N])?y.push([m(v[N][0]),v[N][1],v[N][2]]):y.push([m(v[N])]);x=y}else x=m(v);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};e.events.push(["preProcessText",g])}(xr.API),xr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,a){var n;if((r=r||"2d")!=="2d")return null;for(n in a)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=a[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(xr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var A=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return A},set:function(x){A=x}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(x){g=x}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return a.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){a.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),f=d.font||this.getFont(),A=d.scaleFactor||this.internal.scaleFactor,m=0,g=0,x=0,v=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=d.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(E,B){return E.concat(v.splitTextToSize(B,y))},[])):c=Array.isArray(c)?c:[c];for(var N=0;N<c.length;N++)m<(x=this.getStringUnitWidth(c[N],{font:f})*u)&&(m=x);return m!==0&&(g=c.length),{w:m/=A,h:Math.max((g*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/A,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,A=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,m&&A&&(this.printHeaderRow(c.lineNumber,!0),c.y+=A[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,f,A){if(a.call(this),!u)throw new Error("No data for PDF table.");var m,g,x,v,y=[],N=[],E=[],B={},_={},I=[],j=[],k=(A=A||{}).autoSize||!1,T=A.printHeaders!==!1,L=A.css&&A.css["font-size"]!==void 0?16*A.css["font-size"]:A.fontSize||12,F=A.margins||Object.assign({width:this.getPageWidth()},t),S=typeof A.padding=="number"?A.padding:3,M=A.headerBackgroundColor||"#c8c8c8",H=A.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=M,this.internal.__cell__.headerTextColor=H,this.setFontSize(L),f==null)N=y=Object.keys(u[0]),E=y.map(function(){return"left"});else if(Array.isArray(f)&&wn(f[0])==="object")for(y=f.map(function(U){return U.name}),N=f.map(function(U){return U.prompt||U.name||""}),E=f.map(function(U){return U.align||"left"}),m=0;m<f.length;m+=1)_[f[m].name]=f[m].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(N=y=f,E=y.map(function(){return"left"}));if(k||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<y.length;m+=1){for(B[v=y[m]]=u.map(function(U){return U[v]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(N[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=B[v],this.setFont(void 0,"normal"),x=0;x<g.length;x+=1)I.push(this.getTextDimensions(g[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);_[v]=Math.max.apply(null,I)+S+S,I=[]}if(T){var K={};for(m=0;m<y.length;m+=1)K[y[m]]={},K[y[m]].text=N[m],K[y[m]].align=E[m];var Q=l.call(this,K,_);j=y.map(function(U){return new i(c,d,_[U],Q,K[U].text,void 0,K[U].align)}),this.setTableHeaderRow(j),this.printHeaderRow(1,!1)}var G=f.reduce(function(U,Y){return U[Y.name]=Y.align,U},{});for(m=0;m<u.length;m+=1){"rowStart"in A&&A.rowStart instanceof Function&&A.rowStart({row:m,data:u[m]},this);var X=l.call(this,u[m],_);for(x=0;x<y.length;x+=1){var Z=u[m][y[x]];"cellStart"in A&&A.cellStart instanceof Function&&A.cellStart({row:m,col:x,data:Z},this),o.call(this,new i(c,d,_[y[x]],X,Z,m+2,G[y[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,A=this.internal.scaleFactor;return Object.keys(c).map(function(m){var g=c[m];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,d[m]-u-u)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/A+u+u},this).reduce(function(m,g){return Math.max(m,g)},0)};e.setTableHeaderRow=function(c){a.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var A=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){u=this.internal.__cell__.tableHeaderRow[m].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,A.push(u)),u.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(g)}A.length>0&&this.setTableHeaderRow(A),this.setFont(void 0,"normal"),r=!1}}(xr.API);var Vue={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Gue=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],xP=$ue(Gue),que=[100,200,300,400,500,600,700,800,900],att=$ue(que);function vP(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return Vue[i=i||"normal"]?i:"normal"}(e.style),a=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),n=function(i){return typeof xP[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:a,stretch:n,src:e.src||[],ref:e.ref||{name:t,style:[n,r,a].join(" ")}}}function _X(e,t,r,a){var n;for(n=r;n>=0&&n<t.length;n+=a)if(e[t[n]])return e[t[n]];for(n=r;n>=0&&n<t.length;n-=a)if(e[t[n]])return e[t[n]]}var ntt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},TX={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function BX(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function stt(e,t,r){for(var a=(r=r||{}).defaultFontFamily||"times",n=Object.assign({},ntt,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(n[(i=vP(t[l])).family]&&(i.family=n[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[a]))throw new Error("Could not find a font-family for the rule '"+BX(i)+"' and default family '"+a+"'.");if(o=function(c,d){if(d[c])return d[c];var u=xP[c],f=u<=xP.normal?-1:1,A=_X(d,Gue,u,f);if(!A)throw new Error("Could not find a matching font-stretch value for "+c);return A}(i.stretch,o),o=function(c,d){if(d[c])return d[c];for(var u=Vue[c],f=0;f<u.length;++f)if(d[u[f]])return d[u[f]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var u=att[c],f=_X(d,que,u,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+BX(i)+"'.");return o}function IX(e){return e.trimLeft()}function itt(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function ott(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Tj,OX,DX,aO=["times"];(function(e){var t,r,a,n,i,o,l,c,d,u=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new c,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new o,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new o,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var f=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var D=P;Object.defineProperty(this,"pdf",{get:function(){return D}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(Ee){W=!!Ee}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(Ee){J=!!Ee}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(Ee){isNaN(Ee)||(ce=Ee)}});var ie=0;Object.defineProperty(this,"posY",{get:function(){return ie},set:function(Ee){isNaN(Ee)||(ie=Ee)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Ee){var ue;typeof Ee=="number"?ue=[Ee,Ee,Ee,Ee]:((ue=new Array(4))[0]=Ee[0],ue[1]=Ee.length>=2?Ee[1]:ue[0],ue[2]=Ee.length>=3?Ee[2]:ue[0],ue[3]=Ee.length>=4?Ee[3]:ue[1]),d.margin=ue}});var re=!1;Object.defineProperty(this,"autoPaging",{get:function(){return re},set:function(Ee){re=Ee}});var de=0;Object.defineProperty(this,"lastBreak",{get:function(){return de},set:function(Ee){de=Ee}});var oe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return oe},set:function(Ee){oe=Ee}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Ee){Ee instanceof u&&(d=Ee)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Ee){d.path=Ee}});var be=[];Object.defineProperty(this,"ctxStack",{get:function(){return be},set:function(Ee){be=Ee}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ee){var ue;ue=A(Ee),this.ctx.fillStyle=ue.style,this.ctx.isFillTransparent=ue.a===0,this.ctx.fillOpacity=ue.a,this.pdf.setFillColor(ue.r,ue.g,ue.b,{a:ue.a}),this.pdf.setTextColor(ue.r,ue.g,ue.b,{a:ue.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ee){var ue=A(Ee);this.ctx.strokeStyle=ue.style,this.ctx.isStrokeTransparent=ue.a===0,this.ctx.strokeOpacity=ue.a,ue.a===0?this.pdf.setDrawColor(255,255,255):(ue.a,this.pdf.setDrawColor(ue.r,ue.g,ue.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ee){["butt","round","square"].indexOf(Ee)!==-1&&(this.ctx.lineCap=Ee,this.pdf.setLineCap(Ee))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ee){isNaN(Ee)||(this.ctx.lineWidth=Ee,this.pdf.setLineWidth(Ee))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ee){["bevel","round","miter"].indexOf(Ee)!==-1&&(this.ctx.lineJoin=Ee,this.pdf.setLineJoin(Ee))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ee){isNaN(Ee)||(this.ctx.miterLimit=Ee,this.pdf.setMiterLimit(Ee))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ee){this.ctx.textBaseline=Ee}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ee){["right","end","center","left","start"].indexOf(Ee)!==-1&&(this.ctx.textAlign=Ee)}});var q=null;function we(Ee,ue){if(q===null){var ge=function(he){var ve=[];return Object.keys(he).forEach(function(le){he[le].forEach(function(ne){var Ae=null;switch(ne){case"bold":Ae={family:le,weight:"bold"};break;case"italic":Ae={family:le,style:"italic"};break;case"bolditalic":Ae={family:le,weight:"bold",style:"italic"};break;case"":case"normal":Ae={family:le}}Ae!==null&&(Ae.ref={name:le,style:ne},ve.push(Ae))})}),ve}(Ee.getFontList());q=function(he){for(var ve={},le=0;le<he.length;++le){var ne=vP(he[le]),Ae=ne.family,pe=ne.stretch,ke=ne.style,Le=ne.weight;ve[Ae]=ve[Ae]||{},ve[Ae][pe]=ve[Ae][pe]||{},ve[Ae][pe][ke]=ve[Ae][pe][ke]||{},ve[Ae][pe][ke][Le]=ne}return ve}(ge.concat(ue))}return q}var Te=null;Object.defineProperty(this,"fontFaces",{get:function(){return Te},set:function(Ee){q=null,Te=Ee}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ee){var ue;if(this.ctx.font=Ee,(ue=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ee))!==null){var ge=ue[1],he=(ue[2],ue[3]),ve=ue[4],le=(ue[5],ue[6]),ne=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ve)[2];ve=Math.floor(ne==="px"?parseFloat(ve)*this.pdf.internal.scaleFactor:ne==="em"?parseFloat(ve)*this.pdf.getFontSize():parseFloat(ve)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ve);var Ae=function(We){var ct,Ze,Qe=[],wt=We.trim();if(wt==="")return aO;if(wt in TX)return[TX[wt]];for(;wt!=="";){switch(Ze=null,ct=(wt=IX(wt)).charAt(0)){case'"':case"'":Ze=itt(wt.substring(1),ct);break;default:Ze=ott(wt)}if(Ze===null||(Qe.push(Ze[0]),(wt=IX(Ze[1]))!==""&&wt.charAt(0)!==","))return aO;wt=wt.replace(/^,/,"")}return Qe}(le);if(this.fontFaces){var pe=stt(we(this.pdf,this.fontFaces),Ae.map(function(We){return{family:We,stretch:"normal",weight:he,style:ge}}));this.pdf.setFont(pe.ref.name,pe.ref.style)}else{var ke="";(he==="bold"||parseInt(he,10)>=700||ge==="bold")&&(ke="bold"),ge==="italic"&&(ke+="italic"),ke.length===0&&(ke="normal");for(var Le="",qe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ze=0;ze<Ae.length;ze++){if(this.pdf.internal.getFont(Ae[ze],ke,{noFallback:!0,disableWarning:!0})!==void 0){Le=Ae[ze];break}if(ke==="bolditalic"&&this.pdf.internal.getFont(Ae[ze],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Le=Ae[ze],ke="bold";else if(this.pdf.internal.getFont(Ae[ze],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Le=Ae[ze],ke="normal";break}}if(Le===""){for(var Re=0;Re<Ae.length;Re++)if(qe[Ae[Re]]){Le=qe[Ae[Re]];break}}Le=Le===""?"Times":Le,this.pdf.setFont(Le,ke)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ee){this.ctx.globalCompositeOperation=Ee}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ee){this.ctx.globalAlpha=Ee}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ee){this.ctx.lineDashOffset=Ee,Y.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ee){this.ctx.lineDash=Ee,Y.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ee){this.ctx.ignoreClearRect=!!Ee}})};f.prototype.setLineDash=function(P){this.lineDash=P},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){B.call(this,"fill",!1)},f.prototype.stroke=function(){B.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(P,D){if(isNaN(P)||isNaN(D))throw On.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new o(P,D));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new o(P,D)},f.prototype.closePath=function(){var P=new o(0,0),D=0;for(D=this.path.length-1;D!==-1;D--)if(this.path[D].type==="begin"&&wn(this.path[D+1])==="object"&&typeof this.path[D+1].x=="number"){P=new o(this.path[D+1].x,this.path[D+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(P.x,P.y)},f.prototype.lineTo=function(P,D){if(isNaN(P)||isNaN(D))throw On.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new o(P,D));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new o(W.x,W.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),B.call(this,null,!0)},f.prototype.quadraticCurveTo=function(P,D,W,J){if(isNaN(W)||isNaN(J)||isNaN(P)||isNaN(D))throw On.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new o(W,J)),ie=this.ctx.transform.applyToPoint(new o(P,D));this.path.push({type:"qct",x1:ie.x,y1:ie.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new o(ce.x,ce.y)},f.prototype.bezierCurveTo=function(P,D,W,J,ce,ie){if(isNaN(ce)||isNaN(ie)||isNaN(P)||isNaN(D)||isNaN(W)||isNaN(J))throw On.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var re=this.ctx.transform.applyToPoint(new o(ce,ie)),de=this.ctx.transform.applyToPoint(new o(P,D)),oe=this.ctx.transform.applyToPoint(new o(W,J));this.path.push({type:"bct",x1:de.x,y1:de.y,x2:oe.x,y2:oe.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},f.prototype.arc=function(P,D,W,J,ce,ie){if(isNaN(P)||isNaN(D)||isNaN(W)||isNaN(J)||isNaN(ce))throw On.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ie=!!ie,!this.ctx.transform.isIdentity){var re=this.ctx.transform.applyToPoint(new o(P,D));P=re.x,D=re.y;var de=this.ctx.transform.applyToPoint(new o(0,W)),oe=this.ctx.transform.applyToPoint(new o(0,0));W=Math.sqrt(Math.pow(de.x-oe.x,2)+Math.pow(de.y-oe.y,2))}Math.abs(ce-J)>=2*Math.PI&&(J=0,ce=2*Math.PI),this.path.push({type:"arc",x:P,y:D,radius:W,startAngle:J,endAngle:ce,counterclockwise:ie})},f.prototype.arcTo=function(P,D,W,J,ce){throw new Error("arcTo not implemented.")},f.prototype.rect=function(P,D,W,J){if(isNaN(P)||isNaN(D)||isNaN(W)||isNaN(J))throw On.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,D),this.lineTo(P+W,D),this.lineTo(P+W,D+J),this.lineTo(P,D+J),this.lineTo(P,D),this.lineTo(P+W,D),this.lineTo(P,D)},f.prototype.fillRect=function(P,D,W,J){if(isNaN(P)||isNaN(D)||isNaN(W)||isNaN(J))throw On.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,D,W,J),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},f.prototype.strokeRect=function(P,D,W,J){if(isNaN(P)||isNaN(D)||isNaN(W)||isNaN(J))throw On.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(P,D,W,J),this.stroke())},f.prototype.clearRect=function(P,D,W,J){if(isNaN(P)||isNaN(D)||isNaN(W)||isNaN(J))throw On.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,D,W,J))},f.prototype.save=function(P){P=typeof P!="boolean"||P;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage(D),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},f.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage(D),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var A=function(P){var D,W,J,ce;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))D=0,W=0,J=0,ce=0;else{var ie=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(ie!==null)D=parseInt(ie[1]),W=parseInt(ie[2]),J=parseInt(ie[3]),ce=1;else if((ie=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)D=parseInt(ie[1]),W=parseInt(ie[2]),J=parseInt(ie[3]),ce=parseFloat(ie[4]);else{if(ce=1,typeof P=="string"&&P.charAt(0)!=="#"){var re=new Lue(P);P=re.ok?re.toHex():"#000000"}P.length===4?(D=P.substring(1,2),D+=D,W=P.substring(2,3),W+=W,J=P.substring(3,4),J+=J):(D=P.substring(1,3),W=P.substring(3,5),J=P.substring(5,7)),D=parseInt(D,16),W=parseInt(W,16),J=parseInt(J,16)}}return{r:D,g:W,b:J,a:ce,style:P}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(P,D,W,J){if(isNaN(D)||isNaN(W)||typeof P!="string")throw On.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!m.call(this)){var ce=X(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;S.call(this,{text:P,x:D,y:W,scale:ie,angle:ce,align:this.textAlign,maxWidth:J})}},f.prototype.strokeText=function(P,D,W,J){if(isNaN(D)||isNaN(W)||typeof P!="string")throw On.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){J=isNaN(J)?void 0:J;var ce=X(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;S.call(this,{text:P,x:D,y:W,scale:ie,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:J})}},f.prototype.measureText=function(P){if(typeof P!="string")throw On.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var D=this.pdf,W=this.pdf.internal.scaleFactor,J=D.internal.getFontSize(),ce=D.getStringUnitWidth(P)*J/D.internal.scaleFactor,ie=function(re){var de=(re=re||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return de}}),this};return new ie({width:ce*=Math.round(96*W/72*1e4)/1e4})},f.prototype.scale=function(P,D){if(isNaN(P)||isNaN(D))throw On.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new c(P,0,0,D,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},f.prototype.rotate=function(P){if(isNaN(P))throw On.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var D=new c(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(D)},f.prototype.translate=function(P,D){if(isNaN(P)||isNaN(D))throw On.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new c(1,0,0,1,P,D);this.ctx.transform=this.ctx.transform.multiply(W)},f.prototype.transform=function(P,D,W,J,ce,ie){if(isNaN(P)||isNaN(D)||isNaN(W)||isNaN(J)||isNaN(ce)||isNaN(ie))throw On.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var re=new c(P,D,W,J,ce,ie);this.ctx.transform=this.ctx.transform.multiply(re)},f.prototype.setTransform=function(P,D,W,J,ce,ie){P=isNaN(P)?1:P,D=isNaN(D)?0:D,W=isNaN(W)?0:W,J=isNaN(J)?1:J,ce=isNaN(ce)?0:ce,ie=isNaN(ie)?0:ie,this.ctx.transform=new c(P,D,W,J,ce,ie)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(P,D,W,J,ce,ie,re,de,oe){var be=this.pdf.getImageProperties(P),q=1,we=1,Te=1,Ee=1;J!==void 0&&de!==void 0&&(Te=de/J,Ee=oe/ce,q=be.width/J*de/J,we=be.height/ce*oe/ce),ie===void 0&&(ie=D,re=W,D=0,W=0),J!==void 0&&de===void 0&&(de=J,oe=ce),J===void 0&&de===void 0&&(de=be.width,oe=be.height);for(var ue,ge=this.ctx.transform.decompose(),he=X(ge.rotate.shx),ve=new c,le=(ve=(ve=(ve=ve.multiply(ge.translate)).multiply(ge.skew)).multiply(ge.scale)).applyToRectangle(new l(ie-D*Te,re-W*Ee,J*q,ce*we)),ne=v.call(this,le),Ae=[],pe=0;pe<ne.length;pe+=1)Ae.indexOf(ne[pe])===-1&&Ae.push(ne[pe]);if(E(Ae),this.autoPaging)for(var ke=Ae[0],Le=Ae[Ae.length-1],qe=ke;qe<Le+1;qe++){this.pdf.setPage(qe);var ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Re=qe===1?this.posY+this.margin[0]:this.margin[0],We=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ze=qe===1?0:We+(qe-2)*ct;if(this.ctx.clip_path.length!==0){var Qe=this.path;ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(ue,this.posX+this.margin[3],-Ze+Re+this.ctx.prevPageLastElemOffset),_.call(this,"fill",!0),this.path=Qe}var wt=JSON.parse(JSON.stringify(le));wt=N([wt],this.posX+this.margin[3],-Ze+Re+this.ctx.prevPageLastElemOffset)[0];var ar=(qe>ke||qe<Le)&&x.call(this);ar&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ze,ct,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",wt.x,wt.y,wt.w,wt.h,null,null,he),ar&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",le.x,le.y,le.w,le.h,null,null,he)};var v=function(P,D,W){var J=[];D=D||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":J.push(Math.floor((P.y+ce)/W)+1);break;case"arc":J.push(Math.floor((P.y+ce-P.radius)/W)+1),J.push(Math.floor((P.y+ce+P.radius)/W)+1);break;case"qct":var ie=Z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);J.push(Math.floor((ie.y+ce)/W)+1),J.push(Math.floor((ie.y+ie.h+ce)/W)+1);break;case"bct":var re=U(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);J.push(Math.floor((re.y+ce)/W)+1),J.push(Math.floor((re.y+re.h+ce)/W)+1);break;case"rect":J.push(Math.floor((P.y+ce)/W)+1),J.push(Math.floor((P.y+P.h+ce)/W)+1)}for(var de=0;de<J.length;de+=1)for(;this.pdf.internal.getNumberOfPages()<J[de];)y.call(this);return J},y=function(){var P=this.fillStyle,D=this.strokeStyle,W=this.font,J=this.lineCap,ce=this.lineWidth,ie=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=D,this.font=W,this.lineCap=J,this.lineWidth=ce,this.lineJoin=ie},N=function(P,D,W){for(var J=0;J<P.length;J++)switch(P[J].type){case"bct":P[J].x2+=D,P[J].y2+=W;case"qct":P[J].x1+=D,P[J].y1+=W;case"mt":case"lt":case"arc":default:P[J].x+=D,P[J].y+=W}return P},E=function(P){return P.sort(function(D,W){return D-W})},B=function(P,D){for(var W,J,ce=this.fillStyle,ie=this.strokeStyle,re=this.lineCap,de=this.lineWidth,oe=Math.abs(de*this.ctx.transform.scaleX),be=this.lineJoin,q=JSON.parse(JSON.stringify(this.path)),we=JSON.parse(JSON.stringify(this.path)),Te=[],Ee=0;Ee<we.length;Ee++)if(we[Ee].x!==void 0)for(var ue=v.call(this,we[Ee]),ge=0;ge<ue.length;ge+=1)Te.indexOf(ue[ge])===-1&&Te.push(ue[ge]);for(var he=0;he<Te.length;he++)for(;this.pdf.internal.getNumberOfPages()<Te[he];)y.call(this);if(E(Te),this.autoPaging)for(var ve=Te[0],le=Te[Te.length-1],ne=ve;ne<le+1;ne++){this.pdf.setPage(ne),this.fillStyle=ce,this.strokeStyle=ie,this.lineCap=re,this.lineWidth=oe,this.lineJoin=be;var Ae=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pe=ne===1?this.posY+this.margin[0]:this.margin[0],ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Le=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],qe=ne===1?0:ke+(ne-2)*Le;if(this.ctx.clip_path.length!==0){var ze=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(W,this.posX+this.margin[3],-qe+pe+this.ctx.prevPageLastElemOffset),_.call(this,P,!0),this.path=ze}if(J=JSON.parse(JSON.stringify(q)),this.path=N(J,this.posX+this.margin[3],-qe+pe+this.ctx.prevPageLastElemOffset),D===!1||ne===0){var Re=(ne>ve||ne<le)&&x.call(this);Re&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ae,Le,null).clip().discardPath()),_.call(this,P,D),Re&&this.pdf.restoreGraphicsState()}this.lineWidth=de}else this.lineWidth=oe,_.call(this,P,D),this.lineWidth=de;this.path=q},_=function(P,D){if((P!=="stroke"||D||!g.call(this))&&(P==="stroke"||D||!m.call(this))){for(var W,J,ce=[],ie=this.path,re=0;re<ie.length;re++){var de=ie[re];switch(de.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:de,deltas:[],abs:[]});break;case"lt":var oe=ce.length;if(ie[re-1]&&!isNaN(ie[re-1].x)&&(W=[de.x-ie[re-1].x,de.y-ie[re-1].y],oe>0)){for(;oe>=0;oe--)if(ce[oe-1].close!==!0&&ce[oe-1].begin!==!0){ce[oe-1].deltas.push(W),ce[oe-1].abs.push(de);break}}break;case"bct":W=[de.x1-ie[re-1].x,de.y1-ie[re-1].y,de.x2-ie[re-1].x,de.y2-ie[re-1].y,de.x-ie[re-1].x,de.y-ie[re-1].y],ce[ce.length-1].deltas.push(W);break;case"qct":var be=ie[re-1].x+2/3*(de.x1-ie[re-1].x),q=ie[re-1].y+2/3*(de.y1-ie[re-1].y),we=de.x+2/3*(de.x1-de.x),Te=de.y+2/3*(de.y1-de.y),Ee=de.x,ue=de.y;W=[be-ie[re-1].x,q-ie[re-1].y,we-ie[re-1].x,Te-ie[re-1].y,Ee-ie[re-1].x,ue-ie[re-1].y],ce[ce.length-1].deltas.push(W);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(de)}}J=D?null:P==="stroke"?"stroke":"fill";for(var ge=!1,he=0;he<ce.length;he++)if(ce[he].arc)for(var ve=ce[he].abs,le=0;le<ve.length;le++){var ne=ve[le];ne.type==="arc"?k.call(this,ne.x,ne.y,ne.radius,ne.startAngle,ne.endAngle,ne.counterclockwise,void 0,D,!ge):M.call(this,ne.x,ne.y),ge=!0}else if(ce[he].close===!0)this.pdf.internal.out("h"),ge=!1;else if(ce[he].begin!==!0){var Ae=ce[he].start.x,pe=ce[he].start.y;H.call(this,ce[he].deltas,Ae,pe),ge=!0}J&&T.call(this,J),D&&L.call(this)}},I=function(P){var D=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=D*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-W;case"top":return P+D-W;case"hanging":return P+D-2*W;case"middle":return P+D/2-W;case"ideographic":return P;case"alphabetic":default:return P}},j=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(D,W){this.colorStops.push([D,W])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var k=function(P,D,W,J,ce,ie,re,de,oe){for(var be=Q.call(this,W,J,ce,ie),q=0;q<be.length;q++){var we=be[q];q===0&&(oe?F.call(this,we.x1+P,we.y1+D):M.call(this,we.x1+P,we.y1+D)),K.call(this,P,D,we.x2,we.y2,we.x3,we.y3,we.x4,we.y4)}de?L.call(this):T.call(this,re)},T=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(P,D){this.pdf.internal.out(r(P)+" "+a(D)+" m")},S=function(P){var D;switch(P.align){case"right":case"end":D="right";break;case"center":D="center";break;case"left":case"start":default:D="left"}var W=this.pdf.getTextDimensions(P.text),J=I.call(this,P.y),ce=j.call(this,J)-W.h,ie=this.ctx.transform.applyToPoint(new o(P.x,J)),re=this.ctx.transform.decompose(),de=new c;de=(de=(de=de.multiply(re.translate)).multiply(re.skew)).multiply(re.scale);for(var oe,be,q,we=this.ctx.transform.applyToRectangle(new l(P.x,J,W.w,W.h)),Te=de.applyToRectangle(new l(P.x,ce,W.w,W.h)),Ee=v.call(this,Te),ue=[],ge=0;ge<Ee.length;ge+=1)ue.indexOf(Ee[ge])===-1&&ue.push(Ee[ge]);if(E(ue),this.autoPaging)for(var he=ue[0],ve=ue[ue.length-1],le=he;le<ve+1;le++){this.pdf.setPage(le);var ne=le===1?this.posY+this.margin[0]:this.margin[0],Ae=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pe=this.pdf.internal.pageSize.height-this.margin[2],ke=pe-this.margin[0],Le=this.pdf.internal.pageSize.width-this.margin[1],qe=Le-this.margin[3],ze=le===1?0:Ae+(le-2)*ke;if(this.ctx.clip_path.length!==0){var Re=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(oe,this.posX+this.margin[3],-1*ze+ne),_.call(this,"fill",!0),this.path=Re}var We=N([JSON.parse(JSON.stringify(Te))],this.posX+this.margin[3],-ze+ne+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*P.scale),q=this.lineWidth,this.lineWidth=q*P.scale);var ct=this.autoPaging!=="text";if(ct||We.y+We.h<=pe){if(ct||We.y>=ne&&We.x<=Le){var Ze=ct?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||Le-We.x)[0],Qe=N([JSON.parse(JSON.stringify(we))],this.posX+this.margin[3],-ze+ne+this.ctx.prevPageLastElemOffset)[0],wt=ct&&(le>he||le<ve)&&x.call(this);wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qe,ke,null).clip().discardPath()),this.pdf.text(Ze,Qe.x,Qe.y,{angle:P.angle,align:D,renderingMode:P.renderingMode}),wt&&this.pdf.restoreGraphicsState()}}else We.y<pe&&(this.ctx.prevPageLastElemOffset+=pe-We.y);P.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=q)}else P.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*P.scale),q=this.lineWidth,this.lineWidth=q*P.scale),this.pdf.text(P.text,ie.x+this.posX,ie.y+this.posY,{angle:P.angle,align:D,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=q)},M=function(P,D,W,J){W=W||0,J=J||0,this.pdf.internal.out(r(P+W)+" "+a(D+J)+" l")},H=function(P,D,W){return this.pdf.lines(P,D,W,null,null)},K=function(P,D,W,J,ce,ie,re,de){this.pdf.internal.out([t(n(W+P)),t(i(J+D)),t(n(ce+P)),t(i(ie+D)),t(n(re+P)),t(i(de+D)),"c"].join(" "))},Q=function(P,D,W,J){for(var ce=2*Math.PI,ie=Math.PI/2;D>W;)D-=ce;var re=Math.abs(W-D);re<ce&&J&&(re=ce-re);for(var de=[],oe=J?-1:1,be=D;re>1e-5;){var q=be+oe*Math.min(re,ie);de.push(G.call(this,P,be,q)),re-=Math.abs(q-be),be=q}return de},G=function(P,D,W){var J=(W-D)/2,ce=P*Math.cos(J),ie=P*Math.sin(J),re=ce,de=-ie,oe=re*re+de*de,be=oe+re*ce+de*ie,q=4/3*(Math.sqrt(2*oe*be)-be)/(re*ie-de*ce),we=re-q*de,Te=de+q*re,Ee=we,ue=-Te,ge=J+D,he=Math.cos(ge),ve=Math.sin(ge);return{x1:P*Math.cos(D),y1:P*Math.sin(D),x2:we*he-Te*ve,y2:we*ve+Te*he,x3:Ee*he-ue*ve,y3:Ee*ve+ue*he,x4:P*Math.cos(W),y4:P*Math.sin(W)}},X=function(P){return 180*P/Math.PI},Z=function(P,D,W,J,ce,ie){var re=P+.5*(W-P),de=D+.5*(J-D),oe=ce+.5*(W-ce),be=ie+.5*(J-ie),q=Math.min(P,ce,re,oe),we=Math.max(P,ce,re,oe),Te=Math.min(D,ie,de,be),Ee=Math.max(D,ie,de,be);return new l(q,Te,we-q,Ee-Te)},U=function(P,D,W,J,ce,ie,re,de){var oe,be,q,we,Te,Ee,ue,ge,he,ve,le,ne,Ae,pe,ke=W-P,Le=J-D,qe=ce-W,ze=ie-J,Re=re-ce,We=de-ie;for(be=0;be<41;be++)he=(ue=(q=P+(oe=be/40)*ke)+oe*((Te=W+oe*qe)-q))+oe*(Te+oe*(ce+oe*Re-Te)-ue),ve=(ge=(we=D+oe*Le)+oe*((Ee=J+oe*ze)-we))+oe*(Ee+oe*(ie+oe*We-Ee)-ge),be==0?(le=he,ne=ve,Ae=he,pe=ve):(le=Math.min(le,he),ne=Math.min(ne,ve),Ae=Math.max(Ae,he),pe=Math.max(pe,ve));return new l(Math.round(le),Math.round(ne),Math.round(Ae-le),Math.round(pe-ne))},Y=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,D,W=(P=this.ctx.lineDash,D=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:D}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})(xr.API),function(e){var t=function(i){var o,l,c,d,u,f,A,m,g,x;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(u=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(f=(u=((u=((u=((u=(u-(x=u%85))/85)-(g=u%85))/85)-(m=u%85))/85)-(A=u%85))/85)%85,l.push(f+33,A+33,m+33,g+33,x+33)):l.push(122);return function(v,y){for(var N=y;N>0;N--)v.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,d,u,f=String,A="length",m=255,g="charCodeAt",x="slice",v="replace";for(i[x](-2),i=i[x](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),c=[],d=0,u=(i+=o="uuuuu"[x](i[A]%5||5))[A];u>d;d+=5)l=52200625*(i[g](d)-33)+614125*(i[g](d+1)-33)+7225*(i[g](d+2)-33)+85*(i[g](d+3)-33)+(i[g](d+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(y,N){for(var E=N;E>0;E--)y.pop()}(c,o[A]),f.fromCharCode.apply(f,c)},a=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},n=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=hP(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=a(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=n(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(xr.API),function(e){e.loadFile=function(t,r,a){return function(n,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,u){var f=new XMLHttpRequest,A=0,m=function(g){var x=g.length,v=[],y=String.fromCharCode;for(A=0;A<x;A+=1)v.push(y(255&g.charCodeAt(A)));return v.join("")};if(f.open("GET",c,!d),f.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(f.onload=function(){f.status===200?u(m(this.responseText)):u(void 0)}),f.send(null),d&&f.status===200)return m(f.responseText)}(n,i,o)}catch{}return l}(t,r,a)},e.loadImageFile=e.loadFile}(xr.API),function(e){function t(){return(Ur.html2canvas?Promise.resolve(Ur.html2canvas):ps(()=>Promise.resolve().then(()=>ivt),void 0)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Ur.DOMPurify?Promise.resolve(Ur.DOMPurify):ps(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var a=function(o){var l=wn(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},n=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(a(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:n("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,u){for(var f=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),A=d.firstChild;A;A=A.nextSibling)u!==!0&&A.nodeType===1&&A.nodeName==="SCRIPT"||f.appendChild(c(A,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(f.width=d.width,f.height=d.height,f.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(f.value=d.value),f.addEventListener("load",function(){f.scrollTop=d.scrollTop,f.scrollLeft=d.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=n("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=n("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(n("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var A=0;A<d.length;++A){var m=d[A],g=m.src.find(function(x){return x.format==="truetype"});g&&c.addFont(g.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),l(this.prop.container,f)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(a(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(a(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||xr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(f){return c.updateProgress(null,d),f}).then(d,u).then(function(f){return c.updateProgress(1),f})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=c.call(d,o,l);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,xr.getPageSize=function(o,l,c){if(wn(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var u,f=(""+c).toLowerCase(),A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var m,g=0,x=0;if(A.hasOwnProperty(f))g=A[f][1]/u,x=A[f][0]/u;else try{g=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",x>g&&(m=x,x=g,g=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",g>x&&(m=x,x=g,g=m)}return{width:x,height:g,unit:l,k:u,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(vP):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(xr.API),xr.API.addJS=function(e){return DX=e,this.internal.events.subscribe("postPutResources",function(){Tj=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Tj+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),OX=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+DX+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Tj!==void 0&&OX!==void 0&&this.internal.out("/Names <</JavaScript "+Tj+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=r.outline.render().split(/\r\n/),i=0;i<n.length;i++){var o=n[i],l=a.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var f=r.internal.newObject();u.push(f);var A=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+A.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,n,i){var o={title:n,options:i,children:[]};return a==null&&(a=this.root),a.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var n=0;n<a.children.length;n++)this.genIds_r(a.children[n])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<a.children.length;i++){var o=a.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(a)),i>0&&this.line("/Prev "+this.makeRef(a.children[i-1])),i<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var d=0;d<a.children.length;d++)this.renderItems(a.children[d])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,n){for(var i=0;i<n.children.length;i++)a.count++,this.count_r(a,n.children[i]);return a.count}}])}(xr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,a,n,i,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(f){for(var A,m=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,x={width:0,height:0,numcomponents:1},v=4;v<g;v+=2){if(v+=m,t.indexOf(f.charCodeAt(v+1))!==-1){A=256*f.charCodeAt(v+5)+f.charCodeAt(v+6),x={width:256*f.charCodeAt(v+7)+f.charCodeAt(v+8),height:A,numcomponents:f.charCodeAt(v+9)};break}m=256*f.charCodeAt(v+2)+f.charCodeAt(v+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:a,alias:n}}return u}}(xr.API);var Ev,Bj,FX,PX,RX,ltt=function(){var e,t,r;function a(i){var o,l,c,d,u,f,A,m,g,x,v,y,N,E;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),g=(function(){var B,_;for(_=[],B=0;B<4;++B)_.push(String.fromCharCode(this.data[this.pos++]));return _}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,f.delay=1e3*u/d,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,o-=4),i=(f!=null?f.data:void 0)||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(N=0;0<=x?N<x:N>x;0<=x?++N:--N)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":A=(v=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,v.slice(0,A)),this.text[m]=String.fromCharCode.apply(String,v.slice(A+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(E=this.colorType)===4||E===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(f,A,m,g){var x,v,y,N,E,B,_,I,j,k,T,L,F,S,M,H,K,Q,G,X,Z,U=Math.ceil((d.width-f)/m),Y=Math.ceil((d.height-A)/g),P=d.width==U&&d.height==Y;for(S=o*U,L=P?l:new Uint8Array(S*Y),B=i.length,F=0,v=0;F<Y&&c<B;){switch(i[c++]){case 0:for(N=K=0;K<S;N=K+=1)L[v++]=i[c++];break;case 1:for(N=Q=0;Q<S;N=Q+=1)x=i[c++],E=N<o?0:L[v-o],L[v++]=(x+E)%256;break;case 2:for(N=G=0;G<S;N=G+=1)x=i[c++],y=(N-N%o)/o,M=F&&L[(F-1)*S+y*o+N%o],L[v++]=(M+x)%256;break;case 3:for(N=X=0;X<S;N=X+=1)x=i[c++],y=(N-N%o)/o,E=N<o?0:L[v-o],M=F&&L[(F-1)*S+y*o+N%o],L[v++]=(x+Math.floor((E+M)/2))%256;break;case 4:for(N=Z=0;Z<S;N=Z+=1)x=i[c++],y=(N-N%o)/o,E=N<o?0:L[v-o],F===0?M=H=0:(M=L[(F-1)*S+y*o+N%o],H=y&&L[(F-1)*S+(y-1)*o+N%o]),_=E+M-H,I=Math.abs(_-E),k=Math.abs(_-M),T=Math.abs(_-H),j=I<=k&&I<=T?E:k<=T?M:H,L[v++]=(x+j)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!P){var D=((A+F*g)*d.width+f)*o,W=F*S;for(N=0;N<U;N+=1){for(var J=0;J<o;J+=1)l[D++]=L[W++];D+=(m-1)*o}}F++}}return i=Uet(i),d.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),l},a.prototype.decodePalette=function(){var i,o,l,c,d,u,f,A,m;for(l=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+l.length),c=0,i=0,o=f=0,A=l.length;f<A;o=f+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(m=u[i++])!=null?m:255;return d},a.prototype.copyToImageData=function(i,o){var l,c,d,u,f,A,m,g,x,v,y;if(c=this.colors,x=null,l=this.hasAlphaChannel,this.palette.length&&(x=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,l=!0),g=(d=i.data||i).length,f=x||o,u=A=0,c===1)for(;u<g;)m=x?4*o[u/4]:A,v=f[m++],d[u++]=v,d[u++]=v,d[u++]=v,d[u++]=l?f[m++]:255,A=m;else for(;u<g;)m=x?4*o[u/4]:A,d[u++]=f[m++],d[u++]=f[m++],d[u++]=f[m++],d[u++]=l?f[m++]:255,A=m},a.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var n=function(){if(Object.prototype.toString.call(Ur)==="[object Window]"){try{t=Ur.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return n(),e=function(i){var o;if(n()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(i){var o,l,c,d,u,f,A,m;if(this.animation){for(m=[],l=u=0,f=(A=this.animation.frames).length;u<f;l=++u)o=A[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,m.push(o.image=e(c));return m}},a.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},a.prototype.animate=function(i){var o,l,c,d,u,f,A=this;return l=0,f=this.animation,d=f.numFrames,c=f.frames,u=f.numPlays,(o=function(){var m,g;if(m=l++%d,g=c[m],A.renderFrame(i,m),d>1&&l/d<u)return A.animation._timeout=setTimeout(o,g.delay)})()},a.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},a.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},a}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function ctt(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,n=e[t++],i=n>>7,o=1<<(7&n)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,u=[],f=0,A=null,m=0,g=null;for(this.width=r,this.height=a;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((F=e[t++])>=0))throw Error("Invalid block size");if(F===0)break;t+=F}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=e[t++];f=e[t++]|e[t++]<<8,A=e[t++],(1&x)==0&&(A=null),m=x>>2&7,t++;break;case 254:for(;;){if(!((F=e[t++])>=0))throw Error("Invalid block size");if(F===0)break;t+=F}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,E=e[t++]|e[t++]<<8,B=e[t++],_=B>>6&1,I=1<<(7&B)+1,j=l,k=c,T=!1;B>>7&&(T=!0,j=t,k=I,t+=3*I);var L=t;for(t++;;){var F;if(!((F=e[t++])>=0))throw Error("Invalid block size");if(F===0)break;t+=F}u.push({x:v,y,width:N,height:E,has_local_palette:T,palette_offset:j,palette_size:k,data_offset:L,data_length:t-L,transparent_index:A,interlaced:!!_,delay:f,disposal:m});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return g},this.frameInfo=function(S){if(S<0||S>=u.length)throw new Error("Frame index out of range.");return u[S]},this.decodeAndBlitFrameBGRA=function(S,M){var H=this.frameInfo(S),K=H.width*H.height,Q=new Uint8Array(K);LX(e,H.data_offset,Q,K);var G=H.palette_offset,X=H.transparent_index;X===null&&(X=256);var Z=H.width,U=r-Z,Y=Z,P=4*(H.y*r+H.x),D=4*((H.y+H.height)*r+H.x),W=P,J=4*U;H.interlaced===!0&&(J+=4*r*7);for(var ce=8,ie=0,re=Q.length;ie<re;++ie){var de=Q[ie];if(Y===0&&(Y=Z,(W+=J)>=D&&(J=4*U+4*r*(ce-1),W=P+(Z+U)*(ce<<1),ce>>=1)),de===X)W+=4;else{var oe=e[G+3*de],be=e[G+3*de+1],q=e[G+3*de+2];M[W++]=q,M[W++]=be,M[W++]=oe,M[W++]=255}--Y}},this.decodeAndBlitFrameRGBA=function(S,M){var H=this.frameInfo(S),K=H.width*H.height,Q=new Uint8Array(K);LX(e,H.data_offset,Q,K);var G=H.palette_offset,X=H.transparent_index;X===null&&(X=256);var Z=H.width,U=r-Z,Y=Z,P=4*(H.y*r+H.x),D=4*((H.y+H.height)*r+H.x),W=P,J=4*U;H.interlaced===!0&&(J+=4*r*7);for(var ce=8,ie=0,re=Q.length;ie<re;++ie){var de=Q[ie];if(Y===0&&(Y=Z,(W+=J)>=D&&(J=4*U+4*r*(ce-1),W=P+(Z+U)*(ce<<1),ce>>=1)),de===X)W+=4;else{var oe=e[G+3*de],be=e[G+3*de+1],q=e[G+3*de+2];M[W++]=oe,M[W++]=be,M[W++]=q,M[W++]=255}--Y}}}function LX(e,t,r,a){for(var n=e[t++],i=1<<n,o=i+1,l=o+1,c=n+1,d=(1<<c)-1,u=0,f=0,A=0,m=e[t++],g=new Int32Array(4096),x=null;;){for(;u<16&&m!==0;)f|=e[t++]<<u,u+=8,m===1?m=e[t++]:--m;if(u<c)break;var v=f&d;if(f>>=c,u-=c,v!==i){if(v===o)break;for(var y=v<l?v:x,N=0,E=y;E>i;)E=g[E]>>8,++N;var B=E;if(A+N+(y!==v?1:0)>a)return void On.log("Warning, gif stream longer than expected.");r[A++]=B;var _=A+=N;for(y!==v&&(r[A++]=B),E=y;N--;)E=g[E],r[--_]=255&E,E>>=8;x!==null&&l<4096&&(g[l++]=x<<8|B,l>=d+1&&c<12&&(++c,d=d<<1|1)),x=v}else l=o+1,d=(1<<(c=n+1))-1,x=null}return A!==a&&On.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function nO(e){var t,r,a,n,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),f=new Array(65535),A=new Array(65535),m=new Array(64),g=new Array(64),x=[],v=0,y=7,N=new Array(64),E=new Array(64),B=new Array(64),_=new Array(256),I=new Array(2048),j=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],K=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Q(P,D){for(var W=0,J=0,ce=new Array,ie=1;ie<=16;ie++){for(var re=1;re<=P[ie];re++)ce[D[J]]=[],ce[D[J]][0]=W,ce[D[J]][1]=ie,J++,W++;W*=2}return ce}function G(P){for(var D=P[0],W=P[1]-1;W>=0;)D&1<<W&&(v|=1<<y),W--,--y<0&&(v==255?(X(255),X(0)):X(v),y=7,v=0)}function X(P){x.push(P)}function Z(P){X(P>>8&255),X(255&P)}function U(P,D,W,J,ce){for(var ie,re=ce[0],de=ce[240],oe=function(ve,le){var ne,Ae,pe,ke,Le,qe,ze,Re,We,ct,Ze=0;for(We=0;We<8;++We){ne=ve[Ze],Ae=ve[Ze+1],pe=ve[Ze+2],ke=ve[Ze+3],Le=ve[Ze+4],qe=ve[Ze+5],ze=ve[Ze+6];var Qe=ne+(Re=ve[Ze+7]),wt=ne-Re,ar=Ae+ze,qt=Ae-ze,gr=pe+qe,Pr=pe-qe,yr=ke+Le,Tn=ke-Le,Rr=Qe+yr,Ha=Qe-yr,Rn=ar+gr,Lr=ar-gr;ve[Ze]=Rr+Rn,ve[Ze+4]=Rr-Rn;var pr=.707106781*(Lr+Ha);ve[Ze+2]=Ha+pr,ve[Ze+6]=Ha-pr;var Jr=.382683433*((Rr=Tn+Pr)-(Lr=qt+wt)),vs=.5411961*Rr+Jr,Za=1.306562965*Lr+Jr,Ln=.707106781*(Rn=Pr+qt),Qs=wt+Ln,tr=wt-Ln;ve[Ze+5]=tr+vs,ve[Ze+3]=tr-vs,ve[Ze+1]=Qs+Za,ve[Ze+7]=Qs-Za,Ze+=8}for(Ze=0,We=0;We<8;++We){ne=ve[Ze],Ae=ve[Ze+8],pe=ve[Ze+16],ke=ve[Ze+24],Le=ve[Ze+32],qe=ve[Ze+40],ze=ve[Ze+48];var va=ne+(Re=ve[Ze+56]),ca=ne-Re,Fa=Ae+ze,Xa=Ae-ze,en=pe+qe,Se=pe-qe,Ve=ke+Le,Me=ke-Le,He=va+Ve,Ne=va-Ve,xe=Fa+en,Fe=Fa-en;ve[Ze]=He+xe,ve[Ze+32]=He-xe;var Ge=.707106781*(Fe+Ne);ve[Ze+16]=Ne+Ge,ve[Ze+48]=Ne-Ge;var Ue=.382683433*((He=Me+Se)-(Fe=Xa+ca)),Ye=.5411961*He+Ue,et=1.306562965*Fe+Ue,Nt=.707106781*(xe=Se+Xa),Et=ca+Nt,zt=ca-Nt;ve[Ze+40]=zt+Ye,ve[Ze+24]=zt-Ye,ve[Ze+8]=Et+et,ve[Ze+56]=Et-et,Ze++}for(We=0;We<64;++We)ct=ve[We]*le[We],m[We]=ct>0?ct+.5|0:ct-.5|0;return m}(P,D),be=0;be<64;++be)g[j[be]]=oe[be];var q=g[0]-W;W=g[0],q==0?G(J[0]):(G(J[A[ie=32767+q]]),G(f[ie]));for(var we=63;we>0&&g[we]==0;)we--;if(we==0)return G(re),W;for(var Te,Ee=1;Ee<=we;){for(var ue=Ee;g[Ee]==0&&Ee<=we;)++Ee;var ge=Ee-ue;if(ge>=16){Te=ge>>4;for(var he=1;he<=Te;++he)G(de);ge&=15}ie=32767+g[Ee],G(ce[(ge<<4)+A[ie]]),G(f[ie]),Ee++}return we!=63&&G(re),W}function Y(P){P=Math.min(Math.max(P,1),100),i!=P&&(function(D){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var ce=o((W[J]*D+50)/100);ce=Math.min(Math.max(ce,1),255),l[j[J]]=ce}for(var ie=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],re=0;re<64;re++){var de=o((ie[re]*D+50)/100);de=Math.min(Math.max(de,1),255),c[j[re]]=de}for(var oe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],be=0,q=0;q<8;q++)for(var we=0;we<8;we++)d[be]=1/(l[j[be]]*oe[q]*oe[we]*8),u[be]=1/(c[j[be]]*oe[q]*oe[we]*8),be++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),i=P)}this.encode=function(P,D){D&&Y(D),x=new Array,v=0,y=7,Z(65496),Z(65504),Z(16),X(74),X(70),X(73),X(70),X(0),X(1),X(1),X(0),Z(1),Z(1),X(0),X(0),function(){Z(65499),Z(132),X(0);for(var Ae=0;Ae<64;Ae++)X(l[Ae]);X(1);for(var pe=0;pe<64;pe++)X(c[pe])}(),function(Ae,pe){Z(65472),Z(17),X(8),Z(pe),Z(Ae),X(3),X(1),X(17),X(0),X(2),X(17),X(1),X(3),X(17),X(1)}(P.width,P.height),function(){Z(65476),Z(418),X(0);for(var Ae=0;Ae<16;Ae++)X(k[Ae+1]);for(var pe=0;pe<=11;pe++)X(T[pe]);X(16);for(var ke=0;ke<16;ke++)X(L[ke+1]);for(var Le=0;Le<=161;Le++)X(F[Le]);X(1);for(var qe=0;qe<16;qe++)X(S[qe+1]);for(var ze=0;ze<=11;ze++)X(M[ze]);X(17);for(var Re=0;Re<16;Re++)X(H[Re+1]);for(var We=0;We<=161;We++)X(K[We])}(),Z(65498),Z(12),X(3),X(1),X(0),X(2),X(17),X(3),X(17),X(0),X(63),X(0);var W=0,J=0,ce=0;v=0,y=7,this.encode.displayName="_encode_";for(var ie,re,de,oe,be,q,we,Te,Ee,ue=P.data,ge=P.width,he=P.height,ve=4*ge,le=0;le<he;){for(ie=0;ie<ve;){for(be=ve*le+ie,we=-1,Te=0,Ee=0;Ee<64;Ee++)q=be+(Te=Ee>>3)*ve+(we=4*(7&Ee)),le+Te>=he&&(q-=ve*(le+1+Te-he)),ie+we>=ve&&(q-=ie+we-ve+4),re=ue[q++],de=ue[q++],oe=ue[q++],N[Ee]=(I[re]+I[de+256>>0]+I[oe+512>>0]>>16)-128,E[Ee]=(I[re+768>>0]+I[de+1024>>0]+I[oe+1280>>0]>>16)-128,B[Ee]=(I[re+1280>>0]+I[de+1536>>0]+I[oe+1792>>0]>>16)-128;W=U(N,d,W,t,a),J=U(E,u,J,r,n),ce=U(B,u,ce,r,n),ie+=32}le+=8}if(y>=0){var ne=[];ne[1]=y+1,ne[0]=(1<<y+1)-1,G(ne)}return Z(65497),new Uint8Array(x)},e=e||50,function(){for(var P=String.fromCharCode,D=0;D<256;D++)_[D]=P(D)}(),t=Q(k,T),r=Q(S,M),a=Q(L,F),n=Q(H,K),function(){for(var P=1,D=2,W=1;W<=15;W++){for(var J=P;J<D;J++)A[32767+J]=W,f[32767+J]=[],f[32767+J][1]=W,f[32767+J][0]=J;for(var ce=-(D-1);ce<=-P;ce++)A[32767+ce]=W,f[32767+ce]=[],f[32767+ce][1]=W,f[32767+ce][0]=D-1+ce;P<<=1,D<<=1}}(),function(){for(var P=0;P<256;P++)I[P]=19595*P,I[P+256>>0]=38470*P,I[P+512>>0]=7471*P+32768,I[P+768>>0]=-11059*P,I[P+1024>>0]=-21709*P,I[P+1280>>0]=32768*P+8421375,I[P+1536>>0]=-27439*P,I[P+1792>>0]=-5329*P}(),Y(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function qu(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function MX(e){function t(k){if(!k)throw Error("assert :P")}function r(k,T,L){for(var F=0;4>F;F++)if(k[T+F]!=L.charCodeAt(F))return!0;return!1}function a(k,T,L,F,S){for(var M=0;M<S;M++)k[T+M]=L[F+M]}function n(k,T,L,F){for(var S=0;S<F;S++)k[T+S]=L}function i(k){return new Int32Array(k)}function o(k,T){for(var L=[],F=0;F<k;F++)L.push(new T);return L}function l(k,T){var L=[];return function F(S,M,H){for(var K=H[M],Q=0;Q<K&&(S.push(H.length>M+1?[]:new T),!(H.length<M+1));Q++)F(S[Q],M+1,H)}(L,0,k),L}var c=function(){var k=this;function T(O,V){for(var ae=1<<V-1>>>0;O&ae;)ae>>>=1;return ae?(O&ae-1)+ae:O}function L(O,V,ae,fe,Ce){t(!(fe%ae));do O[V+(fe-=ae)]=Ce;while(0<fe)}function F(O,V,ae,fe,Ce){if(t(2328>=Ce),512>=Ce)var _e=i(512);else if((_e=i(Ce))==null)return 0;return function(Be,Ie,Pe,$e,tt,mt){var ht,lt,Pt=Ie,yt=1<<Pe,rt=i(16),nt=i(16);for(t(tt!=0),t($e!=null),t(Be!=null),t(0<Pe),lt=0;lt<tt;++lt){if(15<$e[lt])return 0;++rt[$e[lt]]}if(rt[0]==tt)return 0;for(nt[1]=0,ht=1;15>ht;++ht){if(rt[ht]>1<<ht)return 0;nt[ht+1]=nt[ht]+rt[ht]}for(lt=0;lt<tt;++lt)ht=$e[lt],0<$e[lt]&&(mt[nt[ht]++]=lt);if(nt[15]==1)return($e=new S).g=0,$e.value=mt[0],L(Be,Pt,1,yt,$e),yt;var Bt,Rt=-1,Ot=yt-1,nr=0,Jt=1,vr=1,er=1<<Pe;for(lt=0,ht=1,tt=2;ht<=Pe;++ht,tt<<=1){if(Jt+=vr<<=1,0>(vr-=rt[ht]))return 0;for(;0<rt[ht];--rt[ht])($e=new S).g=ht,$e.value=mt[lt++],L(Be,Pt+nr,tt,er,$e),nr=T(nr,ht)}for(ht=Pe+1,tt=2;15>=ht;++ht,tt<<=1){if(Jt+=vr<<=1,0>(vr-=rt[ht]))return 0;for(;0<rt[ht];--rt[ht]){if($e=new S,(nr&Ot)!=Rt){for(Pt+=er,Bt=1<<(Rt=ht)-Pe;15>Rt&&!(0>=(Bt-=rt[Rt]));)++Rt,Bt<<=1;yt+=er=1<<(Bt=Rt-Pe),Be[Ie+(Rt=nr&Ot)].g=Bt+Pe,Be[Ie+Rt].value=Pt-Ie-Rt}$e.g=ht-Pe,$e.value=mt[lt++],L(Be,Pt+(nr>>Pe),tt,er,$e),nr=T(nr,ht)}}return Jt!=2*nt[15]-1?0:yt}(O,V,ae,fe,Ce,_e)}function S(){this.value=this.g=0}function M(){this.value=this.g=0}function H(){this.G=o(5,S),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o($s,M)}function K(O,V,ae,fe){t(O!=null),t(V!=null),t(2147483648>fe),O.Ca=254,O.I=0,O.b=-8,O.Ka=0,O.oa=V,O.pa=ae,O.Jd=V,O.Yc=ae+fe,O.Zc=4<=fe?ae+fe-4+1:ae,ie(O)}function Q(O,V){for(var ae=0;0<V--;)ae|=de(O,128)<<V;return ae}function G(O,V){var ae=Q(O,V);return re(O)?-ae:ae}function X(O,V,ae,fe){var Ce,_e=0;for(t(O!=null),t(V!=null),t(4294967288>fe),O.Sb=fe,O.Ra=0,O.u=0,O.h=0,4<fe&&(fe=4),Ce=0;Ce<fe;++Ce)_e+=V[ae+Ce]<<8*Ce;O.Ra=_e,O.bb=fe,O.oa=V,O.pa=ae}function Z(O){for(;8<=O.u&&O.bb<O.Sb;)O.Ra>>>=8,O.Ra+=O.oa[O.pa+O.bb]<<e0-8>>>0,++O.bb,O.u-=8;W(O)&&(O.h=1,O.u=0)}function U(O,V){if(t(0<=V),!O.h&&V<=Zh){var ae=D(O)&Df[V];return O.u+=V,Z(O),ae}return O.h=1,O.u=0}function Y(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function D(O){return O.Ra>>>(O.u&e0-1)>>>0}function W(O){return t(O.bb<=O.Sb),O.h||O.bb==O.Sb&&O.u>e0}function J(O,V){O.u=V,O.h=W(O)}function ce(O){O.u>=IA&&(t(O.u>=IA),Z(O))}function ie(O){t(O!=null&&O.oa!=null),O.pa<O.Zc?(O.I=(O.oa[O.pa++]|O.I<<8)>>>0,O.b+=8):(t(O!=null&&O.oa!=null),O.pa<O.Yc?(O.b+=8,O.I=O.oa[O.pa++]|O.I<<8):O.Ka?O.b=0:(O.I<<=8,O.b+=8,O.Ka=1))}function re(O){return Q(O,1)}function de(O,V){var ae=O.Ca;0>O.b&&ie(O);var fe=O.b,Ce=ae*V>>>8,_e=(O.I>>>fe>Ce)+0;for(_e?(ae-=Ce,O.I-=Ce+1<<fe>>>0):ae=Ce+1,fe=ae,Ce=0;256<=fe;)Ce+=8,fe>>=8;return fe=7^Ce+Go[fe],O.b-=fe,O.Ca=(ae<<fe)-1,_e}function oe(O,V,ae){O[V+0]=ae>>24&255,O[V+1]=ae>>16&255,O[V+2]=ae>>8&255,O[V+3]=ae>>0&255}function be(O,V){return O[V+0]<<0|O[V+1]<<8}function q(O,V){return be(O,V)|O[V+2]<<16}function we(O,V){return be(O,V)|be(O,V+2)<<16}function Te(O,V){var ae=1<<V;return t(O!=null),t(0<V),O.X=i(ae),O.X==null?0:(O.Mb=32-V,O.Xa=V,1)}function Ee(O,V){t(O!=null),t(V!=null),t(O.Xa==V.Xa),a(V.X,0,O.X,0,1<<V.Xa)}function ue(){this.X=[],this.Xa=this.Mb=0}function ge(O,V,ae,fe){t(ae!=null),t(fe!=null);var Ce=ae[0],_e=fe[0];return Ce==0&&(Ce=(O*_e+V/2)/V),_e==0&&(_e=(V*Ce+O/2)/O),0>=Ce||0>=_e?0:(ae[0]=Ce,fe[0]=_e,1)}function he(O,V){return O+(1<<V)-1>>>V}function ve(O,V){return((4278255360&O)+(4278255360&V)>>>0&4278255360)+((16711935&O)+(16711935&V)>>>0&16711935)>>>0}function le(O,V){k[V]=function(ae,fe,Ce,_e,Be,Ie,Pe){var $e;for($e=0;$e<Be;++$e){var tt=k[O](Ie[Pe+$e-1],Ce,_e+$e);Ie[Pe+$e]=ve(ae[fe+$e],tt)}}}function ne(){this.ud=this.hd=this.jd=0}function Ae(O,V){return((4278124286&(O^V))>>>1)+(O&V)>>>0}function pe(O){return 0<=O&&256>O?O:0>O?0:255<O?255:void 0}function ke(O,V){return pe(O+(O-V+.5>>1))}function Le(O,V,ae){return Math.abs(V-ae)-Math.abs(O-ae)}function qe(O,V,ae,fe,Ce,_e,Be){for(fe=_e[Be-1],ae=0;ae<Ce;++ae)_e[Be+ae]=fe=ve(O[V+ae],fe)}function ze(O,V,ae,fe,Ce){var _e;for(_e=0;_e<ae;++_e){var Be=O[V+_e],Ie=Be>>8&255,Pe=16711935&(Pe=(Pe=16711935&Be)+((Ie<<16)+Ie));fe[Ce+_e]=(4278255360&Be)+Pe>>>0}}function Re(O,V){V.jd=O>>0&255,V.hd=O>>8&255,V.ud=O>>16&255}function We(O,V,ae,fe,Ce,_e){var Be;for(Be=0;Be<fe;++Be){var Ie=V[ae+Be],Pe=Ie>>>8,$e=Ie,tt=255&(tt=(tt=Ie>>>16)+((O.jd<<24>>24)*(Pe<<24>>24)>>>5));$e=255&($e=($e=$e+((O.hd<<24>>24)*(Pe<<24>>24)>>>5))+((O.ud<<24>>24)*(tt<<24>>24)>>>5)),Ce[_e+Be]=(4278255360&Ie)+(tt<<16)+$e}}function ct(O,V,ae,fe,Ce){k[V]=function(_e,Be,Ie,Pe,$e,tt,mt,ht,lt){for(Pe=mt;Pe<ht;++Pe)for(mt=0;mt<lt;++mt)$e[tt++]=Ce(Ie[fe(_e[Be++])])},k[O]=function(_e,Be,Ie,Pe,$e,tt,mt){var ht=8>>_e.b,lt=_e.Ea,Pt=_e.K[0],yt=_e.w;if(8>ht)for(_e=(1<<_e.b)-1,yt=(1<<ht)-1;Be<Ie;++Be){var rt,nt=0;for(rt=0;rt<lt;++rt)rt&_e||(nt=fe(Pe[$e++])),tt[mt++]=Ce(Pt[nt&yt]),nt>>=ht}else k["VP8LMapColor"+ae](Pe,$e,Pt,yt,tt,mt,Be,Ie,lt)}}function Ze(O,V,ae,fe,Ce){for(ae=V+ae;V<ae;){var _e=O[V++];fe[Ce++]=_e>>16&255,fe[Ce++]=_e>>8&255,fe[Ce++]=_e>>0&255}}function Qe(O,V,ae,fe,Ce){for(ae=V+ae;V<ae;){var _e=O[V++];fe[Ce++]=_e>>16&255,fe[Ce++]=_e>>8&255,fe[Ce++]=_e>>0&255,fe[Ce++]=_e>>24&255}}function wt(O,V,ae,fe,Ce){for(ae=V+ae;V<ae;){var _e=(Be=O[V++])>>16&240|Be>>12&15,Be=Be>>0&240|Be>>28&15;fe[Ce++]=_e,fe[Ce++]=Be}}function ar(O,V,ae,fe,Ce){for(ae=V+ae;V<ae;){var _e=(Be=O[V++])>>16&248|Be>>13&7,Be=Be>>5&224|Be>>3&31;fe[Ce++]=_e,fe[Ce++]=Be}}function qt(O,V,ae,fe,Ce){for(ae=V+ae;V<ae;){var _e=O[V++];fe[Ce++]=_e>>0&255,fe[Ce++]=_e>>8&255,fe[Ce++]=_e>>16&255}}function gr(O,V,ae,fe,Ce,_e){if(_e==0)for(ae=V+ae;V<ae;)oe(fe,((_e=O[V++])[0]>>24|_e[1]>>8&65280|_e[2]<<8&16711680|_e[3]<<24)>>>0),Ce+=32;else a(fe,Ce,O,V,ae)}function Pr(O,V){k[V][0]=k[O+"0"],k[V][1]=k[O+"1"],k[V][2]=k[O+"2"],k[V][3]=k[O+"3"],k[V][4]=k[O+"4"],k[V][5]=k[O+"5"],k[V][6]=k[O+"6"],k[V][7]=k[O+"7"],k[V][8]=k[O+"8"],k[V][9]=k[O+"9"],k[V][10]=k[O+"10"],k[V][11]=k[O+"11"],k[V][12]=k[O+"12"],k[V][13]=k[O+"13"],k[V][14]=k[O+"0"],k[V][15]=k[O+"0"]}function yr(O){return O==Mp||O==$f||O==Ou||O==PA}function Tn(){this.eb=[],this.size=this.A=this.fb=0}function Rr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ha(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Tn,this.f.kb=new Rr,this.sd=null}function Rn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Lr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function pr(O){return alert("todo:WebPSamplerProcessPlane"),O.T}function Jr(O,V){var ae=O.T,fe=V.ba.f.RGBA,Ce=fe.eb,_e=fe.fb+O.ka*fe.A,Be=pi[V.ba.S],Ie=O.y,Pe=O.O,$e=O.f,tt=O.N,mt=O.ea,ht=O.W,lt=V.cc,Pt=V.dc,yt=V.Mc,rt=V.Nc,nt=O.ka,Bt=O.ka+O.T,Rt=O.U,Ot=Rt+1>>1;for(nt==0?Be(Ie,Pe,null,null,$e,tt,mt,ht,$e,tt,mt,ht,Ce,_e,null,null,Rt):(Be(V.ec,V.fc,Ie,Pe,lt,Pt,yt,rt,$e,tt,mt,ht,Ce,_e-fe.A,Ce,_e,Rt),++ae);nt+2<Bt;nt+=2)lt=$e,Pt=tt,yt=mt,rt=ht,tt+=O.Rc,ht+=O.Rc,_e+=2*fe.A,Be(Ie,(Pe+=2*O.fa)-O.fa,Ie,Pe,lt,Pt,yt,rt,$e,tt,mt,ht,Ce,_e-fe.A,Ce,_e,Rt);return Pe+=O.fa,O.j+Bt<O.o?(a(V.ec,V.fc,Ie,Pe,Rt),a(V.cc,V.dc,$e,tt,Ot),a(V.Mc,V.Nc,mt,ht,Ot),ae--):1&Bt||Be(Ie,Pe,null,null,$e,tt,mt,ht,$e,tt,mt,ht,Ce,_e+fe.A,null,null,Rt),ae}function vs(O,V,ae){var fe=O.F,Ce=[O.J];if(fe!=null){var _e=O.U,Be=V.ba.S,Ie=Be==s0||Be==Ou;V=V.ba.f.RGBA;var Pe=[0],$e=O.ka;Pe[0]=O.T,O.Kb&&($e==0?--Pe[0]:(--$e,Ce[0]-=O.width),O.j+O.ka+O.T==O.o&&(Pe[0]=O.o-O.j-$e));var tt=V.eb;$e=V.fb+$e*V.A,O=ua(fe,Ce[0],O.width,_e,Pe,tt,$e+(Ie?0:3),V.A),t(ae==Pe),O&&yr(Be)&&Ol(tt,$e,Ie,_e,Pe,V.A)}return 0}function Za(O){var V=O.ma,ae=V.ba.S,fe=11>ae,Ce=ae==FA||ae==Lp||ae==s0||ae==Iu||ae==12||yr(ae);if(V.memory=null,V.Ib=null,V.Jb=null,V.Nd=null,!Of(V.Oa,O,Ce?11:12))return 0;if(Ce&&yr(ae)&&Ht(),O.da)alert("todo:use_scaling");else{if(fe){if(V.Ib=pr,O.Kb){if(ae=O.U+1>>1,V.memory=i(O.U+2*ae),V.memory==null)return 0;V.ec=V.memory,V.fc=0,V.cc=V.ec,V.dc=V.fc+O.U,V.Mc=V.cc,V.Nc=V.dc+ae,V.Ib=Jr,Ht()}}else alert("todo:EmitYUV");Ce&&(V.Jb=vs,fe&&ot())}if(fe&&!QE){for(O=0;256>O;++O)aT[O]=89858*(O-128)+Gs>>Qd,Qp[O]=-22014*(O-128)+Gs,py[O]=-45773*(O-128),qs[O]=113618*(O-128)+Gs>>Qd;for(O=qf;O<qx;++O)V=76283*(O-16)+Gs>>Qd,zp[O-qf]=za(V,255),gy[O-qf]=za(V+8>>4,15);QE=1}return 1}function Ln(O){var V=O.ma,ae=O.U,fe=O.T;return t(!(1&O.ka)),0>=ae||0>=fe?0:(ae=V.Ib(O,V),V.Jb!=null&&V.Jb(O,V,ae),V.Dc+=ae,1)}function Qs(O){O.ma.memory=null}function tr(O,V,ae,fe){return U(O,8)!=47?0:(V[0]=U(O,14)+1,ae[0]=U(O,14)+1,fe[0]=U(O,1),U(O,3)!=0?0:!O.h)}function va(O,V){if(4>O)return O+1;var ae=O-2>>1;return(2+(1&O)<<ae)+U(V,ae)+1}function ca(O,V){return 120<V?V-120:1<=(ae=((ae=Fu[V-1])>>4)*O+(8-(15&ae)))?ae:1;var ae}function Fa(O,V,ae){var fe=D(ae),Ce=O[V+=255&fe].g-8;return 0<Ce&&(J(ae,ae.u+8),fe=D(ae),V+=O[V].value,V+=fe&(1<<Ce)-1),J(ae,ae.u+O[V].g),O[V].value}function Xa(O,V,ae){return ae.g+=O.g,ae.value+=O.value<<V>>>0,t(8>=ae.g),O.g}function en(O,V,ae){var fe=O.xc;return t((V=fe==0?0:O.vc[O.md*(ae>>fe)+(V>>fe)])<O.Wb),O.Ya[V]}function Se(O,V,ae,fe){var Ce=O.ab,_e=O.c*V,Be=O.C;V=Be+V;var Ie=ae,Pe=fe;for(fe=O.Ta,ae=O.Ua;0<Ce--;){var $e=O.gc[Ce],tt=Be,mt=V,ht=Ie,lt=Pe,Pt=(Pe=fe,Ie=ae,$e.Ea);switch(t(tt<mt),t(mt<=$e.nc),$e.hc){case 2:Ux(ht,lt,(mt-tt)*Pt,Pe,Ie);break;case 0:var yt=tt,rt=mt,nt=Pe,Bt=Ie,Rt=(er=$e).Ea;yt==0&&(Ay(ht,lt,null,null,1,nt,Bt),qe(ht,lt+1,0,0,Rt-1,nt,Bt+1),lt+=Rt,Bt+=Rt,++yt);for(var Ot=1<<er.b,nr=Ot-1,Jt=he(Rt,er.b),vr=er.K,er=er.w+(yt>>er.b)*Jt;yt<rt;){var Sa=vr,$a=er,la=1;for(Pp(ht,lt,nt,Bt-Rt,1,nt,Bt);la<Rt;){var ra=(la&~nr)+Ot;ra>Rt&&(ra=Rt),(0,_u[Sa[$a++]>>8&15])(ht,lt+ +la,nt,Bt+la-Rt,ra-la,nt,Bt+la),la=ra}lt+=Rt,Bt+=Rt,++yt&nr||(er+=Jt)}mt!=$e.nc&&a(Pe,Ie-Pt,Pe,Ie+(mt-tt-1)*Pt,Pt);break;case 1:for(Pt=ht,rt=lt,Rt=(ht=$e.Ea)-(Bt=ht&~(nt=(lt=1<<$e.b)-1)),yt=he(ht,$e.b),Ot=$e.K,$e=$e.w+(tt>>$e.b)*yt;tt<mt;){for(nr=Ot,Jt=$e,vr=new ne,er=rt+Bt,Sa=rt+ht;rt<er;)Re(nr[Jt++],vr),Pf(vr,Pt,rt,lt,Pe,Ie),rt+=lt,Ie+=lt;rt<Sa&&(Re(nr[Jt++],vr),Pf(vr,Pt,rt,Rt,Pe,Ie),rt+=Rt,Ie+=Rt),++tt&nt||($e+=yt)}break;case 3:if(ht==Pe&&lt==Ie&&0<$e.b){for(rt=Pe,ht=Pt=Ie+(mt-tt)*Pt-(Bt=(mt-tt)*he($e.Ea,$e.b)),lt=Pe,nt=Ie,yt=[],Bt=(Rt=Bt)-1;0<=Bt;--Bt)yt[Bt]=lt[nt+Bt];for(Bt=Rt-1;0<=Bt;--Bt)rt[ht+Bt]=yt[Bt];nc($e,tt,mt,Pe,Pt,Pe,Ie)}else nc($e,tt,mt,ht,lt,Pe,Ie)}Ie=fe,Pe=ae}Pe!=ae&&a(fe,ae,Ie,Pe,_e)}function Ve(O,V){var ae=O.V,fe=O.Ba+O.c*O.C,Ce=V-O.C;if(t(V<=O.l.o),t(16>=Ce),0<Ce){var _e=O.l,Be=O.Ta,Ie=O.Ua,Pe=_e.width;if(Se(O,Ce,ae,fe),Ce=Ie=[Ie],t((ae=O.C)<(fe=V)),t(_e.v<_e.va),fe>_e.o&&(fe=_e.o),ae<_e.j){var $e=_e.j-ae;ae=_e.j,Ce[0]+=$e*Pe}if(ae>=fe?ae=0:(Ce[0]+=4*_e.v,_e.ka=ae-_e.j,_e.U=_e.va-_e.v,_e.T=fe-ae,ae=1),ae){if(Ie=Ie[0],11>(ae=O.ca).S){var tt=ae.f.RGBA,mt=(fe=ae.S,Ce=_e.U,_e=_e.T,$e=tt.eb,tt.A),ht=_e;for(tt=tt.fb+O.Ma*tt.A;0<ht--;){var lt=Be,Pt=Ie,yt=Ce,rt=$e,nt=tt;switch(fe){case Ji:bo(lt,Pt,yt,rt,nt);break;case FA:Fi(lt,Pt,yt,rt,nt);break;case Mp:Fi(lt,Pt,yt,rt,nt),Ol(rt,nt,0,yt,1,0);break;case Ld:Hc(lt,Pt,yt,rt,nt);break;case Lp:gr(lt,Pt,yt,rt,nt,1);break;case $f:gr(lt,Pt,yt,rt,nt,1),Ol(rt,nt,0,yt,1,0);break;case s0:gr(lt,Pt,yt,rt,nt,0);break;case Ou:gr(lt,Pt,yt,rt,nt,0),Ol(rt,nt,1,yt,1,0);break;case Iu:Rf(lt,Pt,yt,rt,nt);break;case PA:Rf(lt,Pt,yt,rt,nt),da(rt,nt,yt,1,0);break;case Qx:qo(lt,Pt,yt,rt,nt);break;default:t(0)}Ie+=Pe,tt+=mt}O.Ma+=_e}else alert("todo:EmitRescaledRowsYUVA");t(O.Ma<=ae.height)}}O.C=V,t(O.C<=O.i)}function Me(O){var V;if(0<O.ua)return 0;for(V=0;V<O.Wb;++V){var ae=O.Ya[V].G,fe=O.Ya[V].H;if(0<ae[1][fe[1]+0].g||0<ae[2][fe[2]+0].g||0<ae[3][fe[3]+0].g)return 0}return 1}function He(O,V,ae,fe,Ce,_e){if(O.Z!=0){var Be=O.qd,Ie=O.rd;for(t(Ud[O.Z]!=null);V<ae;++V)Ud[O.Z](Be,Ie,fe,Ce,fe,Ce,_e),Be=fe,Ie=Ce,Ce+=_e;O.qd=Be,O.rd=Ie}}function Ne(O,V){var ae=O.l.ma,fe=ae.Z==0||ae.Z==1?O.l.j:O.C;if(fe=O.C<fe?fe:O.C,t(V<=O.l.o),V>fe){var Ce=O.l.width,_e=ae.ca,Be=ae.tb+Ce*fe,Ie=O.V,Pe=O.Ba+O.c*fe,$e=O.gc;t(O.ab==1),t($e[0].hc==3),Ff($e[0],fe,V,Ie,Pe,_e,Be),He(ae,fe,V,_e,Be,Ce)}O.C=O.Ma=V}function xe(O,V,ae,fe,Ce,_e,Be){var Ie=O.$/fe,Pe=O.$%fe,$e=O.m,tt=O.s,mt=ae+O.$,ht=mt;Ce=ae+fe*Ce;var lt=ae+fe*_e,Pt=280+tt.ua,yt=O.Pb?Ie:16777216,rt=0<tt.ua?tt.Wa:null,nt=tt.wc,Bt=mt<lt?en(tt,Pe,Ie):null;t(O.C<_e),t(lt<=Ce);var Rt=!1;e:for(;;){for(;Rt||mt<lt;){var Ot=0;if(Ie>=yt){var nr=mt-ae;t((yt=O).Pb),yt.wd=yt.m,yt.xd=nr,0<yt.s.ua&&Ee(yt.s.Wa,yt.s.vb),yt=Ie+ME}if(Pe&nt||(Bt=en(tt,Pe,Ie)),t(Bt!=null),Bt.Qb&&(V[mt]=Bt.qb,Rt=!0),!Rt)if(ce($e),Bt.jc){Ot=$e,nr=V;var Jt=mt,vr=Bt.pd[D(Ot)&$s-1];t(Bt.jc),256>vr.g?(J(Ot,Ot.u+vr.g),nr[Jt]=vr.value,Ot=0):(J(Ot,Ot.u+vr.g-256),t(256<=vr.value),Ot=vr.value),Ot==0&&(Rt=!0)}else Ot=Fa(Bt.G[0],Bt.H[0],$e);if($e.h)break;if(Rt||256>Ot){if(!Rt)if(Bt.nd)V[mt]=(Bt.qb|Ot<<8)>>>0;else{if(ce($e),Rt=Fa(Bt.G[1],Bt.H[1],$e),ce($e),nr=Fa(Bt.G[2],Bt.H[2],$e),Jt=Fa(Bt.G[3],Bt.H[3],$e),$e.h)break;V[mt]=(Jt<<24|Rt<<16|Ot<<8|nr)>>>0}if(Rt=!1,++mt,++Pe>=fe&&(Pe=0,++Ie,Be!=null&&Ie<=_e&&!(Ie%16)&&Be(O,Ie),rt!=null))for(;ht<mt;)Ot=V[ht++],rt.X[(506832829*Ot&4294967295)>>>rt.Mb]=Ot}else if(280>Ot){if(Ot=va(Ot-256,$e),nr=Fa(Bt.G[4],Bt.H[4],$e),ce($e),nr=ca(fe,nr=va(nr,$e)),$e.h)break;if(mt-ae<nr||Ce-mt<Ot)break e;for(Jt=0;Jt<Ot;++Jt)V[mt+Jt]=V[mt+Jt-nr];for(mt+=Ot,Pe+=Ot;Pe>=fe;)Pe-=fe,++Ie,Be!=null&&Ie<=_e&&!(Ie%16)&&Be(O,Ie);if(t(mt<=Ce),Pe&nt&&(Bt=en(tt,Pe,Ie)),rt!=null)for(;ht<mt;)Ot=V[ht++],rt.X[(506832829*Ot&4294967295)>>>rt.Mb]=Ot}else{if(!(Ot<Pt))break e;for(Rt=Ot-280,t(rt!=null);ht<mt;)Ot=V[ht++],rt.X[(506832829*Ot&4294967295)>>>rt.Mb]=Ot;Ot=mt,t(!(Rt>>>(nr=rt).Xa)),V[Ot]=nr.X[Rt],Rt=!0}Rt||t($e.h==W($e))}if(O.Pb&&$e.h&&mt<Ce)t(O.m.h),O.a=5,O.m=O.wd,O.$=O.xd,0<O.s.ua&&Ee(O.s.vb,O.s.Wa);else{if($e.h)break e;Be!=null&&Be(O,Ie>_e?_e:Ie),O.a=0,O.$=mt-ae}return 1}return O.a=3,0}function Fe(O){t(O!=null),O.vc=null,O.yc=null,O.Ya=null;var V=O.Wa;V!=null&&(V.X=null),O.vb=null,t(O!=null)}function Ge(){var O=new TA;return O==null?null:(O.a=0,O.xb=RA,Pr("Predictor","VP8LPredictors"),Pr("Predictor","VP8LPredictors_C"),Pr("PredictorAdd","VP8LPredictorsAdd"),Pr("PredictorAdd","VP8LPredictorsAdd_C"),Ux=ze,Pf=We,bo=Ze,Fi=Qe,Rf=wt,qo=ar,Hc=qt,k.VP8LMapColor32b=Ai,k.VP8LMapColor8b=Rp,O)}function Ue(O,V,ae,fe,Ce){var _e=1,Be=[O],Ie=[V],Pe=fe.m,$e=fe.s,tt=null,mt=0;e:for(;;){if(ae)for(;_e&&U(Pe,1);){var ht=Be,lt=Ie,Pt=fe,yt=1,rt=Pt.m,nt=Pt.gc[Pt.ab],Bt=U(rt,2);if(Pt.Oc&1<<Bt)_e=0;else{switch(Pt.Oc|=1<<Bt,nt.hc=Bt,nt.Ea=ht[0],nt.nc=lt[0],nt.K=[null],++Pt.ab,t(4>=Pt.ab),Bt){case 0:case 1:nt.b=U(rt,3)+2,yt=Ue(he(nt.Ea,nt.b),he(nt.nc,nt.b),0,Pt,nt.K),nt.K=nt.K[0];break;case 3:var Rt,Ot=U(rt,8)+1,nr=16<Ot?0:4<Ot?1:2<Ot?2:3;if(ht[0]=he(nt.Ea,nr),nt.b=nr,Rt=yt=Ue(Ot,1,0,Pt,nt.K)){var Jt,vr=Ot,er=nt,Sa=1<<(8>>er.b),$a=i(Sa);if($a==null)Rt=0;else{var la=er.K[0],ra=er.w;for($a[0]=er.K[0][0],Jt=1;Jt<1*vr;++Jt)$a[Jt]=ve(la[ra+Jt],$a[Jt-1]);for(;Jt<4*Sa;++Jt)$a[Jt]=0;er.K[0]=null,er.K[0]=$a,Rt=1}}yt=Rt;break;case 2:break;default:t(0)}_e=yt}}if(Be=Be[0],Ie=Ie[0],_e&&U(Pe,1)&&!(_e=1<=(mt=U(Pe,4))&&11>=mt)){fe.a=3;break e}var rn;if(rn=_e)t:{var Va,qr,An,Sr=fe,Mr=Be,ka=Ie,_a=mt,gi=ae,Ks=Sr.m,ds=Sr.s,us=[null],Cs=1,lc=0,Ga=o0[_a];r:for(;;){if(gi&&U(Ks,1)){var js=U(Ks,3)+2,$c=he(Mr,js),Kf=he(ka,js),d0=$c*Kf;if(!Ue($c,Kf,0,Sr,us))break r;for(us=us[0],ds.xc=js,Va=0;Va<d0;++Va){var Wf=us[Va]>>8&65535;us[Va]=Wf,Wf>=Cs&&(Cs=Wf+1)}}if(Ks.h)break r;for(qr=0;5>qr;++qr){var Mn=Dl[qr];!qr&&0<_a&&(Mn+=1<<_a),lc<Mn&&(lc=Mn)}var $p=o(Cs*Ga,S),Kx=Cs,wo=o(Kx,H);if(wo==null)var Gn=null;else t(65536>=Kx),Gn=wo;var u0=i(lc);if(Gn==null||u0==null||$p==null){Sr.a=1;break r}var Xf=$p;for(Va=An=0;Va<Cs;++Va){var Wo=Gn[Va],Yf=Wo.G,Xo=Wo.H,Vp=0,MA=1,Wx=0;for(qr=0;5>qr;++qr){Mn=Dl[qr],Yf[qr]=Xf,Xo[qr]=An,!qr&&0<_a&&(Mn+=1<<_a);n:{var Gp,Xx=Mn,qp=Sr,UA=u0,VE=Xf,GE=An,Kp=0,Mu=qp.m,sT=U(Mu,1);if(n(UA,0,0,Xx),sT){var qE=U(Mu,1)+1,KE=U(Mu,1),xy=U(Mu,KE==0?1:8);UA[xy]=1,qE==2&&(UA[xy=U(Mu,8)]=1);var HA=1}else{var vy=i(19),by=U(Mu,4)+4;if(19<by){qp.a=3;var Wp=0;break n}for(Gp=0;Gp<by;++Gp)vy[Du[Gp]]=U(Mu,3);var Yx=void 0,QA=void 0,WE=qp,XE=vy,Uu=Xx,Xp=UA,Jx=0,Vc=WE.m,zA=8,yy=o(128,S);a:for(;F(yy,0,7,XE,19);){if(U(Vc,1)){var YE=2+2*U(Vc,3);if((Yx=2+U(Vc,YE))>Uu)break a}else Yx=Uu;for(QA=0;QA<Uu&&Yx--;){ce(Vc);var wy=yy[0+(127&D(Vc))];J(Vc,Vc.u+wy.g);var f0=wy.value;if(16>f0)Xp[QA++]=f0,f0!=0&&(zA=f0);else{var JE=f0==16,Ny=f0-16,Ey=oc[Ny],Cy=U(Vc,zx[Ny])+Ey;if(QA+Cy>Uu)break a;for(var ZE=JE?zA:0;0<Cy--;)Xp[QA++]=ZE}}Jx=1;break a}Jx||(WE.a=3),HA=Jx}(HA=HA&&!Mu.h)&&(Kp=F(VE,GE,8,UA,Xx)),HA&&Kp!=0?Wp=Kp:(qp.a=3,Wp=0)}if(Wp==0)break r;if(MA&&i0[qr]==1&&(MA=Xf[An].g==0),Vp+=Xf[An].g,An+=Wp,3>=qr){var h0,Zx=u0[0];for(h0=1;h0<Mn;++h0)u0[h0]>Zx&&(Zx=u0[h0]);Wx+=Zx}}if(Wo.nd=MA,Wo.Qb=0,MA&&(Wo.qb=(Yf[3][Xo[3]+0].value<<24|Yf[1][Xo[1]+0].value<<16|Yf[2][Xo[2]+0].value)>>>0,Vp==0&&256>Yf[0][Xo[0]+0].value&&(Wo.Qb=1,Wo.qb+=Yf[0][Xo[0]+0].value<<8)),Wo.jc=!Wo.Qb&&6>Wx,Wo.jc){var Yp,Hu=Wo;for(Yp=0;Yp<$s;++Yp){var zd=Yp,Qu=Hu.pd[zd],Jp=Hu.G[0][Hu.H[0]+zd];256<=Jp.value?(Qu.g=Jp.g+256,Qu.value=Jp.value):(Qu.g=0,Qu.value=0,zd>>=Xa(Jp,8,Qu),zd>>=Xa(Hu.G[1][Hu.H[1]+zd],16,Qu),zd>>=Xa(Hu.G[2][Hu.H[2]+zd],0,Qu),Xa(Hu.G[3][Hu.H[3]+zd],24,Qu))}}}ds.vc=us,ds.Wb=Cs,ds.Ya=Gn,ds.yc=$p,rn=1;break t}rn=0}if(!(_e=rn)){fe.a=3;break e}if(0<mt){if($e.ua=1<<mt,!Te($e.Wa,mt)){fe.a=1,_e=0;break e}}else $e.ua=0;var Zp=fe,jy=Be,eC=Ie,ky=Zp.s,Sy=ky.xc;if(Zp.c=jy,Zp.i=eC,ky.md=he(jy,Sy),ky.wc=Sy==0?-1:(1<<Sy)-1,ae){fe.xb=HE;break e}if((tt=i(Be*Ie))==null){fe.a=1,_e=0;break e}_e=(_e=xe(fe,tt,0,Be,Ie,Ie,null))&&!Pe.h;break e}return _e?(Ce!=null?Ce[0]=tt:(t(tt==null),t(ae)),fe.$=0,ae||Fe($e)):Fe($e),_e}function Ye(O,V){var ae=O.c*O.i,fe=ae+V+16*V;return t(O.c<=V),O.V=i(fe),O.V==null?(O.Ta=null,O.Ua=0,O.a=1,0):(O.Ta=O.V,O.Ua=O.Ba+ae+V,1)}function et(O,V){var ae=O.C,fe=V-ae,Ce=O.V,_e=O.Ba+O.c*ae;for(t(V<=O.l.o);0<fe;){var Be=16<fe?16:fe,Ie=O.l.ma,Pe=O.l.width,$e=Pe*Be,tt=Ie.ca,mt=Ie.tb+Pe*ae,ht=O.Ta,lt=O.Ua;Se(O,Be,Ce,_e),En(ht,lt,tt,mt,$e),He(Ie,ae,ae+Be,tt,mt,Pe),fe-=Be,Ce+=Be*O.c,ae+=Be}t(ae==V),O.C=O.Ma=V}function Nt(){this.ub=this.yd=this.td=this.Rb=0}function Et(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function zt(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Dt(){this.Yb=function(){var O=[];return function V(ae,fe,Ce){for(var _e=Ce[fe],Be=0;Be<_e&&(ae.push(Ce.length>fe+1?[]:0),!(Ce.length<fe+1));Be++)V(ae[Be],fe+1,Ce)}(O,0,[3,11]),O}()}function Vt(){this.jb=i(3),this.Wc=l([4,8],Dt),this.Xc=l([4,17],Dt)}function kr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function ea(){this.ld=this.La=this.dd=this.tc=0}function ta(){this.Na=this.la=0}function oa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function bs(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Uo(){this.uc=this.M=this.Nb=0,this.wa=Array(new ea),this.Y=0,this.ya=Array(new bs),this.aa=0,this.l=new zs}function ys(){this.y=i(16),this.f=i(8),this.ea=i(8)}function fi(){this.cb=this.a=0,this.sc="",this.m=new Y,this.Od=new Nt,this.Kc=new Et,this.ed=new kr,this.Qa=new zt,this.Ic=this.$c=this.Aa=0,this.D=new Uo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Y),this.ia=0,this.pb=o(4,oa),this.Pa=new Vt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ys),this.Hd=0,this.rb=Array(new ta),this.sb=0,this.wa=Array(new ea),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new bs),this.L=this.aa=0,this.gd=l([4,2],ea),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function zs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Bi(){var O=new fi;return O!=null&&(O.a=0,O.sc="OK",O.cb=0,O.Xb=0,Vs||(Vs=jA)),O}function Nn(O,V,ae){return O.a==0&&(O.a=V,O.sc=ae,O.cb=0),0}function hi(O,V,ae){return 3<=ae&&O[V+0]==157&&O[V+1]==1&&O[V+2]==42}function jf(O,V){if(O==null)return 0;if(O.a=0,O.sc="OK",V==null)return Nn(O,2,"null VP8Io passed to VP8GetHeaders()");var ae=V.data,fe=V.w,Ce=V.ha;if(4>Ce)return Nn(O,7,"Truncated header.");var _e=ae[fe+0]|ae[fe+1]<<8|ae[fe+2]<<16,Be=O.Od;if(Be.Rb=!(1&_e),Be.td=_e>>1&7,Be.yd=_e>>4&1,Be.ub=_e>>5,3<Be.td)return Nn(O,3,"Incorrect keyframe parameters.");if(!Be.yd)return Nn(O,4,"Frame not displayable.");fe+=3,Ce-=3;var Ie=O.Kc;if(Be.Rb){if(7>Ce)return Nn(O,7,"cannot parse picture header");if(!hi(ae,fe,Ce))return Nn(O,3,"Bad code word");Ie.c=16383&(ae[fe+4]<<8|ae[fe+3]),Ie.Td=ae[fe+4]>>6,Ie.i=16383&(ae[fe+6]<<8|ae[fe+5]),Ie.Ud=ae[fe+6]>>6,fe+=7,Ce-=7,O.za=Ie.c+15>>4,O.Ub=Ie.i+15>>4,V.width=Ie.c,V.height=Ie.i,V.Da=0,V.j=0,V.v=0,V.va=V.width,V.o=V.height,V.da=0,V.ib=V.width,V.hb=V.height,V.U=V.width,V.T=V.height,n((_e=O.Pa).jb,0,255,_e.jb.length),t((_e=O.Qa)!=null),_e.Cb=0,_e.Bb=0,_e.Fb=1,n(_e.Zb,0,0,_e.Zb.length),n(_e.Lb,0,0,_e.Lb)}if(Be.ub>Ce)return Nn(O,7,"bad partition length");K(_e=O.m,ae,fe,Be.ub),fe+=Be.ub,Ce-=Be.ub,Be.Rb&&(Ie.Ld=re(_e),Ie.Kd=re(_e)),Ie=O.Qa;var Pe,$e=O.Pa;if(t(_e!=null),t(Ie!=null),Ie.Cb=re(_e),Ie.Cb){if(Ie.Bb=re(_e),re(_e)){for(Ie.Fb=re(_e),Pe=0;4>Pe;++Pe)Ie.Zb[Pe]=re(_e)?G(_e,7):0;for(Pe=0;4>Pe;++Pe)Ie.Lb[Pe]=re(_e)?G(_e,6):0}if(Ie.Bb)for(Pe=0;3>Pe;++Pe)$e.jb[Pe]=re(_e)?Q(_e,8):255}else Ie.Bb=0;if(_e.Ka)return Nn(O,3,"cannot parse segment header");if((Ie=O.ed).zd=re(_e),Ie.Tb=Q(_e,6),Ie.wb=Q(_e,3),Ie.Pc=re(_e),Ie.Pc&&re(_e)){for($e=0;4>$e;++$e)re(_e)&&(Ie.vd[$e]=G(_e,6));for($e=0;4>$e;++$e)re(_e)&&(Ie.od[$e]=G(_e,6))}if(O.L=Ie.Tb==0?0:Ie.zd?1:2,_e.Ka)return Nn(O,3,"cannot parse filter header");var tt=Ce;if(Ce=Pe=fe,fe=Pe+tt,Ie=tt,O.Xb=(1<<Q(O.m,2))-1,tt<3*($e=O.Xb))ae=7;else{for(Pe+=3*$e,Ie-=3*$e,tt=0;tt<$e;++tt){var mt=ae[Ce+0]|ae[Ce+1]<<8|ae[Ce+2]<<16;mt>Ie&&(mt=Ie),K(O.Jc[+tt],ae,Pe,mt),Pe+=mt,Ie-=mt,Ce+=3}K(O.Jc[+$e],ae,Pe,Ie),ae=Pe<fe?0:5}if(ae!=0)return Nn(O,ae,"cannot parse partitions");for(ae=Q(Pe=O.m,7),Ce=re(Pe)?G(Pe,4):0,fe=re(Pe)?G(Pe,4):0,Ie=re(Pe)?G(Pe,4):0,$e=re(Pe)?G(Pe,4):0,Pe=re(Pe)?G(Pe,4):0,tt=O.Qa,mt=0;4>mt;++mt){if(tt.Cb){var ht=tt.Zb[mt];tt.Fb||(ht+=ae)}else{if(0<mt){O.pb[mt]=O.pb[0];continue}ht=ae}var lt=O.pb[mt];lt.Sc[0]=Up[za(ht+Ce,127)],lt.Sc[1]=Hp[za(ht+0,127)],lt.Eb[0]=2*Up[za(ht+fe,127)],lt.Eb[1]=101581*Hp[za(ht+Ie,127)]>>16,8>lt.Eb[1]&&(lt.Eb[1]=8),lt.Qc[0]=Up[za(ht+$e,117)],lt.Qc[1]=Hp[za(ht+Pe,127)],lt.lc=ht+Pe}if(!Be.Rb)return Nn(O,4,"Not a key frame.");for(re(_e),Be=O.Pa,ae=0;4>ae;++ae){for(Ce=0;8>Ce;++Ce)for(fe=0;3>fe;++fe)for(Ie=0;11>Ie;++Ie)$e=de(_e,l0[ae][Ce][fe][Ie])?Q(_e,8):Md[ae][Ce][fe][Ie],Be.Wc[ae][Ce].Yb[fe][Ie]=$e;for(Ce=0;17>Ce;++Ce)Be.Xc[ae][Ce]=Be.Wc[ae][UE[Ce]]}return O.kc=re(_e),O.kc&&(O.Bd=Q(_e,8)),O.cb=1}function jA(O,V,ae,fe,Ce,_e,Be){var Ie=V[Ce].Yb[ae];for(ae=0;16>Ce;++Ce){if(!de(O,Ie[ae+0]))return Ce;for(;!de(O,Ie[ae+1]);)if(Ie=V[++Ce].Yb[0],ae=0,Ce==16)return 16;var Pe=V[Ce+1].Yb;if(de(O,Ie[ae+2])){var $e=O,tt=0;if(de($e,(ht=Ie)[(mt=ae)+3]))if(de($e,ht[mt+6])){for(Ie=0,mt=2*(tt=de($e,ht[mt+8]))+(ht=de($e,ht[mt+9+tt])),tt=0,ht=ts[mt];ht[Ie];++Ie)tt+=tt+de($e,ht[Ie]);tt+=3+(8<<mt)}else de($e,ht[mt+7])?(tt=7+2*de($e,165),tt+=de($e,145)):tt=5+de($e,159);else tt=de($e,ht[mt+4])?3+de($e,ht[mt+5]):2;Ie=Pe[2]}else tt=1,Ie=Pe[1];Pe=Be+Pa[Ce],0>($e=O).b&&ie($e);var mt,ht=$e.b,lt=(mt=$e.Ca>>1)-($e.I>>ht)>>31;--$e.b,$e.Ca+=lt,$e.Ca|=1,$e.I-=(mt+1&lt)<<ht,_e[Pe]=((tt^lt)-lt)*fe[(0<Ce)+0]}return 16}function Ed(O){var V=O.rb[O.sb-1];V.la=0,V.Na=0,n(O.zc,0,0,O.zc.length),O.ja=0}function Gh(O,V){if(O==null)return 0;if(V==null)return Nn(O,2,"NULL VP8Io parameter in VP8Decode().");if(!O.cb&&!jf(O,V))return 0;if(t(O.cb),V.ac==null||V.ac(V)){V.ob&&(O.L=0);var ae=Lu[O.L];if(O.L==2?(O.yb=0,O.zb=0):(O.yb=V.v-ae>>4,O.zb=V.j-ae>>4,0>O.yb&&(O.yb=0),0>O.zb&&(O.zb=0)),O.Va=V.o+15+ae>>4,O.Hb=V.va+15+ae>>4,O.Hb>O.za&&(O.Hb=O.za),O.Va>O.Ub&&(O.Va=O.Ub),0<O.L){var fe=O.ed;for(ae=0;4>ae;++ae){var Ce;if(O.Qa.Cb){var _e=O.Qa.Lb[ae];O.Qa.Fb||(_e+=fe.Tb)}else _e=fe.Tb;for(Ce=0;1>=Ce;++Ce){var Be=O.gd[ae][Ce],Ie=_e;if(fe.Pc&&(Ie+=fe.vd[0],Ce&&(Ie+=fe.od[0])),0<(Ie=0>Ie?0:63<Ie?63:Ie)){var Pe=Ie;0<fe.wb&&(Pe=4<fe.wb?Pe>>2:Pe>>1)>9-fe.wb&&(Pe=9-fe.wb),1>Pe&&(Pe=1),Be.dd=Pe,Be.tc=2*Ie+Pe,Be.ld=40<=Ie?2:15<=Ie?1:0}else Be.tc=0;Be.La=Ce}}}ae=0}else Nn(O,6,"Frame setup failed"),ae=O.a;if(ae=ae==0){if(ae){O.$c=0,0<O.Aa||(O.Ic=zE);e:{ae=O.Ic,fe=4*(Pe=O.za);var $e=32*Pe,tt=Pe+1,mt=0<O.L?Pe*(0<O.Aa?2:1):0,ht=(O.Aa==2?2:1)*Pe;if((Be=fe+832+(Ce=3*(16*ae+Lu[O.L])/2*$e)+(_e=O.Fa!=null&&0<O.Fa.length?O.Kc.c*O.Kc.i:0))!=Be)ae=0;else{if(Be>O.Vb){if(O.Vb=0,O.Ec=i(Be),O.Fc=0,O.Ec==null){ae=Nn(O,1,"no memory during frame initialization.");break e}O.Vb=Be}Be=O.Ec,Ie=O.Fc,O.Ac=Be,O.Bc=Ie,Ie+=fe,O.Gd=o($e,ys),O.Hd=0,O.rb=o(tt+1,ta),O.sb=1,O.wa=mt?o(mt,ea):null,O.Y=0,O.D.Nb=0,O.D.wa=O.wa,O.D.Y=O.Y,0<O.Aa&&(O.D.Y+=Pe),t(!0),O.oc=Be,O.pc=Ie,Ie+=832,O.ya=o(ht,bs),O.aa=0,O.D.ya=O.ya,O.D.aa=O.aa,O.Aa==2&&(O.D.aa+=Pe),O.R=16*Pe,O.B=8*Pe,Pe=($e=Lu[O.L])*O.R,$e=$e/2*O.B,O.sa=Be,O.ta=Ie+Pe,O.qa=O.sa,O.ra=O.ta+16*ae*O.R+$e,O.Ha=O.qa,O.Ia=O.ra+8*ae*O.B+$e,O.$c=0,Ie+=Ce,O.mb=_e?Be:null,O.nb=_e?Ie:null,t(Ie+_e<=O.Fc+O.Vb),Ed(O),n(O.Ac,O.Bc,0,fe),ae=1}}if(ae){if(V.ka=0,V.y=O.sa,V.O=O.ta,V.f=O.qa,V.N=O.ra,V.ea=O.Ha,V.Vd=O.Ia,V.fa=O.R,V.Rc=O.B,V.F=null,V.J=0,!Bu){for(ae=-255;255>=ae;++ae)cs[255+ae]=0>ae?-ae:ae;for(ae=-1020;1020>=ae;++ae)sc[1020+ae]=-128>ae?-128:127<ae?127:ae;for(ae=-112;112>=ae;++ae)Qf[112+ae]=-16>ae?-16:15<ae?15:ae;for(ae=-255;510>=ae;++ae)zf[255+ae]=0>ae?0:255<ae?255:ae;Bu=1}Pd=Ho,Qc=jd,zc=Xl,Es=Qa,Ko=kd,Zn=Cd,t0=Bd,Rd=Mc,OA=Tf,Lf=Yh,Mf=_f,Uf=Eu,r0=Cu,DA=Id,Hf=Il,Tu=Xi,a0=Ns,es=_A,yo[0]=Ki,yo[1]=kA,yo[2]=Zl,yo[3]=SA,yo[4]=Qo,yo[5]=ec,yo[6]=vo,yo[7]=zo,yo[8]=Lc,yo[9]=Sd,Pu[0]=Yl,Pu[1]=Kh,Pu[2]=Fc,Pu[3]=Sf,Pu[4]=hn,Pu[5]=Rc,Pu[6]=Jl,Fl[0]=tc,Fl[1]=qh,Fl[2]=Wh,Fl[3]=$o,Fl[4]=Aa,Fl[5]=ws,Fl[6]=_d,ae=1}else ae=0}ae&&(ae=function(lt,Pt){for(lt.M=0;lt.M<lt.Va;++lt.M){var yt,rt=lt.Jc[lt.M&lt.Xb],nt=lt.m,Bt=lt;for(yt=0;yt<Bt.za;++yt){var Rt=nt,Ot=Bt,nr=Ot.Ac,Jt=Ot.Bc+4*yt,vr=Ot.zc,er=Ot.ya[Ot.aa+yt];if(Ot.Qa.Bb?er.$b=de(Rt,Ot.Pa.jb[0])?2+de(Rt,Ot.Pa.jb[2]):de(Rt,Ot.Pa.jb[1]):er.$b=0,Ot.kc&&(er.Ad=de(Rt,Ot.Bd)),er.Za=!de(Rt,145)+0,er.Za){var Sa=er.Ob,$a=0;for(Ot=0;4>Ot;++Ot){var la,ra=vr[0+Ot];for(la=0;4>la;++la){ra=my[nr[Jt+la]][ra];for(var rn=Vf[de(Rt,ra[0])];0<rn;)rn=Vf[2*rn+de(Rt,ra[rn])];ra=-rn,nr[Jt+la]=ra}a(Sa,$a,nr,Jt,4),$a+=4,vr[0+Ot]=ra}}else ra=de(Rt,156)?de(Rt,128)?1:3:de(Rt,163)?2:0,er.Ob[0]=ra,n(nr,Jt,ra,4),n(vr,0,ra,4);er.Dd=de(Rt,142)?de(Rt,114)?de(Rt,183)?1:3:2:0}if(Bt.m.Ka)return Nn(lt,7,"Premature end-of-partition0 encountered.");for(;lt.ja<lt.za;++lt.ja){if(Bt=rt,Rt=(nt=lt).rb[nt.sb-1],nr=nt.rb[nt.sb+nt.ja],yt=nt.ya[nt.aa+nt.ja],Jt=nt.kc?yt.Ad:0)Rt.la=nr.la=0,yt.Za||(Rt.Na=nr.Na=0),yt.Hc=0,yt.Gc=0,yt.ia=0;else{var Va,qr;if(Rt=nr,nr=Bt,Jt=nt.Pa.Xc,vr=nt.ya[nt.aa+nt.ja],er=nt.pb[vr.$b],Ot=vr.ad,Sa=0,$a=nt.rb[nt.sb-1],ra=la=0,n(Ot,Sa,0,384),vr.Za)var An=0,Sr=Jt[3];else{rn=i(16);var Mr=Rt.Na+$a.Na;if(Mr=Vs(nr,Jt[1],Mr,er.Eb,0,rn,0),Rt.Na=$a.Na=(0<Mr)+0,1<Mr)Pd(rn,0,Ot,Sa);else{var ka=rn[0]+3>>3;for(rn=0;256>rn;rn+=16)Ot[Sa+rn]=ka}An=1,Sr=Jt[0]}var _a=15&Rt.la,gi=15&$a.la;for(rn=0;4>rn;++rn){var Ks=1&gi;for(ka=qr=0;4>ka;++ka)_a=_a>>1|(Ks=(Mr=Vs(nr,Sr,Mr=Ks+(1&_a),er.Sc,An,Ot,Sa))>An)<<7,qr=qr<<2|(3<Mr?3:1<Mr?2:Ot[Sa+0]!=0),Sa+=16;_a>>=4,gi=gi>>1|Ks<<7,la=(la<<8|qr)>>>0}for(Sr=_a,An=gi>>4,Va=0;4>Va;Va+=2){for(qr=0,_a=Rt.la>>4+Va,gi=$a.la>>4+Va,rn=0;2>rn;++rn){for(Ks=1&gi,ka=0;2>ka;++ka)Mr=Ks+(1&_a),_a=_a>>1|(Ks=0<(Mr=Vs(nr,Jt[2],Mr,er.Qc,0,Ot,Sa)))<<3,qr=qr<<2|(3<Mr?3:1<Mr?2:Ot[Sa+0]!=0),Sa+=16;_a>>=2,gi=gi>>1|Ks<<5}ra|=qr<<4*Va,Sr|=_a<<4<<Va,An|=(240&gi)<<Va}Rt.la=Sr,$a.la=An,vr.Hc=la,vr.Gc=ra,vr.ia=43690&ra?0:er.ia,Jt=!(la|ra)}if(0<nt.L&&(nt.wa[nt.Y+nt.ja]=nt.gd[yt.$b][yt.Za],nt.wa[nt.Y+nt.ja].La|=!Jt),Bt.Ka)return Nn(lt,7,"Premature end-of-file encountered.")}if(Ed(lt),nt=Pt,Bt=1,yt=(rt=lt).D,Rt=0<rt.L&&rt.M>=rt.zb&&rt.M<=rt.Va,rt.Aa==0)e:{if(yt.M=rt.M,yt.uc=Rt,Vo(rt,yt),Bt=1,yt=(qr=rt.D).Nb,Rt=(ra=Lu[rt.L])*rt.R,nr=ra/2*rt.B,rn=16*yt*rt.R,ka=8*yt*rt.B,Jt=rt.sa,vr=rt.ta-Rt+rn,er=rt.qa,Ot=rt.ra-nr+ka,Sa=rt.Ha,$a=rt.Ia-nr+ka,gi=(_a=qr.M)==0,la=_a>=rt.Va-1,rt.Aa==2&&Vo(rt,qr),qr.uc)for(Ks=(Mr=rt).D.M,t(Mr.D.uc),qr=Mr.yb;qr<Mr.Hb;++qr){An=qr,Sr=Ks;var ds=(us=(Mn=Mr).D).Nb;Va=Mn.R;var us=us.wa[us.Y+An],Cs=Mn.sa,lc=Mn.ta+16*ds*Va+16*An,Ga=us.dd,js=us.tc;if(js!=0)if(t(3<=js),Mn.L==1)0<An&&Tu(Cs,lc,Va,js+4),us.La&&es(Cs,lc,Va,js),0<Sr&&Hf(Cs,lc,Va,js+4),us.La&&a0(Cs,lc,Va,js);else{var $c=Mn.B,Kf=Mn.qa,d0=Mn.ra+8*ds*$c+8*An,Wf=Mn.Ha,Mn=Mn.Ia+8*ds*$c+8*An;ds=us.ld,0<An&&(Rd(Cs,lc,Va,js+4,Ga,ds),Lf(Kf,d0,Wf,Mn,$c,js+4,Ga,ds)),us.La&&(Uf(Cs,lc,Va,js,Ga,ds),DA(Kf,d0,Wf,Mn,$c,js,Ga,ds)),0<Sr&&(t0(Cs,lc,Va,js+4,Ga,ds),OA(Kf,d0,Wf,Mn,$c,js+4,Ga,ds)),us.La&&(Mf(Cs,lc,Va,js,Ga,ds),r0(Kf,d0,Wf,Mn,$c,js,Ga,ds))}}if(rt.ia&&alert("todo:DitherRow"),nt.put!=null){if(qr=16*_a,_a=16*(_a+1),gi?(nt.y=rt.sa,nt.O=rt.ta+rn,nt.f=rt.qa,nt.N=rt.ra+ka,nt.ea=rt.Ha,nt.W=rt.Ia+ka):(qr-=ra,nt.y=Jt,nt.O=vr,nt.f=er,nt.N=Ot,nt.ea=Sa,nt.W=$a),la||(_a-=ra),_a>nt.o&&(_a=nt.o),nt.F=null,nt.J=null,rt.Fa!=null&&0<rt.Fa.length&&qr<_a&&(nt.J=If(rt,nt,qr,_a-qr),nt.F=rt.mb,nt.F==null&&nt.F.length==0)){Bt=Nn(rt,3,"Could not decode alpha data.");break e}qr<nt.j&&(ra=nt.j-qr,qr=nt.j,t(!(1&ra)),nt.O+=rt.R*ra,nt.N+=rt.B*(ra>>1),nt.W+=rt.B*(ra>>1),nt.F!=null&&(nt.J+=nt.width*ra)),qr<_a&&(nt.O+=nt.v,nt.N+=nt.v>>1,nt.W+=nt.v>>1,nt.F!=null&&(nt.J+=nt.v),nt.ka=qr-nt.j,nt.U=nt.va-nt.v,nt.T=_a-qr,Bt=nt.put(nt))}yt+1!=rt.Ic||la||(a(rt.sa,rt.ta-Rt,Jt,vr+16*rt.R,Rt),a(rt.qa,rt.ra-nr,er,Ot+8*rt.B,nr),a(rt.Ha,rt.Ia-nr,Sa,$a+8*rt.B,nr))}if(!Bt)return Nn(lt,6,"Output aborted.")}return 1}(O,V)),V.bc!=null&&V.bc(V),ae&=1}return ae?(O.cb=0,ae):0}function Ii(O,V,ae,fe,Ce){Ce=O[V+ae+32*fe]+(Ce>>3),O[V+ae+32*fe]=-256&Ce?0>Ce?0:255:Ce}function kf(O,V,ae,fe,Ce,_e){Ii(O,V,0,ae,fe+Ce),Ii(O,V,1,ae,fe+_e),Ii(O,V,2,ae,fe-_e),Ii(O,V,3,ae,fe-Ce)}function ja(O){return(20091*O>>16)+O}function Oi(O,V,ae,fe){var Ce,_e=0,Be=i(16);for(Ce=0;4>Ce;++Ce){var Ie=O[V+0]+O[V+8],Pe=O[V+0]-O[V+8],$e=(35468*O[V+4]>>16)-ja(O[V+12]),tt=ja(O[V+4])+(35468*O[V+12]>>16);Be[_e+0]=Ie+tt,Be[_e+1]=Pe+$e,Be[_e+2]=Pe-$e,Be[_e+3]=Ie-tt,_e+=4,V++}for(Ce=_e=0;4>Ce;++Ce)Ie=(O=Be[_e+0]+4)+Be[_e+8],Pe=O-Be[_e+8],$e=(35468*Be[_e+4]>>16)-ja(Be[_e+12]),Ii(ae,fe,0,0,Ie+(tt=ja(Be[_e+4])+(35468*Be[_e+12]>>16))),Ii(ae,fe,1,0,Pe+$e),Ii(ae,fe,2,0,Pe-$e),Ii(ae,fe,3,0,Ie-tt),_e++,fe+=32}function Cd(O,V,ae,fe){var Ce=O[V+0]+4,_e=35468*O[V+4]>>16,Be=ja(O[V+4]),Ie=35468*O[V+1]>>16;kf(ae,fe,0,Ce+Be,O=ja(O[V+1]),Ie),kf(ae,fe,1,Ce+_e,O,Ie),kf(ae,fe,2,Ce-_e,O,Ie),kf(ae,fe,3,Ce-Be,O,Ie)}function jd(O,V,ae,fe,Ce){Oi(O,V,ae,fe),Ce&&Oi(O,V+16,ae,fe+4)}function Xl(O,V,ae,fe){Qc(O,V+0,ae,fe,1),Qc(O,V+32,ae,fe+128,1)}function Qa(O,V,ae,fe){var Ce;for(O=O[V+0]+4,Ce=0;4>Ce;++Ce)for(V=0;4>V;++V)Ii(ae,fe,V,Ce,O)}function kd(O,V,ae,fe){O[V+0]&&Es(O,V+0,ae,fe),O[V+16]&&Es(O,V+16,ae,fe+4),O[V+32]&&Es(O,V+32,ae,fe+128),O[V+48]&&Es(O,V+48,ae,fe+128+4)}function Ho(O,V,ae,fe){var Ce,_e=i(16);for(Ce=0;4>Ce;++Ce){var Be=O[V+0+Ce]+O[V+12+Ce],Ie=O[V+4+Ce]+O[V+8+Ce],Pe=O[V+4+Ce]-O[V+8+Ce],$e=O[V+0+Ce]-O[V+12+Ce];_e[0+Ce]=Be+Ie,_e[8+Ce]=Be-Ie,_e[4+Ce]=$e+Pe,_e[12+Ce]=$e-Pe}for(Ce=0;4>Ce;++Ce)Be=(O=_e[0+4*Ce]+3)+_e[3+4*Ce],Ie=_e[1+4*Ce]+_e[2+4*Ce],Pe=_e[1+4*Ce]-_e[2+4*Ce],$e=O-_e[3+4*Ce],ae[fe+0]=Be+Ie>>3,ae[fe+16]=$e+Pe>>3,ae[fe+32]=Be-Ie>>3,ae[fe+48]=$e-Pe>>3,fe+=64}function Dc(O,V,ae){var fe,Ce=V-32,_e=mi,Be=255-O[Ce-1];for(fe=0;fe<ae;++fe){var Ie,Pe=_e,$e=Be+O[V-1];for(Ie=0;Ie<ae;++Ie)O[V+Ie]=Pe[$e+O[Ce+Ie]];V+=32}}function kA(O,V){Dc(O,V,4)}function qh(O,V){Dc(O,V,8)}function Kh(O,V){Dc(O,V,16)}function Fc(O,V){var ae;for(ae=0;16>ae;++ae)a(O,V+32*ae,O,V-32,16)}function Sf(O,V){var ae;for(ae=16;0<ae;--ae)n(O,V,O[V-1],16),V+=32}function Pc(O,V,ae){var fe;for(fe=0;16>fe;++fe)n(V,ae+32*fe,O,16)}function Yl(O,V){var ae,fe=16;for(ae=0;16>ae;++ae)fe+=O[V-1+32*ae]+O[V+ae-32];Pc(fe>>5,O,V)}function hn(O,V){var ae,fe=8;for(ae=0;16>ae;++ae)fe+=O[V-1+32*ae];Pc(fe>>4,O,V)}function Rc(O,V){var ae,fe=8;for(ae=0;16>ae;++ae)fe+=O[V+ae-32];Pc(fe>>4,O,V)}function Jl(O,V){Pc(128,O,V)}function Tr(O,V,ae){return O+2*V+ae+2>>2}function Zl(O,V){var ae,fe=V-32;for(fe=new Uint8Array([Tr(O[fe-1],O[fe+0],O[fe+1]),Tr(O[fe+0],O[fe+1],O[fe+2]),Tr(O[fe+1],O[fe+2],O[fe+3]),Tr(O[fe+2],O[fe+3],O[fe+4])]),ae=0;4>ae;++ae)a(O,V+32*ae,fe,0,fe.length)}function SA(O,V){var ae=O[V-1],fe=O[V-1+32],Ce=O[V-1+64],_e=O[V-1+96];oe(O,V+0,16843009*Tr(O[V-1-32],ae,fe)),oe(O,V+32,16843009*Tr(ae,fe,Ce)),oe(O,V+64,16843009*Tr(fe,Ce,_e)),oe(O,V+96,16843009*Tr(Ce,_e,_e))}function Ki(O,V){var ae,fe=4;for(ae=0;4>ae;++ae)fe+=O[V+ae-32]+O[V-1+32*ae];for(fe>>=3,ae=0;4>ae;++ae)n(O,V+32*ae,fe,4)}function Qo(O,V){var ae=O[V-1+0],fe=O[V-1+32],Ce=O[V-1+64],_e=O[V-1-32],Be=O[V+0-32],Ie=O[V+1-32],Pe=O[V+2-32],$e=O[V+3-32];O[V+0+96]=Tr(fe,Ce,O[V-1+96]),O[V+1+96]=O[V+0+64]=Tr(ae,fe,Ce),O[V+2+96]=O[V+1+64]=O[V+0+32]=Tr(_e,ae,fe),O[V+3+96]=O[V+2+64]=O[V+1+32]=O[V+0+0]=Tr(Be,_e,ae),O[V+3+64]=O[V+2+32]=O[V+1+0]=Tr(Ie,Be,_e),O[V+3+32]=O[V+2+0]=Tr(Pe,Ie,Be),O[V+3+0]=Tr($e,Pe,Ie)}function vo(O,V){var ae=O[V+1-32],fe=O[V+2-32],Ce=O[V+3-32],_e=O[V+4-32],Be=O[V+5-32],Ie=O[V+6-32],Pe=O[V+7-32];O[V+0+0]=Tr(O[V+0-32],ae,fe),O[V+1+0]=O[V+0+32]=Tr(ae,fe,Ce),O[V+2+0]=O[V+1+32]=O[V+0+64]=Tr(fe,Ce,_e),O[V+3+0]=O[V+2+32]=O[V+1+64]=O[V+0+96]=Tr(Ce,_e,Be),O[V+3+32]=O[V+2+64]=O[V+1+96]=Tr(_e,Be,Ie),O[V+3+64]=O[V+2+96]=Tr(Be,Ie,Pe),O[V+3+96]=Tr(Ie,Pe,Pe)}function ec(O,V){var ae=O[V-1+0],fe=O[V-1+32],Ce=O[V-1+64],_e=O[V-1-32],Be=O[V+0-32],Ie=O[V+1-32],Pe=O[V+2-32],$e=O[V+3-32];O[V+0+0]=O[V+1+64]=_e+Be+1>>1,O[V+1+0]=O[V+2+64]=Be+Ie+1>>1,O[V+2+0]=O[V+3+64]=Ie+Pe+1>>1,O[V+3+0]=Pe+$e+1>>1,O[V+0+96]=Tr(Ce,fe,ae),O[V+0+64]=Tr(fe,ae,_e),O[V+0+32]=O[V+1+96]=Tr(ae,_e,Be),O[V+1+32]=O[V+2+96]=Tr(_e,Be,Ie),O[V+2+32]=O[V+3+96]=Tr(Be,Ie,Pe),O[V+3+32]=Tr(Ie,Pe,$e)}function zo(O,V){var ae=O[V+0-32],fe=O[V+1-32],Ce=O[V+2-32],_e=O[V+3-32],Be=O[V+4-32],Ie=O[V+5-32],Pe=O[V+6-32],$e=O[V+7-32];O[V+0+0]=ae+fe+1>>1,O[V+1+0]=O[V+0+64]=fe+Ce+1>>1,O[V+2+0]=O[V+1+64]=Ce+_e+1>>1,O[V+3+0]=O[V+2+64]=_e+Be+1>>1,O[V+0+32]=Tr(ae,fe,Ce),O[V+1+32]=O[V+0+96]=Tr(fe,Ce,_e),O[V+2+32]=O[V+1+96]=Tr(Ce,_e,Be),O[V+3+32]=O[V+2+96]=Tr(_e,Be,Ie),O[V+3+64]=Tr(Be,Ie,Pe),O[V+3+96]=Tr(Ie,Pe,$e)}function Sd(O,V){var ae=O[V-1+0],fe=O[V-1+32],Ce=O[V-1+64],_e=O[V-1+96];O[V+0+0]=ae+fe+1>>1,O[V+2+0]=O[V+0+32]=fe+Ce+1>>1,O[V+2+32]=O[V+0+64]=Ce+_e+1>>1,O[V+1+0]=Tr(ae,fe,Ce),O[V+3+0]=O[V+1+32]=Tr(fe,Ce,_e),O[V+3+32]=O[V+1+64]=Tr(Ce,_e,_e),O[V+3+64]=O[V+2+64]=O[V+0+96]=O[V+1+96]=O[V+2+96]=O[V+3+96]=_e}function Lc(O,V){var ae=O[V-1+0],fe=O[V-1+32],Ce=O[V-1+64],_e=O[V-1+96],Be=O[V-1-32],Ie=O[V+0-32],Pe=O[V+1-32],$e=O[V+2-32];O[V+0+0]=O[V+2+32]=ae+Be+1>>1,O[V+0+32]=O[V+2+64]=fe+ae+1>>1,O[V+0+64]=O[V+2+96]=Ce+fe+1>>1,O[V+0+96]=_e+Ce+1>>1,O[V+3+0]=Tr(Ie,Pe,$e),O[V+2+0]=Tr(Be,Ie,Pe),O[V+1+0]=O[V+3+32]=Tr(ae,Be,Ie),O[V+1+32]=O[V+3+64]=Tr(fe,ae,Be),O[V+1+64]=O[V+3+96]=Tr(Ce,fe,ae),O[V+1+96]=Tr(_e,Ce,fe)}function Wh(O,V){var ae;for(ae=0;8>ae;++ae)a(O,V+32*ae,O,V-32,8)}function $o(O,V){var ae;for(ae=0;8>ae;++ae)n(O,V,O[V-1],8),V+=32}function Wi(O,V,ae){var fe;for(fe=0;8>fe;++fe)n(V,ae+32*fe,O,8)}function tc(O,V){var ae,fe=8;for(ae=0;8>ae;++ae)fe+=O[V+ae-32]+O[V-1+32*ae];Wi(fe>>4,O,V)}function ws(O,V){var ae,fe=4;for(ae=0;8>ae;++ae)fe+=O[V+ae-32];Wi(fe>>3,O,V)}function Aa(O,V){var ae,fe=4;for(ae=0;8>ae;++ae)fe+=O[V-1+32*ae];Wi(fe>>3,O,V)}function _d(O,V){Wi(128,O,V)}function rc(O,V,ae){var fe=O[V-ae],Ce=O[V+0],_e=3*(Ce-fe)+Hx[1020+O[V-2*ae]-O[V+ae]],Be=n0[112+(_e+4>>3)];O[V-ae]=mi[255+fe+n0[112+(_e+3>>3)]],O[V+0]=mi[255+Ce-Be]}function Xh(O,V,ae,fe){var Ce=O[V+0],_e=O[V+ae];return ic[255+O[V-2*ae]-O[V-ae]]>fe||ic[255+_e-Ce]>fe}function wu(O,V,ae,fe){return 4*ic[255+O[V-ae]-O[V+0]]+ic[255+O[V-2*ae]-O[V+ae]]<=fe}function Nu(O,V,ae,fe,Ce){var _e=O[V-3*ae],Be=O[V-2*ae],Ie=O[V-ae],Pe=O[V+0],$e=O[V+ae],tt=O[V+2*ae],mt=O[V+3*ae];return 4*ic[255+Ie-Pe]+ic[255+Be-$e]>fe?0:ic[255+O[V-4*ae]-_e]<=Ce&&ic[255+_e-Be]<=Ce&&ic[255+Be-Ie]<=Ce&&ic[255+mt-tt]<=Ce&&ic[255+tt-$e]<=Ce&&ic[255+$e-Pe]<=Ce}function Il(O,V,ae,fe){var Ce=2*fe+1;for(fe=0;16>fe;++fe)wu(O,V+fe,ae,Ce)&&rc(O,V+fe,ae)}function Xi(O,V,ae,fe){var Ce=2*fe+1;for(fe=0;16>fe;++fe)wu(O,V+fe*ae,1,Ce)&&rc(O,V+fe*ae,1)}function Ns(O,V,ae,fe){var Ce;for(Ce=3;0<Ce;--Ce)Il(O,V+=4*ae,ae,fe)}function _A(O,V,ae,fe){var Ce;for(Ce=3;0<Ce;--Ce)Xi(O,V+=4,ae,fe)}function Td(O,V,ae,fe,Ce,_e,Be,Ie){for(_e=2*_e+1;0<Ce--;){if(Nu(O,V,ae,_e,Be))if(Xh(O,V,ae,Ie))rc(O,V,ae);else{var Pe=O,$e=V,tt=ae,mt=Pe[$e-2*tt],ht=Pe[$e-tt],lt=Pe[$e+0],Pt=Pe[$e+tt],yt=Pe[$e+2*tt],rt=27*(Bt=Hx[1020+3*(lt-ht)+Hx[1020+mt-Pt]])+63>>7,nt=18*Bt+63>>7,Bt=9*Bt+63>>7;Pe[$e-3*tt]=mi[255+Pe[$e-3*tt]+Bt],Pe[$e-2*tt]=mi[255+mt+nt],Pe[$e-tt]=mi[255+ht+rt],Pe[$e+0]=mi[255+lt-rt],Pe[$e+tt]=mi[255+Pt-nt],Pe[$e+2*tt]=mi[255+yt-Bt]}V+=fe}}function Di(O,V,ae,fe,Ce,_e,Be,Ie){for(_e=2*_e+1;0<Ce--;){if(Nu(O,V,ae,_e,Be))if(Xh(O,V,ae,Ie))rc(O,V,ae);else{var Pe=O,$e=V,tt=ae,mt=Pe[$e-tt],ht=Pe[$e+0],lt=Pe[$e+tt],Pt=n0[112+((yt=3*(ht-mt))+4>>3)],yt=n0[112+(yt+3>>3)],rt=Pt+1>>1;Pe[$e-2*tt]=mi[255+Pe[$e-2*tt]+rt],Pe[$e-tt]=mi[255+mt+yt],Pe[$e+0]=mi[255+ht-Pt],Pe[$e+tt]=mi[255+lt-rt]}V+=fe}}function Bd(O,V,ae,fe,Ce,_e){Td(O,V,ae,1,16,fe,Ce,_e)}function Mc(O,V,ae,fe,Ce,_e){Td(O,V,1,ae,16,fe,Ce,_e)}function _f(O,V,ae,fe,Ce,_e){var Be;for(Be=3;0<Be;--Be)Di(O,V+=4*ae,ae,1,16,fe,Ce,_e)}function Eu(O,V,ae,fe,Ce,_e){var Be;for(Be=3;0<Be;--Be)Di(O,V+=4,1,ae,16,fe,Ce,_e)}function Tf(O,V,ae,fe,Ce,_e,Be,Ie){Td(O,V,Ce,1,8,_e,Be,Ie),Td(ae,fe,Ce,1,8,_e,Be,Ie)}function Yh(O,V,ae,fe,Ce,_e,Be,Ie){Td(O,V,1,Ce,8,_e,Be,Ie),Td(ae,fe,1,Ce,8,_e,Be,Ie)}function Cu(O,V,ae,fe,Ce,_e,Be,Ie){Di(O,V+4*Ce,Ce,1,8,_e,Be,Ie),Di(ae,fe+4*Ce,Ce,1,8,_e,Be,Ie)}function Id(O,V,ae,fe,Ce,_e,Be,Ie){Di(O,V+4,1,Ce,8,_e,Be,Ie),Di(ae,fe+4,1,Ce,8,_e,Be,Ie)}function ju(){this.ba=new Ha,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Lr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Bf(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ku(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Od(){this.ua=0,this.Wa=new ue,this.vb=new ue,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new H,this.yc=new S}function TA(){this.xb=this.a=0,this.l=new zs,this.ca=new Ha,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Od,this.ab=0,this.gc=o(4,ku),this.Oc=0}function Uc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new zs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Dd(O,V,ae,fe,Ce,_e,Be){for(O=O==null?0:O[V+0],V=0;V<Be;++V)Ce[_e+V]=O+ae[fe+V]&255,O=Ce[_e+V]}function Su(O,V,ae,fe,Ce,_e,Be){var Ie;if(O==null)Dd(null,null,ae,fe,Ce,_e,Be);else for(Ie=0;Ie<Be;++Ie)Ce[_e+Ie]=O[V+Ie]+ae[fe+Ie]&255}function Yi(O,V,ae,fe,Ce,_e,Be){if(O==null)Dd(null,null,ae,fe,Ce,_e,Be);else{var Ie,Pe=O[V+0],$e=Pe,tt=Pe;for(Ie=0;Ie<Be;++Ie)$e=tt+(Pe=O[V+Ie])-$e,tt=ae[fe+Ie]+(-256&$e?0>$e?0:255:$e)&255,$e=Pe,Ce[_e+Ie]=tt}}function If(O,V,ae,fe){var Ce=V.width,_e=V.o;if(t(O!=null&&V!=null),0>ae||0>=fe||ae+fe>_e)return null;if(!O.Cc){if(O.ga==null){var Be;if(O.ga=new Uc,(Be=O.ga==null)||(Be=V.width*V.o,t(O.Gb.length==0),O.Gb=i(Be),O.Uc=0,O.Gb==null?Be=0:(O.mb=O.Gb,O.nb=O.Uc,O.rc=null,Be=1),Be=!Be),!Be){Be=O.ga;var Ie=O.Fa,Pe=O.P,$e=O.qc,tt=O.mb,mt=O.nb,ht=Pe+1,lt=$e-1,Pt=Be.l;if(t(Ie!=null&&tt!=null&&V!=null),Ud[0]=null,Ud[1]=Dd,Ud[2]=Su,Ud[3]=Yi,Be.ca=tt,Be.tb=mt,Be.c=V.width,Be.i=V.height,t(0<Be.c&&0<Be.i),1>=$e)V=0;else if(Be.$a=Ie[Pe+0]>>0&3,Be.Z=Ie[Pe+0]>>2&3,Be.Lc=Ie[Pe+0]>>4&3,Pe=Ie[Pe+0]>>6&3,0>Be.$a||1<Be.$a||4<=Be.Z||1<Be.Lc||Pe)V=0;else if(Pt.put=Ln,Pt.ac=Za,Pt.bc=Qs,Pt.ma=Be,Pt.width=V.width,Pt.height=V.height,Pt.Da=V.Da,Pt.v=V.v,Pt.va=V.va,Pt.j=V.j,Pt.o=V.o,Be.$a)e:{t(Be.$a==1),V=Ge();t:for(;;){if(V==null){V=0;break e}if(t(Be!=null),Be.mc=V,V.c=Be.c,V.i=Be.i,V.l=Be.l,V.l.ma=Be,V.l.width=Be.c,V.l.height=Be.i,V.a=0,X(V.m,Ie,ht,lt),!Ue(Be.c,Be.i,1,V,null)||(V.ab==1&&V.gc[0].hc==3&&Me(V.s)?(Be.ic=1,Ie=V.c*V.i,V.Ta=null,V.Ua=0,V.V=i(Ie),V.Ba=0,V.V==null?(V.a=1,V=0):V=1):(Be.ic=0,V=Ye(V,Be.c)),!V))break t;V=1;break e}Be.mc=null,V=0}else V=lt>=Be.c*Be.i;Be=!V}if(Be)return null;O.ga.Lc!=1?O.Ga=0:fe=_e-ae}t(O.ga!=null),t(ae+fe<=_e);e:{if(V=(Ie=O.ga).c,_e=Ie.l.o,Ie.$a==0){if(ht=O.rc,lt=O.Vc,Pt=O.Fa,Pe=O.P+1+ae*V,$e=O.mb,tt=O.nb+ae*V,t(Pe<=O.P+O.qc),Ie.Z!=0)for(t(Ud[Ie.Z]!=null),Be=0;Be<fe;++Be)Ud[Ie.Z](ht,lt,Pt,Pe,$e,tt,V),ht=$e,lt=tt,tt+=V,Pe+=V;else for(Be=0;Be<fe;++Be)a($e,tt,Pt,Pe,V),ht=$e,lt=tt,tt+=V,Pe+=V;O.rc=ht,O.Vc=lt}else{if(t(Ie.mc!=null),V=ae+fe,t((Be=Ie.mc)!=null),t(V<=Be.i),Be.C>=V)V=1;else if(Ie.ic||ot(),Ie.ic){Ie=Be.V,ht=Be.Ba,lt=Be.c;var yt=Be.i,rt=(Pt=1,Pe=Be.$/lt,$e=Be.$%lt,tt=Be.m,mt=Be.s,Be.$),nt=lt*yt,Bt=lt*V,Rt=mt.wc,Ot=rt<Bt?en(mt,$e,Pe):null;t(rt<=nt),t(V<=yt),t(Me(mt));t:for(;;){for(;!tt.h&&rt<Bt;){if($e&Rt||(Ot=en(mt,$e,Pe)),t(Ot!=null),ce(tt),256>(yt=Fa(Ot.G[0],Ot.H[0],tt)))Ie[ht+rt]=yt,++rt,++$e>=lt&&($e=0,++Pe<=V&&!(Pe%16)&&Ne(Be,Pe));else{if(!(280>yt)){Pt=0;break t}yt=va(yt-256,tt);var nr,Jt=Fa(Ot.G[4],Ot.H[4],tt);if(ce(tt),!(rt>=(Jt=ca(lt,Jt=va(Jt,tt)))&&nt-rt>=yt)){Pt=0;break t}for(nr=0;nr<yt;++nr)Ie[ht+rt+nr]=Ie[ht+rt+nr-Jt];for(rt+=yt,$e+=yt;$e>=lt;)$e-=lt,++Pe<=V&&!(Pe%16)&&Ne(Be,Pe);rt<Bt&&$e&Rt&&(Ot=en(mt,$e,Pe))}t(tt.h==W(tt))}Ne(Be,Pe>V?V:Pe);break t}!Pt||tt.h&&rt<nt?(Pt=0,Be.a=tt.h?5:3):Be.$=rt,V=Pt}else V=xe(Be,Be.V,Be.Ba,Be.c,Be.i,V,et);if(!V){fe=0;break e}}ae+fe>=_e&&(O.Cc=1),fe=1}if(!fe)return null;if(O.Cc&&((fe=O.ga)!=null&&(fe.mc=null),O.ga=null,0<O.Ga))return alert("todo:WebPDequantizeLevels"),null}return O.nb+ae*Ce}function te(O,V,ae,fe,Ce,_e){for(;0<Ce--;){var Be,Ie=O,Pe=V+(ae?1:0),$e=O,tt=V+(ae?0:3);for(Be=0;Be<fe;++Be){var mt=$e[tt+4*Be];mt!=255&&(mt*=32897,Ie[Pe+4*Be+0]=Ie[Pe+4*Be+0]*mt>>23,Ie[Pe+4*Be+1]=Ie[Pe+4*Be+1]*mt>>23,Ie[Pe+4*Be+2]=Ie[Pe+4*Be+2]*mt>>23)}V+=_e}}function je(O,V,ae,fe,Ce){for(;0<fe--;){var _e;for(_e=0;_e<ae;++_e){var Be=O[V+2*_e+0],Ie=15&($e=O[V+2*_e+1]),Pe=4369*Ie,$e=(240&$e|$e>>4)*Pe>>16;O[V+2*_e+0]=(240&Be|Be>>4)*Pe>>16&240|(15&Be|Be<<4)*Pe>>16>>4&15,O[V+2*_e+1]=240&$e|Ie}V+=Ce}}function Ke(O,V,ae,fe,Ce,_e,Be,Ie){var Pe,$e,tt=255;for($e=0;$e<Ce;++$e){for(Pe=0;Pe<fe;++Pe){var mt=O[V+Pe];_e[Be+4*Pe]=mt,tt&=mt}V+=ae,Be+=Ie}return tt!=255}function Je(O,V,ae,fe,Ce){var _e;for(_e=0;_e<Ce;++_e)ae[fe+_e]=O[V+_e]>>8}function ot(){Ol=te,da=je,ua=Ke,En=Je}function Ct(O,V,ae){k[O]=function(fe,Ce,_e,Be,Ie,Pe,$e,tt,mt,ht,lt,Pt,yt,rt,nt,Bt,Rt){var Ot,nr=Rt-1>>1,Jt=Ie[Pe+0]|$e[tt+0]<<16,vr=mt[ht+0]|lt[Pt+0]<<16;t(fe!=null);var er=3*Jt+vr+131074>>2;for(V(fe[Ce+0],255&er,er>>16,yt,rt),_e!=null&&(er=3*vr+Jt+131074>>2,V(_e[Be+0],255&er,er>>16,nt,Bt)),Ot=1;Ot<=nr;++Ot){var Sa=Ie[Pe+Ot]|$e[tt+Ot]<<16,$a=mt[ht+Ot]|lt[Pt+Ot]<<16,la=Jt+Sa+vr+$a+524296,ra=la+2*(Sa+vr)>>3;er=ra+Jt>>1,Jt=(la=la+2*(Jt+$a)>>3)+Sa>>1,V(fe[Ce+2*Ot-1],255&er,er>>16,yt,rt+(2*Ot-1)*ae),V(fe[Ce+2*Ot-0],255&Jt,Jt>>16,yt,rt+(2*Ot-0)*ae),_e!=null&&(er=la+vr>>1,Jt=ra+$a>>1,V(_e[Be+2*Ot-1],255&er,er>>16,nt,Bt+(2*Ot-1)*ae),V(_e[Be+2*Ot+0],255&Jt,Jt>>16,nt,Bt+(2*Ot+0)*ae)),Jt=Sa,vr=$a}1&Rt||(er=3*Jt+vr+131074>>2,V(fe[Ce+Rt-1],255&er,er>>16,yt,rt+(Rt-1)*ae),_e!=null&&(er=3*vr+Jt+131074>>2,V(_e[Be+Rt-1],255&er,er>>16,nt,Bt+(Rt-1)*ae)))}}function Ht(){pi[Ji]=Ru,pi[FA]=Hd,pi[Ld]=Gf,pi[Lp]=$x,pi[s0]=Vx,pi[Iu]=LA,pi[Qx]=Gx,pi[Mp]=Hd,pi[$f]=$x,pi[Ou]=Vx,pi[PA]=LA}function Zt(O){return O&-16384?0>O?0:255:O>>rT}function R(O,V){return Zt((19077*O>>8)+(26149*V>>8)-14234)}function se(O,V,ae){return Zt((19077*O>>8)-(6419*V>>8)-(13320*ae>>8)+8708)}function me(O,V){return Zt((19077*O>>8)+(33050*V>>8)-17685)}function Oe(O,V,ae,fe,Ce){fe[Ce+0]=R(O,ae),fe[Ce+1]=se(O,V,ae),fe[Ce+2]=me(O,V)}function it(O,V,ae,fe,Ce){fe[Ce+0]=me(O,V),fe[Ce+1]=se(O,V,ae),fe[Ce+2]=R(O,ae)}function pt(O,V,ae,fe,Ce){var _e=se(O,V,ae);V=_e<<3&224|me(O,V)>>3,fe[Ce+0]=248&R(O,ae)|_e>>5,fe[Ce+1]=V}function Qt(O,V,ae,fe,Ce){var _e=240&me(O,V)|15;fe[Ce+0]=240&R(O,ae)|se(O,V,ae)>>4,fe[Ce+1]=_e}function Br(O,V,ae,fe,Ce){fe[Ce+0]=255,Oe(O,V,ae,fe,Ce+1)}function ma(O,V,ae,fe,Ce){it(O,V,ae,fe,Ce),fe[Ce+3]=255}function Gr(O,V,ae,fe,Ce){Oe(O,V,ae,fe,Ce),fe[Ce+3]=255}function za(O,V){return 0>O?0:O>V?V:O}function tn(O,V,ae){k[O]=function(fe,Ce,_e,Be,Ie,Pe,$e,tt,mt){for(var ht=tt+(-2&mt)*ae;tt!=ht;)V(fe[Ce+0],_e[Be+0],Ie[Pe+0],$e,tt),V(fe[Ce+1],_e[Be+0],Ie[Pe+0],$e,tt+ae),Ce+=2,++Be,++Pe,tt+=2*ae;1&mt&&V(fe[Ce+0],_e[Be+0],Ie[Pe+0],$e,tt)}}function ac(O,V,ae){return ae==0?O==0?V==0?6:5:V==0?4:0:ae}function ls(O,V,ae,fe,Ce){switch(O>>>30){case 3:Qc(V,ae,fe,Ce,0);break;case 2:Zn(V,ae,fe,Ce);break;case 1:Es(V,ae,fe,Ce)}}function Vo(O,V){var ae,fe,Ce=V.M,_e=V.Nb,Be=O.oc,Ie=O.pc+40,Pe=O.oc,$e=O.pc+584,tt=O.oc,mt=O.pc+600;for(ae=0;16>ae;++ae)Be[Ie+32*ae-1]=129;for(ae=0;8>ae;++ae)Pe[$e+32*ae-1]=129,tt[mt+32*ae-1]=129;for(0<Ce?Be[Ie-1-32]=Pe[$e-1-32]=tt[mt-1-32]=129:(n(Be,Ie-32-1,127,21),n(Pe,$e-32-1,127,9),n(tt,mt-32-1,127,9)),fe=0;fe<O.za;++fe){var ht=V.ya[V.aa+fe];if(0<fe){for(ae=-1;16>ae;++ae)a(Be,Ie+32*ae-4,Be,Ie+32*ae+12,4);for(ae=-1;8>ae;++ae)a(Pe,$e+32*ae-4,Pe,$e+32*ae+4,4),a(tt,mt+32*ae-4,tt,mt+32*ae+4,4)}var lt=O.Gd,Pt=O.Hd+fe,yt=ht.ad,rt=ht.Hc;if(0<Ce&&(a(Be,Ie-32,lt[Pt].y,0,16),a(Pe,$e-32,lt[Pt].f,0,8),a(tt,mt-32,lt[Pt].ea,0,8)),ht.Za){var nt=Be,Bt=Ie-32+16;for(0<Ce&&(fe>=O.za-1?n(nt,Bt,lt[Pt].y[15],4):a(nt,Bt,lt[Pt+1].y,0,4)),ae=0;4>ae;ae++)nt[Bt+128+ae]=nt[Bt+256+ae]=nt[Bt+384+ae]=nt[Bt+0+ae];for(ae=0;16>ae;++ae,rt<<=2)nt=Be,Bt=Ie+c0[ae],yo[ht.Ob[ae]](nt,Bt),ls(rt,yt,16*+ae,nt,Bt)}else if(nt=ac(fe,Ce,ht.Ob[0]),Pu[nt](Be,Ie),rt!=0)for(ae=0;16>ae;++ae,rt<<=2)ls(rt,yt,16*+ae,Be,Ie+c0[ae]);for(ae=ht.Gc,nt=ac(fe,Ce,ht.Dd),Fl[nt](Pe,$e),Fl[nt](tt,mt),rt=yt,nt=Pe,Bt=$e,255&(ht=ae>>0)&&(170&ht?zc(rt,256,nt,Bt):Ko(rt,256,nt,Bt)),ht=tt,rt=mt,255&(ae>>=8)&&(170&ae?zc(yt,320,ht,rt):Ko(yt,320,ht,rt)),Ce<O.Ub-1&&(a(lt[Pt].y,0,Be,Ie+480,16),a(lt[Pt].f,0,Pe,$e+224,8),a(lt[Pt].ea,0,tt,mt+224,8)),ae=8*_e*O.B,lt=O.sa,Pt=O.ta+16*fe+16*_e*O.R,yt=O.qa,ht=O.ra+8*fe+ae,rt=O.Ha,nt=O.Ia+8*fe+ae,ae=0;16>ae;++ae)a(lt,Pt+ae*O.R,Be,Ie+32*ae,16);for(ae=0;8>ae;++ae)a(yt,ht+ae*O.B,Pe,$e+32*ae,8),a(rt,nt+ae*O.B,tt,mt+32*ae,8)}}function Fd(O,V,ae,fe,Ce,_e,Be,Ie,Pe){var $e=[0],tt=[0],mt=0,ht=Pe!=null?Pe.kd:0,lt=Pe??new Bf;if(O==null||12>ae)return 7;lt.data=O,lt.w=V,lt.ha=ae,V=[V],ae=[ae],lt.gb=[lt.gb];e:{var Pt=V,yt=ae,rt=lt.gb;if(t(O!=null),t(yt!=null),t(rt!=null),rt[0]=0,12<=yt[0]&&!r(O,Pt[0],"RIFF")){if(r(O,Pt[0]+8,"WEBP")){rt=3;break e}var nt=we(O,Pt[0]+4);if(12>nt||4294967286<nt){rt=3;break e}if(ht&&nt>yt[0]-8){rt=7;break e}rt[0]=nt,Pt[0]+=12,yt[0]-=12}rt=0}if(rt!=0)return rt;for(nt=0<lt.gb[0],ae=ae[0];;){e:{var Bt=O;yt=V,rt=ae;var Rt=$e,Ot=tt,nr=Pt=[0];if((er=mt=[mt])[0]=0,8>rt[0])rt=7;else{if(!r(Bt,yt[0],"VP8X")){if(we(Bt,yt[0]+4)!=10){rt=3;break e}if(18>rt[0]){rt=7;break e}var Jt=we(Bt,yt[0]+8),vr=1+q(Bt,yt[0]+12);if(2147483648<=vr*(Bt=1+q(Bt,yt[0]+15))){rt=3;break e}nr!=null&&(nr[0]=Jt),Rt!=null&&(Rt[0]=vr),Ot!=null&&(Ot[0]=Bt),yt[0]+=18,rt[0]-=18,er[0]=1}rt=0}}if(mt=mt[0],Pt=Pt[0],rt!=0)return rt;if(yt=!!(2&Pt),!nt&&mt)return 3;if(_e!=null&&(_e[0]=!!(16&Pt)),Be!=null&&(Be[0]=yt),Ie!=null&&(Ie[0]=0),Be=$e[0],Pt=tt[0],mt&&yt&&Pe==null){rt=0;break}if(4>ae){rt=7;break}if(nt&&mt||!nt&&!mt&&!r(O,V[0],"ALPH")){ae=[ae],lt.na=[lt.na],lt.P=[lt.P],lt.Sa=[lt.Sa];e:{Jt=O,rt=V,nt=ae;var er=lt.gb;Rt=lt.na,Ot=lt.P,nr=lt.Sa,vr=22,t(Jt!=null),t(nt!=null),Bt=rt[0];var Sa=nt[0];for(t(Rt!=null),t(nr!=null),Rt[0]=null,Ot[0]=null,nr[0]=0;;){if(rt[0]=Bt,nt[0]=Sa,8>Sa){rt=7;break e}var $a=we(Jt,Bt+4);if(4294967286<$a){rt=3;break e}var la=8+$a+1&-2;if(vr+=la,0<er&&vr>er){rt=3;break e}if(!r(Jt,Bt,"VP8 ")||!r(Jt,Bt,"VP8L")){rt=0;break e}if(Sa[0]<la){rt=7;break e}r(Jt,Bt,"ALPH")||(Rt[0]=Jt,Ot[0]=Bt+8,nr[0]=$a),Bt+=la,Sa-=la}}if(ae=ae[0],lt.na=lt.na[0],lt.P=lt.P[0],lt.Sa=lt.Sa[0],rt!=0)break}ae=[ae],lt.Ja=[lt.Ja],lt.xa=[lt.xa];e:if(er=O,rt=V,nt=ae,Rt=lt.gb[0],Ot=lt.Ja,nr=lt.xa,Jt=rt[0],Bt=!r(er,Jt,"VP8 "),vr=!r(er,Jt,"VP8L"),t(er!=null),t(nt!=null),t(Ot!=null),t(nr!=null),8>nt[0])rt=7;else{if(Bt||vr){if(er=we(er,Jt+4),12<=Rt&&er>Rt-12){rt=3;break e}if(ht&&er>nt[0]-8){rt=7;break e}Ot[0]=er,rt[0]+=8,nt[0]-=8,nr[0]=vr}else nr[0]=5<=nt[0]&&er[Jt+0]==47&&!(er[Jt+4]>>5),Ot[0]=nt[0];rt=0}if(ae=ae[0],lt.Ja=lt.Ja[0],lt.xa=lt.xa[0],V=V[0],rt!=0)break;if(4294967286<lt.Ja)return 3;if(Ie==null||yt||(Ie[0]=lt.xa?2:1),Be=[Be],Pt=[Pt],lt.xa){if(5>ae){rt=7;break}Ie=Be,ht=Pt,yt=_e,O==null||5>ae?O=0:5<=ae&&O[V+0]==47&&!(O[V+4]>>5)?(nt=[0],er=[0],Rt=[0],X(Ot=new P,O,V,ae),tr(Ot,nt,er,Rt)?(Ie!=null&&(Ie[0]=nt[0]),ht!=null&&(ht[0]=er[0]),yt!=null&&(yt[0]=Rt[0]),O=1):O=0):O=0}else{if(10>ae){rt=7;break}Ie=Pt,O==null||10>ae||!hi(O,V+3,ae-3)?O=0:(ht=O[V+0]|O[V+1]<<8|O[V+2]<<16,yt=16383&(O[V+7]<<8|O[V+6]),O=16383&(O[V+9]<<8|O[V+8]),1&ht||3<(ht>>1&7)||!(ht>>4&1)||ht>>5>=lt.Ja||!yt||!O?O=0:(Be&&(Be[0]=yt),Ie&&(Ie[0]=O),O=1))}if(!O||(Be=Be[0],Pt=Pt[0],mt&&($e[0]!=Be||tt[0]!=Pt)))return 3;Pe!=null&&(Pe[0]=lt,Pe.offset=V-Pe.w,t(4294967286>V-Pe.w),t(Pe.offset==Pe.ha-ae));break}return rt==0||rt==7&&mt&&Pe==null?(_e!=null&&(_e[0]|=lt.na!=null&&0<lt.na.length),fe!=null&&(fe[0]=Be),Ce!=null&&(Ce[0]=Pt),0):rt}function Of(O,V,ae){var fe=V.width,Ce=V.height,_e=0,Be=0,Ie=fe,Pe=Ce;if(V.Da=O!=null&&0<O.Da,V.Da&&(Ie=O.cd,Pe=O.bd,_e=O.v,Be=O.j,11>ae||(_e&=-2,Be&=-2),0>_e||0>Be||0>=Ie||0>=Pe||_e+Ie>fe||Be+Pe>Ce))return 0;if(V.v=_e,V.j=Be,V.va=_e+Ie,V.o=Be+Pe,V.U=Ie,V.T=Pe,V.da=O!=null&&0<O.da,V.da){if(!ge(Ie,Pe,ae=[O.ib],_e=[O.hb]))return 0;V.ib=ae[0],V.hb=_e[0]}return V.ob=O!=null&&O.ob,V.Kb=O==null||!O.Sd,V.da&&(V.ob=V.ib<3*fe/4&&V.hb<3*Ce/4,V.Kb=0),1}function BA(O){if(O==null)return 2;if(11>O.S){var V=O.f.RGBA;V.fb+=(O.height-1)*V.A,V.A=-V.A}else V=O.f.kb,O=O.height,V.O+=(O-1)*V.fa,V.fa=-V.fa,V.N+=(O-1>>1)*V.Ab,V.Ab=-V.Ab,V.W+=(O-1>>1)*V.Db,V.Db=-V.Db,V.F!=null&&(V.J+=(O-1)*V.lb,V.lb=-V.lb);return 0}function Jh(O,V,ae,fe){if(fe==null||0>=O||0>=V)return 2;if(ae!=null){if(ae.Da){var Ce=ae.cd,_e=ae.bd,Be=-2&ae.v,Ie=-2&ae.j;if(0>Be||0>Ie||0>=Ce||0>=_e||Be+Ce>O||Ie+_e>V)return 2;O=Ce,V=_e}if(ae.da){if(!ge(O,V,Ce=[ae.ib],_e=[ae.hb]))return 2;O=Ce[0],V=_e[0]}}fe.width=O,fe.height=V;e:{var Pe=fe.width,$e=fe.height;if(O=fe.S,0>=Pe||0>=$e||!(O>=Ji&&13>O))O=2;else{if(0>=fe.Rd&&fe.sd==null){Be=_e=Ce=V=0;var tt=(Ie=Pe*$E[O])*$e;if(11>O||(_e=($e+1)/2*(V=(Pe+1)/2),O==12&&(Be=(Ce=Pe)*$e)),($e=i(tt+2*_e+Be))==null){O=1;break e}fe.sd=$e,11>O?((Pe=fe.f.RGBA).eb=$e,Pe.fb=0,Pe.A=Ie,Pe.size=tt):((Pe=fe.f.kb).y=$e,Pe.O=0,Pe.fa=Ie,Pe.Fd=tt,Pe.f=$e,Pe.N=0+tt,Pe.Ab=V,Pe.Cd=_e,Pe.ea=$e,Pe.W=0+tt+_e,Pe.Db=V,Pe.Ed=_e,O==12&&(Pe.F=$e,Pe.J=0+tt+2*_e),Pe.Tc=Be,Pe.lb=Ce)}if(V=1,Ce=fe.S,_e=fe.width,Be=fe.height,Ce>=Ji&&13>Ce)if(11>Ce)O=fe.f.RGBA,V&=(Ie=Math.abs(O.A))*(Be-1)+_e<=O.size,V&=Ie>=_e*$E[Ce],V&=O.eb!=null;else{O=fe.f.kb,Ie=(_e+1)/2,tt=(Be+1)/2,Pe=Math.abs(O.fa),$e=Math.abs(O.Ab);var mt=Math.abs(O.Db),ht=Math.abs(O.lb),lt=ht*(Be-1)+_e;V&=Pe*(Be-1)+_e<=O.Fd,V&=$e*(tt-1)+Ie<=O.Cd,V=(V&=mt*(tt-1)+Ie<=O.Ed)&Pe>=_e&$e>=Ie&mt>=Ie,V&=O.y!=null,V&=O.f!=null,V&=O.ea!=null,Ce==12&&(V&=ht>=_e,V&=lt<=O.Tc,V&=O.F!=null)}else V=0;O=V?0:2}}return O!=0||ae!=null&&ae.fd&&(O=BA(fe)),O}var $s=64,Df=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Zh=24,e0=32,IA=8,Go=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];le("Predictor0","PredictorAdd0"),k.Predictor0=function(){return 4278190080},k.Predictor1=function(O){return O},k.Predictor2=function(O,V,ae){return V[ae+0]},k.Predictor3=function(O,V,ae){return V[ae+1]},k.Predictor4=function(O,V,ae){return V[ae-1]},k.Predictor5=function(O,V,ae){return Ae(Ae(O,V[ae+1]),V[ae+0])},k.Predictor6=function(O,V,ae){return Ae(O,V[ae-1])},k.Predictor7=function(O,V,ae){return Ae(O,V[ae+0])},k.Predictor8=function(O,V,ae){return Ae(V[ae-1],V[ae+0])},k.Predictor9=function(O,V,ae){return Ae(V[ae+0],V[ae+1])},k.Predictor10=function(O,V,ae){return Ae(Ae(O,V[ae-1]),Ae(V[ae+0],V[ae+1]))},k.Predictor11=function(O,V,ae){var fe=V[ae+0];return 0>=Le(fe>>24&255,O>>24&255,(V=V[ae-1])>>24&255)+Le(fe>>16&255,O>>16&255,V>>16&255)+Le(fe>>8&255,O>>8&255,V>>8&255)+Le(255&fe,255&O,255&V)?fe:O},k.Predictor12=function(O,V,ae){var fe=V[ae+0];return(pe((O>>24&255)+(fe>>24&255)-((V=V[ae-1])>>24&255))<<24|pe((O>>16&255)+(fe>>16&255)-(V>>16&255))<<16|pe((O>>8&255)+(fe>>8&255)-(V>>8&255))<<8|pe((255&O)+(255&fe)-(255&V)))>>>0},k.Predictor13=function(O,V,ae){var fe=V[ae-1];return(ke((O=Ae(O,V[ae+0]))>>24&255,fe>>24&255)<<24|ke(O>>16&255,fe>>16&255)<<16|ke(O>>8&255,fe>>8&255)<<8|ke(O>>0&255,fe>>0&255))>>>0};var Ay=k.PredictorAdd0;k.PredictorAdd1=qe,le("Predictor2","PredictorAdd2"),le("Predictor3","PredictorAdd3"),le("Predictor4","PredictorAdd4"),le("Predictor5","PredictorAdd5"),le("Predictor6","PredictorAdd6"),le("Predictor7","PredictorAdd7"),le("Predictor8","PredictorAdd8"),le("Predictor9","PredictorAdd9"),le("Predictor10","PredictorAdd10"),le("Predictor11","PredictorAdd11"),le("Predictor12","PredictorAdd12"),le("Predictor13","PredictorAdd13");var Pp=k.PredictorAdd2;ct("ColorIndexInverseTransform","MapARGB","32b",function(O){return O>>8&255},function(O){return O}),ct("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(O){return O},function(O){return O>>8&255});var Ux,nc=k.ColorIndexInverseTransform,Ai=k.MapARGB,Ff=k.VP8LColorIndexInverseTransformAlpha,Rp=k.MapAlpha,_u=k.VP8LPredictorsAdd=[];_u.length=16,(k.VP8LPredictors=[]).length=16,(k.VP8LPredictorsAdd_C=[]).length=16,(k.VP8LPredictors_C=[]).length=16;var Pf,bo,Fi,Rf,qo,Hc,Pd,Qc,Zn,zc,Es,Ko,t0,Rd,OA,Lf,Mf,Uf,r0,DA,Hf,Tu,a0,es,Ol,da,ua,En,cs=i(511),sc=i(2041),Qf=i(225),zf=i(767),Bu=0,Hx=sc,n0=Qf,mi=zf,ic=cs,Ji=0,FA=1,Ld=2,Lp=3,s0=4,Iu=5,Qx=6,Mp=7,$f=8,Ou=9,PA=10,zx=[2,3,7],oc=[3,3,11],Dl=[280,256,256,256,40],i0=[0,1,1,1,0],Du=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Fu=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],o0=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ME=8,Up=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Hp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Vs=null,ts=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Pa=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Vf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Md=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],my=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],l0=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],UE=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Pu=[],yo=[],Fl=[],HE=1,RA=2,Ud=[],pi=[];Ct("UpsampleRgbLinePair",Oe,3),Ct("UpsampleBgrLinePair",it,3),Ct("UpsampleRgbaLinePair",Gr,4),Ct("UpsampleBgraLinePair",ma,4),Ct("UpsampleArgbLinePair",Br,4),Ct("UpsampleRgba4444LinePair",Qt,2),Ct("UpsampleRgb565LinePair",pt,2);var Ru=k.UpsampleRgbLinePair,Gf=k.UpsampleBgrLinePair,Hd=k.UpsampleRgbaLinePair,$x=k.UpsampleBgraLinePair,Vx=k.UpsampleArgbLinePair,LA=k.UpsampleRgba4444LinePair,Gx=k.UpsampleRgb565LinePair,Qd=16,Gs=1<<Qd-1,qf=-227,qx=482,rT=6,QE=0,aT=i(256),qs=i(256),py=i(256),Qp=i(256),zp=i(qx-qf),gy=i(qx-qf);tn("YuvToRgbRow",Oe,3),tn("YuvToBgrRow",it,3),tn("YuvToRgbaRow",Gr,4),tn("YuvToBgraRow",ma,4),tn("YuvToArgbRow",Br,4),tn("YuvToRgba4444Row",Qt,2),tn("YuvToRgb565Row",pt,2);var c0=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Lu=[0,2,8],nT=[8,7,6,4,4,2,2,2,1,1,1,1],zE=1;this.WebPDecodeRGBA=function(O,V,ae,fe,Ce){var _e=FA,Be=new ju,Ie=new Ha;Be.ba=Ie,Ie.S=_e,Ie.width=[Ie.width],Ie.height=[Ie.height];var Pe=Ie.width,$e=Ie.height,tt=new Rn;if(tt==null||O==null)var mt=2;else t(tt!=null),mt=Fd(O,V,ae,tt.width,tt.height,tt.Pd,tt.Qd,tt.format,null);if(mt!=0?Pe=0:(Pe!=null&&(Pe[0]=tt.width[0]),$e!=null&&($e[0]=tt.height[0]),Pe=1),Pe){Ie.width=Ie.width[0],Ie.height=Ie.height[0],fe!=null&&(fe[0]=Ie.width),Ce!=null&&(Ce[0]=Ie.height);e:{if(fe=new zs,(Ce=new Bf).data=O,Ce.w=V,Ce.ha=ae,Ce.kd=1,V=[0],t(Ce!=null),((O=Fd(Ce.data,Ce.w,Ce.ha,null,null,null,V,null,Ce))==0||O==7)&&V[0]&&(O=4),(V=O)==0){if(t(Be!=null),fe.data=Ce.data,fe.w=Ce.w+Ce.offset,fe.ha=Ce.ha-Ce.offset,fe.put=Ln,fe.ac=Za,fe.bc=Qs,fe.ma=Be,Ce.xa){if((O=Ge())==null){Be=1;break e}if(function(ht,lt){var Pt=[0],yt=[0],rt=[0];t:for(;;){if(ht==null)return 0;if(lt==null)return ht.a=2,0;if(ht.l=lt,ht.a=0,X(ht.m,lt.data,lt.w,lt.ha),!tr(ht.m,Pt,yt,rt)){ht.a=3;break t}if(ht.xb=RA,lt.width=Pt[0],lt.height=yt[0],!Ue(Pt[0],yt[0],1,ht,null))break t;return 1}return t(ht.a!=0),0}(O,fe)){if(fe=(V=Jh(fe.width,fe.height,Be.Oa,Be.ba))==0){t:{fe=O;r:for(;;){if(fe==null){fe=0;break t}if(t(fe.s.yc!=null),t(fe.s.Ya!=null),t(0<fe.s.Wb),t((ae=fe.l)!=null),t((Ce=ae.ma)!=null),fe.xb!=0){if(fe.ca=Ce.ba,fe.tb=Ce.tb,t(fe.ca!=null),!Of(Ce.Oa,ae,Lp)){fe.a=2;break r}if(!Ye(fe,ae.width)||ae.da)break r;if((ae.da||yr(fe.ca.S))&&ot(),11>fe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),fe.ca.f.kb.F!=null&&ot()),fe.Pb&&0<fe.s.ua&&fe.s.vb.X==null&&!Te(fe.s.vb,fe.s.Wa.Xa)){fe.a=1;break r}fe.xb=0}if(!xe(fe,fe.V,fe.Ba,fe.c,fe.i,ae.o,Ve))break r;Ce.Dc=fe.Ma,fe=1;break t}t(fe.a!=0),fe=0}fe=!fe}fe&&(V=O.a)}else V=O.a}else{if((O=new Bi)==null){Be=1;break e}if(O.Fa=Ce.na,O.P=Ce.P,O.qc=Ce.Sa,jf(O,fe)){if((V=Jh(fe.width,fe.height,Be.Oa,Be.ba))==0){if(O.Aa=0,ae=Be.Oa,t((Ce=O)!=null),ae!=null){if(0<(Pe=0>(Pe=ae.Md)?0:100<Pe?255:255*Pe/100)){for($e=tt=0;4>$e;++$e)12>(mt=Ce.pb[$e]).lc&&(mt.ia=Pe*nT[0>mt.lc?0:mt.lc]>>3),tt|=mt.ia;tt&&(alert("todo:VP8InitRandom"),Ce.ia=1)}Ce.Ga=ae.Id,100<Ce.Ga?Ce.Ga=100:0>Ce.Ga&&(Ce.Ga=0)}Gh(O,fe)||(V=O.a)}}else V=O.a}V==0&&Be.Oa!=null&&Be.Oa.fd&&(V=BA(Be.ba))}Be=V}_e=Be!=0?null:11>_e?Ie.f.RGBA.eb:Ie.f.kb.y}else _e=null;return _e};var $E=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(k,T){for(var L="",F=0;F<4;F++)L+=String.fromCharCode(k[T++]);return L}function u(k,T){return(k[T+0]<<0|k[T+1]<<8|k[T+2]<<16)>>>0}function f(k,T){return(k[T+0]<<0|k[T+1]<<8|k[T+2]<<16|k[T+3]<<24)>>>0}new c;var A=[0],m=[0],g=[],x=new c,v=e,y=function(k,T){var L={},F=0,S=!1,M=0,H=0;if(L.frames=[],!function(D,W,J,ce){for(var ie=0;ie<ce;ie++)if(D[W+ie]!=J.charCodeAt(ie))return!0;return!1}(k,T,"RIFF",4)){var K,Q;for(f(k,T+=4),T+=8;T<k.length;){var G=d(k,T),X=f(k,T+=4);T+=4;var Z=X+(1&X);switch(G){case"VP8 ":case"VP8L":L.frames[F]===void 0&&(L.frames[F]={}),(P=L.frames[F]).src_off=S?H:T-8,P.src_size=M+X+8,F++,S&&(S=!1,M=0,H=0);break;case"VP8X":(P=L.header={}).feature_flags=k[T];var U=T+4;P.canvas_width=1+u(k,U),U+=3,P.canvas_height=1+u(k,U),U+=3;break;case"ALPH":S=!0,M=Z+8,H=T-8;break;case"ANIM":(P=L.header).bgcolor=f(k,T),U=T+4,P.loop_count=(K=k)[(Q=U)+0]<<0|K[Q+1]<<8,U+=2;break;case"ANMF":var Y,P;(P=L.frames[F]={}).offset_x=2*u(k,T),T+=3,P.offset_y=2*u(k,T),T+=3,P.width=1+u(k,T),T+=3,P.height=1+u(k,T),T+=3,P.duration=u(k,T),T+=3,Y=k[T++],P.dispose=1&Y,P.blend=Y>>1&1}G!="ANMF"&&(T+=Z)}return L}}(v,0);y.response=v,y.rgbaoutput=!0,y.dataurl=!1;var N=y.header?y.header:null,E=y.frames?y.frames:null;if(N){N.loop_counter=N.loop_count,A=[N.canvas_height],m=[N.canvas_width];for(var B=0;B<E.length&&E[B].blend!=0;B++);}var _=E[0],I=x.WebPDecodeRGBA(v,_.src_off,_.src_size,m,A);_.rgba=I,_.imgwidth=m[0],_.imgheight=A[0];for(var j=0;j<m[0]*A[0]*4;j++)g[j]=I[j];return this.width=m,this.height=A,this.data=g,this}(function(e){var t=function(){return typeof hP=="function"},r=function(A,m,g,x){var v=4,y=o;switch(x){case e.image_compression.FAST:v=1,y=i;break;case e.image_compression.MEDIUM:v=6,y=l;break;case e.image_compression.SLOW:v=9,y=c}A=a(A,m,g,y);var N=hP(A,{level:v});return e.__addimage__.arrayBufferToBinaryString(N)},a=function(A,m,g,x){for(var v,y,N,E=A.length/m,B=new Uint8Array(A.length+E),_=u(),I=0;I<E;I+=1){if(N=I*m,v=A.subarray(N,N+m),x)B.set(x(v,g,y),N+I);else{for(var j,k=_.length,T=[];j<k;j+=1)T[j]=_[j](v,g,y);var L=f(T.concat());B.set(T[L],N+I)}y=v}return B},n=function(A){var m=Array.apply([],A);return m.unshift(0),m},i=function(A,m){var g,x=[],v=A.length;x[0]=1;for(var y=0;y<v;y+=1)g=A[y-m]||0,x[y+1]=A[y]-g+256&255;return x},o=function(A,m,g){var x,v=[],y=A.length;v[0]=2;for(var N=0;N<y;N+=1)x=g&&g[N]||0,v[N+1]=A[N]-x+256&255;return v},l=function(A,m,g){var x,v,y=[],N=A.length;y[0]=3;for(var E=0;E<N;E+=1)x=A[E-m]||0,v=g&&g[E]||0,y[E+1]=A[E]+256-(x+v>>>1)&255;return y},c=function(A,m,g){var x,v,y,N,E=[],B=A.length;E[0]=4;for(var _=0;_<B;_+=1)x=A[_-m]||0,v=g&&g[_]||0,y=g&&g[_-m]||0,N=d(x,v,y),E[_+1]=A[_]-N+256&255;return E},d=function(A,m,g){if(A===m&&m===g)return A;var x=Math.abs(m-g),v=Math.abs(A-g),y=Math.abs(A+m-g-g);return x<=v&&x<=y?A:v<=y?m:g},u=function(){return[n,i,o,l,c]},f=function(A){var m=A.map(function(g){return g.reduce(function(x,v){return x+Math.abs(v)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(A,m,g,x){var v,y,N,E,B,_,I,j,k,T,L,F,S,M,H,K=this.decode.FLATE_DECODE,Q="";if(this.__addimage__.isArrayBuffer(A)&&(A=new Uint8Array(A)),this.__addimage__.isArrayBufferView(A)){if(A=(N=new ltt(A)).imgData,y=N.bits,v=N.colorSpace,B=N.colors,[4,6].indexOf(N.colorType)!==-1){if(N.bits===8){k=(j=N.pixelBitlength==32?new Uint32Array(N.decodePixels().buffer):N.pixelBitlength==16?new Uint16Array(N.decodePixels().buffer):new Uint8Array(N.decodePixels().buffer)).length,L=new Uint8Array(k*N.colors),T=new Uint8Array(k);var G,X=N.pixelBitlength-N.bits;for(M=0,H=0;M<k;M++){for(S=j[M],G=0;G<X;)L[H++]=S>>>G&255,G+=N.bits;T[M]=S>>>G&255}}if(N.bits===16){k=(j=new Uint32Array(N.decodePixels().buffer)).length,L=new Uint8Array(k*(32/N.pixelBitlength)*N.colors),T=new Uint8Array(k*(32/N.pixelBitlength)),F=N.colors>1,M=0,H=0;for(var Z=0;M<k;)S=j[M++],L[H++]=S>>>0&255,F&&(L[H++]=S>>>16&255,S=j[M++],L[H++]=S>>>0&255),T[Z++]=S>>>16&255;y=8}x!==e.image_compression.NONE&&t()?(A=r(L,N.width*N.colors,N.colors,x),I=r(T,N.width,1,x)):(A=L,I=T,K=void 0)}if(N.colorType===3&&(v=this.color_spaces.INDEXED,_=N.palette,N.transparency.indexed)){var U=N.transparency.indexed,Y=0;for(M=0,k=U.length;M<k;++M)Y+=U[M];if((Y/=255)===k-1&&U.indexOf(0)!==-1)E=[U.indexOf(0)];else if(Y!==k){for(j=N.decodePixels(),T=new Uint8Array(j.length),M=0,k=j.length;M<k;M++)T[M]=U[j[M]];I=r(T,N.width,1)}}var P=function(D){var W;switch(D){case e.image_compression.FAST:W=11;break;case e.image_compression.MEDIUM:W=13;break;case e.image_compression.SLOW:W=14;break;default:W=12}return W}(x);return K===this.decode.FLATE_DECODE&&(Q="/Predictor "+P+" "),Q+="/Colors "+B+" /BitsPerComponent "+y+" /Columns "+N.width,(this.__addimage__.isArrayBuffer(A)||this.__addimage__.isArrayBufferView(A))&&(A=this.__addimage__.arrayBufferToBinaryString(A)),(I&&this.__addimage__.isArrayBuffer(I)||this.__addimage__.isArrayBufferView(I))&&(I=this.__addimage__.arrayBufferToBinaryString(I)),{alias:g,data:A,index:m,filter:K,decodeParameters:Q,transparency:E,palette:_,sMask:I,predictor:P,width:N.width,height:N.height,bitsPerComponent:y,colorSpace:v}}}})(xr.API),function(e){e.processGIF89A=function(t,r,a,n){var i=new ctt(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new nO(100).encode(d,100);return e.processJPEG.call(this,u,r,a,n)},e.processGIF87A=e.processGIF89A}(xr.API),qu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:n,green:a,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},qu.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){On.log("bit decode error:"+r)}},qu.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,n=0;n<t;n++)for(var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+8*n*4,l=0;l<8&&8*n+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},qu.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,n=0;n<e;n++){var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+2*n*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*n+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},qu.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var n=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*a;if(n<this.palette.length){var o=this.palette[n];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},qu.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,n=0;n<this.width;n++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,u=a*this.width*4+4*n;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},qu.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var n=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/t*255|0,u=n*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},qu.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=n,this.data[o+2]=a,this.data[o+3]=255}this.pos+=this.width%4}},qu.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=n,this.data[l+2]=a,this.data[l+3]=o}},qu.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,a,n){var i=new qu(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new nO(100).encode(c,100);return e.processJPEG.call(this,d,r,a,n)}}(xr.API),MX.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,a,n){var i=new MX(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new nO(100).encode(c,100);return e.processJPEG.call(this,d,r,a,n)}}(xr.API),xr.API.processRGBA=function(e,t,r){for(var a=e.data,n=a.length,i=new Uint8Array(n/4*3),o=new Uint8Array(n/4),l=0,c=0,d=0;d<n;d+=4){var u=a[d],f=a[d+1],A=a[d+2],m=a[d+3];i[l++]=u,i[l++]=f,i[l++]=A,o[c++]=m}var g=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},xr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ev=xr.API,Bj=Ev.getCharWidthsArray=function(e,t){var r,a,n=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:n.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:n.metadata.Unicode.kerning,u=d.fof?d.fof:1,f=t.doKerning!==!1,A=0,m=e.length,g=0,x=l[0]||c,v=[];for(r=0;r<m;r++)a=e.charCodeAt(r),typeof n.metadata.widthOfString=="function"?v.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(a))+o*(1e3/i)||0)/1e3):(A=f&&wn(d[a])==="object"&&!isNaN(parseInt(d[a][g],10))?d[a][g]/u:0,v.push((l[a]||x)/c+A)),g=a;return v},FX=Ev.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),n=t.charSpace||this.internal.getCharSpace();return Ev.processArabic&&(e=Ev.processArabic(e)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(e,r,n)/r:Bj.apply(this,arguments).reduce(function(i,o){return i+o},0)},PX=function(e,t,r,a){for(var n=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;n.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>a&&(n.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&n.push(e.slice(c,i)),n},RX=function(e,t,r){r||(r={});var a,n,i,o,l,c,d,u=[],f=[u],A=r.textIndent||0,m=0,g=0,x=e.split(" "),v=Bj.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),N=[];x.map(function(B){(B=B.split(/\s*\n/)).length>1?N=N.concat(B.map(function(_,I){return(I&&_.length?`
`:"")+_})):N.push(B[0])}),x=N,c=FX.apply(this,[y,r])}for(i=0,o=x.length;i<o;i++){var E=0;if(a=x[i],c&&a[0]==`
`&&(a=a.substr(1),E=1),A+m+(g=(n=Bj.apply(this,[a,r])).reduce(function(B,_){return B+_},0))>t||E){if(g>t){for(l=PX.apply(this,[a,n,t-(A+m),t]),u.push(l.shift()),u=[l.pop()];l.length;)f.push([l.shift()]);g=n.slice(a.length-(u[0]?u[0].length:0)).reduce(function(B,_){return B+_},0)}else u=[a];f.push(u),A=g+c,m=v}else u.push(a),A+=m+g,m=v}return d=c?function(B,_){return(_?y:"")+B.join(" ")}:function(B){return B.join(" ")},f.map(d)},Ev.splitTextToSize=function(e,t,r){var a,n=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var f=this.internal.getFont(u.fontName,u.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/n;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/n:0,i.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=a.length;l<c;l++)d=d.concat(RX.apply(this,[a[l],o,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},a={},n=0;n<t.length;n++)r[t[n]]="0123456789abcdef"[n],a["0123456789abcdef"[n]]=t[n];var i=function(f){return"0x"+parseInt(f,10).toString(16)},o=e.__fontmetrics__.compress=function(f){var A,m,g,x,v=["{"];for(var y in f){if(A=f[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=i(y).slice(2)).slice(0,-1)+a[m.slice(-1)]),typeof A=="number")A<0?(g=i(A).slice(3),x="-"):(g=i(A).slice(2),x=""),g=x+g.slice(0,-1)+a[g.slice(-1)];else{if(wn(A)!=="object")throw new Error("Don't know what to do with value type "+wn(A)+".");g=o(A)}v.push(m+g)}return v.push("}"),v.join("")},l=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var A,m,g,x,v={},y=1,N=v,E=[],B="",_="",I=f.length-1,j=1;j<I;j+=1)(x=f[j])=="'"?A?(g=A.join(""),A=void 0):A=[]:A?A.push(x):x=="{"?(E.push([N,g]),N={},g=void 0):x=="}"?((m=E.pop())[0][m[1]]=N,g=void 0,N=m[0]):x=="-"?y=-1:g===void 0?r.hasOwnProperty(x)?(B+=r[x],g=parseInt(B,16)*y,y=1,B=""):B+=x:r.hasOwnProperty(x)?(_+=r[x],N[g]=parseInt(_,16)*y,y=1,g=void 0,_=""):_+=x;return v},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var A=f.font,m=u.Unicode[A.postScriptName];m&&(A.metadata.Unicode={},A.metadata.Unicode.widths=m.widths,A.metadata.Unicode.kerning=m.kerning);var g=d.Unicode[A.postScriptName];g&&(A.metadata.Unicode.encoding=g,A.encoding=g.codePages[0])}])}(xr.API),function(e){var t=function(r){for(var a=r.length,n=new Uint8Array(a),i=0;i<a;i++)n[i]=r.charCodeAt(i);return n};e.API.events.push(["addFont",function(r){var a=void 0,n=r.font,i=r.instance;if(!n.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if(typeof(a=i.existsFileInVFS(n.postScriptName)===!1?i.loadFile(n.postScriptName):i.getFileFromVFS(n.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(k2(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(n,a)}}])}(xr),function(e){function t(){return(Ur.canvg?Promise.resolve(Ur.canvg):ps(()=>import("./index.es-alGOayNl.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}xr.API.addSvgAsImage=function(r,a,n,i,o,l,c,d){if(isNaN(a)||isNaN(n))throw On.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw On.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var f=u.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,u.width,u.height);var A={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(g){return g.fromString(f,r,A)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(A)}).then(function(){m.addImage(u.toDataURL("image/jpeg",1),a,n,i,o,c,d)})}}(),xr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var n=0;n<this.internal.pages[a].length;n++)this.internal.pages[a][n]=this.internal.pages[a][n].replace(t,r);return this},xr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var a,n,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,f=0;function A(g,x){var v,y=!1;for(v=0;v<g.length;v+=1)g[v]===x&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(f=0;f<m;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(wn(e)==="object"){for(n in e)if(i=e[n],A(l,n)&&i!==void 0){if(r[n].type==="boolean"&&typeof i=="boolean")r[n].value=i;else if(r[n].type==="name"&&A(r[n].valueSet,i))r[n].value=i;else if(r[n].type==="integer"&&Number.isInteger(i))r[n].value=i;else if(r[n].type==="array"){for(d=0;d<i.length;d+=1)if(a=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(a=!1);a===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[n].value="["+c.join(" ")+"]"}else r[n].value=r[n].defaultValue;r[n].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,x=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?x.push("/"+g+" /"+r[g].value):x.push("/"+g+" "+r[g].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',n=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(a)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+n.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(n+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(a,n){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(xr.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],f=0,A=i.length;f<A;++f){if(l=o.metadata.characterToGlyph(i.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},a=function(i){var o,l,c,d,u,f,A;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,A=(l=Object.keys(i).sort(function(m,g){return m-g})).length;f<A;f++)o=l[f],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,A=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",g=0;g<A.length;g++)m+=String.fromCharCode(A[g]);var x=d();u({data:m,addLength1:!0,objectId:x}),c("endobj");var v=d();u({data:a(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var y=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Yv(l.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var N=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+Yv(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+v+" 0 R"),c("/BaseFont /"+Yv(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+N+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,A="",m=0;m<f.length;m++)A+=String.fromCharCode(f[m]);var g=d();u({data:A,addLength1:!0,objectId:g}),c("endobj");var x=d();u({data:a(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var v=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Yv(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+Yv(l.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var n=function(i){var o,l=i.text||"",c=i.x,d=i.y,u=i.options||{},f=i.mutex||{},A=f.pdfEscape,m=f.activeFontKey,g=f.fonts,x=m,v="",y=0,N="",E=g[x].encoding;if(g[x].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:f};for(N=l,x=m,Array.isArray(l)&&(N=l[0]),y=0;y<N.length;y+=1)g[x].metadata.hasOwnProperty("cmap")&&(o=g[x].metadata.cmap.unicode.codeMap[N[y].charCodeAt(0)]),o||N[y].charCodeAt(0)<256&&g[x].metadata.hasOwnProperty("Unicode")?v+=N[y]:v+="";var B="";return parseInt(x.slice(1))<14||E==="WinAnsiEncoding"?B=A(v,x).split("").map(function(_){return _.charCodeAt(0).toString(16)}).join(""):E==="Identity-H"&&(B=r(v,g[x])),f.isHex=!0,{text:B,x:c,y:d,options:u,mutex:f}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([n(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(n(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=n(Object.assign({},c,{text:o})).text}])}(xr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,a){return t.call(this),this.internal.vFS[r]=a,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(xr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(a){var n,i,o,l,c,d,u,f=t,A=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),N=!1,E=0;this.__bidiEngine__={};var B=function(F){var S=F.charCodeAt(),M=S>>8,H=x[M];return H!==void 0?f[256*H+(255&S)]:M===252||M===253?"AL":y.test(M)?"L":M===8?"R":"N"},_=function(F){for(var S,M=0;M<F.length;M++){if((S=B(F.charAt(M)))==="L")return!1;if(S==="R")return!0}return!1},I=function(F,S,M,H){var K,Q,G,X,Z=S[H];switch(Z){case"L":case"R":N=!1;break;case"N":case"AN":break;case"EN":N&&(Z="AN");break;case"AL":N=!0,Z="R";break;case"WS":Z="N";break;case"CS":H<1||H+1>=S.length||(K=M[H-1])!=="EN"&&K!=="AN"||(Q=S[H+1])!=="EN"&&Q!=="AN"?Z="N":N&&(Q="AN"),Z=Q===K?Q:"N";break;case"ES":Z=(K=H>0?M[H-1]:"B")==="EN"&&H+1<S.length&&S[H+1]==="EN"?"EN":"N";break;case"ET":if(H>0&&M[H-1]==="EN"){Z="EN";break}if(N){Z="N";break}for(G=H+1,X=S.length;G<X&&S[G]==="ET";)G++;Z=G<X&&S[G]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(X=S.length,G=H+1;G<X&&S[G]==="NSM";)G++;if(G<X){var U=F[H],Y=U>=1425&&U<=2303||U===64286;if(K=S[G],Y&&(K==="R"||K==="AL")){Z="R";break}}}Z=H<1||(K=S[H-1])==="B"?"N":M[H-1];break;case"B":N=!1,n=!0,Z=E;break;case"S":i=!0,Z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":N=!1;break;case"BN":Z="N"}return Z},j=function(F,S,M){var H=F.split("");return M&&k(H,M,{hiLevel:E}),H.reverse(),S&&S.reverse(),H.join("")},k=function(F,S,M){var H,K,Q,G,X,Z=-1,U=F.length,Y=0,P=[],D=E?m:A,W=[];for(N=!1,n=!1,i=!1,K=0;K<U;K++)W[K]=B(F[K]);for(Q=0;Q<U;Q++){if(X=Y,P[Q]=I(F,W,P,Q),H=240&(Y=D[X][g[P[Q]]]),Y&=15,S[Q]=G=D[Y][5],H>0)if(H===16){for(K=Z;K<Q;K++)S[K]=1;Z=-1}else Z=-1;if(D[Y][6])Z===-1&&(Z=Q);else if(Z>-1){for(K=Z;K<Q;K++)S[K]=G;Z=-1}W[Q]==="B"&&(S[Q]=0),M.hiLevel|=G}i&&function(J,ce,ie){for(var re=0;re<ie;re++)if(J[re]==="S"){ce[re]=E;for(var de=re-1;de>=0&&J[de]==="WS";de--)ce[de]=E}}(W,S,U)},T=function(F,S,M,H,K){if(!(K.hiLevel<F)){if(F===1&&E===1&&!n)return S.reverse(),void(M&&M.reverse());for(var Q,G,X,Z,U=S.length,Y=0;Y<U;){if(H[Y]>=F){for(X=Y+1;X<U&&H[X]>=F;)X++;for(Z=Y,G=X-1;Z<G;Z++,G--)Q=S[Z],S[Z]=S[G],S[G]=Q,M&&(Q=M[Z],M[Z]=M[G],M[G]=Q);Y=X}Y++}}},L=function(F,S,M){var H=F.split(""),K={hiLevel:E};return M||(M=[]),k(H,M,K),function(Q,G,X){if(X.hiLevel!==0&&u)for(var Z,U=0;U<Q.length;U++)G[U]===1&&(Z=v.indexOf(Q[U]))>=0&&(Q[U]=v[Z+1])}(H,M,K),T(2,H,S,M,K),T(1,H,S,M,K),H.join("")};return this.__bidiEngine__.doBidiReorder=function(F,S,M){if(function(K,Q){if(Q)for(var G=0;G<K.length;G++)Q[G]=G;l===void 0&&(l=_(K)),d===void 0&&(d=_(K))}(F,S),o||!c||d)if(o&&c&&l^d)E=l?1:0,F=j(F,S,M);else if(!o&&c&&d)E=l?1:0,F=L(F,S,M),F=j(F,S);else if(!o||l||c||d){if(o&&!c&&l^d)F=j(F,S),l?(E=0,F=L(F,S,M)):(E=1,F=L(F,S,M),F=j(F,S));else if(o&&l&&!c&&d)E=1,F=L(F,S,M),F=j(F,S);else if(!o&&!c&&l^d){var H=u;l?(E=1,F=L(F,S,M),E=0,u=!1,F=L(F,S,M),u=H):(E=0,F=L(F,S,M),F=j(F,S),E=1,u=!1,F=L(F,S,M),u=H,F=j(F,S))}}else E=0,F=L(F,S,M);else E=l?1:0,F=L(F,S,M);return F},this.__bidiEngine__.setOptions=function(F){F&&(o=F.isInputVisual,c=F.isOutputVisual,l=F.isInputRtl,d=F.isOutputRtl,u=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(a){var n=a.text,i=(a.x,a.y,a.options||{}),o=(a.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(n)==="[object Array]"){var l=0;for(o=[],l=0;l<n.length;l+=1)Object.prototype.toString.call(n[l])==="[object Array]"?o.push([r.doBidiReorder(n[l][0]),n[l][1],n[l][2]]):o.push([r.doBidiReorder(n[l])]);a.text=o}else a.text=r.doBidiReorder(n);r.setOptions({isInputVisual:!0})}])}(xr),xr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new gp(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Ett(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new dtt(this.contents),this.head=new ftt(this),this.name=new gtt(this),this.cmap=new Kue(this),this.toUnicode={},this.hhea=new htt(this),this.maxp=new xtt(this),this.hmtx=new vtt(this),this.post=new mtt(this),this.os2=new Att(this),this.loca=new Ntt(this),this.glyf=new btt(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,a,n,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(a=255&(n=this.post.italic_angle),(32768&(r=n>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,a){var n,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)n=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(n))+a*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},e}();var Nf,gp=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,a;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(t){var r,a,n;for(n=[],r=0,a=t.length;0<=a?r<a:r>a;r=0<=a?++r:--r)n.push(this.writeByte(t.charCodeAt(r)));return n},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,a,n,i,o,l,c;return t=this.readByte(),r=this.readByte(),a=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^n)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*a+4294967296*n+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,a;return r=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,a;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push(this.readByte());return r},e.prototype.write=function(t){var r,a,n,i;for(i=[],a=0,n=t.length;a<n;a++)r=t[a],i.push(this.writeByte(r));return i},e}(),dtt=function(){var e;function t(r){var a,n,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},n=0,i=this.tableCount;0<=i?n<i:n>i;n=0<=i?++n:--n)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(r){var a,n,i,o,l,c,d,u,f,A,m,g,x;for(x in m=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(m)/c),o=Math.floor(f/c),u=16*m-f,(n=new gp).writeInt(this.scalarType),n.writeShort(m),n.writeShort(f),n.writeShort(o),n.writeShort(u),i=16*m,d=n.pos+i,l=null,g=[],r)for(A=r[x],n.writeString(x),n.writeInt(e(A)),n.writeInt(d),n.writeInt(A.length),g=g.concat(A),x==="head"&&(l=d),d+=A.length;d%4;)g.push(0),d++;return n.write(g),a=2981146554-e(n.data),n.pos=l+8,n.writeUInt32(a),n.data},e=function(r){var a,n,i,o;for(r=Wue.call(r);r.length%4;)r.push(0);for(i=new gp(r),n=0,a=0,o=r.length;a<o;a=a+=4)n+=i.readUInt32();return 4294967295&n},t}(),utt={}.hasOwnProperty,Qh=function(e,t){for(var r in t)utt.call(t,r)&&(e[r]=t[r]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e};Nf=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var ftt=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Qh(t,Nf),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var a;return(a=new gp).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(r),a.writeShort(this.glyphDataFormat),a.data},t}(),UX=function(){function e(t,r){var a,n,i,o,l,c,d,u,f,A,m,g,x,v,y,N,E;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),A=m/2,t.pos+=6,i=function(){var B,_;for(_=[],c=B=0;0<=A?B<A:B>A;c=0<=A?++B:--B)_.push(t.readUInt16());return _}(),t.pos+=2,x=function(){var B,_;for(_=[],c=B=0;0<=A?B<A:B>A;c=0<=A?++B:--B)_.push(t.readUInt16());return _}(),d=function(){var B,_;for(_=[],c=B=0;0<=A?B<A:B>A;c=0<=A?++B:--B)_.push(t.readUInt16());return _}(),u=function(){var B,_;for(_=[],c=B=0;0<=A?B<A:B>A;c=0<=A?++B:--B)_.push(t.readUInt16());return _}(),n=(this.length-t.pos+this.offset)/2,l=function(){var B,_;for(_=[],c=B=0;0<=n?B<n:B>n;c=0<=n?++B:--B)_.push(t.readUInt16());return _}(),c=y=0,E=i.length;y<E;c=++y)for(v=i[c],a=N=g=x[c];g<=v?N<=v:N>=v;a=g<=v?++N:--N)u[c]===0?o=a+d[c]:(o=l[u[c]/2+(a-g)-(A-c)]||0)!==0&&(o+=d[c]),this.codeMap[a]=65535&o}t.pos=f}return e.encode=function(t,r){var a,n,i,o,l,c,d,u,f,A,m,g,x,v,y,N,E,B,_,I,j,k,T,L,F,S,M,H,K,Q,G,X,Z,U,Y,P,D,W,J,ce,ie,re,de,oe,be,q;switch(H=new gp,o=Object.keys(t).sort(function(we,Te){return we-Te}),r){case"macroman":for(x=0,v=function(){var we=[];for(g=0;g<256;++g)we.push(0);return we}(),N={0:0},i={},K=0,Z=o.length;K<Z;K++)N[de=t[n=o[K]]]==null&&(N[de]=++x),i[n]={old:t[n],new:N[t[n]]},v[n]=N[t[n]];return H.writeUInt16(1),H.writeUInt16(0),H.writeUInt32(12),H.writeUInt16(0),H.writeUInt16(262),H.writeUInt16(0),H.write(v),{charMap:i,subtable:H.data,maxGlyphID:x+1};case"unicode":for(S=[],f=[],E=0,N={},a={},y=d=null,Q=0,U=o.length;Q<U;Q++)N[_=t[n=o[Q]]]==null&&(N[_]=++E),a[n]={old:_,new:N[_]},l=N[_]-n,y!=null&&l===d||(y&&f.push(y),S.push(n),d=l),y=n;for(y&&f.push(y),f.push(65535),S.push(65535),L=2*(T=S.length),k=2*Math.pow(Math.log(T)/Math.LN2,2),A=Math.log(k/2)/Math.LN2,j=2*T-k,c=[],I=[],m=[],g=G=0,Y=S.length;G<Y;g=++G){if(F=S[g],u=f[g],F===65535){c.push(0),I.push(0);break}if(F-(M=a[F].new)>=32768)for(c.push(0),I.push(2*(m.length+T-g)),n=X=F;F<=u?X<=u:X>=u;n=F<=u?++X:--X)m.push(a[n].new);else c.push(M-F),I.push(0)}for(H.writeUInt16(3),H.writeUInt16(1),H.writeUInt32(12),H.writeUInt16(4),H.writeUInt16(16+8*T+2*m.length),H.writeUInt16(0),H.writeUInt16(L),H.writeUInt16(k),H.writeUInt16(A),H.writeUInt16(j),ie=0,P=f.length;ie<P;ie++)n=f[ie],H.writeUInt16(n);for(H.writeUInt16(0),re=0,D=S.length;re<D;re++)n=S[re],H.writeUInt16(n);for(oe=0,W=c.length;oe<W;oe++)l=c[oe],H.writeUInt16(l);for(be=0,J=I.length;be<J;be++)B=I[be],H.writeUInt16(B);for(q=0,ce=m.length;q<ce;q++)x=m[q],H.writeUInt16(x);return{charMap:a,subtable:H.data,maxGlyphID:E+1}}},e}(),Kue=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Qh(t,Nf),t.prototype.tag="cmap",t.prototype.parse=function(r){var a,n,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)a=new UX(r,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},t.encode=function(r,a){var n,i;return a==null&&(a="macroman"),n=UX.encode(r,a),(i=new gp).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},t}(),htt=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Qh(t,Nf),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),Att=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Qh(t,Nf),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var a,n;for(n=[],a=0;a<10;++a)n.push(r.readByte());return n}(),this.charRange=function(){var a,n;for(n=[],a=0;a<4;++a)n.push(r.readInt());return n}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var a,n;for(n=[],a=0;a<2;a=++a)n.push(r.readInt());return n}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),mtt=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Qh(t,Nf),t.prototype.tag="post",t.prototype.parse=function(r){var a,n,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(n=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)a=r.readByte(),i.push(this.names.push(r.readString(a)));return i;case 151552:return n=r.readUInt16(),this.offsets=r.read(n);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(r.readUInt32());return d}).call(this)}},t}(),ptt=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},gtt=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Qh(t,Nf),t.prototype.tag="name",t.prototype.parse=function(r){var a,n,i,o,l,c,d,u,f,A,m;for(r.pos=this.offset,r.readShort(),a=r.readShort(),c=r.readShort(),n=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)n.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(d={},o=f=0,A=n.length;f<A;o=++f)i=n[o],r.pos=i.offset,u=r.readString(i.length),l=new ptt(u,i),d[m=i.nameID]==null&&(d[m]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),xtt=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Qh(t,Nf),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),vtt=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Qh(t,Nf),t.prototype.tag="hmtx",t.prototype.parse=function(r){var a,n,i,o,l,c,d;for(r.pos=this.offset,this.metrics=[],a=0,c=this.file.hhea.numberOfMetrics;0<=c?a<c:a>c;a=0<=c?++a:--a)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,f;for(f=[],a=u=0;0<=i?u<i:u>i;a=0<=i?++u:--u)f.push(r.readInt16());return f}(),this.widths=(function(){var u,f,A,m;for(m=[],u=0,f=(A=this.metrics).length;u<f;u++)o=A[u],m.push(o.advance);return m}).call(this),n=this.widths[this.widths.length-1],d=[],a=l=0;0<=i?l<i:l>i;a=0<=i?++l:--l)d.push(this.widths.push(n));return d},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),Wue=[].slice,btt=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Qh(t,Nf),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var a,n,i,o,l,c,d,u,f,A;return r in this.cache?this.cache[r]:(o=this.file.loca,a=this.file.contents,n=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(a.pos=this.offset+n,l=(c=new gp(a.read(i))).readShort(),u=c.readShort(),A=c.readShort(),d=c.readShort(),f=c.readShort(),this.cache[r]=l===-1?new wtt(c,u,A,d,f):new ytt(c,l,u,A,d,f),this.cache[r]))},t.prototype.encode=function(r,a,n){var i,o,l,c,d;for(l=[],o=[],c=0,d=a.length;c<d;c++)i=r[a[c]],o.push(l.length),i&&(l=l.concat(i.encode(n)));return o.push(l.length),{table:l,offsets:o}},t}(),ytt=function(){function e(t,r,a,n,i,o){this.raw=t,this.numberOfContours=r,this.xMin=a,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),wtt=function(){function e(t,r,a,n,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=a,this.xMax=n,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,a;for(r=new gp(Wue.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),Ntt=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Qh(t,Nf),t.prototype.tag="loca",t.prototype.parse=function(r){var a,n;return r.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,a){for(var n=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<n.length;++l)if(n[l]=i,o<a.length&&a[o]==l){++o,n[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var u=new Array(4*n.length),f=0;f<n.length;++f)u[4*f+3]=255&n[f],u[4*f+2]=(65280&n[f])>>8,u[4*f+1]=(16711680&n[f])>>16,u[4*f]=(4278190080&n[f])>>24;return u},t}(),Ett=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,a,n,i;for(r in n=this.font.cmap.tables[0].codeMap,t={},i=this.subset)a=i[r],t[r]=n[a];return t},e.prototype.glyphsFor=function(t){var r,a,n,i,o,l,c;for(n={},o=0,l=t.length;o<l;o++)n[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],n)(a=n[i])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))a=c[i],n[i]=a;return n},e.prototype.encode=function(t,r){var a,n,i,o,l,c,d,u,f,A,m,g,x,v,y;for(n in a=Kue.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},y=a.charMap)m[(c=y[n]).old]=c.new;for(g in A=a.maxGlyphID,o)g in m||(m[g]=A++);return u=function(N){var E,B;for(E in B={},N)B[N[E]]=E;return B}(m),f=Object.keys(u).sort(function(N,E){return N-E}),x=function(){var N,E,B;for(B=[],N=0,E=f.length;N<E;N++)l=f[N],B.push(u[l]);return B}(),i=this.font.glyf.encode(o,x,m),d=this.font.loca.encode(i.offsets,x),v={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},e}();xr.API.PDFObject=function(){var e;function t(){}return e=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},t.convert=function(r){var a,n,i,o;if(Array.isArray(r))return"["+function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)a=r[l],d.push(t.convert(a));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(n in i=["<<"],r)o=r[n],i.push("/"+n+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();function Xue(e,t,r,a,n){a=a||{};var i=1.15,o=n.internal.scaleFactor,l=n.internal.getFontSize()/o,c=n.getLineHeightFactor?n.getLineHeightFactor():i,d=l*c,u=/\r\n|\r|\n/g,f="",A=1;if((a.valign==="middle"||a.valign==="bottom"||a.halign==="center"||a.halign==="right")&&(f=typeof e=="string"?e.split(u):e,A=f.length||1),r+=l*(2-i),a.valign==="middle"?r-=A/2*d:a.valign==="bottom"&&(r-=A*d),a.halign==="center"||a.halign==="right"){var m=l;if(a.halign==="center"&&(m*=.5),f&&A>=1){for(var g=0;g<f.length;g++)n.text(f[g],t-n.getStringUnitWidth(f[g])*m,r),r+=d;return n}t-=n.getStringUnitWidth(e)*m}return a.halign==="justify"?n.text(e,t,r,{maxWidth:a.maxWidth||100,align:"justify"}):n.text(e,t,r),n}var HX={},Fb=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:HX=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var a,n,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var d=this.getFontList()[c];d&&d.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),l=d[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var u=e.unifyColor(t.fillColor);u&&(a=this.jsPDFDocument).setFillColor.apply(a,u),u=e.unifyColor(t.textColor),u&&(n=this.jsPDFDocument).setTextColor.apply(n,u),u=e.unifyColor(t.lineColor),u&&(i=this.jsPDFDocument).setDrawColor.apply(i,u),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,a){return this.jsPDFDocument.splitTextToSize(t,r,a)},e.prototype.rect=function(t,r,a,n,i){return this.jsPDFDocument.rect(t,r,a,n,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return HX||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),bP=function(e,t){return bP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(r[n]=a[n])},bP(e,t)};function Yue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");bP(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Jue=function(e){Yue(t,e);function t(r){var a=e.call(this)||this;return a._element=r,a}return t}(Array);function Ctt(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function jtt(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function QS(e,t,r){r.applyStyles(t,!0);var a=Array.isArray(e)?e:[e],n=a.map(function(i){return r.getTextWidth(i)}).reduce(function(i,o){return Math.max(i,o)},0);return n}function Zue(e,t,r,a){var n=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:n,lineColor:i});var o=efe(n,!1);o&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),a.y-r.y,o)}function efe(e,t){var r=e>0,a=t||t===0;return r&&a?"DF":r?"S":a?"F":null}function b3(e,t){var r,a,n,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(a=e.top)!==null&&a!==void 0?a:t,right:(n=e.right)!==null&&n!==void 0?n:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function tfe(e,t){var r=b3(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function ktt(e,t,r,a,n){var i={},o=1.3333333333333333,l=sO(t,function(E){return n.getComputedStyle(E).backgroundColor});l!=null&&(i.fillColor=l);var c=sO(t,function(E){return n.getComputedStyle(E).color});c!=null&&(i.textColor=c);var d=_tt(a,r);d&&(i.cellPadding=d);var u="borderTopColor",f=o*r,A=a.borderTopWidth;if(a.borderBottomWidth===A&&a.borderRightWidth===A&&a.borderLeftWidth===A){var m=(parseFloat(A)||0)/f;m&&(i.lineWidth=m)}else i.lineWidth={top:(parseFloat(a.borderTopWidth)||0)/f,right:(parseFloat(a.borderRightWidth)||0)/f,bottom:(parseFloat(a.borderBottomWidth)||0)/f,left:(parseFloat(a.borderLeftWidth)||0)/f},i.lineWidth.top||(i.lineWidth.right?u="borderRightColor":i.lineWidth.bottom?u="borderBottomColor":i.lineWidth.left&&(u="borderLeftColor"));var g=sO(t,function(E){return n.getComputedStyle(E)[u]});g!=null&&(i.lineColor=g);var x=["left","right","center","justify"];x.indexOf(a.textAlign)!==-1&&(i.halign=a.textAlign),x=["middle","bottom","top"],x.indexOf(a.verticalAlign)!==-1&&(i.valign=a.verticalAlign);var v=parseInt(a.fontSize||"");isNaN(v)||(i.fontSize=v/o);var y=Stt(a);y&&(i.fontStyle=y);var N=(a.fontFamily||"").toLowerCase();return e.indexOf(N)!==-1&&(i.font=N),i}function Stt(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function sO(e,t){var r=rfe(e,t);if(!r)return null;var a=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!a||!Array.isArray(a))return null;var n=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])],i=parseInt(a[4]);return i===0||isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function rfe(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:rfe(e.parentElement,t):r}function _tt(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],a=96/(72/t),n=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(l){return parseInt(l||"0")/a}),o=b3(i,0);return n>o.top&&(o.top=n),n>o.bottom&&(o.bottom=n),o}function afe(e,t,r,a,n){var i,o;a===void 0&&(a=!1),n===void 0&&(n=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),d=e.scaleFactor(),u=[],f=[],A=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:u,body:f,foot:A};for(var m=0;m<l.rows.length;m++){var g=l.rows[m],x=(o=(i=g==null?void 0:g.parentElement)===null||i===void 0?void 0:i.tagName)===null||o===void 0?void 0:o.toLowerCase(),v=Ttt(c,d,r,g,a,n);v&&(x==="thead"?u.push(v):x==="tfoot"?A.push(v):f.push(v))}return{head:u,body:f,foot:A}}function Ttt(e,t,r,a,n,i){for(var o=new Jue(a),l=0;l<a.cells.length;l++){var c=a.cells[l],d=r.getComputedStyle(c);if(n||d.display!=="none"){var u=void 0;i&&(u=ktt(e,c,t,d,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:u,_element:c,content:Btt(c)})}}var f=r.getComputedStyle(a);if(o.length>0&&(n||f.display!=="none"))return o}function Btt(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function Itt(e,t,r){for(var a=0,n=[e,t,r];a<n.length;a++){var i=n[a];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function L0(e,t,r,a,n){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(i[c]=l[c])}return i}function nfe(e,t){var r=new Fb(e),a=r.getDocumentOptions(),n=r.getGlobalOptions();Itt(n,a,t);var i=L0({},n,a,t),o;typeof window<"u"&&(o=window);var l=Ott(n,a,t),c=Dtt(n,a,t),d=Ftt(r,i),u=Rtt(r,i,o);return{id:t.tableId,content:u,hooks:c,styles:l,settings:d}}function Ott(e,t,r){for(var a={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},n=function(c){if(c==="columnStyles"){var d=e[c],u=t[c],f=r[c];a.columnStyles=L0({},d,u,f)}else{var A=[e,t,r],m=A.map(function(g){return g[c]||{}});a[c]=L0({},m[0],m[1],m[2])}},i=0,o=Object.keys(a);i<o.length;i++){var l=o[i];n(l)}return a}function Dtt(e,t,r){for(var a=[e,t,r],n={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,o=a;i<o.length;i++){var l=o[i];l.didParseCell&&n.didParseCell.push(l.didParseCell),l.willDrawCell&&n.willDrawCell.push(l.willDrawCell),l.didDrawCell&&n.didDrawCell.push(l.didDrawCell),l.willDrawPage&&n.willDrawPage.push(l.willDrawPage),l.didDrawPage&&n.didDrawPage.push(l.didDrawPage)}return n}function Ftt(e,t){var r,a,n,i,o,l,c,d,u,f,A,m,g=b3(t.margin,40/e.scaleFactor()),x=(r=Ptt(e,t.startY))!==null&&r!==void 0?r:g.top,v;t.showFoot===!0?v="everyPage":t.showFoot===!1?v="never":v=(a=t.showFoot)!==null&&a!==void 0?a:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(n=t.showHead)!==null&&n!==void 0?n:"everyPage";var N=(i=t.useCss)!==null&&i!==void 0?i:!1,E=t.theme||(N?"plain":"striped"),B=!!t.horizontalPageBreak,_=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:N,theme:E,startY:x,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(d=t.rowPageBreak)!==null&&d!==void 0?d:"auto",tableWidth:(u=t.tableWidth)!==null&&u!==void 0?u:"auto",showHead:y,showFoot:v,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(A=t.tableLineColor)!==null&&A!==void 0?A:200,horizontalPageBreak:B,horizontalPageBreakRepeat:_,horizontalPageBreakBehaviour:(m=t.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function Ptt(e,t){var r=e.getLastAutoTable(),a=e.scaleFactor(),n=e.pageNumber(),i=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;i=o===n}return typeof t=="number"?t:(t==null||t===!1)&&i&&(r==null?void 0:r.finalY)!=null?r.finalY+20/a:null}function Rtt(e,t,r){var a=t.head||[],n=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var l=afe(e,t.html,r,o,t.useCss)||{};a=l.head||a,n=l.body||a,i=l.foot||a}else console.error("Cannot parse html in non browser environment")}var c=t.columns||Ltt(a,n,i);return{columns:c,head:a,body:n,foot:i}}function Ltt(e,t,r){var a=e[0]||t[0]||r[0]||[],n=[];return Object.keys(a).filter(function(i){return i!=="_element"}).forEach(function(i){var o=1,l;Array.isArray(a)?l=a[parseInt(i)]:l=a[i],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var d=void 0;Array.isArray(a)?d=n.length:d=i+(c>0?"_".concat(c):"");var u={dataKey:d};n.push(u)}}),n}var yP=function(){function e(t,r,a){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=a,this.doc=t.getDocument()}return e}(),Mtt=function(e){Yue(t,e);function t(r,a,n,i,o,l){var c=e.call(this,r,a,l)||this;return c.cell=n,c.row=i,c.column=o,c.section=i.section,c}return t}(yP),Utt=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,a){return r+a.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,a){return r+a.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,a,n,i,o){for(var l=0,c=r;l<c.length;l++){var d=c[l],u=new Mtt(t,this,a,n,i,o),f=d(u)===!1;if(a.text=Array.isArray(a.text)?a.text:[a.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var a=0,n=this.hooks.didDrawPage;a<n.length;a++){var i=n[a];i(new yP(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var a=0,n=this.hooks.willDrawPage;a<n.length;a++){var i=n[a];i(new yP(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(n,i){return n+i.wrappedWidth},0);return r}else{var a=this.settings.margin;return t-a.left-a.right}},e}(),sfe=function(){function e(t,r,a,n,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof Jue&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=a,this.cells=n,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(a,n){var i;return Math.max(a,((i=r.cells[n.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(a){var n=r.cells[a.index];return n?n.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var a=this;return t.reduce(function(n,i){var o=a.cells[i.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),d=c+l;return d>n?d:n},0)},e}(),ife=function(){function e(t,r,a){var n;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=a,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(n=t.content)!==null&&n!==void 0?n:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=i!=null?""+i:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var a;if(this.styles.halign==="right")a=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var n=this.width-this.padding("horizontal");a=this.x+n/2+this.padding("left")}else a=this.x+this.padding("left");return{x:a,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var a=Array.isArray(this.text)?this.text.length:1,n=this.styles.fontSize/t*r,i=a*n+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=b3(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),Htt=function(){function e(t,r,a){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=a}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,a=0,n=t.allRows();a<n.length;a++){var i=n[a],o=i.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},e}();function Qtt(e,t){ztt(e,t);var r=[],a=0;t.columns.forEach(function(i){var o=i.getMaxCustomCellWidth(t);o?i.width=o:(i.width=i.wrappedWidth,r.push(i)),a+=i.width});var n=t.getWidth(e.pageSize().width)-a;n&&(n=wP(r,n,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),n&&(n=wP(r,n,function(i){return i.minWidth})),n=Math.abs(n),!t.settings.horizontalPageBreak&&n>.1/e.scaleFactor()&&(n=n<1?n:Math.round(n),console.warn("Of the table content, ".concat(n," units width could not fit page"))),Vtt(t),Gtt(t,e),$tt(t)}function ztt(e,t){var r=e.scaleFactor(),a=t.settings.horizontalPageBreak,n=tfe(e,t);t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){var u=t.hooks.didParseCell;t.callCellHooks(e,u,d,i,c,null);var f=d.padding("horizontal");d.contentWidth=QS(d.text,d.styles,e)+f;var A=QS(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,e);if(d.minReadableWidth=A+d.padding("horizontal"),typeof d.styles.cellWidth=="number")d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if(d.styles.cellWidth==="wrap"||a===!0)d.contentWidth>n?(d.minWidth=n,d.wrappedWidth=n):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var m=10/r;d.minWidth=d.styles.minCellWidth||m,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d&&d.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,d.wrappedWidth),c.minWidth=Math.max(c.minWidth,d.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,d.minReadableWidth);else{var u=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=u.cellWidth||u.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}d&&(d.colSpan>1&&!c.minWidth&&(c.minWidth=d.minWidth),d.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=d.minWidth))}})}function wP(e,t,r){for(var a=t,n=e.reduce(function(m,g){return m+g.wrappedWidth},0),i=0;i<e.length;i++){var o=e[i],l=o.wrappedWidth/n,c=a*l,d=o.width+c,u=r(o),f=d<u?u:d;t-=f-o.width,o.width=f}if(t=Math.round(t*1e10)/1e10,t){var A=e.filter(function(m){return t<0?m.width>r(m):!0});A.length&&(t=wP(A,t,r))}return t}function $tt(e){for(var t={},r=1,a=e.allRows(),n=0;n<a.length;n++)for(var i=a[n],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=t[c.index];if(r>1)r--,delete i.cells[c.index];else if(d)d.cell.height+=i.height,r=d.cell.colSpan,delete i.cells[c.index],d.left--,d.left<=1&&delete t[c.index];else{var u=i.cells[c.index];if(!u)continue;if(u.height=i.height,u.rowSpan>1){var f=a.length-n,A=u.rowSpan>f?f:u.rowSpan;t[c.index]={cell:u,left:A,row:i}}}}}function Vtt(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var a=t[r],n=null,i=0,o=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(o-=1,o>1&&e.columns[l+1])i+=c.width,delete a.cells[c.index];else if(n){var d=n;delete a.cells[c.index],n=null,d.width=c.width+i}else{var d=a.cells[c.index];if(!d)continue;if(o=d.colSpan,i=0,d.colSpan>1){n=d,i+=c.width;continue}d.width=c.width+i}}}function Gtt(e,t){for(var r={count:0,height:0},a=0,n=e.allRows();a<n.length;a++){for(var i=n[a],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){t.applyStyles(d.styles,!0);var u=d.width-d.padding("horizontal");if(d.styles.overflow==="linebreak")d.text=t.splitTextToSize(d.text,u+1/t.scaleFactor(),{fontSize:d.styles.fontSize});else if(d.styles.overflow==="ellipsize")d.text=QX(d.text,u,d.styles,t,"...");else if(d.styles.overflow==="hidden")d.text=QX(d.text,u,d.styles,t,"");else if(typeof d.styles.overflow=="function"){var f=d.styles.overflow(d.text,u);typeof f=="string"?d.text=[f]:d.text=f}d.contentHeight=d.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var A=d.contentHeight/d.rowSpan;d.rowSpan>1&&r.count*r.height<A*d.rowSpan?r={height:A,count:d.rowSpan}:r&&r.count>0&&r.height>A&&(A=r.height),A>i.height&&(i.height=A)}}r.count--}}function QX(e,t,r,a,n){return e.map(function(i){return qtt(i,t,r,a,n)})}function qtt(e,t,r,a,n){var i=1e4*a.scaleFactor();if(t=Math.ceil(t*i)/i,t>=QS(e,r,a))return e;for(;t<QS(e+n,r,a)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+n}function ofe(e,t){var r=new Fb(e),a=Ktt(t,r.scaleFactor()),n=new Utt(t,a);return Qtt(r,n),r.applyStyles(r.userStyles),n}function Ktt(e,t){var r=e.content,a=Xtt(r.columns);if(r.head.length===0){var n=zX(a,"head");n&&r.head.push(n)}if(r.foot.length===0){var n=zX(a,"foot");n&&r.foot.push(n)}var i=e.settings.theme,o=e.styles;return{columns:a,head:iO("head",r.head,a,o,i,t),body:iO("body",r.body,a,o,i,t),foot:iO("foot",r.foot,a,o,i,t)}}function iO(e,t,r,a,n,i){var o={},l=t.map(function(c,d){for(var u=0,f={},A=0,m=0,g=0,x=r;g<x.length;g++){var v=x[g];if(o[v.index]==null||o[v.index].left===0)if(m===0){var y=void 0;Array.isArray(c)?y=c[v.index-A-u]:y=c[v.dataKey];var N={};typeof y=="object"&&!Array.isArray(y)&&(N=(y==null?void 0:y.styles)||{});var E=Ytt(e,v,d,n,a,i,N),B=new ife(y,E,e);f[v.dataKey]=B,f[v.index]=B,m=B.colSpan-1,o[v.index]={left:B.rowSpan-1,times:m}}else m--,A++;else o[v.index].left--,m=o[v.index].times,u++}return new sfe(c,d,e,f)});return l}function zX(e,t){var r={};return e.forEach(function(a){if(a.raw!=null){var n=Wtt(t,a.raw);n!=null&&(r[a.dataKey]=n)}}),Object.keys(r).length>0?r:null}function Wtt(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function Xtt(e){return e.map(function(t,r){var a,n;return typeof t=="object"?n=(a=t.dataKey)!==null&&a!==void 0?a:r:n=r,new Htt(n,t,r)})}function Ytt(e,t,r,a,n,i,o){var l=jtt(a),c;e==="head"?c=n.headStyles:e==="body"?c=n.bodyStyles:e==="foot"&&(c=n.footStyles);var d=L0({},l.table,l[e],n.styles,c),u=n.columnStyles[t.dataKey]||n.columnStyles[t.index]||{},f=e==="body"?u:{},A=e==="body"&&r%2===0?L0({},l.alternateRow,n.alternateRowStyles):{},m=Ctt(i),g=L0({},m,d,A,f);return L0(g,o)}function Jtt(e,t,r){var a;r===void 0&&(r={});var n=tfe(e,t),i=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(A){var m=t.columns.find(function(g){return g.dataKey===A||g.index===A});m&&!i.has(m.index)&&(i.set(m.index,!0),o.push(m.index),l.push(t.columns[m.index]),n-=m.wrappedWidth)});for(var d=!0,u=(a=r==null?void 0:r.start)!==null&&a!==void 0?a:0;u<t.columns.length;){if(i.has(u)){u++;continue}var f=t.columns[u].wrappedWidth;if(d||n>=f)d=!1,o.push(u),l.push(t.columns[u]),n-=f;else break;u++}return{colIndexes:o,columns:l,lastIndex:u-1}}function Ztt(e,t){for(var r=[],a=0;a<t.columns.length;a++){var n=Jtt(e,t,{start:a});n.columns.length&&(r.push(n),a=n.lastIndex)}return r}function lfe(e,t){var r=t.settings,a=r.startY,n=r.margin,i={x:n.left,y:a},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=a+n.bottom+o;if(r.pageBreak==="avoid"){var c=t.body,d=c.reduce(function(A,m){return A+m.height},0);l+=d}var u=new Fb(e);(r.pageBreak==="always"||r.startY!=null&&l>u.pageSize().height)&&(dfe(u),i.y=n.top),t.callWillDrawPageHooks(u,i);var f=L0({},i);t.startPageNumber=u.pageNumber(),r.horizontalPageBreak?ert(u,t,f,i):(u.applyStyles(u.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(A){return uA(u,t,A,i,t.columns)}),u.applyStyles(u.userStyles),t.body.forEach(function(A,m){var g=m===t.body.length-1;zS(u,t,A,g,f,i,t.columns)}),u.applyStyles(u.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(A){return uA(u,t,A,i,t.columns)})),Zue(u,t,f,i),t.callEndPageHooks(u,i),t.finalY=i.y,e.lastAutoTable=t,u.applyStyles(u.userStyles)}function ert(e,t,r,a){var n=Ztt(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")n.forEach(function(d,u){e.applyStyles(e.userStyles),u>0?S2(e,t,r,a,d.columns,!0):$X(e,t,a,d.columns),trt(e,t,r,a,d.columns),oO(e,t,a,d.columns)});else for(var o=-1,l=n[0],c=function(){var d=o;if(l){e.applyStyles(e.userStyles);var u=l.columns;o>=0?S2(e,t,r,a,u,!0):$X(e,t,a,u),d=VX(e,t,o+1,a,u),oO(e,t,a,u)}var f=d-o;n.slice(1).forEach(function(A){e.applyStyles(e.userStyles),S2(e,t,r,a,A.columns,!0),VX(e,t,o+1,a,A.columns,f),oO(e,t,a,A.columns)}),o=d};o<t.body.length-1;)c()}function $X(e,t,r,a){var n=t.settings;e.applyStyles(e.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&t.head.forEach(function(i){return uA(e,t,i,r,a)})}function trt(e,t,r,a,n){e.applyStyles(e.userStyles),t.body.forEach(function(i,o){var l=o===t.body.length-1;zS(e,t,i,l,r,a,n)})}function VX(e,t,r,a,n,i){e.applyStyles(e.userStyles),i=i??t.body.length;var o=Math.min(r+i,t.body.length),l=-1;return t.body.slice(r,o).forEach(function(c,d){var u=r+d===t.body.length-1,f=cfe(e,t,u,a);c.canEntireRowFit(f,n)&&(uA(e,t,c,a,n),l=r+d)}),l}function oO(e,t,r,a){var n=t.settings;e.applyStyles(e.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&t.foot.forEach(function(i){return uA(e,t,i,r,a)})}function rrt(e,t,r){var a=r.getLineHeight(e.styles.fontSize),n=e.padding("vertical"),i=Math.floor((t-n)/a);return Math.max(0,i)}function art(e,t,r,a){var n={};e.spansMultiplePages=!0,e.height=0;for(var i=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],d=e.cells[c.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var u=new ife(d.raw,d.styles,d.section);u=L0(u,d),u.text=[];var f=rrt(d,t,a);d.text.length>f&&(u.text=d.text.splice(f,d.text.length));var A=a.scaleFactor(),m=a.getLineHeightFactor();d.contentHeight=d.getContentHeight(A,m),d.contentHeight>=t&&(d.contentHeight=t,u.styles.minCellHeight-=t),d.contentHeight>e.height&&(e.height=d.contentHeight),u.contentHeight=u.getContentHeight(A,m),u.contentHeight>i&&(i=u.contentHeight),n[c.index]=u}}var g=new sfe(e.raw,-1,e.section,n,!0);g.height=i;for(var x=0,v=r.columns;x<v.length;x++){var c=v[x],u=g.cells[c.index];u&&(u.height=g.height);var d=e.cells[c.index];d&&(d.height=e.height)}return g}function nrt(e,t,r,a){var n=e.pageSize().height,i=a.settings.margin,o=i.top+i.bottom,l=n-o;t.section==="body"&&(l-=a.getHeadHeight(a.columns)+a.getFootHeight(a.columns));var c=t.getMinimumRowHeight(a.columns,e),d=c<r;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!d)return!1;var u=t.hasRowSpan(a.columns),f=t.getMaxCellHeight(a.columns)>l;return f?(u&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||a.settings.rowPageBreak==="avoid")}function zS(e,t,r,a,n,i,o){var l=cfe(e,t,a,i);if(r.canEntireRowFit(l,o))uA(e,t,r,i,o);else if(nrt(e,r,l,t)){var c=art(r,l,t,e);uA(e,t,r,i,o),S2(e,t,n,i,o),zS(e,t,c,a,n,i,o)}else S2(e,t,n,i,o),zS(e,t,r,a,n,i,o)}function uA(e,t,r,a,n){a.x=t.settings.margin.left;for(var i=0,o=n;i<o.length;i++){var l=o[i],c=r.cells[l.index];if(!c){a.x+=l.width;continue}e.applyStyles(c.styles),c.x=a.x,c.y=a.y;var d=t.callCellHooks(e,t.hooks.willDrawCell,c,r,l,a);if(d===!1){a.x+=l.width;continue}srt(e,c,a);var u=c.getTextPos();Xue(c.text,u.x,u.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,l,a),a.x+=l.width}a.y+=r.height}function srt(e,t,r){var a=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof a.lineWidth=="number"){var n=efe(a.lineWidth,a.fillColor);n&&e.rect(t.x,r.y,t.width,t.height,n)}else typeof a.lineWidth=="object"&&(a.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),irt(e,t,r,a.lineWidth))}function irt(e,t,r,a){var n,i,o,l;a.top&&(n=r.x,i=r.y,o=r.x+t.width,l=r.y,a.right&&(o+=.5*a.right),a.left&&(n-=.5*a.left),c(a.top,n,i,o,l)),a.bottom&&(n=r.x,i=r.y+t.height,o=r.x+t.width,l=r.y+t.height,a.right&&(o+=.5*a.right),a.left&&(n-=.5*a.left),c(a.bottom,n,i,o,l)),a.left&&(n=r.x,i=r.y,o=r.x,l=r.y+t.height,a.top&&(i-=.5*a.top),a.bottom&&(l+=.5*a.bottom),c(a.left,n,i,o,l)),a.right&&(n=r.x+t.width,i=r.y,o=r.x+t.width,l=r.y+t.height,a.top&&(i-=.5*a.top),a.bottom&&(l+=.5*a.bottom),c(a.right,n,i,o,l));function c(d,u,f,A,m){e.getDocument().setLineWidth(d),e.getDocument().line(u,f,A,m,"S")}}function cfe(e,t,r,a){var n=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(n+=t.getFootHeight(t.columns)),e.pageSize().height-a.y-n}function S2(e,t,r,a,n,i){n===void 0&&(n=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(l){return uA(e,t,l,a,n)}),t.callEndPageHooks(e,a);var o=t.settings.margin;Zue(e,t,r,a),dfe(e),t.pageNumber++,a.x=o.left,a.y=o.top,r.y=o.top,t.callWillDrawPageHooks(e,a),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return uA(e,t,l,a,n)}),e.applyStyles(e.userStyles))}function dfe(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function ort(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=t[0],n=nfe(this,a),i=ofe(this,n);return lfe(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,a,n){Xue(t,r,a,n,this)},e.API.autoTableSetDefaults=function(t){return Fb.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){Fb.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var a;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var n=new Fb(this),i=afe(n,t,window,r,!1),o=i.head,l=i.body,c=((a=o[0])===null||a===void 0?void 0:a.map(function(d){return d.content}))||[];return{columns:c,rows:l,data:l}}}var lO;function ji(e,t){var r=nfe(e,t),a=ofe(e,r);lfe(e,a)}try{if(typeof window<"u"&&window){var GX=window,qX=GX.jsPDF||((lO=GX.jspdf)===null||lO===void 0?void 0:lO.jsPDF);qX&&ort(qX)}}catch(e){console.error("Could not apply autoTable plugin",e)}const lrt=["Localizar información explícita","Realizar inferencias a partir del texto","Interpretar y relacionar información del texto","Reflexionar sobre el texto y evaluarlo","Analizar aspectos formales del texto","Reconocer tipos de texto según su propósito comunicativo","Comprender vocabulario en contexto"],crt=["Números y operaciones","Álgebra y funciones","Geometría","Probabilidad y estadística","Resolución de problemas","Modelamiento matemático","Argumentación y comunicación matemática"],KX=ut(st,"usuarios");async function Mx(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",KX);const e=await Nr(KX);if(console.log(`📊 [DEBUG] Encontrados ${e.docs.length} documentos en la colección usuarios`),e.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const t=e.docs.map(a=>{const n=a.data();return!n.curso||typeof n.curso!="string"||!n.curso.trim()?console.warn("⚠️ [ASIGNACION] Usuario sin curso asignado o curso inválido:",{id:a.id,...n}):console.log("✅ [ASIGNACION] Usuario con curso:",{id:a.id,curso:n.curso,nombre:n.nombreCompleto}),{id:a.id,...n}}),r=Array.from(new Set(t.map(a=>a.curso).filter(Boolean)));return console.log("📚 [ASIGNACION] Cursos únicos encontrados en usuarios:",r),console.log("✅ [DEBUG] Usuarios procesados correctamente:",t.length),console.log("✅ [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error("❌ [DEBUG] Error al obtener usuarios:",e),console.error("❌ [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const drt=e=>{try{if(!e)return new Date().toISOString();if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString();if(e instanceof Date)return e.toISOString();const t=new Date(e);if(!isNaN(t.getTime()))return t.toISOString()}catch{}return new Date().toISOString()},nf="simce_sets",TE="simce_resultados";async function urt(e){try{return(await Kr(ut(st,nf),e)).id}catch(t){throw console.error("Error al crear set de preguntas:",t),new Error("No se pudo crear el set de preguntas")}}async function frt(e,t){try{await zi($t(st,nf,e),t)}catch(r){throw console.error("Error al actualizar set de preguntas:",r),new Error("No se pudo actualizar el set de preguntas")}}async function ufe(e){var t,r;console.log(`[DEBUG] obtenerSetPreguntas - Buscando set con ID: ${e}`);try{const a=await tA($t(st,"simce_evaluaciones",e));if(a.exists()){const n=a.data();if(console.log(`[DEBUG] obtenerSetPreguntas - Encontrado en simce_evaluaciones: ${n.titulo||"Sin título"}`),console.log(`[DEBUG] obtenerSetPreguntas - Preguntas: ${((t=n.preguntas)==null?void 0:t.length)||0}`),n.preguntas&&n.preguntas.length>0){for(let i=0;i<n.preguntas.length;i++)if(n.preguntas[i].textoBase){console.log(`[DEBUG] obtenerSetPreguntas - Texto base (eval) en pregunta ${i+1}`);break}}return{id:a.id,...n}}}catch(a){console.warn("[DEBUG] obtenerSetPreguntas - Error al leer simce_evaluaciones, intentando simce_sets:",a)}try{const a=await tA($t(st,nf,e));if(a.exists()){const n=a.data();if(console.log(`[DEBUG] obtenerSetPreguntas - Encontrado en ${nf}: ${n.titulo||"Sin título"}`),console.log(`[DEBUG] obtenerSetPreguntas - Preguntas: ${((r=n.preguntas)==null?void 0:r.length)||0}`),n.preguntas&&n.preguntas.length>0){for(let i=0;i<n.preguntas.length;i++)if(n.preguntas[i].textoBase){console.log(`[DEBUG] obtenerSetPreguntas - Texto base (set) en pregunta ${i+1}`);break}}return{id:a.id,...n}}}catch(a){console.warn("[DEBUG] obtenerSetPreguntas - Error al leer simce_sets:",a)}throw console.log(`[DEBUG] obtenerSetPreguntas - No se encontró set con ID: ${e} en ninguna colección o sin permisos`),new Error("No se pudo obtener el set de preguntas")}async function rU(e){try{const t=jt(ut(st,nf),Kt("creadorId","==",e),Gt("fechaCreacion","desc")),a=(await Nr(t)).docs.map(l=>({id:l.id,...l.data()})),n=jt(ut(st,"simce_evaluaciones"),Kt("creadorId","==",e),Gt("fechaCreacion","desc")),o=(await Nr(n)).docs.map(l=>({id:l.id,...l.data(),preguntas:l.data().preguntas||[]}));return[...a,...o]}catch(t){throw console.error("Error al obtener sets de preguntas:",t),new Error("No se pudieron obtener los sets de preguntas")}}async function ffe(e){try{if(console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Buscando sets para curso ${e}`),!e)return console.error("[DEBUG] obtenerSetsPreguntasPorCurso - Error: cursoId es undefined o vacío"),[];const t=jt(ut(st,nf),Kt("cursosAsignados","array-contains",e),Gt("fechaCreacion","desc"));console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Query ejecutando en ${nf}:`,t);const r=await Nr(t);console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Resultados encontrados en ${nf}: ${r.docs.length}`);const a=jt(ut(st,"simce_evaluaciones"),Kt("cursosAsignados","array-contains",e),Gt("fechaCreacion","desc"));console.log("[DEBUG] obtenerSetsPreguntasPorCurso - Query ejecutando en simce_evaluaciones:",a);const n=await Nr(a);console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Resultados encontrados en simce_evaluaciones: ${n.docs.length}`);let i=[...r.docs.map(o=>{const l=o.data();return console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Set encontrado en ${nf}: ${o.id}, cursosAsignados:`,l.cursosAsignados),{id:o.id,...l}}),...n.docs.map(o=>{const l=o.data();return console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Set encontrado en simce_evaluaciones: ${o.id}, cursosAsignados:`,l.cursosAsignados),{id:o.id,...l,preguntas:l.preguntas||[]}})];return console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Total sets combinados: ${i.length}`),i}catch(t){throw console.error("Error al obtener sets de preguntas por curso:",t),new Error("No se pudieron obtener los sets de preguntas")}}async function hfe(e){try{if(!e)return[];const t=jt(ut(st,nf),Kt("estudiantesAsignados","array-contains",e),Gt("fechaCreacion","desc")),r=await Nr(t),a=jt(ut(st,"simce_evaluaciones"),Kt("estudiantesAsignados","array-contains",e),Gt("fechaCreacion","desc")),n=await Nr(a);return[...r.docs.map(i=>({id:i.id,...i.data()})),...n.docs.map(i=>({id:i.id,...i.data(),preguntas:i.data().preguntas||[]}))]}catch(t){return console.error("Error al obtener sets por estudiante:",t),[]}}async function Afe(e){try{await Ua($t(st,nf,e))}catch(t){throw console.error("Error al eliminar set de preguntas:",t),new Error("No se pudo eliminar el set de preguntas")}}async function mfe(e){try{return(await Kr(ut(st,TE),e)).id}catch(t){throw console.error("Error al guardar resultado de intento:",t),new Error("No se pudo guardar el resultado")}}async function pfe(e){try{const t=jt(ut(st,TE),Kt("setId","==",e),Gt("fechaEnvio","desc"));return(await Nr(t)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){throw console.error("Error al obtener resultados por set:",t),new Error("No se pudieron obtener los resultados")}}async function gfe(e,t){try{if(!t||t.length===0)return[];const r=10,a=[];for(let o=0;o<t.length;o+=r)a.push(t.slice(o,o+r));const n=[];for(const o of a){const l=jt(ut(st,TE),Kt("setId","==",e),Kt("estudianteId","in",o)),c=await Nr(l);n.push(...c.docs.map(d=>({id:d.id,...d.data()})))}const i=new Map;for(const o of n)i.set(o.id,o);return Array.from(i.values())}catch(r){throw console.error("Error al obtener resultados por curso:",r),new Error("No se pudieron obtener los resultados del curso")}}async function xfe(e){try{const t=jt(ut(st,TE),Kt("estudianteId","==",e),Gt("fechaEnvio","desc"));return(await Nr(t)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){throw console.error("Error al obtener resultados por estudiante:",t),new Error("No se pudieron obtener los resultados del estudiante")}}async function hrt(e){try{await Ua($t(st,TE,e))}catch(t){throw console.error("Error al eliminar resultado:",t),new Error("No se pudo eliminar el resultado")}}async function Art(e,t){try{console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Buscando evaluaciones para estudiante ${e} en curso ${t}`);const a=(d=>{if(!d)return"";let u=d.trim().toLowerCase();return u=u.replace(/°/g,"º"),u=u.replace(/\s+(medio|básico|basico)/g,""),u=u.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),u=u.replace(/^(\d)(?![º])/,"$1º"),u=u.replace(/\s+/g,"").toUpperCase(),u})(t),[n,i]=await Promise.all([ffe(a),hfe(e)]),o=new Map;[...n,...i].forEach(d=>o.set(d.id,d));const l=Array.from(o.values());console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Encontradas ${l.length} evaluaciones asignadas al curso ${t}`);const c=l.map(d=>{const u={id:d.id,titulo:d.titulo,descripcion:d.descripcion||"",asignatura:(()=>{const A=String(d.asignatura||"").toLowerCase();return A.includes("lect")?"Competencia Lectora":A.includes("lóg")||A.includes("log")||A.includes("mat")?"Pensamiento Lógico":d.asignatura})(),preguntas:[...d.preguntas],fechaAsignacion:d.fechaCreacion||new Date().toISOString(),textoBase:""};if(String(u.asignatura||"").toLowerCase().includes("lect")){let A="";for(const m of d.preguntas)if(m.textoBase&&m.textoBase.trim()){A=m.textoBase.trim(),console.log(`[DEBUG] Texto base encontrado en pregunta ${m.id}:`,A.substring(0,50)+"...");break}A&&u.preguntas.length>0&&(console.log(`[DEBUG] Asignando texto base a la evaluación y primera pregunta: ${d.id}`),u.textoBase=A,u.preguntas[0].textoBase=A)}return u});return console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Evaluaciones mapeadas: ${c.length}`),c}catch(r){return console.error("Error en obtenerEvaluacionesEstudiante:",r),[]}}async function _2(e){var t,r;try{console.log(`[DEBUG] obtenerEvaluacionPorId - Buscando evaluación con ID: ${e}`);const a=await ufe(e);if(a){console.log(`[DEBUG] obtenerEvaluacionPorId - Evaluación encontrada: ${a.titulo}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Asignatura: ${a.asignatura}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Cantidad de preguntas: ${((t=a.preguntas)==null?void 0:t.length)||0}`);const n=a.preguntas.some(i=>i.textoBase);if(console.log(`[DEBUG] obtenerEvaluacionPorId - ¿Tiene texto base?: ${n}`),n){const i=a.preguntas.find(o=>o.textoBase);console.log(`[DEBUG] obtenerEvaluacionPorId - Texto base encontrado en pregunta: ${i==null?void 0:i.id}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Texto base (primeros 50 caracteres): ${(r=i==null?void 0:i.textoBase)==null?void 0:r.substring(0,50)}...`)}}else console.log(`[DEBUG] obtenerEvaluacionPorId - No se encontró evaluación con ID: ${e}`);return a||null}catch(a){return console.error("Error en obtenerEvaluacionPorId:",a),null}}async function vfe(e){try{const t={...e,setId:e.evaluacionId||e.setId||null,respuestas:e.respuestas||[],porcentajeAciertos:e.porcentajeAciertos??e.porcentajeLogro??0,porcentajeLogro:e.porcentajeLogro??e.porcentajeAciertos??0,nivelLogro:e.nivelLogro||"Insuficiente",fechaEnvio:e.fechaRealizacion||new Date().toISOString(),tiempoRealizacion:e.tiempoRealizacion??e.duracionSegundos??null};return await mfe(t)}catch(t){throw console.error("Error en guardarIntentoEvaluacion:",t),t}}async function bfe(e,t){try{return(await xfe(e)).filter(n=>n.setId===t)}catch(r){return console.error("Error en verificarIntentoExistente:",r),[]}}async function yfe(e){try{let t=[];try{t=await rU(e)}catch(r){console.warn("[DEBUG] obtenerEvaluacionesPorProfesor - Falla query directa, intento fallback:",r)}return t.map(r=>({id:r.id,titulo:r.titulo,descripcion:r.descripcion||"",asignatura:r.asignatura,preguntas:Array.isArray(r.preguntas)?r.preguntas:[],fechaCreacion:drt(r.fechaCreacion),cursosAsignados:r.cursosAsignados||[]}))}catch(t){return console.error("Error en obtenerEvaluacionesPorProfesor:",t),[]}}async function NP(e){try{return await pfe(e)}catch(t){return console.error("Error en obtenerIntentosPorEvaluacion:",t),[]}}async function wfe(e,t){try{const r=v=>{if(!v)return"";let y=v.trim().toLowerCase();return y=y.replace(/°/g,"º"),y=y.replace(/\s+(medio|básico|basico)/g,""),y=y.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),y=y.replace(/^(\d)(?![º])/,"$1º"),y=y.replace(/\s+/g,"").toUpperCase(),y},a=r(t),i=(await Mx()).filter(v=>v.profile==="ESTUDIANTE"&&r(v.curso||"")===a).map(v=>v.id);if(i.length===0)return{totalEstudiantes:0,promedioLogro:0,nivelPredominante:"Insuficiente",porcentajeAdecuado:0,porcentajeElemental:0,porcentajeInsuficiente:0,porEjeTematico:[],porPregunta:[]};const o=await gfe(e,i),l=o.length;if(l===0)return{totalEstudiantes:0,promedioLogro:0,nivelPredominante:"Insuficiente",porcentajeAdecuado:0,porcentajeElemental:0,porcentajeInsuficiente:0,porEjeTematico:[],porPregunta:[]};const c=o.map(v=>v.porcentajeAciertos||v.porcentajeLogro||0),d=c.reduce((v,y)=>v+y,0)/l;let u=0,f=0,A=0;c.forEach(v=>{v>=80?u++:v>=50?f++:A++});const m=u/l*100,g=f/l*100,x=A/l*100;return{totalEstudiantes:l,promedioLogro:d,nivelPredominante:m>=Math.max(g,x)?"Adecuado":g>=x?"Elemental":"Insuficiente",porcentajeAdecuado:m,porcentajeElemental:g,porcentajeInsuficiente:x,porEjeTematico:[],porPregunta:[]}}catch(r){return console.error("Error en obtenerEstadisticasPorCurso:",r),null}}const EP=Object.freeze(Object.defineProperty({__proto__:null,actualizarSetPreguntas:frt,crearSetPreguntas:urt,eliminarResultado:hrt,eliminarSetPreguntas:Afe,guardarIntentoEvaluacion:vfe,guardarResultadoIntento:mfe,obtenerEstadisticasPorCurso:wfe,obtenerEvaluacionPorId:_2,obtenerEvaluacionesEstudiante:Art,obtenerEvaluacionesPorProfesor:yfe,obtenerIntentosPorEvaluacion:NP,obtenerResultadosPorCurso:gfe,obtenerResultadosPorEstudiante:xfe,obtenerResultadosPorSet:pfe,obtenerSetPreguntas:ufe,obtenerSetsPreguntasPorCurso:ffe,obtenerSetsPreguntasPorEstudiante:hfe,obtenerSetsPreguntasPorProfesor:rU,verificarIntentoExistente:bfe},Symbol.toStringTag,{value:"Module"}));function mrt(e){if(!e)return;let t=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/\n{3,}/g,`

`).replace(/\t/g,"  ").trim();const r=4e3;return t.length>r&&(console.log(`Texto proporcionado truncado de ${t.length} a ${r} caracteres`),t=t.substring(0,r)+`

[Texto truncado por límite de tamaño]`),t}async function prt(e,t){try{let r;if(typeof e=="string"?r={asignatura:e,cantidad:t??5}:(r=e,r.textoProporcionado&&(r.textoProporcionado=mrt(r.textoProporcionado))),r.asignatura){const l=r.asignatura.toLowerCase();l.includes("lectora")||l.includes("lectura")?r.asignatura="Lectura":(l.includes("lóg")||l.includes("log")||l.includes("matem"))&&(r.asignatura="Matemática")}const a=r.cantidad??4,n=4;r.nivel&&!["1M","2M"].includes(r.nivel)&&(r.nivel=r.nivel==="1"?"1M":r.nivel==="2"?"2M":r.nivel),console.log(`Generando ${a} preguntas de ${r.asignatura}, nivel ${r.nivel||"1M"}`);const i=grt(r,a,n);console.log("Enviando prompt a la IA (usando modelo Pro para mejor calidad)...");const o=await GL(i,2,!0);if(!o)throw console.error("La IA no devolvió respuesta"),new Error("No se recibió respuesta del modelo de IA. Por favor, intente nuevamente.");return console.log("Procesando respuesta de la IA..."),vrt(o,a,r)}catch(r){throw console.error("Error en generarPreguntasSimce:",r),r instanceof Error?r:new Error("Ocurrió un error al generar las preguntas SIMCE. Por favor, intente nuevamente.")}}function grt(e,t,r){const a=e.asignatura,i=(e.nivel||"1M")==="1M"?"1º medio":"2º medio",o=e.dificultad||"media",l={baja:"facil",media:"media",alta:"dificil"},c=[];if(c.push("Eres un generador pedagógico especializado en preguntas tipo SIMCE para Chile."),c.push(`Tu tarea es crear exactamente ${t} preguntas de alta calidad de la asignatura "${a}" para nivel ${i} (Chile).`),a==="Lectura"){c.push(`
ESPECIFICACIONES PARA LECTURA:`);const d=e.habilidadesLectura&&e.habilidadesLectura.length>0?e.habilidadesLectura:["Localizar información","Relacionar información","Interpretar","Reflexionar y evaluar"];c.push(`- Habilidades a evaluar: ${d.join(", ")}`),c.push("- Cada pregunta debe evaluar específicamente UNA de estas habilidades."),c.push("- Distribuye las preguntas entre las habilidades seleccionadas.");const u=e.textoProporcionado&&e.textoProporcionado.trim().length>0,f=e.textoBaseLectura&&e.textoBaseLectura.trim().length>0;u?(c.push(`
- IMPORTANTE: Utilizarás EXCLUSIVAMENTE el texto proporcionado por el usuario para generar preguntas.`),c.push("- NO generes un texto adicional, usa únicamente el texto que se proporciona más adelante."),c.push("- Todas las preguntas deben estar directamente basadas en este texto.")):f?(c.push(`
- Utilizarás el texto base proporcionado para generar preguntas.`),c.push("- Todas las preguntas deben estar directamente basadas en este texto.")):(c.push(`
- Como no se ha proporcionado un texto base, DEBES CREAR un texto original:`),c.push("  * Extensión: 200-350 palabras"),c.push("  * Apropiado para estudiantes de "+i),c.push("  * Culturalmente relevante para Chile, pero neutro (sin controversias)"),c.push("  * Sin marcas comerciales ni contenido con derechos de autor"),c.push('  * El texto debe incluirse en la propiedad "textoBase" del primer ítem solamente'))}else if(a==="Matemática"){c.push(`
ESPECIFICACIONES PARA MATEMÁTICA:`);const d=e.ejesMatematica&&e.ejesMatematica.length>0?e.ejesMatematica:["Números","Álgebra","Probabilidad y estadística","Geometría"];c.push(`- Ejes temáticos a evaluar: ${d.join(", ")}`),c.push("- Cada pregunta debe evaluar específicamente UNO de estos ejes."),c.push("- Distribuye las preguntas entre los ejes seleccionados."),c.push("- Usa contextos matemáticos realistas y escolares, relevantes para la vida diaria de estudiantes chilenos."),e.textoProporcionado&&(c.push(`
- IMPORTANTE: Utilizarás el texto proporcionado por el usuario como contexto o referencia para generar problemas matemáticos.`),c.push("- Las preguntas pueden incluir datos o situaciones mencionadas en el texto."))}if(c.push(`
REGLAS DE FORMATO DE SALIDA:`),c.push("- Devuelve UN ÚNICO bloque JSON (sin texto adicional antes o después)."),c.push("- El JSON debe ser un arreglo de objetos; cada objeto representa una pregunta con este esquema EXACTO:"),c.push("  {"),c.push('    "id": "p1",'),c.push('    "enunciado": "Texto del enunciado...",'),c.push('    "alternativas": ['),c.push('      {"id": "A", "texto": "...", "esCorrecta": true, "explicacion": "Justificación detallada..."},'),c.push('      {"id": "B", "texto": "...", "esCorrecta": false},'),c.push('      {"id": "C", "texto": "...", "esCorrecta": false},'),c.push('      {"id": "D", "texto": "...", "esCorrecta": false}'),c.push("    ],"),a==="Lectura"?(c.push('    "habilidad": "Una de las habilidades especificadas",'),e.textoBaseLectura||c.push('    "textoBase": "El texto completo aquí (solo en el primer ítem)",')):c.push('    "eje": "Uno de los ejes especificados",'),c.push('    "estandarAprendizaje": "Estándar curricular específico",'),c.push(`    "dificultad": "${l[o]}"`),c.push("  }"),c.push(`
REGLAS DE CALIDAD:`),c.push("1. Enunciados claros y directos, sin ambigüedades."),c.push(`2. EXACTAMENTE ${r} alternativas por pregunta (etiquetadas A, B, C, D).`),c.push("3. Solo UNA alternativa correcta por pregunta."),c.push('4. La alternativa correcta debe tener "esCorrecta": true y debe incluir una "explicacion" pedagógica.'),c.push("5. Distractores (alternativas incorrectas) deben representar errores típicos (conceptuales o procedimentales)."),c.push("6. Las preguntas deben estar alineadas rigurosamente con el currículum chileno para "+i+"."),c.push(`7. Ajusta el nivel de dificultad a "${o}" (${l[o]}).`),c.push("8. Usa lenguaje claro, inclusivo y español chileno estándar."),c.push("9. Evita contenido con derechos de autor, marcas comerciales y temas sensibles."),e.contextoCurricular&&(c.push(`
CONTEXTO CURRICULAR ESPECÍFICO:`),c.push(e.contextoCurricular),c.push("- Alinea tus ítems al contexto curricular provisto.")),e.textoProporcionado||e.textoBaseLectura&&a==="Lectura"){const d=!!e.textoProporcionado,u=d?`
TEXTO PROPORCIONADO POR EL USUARIO:`:`
TEXTO BASE PARA LECTURA:`;c.push(u);const f=e.textoProporcionado||e.textoBaseLectura;c.push('"""'),c.push(f),c.push('"""'),c.push(`
- Formula las preguntas ÚNICAMENTE sobre este texto.`),c.push("- IMPORTANTE: NO incluyas el texto en la propiedad textoBase del JSON, ya fue provisto externamente."),d&&(c.push("- Este es un texto proporcionado por el usuario, asegúrate de formular preguntas relevantes y precisas."),a==="Matemática"&&(c.push("- Para matemáticas, extrae datos numéricos y situaciones del texto para formular problemas matemáticos relacionados."),c.push("- Cuando sea relevante, inventa datos numéricos coherentes con la situación para completar los problemas.")))}return c.push(`
IMPORTANTE: Produce SOLO el arreglo JSON, sin texto introductorio ni comentarios adicionales.`),c.join(`
`)}function WX(e){if(!e)return e;try{const t=["como","así","también","según","véase","ejemplo"];let r=e;return t.forEach(a=>{const n=new RegExp(`"([^"]*)"${a}"([^"]*)"`,"g");r=r.replace(n,`"$1\\"${a}\\"$2"`)}),r=r.replace(/(\s*)(\w+)(\s*):(\s*)/g,'$1"$2"$3:$4'),r=r.replace(/,(\s*[\]}])/g,"$1"),r}catch(t){return console.log("Error al corregir problemas comunes:",t),e}}function xrt(e){if(!e||typeof e!="string")return console.error("Texto de entrada inválido:",e),null;console.log("Iniciando extracción JSON con algoritmo mejorado..."),e=e.replace(/^\uFEFF/,"");try{e=WX(e)}catch(t){console.log("Error durante pre-procesamiento de palabras problemáticas:",t)}try{const t=e.match(/```(?:json)?\s*([\s\S]*?)\s*```/ig);if(t&&t.length>0){console.log(`Encontrados ${t.length} bloques de código potenciales`);for(const r of t){const a=r.replace(/```(?:json)?|```/ig,"").trim();console.log(`Probando bloque de código: ${a.substring(0,50)}...`);const n=WX(a),i=Cv(n);try{return JSON.parse(i),console.log("JSON válido extraído del bloque de código"),i}catch{console.log("JSON en este bloque de código es inválido, continuando con siguiente bloque...")}}}}catch(t){console.log("Error procesando bloques de código:",t)}try{const t=/(\[\s*\{[\s\S]*?\}\s*\])/i.exec(e);if(t&&t[1]){const r=Cv(t[1].trim());try{return JSON.parse(r),console.log("JSON completo válido encontrado directamente"),r}catch{console.log("JSON completo parece inválido, continuando...")}}}catch(t){console.log("Error buscando JSON completo:",t)}try{const t=e.indexOf("[");if(t>=0&&e.indexOf('"id":',t)>t){console.log("Analizando estructura desde el inicio del array...");const a=e.lastIndexOf("]");let n;if(a>t)n=e.substring(t,a+1);else{const o=/"id"\s*:\s*"p\d+"/g;let l,c=-1,d="";for(;(l=o.exec(e))!==null;)c=l.index,d=l[0];if(console.log(`Última pregunta encontrada: ${d} en posición ${c}`),c>0){let u=e.indexOf('"id":',c+d.length);u===-1?u=e.length:(u=e.lastIndexOf("}",u),u===-1?u=e.length:u+=1),n=e.substring(t,u)+"]"}else n=e.substring(t)+"]"}const i=Cv(n);try{return JSON.parse(i),console.log("JSON reconstruido desde inicio del array"),i}catch{console.log("JSON reconstruido inválido, continuando...")}}}catch(t){console.log("Error en estrategia de reconstrucción desde inicio:",t)}try{console.log("Buscando primera pregunta completa...");const r=/\{[\s\S]*?"id"\s*:\s*"p1"[\s\S]*?"enunciado"[\s\S]*?"alternativas"[\s\S]*?\}/.exec(e);if(r){let a=r[0];if(a.includes('"alternativas"')&&a.includes('"id": "A"')){const n=["A","B","C","D"],i=[];for(const o of n)a.includes(`"id": "${o}"`)&&i.push(o);if(console.log(`Alternativas encontradas en p1: ${i.join(", ")}`),i.length>0){const o=a.indexOf('"alternativas"');if(!a.substring(o).includes("]}")){console.log("Estructura de alternativas incompleta, reconstruyendo...");let u=-1,f="";for(const A of i){const m=a.lastIndexOf(`"id": "${A}"`);m>u&&(u=m,f=A)}if(u!==-1){console.log(`Última alternativa completa: ${f}`);const A=a.indexOf("}",u);A!==-1&&(a=a.substring(0,A+1),a.includes("]}")||(a+="]}"))}}let c=`[${a}]`;const d=Cv(c);try{return JSON.parse(d),console.log("Primera pregunta reconstruida con éxito"),d}catch(u){console.log("Error al parsear primera pregunta reconstruida:",u)}}}}}catch(t){console.log("Error buscando primera pregunta:",t)}try{console.log("Intentando extracción quirúrgica del enunciado...");const t=e.match(/"enunciado"\s*:\s*"([^"]+)"/);if(t&&t[1]){const r=t[1].replace(/"/g,'\\"');console.log("Enunciado encontrado:",r.substring(0,30)+"...");let a="A";const n=e.match(/"respuesta"\s*:\s*"([A-D])"/);n&&n[1]&&(a=n[1]);let i="No disponible";const o=e.match(/"explicacion"\s*:\s*"([^"]+)"/);o&&o[1]&&(i=o[1].replace(/"/g,'\\"'));const l=`[{
        "id": "p1",
        "enunciado": "${r}",
        "alternativas": [
          {"id": "A", "texto": "Opción recuperada parcialmente", "esCorrecta": ${a==="A"}, "explicacion": "${a==="A"?i:""}"},
          {"id": "B", "texto": "Opción recuperada parcialmente", "esCorrecta": ${a==="B"}, "explicacion": "${a==="B"?i:""}"},
          {"id": "C", "texto": "Opción recuperada parcialmente", "esCorrecta": ${a==="C"}, "explicacion": "${a==="C"?i:""}"},
          {"id": "D", "texto": "Opción recuperada parcialmente", "esCorrecta": ${a==="D"}, "explicacion": "${a==="D"?i:""}"}
        ],
        "respuesta": "${a}",
        "explicacion": "${i}",
        "habilidad": "Recuperación parcial",
        "estandarAprendizaje": "Contenido recuperado parcialmente"
      }]`;try{const c=Cv(l);return JSON.parse(c),console.log("Generado JSON de emergencia con enunciado recuperado"),c}catch(c){console.log("Error al parsear JSON de emergencia:",c)}}}catch(t){console.log("Error en extracción quirúrgica:",t)}try{return console.log("Construyendo JSON mínimo de respaldo..."),Cv(`[{
      "id": "p1",
      "enunciado": "La respuesta de la IA no pudo ser procesada correctamente. Por favor, intente nuevamente.",
      "alternativas": [
        {"id": "A", "texto": "Volver a generar preguntas", "esCorrecta": true, "explicacion": "El sistema detectó un formato incorrecto en la respuesta de la IA y no pudo procesarla."},
        {"id": "B", "texto": "Opción no disponible", "esCorrecta": false},
        {"id": "C", "texto": "Opción no disponible", "esCorrecta": false},
        {"id": "D", "texto": "Opción no disponible", "esCorrecta": false}
      ],
      "respuesta": "A",
      "explicacion": "Se recomienda intentar generar nuevamente o con diferentes parámetros."
    }]`)}catch(t){console.error("Error final en construcción de JSON de respaldo:",t)}return console.error("Todos los métodos de extracción JSON fallaron"),null}function Cv(e){const t=e;console.log(`Limpiando JSON (primeros 50 caracteres): ${e.substring(0,50).replace(/\n/g,"\\n")}...`);const r=()=>{if(e.includes('"alternativas"')&&e.lastIndexOf('"alternativas"')>e.lastIndexOf("]"))return console.log("JSON truncado detectado en array de alternativas"),!0;const A=e.lastIndexOf("{"),m=e.lastIndexOf("}");if(A>m)return console.log("JSON truncado con objeto incompleto al final"),!0;const g=(E,B)=>(E.match(new RegExp("\\"+B,"g"))||[]).length,x=g(e,"{"),v=g(e,"}"),y=g(e,"["),N=g(e,"]");return x!==v||y!==N?(console.log("JSON con estructura desbalanceada",{llaveAbiertas:x,llaveCerradas:v,corcheteAbiertos:y,corcheteCerrados:N}),!0):!1},a=[];for(let A=0;A<e.length;A++){const m=e.charCodeAt(A);m<32&&m!==9&&m!==10&&m!==13&&a.push({posicion:A,codigo:m,contexto:e.substring(Math.max(0,A-15),A)+"|PROBLEMA|"+e.substring(A+1,A+15)})}a.length>0&&(console.log(`Detectados ${a.length} caracteres de control problemáticos`),a.slice(0,3).forEach(A=>{console.log(`Carácter de control en posición ${A.posicion}, código U+${A.codigo.toString(16).padStart(4,"0")}`),console.log(`Contexto: ${A.contexto}`)})),e=e.replace(/^\uFEFF/,"");let n="";for(let A=0;A<e.length;A++){const m=e.charCodeAt(A);m>=32&&m<=126||m>=128&&m<=255||m===9||m===10||m===13?n+=e[A]:n+=" "}if(e=n,e=e.replace(/\/\/.*/g,""),e=e.replace(/\/\*[\s\S]*?\*\//g,""),e=e.replace(/(\s*)(\w+)(\s*):(\s*)/g,'$1"$2"$3:$4'),e=e.replace(/,(\s*[\]}])/g,"$1"),r()){console.log("Intentando reparar JSON truncado...");const A=e.match(/\{\s*"id"\s*:\s*"p1"[\s\S]*?(?="id"|$)/);if(A){let m=A[0];if(m.includes('"enunciado"')&&m.includes('"alternativas"')&&!m.includes('"}]}')&&(m.match(/"id"\s*:\s*"[A-D]"/g)||[]).length>0){let x=-1,v=-1,y=0;for(;(v=m.indexOf(`"id": "${String.fromCharCode(65+y)}"`,v+1))!==-1&&(x=v,y++,!(y>=4)););if(x!==-1){const N=m.indexOf("}",x);if(N!==-1){let E=m.substring(0,N+1);E+=" ] }",e=`[ ${E} ]`,console.log("JSON reconstruido desde alternativa incompleta")}}}}}let i="",o=!1,l=!1;for(let A=0;A<e.length;A++){const m=e[A],g=e.charCodeAt(A);o?l?(i+=m,l=!1):m==="\\"?(i+=m,l=!0):m==='"'?(i+=m,o=!1):g<32?(i+="\\u"+("0000"+g.toString(16)).slice(-4),console.log(`Escapado carácter de control en posición ${A}: U+${g.toString(16).padStart(4,"0")}`)):m==='"'&&e[A-1]!=="\\"?(i+='\\"',console.log(`Escapada comilla sin escapar en posición ${A}`)):i+=m:(m==='"'&&!o&&(o=!0),i+=m)}e=i,e=e.replace(/:(\s*)(true|false)(\s*[,}])/g,(A,m,g,x)=>": "+g+x),["explicacion","explanation","texto","textoBase","enunciado","habilidad","eje","estandarAprendizaje"].forEach(A=>{const m=new RegExp(`"${A}"\\s*:\\s*"([^"]*)"`,"g");e=e.replace(m,(g,x)=>{const v=x.replace(/"/g,'\\"');return`"${A}": "${v}"`})}),e=e.replace(/"([^"]*)"([^"]*)"([^"]*)"/g,(A,m,g,x)=>g.trim().length<15&&(g.includes("como")||g.includes("así")||g.includes("también")||g.includes("según"))?`"${m}\\"${g}\\"${x}"`:A),e=e.replace(/[ \t]+/g," ").trim(),!e.startsWith("[")&&e.includes('"id": "p1"')&&(e=`[${e}]`,console.log("Encapsulando objeto en array")),!(e.endsWith("}]")||e.endsWith('"]'))&&e.includes('"id": "p1"')&&(e.lastIndexOf("{")>e.lastIndexOf("}")&&(e+="}",console.log("Cerrando objeto abierto")),e.lastIndexOf("[")>e.lastIndexOf("]")&&(e+="]",console.log("Cerrando array abierto"))),e.includes('"alternativas"')&&!e.includes("]")&&(e+="]",console.log("Cerrando array de alternativas truncado"));const u=e.match(/"alternativas"\s*:\s*\[\s*{\s*"id"\s*:\s*"A".*?"explicacion"\s*:\s*"[^"]*"(?!\s*})/);if(u){const A=e.indexOf(u[0])+u[0].length;e=e.substring(0,A)+" }"+e.substring(A),console.log("Reparado cierre de alternativa")}const f=A=>{if(e.length>=A+10){const m=e.substring(Math.max(0,A-20),Math.min(e.length,A+20));console.log(`Verificando contexto alrededor de posición ${A}: "${m}"`);const g=[];for(let x=Math.max(0,A-5);x<Math.min(e.length,A+5);x++)g.push({pos:x,char:e[x],code:e.charCodeAt(x),hex:e.charCodeAt(x).toString(16).padStart(4,"0")});console.log("Análisis de caracteres alrededor de posición específica:"),g.forEach(x=>{console.log(`Pos ${x.pos}: "${x.char}" (U+${x.hex})`)})}};f(392);try{e.includes("textoBase")&&(e=e.replace(/"textoBase"\s*:\s*"([^"]*)"/g,(A,m)=>`"textoBase": "${m.replace(/[\n\r\t\f\v]/g," ").replace(/\s+/g," ")}"`),console.log("Aplicada normalización especial para campo textoBase")),e.includes('"explicacion"')&&(e=e.replace(/"explicacion"\s*:\s*"([^"]*)"/g,(A,m)=>`"explicacion": "${m.replace(/[\n\r\t\f\v]/g," ").replace(/\s+/g," ")}"`),console.log("Aplicada normalización especial para campos explicacion")),JSON.parse(e),console.log("JSON limpio válido")}catch(A){console.log("JSON sigue siendo inválido después de limpieza, intentando reparación más agresiva"),console.error("Error específico:",A.message);try{if(A.message&&A.message.includes("position")){const x=A.message.match(/position (\d+)/);if(x){const v=parseInt(x[1]);console.log(`Error en posición específica: ${v}`);const y=e.substring(Math.max(0,v-30),Math.min(e.length,v+30));if(console.log(`Contexto del error: "${y}"`),v===392||v>380&&v<400){console.log("¡Detectado el error típico en posición ~392! Aplicando corrección específica..."),f(v);try{const N=e.lastIndexOf('"',v),E=e.indexOf('"',v);if(N!==-1&&E!==-1){const B=e.substring(0,N+1),_=e.substring(E);e=B+"Contenido reemplazado debido a caracteres de control"+_,console.log("Aplicada corrección específica para error en posición 392");try{return JSON.parse(e),console.log("Corrección específica exitosa"),e}catch{console.log("La corrección específica falló, continuando...")}}}catch(N){console.log("Error durante corrección específica:",N)}}if(y.includes('"textoBase"')||y.includes('"explicacion"')){const N=e.lastIndexOf('"',v)+1,E=e.indexOf('"',v);if(N>=0&&E>=0){const B=e.substring(N,E),_=B.substring(0,Math.min(100,B.length));e=e.substring(0,N)+_+e.substring(E),console.log("Aplicada reparación de campo con truncado de contenido");try{return JSON.parse(e),console.log("Reparación exitosa por truncado de contenido"),e}catch{console.log("Reparación por truncado falló, continuando con reconstrucción completa")}}}}}const m=e.match(/"id"\s*:\s*"([^"]*)"/),g=e.match(/"enunciado"\s*:\s*"([^"]*)"/);if(m&&g){const x=m[1],v=g[1],y=v.length>150?v.substring(0,150)+"...":v;console.log(`Reconstruyendo con id="${x}" y enunciado="${y.substring(0,30)}..."`);const N=`[{
          "id": "${x}",
          "enunciado": "${y}",
          "alternativas": [
            {"id": "A", "texto": "Alternativa A (reconstruida)", "esCorrecta": true, "explicacion": "Alternativa reconstruida automáticamente debido a problemas en el formato JSON."},
            {"id": "B", "texto": "Alternativa B", "esCorrecta": false},
            {"id": "C", "texto": "Alternativa C", "esCorrecta": false},
            {"id": "D", "texto": "Alternativa D", "esCorrecta": false}
          ],
          "estandarAprendizaje": "Contenido reconstruido debido a problemas en el formato JSON"
        }]`;try{JSON.parse(N),console.log("Generada versión de emergencia del JSON"),e=N}catch{console.log("Error al parsear JSON de emergencia, creando versión básica"),e=`[{
            "id": "p1",
            "enunciado": "No fue posible procesar la respuesta. Por favor, intente nuevamente.",
            "alternativas": [
              {"id": "A", "texto": "Intentar nuevamente", "esCorrecta": true, "explicacion": "Se recomienda volver a intentar la generación."},
              {"id": "B", "texto": "Opción B", "esCorrecta": false},
              {"id": "C", "texto": "Opción C", "esCorrecta": false},
              {"id": "D", "texto": "Opción D", "esCorrecta": false}
            ],
            "habilidad": "Diagnóstico",
            "estandarAprendizaje": "Error en generación"
          }]`}}else console.log("No se encontraron datos mínimos para reconstrucción, usando JSON de fallback mínimo"),e=`[{
          "id": "p1",
          "enunciado": "No fue posible procesar la respuesta de la IA. Por favor, intente nuevamente.",
          "alternativas": [
            {"id": "A", "texto": "Volver a intentar", "esCorrecta": true, "explicacion": "El sistema detectó un formato incorrecto en la respuesta de la IA."},
            {"id": "B", "texto": "Modificar parámetros", "esCorrecta": false},
            {"id": "C", "texto": "Usar menos preguntas", "esCorrecta": false},
            {"id": "D", "texto": "Contactar soporte", "esCorrecta": false}
          ],
          "habilidad": "Diagnóstico",
          "estandarAprendizaje": "Error en formato de respuesta"
        }]`}catch(m){console.log("Error durante la reconstrucción manual:",m),e=`[{
        "id": "p1",
        "enunciado": "Error crítico en el procesamiento de la respuesta.",
        "alternativas": [
          {"id": "A", "texto": "Intentar nuevamente", "esCorrecta": true, "explicacion": "Error técnico en el procesamiento de la respuesta."},
          {"id": "B", "texto": "Opción B", "esCorrecta": false},
          {"id": "C", "texto": "Opción C", "esCorrecta": false},
          {"id": "D", "texto": "Opción D", "esCorrecta": false}
        ]
      }]`}}if(t!==e){console.log("Se realizaron modificaciones al JSON original");try{JSON.parse(e)}catch(A){console.error("JSON final sigue siendo inválido:",A),console.log("JSON limpiado (primeros 100 caracteres):",e.substring(0,100))}}return e}function vrt(e,t,r){if(!e||typeof e!="string")throw console.error("Respuesta de IA inválida:",e),new Error("No se recibió una respuesta válida de la IA");console.log("Procesando respuesta de la IA...");try{console.log(`Respuesta recibida: ${e.length} caracteres. Primeros 100:`,e.substring(0,100).replace(/\n/g,"\\n"));const a=xrt(e);if(!a)return console.error("No se pudo extraer JSON de la respuesta después de múltiples intentos"),Aw(1,"La IA generó una respuesta en un formato que no se pudo procesar. Por favor, intente nuevamente.");console.log("JSON extraído correctamente, intentando parsear...");let n;try{n=JSON.parse(a),console.log("JSON parseado correctamente:",typeof n,Array.isArray(n)?n.length:"no es array")}catch(l){console.error("Error al parsear el JSON final:",l,"JSON parcial:",a.substring(0,200)),console.log("Intentando reparación de emergencia del JSON...");try{const c=a.match(/\[\s*\{.*?\}\s*(?:\]|$)/s);if(c){const d=c[0].endsWith("]")?c[0]:c[0]+"]";n=JSON.parse(d),console.log("Reparación parcial exitosa")}else throw new Error("No se pudo reparar el JSON")}catch{return console.log("Creando objeto de respaldo después de error de parseo final"),Aw(1,"La IA generó una respuesta en formato incorrecto. Por favor, intente nuevamente con diferentes parámetros.")}}if(!Array.isArray(n))if(console.log("La respuesta no es un array, encapsulándola"),typeof n=="object"&&n!==null)n=[n];else return console.error("La respuesta no es un objeto que podamos encapsular:",typeof n),Aw(1,"La respuesta recibida no tiene el formato esperado. Por favor, intente nuevamente.");if(n=n.filter(l=>l&&typeof l=="object"),n.length===0)return console.error("No se encontraron preguntas válidas después de filtrar"),Aw(1,"No se pudieron extraer preguntas válidas de la respuesta. Por favor, intente nuevamente.");console.log(`Se encontraron ${n.length} preguntas para procesar`),n.length<t&&(console.warn(`⚠️ Solo se generaron ${n.length} preguntas de ${t} solicitadas. Intentando re-generación automática.`),n.length===1&&t>1&&r&&r.asignatura&&console.log("Detectado problema de generación parcial. Intentando recuperar más preguntas..."));let i;r!=null&&r.textoProporcionado?(i=r.textoProporcionado,console.log("Usando texto proporcionado por el usuario como textoBase")):n.length>0&&n[0].textoBase?(i=n[0].textoBase,console.log("Se encontró textoBase generado por la IA para preguntas de Lectura")):r!=null&&r.textoBaseLectura&&(i=r.textoBaseLectura,console.log("Usando textoBaseLectura de las opciones"));const o=n.slice(0,t).map((l,c)=>{try{if(console.log(`Procesando pregunta ${c+1}...`),!l||typeof l!="object")throw new Error(`La pregunta ${c+1} no es un objeto válido`);if(!l.enunciado&&!l.pregunta&&!l.texto){console.warn(`La pregunta ${c+1} no tiene enunciado, buscando alternativas...`);const g=Object.entries(l).find(([x,v])=>typeof v=="string"&&v.length>20&&["contenido","stem","question","statement"].includes(x.toLowerCase()));if(g)l.enunciado=g[1],console.log(`Usando '${g[0]}' como enunciado`);else throw new Error(`No se encontró enunciado para la pregunta ${c+1}`)}let d=Array.isArray(l.alternativas)?l.alternativas:[];d.length===0&&(l.A||l.a||l.opciones||l.options)&&(console.log("Detectado formato alternativo de alternativas"),l.opciones&&Array.isArray(l.opciones)?d=l.opciones:l.options&&Array.isArray(l.options)?d=l.options:d=["A","B","C","D"].map(g=>{const x=l[g],v=l[g.toLowerCase()],y=x!==void 0?x:v;if(y){if(typeof y=="string")return{id:g,texto:y,esCorrecta:l.respuesta===g||l.correcta===g};if(typeof y=="object")return{id:g,...y}}return{id:g,texto:`Alternativa ${g}`,esCorrecta:!1}})),d.length===0&&(console.log("No se encontraron alternativas, creando alternativas por defecto"),d=[{id:"A",texto:"Opción A (generada automáticamente)",esCorrecta:!0},{id:"B",texto:"Opción B (generada automáticamente)",esCorrecta:!1},{id:"C",texto:"Opción C (generada automáticamente)",esCorrecta:!1},{id:"D",texto:"Opción D (generada automáticamente)",esCorrecta:!1}]);const u=d.map((g,x)=>{if(!g)return console.warn(`Alternativa ${x} es nula o indefinida, creando alternativa por defecto`),{id:String.fromCharCode(65+x),texto:`Alternativa ${String.fromCharCode(65+x)} (generada por defecto)`,esCorrecta:!1};if(typeof g=="string")return{id:String.fromCharCode(65+x),texto:g,esCorrecta:l.respuesta===String.fromCharCode(65+x)||l.correcta===String.fromCharCode(65+x)||l.respuesta===x||l.respuesta===(x+1).toString()};const v=(g==null?void 0:g.texto)||(g==null?void 0:g.text)||(g==null?void 0:g.contenido)||(g==null?void 0:g.content)||`Alternativa ${String.fromCharCode(65+x)}`;let y=(g==null?void 0:g.id)||String.fromCharCode(65+x);typeof y=="number"&&(y=String.fromCharCode(64+y));let N=!1;((g==null?void 0:g.esCorrecta)===!0||(g==null?void 0:g.isCorrect)===!0||(g==null?void 0:g.correct)===!0)&&(N=!0);const E=l.respuesta||l.correcta||l.respuestaCorrecta||l.correct;return E&&(E===y||E===x||E===x+1||E===(x+1).toString())&&(N=!0),{id:y,texto:v,esCorrecta:N,explicacion:(g==null?void 0:g.explicacion)||(g==null?void 0:g.explanation)||""}}).filter(g=>g&&g.texto);for(u.length===0&&(console.warn("No hay alternativas válidas después de filtrar, creando por defecto"),u.push({id:"A",texto:"Alternativa A (por defecto)",esCorrecta:!0},{id:"B",texto:"Alternativa B (por defecto)",esCorrecta:!1},{id:"C",texto:"Alternativa C (por defecto)",esCorrecta:!1},{id:"D",texto:"Alternativa D (por defecto)",esCorrecta:!1}));u.length<4;){const g=String.fromCharCode(65+u.length);console.log(`Agregando alternativa ${g} faltante`),u.push({id:g,texto:`Alternativa ${g} (agregada automáticamente)`,esCorrecta:!1})}u.length>4&&(console.log(`Demasiadas alternativas (${u.length}), conservando solo 4`),u.splice(4)),u.some(g=>g.esCorrecta)||(console.log("No se encontró alternativa marcada como correcta, marcando la primera"),u[0].esCorrecta=!0);const f=u.find(g=>g.esCorrecta),A=(f==null?void 0:f.explicacion)||l.explicacion||l.explanation||"";return A&&f&&!f.explicacion&&(f.explicacion=A),f&&!f.explicacion&&(f.explicacion=`La respuesta correcta es la alternativa ${f.id}`),{id:l.id||`p${c+1}`,enunciado:l.enunciado||l.pregunta||l.texto||`Pregunta ${c+1}`,alternativas:u,estandarAprendizaje:l.estandarAprendizaje||l.estandar||l.standard||"",habilidad:l.habilidad||l.eje||l.skill||l.axis||"",textoBase:c===0?i:void 0,createdAt:Da(),dificultad:l.dificultad||l.difficulty||"media"}}catch(d){return console.error(`Error procesando pregunta ${c+1}:`,d),XX(c+1)}});if(console.log(`Procesamiento completado: ${o.length} preguntas procesadas`),o.length<t){const l=t-o.length;console.warn(`Rellenando ${l} pregunta(s) para alcanzar la cantidad solicitada (${t})`);for(let c=0;c<l;c++)o.push(XX(o.length+1))}return o}catch(a){return console.error("Error general en procesarRespuestaIA:",a),Aw(t,"Ocurrió un error al procesar la respuesta de la IA. Por favor, intente nuevamente.")}}function XX(e){return{id:`p${e}`,enunciado:`Pregunta ${e} (no se pudo generar correctamente)`,alternativas:[{id:"A",texto:"Intentar nuevamente",esCorrecta:!0,explicacion:"Se recomienda volver a intentar la generación con el modelo Pro."},{id:"B",texto:"Modificar parámetros",esCorrecta:!1},{id:"C",texto:"Reducir complejidad",esCorrecta:!1},{id:"D",texto:"Contactar soporte",esCorrecta:!1}],habilidad:"No disponible",estandarAprendizaje:"No disponible",createdAt:Da(),dificultad:"media"}}function Aw(e,t){const r=[];for(let a=0;a<e;a++)r.push({id:`p${a+1}`,enunciado:a===0?t:`Pregunta ${a+1} (no disponible)`,alternativas:[{id:"A",texto:"Intentar nuevamente",esCorrecta:!0,explicacion:"Se recomienda volver a intentar la generación."},{id:"B",texto:"Modificar parámetros de generación",esCorrecta:!1},{id:"C",texto:"Usar menos cantidad de preguntas",esCorrecta:!1},{id:"D",texto:"Revisar el contexto proporcionado",esCorrecta:!1}],habilidad:"Diagnóstico",estandarAprendizaje:"Error en generación",createdAt:Da(),dificultad:"media"});return r}async function brt(e){try{const t=k0(),r=cl(t,"generarPreguntasSimce");console.log("Llamando a Cloud Function para generar preguntas SIMCE...");const a=await r({options:e}),{preguntas:n,textoBase:i}=a.data;if(!n||!Array.isArray(n)||n.length===0)throw new Error("La respuesta no contiene preguntas válidas");return console.log(`Se generaron ${n.length} preguntas correctamente mediante Cloud Function`),i&&n.length>0&&(n[0].textoBase=i),n}catch(t){throw console.error("Error al generar preguntas SIMCE mediante Cloud Function:",t),t}}const BE=({content:e,context:t="unknown"})=>{if(typeof e=="string")return/<[a-z][\s\S]*>/i.test(e)?s.jsx("span",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:e}}):s.jsx("span",{className:"whitespace-pre-wrap",children:e});if(ft.isValidElement(e))return e;try{return s.jsx("span",{children:JSON.stringify(e)})}catch{return s.jsx("span",{children:"[Sin contenido disponible]"})}},nd=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},yrt=e=>{for(const t of e)if(t.textoBase&&t.textoBase.trim())return t.textoBase.trim();return null},wrt=(e,t)=>t.trim()?e.map((r,a)=>a===0?{...r,textoBase:t.trim()}:r):e,Nrt=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState(!0),[i,o]=w.useState("lista"),[l,c]=w.useState(null),[d,u]=w.useState(""),[f,A]=w.useState("todas"),[m,g]=w.useState(!1),[x,v]=w.useState({titulo:"",descripcion:"",asignatura:"Competencia Lectora",preguntas:[],cursosAsignados:[],barajarPreguntas:!0,barajarAlternativas:!0}),[y,N]=w.useState(!1),[E,B]=w.useState(null),[_,I]=w.useState([]),[j,k]=w.useState([]),[T,L]=w.useState(""),[F,S]=w.useState(!1),[M,H]=w.useState(null),[K,Q]=w.useState(null),[G,X]=w.useState([]);w.useEffect(()=>{(async()=>{try{n(!0);const ge=await rU(e.id||"");r(ge);const he=await Mx();X(he);const ve=new Set;e.cursos&&e.cursos.length>0?e.cursos.forEach(ne=>ve.add(nd(ne))):on.forEach(ne=>ve.add(nd(ne))),he.filter(ne=>ne.profile==="ESTUDIANTE"&&ne.curso).forEach(ne=>{ne.curso&&(ne.curso=nd(ne.curso),ve.add(ne.curso))});const le=Array.from(ve).sort().map(ne=>({id:ne,nombre:Z(ne)}));I(le)}catch(ge){console.error("Error al cargar datos iniciales:",ge),B("No se pudieron cargar los datos necesarios")}finally{n(!1)}})()},[e]);const Z=ue=>{const ge=ue.match(/^(\d+)º?([A-E])$/i);if(ge){const he=ge[1],ve=ge[2].toUpperCase();return`${he}º Medio ${ve}`}return ue};w.useEffect(()=>{k(T?_.filter(ue=>ue.nombre.toLowerCase().includes(T.toLowerCase())):[])},[T,_]);const U=()=>t.filter(ue=>{const ge=ue.titulo.toLowerCase().includes(d.toLowerCase()),he=f==="todas"||ue.asignatura===f;return ge&&he}),Y=()=>{g(!0),c(null),v({titulo:"",descripcion:"",asignatura:"Competencia Lectora",preguntas:[],cursosAsignados:[],barajarPreguntas:!0,barajarAlternativas:!0}),H(null),Q(null),ce(ue=>({...ue,textoProporcionado:""})),o("detalle")},P=ue=>{g(!0),c(ue),v({...ue}),o("detalle")},D=async ue=>{if(window.confirm(`¿Estás seguro de eliminar el set "${ue.titulo}"? Esta acción no se puede deshacer.`))try{await Afe(ue.id),r(ge=>ge.filter(he=>he.id!==ue.id))}catch(ge){console.error("Error al eliminar set:",ge),B("No se pudo eliminar el set de preguntas")}},W=async()=>{try{if(!x.titulo){B("El título de la evaluación es obligatorio");return}if(!x.preguntas||x.preguntas.length===0){B("Debes agregar al menos una pregunta");return}const ue=(x.cursosAsignados||[]).map(nd),ge=ue.length>0;n(!0);let he=[];ge&&(he=G.filter(Qe=>Qe.profile==="ESTUDIANTE"&&Qe.curso&&ue.includes(nd(Qe.curso))).map(Qe=>Qe.id));const ve=new Date().toISOString(),le=e.id||"",ne=e.nombreCompleto||e.displayName||e.email||"Docente",Ae={...x,cursosAsignados:ue,estudiantesAsignados:he,creadorId:l&&l.creadorId||le,creadorNombre:l&&l.creadorNombre||ne,fechaCreacion:l&&l.fechaCreacion||ve},pe=(Ae.preguntas||[]).map(Qe=>{var ar;const wt=((ar=Qe.alternativas.find(qt=>qt.esCorrecta))==null?void 0:ar.id)||Qe.respuestaCorrecta;return{...Qe,respuestaCorrecta:wt}});Ae.preguntas=pe;let ke="";const{collection:Le,addDoc:qe,updateDoc:ze,doc:Re}=await ps(async()=>{const{collection:Qe,addDoc:wt,updateDoc:ar,doc:qt}=await Promise.resolve().then(()=>Jb);return{collection:Qe,addDoc:wt,updateDoc:ar,doc:qt}},void 0),{db:We}=await ps(async()=>{const{db:Qe}=await Promise.resolve().then(()=>aL);return{db:Qe}},void 0),ct="simce_evaluaciones";console.log("[DEBUG] Guardando evaluación:",Ae);try{if(l&&l.id){const Qe=Re(We,ct,l.id),{getDoc:wt,deleteDoc:ar}=await ps(async()=>{const{getDoc:gr,deleteDoc:Pr}=await Promise.resolve().then(()=>Jb);return{getDoc:gr,deleteDoc:Pr}},void 0),qt=await wt(Qe);if(console.log("[DEBUG] Documento a editar existe en simce_evaluaciones:",qt.exists()),qt.exists())await ze(Qe,Ae),ke=l.id,console.log("[DEBUG] Evaluación actualizada en simce_evaluaciones:",ke);else{ke=(await qe(Le(We,ct),Ae)).id,console.log("[DEBUG] Evaluación migrada a simce_evaluaciones:",ke);const Pr=Re(We,"simce_sets",l.id),yr=await wt(Pr);console.log("[DEBUG] Documento antiguo existe en simce_sets:",yr.exists()),yr.exists()&&(await ar(Pr),console.log("[DEBUG] Documento antiguo eliminado de simce_sets:",l.id))}}else ke=(await qe(Le(We,ct),Ae)).id,console.log("[DEBUG] Evaluación nueva creada en simce_evaluaciones:",ke)}catch(Qe){throw console.error("[ERROR] Guardando evaluación:",Qe),Qe}const Ze={id:ke,...Ae};r(Qe=>{const wt=Qe.findIndex(ar=>ar.id===ke);if(wt>=0){const ar=[...Qe];return ar[wt]=Ze,ar}return[Ze,...Qe]}),re({tipo:"success",mensaje:ge?`Evaluación guardada y asignada a ${ue.length} curso${ue.length!==1?"s":""} correctamente`:"Evaluación guardada correctamente"}),setTimeout(()=>{re({tipo:"",mensaje:""})},3e3),g(!1),o("lista"),B(null)}catch(ue){console.error("Error al guardar evaluación:",ue),B("No se pudo guardar la evaluación"),re({tipo:"error",mensaje:"Ocurrió un error al guardar la evaluación"}),setTimeout(()=>{re({tipo:"",mensaje:""})},3e3)}finally{n(!1)}},[J,ce]=w.useState({cantidadPreguntas:"4",dificultad:"media",textoProporcionado:"",habilidadesLectura:{"Localizar información":!0,"Relacionar información":!0,Interpretar:!0,"Reflexionar y evaluar":!0},ejesMatematica:{Números:!0,Álgebra:!0,"Probabilidad y estadística":!0,Geometría:!0}}),[ie,re]=w.useState({tipo:"",mensaje:""}),de=async()=>{var ue,ge,he,ve,le;try{if(!x.asignatura){B("Seleccione una asignatura para generar preguntas");return}N(!0),B(null),re({tipo:"",mensaje:""});let ne,Ae;x.asignatura==="Competencia Lectora"?(ne=Object.entries(J.habilidadesLectura).filter(([ze,Re])=>Re).map(([ze])=>ze),ne.length===0&&(ne=["Localizar información","Relacionar información","Interpretar","Reflexionar y evaluar"])):x.asignatura==="Pensamiento Lógico"&&(Ae=Object.entries(J.ejesMatematica).filter(([ze,Re])=>Re).map(([ze])=>ze),Ae.length===0&&(Ae=["Números","Álgebra","Probabilidad y estadística","Geometría"])),re({tipo:"warning",mensaje:`Generando ${J.cantidadPreguntas} preguntas de ${x.asignatura}. Este proceso puede tardar unos segundos...`});const ke={asignatura:(()=>{const ze=(x.asignatura||"").toLowerCase();if(ze.includes("lectora")||ze.includes("lectura"))return"Lectura";if(ze.includes("lóg")||ze.includes("log")||ze.includes("matem"))return"Matemática";const Re=x.asignatura||"Lectura";return Re==="Lectura"||Re==="Matemática"?Re:"Lectura"})(),cantidad:parseInt(J.cantidadPreguntas),opcionesPorPregunta:4,habilidadesLectura:ne,ejesMatematica:Ae,dificultad:J.dificultad,contextoCurricular:x.descripcion,textoProporcionado:((ue=J.textoProporcionado)==null?void 0:ue.trim())||void 0};let Le,qe=[];try{if(console.log("Intentando generar preguntas usando Cloud Function..."),qe.push("Cloud Function"),Le=await brt(ke),!Array.isArray(Le)||Le.length===0)throw new Error("La respuesta de Cloud Function no es válida");Le.forEach((ze,Re)=>{if(!ze.enunciado||!Array.isArray(ze.alternativas)||ze.alternativas.length!==4)throw new Error(`Pregunta ${Re+1} tiene estructura inválida`)})}catch(ze){console.error("Error con Cloud Function:",ze);try{if(console.log("Usando generación local como respaldo..."),qe.push("Local"),re({tipo:"warning",mensaje:"Usando generación local como respaldo. Procesando..."}),Le=await prt(ke),!Array.isArray(Le)||Le.length===0)throw new Error("La generación local no produjo resultados válidos");Le.forEach((Re,We)=>{if(!Re.enunciado||!Array.isArray(Re.alternativas)||Re.alternativas.length!==4)throw new Error(`Pregunta ${We+1} generada localmente tiene estructura inválida`)})}catch(Re){console.error("Error con generación local:",Re);const We=[];throw(ge=ze.message)!=null&&ge.includes("JSON")&&We.push("Problema de formato en servidor remoto"),(he=Re.message)!=null&&he.includes("JSON")&&We.push("Problema de formato en generación local"),new Error(`No se pudieron generar preguntas con ningún método (intentos: ${qe.join(", ")}). Errores: ${We.join(", ")||"Problemas de conexión o formato"}. Por favor, intente nuevamente o genere preguntas manualmente.`)}}if(!Le||Le.length===0)throw new Error("No se generaron preguntas válidas después de todos los intentos");if(x.asignatura==="Competencia Lectora"){let ze=(ve=J.textoProporcionado)==null?void 0:ve.trim();ze||(ze=(le=Le[0].textoBase)==null?void 0:le.trim()),ze||(ze="Texto de comprensión generado automáticamente."),Le[0].textoBase=ze,console.log("[DEBUG] Texto base final asignado a la primera pregunta:",ze.substring(0,50)+"...")}v(ze=>({...ze,preguntas:[...ze.preguntas||[],...Le]})),re({tipo:"success",mensaje:`¡Se generaron ${Le.length} preguntas correctamente usando ${qe[qe.length-1]}!`}),setTimeout(()=>{re({tipo:"",mensaje:""})},5e3)}catch(ne){console.error("Error general al generar preguntas:",ne);let Ae="No se pudieron generar las preguntas.";ne instanceof Error&&(ne.message.includes("JSON")?Ae="Hubo un problema con el formato de las respuestas del servidor. Esto puede deberse a sobrecarga del sistema de IA. Intente nuevamente en unos minutos.":ne.message.includes("red")||ne.message.includes("network")?Ae="Problema de conexión. Verifique su conexión a internet e intente nuevamente.":ne.message.length>10&&(Ae=ne.message)),B(Ae),re({tipo:"error",mensaje:Ae+" Puede agregar preguntas manualmente como alternativa."}),setTimeout(()=>{re({tipo:"",mensaje:""})},8e3)}finally{N(!1)}},oe=ue=>{Q({...ue})},be=()=>{var ve,le;if(!K)return;if(!K.enunciado){B("El enunciado de la pregunta es obligatorio");return}if(!K.alternativas.find(ne=>ne.esCorrecta)){B("Debe marcar una alternativa como correcta");return}if(K.alternativas.filter(ne=>!ne.texto).length>0){B("Todas las alternativas deben tener texto");return}const he=K.textoBase&&x.asignatura==="Competencia Lectora";if(K.id.startsWith("p"))if(he){console.log("Nueva pregunta con texto base detectado:",K.textoBase);const ne=[...x.preguntas||[]];v(Ae=>({...Ae,preguntas:[K,...ne]}))}else v(ne=>({...ne,preguntas:[...ne.preguntas||[],K]}));else if(he){console.log("Actualizando pregunta con texto base:",K.textoBase);const ne=((ve=x.preguntas)==null?void 0:ve.map(Ae=>Ae.id===K.id?K:Ae))||[];if(K===((le=x.preguntas)==null?void 0:le[0])){const Ae=K.textoBase||"",pe=wrt(ne,Ae);v(ke=>({...ke,preguntas:pe}))}else v(Ae=>({...Ae,preguntas:ne}))}else v(ne=>{var Ae;return{...ne,preguntas:((Ae=ne.preguntas)==null?void 0:Ae.map(pe=>pe.id===K.id?K:pe))||[]}});Q(null),B(null)},q=ue=>{v(ge=>{var he;return{...ge,preguntas:((he=ge.preguntas)==null?void 0:he.filter(ve=>ve.id!==ue))||[]}})},we=ue=>{const ge=nd(ue);v(he=>{const ve=(he.cursosAsignados||[]).map(nd);return ve.includes(ge)?{...he,cursosAsignados:ve.filter(le=>le!==ge)}:{...he,cursosAsignados:[...ve,ge]}})},Te=()=>{const ue=U();return a?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(_h,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando evaluaciones..."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(z1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Buscar evaluaciones...",className:"pl-9 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:d,onChange:ge=>u(ge.target.value)})]}),s.jsxs("select",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:f,onChange:ge=>A(ge.target.value),children:[s.jsx("option",{value:"todas",children:"Todas las asignaturas"}),s.jsx("option",{value:"Competencia Lectora",children:"Competencia Lectora"}),s.jsx("option",{value:"Pensamiento Lógico",children:"Pensamiento Lógico"})]})]}),s.jsxs("button",{onClick:Y,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md",children:[s.jsx(Si,{className:"w-4 h-4"}),"Nueva evaluación"]})]}),s.jsx("div",{className:"space-y-4",children:ue.length===0?s.jsxs("div",{className:"text-center py-8 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsx(s4,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:d||f!=="todas"?"No se encontraron evaluaciones con los filtros seleccionados":"No hay evaluaciones creadas aún. Crea tu primera evaluación SIMCE."}),(d||f!=="todas")&&s.jsx("button",{onClick:()=>{u(""),A("todas")},className:"mt-4 text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 hover:dark:text-indigo-300 text-sm font-medium",children:"Limpiar filtros"})]}):ue.map(ge=>s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"p-4 flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:`p-2 rounded-md mr-3 ${ge.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:ge.asignatura==="Competencia Lectora"?s.jsx(Rs,{className:"w-5 h-5"}):s.jsx(Y8,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg text-slate-800 dark:text-slate-200",children:ge.titulo}),ge.descripcion&&s.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm mt-1",children:ge.descripcion}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[s.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:[ge.preguntas.length," preguntas"]}),s.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:ge.asignatura}),ge.cursosAsignados&&ge.cursosAsignados.length>0&&s.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs flex items-center gap-1",children:[s.jsx(_i,{className:"w-3 h-3"}),ge.cursosAsignados.length," ",ge.cursosAsignados.length===1?"curso":"cursos"]}),s.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:ge.fechaCreacion?new Date(ge.fechaCreacion).toLocaleDateString():"-"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>c(ge),className:"p-2 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded-full hover:bg-slate-100 hover:dark:bg-slate-700",title:"Ver detalles",children:s.jsx(Pg,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>P(ge),className:"p-2 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded-full hover:bg-slate-100 hover:dark:bg-slate-700",title:"Editar evaluación",children:s.jsx(O0,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>D(ge),className:"p-2 text-red-500 hover:text-red-700 dark:text-red-400 hover:dark:text-red-300 rounded-full hover:bg-red-50 hover:dark:bg-red-900/20",title:"Eliminar evaluación",children:s.jsx(Ia,{className:"w-4 h-4"})})]})]}),(l==null?void 0:l.id)===ge.id&&s.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 p-4",children:[ge.asignatura==="Competencia Lectora"&&(()=>{const he=yrt(ge.preguntas);return he?s.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:s.jsx(Rs,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:"📖 Texto de Comprensión Lectora"}),s.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Lee atentamente el siguiente texto antes de responder las preguntas"})]})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800",children:s.jsx(BE,{content:he,context:"simce-texto-base"})})]}):null})(),s.jsxs("h4",{className:"font-medium mb-3 flex items-center",children:[s.jsx("span",{className:"mr-2",children:"❓"}),"Preguntas (",ge.preguntas.length,")"]}),s.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto pr-2",children:ge.preguntas.map((he,ve)=>{var le,ne;return s.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs("p",{className:"font-medium",children:[s.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-1 px-2 rounded-md text-sm mr-2 font-semibold",children:ve+1}),he.enunciado]}),s.jsx("div",{className:"mt-3 ml-6 space-y-2",children:he.alternativas.map(Ae=>s.jsxs("div",{className:`flex items-start p-2 rounded-md transition-colors ${Ae.esCorrecta?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 font-medium border border-green-200 dark:border-green-800":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[s.jsxs("span",{className:"font-semibold mr-2 min-w-[20px]",children:[Ae.id,")"]}),s.jsx("span",{className:"flex-1",children:Ae.texto}),Ae.esCorrecta&&s.jsx(dn,{className:"ml-2 w-4 h-4 text-green-600 dark:text-green-400 flex-shrink-0"})]},Ae.id))}),s.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 dark:border-slate-700 text-xs text-slate-500 dark:text-slate-400",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"📚 Estándar:"})," ",he.estandarAprendizaje]}),he.habilidad&&s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"🎯 Habilidad:"})," ",he.habilidad]}),((le=he.alternativas.find(Ae=>Ae.esCorrecta))==null?void 0:le.explicacion)&&s.jsxs("div",{className:"mt-2 bg-green-50 dark:bg-green-900/20 p-2 rounded-md border border-green-100 dark:border-green-800",children:[s.jsx("span",{className:"font-semibold text-green-800 dark:text-green-300",children:"💡 Explicación:"}),s.jsx("span",{className:"text-green-700 dark:text-green-300 ml-1",children:(ne=he.alternativas.find(Ae=>Ae.esCorrecta))==null?void 0:ne.explicacion})]})]})]},he.id)})}),s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsx("button",{onClick:()=>c(null),className:"text-sm text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 px-3 py-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700",children:"✕ Cerrar vista detallada"})})]})]},ge.id))})]})},Ee=()=>{var ue,ge,he,ve;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-semibold",children:l?"Editar evaluación":"Nueva evaluación"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{g(!1),o("lista"),B(null)},className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-md text-sm",children:"Cancelar"}),s.jsxs("button",{onClick:W,className:"px-4 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm flex items-center gap-1.5",disabled:a,children:[s.jsx(kl,{className:"w-4 h-4"}),(x.cursosAsignados||[]).length>0?"Guardar y asignar":"Guardar evaluación"]})]})]}),E&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-300 p-3 rounded-md flex items-center gap-2",children:[s.jsx(r1,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("span",{children:E})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 border border-slate-200 dark:border-slate-700 rounded-lg",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la evaluación *"}),s.jsx("input",{type:"text",value:x.titulo,onChange:le=>v({...x,titulo:le.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Ej: Evaluación SIMCE 4° Básico - Competencia Lectora"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Asignatura"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>v({...x,asignatura:"Competencia Lectora"}),className:`flex-1 px-3 py-2 rounded-md border text-sm transition-colors ${x.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 border-blue-300 dark:bg-blue-900/40 dark:text-blue-300 dark:border-blue-700":"bg-slate-100 text-slate-700 border-slate-300 dark:bg-slate-700 dark:text-slate-200 dark:border-slate-600"}`,children:"Competencia Lectora"}),s.jsx("button",{type:"button",onClick:()=>v({...x,asignatura:"Pensamiento Lógico"}),className:`flex-1 px-3 py-2 rounded-md border text-sm transition-colors ${x.asignatura==="Pensamiento Lógico"?"bg-purple-100 text-purple-700 border-purple-300 dark:bg-purple-900/40 dark:text-purple-300 dark:border-purple-700":"bg-slate-100 text-slate-700 border-slate-300 dark:bg-slate-700 dark:text-slate-200 dark:border-slate-600"}`,children:"Pensamiento Lógico"})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción (opcional)"}),s.jsx("textarea",{value:x.descripcion,onChange:le=>v({...x,descripcion:le.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Breve descripción de la evaluación",rows:3})]})]}),s.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[s.jsxs("label",{className:"flex items-center mb-2 text-sm font-medium text-slate-700 dark:text-slate-300",children:[s.jsx(_i,{className:"w-4 h-4 mr-1.5"}),"Asignar a cursos",(x.cursosAsignados||[]).length>0&&s.jsxs("span",{className:"ml-2 text-xs bg-indigo-100 dark:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300 py-0.5 px-1.5 rounded-full",children:[(x.cursosAsignados||[]).length," seleccionado",(x.cursosAsignados||[]).length!==1?"s":""]})]}),s.jsx("p",{className:"mb-2 text-xs text-slate-500 dark:text-slate-400",children:"Seleccione los cursos a los que estará asignada esta evaluación. Estará disponible para los estudiantes en cuanto guarde."}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:T,onChange:le=>{L(le.target.value),S(!0)},onFocus:()=>S(!0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Buscar curso..."}),F&&(j.length>0||T)&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-md max-h-60 overflow-y-auto",children:j.length===0&&T?s.jsx("div",{className:"p-3 text-center text-slate-500 dark:text-slate-400",children:"No se encontraron cursos"}):j.map(le=>s.jsxs("div",{className:"px-3 py-2 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center",onClick:()=>{we(le.id),L("")},children:[s.jsx("div",{className:`w-4 h-4 border rounded mr-2 flex items-center justify-center ${(x.cursosAsignados||[]).includes(le.id)?"bg-indigo-600 border-indigo-600":"border-slate-400 dark:border-slate-500"}`,children:(x.cursosAsignados||[]).includes(le.id)&&s.jsx(Dae,{className:"w-3 h-3 text-white"})}),s.jsx("span",{children:le.nombre})]},le.id))})]}),(x.cursosAsignados||[]).length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:(x.cursosAsignados||[]).map(le=>{const ne=_.find(Ae=>Ae.id===le);return s.jsxs("div",{className:"flex items-center bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-md text-sm",children:[s.jsx("span",{children:(ne==null?void 0:ne.nombre)||le}),s.jsx("button",{onClick:()=>we(le),className:"ml-1 text-slate-500 hover:text-slate-700 dark:text-slate-400 hover:dark:text-slate-200",children:s.jsx(ho,{className:"w-3 h-3"})})]},le)})}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Estudiantes asignados"}),s.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md p-3 max-h-40 overflow-y-auto text-sm",children:(()=>{const le=G.filter(ne=>{if(ne.profile!=="ESTUDIANTE"||!ne.curso)return!1;const Ae=nd(ne.curso);return(x.cursosAsignados||[]).includes(Ae)});return le.length===0?s.jsx("span",{className:"text-slate-500",children:"No hay estudiantes asignados a los cursos seleccionados."}):s.jsx("ul",{className:"list-disc pl-4",children:le.map(ne=>s.jsxs("li",{className:"mb-1",children:[ne.nombreCompleto||ne.nombre||ne.id," ",s.jsxs("span",{className:"text-xs text-slate-400",children:["(",Z(nd(ne.curso)),")"]})]},ne.id))})})()})]})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Configuración de presentación"})}),s.jsx("div",{className:"flex space-x-6",children:s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:x.barajarAlternativas,onChange:le=>v({...x,barajarAlternativas:le.target.checked}),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Barajar alternativas"})]})})]})]}),s.jsxs("div",{className:"mb-5 bg-slate-50 dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-md font-semibold mb-3",children:"Opciones de generación con IA"}),ie.mensaje&&s.jsxs("div",{className:`mb-4 p-3 rounded-md flex items-center gap-2 ${ie.tipo==="error"?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-300":ie.tipo==="warning"?"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 text-amber-800 dark:text-amber-300":"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-800 dark:text-green-300"}`,children:[ie.tipo==="error"&&s.jsx(r1,{className:"w-5 h-5 flex-shrink-0"}),ie.tipo==="warning"&&s.jsx(_h,{className:"w-5 h-5 flex-shrink-0 animate-spin"}),ie.tipo==="success"&&s.jsx(dn,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("span",{children:ie.mensaje})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Texto base (opcional)"}),s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:"Si proporciona un texto, las preguntas se generarán basadas en él. Si lo deja vacío, la IA generará automáticamente un texto adecuado."}),s.jsx("textarea",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500 resize-y",value:J.textoProporcionado||"",onChange:le=>ce({...J,textoProporcionado:le.target.value}),placeholder:x.asignatura==="Competencia Lectora"?"Ingrese aquí un texto para generar preguntas de comprensión lectora...":"Ingrese aquí un texto para crear problemas de pensamiento lógico relacionados...",rows:6})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cantidad de preguntas"}),s.jsxs("select",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500",value:J.cantidadPreguntas,onChange:le=>ce({...J,cantidadPreguntas:le.target.value}),children:[s.jsx("option",{value:"2",children:"2 preguntas"}),s.jsx("option",{value:"4",children:"4 preguntas"}),s.jsx("option",{value:"6",children:"6 preguntas"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Dificultad"}),s.jsxs("select",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500",value:J.dificultad,onChange:le=>ce({...J,dificultad:le.target.value}),children:[s.jsx("option",{value:"baja",children:"Baja"}),s.jsx("option",{value:"media",children:"Media"}),s.jsx("option",{value:"alta",children:"Alta"})]})]})]}),x.asignatura==="Competencia Lectora"&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades de Competencia Lectora"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(J.habilidadesLectura).map(([le,ne])=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:ne,onChange:()=>{ce({...J,habilidadesLectura:{...J.habilidadesLectura,[le]:!ne}})},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 mr-2"}),s.jsx("span",{className:"text-sm",children:le})]},le))})]}),x.asignatura==="Pensamiento Lógico"&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ejes de Pensamiento Lógico"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(J.ejesMatematica).map(([le,ne])=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:ne,onChange:()=>{ce({...J,ejesMatematica:{...J.ejesMatematica,[le]:!ne}})},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 mr-2"}),s.jsx("span",{className:"text-sm",children:le})]},le))})]}),s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsx("button",{onClick:de,disabled:y,className:`px-4 py-2 text-white rounded-md text-sm flex items-center gap-2 ${y?"bg-amber-500 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:y?s.jsxs(s.Fragment,{children:[s.jsx(_h,{className:"w-4 h-4 animate-spin"}),"Generando preguntas..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Si,{className:"w-4 h-4"}),"Generar preguntas automáticamente"]})})}),K?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 border border-slate-200 dark:border-slate-700 rounded-lg",children:[x.asignatura==="Competencia Lectora"&&((ue=x.preguntas[0])==null?void 0:ue.id)===K.id&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Texto base para preguntas de comprensión"}),s.jsx("textarea",{value:K.textoBase||"",onChange:le=>Q({...K,textoBase:le.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Texto de lectura para las preguntas...",rows:5})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Enunciado de la pregunta *"}),s.jsx("textarea",{value:K.enunciado,onChange:le=>Q({...K,enunciado:le.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Escribe el enunciado de la pregunta...",rows:3})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Estándar de aprendizaje *"}),s.jsx("select",{value:K.estandarAprendizaje,onChange:le=>Q({...K,estandarAprendizaje:le.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",children:x.asignatura==="Competencia Lectora"?lrt.map((le,ne)=>s.jsx("option",{value:le,children:le},ne)):crt.map((le,ne)=>s.jsx("option",{value:le,children:le},ne))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Habilidad (opcional)"}),s.jsx("input",{value:K.habilidad||"",onChange:le=>Q({...K,habilidad:le.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Ej: Interpretar, Analizar, Resolver problemas..."})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block mb-3 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Alternativas * (marca una como correcta)"}),s.jsx("div",{className:"space-y-3",children:K.alternativas.map((le,ne)=>s.jsxs("div",{className:"flex items-start",children:[s.jsxs("div",{className:"flex items-center mt-1 mr-2",children:[s.jsx("input",{type:"radio",checked:le.esCorrecta,onChange:()=>{Q({...K,alternativas:K.alternativas.map(Ae=>({...Ae,esCorrecta:Ae.id===le.id}))})},className:"rounded-full border-slate-300 text-indigo-600 focus:ring-indigo-500"}),s.jsxs("span",{className:"ml-1 font-semibold",children:[le.id,")"]})]}),s.jsx("div",{className:"flex-1",children:s.jsx("textarea",{value:le.texto,onChange:Ae=>{Q({...K,alternativas:K.alternativas.map(pe=>pe.id===le.id?{...pe,texto:Ae.target.value}:pe)})},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:`Texto de la alternativa ${le.id}...`,rows:2})})]},le.id))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Explicación para alternativa correcta (recomendado)"}),s.jsx("textarea",{value:((ge=K.alternativas.find(le=>le.esCorrecta))==null?void 0:ge.explicacion)||"",onChange:le=>{Q({...K,alternativas:K.alternativas.map(ne=>ne.esCorrecta?{...ne,explicacion:le.target.value}:ne)})},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Explica por qué esta es la respuesta correcta...",rows:2})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>{Q(null),B(null)},className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-md text-sm",children:"Cancelar"}),s.jsxs("button",{onClick:be,className:"px-4 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm flex items-center gap-1.5",children:[s.jsx(kl,{className:"w-4 h-4"}),"Guardar pregunta"]})]})]}):s.jsx("div",{className:"space-y-4",children:(x.preguntas||[]).length===0?s.jsxs("div",{className:"text-center py-8 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsx(Fae,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay preguntas agregadas aún. Puedes generar preguntas automáticamente o agregarlas manualmente."})]}):s.jsxs(s.Fragment,{children:[x.asignatura==="Competencia Lectora"&&((ve=(he=x.preguntas)==null?void 0:he[0])==null?void 0:ve.textoBase)&&s.jsxs("div",{className:"p-5 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:s.jsx(Rs,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:"Texto Base de Comprensión Lectora"}),s.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Este texto acompañará a todas las preguntas de lectura"})]})]}),s.jsx("button",{onClick:()=>{var ne;const le=(ne=x.preguntas)==null?void 0:ne[0];le&&oe(le)},className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:dark:text-blue-200 rounded-full hover:bg-blue-100 dark:hover:bg-blue-800/50",title:"Editar texto base",children:s.jsx(O0,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800 shadow-inner",children:s.jsx("div",{className:"prose prose-sm max-w-none text-slate-800 dark:text-slate-200",children:s.jsx("p",{className:"whitespace-pre-wrap leading-relaxed text-base",children:x.preguntas[0].textoBase})})})]}),(x.preguntas||[]).map((le,ne)=>{var Ae,pe;return s.jsx("div",{className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"font-medium",children:[s.jsxs("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-1 px-2.5 rounded-md mr-2 text-sm font-semibold",children:["Pregunta ",ne+1]}),le.enunciado]}),s.jsx("div",{className:"mt-3 ml-6 space-y-2",children:le.alternativas.map(ke=>s.jsxs("div",{className:`flex items-start p-2 rounded-md transition-colors ${ke.esCorrecta?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 font-medium border border-green-200 dark:border-green-800":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[s.jsxs("span",{className:"font-semibold mr-2 min-w-[20px]",children:[ke.id,")"]}),s.jsx("span",{className:"flex-1",children:ke.texto}),ke.esCorrecta&&s.jsx(dn,{className:"ml-2 w-4 h-4 text-green-600 dark:text-green-400"})]},ke.id))}),s.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 dark:border-slate-700 text-xs text-slate-500 dark:text-slate-400",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Estándar:"})," ",le.estandarAprendizaje]}),le.habilidad&&s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Habilidad:"})," ",le.habilidad]}),((Ae=le.alternativas.find(ke=>ke.esCorrecta))==null?void 0:Ae.explicacion)&&s.jsxs("div",{className:"mt-2 bg-green-50 dark:bg-green-900/20 p-2 rounded-md border border-green-100 dark:border-green-800",children:[s.jsx("span",{className:"font-semibold text-green-800 dark:text-green-300",children:"Explicación:"}),s.jsx("span",{className:"text-green-700 dark:text-green-300 ml-1",children:(pe=le.alternativas.find(ke=>ke.esCorrecta))==null?void 0:pe.explicacion})]})]})]}),s.jsxs("div",{className:"flex gap-1 ml-3",children:[s.jsx("button",{onClick:()=>oe(le),className:"p-1.5 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded hover:bg-slate-100 hover:dark:bg-slate-700",title:"Editar pregunta",children:s.jsx(O0,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>q(le.id),className:"p-1.5 text-red-500 hover:text-red-700 dark:text-red-400 hover:dark:text-red-300 rounded hover:bg-red-50 hover:dark:bg-red-900/20",title:"Eliminar pregunta",children:s.jsx(Ia,{className:"w-4 h-4"})})]})]})},le.id)})]})})]})]})};return s.jsxs(s.Fragment,{children:[i==="lista"&&!m&&Te(),(i==="detalle"||m)&&Ee()]})},Ert=e=>(console.log("Google Sans Code font would be added here"),e);var YX={};const Crt=({className:e})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[s.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8Z"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),JX=["Selección múltiple","Verdadero o Falso","Términos pareados","Desarrollo","Comprensión de lectura"],Nfe=k0(Cx),jrt=cl(Nfe,"generarRubricaConGemini"),krt=cl(Nfe,"generarDescriptorDimensionConGemini"),cO={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[5,10,15],"Comprensión de lectura":[5,10,15]},Srt=({item:e,showAnswers:t=!1,shuffledDefinitions:r=[]})=>{var o;const a=e.puntaje??1,n=l=>{const c=Array.isArray(l)?l.slice(0,4):[];for(;c.length<4;)c.push("");return c},i=l=>l.length<=1?l:[...l.slice(1),l[0]];return s.jsxs("div",{className:"p-3 border rounded-lg bg-white dark:bg-slate-800 dark:border-slate-700",children:[s.jsxs("div",{className:"mb-2 flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:e.tipo}),s.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:e.pregunta||(e.tipo==="Comprensión de lectura"?"Comprensión de lectura":"")})]}),s.jsxs("div",{className:"flex items-center gap-2",children:["habilidadBloom"in e&&e.habilidadBloom&&s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200",children:["Bloom: ",e.habilidadBloom]}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[a," pts"]})]})]}),e.tipo==="Selección múltiple"&&s.jsxs("div",{className:"ml-1 mt-2 space-y-2",children:[s.jsx("div",{className:"text-xs italic text-slate-500 dark:text-slate-400 mb-1",children:"Marca la alternativa correcta."}),n(e.opciones).map((l,c)=>{const d=t&&c===e.respuestaCorrecta;return s.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${d?"bg-green-100 dark:bg-green-900/30":""}`,children:[s.jsx("div",{className:"w-5 h-5 border rounded-full flex-shrink-0"}),s.jsxs("span",{children:[String.fromCharCode(65+c),") ",l]})]},c)})]}),e.tipo==="Verdadero o Falso"&&s.jsxs("div",{className:"ml-1 mt-2 flex items-center gap-6",children:[s.jsx("div",{className:"text-xs italic text-slate-500 dark:text-slate-400",children:"Indica si la afirmación es verdadera (V) o falsa (F)."}),s.jsx("div",{className:"flex-1"}),s.jsx("div",{className:`px-3 py-1 rounded ${t&&e.respuestaCorrecta===!0?"bg-green-100 dark:bg-green-900/30":"bg-slate-100 dark:bg-slate-700"}`,children:"V"}),s.jsx("div",{className:`px-3 py-1 rounded ${t&&e.respuestaCorrecta===!1?"bg-green-100 dark:bg-green-900/30":"bg-slate-100 dark:bg-slate-700"}`,children:"F"})]}),e.tipo==="Desarrollo"&&s.jsx("div",{className:"mt-3 border rounded-md h-24 bg-slate-50 dark:bg-slate-700/40"}),e.tipo==="Términos pareados"&&(()=>{const l=e.pares||[],c=l.map(f=>f.concepto),d=i(l.map(f=>f.definicion)),u="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");return s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"text-xs italic text-slate-500 dark:text-slate-400 mb-2",children:"Une cada concepto (columna izquierda) con su definición (columna derecha)."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold mb-1",children:"Columna A: Conceptos"}),s.jsx("div",{className:"space-y-1",children:c.map((f,A)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("span",{className:"font-semibold w-6 text-right",children:[A+1,"."]}),s.jsx("span",{children:f})]},A))})]}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold mb-1",children:"Columna B: Definiciones"}),s.jsx("div",{className:"space-y-1",children:d.map((f,A)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("span",{className:"font-semibold w-6 text-right",children:[u[A]||"?","."]}),s.jsx("span",{children:f})]},A))})]})]})]})})(),e.tipo==="Comprensión de lectura"&&s.jsxs("div",{className:"mt-2 space-y-3",children:[s.jsx("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/40 rounded-md whitespace-pre-wrap",children:e.texto}),s.jsx("div",{className:"space-y-3",children:(o=e.preguntas)==null?void 0:o.map((l,c)=>{var d;return s.jsxs("div",{className:"p-3 border rounded-md bg-white dark:bg-slate-800 dark:border-slate-700",children:[s.jsxs("div",{className:"mb-1 flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:["CL-",c+1]}),s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:l.tipo}),s.jsx("div",{className:"font-medium",children:l.pregunta})]}),s.jsxs("div",{className:"flex items-center gap-2",children:["habilidadBloom"in l&&l.habilidadBloom&&s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200",children:["Bloom: ",l.habilidadBloom]}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[l.puntaje??1," pts"]})]})]}),l.tipo==="Selección múltiple"?s.jsx("div",{className:"ml-1 mt-1 space-y-1",children:(d=l.opciones)==null?void 0:d.map((u,f)=>{const A=t&&f===l.respuestaCorrecta;return s.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${A?"bg-green-100 dark:bg-green-900/30":""}`,children:[s.jsx("div",{className:"w-4 h-4 border rounded-full flex-shrink-0"}),s.jsxs("span",{children:[String.fromCharCode(65+f),") ",u]})]},f)})}):s.jsx("div",{className:"mt-2 border rounded-md h-16 bg-slate-50 dark:bg-slate-700/40"})]},c)})})]})]})},_rt=()=>{const e=w.useMemo(()=>JX.reduce((U,Y)=>(U[Y]=0,U),{}),[]),t=w.useMemo(()=>({nombre:"",asignatura:(cn==null?void 0:cn[0])||"",nivel:(D0==null?void 0:D0[0])||"",contenido:"",tiposActividad:e,dificultad:"Intermedio",isNee:!1,selectedNee:[]}),[e]),[r,a]=w.useState(t),[n,i]=w.useState(!1),[o,l]=w.useState(null),[c,d]=w.useState(null),[u,f]=w.useState([]),[A,m]=w.useState(!1),[g,x]=w.useState(!1),[v,y]=w.useState(!1),{currentUser:N}=_E();w.useEffect(()=>{if(N){const U=xet(f);return()=>U()}},[N]);const E=U=>{const{name:Y,value:P}=U.target;a(D=>({...D,[Y]:P}))},B=U=>{a(Y=>{var D;const P={...Y.tiposActividad};return P[U]>0?P[U]=0:P[U]=((D=cO[U])==null?void 0:D[0])||1,{...Y,tiposActividad:P}})},_=(U,Y)=>{a(P=>({...P,tiposActividad:{...P.tiposActividad,[U]:Y}}))},I=U=>{a(Y=>{const P=Y.selectedNee.includes(U)?Y.selectedNee.filter(D=>D!==U):[...Y.selectedNee,U];return{...Y,selectedNee:P}})},j=U=>{const Y=String(U||"").trim().toLowerCase();if(Y){if(Y.includes("record"))return"Recordar";if(Y.includes("comprend")||Y.includes("entend"))return"Comprender";if(Y.includes("aplic"))return"Aplicar";if(Y.includes("analiz"))return"Analizar";if(Y.includes("evalu"))return"Evaluar";if(Y.includes("crea")||Y.includes("sintet"))return"Crear"}},k=U=>{switch(U){case"Selección múltiple":return"Comprender";case"Verdadero o Falso":return"Recordar";case"Desarrollo":return"Analizar";case"Términos pareados":return"Comprender";case"Comprensión de lectura":return"Comprender";default:return"Comprender"}},T=U=>{const P=(Array.isArray(U)?U.map(D=>typeof D=="string"?D:(D==null?void 0:D.texto)??""):[]).slice(0,4);for(;P.length<4;)P.push("");return P},L=U=>{if(typeof(U==null?void 0:U.respuestaCorrecta)=="number")return Math.max(0,Math.min(3,U.respuestaCorrecta));if(Array.isArray(U==null?void 0:U.alternativas)){const D=U.alternativas.findIndex(W=>W&&(W.esCorrecta===!0||W.correcta===!0));if(D>=0&&D<4)return D}const Y=String((U==null?void 0:U.correcta)||(U==null?void 0:U.respuesta)||(U==null?void 0:U.respuestaCorrecta)||"").trim().toUpperCase(),P={A:0,B:1,C:2,D:3};return Y in P?P[Y]:0},F=U=>{const Y=T(U.opciones??U.alternativas),P=L(U),D=j(U.habilidadBloom)||k("Selección múltiple");return{id:U.id||crypto.randomUUID(),tipo:"Selección múltiple",pregunta:U.pregunta||U.enunciado||"Pregunta",puntaje:U.puntaje??1,opciones:Y,respuestaCorrecta:P,habilidadBloom:D}},S=U=>{let Y=!1;typeof(U==null?void 0:U.respuestaCorrecta)=="boolean"?Y=U.respuestaCorrecta:typeof(U==null?void 0:U.esVerdadero)=="boolean"?Y=U.esVerdadero:U!=null&&U.correcta&&(Y=String(U.correcta).toUpperCase().startsWith("V"));const P=j(U.habilidadBloom)||k("Verdadero o Falso");return{id:U.id||crypto.randomUUID(),tipo:"Verdadero o Falso",pregunta:U.pregunta||U.enunciado||"Afirmación",puntaje:U.puntaje??1,respuestaCorrecta:Y,habilidadBloom:P}},M=U=>{const Y=j(U.habilidadBloom)||k("Desarrollo");return{id:U.id||crypto.randomUUID(),tipo:"Desarrollo",pregunta:U.pregunta||U.enunciado||"Pregunta abierta",puntaje:U.puntaje??1,habilidadBloom:Y}},H=U=>{let Y=Array.isArray(U==null?void 0:U.pares)?U.pares:[];if((!Y||Y.length===0)&&Array.isArray(U==null?void 0:U.conceptos)&&Array.isArray(U==null?void 0:U.definiciones)){const D=Math.min(U.conceptos.length,U.definiciones.length);Y=Array.from({length:D},(W,J)=>({concepto:U.conceptos[J],definicion:U.definiciones[J]}))}Y=(Y||[]).map(D=>({concepto:(D==null?void 0:D.concepto)??"",definicion:(D==null?void 0:D.definicion)??""}));const P=j(U.habilidadBloom)||k("Términos pareados");return{id:U.id||crypto.randomUUID(),tipo:"Términos pareados",pregunta:U.pregunta||U.enunciado||"Relaciona los términos",puntaje:U.puntaje??1,pares:Y,habilidadBloom:P}},K=U=>{const Y=typeof(U==null?void 0:U.texto)=="string"?U.texto:Array.isArray(U==null?void 0:U.texto)?U.texto.join(`
`):(U==null?void 0:U.lectura)||"",D=(Array.isArray(U==null?void 0:U.preguntas)?U.preguntas:[]).map(J=>{const ce=j(J==null?void 0:J.habilidadBloom),ie=((J==null?void 0:J.tipo)||"").toLowerCase();if(ie.includes("multiple")||ie.includes("seleccion")){const re=F(J);return re.habilidadBloom||(re.habilidadBloom=ce||k("Selección múltiple")),re}if(ie.includes("desarrollo")||ie.includes("abierta")){const re=M(J);return re.habilidadBloom||(re.habilidadBloom=ce||k("Desarrollo")),re}if(J!=null&&J.alternativas||J!=null&&J.opciones){const re=F(J);return re.habilidadBloom||(re.habilidadBloom=ce||k("Selección múltiple")),re}return null}).filter(Boolean),W=j(U.habilidadBloom)||k("Comprensión de lectura");return{id:U.id||crypto.randomUUID(),tipo:"Comprensión de lectura",pregunta:U.pregunta||U.enunciado||"Comprensión de lectura",puntaje:U.puntaje??Math.max(1,D.reduce((J,ce)=>J+(ce.puntaje??1),0)),texto:Y,preguntas:D,habilidadBloom:W}},Q=async U=>{var P;if(U.preventDefault(),!N||!N.uid||!N.email||!N.id){l("Debes iniciar sesión para generar una evaluación.");return}const Y=Object.values(r.tiposActividad||{}).reduce((D,W)=>D+(Number(W)||0),0);if(!r.nombre.trim()||!r.contenido.trim()||Y===0){l("Nombre, Contenido y al menos un tipo con cantidad (> 0) son obligatorios.");return}i(!0),l(null);try{m3("Evaluación - Pruebas",N);const W={objetivo:"",cantidadesPorTipo:Object.entries(r.tiposActividad).reduce((Re,[We,ct])=>{const Ze=Number(ct)||0;return Ze>0&&(Re[We]=Ze),Re},{}),metadata:{nombre:r.nombre,asignatura:r.asignatura,nivel:r.nivel,contenido:r.contenido,dificultad:r.dificultad,nee:r.isNee?r.selectedNee:[]},contextoAdicional:"Directrices: vocabulario y contexto adecuados al nivel educativo en Chile. Si hay NEE, usar lenguaje claro, reducir complejidad, textos más cortos y distractores no ambiguos."},ce=`${YX.REACT_APP_FUNCTIONS_BASE_URL||"https://us-central1-plania-clase.cloudfunctions.net"}/generarPruebaConGeminiHttp`,ie=await((P=ln.currentUser)==null?void 0:P.getIdToken());if(!ie)throw new Error("No se pudo obtener token de autenticación.");const re=await fetch(ce,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ie}`},body:JSON.stringify(W)});if(!re.ok){const Re=await re.text();throw new Error(`Error en función: ${re.status} ${Re}`)}const de=await re.json(),oe=de.prueba||de.data&&de.data.prueba,be=Re=>Re.normalize("NFD").replace(/[\u0300-\u036f]/g,""),q=Re=>be((Re||"").toLowerCase()),we=Re=>{const We=q(String(Re||""));return We?We.includes("comprension")||We.includes("lectura")||We.includes("reading")?"Comprensión de lectura":We.includes("multiple")||We.includes("seleccion")||We.includes("mcq")?"Selección múltiple":We.includes("verdadero")||We.includes("falso")||We==="vf"||We.includes("true")||We.includes("false")?"Verdadero o Falso":We.includes("paread")||We.includes("matching")||We.includes("emparejar")?"Términos pareados":We.includes("desarrollo")||We.includes("respuesta corta")||We.includes("abierta")?"Desarrollo":null:null},Te=Re=>{const ct=(Array.isArray(Re)?Re.map(Ze=>typeof Ze=="string"?Ze:(Ze==null?void 0:Ze.texto)??""):[]).slice(0,4);for(;ct.length<4;)ct.push("");return ct},Ee=Re=>{if(typeof(Re==null?void 0:Re.respuestaCorrecta)=="number")return Math.max(0,Math.min(3,Re.respuestaCorrecta));if(Array.isArray(Re==null?void 0:Re.alternativas)){const Ze=Re.alternativas.findIndex(Qe=>Qe&&(Qe.esCorrecta===!0||Qe.correcta===!0));if(Ze>=0&&Ze<4)return Ze}const We=String((Re==null?void 0:Re.correcta)||(Re==null?void 0:Re.respuesta)||"").trim().toUpperCase(),ct={A:0,B:1,C:2,D:3};return We in ct?ct[We]:0},ue=Re=>{const We=String(Re||"").trim().toLowerCase();if(We){if(We.includes("record"))return"Recordar";if(We.includes("comprend")||We.includes("entend"))return"Comprender";if(We.includes("aplic"))return"Aplicar";if(We.includes("analiz"))return"Analizar";if(We.includes("evalu"))return"Evaluar";if(We.includes("crea")||We.includes("sintet"))return"Crear"}},ge=Re=>{switch(Re){case"Selección múltiple":return"Comprender";case"Verdadero o Falso":return"Recordar";case"Desarrollo":return"Analizar";case"Términos pareados":return"Comprender";case"Comprensión de lectura":return"Comprender";default:return"Comprender"}},he=F,ve=S,le=M,ne=H,Ae=K,pe=Re=>{switch(we(Re.tipo)||(Re!=null&&Re.alternativas||Re!=null&&Re.opciones?"Selección múltiple":null)){case"Selección múltiple":return he(Re);case"Verdadero o Falso":return ve(Re);case"Desarrollo":return le(Re);case"Términos pareados":return ne(Re);case"Comprensión de lectura":return Ae(Re);default:return Re!=null&&Re.alternativas||Re!=null&&Re.opciones?he(Re):Re!=null&&Re.pares||Re!=null&&Re.conceptos&&(Re!=null&&Re.definiciones)?ne(Re):(Re!=null&&Re.texto||Re!=null&&Re.lectura)&&Array.isArray(Re==null?void 0:Re.preguntas)?Ae(Re):typeof(Re==null?void 0:Re.respuestaCorrecta)=="boolean"||typeof(Re==null?void 0:Re.esVerdadero)=="boolean"||/^(v|f)$/i.test(String((Re==null?void 0:Re.correcta)||""))?ve(Re):le(Re)}},ke=(Array.isArray(oe==null?void 0:oe.preguntas)?oe.preguntas:[]).map((Re,We)=>{const ct=pe(Re);return ct?{...ct,id:ct.id||crypto.randomUUID(),pregunta:ct.pregunta||`Ítem ${We+1}`,puntaje:ct.puntaje??1}:null}).filter(Boolean),Le=oe.instruccionesGenerales&&oe.instruccionesGenerales.trim().length>0?oe.instruccionesGenerales:"Lee atentamente y responde cada ítem según se indique. Marca solo una alternativa cuando corresponda. Justifica tus respuestas en los ítems de desarrollo.",qe=(ke||[]).reduce((Re,We)=>{if(We.tipo==="Comprensión de lectura"&&Array.isArray(We.preguntas)){const ct=We.preguntas.reduce((Ze,Qe)=>Ze+(Qe.puntaje??1),0);return Re+ct}return Re+(We.puntaje??1)},0),ze={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:r.nombre,asignatura:r.asignatura,nivel:r.nivel,contenidoOriginal:r.contenido,tiposActividadOriginal:r.tiposActividad,objetivo:oe.objetivo||"",instruccionesGenerales:Le,puntajeIdeal:qe,actividades:[{id:crypto.randomUUID(),titulo:r.nombre,instrucciones:Le,items:ke}],dificultad:r.dificultad,...r.isNee&&{adaptacionNEE:r.selectedNee}};d(ze),m(!1)}catch(D){console.error(D),l("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{i(!1)}},G=async()=>{if(c)try{await vet(c),alert("Prueba guardada con éxito.")}catch(U){console.error(U),alert("No se pudo guardar la prueba.")}},X=async U=>{if(window.confirm("¿Eliminar esta prueba?"))try{await bet(U),(c==null?void 0:c.id)===U&&d(null)}catch(Y){console.error(Y),alert("No se pudo eliminar la prueba.")}},Z=async U=>{try{x(!0);const Y=new xr({unit:"pt",format:"letter"});try{Ert(Y),Y.setFont("GoogleSansCode","normal")}catch{}const P=40;let D=P;Y.setFontSize(12),Y.text("LICEO INDUSTRIAL DE RECOLETA",P,D),Y.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",Y.internal.pageSize.getWidth()-P,D,{align:"right"}),D+=24,Y.setFont(void 0,"bold"),Y.setFontSize(18),Y.text(U.nombre,Y.internal.pageSize.getWidth()/2,D,{align:"center"}),Y.setFont(void 0,"normal"),D+=18,ji(Y,{startY:D+6,theme:"grid",styles:{fontSize:10,cellPadding:6},head:[["Campo","Valor"]],body:[["Fecha",new Date(U.fechaCreacion).toLocaleDateString()],["Asignatura",U.asignatura],["Nivel",U.nivel],["Puntaje Ideal",String(U.puntajeIdeal)],["Objetivo",U.objetivo],["Instrucciones Generales",U.instruccionesGenerales]]}),D=Y.lastAutoTable.finalY+16,U.actividades.forEach((ce,ie)=>{D>Y.internal.pageSize.getHeight()-120&&(Y.addPage(),D=P),Y.setFontSize(13),Y.setFont(void 0,"bold"),Y.text(`Actividad ${ie+1}: ${ce.titulo}`,P,D),D+=14,Y.setFont(void 0,"normal"),Y.setFontSize(10);const re=Y.splitTextToSize(ce.instrucciones,Y.internal.pageSize.getWidth()-P*2);Y.text(re,P,D),D+=re.length*12+6,ce.items.forEach((de,oe)=>{const be=de.habilidadBloom?` [Bloom: ${de.habilidadBloom}]`:"",q=`${oe+1}. ${de.pregunta} (${de.puntaje} pts)${be}`,we=Y.splitTextToSize(q,Y.internal.pageSize.getWidth()-P*2);switch(D>Y.internal.pageSize.getHeight()-100&&(Y.addPage(),D=P),Y.setFont(void 0,"bold"),Y.text(we,P,D),D+=we.length*12+4,Y.setFont(void 0,"normal"),de.tipo){case"Selección múltiple":{de.opciones.forEach((Te,Ee)=>{const ue=`${String.fromCharCode(65+Ee)}) ${Te}`,ge=Y.splitTextToSize(ue,Y.internal.pageSize.getWidth()-P*2-16);Y.text(ge,P+16,D),D+=ge.length*12}),D+=8;break}case"Verdadero o Falso":{Y.text("V ____    F ____",P+16,D),D+=18;break}case"Desarrollo":{Y.rect(P,D-10,Y.internal.pageSize.getWidth()-P*2,60),D+=70;break}case"Términos pareados":{const Te=de.pares;ji(Y,{startY:D,theme:"grid",styles:{fontSize:10,cellPadding:6},head:[["Columna A: Concepto","Columna B: Definición"]],body:Te.map((Ee,ue)=>[`${ue+1}. ${Ee.concepto}`,Ee.definicion])}),D=Y.lastAutoTable.finalY+8;break}case"Comprensión de lectura":{const Te=de,Ee=Y.splitTextToSize(Te.texto,Y.internal.pageSize.getWidth()-P*2);Y.text(Ee,P,D),D+=Ee.length*12+8,Te.preguntas.forEach((ue,ge)=>{const he=ue.habilidadBloom?` [Bloom: ${ue.habilidadBloom}]`:"",ve=`CL-${ge+1}. ${ue.pregunta} (${ue.puntaje} pts)${he}`,le=Y.splitTextToSize(ve,Y.internal.pageSize.getWidth()-P*2);D>Y.internal.pageSize.getHeight()-100&&(Y.addPage(),D=P),Y.setFont(void 0,"bold"),Y.text(le,P+8,D),D+=le.length*12+4,Y.setFont(void 0,"normal"),ue.tipo==="Selección múltiple"?(ue.opciones.forEach((ne,Ae)=>{const pe=`${String.fromCharCode(65+Ae)}) ${ne}`,ke=Y.splitTextToSize(pe,Y.internal.pageSize.getWidth()-P*2-24);Y.text(ke,P+24,D),D+=ke.length*12}),D+=6):(Y.rect(P+8,D-10,Y.internal.pageSize.getWidth()-P*2-16,50),D+=58)});break}}})});const W=new Date().toISOString().split("T")[0],J=`${U.nombre.replace(/\s/g,"_")}_${U.asignatura.replace(/\s/g,"_")}_${W}.pdf`;Y.save(J),x(!1),alert(`PDF generado y descargado como "${J}"`)}catch(Y){console.error(Y),x(!1),alert("No se pudo generar el PDF.")}};if(c){const U=async(Y,P)=>{var D,W;try{const J=c.actividades.findIndex(pe=>pe.id===Y);if(J<0)return;const ce=c.actividades[J],ie=ce.items.findIndex(pe=>pe.id===P);if(ie<0)return;const re=ce.items[ie],de=pe=>pe,oe=c.objetivo&&c.objetivo.trim().length>0?c.objetivo:"",be={[de(re.tipo)]:1},q={objetivo:oe,cantidadesPorTipo:be,metadata:{nombre:c.nombre,asignatura:c.asignatura,nivel:c.nivel,contenido:c.contenidoOriginal,dificultad:c.dificultad||"Intermedio",nee:c.adaptacionNEE||[]},contextoAdicional:`Regenerar 1 ítem del tipo ${re.tipo} manteniendo nivel y asignatura indicados.`},Te=`${YX.REACT_APP_FUNCTIONS_BASE_URL||"https://us-central1-plania-clase.cloudfunctions.net"}/generarPruebaConGeminiHttp`,Ee=await((D=ln.currentUser)==null?void 0:D.getIdToken());if(!Ee)throw new Error("No se pudo obtener token de autenticación.");const ue=await fetch(Te,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ee}`},body:JSON.stringify(q)});if(!ue.ok)throw new Error(await ue.text());const ge=await ue.json(),he=Array.isArray((W=ge==null?void 0:ge.prueba)==null?void 0:W.preguntas)?ge.prueba.preguntas:[];if(he.length===0)throw new Error("La IA no devolvió ítems nuevos.");const ve=he[0],le=(()=>{const pe=((ve==null?void 0:ve.tipo)||"").toLowerCase();return pe.includes("múltiple")||pe.includes("multiple")||pe.includes("seleccion")?"Selección múltiple":pe.includes("verdadero")||pe.includes("falso")||pe==="vf"?"Verdadero o Falso":pe.includes("paread")||pe.includes("matching")||pe.includes("emparejar")?"Términos pareados":pe.includes("comprension")||pe.includes("lectura")?"Comprensión de lectura":pe.includes("desarrollo")||pe.includes("respuesta corta")||pe.includes("abierta")?"Desarrollo":null})();let ne=null;if(le==="Selección múltiple"?ne=F(ve):le==="Verdadero o Falso"?ne=S(ve):le==="Desarrollo"?ne=M(ve):le==="Términos pareados"?ne=H(ve):le==="Comprensión de lectura"?ne=K(ve):(ve!=null&&ve.opciones||ve!=null&&ve.alternativas)&&(ne=F(ve)),!ne)throw new Error("No se pudo normalizar el ítem generado.");const Ae={...c};Ae.actividades=c.actividades.map((pe,ke)=>ke!==J?pe:{...pe,items:pe.items.map((Le,qe)=>qe===ie?{...ne,id:Le.id}:Le)}),d(Ae)}catch(J){console.error("No se pudo regenerar el ítem:",J),alert("No se pudo regenerar el ítem. Intenta de nuevo.")}};return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("button",{onClick:()=>d(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>m(!A),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[s.jsx(Crt,{open:!A})," ",s.jsxs("span",{children:[A?"Ocultar":"Mostrar"," Respuestas"]})]}),s.jsx("button",{onClick:()=>y(Y=>!Y),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:v?"Orden original":"Ordenar por tipo"}),s.jsx("button",{onClick:G,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),s.jsxs("button",{onClick:()=>c&&Z(c),disabled:g,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[g?"...":s.jsx(zae,{})," PDF"]})]})]}),s.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[s.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),s.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),s.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:c.nombre}),s.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Asignatura:"})," ",c.asignatura]}),s.jsxs("p",{className:"text-right",children:[s.jsx("strong",{children:"Puntaje Ideal:"})," ",c.puntajeIdeal]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Nivel:"})," ",c.nivel]})]}),s.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[s.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",c.dificultad||"Intermedio"]}),c.adaptacionNEE&&c.adaptacionNEE.length>0&&s.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",c.adaptacionNEE.join(", ")]})]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",c.objetivo]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Instrucciones Generales:"})," ",c.instruccionesGenerales]})]}),c.actividades.map(Y=>s.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:Y.titulo}),s.jsx("p",{className:"italic text-sm mb-4",children:Y.instrucciones}),s.jsx("div",{className:"space-y-6",children:(()=>{const P={"Comprensión de lectura":0,"Selección múltiple":1,"Verdadero o Falso":2,"Términos pareados":3,Desarrollo:4};return(v?[...Y.items||[]].sort((W,J)=>(P[W.tipo]??99)-(P[J.tipo]??99)):Y.items||[]).map(W=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"button",onClick:()=>U(Y.id,W.id),className:"text-xs bg-sky-600 text-white px-3 py-1 rounded hover:bg-sky-700",children:"Regenerar ítem"})}),s.jsx(Srt,{item:W,showAnswers:A})]},W.id))})()})]},Y.id))]})]})}return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),s.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"nombre",value:r.nombre,onChange:E,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Asignatura"}),s.jsx("select",{name:"asignatura",value:r.asignatura,onChange:E,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:cn.map(U=>s.jsx("option",{children:U},U))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Nivel"}),s.jsx("select",{name:"nivel",value:r.nivel,onChange:E,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:D0.map(U=>s.jsx("option",{children:U},U))})]}),s.jsx("div",{})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),s.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((U,Y)=>s.jsx("button",{type:"button",onClick:()=>a(P=>({...P,dificultad:U})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50 ${Y===0?"rounded-l-lg":""} ${Y===2?"rounded-r-lg":""} ${r.dificultad===U?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:U},U))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:r.isNee,onChange:U=>a(Y=>({...Y,isNee:U.target.checked,selectedNee:U.target.checked?Y.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),s.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),r.isNee&&s.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:R5.map(U=>s.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:r.selectedNee.includes(U),onChange:()=>I(U),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),s.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:U})]},U))})]})]})]}),s.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Contenido a evaluar"}),s.jsx("textarea",{name:"contenido",value:r.contenido,onChange:E,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("div",{className:"space-y-3",children:JX.map(U=>{var Y;return s.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:!!r.tiposActividad[U],onChange:()=>B(U),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),s.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:U})]}),r.tiposActividad[U]&&cO[U]&&s.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),(Y=cO[U])==null?void 0:Y.map(P=>s.jsx("button",{type:"button",onClick:()=>_(U,P),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${r.tiposActividad[U]===P?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:P},P))]})]},U)})}),o&&s.jsx("p",{className:"text-red-500 text-sm",children:o}),s.jsx("div",{className:"text-right",children:s.jsx("button",{type:"submit",disabled:n,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:n?"Generando...":"Generar Prueba"})})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),s.jsx("div",{className:"space-y-2",children:u.length>0?u.map(U=>s.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:U.nombre}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[U.asignatura," - ",U.nivel," (",new Date(U.fechaCreacion).toLocaleDateString(),")"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>d(U),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),s.jsx("button",{onClick:()=>X(U.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},U.id)):s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},Trt=({rubricas:e,onSave:t,onDelete:r,onCreate:a,allUsers:n,onCreatedInteractiva:i})=>{const[o,l]=w.useState(null),[c,d]=w.useState("list"),[u,f]=w.useState(!1),[A,m]=w.useState(""),{currentUser:g}=_E(),[x,v]=w.useState(!1),[y,N]=w.useState(""),[E,B]=w.useState(""),_=w.useMemo(()=>Array.from(new Set(n.filter(K=>K.profile===Tt.ESTUDIANTE&&K.curso).map(K=>nd(K.curso)))).sort(),[n]),I=async(K,Q,G)=>{try{K.id||(K.id=crypto.randomUUID()),await lP(K);const X=n.filter(P=>P.profile===Tt.ESTUDIANTE&&nd(P.curso||"")===Q),Z={};X.forEach(P=>{Z[P.id]={puntajes:{},feedback:""}});const U={nombre:K.titulo,curso:Q,asignatura:G,rubricaEstaticaId:K.id,resultados:Z},Y=await Eet(U);v(!1),alert("Rúbrica interactiva creada."),i==null||i(Y)}catch(X){console.error(X),alert("No se pudo crear la rúbrica interactiva.")}},j=async(K,Q)=>{if(!K.trim()||!Q.trim()){alert("El título y la descripción son obligatorios.");return}f(!0);try{m3("Evaluación - Rúbricas",g);const X=(await jrt({objetivo:K,niveles:["Insuficiente","Suficiente","Competente","Avanzado"],dimensiones:[],contextoAdicional:`El propósito de la rúbrica es: "${Q}". Por favor, genera entre 3 y 5 dimensiones de evaluación relevantes.`})).data.rubrica,Z={id:crypto.randomUUID(),titulo:X.nombre,descripcion:X.descripcion,fechaCreacion:new Date().toISOString(),dimensiones:X.dimensiones.map(U=>({id:crypto.randomUUID(),nombre:U.nombre,niveles:U.descriptores.reduce((Y,P)=>{const W={Insuficiente:"insuficiente",Suficiente:"suficiente",Competente:"competente",Avanzado:"avanzado"}[P.nivel]||P.nivel.toLowerCase().replace(/\s/g,"");return W&&(Y[W]=P.descripcion),Y},{insuficiente:"",suficiente:"",competente:"",avanzado:""})}))};await a(Z),l(Z),d("form"),v(!0)}catch(G){console.error(G),alert("Error al generar la rúbrica con IA.")}finally{f(!1)}},k=()=>{l({id:"",titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),d("form")},T=K=>{l(K),d("form")},L=async()=>{if(!o||!A.trim())return;const K=A;m("");const Q=`temp-${crypto.randomUUID()}`;l(G=>G?{...G,dimensiones:[...G.dimensiones,{id:Q,nombre:K,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0}]}:null);try{const X=(await krt({objetivo:o.titulo,dimension:K,nivel:"todos",contextoAdicional:'Genera descriptores para los 4 niveles: Insuficiente, Suficiente, Competente y Avanzado. La respuesta debe ser un objeto JSON con claves "insuficiente", "suficiente", "competente", "avanzado".'})).data.descriptores;l(Z=>Z?{...Z,dimensiones:Z.dimensiones.map(U=>U.id===Q?{...U,niveles:X,isLoading:!1}:U)}:null)}catch(G){console.error(G),alert("No se pudo generar la dimensión con IA."),l(X=>X?{...X,dimensiones:X.dimensiones.filter(Z=>Z.id!==Q)}:null)}},F=(K,Q,G)=>{o&&l(X=>X?{...X,dimensiones:X.dimensiones.map(Z=>Z.id!==K?Z:Q==="nombre"?{...Z,nombre:G}:{...Z,niveles:{...Z.niveles,[Q]:G}})}:null)},S=(K,Q)=>{l(G=>G?{...G,[K]:Q}:null)},M=K=>{o&&l(Q=>Q?{...Q,dimensiones:Q.dimensiones.filter(G=>G.id!==K)}:null)},H=()=>{if(!o)return null;const K="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",Q=`${K} resize-none text-sm`;return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),s.jsx("button",{onClick:()=>d("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),s.jsx("input",{value:o.titulo,onChange:G=>S("titulo",G.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${K} mt-1`})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),s.jsx("textarea",{value:o.descripcion,onChange:G=>S("descripcion",G.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${K} mt-1`})]})]}),o.dimensiones.length===0&&s.jsx("div",{className:"text-center py-4",children:s.jsx("button",{onClick:()=>j(o.titulo,o.descripcion),disabled:u||!o.titulo||!o.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:u?"Generando...":"✨ Generar Rúbrica con IA"})}),o.dimensiones.length>0&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),s.jsx("button",{type:"button",onClick:()=>v(!0),className:"bg-emerald-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Usar como Rúbrica Interactiva"})]}),s.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:s.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(G=>s.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:G},G))})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:o.dimensiones.map(G=>s.jsxs("tr",{children:[s.jsx("td",{className:"p-2 w-1/5",children:s.jsx("textarea",{value:G.nombre,onChange:X=>F(G.id,"nombre",X.target.value),rows:4,className:Q})}),Object.keys(G.niveles).map(X=>s.jsx("td",{className:"p-2 w-1/5",children:"isLoading"in G&&G.isLoading?s.jsx("div",{className:"flex justify-center items-center h-full",children:s.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):s.jsx("textarea",{value:G.niveles[X],onChange:Z=>F(G.id,X,Z.target.value),rows:4,className:Q})},X)),s.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:s.jsx("button",{onClick:()=>M(G.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},G.id))})]})}),s.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[s.jsxs("div",{className:"flex-grow",children:[s.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),s.jsx("input",{value:A,onChange:G=>m(G.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${K} mt-1`})]}),s.jsx("button",{onClick:L,disabled:!A.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]}),x&&s.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg w-full max-w-md space-y-4",children:[s.jsx("h3",{className:"text-lg font-bold",children:"Asignar a Curso"}),s.jsx("label",{className:"text-sm font-medium",children:"Curso"}),s.jsxs("select",{value:y,onChange:G=>N(G.target.value),className:"w-full border rounded p-2 dark:bg-slate-700",children:[s.jsx("option",{value:"",children:"Selecciona un curso..."}),_.map(G=>s.jsx("option",{value:G,children:G},G))]}),s.jsx("label",{className:"text-sm font-medium",children:"Asignatura"}),s.jsxs("select",{value:E,onChange:G=>B(G.target.value),className:"w-full border rounded p-2 dark:bg-slate-700",children:[s.jsx("option",{value:"",children:"Selecciona una asignatura..."}),cn.map(G=>s.jsx("option",{value:G,children:G},G))]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2",children:"Cancelar"}),s.jsx("button",{disabled:!y||!o||!E,onClick:()=>o&&I(o,y,E),className:"bg-emerald-600 text-white px-4 py-2 rounded",children:"Crear Interactiva"})]})]})})]})};return c==="list"?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),s.jsx("button",{onClick:k,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(K=>s.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:K.titulo}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:K.descripcion})]}),s.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[s.jsx("button",{onClick:()=>T(K),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),s.jsx("button",{onClick:()=>r(K.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},K.id)):s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):H()},Brt=({allUsers:e,rubricasEstaticas:t})=>{const[r,a]=w.useState([]),[n,i]=w.useState(null);w.useEffect(()=>{const f=Net(a);return()=>f()},[]);const o=w.useMemo(()=>r.find(f=>f.id===n)||null,[r,n]),l=w.useMemo(()=>o&&t.find(f=>f.id===o.rubricaEstaticaId)||null,[o,t]),c=w.useMemo(()=>o?e.filter(f=>f.profile===Tt.ESTUDIANTE&&nd(f.curso||"")===nd(o.curso)):[],[o,e]),d=async(f,A,m)=>{if(!o)return;const g=o.resultados[f]||{puntajes:{},feedback:""},x={...o.resultados,[f]:{...g,puntajes:{...g.puntajes,[A]:m}}};await Cet(o.id,{resultados:x})},u=f=>{if(!l)return 1;const A=l.dimensiones.map(N=>N.nombre),m=o==null?void 0:o.resultados[f];if(!m)return 1;const g=A.reduce((N,E)=>N+(m.puntajes[E]||0),0),x=A.length*4,y=1+6*(x>0?g/x:0);return Math.round(y*10)/10};return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Rúbricas Interactivas"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"w-1/3 space-y-2",children:[r.map(f=>s.jsxs("button",{onClick:()=>i(f.id),className:`w-full text-left p-3 rounded border ${n===f.id?"bg-amber-100 dark:bg-amber-900/30":"bg-slate-50 dark:bg-slate-700/50"}`,children:[s.jsx("div",{className:"font-semibold",children:f.nombre}),s.jsxs("div",{className:"text-xs text-slate-500",children:["Curso: ",f.curso," · Asignatura: ",f.asignatura]})]},f.id)),r.length===0&&s.jsx("p",{className:"text-slate-500 text-sm",children:"No hay rúbricas interactivas."})]}),s.jsx("div",{className:"flex-1",children:o&&l?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-bold",children:[o.nombre," — ",o.curso]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-2 text-left",children:"Estudiante"}),l.dimensiones.map(f=>s.jsx("th",{className:"p-2 text-left",children:f.nombre},f.id)),s.jsx("th",{className:"p-2 text-left",children:"Nota"})]})}),s.jsx("tbody",{children:c.map(f=>s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"p-2",children:f.nombreCompleto}),l.dimensiones.map(A=>{var g,x;const m=((x=(g=o.resultados[f.id])==null?void 0:g.puntajes)==null?void 0:x[A.nombre])||0;return s.jsx("td",{className:"p-2",children:s.jsxs("select",{value:m,onChange:v=>d(f.id,A.nombre,Number(v.target.value)),className:"border rounded p-1 dark:bg-slate-700",children:[s.jsx("option",{value:0,children:"—"}),s.jsx("option",{value:1,children:"1 - Insuficiente"}),s.jsx("option",{value:2,children:"2 - Suficiente"}),s.jsx("option",{value:3,children:"3 - Competente"}),s.jsx("option",{value:4,children:"4 - Avanzado"})]})},A.id)}),s.jsx("td",{className:"p-2 font-semibold",children:u(f.id).toFixed(1)})]},f.id))})]})})]}):s.jsx("p",{className:"text-slate-500",children:"Selecciona una rúbrica interactiva para calificar."})})]})]})},Irt=()=>{const[e,t]=w.useState("pruebas"),[r,a]=w.useState([]),[n,i]=w.useState([]),[o,l]=w.useState(!0);return w.useEffect(()=>{l(!0);const c=jet(a),d=yet(u=>{i(u),l(!1)});return()=>{c(),d()}},[]),o?s.jsx("div",{className:"text-center py-10 text-lg",children:"Cargando datos..."}):s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="pruebas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("pruebas"),children:"Pruebas"}),s.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="rubricas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("rubricas"),children:"Rúbricas"}),s.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="rubricasInteractivas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("rubricasInteractivas"),children:"Rúbricas Interactivas"})]}),e==="pruebas"&&s.jsx(_rt,{}),e==="rubricas"&&s.jsx(Trt,{rubricas:n,onSave:lP,onDelete:wet,onCreate:lP,allUsers:r,onCreatedInteractiva:()=>t("rubricasInteractivas")}),e==="rubricasInteractivas"&&s.jsx(Brt,{allUsers:r,rubricasEstaticas:n})]})},Ort=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let a=0,n=0;const i=[];for(const c of r)try{const d=ut(lr,c),u=await Nr(d),f=u.size;a+=f,i.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:f});let A=0;u.docs.forEach(m=>{const g=m.data();g.createdAt&&new Date(g.createdAt)>=t&&A++}),n+=A}catch(d){console.warn(`Error accediendo a colección ${c}:`,d),i.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:0})}const o=[];try{const c=ut(lr,"apiLogs"),d=new Date(e.getTime()-10080*60*1e3),u=jt(c,Kt("timestamp",">=",d.toISOString()),Gt("timestamp","desc")),f=await Nr(u),A={};f.docs.forEach(m=>{const g=m.data(),x=new Date(g.timestamp).toLocaleDateString("es-CL");A[x]=(A[x]||0)+1}),Object.entries(A).sort(([m],[g])=>new Date(m).getTime()-new Date(g).getTime()).forEach(([m,g])=>{o.push({label:m,value:g})})}catch(c){console.warn("Error calculando actividad diaria:",c)}const l=Math.floor(n*2.5);return{documentsCreatedToday:n,readsToday:l,writesToday:n,totalDocuments:a,collectionsActivity:i.sort((c,d)=>d.value-c.value),dailyActivity:o}}catch(e){return console.error("Error al obtener estadísticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},ZX=500,jv=({title:e,value:t,description:r,alert:a})=>s.jsxs("div",{className:`p-5 rounded-xl border ${a?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),s.jsx("p",{className:`text-3xl font-bold mt-2 ${a?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),dO=({title:e,data:t,colorClass:r})=>{const a=w.useMemo(()=>Math.max(...t.map(n=>n.value),1),[t]);return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),s.jsx("div",{className:"space-y-4",children:t.length>0?t.map(n=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[s.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:n.label}),s.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n.value})]}),s.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:s.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${n.value/a*100}%`}})})]},n.label)):s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},Drt=()=>{const[e,t]=w.useState([]),[r,a]=w.useState(!0),[n,i]=w.useState(null),[o,l]=w.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});w.useEffect(()=>{a(!0);const f=det(g=>{t(g),a(!1)}),A=async()=>{try{const g=await Ort();l(g)}catch(g){console.error("Error al cargar estadísticas de Firestore:",g)}};A();const m=setInterval(A,300*1e3);return()=>{f(),clearInterval(m)}},[]);const{stats:c,userStats:d,moduleStats:u}=w.useMemo(()=>{const f=new Date,A=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),m=A-f.getDay()*24*60*60*1e3,g=new Date(f.getFullYear(),f.getMonth(),1).getTime(),x={today:0,week:0,month:0},v={},y={};e.forEach(B=>{const _=new Date(B.timestamp).getTime();_>=A&&x.today++,_>=m&&x.week++,_>=g&&x.month++;const I=B.userEmail||"Desconocido";v[I]||(v[I]={email:I,today:0,month:0,total:0}),v[I].total++,_>=A&&v[I].today++,_>=g&&v[I].month++,y[B.module]=(y[B.module]||0)+1});const N=Object.values(v).sort((B,_)=>_.total-B.total),E=Object.entries(y).map(([B,_])=>({label:B,value:_})).sort((B,_)=>_.value-B.value);return{stats:x,userStats:N,moduleStats:E}},[e]);return s.jsxs("div",{className:"space-y-8",children:[n&&s.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:n}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&s.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!r&&e.length===0&&s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(jv,{title:"Llamadas Hoy",value:r?"--":c.today,description:`Límite recomendado: ${ZX}`,alert:c.today>ZX}),s.jsx(jv,{title:"Llamadas esta Semana",value:r?"--":c.week}),s.jsx(jv,{title:"Llamadas este Mes",value:r?"--":c.month})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[s.jsx(dO,{title:"Uso por Módulo",data:u,colorClass:"bg-sky-500"}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),s.jsx("div",{className:"overflow-x-auto max-h-96",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&d.length>0?d.map(f=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:f.email}),s.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.today}),s.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.month}),s.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:f.total})]},f.email)):s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(jv,{title:"Documentos Creados (Hoy)",value:o.documentsCreatedToday,description:"Nuevos documentos"}),s.jsx(jv,{title:"Lecturas de Firestore (Hoy)",value:o.readsToday,description:"Operaciones de lectura"}),s.jsx(jv,{title:"Total de Documentos",value:o.totalDocuments,description:"En todas las colecciones"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[s.jsx(dO,{title:"Actividad por Colección",data:o.collectionsActivity,colorClass:"bg-green-500"}),s.jsx(dO,{title:"Actividad Diaria (Últimos 7 días)",data:o.dailyActivity,colorClass:"bg-purple-500"})]})]})]})},uO=Object.values(Tt),fO=e=>e?e.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",Frt=()=>{const[e,t]=w.useState([]),[r,a]=w.useState(!1),[n,i]=w.useState("Usuarios"),[o,l]=w.useState(""),[c,d]=w.useState(""),[u,f]=w.useState(""),[A,m]=w.useState(null),[g,x]=w.useState(!1),[v,y]=w.useState(null),[N,E]=w.useState({nombreCompleto:"",email:"",rut:"",profile:Tt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[B,_]=w.useState(null),[I,j]=w.useState(""),[k,T]=w.useState(""),[L,F]=w.useState(""),[S,M]=w.useState(null),[H,K]=w.useState(null),[Q,G]=w.useState(null),X=w.useCallback(async()=>{a(!0);try{const oe=await Mx();t(oe)}catch(oe){console.error("Error al cargar usuarios",oe),M("No se pudieron cargar los usuarios.")}finally{a(!1)}},[]);w.useEffect(()=>{X()},[X]);const Z=w.useCallback(oe=>{const{name:be,value:q}=oe.target;E(we=>({...we,[be]:q,curso:be==="profile"&&q!==Tt.ESTUDIANTE?"":we.curso,cursos:be==="profile"&&q!==Tt.PROFESORADO?[]:we.cursos,asignaturas:be==="profile"&&q!==Tt.PROFESORADO?[]:we.asignaturas}))},[]),U=w.useCallback((oe,be)=>{E(q=>{const we=q[oe]||[],Te=we.includes(be)?we.filter(Ee=>Ee!==be):[...we,be];return{...q,[oe]:Te}})},[]),Y=w.useCallback(()=>{E({nombreCompleto:"",email:"",rut:"",profile:Tt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),_(null),M(null)},[]),P=w.useCallback(async oe=>{oe.preventDefault(),M(null);const{nombreCompleto:be,email:q,profile:we,curso:Te,password:Ee}=N;if(!be.trim()||!q.trim()){M("Nombre Completo y Email son obligatorios.");return}if(we===Tt.ESTUDIANTE&&!Te){M('El campo "Curso" es obligatorio para Estudiantes.');return}if(!B&&!(Ee!=null&&Ee.trim())){M("La contraseña es obligatoria al crear un nuevo usuario.");return}const ue=k0();try{if(B){const ge=cl(ue,"updateUser"),he={...N,password:(Ee==null?void 0:Ee.trim())||void 0,curso:we===Tt.ESTUDIANTE?fO(Te||""):void 0};await ge(he)}else{const ge=cl(ue,"createUser"),he={...N,curso:we===Tt.ESTUDIANTE?fO(Te||""):void 0};await ge(he)}await X(),Y()}catch(ge){console.error("Error al guardar usuario:",ge),M(ge.message||"Error al guardar el usuario.")}},[N,B,X,Y]),D=w.useCallback(oe=>{_(oe.email),E({nombreCompleto:oe.nombreCompleto,email:oe.email,rut:oe.rut||"",profile:oe.profile,password:"",curso:oe.curso||"",cursos:oe.cursos||[],asignaturas:oe.asignaturas||[]}),setTimeout(()=>{const be=document.querySelector("form");be&&be.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),W=w.useCallback(async oe=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${oe}? Esta acción es irreversible.`))try{const be=k0();await cl(be,"deleteUser")({email:oe}),await X()}catch(be){console.error("Error al eliminar usuario:",be),M(be.message||"No se pudo borrar el usuario.")}},[X]),J=async oe=>{var Ee;const be=(Ee=oe.target.files)==null?void 0:Ee[0];if(!be)return;K({message:"Procesando archivo...",isError:!1});const q=k0(),we=cl(q,"createUser"),Te=new FileReader;Te.onload=async ue=>{var ge;try{const he=new Uint8Array((ge=ue.target)==null?void 0:ge.result),ve=i1(he,{type:"array"}),le=ve.Sheets[ve.SheetNames[0]],ne=Fs.sheet_to_json(le);if(ne.length===0){K({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const Ae=ne.map(ze=>{const Re=ze.Nombre||ze.nombre,We=ze.Correo||ze.correo||ze.Email||ze.email,ct=ze.Curso||ze.curso,Ze=ze.RUT||ze.rut;return!Re||!We||!ct?Promise.resolve({email:We||"Sin email",error:"Datos incompletos"}):we({nombreCompleto:String(Re).trim(),email:String(We).trim(),profile:Tt.ESTUDIANTE,curso:fO(String(ct).trim()),rut:Ze?String(Ze).trim():"",password:"recoleta"}).catch(Qe=>({email:We,error:Qe.message}))}),pe=await Promise.all(Ae),ke=pe.filter(ze=>!ze.error).length,Le=pe.filter(ze=>ze.error);let qe=`Carga completada. ${ke} estudiantes agregados.`;Le.length>0&&(qe+=` ${Le.length} fallaron.`,console.error("Errores en carga masiva:",Le)),K({message:qe,isError:Le.length>0}),await X()}catch(he){K({message:`Error: ${he.message}`,isError:!0})}},Te.readAsArrayBuffer(be),oe.target.value=""},ce=async oe=>{var Ee;const be=(Ee=oe.target.files)==null?void 0:Ee[0];if(!be)return;G({message:"Procesando archivo...",isError:!1});const q=k0(),we=cl(q,"createUser"),Te=new FileReader;Te.onload=async ue=>{var ge;try{const he=new Uint8Array((ge=ue.target)==null?void 0:ge.result),ve=i1(he,{type:"array"}),le=ve.Sheets[ve.SheetNames[0]],ne=Fs.sheet_to_json(le);if(ne.length===0){G({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const Ae=ne.map(ze=>{const Re=ze.Nombre||ze.nombre,We=ze.Correo||ze.correo||ze.Email||ze.email,ct=ze.Perfil||ze.perfil||ze.Profile||ze.profile,Ze=ze.RUT||ze.rut;return!Re||!We||!ct?Promise.resolve({email:We||"Sin email",error:"Datos incompletos"}):we({nombreCompleto:String(Re).trim(),email:String(We).trim(),profile:ct,rut:Ze?String(Ze).trim():"",password:"recoleta"}).catch(Qe=>({email:We,error:Qe.message}))}),pe=await Promise.all(Ae),ke=pe.filter(ze=>!ze.error).length,Le=pe.filter(ze=>ze.error);let qe=`Carga completada. ${ke} usuarios agregados.`;Le.length>0&&(qe+=` ${Le.length} fallaron.`,console.error("Errores en carga masiva:",Le)),G({message:qe,isError:Le.length>0}),await X()}catch(he){G({message:`Error: ${he.message}`,isError:!0})}},Te.readAsArrayBuffer(be),oe.target.value=""},ie="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",re=w.useMemo(()=>Array.from(new Set(e.filter(oe=>oe.profile===Tt.ESTUDIANTE&&oe.curso).map(oe=>oe.curso))).sort(),[e]),de=w.useMemo(()=>e.filter(oe=>(I===""||oe.nombreCompleto.toLowerCase().includes(I.toLowerCase())||oe.email.toLowerCase().includes(I.toLowerCase()))&&(k===""||oe.profile===k)&&(L===""||oe.curso===L)),[e,I,k,L]);return s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),s.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:s.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[s.jsx("button",{onClick:()=>i("Usuarios"),className:`${n==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),s.jsx("button",{onClick:()=>i("Monitor de Uso"),className:`${n==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),n==="Usuarios"&&s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cambio masivo de contraseñas"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nueva contraseña"}),s.jsx("input",{type:"password",value:o,onChange:oe=>l(oe.target.value),placeholder:"Mínimo 6 caracteres",className:ie})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil"}),s.jsxs("select",{value:c,onChange:oe=>{d(oe.target.value),oe.target.value!==Tt.ESTUDIANTE&&f("")},className:ie,children:[s.jsx("option",{value:"",children:"Selecciona un perfil"}),uO.map(oe=>s.jsx("option",{value:oe,children:oe},oe))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso (solo estudiantes)"}),s.jsxs("select",{value:u,onChange:oe=>f(oe.target.value),className:ie,disabled:c!==Tt.ESTUDIANTE,children:[s.jsx("option",{value:"",children:"Todos los cursos"}),re.map(oe=>s.jsx("option",{value:oe,children:oe},oe))]})]})]}),s.jsx("div",{className:"flex items-center justify-end gap-3",children:s.jsx("button",{type:"button",onClick:async()=>{if(m(null),y(null),!o||o.length<6){m({message:"La contraseña debe tener al menos 6 caracteres.",isError:!0});return}if(!c){m({message:"Debes seleccionar un perfil.",isError:!0});return}const oe=c===Tt.ESTUDIANTE&&!u?"Se cambiarán contraseñas de TODOS los estudiantes. ¿Deseas continuar?":`Se cambiarán contraseñas para ${c}${c===Tt.ESTUDIANTE&&u?" del curso "+u:""}. ¿Confirmas?`;if(window.confirm(oe))try{x(!0);const be=k0(),q=cl(be,"bulkUpdatePasswords"),we={newPassword:o,profile:c};c===Tt.ESTUDIANTE&&u&&(we.curso=u);const Te=await q(we),Ee=(Te==null?void 0:Te.data)||Te,ue=`Coincidieron: ${Ee.matched??0} | Procesados: ${Ee.processed??0} | Actualizados: ${Ee.updated??0} | Fallidos: ${Ee.failed??0}`;m({message:ue,isError:(Ee.failed??0)>0}),y(Ee),await X()}catch(be){console.error("Error en cambio masivo:",be),m({message:(be==null?void 0:be.message)||"Error al ejecutar cambio masivo",isError:!0})}finally{x(!1)}},disabled:g||!c||!o||o.length<6,className:`bg-amber-600 text-white font-bold py-2 px-6 rounded-lg ${g||!c||!o||o.length<6?"opacity-60 cursor-not-allowed":"hover:bg-amber-700"}`,children:g?"Procesando…":"Cambiar contraseñas"})}),A&&s.jsxs("div",{className:"mt-3",children:[s.jsx("p",{className:`text-sm ${A.isError?"text-red-600":"text-green-600"}`,children:A.message}),(v==null?void 0:v.failed)&&v.failed>0&&s.jsxs("details",{className:"mt-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded p-3",children:[s.jsxs("summary",{className:"cursor-pointer text-red-700 dark:text-red-300 text-sm font-medium",children:["Ver errores (",v.failed,")"]}),s.jsx("div",{className:"mt-2 max-h-56 overflow-auto",children:s.jsxs("table",{className:"min-w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-slate-600 dark:text-slate-300",children:[s.jsx("th",{className:"pr-4 py-1",children:"Email"}),s.jsx("th",{className:"py-1",children:"Error"})]})}),s.jsx("tbody",{children:(v.errors||[]).map((oe,be)=>s.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700",children:[s.jsx("td",{className:"pr-4 py-1 text-slate-800 dark:text-slate-200 whitespace-nowrap",children:oe.email}),s.jsx("td",{className:"py-1 text-slate-700 dark:text-slate-300",children:oe.error})]},be))})]})})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),s.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:J,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),H&&s.jsx("p",{className:`text-sm mt-2 ${H.isError?"text-red-600":"text-green-600"}`,children:H.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),s.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:ce,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),Q&&s.jsx("p",{className:`text-sm mt-2 ${Q.isError?"text-red-600":"text-green-600"}`,children:Q.message})]})]})]}),s.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:B?"Editando usuario":"Agregar nuevo usuario"}),s.jsxs("form",{onSubmit:P,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),s.jsx("input",{type:"text",name:"nombreCompleto",value:N.nombreCompleto,onChange:Z,className:ie,required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),s.jsx("input",{type:"email",name:"email",value:N.email,onChange:Z,className:ie,required:!0,readOnly:!!B})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),s.jsx("input",{type:"password",name:"password",value:N.password||"",onChange:Z,placeholder:B?"Dejar en blanco para no cambiar":"Contraseña temporal",className:ie})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),s.jsx("input",{type:"text",name:"rut",value:N.rut||"",onChange:Z,placeholder:"12.345.678-9",className:ie})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),s.jsx("select",{name:"profile",value:N.profile,onChange:Z,className:ie,required:!0,children:uO.map(oe=>s.jsx("option",{value:oe,children:oe},oe))})]}),N.profile===Tt.ESTUDIANTE&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),s.jsxs("select",{name:"curso",value:N.curso,onChange:Z,className:ie,required:!0,children:[s.jsx("option",{value:"",children:"Seleccione un curso"}),on.map(oe=>s.jsx("option",{value:oe,children:oe},oe))]})]})]}),N.profile===Tt.PROFESORADO&&s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[s.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[s.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:on.map(oe=>{var be;return s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[s.jsx("input",{type:"checkbox",checked:((be=N.cursos)==null?void 0:be.includes(oe))||!1,onChange:()=>U("cursos",oe),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:oe})]},oe)})})]}),N.profile===Tt.PROFESORADO&&s.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[s.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[s.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:cn.map(oe=>{var be;return s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[s.jsx("input",{type:"checkbox",checked:((be=N.asignaturas)==null?void 0:be.includes(oe))||!1,onChange:()=>U("asignaturas",oe),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:oe})]},oe)})})]}),S&&s.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:S}),s.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[B&&s.jsx("button",{type:"button",onClick:Y,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),s.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const oe=k0(),q=await cl(oe,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",q),M("✅ Custom claim agregado exitosamente")}catch(oe){console.error("❌ Error al agregar custom claim:",oe),M(`Error: ${oe.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),s.jsx("button",{type:"button",onClick:async()=>{var oe,be,q,we,Te;try{const{auth:Ee}=await ps(async()=>{const{auth:he}=await Promise.resolve().then(()=>X8);return{auth:he}},void 0);console.log("🔍 Usuario actual:",(oe=Ee.currentUser)==null?void 0:oe.email);const ue=await((be=Ee.currentUser)==null?void 0:be.getIdToken(!0));console.log("🔑 Token refreshed:",!!ue);const ge=await((q=Ee.currentUser)==null?void 0:q.getIdTokenResult());console.log("📋 Claims completos:",ge==null?void 0:ge.claims),console.log("👤 Profile claim:",(we=ge==null?void 0:ge.claims)==null?void 0:we.profile),((Te=ge==null?void 0:ge.claims)==null?void 0:Te.profile)==="SUBDIRECCION"?M("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):M(`❌ Custom claim faltante. Claims: ${JSON.stringify(ge==null?void 0:ge.claims)}`)}catch(Ee){console.error("❌ Error verificando token:",Ee),M(`Error verificando token: ${Ee.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),s.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:B?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsx("div",{children:s.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:I,onChange:oe=>j(oe.target.value),className:ie})}),s.jsx("div",{children:s.jsxs("select",{value:k,onChange:oe=>T(oe.target.value),className:ie,children:[s.jsx("option",{value:"",children:"Todos los perfiles"}),uO.map(oe=>s.jsx("option",{value:oe,children:oe},oe))]})}),s.jsx("div",{children:s.jsxs("select",{value:L,onChange:oe=>F(oe.target.value),className:ie,children:[s.jsx("option",{value:"",children:"Todos los cursos"}),re.map(oe=>s.jsx("option",{value:oe,children:oe},oe))]})})]}),r?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:de.map(oe=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:oe.nombreCompleto}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:oe.email}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${oe.profile===Tt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":oe.profile===Tt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:oe.profile})}),s.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[oe.profile===Tt.ESTUDIANTE&&s.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:oe.curso||"Sin curso"}),oe.profile===Tt.PROFESORADO&&s.jsxs("div",{className:"space-y-1",children:[oe.cursos&&oe.cursos.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),s.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[oe.cursos.slice(0,3).map(be=>s.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:be},be)),oe.cursos.length>3&&s.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",oe.cursos.length-3]})]})]}),oe.asignaturas&&oe.asignaturas.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),s.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[oe.asignaturas.slice(0,2).map(be=>s.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:be},be)),oe.asignaturas.length>2&&s.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",oe.asignaturas.length-2]})]})]}),(!oe.cursos||oe.cursos.length===0)&&(!oe.asignaturas||oe.asignaturas.length===0)&&s.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),oe.profile!==Tt.ESTUDIANTE&&oe.profile!==Tt.PROFESORADO&&s.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),s.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[s.jsx("button",{onClick:()=>D(oe),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),s.jsx("button",{onClick:()=>W(oe.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},oe.email))})]}),de.length===0&&s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),n==="Monitor de Uso"&&s.jsx(Drt,{})]})},x1="seguimiento_dual_records",Prt=e=>{const t=e.data(),r=a=>a&&typeof a.toDate=="function"?a.toDate().toISOString().split("T")[0]:a;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},Rrt=e=>{const t=jt(ut(st,x1),Gt("nombreEstudiante","asc"));return rr(t,a=>{const n=a.docs.map(i=>Prt(i));e(n)},a=>{console.error("Error al suscribirse a los registros de seguimiento:",a),e([])})},$S=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(a=>{t[a]&&typeof t[a]=="string"&&(t[a]=dr.fromDate(new Date(t[a]+"T00:00:00")))}),t},Lrt=async e=>{try{const t=$S(e);return(await Kr(ut(st,x1),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},eY=async(e,t)=>{try{const r=$t(st,x1,e),a=$S(t);await Us(r,a,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},Mrt=async e=>{try{const t=$t(st,x1,e);await Ua(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},Urt=async e=>{const t=wp(st),r=ut(st,x1);let a=0,n=0;for(const i of e){const o=jt(r,Kt("rutEstudiante","==",i.rutEstudiante)),l=await Nr(o);if(l.empty){const c=$t(r);t.set(c,$S(i)),n++}else{const c=l.docs[0].id,d=$t(st,x1,c);t.set(d,$S(i),{merge:!0}),a++}}return await t.commit(),{updated:a,created:n}},Hrt={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},Qrt=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},zrt=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},$rt=({record:e,onSave:t,onClose:r})=>{const[a,n]=w.useState(e),i="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",o=c=>{const{name:d,value:u,type:f,checked:A}=c.target;n(m=>({...m,[d]:f==="checkbox"?A:u}))},l=()=>{t(a)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),s.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[s.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[s.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),s.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:a.fecha1raSupervision1erSemestre||"",onChange:o,className:i})]}),s.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[s.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!a.realizada1raSupervision1erSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),s.jsx("span",{children:"Realizada"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),s.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:a.fecha2daSupervision1erSemestre||"",onChange:o,className:i})]}),s.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[s.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!a.realizada2daSupervision1erSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),s.jsx("span",{children:"Realizada"})]})]})]}),s.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[s.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),s.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:a.fecha1raSupervision2doSemestre||"",onChange:o,className:i})]}),s.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[s.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!a.realizada1raSupervision2doSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),s.jsx("span",{children:"Realizada"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),s.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:a.fecha2daSupervision2doSemestre||"",onChange:o,className:i})]}),s.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[s.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!a.realizada2daSupervision2doSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),s.jsx("span",{children:"Realizada"})]})]})]}),s.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[s.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),s.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:a.fechaSupervisionExcepcional||"",onChange:o,className:i})]}),s.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[s.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!a.realizadaSupervisionExcepcional,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),s.jsx("span",{children:"Realizada"})]})]})]}),s.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[s.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),s.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:a.nombreMaestroGuia||"",onChange:o,className:i+" mt-1"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),s.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:a.contactoMaestroGuia||"",onChange:o,className:i+" mt-1"})]})]})]})]})]}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),s.jsx("button",{type:"button",onClick:l,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},Vrt=()=>{const[e,t]=w.useState([]),[r,a]=w.useState(!0),n=w.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:Vm[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:RB[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[i,o]=w.useState(n),[l,c]=w.useState(null),[d,u]=w.useState(""),[f,A]=w.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[m,g]=w.useState(null),[x,v]=w.useState(null),[y,N]=w.useState(!1),[E,B]=w.useState(null);w.useEffect(()=>{a(!0);const X=Rrt(Z=>{t(Z),a(!1)});return()=>X()},[]);const _=w.useCallback(X=>{const{name:Z,value:U}=X.target;o(Y=>({...Y,[Z]:U}))},[]),I=w.useCallback(X=>{const{name:Z,value:U}=X.target;A(Y=>({...Y,[Z]:U}))},[]),j=w.useCallback(()=>{o(n),c(null),g(null)},[n]),k=async X=>{X.preventDefault(),g(null);const U=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(Y=>{var P;return!((P=i[Y])!=null&&P.trim())});if(U){g(`El campo '${U}' es obligatorio.`);return}try{l?await eY(l,i):await Lrt(i),j()}catch(Y){console.error(Y),g("No se pudo guardar el registro.")}},T=w.useCallback(X=>{window.scrollTo({top:0,behavior:"smooth"}),c(X.id),o(X)},[]),L=async X=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await Mrt(X)}catch(Z){console.error(Z),g("No se pudo eliminar el registro.")}},F=X=>{B(X),N(!0)},S=()=>{B(null),N(!1)},M=async X=>{try{await eY(X.id,X),S()}catch(Z){console.error(Z),alert("No se pudieron guardar los cambios de supervisión.")}},H=()=>{const X=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],Z=Fs.aoa_to_sheet([X]),U=Fs.book_new();Fs.book_append_sheet(U,Z,"Plantilla"),K1(U,"Plantilla_Seguimiento_Dual.xlsx")},K=X=>{var Y;const Z=(Y=X.target.files)==null?void 0:Y[0];if(!Z)return;v({message:"Procesando archivo...",isError:!1});const U=new FileReader;U.onload=async P=>{var D;try{const W=new Uint8Array((D=P.target)==null?void 0:D.result),J=i1(W,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),ce=J.SheetNames[0],ie=J.Sheets[ce],re=Fs.sheet_to_json(ie,{raw:!1,dateNF:"yyyy-mm-dd"});if(re.length===0)throw new Error("El archivo está vacío.");const de={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},oe=Object.keys(re[0]).map(Te=>Te.trim().toLowerCase()),q=["nombre","rut","curso 2025","empresa","estado"].find(Te=>!oe.includes(Te));if(q)throw new Error(`Falta la columna requerida: '${q}'`);const we=re.map((Te,Ee)=>{try{const ue={};for(const ge in Te){const he=de[ge.trim().toLowerCase()];if(he){let ve=Te[ge];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(he)?(ve=Qrt(ve),ve&&(ue[he]=ve)):he.includes("realizada")?ue[he]=zrt(ve):ve!=null&&ve!==""&&(ue[he]=String(ve).trim())}}return!ue.nombreEstudiante||!ue.rutEstudiante?(console.warn(`Fila ${Ee+2}: Faltan campos requeridos`),null):ue}catch(ue){return console.error(`Error procesando fila ${Ee+2}:`,ue),null}}).filter(Te=>Te!==null);if(console.log("Registros procesados:",we),we.length>0){const{updated:Te,created:Ee}=await Urt(we);v({message:`Carga exitosa. ${Ee} registros creados, ${Te} actualizados.`,isError:!1})}else v({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(W){console.error("Error completo:",W),v({message:`Error al procesar el archivo: ${W.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},U.readAsArrayBuffer(Z)},Q="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",G=w.useMemo(()=>e.filter(X=>(d===""||X.nombreEstudiante.toLowerCase().includes(d.toLowerCase())||X.nombreEmpresa.toLowerCase().includes(d.toLowerCase())||X.rutEstudiante.includes(d))&&(f.curso===""||X.curso===f.curso)&&(f.empresa===""||X.nombreEmpresa===f.empresa)&&(f.estado===""||X.estado===f.estado)&&(f.comuna===""||X.comuna===f.comuna)&&(f.profesor===""||X.profesorTutorEmpresa===f.profesor)).sort((X,Z)=>X.nombreEstudiante.localeCompare(Z.nombreEstudiante)),[e,d,f]);return w.useMemo(()=>{const X=new Set,Z=new Set;return e.forEach(U=>{U.nombreEmpresa&&X.add(U.nombreEmpresa),U.comuna&&Z.add(U.comuna)}),{empresas:Array.from(X).sort(),comunas:Array.from(Z).sort()}},[e]),r?s.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:l?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),s.jsxs("form",{onSubmit:k,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),s.jsx("input",{type:"text",name:"nombreEstudiante",value:i.nombreEstudiante,onChange:_,className:Q,required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),s.jsx("input",{type:"text",name:"rutEstudiante",value:i.rutEstudiante,onChange:_,className:Q,required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),s.jsx("select",{name:"curso",value:i.curso,onChange:_,className:Q,required:!0,children:Vm.map(X=>s.jsx("option",{value:X,children:X},X))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),s.jsxs("select",{name:"profesorTutorEmpresa",value:i.profesorTutorEmpresa,onChange:_,className:Q,children:[s.jsx("option",{value:"",children:"Seleccione un profesor"}),XD.map(X=>s.jsx("option",{value:X,children:X},X))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),s.jsx("input",{type:"text",name:"nombreEmpresa",value:i.nombreEmpresa,onChange:_,className:Q,required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),s.jsx("input",{type:"text",name:"rutEmpresa",value:i.rutEmpresa,onChange:_,className:Q})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),s.jsx("input",{type:"text",name:"direccionEmpresa",value:i.direccionEmpresa,onChange:_,className:Q})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),s.jsx("input",{type:"text",name:"comuna",value:i.comuna,onChange:_,className:Q})]}),s.jsxs("div",{className:"lg:col-span-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),s.jsx("select",{name:"estado",value:i.estado,onChange:_,className:Q,children:RB.map(X=>s.jsx("option",{value:X,children:X},X))})]})]}),i.estado==="Desvinculado"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),s.jsx("input",{type:"date",name:"fechaDesvinculacion",value:i.fechaDesvinculacion||"",onChange:_,className:`${Q} border-red-300`})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),s.jsx("input",{type:"text",name:"motivoDesvinculacion",value:i.motivoDesvinculacion||"",onChange:_,className:`${Q} border-red-300`})]})]}),m&&s.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:m}),s.jsxs("div",{className:"flex justify-end items-center gap-4",children:[l&&s.jsx("button",{type:"button",onClick:j,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:l?"Actualizar":"Agregar"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[s.jsx("button",{onClick:H,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),s.jsx("input",{type:"file",onChange:K,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),x&&s.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${x.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.message})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[s.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:d,onChange:X=>u(X.target.value),className:`${Q} md:col-span-2 lg:col-span-1`}),s.jsxs("select",{name:"curso",value:f.curso,onChange:I,className:Q,children:[s.jsx("option",{value:"",children:"Todos los Cursos"}),Vm.map(X=>s.jsx("option",{children:X},X))]}),s.jsxs("select",{name:"estado",value:f.estado,onChange:I,className:Q,children:[s.jsx("option",{value:"",children:"Todos los Estados"}),RB.map(X=>s.jsx("option",{children:X},X))]}),s.jsxs("select",{name:"profesor",value:f.profesor,onChange:I,className:Q,children:[s.jsx("option",{value:"",children:"Todos los Profesores"}),XD.map(X=>s.jsx("option",{children:X},X))]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:G.map(X=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[s.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:X.nombreEstudiante}),s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:X.curso})]}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:X.nombreEmpresa}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:X.profesorTutorEmpresa}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Hrt[X.estado]}`,children:X.estado})}),s.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[s.jsx("button",{onClick:()=>F(X),className:"text-blue-600 hover:underline",children:"Supervisión"}),s.jsx("button",{onClick:()=>T(X),className:"text-yellow-600 hover:underline",children:"Editar"}),s.jsx("button",{onClick:()=>L(X.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},X.id))})]})})]}),y&&E&&s.jsx($rt,{record:E,onClose:S,onSave:M})]})},aU="actividades_remotas",Efe="respuestas_actividades",Cfe="pruebas_estandarizadas",Grt="usuarios",jfe=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(typeof e=="object"){if(typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if("seconds"in e&&"nanoseconds"in e){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}}return null},nU=e=>{const t=jfe(e);return t?t.toISOString():void 0},VS=e=>{const t=jfe(e);return t?t.toISOString().split("T")[0]:void 0},sU=e=>{if(!e)return null;const t=new Date(`${e}T00:00:00`);return isNaN(t.getTime())?null:dr.fromDate(t)},iU=e=>dr.fromDate(new Date(e||new Date().toISOString())),qrt=e=>!!e&&/^data:/.test(e),v1=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(v1);const t={};return Object.entries(e).forEach(([r,a])=>{a!==void 0&&(t[r]=v1(a))}),t},Krt=e=>{const t=e.match(/^data:(.*?);base64,(.*)$/);if(!t)throw new Error("Data URL inválida");const r=t[1]||"application/octet-stream",a=t[2];let n="";if(typeof atob=="function")n=atob(a);else{const l=typeof Buffer<"u"?Buffer:null;if(l)n=l.from(a,"base64").toString("binary");else throw new Error("No hay decodificador base64 disponible")}const i=n.length,o=new Uint8Array(i);for(let l=0;l<i;l++)o[l]=n.charCodeAt(l);return{bytes:o,contentType:r}},Wrt=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:nU(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:VS(t.plazoEntrega)||VS(new Date)}},Xrt=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCompletado:nU(t.fechaCompletado)||new Date().toISOString()}},Yrt=e=>{const t=e.data()||{};return{id:e.id,...t}},Jrt=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:nU(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:VS(t.plazoEntrega)||VS(new Date)}},Zrt=e=>{const t=jt(ut(st,aU),Gt("fechaCreacion","desc"));return rr(t,r=>e(r.docs.map(Wrt)),r=>{console.error("subscribeToActividades error:",r),e([])})},eat=(e,t)=>{const r=ut(st,Efe),a=jt(r,Gt("fechaCompletado","desc"));return rr(a,n=>e(n.docs.map(Xrt)),n=>{console.error("subscribeToRespuestas error:",n),e([])})},tat=e=>{const t=jt(ut(st,Grt),Gt("nombreCompleto","asc"));return rr(t,r=>e(r.docs.map(Yrt)),r=>{console.error("subscribeToAllUsers error:",r),e([])})},rat=e=>{const t=jt(ut(st,Cfe),Gt("fechaCreacion","desc"));return rr(t,r=>e(r.docs.map(Jrt)),r=>{console.error("subscribeToPruebasEstandarizadas error:",r),e([])})},aat=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:a,...n}=e||{},i=v1({...n,fechaCreacion:iU(r),plazoEntrega:sU(a)});return(await Kr(ut(st,aU),i)).id},nat=async(e,t)=>{const{fechaCreacion:r,plazoEntrega:a,...n}=t||{},i=v1({...n});r!==void 0&&(i.fechaCreacion=iU(r)),a!==void 0&&(i.plazoEntrega=sU(a)),await zi($t(st,aU,e),i)},sat=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:a,...n}=e||{},i=v1({...n,fechaCreacion:iU(r),plazoEntrega:sU(a)});return(await Kr(ut(st,Cfe),i)).id},iat=async(e,t)=>{const r=v1(t);await zi($t(st,Efe,e),r)},oat=(e,t)=>{if(!t||t<=0)return"1.0";const a=t*.6;let n;return e>=a?n=4+3*(e-a)/(t-a+1e-9):n=1+3*e/(a+1e-9),n=Math.max(1,Math.min(7,n)),n.toFixed(1)},lat=async(e,t,r)=>{const{bytes:a,contentType:n}=Krt(e),i=Date.now(),o=t.replace(/\s+/g,"_"),c=`recursos/${r!=="—"?r:"general"}/${i}/${o}`,d=vu(c4,c);await H1(d,a,{contentType:n});const u=await gA(d);return{nombre:t,url:u}},cat=async e=>{var i;const t=e.nivel||"general",r=((i=e.recursos)==null?void 0:i.archivos)||[],a=await Promise.all(r.map(async(o,l)=>{if(qrt(o==null?void 0:o.url)){const c=(o==null?void 0:o.nombre)||`archivo_${l}.bin`;return lat(o.url,c,t)}return{nombre:(o==null?void 0:o.nombre)||`archivo_${l}`,url:o==null?void 0:o.url}})),n={...e,recursos:{...e.recursos||{},archivos:a}};return aat(n)},mw=e=>e?new Date(e).toLocaleDateString("es-CL"):"",tY=e=>e?new Date(e).toLocaleString("es-CL"):"",dat=e=>new Promise((t,r)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>t(String(a.result)),a.onerror=n=>r(n)}),kfe=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(a=>a.includes("punto")||a.includes("Punto")||a.includes("Factor")||a.includes("factor")||a.includes("Criterio")||a.includes("criterio")||a.includes("Aspecto")||a.includes("aspecto"))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},bi=(e,t)=>{if(t&&kfe(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(n=>bi(n,`${t}-array-item`)).join(", ");if(Object.keys(e).some(n=>n.includes("punto")||n.includes("Punto")||n.includes("Factor")||n.includes("factor")||n.includes("Criterio")||n.includes("criterio")))return"[Rúbrica de evaluación]";const a=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const n of a)if(e[n]&&typeof e[n]=="string")return e[n];try{const n=JSON.stringify(e);return n.length>100?"[Objeto complejo]":n}catch{return"[Objeto no serializable]"}}return String(e)},uc=(e,t,...r)=>{if(kfe(e,`extractTextSafely-${t}`),!e)return"";for(const a of r)if(e[a]){const n=bi(e[a],`${t}-${a}`);if(n&&n!=="[Objeto complejo]"&&n!=="[Objeto no serializable]")return n}return typeof e=="string"?e:"[Sin contenido disponible]"},In=({content:e,context:t="unknown"})=>{try{const r=bi(e,`UltraSafeRenderer-${t}`);return s.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),s.jsx("span",{children:"[Error al mostrar contenido]"})}},hO={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3,4,5]},AO=["Localizar información","Interpretar y relacionar","Reflexionar","Extraer información explícita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],uat=()=>{const[e,t]=w.useState([]),[r,a]=w.useState([]),[n,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState(null),[u,f]=w.useState(null),[A,m]=w.useState(!1),[g,x]=w.useState(!1),[v,y]=w.useState(!1),[N,E]=w.useState(!1),[B,_]=w.useState(!1),[I,j]=w.useState(!0),[k,T]=w.useState(null),[L,F]=w.useState(""),[S,M]=w.useState(null),[H,K]=w.useState(null),[Q,G]=w.useState([]),[X,Z]=w.useState("carpetas"),[U,Y]=w.useState("Todas"),[P,D]=w.useState("Todos"),[W,J]=w.useState(null),[ce,ie]=w.useState([]),[re,de]=w.useState(!1),[oe,be]=w.useState(null),[q,we]=w.useState(null),[Te,Ee]=w.useState([]),[ue,ge]=w.useState(""),he={asignatura:cn[0],nivel:"—",contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[ve,le]=w.useState(he),ne={asignatura:cn[0],nivel:"—",contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[Ae,pe]=w.useState(ne);w.useEffect(()=>{j(!0);const Ne=Zrt(t),xe=rat(a),Fe=eat(i),Ge=tat(Ue=>{l(Ue),j(!1)});return()=>{Ne(),xe(),Fe(),Ge()}},[]);const ke=Ne=>{le(xe=>({...xe,[Ne.target.name]:Ne.target.value}))},Le=Ne=>{pe(xe=>({...xe,[Ne.target.name]:Ne.target.value}))},qe=Ne=>{le(xe=>({...xe,recursos:{...xe.recursos,[Ne.target.name]:Ne.target.value}}))},ze=Ne=>{Ne.target.files&&G(Array.from(Ne.target.files))},Re=Ne=>{le(xe=>{const Fe=xe.tipos.includes(Ne)?xe.tipos.filter(Ue=>Ue!==Ne):[...xe.tipos,Ne],Ge={...xe.cantidadPreguntas};return Fe.includes(Ne)?Ge[Ne]||(Ge[Ne]=hO[Ne][0]):delete Ge[Ne],{...xe,tipos:Fe,cantidadPreguntas:Ge}})},We=(Ne,xe)=>{le(Fe=>({...Fe,cantidadPreguntas:{...Fe.cantidadPreguntas,[Ne]:xe}}))},ct=(Ne,xe=!1)=>{(xe?pe:le)(Ge=>{const Ue=Ge.estudiantesDestino||[],Ye=Ue.includes(Ne)?Ue.filter(et=>et!==Ne):[...Ue,Ne];return{...Ge,estudiantesDestino:Ye}})},Ze=()=>{const{tipos:Ne,contenido:xe,asignatura:Fe,nivel:Ge,cantidadPreguntas:Ue}=ve;let Ye=`Eres un experto diseñador de actividades pedagógicas con énfasis en la Taxonomía de Bloom y metodologías activas de aprendizaje. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${xe}"
Asignatura: ${Fe}
Nivel educativo: ${Ge}

REQUISITOS PEDAGÓGICOS:
1. Asegura que las preguntas sean claras, concisas y libres de ambigüedades
2. Distribuye las preguntas según Taxonomía de Bloom: 20% conocimiento, 30% comprensión, 30% aplicación, 20% análisis/evaluación 
3. Evita preguntas demasiado simples o demasiado complejas para el nivel educativo
4. Incluye contextos reales y aplicaciones prácticas cuando sea posible
5. Para múltiple opción, todas las opciones deben ser plausibles (no incluir opciones obviamente incorrectas)
6. Las rúbricas de desarrollo deben incluir criterios específicos y niveles de desempeño claros
7. En comprensión lectora, genera textos originales y preguntas de distinta complejidad cognitiva

Genera los siguientes elementos:
- introduccion: breve y motivadora que contextualice el aprendizaje
- panelDidactico: Un objeto JSON con la siguiente estructura:
  {
    "titulo": "Título descriptivo del tema central",
    "subtitulos": [
      {
        "titulo": "Primer subtítulo",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      },
      {
        "titulo": "Segundo subtítulo",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      },
      {
        "titulo": "Tercer subtítulo (opcional)",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      }
    ],
    "conceptosClave": [
      "Concepto 1: breve definición",
      "Concepto 2: breve definición",
      "Concepto 3: breve definición"
    ]
  }
  En total debe tener entre 300-500 palabras con contenido educativo detallado que explique los conceptos clave del tema, incluya ejemplos claros y conocimiento esencial que el estudiante necesita para responder las actividades.
- actividades: objeto con propiedades por tipo:
`;return Ne.forEach(et=>{const Nt=Ue[et]||hO[et][0];switch(et){case"Quiz":Ye+=`- "Quiz": Array de ${Nt} objetos { 
  pregunta: clara y contextualizada,
  opciones: array de 4 alternativas plausibles con opciones de distinta dificultad,
  respuestaCorrecta: la opción correcta (no ambigua),
  puntaje: 1 para cada pregunta
}
`;break;case"Comprensión de Lectura":Ye+=`- "Comprensión de Lectura": Objeto { 
  texto: texto original de 200-300 palabras adaptado al nivel con información relevante,
  preguntas: Array de ${Nt} objetos {
    pregunta: enfocadas en distintos niveles de comprensión (literal, inferencial y crítica),
    opciones: array de 4 alternativas plausibles sin pistas obvias,
    respuestaCorrecta: la opción correcta basada en el texto,
    puntaje: 1 para cada pregunta
  }
}
`;break;case"Términos Pareados":Ye+=`- "Términos Pareados": Array de ${Nt} objetos {
  concepto: término clave del contenido, claro y específico,
  definicion: explicación precisa y única que no sea ambigua
}
`;break;case"Desarrollo":Ye+=`- "Desarrollo": Array de ${Nt} objetos {
  pregunta: pregunta que fomente el pensamiento crítico y la aplicación de conocimientos,
  rubrica: criterios de evaluación detallados con niveles de desempeño específicos (sobresaliente, adecuado, en desarrollo, inicial)
}
`;break}}),Ye+=`
EJEMPLOS DE ALTA CALIDAD POR TIPO:
`,Ne.includes("Quiz")&&(Ye+=`
Quiz de ejemplo: {
  "pregunta": "En el contexto de la función fotosintética de las plantas, ¿qué ocurriría si una planta se expone a luz con longitudes de onda exclusivamente verdes?",
  "opciones": [
    "La planta aumentaría su tasa fotosintética debido a la mayor disponibilidad de luz",
    "La planta moriría inmediatamente por exceso de radiación",
    "La tasa fotosintética disminuiría significativamente ya que el pigmento clorofila refleja la luz verde",
    "No habría cambios en la fotosíntesis porque las plantas no dependen del espectro luminoso"
  ],
  "respuestaCorrecta": "La tasa fotosintética disminuiría significativamente ya que el pigmento clorofila refleja la luz verde",
  "puntaje": 1
}
`),Ne.includes("Comprensión de Lectura")&&(Ye+=`
Comprensión de Lectura de ejemplo: {
  "texto": "La revolución industrial transformó profundamente las estructuras sociales y económicas de Europa durante el siglo XIX. El paso de una economía agraria y artesanal a una dominada por la industria y la manufactura mecanizada significó cambios sin precedentes en las condiciones laborales. Las jornadas extenuantes de 14-16 horas, el trabajo infantil y la falta de seguridad caracterizaron los primeros años de industrialización. No obstante, este periodo también representó un aumento en la producción de bienes, mejoras en el transporte y comunicaciones, y eventualmente, el surgimiento de una clase media con mayor acceso a productos manufacturados. Estos cambios sentaron las bases para movimientos obreros que, con el tiempo, lograron mejoras significativas en los derechos laborales que persisten hasta la actualidad.",
  "preguntas": [
    {
      "pregunta": "Según el texto, ¿cuál fue una consecuencia negativa inmediata de la revolución industrial?",
      "opciones": [
        "El desplome de los sistemas de transporte",
        "Las extenuantes jornadas laborales de 14-16 horas",
        "La disminución en la producción de bienes manufacturados",
        "La eliminación de la clase media europea"
      ],
      "respuestaCorrecta": "Las extenuantes jornadas laborales de 14-16 horas",
      "puntaje": 1
    }
  ]
}
`),Ye},Qe=()=>{const{contenido:Ne,objetivosAprendizaje:xe,asignatura:Fe,nivel:Ge}=Ae;return`Eres un experto pedagogo especializado en evaluación educativa y diseño de pruebas estandarizadas tipo SIMCE.
Responde EXCLUSIVAMENTE con JSON válido según la estructura solicitada.

INFORMACIÓN CURRICULAR:
- Asignatura: ${Fe}
- Nivel educativo: ${Ge}
- Contenido principal: ${Ne}
- Objetivos de Aprendizaje: ${xe}

REQUISITOS PEDAGÓGICOS:
1. Genera preguntas equilibradas en dificultad: 25% básicas, 50% intermedias, 25% avanzadas
2. Usa contextos reales y significativos para los estudiantes
3. Distribuye las habilidades cognitivas de manera equilibrada según taxonomía SIMCE
4. Las preguntas deben evaluar aprendizajes significativos, no memorización de detalles irrelevantes
5. Los distractores (opciones incorrectas) deben ser plausibles y revelar concepciones erróneas comunes
6. Los textos deben ser originales, apropiados para el nivel, y con complejidad adecuada
7. Las preguntas deben evaluar distintos niveles de comprensión y aplicación

FORMATO REQUERIDO:
{
  "titulo": "Título descriptivo de la prueba",
  "instrucciones": "Instrucciones claras y detalladas para los estudiantes",
  "textos": [
    {
      "id": 1,
      "titulo": "Título representativo del texto",
      "contenido": "Texto original y apropiado de 250-350 palabras con complejidad adecuada al nivel",
      "tipo": "narrativo/informativo/argumentativo/poetico",
      "palabras": 300
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Enunciado claro que evalúe una habilidad específica",
      "opciones": ["Alternativa correcta", "Distractor plausible 1", "Distractor plausible 2", "Distractor plausible 3"],
      "respuestaCorrecta": "A",
      "habilidad": "Habilidad SIMCE específica que evalúa",
      "justificacion": "Explicación pedagógica de por qué es correcta y los errores conceptuales en los distractores",
      "textoId": 1
    }
  ]
}

REQUISITOS ESPECÍFICOS:
- ${Fe==="Lenguaje y Comunicación"||Fe==="Lengua y Literatura"?"3-4 textos de distintos tipos (narrativo, informativo, argumentativo y/o poético) con temáticas complementarias":"2-3 textos informativos con contenido relevante para el objetivo de aprendizaje"}
- Exactamente 30 preguntas numeradas del 1 al 30
- 4 opciones por pregunta (A-D) con una única respuesta correcta
- Habilidades a evaluar según SIMCE: ${AO.join(", ")}
- Para preguntas basadas en textos: incluir el "textoId" correspondiente
- Sin comentarios, explicaciones ni marcas fuera de la estructura JSON

IMPORTANTE: Generar un instrumento de evaluación de ALTA CALIDAD que pueda ser usado directamente en un contexto escolar real.`};function wt(Ne,xe){if(Ne==="Desarrollo"&&Array.isArray(xe))return xe.map((Fe,Ge)=>{if(typeof Fe=="string"){const Ue=Fe.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return Ue?{pregunta:uc(Ue[1],`desarrollo-pregunta-${Ge}`),rubrica:uc(Ue[2],`desarrollo-rubrica-${Ge}`)}:{pregunta:uc(Fe,`desarrollo-pregunta-simple-${Ge}`),rubrica:""}}if(Fe&&typeof Fe=="object"){const Ue=uc(Fe,`desarrollo-obj-pregunta-${Ge}`,"pregunta","Pregunta","texto");let Ye="";if(Fe.rubrica||Fe.Rubrica||Fe.rúbrica||Fe.Rúbrica){const et=Fe.rubrica||Fe.Rubrica||Fe.rúbrica||Fe.Rúbrica;Ye=bi(et,`desarrollo-rubrica-${Ge}`)}return{pregunta:Ue,rubrica:Ye}}return{pregunta:bi(Fe,`desarrollo-fallback-${Ge}`),rubrica:""}});if(Ne==="Términos Pareados"&&Array.isArray(xe))return xe.map((Fe,Ge)=>{if(typeof Fe=="string"){const Ue=Fe.match(/^(.+?)[\s:-–]+(.+)$/);return Ue?{id:Ge,concepto:uc(Ue[1],`pareados-concepto-${Ge}`),definicion:uc(Ue[2],`pareados-definicion-${Ge}`)}:{id:Ge,concepto:uc(Fe,`pareados-concepto-simple-${Ge}`),definicion:""}}return Fe&&typeof Fe=="object"?{id:Ge,concepto:uc(Fe,`pareados-obj-concepto-${Ge}`,"concepto","termino"),definicion:uc(Fe,`pareados-obj-definicion-${Ge}`,"definicion","significado")}:{id:Ge,concepto:bi(Fe,`pareados-fallback-${Ge}`),definicion:""}});if(Ne==="Comprensión de Lectura"){if(xe&&typeof xe=="object"&&!Array.isArray(xe)&&Array.isArray(xe.preguntas))return{texto:uc(xe,"comprension-texto","texto"),preguntas:xe.preguntas.map((Fe,Ge)=>({pregunta:uc(Fe,`comprension-pregunta-${Ge}`,"pregunta"),opciones:Array.isArray(Fe.opciones)?Fe.opciones.map(Ue=>bi(Ue,`comprension-opcion-${Ge}`)):[],respuestaCorrecta:bi(Fe.respuestaCorrecta,`comprension-respuesta-${Ge}`),puntaje:typeof Fe.puntaje=="number"?Fe.puntaje:1}))};if(Array.isArray(xe)){const Fe=xe.map((Ue,Ye)=>uc(Ue,`comprension-bloque-${Ye}`,"texto")).join(`

---

`),Ge=xe.flatMap(Ue=>Array.isArray(Ue.preguntas)?Ue.preguntas:[]);return{texto:Fe,preguntas:Ge.map((Ue,Ye)=>({pregunta:uc(Ue,`comprension-combined-pregunta-${Ye}`,"pregunta"),opciones:Array.isArray(Ue.opciones)?Ue.opciones.map(et=>bi(et,`comprension-combined-opcion-${Ye}`)):[],respuestaCorrecta:bi(Ue.respuestaCorrecta,`comprension-combined-respuesta-${Ye}`),puntaje:typeof Ue.puntaje=="number"?Ue.puntaje:1}))}}}return Ne==="Quiz"&&Array.isArray(xe)?xe.map((Fe,Ge)=>({pregunta:uc(Fe,`quiz-pregunta-${Ge}`,"pregunta"),opciones:Array.isArray(Fe.opciones)?Fe.opciones.map(Ue=>bi(Ue,`quiz-opcion-${Ge}`)):[],respuestaCorrecta:bi(Fe.respuestaCorrecta,`quiz-respuesta-${Ge}`),puntaje:typeof Fe.puntaje=="number"?Fe.puntaje:1})):xe}const ar=async Ne=>{var xe;if(Ne.preventDefault(),!ve.contenido.trim()||ve.tipos.length===0){T("Contenido y al menos un tipo de actividad son obligatorios.");return}y(!0),T(null);try{const Fe=await Promise.all(Q.map(async Dt=>({nombre:Dt.name,url:await dat(Dt)}))),Ge=Ze(),Ue=await ln.currentUser.getIdToken(),Ye=await fetch("/api/generarActividadRemota",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ue}`},body:JSON.stringify({prompt:Ge,formData:ve,selectedFiles:Q})});if(!Ye.ok)throw new Error("Error al generar la actividad con IA");const et=await Ye.json(),Nt={};for(const Dt of ve.tipos){const Vt=(xe=et.actividades)==null?void 0:xe[Dt];Nt[Dt]=wt(Dt,Vt)}let Et="";et.panelDidactico&&(Et=typeof et.panelDidactico=="string"?et.panelDidactico:JSON.stringify(et.panelDidactico));const zt={id:"",fechaCreacion:new Date().toISOString(),...ve,recursos:{...ve.recursos,archivos:Fe},introduccion:bi(et.introduccion,"introduccion")||"Actividad generada para reforzar el aprendizaje.",panelDidactico:Et,generatedContent:Nt};M(zt)}catch(Fe){T(`Error al generar la actividad: ${(Fe==null?void 0:Fe.message)||Fe}`)}finally{y(!1)}},qt=async Ne=>{if(Ne.preventDefault(),!Ae.contenido.trim()||!Ae.objetivosAprendizaje.trim()){T("Contenido y objetivos de aprendizaje son obligatorios.");return}y(!0),T(null);try{const xe=Qe(),Fe=await ln.currentUser.getIdToken(),Ge=await fetch("/api/generarPruebaRemota",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Fe}`},body:JSON.stringify({prompt:xe,pruebaFormData:Ae})});if(!Ge.ok)throw new Error("Error al generar la prueba con IA");const Ue=await Ge.json();if(!Ue.preguntas||!Array.isArray(Ue.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas válido");const Ye=(Ue.textos||[]).map((Et,zt)=>({id:Et.id||zt+1,titulo:bi(Et.titulo,`texto-titulo-${zt}`)||`Texto ${zt+1}`,contenido:bi(Et.contenido,`texto-contenido-${zt}`)||"Contenido no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(Et.tipo)?Et.tipo:"informativo",palabras:Et.palabras||(Et.contenido?String(Et.contenido).split(" ").length:0)})),et=Ue.preguntas.slice(0,30).map((Et,zt)=>({numero:Et.numero||zt+1,pregunta:bi(Et.pregunta,`pregunta-${zt}`)||`Pregunta ${zt+1}`,opciones:Array.isArray(Et.opciones)&&Et.opciones.length>=4?Et.opciones.slice(0,4).map((Dt,Vt)=>bi(Dt,`pregunta-opcion-${zt}-${Vt}`)):["A","B","C","D"],respuestaCorrecta:["A","B","C","D"].includes(Et.respuestaCorrecta)?Et.respuestaCorrecta:"A",habilidad:AO.includes(Et.habilidad)?Et.habilidad:AO[0],justificacion:bi(Et.justificacion,`justificacion-${zt}`)||"Justificación no disponible",...Et.textoId&&typeof Et.textoId=="number"?{textoId:Et.textoId}:{}})),Nt={id:"",fechaCreacion:new Date().toISOString(),...Ae,titulo:bi(Ue.titulo,"prueba-titulo")||`Prueba ${Ae.asignatura}`,instrucciones:bi(Ue.instrucciones,"prueba-instrucciones")||"Lee y responde.",textos:Ye,preguntas:et};K(Nt)}catch(xe){T(`Error al generar la prueba: ${(xe==null?void 0:xe.message)||xe}`)}finally{y(!1)}},gr=async()=>{if(S)try{E(!0),await cat(S),le(he),G([]),m(!1),M(null)}catch(Ne){console.error("Error al guardar la actividad con archivos:",Ne),T("No se pudo guardar la actividad. Revisa los archivos adjuntos.")}finally{E(!1)}},Pr=async()=>{if(H)try{E(!0);const Ne={...H,cursosDestino:H.cursosDestino||[],estudiantesDestino:H.estudiantesDestino||[],textos:H.textos||[],preguntas:H.preguntas.map(xe=>({...xe,textoId:xe.textoId||null}))};await sat(Ne),pe(ne),x(!1),K(null)}catch(Ne){console.error("Error al guardar la prueba:",Ne),T("No se pudo guardar la prueba.")}finally{E(!1)}},yr=w.useMemo(()=>{var Fe,Ge,Ue;const Ne=c||u;if(!Ne||!o.length)return[];const xe=new Map;return!((Fe=Ne.cursosDestino)!=null&&Fe.length)&&!((Ge=Ne.estudiantesDestino)!=null&&Ge.length)?[]:((Ue=Ne.estudiantesDestino)!=null&&Ue.length&&o.filter(Ye=>Ye.profile===Tt.ESTUDIANTE&&Ne.estudiantesDestino.includes(Ye.nombreCompleto)).forEach(Ye=>xe.set(Ye.id,Ye)),Array.from(xe.values()).sort((Ye,et)=>Ye.nombreCompleto.localeCompare(et.nombreCompleto)))},[c,u,o]),Tn=w.useMemo(()=>{const Ne=(c==null?void 0:c.id)||(u==null?void 0:u.id);return n.filter(xe=>xe.actividadId===Ne)},[n,c,u]),Rr=w.useMemo(()=>o.filter(Ne=>Ne.profile===Tt.ESTUDIANTE).sort((Ne,xe)=>Ne.nombreCompleto.localeCompare(xe.nombreCompleto)),[o]),Ha=w.useMemo(()=>L.trim()?Rr.filter(Ne=>Ne.nombreCompleto.toLowerCase().includes(L.toLowerCase())):Rr,[Rr,L]),Rn=w.useMemo(()=>{const Ne=new Set;return e.forEach(xe=>{(xe.estudiantesDestino||[]).forEach(Fe=>{const Ge=o.find(Ue=>Ue.profile===Tt.ESTUDIANTE&&Ue.nombreCompleto===Fe);Ge&&Ne.add(Ge.id)})}),r.forEach(xe=>{(xe.estudiantesDestino||[]).forEach(Fe=>{const Ge=o.find(Ue=>Ue.profile===Tt.ESTUDIANTE&&Ue.nombreCompleto===Fe);Ge&&Ne.add(Ge.id)})}),n.forEach(xe=>Ne.add(xe.estudianteId)),o.filter(xe=>xe.profile===Tt.ESTUDIANTE&&Ne.has(xe.id)).sort((xe,Fe)=>xe.nombreCompleto.localeCompare(Fe.nombreCompleto))},[e,r,n,o]),Lr=w.useMemo(()=>o.find(Ne=>Ne.id===oe)||null,[o,oe]),pr=w.useMemo(()=>{if(!Lr)return{asignadas:[],respuestas:[]};const Ne=[...e.filter(Fe=>(Fe.estudiantesDestino||[]).includes(Lr.nombreCompleto)).map(Fe=>({tipo:"Actividad",item:Fe})),...r.filter(Fe=>(Fe.estudiantesDestino||[]).includes(Lr.nombreCompleto)).map(Fe=>({tipo:"Prueba",item:Fe}))],xe=n.filter(Fe=>Fe.estudianteId===Lr.id);return{asignadas:Ne,respuestas:xe}},[Lr,e,r,n]),Jr=()=>s.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[["carpetas","actividades","pruebas","gestion"].map(Ne=>s.jsxs("button",{onClick:()=>{Z(Ne),d(null),f(null),be(null)},className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition
            ${X===Ne?"bg-amber-500 text-white shadow":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:[Ne==="carpetas"&&s.jsx(o$,{size:18}),Ne==="actividades"&&s.jsx(Lo,{size:18}),Ne==="pruebas"&&s.jsx(Oae,{size:18}),Ne==="carpetas"?"Carpetas de Estudiantes":Ne==="actividades"?"Actividades Remotas":Ne==="pruebas"?"Pruebas Estandarizadas":"Gestión de Trabajos"]},Ne)),s.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(z1,{className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-60",size:18}),s.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:Ne=>F(Ne.target.value),className:"pl-10 pr-3 py-2 rounded-xl bg-white border border-slate-200 focus:outline-none focus:ring-2 focus:ring-amber-400"})]}),X==="actividades"&&!S&&!c&&s.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[s.jsx(qC,{size:18})," Nueva"]}),X==="pruebas"&&!H&&!u&&s.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[s.jsx(qC,{size:18})," Nueva"]})]})]}),vs=w.useMemo(()=>{const Ne=new Set;return e.forEach(xe=>(xe==null?void 0:xe.asignatura)&&Ne.add(xe.asignatura)),["Todas",...Array.from(Ne).sort()]},[e]),Za=w.useMemo(()=>{const Ne=new Set;return e.forEach(Fe=>(Fe==null?void 0:Fe.nivel)&&Ne.add(Fe.nivel)),["Todos","—",...Array.from(Ne).filter(Fe=>!!Fe&&Fe!=="—").sort()]},[e]),Ln=w.useMemo(()=>{const Ne=[];for(const xe of e){const Fe=xe.estudiantesDestino||[];for(const Ge of Fe){const Ue=o.find(et=>et.profile===Tt.ESTUDIANTE&&et.nombreCompleto===Ge)||null,Ye=Ue?n.find(et=>et.estudianteId===Ue.id&&et.actividadId===xe.id):void 0;Ne.push({actividad:xe,estudiante:Ue,estado:Ye?"Completado":"Pendiente",respuesta:Ye})}}return Ne},[e,o,n]),Qs=w.useMemo(()=>Ln.filter(Ne=>{const xe=U==="Todas"||Ne.actividad.asignatura===U,Fe=P==="Todos"||Ne.actividad.nivel===P;return xe&&Fe}),[Ln,U,P]),tr=()=>{var Ne;return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Gestión de Trabajos"}),s.jsx("p",{className:"text-slate-500",children:"Organiza envíos y realizados por asignatura y nivel. Reasigna actividades ya creadas sin consumir tokens."})]}),s.jsxs("div",{className:"md:ml-auto flex flex-wrap gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Asignatura"}),s.jsx("select",{value:U,onChange:xe=>Y(xe.target.value),className:"border-slate-300 rounded-md",children:vs.map(xe=>s.jsx("option",{value:xe,children:xe},xe))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Nivel"}),s.jsx("select",{value:P,onChange:xe=>D(xe.target.value),className:"border-slate-300 rounded-md",children:Za.map(xe=>s.jsx("option",{value:xe,children:xe},xe))})]})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Asignatura"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nivel"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipos"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),s.jsx("th",{className:"px-4 py-3"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Qs.map((xe,Fe)=>{var Ge,Ue,Ye;return s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:s.jsx(In,{content:xe.actividad.asignatura,context:"gestion-asig"})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:xe.actividad.nivel||"—"}),s.jsx("td",{className:"px-4 py-3 text-sm",children:((Ge=xe.estudiante)==null?void 0:Ge.nombreCompleto)||"—"}),s.jsx("td",{className:"px-4 py-3 text-sm",children:(Ue=xe.actividad.tipos)==null?void 0:Ue.join(", ")}),s.jsx("td",{className:"px-4 py-3 text-sm",children:xe.estado==="Completado"?s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[s.jsx(dn,{size:14})," Completado"]}):s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[s.jsx(bc,{size:14})," Pendiente"]})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:xe.respuesta?`${xe.respuesta.puntaje}/${xe.respuesta.puntajeMaximo}`:"—"}),s.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:xe.respuesta?xe.respuesta.nota:"—"}),s.jsx("td",{className:"px-4 py-3 text-sm",children:xe.respuesta?tY(xe.respuesta.fechaCompletado):"—"}),s.jsx("td",{className:"px-4 py-3 text-sm text-right",children:s.jsx("button",{onClick:()=>{J(xe.actividad),ie([])},className:"text-blue-600 hover:text-blue-800 font-semibold",title:"Reasignar a nuevos estudiantes",children:"Reasignar"})})]},`${xe.actividad.id}-${((Ye=xe.estudiante)==null?void 0:Ye.id)||Fe}`)})})]})}),W&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Reasignar Actividad"}),s.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["Selecciona estudiantes adicionales para la actividad de ",s.jsx("strong",{children:W.asignatura})," — ",(Ne=W.tipos)==null?void 0:Ne.join(", "),"."]}),s.jsx("div",{className:"mb-3",children:s.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:xe=>F(xe.target.value),className:"w-full border-slate-300 rounded-md shadow-sm"})}),s.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-md p-2 bg-slate-50",children:(L?Ha:Rr).map(xe=>{const Fe=(W.estudiantesDestino||[]).includes(xe.nombreCompleto);return s.jsxs("label",{className:`flex items-center gap-2 p-2 rounded cursor-pointer ${Fe?"opacity-50":"hover:bg-slate-100"}`,children:[s.jsx("input",{type:"checkbox",disabled:Fe,checked:ce.includes(xe.nombreCompleto),onChange:()=>{ie(Ge=>Ge.includes(xe.nombreCompleto)?Ge.filter(Ue=>Ue!==xe.nombreCompleto):[...Ge,xe.nombreCompleto])},className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),s.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:xe.nombreCompleto,children:xe.nombreCompleto}),Fe&&s.jsx("span",{className:"ml-auto text-xs text-slate-400",children:"Ya asignado"})]},xe.id)})}),s.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>{J(null),ie([])},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),s.jsx("button",{disabled:re||ce.length===0,onClick:async()=>{if(W)try{de(!0);const xe=W.estudiantesDestino||[],Fe=Array.from(new Set([...xe,...ce]));await nat(W.id,{estudiantesDestino:Fe}),J(null),ie([])}catch(xe){console.error("Error reasignando actividad:",xe),T("No se pudo reasignar la actividad.")}finally{de(!1)}},className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:re?"Guardando...":"Confirmar reasignación"})]})]})})]})},va=()=>{const Ne=L?Ha:Rn;return Ne.length?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4",children:Ne.map(xe=>{const Fe=n.filter(Ye=>Ye.estudianteId===xe.id),Ge=Fe.length,Ue=e.filter(Ye=>(Ye.estudiantesDestino||[]).includes(xe.nombreCompleto)).length+r.filter(Ye=>(Ye.estudiantesDestino||[]).includes(xe.nombreCompleto)).length;return s.jsxs("button",{onClick:()=>be(xe.id),className:"group text-left rounded-2xl border border-slate-200 bg-white hover:shadow-md transition overflow-hidden",children:[s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-br from-amber-50 to-white",children:[s.jsx("div",{className:"rounded-xl p-3 bg-amber-100 text-amber-700",children:s.jsx(o$,{})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"font-semibold text-slate-800 truncate",children:xe.nombreCompleto}),s.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[s.jsx(Lg,{size:14})," ",xe.curso||"—"]})]})]}),s.jsxs("div",{className:"p-4 grid grid-cols-3 text-center text-sm text-slate-600",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold",children:Ue}),s.jsx("p",{className:"text-xs",children:"Asignadas"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold",children:Ge}),s.jsx("p",{className:"text-xs",children:"Entregas"})]}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(bc,{size:16,className:"opacity-70"}),s.jsx("span",{className:"text-xs mt-1",children:Fe.length?mw(Fe.sort((Ye,et)=>(Ye.fechaCompletado||"").localeCompare(et.fechaCompletado||"")).slice(-1)[0].fechaCompletado):"—"})]})]})]},xe.id)})}):s.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow text-center text-slate-500",children:"No hay estudiantes asignados aún."})},ca=()=>{if(!Lr)return null;const{asignadas:Ne,respuestas:xe}=pr;return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsxs("button",{onClick:()=>be(null),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[s.jsx(GC,{size:18})," Volver"]}),s.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Historial — ",Lr.nombreCompleto]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipo"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Título / Asignatura"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Plazo"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Ne.map(({tipo:Fe,item:Ge})=>{var Nt;const Ue=xe.find(Et=>Et.actividadId===Ge.id),Ye=Fe==="Actividad"?`${Ge.asignatura} — ${(Nt=Ge.tipos)==null?void 0:Nt.join(", ")}`:Ge.titulo,et=Ge.plazoEntrega?mw(Ge.plazoEntrega):"—";return s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-4 py-3 text-sm",children:Fe}),s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:s.jsx(In,{content:Ye,context:"hist-titulo"})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:et}),s.jsx("td",{className:"px-4 py-3 text-sm",children:Ue?s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[s.jsx(dn,{size:14})," Completado"]}):s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[s.jsx(bc,{size:14})," Pendiente"]})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:Ue?`${Ue.puntaje}/${Ue.puntajeMaximo}`:"—"}),s.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:Ue?Ue.nota:"—"})]},Ge.id)})})]})})]})},Fa=()=>{var Ne,xe,Fe;return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c?s.jsxs(s.Fragment,{children:[s.jsx(In,{content:c.asignatura,context:"actividad-asignatura"})," - ",c.tipos.join(", ")]}):s.jsx(In,{content:(u==null?void 0:u.titulo)||"Prueba Estandarizada",context:"prueba-titulo"})}),s.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Plazo:"," ",mw((c==null?void 0:c.plazoEntrega)||(u==null?void 0:u.plazoEntrega)),u&&` | Duración: ${u.duracionMinutos} min`]})]}),s.jsxs("button",{onClick:()=>{d(null),f(null)},className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[s.jsx(GC,{size:18})," Volver al listado"]})]}),s.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[s.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"}),((Ne=c==null?void 0:c.tipos)==null?void 0:Ne.includes("Desarrollo"))&&s.jsx("th",{className:"px-4 py-3"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:yr.map(Ge=>{var Ye;const Ue=Tn.find(et=>et.estudianteId===Ge.id);return s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:Ge.nombreCompleto}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Ue?s.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):s.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Ue?`${Ue.puntaje}/${Ue.puntajeMaximo}`:"-"}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold",children:Ue?s.jsx("span",{className:parseFloat(Ue.nota)>=4?"text-green-600":"text-red-600",children:Ue.nota}):"-"}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Ue?tY(Ue.fechaCompletado):"-"}),((Ye=c==null?void 0:c.tipos)==null?void 0:Ye.includes("Desarrollo"))&&s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Ue?s.jsx("button",{onClick:()=>{var Nt,Et,zt;we(Ue);const et=Array.from({length:((Et=(Nt=c.generatedContent)==null?void 0:Nt.Desarrollo)==null?void 0:Et.length)||0},(Dt,Vt)=>({index:Vt,puntaje:0,observacion:""}));Ee(et),ge(((zt=Ue==null?void 0:Ue.revisionDocente)==null?void 0:zt.observacionesGenerales)||"")},className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Revisar Desarrollo"}):s.jsx("span",{className:"text-slate-400",children:"-"})})]},Ge.id)})})]})})]}),q&&((xe=c==null?void 0:c.tipos)==null?void 0:xe.includes("Desarrollo"))&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[s.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Revisión de Desarrollo — ",(q==null?void 0:q.estudianteNombre)||""]}),s.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:(((Fe=c.generatedContent)==null?void 0:Fe.Desarrollo)||[]).map((Ge,Ue)=>{var Ye,et;return s.jsxs("div",{className:"p-3 border rounded-lg",children:[s.jsxs("p",{className:"font-semibold",children:[Ue+1,". ",s.jsx(In,{content:Ge.pregunta,context:`revision-pregunta-${Ue}`})]}),Ge.rubrica&&s.jsxs("p",{className:"text-xs text-slate-600 mt-2 bg-slate-50 p-2 rounded",children:[s.jsx("strong",{children:"Rúbrica:"})," ",s.jsx(In,{content:Ge.rubrica,context:`revision-rubrica-${Ue}`})]}),s.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[s.jsx("label",{className:"text-sm text-slate-700",children:"Puntaje:"}),s.jsx("input",{type:"number",min:0,step:.5,value:((Ye=Te[Ue])==null?void 0:Ye.puntaje)??0,onChange:Nt=>{const Et=Number(Nt.target.value)||0;Ee(zt=>{const Dt=[...zt];return Dt[Ue]={...Dt[Ue]||{index:Ue,puntaje:0},puntaje:Et},Dt})},className:"w-24 border-slate-300 rounded-md"}),s.jsx("input",{type:"text",placeholder:"Observación (opcional)",value:((et=Te[Ue])==null?void 0:et.observacion)||"",onChange:Nt=>{const Et=Nt.target.value;Ee(zt=>{const Dt=[...zt];return Dt[Ue]={...Dt[Ue]||{index:Ue,puntaje:0},observacion:Et},Dt})},className:"flex-1 border-slate-300 rounded-md"})]})]},Ue)})}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observaciones Generales"}),s.jsx("textarea",{rows:3,value:ue,onChange:Ge=>ge(Ge.target.value),className:"w-full border-slate-300 rounded-md"})]}),s.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>{we(null),Ee([]),ge("")},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),s.jsx("button",{onClick:async()=>{if(q)try{_(!0);const Ge=Number(q.puntaje)||0,Ue=Number(q.puntajeMaximo)||0,Ye=(Te||[]).reduce((Et,zt)=>Et+(Number(zt.puntaje)||0),0),et=Ge+Ye,Nt=oat(et,Ue);await iat(q.id,{puntaje:et,puntajeMaximo:Ue,nota:Nt,revisionDocente:{completada:!0,observacionesGenerales:ue||"",detalle:Te||[],puntajeDocente:Ye}}),we(null),Ee([]),ge("")}catch(Ge){console.error("Error guardando revisión:",Ge),T("No se pudo guardar la revisión del docente.")}finally{_(!1)}},disabled:B,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:B?"Guardando...":"Guardar Revisión"})]})]})})]})},Xa=()=>{var Ne,xe;return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),s.jsxs("button",{onClick:()=>m(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[s.jsx(GC,{size:18})," Volver"]})]}),s.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad."}),s.jsxs("form",{onSubmit:ar,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),s.jsx("select",{name:"asignatura",value:ve.asignatura,onChange:ke,className:"w-full border-slate-300 rounded-md shadow-sm",children:cn.map(Fe=>s.jsx("option",{value:Fe,children:Fe},Fe))})]}),s.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos (Opcional)"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones"}),s.jsx("textarea",{name:"instrucciones",value:(Ne=ve.recursos)==null?void 0:Ne.instrucciones,onChange:qe,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Ej: Lee y luego responde..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces"}),s.jsx("textarea",{name:"enlaces",value:(xe=ve.recursos)==null?void 0:xe.enlaces,onChange:qe,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Pega un enlace por línea..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos"}),s.jsx("input",{type:"file",multiple:!0,onChange:ze,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),s.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),s.jsxs("div",{children:[s.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:Fe=>F(Fe.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(L?Ha:Rr).map(Fe=>{var Ge;return s.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:(Ge=ve.estudiantesDestino)==null?void 0:Ge.includes(Fe.nombreCompleto),onChange:()=>ct(Fe.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),s.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Fe.nombreCompleto,children:Fe.nombreCompleto})]},Fe.id)})})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"contenido",value:ve.contenido,onChange:ke,required:!0,rows:4,placeholder:"Temas, conceptos clave o texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),s.jsx("input",{type:"date",name:"plazoEntrega",value:ve.plazoEntrega,onChange:ke,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),s.jsx("div",{className:"space-y-3",children:o5e.map(Fe=>s.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:ve.tipos.includes(Fe),onChange:()=>Re(Fe),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),s.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:Fe})]}),ve.tipos.includes(Fe)&&s.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),hO[Fe].map(Ge=>s.jsx("button",{type:"button",onClick:()=>We(Fe,Ge),className:`px-3 py-1 rounded-full font-semibold text-xs ${ve.cantidadPreguntas[Fe]===Ge?"bg-amber-500 text-white":"bg-slate-200"}`,children:Ge},Ge))]})]},Fe))})]})]}),k&&s.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-2",children:k}),s.jsx("div",{className:"pt-2 text-right",children:s.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center justify-center gap-2",children:[v?s.jsx(bc,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]})},en=()=>{var Ne;return s.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),s.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar."}),s.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[s.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[s.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),s.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:s.jsx(In,{content:S==null?void 0:S.introduccion,context:"preview-introduccion"})})]}),(S==null?void 0:S.panelDidactico)&&s.jsxs("div",{className:"p-5 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg shadow-md",children:[s.jsxs("h3",{className:"font-bold text-emerald-800 text-lg mb-3 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Panel Didáctico - Material de Apoyo"]}),s.jsx("div",{className:"prose prose-emerald max-w-none text-slate-700",children:(()=>{try{if(typeof S.panelDidactico=="string"&&S.panelDidactico.trim().startsWith("{")){const xe=JSON.parse(S.panelDidactico);return s.jsxs("div",{className:"space-y-4",children:[xe.titulo&&s.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:xe.titulo}),Array.isArray(xe.subtitulos)&&xe.subtitulos.map((Fe,Ge)=>s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:Fe.titulo}),s.jsx("p",{className:"whitespace-pre-line",children:Fe.texto})]},Ge)),Array.isArray(xe.conceptosClave)&&xe.conceptosClave.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:"Conceptos Clave"}),s.jsx("ul",{className:"list-disc pl-5 space-y-1",children:xe.conceptosClave.map((Fe,Ge)=>s.jsx("li",{className:"text-emerald-800",children:Fe},Ge))})]}),!xe.subtitulos&&!xe.conceptosClave&&s.jsx("div",{className:"whitespace-pre-line",children:JSON.stringify(xe,null,2)})]})}return s.jsx("p",{className:"whitespace-pre-wrap",children:S.panelDidactico})}catch{return s.jsx("p",{className:"whitespace-pre-wrap",children:S.panelDidactico})}})()})]}),(S==null?void 0:S.recursos)&&(S.recursos.instrucciones||S.recursos.enlaces||((Ne=S.recursos.archivos)==null?void 0:Ne.length))&&s.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[s.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),s.jsxs("div",{className:"space-y-3",children:[S.recursos.instrucciones&&s.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:s.jsx(In,{content:S.recursos.instrucciones,context:"preview-instrucciones"})}),S.recursos.enlaces&&s.jsx("div",{children:S.recursos.enlaces.split(`
`).map((xe,Fe)=>xe.trim()&&s.jsx("a",{href:xe,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:xe},Fe))}),S.recursos.archivos&&S.recursos.archivos.length>0&&s.jsx("ul",{className:"list-disc list-inside",children:S.recursos.archivos.map(xe=>s.jsx("li",{className:"text-slate-700",children:xe.nombre},xe.nombre))})]})]}),S==null?void 0:S.tipos.map(xe=>{const Fe=S.generatedContent[xe];return Fe?s.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[s.jsx("h3",{className:"text-xl font-bold mb-4",children:xe}),s.jsxs("div",{className:"space-y-4 text-sm",children:[xe==="Quiz"&&Array.isArray(Fe)&&Fe.map((Ge,Ue)=>s.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[s.jsxs("p",{className:"font-semibold",children:[Ue+1,". ",s.jsx(In,{content:Ge.pregunta,context:`preview-quiz-pregunta-${Ue}`})]}),s.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:Ge.opciones.map((Ye,et)=>s.jsxs("li",{children:[s.jsxs("strong",{children:[String.fromCharCode(65+et),"."]})," ",s.jsx(In,{content:Ye,context:`preview-quiz-opcion-${Ue}-${et}`})]},et))}),s.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",s.jsx(In,{content:Ge.respuestaCorrecta,context:`preview-quiz-respuesta-${Ue}`})]})]},Ue)),xe==="Comprensión de Lectura"&&Fe&&typeof Fe=="object"&&"preguntas"in Fe&&Array.isArray(Fe.preguntas)&&s.jsxs("div",{children:[s.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:s.jsx(In,{content:Fe.texto,context:"preview-lectura-texto"})}),Fe.preguntas.map((Ge,Ue)=>s.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[s.jsxs("p",{className:"font-semibold",children:[Ue+1,". ",s.jsx(In,{content:Ge.pregunta,context:`preview-lectura-pregunta-${Ue}`})]}),s.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:Ge.opciones.map((Ye,et)=>s.jsxs("li",{children:[s.jsxs("strong",{children:[String.fromCharCode(65+et),"."]})," ",s.jsx(In,{content:Ye,context:`preview-lectura-opcion-${Ue}-${et}`})]},et))}),s.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",s.jsx(In,{content:Ge.respuestaCorrecta,context:`preview-lectura-respuesta-${Ue}`})]})]},Ue))]}),xe==="Términos Pareados"&&Array.isArray(Fe)&&s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full border border-slate-200",children:[s.jsx("thead",{className:"bg-slate-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),s.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),s.jsx("tbody",{children:Fe.map((Ge,Ue)=>s.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[s.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:s.jsx(In,{content:Ge.concepto,context:`preview-pareado-concepto-${Ue}`})}),s.jsx("td",{className:"p-2 align-top text-slate-700",children:s.jsx(In,{content:Ge.definicion,context:`preview-pareado-definicion-${Ue}`})})]},Ge.id))})]})}),xe==="Desarrollo"&&Array.isArray(Fe)&&Fe.map((Ge,Ue)=>s.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[s.jsxs("p",{className:"font-semibold",children:[Ue+1,". ",s.jsx(In,{content:Ge.pregunta,context:`preview-desarrollo-pregunta-${Ue}`})]}),s.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[s.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",s.jsx(In,{content:Ge.rubrica,context:`preview-desarrollo-rubrica-${Ue}`})]})]},Ue))]})]},xe):null})]}),s.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[s.jsx("button",{onClick:()=>M(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),s.jsx("button",{onClick:gr,disabled:N,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:N?"Guardando...":"Confirmar y Asignar"})]})]})},Se=()=>s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify_between items-start",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada"}),s.jsxs("button",{onClick:()=>x(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[s.jsx(GC,{size:18})," Volver"]})]}),s.jsxs("form",{onSubmit:qt,className:"space-y-6 mt-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),s.jsx("select",{name:"asignatura",value:Ae.asignatura,onChange:Le,className:"w-full border-slate-300 rounded-md shadow-sm",children:cn.map(Ne=>s.jsx("option",{value:Ne,children:Ne},Ne))})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Objetivos de Aprendizaje"}),s.jsx("textarea",{name:"objetivosAprendizaje",value:Ae.objetivosAprendizaje,onChange:Le,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Describe OA o contenidos evaluados..."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contenido Base"}),s.jsx("textarea",{name:"contenido",value:Ae.contenido,onChange:Le,rows:4,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),s.jsx("input",{type:"date",name:"plazoEntrega",value:Ae.plazoEntrega,onChange:Le,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),s.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),s.jsxs("div",{children:[s.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:Ne=>F(Ne.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(L?Ha:Rr).map(Ne=>{var xe;return s.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:(xe=Ae.estudiantesDestino)==null?void 0:xe.includes(Ne.nombreCompleto),onChange:()=>ct(Ne.nombreCompleto,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),s.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Ne.nombreCompleto,children:Ne.nombreCompleto})]},Ne.id)})})]})]})]}),k&&s.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:k}),s.jsx("div",{className:"text-right",children:s.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center gap-2",children:[v?s.jsx(bc,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]}),Ve=()=>{var Ne,xe;return s.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización Prueba"}),s.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa y confirma."}),s.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[s.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[s.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:s.jsx(In,{content:H==null?void 0:H.titulo,context:"preview-prueba-titulo"})}),s.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:s.jsx(In,{content:H==null?void 0:H.instrucciones,context:"preview-prueba-instrucciones"})})]}),(Ne=H==null?void 0:H.textos)!=null&&Ne.length?s.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[s.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Textos"}),s.jsx("ol",{className:"space-y-2 list-decimal list-inside",children:H.textos.map((Fe,Ge)=>s.jsxs("li",{children:[s.jsxs("p",{className:"font-semibold",children:[s.jsx(In,{content:Fe.titulo,context:`preview-texto-titulo-${Ge}`}),s.jsxs("span",{className:"text-xs text-slate-500",children:["(",Fe.tipo,")"]})]}),s.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap mt-1",children:s.jsx(In,{content:Fe.contenido,context:`preview-texto-contenido-${Ge}`})})]},Fe.id))})]}):null,(xe=H==null?void 0:H.preguntas)!=null&&xe.length?s.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[s.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preguntas (muestra)"}),H.preguntas.slice(0,10).map((Fe,Ge)=>s.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[s.jsxs("p",{className:"font-semibold",children:[Fe.numero,". ",s.jsx(In,{content:Fe.pregunta,context:`preview-pregunta-texto-${Ge}`})]}),s.jsx("ul",{className:"list-disc pl-6 text-sm mt-1",children:Fe.opciones.map((Ue,Ye)=>s.jsx("li",{children:s.jsx(In,{content:Ue,context:`preview-pregunta-opcion-${Ge}-${Ye}`})},Ye))}),s.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-1",children:["Correcta: ",Fe.respuestaCorrecta]})]},Fe.numero))]}):null]}),s.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[s.jsx("button",{onClick:()=>K(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),s.jsx("button",{onClick:Pr,disabled:N,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:N?"Guardando...":"Confirmar y Asignar"})]})]})},Me=()=>s.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),s.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[s.jsx(qC,{size:18})," Crear Nueva"]})]}),s.jsx("div",{className:"space-y-4",children:e.length>0?e.map(Ne=>{var Ge;const xe=[];(Ge=Ne.estudiantesDestino)!=null&&Ge.length&&xe.push(`Estudiantes: ${Ne.estudiantesDestino.length}`);const Fe=xe.length?xe.join(" | "):"Estudiantes seleccionados";return s.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-bold text-slate-800",children:[s.jsx(In,{content:Ne.asignatura,context:`lista-asignatura-${Ne.id}`})," — ",Ne.tipos.join(", ")]}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",Fe," | Creado: ",mw(Ne.fechaCreacion)]})]}),s.jsx("button",{onClick:()=>d(Ne),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},Ne.id)}):s.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Use "Crear Nueva".'})})]}),He=()=>s.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),s.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[s.jsx(qC,{size:18})," Crear Nueva"]})]}),s.jsx("div",{className:"space-y-4",children:r.length>0?r.map(Ne=>s.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-slate-800",children:s.jsx(In,{content:Ne.titulo,context:`lista-prueba-titulo-${Ne.id}`})}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Creado: ",mw(Ne.fechaCreacion)]})]}),s.jsx("button",{onClick:()=>f(Ne),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},Ne.id)):s.jsx("p",{className:"text-slate-500 text-center py-6",children:"No hay pruebas creadas."})})]});return I?s.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):s.jsxs("div",{className:"animate-fade-in",children:[Jr(),oe?ca():H?Ve():S?en():c||u?Fa():X==="gestion"?tr():X==="pruebas"?g?Se():He():X==="actividades"?A?Xa():Me():va()]})},T2="actividades_remotas",vg="respuestas_actividades",Sfe=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(e&&typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if(e&&typeof e.seconds=="number"&&typeof e.nanoseconds=="number"){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}return null},rY=e=>{const t=Sfe(e);return t?t.toISOString():void 0},fat=e=>{const t=Sfe(e);return t?t.toISOString().split("T")[0]:void 0},bg=e=>{const t=e.data();return{id:e.id,...t,fechaCreacion:rY(t.fechaCreacion)||t.fechaCreacion,plazoEntrega:fat(t.plazoEntrega)||t.plazoEntrega,fechaCompletado:rY(t.fechaCompletado)||t.fechaCompletado}},Pb=(e,t)=>{var a,n;console.error(`❌ Error en ${t}:`,e);const r={name:"FirestoreError",message:e.message||"Error desconocido",code:e.code};return e.code==="failed-precondition"&&((a=e.message)!=null&&a.includes("requires an index"))?(r.message="Se requiere configurar un índice en la base de datos. Contacta al administrador.",console.log("🔗 Enlace para crear índice:",(n=e.message.match(/https:\/\/[^\s]+/))==null?void 0:n[0])):e.code==="permission-denied"?r.message="No tienes permisos para acceder a estos datos.":e.code==="unavailable"&&(r.message="Servicio temporalmente no disponible. Intenta nuevamente."),r},hat=e=>new Promise(t=>setTimeout(t,e)),_fe=async(e,t=3,r="operación")=>{for(let a=1;a<=t;a++)try{return await e()}catch(n){if(console.log(`⚠️ Intento ${a} falló en ${r}:`,n.code||n.message),a===t)throw n;if(["unavailable","deadline-exceeded","internal"].includes(n.code)){const i=Math.pow(2,a)*1e3;console.log(`⏱️ Reintentando en ${i}ms...`),await hat(i)}else throw n}throw new Error("Max retries exceeded")},Aat=(e,t,r)=>{var o;console.log("🔔 Suscribiéndose a actividades disponibles para:",e.nombreCompleto);const a=[],n=new Map,i=l=>{for(const d of l){const u=bg(d);n.set(u.id,u)}const c=Array.from(n.values());c.sort((d,u)=>new Date(u.fechaCreacion||"").getTime()-new Date(d.fechaCreacion||"").getTime()),console.log("✅ Actividades combinadas para el estudiante:",c.length),t(c)};try{const l=e.curso||"";if(l){const A=jt(ut(st,T2),Kt("cursosDestino","array-contains",l)),m=rr(A,{next:g=>{console.log("📋 Actividades por curso:",g.docs.length),i(g.docs)},error:g=>{if((g==null?void 0:g.code)==="permission-denied")console.warn("⚠️ Sin permisos para actividades por curso; verificando doc usuarios/{email} y campo curso.",g);else{const x=Pb(g,"suscripción a actividades por curso");r==null||r(x)}}});a.push(m)}const c=(o=ln.currentUser)==null?void 0:o.uid,d=e.email,u=e.nombreCompleto,f=[d,c,u].filter(Boolean);if(f.length){const A=jt(ut(st,T2),Kt("estudiantesDestino","array-contains-any",f)),m=rr(A,{next:g=>{console.log("📋 Actividades por estudiante:",g.docs.length),i(g.docs)},error:g=>{if((g==null?void 0:g.code)==="permission-denied")console.warn("⚠️ Sin permisos para actividades por estudiante; continuando con filtro por curso.",g);else{const x=Pb(g,"suscripción a actividades por estudiante");r==null||r(x)}}});a.push(m)}a.length===0&&(console.warn("⚠️ Usuario sin curso ni identificadores para filtrar actividades."),t([]))}catch(l){const c=Pb(l,"configuración de suscripciones de actividades");r==null||r(c)}return()=>a.forEach(l=>l&&l())},mat=(e,t,r)=>{var u,f;console.log("🔔 Suscribiéndose a respuestas del estudiante:",e);const a=(u=ln.currentUser)==null?void 0:u.uid,n=(f=ln.currentUser)==null?void 0:f.email,i=Array.from(new Set([e,a,n].filter(Boolean)));if(i.length===0)return console.warn("⚠️ Sin identificadores válidos para suscripción de respuestas."),t([]),()=>{};const o=[],l=new Map;let c=0;const d=()=>{const A=Array.from(l.values()).sort((m,g)=>new Date(g.fechaCompletado).getTime()-new Date(m.fechaCompletado).getTime());console.log("✅ Enviando respuestas procesadas al componente (combinadas):",A.length),t(A)};for(const A of i){const m=jt(ut(st,vg),Kt("estudianteId","==",A)),g=rr(m,{next:x=>{try{console.log(`📝 Respuestas recibidas para identificador ${A}:`,x.docs.length);for(const v of x.docs){const y=bg(v);l.set(y.id,y)}d()}catch(v){console.error("❌ Error procesando respuestas:",v);const y=Pb(v,"procesamiento de respuestas");r==null||r(y)}},error:x=>{if((x==null?void 0:x.code)==="permission-denied"){if(console.warn(`⚠️ Sin permisos para suscripción de respuestas con identificador ${A}. Continuando con otras.`,x),c++,c===i.length){const y=Pb(x,"suscripción a respuestas (todas fallaron)");r==null||r(y)}return}const v=Pb(x,"suscripción a respuestas");r==null||r(v)}});o.push(g)}return()=>{for(const A of o)try{A()}catch{}}},pat=async e=>_fe(async()=>{var i;console.log("💾 Guardando respuesta de actividad:",{actividadId:e.actividadId,estudianteId:e.estudianteId,puntaje:e.puntaje,calificacion:e.calificacion});const r=((i=ln.currentUser)==null?void 0:i.uid)||e.estudianteId,a={...e,estudianteId:r,fechaCompletado:dr.fromDate(new Date(e.fechaCompletado))},n=await Kr(ut(st,vg),a);return console.log("✅ Respuesta guardada exitosamente con ID:",n.id),n.id},3,"guardado de respuesta"),gat=async(e,t)=>_fe(async()=>{var n,i,o,l;const r=["actividadId","idActividad","actividadID"];for(const c of r)try{const d=jt(ut(st,vg),Kt(c,"==",e),Kt("estudianteId","==",t)),u=await Nr(d);if(u.docs.length>0)return bg(u.docs[0])}catch(d){(d==null?void 0:d.code)==="failed-precondition"&&((n=d==null?void 0:d.message)!=null&&n.includes("requires an index"))?console.warn(`⚠️ Falta índice para ${c}+estudianteId; probando otras variantes...`):console.debug(`ℹ️ Consulta por ${c} no retornó resultados o falló:`,(d==null?void 0:d.code)||"")}try{const c=$t(st,T2,e);try{const d=jt(ut(st,vg),Kt("actividadRef","==",c),Kt("estudianteId","==",t)),u=await Nr(d);if(u.docs.length>0)return bg(u.docs[0])}catch(d){if((d==null?void 0:d.code)==="failed-precondition"&&((i=d==null?void 0:d.message)!=null&&i.includes("requires an index"))){console.warn("⚠️ Falta índice para actividadRef+estudianteId; usando fallback con filtro en memoria.");const u=jt(ut(st,vg),Kt("actividadRef","==",c)),A=(await Nr(u)).docs.map(m=>bg(m)).find(m=>m.estudianteId===t);if(A)return A}}}catch{}try{const c=jt(ut(st,vg),Kt("actividad.id","==",e),Kt("estudianteId","==",t)),d=await Nr(c);if(d.docs.length>0)return bg(d.docs[0])}catch(c){(c==null?void 0:c.code)==="failed-precondition"&&((o=c==null?void 0:c.message)!=null&&o.includes("requires an index"))&&console.warn("⚠️ Falta índice para actividad.id+estudianteId; omitiendo este intento.")}const a=[`${T2}/${e}`,`/${T2}/${e}`];for(const c of a)try{const d=jt(ut(st,vg),Kt("actividadPath","==",c),Kt("estudianteId","==",t)),u=await Nr(d);if(u.docs.length>0)return bg(u.docs[0])}catch(d){(d==null?void 0:d.code)==="failed-precondition"&&((l=d==null?void 0:d.message)!=null&&l.includes("requires an index"))&&console.warn("⚠️ Falta índice para actividadPath+estudianteId; probando siguiente variante...")}return null},2,`verificación de actividad completada ${e}`),xat=.6,CP=(e,t,r=xat,a=2)=>{if(!t||t<=0)return a.toFixed(1);const n=t*r;let i;return e>=n?i=4+3*(e-n)/(t-n+1e-9):i=1+3*e/(n+1e-9),i=Math.max(a,Math.min(7,i)),i.toFixed(1)},jP=({className:e="w-5 h-5"})=>s.jsxs("svg",{className:`animate-spin ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),vat=async(e,t,r,a=3)=>{try{for(let n=1;n<=a;n++)try{const i=ln.currentUser;if(!i)throw new Error("Usuario no autenticado.");const o=await i.getIdToken(),l=await fetch("/api/generarFeedbackAutoaprendizaje",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({actividad:e,respuestas:t,estudianteId:r||i.uid})});if(!l.ok){const u=await l.json();throw new Error(u.error||`Error del servidor: ${l.status}`)}const d=(await l.json()).feedback;if(d)return d;throw new Error("La respuesta de la IA no tiene el formato esperado.")}catch(i){if(console.error(`Error en intento ${n} de generar feedback:`,i),n===a)return null}}catch(n){return console.error("Error al generar feedback con IA:",n),null}},bat=async(e,t,r)=>{console.log("💾 Iniciando guardado de respuesta...");try{const a=await pat(e);console.log("✅ Respuesta base guardada con ID:",a);const n={id:a,...e};try{const i=await vat(t,r);if(i){const{updateDoc:o,doc:l}=await ps(async()=>{const{updateDoc:d,doc:u}=await Promise.resolve().then(()=>Jb);return{updateDoc:d,doc:u}},void 0),{db:c}=await ps(async()=>{const{db:d}=await Promise.resolve().then(()=>X8);return{db:d}},void 0);return await o(l(c,"respuestas_actividades",a),{retroalimentacionAI:i}),console.log("🤖 Feedback de IA agregado exitosamente"),{...n,retroalimentacionAI:i}}return n}catch(i){return console.warn("⚠️ No se pudo generar feedback de IA, pero la respuesta fue guardada:",i),n}}catch(a){throw console.error("❌ Error crítico al guardar respuesta:",a),a}},Fo=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(a=>["comprension","analisis","argumentacion","creatividad","claridad","precision","organizacion"].includes(a))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},mc=(e,t)=>{if(t&&Fo(e,t),t==="panelDidactico"||t!=null&&t.includes("panelDidactico")){if(typeof e=="string")return e;if(e==null)return"";try{return typeof e=="object"?typeof e.texto=="string"?e.texto:typeof e.contenido=="string"?e.contenido:JSON.stringify(e):String(e)}catch{return"[Error al procesar el panel didáctico]"}}if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(n=>mc(n,`${t}-array-item`)).join(", ");const r=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const n of r)if(e[n]&&typeof e[n]=="string")return e[n];if(Object.keys(e).some(n=>["comprension","analisis","argumentacion","creatividad","claridad","precision"].includes(n)))return"[Criterios de evaluación]";try{const n=JSON.stringify(e);return n.length>100?"[Objeto complejo]":n}catch{return"[Objeto no serializable]"}}return String(e)},sf=(e,t,...r)=>{if(Fo(e,`extractTextSafely-${t}`),!e)return"";for(const n of r)if(e[n]){const i=mc(e[n],`${t}-${n}`);if(i&&i!=="[Objeto complejo]"&&i!=="[Objeto no serializable]")return i}const a=["texto","pregunta","enunciado","contenido","descripcion","value","label"];for(const n of a)if(e[n]){const i=mc(e[n],`${t}-${n}`);if(i&&i!=="[Objeto complejo]"&&i!=="[Objeto no serializable]")return i}return typeof e=="string"?e:"[Sin contenido disponible]"},Bs=({content:e,context:t="unknown"})=>{try{const r=mc(e,`UltraSafeRenderer-${t}`);return s.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),s.jsx("span",{children:"[Error al mostrar contenido]"})}};function Ij(e){var t,r;try{const a=i=>{if(i==null)return null;const o=String(i).trim();return o?(o.includes("/")?o.split("/").filter(Boolean).pop():o).toLowerCase():null},n=[e==null?void 0:e.actividadId,e==null?void 0:e.actividadID,e==null?void 0:e.idActividad,(t=e==null?void 0:e.actividad)==null?void 0:t.id,(r=e==null?void 0:e.actividadRef)==null?void 0:r.id,e==null?void 0:e.actividadPath];for(const i of n){const o=a(i);if(o)return o}}catch{}return null}function aY(e){if(console.log("🔍 Normalizando lectura:",e),Fo(e,"normalizeLectura-input"),!e)return{texto:"",preguntas:[]};const t=(r,a)=>{Fo(r,`normalizeQuestion-${a}`);const n=Array.isArray(r==null?void 0:r.opciones)?r.opciones.map((i,o)=>mc(i,`opcion-${a}-${o}`)).filter(Boolean):[];return{pregunta:sf(r,`pregunta-${a}`,"pregunta","texto"),opciones:n,respuestaCorrecta:mc(r==null?void 0:r.respuestaCorrecta,`respuestaCorrecta-${a}`),puntaje:typeof(r==null?void 0:r.puntaje)=="number"?r.puntaje:1}};if(!Array.isArray(e)&&Array.isArray(e.preguntas)){const r=e;return{texto:sf(r,"lectura-texto","texto"),preguntas:(r.preguntas||[]).map(t)}}if(Array.isArray(e)){const r=e.map((n,i)=>sf(n,`lectura-bloque-${i}`,"texto")).filter(Boolean).join(`

---

`),a=e.flatMap((n,i)=>(Fo(n,`lectura-bloque-preguntas-${i}`),Array.isArray(n==null?void 0:n.preguntas)?n.preguntas:[])).map(t);return{texto:r,preguntas:a}}return{texto:"",preguntas:[]}}function nY(e){return console.log("🔍 Normalizando pareados:",e),Fo(e,"normalizePareados-input"),e?!Array.isArray(e)&&Array.isArray(e.pares)?e.pares.map((t,r)=>(Fo(t,`pareado-${r}`),{izquierda:sf(t,`pareado-izq-${r}`,"izquierda","concepto"),derecha:sf(t,`pareado-der-${r}`,"derecha","definicion"),puntaje:typeof(t==null?void 0:t.puntaje)=="number"?t.puntaje:1})):Array.isArray(e)?e.map((t,r)=>(Fo(t,`pareado-array-${r}`),{izquierda:sf(t,`pareado-concepto-${r}`,"concepto","izquierda"),derecha:sf(t,`pareado-definicion-${r}`,"definicion","derecha"),puntaje:1})):[]:[]}function sY(e){return console.log("🔍 Normalizando desarrollo:",e),Fo(e,"normalizeDesarrollo-input"),e?!Array.isArray(e)&&Array.isArray(e.preguntas)?e.preguntas.map((t,r)=>(Fo(t,`desarrollo-pregunta-${r}`),{enunciado:sf(t,`desarrollo-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):Array.isArray(e)?e.map((t,r)=>(Fo(t,`desarrollo-array-${r}`),t!=null&&t.rubrica&&typeof t.rubrica=="object"&&console.warn(`🚨 Rubrica detectada como objeto en item ${r}, ignorando`,t.rubrica),{enunciado:sf(t,`desarrollo-array-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):[]:[]}const yat=({actividad:e,onComplete:t,currentUser:r})=>{const[a,n]=w.useState({}),[i,o]=w.useState(!1),l=(d,u)=>{const f={...a,[d]:u};n(f)},c=async()=>{o(!0);let d=0,u=0;const f={items:[]};e.tipos.forEach(m=>{const g=e.generatedContent[m],x=a[m];if(console.log(`🔍 Procesando tipo: ${m}`,g),Fo(g,`handleSubmit-${m}`),!!g){if((m==="Quiz"||m==="Comprensión de Lectura")&&(m==="Quiz"?Array.isArray(g)?g.map((y,N)=>(Fo(y,`quiz-question-${N}`),{pregunta:sf(y,`quiz-pregunta-${N}`,"pregunta"),opciones:Array.isArray(y==null?void 0:y.opciones)?y.opciones.map((E,B)=>mc(E,`quiz-opcion-${N}-${B}`)):[],respuestaCorrecta:mc(y==null?void 0:y.respuestaCorrecta,`quiz-respuesta-${N}`),puntaje:typeof(y==null?void 0:y.puntaje)=="number"?y.puntaje:1})):[]:aY(g).preguntas).forEach((y,N)=>{const E=x==null?void 0:x[N],B=E===y.respuestaCorrecta,_=y.puntaje??1;B&&(d+=_),u+=_,f.items.push({pregunta:y.pregunta,respuestaUsuario:mc(E,`feedback-respuesta-${N}`)||"No respondida",respuestaCorrecta:y.respuestaCorrecta,esCorrecta:B,puntajeObtenido:B?_:0,tipo:m})}),m==="Términos Pareados"){const v=nY(g),y=x||{};v.forEach((N,E)=>{const B=y[E],_=B===N.derecha,I=N.puntaje??1;_&&(d+=I),u+=I,f.items.push({pregunta:`${N.izquierda} → ¿?`,respuestaUsuario:mc(B,`pareado-feedback-${E}`)||"No respondida",respuestaCorrecta:N.derecha,esCorrecta:_,puntajeObtenido:_?I:0,tipo:m})})}if(m==="Desarrollo"){const v=sY(g),y=x||{};v.forEach((N,E)=>{const B=mc(y[E],`desarrollo-feedback-${E}`).trim();f.items.push({pregunta:N.enunciado,respuestaUsuario:B||"No respondida",respuestaCorrecta:"Revisión docente",esCorrecta:null,puntajeObtenido:0,tipo:m})})}}});const A={puntaje:d,puntajeMaximo:u,respuestas:a,nota:CP(d,u),requiereRevisionDocente:e.tipos.includes("Desarrollo")};t(A,f)};return s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[s.jsx("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:s.jsx(Bs,{content:e.asignatura,context:"actividad-asignatura"})}),s.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:s.jsx(Bs,{content:e.introduccion,context:"actividad-introduccion"})}),e.panelDidactico&&s.jsxs("div",{className:"mt-5 p-5 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg shadow-md",children:[s.jsxs("h3",{className:"font-bold text-emerald-800 text-lg mb-3 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Material de Estudio - Lee con Atención"]}),s.jsx("div",{className:"prose prose-emerald max-w-none text-slate-700",children:(()=>{try{if(typeof e.panelDidactico=="string"&&e.panelDidactico.trim().startsWith("{")){const d=JSON.parse(e.panelDidactico);return s.jsxs("div",{className:"space-y-4",children:[d.titulo&&s.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:d.titulo}),Array.isArray(d.subtitulos)&&d.subtitulos.map((u,f)=>s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:u.titulo}),s.jsx("p",{className:"whitespace-pre-line",children:u.texto})]},f)),Array.isArray(d.conceptosClave)&&d.conceptosClave.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:"Conceptos Clave"}),s.jsx("ul",{className:"list-disc pl-5 space-y-1",children:d.conceptosClave.map((u,f)=>s.jsx("li",{className:"text-emerald-800",children:u},f))})]}),!d.subtitulos&&!d.conceptosClave&&s.jsx("div",{className:"whitespace-pre-line",children:JSON.stringify(d,null,2)})]})}return s.jsx("p",{className:"whitespace-pre-wrap",children:e.panelDidactico})}catch{return s.jsx("p",{className:"whitespace-pre-wrap",children:e.panelDidactico})}})()})]}),e.recursos&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-sky-200",children:[e.recursos.instrucciones&&s.jsxs("div",{className:"mb-3",children:[s.jsx("h3",{className:"font-semibold text-sky-700",children:"Instrucciones adicionales:"}),s.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:s.jsx(Bs,{content:e.recursos.instrucciones,context:"actividad-instrucciones"})})]}),e.recursos.enlaces&&s.jsxs("div",{className:"mb-3",children:[s.jsx("h3",{className:"font-semibold text-sky-700",children:"Enlaces complementarios:"}),s.jsx("div",{className:"space-y-1 mt-1",children:e.recursos.enlaces.split(`
`).filter(Boolean).map((d,u)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-sky-500 mr-2",children:"🔗"}),s.jsx("a",{href:d.startsWith("http")?d:`https://${d}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline break-all",children:d})]},u))})]}),e.recursos.archivos&&e.recursos.archivos.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-sky-700",children:"Archivos complementarios:"}),s.jsx("div",{className:"space-y-1 mt-1",children:e.recursos.archivos.map((d,u)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-sky-500 mr-2",children:"📄"}),s.jsx("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline",children:d.nombre||`Archivo ${u+1}`})]},u))})]})]})]}),e.tipos.map(d=>{const u=e.generatedContent[d];if(console.log(`🔍 Renderizando tipo: ${d}`,u),Fo(u,`render-${d}`),!u)return null;switch(d){case"Quiz":{const f=Array.isArray(u)?u.map((A,m)=>(Fo(A,`render-quiz-question-${m}`),{pregunta:sf(A,`render-quiz-pregunta-${m}`,"pregunta"),opciones:Array.isArray(A==null?void 0:A.opciones)?A.opciones.map((g,x)=>mc(g,`render-quiz-opcion-${m}-${x}`)):[],respuestaCorrecta:mc(A==null?void 0:A.respuestaCorrecta,`render-quiz-respuesta-${m}`),puntaje:typeof(A==null?void 0:A.puntaje)=="number"?A.puntaje:1})):[];return s.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Quiz"}),s.jsx("div",{className:"space-y-6",children:f.map((A,m)=>s.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[s.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",s.jsx(Bs,{content:A.pregunta,context:`quiz-pregunta-${m}`})]}),s.jsx("div",{className:"mt-2 space-y-2",children:A.opciones.map((g,x)=>{var v;return s.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[s.jsx("input",{type:"radio",name:`q-${d}-${m}`,value:g,checked:((v=a[d])==null?void 0:v[m])===g,onChange:()=>l(d,{...a[d]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),s.jsx("span",{children:s.jsx(Bs,{content:g,context:`quiz-opcion-${m}-${x}`})})]},x)})})]},m))})]},d)}case"Comprensión de Lectura":{const f=aY(u);return s.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Comprensión de Lectura"}),s.jsx("div",{className:"mb-6 p-4 rounded bg-slate-50 border whitespace-pre-wrap",children:s.jsx(Bs,{content:f.texto,context:"lectura-texto"})}),s.jsx("div",{className:"space-y-6",children:f.preguntas.map((A,m)=>s.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[s.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",s.jsx(Bs,{content:A.pregunta,context:`lectura-pregunta-${m}`})]}),s.jsx("div",{className:"mt-2 space-y-2",children:A.opciones.map((g,x)=>{var v;return s.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[s.jsx("input",{type:"radio",name:`q-${d}-${m}`,value:g,checked:((v=a[d])==null?void 0:v[m])===g,onChange:()=>l(d,{...a[d]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),s.jsx("span",{children:s.jsx(Bs,{content:g,context:`lectura-opcion-${m}-${x}`})})]},x)})})]},m))})]},d)}case"Términos Pareados":{const f=nY(u),A=a[d]||{},m=[...new Set(f.map(g=>g.derecha))];for(let g=m.length-1;g>0;g--){const x=Math.floor(Math.random()*(g+1));[m[g],m[x]]=[m[x],m[g]]}return s.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Términos Pareados"}),s.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:f.map((g,x)=>s.jsxs("div",{className:"p-3 rounded border bg-slate-50",children:[s.jsxs("p",{className:"font-semibold text-slate-800 mb-2",children:[x+1,". ",s.jsx(Bs,{content:g.izquierda,context:`pareado-izq-${x}`})]}),s.jsxs("select",{className:"w-full border rounded p-2 bg-white",value:A[x]??"",onChange:v=>l(d,{...A,[x]:v.target.value}),children:[s.jsx("option",{value:"",children:"— Selecciona la pareja —"}),m.map((v,y)=>s.jsx("option",{value:v,children:mc(v,`pareado-opcion-${x}-${y}`)},y))]})]},`${g.izquierda}-${x}`))})]},d)}case"Desarrollo":{const f=sY(u),A=a[d]||{};return s.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Preguntas de Desarrollo"}),s.jsx("div",{className:"space-y-6",children:f.map((m,g)=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"font-semibold text-slate-800",children:[g+1,". ",s.jsx(Bs,{content:m.enunciado,context:`desarrollo-enunciado-${g}`})]}),s.jsx("textarea",{className:"w-full min-h-[120px] border rounded p-3",placeholder:"Escribe tu respuesta…",value:A[g]??"",onChange:x=>l(d,{...A,[g]:x.target.value})})]},g))}),s.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Este apartado será revisado y calificado por tu profesor/a."})]},d)}default:return null}}),s.jsx("div",{className:"text-right mt-8 flex justify-end gap-4",children:s.jsxs("button",{onClick:c,disabled:i,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:[i?s.jsx(jP,{className:"w-5 h-5 mr-2"}):null,i?"Evaluando...":"Entregar Actividad"]})})]})},wat=({currentUser:e})=>{var G,X,Z;const[t,r]=w.useState(!0),[a,n]=w.useState("list"),[i,o]=w.useState("actividades"),[l,c]=w.useState(!1),[d,u]=w.useState([]),[f,A]=w.useState([]),[m,g]=w.useState(null),[x,v]=w.useState(null),[y,N]=w.useState(null),[E,B]=w.useState("connecting"),[_,I]=w.useState(!1);w.useEffect(()=>{var re,de;console.log("🚀 Iniciando carga de datos para usuario:",e.nombreCompleto);let U=!1,Y=!1,P=!1,D=!1;const W=()=>{(U||P)&&(Y||D)&&(P&&D?(B("error"),N("Error al cargar datos. Verifica tu conexión e intenta nuevamente.")):B("connected"),r(!1),console.log("✅ Carga completada - Actividades:",U,"Respuestas:",Y))},J=Aat(e,oe=>{console.log("📋 Actividades recibidas:",oe.length),oe.forEach((be,q)=>{console.log(`  ${q+1}. ${be.asignatura} (ID: ${be.id})`),Fo(be,`actividad-${q}`)}),u(oe),U=!0,W()},oe=>{console.error("❌ Error en suscripción de actividades:",oe),P=!0,W()}),ce=((re=ln.currentUser)==null?void 0:re.uid)||((de=ln.currentUser)==null?void 0:de.email)||e.email||e.id,ie=mat(ce,oe=>{console.log("📝 Respuestas del estudiante recibidas:",oe.length),oe.forEach((be,q)=>{var we;console.log(`  ${q+1}. Actividad ${be.actividadId} - Fecha: ${be.fechaCompletado}`),be.nota&&console.log(`    Nota: ${be.nota}`),(we=be.revisionDocente)!=null&&we.completada&&console.log("    ✅ Con revisión docente completada"),Fo(be,`respuesta-${q}`)}),A(oe),Y=!0,W()},oe=>{var be;console.error("❌ Error en suscripción de respuestas:",oe),(be=oe.message)!=null&&be.includes("requires an index")&&(console.log("⚠️ Detectado error de índice, intentando consulta alternativa..."),N("Se detectó un problema de configuración. Las actividades completadas pueden no mostrarse correctamente hasta que se resuelva.")),D=!0,W()});return()=>{console.log("🧹 Limpiando subscripciones"),J==null||J(),ie==null||ie()}},[e]),w.useEffect(()=>{t||console.log("🔄 ESTADO ACTUALIZADO:",{actividades:d.length,respuestas:f.length,vista:a,conexion:E})},[d.length,f.length,a,E,t]);const j=U=>{console.log("🔍 Iniciando actividad:",U.asignatura);const Y=String(U.id).trim().toLowerCase();if(L.has(Y)){N("Esta actividad ya ha sido completada. No es posible realizarla nuevamente.");return}g(U),n("activity"),N(null)},k=U=>{console.log("🔍 Viendo resultado:",U.actividadId);const Y=Ij(U),P=d.find(D=>String(D.id).trim().toLowerCase()===(Y||String(U.actividadId).trim().toLowerCase()));P?(g(P),v(U),n("result"),N(null)):N("No se pudieron cargar los detalles de esta actividad completada.")},T=w.useCallback(async(U,Y)=>{var W,J,ce,ie;if(!m)return;const P=((W=ln.currentUser)==null?void 0:W.uid)||((J=ln.currentUser)==null?void 0:J.email)||e.email||e.id;console.log("🚀 COMPLETANDO ACTIVIDAD:",{actividadId:m.id,estudianteId:P,puntaje:U.puntaje,nota:U.nota});try{const re=Array.from(new Set([(ce=ln.currentUser)==null?void 0:ce.uid,(ie=ln.currentUser)==null?void 0:ie.email,e.email,e.id].filter(Boolean)));for(const de of re){const oe=await gat(String(m.id),String(de));if(oe){console.warn("⛔ Intento de repetir actividad detectado. Redirigiendo a resultados existentes."),N("Esta actividad ya fue respondida anteriormente. Te mostramos tus resultados."),v(oe),n("result");return}}}catch(re){console.warn("⚠️ No se pudo verificar si la actividad ya estaba respondida. Continuando con precaución.",re)}n("result"),c(!0),N(null);const D={actividadId:m.id,estudianteId:P,fechaCompletado:new Date().toISOString(),...U,retroalimentacionDetallada:Y};console.log("💾 Guardando respuesta...");try{const re=await bat(D,m,Y);console.log("✅ Respuesta completada con ID:",re.id),v(re),setTimeout(()=>{console.log("🔄 Datos sincronizados")},1500)}catch(re){console.error("❌ Error crítico al completar actividad:",re),N("Ocurrió un error al guardar tu actividad. Por favor, intenta nuevamente. Si el problema persiste, contacta a tu profesor."),v({id:"error-temp",...D,retroalimentacionAI:{logros:"Tu actividad fue completada pero hubo un problema técnico al generar el resumen.",desafios:[],comentariosDesarrollo:[]}})}finally{c(!1)}},[m,e.id]),L=w.useMemo(()=>{if(f.length===0)return new Set;const U=new Set;for(const Y of f){const P=Ij(Y);P&&U.add(P)}return console.log("🎯 IDs completados calculados (normalizados):",U.size),U},[f]),F=w.useMemo(()=>{if(d.length===0)return[];try{const Y=d.slice(0,5).map(D=>String(D.id).trim()),P=Array.from(L).slice(0,5);console.log("🔎 Diagnóstico IDs - Actividades:",Y,"Completadas:",P)}catch{}const U=d.filter(Y=>!L.has(String(Y.id).trim().toLowerCase()));return console.log("⏳ Actividades pendientes:",U.length),U},[d,L]),S=w.useMemo(()=>{if(f.length===0)return[];const U=f.map(Y=>{const P=Ij(Y),D=d.find(W=>String(W.id).trim().toLowerCase()===(P||String(Y.actividadId).trim().toLowerCase()));return{...Y,asignatura:(D==null?void 0:D.asignatura)||"Actividad no disponible",tipos:(D==null?void 0:D.tipos)||[]}}).sort((Y,P)=>new Date(P.fechaCompletado).getTime()-new Date(Y.fechaCompletado).getTime());return console.log("📖 Historial preparado:",U.length),U},[f,d]),M=w.useMemo(()=>{const U=new Map;for(const Y of f){const P=Ij(Y);P&&U.set(P,Y)}return U},[f]),H=w.useMemo(()=>_?F:d,[d,F,_]),K=w.useMemo(()=>{const U=d.length,Y=L.size,P=Math.max(U-Y,0);return{total:U,comp:Y,pend:P}},[d.length,L]),Q=w.useMemo(()=>{if(S.length===0)return[];const U=new Map;for(const P of S){const D=P.asignatura||"Sin asignatura";let W;if(P.nota!=null){const ce=parseFloat(P.nota);isNaN(ce)||(W=ce)}if(W==null&&typeof P.puntaje=="number"&&typeof P.puntajeMaximo=="number"&&P.puntajeMaximo>0){const ce=CP(P.puntaje,P.puntajeMaximo),ie=parseFloat(ce);isNaN(ie)||(W=ie)}if(W==null||isNaN(W))continue;const J=U.get(D)||{suma:0,cantidad:0};U.set(D,{suma:J.suma+W,cantidad:J.cantidad+1})}const Y=Array.from(U.entries()).map(([P,D])=>({asignatura:P,promedio:Math.round(D.suma/D.cantidad*100)/100,cantidad:D.cantidad}));return Y.sort((P,D)=>D.promedio-P.promedio),Y},[S]);return t?s.jsxs("div",{className:"flex flex-col justify-center items-center h-64 space-y-4",children:[s.jsx(jP,{className:"w-8 h-8 text-slate-500"}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-slate-500",children:"Cargando actividades..."}),s.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Estado: ",E==="connecting"?"Conectando...":E==="connected"?"Conectado":"Error de conexión"]})]})]}):E==="error"&&d.length===0&&f.length===0?s.jsxs("div",{className:"text-center py-12 border-2 border-red-200 rounded-lg bg-red-50",children:[s.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),s.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-2",children:"Error de Conexión"}),s.jsx("p",{className:"text-red-600 mb-4",children:"No se pudieron cargar las actividades."}),s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700",children:"Reintentar"})]}):a==="activity"&&m?s.jsx(yat,{actividad:m,onComplete:T,currentUser:e}):a==="result"&&x?(console.log("🔍 Renderizando resultado:",x),s.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg animate-fade-in",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Resultados de la Actividad"}),s.jsxs("div",{className:"flex items-baseline gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[s.jsxs("p",{className:"text-lg text-slate-600",children:["Puntaje: ",s.jsxs("span",{className:"font-bold text-2xl text-slate-800",children:[x.puntaje," / ",x.puntajeMaximo]})]}),s.jsxs("p",{className:"text-lg text-slate-600",children:["Nota: ",s.jsx("span",{className:`font-bold text-2xl ${parseFloat(x.nota)>=4?"text-green-600":"text-red-600"}`,children:x.nota})]})]}),(m==null?void 0:m.recursos)&&s.jsxs("div",{className:"mb-6 p-4 bg-sky-50 border border-sky-200 rounded-lg",children:[s.jsx("h2",{className:"text-lg font-bold text-sky-800 mb-2",children:"Material complementario"}),m.recursos.instrucciones&&s.jsxs("div",{className:"mb-3",children:[s.jsx("h3",{className:"font-semibold text-sky-700",children:"Instrucciones adicionales:"}),s.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:s.jsx(Bs,{content:m.recursos.instrucciones,context:"resultado-instrucciones"})})]}),m.recursos.enlaces&&s.jsxs("div",{className:"mb-3",children:[s.jsx("h3",{className:"font-semibold text-sky-700",children:"Enlaces complementarios:"}),s.jsx("div",{className:"space-y-1 mt-1",children:m.recursos.enlaces.split(`
`).filter(Boolean).map((U,Y)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-sky-500 mr-2",children:"🔗"}),s.jsx("a",{href:U.startsWith("http")?U:`https://${U}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline break-all",children:U})]},Y))})]}),m.recursos.archivos&&m.recursos.archivos.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-sky-700",children:"Archivos complementarios:"}),s.jsx("div",{className:"space-y-1 mt-1",children:m.recursos.archivos.map((U,Y)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-sky-500 mr-2",children:"📄"}),s.jsx("a",{href:U.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline",children:U.nombre||`Archivo ${Y+1}`})]},Y))})]})]}),y&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsxs("p",{className:"text-red-700 font-medium",children:["⚠️ ",y]})}),l&&s.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 border border-blue-200 rounded-lg text-center mb-6",children:[s.jsx(jP,{className:"w-8 h-8 text-blue-500"}),s.jsx("p",{className:"mt-3 font-semibold text-blue-700",children:"Generando resumen personalizado..."}),s.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Esto puede tomar unos segundos"})]}),x.retroalimentacionAI&&!l&&s.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg space-y-4 mb-6",children:[s.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:"Resumen de tu Desempeño 💡"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-green-700",children:"✅ Principales Logros"}),s.jsx("p",{className:"text-slate-700 mt-1",children:s.jsx(Bs,{content:x.retroalimentacionAI.logros,context:"feedback-logros"})})]}),((G=x.retroalimentacionAI.desafios)==null?void 0:G.length)>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-amber-700",children:"🎯 Áreas de Mejora"}),s.jsx("div",{className:"space-y-3 mt-2",children:x.retroalimentacionAI.desafios.map((U,Y)=>s.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[s.jsx("p",{className:"font-semibold text-slate-800",children:s.jsx(Bs,{content:U.pregunta,context:`feedback-desafio-pregunta-${Y}`})}),s.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:s.jsx(Bs,{content:U.explicacionDelError,context:`feedback-desafio-explicacion-${Y}`})})]},Y))})]}),((Z=(X=x.retroalimentacionAI)==null?void 0:X.comentariosDesarrollo)==null?void 0:Z.length)>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-sky-700",children:"📝 Retroalimentación de Desarrollo"}),s.jsx("div",{className:"space-y-3 mt-2",children:x.retroalimentacionAI.comentariosDesarrollo.map((U,Y)=>s.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[s.jsx("p",{className:"font-semibold text-slate-800",children:s.jsx(Bs,{content:U.pregunta,context:`feedback-desarrollo-pregunta-${Y}`})}),s.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:s.jsx(Bs,{content:U.retroalimentacionBreve,context:`feedback-desarrollo-retro-${Y}`})})]},Y))})]})]}),x.retroalimentacionDetallada&&s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"Revisión Detallada"}),x.retroalimentacionDetallada.items.map((U,Y)=>{const P=U.esCorrecta===null,D=P?"border-slate-400 bg-slate-50":U.esCorrecta?"border-green-500 bg-green-50":"border-red-500 bg-red-50",W=P?"🕓":U.esCorrecta?"✅":"❌";return s.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg ${D}`,children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("p",{className:"font-semibold text-slate-800 flex-1 pr-4",children:[Y+1,". ",s.jsx(Bs,{content:U.pregunta,context:`feedback-item-pregunta-${Y}`})]}),s.jsx("span",{className:"font-bold text-lg",children:W})]}),s.jsxs("div",{className:"mt-2 text-sm pl-4",children:[s.jsxs("p",{className:"text-slate-700",children:["Tu respuesta: ",s.jsx("span",{className:"font-medium",children:s.jsx(Bs,{content:U.respuestaUsuario,context:`feedback-item-respuesta-${Y}`})})]}),!P&&!U.esCorrecta&&s.jsxs("p",{className:"text-slate-700",children:["Respuesta correcta: ",s.jsx("span",{className:"font-medium text-green-700",children:s.jsx(Bs,{content:U.respuestaCorrecta,context:`feedback-item-correcta-${Y}`})})]}),P&&s.jsx("p",{className:"text-slate-600 italic",children:"Pendiente de revisión docente."})]})]},Y)})]}),s.jsx("div",{className:"flex gap-4",children:s.jsx("button",{onClick:()=>{n("list"),g(null),v(null),N(null)},className:"w-full bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition-colors",children:"Volver a Actividades"})})]})):s.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[y&&s.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:s.jsxs("p",{className:"text-amber-800",children:["⚠️ ",y]})}),s.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"actividades",label:"Actividades Pendientes"},{key:"historial",label:"Historial"},{key:"promedios",label:"Promedios Remotos"}].map(U=>s.jsx("button",{onClick:()=>o(U.key),className:`px-4 py-2 rounded-lg border transition-colors ${i===U.key?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-700 hover:bg-slate-50 border-slate-200"}`,children:U.label},U.key))}),i==="actividades"&&s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-1",children:"Actividades"}),s.jsxs("p",{className:"text-slate-500",children:[K.total," en total — ",K.comp," completadas, ",K.pend," pendientes"]})]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm select-none",children:[s.jsx("input",{type:"checkbox",checked:_,onChange:U=>I(U.target.checked),className:"h-4 w-4 accent-slate-700"}),"Mostrar solo pendientes"]})]}),s.jsx("p",{className:"text-slate-500 mt-2",children:"Completa las actividades asignadas por tus profesores."}),s.jsx("p",{className:"text-amber-600 text-sm font-medium mb-6",children:s.jsxs("span",{className:"bg-amber-100 p-1 rounded inline-flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Importante: Cada actividad solo puede ser respondida una vez."]})}),s.jsx("div",{className:"space-y-4",children:H.length>0?H.map(U=>{const Y=String(U.id).trim().toLowerCase(),P=L.has(Y),D=M.get(Y);return s.jsxs("div",{className:`p-4 border rounded-lg flex flex-col sm:flex-row justify-between sm:items-center gap-4 transition-colors ${P?"bg-green-50 hover:bg-green-100 border-green-200":"bg-slate-50 hover:bg-slate-100 border-slate-200"}`,children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-bold text-slate-800 flex items-center gap-2",children:[s.jsxs("span",{children:[s.jsx(Bs,{content:U.asignatura,context:`actividad-asignatura-${U.id}`})," - ",U.tipos.join(", ")]}),s.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full inline-block ${P?"bg-green-100 text-green-700 border border-green-200":"bg-slate-100 text-slate-700 border border-slate-200"}`,title:P?"Esta actividad ya fue realizada":"Actividad pendiente",children:P?"Completada":"Pendiente"})]}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",s.jsx(Bs,{content:typeof U.plazoEntrega=="string"?U.plazoEntrega:"",context:`actividad-plazo-${U.id}`})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[s.jsx("button",{onClick:()=>j(U),disabled:P,className:`font-bold py-2 px-6 rounded-lg w-full sm:w-auto transition-colors ${P?"bg-slate-300 text-slate-600 cursor-not-allowed":"bg-amber-500 text-white hover:bg-amber-600"}`,children:P?"Ya realizada":"Comenzar"}),P&&D&&s.jsx("button",{onClick:()=>k(D),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver resultados"})]})]},U.id)}):s.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),s.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:_?"¡Todo al día!":"Sin actividades disponibles"}),s.jsx("p",{className:"text-slate-500 mt-1",children:_?"No tienes actividades pendientes.":"Revisa más tarde o consulta con tu profesor(a)."})]})})]})}),i==="historial"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Historial de Actividades"}),s.jsx("p",{className:"text-slate-500 mb-6",children:"Revisa tus resultados y la retroalimentación de las actividades completadas."}),s.jsx("div",{className:"space-y-4",children:S.length>0?S.map(U=>s.jsxs("div",{className:"p-4 border rounded-lg bg-white flex flex-col sm:flex-row justify-between sm:items-center gap-4 shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-bold text-slate-800",children:[s.jsx(Bs,{content:U.asignatura,context:`completada-asignatura-${U.id}`})," - ",U.tipos.join(", ")]}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Completado: ",new Date(U.fechaCompletado).toLocaleDateString("es-CL")]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("p",{className:"text-sm font-semibold",children:["Nota: ",s.jsx("span",{className:`font-bold text-lg ${(parseFloat(U.nota)||0)>=4?"text-green-600":"text-red-600"}`,children:U.nota??CP(U.puntaje,U.puntajeMaximo)})]}),s.jsx("button",{onClick:()=>k(U),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver Resultados"})]})]},U.id)):s.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[s.jsx("div",{className:"text-6xl mb-4",children:"📚"}),s.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Aún no hay historial"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Tus actividades completadas aparecerán aquí."})]})})]}),i==="promedios"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Promedios Remotos"}),s.jsx("p",{className:"text-slate-500 mb-6",children:"Promedio de tus calificaciones por asignatura en actividades remotas."}),Q.length>0?s.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Q.map(U=>s.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 shadow-sm",children:[s.jsx("p",{className:"font-bold text-slate-800 mb-1",children:U.asignatura}),s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:`text-2xl font-extrabold ${U.promedio>=4?"text-green-600":"text-red-600"}`,children:U.promedio.toFixed(2)}),s.jsx("p",{className:"text-xs text-slate-500",children:"Promedio (1-7)"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-slate-700 font-semibold",children:U.cantidad}),s.jsx("p",{className:"text-xs text-slate-500",children:"actividades"})]})]})]},U.asignatura))}):s.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[s.jsx("div",{className:"text-6xl mb-4",children:"📊"}),s.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Sin datos aún"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Completa actividades para ver tus promedios por asignatura."})]})]})]})},y3="estudiantes_inclusion",Nat="usuarios",Tfe=e=>{const t=e.data();return{id:e.id,...t}},Eat=e=>{const t=jt(ut(st,y3));return rr(t,a=>{const n=a.docs.map(i=>Tfe(i));e(n)},a=>{console.error("Error al suscribirse a estudiantes de inclusión:",a),e([])})},Cat=e=>{const t=jt(ut(st,Nat));return rr(t,a=>{const n=a.docs.map(i=>Tfe(i));e(n)},a=>{console.error("Error al suscribirse a todos los usuarios:",a),e([])})},jat=async e=>{try{return(await Kr(ut(st,y3),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusión:",t),new Error("No se pudo agregar al estudiante.")}},kat=async(e,t)=>{try{const{id:r,...a}=t,n=$t(st,y3,e);await Us(n,a)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},Sat=async e=>{try{const t=$t(st,y3,e);await Ua(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusión:",t),new Error("No se pudo eliminar al estudiante.")}},_at=({estudiantes:e})=>{const t=w.useMemo(()=>{const l=e.reduce((c,d)=>(c[d.curso]=(c[d.curso]||0)+1,c),{});return Object.entries(l).map(([c,d])=>({curso:c,cantidad:d})).sort((c,d)=>c.curso.localeCompare(d.curso))},[e]),r=w.useMemo(()=>{const l=e.reduce((c,d)=>{var f;const u=((f=d.curso.match(/\d+/))==null?void 0:f[0])||"Sin nivel";return c[u]=(c[u]||0)+1,c},{});return Object.entries(l).map(([c,d])=>({nivel:c,cantidad:d})).sort((c,d)=>c.nivel==="Sin nivel"?1:d.nivel==="Sin nivel"?-1:parseInt(c.nivel)-parseInt(d.nivel))},[e]),a=w.useMemo(()=>{const l=e.reduce((c,d)=>(c[d.dificultad]=(c[d.dificultad]||0)+1,c),{});return Object.entries(l).map(([c,d])=>({diagnostico:c,cantidad:d})).sort((c,d)=>d.cantidad-c.cantidad)},[e]),n=w.useMemo(()=>{const l=e.reduce((d,u)=>{var f;return d+(((f=u.intervenciones)==null?void 0:f.length)||0)},0),c=e.length>0?(l/e.length).toFixed(1):"0";return{total:l,promedio:c}},[e]),i=w.useMemo(()=>e.reduce((l,c)=>l+(c.alertas||[]).filter(d=>!d.resuelta).length,0),[e]),o=Math.max(0,...t.map(l=>l.cantidad),...r.map(l=>l.cantidad),...a.map(l=>l.cantidad));return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Dashboard PIE"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),s.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Estudiantes"})]}),s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:n.total}),s.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Intervenciones"})]}),s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:i}),s.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Alertas Pendientes"})]}),s.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:n.promedio}),s.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Promedio Intervenciones"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Curso"}),s.jsx("div",{className:"space-y-2",children:t.map(({curso:l,cantidad:c})=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:l}),s.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:s.jsx("div",{className:"bg-blue-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),s.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Nivel"}),s.jsx("div",{className:"space-y-2",children:r.map(({nivel:l,cantidad:c})=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:[l,"°"]}),s.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:s.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),s.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Diagnóstico"}),s.jsx("div",{className:"space-y-2",children:a.map(({diagnostico:l,cantidad:c})=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-16 text-right truncate",title:l,children:l}),s.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:s.jsx("div",{className:"bg-purple-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),s.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]})]})]})},iY=({estudiantesDisponibles:e,onSelect:t})=>{const[r,a]=w.useState(""),[n,i]=w.useState(""),[o,l]=w.useState(!1),c=w.useMemo(()=>e.filter(f=>{const A=f.nombreCompleto.toLowerCase().includes(r.toLowerCase()),m=n===""||f.curso===n;return A&&m}).sort((f,A)=>f.nombreCompleto.localeCompare(A.nombreCompleto)),[e,r,n]),d=w.useMemo(()=>[...new Set(e.map(A=>A.curso).filter(Boolean))].sort(),[e]),u=f=>{t(f),a(""),i(""),l(!1)};return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante al PIE"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Buscar por nombre"}),s.jsx("input",{type:"text",placeholder:"Escriba el nombre del estudiante...",value:r,onChange:f=>{a(f.target.value),l(f.target.value.length>0||n!=="")},onFocus:()=>l(r.length>0||n!==""),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por curso"}),s.jsxs("select",{value:n,onChange:f=>{i(f.target.value),l(r.length>0||f.target.value!=="")},className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Todos los cursos"}),d.map(f=>s.jsx("option",{value:f,children:f},f))]})]})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[s.jsxs("span",{children:["Estudiantes disponibles: ",e.length]}),s.jsxs("span",{children:["Resultados filtrados: ",c.length]})]}),s.jsx("button",{onClick:()=>l(!o),className:"w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:o?"Ocultar resultados":`Ver ${c.length} estudiantes disponibles`}),o&&s.jsx("div",{className:"border dark:border-slate-600 rounded-lg max-h-80 overflow-y-auto",children:c.length===0?s.jsx("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:r||n?"No se encontraron estudiantes con los criterios de búsqueda.":"No hay estudiantes disponibles."}):s.jsx("div",{className:"divide-y dark:divide-slate-600",children:c.map(f=>s.jsx("div",{className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>u(f),children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:f.nombreCompleto}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f.curso})]}),s.jsx("button",{className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-xl",children:"➕"})]})},f.id))})}),r&&c.length===1&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[s.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:"💡 ¡Solo hay un resultado! Haga clic para agregarlo directamente:"}),s.jsxs("button",{onClick:()=>u(c[0]),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors",children:["Agregar a ",c[0].nombreCompleto]})]})]})]})},Tat=({student:e,onClose:t,onConfirm:r})=>{const[a,n]=w.useState(R5[0]),i=()=>r(e,a);return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:o=>o.stopPropagation(),children:[s.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),s.jsx("select",{id:"dificultad",value:a,onChange:o=>n(o.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:R5.map(o=>s.jsx("option",{value:o,children:o},o))})]}),s.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),s.jsx("button",{type:"button",onClick:i,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Confirmar e Ingresar"})]})]})})},Bat=({student:e,onClose:t,onSave:r,profesores:a,getDocenteEmail:n})=>{const[i,o]=w.useState("intervenciones"),[l,c]=w.useState(e);w.useEffect(()=>c(e),[e]);const[d,u]=w.useState(null),f={responsable:"",accion:"",observaciones:""},[A,m]=w.useState(f),[g,x]=w.useState({trimestre:"T1",meta:""}),[v,y]=w.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[N,E]=w.useState(null),[B,_]=w.useState(!1),I={motivo:"",acuerdos:"",asistentes:""},[j,k]=w.useState(I),T=()=>{r(l),t()},L=async()=>{var Ee;if(!A.responsable||!A.accion){alert("Responsable y Acción son campos obligatorios.");return}let q,we=!1;d?q=(l.intervenciones||[]).map(ue=>ue.id===d.id?{...ue,...A}:ue):(we=!0,q=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...A},...l.intervenciones||[]]);const Te=q.sort((ue,ge)=>new Date(ge.fecha).getTime()-new Date(ue.fecha).getTime());if(c(ue=>({...ue,intervenciones:Te})),we)try{await Vae({docenteNombre:A.responsable,docenteEmail:n?n(A.responsable):void 0,docenteEmailLower:(Ee=n?n(A.responsable):void 0)==null?void 0:Ee.toLowerCase(),tipo:"nueva_intervencion",titulo:"📋 Nueva Intervención Asignada",mensaje:`Se te ha asignado una nueva intervención para el estudiante ${l.nombre}. Acción: ${A.accion}`,estudianteNombre:l.nombre,estudianteId:l.id,accionRequerida:A.accion}),alert(`✅ Intervención registrada y notificación enviada a ${A.responsable}`)}catch(ue){console.error("Error al crear notificación:",ue),alert("⚠️ Intervención guardada, pero no se pudo enviar la notificación al docente.")}m(f),u(null)},F=q=>{u(q),m({responsable:q.responsable,accion:q.accion,observaciones:q.observaciones})},S=q=>{window.confirm("¿Eliminar esta intervención?")&&c(we=>({...we,intervenciones:(we.intervenciones||[]).filter(Te=>Te.id!==q)}))},M=q=>{const{name:we,value:Te}=q.target;c(Ee=>({...Ee,[we]:Te,fechaActualizacionApoyos:new Date().toISOString()}))},H=()=>{if(!g.meta.trim())return;const q={...g,id:crypto.randomUUID(),cumplida:!1};c(we=>({...we,metasProgreso:[...we.metasProgreso||[],q]})),x({trimestre:"T1",meta:""})},K=q=>{c(we=>({...we,metasProgreso:(we.metasProgreso||[]).map(Te=>Te.id===q?{...Te,cumplida:!Te.cumplida}:Te)}))},Q=q=>{c(we=>({...we,metasProgreso:(we.metasProgreso||[]).filter(Te=>Te.id!==q)}))},G=w.useMemo(()=>{const q=l.metasProgreso||[];if(q.length===0)return{percent:0,color:"bg-slate-300"};const we=q.filter(ue=>ue.cumplida).length,Te=Math.round(we/q.length*100),Ee=Te<40?"bg-red-500":Te<75?"bg-yellow-500":"bg-green-500";return{percent:Te,color:Ee}},[l.metasProgreso]),X=w.useMemo(()=>{if(!l.fechaActualizacionApoyos)return!0;const q=new Date(l.fechaActualizacionApoyos),we=new Date;return we.setMonth(we.getMonth()-3),q<we},[l.fechaActualizacionApoyos]),Z=()=>{if(!v.titulo.trim()||!v.fecha)return;const q={...v,id:crypto.randomUUID(),resuelta:!1};c(we=>({...we,alertas:[...we.alertas||[],q].sort((Te,Ee)=>new Date(Te.fecha).getTime()-new Date(Ee.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString()})},U=q=>{c(we=>({...we,alertas:(we.alertas||[]).map(Te=>Te.id===q?{...Te,resuelta:!Te.resuelta}:Te)}))},Y=q=>{c(we=>({...we,alertas:(we.alertas||[]).filter(Te=>Te.id!==q)}))},P=q=>{q.target.files&&q.target.files[0]&&E(q.target.files[0])},D=()=>{if(!N)return;_(!0);const q=new FileReader;q.readAsDataURL(N),q.onloadend=()=>{const we={id:crypto.randomUUID(),nombre:N.name,url:q.result,fechaSubida:new Date().toISOString()};c(Te=>({...Te,archivos:[we,...Te.archivos||[]]})),E(null),_(!1)},q.onerror=()=>{alert("Error al leer el archivo."),_(!1)}},W=q=>{window.confirm("¿Eliminar este archivo?")&&c(we=>({...we,archivos:(we.archivos||[]).filter(Te=>Te.id!==q)}))},J=()=>{if(!j.motivo.trim()||!j.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const q={...j,id:crypto.randomUUID(),fecha:new Date().toISOString()};c(we=>({...we,reuniones:[q,...we.reuniones||[]].sort((Te,Ee)=>new Date(Ee.fecha).getTime()-new Date(Te.fecha).getTime())})),k(I)},ce=q=>{window.confirm("¿Eliminar este registro de reunión?")&&c(we=>({...we,reuniones:(we.reuniones||[]).filter(Te=>Te.id!==q)}))},ie=()=>{var le,ne,Ae;const q=new xr("p","mm","a4"),we=20,Te=q.internal.pageSize.getWidth(),Ee=q.internal.pageSize.getHeight();let ue=we;const ge=pe=>{pe.setFontSize(10),pe.setTextColor(100),pe.text("Ficha de Seguimiento - Módulo Inclusión",we,15)};ge(q),q.setFontSize(18),q.setFont("helvetica","bold"),q.setTextColor(40),q.text(l.nombre,we,ue+10),ue+=15,q.setFontSize(11),q.setFont("helvetica","normal"),q.setTextColor(80),q.text(`Curso: ${l.curso}`,we,ue),q.text(`Dificultad: ${l.dificultad}`,we,ue+6),ue+=15;const he=pe=>{ue+pe>Ee-we&&(q.addPage(),ge(q),ue=we)},ve=pe=>{he(15),q.setFontSize(14),q.setFont("helvetica","bold"),q.text(pe,we,ue),ue+=10};if((le=l.intervenciones)!=null&&le.length&&(ve("Historial de Intervenciones"),ji(q,{startY:ue,head:[["Fecha","Responsable","Acción","Observaciones"]],body:l.intervenciones.map(pe=>[new Date(pe.fecha).toLocaleDateString("es-CL"),pe.responsable,pe.accion,pe.observaciones||""]),theme:"grid",didDrawPage:()=>ge(q)}),ue=q.lastAutoTable.finalY+10),l.adaptacionesCurriculares||l.apoyosRecibidos){he(30),ve("Seguimiento y Apoyos"),q.setFontSize(11),q.setFont("helvetica","normal");const pe=`Adaptaciones: ${l.adaptacionesCurriculares||"No registradas."}
Apoyos: ${l.apoyosRecibidos||"No registrados."}`,ke=q.splitTextToSize(pe,Te-we*2);q.text(ke,we,ue),ue+=ke.length*5+10}(ne=l.metasProgreso)!=null&&ne.length&&(he(30),ve("Metas de Progreso"),ji(q,{startY:ue,head:[["Trimestre","Meta","Estado"]],body:l.metasProgreso.map(pe=>[pe.trimestre,pe.meta,pe.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:()=>ge(q)}),ue=q.lastAutoTable.finalY+10),(Ae=l.reuniones)!=null&&Ae.length&&(ve("Reuniones con Apoderados"),ji(q,{startY:ue,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:l.reuniones.map(pe=>[new Date(pe.fecha).toLocaleDateString("es-CL"),pe.motivo,pe.acuerdos||"",pe.asistentes]),theme:"grid",didDrawPage:()=>ge(q)})),q.save(`Ficha_Inclusion_${l.nombre.replace(/\s/g,"_")}.pdf`)},re=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[s.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:d?"Editando Intervención":"Registrar Nueva Intervención"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Responsable ",!d&&"(Se enviará notificación automática)"]}),s.jsxs("select",{value:A.responsable,onChange:q=>m(we=>({...we,responsable:q.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Seleccione Responsable..."}),a.map(q=>s.jsx("option",{value:q,children:q},q))]}),A.responsable&&!d&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-sm text-blue-800 dark:text-blue-200",children:["🔔 Se enviará una notificación a ",A.responsable," cuando se guarde la intervención"]})]}),s.jsx("textarea",{value:A.accion,onChange:q=>m(we=>({...we,accion:q.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("textarea",{value:A.observaciones,onChange:q=>m(we=>({...we,observaciones:q.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsxs("div",{className:"flex justify-end gap-2",children:[d&&s.jsx("button",{onClick:()=>{u(null),m(f)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar Edición"}),s.jsx("button",{onClick:L,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!A.responsable||!A.accion,children:d?"Actualizar":"Guardar y Notificar"})]})]}),s.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(l.intervenciones||[]).map(q=>s.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-grow",children:[s.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:q.accion}),q.observaciones&&s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:q.observaciones}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(q.fecha).toLocaleString("es-CL")," - ",q.responsable]}),s.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 px-2 py-1 rounded-full",children:"✓ Notificado"})]})]}),s.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[s.jsx("button",{onClick:()=>F(q),className:"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors",title:"Editar intervención",children:"✏️"}),s.jsx("button",{onClick:()=>S(q.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar intervención",children:"🗑️"})]})]})},q.id)),(!l.intervenciones||l.intervenciones.length===0)&&s.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[s.jsx("div",{className:"text-4xl mb-2",children:"📋"}),s.jsx("p",{children:"No hay intervenciones registradas"}),s.jsx("p",{className:"text-sm",children:"Registra la primera intervención arriba"})]})]})]}),de=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),X&&s.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl cursor-help",children:"⚠️"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),s.jsx("textarea",{name:"adaptacionesCurriculares",value:l.adaptacionesCurriculares||"",onChange:M,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe las adaptaciones curriculares implementadas..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),s.jsx("textarea",{name:"apoyosRecibidos",value:l.apoyosRecibidos||"",onChange:M,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe los apoyos que recibe el estudiante..."})]})]}),s.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[s.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",G.percent,"%"]}),s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:s.jsx("div",{className:`${G.color} h-4 rounded-full transition-all duration-500`,style:{width:`${G.percent}%`}})})]}),s.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[s.jsxs("select",{value:g.trimestre,onChange:q=>x(we=>({...we,trimestre:q.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"T1",children:"T1"}),s.jsx("option",{value:"T2",children:"T2"}),s.jsx("option",{value:"T3",children:"T3"})]}),s.jsx("input",{value:g.meta,onChange:q=>x(we=>({...we,meta:q.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("button",{onClick:H,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",disabled:!g.meta.trim(),children:"Agregar"})]}),s.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(l.metasProgreso||[]).map(q=>s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[s.jsx("input",{type:"checkbox",checked:q.cumplida,onChange:()=>K(q.id),className:"h-5 w-5 rounded text-amber-500"}),s.jsxs("span",{className:`flex-grow text-sm ${q.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[s.jsxs("strong",{children:[q.trimestre,":"]})," ",q.meta]}),s.jsx("button",{onClick:()=>Q(q.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar meta",children:"🗑️"})]},q.id)),(!l.metasProgreso||l.metasProgreso.length===0)&&s.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[s.jsx("div",{className:"text-3xl mb-2",children:"🎯"}),s.jsx("p",{children:"No hay metas definidas"}),s.jsx("p",{className:"text-sm",children:"Agrega la primera meta trimestral"})]})]})]})]}),oe=()=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),s.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[s.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),s.jsx("input",{type:"text",value:v.titulo,onChange:q=>y(we=>({...we,titulo:q.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),s.jsx("input",{type:"date",value:new Date(v.fecha).toISOString().slice(0,10),onChange:q=>y(we=>({...we,fecha:q.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),s.jsx("button",{onClick:Z,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-amber-600 transition-colors",disabled:!v.titulo.trim()||!v.fecha,children:"Agendar"})]}),s.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(l.alertas||[]).map(q=>s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[s.jsx("input",{type:"checkbox",checked:q.resuelta,onChange:()=>U(q.id),className:"h-5 w-5 rounded text-amber-500"}),s.jsxs("span",{className:`flex-grow text-sm ${q.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[q.titulo," (",new Date(q.fecha+"T12:00:00").toLocaleDateString("es-CL"),")"]}),s.jsx("button",{onClick:()=>Y(q.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar alerta",children:"🗑️"})]},q.id)),(!l.alertas||l.alertas.length===0)&&s.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[s.jsx("div",{className:"text-3xl mb-2",children:"🔔"}),s.jsx("p",{children:"No hay alertas programadas"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),s.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[s.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),s.jsx("input",{type:"file",onChange:P,className:"w-full text-sm",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),s.jsx("button",{onClick:D,disabled:!N||B,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400 hover:bg-blue-600 transition-colors",children:B?"Subiendo...":"Subir"}),N&&s.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Archivo seleccionado: ",N.name]})]}),s.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(l.archivos||[]).map(q=>s.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[s.jsxs("a",{href:q.url,download:q.nombre,className:"text-sm text-blue-600 hover:underline truncate flex-grow",title:q.nombre,children:["📎 ",q.nombre]}),s.jsx("button",{onClick:()=>W(q.id),className:"text-red-500 text-sm ml-2 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar archivo",children:"🗑️"})]},q.id)),(!l.archivos||l.archivos.length===0)&&s.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[s.jsx("div",{className:"text-3xl mb-2",children:"📁"}),s.jsx("p",{children:"No hay archivos adjuntos"})]})]})]})]}),be=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[s.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),s.jsx("input",{value:j.motivo,onChange:q=>k(we=>({...we,motivo:q.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("textarea",{value:j.acuerdos,onChange:q=>k(we=>({...we,acuerdos:q.target.value})),placeholder:"Acuerdos tomados en la reunión...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("input",{value:j.asistentes,onChange:q=>k(we=>({...we,asistentes:q.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("div",{className:"text-right",children:s.jsx("button",{onClick:J,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!j.motivo.trim()||!j.asistentes.trim(),children:"Guardar Reunión"})})]}),s.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(l.reuniones||[]).map(q=>s.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-grow",children:[s.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:q.motivo}),q.acuerdos&&s.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[s.jsx("strong",{children:"Acuerdos:"})," ",q.acuerdos]}),s.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(q.fecha).toLocaleString("es-CL")," - Asistentes: ",q.asistentes]})]}),s.jsx("button",{onClick:()=>ce(q.id),className:"text-red-500 flex-shrink-0 ml-4 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar reunión",children:"🗑️"})]})},q.id)),(!l.reuniones||l.reuniones.length===0)&&s.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[s.jsx("div",{className:"text-4xl mb-2",children:"👥"}),s.jsx("p",{children:"No hay reuniones registradas"}),s.jsx("p",{className:"text-sm",children:"Registra la primera reunión con apoderados"})]})]})]});return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:q=>q.stopPropagation(),children:[s.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:ie,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200 transition-colors",children:"📄 Exportar PDF"}),s.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:"×"})]})]}),s.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:s.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(q=>s.jsx("button",{onClick:()=>o(q),className:`${i===q?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors`,children:q==="alertas"?"Alertas y Archivos":q==="seguimiento"?"Seguimiento y Metas":q},q))})}),s.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[i==="intervenciones"&&re(),i==="seguimiento"&&de(),i==="reuniones"&&be(),i==="alertas"&&oe()]}),s.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[s.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors",children:"Cerrar"}),s.jsx("button",{onClick:T,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Guardar Cambios y Cerrar"})]})]})})},oY=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState([]),[i,o]=w.useState(!0),[l,c]=w.useState(null),[d,u]=w.useState(null),[f,A]=w.useState(""),[m,g]=w.useState(""),[x,v]=w.useState(""),[y,N]=w.useState("dashboard");w.useEffect(()=>{o(!0);const L=Eat(S=>{r(S),o(!1)}),F=Cat(S=>n(S));return()=>{L(),F()}},[]);const E=async(L,F)=>{if(t.some(M=>M.nombre===L.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const S={nombre:L.nombreCompleto,curso:L.curso||"",dificultad:F,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await jat(S),alert(`✅ ${L.nombreCompleto} ha sido agregado exitosamente al programa PIE`)}catch(M){console.error("Error al agregar estudiante:",M),alert("Hubo un error al agregar al estudiante al programa.")}},B=async L=>{try{await kat(L.id,L)}catch(F){console.error("Error al actualizar la ficha:",F),alert("Hubo un error al guardar los cambios en la ficha.")}},_=async L=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await Sat(L),(l==null?void 0:l.id)===L&&c(null),alert("✅ Estudiante eliminado del programa PIE")}catch(F){console.error("Error al eliminar estudiante:",F),alert("Hubo un error al eliminar al estudiante.")}},I=L=>{const F=k;if(F.length===0){alert("No hay datos para exportar.");return}const S=F.map(M=>{var H;return{Nombre:M.nombre,Curso:M.curso,Dificultad:M.dificultad,"N° Intervenciones":((H=M.intervenciones)==null?void 0:H.length)||0,"Alertas Pendientes":(M.alertas||[]).filter(K=>!K.resuelta).length,"Metas Cumplidas":(M.metasProgreso||[]).filter(K=>K.cumplida).length,"Total Metas":(M.metasProgreso||[]).length,"Última Actualización":M.fechaActualizacionApoyos?new Date(M.fechaActualizacionApoyos).toLocaleDateString("es-CL"):"No registrada"}});if(L==="xlsx"){const M=Fs.json_to_sheet(S),H=Fs.book_new();Fs.book_append_sheet(H,M,"Estudiantes_Inclusion"),K1(H,"Estudiantes_Inclusion.xlsx"),alert("✅ Archivo Excel exportado exitosamente")}else{const M=new xr;M.text("Listado de Estudiantes - Programa de Inclusión",14,15),ji(M,{startY:20,head:[Object.keys(S[0])],body:S.map(Object.values)}),M.save("Estudiantes_Inclusion.pdf"),alert("✅ Archivo PDF exportado exitosamente")}},j=w.useMemo(()=>a.filter(L=>{var F;return L.profile===Tt.ESTUDIANTE&&(((F=e.cursos)==null?void 0:F.includes(L.curso||""))||e.profile===Tt.SUBDIRECCION)}).filter(L=>!t.some(F=>F.nombre===L.nombreCompleto)),[a,t,e]),k=w.useMemo(()=>t.filter(L=>L.nombre.toLowerCase().includes(f.toLowerCase())&&(m===""||L.curso===m)&&(x===""||L.dificultad===x)).sort((L,F)=>L.nombre.localeCompare(F.nombre)),[t,f,m,x]),T=w.useMemo(()=>a.filter(L=>L.profile===Tt.PROFESORADO).map(L=>L.nombreCompleto).sort(),[a]);return s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),s.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>N("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="dashboard"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📊 Dashboard"}),s.jsx("button",{onClick:()=>N("lista"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="lista"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📋 Lista de Estudiantes"})]})]}),i?s.jsxs("div",{className:"text-center py-10",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"}),s.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando datos del programa..."})]}):s.jsxs(s.Fragment,{children:[y==="dashboard"&&s.jsxs("div",{className:"space-y-8",children:[s.jsx(_at,{estudiantes:t}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes Recientes (",Math.min(5,t.length),")"]}),s.jsx("button",{onClick:()=>N("lista"),className:"text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Ver todos →"})]}),s.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(L=>s.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center hover:shadow-sm transition-shadow",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:L.nombre}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[L.curso," - ",L.dificultad]})]}),s.jsx("button",{onClick:()=>c(L),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm transition-colors",children:"Ver Ficha"})]},L.id)),t.length===0&&s.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[s.jsx("div",{className:"text-6xl mb-4",children:"📚"}),s.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay estudiantes en el programa PIE"}),s.jsx("p",{className:"text-sm",children:"Comienza agregando estudiantes desde la nómina"})]})]})]}),s.jsx(iY,{estudiantesDisponibles:j,onSelect:L=>u(L)})]})]}),y==="lista"&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[s.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",k.length,")"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>I("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg hover:bg-green-200 transition-colors",children:"📊 Excel"}),s.jsx("button",{onClick:()=>I("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg hover:bg-red-200 transition-colors",children:"📄 PDF"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Buscar estudiante"}),s.jsx("input",{type:"text",placeholder:"Nombre del estudiante...",value:f,onChange:L=>A(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por curso"}),s.jsxs("select",{value:m,onChange:L=>g(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Todos los Cursos"}),on.map(L=>s.jsx("option",{value:L,children:L},L))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por diagnóstico"}),s.jsxs("select",{value:x,onChange:L=>v(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Todas las Dificultades"}),R5.map(L=>s.jsx("option",{value:L,children:L},L))]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:[s.jsx("div",{className:"font-bold text-blue-600",children:k.length}),s.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:"Mostrando"})]}),s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-center",children:[s.jsx("div",{className:"font-bold text-green-600",children:t.length}),s.jsx("div",{className:"text-green-800 dark:text-green-300",children:"Total"})]}),s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-center",children:[s.jsx("div",{className:"font-bold text-yellow-600",children:t.reduce((L,F)=>L+(F.alertas||[]).filter(S=>!S.resuelta).length,0)}),s.jsx("div",{className:"text-yellow-800 dark:text-yellow-300",children:"Alertas"})]}),s.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-center",children:[s.jsx("div",{className:"font-bold text-purple-600",children:new Set(t.map(L=>L.curso)).size}),s.jsx("div",{className:"text-purple-800 dark:text-purple-300",children:"Cursos"})]})]}),s.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[k.map(L=>{var F;return s.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-grow",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:L.nombre}),(L.alertas||[]).filter(S=>!S.resuelta).length>0&&s.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:[(L.alertas||[]).filter(S=>!S.resuelta).length," alertas"]})]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:[L.curso," - ",L.dificultad]}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600 dark:text-slate-300",children:[s.jsxs("span",{children:[((F=L.intervenciones)==null?void 0:F.length)||0," intervenciones"]}),s.jsxs("span",{children:[(L.metasProgreso||[]).filter(S=>S.cumplida).length," metas cumplidas"]}),L.fechaActualizacionApoyos&&s.jsxs("span",{children:["Últ. actualización: ",new Date(L.fechaActualizacionApoyos).toLocaleDateString("es-CL")]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx("button",{onClick:()=>c(L),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm px-3 py-1 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Ver Ficha"}),s.jsx("button",{onClick:()=>_(L.id),title:"Eliminar del programa",className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:"🗑️"})]})]})},L.id)}),k.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),s.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:f||m||x?"No se encontraron estudiantes con esos criterios":"No hay estudiantes en el programa PIE"}),(f||m||x)&&s.jsx("button",{onClick:()=>{A(""),g(""),v("")},className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Limpiar filtros"})]})]})]}),s.jsx(iY,{estudiantesDisponibles:j,onSelect:L=>u(L)})]})]}),d&&s.jsx(Tat,{student:d,onClose:()=>u(null),onConfirm:(L,F)=>{E(L,F),u(null)}}),l&&s.jsx(Bat,{student:l,onClose:()=>c(null),onSave:B,profesores:T})]})},kP="asistencia_dual",lY=e=>{var r,a;const t=e.data();return{id:e.id,...t,fechaHora:((a=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString())||t.fechaHora}},Iat=(e,t)=>{var l;const r=(l=ln.currentUser)==null?void 0:l.uid,a=[],n=new Map,i=()=>t(Array.from(n.values())),o=jt(ut(lr,kP),Kt("emailEstudiante","==",e),Gt("fechaHora","desc"));if(a.push(rr(o,c=>{c.docs.forEach(d=>n.set(d.id,lY(d))),i()},c=>{(c==null?void 0:c.code)!=="permission-denied"&&console.error("Error subscribing to personal attendance (email):",c)})),r){const c=jt(ut(lr,kP),Kt("estudianteId","==",r),Gt("fechaHora","desc"));a.push(rr(c,d=>{d.docs.forEach(u=>n.set(u.id,lY(u))),i()},d=>{(d==null?void 0:d.code)!=="permission-denied"&&console.error("Error subscribing to personal attendance (uid):",d)}))}return()=>a.forEach(c=>c())},Oat=async e=>{try{const t={...e,fechaHora:dr.fromDate(new Date(e.fechaHora))};await Kr(ut(lr,kP),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},Dat=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),Fat=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),Pat=({currentUser:e})=>{const[t,r]=w.useState(e.curso||""),[a,n]=w.useState([]),[i,o]=w.useState(!1),[l,c]=w.useState(!0),[d,u]=w.useState(null),[f,A]=w.useState(null),[m,g]=w.useState(null),[x,v]=w.useState(()=>{try{return sessionStorage.getItem("geo-requested")==="1"}catch{return!1}});w.useEffect(()=>{if(!e.email){c(!1);return}c(!0);const B=Iat(e.email,_=>{n(_),c(!1)});return()=>B()},[e.email]),w.useEffect(()=>{var _;if(!window.isSecureContext){A("insecure");return}if(!("geolocation"in navigator)){A("unsupported");return}const B=navigator;(_=B==null?void 0:B.permissions)!=null&&_.query?B.permissions.query({name:"geolocation"}).then(I=>{const j=()=>{const k=I.state;A(k==="denied"&&!x?"prompt":k)};j(),I.onchange=j}).catch(()=>A(null)):A(null)},[x]);const y={enableHighAccuracy:!0,timeout:15e3,maximumAge:0},N=w.useCallback(()=>{if(o(!0),u(null),!window.isSecureContext){A("insecure"),u({text:"El sitio no está en un contexto seguro (HTTPS). La ubicación está bloqueada por el navegador.",type:"error"}),o(!1);return}if(!("geolocation"in navigator)){A("unsupported"),u({text:"Tu navegador no soporta geolocalización.",type:"error"}),o(!1);return}try{sessionStorage.setItem("geo-requested","1")}catch{}v(!0),navigator.geolocation.getCurrentPosition(B=>{A("granted"),g(typeof B.coords.accuracy=="number"?B.coords.accuracy:null),u({text:"Ubicación habilitada. Ya puedes marcar tu asistencia.",type:"success"}),o(!1)},B=>{let _="No se pudo obtener la ubicación.";B.code===B.PERMISSION_DENIED?(A("denied"),_="Permiso de ubicación denegado. Habilítalo en la configuración del navegador."):B.code===B.POSITION_UNAVAILABLE?_="La información de ubicación no está disponible. Revisa tu conexión y GPS.":B.code===B.TIMEOUT&&(_="La solicitud de ubicación expiró. Inténtalo de nuevo con mejor señal."),u({text:_,type:"error"}),o(!1)},y)},[]),E=B=>{if(!t){u({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}if(f==="insecure"){u({text:"La ubicación está bloqueada porque el sitio no está bajo HTTPS.",type:"error"});return}if(f==="unsupported"){u({text:"Tu navegador no soporta geolocalización.",type:"error"});return}if(f==="denied"&&!x){try{sessionStorage.setItem("geo-requested","1")}catch{}v(!0)}o(!0),u(null),navigator.geolocation.getCurrentPosition(async _=>{const I={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:B,fechaHora:new Date().toISOString(),ubicacion:{latitud:_.coords.latitude,longitud:_.coords.longitude,precision:typeof _.coords.accuracy=="number"?_.coords.accuracy:void 0}};try{await Oat(I),u({text:`¡Marca de ${B} registrada con éxito!`,type:"success"}),g(typeof _.coords.accuracy=="number"?_.coords.accuracy:null)}catch(j){console.error("Error saving record to Firestore:",j),u({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{o(!1)}},_=>{console.error("Geolocation error:",_);let I="No se pudo obtener la ubicación.";switch(_.code){case _.PERMISSION_DENIED:I="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.",A("denied");break;case _.POSITION_UNAVAILABLE:I="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case _.TIMEOUT:I="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:I=`Ocurrió un error desconocido al obtener la ubicación (código: ${_.code}).`;break}u({text:I,type:"error"}),o(!1)},y)};return s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),f==="insecure"&&s.jsx("div",{className:"mb-4 p-3 rounded-md bg-red-50 text-red-800 border border-red-200",children:"La ubicación está bloqueada porque el sitio no está bajo HTTPS. Usa la URL segura (https://) o contacta soporte."}),f==="unsupported"&&s.jsx("div",{className:"mb-4 p-3 rounded-md bg-amber-50 text-amber-800 border border-amber-200",children:"Tu navegador no soporta geolocalización. Prueba con otro navegador actualizado."}),f==="denied"&&s.jsxs("div",{className:"mb-4 p-3 rounded-md bg-red-50 text-red-800 border border-red-200",children:["Permiso de ubicación denegado. Habilítalo en los ajustes del navegador:",s.jsxs("ul",{className:"list-disc pl-6 mt-2 text-sm",children:[s.jsxs("li",{children:[s.jsx("b",{children:"Android (Chrome)"}),": Icono de candado → Permisos → Ubicación → Permitir."]}),s.jsxs("li",{children:[s.jsx("b",{children:"iOS (Safari)"}),": Ajustes → Safari → Ubicación → Permitir al usar."]})]}),s.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:N,disabled:i,className:"px-3 py-2 rounded-md bg-sky-600 text-white hover:bg-sky-700 disabled:bg-slate-400",children:"Reintentar solicitud"}),s.jsx("span",{className:"text-xs text-slate-500",children:"Si no se abre la solicitud, ajusta los permisos del sitio."})]})]}),(f==="prompt"||f===null)&&s.jsxs("div",{className:"mb-4 p-3 rounded-md bg-sky-50 text-sky-800 border border-sky-200 flex items-center justify-between gap-3",children:[s.jsx("div",{children:"Para marcar asistencia, permite el acceso a tu ubicación."}),s.jsx("button",{type:"button",onClick:N,disabled:i,className:"px-3 py-2 rounded-md bg-sky-600 text-white hover:bg-sky-700 disabled:bg-slate-400",children:"Habilitar ubicación"})]}),s.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),s.jsxs("select",{id:"curso",value:t,onChange:B=>r(B.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"-- Mi curso --"}),Vm.map(B=>s.jsx("option",{value:B,children:B},B))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[s.jsx("button",{onClick:()=>E("Entrada"),disabled:i||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),s.jsx("button",{onClick:()=>E("Salida"),disabled:i||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),i&&s.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:"Obteniendo ubicación..."})]}),m!=null&&!i&&s.jsxs("div",{className:"text-center text-slate-500 text-sm",children:["Precisión GPS ~ ",Math.round(m)," m"]}),d&&s.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${d.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:d.text})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),s.jsx("div",{className:"overflow-x-auto max-h-96",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:l?s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):a.length>0?a.map(B=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(B.fechaHora).toLocaleString("es-CL")}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:s.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${B.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[B.tipo==="Entrada"?s.jsx(Dat,{}):s.jsx(Fat,{}),B.tipo]})}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:B.curso})]},B.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},kv=e=>e?typeof e=="string"?new Date(e):e!=null&&e.toDate?e.toDate():e instanceof Date?e:new Date(e):new Date(NaN),Rat=async()=>{try{console.log("🔍 Debugging users collection...");const e=ut(lr,"usuarios"),t=jt(e,El(10)),r=await Nr(t),a={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},n=new Set;return r.forEach(i=>{const o=i.data(),l={id:i.id,data:o,fields:Object.keys(o)};a.sampleDocs.push(l),Object.keys(o).forEach(c=>n.add(c))}),a.fieldAnalysis={allFields:Array.from(n),commonFields:Array.from(n).filter(i=>a.sampleDocs.filter(l=>i in l.data).length>a.sampleDocs.length*.5)},console.log("Users collection debug result:",a),a}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},Lat=async(e,t)=>{var c,d,u;const r=new Date(e,t,1),a=new Date(e,t+1,0,23,59,59,999),n=dr.fromDate(r),i=dr.fromDate(a),o=["asistencia_dual","asistencia_empresa","asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],l={};for(const f of o)try{const A=ut(lr,f);try{const m=jt(A,Kt("fechaHora",">=",n),Kt("fechaHora","<=",i)),g=await Nr(m);l[f]={exists:!0,hasDateField:!0,count:g.size,totalDocs:(await Nr(jt(A,El(5)))).size,sampleDoc:((c=g.docs[0])==null?void 0:c.data())||null}}catch{const g=["fecha","timestamp","createdAt"];let x=!1;for(const v of g)try{const y=jt(A,Kt(v,">=",n),Kt(v,"<=",i)),N=await Nr(y);l[f]={exists:!0,hasDateField:v,count:N.size,totalDocs:(await Nr(jt(A,El(5)))).size,sampleDoc:((d=N.docs[0])==null?void 0:d.data())||null},x=!0;break}catch{continue}if(!x){const v=jt(A,Gt("__name__"),El(5)),y=await Nr(v);l[f]={exists:!0,hasDateField:!1,count:y.size,totalDocs:y.size,sampleDoc:((u=y.docs[0])==null?void 0:u.data())||null,note:"No date field found for filtering"}}}}catch(A){l[f]={exists:!1,error:A instanceof Error?A.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",l),l},Mat=(e,t,r,a,n)=>{try{const i=new Date(e,t,1);i.setHours(0,0,0,0);const o=new Date(e,t+1,0);o.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${i.toISOString()} y ${o.toISOString()}`),console.log(`📅 Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const l=dr.fromDate(i),c=dr.fromDate(o),d=[],u=new Map,f=(n==null?void 0:n.includeAll)===!0,A=(n==null?void 0:n.limit)??1e3,m=()=>{const x=Array.from(u.values());console.log(`📊 Total registros encontrados: ${x.length}`),x.length>0&&console.log("📅 Registros por día:",x.reduce((v,y)=>{const E=kv(y.fechaHora).getDate();return v[E]=(v[E]||0)+1,v},{})),r(x)};return["asistencia_dual"].forEach(x=>{try{console.log(`🔍 Configurando suscripción para: ${x}`);const v=ut(lr,x);if(f){const E=jt(v,Gt("fechaHora","desc"),El(A)),B=rr(E,_=>{console.log(`📋 ${x} (histórico): ${_.size} documentos`),Array.from(u.keys()).filter(j=>j.startsWith(`${x}_`)).forEach(j=>u.delete(j)),_.forEach(j=>{const k=j.data(),T=kv(k.fechaHora),L=isNaN(T.getTime())?new Date().toISOString():T.toISOString(),F={id:j.id,emailEstudiante:k.emailEstudiante||k.email||"",nombreEstudiante:k.nombreEstudiante||k.nombre||"",curso:k.curso||"",fechaHora:L,tipo:k.tipo||"Entrada",ubicacion:k.ubicacion||{latitud:null,longitud:null},origen:x},S=`${x}_${j.id}`;u.set(S,F)}),m()},_=>{console.warn(`⚠️ Error en histórico ${x} con orderBy fechaHora:`,_);const I=jt(v,El(A)),j=rr(I,k=>{console.log(`📋 ${x} (histórico sin orderBy): ${k.size} documentos`),Array.from(u.keys()).filter(L=>L.startsWith(`${x}_`)).forEach(L=>u.delete(L)),k.forEach(L=>{const F=L.data(),S=kv(F.fechaHora),M=isNaN(S.getTime())?new Date().toISOString():S.toISOString(),H={id:L.id,emailEstudiante:F.emailEstudiante||F.email||"",nombreEstudiante:F.nombreEstudiante||F.nombre||"",curso:F.curso||"",fechaHora:M,tipo:F.tipo||"Entrada",ubicacion:F.ubicacion||{latitud:null,longitud:null},origen:x},K=`${x}_${L.id}`;u.set(K,H)}),m()});d.push(j)});d.push(B);return}const y=jt(v,Kt("fechaHora",">=",l),Kt("fechaHora","<=",c),Gt("fechaHora","desc")),N=rr(y,E=>{console.log(`📋 ${x}: ${E.size} documentos encontrados con filtro`),E.size>0?(console.log(`✅ Registros encontrados en ${x}:`),Array.from(u.keys()).filter(_=>_.startsWith(`${x}_`)).forEach(_=>u.delete(_)),E.docs.forEach((_,I)=>{var j;if(I<5){const k=_.data();let T;(j=k.fechaHora)!=null&&j.toDate?T=k.fechaHora.toDate():typeof k.fechaHora=="string"?T=new Date(k.fechaHora):T=new Date,console.log(`   ${I+1}. ${k.emailEstudiante} - ${T.toLocaleString()} - ${k.tipo}`),console.log(`      📅 Fecha original: ${k.fechaHora} (tipo: ${typeof k.fechaHora})`)}}),E.forEach(_=>{const I=_.data(),j=kv(I.fechaHora),k=isNaN(j.getTime())?new Date().toISOString():j.toISOString(),T={id:_.id,emailEstudiante:I.emailEstudiante||I.email||"",nombreEstudiante:I.nombreEstudiante||I.nombre||"",curso:I.curso||"",fechaHora:k,tipo:I.tipo||"Entrada",ubicacion:I.ubicacion||{latitud:null,longitud:null},origen:x},L=`${x}_${_.id}`;u.set(L,T)}),m()):(console.log(`⚪ ${x}: sin registros en el período, limpiando y notificando vacío`),Array.from(u.keys()).filter(_=>_.startsWith(`${x}_`)).forEach(_=>u.delete(_)),m())},E=>{console.warn(`⚠️ Error con filtro en ${x}:`,E),console.log(`🔄 Intentando estrategia alternativa en ${x}...`);const B=jt(v,El(A)),_=rr(B,j=>{if(console.log(`📋 ${x} (sin filtro): ${j.size} documentos`),j.size>0){const L=j.docs[0].data();console.log(`📄 Estructura en ${x}:`,Object.keys(L)),console.log("📄 Primer documento:",L)}const k=j.docs.filter(L=>{const F=L.data();if(!F.fechaHora)return!1;const S=kv(F.fechaHora);return S>=i&&S<=o});console.log(`📅 ${x}: ${k.length} registros después de filtro manual`),Array.from(u.keys()).filter(L=>L.startsWith(`${x}_`)).forEach(L=>u.delete(L)),k.length>0&&k.forEach(L=>{const F=L.data(),S=kv(F.fechaHora),M=isNaN(S.getTime())?new Date().toISOString():S.toISOString(),H={id:L.id,emailEstudiante:F.emailEstudiante||F.email||"",nombreEstudiante:F.nombreEstudiante||F.nombre||"",curso:F.curso||"",fechaHora:M,tipo:F.tipo||"Entrada",ubicacion:F.ubicacion||null},K=`${x}_${L.id}`;u.set(K,H)}),m()}),I=d.findIndex(j=>j===N);I>=0?d[I]=_:d.push(_)});d.push(N)}catch(v){console.warn(`❌ Error configurando ${x}:`,v)}}),()=>{d.forEach(x=>{try{x()}catch(v){console.warn("Error unsubscribing:",v)}})}}catch(i){return console.error("Error setting up subscribeToAsistenciaByMonth:",i),a&&a(new Error(`Error al configurar suscripción: ${i instanceof Error?i.message:"Error desconocido"}`)),()=>{}}},Uat=(e,t)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["usuarios"],a=[],n=new Map,i=()=>{const l=Array.from(n.values());console.log(`📊 Total usuarios encontrados: ${l.length}`);const c=l.reduce((u,f)=>(u[f.profile]=(u[f.profile]||0)+1,u),{});console.log("👥 Usuarios por perfil:",c);const d=l.filter(u=>u.profile===Tt.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${d.length}`),d.forEach(u=>{console.log(`   - ${u.nombreCompleto} (${u.curso}) - ${u.email}`)}),e(l)};let o=!1;return r.forEach(l=>{try{const c=ut(lr,l),d=jt(c),u=rr(d,f=>{Array.from(n.keys()).filter(m=>m.startsWith(`${l}_`)).forEach(m=>n.delete(m)),f.size>0?(console.log(`✅ Encontrados ${f.size} usuarios en colección: ${l}`),o=!0,f.forEach(m=>{try{const g=m.data(),x=g.email||g.userEmail||g.mail||g.correo||"",v=g.nombreCompleto||g.displayName||g.name||g.nombre||g.fullName||"",y=g.curso||g.course||g.class||g.grade||"";let N=g.profile||g.role||g.tipo||g.userType||Tt.ESTUDIANTE;if(typeof N=="string"){const _=N.toLowerCase();_.includes("estudiante")||_.includes("student")||_.includes("alumno")?N=Tt.ESTUDIANTE:_.includes("coordinador")||_.includes("coordinator")?N=Tt.COORDINACION_TP:_.includes("profesor")||_.includes("teacher")||_.includes("docente")?N=Tt.PROFESORADO:(_.includes("subdireccion")||_.includes("subdir"))&&(N=Tt.COORDINACION_TP)}const E={id:m.id,email:x,nombreCompleto:v,curso:y,profile:N},B=`${l}_${m.id}`;n.set(B,E)}catch(g){console.warn(`Error procesando documento ${m.id} en ${l}:`,g)}})):console.log(`⚪ Colección ${l}: vacía`),i()},f=>{console.warn(`⚠️ Error en colección ${l}:`,f)});a.push(u)}catch(c){console.warn(`❌ Error configurando ${l}:`,c)}}),setTimeout(()=>{o||(console.error("❌ No se encontraron usuarios en ninguna colección"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{a.forEach(l=>{try{l()}catch(c){console.warn("Error unsubscribing:",c)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},Hat=(e,t)=>{try{console.log("Setting up users subscription...");const r=ut(lr,"usuarios"),a=jt(r);return rr(a,i=>{console.log(`Raw users snapshot size: ${i.size}`);const o=[];i.forEach(u=>{try{const f=u.data();console.log(`Processing user doc ${u.id}:`,f);const A=f.email||f.userEmail||f.mail||"",m=f.nombreCompleto||f.displayName||f.name||f.nombre||"",g=f.curso||f.course||f.class||"";let x=f.profile||f.role||f.tipo||Tt.ESTUDIANTE;if(typeof x=="string"){const y=x.toLowerCase();y.includes("estudiante")||y.includes("student")||y.includes("alumno")?x=Tt.ESTUDIANTE:y.includes("coordinador")||y.includes("coordinator")?x=Tt.COORDINACION_TP:y.includes("profesor")||y.includes("teacher")||y.includes("docente")?x=Tt.PROFESORADO:(y.includes("subdireccion")||y.includes("subdir"))&&(x=Tt.COORDINACION_TP)}const v={id:u.id,email:A,nombreCompleto:m,curso:g,profile:x};o.push(v)}catch(f){console.warn(`Error processing user document ${u.id}:`,f)}}),o.sort((u,f)=>u.nombreCompleto.localeCompare(f.nombreCompleto)),console.log(`Processed ${o.length} users successfully`);const l=o.reduce((u,f)=>(u[f.profile]=(u[f.profile]||0)+1,u),{});console.log("Users by profile:",l);const c=o.filter(u=>u.profile===Tt.ESTUDIANTE);console.log(`Estudiantes: ${c.length}`);const d=c.filter(u=>u.curso);console.log(`Estudiantes con curso: ${d.length}`),e(o)},i=>{console.error("Error in subscribeToAllUsers:",i),t&&t(new Error(`Error al cargar usuarios: ${i.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},GS="empresas_practicas",SP="usuarios",oU="rutas_supervision",w3=e=>{const t=e.data();return{id:e.id,...t}};async function Qat(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyDjpSq97TvCxx7jIY7fEapTysmiZ1H30bg&region=CL`;try{const n=await(await fetch(r)).json();return n.status==="OK"&&n.results[0]?n.results[0].geometry.location:null}catch(a){return console.error("Error en la llamada a la API de Geocodificación:",a),null}}const Bfe=e=>{const t=jt(ut(st,GS),Gt("nombre","asc"));return rr(t,r=>{const a=r.docs.map(n=>w3(n));e(a)},r=>console.error("Error al suscribirse a empresas:",r))},pw=async e=>{const t=e.calificaciones.reduce((a,n)=>a+(n.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const a=await Qat(e.direccion);a&&(r.coordenadas=a)}if("id"in e&&e.id){const{id:a,...n}=r,i=$t(st,GS,a);return await Us(i,n,{merge:!0}),a}else return(await Kr(ut(st,GS),{...r,createdAt:Da()})).id},zat=async e=>{const t=$t(st,GS,e);await Ua(t)},$at=e=>{const t=jt(ut(st,SP),Kt("profile","==",Tt.ESTUDIANTE),Gt("nombreCompleto","asc"));return rr(t,r=>{const a=r.docs.map(n=>w3(n));e(a)},r=>console.error("Error al suscribirse a estudiantes:",r))},Vat=e=>{const t=jt(ut(st,SP),Kt("profile","==",Tt.PROFESORADO),Gt("nombreCompleto","asc")),r=jt(ut(st,SP),Kt("profile","==",Tt.COORDINACION_TP),Gt("nombreCompleto","asc")),a=new Map,n=()=>{const c=Array.from(a.values()).sort((d,u)=>(d.nombreCompleto||"").localeCompare(u.nombreCompleto||"","es"));e(c)},i=c=>{c.docChanges().forEach(d=>{const u=d.doc.id;d.type==="removed"?a.delete(u):a.set(u,w3(d.doc))}),n()},o=rr(t,i,c=>console.error("Error al suscribirse a profesores:",c)),l=rr(r,i,c=>console.error("Error al suscribirse a coordinación:",c));return()=>{o(),l()}},Gat=async e=>(await Kr(ut(st,oU),{...e,createdAt:Da()})).id,qat=e=>{const t=jt(ut(st,oU),Gt("createdAt","desc"));return rr(t,r=>{const a=r.docs.map(n=>w3(n));e(a)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},Kat=async e=>{const t=$t(st,oU,e);await Ua(t)},Oj=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},Wat=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),Xat=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),Yat=()=>{const[e,t]=w.useState([]),[r,a]=w.useState([]),[n,i]=w.useState([]),[o,l]=w.useState(!0),[c,d]=w.useState(null),[u,f]=w.useState(new Date),[A,m]=w.useState("todos"),[g,x]=w.useState(""),[v,y]=w.useState(!1),{currentUser:N}=_E(),E=ie=>`asistenciaDual.threshold.${ie||"default"}`,[B,_]=w.useState(()=>{try{const ie=localStorage.getItem(E(null)),re=ie?parseInt(ie,10):NaN;return Number.isFinite(re)&&re>0?re:200}catch{return 200}});w.useEffect(()=>{try{const ie=E(N==null?void 0:N.email),re=localStorage.getItem(ie);if(re){const de=parseInt(re,10);Number.isFinite(de)&&de>0&&_(de)}}catch{}},[N==null?void 0:N.email]),w.useEffect(()=>{try{const ie=E(N==null?void 0:N.email);localStorage.setItem(ie,String(B))}catch{}},[B,N==null?void 0:N.email]);const[I,j]=w.useState("tabla");w.useEffect(()=>{l(!0),d(null);const ie=u.getFullYear(),re=u.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",ie,"Mes:",re);let de=!1,oe=!1;const be=()=>{de&&oe&&(console.log("=== CARGA COMPLETA ==="),l(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const we=ut(lr,"asistencia_dual"),Te=jt(we,El(5)),Ee=await Nr(Te);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${Ee.size}`),Ee.size>0)Ee.docs.forEach((ue,ge)=>{const he=ue.data();console.log(`   ${ge+1}. ${ue.id.slice(0,8)} - ${he.emailEstudiante} - ${he.tipo}`),console.log("      Fecha original:",he.fechaHora),console.log("      Todos los campos:",Object.keys(he))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const ue=["asistenciaEmpresa","asistencia_empresa"];for(const ge of ue)try{const he=ut(lr,ge),ve=jt(he,El(3)),le=await Nr(ve);if(console.log(`📋 ${ge}: ${le.size} documentos`),le.size>0){const ne=le.docs[0].data();console.log("   Estructura:",Object.keys(ne)),console.log("   Email:",ne.emailEstudiante||ne.email),console.log("   Fecha:",ne.fechaHora||ne.fecha)}}catch(he){console.log(`❌ ${ge}: ${he instanceof Error?he.message:"Error"}`)}}}catch(we){console.error("❌ Error en prueba directa:",we),we.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):we.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),Lat(ie,re).then(we=>{console.log("🔍 Debug info for collections:",we),Object.entries(we).forEach(([Te,Ee])=>{if(Ee.exists&&Ee.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${Te.toUpperCase()}:`),console.log(`   📊 Total documentos: ${Ee.totalDocs}`),console.log(`   📅 Documentos del período: ${Ee.count}`),console.log(`   🔑 Campo de fecha: ${Ee.hasDateField}`),Ee.sampleDoc){console.log("   📄 Documento ejemplo:",Ee.sampleDoc);const ue=Ee.sampleDoc,ge=ue.emailEstudiante||ue.email||ue.userEmail||ue.correo||"NO ENCONTRADO",he=ue.tipo||ue.type||ue.action||ue.tipoRegistro||"NO ENCONTRADO",ve=ue.fechaHora||ue.fecha||ue.timestamp||ue.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${ge}`),console.log(`   📝 Tipo registro: ${he}`),console.log(`   📅 Fecha: ${ve}`),console.log("   🗂️ Todos los campos:",Object.keys(ue))}Ee.filteredDocs&&Ee.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",Ee.filteredDocs.length),Ee.filteredDocs.forEach((ue,ge)=>{ge<3&&console.log(`      ${ge+1}. ID: ${ue.id}`,ue.data)}))}else Ee.exists?console.log(`⚪ Colección ${Te}: vacía`):console.log(`❌ Colección ${Te}: no existe`)})}).catch(we=>{console.error("Debug error:",we)}),Rat().then(we=>{console.log("🔍 Debug info for users:",we),(!we.exists||"totalDocs"in we&&we.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async Ee=>{var ue;try{const ge=ut(lr,Ee),he=jt(ge,El(5)),ve=await Nr(he);ve.size>0?(console.log(`✅ Encontrada colección alternativa: ${Ee} con ${ve.size} documentos`),console.log("Documento muestra:",(ue=ve.docs[0])==null?void 0:ue.data())):console.log(`❌ Colección ${Ee}: vacía`)}catch{console.log(`❌ Colección ${Ee}: no existe`)}}))}).catch(we=>{console.error("Users debug error:",we)});try{console.log("Configurando suscripción a asistencia...");let we=Mat(ie,re,ue=>{if(console.log("✅ Received registros:",ue.length),ue.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",ue[0]);const ge=[...new Set(ue.map(pe=>pe.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",ge);const he=[...new Set(ue.map(pe=>pe.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",he);const ve=ue.reduce((pe,ke)=>{const Le=new Date(ke.fechaHora).getDate();return pe[Le]||(pe[Le]=[]),pe[Le].push(ke),pe},{});console.log("📅 Registros por día del mes:",Object.keys(ve).map(pe=>({dia:parseInt(pe),cantidad:ve[parseInt(pe)].length})));const le=r.map(pe=>pe.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",le);const ne=ge.filter(pe=>le.includes(pe)),Ae=ge.filter(pe=>!le.includes(pe));console.log("✅ Emails que coinciden:",ne),console.log("❌ Emails que NO coinciden:",Ae)}else console.log("⚠️ No se encontraron registros de asistencia para el período");t(ue),de=!0,be()},ue=>{console.error("❌ Error fetching asistencia:",ue),d("Error al cargar datos de asistencia: "+ue.message),de=!0,be()},{includeAll:v});console.log("Configurando suscripción a usuarios...");let Te=null,Ee=null;return Te=Uat(ue=>{if(console.log("✅ Received users (multi-collection):",ue.length),ue.length>0){console.log("Sample user:",ue[0]);const ge=ue.filter(he=>he.profile===Tt.ESTUDIANTE&&he.curso);console.log("Dual students found:",ge.length),ge.forEach(he=>{console.log(`- ${he.nombreCompleto} (${he.curso}) - ${he.email}`)})}a(ue),oe=!0,be()},ue=>{console.error("❌ Error fetching users (multi-collection):",ue),console.log("🔄 Intentando con función original de usuarios..."),Ee=Hat(ge=>{console.log("✅ Received users (fallback):",ge.length),a(ge),oe=!0,be()},ge=>{console.error("❌ Error en fallback también:",ge),d("Error al cargar estudiantes: "+ue.message),oe=!0,be()})}),setTimeout(async()=>{if(!oe&&r.length===0)try{console.log("⏳ Timeout de usuarios: aplicando fallback getAllUsersFromAlt()...");const ue=await Mx();ue.length>0?(console.log(`✅ Fallback cargó ${ue.length} usuarios desde colección "usuarios"`),a(ue),oe=!0,be()):(console.warn('⚠️ Fallback no encontró usuarios en "usuarios"'),oe=!0,be())}catch(ue){console.error("❌ Error en fallback getAllUsersFromAlt:",ue),oe=!0,be()}},4e3),()=>{console.log("Limpiando suscripciones..."),we&&we(),Te&&Te(),Ee&&Ee()}}catch(we){console.error("❌ Error setting up subscriptions:",we),d("Error al inicializar conexiones: "+(we instanceof Error?we.message:"Error desconocido")),l(!1)}},[u,v]),w.useEffect(()=>{const ie=Bfe(i);return()=>ie&&ie()},[]);const{monthDays:k,monthName:T,year:L}=w.useMemo(()=>{const ie=u.getFullYear(),re=u.getMonth();return{monthDays:new Date(ie,re+1,0).getDate(),monthName:u.toLocaleString("es-CL",{month:"long"}),year:ie}},[u]),F=w.useMemo(()=>{let ie=r.filter(re=>re.profile===Tt.ESTUDIANTE&&re.curso&&Vm.includes(Oj(re.curso)));if(A!=="todos"&&(ie=ie.filter(re=>Oj(re.curso||"")===A)),g&&(ie=ie.filter(re=>re.nombreCompleto.toLowerCase().includes(g.toLowerCase()))),e.length>0){const re=[...new Set(e.map(be=>be.emailEstudiante).filter(be=>!!be))],de=ie.map(be=>be.email),oe=re.filter(be=>!de.includes(be));if(oe.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",oe);const q=oe.map(we=>{const Te=e.find(Ee=>Ee.emailEstudiante===we);return{id:we,email:we,nombreCompleto:(Te==null?void 0:Te.nombreEstudiante)||we.split("@")[0],curso:(Te==null?void 0:Te.curso)||"3ºC",profile:Tt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(we=>{const Te=A==="todos"||Oj(we.curso)===A,Ee=!g||we.nombreCompleto.toLowerCase().includes(g.toLowerCase());return Te&&Ee&&Vm.includes(Oj(we.curso))});ie=[...ie,...q]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${ie.length}`),ie.forEach(re=>{console.log(`   - ${re.nombreCompleto} (${re.curso}) - ${re.email}`)}),ie.sort((re,de)=>re.nombreCompleto.localeCompare(de.nombreCompleto))},[r,A,g,e]),S=w.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${e.length}`),console.log(`👥 Estudiantes disponibles: ${F.length}`);const ie=new Map;return e.length===0?(console.log("⚠️ No hay registros para procesar aún"),ie):(e.forEach((re,de)=>{const oe=re.emailEstudiante;if(!oe)return;let be;if(re.fechaHora instanceof Date)be=re.fechaHora;else if(re.fechaHora&&typeof re.fechaHora=="object"&&"toDate"in re.fechaHora)be=re.fechaHora.toDate();else if(typeof re.fechaHora=="string")be=new Date(re.fechaHora);else{console.warn("Fecha no válida en registro:",re);return}const q=be.getDate(),we=be.getMonth(),Te=be.getFullYear();de<3&&console.log(`📅 Registro ${de+1}:`,{email:oe,tipo:re.tipo,fechaOriginal:re.fechaHora,fechaProcesada:be.toLocaleString(),año:Te,mes:we,día:q}),ie.has(oe)||ie.set(oe,new Map);const Ee=ie.get(oe);Ee.has(q)||Ee.set(q,{});const ue=Ee.get(q);re.tipo==="Entrada"?(!ue.entrada||be<new Date(ue.entrada.fechaHora))&&(ue.entrada=re):re.tipo==="Salida"&&(!ue.salida||be>new Date(ue.salida.fechaHora))&&(ue.salida=re)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:ie.size,estudiantes:Array.from(ie.keys()),registrosPorEstudiante:Array.from(ie.entries()).map(([re,de])=>({email:re,dias:Array.from(de.keys()),totalRegistros:Array.from(de.values()).reduce((oe,be)=>oe+(be.entrada?1:0)+(be.salida?1:0),0)}))}),ie)},[e]),M=w.useMemo(()=>{if(!e.length)return 0;const ie=u.getFullYear(),re=u.getMonth();return e.reduce((de,oe)=>{let be=null;return oe.fechaHora instanceof Date?be=oe.fechaHora:oe.fechaHora&&typeof oe.fechaHora=="object"&&"toDate"in oe.fechaHora?be=oe.fechaHora.toDate():typeof oe.fechaHora=="string"&&(be=new Date(oe.fechaHora)),!be||isNaN(be.getTime())?de:be.getFullYear()===ie&&be.getMonth()===re?de+1:de},0)},[e,u]),H=ie=>{f(re=>{const de=new Date(re);return de.setMonth(de.getMonth()+ie),de})},K=ie=>{ie!=null&&ie.latitud&&(ie!=null&&ie.longitud)&&window.open(`https://www.google.com/maps?q=${ie.latitud},${ie.longitud}`,"_blank")},Q=["D","L","M","M","J","V","S"],G=w.useMemo(()=>{const ie=new Map;return n.forEach(re=>{(re.estudiantesAsignados||[]).forEach(de=>{de&&ie.set(de,re)})}),ie},[n]),X=(ie,re,de,oe)=>{const be=ge=>ge*Math.PI/180,we=be(de-ie),Te=be(oe-re),Ee=Math.sin(we/2)**2+Math.cos(be(ie))*Math.cos(be(de))*Math.sin(Te/2)**2;return 6371e3*(2*Math.atan2(Math.sqrt(Ee),Math.sqrt(1-Ee)))},Z=ie=>{const re=ie.email,de=S.get(re),oe=G.get(ie.id),be=oe==null?void 0:oe.coordenadas;if(!de||!be||be.lat==null||be.lng==null)return{hasData:!!de,undetermined:!0,anyDeviation:!1,count:0,max:0};let q=0,we=0;for(let Te=1;Te<=k;Te++){const Ee=de.get(Te);if(!Ee)continue;const ue=ge=>{if(!ge||ge.latitud==null||ge.longitud==null)return;const he=X(ge.latitud,ge.longitud,be.lat,be.lng);he>B&&(q+=1),he>we&&(we=he)};Ee.entrada&&ue(Ee.entrada.ubicacion),Ee.salida&&ue(Ee.salida.ubicacion)}return{hasData:!0,undetermined:!1,anyDeviation:q>0,count:q,max:we}},[U,Y]=w.useState(()=>{try{return localStorage.getItem("asistenciaDual.onlyDeviations.default")==="1"}catch{return!1}});w.useEffect(()=>{try{const ie=`asistenciaDual.onlyDeviations.${(N==null?void 0:N.email)||"default"}`,re=localStorage.getItem(ie);re!=null&&Y(re==="1")}catch{}},[N==null?void 0:N.email]),w.useEffect(()=>{try{const ie=`asistenciaDual.onlyDeviations.${(N==null?void 0:N.email)||"default"}`;localStorage.setItem(ie,U?"1":"0")}catch{}},[U,N==null?void 0:N.email]);const P=w.useMemo(()=>U?F.filter(ie=>{const re=Z(ie);return re.hasData&&!re.undetermined&&re.anyDeviation}):F,[F,U,S,G,k]),D=w.useMemo(()=>{const ie=P,re=new Set(ie.map(he=>he.email)),de=[];for(let he=1;he<=k;he++){let ve=0;re.forEach(le=>{var Ae;const ne=(Ae=S.get(le))==null?void 0:Ae.get(he);ne!=null&&ne.entrada&&(ve+=1)}),de.push({day:he,entradas:ve})}const oe={0:0,1:0,2:0,3:0,4:0,5:0,6:0};de.forEach(({day:he,entradas:ve})=>{const ne=new Date(L,u.getMonth(),he).getDay();oe[ne]+=ve});const be=[0,1,2,3,4,5,6].map(he=>({nombre:Q[he],registros:oe[he]}));let q=0;ie.forEach(he=>{var ne;const ve=S.get(he.email);if(!ve)return;let le=0;for(let Ae=1;Ae<=k;Ae++)(ne=ve.get(Ae))!=null&&ne.entrada&&(le+=1);q+=le});const we=ie.length?q/ie.length:0,Te=ie.map(he=>{const ve=Z(he);return{id:he.id,nombre:he.nombreCompleto,count:ve.count,any:ve.anyDeviation}}),Ee=Te.reduce((he,ve)=>he+(ve.count||0),0),ue=Te.filter(he=>he.count>0).sort((he,ve)=>ve.count-he.count).slice(0,5);let ge=[];if(A==="todos"){const he=new Map;ie.forEach(ve=>{const le=ve.curso||"—";he.has(le)||he.set(le,[]),he.get(le).push(ve)}),ge=Array.from(he.entries()).map(([ve,le])=>{let ne=0;le.forEach(pe=>{var qe;const ke=S.get(pe.email);if(!ke)return;let Le=0;for(let ze=1;ze<=k;ze++)(qe=ke.get(ze))!=null&&qe.entrada&&(Le+=1);ne+=Le});const Ae=le.length?ne/le.length:0;return{curso:ve,promedioDias:Ae,estudiantes:le.length}}).sort((ve,le)=>ve.curso.localeCompare(le.curso,"es"))}return{estudiantesCount:ie.length,dailyEntries:de,weekdaySeries:be,avgDiasConEntrada:we,totalDesviaciones:Ee,topDesviadores:ue,porCurso:ge}},[P,S,k,L,u,A]),W=ie=>{if(ie==null)return"";let re=String(ie);const de=/[",\n]/.test(re);return re=re.replace(/"/g,'""'),de?`"${re}"`:re},J=(ie,re)=>{const de=re.map(we=>we.map(W).join(",")).join(`
`),oe=new Blob([de],{type:"text/csv;charset=utf-8;"}),be=URL.createObjectURL(oe),q=document.createElement("a");q.href=be,q.setAttribute("download",ie),document.body.appendChild(q),q.click(),document.body.removeChild(q),URL.revokeObjectURL(be)},ce=()=>{try{const ie=["Estudiante","Curso"];for(let we=1;we<=k;we++)ie.push(String(we));ie.push("Ingresos","Salidas","Desv","DesvEventos","DesvMax(m)");const re=[ie];P.forEach(we=>{const Te=S.get(we.email);let Ee=0,ue=0;const ge=[];for(let le=1;le<=k;le++){const ne=Te==null?void 0:Te.get(le),Ae=!!(ne!=null&&ne.entrada),pe=!!(ne!=null&&ne.salida);Ae&&(Ee+=1),pe&&(ue+=1),Ae&&pe?ge.push("E/S"):Ae?ge.push("E"):pe?ge.push("S"):ge.push("")}const he=Z(we),ve=he.hasData?he.undetermined?"N/D":he.anyDeviation?"Sí":"No":"";re.push([we.nombreCompleto||"",we.curso||"",...ge,String(Ee),String(ue),ve,he.hasData&&!he.undetermined?String(he.count):"",he.hasData&&!he.undetermined?String(Math.round(he.max)):""])});const oe=u.toLocaleString("es-CL",{month:"long"}).normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/\s+/g,"_"),q=`asistencia_dual_${A==="todos"?"Todos":A.replace(/[^A-Za-z0-9º]/g,"_")}_${oe}_${L}${U?"_solo_desv":""}.csv`;J(q,re)}catch(ie){console.error("Error al exportar CSV:",ie),alert("No se pudo generar el informe. Intenta nuevamente.")}};return c?s.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:s.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:c})}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[s.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[s.jsx("button",{onClick:()=>H(-1),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors","aria-label":"Mes anterior",children:"←"}),s.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${T} ${L}`}),s.jsx("button",{onClick:()=>H(1),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors","aria-label":"Mes siguiente",children:"→"})]}),s.jsxs("label",{className:"flex items-center gap-2 justify-center md:justify-start",children:[s.jsx("input",{type:"checkbox",checked:v,onChange:ie=>y(ie.target.checked),disabled:o}),s.jsx("span",{className:"text-slate-700 dark:text-slate-200 text-sm",children:"Mostrar todo"})]}),s.jsxs("select",{value:A,onChange:ie=>m(ie.target.value),disabled:o,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"todos",children:"Todos los Cursos"}),Vm.map(ie=>s.jsx("option",{value:ie,children:ie},ie))]}),s.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:g,onChange:ie=>x(ie.target.value),disabled:o,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsxs("div",{className:"text-center md:text-right text-sm text-slate-600 dark:text-slate-300",children:[s.jsxs("span",{className:"inline-block px-2 py-1 rounded bg-slate-100 dark:bg-slate-600/50 mr-2",children:["Estudiantes: ",F.length]}),s.jsxs("span",{className:"inline-block px-2 py-1 rounded bg-slate-100 dark:bg-slate-600/50",children:["Registros del período: ",M]})]}),s.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-end gap-2",children:[s.jsx("button",{onClick:()=>j(ie=>ie==="tabla"?"dashboard":"tabla"),className:"px-4 py-2 rounded-md bg-emerald-600 text-white font-medium hover:bg-emerald-700 w-full sm:w-auto min-w-[140px]",title:"Alternar entre Tabla y Dashboard",children:I==="tabla"?"Ver Dashboard":"Ver Tabla"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm text-slate-600 dark:text-slate-300",title:"Umbral de desviación geográfica",children:"Umbral"}),s.jsxs("select",{value:B,onChange:ie=>_(parseInt(ie.target.value)||200),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm px-2 py-1 w-full sm:w-[120px]",children:[s.jsx("option",{value:100,children:"100 m"}),s.jsx("option",{value:200,children:"200 m"}),s.jsx("option",{value:300,children:"300 m"}),s.jsx("option",{value:500,children:"500 m"})]})]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200",children:[s.jsx("input",{type:"checkbox",checked:U,onChange:ie=>Y(ie.target.checked)}),"Solo con desviaciones"]}),s.jsx("button",{onClick:ce,disabled:o||P.length===0,title:"Descargar informe mensual (CSV)",className:"px-4 py-2 rounded-md bg-blue-600 text-white font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed w-full sm:w-auto min-w-[160px]",children:"Descargar informe"})]})]}),o?s.jsxs("div",{className:"text-center text-amber-600 py-10",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),s.jsx("div",{children:"Cargando datos de asistencia..."})]}):I==="dashboard"?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-indigo-500 to-indigo-400 text-white shadow-md",children:[s.jsx("div",{className:"text-xs opacity-90",children:"Estudiantes"}),s.jsx("div",{className:"text-2xl font-bold",children:D.estudiantesCount})]}),s.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-cyan-500 to-cyan-400 text-white shadow-md",children:[s.jsx("div",{className:"text-xs opacity-90",children:"Registros (mes)"}),s.jsx("div",{className:"text-2xl font-bold",children:M})]}),s.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-emerald-500 to-emerald-400 text-white shadow-md",children:[s.jsx("div",{className:"text-xs opacity-90",children:"Promedio días con entrada"}),s.jsx("div",{className:"text-2xl font-bold",children:D.avgDiasConEntrada.toFixed(1)})]}),s.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-amber-500 to-amber-400 text-white shadow-md",children:[s.jsx("div",{className:"text-xs opacity-90",children:"Desviaciones (mes)"}),s.jsx("div",{className:"text-2xl font-bold",children:D.totalDesviaciones})]})]}),s.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900",children:[s.jsx("h3",{className:"font-bold mb-3",children:"Entradas por día del mes"}),s.jsx(oi,{width:"100%",height:260,children:s.jsxs(CZe,{data:D.dailyEntries,margin:{left:8,right:8,top:8,bottom:8},children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"gradEntradas",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#22C55E",stopOpacity:.8}),s.jsx("stop",{offset:"100%",stopColor:"#22C55E",stopOpacity:.1})]})}),s.jsx(uu,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),s.jsx(yl,{dataKey:"day",tick:{fill:"#64748b",fontSize:12}}),s.jsx(wl,{allowDecimals:!1,tick:{fill:"#64748b",fontSize:12}}),s.jsx(ii,{}),s.jsx(Kde,{dataKey:"entradas",name:"Entradas",type:"monotone",stroke:"#22C55E",fill:"url(#gradEntradas)"})]})})]}),s.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900",children:[s.jsx("h3",{className:"font-bold mb-3",children:"Registros por día de semana"}),s.jsx(oi,{width:"100%",height:260,children:s.jsxs(Ad,{data:D.weekdaySeries,margin:{left:8,right:8,top:8,bottom:8},children:[s.jsx(uu,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),s.jsx(yl,{dataKey:"nombre",tick:{fill:"#64748b",fontSize:12}}),s.jsx(wl,{allowDecimals:!1,tick:{fill:"#64748b",fontSize:12}}),s.jsx(ii,{}),s.jsx(Ec,{dataKey:"registros",name:"Entradas",fill:"#6366F1",radius:[6,6,0,0]}),s.jsx(Sp,{})]})})]}),s.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900",children:[s.jsx("h3",{className:"font-bold mb-3",children:"Top 5 con más desviaciones"}),D.topDesviadores.length===0?s.jsx("div",{className:"text-sm text-slate-500",children:"Sin desviaciones registradas en el mes."}):s.jsx("ul",{className:"divide-y",children:D.topDesviadores.map((ie,re)=>s.jsxs("li",{className:"py-2 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-sm font-semibold text-slate-600",children:re+1}),s.jsx("span",{className:"font-medium",children:ie.nombre})]}),s.jsx("span",{className:"font-bold text-red-600",children:ie.count})]},ie.id))})]}),A==="todos"&&s.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900",children:[s.jsx("h3",{className:"font-bold mb-3",children:"Promedio de días con entrada por curso"}),s.jsx(oi,{width:"100%",height:260,children:s.jsxs(Ad,{data:D.porCurso,margin:{left:8,right:8,top:8,bottom:8},children:[s.jsx(uu,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),s.jsx(yl,{dataKey:"curso",tick:{fill:"#64748b",fontSize:12}}),s.jsx(wl,{allowDecimals:!1,tick:{fill:"#64748b",fontSize:12}}),s.jsx(ii,{}),s.jsx(Ec,{dataKey:"promedioDias",name:"Prom. días con entrada",fill:"#0ea5e9",radius:[6,6,0,0]})]})}),s.jsxs("div",{className:"text-xs text-slate-500 mt-2",children:["Entre 0 y ",k," días posibles"]})]})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:k},(ie,re)=>{const oe=new Date(L,u.getMonth(),re+1).getDay(),be=oe===0||oe===6;return s.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${be?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[s.jsx("div",{className:"font-semibold",children:Q[oe]}),s.jsx("div",{children:re+1})]},re)}),s.jsx("th",{className:"p-2 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-20 text-center",children:"Ingresos"}),s.jsx("th",{className:"p-2 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-20 text-center",children:"Salidas"}),s.jsx("th",{className:"p-2 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-24 text-center",title:`Marcajes fuera de ${B} m de la empresa`,children:"Desv."})]})}),s.jsx("tbody",{children:P.length>0?P.map(ie=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[s.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:ie.nombreCompleto}),Array.from({length:k},(re,de)=>{var Te;const oe=de+1,be=(Te=S.get(ie.email))==null?void 0:Te.get(oe),q=new Date(L,u.getMonth(),de+1),we=q.getDay()===0||q.getDay()===6;return ie.email==="alexis.robles@industrialderecoleta.cl"&&oe===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:ie.email,day:oe,hasDataForStudent:S.has(ie.email),studentDayRecords:be,allAttendanceKeys:Array.from(S.keys()),daysForStudent:S.get(ie.email)?Array.from(S.get(ie.email).keys()):[]}),s.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${we?"bg-slate-100 dark:bg-slate-700/50":""}`,children:s.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(()=>{var ve,le;if(!(be!=null&&be.entrada))return null;const Ee=G.get(ie.id),ue=Ee==null?void 0:Ee.coordenadas;let ge=null,he=!1;return ue&&((ve=be.entrada.ubicacion)==null?void 0:ve.latitud)!=null&&((le=be.entrada.ubicacion)==null?void 0:le.longitud)!=null&&(ge=X(be.entrada.ubicacion.latitud,be.entrada.ubicacion.longitud,ue.lat,ue.lng),he=ge>B),s.jsxs("div",{className:`group relative cursor-pointer ${he?"ring-2 ring-red-400 rounded-full":""}`,onClick:()=>{var ne;return K((ne=be.entrada)==null?void 0:ne.ubicacion)},children:[s.jsx(Wat,{}),s.jsxs("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:[new Date(be.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"}),ge!=null?` • ${Math.round(ge)} m`:""]})]})})(),(()=>{var ve,le;if(!(be!=null&&be.salida))return null;const Ee=G.get(ie.id),ue=Ee==null?void 0:Ee.coordenadas;let ge=null,he=!1;return ue&&((ve=be.salida.ubicacion)==null?void 0:ve.latitud)!=null&&((le=be.salida.ubicacion)==null?void 0:le.longitud)!=null&&(ge=X(be.salida.ubicacion.latitud,be.salida.ubicacion.longitud,ue.lat,ue.lng),he=ge>B),s.jsxs("div",{className:`group relative cursor-pointer ${he?"ring-2 ring-red-400 rounded-full":""}`,onClick:()=>{var ne;return K((ne=be.salida)==null?void 0:ne.ubicacion)},children:[s.jsx(Xat,{}),s.jsxs("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:[new Date(be.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"}),ge!=null?` • ${Math.round(ge)} m`:""]})]})})()]})},oe)}),s.jsx("td",{className:"p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle font-semibold",children:(()=>{const re=S.get(ie.email);if(!re)return 0;let de=0;for(let oe=1;oe<=k;oe++){const be=re.get(oe);be&&be.entrada&&(de+=1)}return de})()}),s.jsx("td",{className:"p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle font-semibold",children:(()=>{const re=S.get(ie.email);if(!re)return 0;let de=0;for(let oe=1;oe<=k;oe++){const be=re.get(oe);be&&be.salida&&(de+=1)}return de})()}),s.jsx("td",{className:"p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle",children:(()=>{const re=Z(ie);if(!re.hasData)return"—";if(re.undetermined)return s.jsx("span",{className:"text-xs text-slate-500",title:"Sin empresa asignada o sin coordenadas",children:"N/D"});const de=re.anyDeviation?"Sí":"No",oe=re.anyDeviation?"text-red-600":"text-emerald-600";return s.jsx("span",{className:`text-sm font-semibold ${oe}`,title:`Eventos fuera de umbral: ${re.count}
Distancia máxima: ${Math.round(re.max)} m`,children:de})})()})]},ie.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:k+4,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},N3="evaluaciones_formativas",E3="calificaciones_formativas",lU="trabajos_grupales_formativos",Jat="usuarios",cU=e=>{var r,a,n,i;const t=e.data();return{id:e.id,...t,fecha:((a=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((i=(n=t.fechaPresentacion)==null?void 0:n.toDate)==null?void 0:i.call(n).toISOString().split("T")[0])||t.fechaPresentacion}},Zat=(e,t,r)=>{const a=jt(ut(st,N3),Kt("curso","==",e),Kt("asignatura","==",t),Gt("fecha","asc"));return rr(a,n=>{r(n.docs.map(i=>cU(i)))},n=>{console.error("Error al suscribirse a evaluaciones:",n),r([])})},ent=async(e,t)=>{const r=wp(st),a=$t(ut(st,N3));r.set(a,{...e,fecha:dr.fromDate(new Date(e.fecha+"T00:00:00"))});const n=$t(st,E3,a.id);return r.set(n,t),await r.commit(),a.id},tnt=async(e,t)=>{const r=$t(st,N3,e);await Us(r,t,{merge:!0})},rnt=async e=>{const t=wp(st);t.delete($t(st,N3,e)),t.delete($t(st,E3,e)),await t.commit()},ant=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(a=>{const n=$t(st,E3,a);return rr(n,i=>{i.exists()&&t({[a]:i.data()})})});return()=>r.forEach(a=>a())},nnt=async(e,t)=>{const r=$t(st,E3,e);await Us(r,t,{merge:!0})},snt=(e,t,r)=>{const a=jt(ut(st,lU),Kt("curso","==",e),Kt("asignatura","==",t),Gt("fechaPresentacion","desc"));return rr(a,n=>{r(n.docs.map(i=>cU(i)))},n=>{console.error("Error al suscribirse a trabajos grupales:",n),r([])})},int=async e=>{const t={...e,fechaPresentacion:dr.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await Kr(ut(st,lU),t)},ont=async(e,t)=>{const r=$t(st,lU,e);await Us(r,t,{merge:!0})},lnt=e=>{const t=jt(ut(st,Jat));return rr(t,r=>{e(r.docs.map(a=>cU(a)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},Ife=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},db={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},Ofe=e=>e.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},cnt=({cursos:e,onSelect:t})=>s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const a=Ofe(r);return s.jsxs("div",{className:"space-y-2 text-center",children:[s.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${a.bg} ${a.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[s.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${a.spine} rounded-l-md`}),s.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${a.text}`,children:[s.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),s.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),s.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):s.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[s.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),s.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),dnt=({curso:e,asignaturas:t,onSelect:r,onBack:a})=>{const n=Ofe(e);return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[s.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),s.jsxs("div",{className:`p-2 rounded-md ${n.bg} ${n.text} font-bold`,children:["Libro de Clases: ",e]})]}),s.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(i=>s.jsxs("button",{onClick:()=>r(i),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[s.jsx("span",{className:"text-2xl",children:db[i]||db.Default}),s.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:i})]},i))}):s.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[s.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),s.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},unt=({curso:e,asignatura:t,allUsers:r,onBack:a})=>{const[n,i]=w.useState([]),[o,l]=w.useState({}),[c,d]=w.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[u,f]=w.useState(null),[A,m]=w.useState(null),[g,x]=w.useState(!0),v=w.useMemo(()=>r.filter(k=>k.profile===Tt.ESTUDIANTE&&Ife(k.curso||"")===e).map(k=>k.nombreCompleto).sort((k,T)=>k.localeCompare(T)),[r,e]);w.useEffect(()=>{x(!0);const k=Zat(e,t,T=>{i(T);const L=T.map(S=>S.id),F=ant(L,S=>{l(M=>({...M,...S}))});return x(!1),()=>F()});return()=>k()},[e,t]);const y=k=>{const{name:T,value:L}=k.target;u?f(F=>F?{...F,[T]:L}:null):d(F=>({...F,[T]:L}))},N=async k=>{if(k.preventDefault(),m(null),!c.nombreActividad.trim()){m("El nombre de la actividad es obligatorio.");return}const T={asignatura:t,curso:e,...c},L=v.reduce((F,S)=>(F[S]="trabajado",F),{});try{await ent(T,L),d({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(F){console.error(F),m("No se pudo crear la evaluación.")}},E=(k,T)=>{var M;const L=((M=o[k])==null?void 0:M[T])||"trabajado";let F;L==="trabajado"?F="no trabajado":L==="no trabajado"?F="ausente":F="trabajado";const S={...o,[k]:{...o[k]||{},[T]:F}};l(S),nnt(k,{[T]:F}).catch(H=>{console.error("Error updating grade:",H)})},B=k=>f(k),_=async()=>{if(u)try{await tnt(u.id,{nombreActividad:u.nombreActividad,fecha:u.fecha}),f(null)}catch(k){console.error(k),m("No se pudo guardar la edición.")}},I=async k=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await rnt(k)}catch(T){console.error(T),m("No se pudo eliminar la evaluación.")}},j=w.useCallback(k=>{if(n.length===0)return"-";let T=0,L=0;return n.forEach(F=>{var M;const S=(M=o[F.id])==null?void 0:M[k];S==="trabajado"?(T+=7,L++):S==="no trabajado"&&(T+=2,L++)}),L===0?"-":(T/L).toFixed(1)},[o,n]);return g?s.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),s.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),s.jsxs("form",{onSubmit:N,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[s.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),s.jsxs("div",{className:"w-full",children:[s.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),s.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:c.nombreActividad,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{className:"w-full",children:[s.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),s.jsx("input",{id:"fecha",type:"date",name:"fecha",value:c.fecha,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsx("div",{className:"w-full",children:s.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),A&&s.jsx("p",{className:"text-red-500 text-sm col-span-full",children:A})]}),s.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),n.map(k=>s.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(u==null?void 0:u.id)===k.id?s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("input",{type:"text",name:"nombreActividad",value:u.nombreActividad,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),s.jsx("input",{type:"date",name:"fecha",value:u.fecha,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),s.jsx("button",{onClick:_,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"font-semibold",children:k.nombreActividad}),s.jsx("span",{className:"font-normal text-slate-500",children:k.fecha}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx("button",{onClick:()=>B(k),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),s.jsx("button",{onClick:()=>I(k.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},k.id)),s.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:v.map(k=>s.jsxs("tr",{children:[s.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:k}),n.map(T=>{var S;const L=(S=o[T.id])==null?void 0:S[k];let F;return L==="trabajado"?F=db[t]||db.Default:L==="no trabajado"?F="❌":L==="ausente"?F="A":F=db[t]||db.Default,s.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:s.jsx("button",{onClick:()=>E(T.id,k),className:`text-3xl transition-opacity duration-200 ${L==="trabajado"?"opacity-100":L==="no trabajado"?"opacity-40":L==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:F})},T.id)}),s.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:j(k)})]},k))})]})})]})},fnt=({curso:e,asignatura:t,allUsers:r,onBack:a})=>{const[n,i]=w.useState([]),[o,l]=w.useState(null),[c,d]=w.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[u,f]=w.useState({}),[A,m]=w.useState(2),g=w.useMemo(()=>r.filter(B=>B.profile===Tt.ESTUDIANTE&&Ife(B.curso||"")===e).sort((B,_)=>B.nombreCompleto.localeCompare(_.nombreCompleto)),[r,e]);w.useEffect(()=>{const B=snt(e,t,i);return()=>B()},[e,t]),w.useEffect(()=>{if(o){const B={};o.grupos.forEach(_=>{_.integrantes.forEach(I=>{B[I.nombre]={groupNumber:String(_.numero),role:I.rol||""}})}),f(B)}else f({})},[o]);const x=async B=>{if(B.preventDefault(),!c.nombre.trim())return;const _={curso:e,asignatura:t,nombreActividad:c.nombre,fechaPresentacion:c.fecha,grupos:[]};try{await int(_),d({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(I){console.error(I),alert("No se pudo crear la actividad grupal.")}},v=async()=>{if(!o)return;const B=new Map;for(const I of g){const j=u[I.nombreCompleto];if(j&&j.groupNumber){const k=parseInt(j.groupNumber,10);isNaN(k)||(B.has(k)||B.set(k,[]),B.get(k).push({nombre:I.nombreCompleto,rol:j.role||""}))}}const _=Array.from(B.entries()).map(([I,j])=>({numero:I,integrantes:j})).sort((I,j)=>I.numero-j.numero);try{await ont(o.id,{grupos:_}),alert("Grupos guardados con éxito.")}catch(I){console.error(I),alert("No se pudieron guardar los grupos.")}},y=()=>{if(A<2){alert("Debe haber al menos 2 grupos.");return}const B=[...g].sort(()=>Math.random()-.5),_={};B.forEach((I,j)=>{var k;_[I.nombreCompleto]={groupNumber:String(j%A+1),role:((k=u[I.nombreCompleto])==null?void 0:k.role)||""}}),f(_)},N=(B,_,I)=>{f(j=>({...j,[B]:{...j[B]||{groupNumber:"",role:""},[_]:I}}))},E=w.useMemo(()=>{const B=new Map;return Object.entries(u).forEach(([_,I])=>{I.groupNumber&&(B.has(I.groupNumber)||B.set(I.groupNumber,[]),B.get(I.groupNumber).push({nombre:_,rol:I.role}))}),Array.from(B.entries()).sort((_,I)=>parseInt(_[0])-parseInt(I[0]))},[u]);return o?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),s.jsx("h2",{className:"text-2xl font-bold",children:o.nombreActividad})]}),s.jsx("button",{onClick:v,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"md:col-span-1 space-y-4",children:[s.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"number",value:A,onChange:B=>m(parseInt(B.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),s.jsx("button",{onClick:y,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),s.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),s.jsx("table",{className:"w-full text-sm",children:s.jsx("tbody",{children:g.map(B=>{var _;return s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-2",children:B.nombreCompleto}),s.jsx("td",{className:"py-1",children:s.jsx("input",{type:"number",value:((_=u[B.nombreCompleto])==null?void 0:_.groupNumber)||"",onChange:I=>N(B.nombreCompleto,"groupNumber",I.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},B.id)})})})]})]}),s.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:E.map(([B,_])=>s.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[s.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",B]}),s.jsx("ul",{className:"space-y-2",children:_.map(I=>s.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"flex-1 truncate",children:I.nombre}),s.jsxs("select",{value:I.rol||"",onChange:j=>N(I.nombre,"role",j.target.value),className:"p-1 border rounded text-xs w-32",children:[s.jsx("option",{value:"",children:"-- Asignar Rol --"}),$ae.map(j=>s.jsx("option",{value:j,children:j},j))]})]},I.nombre))})]},B))})]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),s.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),s.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),s.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[s.jsx("input",{value:c.nombre,onChange:B=>d({...c,nombre:B.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),s.jsx("input",{type:"date",value:c.fecha,onChange:B=>d({...c,fecha:B.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),s.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),n.map(B=>s.jsxs("button",{onClick:()=>l(B),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[s.jsx("p",{className:"font-bold",children:B.nombreActividad}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",B.fechaPresentacion]})]},B.id))]})]})},hnt=({currentUser:e})=>{const[t,r]=w.useState("calificaciones"),[a,n]=w.useState(null),[i,o]=w.useState(null),[l,c]=w.useState([]),[d,u]=w.useState(!0);w.useEffect(()=>{u(!0);const x=lnt(v=>{c(v),u(!1)});return()=>x()},[]);const f=w.useMemo(()=>e.cursos||[],[e.cursos]),A=w.useMemo(()=>e.asignaturas||[],[e.asignaturas]),m=({tab:x,label:v})=>s.jsx("button",{onClick:()=>r(x),className:`${t===x?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:v}),g=()=>{if(d)return s.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!a)return s.jsx(cnt,{cursos:f,onSelect:n});if(!i)return s.jsx(dnt,{curso:a,asignaturas:A,onSelect:o,onBack:()=>n(null)});if(t==="calificaciones")return s.jsx(unt,{curso:a,asignatura:i,allUsers:l,onBack:()=>o(null)});if(t==="grupos")return s.jsx(fnt,{curso:a,asignatura:i,allUsers:l,onBack:()=>o(null)})};return s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),s.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:s.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[s.jsx(m,{tab:"calificaciones",label:"Calificaciones"}),s.jsx(m,{tab:"grupos",label:"Trabajos Grupales"})]})}),s.jsx("div",{className:"mt-6",children:g()})]})};function Ant(e){return e.map(t=>{const[r,a]=t.minuto.split("-").map(Number),n=t.accionesEstudiantes.length>0?t.accionesEstudiantes.split(" ").length/(a-r):0;return{minuto:r,participacion:Math.min(100,n*10)}})}function mnt(e){const t=new Map,r={preguntas_abiertas:/(?:pregunt[aó]|cu[áa]l|qu[ée]|c[óo]mo|por qu[ée]|explica)/gi,interrogacion_sucesiva:/(?:entonces|y luego|qu[ée] m[áa]s|profundiza|explica mejor)/gi,ejemplos_contextualizados:/(?:ejemplo|caso|situaci[óo]n|contexto real|en la vida)/gi,feedback_inmediato:/(?:bien|correcto|exacto|muy bien|as[íi] es|mejorar[íi]a)/gi};for(const[a,n]of Object.entries(r)){const i=e.match(n);t.set(a,i?i.length:0)}return t}async function pnt(e,t){var o;const r={stats:{docenteId:e.docenteInfo||"",curso:e.cursoInfo||"",asignatura:e.asignaturaInfo||"",conteo_observaciones:1,uso_preguntas_abiertas_pct:0,uso_interrogacion_sucesiva_pct:0,uso_ejemplos_contextualizados_pct:0,feedback_inmediato_pct:0,min_interaccion:0,min_explicacion:0,participacion_promedio:0},charts:{participacion_por_minuto:[],estrategias_frecuencia:[],indicadores_cumplimiento:[],nube_palabras:[]},summary:{fortalezas:[],mejoras:[],recomendaciones:[]},alerts:[],traza:{modelo:"gemini-2.5-flash-lite",version_prompt:"v1"}};if(e.detallesObservacion){r.charts.participacion_por_minuto=Ant(e.detallesObservacion);let l=0,c=0;e.detallesObservacion.forEach(d=>{const[u,f]=d.minuto.split("-").map(Number),A=f-u;d.accionesEstudiantes.length>d.accionesDocente.length?l+=A:c+=A}),r.stats.min_interaccion=l,r.stats.min_explicacion=c}const a=new Map;let n=0;(o=e.detallesObservacion)==null||o.forEach(l=>{mnt(l.accionesDocente).forEach((d,u)=>{a.set(u,(a.get(u)||0)+d)}),n+=l.accionesDocente.length}),a.forEach((l,c)=>{const d=n>0?l/n*100:0;switch(r.charts.estrategias_frecuencia.push({estrategia:c,porcentaje:Math.round(d*100)/100,conteo:l}),c){case"preguntas_abiertas":r.stats.uso_preguntas_abiertas_pct=d;break;case"interrogacion_sucesiva":r.stats.uso_interrogacion_sucesiva_pct=d;break;case"ejemplos_contextualizados":r.stats.uso_ejemplos_contextualizados_pct=d;break;case"feedback_inmediato":r.stats.feedback_inmediato_pct=d;break}}),r.charts.participacion_por_minuto.length>0&&(r.stats.participacion_promedio=r.charts.participacion_por_minuto.reduce((l,c)=>l+c.participacion,0)/r.charts.participacion_por_minuto.length);const i=[...a.entries()].sort(([,l],[,c])=>c-l);return r.summary.fortalezas=i.slice(0,3).map(([l])=>{switch(l){case"preguntas_abiertas":return"Uso efectivo de preguntas abiertas para promover el pensamiento crítico";case"interrogacion_sucesiva":return"Buena secuencia de preguntas para profundizar la comprensión";case"ejemplos_contextualizados":return"Excelente uso de ejemplos contextualizados";case"feedback_inmediato":return"Retroalimentación inmediata y efectiva";default:return`Buen uso de ${l.replace(/_/g," ")}`}}),r.summary.mejoras=i.slice(-3).map(([l])=>{switch(l){case"preguntas_abiertas":return"Aumentar el uso de preguntas abiertas";case"interrogacion_sucesiva":return"Desarrollar más secuencias de preguntas";case"ejemplos_contextualizados":return"Incorporar más ejemplos contextualizados";case"feedback_inmediato":return"Proporcionar más retroalimentación inmediata";default:return`Incrementar el uso de ${l.replace(/_/g," ")}`}}),r.summary.recomendaciones=r.summary.mejoras.map(l=>l.includes("preguntas abiertas")?"Preparar 2-3 preguntas desafiantes por segmento de clase":l.includes("secuencias de preguntas")?'Implementar la técnica de "¿Por qué?" en cascada':l.includes("ejemplos contextualizados")?"Vincular cada concepto con situaciones de la vida real":"Establecer puntos de verificación cada 10-15 minutos"),r.stats.participacion_promedio<30&&r.alerts.push("Baja participación estudiantil detectada"),r.stats.min_explicacion>r.stats.min_interaccion*2&&r.alerts.push("Alto tiempo de explicación vs. interacción"),r}const gnt=({acompanamientos:e,ciclosOPR:t,standaloneCiclos:r})=>{const[a,n]=w.useState(null),[i,o]=w.useState(null),[l,c]=w.useState(!1),d=e.length,u=Object.values(t).reduce((y,N)=>y+N.length,0)+r.length,f=[...Object.values(t).flat(),...r],A=new Set([...e.map(y=>y.docente),...f.map(y=>y.docenteInfo)]).size,m=f.reduce((y,N)=>{const E=new Date(N.fecha).toLocaleDateString("es-ES",{month:"long"});return y[E]=(y[E]||0)+1,y},{}),g=f.reduce((y,N)=>(N.asignaturaInfo&&(y[N.asignaturaInfo]=(y[N.asignaturaInfo]||0)+1),y),{}),x=Object.entries(g).sort(([,y],[,N])=>N-y).slice(0,5);f.reduce((y,N)=>{if(!N.horaInicio||!N.horaTermino)return y;const E=new Date("2000/01/01 "+N.horaInicio),_=(new Date("2000/01/01 "+N.horaTermino).getTime()-E.getTime())/(1e3*60);return y+_},0)/f.length;const v=f.filter(y=>{var N,E,B;return((N=y.retroalimentacion)==null?void 0:N.exito)&&((E=y.retroalimentacion)==null?void 0:E.modelo)&&((B=y.retroalimentacion)==null?void 0:B.foco)}).length;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:s.jsx(Lo,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Acompañamientos"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d})]})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/50 rounded-lg",children:s.jsx(cd,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Ciclos OPR"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u})]})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:s.jsx(_i,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docentes Observados"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:A})]})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:s.jsx(dn,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Retroalimentación Completa"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:v})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(Ro,{className:"w-5 h-5 text-indigo-600"}),"Ciclos por Mes"]}),s.jsx("div",{className:"space-y-2",children:Object.entries(m).map(([y,N])=>s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 capitalize",children:y}),s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:N})]}),s.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-2 bg-indigo-600 dark:bg-indigo-500 rounded-full",style:{width:`${N/u*100}%`}})})]})},y))})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(X2,{className:"w-5 h-5 text-purple-600"}),"Análisis Inteligente"]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Seleccionar Ciclo OPR para Análisis"}),s.jsxs("select",{className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",value:(i==null?void 0:i.id)||"",onChange:y=>{const N=f.find(E=>E.id===y.target.value);o(N||null)},children:[s.jsx("option",{value:"",children:"Seleccione un ciclo..."}),f.map(y=>s.jsxs("option",{value:y.id,children:[y.docenteInfo," - ",new Date(y.fecha).toLocaleDateString()]},y.id))]})]}),i&&!a&&s.jsx("button",{onClick:async()=>{c(!0);try{const y=f.filter(E=>E.docenteInfo===i.docenteInfo&&E.id!==i.id),N=await pnt(i,y);n(N)}catch(y){console.error("Error al analizar ciclo:",y)}finally{c(!1)}},className:"w-full py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",disabled:l,children:l?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Analizando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(X2,{className:"w-4 h-4"}),"Analizar Ciclo"]})}),a&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-purple-700 dark:text-purple-300 mb-2",children:"Participación"}),s.jsxs("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[a.stats.participacion_promedio.toFixed(1),"%"]})]}),s.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2",children:"Interacción vs Explicación"}),s.jsxs("div",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:[a.stats.min_interaccion,"min / ",a.stats.min_explicacion,"min"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-medium text-green-700 dark:text-green-300 mb-2 flex items-center gap-1",children:[s.jsx(dn,{className:"w-4 h-4"})," Fortalezas"]}),s.jsx("ul",{className:"space-y-2",children:a.summary.fortalezas.map((y,N)=>s.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),y]},N))})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-medium text-amber-700 dark:text-amber-300 mb-2 flex items-center gap-1",children:[s.jsx(t1,{className:"w-4 h-4"})," Áreas de Mejora"]}),s.jsx("ul",{className:"space-y-2",children:a.summary.mejoras.map((y,N)=>s.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),y]},N))})]})]}),a.alerts.length>0&&s.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[s.jsxs("h4",{className:"text-sm font-medium text-red-700 dark:text-red-300 mb-2 flex items-center gap-1",children:[s.jsx(jc,{className:"w-4 h-4"})," Alertas"]}),s.jsx("ul",{className:"space-y-2",children:a.alerts.map((y,N)=>s.jsxs("li",{className:"text-sm text-red-600 dark:text-red-300 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),y]},N))})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2 flex items-center gap-1",children:[s.jsx(F5,{className:"w-4 h-4"})," Recomendaciones"]}),s.jsx("ul",{className:"space-y-2",children:a.summary.recomendaciones.map((y,N)=>s.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),y]},N))})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(Rs,{className:"w-5 h-5 text-amber-600"}),"Asignaturas Más Observadas"]}),s.jsx("div",{className:"space-y-2",children:x.map(([y,N])=>s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:y}),s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:N})]}),s.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-2 bg-amber-600 dark:bg-amber-500 rounded-full",style:{width:`${N/Math.max(...Object.values(g))*100}%`}})})]})},y))})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(F5,{className:"w-5 h-5 text-blue-600"}),"Últimos Ciclos OPR"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docente"}),s.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Fecha"}),s.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Asignatura"}),s.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estado"})]})}),s.jsx("tbody",{children:f.sort((y,N)=>new Date(N.fecha).getTime()-new Date(y.fecha).getTime()).slice(0,5).map(y=>{var N;return s.jsxs("tr",{className:"border-t dark:border-slate-700",children:[s.jsx("td",{className:"py-2 px-3 text-sm text-slate-900 dark:text-slate-300",children:y.docenteInfo}),s.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:new Date(y.fecha).toLocaleDateString()}),s.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:y.asignaturaInfo}),s.jsx("td",{className:"py-2 px-3",children:(N=y.retroalimentacion)!=null&&N.exito?s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[s.jsx(dn,{className:"w-3 h-3"})," Completado"]}):s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded",children:[s.jsx(t1,{className:"w-3 h-3"})," En proceso"]})})]},y.id)})})]})})]})]})},Dfe=a4(),dy="acompanamientos",gf="ciclos_opr",xf=e=>{if(!e)return new Date().toISOString().split("T")[0];if(typeof e=="string")return e.includes("T")?e.split("T")[0]:e;if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString().split("T")[0];try{return new Date(e).toISOString().split("T")[0]}catch{return new Date().toISOString().split("T")[0]}},Ffe=e=>{const t=e.lastIndexOf("."),r=t>0?e.substring(0,t):e,a=t>0?e.substring(t):"";return r.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").substring(0,50)+a.toLowerCase()},xnt=(e,t,r)=>{const a=(e||"general").replace(/[^a-zA-Z0-9-]/g,"_"),n=(t||"temp").replace(/[^a-zA-Z0-9-]/g,"_"),i=Ffe(r);return`videos_opr/${a}/${n}/${i}`},vnt=async(e,t,r)=>{try{if(!eN.currentUser)throw new Error("Usuario no autenticado. Por favor, inicia sesión nuevamente.");if(!e)throw new Error("No se proporcionó un archivo válido.");const a=["video/mp4","video/quicktime","video/x-msvideo","video/x-m4v"],n=500*1024*1024;if(e.size>n)throw new Error(`El archivo es demasiado grande. Máximo permitido: ${(n/1024/1024).toFixed(0)}MB`);if(!a.includes(e.type))throw new Error("Tipo de archivo no permitido. Solo se aceptan MP4, MOV, AVI o M4V.");let i="";const o=(t||"").split("/");if(o.length>=4&&o[0]==="videos_opr"){const u=o[1],f=o[2],A=o.slice(3).join("/");i=xnt(u,f,A)}else{const u=Date.now(),f=Ffe(e.name);i=`videos_opr/general/${u}_${f}`}const l=vu(Dfe,i),c={contentType:e.type,cacheControl:"public, max-age=31536000",customMetadata:{originalName:e.name,uploadedBy:eN.currentUser.uid,uploadDate:new Date().toISOString(),fileSize:String(e.size)}},d=K8(l,e,c);return new Promise((u,f)=>{let A=-1;d.on("state_changed",m=>{const g=m.bytesTransferred/m.totalBytes*100,x=Math.floor(g);r&&x!==A&&(A=x,r(x))},m=>{let g="Error desconocido durante la subida.";switch(m==null?void 0:m.code){case"storage/unauthorized":g="No tienes permisos para subir archivos. Verifica las reglas de Firebase Storage.";break;case"storage/canceled":g="La subida fue cancelada por el usuario.";break;case"storage/quota-exceeded":g="Se agotó el espacio de almacenamiento disponible.";break;case"storage/retry-limit-exceeded":g="Se agotaron los reintentos. Verifica tu conexión a internet.";break;default:m!=null&&m.message&&(g=m.message);break}f(new Error(g))},async()=>{try{const m=await gA(d.snapshot.ref);u(m)}catch{f(new Error("El archivo se subió, pero no se pudo obtener la URL de descarga."))}})})}catch(a){const n=(a==null?void 0:a.message)||"Error inesperado al procesar el archivo.";throw new Error(n)}},dU=async e=>{try{const t=vu(Dfe,e),{items:r,prefixes:a}=await kae(t);await Promise.all(r.map(n=>r4(n))),await Promise.all(a.map(n=>dU(n.fullPath)))}catch{}},bnt=async()=>{try{const e=jt(ut(st,dy),Gt("fecha","desc"));return(await Nr(e)).docs.map(a=>{const n=a.data();return{id:a.id,...n,fecha:xf(n==null?void 0:n.fecha)}}).sort((a,n)=>a.fecha<n.fecha?1:a.fecha>n.fecha?-1:0)}catch{throw new Error("No se pudieron cargar los acompañamientos")}},ynt=async e=>{var t,r;try{const a=e.docenteEmailLower||((r=(t=eN.currentUser)==null?void 0:t.email)==null?void 0:r.toLowerCase())||void 0,n={...e,docenteEmailLower:a,fecha:dr.fromDate(new Date(e.fecha)),fechaCreacion:dr.now()},i=await Kr(ut(st,dy),n);return{...e,id:i.id,fecha:xf(e.fecha)}}catch{throw new Error("No se pudo crear el acompañamiento")}},cY=async(e,t)=>{try{const r={...t,...t.fecha?{fecha:dr.fromDate(new Date(t.fecha))}:{},fechaModificacion:dr.now()};await zi($t(st,dy,e),r)}catch{throw new Error("No se pudo actualizar el acompañamiento")}},wnt=async e=>{try{const t=jt(ut(st,gf),Kt("acompanamientoId","==",e)),r=await Nr(t),a=wp(st);r.forEach(n=>a.delete($t(st,gf,n.id))),await a.commit(),await dU(`videos_opr/${e}`),await Ua($t(st,dy,e))}catch{throw new Error("No se pudo eliminar el acompañamiento y sus datos asociados")}},dY=async e=>{var t;try{if(!(e!=null&&e.fecha))throw new Error("Falta fecha al crear ciclo OPR.");const r={...e,acompanamientoId:String(e.acompanamientoId||""),fecha:dr.fromDate(new Date(e.fecha)),fechaCreacion:dr.now(),...e.docenteEmailLower?{docenteEmailLower:e.docenteEmailLower}:{}};(t=e==null?void 0:e.seguimiento)!=null&&t.fecha&&(r.seguimiento={...e.seguimiento,fecha:dr.fromDate(new Date(e.seguimiento.fecha))});const a=await Kr(ut(st,gf),r);return{...e,id:a.id,acompanamientoId:String(e.acompanamientoId||""),fecha:xf(e.fecha)}}catch{throw new Error("No se pudo crear el ciclo OPR")}},Nnt=async(e,t)=>{var r;try{const a={...t};t.fecha&&(a.fecha=dr.fromDate(new Date(t.fecha))),(r=t.seguimiento)!=null&&r.fecha&&(a.seguimiento={...t.seguimiento,fecha:dr.fromDate(new Date(t.seguimiento.fecha))}),a.fechaModificacion=dr.now(),await zi($t(st,gf,e),a)}catch{throw new Error("No se pudo actualizar el ciclo OPR")}},_P=async e=>{try{const t=jt(ut(st,gf),Kt("acompanamientoId","==",e),Gt("fecha","desc"));return(await Nr(t)).docs.map(n=>{var l;const i=n.data(),o={id:n.id,...i,fecha:xf(i==null?void 0:i.fecha)};return(l=i==null?void 0:i.seguimiento)!=null&&l.fecha&&(o.seguimiento={...i.seguimiento,fecha:xf(i.seguimiento.fecha)}),o})}catch{throw new Error("No se pudieron cargar los ciclos OPR. Revisa el índice compuesto (acompanamientoId + fecha).")}},Pfe=async()=>{try{const e=jt(ut(st,gf),Kt("acompanamientoId","==",""),Gt("fecha","desc"));return(await Nr(e)).docs.map(a=>{var o;const n=a.data(),i={id:a.id,...n,fecha:xf(n==null?void 0:n.fecha)};return(o=n==null?void 0:n.seguimiento)!=null&&o.fecha&&(i.seguimiento={...n.seguimiento,fecha:xf(n.seguimiento.fecha)}),i})}catch(e){throw console.error("Error fetching standalone OPR cycles:",e),new Error("No se pudieron cargar los ciclos OPR independientes.")}},Ent=(e,t,r)=>{const a=jt(ut(st,gf),Kt("acompanamientoId","==",e),Gt("fecha","desc"));return rr(a,n=>{const i=n.docs.map(o=>{var d;const l=o.data(),c={id:o.id,...l,fecha:xf(l==null?void 0:l.fecha)};return(d=l==null?void 0:l.seguimiento)!=null&&d.fecha&&(c.seguimiento={...l.seguimiento,fecha:xf(l.seguimiento.fecha)}),c});t(i)},n=>r==null?void 0:r(n))},TP=async e=>{try{const t=await tA($t(st,gf,e));if(!t.exists())return;const r=t.data(),a=(r==null?void 0:r.acompanamientoId)||"general";await dU(`videos_opr/${a}/${e}`),await Ua($t(st,gf,e))}catch{throw new Error("No se pudo eliminar el ciclo OPR")}},Cnt=async e=>{const t=e.id;if(!t)return{updated:0,total:0};const r=jt(ut(st,gf),Kt("acompanamientoId","==",t)),a=await Nr(r);if(a.empty)return{updated:0,total:0};const n=wp(st);let i=0;return a.forEach(o=>{const l=o.data(),c={};!l.docenteEmailLower&&e.docenteEmailLower&&(c.docenteEmailLower=e.docenteEmailLower),!l.docenteInfo&&e.docente&&(c.docenteInfo=e.docente),!l.docente&&e.docente&&(c.docente=e.docente),!l.cursoInfo&&e.curso&&(c.cursoInfo=e.curso),!l.asignaturaInfo&&e.asignatura&&(c.asignaturaInfo=e.asignatura),Object.keys(c).length>0&&(i++,n.update($t(st,gf,o.id),c))}),i>0&&await n.commit(),{updated:i,total:a.size}},uY=async e=>{try{const t=jt(ut(st,dy),Kt("docente","==",e),Gt("fecha","desc"));return(await Nr(t)).docs.map(a=>{const n=a.data();return{id:a.id,...n,fecha:xf(n==null?void 0:n.fecha)}})}catch{throw new Error("No se pudieron cargar los acompañamientos del docente")}},jnt=async e=>{try{const t=jt(ut(st,dy),Kt("docenteEmailLower","==",e),Gt("fecha","desc"));return(await Nr(t)).docs.map(a=>{const n=a.data();return{id:a.id,...n,fecha:xf(n==null?void 0:n.fecha)}})}catch{throw new Error("No se pudieron cargar los acompañamientos del docente")}},knt=async e=>{try{const t=jt(ut(st,"rubricas_personalizadas"),Kt("docente","==",e)),r=await Nr(t);if(r.empty)return null;const a=r.docs[0].data();return(a==null?void 0:a.rubrica)??null}catch{return null}},Snt=async()=>await Mx(),_nt=({label:e,onFileChange:t,onLinkChange:r,uploadedUrl:a,onRemove:n,isUploading:i,accept:o="video/mp4,video/quicktime,video/avi,video/mov",error:l,progress:c=0,allowLink:d=!1})=>{const[u,f]=w.useState(!1),[A,m]=w.useState(!1),[g,x]=w.useState(""),v=`file-upload-${e.replace(/\s+/g,"-")}`,y=j=>{j.preventDefault(),j.stopPropagation(),j.type==="dragenter"||j.type==="dragover"?f(!0):j.type==="dragleave"&&f(!1)},N=j=>{if(j.preventDefault(),j.stopPropagation(),f(!1),j.dataTransfer.files&&j.dataTransfer.files[0]&&!i){const k=j.dataTransfer.files[0];B(k)}},E=j=>{if(j.target.files&&j.target.files[0]&&!i){const k=j.target.files[0];B(k)}},B=j=>{if(j.size>524288e3){alert(`El archivo es demasiado grande. Tamaño máximo: ${524288e3/1024/1024}MB`);return}if(!["video/mp4","video/quicktime","video/avi","video/mov"].includes(j.type)){alert("Solo se aceptan archivos de video (MP4, MOV, AVI, QuickTime)");return}t(j)},_=()=>l?"bg-red-500":c===100?"bg-green-500":"bg-blue-500",I=()=>{if(!(!g||!r)){if(!g.startsWith("http://")&&!g.startsWith("https://")){alert("Por favor ingresa una URL válida que comience con http:// o https://");return}r(g),m(!1),x("")}};return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300",children:e}),d&&!a&&!i&&s.jsx("button",{type:"button",onClick:()=>m(!A),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400",children:A?"Cancelar":"Insertar enlace"})]}),A&&s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx("input",{type:"url",value:g,onChange:j=>x(j.target.value),placeholder:"https://...",className:"flex-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Guardar"})]}),a?s.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[s.jsx(dn,{className:"w-5 h-5 text-green-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline font-medium",children:a.startsWith("http")?"Ver video enlazado":"Ver video cargado"}),s.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:a.startsWith("http")?"Enlace guardado exitosamente":"Video subido exitosamente"})]}),s.jsx("button",{type:"button",onClick:n,className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar video",children:s.jsx(Ia,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:`relative border-2 border-dashed rounded-lg transition-colors ${u?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":i?"border-amber-400 bg-amber-50 dark:bg-amber-900/20":l?"border-red-400 bg-red-50 dark:bg-red-900/20":"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"} ${i?"cursor-not-allowed":"cursor-pointer"}`,onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:N,onClick:()=>{var j;return!i&&((j=document.getElementById(v))==null?void 0:j.click())},children:[s.jsx("div",{className:"flex flex-col items-center justify-center p-6",children:i?s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:"Subiendo video..."}),s.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[c.toFixed(1),"% completado"]})]}):l?s.jsxs("div",{className:"text-center",children:[s.jsx(jc,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Error al subir"}),s.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Haz clic para intentar nuevamente"})]}):s.jsxs("div",{className:"text-center",children:[s.jsx(kx,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:"Arrastra un video aquí"}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"o haz clic para seleccionar"}),s.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-2",children:"MP4, MOV, AVI (máx. 500MB)"})]})}),s.jsx("input",{id:v,type:"file",onChange:E,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:i,accept:o,style:{display:"none"}})]}),i&&s.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:s.jsx("div",{className:`${_()} h-2 rounded-full transition-all duration-300`,style:{width:`${c}%`}})}),l&&s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[s.jsx(jc,{className:"w-4 h-4 text-red-500"}),s.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:l})]})]})]})},Tnt=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:a,profesores:n})=>{const[i,o]=w.useState(!1),[l,c]=w.useState({}),[d,u]=w.useState({}),[f,A]=w.useState({}),[m,g]=w.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),x=w.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",foco:"",elementosIdentificar:""},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:m.curso||"",profesor:m.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:""}),[e,m]),[v,y]=w.useState(t||x);w.useEffect(()=>{t&&(y(t),(t.acompanamientoId===""||!t.acompanamientoId)&&g({docente:t.docenteInfo||"",curso:t.cursoInfo||"",asignatura:t.asignaturaInfo||""}))},[t]);const N=S=>{const{name:M,value:H}=S.target,K=M.split(".");K.length>1?y(Q=>{const G=JSON.parse(JSON.stringify(Q));let X=G;for(let Z=0;Z<K.length-1;Z++)X=X[K[Z]];return X[K[K.length-1]]=H,G}):y(Q=>({...Q,[M]:H}))},E=(S,M,H)=>{y(K=>({...K,detallesObservacion:K.detallesObservacion.map(Q=>Q.id===S?{...Q,[M]:H}:Q)}))},B=()=>{const S=v.detallesObservacion[v.detallesObservacion.length-1],M=S&&parseInt(S.minuto.split("-")[1],10)||0,H=`${M+1}-${M+5}`;y(K=>({...K,detallesObservacion:[...K.detallesObservacion,{id:`row_${Date.now()}`,minuto:H,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},_=S=>{y(M=>({...M,detallesObservacion:M.detallesObservacion.filter(H=>H.id!==S)}))},I=async(S,M)=>{A(H=>({...H,[S]:null})),c(H=>({...H,[S]:!0})),u(H=>({...H,[S]:0}));try{const H=Date.now(),K=M.name.toLowerCase().replace(/[^a-z0-9.]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),Q=e.id&&!e.id.startsWith("temp-")?e.id.replace(/[^a-zA-Z0-9-]/g,"_"):"general",G=v.id?v.id.replace(/[^a-zA-Z0-9-]/g,"_"):"temp",X=`videos_opr/${Q}/${G}/${H}_${K}`,Z=await vnt(M,X,U=>{u(Y=>({...Y,[S]:U}))});j(S,Z),u(U=>({...U,[S]:100}))}catch(H){const K=(H==null?void 0:H.message)||"Error desconocido al subir el archivo";A(Q=>({...Q,[S]:K})),alert(`Error al subir el video: ${K}`)}finally{c(H=>({...H,[S]:!1})),setTimeout(()=>{u(H=>({...H,[S]:0}))},2e3)}},j=(S,M)=>{const H=S.split(".");H.length>1?y(K=>{const Q=JSON.parse(JSON.stringify(K));let G=Q;for(let X=0;X<H.length-1;X++)G=G[H[X]];return G[H[H.length-1]]=M,Q}):y(K=>({...K,[S]:M}))},k=S=>{const M=S.split(".");M.length>1?y(H=>{const K=JSON.parse(JSON.stringify(H));let Q=K;for(let G=0;G<M.length-1;G++)Q=Q[M[G]];return Q[M[M.length-1]]="",K}):y(H=>({...H,[S]:""})),A(H=>({...H,[S]:null})),u(H=>({...H,[S]:0}))},T=async()=>{o(!0);try{const S=ln.currentUser;if(!S){alert("No se pudo obtener el token de autenticación. Inicia sesión nuevamente."),o(!1);return}const M=await S.getIdToken(),H=await fetch("/api/mejorarTextoOPR",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${M}`},body:JSON.stringify({formData:v})});if(!H.ok){const Q=await H.json();throw new Error(Q.error||"Error al mejorar el texto con IA")}const{retroalimentacion:K}=await H.json();y(Q=>({...Q,retroalimentacion:{...Q.retroalimentacion,...K}})),alert("Textos mejorados exitosamente con IA")}catch(S){console.error(S),alert(S.message||"No se pudo mejorar la redacción. Intenta nuevamente.")}finally{o(!1)}},L=()=>{const S=new xr,M=S.internal.pageSize.getWidth(),H=S.internal.pageSize.getHeight(),K=15,Q="https://res.cloudinary.com/dwncmu1wu/image/upload/v1753209432/LIR_fpq2lc.png",G=15,X=15;let Z=25;const U=()=>{const re="Liceo Industrial de Recoleta";S.setFontSize(8),S.setFont("helvetica","normal"),S.text(re,M/2,H-10,{align:"center"}),S.setFontSize(10),S.setFont("helvetica","normal");const de=H-25;S.line(K,de,K+70,de),S.text("Firma Docente",K+15,de+5),S.line(M-K-70,de,M-K,de),S.text("Firma Observador",M-K-55,de+5)},Y=()=>{try{S.addImage(Q,"PNG",M-X-10,10,X,G)}catch(re){console.error("Error al cargar el logo:",re)}};Y();const P=S.addPage;S.addPage=function(){return P.apply(this,arguments),Y(),U(),this};const D=re=>{Z>240&&(S.addPage(),Z=25),S.setFontSize(14),S.setFont("helvetica","bold"),S.text(re,K,Z),Z+=12};S.setFontSize(18),S.setFont("helvetica","bold"),S.text("Informe de Ciclo OPR",M/2,Z,{align:"center"}),Z+=18,D("1. Datos Generales");const W=[["Docente:",m.docente],["Curso:",m.curso],["Asignatura:",m.asignatura],["Fecha:",new Date(v.fecha).toLocaleDateString("es-CL")],["Hora:",`${v.horaInicio} - ${v.horaTermino}`],["Ciclo:",v.nombreCiclo]];ji(S,{body:W,startY:Z,theme:"plain",styles:{fontSize:10,cellPadding:3,lineWidth:.1,lineColor:[220,220,220]},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:K,right:K}}),Z=S.lastAutoTable.finalY+15,D("2. Registro Detallado de Observación");const J=v.detallesObservacion.map(re=>[re.minuto,re.accionesDocente,re.accionesEstudiantes,re.actividades]);ji(S,{head:[["Minuto","Acciones del Docente","Acciones de Estudiantes","Actividades"]],body:J,startY:Z,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255,fontSize:10,cellPadding:4,halign:"center"},styles:{fontSize:9,cellPadding:4,overflow:"linebreak",lineWidth:.1},columnStyles:{0:{cellWidth:15,halign:"center"},1:{cellWidth:"auto"},2:{cellWidth:"auto"},3:{cellWidth:"auto"}},margin:{left:K,right:K},didDrawPage:re=>{var de;Z=((de=re.cursor)==null?void 0:de.y)||25}}),Z=S.lastAutoTable.finalY+15,D("3. Retroalimentación Docente");const ce=[];if(v.retroalimentacion.exito&&ce.push(["Éxito:",v.retroalimentacion.exito]),v.retroalimentacion.modelo&&ce.push(["Modelo:",v.retroalimentacion.modelo]),v.retroalimentacion.foco&&ce.push(["Foco:",v.retroalimentacion.foco]),v.retroalimentacion.elementosIdentificar&&ce.push(["Elementos a Identificar:",v.retroalimentacion.elementosIdentificar]),ce.length>0&&(ji(S,{body:ce,startY:Z,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:40},1:{cellWidth:"auto"}},margin:{left:K,right:K}}),Z=S.lastAutoTable.finalY+10),v.retroalimentacion.brecha){Z>240&&(S.addPage(),Z=40),S.setFontSize(12),S.setFont("helvetica","bold"),S.text("Análisis de Brecha",K,Z),Z+=8;const re=[],de=v.retroalimentacion.brecha.minutoInicial,oe=v.retroalimentacion.brecha.minutoFinal;de&&oe&&re.push(["Minutos:",`${de} a ${oe}`]),v.retroalimentacion.brecha.preguntas&&re.push(["Preguntas:",v.retroalimentacion.brecha.preguntas]),v.retroalimentacion.brecha.indicadores&&re.push(["Indicadores:",v.retroalimentacion.brecha.indicadores]),re.length>0&&(ji(S,{body:re,startY:Z,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:K+5,right:K}}),Z=S.lastAutoTable.finalY+10)}D("4. Planificación de Práctica");const ie=[];v.planificacion.preparacion&&ie.push(["Preparación:",v.planificacion.preparacion]),v.planificacion.objetivo&&ie.push(["Objetivo:",v.planificacion.objetivo]),v.planificacion.actividad&&ie.push(["Actividad:",v.planificacion.actividad]),v.planificacion.tiempo&&ie.push(["Tiempo:",v.planificacion.tiempo]),ie.length>0&&(ji(S,{body:ie,startY:Z,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:K,right:K}}),Z=S.lastAutoTable.finalY+10),U(),S.save(`Informe_OPR_${m.docente}_${v.fecha}.pdf`)},F=async S=>{if(S.preventDefault(),!m.docente||!m.curso||!m.asignatura){alert("Por favor, complete Docente, Curso y Asignatura");return}if(!v.nombreCiclo||!v.fecha){alert("Por favor, complete el nombre del ciclo y la fecha");return}const M={...v,docenteInfo:m.docente,cursoInfo:m.curso,asignaturaInfo:m.asignatura,seguimiento:{...v.seguimiento,profesor:m.docente,curso:m.curso}};try{await r(M)}catch(H){console.error("Error al guardar ciclo OPR:",H),alert("Error al guardar el ciclo OPR. Intenta nuevamente.")}};return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&s.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[s.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Básicos del Ciclo OPR"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),s.jsxs("select",{value:m.docente,onChange:S=>g(M=>({...M,docente:S.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[s.jsx("option",{value:"",children:"Seleccione un docente"}),n.map(S=>s.jsx("option",{value:S,children:S},S))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),s.jsxs("select",{value:m.curso,onChange:S=>g(M=>({...M,curso:S.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[s.jsx("option",{value:"",children:"Seleccione un curso"}),on.map(S=>s.jsx("option",{value:S,children:S},S))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),s.jsxs("select",{value:m.asignatura,onChange:S=>g(M=>({...M,asignatura:S.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[s.jsx("option",{value:"",children:"Seleccione una asignatura"}),cn.map(S=>s.jsx("option",{value:S,children:S},S))]})]})]})]}),s.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[s.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Asistente IA del Ciclo OPR"}),s.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[s.jsxs("button",{type:"button",onClick:T,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:i,children:[s.jsx(o4,{className:"w-4 h-4"}),i?"Mejorando redacción...":"Mejorar Redacción del Ciclo"]}),s.jsxs("button",{type:"button",onClick:L,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[s.jsx(pf,{className:"w-4 h-4"}),"Descargar Informe PDF"]})]}),s.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Usa la IA para mejorar la redacción de los textos ya escritos. Luego, descarga el informe completo en PDF."})]}),s.jsxs("form",{onSubmit:F,className:"space-y-8",children:[s.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),s.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[s.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[s.jsx(cd,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("input",{type:"text",name:"nombreCiclo",value:v.nombreCiclo,onChange:N,placeholder:"Nombre o N° del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),s.jsx("input",{type:"date",name:"fecha",value:v.fecha,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),s.jsx("input",{type:"number",name:"registroN",value:v.registroN,onChange:N,placeholder:"Registro de Observación N°",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",min:1}),s.jsx("input",{type:"time",name:"horaInicio",value:v.horaInicio,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("input",{type:"time",name:"horaTermino",value:v.horaTermino,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsx(_nt,{label:"Video de observación de clase",onFileChange:S=>I("videoObservacionUrl",S),onLinkChange:S=>j("videoObservacionUrl",S),uploadedUrl:v.videoObservacionUrl,onRemove:()=>k("videoObservacionUrl"),isUploading:!!l.videoObservacionUrl,error:f.videoObservacionUrl,progress:d.videoObservacionUrl||0,allowLink:!0})]}),s.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[s.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[s.jsx(rA,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observación"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b dark:border-slate-600",children:[s.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Minuto"}),s.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones del Docente"}),s.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones de Estudiantes"}),s.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Actividades"}),s.jsx("th",{className:"p-2"})]})}),s.jsx("tbody",{children:v.detallesObservacion.map(S=>s.jsxs("tr",{className:"border-b dark:border-slate-700",children:[s.jsx("td",{className:"p-2",children:s.jsx("input",{type:"text",value:S.minuto,onChange:M=>E(S.id,"minuto",M.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"0-5"})}),s.jsx("td",{className:"p-2",children:s.jsx("textarea",{value:S.accionesDocente,onChange:M=>E(S.id,"accionesDocente",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones del docente..."})}),s.jsx("td",{className:"p-2",children:s.jsx("textarea",{value:S.accionesEstudiantes,onChange:M=>E(S.id,"accionesEstudiantes",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones de estudiantes..."})}),s.jsx("td",{className:"p-2",children:s.jsx("textarea",{value:S.actividades,onChange:M=>E(S.id,"actividades",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir actividades realizadas..."})}),s.jsx("td",{className:"p-2",children:v.detallesObservacion.length>1&&s.jsx("button",{type:"button",onClick:()=>_(S.id),className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar fila",children:s.jsx(Ia,{className:"w-4 h-4"})})})]},S.id))})]})}),s.jsxs("button",{type:"button",onClick:B,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 flex items-center gap-1 transition-colors",children:[s.jsx(WD,{className:"w-4 h-4"})," Agregar Fila"]})]}),s.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[s.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[s.jsx(Q1,{className:"w-5 h-5 text-green-600"})," Retroalimentación Docente"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Éxito"}),s.jsx("textarea",{name:"retroalimentacion.exito",value:v.retroalimentacion.exito,onChange:N,placeholder:"Describir los aspectos exitosos observados en la clase...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Modelo"}),s.jsx("textarea",{name:"retroalimentacion.modelo",value:v.retroalimentacion.modelo,onChange:N,placeholder:"Modelo pedagógico o metodología observada...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Foco"}),s.jsx("textarea",{name:"retroalimentacion.foco",value:v.retroalimentacion.foco,onChange:N,placeholder:"Foco principal de la observación y retroalimentación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Elementos a Identificar"}),s.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:v.retroalimentacion.elementosIdentificar,onChange:N,placeholder:"Elementos específicos que el docente debe identificar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),s.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[s.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[s.jsx(J8,{className:"w-5 h-5 text-purple-600"})," Planificación de Práctica y Seguimiento"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Preparación"}),s.jsx("textarea",{name:"planificacion.preparacion",value:v.planificacion.preparacion,onChange:N,placeholder:"Aspectos de preparación para la próxima práctica...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Objetivo"}),s.jsx("textarea",{name:"planificacion.objetivo",value:v.planificacion.objetivo,onChange:N,placeholder:"Objetivo específico para la siguiente observación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Actividad"}),s.jsx("textarea",{name:"planificacion.actividad",value:v.planificacion.actividad,onChange:N,placeholder:"Actividades específicas a implementar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tiempo"}),s.jsx("input",{type:"text",name:"planificacion.tiempo",value:v.planificacion.tiempo,onChange:N,placeholder:"Tiempo estimado o cronograma...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),s.jsxs("div",{className:"p-4 border rounded-md dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 space-y-3",children:[s.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[s.jsx(_i,{className:"w-4 h-4 text-purple-500"}),"Seguimiento"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de seguimiento"}),s.jsx("input",{type:"date",name:"seguimiento.fecha",value:v.seguimiento.fecha,onChange:N,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Registrado por"}),s.jsx("input",{type:"text",name:"seguimiento.firma",value:v.seguimiento.firma,onChange:N,placeholder:"Nombre de quien registra el seguimiento...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t dark:border-slate-700",children:[s.jsx("button",{type:"button",onClick:a,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),s.jsxs("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-amber-400 transition-colors flex items-center gap-2",disabled:Object.values(l).some(Boolean),children:[Object.values(l).some(Boolean)&&s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardar Ciclo OPR"]})]})]})]})},Bnt=()=>{const[e,t]=w.useState([]),[r,a]=w.useState([]),[n,i]=w.useState({}),[o,l]=w.useState(!0),[c,d]=w.useState(!0),[u,f]=w.useState(null),[A,m]=w.useState("list"),[g,x]=w.useState(null),[v,y]=w.useState(null),[N,E]=w.useState("general"),[B,_]=w.useState(!1),[I,j]=w.useState({}),[k,T]=w.useState([]),L=h2,F=w.useMemo(()=>({fecha:new Date().toISOString().split("T")[0],docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[S,M]=w.useState(F),H=w.useCallback(async()=>{l(!0),f(null);try{const re=await bnt();t(re)}catch(re){f("No se pudieron cargar los registros de acompañamiento."),console.error("❌ Error al cargar acompañamientos:",re)}finally{l(!1)}},[]),K=w.useCallback(async()=>{d(!0);try{const de=(await Snt()).filter(q=>q.profile==="PROFESORADO").map(q=>({nombre:q.nombreCompleto,email:(q.email||"").toLowerCase()})),oe=de.map(q=>q.nombre).sort(),be={};de.forEach(q=>{q.nombre&&q.email&&(be[q.nombre]=q.email)}),a(oe),i(be)}catch(re){f("No se pudo cargar la lista de profesores."),console.error("❌ Error al cargar profesores:",re)}finally{d(!1)}},[]),Q=w.useCallback(async()=>{try{const re={};for(const de of e)if(de.id)try{const oe=await _P(de.id);oe.length>0&&(re[de.id]=oe)}catch(oe){console.error(`Error loading OPR cycles for ${de.id}:`,oe)}try{const de=await Pfe();T(de)}catch(de){console.error("Error loading standalone OPR cycles:",de),T([])}j(re)}catch(re){console.error("Error fetching OPR cycles:",re)}},[e]);w.useEffect(()=>{H(),K()},[H,K]),w.useEffect(()=>{e.length>0&&Q()},[e,Q]);const G=(re,de)=>{if(y(re),de)M(de),x(de.id);else{const oe={id:"temp-"+Date.now(),fecha:re.fecha,docente:re.docenteInfo||"",curso:re.cursoInfo||"",asignatura:re.asignaturaInfo||"",rubricaResultados:{},planificacionFutura:"",createdAt:new Date().toISOString(),observacionesGenerales:"",retroalimentacionConsolidada:""};M(oe),x(null)}m("form"),E("opr"),f(null)},X=async()=>{if(!("docente"in S)||!S.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar la retroalimentación.');return}_(!0),f(null);try{const re=ln.currentUser;if(!re){alert("No se pudo obtener el token de autenticación. Inicia sesión nuevamente."),_(!1);return}const de=await re.getIdToken(),oe=await fetch("/api/generarFeedbackAcompanamientoDocente",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${de}`},body:JSON.stringify({formData:S})});if(!oe.ok)throw new Error("Error al generar la retroalimentación con IA");const{feedback:be}=await oe.json();M(q=>({...q,retroalimentacionConsolidada:be})),alert("Retroalimentación generada exitosamente con IA.")}catch{f("No se pudo generar la retroalimentación automática."),alert("Error: No se pudo generar la retroalimentación automática.")}finally{_(!1)}},Z=async re=>{var de;if(re.preventDefault(),!("docente"in S)||!S.docente||!S.curso||!S.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}f(null);try{const oe=(de=n[S.docente])==null?void 0:de.toLowerCase();if(g)await cY(g,{...S,docenteEmailLower:oe}),alert("¡Acompañamiento actualizado correctamente!");else{const be=await ynt({...S,docenteEmailLower:oe});x(be.id),M(be),alert("¡Acompañamiento guardado correctamente! Ahora puedes agregar Ciclos OPR.")}await H()}catch(oe){const be=(oe==null?void 0:oe.message)??"Error al guardar el registro de acompañamiento.";f(be),console.error("❌ Error al guardar:",oe),alert(`Error: ${be}`)}},U=()=>{M(F),x(null),y(null),m("form"),E("general"),f(null)},Y=re=>{M(re),x(re.id),y(null),m("form"),E("general"),f(null)},P=async re=>{if(window.confirm("¿Está seguro de que desea eliminar este registro? Esta acción no se puede deshacer."))try{await wnt(re),await H(),alert("Registro eliminado exitosamente.")}catch(de){const oe="No se pudo eliminar el registro.";f(oe),console.error("❌ Error al eliminar:",de),alert(`Error: ${oe}`)}},D=(re,de)=>{M(oe=>({...oe,rubricaResultados:{...oe.rubricaResultados||{},[re]:de}}))},W=()=>{var re;if(!("docente"in S)||!S.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar el PDF.');return}try{const de=new xr,oe=de.internal.pageSize.getWidth(),be=de.internal.pageSize.getHeight(),q=20,we=oe-q*2,Te=(ve,le)=>le+ve>be-q,Ee=()=>{const ve=de.getNumberOfPages();for(let le=1;le<=ve;le++)de.setPage(le),de.setFontSize(9),de.setTextColor(128),de.text(`pág. ${le} de ${ve}`,oe-q,be-10,{align:"right"})};let ue=q;de.setFontSize(16),de.setFont("helvetica","bold"),de.text("INFORME DE ACOMPAÑAMIENTO DOCENTE",oe/2,ue,{align:"center"}),ue+=15;const ge=40;if(ji(de,{startY:ue,head:[],body:[["Docente:",S.docente],["Curso:",S.curso],["Asignatura:",S.asignatura],["Fecha:",new Date(S.fecha).toLocaleDateString("es-CL")],["Bloques:",S.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:4},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:120}},margin:{left:q,right:q}}),ue=de.lastAutoTable.finalY+10,Object.keys(S.rubricaResultados||{}).length>0){de.setFontSize(14),de.setFont("helvetica","bold"),de.text("Evaluación por Indicadores",q,ue),ue+=10;const ve=Object.entries(S.rubricaResultados).map(([le,ne])=>{let Ae;switch(ne){case 1:Ae="Débil";break;case 2:Ae="Incipiente";break;case 3:Ae="Satisfactorio";break;case 4:Ae="Avanzado";break;default:Ae="No evaluado"}return[le,Ae,ne]});ji(de,{startY:ue,head:[["Indicador","Nivel de Logro","Puntuación"]],body:ve,theme:"grid",styles:{fontSize:10,cellPadding:6,lineColor:[200,200,200],lineWidth:.1,valign:"middle"},headStyles:{fillColor:[41,128,185],textColor:255,fontSize:11,fontStyle:"bold",halign:"left"},columnStyles:{0:{cellWidth:100},1:{cellWidth:40},2:{cellWidth:30,halign:"center"}},alternateRowStyles:{fillColor:[245,247,250]},margin:{left:q,right:q}})}de.addPage(),ue=q,de.setFontSize(14),de.setFont("helvetica","bold"),de.text("Observaciones Generales y Sugerencias de Mejora",q,ue),ue+=15,S.observacionesGenerales&&(de.setFontSize(12),de.setFont("helvetica","bold"),de.text("Fortalezas:",q,ue),ue+=10,de.setFont("helvetica","normal"),de.setFontSize(11),de.splitTextToSize(S.observacionesGenerales,we).forEach(le=>{Te(7,ue)&&(de.addPage(),ue=q),de.text(le,q,ue,{align:"justify"}),ue+=7}),ue+=10),S.retroalimentacionConsolidada&&(Te(50,ue)&&(de.addPage(),ue=q),de.setFontSize(12),de.setFont("helvetica","bold"),de.text("Sugerencias de mejora:",q,ue),ue+=10,de.setFont("helvetica","normal"),de.setFontSize(11),de.splitTextToSize(S.retroalimentacionConsolidada,we).forEach(le=>{Te(7,ue)&&(de.addPage(),ue=q),de.text(le,q,ue,{align:"justify"}),ue+=7})),Ee();const he=`Informe_Acompanamiento_${(re=S.docente)==null?void 0:re.replace(/\s+/g,"_")}_${S.curso}_${new Date().toISOString().split("T")[0]}.pdf`;de.save(he)}catch(de){console.error("❌ Error al generar PDF:",de),alert("Error al generar el PDF. Intenta nuevamente.")}},J=re=>{const{name:de,value:oe}=re.target;M(be=>({...be,[de]:oe}))},ce=()=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Módulo de Acompañamiento Docente"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:async()=>{var re;try{const de=e.filter(be=>be.id);let oe=0;for(const be of de){const q=(re=n[be.docente||""])==null?void 0:re.toLowerCase();q&&be.docenteEmailLower!==q&&(await cY(be.id,{...be,docenteEmailLower:q}),oe++)}await H(),alert(`Reparación completada: ${oe} acompañamiento(s) actualizados`)}catch(de){console.error("Error reparando acompañamientos:",de),alert("No se pudo reparar docenteEmailLower en algunos acompañamientos.")}},className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 flex items-center gap-2 transition-colors",title:"Backfill docenteEmailLower desde el nombre del docente",children:"Reparar Acompañamientos"}),s.jsxs("button",{onClick:()=>{U(),E("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 flex items-center gap-2 transition-colors",children:[s.jsx(WD,{className:"w-5 h-5"})," Acompañamiento General"]}),s.jsxs("button",{onClick:()=>{M(F),x(null),y(null),m("form"),E("opr"),f(null)},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center gap-2 transition-colors",children:[s.jsx(WD,{className:"w-5 h-5"})," Ciclo OPR Independiente"]})]})]}),u&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jc,{className:"w-5 h-5 text-red-500"}),s.jsx("p",{className:"text-red-700 dark:text-red-300",children:u})]})}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[s.jsx(bl,{className:"w-6 h-6 text-amber-500"})," Acompañamientos Generales"]}),s.jsxs("div",{className:"space-y-3",children:[o&&s.jsxs("div",{className:"flex items-center justify-center p-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"}),s.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando registros..."})]}),!o&&e.filter(re=>re.id).length>0?s.jsx("div",{className:"grid gap-3",children:e.filter(re=>re.id).map(re=>s.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(_i,{className:"w-4 h-4 text-amber-500"}),s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:re.docente})]}),s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Curso:"})," ",re.curso," •"," ",s.jsx("span",{className:"font-medium",children:"Asignatura:"})," ",re.asignatura]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(re.fecha).toLocaleDateString("es-CL")]}),re.bloques&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Bloques:"})," ",re.bloques]}),re.retroalimentacionConsolidada&&s.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[s.jsx(dn,{className:"w-3 h-3"}),"Con retroalimentación IA"]}),I[re.id]&&I[re.id].length>0&&s.jsxs("p",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[s.jsx(cd,{className:"w-3 h-3"}),I[re.id].length," Ciclo",I[re.id].length>1?"s":""," OPR"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("button",{onClick:()=>{Y(re),E("general")},className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm px-3 py-1 rounded border border-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors",children:"Ver/Editar"}),s.jsx("button",{onClick:()=>{Y(re),E("opr")},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"+ Ciclo OPR"}),s.jsx("button",{onClick:async()=>{try{const de=await Cnt(re);await Q(),alert(`Reparación completada: ${de.updated}/${de.total} ciclos actualizados`)}catch(de){console.error("Error reparando ciclos:",de),alert("No se pudo ejecutar la reparación de ciclos.")}},title:"Reparar visibilidad de ciclos (backfill)",className:"text-amber-700 hover:text-amber-900 dark:text-amber-400 dark:hover:text-amber-300 font-semibold text-sm px-3 py-1 rounded border border-amber-300 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:"Reparar Ciclos"}),s.jsx("button",{onClick:()=>P(re.id),title:"Eliminar registro",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:s.jsx(Ia,{className:"w-4 h-4"})})]})]}),I[re.id]&&I[re.id].length>0&&s.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-600",children:[s.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2 flex items-center gap-1",children:[s.jsx(cd,{className:"w-4 h-4 text-blue-500"}),"Ciclos OPR Asociados"]}),s.jsx("div",{className:"space-y-2",children:I[re.id].map(de=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:de.nombreCiclo||`Registro N° ${de.registroN}`}),s.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[new Date(de.fecha).toLocaleDateString("es-CL"),de.horaInicio&&de.horaTermino&&s.jsxs("span",{children:[" • ",de.horaInicio," - ",de.horaTermino]})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>{const oe=e.find(be=>be.id===re.id);G(de,oe)},className:"text-blue-600 hover:text-blue-800 text-xs px-2 py-1 rounded border border-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:"Editar"}),s.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await TP(de.id),await Q(),alert("Ciclo OPR eliminado exitosamente")}catch(oe){console.error("Error deleting OPR cycle:",oe),alert("Error al eliminar el ciclo OPR")}},className:"text-red-600 hover:text-red-800 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",title:"Eliminar ciclo OPR",children:s.jsx(Ia,{className:"w-3 h-3"})})]})]},de.id))})]})]},re.id))}):!o&&s.jsxs("div",{className:"text-center p-12 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[s.jsx(Lo,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:"No hay acompañamientos generales registrados"}),s.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm mt-2",children:"Crea tu primer acompañamiento usando el botón superior"})]})]})]}),k.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[s.jsx(cd,{className:"w-6 h-6 text-blue-500"})," Ciclos OPR Independientes"]}),s.jsx("div",{className:"space-y-3",children:k.map(re=>s.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(cd,{className:"w-4 h-4 text-blue-500"}),s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:re.nombreCiclo||`Registro N° ${re.registroN}`})]}),s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Docente:"})," ",re.docenteInfo||"No especificado"," •"," ",s.jsx("span",{className:"font-medium",children:"Curso:"})," ",re.cursoInfo||"No especificado"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(re.fecha).toLocaleDateString("es-CL"),re.horaInicio&&re.horaTermino&&s.jsxs("span",{children:[" • ",re.horaInicio," - ",re.horaTermino]})]}),re.videoObservacionUrl&&s.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[s.jsx(dn,{className:"w-3 h-3"}),"Con video de observación"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("button",{onClick:()=>{G(re)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Ver/Editar"}),s.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await TP(re.id),await Q(),alert("Ciclo OPR eliminado exitosamente")}catch(de){console.error("Error deleting standalone OPR cycle:",de),alert("Error al eliminar el ciclo OPR")}},title:"Eliminar ciclo OPR",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:s.jsx(Ia,{className:"w-4 h-4"})})]})]})},re.id))})]})]}),ie=()=>{const re=g?e.find(oe=>oe.id===g):null,de={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:"docente"in S&&S.docente||"",curso:"curso"in S&&S.curso||"",asignatura:"asignatura"in S&&S.asignatura||"",planificacionFutura:"",createdAt:new Date().toISOString(),rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return s.jsxs("div",{className:"animate-fade-in",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:N==="general"?g?"Editando Acompañamiento General":"Nuevo Acompañamiento General":v?"Editando Ciclo OPR":"Nuevo Ciclo OPR"}),s.jsx("button",{type:"button",onClick:()=>{m("list"),y(null)},className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"← Volver al listado"})]}),s.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:s.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[s.jsx("button",{onClick:()=>E("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${N==="general"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Lo,{className:"w-4 h-4"}),"Acompañamiento General"]})}),s.jsx("button",{onClick:()=>E("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${N==="opr"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(cd,{className:"w-4 h-4"}),"Ciclos OPR"]})}),s.jsx("button",{onClick:()=>E("dashboard"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${N==="dashboard"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(bl,{className:"w-4 h-4"}),"Dashboard"]})})]})}),u&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jc,{className:"w-5 h-5 text-red-500"}),s.jsx("p",{className:"text-red-700 dark:text-red-300",children:u})]})}),N==="dashboard"&&s.jsx("div",{className:"animate-fade-in",children:s.jsx(gnt,{acompanamientos:e,ciclosOPR:I,standaloneCiclos:k})}),N==="general"&&s.jsxs("form",{onSubmit:Z,className:"space-y-8",children:[s.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800",children:[s.jsxs("h4",{className:"text-lg font-semibold mb-3 text-green-700 dark:text-green-300 flex items-center gap-2",children:[s.jsx(f2,{className:"w-5 h-5"}),"Asistente IA - Informe General"]}),s.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[s.jsxs("button",{type:"button",onClick:X,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:B,children:[s.jsx(o4,{className:"w-4 h-4"}),B?"Generando...":"Generar Retroalimentación con IA"]}),s.jsxs("button",{type:"button",onClick:W,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[s.jsx(pf,{className:"w-4 h-4"}),"Crear Informe PDF"]})]}),s.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Completa la observación y rúbrica, luego genera automáticamente la retroalimentación. Finalmente, crea el informe en PDF."}),"retroalimentacionConsolidada"in S&&S.retroalimentacionConsolidada&&s.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-slate-800 rounded-md shadow-sm border",children:[s.jsxs("h5",{className:"font-semibold text-sm mb-2 text-green-700 dark:text-green-300 flex items-center gap-2",children:[s.jsx(dn,{className:"w-4 h-4"}),"Retroalimentación Consolidada Generada:"]}),s.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded p-3",children:s.jsx("textarea",{readOnly:!0,rows:8,value:S.retroalimentacionConsolidada,className:"w-full text-sm text-slate-700 dark:text-slate-300 bg-transparent border-none p-0 resize-none focus:ring-0"})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente *"}),s.jsxs("select",{name:"docente",value:"docente"in S?S.docente:"",onChange:J,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:c,children:[s.jsx("option",{value:"",children:c?"Cargando profesores...":"Seleccione un docente"}),r.map(oe=>s.jsx("option",{value:oe,children:oe},oe))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso *"}),s.jsxs("select",{name:"curso",value:"curso"in S?S.curso:"",onChange:J,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Seleccione un curso"}),on.map(oe=>s.jsx("option",{value:oe,children:oe},oe))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura *"}),s.jsxs("select",{name:"asignatura",value:"asignatura"in S?S.asignatura:"",onChange:J,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Seleccione una asignatura"}),cn.map(oe=>s.jsx("option",{value:oe,children:oe},oe))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),s.jsx("input",{type:"text",name:"bloques",value:"bloques"in S?S.bloques:"",onChange:J,placeholder:"Ej: 3-4, 1-2",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Observaciones Generales"}),s.jsx("textarea",{name:"observacionesGenerales",value:"observacionesGenerales"in S?S.observacionesGenerales:"",onChange:J,rows:4,placeholder:"Ingrese sus observaciones sobre la clase, metodología utilizada, participación de estudiantes, recursos empleados, etc...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-semibold mb-4 text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[s.jsx(bl,{className:"w-5 h-5 text-amber-500"}),"Pauta de Observación - Rúbrica de Evaluación"]}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Haga clic en el nivel correspondiente para cada criterio observado durante la clase."}),s.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:L.map(oe=>s.jsx(ft.Fragment,{children:oe.criteria.map((be,q)=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[q===0&&s.jsx("td",{rowSpan:oe.criteria.length,className:"px-4 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600 bg-slate-50 dark:bg-slate-800",children:oe.domain}),s.jsx("td",{className:"px-4 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:be.name}),be.levels.map((we,Te)=>{const Ee=Te+1,ue="rubricaResultados"in S&&S.rubricaResultados[be.name]===Ee,ge=ue?"bg-amber-100 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700":"hover:bg-amber-50 dark:hover:bg-slate-700";return s.jsx("td",{onClick:()=>D(be.name,Ee),className:`px-4 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${ge} ${ue?"ring-1 ring-amber-400":""}`,title:`Seleccionar nivel ${Ee} para ${be.name}`,children:s.jsxs("div",{className:"text-xs leading-relaxed",children:[ue&&s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsx(dn,{className:"w-3 h-3 text-amber-600"}),s.jsx("span",{className:"font-semibold text-amber-700 dark:text-amber-400",children:"Seleccionado"})]}),we]})},Ee)})]},be.name))},oe.domain))})]})}),Object.keys(S.rubricaResultados||{}).length>0&&s.jsxs("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[s.jsxs("h5",{className:"font-semibold text-amber-800 dark:text-amber-300 mb-2 flex items-center gap-2",children:[s.jsx(bl,{className:"w-4 h-4"}),"Resumen de Evaluación (",Object.keys(S.rubricaResultados).length," criterios evaluados)"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:Object.entries(S.rubricaResultados).map(([oe,be])=>s.jsxs("div",{className:"flex justify-between items-center py-1",children:[s.jsxs("span",{className:"text-slate-700 dark:text-slate-300 truncate pr-2",children:[oe,":"]}),s.jsxs("span",{className:`font-semibold px-2 py-1 rounded text-xs ${be===1?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":be===2?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":be===3?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:["Nivel ",be]})]},oe))})]})]}),s.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t dark:border-slate-700",children:[s.jsx("button",{type:"button",onClick:()=>m("list"),className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),s.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 disabled:bg-amber-400 text-white font-bold py-2 px-6 rounded-lg transition-colors flex items-center gap-2",disabled:B,children:[B&&s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),g?"Actualizar":"Guardar"," Acompañamiento"]})]})]}),N==="opr"&&s.jsx(Tnt,{acompanamiento:re||de,cicloToEdit:v,profesores:r,onSave:async oe=>{var be;try{const q=(re==null?void 0:re.id)||typeof oe.acompanamientoId=="string"&&oe.acompanamientoId||void 0,we=(re==null?void 0:re.docente)||oe.docenteInfo||"",Te=(be=n[we])==null?void 0:be.toLowerCase();if(v&&v.id)await Nnt(v.id,{...oe,docenteEmailLower:Te}),alert("Ciclo OPR actualizado exitosamente");else{if(!q||String(q).startsWith("temp-")){const Ee={...oe,docenteEmailLower:Te,acompanamientoId:""};await dY(Ee)}else{const Ee={...oe,docenteEmailLower:Te,acompanamientoId:String(q)};await dY(Ee)}alert("Ciclo OPR guardado exitosamente")}y(null),await H(),await Q(),m("list")}catch(q){console.error("❌ Error al guardar ciclo OPR:",q);const we=q.message||"Error desconocido al guardar el ciclo OPR";f(we),alert(`Error al guardar el ciclo OPR: ${we}`)}},onCancel:()=>{y(null),m("list")}})]})};return o||c?s.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mb-4"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Cargando módulo de acompañamiento..."}),s.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm mt-2",children:[o&&"Cargando registros...",c&&" Cargando profesores..."]})]})})}):s.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:A==="list"?ce():ie()})})},uU="mensajes_internos",Int="usuarios",Rfe="mensajes_read_status",Lfe=e=>{var r,a;const t=e.data();return{id:e.id,...t,fecha:((a=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString())||t.fecha}},Ont=(e,t)=>{const r=jt(ut(st,uU),Kt("participants","array-contains",e),Gt("fecha","desc"));return rr(r,n=>{const i=n.docs.map(o=>Lfe(o));t(i)},n=>{console.error("Error al suscribirse a los mensajes:",n),t([])})},Dnt=async e=>{try{const t={...e,participants:[e.de,e.para],fecha:dr.fromDate(new Date)};await Kr(ut(st,uU),t)}catch(t){throw console.error("Error al enviar el mensaje:",t),new Error("No se pudo enviar el mensaje.")}},Fnt=async e=>{try{const t=$t(st,uU,e);await Ua(t)}catch(t){throw console.error("Error al eliminar el mensaje:",t),new Error("No se pudo eliminar el mensaje.")}},Pnt=(e,t)=>{const r=$t(st,Rfe,e);return rr(r,n=>{n.exists()?t(n.data()):t({announcements:[],messages:[]})},n=>{console.error("Error al suscribirse al estado de lectura:",n),t({announcements:[],messages:[]})})},Rnt=async(e,t)=>{try{const r=$t(st,Rfe,e);await Us(r,{messages:nae(t)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},Lnt=e=>{const t=jt(ut(st,Int),Gt("nombreCompleto","asc"));return rr(t,a=>{const n=a.docs.map(i=>Lfe(i));e(n)},a=>{console.error("Error al suscribirse a todos los usuarios:",a),e([])})},Mnt=({currentUser:e,refreshUnreadCount:t})=>{const[r,a]=w.useState("inbox"),[n,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState(null),[u,f]=w.useState({announcements:[],messages:[]}),[A,m]=w.useState(!0),g={para:"",asunto:"",cuerpo:""},[x,v]=w.useState(g);w.useEffect(()=>{if(!e.id||!e.email){m(!1);return}m(!0);const j=Ont(e.email,L=>{i(L),m(!1)}),k=Lnt(l),T=Pnt(e.id,L=>{f(L),t()});return()=>{j(),k(),T()}},[e.id,e.email,t]);const y=j=>{d(j),r==="inbox"&&!u.messages.includes(j.id)&&Rnt(e.id,j.id).catch(k=>{console.error("Failed to mark message as read:",k)})},N=async j=>{if(j.preventDefault(),!x.para||!x.asunto.trim()||!x.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const k={de:e.email,para:x.para,asunto:x.asunto,cuerpo:x.cuerpo};try{await Dnt(k),v(g),a("sent")}catch(T){console.error("Error sending message:",T),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},E=async j=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await Fnt(j),d(null)}catch(k){console.error("Error deleting message:",k),alert("No se pudo eliminar el mensaje.")}},B=j=>{v({para:j.de,asunto:`Re: ${j.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${j.de}
Fecha: ${new Date(j.fecha).toLocaleString("es-CL")}

${j.cuerpo}`}),a("compose")},_=w.useMemo(()=>n.filter(j=>j.para===e.email),[n,e.email]),I=w.useMemo(()=>n.filter(j=>j.de===e.email),[n,e.email]);return A?s.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[s.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[s.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:s.jsx("button",{onClick:()=>{a("compose"),d(null),v(g)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),s.jsxs("nav",{className:"p-2 space-y-1",children:[s.jsx("button",{onClick:()=>{a("inbox"),d(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),s.jsx("button",{onClick:()=>{a("sent"),d(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&s.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?_:I).map(j=>{const k=r==="inbox"&&!u.messages.includes(j.id);return s.jsxs("div",{onClick:()=>y(j),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(c==null?void 0:c.id)===j.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("p",{className:`font-bold truncate ${k?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?j.de:`Para: ${j.para}`}),k&&s.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),s.jsx("p",{className:`truncate text-sm ${k?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:j.asunto}),s.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(j.fecha).toLocaleString("es-CL")})]},j.id)})}),s.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),s.jsxs("select",{id:"para",value:x.para,onChange:j=>v({...x,para:j.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Seleccione un destinatario..."}),o.filter(j=>j.email!==e.email).map(j=>s.jsxs("option",{value:j.email,children:[j.nombreCompleto," (",j.email,")"]},j.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),s.jsx("input",{type:"text",id:"asunto",value:x.asunto,onChange:j=>v({...x,asunto:j.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),s.jsx("textarea",{id:"cuerpo",value:x.cuerpo,onChange:j=>v({...x,cuerpo:j.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsx("div",{className:"text-right",children:s.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):c?s.jsxs("div",{children:[s.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c.asunto}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[s.jsx("strong",{children:"De:"})," ",c.de," ",s.jsx("br",{}),s.jsx("strong",{children:"Para:"})," ",c.para," ",s.jsx("br",{}),s.jsx("strong",{children:"Fecha:"})," ",new Date(c.fecha).toLocaleString("es-CL")]})]}),s.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:c.cuerpo}),s.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&s.jsx("button",{onClick:()=>B(c),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),s.jsx("button",{onClick:()=>E(c.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):s.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:s.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})},C3="proyectos_interdisciplinarios",fU="entregas_interdisciplinarias",Unt="usuarios",hU=e=>{const t=e.data();return{id:e.id,...t}},Hnt=e=>({...e,contenidosPorAsignatura:Array.isArray(e==null?void 0:e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e==null?void 0:e.actividades)?e.actividades:[],fechasClave:Array.isArray(e==null?void 0:e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e==null?void 0:e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e==null?void 0:e.docentesResponsables)?e.docentesResponsables:[e==null?void 0:e.docentesResponsables].filter(Boolean)}),Qnt=e=>{const t=jt(ut(st,C3),Gt("nombreProyecto","asc"));return rr(t,a=>{try{const n=a.docs.map(i=>Hnt(hU(i)));e(n)}catch(n){console.error("Error parseando planificaciones:",n),e([])}},a=>{console.error("Error al suscribirse a las planificaciones:",a),e([])})},znt=async e=>{const t={...e,contenidosPorAsignatura:Array.isArray(e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e.actividades)?e.actividades:[],fechasClave:Array.isArray(e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e.docentesResponsables)?e.docentesResponsables:[e.docentesResponsables].filter(Boolean),createdAt:dr.now(),updatedAt:dr.now()};return(await Kr(ut(st,C3),t)).id},fY=async(e,t)=>{const{id:r,...a}=t,n=$t(st,C3,e);await Us(n,{...a,contenidosPorAsignatura:Array.isArray(a==null?void 0:a.contenidosPorAsignatura)?a.contenidosPorAsignatura:(a==null?void 0:a.contenidosPorAsignatura)===void 0?void 0:[],actividades:Array.isArray(a==null?void 0:a.actividades)?a.actividades:(a==null?void 0:a.actividades)===void 0?void 0:[],fechasClave:Array.isArray(a==null?void 0:a.fechasClave)?a.fechasClave:(a==null?void 0:a.fechasClave)===void 0?void 0:[],tareas:Array.isArray(a==null?void 0:a.tareas)?a.tareas:(a==null?void 0:a.tareas)===void 0?void 0:[],docentesResponsables:Array.isArray(a==null?void 0:a.docentesResponsables)?a.docentesResponsables:(a==null?void 0:a.docentesResponsables)===void 0?void 0:[a==null?void 0:a.docentesResponsables].filter(Boolean),updatedAt:dr.now()},{merge:!0})},$nt=async e=>{const t=$t(st,C3,e),r=jt(ut(st,fU),Kt("planificacionId","==",e)),a=await Nr(r),n=wp(st);a.forEach(i=>n.delete(i.ref)),n.delete(t),await n.commit()},Vnt=(e,t)=>{const r=jt(ut(st,fU),Kt("planificacionId","==",e));return rr(r,n=>{const i=n.docs.map(o=>hU(o));t(i)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},Gnt=async(e,t)=>{const r=$t(st,fU,e);await Us(r,{feedbackProfesor:t,fechaFeedback:dr.fromDate(new Date)},{merge:!0})},Mfe=e=>{const t=jt(ut(st,Unt));return rr(t,a=>{const n=a.docs.map(i=>hU(i));e(n)},a=>{console.error("Error al suscribirse a todos los usuarios:",a),e([])})},mO={},BP={Recordar:["Enumerar","Definir","Identificar","Nombrar","Reconocer","Reproducir"],Comprender:["Explicar","Interpretar","Resumir","Parafrasear","Ejemplificar","Clasificar"],Aplicar:["Ejecutar","Implementar","Usar","Demostrar","Operar","Programar"],Analizar:["Diferenciar","Organizar","Atribuir","Comparar","Deconstruir","Delinear"],Evaluar:["Comprobar","Criticar","Revisar","Formular hipótesis","Experimentar","Juzgar"],Crear:["Generar","Planificar","Producir","Diseñar","Construir","Idear"]},B2=({href:e})=>{if(!e)return s.jsx("span",{className:"text-slate-400",children:"—"});const t=e.startsWith("http")?e:`https://${e}`;return s.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[s.jsx(D5,{className:"w-4 h-4"}),s.jsx("span",{className:"truncate max-w-[180px] md:max-w-[260px]",children:e})]})},sg=({icon:e,label:t,children:r,aiButton:a,className:n=""})=>s.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 ${n}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg",children:e}),s.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:t})]}),a]}),r]}),qnt=({planificaciones:e,onActivityUpdate:t})=>{const[r,a]=w.useState(null),n=w.useMemo(()=>e.map(c=>{const d=[];return(c.actividades||[]).forEach(u=>d.push({...u,planId:c.id,type:"activity"})),(c.fechasClave||[]).forEach(u=>d.push({id:u.id,planId:c.id,type:"keyDate",nombre:u.nombre,fechaInicio:u.fecha,fechaFin:u.fecha,responsables:c.docentesResponsables.join(", "),asignaturaPrincipal:"Milestone",recursoUrl:u.recursoUrl})),d.sort((u,f)=>new Date(u.fechaInicio).getTime()-new Date(f.fechaInicio).getTime()),{plan:c,items:d}}),[e]),i=w.useCallback(c=>{if(c.type==="keyDate")return{text:"Fecha Clave",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300"};const d=new Date;d.setHours(0,0,0,0);const u=new Date(`${c.fechaInicio}T00:00:00`),f=new Date(`${c.fechaFin}T00:00:00`);return f<d?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:u<=d&&f>=d?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300"}},[]),o=({name:c})=>{const d=(c||"").split(" ").map(u=>u[0]).join("").toUpperCase();return s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center font-semibold text-sm ring-2 ring-white dark:ring-slate-800 shadow-sm",children:d.slice(0,2)})},l=({data:c,onClose:d,onSave:u})=>{const[f,A]=w.useState(c.activity),m=x=>A({...f,[x.target.name]:x.target.value}),g=()=>{u(c.planId,f),d()};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl p-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:s.jsx(O0,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Editar Actividad"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Nombre"}),s.jsx("input",{name:"nombre",value:f.nombre,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Responsables"}),s.jsx("input",{name:"responsables",value:f.responsables,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Inicio"}),s.jsx("input",{type:"date",name:"fechaInicio",value:f.fechaInicio,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Fin"}),s.jsx("input",{type:"date",name:"fechaFin",value:f.fechaFin,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Recurso (enlace)"}),s.jsx("input",{name:"recursoUrl",placeholder:"https://...",value:f.recursoUrl||"",onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[s.jsx("button",{onClick:d,className:"px-4 py-2 bg-slate-200 rounded-lg",children:"Cancelar"}),s.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Guardar"})]})]})})};return!n.length||n.every(c=>c.items.length===0)?s.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(jc,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay actividades para mostrar"})]})}):s.jsxs("div",{className:"space-y-8",children:[n.map(({plan:c,items:d})=>s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/50 rounded-xl",children:s.jsx(bc,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-200",children:c.nombreProyecto}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cronograma del proyecto"})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b-2 border-slate-200 dark:border-slate-700",children:[s.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Tarea"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Estado"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Inicio"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Fin"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Recurso"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Asignado"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:d.map(u=>{const f=i(u),A=u.type==="activity";return s.jsxs("tr",{className:`${A?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>A&&a({planId:u.planId,activity:u}),children:[s.jsx("td",{className:"px-6 py-4 font-semibold",children:u.nombre}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${f.color}`,children:f.text})}),s.jsx("td",{className:"px-6 py-4",children:u.fechaInicio}),s.jsx("td",{className:"px-6 py-4",children:u.fechaFin}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(B2,{href:u.recursoUrl})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(o,{name:u.responsables||"Sin asignar"})})]},u.id)})})]})})]},c.id)),r&&s.jsx(l,{data:r,onClose:()=>a(null),onSave:t})]})},Knt=({planificaciones:e,onBack:t})=>{const r=w.useMemo(()=>{const c={},d={};return e.forEach(u=>{var f;(f=u.contenidosPorAsignatura)==null||f.forEach(A=>{var m;(m=A.habilidades)==null||m.forEach(g=>{c[g]=(c[g]||0)+1,Object.entries(BP).forEach(([x,v])=>{v.includes(g)&&(d[x]=(d[x]||0)+1)})})})}),{habilidadesCount:c,categoriaCount:d}},[e]),a=w.useMemo(()=>{const c={},d={};return e.forEach(u=>{var f;u.asignaturas.forEach(A=>{d[A]=(d[A]||0)+1}),(f=u.contenidosPorAsignatura)==null||f.forEach(A=>{A.contenidos&&A.contenidos.toLowerCase().split(/[\s,.-]+/).filter(g=>g.length>3).filter(g=>!["para","con","por","las","los","una","del","que","este","esta","son","como","más","desde","hasta","entre"].includes(g)).forEach(g=>{c[g]=(c[g]||0)+1})})}),{palabrasCount:c,asignaturasCount:d}},[e]),n=w.useMemo(()=>{const c=e.length,d=e.reduce((A,m)=>{var g;return A+(((g=m.actividades)==null?void 0:g.length)||0)},0),u=e.reduce((A,m)=>{var g;return A+(((g=m.tareas)==null?void 0:g.length)||0)},0),f=new Set(e.flatMap(A=>A.asignaturas)).size;return{totalProyectos:c,totalActividades:d,totalTareas:u,asignaturasUnicas:f}},[e]),i=({data:c,title:d})=>{const u=Object.entries(c);if(!u.length)return null;const f=u.sort((m,g)=>g[1]-m[1]).slice(0,20),A=Math.max(...f.map(([,m])=>m));return A?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:d}),s.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[100px]",children:f.map(([m,g])=>{const x=Math.max(.8,g/A*2),v=Math.max(.6,g/A);return s.jsx("span",{className:"inline-block px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full font-semibold transition-transform hover:scale-110",style:{fontSize:`${x}rem`,opacity:v},title:`${m}: ${g} veces`,children:m},m)})})]}):null},o=({data:c})=>{const d=Object.values(c),u=d.length?Math.max(...d):0,f={Recordar:"bg-red-500",Comprender:"bg-orange-500",Aplicar:"bg-yellow-500",Analizar:"bg-green-500",Evaluar:"bg-blue-500",Crear:"bg-purple-500"};return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:s.jsx(X2,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),s.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Taxonomía de Bloom"})]}),s.jsx("div",{className:"space-y-4",children:Object.keys(BP).map(A=>{const m=c[A]||0,g=u>0?m/u*100:0,x=f[A]||"bg-slate-400";return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:A}),s.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[m," habilidades"]})]}),s.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:s.jsx("div",{className:`h-3 rounded-full ${x} transition-all duration-500`,style:{width:`${g}%`}})})]},A)})})]})},l=({icon:c,title:d,value:u,description:f,color:A})=>s.jsxs("div",{className:`bg-gradient-to-br ${A} p-6 rounded-2xl shadow-lg text-white`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:c}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl font-bold",children:u}),s.jsx("div",{className:"text-white/80 text-sm",children:d})]})]}),s.jsx("p",{className:"text-white/90 text-sm",children:f})]});return s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-teal-600 rounded-xl",children:s.jsx(F5,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent",children:"Dashboard Analítico"})]}),s.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Análisis de habilidades y contenidos desarrollados"})]}),s.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[s.jsx(Y2,{className:"w-4 h-4"})," Volver a Proyectos"]})]})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(l,{icon:s.jsx(op,{className:"w-8 h-8"}),title:"Proyectos",value:n.totalProyectos,description:"Proyectos interdisciplinarios creados",color:"from-blue-500 to-blue-600"}),s.jsx(l,{icon:s.jsx(DEe,{className:"w-8 h-8"}),title:"Actividades",value:n.totalActividades,description:"Actividades planificadas en total",color:"from-green-500 to-green-600"}),s.jsx(l,{icon:s.jsx(Lo,{className:"w-8 h-8"}),title:"Tareas",value:n.totalTareas,description:"Tareas asignadas a estudiantes",color:"from-purple-500 to-purple-600"}),s.jsx(l,{icon:s.jsx(Rs,{className:"w-8 h-8"}),title:"Asignaturas",value:n.asignaturasUnicas,description:"Asignaturas involucradas",color:"from-orange-500 to-orange-600"})]}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[s.jsx(o,{data:r.categoriaCount}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:s.jsx(wb,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Distribución de Asignaturas"})]}),s.jsx("div",{className:"space-y-3",children:Object.entries(a.asignaturasCount).sort(([,c],[,d])=>d-c).map(([c,d])=>{const u=Math.max(...Object.values(a.asignaturasCount)),f=u>0?d/u*100:0;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:c}),s.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[d," proyecto",d!==1?"s":""]})]}),s.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500",style:{width:`${f}%`}})})]},c)})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[s.jsx(i,{data:a.palabrasCount,title:"Contenidos Más Frecuentes"}),s.jsx(i,{data:r.habilidadesCount,title:"Habilidades Más Desarrolladas"})]})]})},Wnt=({plan:e,onBack:t,availableTeachers:r})=>{var g,x;const[a,n]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState(((g=e.tareas)==null?void 0:g[0])||null),[d,u]=w.useState(null);w.useEffect(()=>{const v=Mfe(n),y=Vnt(e.id,o);return()=>{v(),y()}},[e.id]);const f=w.useMemo(()=>a.filter(v=>v.profile===Tt.ESTUDIANTE&&e.cursos.includes(v.curso||"")).sort((v,y)=>(v.nombreCompleto||"").localeCompare(y.nombreCompleto||"")),[a,e.cursos]),A=async v=>{u(v.id);{alert("La API Key de Gemini no está configurada."),u(null);return}},m=v=>v.map(y=>{var N;return((N=r.find(E=>E.id===y))==null?void 0:N.nombreCompleto)||y}).join(", ");return l?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Entregas de Tareas"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:e.nombreProyecto}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:["Profesores: ",m(e.docentesResponsables)]})]}),s.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[s.jsx(Y2,{className:"w-4 h-4"})," Volver a Proyectos"]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Tarea:"}),s.jsx("select",{value:l.id,onChange:v=>{var y;return c(((y=e.tareas)==null?void 0:y.find(N=>N.id===v.target.value))||null)},className:"w-full sm:w-auto p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:(x=e.tareas)==null?void 0:x.map(v=>s.jsxs("option",{value:v.id,children:["Tarea ",v.numero,": ",v.instrucciones]},v.id))})]}),s.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:f.map(v=>{const y=i.find(N=>N.tareaId===l.id&&N.estudianteId===v.id);return s.jsxs("div",{className:"p-6 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:(v.nombreCompleto||"NA").split(" ").map(N=>N[0]).join("").toUpperCase().slice(0,2)}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:v.nombreCompleto}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:v.curso})]})]}),s.jsx("div",{className:"flex items-center gap-2",children:y!=null&&y.completada?s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 rounded-full text-sm font-semibold",children:[s.jsx(JN,{className:"w-4 h-4"})," Entregado"]}):s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300 rounded-full text-sm font-semibold",children:[s.jsx(jc,{className:"w-4 h-4"})," Pendiente"]})})]}),y?s.jsxs("div",{className:"space-y-4",children:[y.observacionesEstudiante&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Comentario del estudiante:"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-white dark:bg-slate-800 p-3 rounded-md border border-slate-200 dark:border-slate-600",children:y.observacionesEstudiante})]}),y.enlaceUrl&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Enlace entregado:"}),s.jsx(B2,{href:y.enlaceUrl})]}),y.archivoAdjunto&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Archivo adjunto:"}),s.jsxs("a",{href:y.archivoAdjunto.url,download:y.archivoAdjunto.nombre,className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:[s.jsx(pf,{className:"w-4 h-4"})," ",y.archivoAdjunto.nombre]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Retroalimentación del profesor:"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:y.feedbackProfesor||"",onBlur:N=>Gnt(y.id,N.target.value),rows:3,className:"flex-1 p-3 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm resize-none"},y.id),s.jsx("button",{onClick:()=>A(y),disabled:d===y.id,className:"p-3 rounded-md bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar Feedback con IA",children:d===y.id?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):s.jsx(Rg,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]})]})]}):s.jsxs("div",{className:"text-center py-6",children:[s.jsx(jc,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"El estudiante aún no ha realizado la entrega"})]})]},v.id)})})]}):s.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"text-center",children:[s.jsx(jc,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),s.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Este proyecto no tiene tareas asignadas"}),s.jsxs("button",{onClick:t,className:"mt-4 inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold",children:[s.jsx(Y2,{className:"w-4 h-4"})," Volver a Proyectos"]})]})})},Xnt=({descripcion:e,asignaturas:t,docentes:r,onObjetivos:a,onIndicadores:n,onEstructura:i,availableTeachers:o})=>{const[l,c]=w.useState(null),d=mO==null?void 0:mO.VITE_GEMINI_API_KEY,u=A=>A.map(m=>{var g;return((g=o.find(x=>x.id===m))==null?void 0:g.nombreCompleto)||m}).join(", "),f=async A=>{var m,g,x;if(!d){alert("La API Key de Gemini no está configurada.");return}if(!e.trim()){alert("Ingrese una descripción del proyecto.");return}c(A);try{const y=new J5(d).getGenerativeModel({model:"gemini-1.5-flash-latest"});if(A==="obj"){const N=`Genera 3 a 5 objetivos de aprendizaje claros y medibles.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,E=await y.generateContent(N);a(E.response.text().replace(/(\*\*|\*)/g,""))}else if(A==="ind"){const N=`Genera 5 a 7 indicadores de logro observables.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,E=await y.generateContent(N);n(E.response.text().replace(/(\*\*|\*)/g,""))}else{const N=`Devuelve SOLO un JSON válido (sin backticks) con claves: actividades, fechasClave y tareas para un proyecto escolar.
Descripción: "${e}"
Docentes responsables: "${u(r)}"
Asignaturas: "${t.join(", ")}"
Estructura:
- actividades: 3 a 5 objetos { "nombre", "fechaInicio" (YYYY-MM-DD), "fechaFin" (YYYY-MM-DD), "responsables", "recursoUrl" }
- fechasClave: 2 a 3 objetos { "nombre", "fecha" (YYYY-MM-DD), "recursoUrl" }
- tareas: 2 a 3 objetos { "instrucciones", "fechaEntrega" (YYYY-MM-DD), "recursoUrl" }`,B=(await y.generateContent(N)).response.text().replace(/^```json\s*|```\s*$/g,""),_=JSON.parse(B);i({actividades:(m=_.actividades)==null?void 0:m.map(I=>({...I,id:crypto.randomUUID()})),fechasClave:(g=_.fechasClave)==null?void 0:g.map(I=>({id:crypto.randomUUID(),nombre:I.nombre,fecha:I.fecha,recursoUrl:I.recursoUrl})),tareas:(x=_.tareas)==null?void 0:x.map((I,j)=>({...I,id:crypto.randomUUID(),numero:j+1}))})}}catch(v){console.error(v),alert("No se pudo completar la generación con IA.")}finally{c(null)}};return s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>f("obj"),disabled:l!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar objetivos con IA",children:l==="obj"?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):s.jsx(Rg,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),s.jsx("button",{type:"button",onClick:()=>f("ind"),disabled:l!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar indicadores con IA",children:l==="ind"?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):s.jsx(Rg,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),s.jsx("button",{type:"button",onClick:()=>f("est"),disabled:l!==null,className:"inline-flex items-center gap-2 bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-2 px-3 rounded-lg disabled:from-slate-400 disabled:to-slate-500 disabled:cursor-not-allowed hover:from-sky-600 hover:to-blue-700 transition-all duration-200 shadow-lg",children:l==="est"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})," ",s.jsx("span",{children:"Generando..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Rg,{className:"w-4 h-4"})," ",s.jsx("span",{children:"Estructura IA"})]})})]})},Ynt=({initialPlan:e,onSave:t,onCancel:r,availableTeachers:a})=>{const[n,i]=w.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[o,l]=w.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""}),[c,d]=w.useState(null),[u,f]=w.useState({nombre:"",fecha:"",recursoUrl:""}),[A,m]=w.useState(null),[g,x]=w.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[v,y]=w.useState(null);w.useEffect(()=>{i(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const N=G=>i(X=>({...X,[G.target.name]:G.target.value})),E=G=>{i(X=>{const Z=X.asignaturas,U=Z.includes(G)?Z.filter(P=>P!==G):[...Z,G];let Y=X.contenidosPorAsignatura;return U.includes(G)&&!Z.includes(G)&&(Y=[...Y,{asignatura:G,contenidos:"",habilidades:[]}]),!U.includes(G)&&Z.includes(G)&&(Y=Y.filter(P=>P.asignatura!==G)),{...X,asignaturas:U,contenidosPorAsignatura:Y}})},B=G=>i(X=>({...X,cursos:X.cursos.includes(G)?X.cursos.filter(Z=>Z!==G):[...X.cursos,G]})),_=G=>i(X=>({...X,docentesResponsables:X.docentesResponsables.includes(G)?X.docentesResponsables.filter(Z=>Z!==G):[...X.docentesResponsables,G]})),I=(G,X,Z)=>i(U=>({...U,contenidosPorAsignatura:U.contenidosPorAsignatura.map(Y=>Y.asignatura===G?{...Y,[X]:Z}:Y)})),j=(G,X)=>i(Z=>({...Z,contenidosPorAsignatura:Z.contenidosPorAsignatura.map(U=>U.asignatura===G?{...U,habilidades:U.habilidades.includes(X)?U.habilidades.filter(Y=>Y!==X):[...U.habilidades,X]}:U)})),k=()=>{if(!o.nombre||!o.fechaInicio||!o.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}c?(i(G=>({...G,actividades:G.actividades.map(X=>X.id===c?{...o,id:c}:X)})),d(null)):i(G=>({...G,actividades:[...G.actividades||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""})},T=G=>{d(G.id),l(G)},L=G=>{window.confirm("¿Eliminar esta actividad?")&&i(X=>({...X,actividades:X.actividades.filter(Z=>Z.id!==G)}))},F=()=>{if(!u.nombre||!u.fecha){alert("Nombre y fecha son obligatorios para el hito.");return}A?(i(G=>({...G,fechasClave:G.fechasClave.map(X=>X.id===A?{...u,id:A}:X)})),m(null)):i(G=>({...G,fechasClave:[...G.fechasClave||[],{...u,id:crypto.randomUUID()}]})),f({nombre:"",fecha:"",recursoUrl:""})},S=G=>{m(G.id),f(G)},M=G=>{window.confirm("¿Eliminar este hito?")&&i(X=>({...X,fechasClave:X.fechasClave.filter(Z=>Z.id!==G)}))},H=()=>{var G,X;if(!g.instrucciones||!g.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}if(v){const Z={...g,id:v,numero:((G=n.tareas.find(U=>U.id===v))==null?void 0:G.numero)||0};i(U=>({...U,tareas:U.tareas.map(Y=>Y.id===v?Z:Y)})),y(null)}else{const Z={id:crypto.randomUUID(),numero:(((X=n.tareas)==null?void 0:X.length)||0)+1,...g};i(U=>({...U,tareas:[...U.tareas||[],Z]}))}x({instrucciones:"",fechaEntrega:"",recursoUrl:""})},K=G=>{y(G.id),x({instrucciones:G.instrucciones,fechaEntrega:G.fechaEntrega,recursoUrl:G.recursoUrl||""})},Q=G=>{window.confirm("¿Eliminar esta tarea?")&&i(X=>({...X,tareas:X.tareas.filter(Z=>Z.id!==G)}))};return s.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl",children:s.jsx(op,{className:"w-10 h-10 text-white"})}),s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})]}),s.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Diseñe experiencias de aprendizaje colaborativo e innovador"})]}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx(sg,{icon:s.jsx(Lo,{className:"w-6 h-6 text-slate-600"}),label:"Información del Proyecto",aiButton:s.jsx(Xnt,{descripcion:n.descripcionProyecto,asignaturas:n.asignaturas,docentes:n.docentesResponsables,availableTeachers:[],onObjetivos:G=>i(X=>({...X,objetivos:G})),onIndicadores:G=>i(X=>({...X,indicadoresLogro:G})),onEstructura:G=>i(X=>{var Z,U,Y;return{...X,actividades:(Z=G.actividades)!=null&&Z.length?G.actividades:X.actividades,fechasClave:(U=G.fechasClave)!=null&&U.length?G.fechasClave:X.fechasClave,tareas:(Y=G.tareas)!=null&&Y.length?G.tareas:X.tareas}})}),children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Nombre del Proyecto"}),s.jsx("input",{name:"nombreProyecto",value:n.nombreProyecto,onChange:N,placeholder:"Ingrese el nombre del proyecto...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg font-semibold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Descripción del Proyecto"}),s.jsx("textarea",{name:"descripcionProyecto",value:n.descripcionProyecto,onChange:N,placeholder:"Detalle metodología, producto final y propósito...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})]})]})}),s.jsx(sg,{icon:s.jsx(_i,{className:"w-6 h-6 text-slate-600"}),label:"Profesores Responsables",children:s.jsx("div",{className:"space-y-3",children:s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:a.map(G=>s.jsx("button",{type:"button",onClick:()=>_(G.id),className:`p-3 rounded-lg text-left transition-all duration-200 ${n.docentesResponsables.includes(G.id)?"bg-blue-100 border-2 border-blue-500 text-blue-800 dark:bg-blue-900/50 dark:border-blue-400 dark:text-blue-300":"bg-slate-50 border-2 border-slate-200 hover:border-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:border-slate-500"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${n.docentesResponsables.includes(G.id)?"bg-blue-500 text-white":"bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-300"}`,children:s.jsx(Lg,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-sm",children:G.nombreCompleto}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:G.email})]})]})},G.id))})})}),s.jsx(sg,{icon:s.jsx(yb,{className:"w-6 h-6 text-slate-600"}),label:"Cursos Participantes",children:s.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:on.map(G=>s.jsx("button",{type:"button",onClick:()=>B(G),className:`p-3 rounded-lg text-center text-sm font-semibold transition-all duration-200 ${n.cursos.includes(G)?"bg-amber-500 text-white shadow-lg scale-105":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:G},G))})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(sg,{icon:s.jsx(Rs,{className:"w-6 h-6 text-slate-600"}),label:"Asignaturas y Contenidos",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Seleccionar Asignaturas:"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:cn.map(G=>s.jsx("button",{type:"button",onClick:()=>E(G),className:`p-2 rounded-lg text-left text-sm font-medium transition-all duration-200 ${n.asignaturas.includes(G)?"bg-green-500 text-white shadow-md":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:G},G))})]}),n.contenidosPorAsignatura.length>0&&s.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Contenidos y Habilidades por Asignatura:"}),n.contenidosPorAsignatura.map(G=>s.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[s.jsxs("h5",{className:"font-bold text-slate-800 dark:text-slate-200 mb-3 flex items-center gap-2",children:[s.jsx(Rs,{className:"w-4 h-4"})," ",G.asignatura]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Contenidos a trabajar:"}),s.jsx("textarea",{value:G.contenidos,onChange:X=>I(G.asignatura,"contenidos",X.target.value),placeholder:`Detalle los contenidos específicos de ${G.asignatura}...`,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm min-h-[80px] resize-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Habilidades según Taxonomía de Bloom:"}),s.jsx("div",{className:"space-y-2",children:Object.entries(BP).map(([X,Z])=>s.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-md p-2",children:[s.jsxs("h6",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 mb-1",children:[X,":"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:Z.map(U=>s.jsx("button",{type:"button",onClick:()=>j(G.asignatura,U),className:`px-2 py-1 rounded-md text-xs font-medium transition-colors ${G.habilidades.includes(U)?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-500"}`,children:U},U))})]},X))}),G.habilidades.length>0&&s.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:[s.jsx("p",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Habilidades seleccionadas:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:G.habilidades.map(X=>s.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded text-xs",children:X},X))})]})]})]})]},G.asignatura))]})]})}),s.jsx(sg,{icon:s.jsx(t1,{className:"w-6 h-6 text-slate-600"}),label:"Objetivos de Aprendizaje",children:s.jsx("textarea",{name:"objetivos",value:n.objetivos,onChange:N,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),s.jsx(sg,{icon:s.jsx(bl,{className:"w-6 h-6 text-slate-600"}),label:"Indicadores de Éxito",children:s.jsx("textarea",{name:"indicadoresLogro",value:n.indicadoresLogro,onChange:N,placeholder:"Liste los indicadores de logro...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),s.jsxs(sg,{icon:s.jsx(Ro,{className:"w-6 h-6 text-slate-600"}),label:"Planificación y Cronograma",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(bc,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),s.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Proyecto"})]}),s.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[s.jsxs("div",{className:"lg:col-span-3",children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre"}),s.jsx("input",{value:o.nombre,onChange:G=>l({...o,nombre:G.target.value}),placeholder:"Nombre de la actividad",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),s.jsxs("div",{className:"lg:col-span-2",children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Inicio"}),s.jsx("input",{type:"date",value:o.fechaInicio,onChange:G=>l({...o,fechaInicio:G.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),s.jsxs("div",{className:"lg:col-span-2",children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fin"}),s.jsx("input",{type:"date",value:o.fechaFin,onChange:G=>l({...o,fechaFin:G.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),s.jsxs("div",{className:"lg:col-span-3",children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),s.jsx("input",{value:o.recursoUrl||"",onChange:G=>l({...o,recursoUrl:G.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),s.jsx("div",{className:"lg:col-span-2",children:s.jsx("button",{type:"button",onClick:k,className:"w-full bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:c?"Actualizar":s.jsxs(s.Fragment,{children:[s.jsx(Si,{className:"w-4 h-4"})," Agregar"]})})})]}),!!n.actividades.length&&s.jsx("div",{className:"mt-4 space-y-2",children:n.actividades.map(G=>s.jsxs("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm flex justify-between items-center gap-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:G.nombre})," ",s.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:["(",G.fechaInicio," - ",G.fechaFin,")"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(B2,{href:G.recursoUrl}),s.jsx("button",{onClick:()=>T(G),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:s.jsx(O0,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>L(G.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:s.jsx(Ia,{className:"w-3 h-3"})})]})]},G.id))})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(JN,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),s.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Fechas Clave (Hitos)"})]}),s.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3 items-end",children:[s.jsxs("div",{className:"sm:col-span-2",children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre del Hito"}),s.jsx("input",{value:u.nombre,onChange:G=>f({...u,nombre:G.target.value}),placeholder:"Nombre del hito",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha"}),s.jsx("input",{type:"date",value:u.fecha,onChange:G=>f({...u,fecha:G.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),s.jsxs("div",{className:"sm:col-span-1",children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),s.jsx("input",{value:u.recursoUrl||"",onChange:G=>f({...u,recursoUrl:G.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),s.jsx("button",{type:"button",onClick:F,className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:A?"Actualizar":s.jsxs(s.Fragment,{children:[s.jsx(Si,{className:"w-4 h-4"})," Agregar"]})})]}),!!n.fechasClave.length&&s.jsx("div",{className:"mt-4 space-y-2",children:n.fechasClave.map(G=>s.jsxs("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm flex justify-between items-center gap-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:G.nombre})," ",s.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:["(",G.fecha,")"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(B2,{href:G.recursoUrl}),s.jsx("button",{onClick:()=>S(G),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:s.jsx(O0,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>M(G.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:s.jsx(Ia,{className:"w-3 h-3"})})]})]},G.id))})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(X2,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),s.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Tareas para Estudiantes"})]}),s.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[s.jsxs("div",{className:"lg:col-span-5",children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Instrucciones"}),s.jsx("input",{value:g.instrucciones,onChange:G=>x({...g,instrucciones:G.target.value}),placeholder:"Descripción de la tarea",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),s.jsxs("div",{className:"lg:col-span-3",children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Entrega"}),s.jsx("input",{type:"date",value:g.fechaEntrega,onChange:G=>x({...g,fechaEntrega:G.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),s.jsxs("div",{className:"lg:col-span-3",children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),s.jsx("input",{value:g.recursoUrl||"",onChange:G=>x({...g,recursoUrl:G.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsx("button",{type:"button",onClick:H,className:"w-full bg-purple-600 hover:bg-purple-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:v?s.jsx(O0,{className:"w-4 h-4"}):s.jsx(Si,{className:"w-4 h-4"})})})]}),!!n.tareas.length&&s.jsx("div",{className:"mt-4 space-y-2",children:n.tareas.map(G=>s.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 flex justify-between items-start gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("span",{className:"inline-block bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300 text-xs font-bold px-2 py-1 rounded mb-1",children:["Tarea #",G.numero]}),s.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:G.instrucciones})]}),s.jsxs("div",{className:"text-right space-y-1",children:[s.jsx("span",{className:"block text-slate-500 dark:text-slate-400 text-xs",children:G.fechaEntrega}),"recursoUrl"in G?s.jsx(B2,{href:G.recursoUrl}):s.jsx("span",{className:"text-slate-400 text-xs",children:"—"})]}),s.jsxs("div",{className:"flex flex-col items-center gap-2 pl-2 border-l ml-2",children:[s.jsx("button",{onClick:()=>K(G),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:s.jsx(O0,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>Q(G.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:s.jsx(Ia,{className:"w-3 h-3"})})]})]},G.id))})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-8 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors order-2 sm:order-1",children:"Cancelar"}),s.jsx("button",{onClick:()=>t(n),className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg order-1 sm:order-2",children:e?"Guardar Cambios":"Crear Proyecto"})]})]})]})]})]})},hY=()=>{const[e,t]=w.useState([]),[r,a]=w.useState([]),[n,i]=w.useState(!0),[o,l]=w.useState("list"),[c,d]=w.useState(null),[u,f]=w.useState(null),[A,m]=w.useState(null),[g,x]=w.useState("all"),v=w.useMemo(()=>g==="all"?e:e.filter(k=>k.id===g),[e,g]);w.useEffect(()=>{i(!0);const k=Mfe(L=>{const F=L.filter(S=>S.profile===Tt.PROFESORADO);a(F)}),T=Qnt(L=>{const F=L.map(S=>({...S,docentesResponsables:Array.isArray(S.docentesResponsables)?S.docentesResponsables:[S.docentesResponsables].filter(Boolean),contenidosPorAsignatura:S.contenidosPorAsignatura||[],actividades:S.actividades||[],fechasClave:S.fechasClave||[]}));t(F),i(!1)});return()=>{k(),T()}},[]);const y=w.useCallback(async(k,T)=>{const L=e.find(S=>S.id===k);if(!L)return;const F={...L,actividades:(L.actividades||[]).map(S=>S.id===T.id?T:S)};await fY(k,F)},[e]),N=async k=>{try{const T=k.id&&String(k.id).length>0,L={...k};if(T){const{id:F,...S}=L;await fY(k.id,S)}else delete L.id,await znt(L);l("list"),d(null)}catch(T){console.error("Error al guardar la planificación:",T),alert("No se pudo guardar la planificación.")}},E=k=>{d(k),l("form")},B=async k=>{if(!k){alert("Error: ID inválido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await $nt(k)}catch(T){console.error(T),alert("No se pudo eliminar la planificación.")}},_=()=>{d(null),l("form")},I=async k=>{f(k.id);try{const T=new xr("p","mm","a4"),L=T.internal.pageSize.getHeight(),F=T.internal.pageSize.getWidth(),S=15,M=F-S*2;let H=S,K=1;const X=await(await fetch("https://res.cloudinary.com/dwncmu1wu/image/upload/v1756260600/Captura_de_pantalla_2025-08-26_a_la_s_10.09.17_p._m._aakgkt.png")).blob(),Z=await new Promise((re,de)=>{const oe=new FileReader;oe.onloadend=()=>re(oe.result),oe.onerror=de,oe.readAsDataURL(X)}),U=()=>{T.addImage(Z,"PNG",S,H,M,20),H+=25},Y=()=>{T.setFont("helvetica","normal"),T.setFontSize(9),T.setTextColor(149,165,166);const re=`Página ${K}`,de=T.getStringUnitWidth(re)*T.getFontSize()/T.internal.scaleFactor;T.text(re,(F-de)/2,L-10)},P=re=>H+re>L-S?(Y(),T.addPage(),K++,H=S,U(),!0):!1,D=re=>{P(15),T.setFont("helvetica","bold"),T.setFontSize(14),T.setTextColor(44,62,80),T.text(re,S,H),H+=8},W=re=>{if(!re||!re.trim())return;T.setFont("helvetica","normal"),T.setFontSize(11),T.setTextColor(86,101,115);const de=T.splitTextToSize(re,M);P(de.length*5+5),T.text(de,S,H),H+=de.length*5+8};U(),T.setFont("helvetica","bold"),T.setFontSize(22),T.setTextColor(41,128,185);const J=T.splitTextToSize(k.nombreProyecto,M);P(J.length*10+10),T.text(J,S,H),H+=J.length*9+10,ji(T,{startY:H,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},(re=>re.map(de=>{var oe;return((oe=r.find(be=>be.id===de))==null?void 0:oe.nombreCompleto)||de}).join(", "))(k.docentesResponsables)],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},k.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},k.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:11,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold",fillColor:[245,245,245]}},didDrawPage:re=>{re.pageNumber>1&&(H=S,U())}}),H=T.lastAutoTable.finalY+10,D("Descripción del Proyecto"),W(k.descripcionProyecto),D("Objetivos de Aprendizaje"),W(k.objetivos),D("Indicadores de Logro"),W(k.indicadoresLogro),k.contenidosPorAsignatura&&k.contenidosPorAsignatura.length>0&&(D("Contenidos y Habilidades por Asignatura"),k.contenidosPorAsignatura.forEach(re=>{var de;P(15),T.setFont("helvetica","bold"),T.setFontSize(12),T.setTextColor(52,73,94),T.text(`${re.asignatura}:`,S,H),H+=7,re.contenidos&&W(`Contenidos: ${re.contenidos}`),(de=re.habilidades)!=null&&de.length&&W(`Habilidades: ${re.habilidades.join(", ")}`)}));const ie={theme:"striped",headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},styles:{fontSize:10,cellPadding:2.5,halign:"left"},didDrawPage:re=>{re.pageNumber>K&&(K=re.pageNumber,Y()),re.pageNumber>1&&(H=S,U())}};if(k.actividades&&k.actividades.length>0&&(D("Cronograma de Actividades"),ji(T,{...ie,startY:H,head:[["Actividad","Inicio","Fin","Recurso"]],body:k.actividades.map(re=>[re.nombre,re.fechaInicio,re.fechaFin,re.recursoUrl||"—"])}),H=T.lastAutoTable.finalY+10),k.fechasClave&&k.fechasClave.length>0&&(D("Hitos y Fechas Clave"),ji(T,{...ie,startY:H,head:[["Hito","Fecha","Recurso"]],body:k.fechasClave.map(re=>[re.nombre,re.fecha,re.recursoUrl||"—"])}),H=T.lastAutoTable.finalY+10),k.tareas&&k.tareas.length>0){D("Tareas para Estudiantes");const re=k.tareas.map(de=>[String(de.numero||""),de.instrucciones,de.fechaEntrega,de.recursoUrl||"—"]);ji(T,{...ie,startY:H,head:[["#","Instrucciones","Entrega","Recurso"]],body:re}),H=T.lastAutoTable.finalY+10}Y(),T.save(`Proyecto_${k.nombreProyecto.replace(/\s/g,"_")}.pdf`)}catch(T){console.error("Error al generar PDF:",T),alert("No se pudo generar el PDF. Verifique la consola para más detalles.")}finally{f(null)}},j=k=>k.map(T=>{var L;return((L=r.find(F=>F.id===T))==null?void 0:L.nombreCompleto)||T}).join(", ");return n?s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Cargando proyectos..."})]})}):A?s.jsx(Wnt,{plan:A,onBack:()=>m(null),availableTeachers:r}):o==="dashboard"?s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>l("list"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),s.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-green-600 to-teal-600 text-white shadow",children:"Dashboard"})]})}),s.jsx(Knt,{planificaciones:e,onBack:()=>l("list")})]}):o==="form"?s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>{l("list"),d(null)},className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),s.jsx("button",{type:"button",onClick:()=>l("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),s.jsx(Ynt,{initialPlan:c,onSave:N,onCancel:()=>{l("list"),d(null)},availableTeachers:r})]}):s.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow",children:"Proyectos"}),s.jsx("button",{type:"button",onClick:()=>l("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:s.jsx(op,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Proyectos Interdisciplinarios"})]}),s.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Gestione experiencias de aprendizaje colaborativo e innovador"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{type:"button",onClick:()=>l("dashboard"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 shadow-lg",children:[s.jsx(F5,{className:"w-5 h-5"})," Ver Dashboard"]}),s.jsxs("button",{type:"button",onClick:_,className:"inline-flex items-center gap-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg",children:[s.jsx(Si,{className:"w-5 h-5"})," Crear Nuevo Proyecto"]})]})]}),e.length===0?s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:s.jsx(op,{className:"w-12 h-12 text-slate-400"})}),s.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"No hay proyectos creados"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-500 mb-6",children:"Comience creando su primer proyecto interdisciplinario"}),s.jsxs("button",{type:"button",onClick:_,className:"inline-flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Si,{className:"w-4 h-4"})," Crear Primer Proyecto"]})]}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(k=>s.jsxs("div",{className:"group bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600",children:[s.jsx("div",{className:"flex justify-between items-start mb-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-slate-200 mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:k.nombreProyecto}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[s.jsx(yb,{className:"w-4 h-4"}),s.jsxs("span",{children:["Cursos: ",k.cursos.join(", ")]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[s.jsx(_i,{className:"w-4 h-4"}),s.jsxs("span",{children:["Profesores: ",j(k.docentesResponsables)]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[s.jsx(Rs,{className:"w-4 h-4"}),s.jsxs("span",{children:["Asignaturas: ",k.asignaturas.length]})]})]})]})}),!!k.descripcionProyecto&&s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4 line-clamp-3",children:k.descripcionProyecto}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-600",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>m(k),className:"inline-flex items-center gap-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm transition-colors",title:"Ver entregas de estudiantes",children:[s.jsx(JN,{className:"w-4 h-4"})," Entregas"]}),s.jsxs("button",{type:"button",onClick:()=>I(k),disabled:u===k.id,className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm transition-colors disabled:opacity-50",title:"Exportar a PDF",children:[u===k.id?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):s.jsx(pf,{className:"w-4 h-4"}),"PDF"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>E(k),className:"p-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-colors",title:"Editar proyecto",children:s.jsx(O0,{className:"w-4 h-4"})}),s.jsx("button",{type:"button",onClick:()=>B(k.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-colors",title:"Eliminar proyecto",children:s.jsx(Ia,{className:"w-4 h-4"})})]})]})]},k.id))})]}),e.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wje,{className:"w-5 h-5 text-slate-600"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Cronograma (Gantt)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Proyecto:"}),s.jsxs("select",{value:g,onChange:k=>x(k.target.value),className:"p-2 border border-slate-300 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[s.jsx("option",{value:"all",children:"Todos"}),e.map(k=>s.jsx("option",{value:k.id,children:k.nombreProyecto},k.id))]})]})]}),s.jsx("div",{id:"gantt-container-vertical",children:s.jsx(qnt,{planificaciones:v,onActivityUpdate:y})})]})]})},b1="panol_maquinas",IE="panol_registros",Jnt=e=>{const t=jt(ut(st,b1),Gt("nombre","asc"));return rr(t,r=>{const a=r.docs.map(n=>({id:n.id,...n.data()}));e(a)})},Znt=e=>{const t=jt(ut(st,IE),Gt("fecha","desc"));return rr(t,r=>{const a=r.docs.map(n=>{const i=n.data();return{id:n.id,fecha:i.fecha,curso:i.curso,profesorResponsable:i.profesorResponsable,maquinaId:i.maquinaId,totalHoras:i.totalHoras,observaciones:i.observaciones||""}});e(a)})},est=async e=>(await Kr(ut(st,b1),{...e,createdAt:Da(),updatedAt:Da()})).id,tst=async(e,t)=>{await zi($t(st,b1,e),{...t,updatedAt:Da()})},rst=async e=>{const t=jt(ut(st,IE),Kt("maquinaId","==",e));if(!(await Nr(t)).empty)throw new Error("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");await Ua($t(st,b1,e))},ast=async e=>(await Kr(ut(st,IE),{...e,createdAt:Da(),updatedAt:Da()})).id,nst=async(e,t)=>{await zi($t(st,IE,e),{...t,updatedAt:Da()})},sst=async e=>{await Ua($t(st,IE,e))},ist=async()=>{if(!(await Nr(ut(st,b1))).empty)return;const t=wp(st);[{nombre:"Torno",especialidad:"Industrial"},{nombre:"Fresadora",especialidad:"Industrial"},{nombre:"Rectificadora",especialidad:"Industrial"},{nombre:"Soldadora MIG",especialidad:"Industrial"},{nombre:"Soldadora TIG",especialidad:"Industrial"},{nombre:"Torno CNC",especialidad:"Industrial"},{nombre:"Elevador",especialidad:"Automotriz"},{nombre:"Compresor",especialidad:"Automotriz"},{nombre:"Rectificadora",especialidad:"Automotriz"},{nombre:"Maqueta de motor",especialidad:"Automotriz"},{nombre:"Maqueta hidráulica",especialidad:"Automotriz"}].forEach(a=>{const n=$t(ut(st,b1));t.set(n,{...a,createdAt:Da(),updatedAt:Da()})}),await t.commit()},ost=()=>{var K;const[e,t]=w.useState([]),[r,a]=w.useState([]),n={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[i,o]=w.useState(n),[l,c]=w.useState(null),d={nombre:"",especialidad:"Industrial"},[u,f]=w.useState(d),[A,m]=w.useState(null),[g,x]=w.useState({maquinaId:"",curso:"",profesor:"",fecha:""});w.useEffect(()=>{ist().catch(console.error);const Q=Jnt(t),G=Znt(a);return()=>{Q&&Q(),G&&G()}},[]);const v=async Q=>{if(Q.preventDefault(),!!u.nombre.trim())try{A?await tst(A.id,{...u}):await est({...u}),f(d),m(null)}catch(G){alert(G.message||"Error al guardar máquina")}},y=w.useCallback(async Q=>{try{await rst(Q)}catch(G){alert(G.message||"Error al eliminar máquina")}},[]),N=async Q=>{Q.preventDefault();const G=l||i;if(!G.curso||!G.profesorResponsable.trim()||!G.maquinaId||Number(G.totalHoras)<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}try{if(l){const{id:X,...Z}=l;await nst(X,Z)}else await ast({...i});o(n),c(null)}catch(X){alert(X.message||"Error al guardar registro")}},E=w.useCallback(async Q=>{try{await sst(Q)}catch(G){alert(G.message||"Error al eliminar registro")}},[]),B=w.useMemo(()=>r.filter(Q=>(g.maquinaId===""||Q.maquinaId===g.maquinaId)&&(g.curso===""||Q.curso===g.curso)&&(g.profesor===""||Q.profesorResponsable.toLowerCase().includes(g.profesor.toLowerCase()))&&(g.fecha===""||Q.fecha===g.fecha)).sort((Q,G)=>new Date(G.fecha).getTime()-new Date(Q.fecha).getTime()),[r,g]),_=w.useMemo(()=>new Map(e.map(Q=>[Q.id,Q])),[e]),I=w.useMemo(()=>B.reduce((Q,G)=>Q+(Number(G.totalHoras)||0),0),[B]),j=w.useMemo(()=>{const Q=new Map;B.forEach(X=>{var U;const Z=((U=_.get(X.maquinaId))==null?void 0:U.nombre)||"N/A";Q.set(Z,(Q.get(Z)||0)+(Number(X.totalHoras)||0))});const G=Array.from(Q.entries()).map(([X,Z])=>({maquina:X,horas:Number(Z.toFixed(2))}));return G.sort((X,Z)=>Z.horas-X.horas),G},[B,_]),k=()=>{const Q=B.map(Z=>{var U,Y;return{Fecha:Z.fecha,Curso:Z.curso,Profesor:Z.profesorResponsable,Máquina:((U=_.get(Z.maquinaId))==null?void 0:U.nombre)||"N/A",Especialidad:((Y=_.get(Z.maquinaId))==null?void 0:Y.especialidad)||"N/A","Total Horas":Z.totalHoras,Observaciones:Z.observaciones}}),G=Fs.json_to_sheet(Q),X=Fs.book_new();Fs.book_append_sheet(X,G,"RegistrosPañol"),K1(X,"Registros_Pañol.xlsx")},T=()=>{const Q=new xr;ji(Q,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:B.map(G=>{var X,Z;return[G.fecha,G.curso,G.profesorResponsable,((X=_.get(G.maquinaId))==null?void 0:X.nombre)||"N/A",((Z=_.get(G.maquinaId))==null?void 0:Z.especialidad)||"N/A",G.totalHoras,G.observaciones]}),margin:{top:24,right:10,bottom:20,left:10},didDrawPage:G=>{Q.setFontSize(12),Q.setFont("helvetica","bold"),Q.text("LICEO INDUSTRIAL DE RECOLETA",G.settings.margin.left,14),Q.setFontSize(10),Q.setFont("helvetica","normal"),Q.text("Informe de Registros de Pañol",G.settings.margin.left,20)}}),Q.save("Registros_Pañol.pdf")},L="w-full border border-slate-300 rounded-xl px-3 py-2 shadow-sm focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-400 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-400",F=(Q,G)=>s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${G}`,children:Q}),S=({icon:Q,label:G,value:X,accent:Z="from-indigo-500 to-sky-500"})=>s.jsxs("div",{className:"relative rounded-2xl p-4 shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[s.jsx("div",{className:`absolute inset-0 bg-gradient-to-tr ${Z} opacity-10`}),s.jsxs("div",{className:"relative flex items-center gap-3 bg-white/70 dark:bg-slate-800/60 rounded-xl p-3",children:[s.jsx("div",{className:"p-2 rounded-xl bg-white dark:bg-slate-700 shadow",children:Q}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:G}),s.jsx("div",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:X})]})]})]}),M=({title:Q,icon:G,children:X,right:Z,accent:U="from-indigo-600/10 via-sky-500/10 to-emerald-500/10"})=>s.jsxs("section",{className:"rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 relative overflow-hidden",children:[s.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${U}`}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"flex items-center gap-2 text-lg font-bold text-slate-800 dark:text-slate-100",children:[G," ",s.jsx("span",{children:Q})]}),Z]}),X]})]}),H=()=>{const Q=l||i,G=l?c:o;return s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 items-end",children:[s.jsxs("div",{className:"lg:col-span-1",children:[s.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Ro,{size:16})," Fecha"]}),s.jsx("input",{name:"fecha",type:"date",value:Q.fecha,onChange:X=>G({...Q,fecha:X.target.value}),className:L,required:!0})]}),s.jsxs("div",{className:"lg:col-span-1",children:[s.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(_i,{size:16})," Curso"]}),s.jsxs("select",{name:"curso",value:Q.curso,onChange:X=>G({...Q,curso:X.target.value}),className:L,required:!0,children:[s.jsx("option",{value:"",children:"Curso"}),on.map(X=>s.jsx("option",{children:X},X))]})]}),s.jsxs("div",{className:"lg:col-span-1",children:[s.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Rs,{size:16})," Profesor"]}),s.jsxs("select",{name:"profesorResponsable",value:Q.profesorResponsable,onChange:X=>G({...Q,profesorResponsable:X.target.value}),className:L,required:!0,children:[s.jsx("option",{value:"",children:"Profesor Responsable"}),XD.map(X=>s.jsx("option",{value:X,children:X},X))]})]}),s.jsxs("div",{className:"lg:col-span-1",children:[s.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(f2,{size:16})," Máquina"]}),s.jsxs("select",{name:"maquinaId",value:Q.maquinaId,onChange:X=>G({...Q,maquinaId:X.target.value}),className:L,required:!0,children:[s.jsx("option",{value:"",children:"Máquina"}),e.map(X=>s.jsx("option",{value:X.id,children:X.nombre},X.id))]})]}),s.jsxs("div",{className:"lg:col-span-1",children:[s.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(I5,{size:16})," Total de Horas"]}),s.jsx("input",{name:"totalHoras",type:"number",value:Q.totalHoras,onChange:X=>G({...Q,totalHoras:Number(X.target.value)}),className:L,required:!0,min:.5,step:.5})]}),s.jsxs("div",{className:"lg:col-span-6",children:[s.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),s.jsx("textarea",{name:"observaciones",value:Q.observaciones,onChange:X=>G({...Q,observaciones:X.target.value}),placeholder:"Observaciones...",className:L+" min-h-[40px]",rows:2})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[l&&s.jsxs("button",{type:"button",onClick:()=>c(null),className:"inline-flex items-center gap-2 bg-white text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700 font-medium py-2 px-4 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[s.jsx(ho,{size:16})," Cancelar"]}),s.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-xl hover:bg-indigo-500 transition",children:[l?s.jsx(kl,{size:16}):s.jsx(Si,{size:16}),l?"Actualizar":"Registrar"]})]})]})};return s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsxs("header",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 via-sky-500 to-emerald-500",children:"Pañol: Registro de Uso de Máquinas"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Administra máquinas, registra usos y exporta informes (Firestore)."})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:k,className:"inline-flex items-center gap-2 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border border-slate-200 dark:border-slate-800 px-3 py-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",title:"Exportar a Excel",children:[s.jsx(s4,{size:18})," Excel"]}),s.jsxs("button",{onClick:T,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-2 rounded-xl hover:bg-emerald-500 transition",title:"Exportar a PDF",children:[s.jsx(Lo,{size:18})," PDF"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(S,{icon:s.jsx(f2,{className:"w-5 h-5 text-indigo-600"}),label:"Máquinas registradas",value:e.length,accent:"from-indigo-500 to-sky-500"}),s.jsx(S,{icon:s.jsx(Lo,{className:"w-5 h-5 text-sky-600"}),label:"Registros",value:B.length,accent:"from-sky-500 to-cyan-500"}),s.jsx(S,{icon:s.jsx(I5,{className:"w-5 h-5 text-emerald-600"}),label:"Horas totales (filtradas)",value:I.toFixed(1),accent:"from-emerald-500 to-lime-500"}),s.jsx(S,{icon:s.jsx(Ro,{className:"w-5 h-5 text-amber-600"}),label:"Última actualización",value:(K=r[0])!=null&&K.fecha?new Date(r[0].fecha).toLocaleDateString():"—",accent:"from-amber-500 to-rose-400"})]}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[s.jsx("div",{className:"xl:col-span-3",children:s.jsx(M,{title:l?`Editando registro #${l.id.slice(0,4)}`:"Nuevo registro de uso",icon:s.jsx(QCe,{size:18}),children:s.jsx(H,{})})}),s.jsx("div",{className:"xl:col-span-2 order-1 xl:order-none",children:s.jsx(M,{title:"Uso por máquina (horas)",icon:s.jsx(bl,{size:18}),accent:"from-indigo-600/10 via-sky-500/10 to-amber-500/10",right:s.jsx("div",{className:"flex gap-2 items-center",children:F(`${j.length} máquinas`,"bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200")}),children:s.jsx("div",{className:"h-[320px] w-full",children:s.jsx(oi,{width:"100%",height:"100%",children:s.jsxs(Ad,{data:j,margin:{top:8,right:16,bottom:8,left:0},children:[s.jsx(uu,{strokeDasharray:"3 3"}),s.jsx(yl,{dataKey:"maquina",tick:{fontSize:12},interval:0,angle:0,height:50}),s.jsx(wl,{}),s.jsx(ii,{}),s.jsx(Sp,{}),s.jsx(Ec,{dataKey:"horas",name:"Horas",fill:"#6366F1",radius:[6,6,0,0]})]})})})})}),s.jsx("div",{className:"xl:col-span-1 order-2 xl:order-none",children:s.jsxs(M,{title:"Administrar máquinas",icon:s.jsx(f2,{size:18}),accent:"from-emerald-600/10 via-sky-500/10 to-indigo-600/10",children:[s.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-5 gap-2 mb-4",children:[s.jsx("input",{value:u.nombre,onChange:Q=>f({...u,nombre:Q.target.value}),placeholder:"Nombre máquina",className:L+" md:col-span-2"}),s.jsxs("select",{value:u.especialidad,onChange:Q=>f({...u,especialidad:Q.target.value}),className:L+" md:col-span-2",children:[s.jsx("option",{value:"Industrial",children:"Industrial"}),s.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),s.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-3 rounded-xl hover:bg-indigo-500 transition md:col-span-1",children:[A?s.jsx(kl,{size:16}):s.jsx(Si,{size:16}),A?"Guardar":"Agregar"]})]}),s.jsx("ul",{className:"space-y-2 max-h-72 overflow-y-auto pr-1",children:e.map(Q=>s.jsxs("li",{className:"flex justify-between items-center bg-gradient-to-r from-slate-50 to-white dark:from-slate-800/60 dark:to-slate-800/30 border border-slate-200 dark:border-slate-700 p-3 rounded-xl",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-100",children:Q.nombre}),s.jsx("div",{className:"text-xs",children:Q.especialidad==="Industrial"?F("Industrial","bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200"):F("Automotriz","bg-emerald-50 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200")})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{m(Q),f(Q)},className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Editar",children:s.jsx(Z2,{size:16,className:"text-blue-600"})}),s.jsx("button",{onClick:()=>y(Q.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Eliminar",children:s.jsx(Ia,{size:16,className:"text-red-600"})})]})]},Q.id))})]})}),s.jsx("div",{className:"xl:col-span-2 order-3",children:s.jsxs(M,{title:"Historial de uso",icon:s.jsx(Lo,{size:18}),accent:"from-rose-500/10 via-amber-400/10 to-indigo-500/10",right:s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(ZN,{size:16,className:"text-slate-600"})}),children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[s.jsx("input",{type:"date",value:g.fecha,onChange:Q=>x({...g,fecha:Q.target.value}),className:L,placeholder:"Fecha"}),s.jsxs("select",{value:g.curso,onChange:Q=>x({...g,curso:Q.target.value}),className:L,children:[s.jsx("option",{value:"",children:"Todos los Cursos"}),on.map(Q=>s.jsx("option",{children:Q},Q))]}),s.jsxs("select",{value:g.maquinaId,onChange:Q=>x({...g,maquinaId:Q.target.value}),className:L,children:[s.jsx("option",{value:"",children:"Todas las Máquinas"}),e.map(Q=>s.jsx("option",{value:Q.id,children:Q.nombre},Q.id))]}),s.jsxs("div",{className:"relative",children:[s.jsx(z1,{size:16,className:"absolute left-3 top-2.5 text-slate-400"}),s.jsx("input",{value:g.profesor,onChange:Q=>x({...g,profesor:Q.target.value}),placeholder:"Buscar profesor...",className:L+" pl-9"})]})]}),s.jsx("div",{className:"max-h-[420px] overflow-y-auto border border-slate-200 dark:border-slate-800 rounded-xl",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Fecha"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Máquina"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Profesor / Curso"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Total Horas"}),s.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-600 uppercase",children:"Acciones"})]})}),s.jsxs("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-800",children:[B.map(Q=>{var G;return s.jsxs("tr",{className:"hover:bg-slate-50/60 dark:hover:bg-slate-800/50 transition",children:[s.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:Q.fecha}),s.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((G=_.get(Q.maquinaId))==null?void 0:G.nombre)||"N/A"}),s.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[Q.profesorResponsable," ",s.jsxs("span",{className:"text-slate-400",children:["(",Q.curso,")"]})]}),s.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:Q.totalHoras}),s.jsxs("td",{className:"px-3 py-2 text-center",children:[s.jsx("button",{onClick:()=>c(Q),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Editar",children:s.jsx(Z2,{size:16,className:"text-blue-600"})}),s.jsx("button",{onClick:()=>E(Q.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Eliminar",children:s.jsx(Ia,{size:16,className:"text-red-600"})})]})]},Q.id)}),B.length===0&&s.jsx("tr",{children:s.jsx("td",{className:"px-3 py-6 text-center text-sm text-slate-500",colSpan:5,children:"No hay registros que coincidan con los filtros."})})]})]})})]})})]})]})};function Wl(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,a;r<e.length;r++)(a=Wl(e[r]))!==""&&(t+=(t&&" ")+a);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}const lst={},AY=e=>{let t;const r=new Set,a=(u,f)=>{const A=typeof u=="function"?u(t):u;if(!Object.is(A,t)){const m=t;t=f??(typeof A!="object"||A===null)?A:Object.assign({},t,A),r.forEach(g=>g(t,m))}},n=()=>t,c={setState:a,getState:n,getInitialState:()=>d,subscribe:u=>(r.add(u),()=>r.delete(u)),destroy:()=>{(lst?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},d=t=e(a,n,c);return c},cst=e=>e?AY(e):AY,{useDebugValue:dst}=ft,{useSyncExternalStoreWithSelector:ust}=NLe,fst=e=>e;function Ufe(e,t=fst,r){const a=ust(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return dst(a),a}const mY=(e,t)=>{const r=cst(e),a=(n,i=t)=>Ufe(r,n,i);return Object.assign(a,r),a},hst=(e,t)=>e?mY(e,t):mY;function _l(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[a,n]of e)if(!Object.is(n,t.get(a)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e)if(!t.has(a))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const a of r)if(!Object.prototype.hasOwnProperty.call(t,a)||!Object.is(e[a],t[a]))return!1;return!0}var Ast={value:()=>{}};function j3(){for(var e=0,t=arguments.length,r={},a;e<t;++e){if(!(a=arguments[e]+"")||a in r||/[\s.]/.test(a))throw new Error("illegal type: "+a);r[a]=[]}return new Lk(r)}function Lk(e){this._=e}function mst(e,t){return e.trim().split(/^|\s+/).map(function(r){var a="",n=r.indexOf(".");if(n>=0&&(a=r.slice(n+1),r=r.slice(0,n)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:a}})}Lk.prototype=j3.prototype={constructor:Lk,on:function(e,t){var r=this._,a=mst(e+"",r),n,i=-1,o=a.length;if(arguments.length<2){for(;++i<o;)if((n=(e=a[i]).type)&&(n=pst(r[n],e.name)))return n;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(n=(e=a[i]).type)r[n]=pY(r[n],e.name,t);else if(t==null)for(n in r)r[n]=pY(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Lk(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var r=new Array(n),a=0,n,i;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],a=0,n=i.length;a<n;++a)i[a].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],n=0,i=a.length;n<i;++n)a[n].value.apply(t,r)}};function pst(e,t){for(var r=0,a=e.length,n;r<a;++r)if((n=e[r]).name===t)return n.value}function pY(e,t,r){for(var a=0,n=e.length;a<n;++a)if(e[a].name===t){e[a]=Ast,e=e.slice(0,a).concat(e.slice(a+1));break}return r!=null&&e.push({name:t,value:r}),e}var IP="http://www.w3.org/1999/xhtml";const gY={svg:"http://www.w3.org/2000/svg",xhtml:IP,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function k3(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),gY.hasOwnProperty(t)?{space:gY[t],local:e}:e}function gst(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===IP&&t.documentElement.namespaceURI===IP?t.createElement(e):t.createElementNS(r,e)}}function xst(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Hfe(e){var t=k3(e);return(t.local?xst:gst)(t)}function vst(){}function AU(e){return e==null?vst:function(){return this.querySelector(e)}}function bst(e){typeof e!="function"&&(e=AU(e));for(var t=this._groups,r=t.length,a=new Array(r),n=0;n<r;++n)for(var i=t[n],o=i.length,l=a[n]=new Array(o),c,d,u=0;u<o;++u)(c=i[u])&&(d=e.call(c,c.__data__,u,i))&&("__data__"in c&&(d.__data__=c.__data__),l[u]=d);return new wd(a,this._parents)}function yst(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function wst(){return[]}function Qfe(e){return e==null?wst:function(){return this.querySelectorAll(e)}}function Nst(e){return function(){return yst(e.apply(this,arguments))}}function Est(e){typeof e=="function"?e=Nst(e):e=Qfe(e);for(var t=this._groups,r=t.length,a=[],n=[],i=0;i<r;++i)for(var o=t[i],l=o.length,c,d=0;d<l;++d)(c=o[d])&&(a.push(e.call(c,c.__data__,d,o)),n.push(c));return new wd(a,n)}function zfe(e){return function(){return this.matches(e)}}function $fe(e){return function(t){return t.matches(e)}}var Cst=Array.prototype.find;function jst(e){return function(){return Cst.call(this.children,e)}}function kst(){return this.firstElementChild}function Sst(e){return this.select(e==null?kst:jst(typeof e=="function"?e:$fe(e)))}var _st=Array.prototype.filter;function Tst(){return Array.from(this.children)}function Bst(e){return function(){return _st.call(this.children,e)}}function Ist(e){return this.selectAll(e==null?Tst:Bst(typeof e=="function"?e:$fe(e)))}function Ost(e){typeof e!="function"&&(e=zfe(e));for(var t=this._groups,r=t.length,a=new Array(r),n=0;n<r;++n)for(var i=t[n],o=i.length,l=a[n]=[],c,d=0;d<o;++d)(c=i[d])&&e.call(c,c.__data__,d,i)&&l.push(c);return new wd(a,this._parents)}function Vfe(e){return new Array(e.length)}function Dst(){return new wd(this._enter||this._groups.map(Vfe),this._parents)}function qS(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}qS.prototype={constructor:qS,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Fst(e){return function(){return e}}function Pst(e,t,r,a,n,i){for(var o=0,l,c=t.length,d=i.length;o<d;++o)(l=t[o])?(l.__data__=i[o],a[o]=l):r[o]=new qS(e,i[o]);for(;o<c;++o)(l=t[o])&&(n[o]=l)}function Rst(e,t,r,a,n,i,o){var l,c,d=new Map,u=t.length,f=i.length,A=new Array(u),m;for(l=0;l<u;++l)(c=t[l])&&(A[l]=m=o.call(c,c.__data__,l,t)+"",d.has(m)?n[l]=c:d.set(m,c));for(l=0;l<f;++l)m=o.call(e,i[l],l,i)+"",(c=d.get(m))?(a[l]=c,c.__data__=i[l],d.delete(m)):r[l]=new qS(e,i[l]);for(l=0;l<u;++l)(c=t[l])&&d.get(A[l])===c&&(n[l]=c)}function Lst(e){return e.__data__}function Mst(e,t){if(!arguments.length)return Array.from(this,Lst);var r=t?Rst:Pst,a=this._parents,n=this._groups;typeof e!="function"&&(e=Fst(e));for(var i=n.length,o=new Array(i),l=new Array(i),c=new Array(i),d=0;d<i;++d){var u=a[d],f=n[d],A=f.length,m=Ust(e.call(u,u&&u.__data__,d,a)),g=m.length,x=l[d]=new Array(g),v=o[d]=new Array(g),y=c[d]=new Array(A);r(u,f,x,v,y,m,t);for(var N=0,E=0,B,_;N<g;++N)if(B=x[N]){for(N>=E&&(E=N+1);!(_=v[E])&&++E<g;);B._next=_||null}}return o=new wd(o,a),o._enter=l,o._exit=c,o}function Ust(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Hst(){return new wd(this._exit||this._groups.map(Vfe),this._parents)}function Qst(e,t,r){var a=this.enter(),n=this,i=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),t!=null&&(n=t(n),n&&(n=n.selection())),r==null?i.remove():r(i),a&&n?a.merge(n).order():n}function zst(e){for(var t=e.selection?e.selection():e,r=this._groups,a=t._groups,n=r.length,i=a.length,o=Math.min(n,i),l=new Array(n),c=0;c<o;++c)for(var d=r[c],u=a[c],f=d.length,A=l[c]=new Array(f),m,g=0;g<f;++g)(m=d[g]||u[g])&&(A[g]=m);for(;c<n;++c)l[c]=r[c];return new wd(l,this._parents)}function $st(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var a=e[t],n=a.length-1,i=a[n],o;--n>=0;)(o=a[n])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function Vst(e){e||(e=Gst);function t(f,A){return f&&A?e(f.__data__,A.__data__):!f-!A}for(var r=this._groups,a=r.length,n=new Array(a),i=0;i<a;++i){for(var o=r[i],l=o.length,c=n[i]=new Array(l),d,u=0;u<l;++u)(d=o[u])&&(c[u]=d);c.sort(t)}return new wd(n,this._parents).order()}function Gst(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function qst(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Kst(){return Array.from(this)}function Wst(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var a=e[t],n=0,i=a.length;n<i;++n){var o=a[n];if(o)return o}return null}function Xst(){let e=0;for(const t of this)++e;return e}function Yst(){return!this.node()}function Jst(e){for(var t=this._groups,r=0,a=t.length;r<a;++r)for(var n=t[r],i=0,o=n.length,l;i<o;++i)(l=n[i])&&e.call(l,l.__data__,i,n);return this}function Zst(e){return function(){this.removeAttribute(e)}}function eit(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tit(e,t){return function(){this.setAttribute(e,t)}}function rit(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ait(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function nit(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function sit(e,t){var r=k3(e);if(arguments.length<2){var a=this.node();return r.local?a.getAttributeNS(r.space,r.local):a.getAttribute(r)}return this.each((t==null?r.local?eit:Zst:typeof t=="function"?r.local?nit:ait:r.local?rit:tit)(r,t))}function Gfe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function iit(e){return function(){this.style.removeProperty(e)}}function oit(e,t,r){return function(){this.style.setProperty(e,t,r)}}function lit(e,t,r){return function(){var a=t.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,r)}}function cit(e,t,r){return arguments.length>1?this.each((t==null?iit:typeof t=="function"?lit:oit)(e,t,r??"")):y1(this.node(),e)}function y1(e,t){return e.style.getPropertyValue(t)||Gfe(e).getComputedStyle(e,null).getPropertyValue(t)}function dit(e){return function(){delete this[e]}}function uit(e,t){return function(){this[e]=t}}function fit(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function hit(e,t){return arguments.length>1?this.each((t==null?dit:typeof t=="function"?fit:uit)(e,t)):this.node()[e]}function qfe(e){return e.trim().split(/^|\s+/)}function mU(e){return e.classList||new Kfe(e)}function Kfe(e){this._node=e,this._names=qfe(e.getAttribute("class")||"")}Kfe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Wfe(e,t){for(var r=mU(e),a=-1,n=t.length;++a<n;)r.add(t[a])}function Xfe(e,t){for(var r=mU(e),a=-1,n=t.length;++a<n;)r.remove(t[a])}function Ait(e){return function(){Wfe(this,e)}}function mit(e){return function(){Xfe(this,e)}}function pit(e,t){return function(){(t.apply(this,arguments)?Wfe:Xfe)(this,e)}}function git(e,t){var r=qfe(e+"");if(arguments.length<2){for(var a=mU(this.node()),n=-1,i=r.length;++n<i;)if(!a.contains(r[n]))return!1;return!0}return this.each((typeof t=="function"?pit:t?Ait:mit)(r,t))}function xit(){this.textContent=""}function vit(e){return function(){this.textContent=e}}function bit(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function yit(e){return arguments.length?this.each(e==null?xit:(typeof e=="function"?bit:vit)(e)):this.node().textContent}function wit(){this.innerHTML=""}function Nit(e){return function(){this.innerHTML=e}}function Eit(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Cit(e){return arguments.length?this.each(e==null?wit:(typeof e=="function"?Eit:Nit)(e)):this.node().innerHTML}function jit(){this.nextSibling&&this.parentNode.appendChild(this)}function kit(){return this.each(jit)}function Sit(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _it(){return this.each(Sit)}function Tit(e){var t=typeof e=="function"?e:Hfe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Bit(){return null}function Iit(e,t){var r=typeof e=="function"?e:Hfe(e),a=t==null?Bit:typeof t=="function"?t:AU(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),a.apply(this,arguments)||null)})}function Oit(){var e=this.parentNode;e&&e.removeChild(this)}function Dit(){return this.each(Oit)}function Fit(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Pit(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Rit(e){return this.select(e?Pit:Fit)}function Lit(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Mit(e){return function(t){e.call(this,t,this.__data__)}}function Uit(e){return e.trim().split(/^|\s+/).map(function(t){var r="",a=t.indexOf(".");return a>=0&&(r=t.slice(a+1),t=t.slice(0,a)),{type:t,name:r}})}function Hit(e){return function(){var t=this.__on;if(t){for(var r=0,a=-1,n=t.length,i;r<n;++r)i=t[r],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++a]=i;++a?t.length=a:delete this.__on}}}function Qit(e,t,r){return function(){var a=this.__on,n,i=Mit(t);if(a){for(var o=0,l=a.length;o<l;++o)if((n=a[o]).type===e.type&&n.name===e.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=i,n.options=r),n.value=t;return}}this.addEventListener(e.type,i,r),n={type:e.type,name:e.name,value:t,listener:i,options:r},a?a.push(n):this.__on=[n]}}function zit(e,t,r){var a=Uit(e+""),n,i=a.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,d=l.length,u;c<d;++c)for(n=0,u=l[c];n<i;++n)if((o=a[n]).type===u.type&&o.name===u.name)return u.value}return}for(l=t?Qit:Hit,n=0;n<i;++n)this.each(l(a[n],t,r));return this}function Yfe(e,t,r){var a=Gfe(e),n=a.CustomEvent;typeof n=="function"?n=new n(t,r):(n=a.document.createEvent("Event"),r?(n.initEvent(t,r.bubbles,r.cancelable),n.detail=r.detail):n.initEvent(t,!1,!1)),e.dispatchEvent(n)}function $it(e,t){return function(){return Yfe(this,e,t)}}function Vit(e,t){return function(){return Yfe(this,e,t.apply(this,arguments))}}function Git(e,t){return this.each((typeof t=="function"?Vit:$it)(e,t))}function*qit(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var a=e[t],n=0,i=a.length,o;n<i;++n)(o=a[n])&&(yield o)}var Jfe=[null];function wd(e,t){this._groups=e,this._parents=t}function OE(){return new wd([[document.documentElement]],Jfe)}function Kit(){return this}wd.prototype=OE.prototype={constructor:wd,select:bst,selectAll:Est,selectChild:Sst,selectChildren:Ist,filter:Ost,data:Mst,enter:Dst,exit:Hst,join:Qst,merge:zst,selection:Kit,order:$st,sort:Vst,call:qst,nodes:Kst,node:Wst,size:Xst,empty:Yst,each:Jst,attr:sit,style:cit,property:hit,classed:git,text:yit,html:Cit,raise:kit,lower:_it,append:Tit,insert:Iit,remove:Dit,clone:Rit,datum:Lit,on:zit,dispatch:Git,[Symbol.iterator]:qit};function lu(e){return typeof e=="string"?new wd([[document.querySelector(e)]],[document.documentElement]):new wd([[e]],Jfe)}function Wit(e){let t;for(;t=e.sourceEvent;)e=t;return e}function dh(e,t){if(e=Wit(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var a=r.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,a=a.matrixTransform(t.getScreenCTM().inverse()),[a.x,a.y]}if(t.getBoundingClientRect){var n=t.getBoundingClientRect();return[e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop]}}return[e.pageX,e.pageY]}const Xit={passive:!1},TN={capture:!0,passive:!1};function pO(e){e.stopImmediatePropagation()}function Rb(e){e.preventDefault(),e.stopImmediatePropagation()}function Zfe(e){var t=e.document.documentElement,r=lu(e).on("dragstart.drag",Rb,TN);"onselectstart"in t?r.on("selectstart.drag",Rb,TN):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ehe(e,t){var r=e.document.documentElement,a=lu(e).on("dragstart.drag",null);t&&(a.on("click.drag",Rb,TN),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in r?a.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Dj=e=>()=>e;function OP(e,{sourceEvent:t,subject:r,target:a,identifier:n,active:i,x:o,y:l,dx:c,dy:d,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:n,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:u}})}OP.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Yit(e){return!e.ctrlKey&&!e.button}function Jit(){return this.parentNode}function Zit(e,t){return t??{x:e.x,y:e.y}}function eot(){return navigator.maxTouchPoints||"ontouchstart"in this}function tot(){var e=Yit,t=Jit,r=Zit,a=eot,n={},i=j3("start","drag","end"),o=0,l,c,d,u,f=0;function A(B){B.on("mousedown.drag",m).filter(a).on("touchstart.drag",v).on("touchmove.drag",y,Xit).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(B,_){if(!(u||!e.call(this,B,_))){var I=E(this,t.call(this,B,_),B,_,"mouse");I&&(lu(B.view).on("mousemove.drag",g,TN).on("mouseup.drag",x,TN),Zfe(B.view),pO(B),d=!1,l=B.clientX,c=B.clientY,I("start",B))}}function g(B){if(Rb(B),!d){var _=B.clientX-l,I=B.clientY-c;d=_*_+I*I>f}n.mouse("drag",B)}function x(B){lu(B.view).on("mousemove.drag mouseup.drag",null),ehe(B.view,d),Rb(B),n.mouse("end",B)}function v(B,_){if(e.call(this,B,_)){var I=B.changedTouches,j=t.call(this,B,_),k=I.length,T,L;for(T=0;T<k;++T)(L=E(this,j,B,_,I[T].identifier,I[T]))&&(pO(B),L("start",B,I[T]))}}function y(B){var _=B.changedTouches,I=_.length,j,k;for(j=0;j<I;++j)(k=n[_[j].identifier])&&(Rb(B),k("drag",B,_[j]))}function N(B){var _=B.changedTouches,I=_.length,j,k;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),j=0;j<I;++j)(k=n[_[j].identifier])&&(pO(B),k("end",B,_[j]))}function E(B,_,I,j,k,T){var L=i.copy(),F=dh(T||I,_),S,M,H;if((H=r.call(B,new OP("beforestart",{sourceEvent:I,target:A,identifier:k,active:o,x:F[0],y:F[1],dx:0,dy:0,dispatch:L}),j))!=null)return S=H.x-F[0]||0,M=H.y-F[1]||0,function K(Q,G,X){var Z=F,U;switch(Q){case"start":n[k]=K,U=o++;break;case"end":delete n[k],--o;case"drag":F=dh(X||G,_),U=o;break}L.call(Q,B,new OP(Q,{sourceEvent:G,subject:H,target:A,identifier:k,active:U,x:F[0]+S,y:F[1]+M,dx:F[0]-Z[0],dy:F[1]-Z[1],dispatch:L}),j)}}return A.filter=function(B){return arguments.length?(e=typeof B=="function"?B:Dj(!!B),A):e},A.container=function(B){return arguments.length?(t=typeof B=="function"?B:Dj(B),A):t},A.subject=function(B){return arguments.length?(r=typeof B=="function"?B:Dj(B),A):r},A.touchable=function(B){return arguments.length?(a=typeof B=="function"?B:Dj(!!B),A):a},A.on=function(){var B=i.on.apply(i,arguments);return B===i?A:B},A.clickDistance=function(B){return arguments.length?(f=(B=+B)*B,A):Math.sqrt(f)},A}var w1=0,Kw=0,gw=0,the=1e3,KS,Ww,WS=0,px=0,S3=0,BN=typeof performance=="object"&&performance.now?performance:Date,rhe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function pU(){return px||(rhe(rot),px=BN.now()+S3)}function rot(){px=0}function XS(){this._call=this._time=this._next=null}XS.prototype=ahe.prototype={constructor:XS,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?pU():+r)+(t==null?0:+t),!this._next&&Ww!==this&&(Ww?Ww._next=this:KS=this,Ww=this),this._call=e,this._time=r,DP()},stop:function(){this._call&&(this._call=null,this._time=1/0,DP())}};function ahe(e,t,r){var a=new XS;return a.restart(e,t,r),a}function aot(){pU(),++w1;for(var e=KS,t;e;)(t=px-e._time)>=0&&e._call.call(void 0,t),e=e._next;--w1}function xY(){px=(WS=BN.now())+S3,w1=Kw=0;try{aot()}finally{w1=0,sot(),px=0}}function not(){var e=BN.now(),t=e-WS;t>the&&(S3-=t,WS=e)}function sot(){for(var e,t=KS,r,a=1/0;t;)t._call?(a>t._time&&(a=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:KS=r);Ww=e,DP(a)}function DP(e){if(!w1){Kw&&(Kw=clearTimeout(Kw));var t=e-px;t>24?(e<1/0&&(Kw=setTimeout(xY,e-BN.now()-S3)),gw&&(gw=clearInterval(gw))):(gw||(WS=BN.now(),gw=setInterval(not,the)),w1=1,rhe(xY))}}function vY(e,t,r){var a=new XS;return t=t==null?0:+t,a.restart(n=>{a.stop(),e(n+t)},t,r),a}var iot=j3("start","end","cancel","interrupt"),oot=[],nhe=0,bY=1,FP=2,Mk=3,yY=4,PP=5,Uk=6;function _3(e,t,r,a,n,i){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;lot(e,r,{name:t,index:a,group:n,on:iot,tween:oot,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:nhe})}function gU(e,t){var r=Ef(e,t);if(r.state>nhe)throw new Error("too late; already scheduled");return r}function zh(e,t){var r=Ef(e,t);if(r.state>Mk)throw new Error("too late; already running");return r}function Ef(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function lot(e,t,r){var a=e.__transition,n;a[t]=r,r.timer=ahe(i,0,r.time);function i(d){r.state=bY,r.timer.restart(o,r.delay,r.time),r.delay<=d&&o(d-r.delay)}function o(d){var u,f,A,m;if(r.state!==bY)return c();for(u in a)if(m=a[u],m.name===r.name){if(m.state===Mk)return vY(o);m.state===yY?(m.state=Uk,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete a[u]):+u<t&&(m.state=Uk,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete a[u])}if(vY(function(){r.state===Mk&&(r.state=yY,r.timer.restart(l,r.delay,r.time),l(d))}),r.state=FP,r.on.call("start",e,e.__data__,r.index,r.group),r.state===FP){for(r.state=Mk,n=new Array(A=r.tween.length),u=0,f=-1;u<A;++u)(m=r.tween[u].value.call(e,e.__data__,r.index,r.group))&&(n[++f]=m);n.length=f+1}}function l(d){for(var u=d<r.duration?r.ease.call(null,d/r.duration):(r.timer.restart(c),r.state=PP,1),f=-1,A=n.length;++f<A;)n[f].call(e,u);r.state===PP&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=Uk,r.timer.stop(),delete a[t];for(var d in a)return;delete e.__transition}}function Hk(e,t){var r=e.__transition,a,n,i=!0,o;if(r){t=t==null?null:t+"";for(o in r){if((a=r[o]).name!==t){i=!1;continue}n=a.state>FP&&a.state<PP,a.state=Uk,a.timer.stop(),a.on.call(n?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete r[o]}i&&delete e.__transition}}function cot(e){return this.each(function(){Hk(this,e)})}function dot(e,t){var r,a;return function(){var n=zh(this,e),i=n.tween;if(i!==r){a=r=i;for(var o=0,l=a.length;o<l;++o)if(a[o].name===t){a=a.slice(),a.splice(o,1);break}}n.tween=a}}function uot(e,t,r){var a,n;if(typeof r!="function")throw new Error;return function(){var i=zh(this,e),o=i.tween;if(o!==a){n=(a=o).slice();for(var l={name:t,value:r},c=0,d=n.length;c<d;++c)if(n[c].name===t){n[c]=l;break}c===d&&n.push(l)}i.tween=n}}function fot(e,t){var r=this._id;if(e+="",arguments.length<2){for(var a=Ef(this.node(),r).tween,n=0,i=a.length,o;n<i;++n)if((o=a[n]).name===e)return o.value;return null}return this.each((t==null?dot:uot)(r,e,t))}function xU(e,t,r){var a=e._id;return e.each(function(){var n=zh(this,a);(n.value||(n.value={}))[t]=r.apply(this,arguments)}),function(n){return Ef(n,a).value[t]}}function she(e,t){var r;return(typeof t=="number"?Xu:t instanceof Ax?bS:(r=Ax(t))?(t=r,bS):tle)(e,t)}function hot(e){return function(){this.removeAttribute(e)}}function Aot(e){return function(){this.removeAttributeNS(e.space,e.local)}}function mot(e,t,r){var a,n=r+"",i;return function(){var o=this.getAttribute(e);return o===n?null:o===a?i:i=t(a=o,r)}}function pot(e,t,r){var a,n=r+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===n?null:o===a?i:i=t(a=o,r)}}function got(e,t,r){var a,n,i;return function(){var o,l=r(this),c;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=l+"",o===c?null:o===a&&c===n?i:(n=c,i=t(a=o,l)))}}function xot(e,t,r){var a,n,i;return function(){var o,l=r(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=l+"",o===c?null:o===a&&c===n?i:(n=c,i=t(a=o,l)))}}function vot(e,t){var r=k3(e),a=r==="transform"?V9e:she;return this.attrTween(e,typeof t=="function"?(r.local?xot:got)(r,a,xU(this,"attr."+e,t)):t==null?(r.local?Aot:hot)(r):(r.local?pot:mot)(r,a,t))}function bot(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function yot(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function wot(e,t){var r,a;function n(){var i=t.apply(this,arguments);return i!==a&&(r=(a=i)&&yot(e,i)),r}return n._value=t,n}function Not(e,t){var r,a;function n(){var i=t.apply(this,arguments);return i!==a&&(r=(a=i)&&bot(e,i)),r}return n._value=t,n}function Eot(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var a=k3(e);return this.tween(r,(a.local?wot:Not)(a,t))}function Cot(e,t){return function(){gU(this,e).delay=+t.apply(this,arguments)}}function jot(e,t){return t=+t,function(){gU(this,e).delay=t}}function kot(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Cot:jot)(t,e)):Ef(this.node(),t).delay}function Sot(e,t){return function(){zh(this,e).duration=+t.apply(this,arguments)}}function _ot(e,t){return t=+t,function(){zh(this,e).duration=t}}function Tot(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Sot:_ot)(t,e)):Ef(this.node(),t).duration}function Bot(e,t){if(typeof t!="function")throw new Error;return function(){zh(this,e).ease=t}}function Iot(e){var t=this._id;return arguments.length?this.each(Bot(t,e)):Ef(this.node(),t).ease}function Oot(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;zh(this,e).ease=r}}function Dot(e){if(typeof e!="function")throw new Error;return this.each(Oot(this._id,e))}function Fot(e){typeof e!="function"&&(e=zfe(e));for(var t=this._groups,r=t.length,a=new Array(r),n=0;n<r;++n)for(var i=t[n],o=i.length,l=a[n]=[],c,d=0;d<o;++d)(c=i[d])&&e.call(c,c.__data__,d,i)&&l.push(c);return new fA(a,this._parents,this._name,this._id)}function Pot(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,a=t.length,n=r.length,i=Math.min(a,n),o=new Array(a),l=0;l<i;++l)for(var c=t[l],d=r[l],u=c.length,f=o[l]=new Array(u),A,m=0;m<u;++m)(A=c[m]||d[m])&&(f[m]=A);for(;l<a;++l)o[l]=t[l];return new fA(o,this._parents,this._name,this._id)}function Rot(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function Lot(e,t,r){var a,n,i=Rot(t)?gU:zh;return function(){var o=i(this,e),l=o.on;l!==a&&(n=(a=l).copy()).on(t,r),o.on=n}}function Mot(e,t){var r=this._id;return arguments.length<2?Ef(this.node(),r).on.on(e):this.each(Lot(r,e,t))}function Uot(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function Hot(){return this.on("end.remove",Uot(this._id))}function Qot(e){var t=this._name,r=this._id;typeof e!="function"&&(e=AU(e));for(var a=this._groups,n=a.length,i=new Array(n),o=0;o<n;++o)for(var l=a[o],c=l.length,d=i[o]=new Array(c),u,f,A=0;A<c;++A)(u=l[A])&&(f=e.call(u,u.__data__,A,l))&&("__data__"in u&&(f.__data__=u.__data__),d[A]=f,_3(d[A],t,r,A,d,Ef(u,r)));return new fA(i,this._parents,t,r)}function zot(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Qfe(e));for(var a=this._groups,n=a.length,i=[],o=[],l=0;l<n;++l)for(var c=a[l],d=c.length,u,f=0;f<d;++f)if(u=c[f]){for(var A=e.call(u,u.__data__,f,c),m,g=Ef(u,r),x=0,v=A.length;x<v;++x)(m=A[x])&&_3(m,t,r,x,A,g);i.push(A),o.push(u)}return new fA(i,o,t,r)}var $ot=OE.prototype.constructor;function Vot(){return new $ot(this._groups,this._parents)}function Got(e,t){var r,a,n;return function(){var i=y1(this,e),o=(this.style.removeProperty(e),y1(this,e));return i===o?null:i===r&&o===a?n:n=t(r=i,a=o)}}function ihe(e){return function(){this.style.removeProperty(e)}}function qot(e,t,r){var a,n=r+"",i;return function(){var o=y1(this,e);return o===n?null:o===a?i:i=t(a=o,r)}}function Kot(e,t,r){var a,n,i;return function(){var o=y1(this,e),l=r(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),y1(this,e))),o===c?null:o===a&&c===n?i:(n=c,i=t(a=o,l))}}function Wot(e,t){var r,a,n,i="style."+t,o="end."+i,l;return function(){var c=zh(this,e),d=c.on,u=c.value[i]==null?l||(l=ihe(t)):void 0;(d!==r||n!==u)&&(a=(r=d).copy()).on(o,n=u),c.on=a}}function Xot(e,t,r){var a=(e+="")=="transform"?$9e:she;return t==null?this.styleTween(e,Got(e,a)).on("end.style."+e,ihe(e)):typeof t=="function"?this.styleTween(e,Kot(e,a,xU(this,"style."+e,t))).each(Wot(this._id,e)):this.styleTween(e,qot(e,a,t),r).on("end.style."+e,null)}function Yot(e,t,r){return function(a){this.style.setProperty(e,t.call(this,a),r)}}function Jot(e,t,r){var a,n;function i(){var o=t.apply(this,arguments);return o!==n&&(a=(n=o)&&Yot(e,o,r)),a}return i._value=t,i}function Zot(e,t,r){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;return this.tween(a,Jot(e,t,r??""))}function elt(e){return function(){this.textContent=e}}function tlt(e){return function(){var t=e(this);this.textContent=t??""}}function rlt(e){return this.tween("text",typeof e=="function"?tlt(xU(this,"text",e)):elt(e==null?"":e+""))}function alt(e){return function(t){this.textContent=e.call(this,t)}}function nlt(e){var t,r;function a(){var n=e.apply(this,arguments);return n!==r&&(t=(r=n)&&alt(n)),t}return a._value=e,a}function slt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,nlt(e))}function ilt(){for(var e=this._name,t=this._id,r=ohe(),a=this._groups,n=a.length,i=0;i<n;++i)for(var o=a[i],l=o.length,c,d=0;d<l;++d)if(c=o[d]){var u=Ef(c,t);_3(c,e,r,d,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new fA(a,this._parents,e,r)}function olt(){var e,t,r=this,a=r._id,n=r.size();return new Promise(function(i,o){var l={value:o},c={value:function(){--n===0&&i()}};r.each(function(){var d=zh(this,a),u=d.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),d.on=t}),n===0&&i()})}var llt=0;function fA(e,t,r,a){this._groups=e,this._parents=t,this._name=r,this._id=a}function ohe(){return++llt}var w0=OE.prototype;fA.prototype={constructor:fA,select:Qot,selectAll:zot,selectChild:w0.selectChild,selectChildren:w0.selectChildren,filter:Fot,merge:Pot,selection:Vot,transition:ilt,call:w0.call,nodes:w0.nodes,node:w0.node,size:w0.size,empty:w0.empty,each:w0.each,on:Mot,attr:vot,attrTween:Eot,style:Xot,styleTween:Zot,text:rlt,textTween:slt,remove:Hot,tween:fot,delay:kot,duration:Tot,ease:Iot,easeVarying:Dot,end:olt,[Symbol.iterator]:w0[Symbol.iterator]};function clt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var dlt={time:null,delay:0,duration:250,ease:clt};function ult(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function flt(e){var t,r;e instanceof fA?(t=e._id,e=e._name):(t=ohe(),(r=dlt).time=pU(),e=e==null?null:e+"");for(var a=this._groups,n=a.length,i=0;i<n;++i)for(var o=a[i],l=o.length,c,d=0;d<l;++d)(c=o[d])&&_3(c,e,t,d,o,r||ult(c,t));return new fA(a,this._parents,e,t)}OE.prototype.interrupt=cot;OE.prototype.transition=flt;const Fj=e=>()=>e;function hlt(e,{sourceEvent:t,target:r,transform:a,dispatch:n}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:n}})}function M0(e,t,r){this.k=e,this.x=t,this.y=r}M0.prototype={constructor:M0,scale:function(e){return e===1?this:new M0(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new M0(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Km=new M0(1,0,0);M0.prototype;function gO(e){e.stopImmediatePropagation()}function xw(e){e.preventDefault(),e.stopImmediatePropagation()}function Alt(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function mlt(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function wY(){return this.__zoom||Km}function plt(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function glt(){return navigator.maxTouchPoints||"ontouchstart"in this}function xlt(e,t,r){var a=e.invertX(t[0][0])-r[0][0],n=e.invertX(t[1][0])-r[1][0],i=e.invertY(t[0][1])-r[0][1],o=e.invertY(t[1][1])-r[1][1];return e.translate(n>a?(a+n)/2:Math.min(0,a)||Math.max(0,n),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function vlt(){var e=Alt,t=mlt,r=xlt,a=plt,n=glt,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,c=W9e,d=j3("start","zoom","end"),u,f,A,m=500,g=150,x=0,v=10;function y(H){H.property("__zoom",wY).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",L).filter(n).on("touchstart.zoom",F).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(H,K,Q,G){var X=H.selection?H.selection():H;X.property("__zoom",wY),H!==X?_(H,K,Q,G):X.interrupt().each(function(){I(this,arguments).event(G).start().zoom(null,typeof K=="function"?K.apply(this,arguments):K).end()})},y.scaleBy=function(H,K,Q,G){y.scaleTo(H,function(){var X=this.__zoom.k,Z=typeof K=="function"?K.apply(this,arguments):K;return X*Z},Q,G)},y.scaleTo=function(H,K,Q,G){y.transform(H,function(){var X=t.apply(this,arguments),Z=this.__zoom,U=Q==null?B(X):typeof Q=="function"?Q.apply(this,arguments):Q,Y=Z.invert(U),P=typeof K=="function"?K.apply(this,arguments):K;return r(E(N(Z,P),U,Y),X,o)},Q,G)},y.translateBy=function(H,K,Q,G){y.transform(H,function(){return r(this.__zoom.translate(typeof K=="function"?K.apply(this,arguments):K,typeof Q=="function"?Q.apply(this,arguments):Q),t.apply(this,arguments),o)},null,G)},y.translateTo=function(H,K,Q,G,X){y.transform(H,function(){var Z=t.apply(this,arguments),U=this.__zoom,Y=G==null?B(Z):typeof G=="function"?G.apply(this,arguments):G;return r(Km.translate(Y[0],Y[1]).scale(U.k).translate(typeof K=="function"?-K.apply(this,arguments):-K,typeof Q=="function"?-Q.apply(this,arguments):-Q),Z,o)},G,X)};function N(H,K){return K=Math.max(i[0],Math.min(i[1],K)),K===H.k?H:new M0(K,H.x,H.y)}function E(H,K,Q){var G=K[0]-Q[0]*H.k,X=K[1]-Q[1]*H.k;return G===H.x&&X===H.y?H:new M0(H.k,G,X)}function B(H){return[(+H[0][0]+ +H[1][0])/2,(+H[0][1]+ +H[1][1])/2]}function _(H,K,Q,G){H.on("start.zoom",function(){I(this,arguments).event(G).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(G).end()}).tween("zoom",function(){var X=this,Z=arguments,U=I(X,Z).event(G),Y=t.apply(X,Z),P=Q==null?B(Y):typeof Q=="function"?Q.apply(X,Z):Q,D=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),W=X.__zoom,J=typeof K=="function"?K.apply(X,Z):K,ce=c(W.invert(P).concat(D/W.k),J.invert(P).concat(D/J.k));return function(ie){if(ie===1)ie=J;else{var re=ce(ie),de=D/re[2];ie=new M0(de,P[0]-re[0]*de,P[1]-re[1]*de)}U.zoom(null,ie)}})}function I(H,K,Q){return!Q&&H.__zooming||new j(H,K)}function j(H,K){this.that=H,this.args=K,this.active=0,this.sourceEvent=null,this.extent=t.apply(H,K),this.taps=0}j.prototype={event:function(H){return H&&(this.sourceEvent=H),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(H,K){return this.mouse&&H!=="mouse"&&(this.mouse[1]=K.invert(this.mouse[0])),this.touch0&&H!=="touch"&&(this.touch0[1]=K.invert(this.touch0[0])),this.touch1&&H!=="touch"&&(this.touch1[1]=K.invert(this.touch1[0])),this.that.__zoom=K,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(H){var K=lu(this.that).datum();d.call(H,this.that,new hlt(H,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:d}),K)}};function k(H,...K){if(!e.apply(this,arguments))return;var Q=I(this,K).event(H),G=this.__zoom,X=Math.max(i[0],Math.min(i[1],G.k*Math.pow(2,a.apply(this,arguments)))),Z=dh(H);if(Q.wheel)(Q.mouse[0][0]!==Z[0]||Q.mouse[0][1]!==Z[1])&&(Q.mouse[1]=G.invert(Q.mouse[0]=Z)),clearTimeout(Q.wheel);else{if(G.k===X)return;Q.mouse=[Z,G.invert(Z)],Hk(this),Q.start()}xw(H),Q.wheel=setTimeout(U,g),Q.zoom("mouse",r(E(N(G,X),Q.mouse[0],Q.mouse[1]),Q.extent,o));function U(){Q.wheel=null,Q.end()}}function T(H,...K){if(A||!e.apply(this,arguments))return;var Q=H.currentTarget,G=I(this,K,!0).event(H),X=lu(H.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",D,!0),Z=dh(H,Q),U=H.clientX,Y=H.clientY;Zfe(H.view),gO(H),G.mouse=[Z,this.__zoom.invert(Z)],Hk(this),G.start();function P(W){if(xw(W),!G.moved){var J=W.clientX-U,ce=W.clientY-Y;G.moved=J*J+ce*ce>x}G.event(W).zoom("mouse",r(E(G.that.__zoom,G.mouse[0]=dh(W,Q),G.mouse[1]),G.extent,o))}function D(W){X.on("mousemove.zoom mouseup.zoom",null),ehe(W.view,G.moved),xw(W),G.event(W).end()}}function L(H,...K){if(e.apply(this,arguments)){var Q=this.__zoom,G=dh(H.changedTouches?H.changedTouches[0]:H,this),X=Q.invert(G),Z=Q.k*(H.shiftKey?.5:2),U=r(E(N(Q,Z),G,X),t.apply(this,K),o);xw(H),l>0?lu(this).transition().duration(l).call(_,U,G,H):lu(this).call(y.transform,U,G,H)}}function F(H,...K){if(e.apply(this,arguments)){var Q=H.touches,G=Q.length,X=I(this,K,H.changedTouches.length===G).event(H),Z,U,Y,P;for(gO(H),U=0;U<G;++U)Y=Q[U],P=dh(Y,this),P=[P,this.__zoom.invert(P),Y.identifier],X.touch0?!X.touch1&&X.touch0[2]!==P[2]&&(X.touch1=P,X.taps=0):(X.touch0=P,Z=!0,X.taps=1+!!u);u&&(u=clearTimeout(u)),Z&&(X.taps<2&&(f=P[0],u=setTimeout(function(){u=null},m)),Hk(this),X.start())}}function S(H,...K){if(this.__zooming){var Q=I(this,K).event(H),G=H.changedTouches,X=G.length,Z,U,Y,P;for(xw(H),Z=0;Z<X;++Z)U=G[Z],Y=dh(U,this),Q.touch0&&Q.touch0[2]===U.identifier?Q.touch0[0]=Y:Q.touch1&&Q.touch1[2]===U.identifier&&(Q.touch1[0]=Y);if(U=Q.that.__zoom,Q.touch1){var D=Q.touch0[0],W=Q.touch0[1],J=Q.touch1[0],ce=Q.touch1[1],ie=(ie=J[0]-D[0])*ie+(ie=J[1]-D[1])*ie,re=(re=ce[0]-W[0])*re+(re=ce[1]-W[1])*re;U=N(U,Math.sqrt(ie/re)),Y=[(D[0]+J[0])/2,(D[1]+J[1])/2],P=[(W[0]+ce[0])/2,(W[1]+ce[1])/2]}else if(Q.touch0)Y=Q.touch0[0],P=Q.touch0[1];else return;Q.zoom("touch",r(E(U,Y,P),Q.extent,o))}}function M(H,...K){if(this.__zooming){var Q=I(this,K).event(H),G=H.changedTouches,X=G.length,Z,U;for(gO(H),A&&clearTimeout(A),A=setTimeout(function(){A=null},m),Z=0;Z<X;++Z)U=G[Z],Q.touch0&&Q.touch0[2]===U.identifier?delete Q.touch0:Q.touch1&&Q.touch1[2]===U.identifier&&delete Q.touch1;if(Q.touch1&&!Q.touch0&&(Q.touch0=Q.touch1,delete Q.touch1),Q.touch0)Q.touch0[1]=this.__zoom.invert(Q.touch0[0]);else if(Q.end(),Q.taps===2&&(U=dh(U,this),Math.hypot(f[0]-U[0],f[1]-U[1])<v)){var Y=lu(this).on("dblclick.zoom");Y&&Y.apply(this,arguments)}}}return y.wheelDelta=function(H){return arguments.length?(a=typeof H=="function"?H:Fj(+H),y):a},y.filter=function(H){return arguments.length?(e=typeof H=="function"?H:Fj(!!H),y):e},y.touchable=function(H){return arguments.length?(n=typeof H=="function"?H:Fj(!!H),y):n},y.extent=function(H){return arguments.length?(t=typeof H=="function"?H:Fj([[+H[0][0],+H[0][1]],[+H[1][0],+H[1][1]]]),y):t},y.scaleExtent=function(H){return arguments.length?(i[0]=+H[0],i[1]=+H[1],y):[i[0],i[1]]},y.translateExtent=function(H){return arguments.length?(o[0][0]=+H[0][0],o[1][0]=+H[1][0],o[0][1]=+H[0][1],o[1][1]=+H[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(H){return arguments.length?(r=H,y):r},y.duration=function(H){return arguments.length?(l=+H,y):l},y.interpolate=function(H){return arguments.length?(c=H,y):c},y.on=function(){var H=d.on.apply(d,arguments);return H===d?y:H},y.clickDistance=function(H){return arguments.length?(x=(H=+H)*H,y):Math.sqrt(x)},y.tapDistance=function(H){return arguments.length?(v=+H,y):v},y}const T3=w.createContext(null),blt=T3.Provider,hA={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},lhe=hA.error001();function xs(e,t){const r=w.useContext(T3);if(r===null)throw new Error(lhe);return Ufe(r,e,t)}const go=()=>{const e=w.useContext(T3);if(e===null)throw new Error(lhe);return w.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},ylt=e=>e.userSelectionActive?"none":"all";function che({position:e,children:t,className:r,style:a,...n}){const i=xs(ylt),o=`${e}`.split("-");return ft.createElement("div",{className:Wl(["react-flow__panel",r,...o]),style:{...a,pointerEvents:i},...n},t)}function wlt({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:ft.createElement(che,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ft.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Nlt=({x:e,y:t,label:r,labelStyle:a={},labelShowBg:n=!0,labelBgStyle:i={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:c,className:d,...u})=>{const f=w.useRef(null),[A,m]=w.useState({x:0,y:0,width:0,height:0}),g=Wl(["react-flow__edge-textwrapper",d]);return w.useEffect(()=>{if(f.current){const x=f.current.getBBox();m({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),typeof r>"u"||!r?null:ft.createElement("g",{transform:`translate(${e-A.width/2} ${t-A.height/2})`,className:g,visibility:A.width?"visible":"hidden",...u},n&&ft.createElement("rect",{width:A.width+2*o[0],x:-o[0],y:-o[1],height:A.height+2*o[1],className:"react-flow__edge-textbg",style:i,rx:l,ry:l}),ft.createElement("text",{className:"react-flow__edge-text",y:A.height/2,dy:"0.3em",ref:f,style:a},r),c)};var Elt=w.memo(Nlt);const vU=e=>({width:e.offsetWidth,height:e.offsetHeight}),N1=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),bU=(e={x:0,y:0},t)=>({x:N1(e.x,t[0][0],t[1][0]),y:N1(e.y,t[0][1],t[1][1])}),NY=(e,t,r)=>e<t?N1(Math.abs(e-t),1,50)/50:e>r?-N1(Math.abs(e-r),1,50)/50:0,dhe=(e,t)=>{const r=NY(e.x,35,t.width-35)*20,a=NY(e.y,35,t.height-35)*20;return[r,a]},uhe=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Clt=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),yU=({x:e,y:t,width:r,height:a})=>({x:e,y:t,x2:e+r,y2:t+a}),jlt=({x:e,y:t,x2:r,y2:a})=>({x:e,y:t,width:r-e,height:a-t}),EY=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),RP=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),a=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*a)},klt=e=>fu(e.width)&&fu(e.height)&&fu(e.x)&&fu(e.y),fu=e=>!isNaN(e)&&isFinite(e),Ps=Symbol.for("internals"),fhe=["Enter"," ","Escape"],Slt=(e,t)=>{},_lt=e=>"nativeEvent"in e;function LP(e){var n,i;const t=_lt(e)?e.nativeEvent:e,r=((i=(n=t.composedPath)==null?void 0:n.call(t))==null?void 0:i[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const hhe=e=>"clientX"in e,Wm=(e,t)=>{var i,o;const r=hhe(e),a=r?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,n=r?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:a-((t==null?void 0:t.left)??0),y:n-((t==null?void 0:t.top)??0)}},YS=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},DE=({id:e,path:t,labelX:r,labelY:a,label:n,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:u,markerEnd:f,markerStart:A,interactionWidth:m=20})=>ft.createElement(ft.Fragment,null,ft.createElement("path",{id:e,style:u,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:A}),m&&ft.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),n&&fu(r)&&fu(a)?ft.createElement(Elt,{x:r,y:a,label:n,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d}):null);DE.displayName="BaseEdge";function vw(e,t,r){return r===void 0?r:a=>{const n=t().edges.find(i=>i.id===e);n&&r(a,{...n})}}function Ahe({sourceX:e,sourceY:t,targetX:r,targetY:a}){const n=Math.abs(r-e)/2,i=r<e?r+n:r-n,o=Math.abs(a-t)/2,l=a<t?a+o:a-o;return[i,l,n,o]}function mhe({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:n,sourceControlY:i,targetControlX:o,targetControlY:l}){const c=e*.125+n*.375+o*.375+r*.125,d=t*.125+i*.375+l*.375+a*.125,u=Math.abs(c-e),f=Math.abs(d-t);return[c,d,u,f]}var gx;(function(e){e.Strict="strict",e.Loose="loose"})(gx||(gx={}));var Bg;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Bg||(Bg={}));var IN;(function(e){e.Partial="partial",e.Full="full"})(IN||(IN={}));var Sm;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Sm||(Sm={}));var JS;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(JS||(JS={}));var Cr;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Cr||(Cr={}));function CY({pos:e,x1:t,y1:r,x2:a,y2:n}){return e===Cr.Left||e===Cr.Right?[.5*(t+a),r]:[t,.5*(r+n)]}function phe({sourceX:e,sourceY:t,sourcePosition:r=Cr.Bottom,targetX:a,targetY:n,targetPosition:i=Cr.Top}){const[o,l]=CY({pos:r,x1:e,y1:t,x2:a,y2:n}),[c,d]=CY({pos:i,x1:a,y1:n,x2:e,y2:t}),[u,f,A,m]=mhe({sourceX:e,sourceY:t,targetX:a,targetY:n,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${t} C${o},${l} ${c},${d} ${a},${n}`,u,f,A,m]}const wU=w.memo(({sourceX:e,sourceY:t,targetX:r,targetY:a,sourcePosition:n=Cr.Bottom,targetPosition:i=Cr.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:f,style:A,markerEnd:m,markerStart:g,interactionWidth:x})=>{const[v,y,N]=phe({sourceX:e,sourceY:t,sourcePosition:n,targetX:r,targetY:a,targetPosition:i});return ft.createElement(DE,{path:v,labelX:y,labelY:N,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:f,style:A,markerEnd:m,markerStart:g,interactionWidth:x})});wU.displayName="SimpleBezierEdge";const jY={[Cr.Left]:{x:-1,y:0},[Cr.Right]:{x:1,y:0},[Cr.Top]:{x:0,y:-1},[Cr.Bottom]:{x:0,y:1}},Tlt=({source:e,sourcePosition:t=Cr.Bottom,target:r})=>t===Cr.Left||t===Cr.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},kY=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Blt({source:e,sourcePosition:t=Cr.Bottom,target:r,targetPosition:a=Cr.Top,center:n,offset:i}){const o=jY[t],l=jY[a],c={x:e.x+o.x*i,y:e.y+o.y*i},d={x:r.x+l.x*i,y:r.y+l.y*i},u=Tlt({source:c,sourcePosition:t,target:d}),f=u.x!==0?"x":"y",A=u[f];let m=[],g,x;const v={x:0,y:0},y={x:0,y:0},[N,E,B,_]=Ahe({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(o[f]*l[f]===-1){g=n.x??N,x=n.y??E;const j=[{x:g,y:c.y},{x:g,y:d.y}],k=[{x:c.x,y:x},{x:d.x,y:x}];o[f]===A?m=f==="x"?j:k:m=f==="x"?k:j}else{const j=[{x:c.x,y:d.y}],k=[{x:d.x,y:c.y}];if(f==="x"?m=o.x===A?k:j:m=o.y===A?j:k,t===a){const M=Math.abs(e[f]-r[f]);if(M<=i){const H=Math.min(i-1,i-M);o[f]===A?v[f]=(c[f]>e[f]?-1:1)*H:y[f]=(d[f]>r[f]?-1:1)*H}}if(t!==a){const M=f==="x"?"y":"x",H=o[f]===l[M],K=c[M]>d[M],Q=c[M]<d[M];(o[f]===1&&(!H&&K||H&&Q)||o[f]!==1&&(!H&&Q||H&&K))&&(m=f==="x"?j:k)}const T={x:c.x+v.x,y:c.y+v.y},L={x:d.x+y.x,y:d.y+y.y},F=Math.max(Math.abs(T.x-m[0].x),Math.abs(L.x-m[0].x)),S=Math.max(Math.abs(T.y-m[0].y),Math.abs(L.y-m[0].y));F>=S?(g=(T.x+L.x)/2,x=m[0].y):(g=m[0].x,x=(T.y+L.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...m,{x:d.x+y.x,y:d.y+y.y},r],g,x,B,_]}function Ilt(e,t,r,a){const n=Math.min(kY(e,t)/2,kY(t,r)/2,a),{x:i,y:o}=t;if(e.x===i&&i===r.x||e.y===o&&o===r.y)return`L${i} ${o}`;if(e.y===o){const d=e.x<r.x?-1:1,u=e.y<r.y?1:-1;return`L ${i+n*d},${o}Q ${i},${o} ${i},${o+n*u}`}const l=e.x<r.x?1:-1,c=e.y<r.y?-1:1;return`L ${i},${o+n*c}Q ${i},${o} ${i+n*l},${o}`}function MP({sourceX:e,sourceY:t,sourcePosition:r=Cr.Bottom,targetX:a,targetY:n,targetPosition:i=Cr.Top,borderRadius:o=5,centerX:l,centerY:c,offset:d=20}){const[u,f,A,m,g]=Blt({source:{x:e,y:t},sourcePosition:r,target:{x:a,y:n},targetPosition:i,center:{x:l,y:c},offset:d});return[u.reduce((v,y,N)=>{let E="";return N>0&&N<u.length-1?E=Ilt(u[N-1],y,u[N+1],o):E=`${N===0?"M":"L"}${y.x} ${y.y}`,v+=E,v},""),f,A,m,g]}const B3=w.memo(({sourceX:e,sourceY:t,targetX:r,targetY:a,label:n,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:u,sourcePosition:f=Cr.Bottom,targetPosition:A=Cr.Top,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,N,E]=MP({sourceX:e,sourceY:t,sourcePosition:f,targetX:r,targetY:a,targetPosition:A,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return ft.createElement(DE,{path:y,labelX:N,labelY:E,label:n,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:u,markerEnd:m,markerStart:g,interactionWidth:v})});B3.displayName="SmoothStepEdge";const NU=w.memo(e=>{var t;return ft.createElement(B3,{...e,pathOptions:w.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});NU.displayName="StepEdge";function Olt({sourceX:e,sourceY:t,targetX:r,targetY:a}){const[n,i,o,l]=Ahe({sourceX:e,sourceY:t,targetX:r,targetY:a});return[`M ${e},${t}L ${r},${a}`,n,i,o,l]}const EU=w.memo(({sourceX:e,sourceY:t,targetX:r,targetY:a,label:n,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:u,markerEnd:f,markerStart:A,interactionWidth:m})=>{const[g,x,v]=Olt({sourceX:e,sourceY:t,targetX:r,targetY:a});return ft.createElement(DE,{path:g,labelX:x,labelY:v,label:n,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:u,markerEnd:f,markerStart:A,interactionWidth:m})});EU.displayName="StraightEdge";function Pj(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function SY({pos:e,x1:t,y1:r,x2:a,y2:n,c:i}){switch(e){case Cr.Left:return[t-Pj(t-a,i),r];case Cr.Right:return[t+Pj(a-t,i),r];case Cr.Top:return[t,r-Pj(r-n,i)];case Cr.Bottom:return[t,r+Pj(n-r,i)]}}function ghe({sourceX:e,sourceY:t,sourcePosition:r=Cr.Bottom,targetX:a,targetY:n,targetPosition:i=Cr.Top,curvature:o=.25}){const[l,c]=SY({pos:r,x1:e,y1:t,x2:a,y2:n,c:o}),[d,u]=SY({pos:i,x1:a,y1:n,x2:e,y2:t,c:o}),[f,A,m,g]=mhe({sourceX:e,sourceY:t,targetX:a,targetY:n,sourceControlX:l,sourceControlY:c,targetControlX:d,targetControlY:u});return[`M${e},${t} C${l},${c} ${d},${u} ${a},${n}`,f,A,m,g]}const ZS=w.memo(({sourceX:e,sourceY:t,targetX:r,targetY:a,sourcePosition:n=Cr.Bottom,targetPosition:i=Cr.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:f,style:A,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,N,E]=ghe({sourceX:e,sourceY:t,sourcePosition:n,targetX:r,targetY:a,targetPosition:i,curvature:x==null?void 0:x.curvature});return ft.createElement(DE,{path:y,labelX:N,labelY:E,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:f,style:A,markerEnd:m,markerStart:g,interactionWidth:v})});ZS.displayName="BezierEdge";const CU=w.createContext(null),Dlt=CU.Provider;CU.Consumer;const Flt=()=>w.useContext(CU),Plt=e=>"id"in e&&"source"in e&&"target"in e,Rlt=({source:e,sourceHandle:t,target:r,targetHandle:a})=>`reactflow__edge-${e}${t||""}-${r}${a||""}`,UP=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(a=>`${a}=${e[a]}`).join("&")}`,Llt=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),Mlt=(e,t)=>{if(!e.source||!e.target)return t;let r;return Plt(e)?r={...e}:r={...e,id:Rlt(e)},Llt(r,t)?t:t.concat(r)},HP=({x:e,y:t},[r,a,n],i,[o,l])=>{const c={x:(e-r)/n,y:(t-a)/n};return i?{x:o*Math.round(c.x/o),y:l*Math.round(c.y/l)}:c},xhe=({x:e,y:t},[r,a,n])=>({x:e*n+r,y:t*n+a}),Lb=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],a=(e.height??0)*t[1],n={x:e.position.x-r,y:e.position.y-a};return{...n,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-a}:n}},jU=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((a,n)=>{const{x:i,y:o}=Lb(n,t).positionAbsolute;return Clt(a,yU({x:i,y:o,width:n.width||0,height:n.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return jlt(r)},vhe=(e,t,[r,a,n]=[0,0,1],i=!1,o=!1,l=[0,0])=>{const c={x:(t.x-r)/n,y:(t.y-a)/n,width:t.width/n,height:t.height/n},d=[];return e.forEach(u=>{const{width:f,height:A,selectable:m=!0,hidden:g=!1}=u;if(o&&!m||g)return!1;const{positionAbsolute:x}=Lb(u,l),v={x:x.x,y:x.y,width:f||0,height:A||0},y=RP(c,v),N=typeof f>"u"||typeof A>"u"||f===null||A===null,E=i&&y>0,B=(f||0)*(A||0);(N||E||y>=B||u.dragging)&&d.push(u)}),d},bhe=(e,t)=>{const r=e.map(a=>a.id);return t.filter(a=>r.includes(a.source)||r.includes(a.target))},yhe=(e,t,r,a,n,i=.1)=>{const o=t/(e.width*(1+i)),l=r/(e.height*(1+i)),c=Math.min(o,l),d=N1(c,a,n),u=e.x+e.width/2,f=e.y+e.height/2,A=t/2-u*d,m=r/2-f*d;return{x:A,y:m,zoom:d}},Ag=(e,t=0)=>e.transition().duration(t);function _Y(e,t,r,a){return(t[r]||[]).reduce((n,i)=>{var o,l;return`${e.id}-${i.id}-${r}`!==a&&n.push({id:i.id||null,type:r,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+i.x+i.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+i.y+i.height/2}),n},[])}function Ult(e,t,r,a,n,i){const{x:o,y:l}=Wm(e),d=t.elementsFromPoint(o,l).find(g=>g.classList.contains("react-flow__handle"));if(d){const g=d.getAttribute("data-nodeid");if(g){const x=kU(void 0,d),v=d.getAttribute("data-handleid"),y=i({nodeId:g,id:v,type:x});if(y){const N=n.find(E=>E.nodeId===g&&E.type===x&&E.id===v);return{handle:{id:v,type:x,nodeId:g,x:(N==null?void 0:N.x)||r.x,y:(N==null?void 0:N.y)||r.y},validHandleResult:y}}}}let u=[],f=1/0;if(n.forEach(g=>{const x=Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);if(x<=a){const v=i(g);x<=f&&(x<f?u=[{handle:g,validHandleResult:v}]:x===f&&u.push({handle:g,validHandleResult:v}),f=x)}}),!u.length)return{handle:null,validHandleResult:whe()};if(u.length===1)return u[0];const A=u.some(({validHandleResult:g})=>g.isValid),m=u.some(({handle:g})=>g.type==="target");return u.find(({handle:g,validHandleResult:x})=>m?g.type==="target":A?x.isValid:!0)||u[0]}const Hlt={source:null,target:null,sourceHandle:null,targetHandle:null},whe=()=>({handleDomNode:null,isValid:!1,connection:Hlt,endHandle:null});function Nhe(e,t,r,a,n,i,o){const l=n==="target",c=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),d={...whe(),handleDomNode:c};if(c){const u=kU(void 0,c),f=c.getAttribute("data-nodeid"),A=c.getAttribute("data-handleid"),m=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),x={source:l?f:r,sourceHandle:l?A:a,target:l?r:f,targetHandle:l?a:A};d.connection=x,m&&g&&(t===gx.Strict?l&&u==="source"||!l&&u==="target":f!==r||A!==a)&&(d.endHandle={nodeId:f,handleId:A,type:u},d.isValid=i(x))}return d}function Qlt({nodes:e,nodeId:t,handleId:r,handleType:a}){return e.reduce((n,i)=>{if(i[Ps]){const{handleBounds:o}=i[Ps];let l=[],c=[];o&&(l=_Y(i,o,"source",`${t}-${r}-${a}`),c=_Y(i,o,"target",`${t}-${r}-${a}`)),n.push(...l,...c)}return n},[])}function kU(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function xO(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function zlt(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function Ehe({event:e,handleId:t,nodeId:r,onConnect:a,isTarget:n,getState:i,setState:o,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:d}){const u=uhe(e.target),{connectionMode:f,domNode:A,autoPanOnConnect:m,connectionRadius:g,onConnectStart:x,panBy:v,getNodes:y,cancelConnection:N}=i();let E=0,B;const{x:_,y:I}=Wm(e),j=u==null?void 0:u.elementFromPoint(_,I),k=kU(c,j),T=A==null?void 0:A.getBoundingClientRect();if(!T||!k)return;let L,F=Wm(e,T),S=!1,M=null,H=!1,K=null;const Q=Qlt({nodes:y(),nodeId:r,handleId:t,handleType:k}),G=()=>{if(!m)return;const[U,Y]=dhe(F,T);v({x:U,y:Y}),E=requestAnimationFrame(G)};o({connectionPosition:F,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:k,connectionStartHandle:{nodeId:r,handleId:t,type:k},connectionEndHandle:null}),x==null||x(e,{nodeId:r,handleId:t,handleType:k});function X(U){const{transform:Y}=i();F=Wm(U,T);const{handle:P,validHandleResult:D}=Ult(U,u,HP(F,Y,!1,[1,1]),g,Q,W=>Nhe(W,f,r,t,n?"target":"source",l,u));if(B=P,S||(G(),S=!0),K=D.handleDomNode,M=D.connection,H=D.isValid,o({connectionPosition:B&&H?xhe({x:B.x,y:B.y},Y):F,connectionStatus:zlt(!!B,H),connectionEndHandle:D.endHandle}),!B&&!H&&!K)return xO(L);M.source!==M.target&&K&&(xO(L),L=K,K.classList.add("connecting","react-flow__handle-connecting"),K.classList.toggle("valid",H),K.classList.toggle("react-flow__handle-valid",H))}function Z(U){var Y,P;(B||K)&&M&&H&&(a==null||a(M)),(P=(Y=i()).onConnectEnd)==null||P.call(Y,U),c&&(d==null||d(U)),xO(L),N(),cancelAnimationFrame(E),S=!1,H=!1,M=null,K=null,u.removeEventListener("mousemove",X),u.removeEventListener("mouseup",Z),u.removeEventListener("touchmove",X),u.removeEventListener("touchend",Z)}u.addEventListener("mousemove",X),u.addEventListener("mouseup",Z),u.addEventListener("touchmove",X),u.addEventListener("touchend",Z)}const TY=()=>!0,$lt=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Vlt=(e,t,r)=>a=>{const{connectionStartHandle:n,connectionEndHandle:i,connectionClickStartHandle:o}=a;return{connecting:(n==null?void 0:n.nodeId)===e&&(n==null?void 0:n.handleId)===t&&(n==null?void 0:n.type)===r||(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===r,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===r}},Che=w.forwardRef(({type:e="source",position:t=Cr.Top,isValidConnection:r,isConnectable:a=!0,isConnectableStart:n=!0,isConnectableEnd:i=!0,id:o,onConnect:l,children:c,className:d,onMouseDown:u,onTouchStart:f,...A},m)=>{var T,L;const g=o||null,x=e==="target",v=go(),y=Flt(),{connectOnClick:N,noPanClassName:E}=xs($lt,_l),{connecting:B,clickConnecting:_}=xs(Vlt(y,g,e),_l);y||(L=(T=v.getState()).onError)==null||L.call(T,"010",hA.error010());const I=F=>{const{defaultEdgeOptions:S,onConnect:M,hasDefaultEdges:H}=v.getState(),K={...S,...F};if(H){const{edges:Q,setEdges:G}=v.getState();G(Mlt(K,Q))}M==null||M(K),l==null||l(K)},j=F=>{if(!y)return;const S=hhe(F);n&&(S&&F.button===0||!S)&&Ehe({event:F,handleId:g,nodeId:y,onConnect:I,isTarget:x,getState:v.getState,setState:v.setState,isValidConnection:r||v.getState().isValidConnection||TY}),S?u==null||u(F):f==null||f(F)},k=F=>{const{onClickConnectStart:S,onClickConnectEnd:M,connectionClickStartHandle:H,connectionMode:K,isValidConnection:Q}=v.getState();if(!y||!H&&!n)return;if(!H){S==null||S(F,{nodeId:y,handleId:g,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const G=uhe(F.target),X=r||Q||TY,{connection:Z,isValid:U}=Nhe({nodeId:y,id:g,type:e},K,H.nodeId,H.handleId||null,H.type,X,G);U&&I(Z),M==null||M(F),v.setState({connectionClickStartHandle:null})};return ft.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:Wl(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",E,d,{source:!x,target:x,connectable:a,connectablestart:n,connectableend:i,connecting:_,connectionindicator:a&&(n&&!B||i&&B)}]),onMouseDown:j,onTouchStart:j,onClick:N?k:void 0,ref:m,...A},c)});Che.displayName="Handle";var E1=w.memo(Che);const jhe=({data:e,isConnectable:t,targetPosition:r=Cr.Top,sourcePosition:a=Cr.Bottom})=>ft.createElement(ft.Fragment,null,ft.createElement(E1,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,ft.createElement(E1,{type:"source",position:a,isConnectable:t}));jhe.displayName="DefaultNode";var QP=w.memo(jhe);const khe=({data:e,isConnectable:t,sourcePosition:r=Cr.Bottom})=>ft.createElement(ft.Fragment,null,e==null?void 0:e.label,ft.createElement(E1,{type:"source",position:r,isConnectable:t}));khe.displayName="InputNode";var She=w.memo(khe);const _he=({data:e,isConnectable:t,targetPosition:r=Cr.Top})=>ft.createElement(ft.Fragment,null,ft.createElement(E1,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);_he.displayName="OutputNode";var The=w.memo(_he);const SU=()=>null;SU.displayName="GroupNode";const Glt=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Rj=e=>e.id;function qlt(e,t){return _l(e.selectedNodes.map(Rj),t.selectedNodes.map(Rj))&&_l(e.selectedEdges.map(Rj),t.selectedEdges.map(Rj))}const Bhe=w.memo(({onSelectionChange:e})=>{const t=go(),{selectedNodes:r,selectedEdges:a}=xs(Glt,qlt);return w.useEffect(()=>{const n={nodes:r,edges:a};e==null||e(n),t.getState().onSelectionChange.forEach(i=>i(n))},[r,a,e]),null});Bhe.displayName="SelectionListener";const Klt=e=>!!e.onSelectionChange;function Wlt({onSelectionChange:e}){const t=xs(Klt);return e||t?ft.createElement(Bhe,{onSelectionChange:e}):null}const Xlt=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Sv(e,t){w.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function ga(e,t,r){w.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const Ylt=({nodes:e,edges:t,defaultNodes:r,defaultEdges:a,onConnect:n,onConnectStart:i,onConnectEnd:o,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:d,nodesConnectable:u,nodesFocusable:f,edgesFocusable:A,edgesUpdatable:m,elevateNodesOnSelect:g,minZoom:x,maxZoom:v,nodeExtent:y,onNodesChange:N,onEdgesChange:E,elementsSelectable:B,connectionMode:_,snapGrid:I,snapToGrid:j,translateExtent:k,connectOnClick:T,defaultEdgeOptions:L,fitView:F,fitViewOptions:S,onNodesDelete:M,onEdgesDelete:H,onNodeDrag:K,onNodeDragStart:Q,onNodeDragStop:G,onSelectionDrag:X,onSelectionDragStart:Z,onSelectionDragStop:U,noPanClassName:Y,nodeOrigin:P,rfId:D,autoPanOnConnect:W,autoPanOnNodeDrag:J,onError:ce,connectionRadius:ie,isValidConnection:re,nodeDragThreshold:de})=>{const{setNodes:oe,setEdges:be,setDefaultNodesAndEdges:q,setMinZoom:we,setMaxZoom:Te,setTranslateExtent:Ee,setNodeExtent:ue,reset:ge}=xs(Xlt,_l),he=go();return w.useEffect(()=>{const ve=a==null?void 0:a.map(le=>({...le,...L}));return q(r,ve),()=>{ge()}},[]),ga("defaultEdgeOptions",L,he.setState),ga("connectionMode",_,he.setState),ga("onConnect",n,he.setState),ga("onConnectStart",i,he.setState),ga("onConnectEnd",o,he.setState),ga("onClickConnectStart",l,he.setState),ga("onClickConnectEnd",c,he.setState),ga("nodesDraggable",d,he.setState),ga("nodesConnectable",u,he.setState),ga("nodesFocusable",f,he.setState),ga("edgesFocusable",A,he.setState),ga("edgesUpdatable",m,he.setState),ga("elementsSelectable",B,he.setState),ga("elevateNodesOnSelect",g,he.setState),ga("snapToGrid",j,he.setState),ga("snapGrid",I,he.setState),ga("onNodesChange",N,he.setState),ga("onEdgesChange",E,he.setState),ga("connectOnClick",T,he.setState),ga("fitViewOnInit",F,he.setState),ga("fitViewOnInitOptions",S,he.setState),ga("onNodesDelete",M,he.setState),ga("onEdgesDelete",H,he.setState),ga("onNodeDrag",K,he.setState),ga("onNodeDragStart",Q,he.setState),ga("onNodeDragStop",G,he.setState),ga("onSelectionDrag",X,he.setState),ga("onSelectionDragStart",Z,he.setState),ga("onSelectionDragStop",U,he.setState),ga("noPanClassName",Y,he.setState),ga("nodeOrigin",P,he.setState),ga("rfId",D,he.setState),ga("autoPanOnConnect",W,he.setState),ga("autoPanOnNodeDrag",J,he.setState),ga("onError",ce,he.setState),ga("connectionRadius",ie,he.setState),ga("isValidConnection",re,he.setState),ga("nodeDragThreshold",de,he.setState),Sv(e,oe),Sv(t,be),Sv(x,we),Sv(v,Te),Sv(k,Ee),Sv(y,ue),null},BY={display:"none"},Jlt={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ihe="react-flow__node-desc",Ohe="react-flow__edge-desc",Zlt="react-flow__aria-live",ect=e=>e.ariaLiveMessage;function tct({rfId:e}){const t=xs(ect);return ft.createElement("div",{id:`${Zlt}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Jlt},t)}function rct({rfId:e,disableKeyboardA11y:t}){return ft.createElement(ft.Fragment,null,ft.createElement("div",{id:`${Ihe}-${e}`,style:BY},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ft.createElement("div",{id:`${Ohe}-${e}`,style:BY},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&ft.createElement(tct,{rfId:e}))}var ON=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,a]=w.useState(!1),n=w.useRef(!1),i=w.useRef(new Set([])),[o,l]=w.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),u=d.reduce((f,A)=>f.concat(...A),[]);return[d,u]}return[[],[]]},[e]);return w.useEffect(()=>{const c=typeof document<"u"?document:null,d=(t==null?void 0:t.target)||c;if(e!==null){const u=m=>{if(n.current=m.ctrlKey||m.metaKey||m.shiftKey,(!n.current||n.current&&!t.actInsideInputWithModifier)&&LP(m))return!1;const x=OY(m.code,l);i.current.add(m[x]),IY(o,i.current,!1)&&(m.preventDefault(),a(!0))},f=m=>{if((!n.current||n.current&&!t.actInsideInputWithModifier)&&LP(m))return!1;const x=OY(m.code,l);IY(o,i.current,!0)?(a(!1),i.current.clear()):i.current.delete(m[x]),m.key==="Meta"&&i.current.clear(),n.current=!1},A=()=>{i.current.clear(),a(!1)};return d==null||d.addEventListener("keydown",u),d==null||d.addEventListener("keyup",f),window.addEventListener("blur",A),()=>{d==null||d.removeEventListener("keydown",u),d==null||d.removeEventListener("keyup",f),window.removeEventListener("blur",A)}}},[e,a]),r};function IY(e,t,r){return e.filter(a=>r||a.length===t.size).some(a=>a.every(n=>t.has(n)))}function OY(e,t){return t.includes(e)?"code":"key"}function Dhe(e,t,r,a){var l,c;const n=e.parentNode||e.parentId;if(!n)return r;const i=t.get(n),o=Lb(i,a);return Dhe(i,t,{x:(r.x??0)+o.x,y:(r.y??0)+o.y,z:(((l=i[Ps])==null?void 0:l.z)??0)>(r.z??0)?((c=i[Ps])==null?void 0:c.z)??0:r.z??0},a)}function Fhe(e,t,r){e.forEach(a=>{var i;const n=a.parentNode||a.parentId;if(n&&!e.has(n))throw new Error(`Parent node ${n} not found`);if(n||r!=null&&r[a.id]){const{x:o,y:l,z:c}=Dhe(a,e,{...a.position,z:((i=a[Ps])==null?void 0:i.z)??0},t);a.positionAbsolute={x:o,y:l},a[Ps].z=c,r!=null&&r[a.id]&&(a[Ps].isParent=!0)}})}function vO(e,t,r,a){const n=new Map,i={},o=a?1e3:0;return e.forEach(l=>{var m;const c=(fu(l.zIndex)?l.zIndex:0)+(l.selected?o:0),d=t.get(l.id),u={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},f=l.parentNode||l.parentId;f&&(i[f]=!0);const A=(d==null?void 0:d.type)&&(d==null?void 0:d.type)!==l.type;Object.defineProperty(u,Ps,{enumerable:!1,value:{handleBounds:A||(m=d==null?void 0:d[Ps])==null?void 0:m.handleBounds,z:c}}),n.set(l.id,u)}),Fhe(n,r,i),n}function Phe(e,t={}){const{getNodes:r,width:a,height:n,minZoom:i,maxZoom:o,d3Zoom:l,d3Selection:c,fitViewOnInitDone:d,fitViewOnInit:u,nodeOrigin:f}=e(),A=t.initial&&!d&&u;if(l&&c&&(A||!t.initial)){const g=r().filter(v=>{var N;const y=t.includeHiddenNodes?v.width&&v.height:!v.hidden;return(N=t.nodes)!=null&&N.length?y&&t.nodes.some(E=>E.id===v.id):y}),x=g.every(v=>v.width&&v.height);if(g.length>0&&x){const v=jU(g,f),{x:y,y:N,zoom:E}=yhe(v,a,n,t.minZoom??i,t.maxZoom??o,t.padding??.1),B=Km.translate(y,N).scale(E);return typeof t.duration=="number"&&t.duration>0?l.transform(Ag(c,t.duration),B):l.transform(c,B),!0}}return!1}function act(e,t){return e.forEach(r=>{const a=t.get(r.id);a&&t.set(a.id,{...a,[Ps]:a[Ps],selected:r.selected})}),new Map(t)}function nct(e,t){return t.map(r=>{const a=e.find(n=>n.id===r.id);return a&&(r.selected=a.selected),r})}function Lj({changedNodes:e,changedEdges:t,get:r,set:a}){const{nodeInternals:n,edges:i,onNodesChange:o,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:d}=r();e!=null&&e.length&&(c&&a({nodeInternals:act(e,n)}),o==null||o(e)),t!=null&&t.length&&(d&&a({edges:nct(t,i)}),l==null||l(t))}const _v=()=>{},sct={zoomIn:_v,zoomOut:_v,zoomTo:_v,getZoom:()=>1,setViewport:_v,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:_v,fitBounds:_v,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},ict=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),oct=()=>{const e=go(),{d3Zoom:t,d3Selection:r}=xs(ict,_l);return w.useMemo(()=>r&&t?{zoomIn:n=>t.scaleBy(Ag(r,n==null?void 0:n.duration),1.2),zoomOut:n=>t.scaleBy(Ag(r,n==null?void 0:n.duration),1/1.2),zoomTo:(n,i)=>t.scaleTo(Ag(r,i==null?void 0:i.duration),n),getZoom:()=>e.getState().transform[2],setViewport:(n,i)=>{const[o,l,c]=e.getState().transform,d=Km.translate(n.x??o,n.y??l).scale(n.zoom??c);t.transform(Ag(r,i==null?void 0:i.duration),d)},getViewport:()=>{const[n,i,o]=e.getState().transform;return{x:n,y:i,zoom:o}},fitView:n=>Phe(e.getState,n),setCenter:(n,i,o)=>{const{width:l,height:c,maxZoom:d}=e.getState(),u=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:d,f=l/2-n*u,A=c/2-i*u,m=Km.translate(f,A).scale(u);t.transform(Ag(r,o==null?void 0:o.duration),m)},fitBounds:(n,i)=>{const{width:o,height:l,minZoom:c,maxZoom:d}=e.getState(),{x:u,y:f,zoom:A}=yhe(n,o,l,c,d,(i==null?void 0:i.padding)??.1),m=Km.translate(u,f).scale(A);t.transform(Ag(r,i==null?void 0:i.duration),m)},project:n=>{const{transform:i,snapToGrid:o,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),HP(n,i,o,l)},screenToFlowPosition:n=>{const{transform:i,snapToGrid:o,snapGrid:l,domNode:c}=e.getState();if(!c)return n;const{x:d,y:u}=c.getBoundingClientRect(),f={x:n.x-d,y:n.y-u};return HP(f,i,o,l)},flowToScreenPosition:n=>{const{transform:i,domNode:o}=e.getState();if(!o)return n;const{x:l,y:c}=o.getBoundingClientRect(),d=xhe(n,i);return{x:d.x+l,y:d.y+c}},viewportInitialized:!0}:sct,[t,r])};function I3(){const e=oct(),t=go(),r=w.useCallback(()=>t.getState().getNodes().map(x=>({...x})),[]),a=w.useCallback(x=>t.getState().nodeInternals.get(x),[]),n=w.useCallback(()=>{const{edges:x=[]}=t.getState();return x.map(v=>({...v}))},[]),i=w.useCallback(x=>{const{edges:v=[]}=t.getState();return v.find(y=>y.id===x)},[]),o=w.useCallback(x=>{const{getNodes:v,setNodes:y,hasDefaultNodes:N,onNodesChange:E}=t.getState(),B=v(),_=typeof x=="function"?x(B):x;if(N)y(_);else if(E){const I=_.length===0?B.map(j=>({type:"remove",id:j.id})):_.map(j=>({item:j,type:"reset"}));E(I)}},[]),l=w.useCallback(x=>{const{edges:v=[],setEdges:y,hasDefaultEdges:N,onEdgesChange:E}=t.getState(),B=typeof x=="function"?x(v):x;if(N)y(B);else if(E){const _=B.length===0?v.map(I=>({type:"remove",id:I.id})):B.map(I=>({item:I,type:"reset"}));E(_)}},[]),c=w.useCallback(x=>{const v=Array.isArray(x)?x:[x],{getNodes:y,setNodes:N,hasDefaultNodes:E,onNodesChange:B}=t.getState();if(E){const I=[...y(),...v];N(I)}else if(B){const _=v.map(I=>({item:I,type:"add"}));B(_)}},[]),d=w.useCallback(x=>{const v=Array.isArray(x)?x:[x],{edges:y=[],setEdges:N,hasDefaultEdges:E,onEdgesChange:B}=t.getState();if(E)N([...y,...v]);else if(B){const _=v.map(I=>({item:I,type:"add"}));B(_)}},[]),u=w.useCallback(()=>{const{getNodes:x,edges:v=[],transform:y}=t.getState(),[N,E,B]=y;return{nodes:x().map(_=>({..._})),edges:v.map(_=>({..._})),viewport:{x:N,y:E,zoom:B}}},[]),f=w.useCallback(({nodes:x,edges:v})=>{const{nodeInternals:y,getNodes:N,edges:E,hasDefaultNodes:B,hasDefaultEdges:_,onNodesDelete:I,onEdgesDelete:j,onNodesChange:k,onEdgesChange:T}=t.getState(),L=(x||[]).map(K=>K.id),F=(v||[]).map(K=>K.id),S=N().reduce((K,Q)=>{const G=Q.parentNode||Q.parentId,X=!L.includes(Q.id)&&G&&K.find(U=>U.id===G);return(typeof Q.deletable=="boolean"?Q.deletable:!0)&&(L.includes(Q.id)||X)&&K.push(Q),K},[]),M=E.filter(K=>typeof K.deletable=="boolean"?K.deletable:!0),H=M.filter(K=>F.includes(K.id));if(S||H){const K=bhe(S,M),Q=[...H,...K],G=Q.reduce((X,Z)=>(X.includes(Z.id)||X.push(Z.id),X),[]);if((_||B)&&(_&&t.setState({edges:E.filter(X=>!G.includes(X.id))}),B&&(S.forEach(X=>{y.delete(X.id)}),t.setState({nodeInternals:new Map(y)}))),G.length>0&&(j==null||j(Q),T&&T(G.map(X=>({id:X,type:"remove"})))),S.length>0&&(I==null||I(S),k)){const X=S.map(Z=>({id:Z.id,type:"remove"}));k(X)}}},[]),A=w.useCallback(x=>{const v=klt(x),y=v?null:t.getState().nodeInternals.get(x.id);return!v&&!y?[null,null,v]:[v?x:EY(y),y,v]},[]),m=w.useCallback((x,v=!0,y)=>{const[N,E,B]=A(x);return N?(y||t.getState().getNodes()).filter(_=>{if(!B&&(_.id===E.id||!_.positionAbsolute))return!1;const I=EY(_),j=RP(I,N);return v&&j>0||j>=N.width*N.height}):[]},[]),g=w.useCallback((x,v,y=!0)=>{const[N]=A(x);if(!N)return!1;const E=RP(N,v);return y&&E>0||E>=N.width*N.height},[]);return w.useMemo(()=>({...e,getNodes:r,getNode:a,getEdges:n,getEdge:i,setNodes:o,setEdges:l,addNodes:c,addEdges:d,toObject:u,deleteElements:f,getIntersectingNodes:m,isNodeIntersecting:g}),[e,r,a,n,i,o,l,c,d,u,f,m,g])}const lct={actInsideInputWithModifier:!1};var cct=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=go(),{deleteElements:a}=I3(),n=ON(e,lct),i=ON(t);w.useEffect(()=>{if(n){const{edges:o,getNodes:l}=r.getState(),c=l().filter(u=>u.selected),d=o.filter(u=>u.selected);a({nodes:c,edges:d}),r.setState({nodesSelectionActive:!1})}},[n]),w.useEffect(()=>{r.setState({multiSelectionActive:i})},[i])};function dct(e){const t=go();w.useEffect(()=>{let r;const a=()=>{var i,o;if(!e.current)return;const n=vU(e.current);(n.height===0||n.width===0)&&((o=(i=t.getState()).onError)==null||o.call(i,"004",hA.error004())),t.setState({width:n.width||500,height:n.height||500})};return a(),window.addEventListener("resize",a),e.current&&(r=new ResizeObserver(()=>a()),r.observe(e.current)),()=>{window.removeEventListener("resize",a),r&&e.current&&r.unobserve(e.current)}},[])}const _U={position:"absolute",width:"100%",height:"100%",top:0,left:0},uct=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Mj=e=>({x:e.x,y:e.y,zoom:e.k}),Tv=(e,t)=>e.target.closest(`.${t}`),DY=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),FY=e=>{const t=e.ctrlKey&&YS()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},fct=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),hct=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:a,zoomOnScroll:n=!0,zoomOnPinch:i=!0,panOnScroll:o=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=Bg.Free,zoomOnDoubleClick:d=!0,elementsSelectable:u,panOnDrag:f=!0,defaultViewport:A,translateExtent:m,minZoom:g,maxZoom:x,zoomActivationKeyCode:v,preventScrolling:y=!0,children:N,noWheelClassName:E,noPanClassName:B})=>{const _=w.useRef(),I=go(),j=w.useRef(!1),k=w.useRef(!1),T=w.useRef(null),L=w.useRef({x:0,y:0,zoom:0}),{d3Zoom:F,d3Selection:S,d3ZoomHandler:M,userSelectionActive:H}=xs(fct,_l),K=ON(v),Q=w.useRef(0),G=w.useRef(!1),X=w.useRef();return dct(T),w.useEffect(()=>{if(T.current){const Z=T.current.getBoundingClientRect(),U=vlt().scaleExtent([g,x]).translateExtent(m),Y=lu(T.current).call(U),P=Km.translate(A.x,A.y).scale(N1(A.zoom,g,x)),D=[[0,0],[Z.width,Z.height]],W=U.constrain()(P,D,m);U.transform(Y,W),U.wheelDelta(FY),I.setState({d3Zoom:U,d3Selection:Y,d3ZoomHandler:Y.on("wheel.zoom"),transform:[W.x,W.y,W.k],domNode:T.current.closest(".react-flow")})}},[]),w.useEffect(()=>{S&&F&&(o&&!K&&!H?S.on("wheel.zoom",Z=>{if(Tv(Z,E))return!1;Z.preventDefault(),Z.stopImmediatePropagation();const U=S.property("__zoom").k||1;if(Z.ctrlKey&&i){const re=dh(Z),de=FY(Z),oe=U*Math.pow(2,de);F.scaleTo(S,oe,re,Z);return}const Y=Z.deltaMode===1?20:1;let P=c===Bg.Vertical?0:Z.deltaX*Y,D=c===Bg.Horizontal?0:Z.deltaY*Y;!YS()&&Z.shiftKey&&c!==Bg.Vertical&&(P=Z.deltaY*Y,D=0),F.translateBy(S,-(P/U)*l,-(D/U)*l,{internal:!0});const W=Mj(S.property("__zoom")),{onViewportChangeStart:J,onViewportChange:ce,onViewportChangeEnd:ie}=I.getState();clearTimeout(X.current),G.current||(G.current=!0,t==null||t(Z,W),J==null||J(W)),G.current&&(e==null||e(Z,W),ce==null||ce(W),X.current=setTimeout(()=>{r==null||r(Z,W),ie==null||ie(W),G.current=!1},150))},{passive:!1}):typeof M<"u"&&S.on("wheel.zoom",function(Z,U){if(!y&&Z.type==="wheel"&&!Z.ctrlKey||Tv(Z,E))return null;Z.preventDefault(),M.call(this,Z,U)},{passive:!1}))},[H,o,c,S,F,M,K,i,y,E,t,e,r]),w.useEffect(()=>{F&&F.on("start",Z=>{var P,D;if(!Z.sourceEvent||Z.sourceEvent.internal)return null;Q.current=(P=Z.sourceEvent)==null?void 0:P.button;const{onViewportChangeStart:U}=I.getState(),Y=Mj(Z.transform);j.current=!0,L.current=Y,((D=Z.sourceEvent)==null?void 0:D.type)==="mousedown"&&I.setState({paneDragging:!0}),U==null||U(Y),t==null||t(Z.sourceEvent,Y)})},[F,t]),w.useEffect(()=>{F&&(H&&!j.current?F.on("zoom",null):H||F.on("zoom",Z=>{var Y;const{onViewportChange:U}=I.getState();if(I.setState({transform:[Z.transform.x,Z.transform.y,Z.transform.k]}),k.current=!!(a&&DY(f,Q.current??0)),(e||U)&&!((Y=Z.sourceEvent)!=null&&Y.internal)){const P=Mj(Z.transform);U==null||U(P),e==null||e(Z.sourceEvent,P)}}))},[H,F,e,f,a]),w.useEffect(()=>{F&&F.on("end",Z=>{if(!Z.sourceEvent||Z.sourceEvent.internal)return null;const{onViewportChangeEnd:U}=I.getState();if(j.current=!1,I.setState({paneDragging:!1}),a&&DY(f,Q.current??0)&&!k.current&&a(Z.sourceEvent),k.current=!1,(r||U)&&uct(L.current,Z.transform)){const Y=Mj(Z.transform);L.current=Y,clearTimeout(_.current),_.current=setTimeout(()=>{U==null||U(Y),r==null||r(Z.sourceEvent,Y)},o?150:0)}})},[F,o,f,r,a]),w.useEffect(()=>{F&&F.filter(Z=>{const U=K||n,Y=i&&Z.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&Z.button===1&&Z.type==="mousedown"&&(Tv(Z,"react-flow__node")||Tv(Z,"react-flow__edge")))return!0;if(!f&&!U&&!o&&!d&&!i||H||!d&&Z.type==="dblclick"||Tv(Z,E)&&Z.type==="wheel"||Tv(Z,B)&&(Z.type!=="wheel"||o&&Z.type==="wheel"&&!K)||!i&&Z.ctrlKey&&Z.type==="wheel"||!U&&!o&&!Y&&Z.type==="wheel"||!f&&(Z.type==="mousedown"||Z.type==="touchstart")||Array.isArray(f)&&!f.includes(Z.button)&&Z.type==="mousedown")return!1;const P=Array.isArray(f)&&f.includes(Z.button)||!Z.button||Z.button<=1;return(!Z.ctrlKey||Z.type==="wheel")&&P})},[H,F,n,i,o,d,f,u,K]),ft.createElement("div",{className:"react-flow__renderer",ref:T,style:_U},N)},Act=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function mct(){const{userSelectionActive:e,userSelectionRect:t}=xs(Act,_l);return e&&t?ft.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function PY(e,t){const r=t.parentNode||t.parentId,a=e.find(n=>n.id===r);if(a){const n=t.position.x+t.width-a.width,i=t.position.y+t.height-a.height;if(n>0||i>0||t.position.x<0||t.position.y<0){if(a.style={...a.style},a.style.width=a.style.width??a.width,a.style.height=a.style.height??a.height,n>0&&(a.style.width+=n),i>0&&(a.style.height+=i),t.position.x<0){const o=Math.abs(t.position.x);a.position.x=a.position.x-o,a.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);a.position.y=a.position.y-o,a.style.height+=o,t.position.y=0}a.width=a.style.width,a.height=a.style.height}}}function Rhe(e,t){if(e.some(a=>a.type==="reset"))return e.filter(a=>a.type==="reset").map(a=>a.item);const r=e.filter(a=>a.type==="add").map(a=>a.item);return t.reduce((a,n)=>{const i=e.filter(l=>l.id===n.id);if(i.length===0)return a.push(n),a;const o={...n};for(const l of i)if(l)switch(l.type){case"select":{o.selected=l.selected;break}case"position":{typeof l.position<"u"&&(o.position=l.position),typeof l.positionAbsolute<"u"&&(o.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(o.dragging=l.dragging),o.expandParent&&PY(a,o);break}case"dimensions":{typeof l.dimensions<"u"&&(o.width=l.dimensions.width,o.height=l.dimensions.height),typeof l.updateStyle<"u"&&(o.style={...o.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(o.resizing=l.resizing),o.expandParent&&PY(a,o);break}case"remove":return a}return a.push(o),a},r)}function Lhe(e,t){return Rhe(e,t)}function pct(e,t){return Rhe(e,t)}const ym=(e,t)=>({id:e,type:"select",selected:t});function ub(e,t){return e.reduce((r,a)=>{const n=t.includes(a.id);return!a.selected&&n?(a.selected=!0,r.push(ym(a.id,!0))):a.selected&&!n&&(a.selected=!1,r.push(ym(a.id,!1))),r},[])}const bO=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},gct=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Mhe=w.memo(({isSelecting:e,selectionMode:t=IN.Full,panOnDrag:r,onSelectionStart:a,onSelectionEnd:n,onPaneClick:i,onPaneContextMenu:o,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:d,onPaneMouseLeave:u,children:f})=>{const A=w.useRef(null),m=go(),g=w.useRef(0),x=w.useRef(0),v=w.useRef(),{userSelectionActive:y,elementsSelectable:N,dragging:E}=xs(gct,_l),B=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,x.current=0},_=M=>{i==null||i(M),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},I=M=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){M.preventDefault();return}o==null||o(M)},j=l?M=>l(M):void 0,k=M=>{const{resetSelectedElements:H,domNode:K}=m.getState();if(v.current=K==null?void 0:K.getBoundingClientRect(),!N||!e||M.button!==0||M.target!==A.current||!v.current)return;const{x:Q,y:G}=Wm(M,v.current);H(),m.setState({userSelectionRect:{width:0,height:0,startX:Q,startY:G,x:Q,y:G}}),a==null||a(M)},T=M=>{const{userSelectionRect:H,nodeInternals:K,edges:Q,transform:G,onNodesChange:X,onEdgesChange:Z,nodeOrigin:U,getNodes:Y}=m.getState();if(!e||!v.current||!H)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const P=Wm(M,v.current),D=H.startX??0,W=H.startY??0,J={...H,x:P.x<D?P.x:D,y:P.y<W?P.y:W,width:Math.abs(P.x-D),height:Math.abs(P.y-W)},ce=Y(),ie=vhe(K,J,G,t===IN.Partial,!0,U),re=bhe(ie,Q).map(oe=>oe.id),de=ie.map(oe=>oe.id);if(g.current!==de.length){g.current=de.length;const oe=ub(ce,de);oe.length&&(X==null||X(oe))}if(x.current!==re.length){x.current=re.length;const oe=ub(Q,re);oe.length&&(Z==null||Z(oe))}m.setState({userSelectionRect:J})},L=M=>{if(M.button!==0)return;const{userSelectionRect:H}=m.getState();!y&&H&&M.target===A.current&&(_==null||_(M)),m.setState({nodesSelectionActive:g.current>0}),B(),n==null||n(M)},F=M=>{y&&(m.setState({nodesSelectionActive:g.current>0}),n==null||n(M)),B()},S=N&&(e||y);return ft.createElement("div",{className:Wl(["react-flow__pane",{dragging:E,selection:e}]),onClick:S?void 0:bO(_,A),onContextMenu:bO(I,A),onWheel:bO(j,A),onMouseEnter:S?void 0:c,onMouseDown:S?k:void 0,onMouseMove:S?T:d,onMouseUp:S?L:void 0,onMouseLeave:S?F:u,ref:A,style:_U},f,ft.createElement(mct,null))});Mhe.displayName="Pane";function Uhe(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const a=t.get(r);return a?a.selected?!0:Uhe(a,t):!1}function RY(e,t,r){let a=e;do{if(a!=null&&a.matches(t))return!0;if(a===r.current)return!1;a=a.parentElement}while(a);return!1}function xct(e,t,r,a){return Array.from(e.values()).filter(n=>(n.selected||n.id===a)&&(!n.parentNode||n.parentId||!Uhe(n,e))&&(n.draggable||t&&typeof n.draggable>"u")).map(n=>{var i,o;return{id:n.id,position:n.position||{x:0,y:0},positionAbsolute:n.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((i=n.positionAbsolute)==null?void 0:i.x)??0),y:r.y-(((o=n.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:n.extent,parentNode:n.parentNode||n.parentId,parentId:n.parentNode||n.parentId,width:n.width,height:n.height,expandParent:n.expandParent}})}function vct(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Hhe(e,t,r,a,n=[0,0],i){const o=vct(e,e.extent||a);let l=o;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=r.get(c),{x:A,y:m}=Lb(f,n).positionAbsolute;l=f&&fu(A)&&fu(m)&&fu(f.width)&&fu(f.height)?[[A+e.width*n[0],m+e.height*n[1]],[A+f.width-e.width+e.width*n[0],m+f.height-e.height+e.height*n[1]]]:l}else i==null||i("005",hA.error005()),l=o;else if(e.extent&&c&&e.extent!=="parent"){const f=r.get(c),{x:A,y:m}=Lb(f,n).positionAbsolute;l=[[e.extent[0][0]+A,e.extent[0][1]+m],[e.extent[1][0]+A,e.extent[1][1]+m]]}let d={x:0,y:0};if(c){const f=r.get(c);d=Lb(f,n).positionAbsolute}const u=l&&l!=="parent"?bU(t,l):t;return{position:{x:u.x-d.x,y:u.y-d.y},positionAbsolute:u}}function yO({nodeId:e,dragItems:t,nodeInternals:r}){const a=t.map(n=>({...r.get(n.id),position:n.position,positionAbsolute:n.positionAbsolute}));return[e?a.find(n=>n.id===e):a[0],a]}const LY=(e,t,r,a)=>{const n=t.querySelectorAll(e);if(!n||!n.length)return null;const i=Array.from(n),o=t.getBoundingClientRect(),l={x:o.width*a[0],y:o.height*a[1]};return i.map(c=>{const d=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(d.left-o.left-l.x)/r,y:(d.top-o.top-l.y)/r,...vU(c)}})};function bw(e,t,r){return r===void 0?r:a=>{const n=t().nodeInternals.get(e);n&&r(a,{...n})}}function zP({id:e,store:t,unselect:r=!1,nodeRef:a}){const{addSelectedNodes:n,unselectNodesAndEdges:i,multiSelectionActive:o,nodeInternals:l,onError:c}=t.getState(),d=l.get(e);if(!d){c==null||c("012",hA.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(r||d.selected&&o)&&(i({nodes:[d],edges:[]}),requestAnimationFrame(()=>{var u;return(u=a==null?void 0:a.current)==null?void 0:u.blur()})):n([e])}function bct(){const e=go();return w.useCallback(({sourceEvent:r})=>{const{transform:a,snapGrid:n,snapToGrid:i}=e.getState(),o=r.touches?r.touches[0].clientX:r.clientX,l=r.touches?r.touches[0].clientY:r.clientY,c={x:(o-a[0])/a[2],y:(l-a[1])/a[2]};return{xSnapped:i?n[0]*Math.round(c.x/n[0]):c.x,ySnapped:i?n[1]*Math.round(c.y/n[1]):c.y,...c}},[])}function wO(e){return(t,r,a)=>e==null?void 0:e(t,a)}function Qhe({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:a,nodeId:n,isSelectable:i,selectNodesOnDrag:o}){const l=go(),[c,d]=w.useState(!1),u=w.useRef([]),f=w.useRef({x:null,y:null}),A=w.useRef(0),m=w.useRef(null),g=w.useRef({x:0,y:0}),x=w.useRef(null),v=w.useRef(!1),y=w.useRef(!1),N=w.useRef(!1),E=bct();return w.useEffect(()=>{if(e!=null&&e.current){const B=lu(e.current),_=({x:k,y:T})=>{const{nodeInternals:L,onNodeDrag:F,onSelectionDrag:S,updateNodePositions:M,nodeExtent:H,snapGrid:K,snapToGrid:Q,nodeOrigin:G,onError:X}=l.getState();f.current={x:k,y:T};let Z=!1,U={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&H){const P=jU(u.current,G);U=yU(P)}if(u.current=u.current.map(P=>{const D={x:k-P.distance.x,y:T-P.distance.y};Q&&(D.x=K[0]*Math.round(D.x/K[0]),D.y=K[1]*Math.round(D.y/K[1]));const W=[[H[0][0],H[0][1]],[H[1][0],H[1][1]]];u.current.length>1&&H&&!P.extent&&(W[0][0]=P.positionAbsolute.x-U.x+H[0][0],W[1][0]=P.positionAbsolute.x+(P.width??0)-U.x2+H[1][0],W[0][1]=P.positionAbsolute.y-U.y+H[0][1],W[1][1]=P.positionAbsolute.y+(P.height??0)-U.y2+H[1][1]);const J=Hhe(P,D,L,W,G,X);return Z=Z||P.position.x!==J.position.x||P.position.y!==J.position.y,P.position=J.position,P.positionAbsolute=J.positionAbsolute,P}),!Z)return;M(u.current,!0,!0),d(!0);const Y=n?F:wO(S);if(Y&&x.current){const[P,D]=yO({nodeId:n,dragItems:u.current,nodeInternals:L});Y(x.current,P,D)}},I=()=>{if(!m.current)return;const[k,T]=dhe(g.current,m.current);if(k!==0||T!==0){const{transform:L,panBy:F}=l.getState();f.current.x=(f.current.x??0)-k/L[2],f.current.y=(f.current.y??0)-T/L[2],F({x:k,y:T})&&_(f.current)}A.current=requestAnimationFrame(I)},j=k=>{var G;const{nodeInternals:T,multiSelectionActive:L,nodesDraggable:F,unselectNodesAndEdges:S,onNodeDragStart:M,onSelectionDragStart:H}=l.getState();y.current=!0;const K=n?M:wO(H);(!o||!i)&&!L&&n&&((G=T.get(n))!=null&&G.selected||S()),n&&i&&o&&zP({id:n,store:l,nodeRef:e});const Q=E(k);if(f.current=Q,u.current=xct(T,F,Q,n),K&&u.current){const[X,Z]=yO({nodeId:n,dragItems:u.current,nodeInternals:T});K(k.sourceEvent,X,Z)}};if(t)B.on(".drag",null);else{const k=tot().on("start",T=>{const{domNode:L,nodeDragThreshold:F}=l.getState();F===0&&j(T),N.current=!1;const S=E(T);f.current=S,m.current=(L==null?void 0:L.getBoundingClientRect())||null,g.current=Wm(T.sourceEvent,m.current)}).on("drag",T=>{var M,H;const L=E(T),{autoPanOnNodeDrag:F,nodeDragThreshold:S}=l.getState();if(T.sourceEvent.type==="touchmove"&&T.sourceEvent.touches.length>1&&(N.current=!0),!N.current){if(!v.current&&y.current&&F&&(v.current=!0,I()),!y.current){const K=L.xSnapped-(((M=f==null?void 0:f.current)==null?void 0:M.x)??0),Q=L.ySnapped-(((H=f==null?void 0:f.current)==null?void 0:H.y)??0);Math.sqrt(K*K+Q*Q)>S&&j(T)}(f.current.x!==L.xSnapped||f.current.y!==L.ySnapped)&&u.current&&y.current&&(x.current=T.sourceEvent,g.current=Wm(T.sourceEvent,m.current),_(L))}}).on("end",T=>{if(!(!y.current||N.current)&&(d(!1),v.current=!1,y.current=!1,cancelAnimationFrame(A.current),u.current)){const{updateNodePositions:L,nodeInternals:F,onNodeDragStop:S,onSelectionDragStop:M}=l.getState(),H=n?S:wO(M);if(L(u.current,!1,!1),H){const[K,Q]=yO({nodeId:n,dragItems:u.current,nodeInternals:F});H(T.sourceEvent,K,Q)}}}).filter(T=>{const L=T.target;return!T.button&&(!r||!RY(L,`.${r}`,e))&&(!a||RY(L,a,e))});return B.call(k),()=>{B.on(".drag",null)}}}},[e,t,r,a,i,l,n,o,E]),c}function zhe(){const e=go();return w.useCallback(r=>{const{nodeInternals:a,nodeExtent:n,updateNodePositions:i,getNodes:o,snapToGrid:l,snapGrid:c,onError:d,nodesDraggable:u}=e.getState(),f=o().filter(N=>N.selected&&(N.draggable||u&&typeof N.draggable>"u")),A=l?c[0]:5,m=l?c[1]:5,g=r.isShiftPressed?4:1,x=r.x*A*g,v=r.y*m*g,y=f.map(N=>{if(N.positionAbsolute){const E={x:N.positionAbsolute.x+x,y:N.positionAbsolute.y+v};l&&(E.x=c[0]*Math.round(E.x/c[0]),E.y=c[1]*Math.round(E.y/c[1]));const{positionAbsolute:B,position:_}=Hhe(N,E,a,n,void 0,d);N.position=_,N.positionAbsolute=B}return N});i(y,!0,!1)},[])}const Mb={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var yw=e=>{const t=({id:r,type:a,data:n,xPos:i,yPos:o,xPosOrigin:l,yPosOrigin:c,selected:d,onClick:u,onMouseEnter:f,onMouseMove:A,onMouseLeave:m,onContextMenu:g,onDoubleClick:x,style:v,className:y,isDraggable:N,isSelectable:E,isConnectable:B,isFocusable:_,selectNodesOnDrag:I,sourcePosition:j,targetPosition:k,hidden:T,resizeObserver:L,dragHandle:F,zIndex:S,isParent:M,noDragClassName:H,noPanClassName:K,initialized:Q,disableKeyboardA11y:G,ariaLabel:X,rfId:Z,hasHandleBounds:U})=>{const Y=go(),P=w.useRef(null),D=w.useRef(null),W=w.useRef(j),J=w.useRef(k),ce=w.useRef(a),ie=E||N||u||f||A||m,re=zhe(),de=bw(r,Y.getState,f),oe=bw(r,Y.getState,A),be=bw(r,Y.getState,m),q=bw(r,Y.getState,g),we=bw(r,Y.getState,x),Te=ge=>{const{nodeDragThreshold:he}=Y.getState();if(E&&(!I||!N||he>0)&&zP({id:r,store:Y,nodeRef:P}),u){const ve=Y.getState().nodeInternals.get(r);ve&&u(ge,{...ve})}},Ee=ge=>{if(!LP(ge)&&!G)if(fhe.includes(ge.key)&&E){const he=ge.key==="Escape";zP({id:r,store:Y,unselect:he,nodeRef:P})}else N&&d&&Object.prototype.hasOwnProperty.call(Mb,ge.key)&&(Y.setState({ariaLiveMessage:`Moved selected node ${ge.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~o}`}),re({x:Mb[ge.key].x,y:Mb[ge.key].y,isShiftPressed:ge.shiftKey}))};w.useEffect(()=>()=>{D.current&&(L==null||L.unobserve(D.current),D.current=null)},[]),w.useEffect(()=>{if(P.current&&!T){const ge=P.current;(!Q||!U||D.current!==ge)&&(D.current&&(L==null||L.unobserve(D.current)),L==null||L.observe(ge),D.current=ge)}},[T,Q,U]),w.useEffect(()=>{const ge=ce.current!==a,he=W.current!==j,ve=J.current!==k;P.current&&(ge||he||ve)&&(ge&&(ce.current=a),he&&(W.current=j),ve&&(J.current=k),Y.getState().updateNodeDimensions([{id:r,nodeElement:P.current,forceUpdate:!0}]))},[r,a,j,k]);const ue=Qhe({nodeRef:P,disabled:T||!N,noDragClassName:H,handleSelector:F,nodeId:r,isSelectable:E,selectNodesOnDrag:I});return T?null:ft.createElement("div",{className:Wl(["react-flow__node",`react-flow__node-${a}`,{[K]:N},y,{selected:d,selectable:E,parent:M,dragging:ue}]),ref:P,style:{zIndex:S,transform:`translate(${l}px,${c}px)`,pointerEvents:ie?"all":"none",visibility:Q?"visible":"hidden",...v},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:de,onMouseMove:oe,onMouseLeave:be,onContextMenu:q,onClick:Te,onDoubleClick:we,onKeyDown:_?Ee:void 0,tabIndex:_?0:void 0,role:_?"button":void 0,"aria-describedby":G?void 0:`${Ihe}-${Z}`,"aria-label":X},ft.createElement(Dlt,{value:r},ft.createElement(e,{id:r,data:n,type:a,xPos:i,yPos:o,selected:d,isConnectable:B,sourcePosition:j,targetPosition:k,dragging:ue,dragHandle:F,zIndex:S})))};return t.displayName="NodeWrapper",w.memo(t)};const yct=e=>{const t=e.getNodes().filter(r=>r.selected);return{...jU(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function wct({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const a=go(),{width:n,height:i,x:o,y:l,transformString:c,userSelectionActive:d}=xs(yct,_l),u=zhe(),f=w.useRef(null);if(w.useEffect(()=>{var g;r||(g=f.current)==null||g.focus({preventScroll:!0})},[r]),Qhe({nodeRef:f}),d||!n||!i)return null;const A=e?g=>{const x=a.getState().getNodes().filter(v=>v.selected);e(g,x)}:void 0,m=g=>{Object.prototype.hasOwnProperty.call(Mb,g.key)&&u({x:Mb[g.key].x,y:Mb[g.key].y,isShiftPressed:g.shiftKey})};return ft.createElement("div",{className:Wl(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},ft.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:A,tabIndex:r?void 0:-1,onKeyDown:r?void 0:m,style:{width:n,height:i,top:l,left:o}}))}var Nct=w.memo(wct);const Ect=e=>e.nodesSelectionActive,$he=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:a,onPaneMouseLeave:n,onPaneContextMenu:i,onPaneScroll:o,deleteKeyCode:l,onMove:c,onMoveStart:d,onMoveEnd:u,selectionKeyCode:f,selectionOnDrag:A,selectionMode:m,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:v,panActivationKeyCode:y,zoomActivationKeyCode:N,elementsSelectable:E,zoomOnScroll:B,zoomOnPinch:_,panOnScroll:I,panOnScrollSpeed:j,panOnScrollMode:k,zoomOnDoubleClick:T,panOnDrag:L,defaultViewport:F,translateExtent:S,minZoom:M,maxZoom:H,preventScrolling:K,onSelectionContextMenu:Q,noWheelClassName:G,noPanClassName:X,disableKeyboardA11y:Z})=>{const U=xs(Ect),Y=ON(f),P=ON(y),D=P||L,W=P||I,J=Y||A&&D!==!0;return cct({deleteKeyCode:l,multiSelectionKeyCode:v}),ft.createElement(hct,{onMove:c,onMoveStart:d,onMoveEnd:u,onPaneContextMenu:i,elementsSelectable:E,zoomOnScroll:B,zoomOnPinch:_,panOnScroll:W,panOnScrollSpeed:j,panOnScrollMode:k,zoomOnDoubleClick:T,panOnDrag:!Y&&D,defaultViewport:F,translateExtent:S,minZoom:M,maxZoom:H,zoomActivationKeyCode:N,preventScrolling:K,noWheelClassName:G,noPanClassName:X},ft.createElement(Mhe,{onSelectionStart:g,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:a,onPaneMouseLeave:n,onPaneContextMenu:i,onPaneScroll:o,panOnDrag:D,isSelecting:!!J,selectionMode:m},e,U&&ft.createElement(Nct,{onSelectionContextMenu:Q,noPanClassName:X,disableKeyboardA11y:Z})))};$he.displayName="FlowRenderer";var Cct=w.memo($he);function jct(e){return xs(w.useCallback(r=>e?vhe(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function kct(e){const t={input:yw(e.input||She),default:yw(e.default||QP),output:yw(e.output||The),group:yw(e.group||SU)},r={},a=Object.keys(e).filter(n=>!["input","default","output","group"].includes(n)).reduce((n,i)=>(n[i]=yw(e[i]||QP),n),r);return{...t,...a}}const Sct=({x:e,y:t,width:r,height:a,origin:n})=>!r||!a?{x:e,y:t}:n[0]<0||n[1]<0||n[0]>1||n[1]>1?{x:e,y:t}:{x:e-r*n[0],y:t-a*n[1]},_ct=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Vhe=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:a,elementsSelectable:n,updateNodeDimensions:i,onError:o}=xs(_ct,_l),l=jct(e.onlyRenderVisibleElements),c=w.useRef(),d=w.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const u=new ResizeObserver(f=>{const A=f.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));i(A)});return c.current=u,u},[]);return w.useEffect(()=>()=>{var u;(u=c==null?void 0:c.current)==null||u.disconnect()},[]),ft.createElement("div",{className:"react-flow__nodes",style:_U},l.map(u=>{var _,I,j;let f=u.type||"default";e.nodeTypes[f]||(o==null||o("003",hA.error003(f)),f="default");const A=e.nodeTypes[f]||e.nodeTypes.default,m=!!(u.draggable||t&&typeof u.draggable>"u"),g=!!(u.selectable||n&&typeof u.selectable>"u"),x=!!(u.connectable||r&&typeof u.connectable>"u"),v=!!(u.focusable||a&&typeof u.focusable>"u"),y=e.nodeExtent?bU(u.positionAbsolute,e.nodeExtent):u.positionAbsolute,N=(y==null?void 0:y.x)??0,E=(y==null?void 0:y.y)??0,B=Sct({x:N,y:E,width:u.width??0,height:u.height??0,origin:e.nodeOrigin});return ft.createElement(A,{key:u.id,id:u.id,className:u.className,style:u.style,type:f,data:u.data,sourcePosition:u.sourcePosition||Cr.Bottom,targetPosition:u.targetPosition||Cr.Top,hidden:u.hidden,xPos:N,yPos:E,xPosOrigin:B.x,yPosOrigin:B.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!u.selected,isDraggable:m,isSelectable:g,isConnectable:x,isFocusable:v,resizeObserver:d,dragHandle:u.dragHandle,zIndex:((_=u[Ps])==null?void 0:_.z)??0,isParent:!!((I=u[Ps])!=null&&I.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!u.width&&!!u.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:u.ariaLabel,hasHandleBounds:!!((j=u[Ps])!=null&&j.handleBounds)})}))};Vhe.displayName="NodeRenderer";var Tct=w.memo(Vhe);const Bct=(e,t,r)=>r===Cr.Left?e-t:r===Cr.Right?e+t:e,Ict=(e,t,r)=>r===Cr.Top?e-t:r===Cr.Bottom?e+t:e,MY="react-flow__edgeupdater",UY=({position:e,centerX:t,centerY:r,radius:a=10,onMouseDown:n,onMouseEnter:i,onMouseOut:o,type:l})=>ft.createElement("circle",{onMouseDown:n,onMouseEnter:i,onMouseOut:o,className:Wl([MY,`${MY}-${l}`]),cx:Bct(t,a,e),cy:Ict(r,a,e),r:a,stroke:"transparent",fill:"transparent"}),Oct=()=>!0;var Bv=e=>{const t=({id:r,className:a,type:n,data:i,onClick:o,onEdgeDoubleClick:l,selected:c,animated:d,label:u,labelStyle:f,labelShowBg:A,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,style:v,source:y,target:N,sourceX:E,sourceY:B,targetX:_,targetY:I,sourcePosition:j,targetPosition:k,elementsSelectable:T,hidden:L,sourceHandleId:F,targetHandleId:S,onContextMenu:M,onMouseEnter:H,onMouseMove:K,onMouseLeave:Q,reconnectRadius:G,onReconnect:X,onReconnectStart:Z,onReconnectEnd:U,markerEnd:Y,markerStart:P,rfId:D,ariaLabel:W,isFocusable:J,isReconnectable:ce,pathOptions:ie,interactionWidth:re,disableKeyboardA11y:de})=>{const oe=w.useRef(null),[be,q]=w.useState(!1),[we,Te]=w.useState(!1),Ee=go(),ue=w.useMemo(()=>`url('#${UP(P,D)}')`,[P,D]),ge=w.useMemo(()=>`url('#${UP(Y,D)}')`,[Y,D]);if(L)return null;const he=Ze=>{var Pr;const{edges:Qe,addSelectedEdges:wt,unselectNodesAndEdges:ar,multiSelectionActive:qt}=Ee.getState(),gr=Qe.find(yr=>yr.id===r);gr&&(T&&(Ee.setState({nodesSelectionActive:!1}),gr.selected&&qt?(ar({nodes:[],edges:[gr]}),(Pr=oe.current)==null||Pr.blur()):wt([r])),o&&o(Ze,gr))},ve=vw(r,Ee.getState,l),le=vw(r,Ee.getState,M),ne=vw(r,Ee.getState,H),Ae=vw(r,Ee.getState,K),pe=vw(r,Ee.getState,Q),ke=(Ze,Qe)=>{if(Ze.button!==0)return;const{edges:wt,isValidConnection:ar}=Ee.getState(),qt=Qe?N:y,gr=(Qe?S:F)||null,Pr=Qe?"target":"source",yr=ar||Oct,Tn=Qe,Rr=wt.find(Lr=>Lr.id===r);Te(!0),Z==null||Z(Ze,Rr,Pr);const Ha=Lr=>{Te(!1),U==null||U(Lr,Rr,Pr)};Ehe({event:Ze,handleId:gr,nodeId:qt,onConnect:Lr=>X==null?void 0:X(Rr,Lr),isTarget:Tn,getState:Ee.getState,setState:Ee.setState,isValidConnection:yr,edgeUpdaterType:Pr,onReconnectEnd:Ha})},Le=Ze=>ke(Ze,!0),qe=Ze=>ke(Ze,!1),ze=()=>q(!0),Re=()=>q(!1),We=!T&&!o,ct=Ze=>{var Qe;if(!de&&fhe.includes(Ze.key)&&T){const{unselectNodesAndEdges:wt,addSelectedEdges:ar,edges:qt}=Ee.getState();Ze.key==="Escape"?((Qe=oe.current)==null||Qe.blur(),wt({edges:[qt.find(Pr=>Pr.id===r)]})):ar([r])}};return ft.createElement("g",{className:Wl(["react-flow__edge",`react-flow__edge-${n}`,a,{selected:c,animated:d,inactive:We,updating:be}]),onClick:he,onDoubleClick:ve,onContextMenu:le,onMouseEnter:ne,onMouseMove:Ae,onMouseLeave:pe,onKeyDown:J?ct:void 0,tabIndex:J?0:void 0,role:J?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":W===null?void 0:W||`Edge from ${y} to ${N}`,"aria-describedby":J?`${Ohe}-${D}`:void 0,ref:oe},!we&&ft.createElement(e,{id:r,source:y,target:N,selected:c,animated:d,label:u,labelStyle:f,labelShowBg:A,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,data:i,style:v,sourceX:E,sourceY:B,targetX:_,targetY:I,sourcePosition:j,targetPosition:k,sourceHandleId:F,targetHandleId:S,markerStart:ue,markerEnd:ge,pathOptions:ie,interactionWidth:re}),ce&&ft.createElement(ft.Fragment,null,(ce==="source"||ce===!0)&&ft.createElement(UY,{position:j,centerX:E,centerY:B,radius:G,onMouseDown:Le,onMouseEnter:ze,onMouseOut:Re,type:"source"}),(ce==="target"||ce===!0)&&ft.createElement(UY,{position:k,centerX:_,centerY:I,radius:G,onMouseDown:qe,onMouseEnter:ze,onMouseOut:Re,type:"target"})))};return t.displayName="EdgeWrapper",w.memo(t)};function Dct(e){const t={default:Bv(e.default||ZS),straight:Bv(e.bezier||EU),step:Bv(e.step||NU),smoothstep:Bv(e.step||B3),simplebezier:Bv(e.simplebezier||wU)},r={},a=Object.keys(e).filter(n=>!["default","bezier"].includes(n)).reduce((n,i)=>(n[i]=Bv(e[i]||ZS),n),r);return{...t,...a}}function HY(e,t,r=null){const a=((r==null?void 0:r.x)||0)+t.x,n=((r==null?void 0:r.y)||0)+t.y,i=(r==null?void 0:r.width)||t.width,o=(r==null?void 0:r.height)||t.height;switch(e){case Cr.Top:return{x:a+i/2,y:n};case Cr.Right:return{x:a+i,y:n+o/2};case Cr.Bottom:return{x:a+i/2,y:n+o};case Cr.Left:return{x:a,y:n+o/2}}}function QY(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const Fct=(e,t,r,a,n,i)=>{const o=HY(r,e,t),l=HY(i,a,n);return{sourceX:o.x,sourceY:o.y,targetX:l.x,targetY:l.y}};function Pct({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:a,targetWidth:n,targetHeight:i,width:o,height:l,transform:c}){const d={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+n),y2:Math.max(e.y+a,t.y+i)};d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);const u=yU({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:l/c[2]}),f=Math.max(0,Math.min(u.x2,d.x2)-Math.max(u.x,d.x)),A=Math.max(0,Math.min(u.y2,d.y2)-Math.max(u.y,d.y));return Math.ceil(f*A)>0}function zY(e){var a,n,i,o,l;const t=((a=e==null?void 0:e[Ps])==null?void 0:a.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((n=e==null?void 0:e.positionAbsolute)==null?void 0:n.x)<"u"&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const Rct=[{level:0,isMaxLevel:!0,edges:[]}];function Lct(e,t,r=!1){let a=-1;const n=e.reduce((o,l)=>{var u,f;const c=fu(l.zIndex);let d=c?l.zIndex:0;if(r){const A=t.get(l.target),m=t.get(l.source),g=l.selected||(A==null?void 0:A.selected)||(m==null?void 0:m.selected),x=Math.max(((u=m==null?void 0:m[Ps])==null?void 0:u.z)||0,((f=A==null?void 0:A[Ps])==null?void 0:f.z)||0,1e3);d=(c?l.zIndex:0)+(g?x:0)}return o[d]?o[d].push(l):o[d]=[l],a=d>a?d:a,o},{}),i=Object.entries(n).map(([o,l])=>{const c=+o;return{edges:l,level:c,isMaxLevel:c===a}});return i.length===0?Rct:i}function Mct(e,t,r){const a=xs(w.useCallback(n=>e?n.edges.filter(i=>{const o=t.get(i.source),l=t.get(i.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&Pct({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:l.width,targetHeight:l.height,width:n.width,height:n.height,transform:n.transform})}):n.edges,[e,t]));return Lct(a,t,r)}const Uct=({color:e="none",strokeWidth:t=1})=>ft.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Hct=({color:e="none",strokeWidth:t=1})=>ft.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),$Y={[JS.Arrow]:Uct,[JS.ArrowClosed]:Hct};function Qct(e){const t=go();return w.useMemo(()=>{var n,i;return Object.prototype.hasOwnProperty.call($Y,e)?$Y[e]:((i=(n=t.getState()).onError)==null||i.call(n,"009",hA.error009(e)),null)},[e])}const zct=({id:e,type:t,color:r,width:a=12.5,height:n=12.5,markerUnits:i="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const c=Qct(t);return c?ft.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${a}`,markerHeight:`${n}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:l,refX:"0",refY:"0"},ft.createElement(c,{color:r,strokeWidth:o})):null},$ct=({defaultColor:e,rfId:t})=>r=>{const a=[];return r.edges.reduce((n,i)=>([i.markerStart,i.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const l=UP(o,t);a.includes(l)||(n.push({id:l,color:o.color||e,...o}),a.push(l))}}),n),[]).sort((n,i)=>n.id.localeCompare(i.id))},Ghe=({defaultColor:e,rfId:t})=>{const r=xs(w.useCallback($ct({defaultColor:e,rfId:t}),[e,t]),(a,n)=>!(a.length!==n.length||a.some((i,o)=>i.id!==n[o].id)));return ft.createElement("defs",null,r.map(a=>ft.createElement(zct,{id:a.id,key:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient})))};Ghe.displayName="MarkerDefinitions";var Vct=w.memo(Ghe);const Gct=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),qhe=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:a,edgeTypes:n,noPanClassName:i,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:d,onEdgeClick:u,onEdgeDoubleClick:f,onReconnect:A,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,children:v,disableKeyboardA11y:y})=>{const{edgesFocusable:N,edgesUpdatable:E,elementsSelectable:B,width:_,height:I,connectionMode:j,nodeInternals:k,onError:T}=xs(Gct,_l),L=Mct(t,k,r);return _?ft.createElement(ft.Fragment,null,L.map(({level:F,edges:S,isMaxLevel:M})=>ft.createElement("svg",{key:F,style:{zIndex:F},width:_,height:I,className:"react-flow__edges react-flow__container"},M&&ft.createElement(Vct,{defaultColor:e,rfId:a}),ft.createElement("g",null,S.map(H=>{const[K,Q,G]=zY(k.get(H.source)),[X,Z,U]=zY(k.get(H.target));if(!G||!U)return null;let Y=H.type||"default";n[Y]||(T==null||T("011",hA.error011(Y)),Y="default");const P=n[Y]||n.default,D=j===gx.Strict?Z.target:(Z.target??[]).concat(Z.source??[]),W=QY(Q.source,H.sourceHandle),J=QY(D,H.targetHandle),ce=(W==null?void 0:W.position)||Cr.Bottom,ie=(J==null?void 0:J.position)||Cr.Top,re=!!(H.focusable||N&&typeof H.focusable>"u"),de=H.reconnectable||H.updatable,oe=typeof A<"u"&&(de||E&&typeof de>"u");if(!W||!J)return T==null||T("008",hA.error008(W,H)),null;const{sourceX:be,sourceY:q,targetX:we,targetY:Te}=Fct(K,W,ce,X,J,ie);return ft.createElement(P,{key:H.id,id:H.id,className:Wl([H.className,i]),type:Y,data:H.data,selected:!!H.selected,animated:!!H.animated,hidden:!!H.hidden,label:H.label,labelStyle:H.labelStyle,labelShowBg:H.labelShowBg,labelBgStyle:H.labelBgStyle,labelBgPadding:H.labelBgPadding,labelBgBorderRadius:H.labelBgBorderRadius,style:H.style,source:H.source,target:H.target,sourceHandleId:H.sourceHandle,targetHandleId:H.targetHandle,markerEnd:H.markerEnd,markerStart:H.markerStart,sourceX:be,sourceY:q,targetX:we,targetY:Te,sourcePosition:ce,targetPosition:ie,elementsSelectable:B,onContextMenu:o,onMouseEnter:l,onMouseMove:c,onMouseLeave:d,onClick:u,onEdgeDoubleClick:f,onReconnect:A,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,rfId:a,ariaLabel:H.ariaLabel,isFocusable:re,isReconnectable:oe,pathOptions:"pathOptions"in H?H.pathOptions:void 0,interactionWidth:H.interactionWidth,disableKeyboardA11y:y})})))),v):null};qhe.displayName="EdgeRenderer";var qct=w.memo(qhe);const Kct=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Wct({children:e}){const t=xs(Kct);return ft.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Xct(e){const t=I3(),r=w.useRef(!1);w.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const Yct={[Cr.Left]:Cr.Right,[Cr.Right]:Cr.Left,[Cr.Top]:Cr.Bottom,[Cr.Bottom]:Cr.Top},Khe=({nodeId:e,handleType:t,style:r,type:a=Sm.Bezier,CustomComponent:n,connectionStatus:i})=>{var I,j,k;const{fromNode:o,handleId:l,toX:c,toY:d,connectionMode:u}=xs(w.useCallback(T=>({fromNode:T.nodeInternals.get(e),handleId:T.connectionHandleId,toX:(T.connectionPosition.x-T.transform[0])/T.transform[2],toY:(T.connectionPosition.y-T.transform[1])/T.transform[2],connectionMode:T.connectionMode}),[e]),_l),f=(I=o==null?void 0:o[Ps])==null?void 0:I.handleBounds;let A=f==null?void 0:f[t];if(u===gx.Loose&&(A=A||(f==null?void 0:f[t==="source"?"target":"source"])),!o||!A)return null;const m=l?A.find(T=>T.id===l):A[0],g=m?m.x+m.width/2:(o.width??0)/2,x=m?m.y+m.height/2:o.height??0,v=(((j=o.positionAbsolute)==null?void 0:j.x)??0)+g,y=(((k=o.positionAbsolute)==null?void 0:k.y)??0)+x,N=m==null?void 0:m.position,E=N?Yct[N]:null;if(!N||!E)return null;if(n)return ft.createElement(n,{connectionLineType:a,connectionLineStyle:r,fromNode:o,fromHandle:m,fromX:v,fromY:y,toX:c,toY:d,fromPosition:N,toPosition:E,connectionStatus:i});let B="";const _={sourceX:v,sourceY:y,sourcePosition:N,targetX:c,targetY:d,targetPosition:E};return a===Sm.Bezier?[B]=ghe(_):a===Sm.Step?[B]=MP({..._,borderRadius:0}):a===Sm.SmoothStep?[B]=MP(_):a===Sm.SimpleBezier?[B]=phe(_):B=`M${v},${y} ${c},${d}`,ft.createElement("path",{d:B,fill:"none",className:"react-flow__connection-path",style:r})};Khe.displayName="ConnectionLine";const Jct=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Zct({containerStyle:e,style:t,type:r,component:a}){const{nodeId:n,handleType:i,nodesConnectable:o,width:l,height:c,connectionStatus:d}=xs(Jct,_l);return!(n&&i&&l&&o)?null:ft.createElement("svg",{style:e,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},ft.createElement("g",{className:Wl(["react-flow__connection",d])},ft.createElement(Khe,{nodeId:n,handleType:i,style:t,type:r,CustomComponent:a,connectionStatus:d})))}function VY(e,t){return w.useRef(null),go(),w.useMemo(()=>t(e),[e])}const Whe=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:a,onMoveEnd:n,onInit:i,onNodeClick:o,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:d,onNodeMouseEnter:u,onNodeMouseMove:f,onNodeMouseLeave:A,onNodeContextMenu:m,onSelectionContextMenu:g,onSelectionStart:x,onSelectionEnd:v,connectionLineType:y,connectionLineStyle:N,connectionLineComponent:E,connectionLineContainerStyle:B,selectionKeyCode:_,selectionOnDrag:I,selectionMode:j,multiSelectionKeyCode:k,panActivationKeyCode:T,zoomActivationKeyCode:L,deleteKeyCode:F,onlyRenderVisibleElements:S,elementsSelectable:M,selectNodesOnDrag:H,defaultViewport:K,translateExtent:Q,minZoom:G,maxZoom:X,preventScrolling:Z,defaultMarkerColor:U,zoomOnScroll:Y,zoomOnPinch:P,panOnScroll:D,panOnScrollSpeed:W,panOnScrollMode:J,zoomOnDoubleClick:ce,panOnDrag:ie,onPaneClick:re,onPaneMouseEnter:de,onPaneMouseMove:oe,onPaneMouseLeave:be,onPaneScroll:q,onPaneContextMenu:we,onEdgeContextMenu:Te,onEdgeMouseEnter:Ee,onEdgeMouseMove:ue,onEdgeMouseLeave:ge,onReconnect:he,onReconnectStart:ve,onReconnectEnd:le,reconnectRadius:ne,noDragClassName:Ae,noWheelClassName:pe,noPanClassName:ke,elevateEdgesOnSelect:Le,disableKeyboardA11y:qe,nodeOrigin:ze,nodeExtent:Re,rfId:We})=>{const ct=VY(e,kct),Ze=VY(t,Dct);return Xct(i),ft.createElement(Cct,{onPaneClick:re,onPaneMouseEnter:de,onPaneMouseMove:oe,onPaneMouseLeave:be,onPaneContextMenu:we,onPaneScroll:q,deleteKeyCode:F,selectionKeyCode:_,selectionOnDrag:I,selectionMode:j,onSelectionStart:x,onSelectionEnd:v,multiSelectionKeyCode:k,panActivationKeyCode:T,zoomActivationKeyCode:L,elementsSelectable:M,onMove:r,onMoveStart:a,onMoveEnd:n,zoomOnScroll:Y,zoomOnPinch:P,zoomOnDoubleClick:ce,panOnScroll:D,panOnScrollSpeed:W,panOnScrollMode:J,panOnDrag:ie,defaultViewport:K,translateExtent:Q,minZoom:G,maxZoom:X,onSelectionContextMenu:g,preventScrolling:Z,noDragClassName:Ae,noWheelClassName:pe,noPanClassName:ke,disableKeyboardA11y:qe},ft.createElement(Wct,null,ft.createElement(qct,{edgeTypes:Ze,onEdgeClick:l,onEdgeDoubleClick:d,onlyRenderVisibleElements:S,onEdgeContextMenu:Te,onEdgeMouseEnter:Ee,onEdgeMouseMove:ue,onEdgeMouseLeave:ge,onReconnect:he,onReconnectStart:ve,onReconnectEnd:le,reconnectRadius:ne,defaultMarkerColor:U,noPanClassName:ke,elevateEdgesOnSelect:!!Le,disableKeyboardA11y:qe,rfId:We},ft.createElement(Zct,{style:N,type:y,component:E,containerStyle:B})),ft.createElement("div",{className:"react-flow__edgelabel-renderer"}),ft.createElement(Tct,{nodeTypes:ct,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:f,onNodeMouseLeave:A,onNodeContextMenu:m,selectNodesOnDrag:H,onlyRenderVisibleElements:S,noPanClassName:ke,noDragClassName:Ae,disableKeyboardA11y:qe,nodeOrigin:ze,nodeExtent:Re,rfId:We})))};Whe.displayName="GraphView";var edt=w.memo(Whe);const $P=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Am={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:$P,nodeExtent:$P,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:gx.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Slt,isValidConnection:void 0},tdt=()=>hst((e,t)=>({...Am,setNodes:r=>{const{nodeInternals:a,nodeOrigin:n,elevateNodesOnSelect:i}=t();e({nodeInternals:vO(r,a,n,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:a={}}=t();e({edges:r.map(n=>({...a,...n}))})},setDefaultNodesAndEdges:(r,a)=>{const n=typeof r<"u",i=typeof a<"u",o=n?vO(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:i?a:[],hasDefaultNodes:n,hasDefaultEdges:i})},updateNodeDimensions:r=>{const{onNodesChange:a,nodeInternals:n,fitViewOnInit:i,fitViewOnInitDone:o,fitViewOnInitOptions:l,domNode:c,nodeOrigin:d}=t(),u=c==null?void 0:c.querySelector(".react-flow__viewport");if(!u)return;const f=window.getComputedStyle(u),{m22:A}=new window.DOMMatrixReadOnly(f.transform),m=r.reduce((x,v)=>{const y=n.get(v.id);if(y!=null&&y.hidden)n.set(y.id,{...y,[Ps]:{...y[Ps],handleBounds:void 0}});else if(y){const N=vU(v.nodeElement);!!(N.width&&N.height&&(y.width!==N.width||y.height!==N.height||v.forceUpdate))&&(n.set(y.id,{...y,[Ps]:{...y[Ps],handleBounds:{source:LY(".source",v.nodeElement,A,d),target:LY(".target",v.nodeElement,A,d)}},...N}),x.push({id:y.id,type:"dimensions",dimensions:N}))}return x},[]);Fhe(n,d);const g=o||i&&!o&&Phe(t,{initial:!0,...l});e({nodeInternals:new Map(n),fitViewOnInitDone:g}),(m==null?void 0:m.length)>0&&(a==null||a(m))},updateNodePositions:(r,a=!0,n=!1)=>{const{triggerNodeChanges:i}=t(),o=r.map(l=>{const c={id:l.id,type:"position",dragging:n};return a&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});i(o)},triggerNodeChanges:r=>{const{onNodesChange:a,nodeInternals:n,hasDefaultNodes:i,nodeOrigin:o,getNodes:l,elevateNodesOnSelect:c}=t();if(r!=null&&r.length){if(i){const d=Lhe(r,l()),u=vO(d,n,o,c);e({nodeInternals:u})}a==null||a(r)}},addSelectedNodes:r=>{const{multiSelectionActive:a,edges:n,getNodes:i}=t();let o,l=null;a?o=r.map(c=>ym(c,!0)):(o=ub(i(),r),l=ub(n,[])),Lj({changedNodes:o,changedEdges:l,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:a,edges:n,getNodes:i}=t();let o,l=null;a?o=r.map(c=>ym(c,!0)):(o=ub(n,r),l=ub(i(),[])),Lj({changedNodes:l,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:a}={})=>{const{edges:n,getNodes:i}=t(),o=r||i(),l=a||n,c=o.map(u=>(u.selected=!1,ym(u.id,!1))),d=l.map(u=>ym(u.id,!1));Lj({changedNodes:c,changedEdges:d,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:a,maxZoom:n}=t();a==null||a.scaleExtent([r,n]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:a,minZoom:n}=t();a==null||a.scaleExtent([n,r]),e({maxZoom:r})},setTranslateExtent:r=>{var a;(a=t().d3Zoom)==null||a.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:a}=t(),i=a().filter(l=>l.selected).map(l=>ym(l.id,!1)),o=r.filter(l=>l.selected).map(l=>ym(l.id,!1));Lj({changedNodes:i,changedEdges:o,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:a}=t();a.forEach(n=>{n.positionAbsolute=bU(n.position,r)}),e({nodeExtent:r,nodeInternals:new Map(a)})},panBy:r=>{const{transform:a,width:n,height:i,d3Zoom:o,d3Selection:l,translateExtent:c}=t();if(!o||!l||!r.x&&!r.y)return!1;const d=Km.translate(a[0]+r.x,a[1]+r.y).scale(a[2]),u=[[0,0],[n,i]],f=o==null?void 0:o.constrain()(d,u,c);return o.transform(l,f),a[0]!==f.x||a[1]!==f.y||a[2]!==f.k},cancelConnection:()=>e({connectionNodeId:Am.connectionNodeId,connectionHandleId:Am.connectionHandleId,connectionHandleType:Am.connectionHandleType,connectionStatus:Am.connectionStatus,connectionStartHandle:Am.connectionStartHandle,connectionEndHandle:Am.connectionEndHandle}),reset:()=>e({...Am})}),Object.is),TU=({children:e})=>{const t=w.useRef(null);return t.current||(t.current=tdt()),ft.createElement(blt,{value:t.current},e)};TU.displayName="ReactFlowProvider";const Xhe=({children:e})=>w.useContext(T3)?ft.createElement(ft.Fragment,null,e):ft.createElement(TU,null,e);Xhe.displayName="ReactFlowWrapper";const rdt={input:She,default:QP,output:The,group:SU},adt={default:ZS,straight:EU,step:NU,smoothstep:B3,simplebezier:wU},ndt=[0,0],sdt=[15,15],idt={x:0,y:0,zoom:1},odt={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Yhe=w.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:a,className:n,nodeTypes:i=rdt,edgeTypes:o=adt,onNodeClick:l,onEdgeClick:c,onInit:d,onMove:u,onMoveStart:f,onMoveEnd:A,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,onNodeMouseEnter:N,onNodeMouseMove:E,onNodeMouseLeave:B,onNodeContextMenu:_,onNodeDoubleClick:I,onNodeDragStart:j,onNodeDrag:k,onNodeDragStop:T,onNodesDelete:L,onEdgesDelete:F,onSelectionChange:S,onSelectionDragStart:M,onSelectionDrag:H,onSelectionDragStop:K,onSelectionContextMenu:Q,onSelectionStart:G,onSelectionEnd:X,connectionMode:Z=gx.Strict,connectionLineType:U=Sm.Bezier,connectionLineStyle:Y,connectionLineComponent:P,connectionLineContainerStyle:D,deleteKeyCode:W="Backspace",selectionKeyCode:J="Shift",selectionOnDrag:ce=!1,selectionMode:ie=IN.Full,panActivationKeyCode:re="Space",multiSelectionKeyCode:de=YS()?"Meta":"Control",zoomActivationKeyCode:oe=YS()?"Meta":"Control",snapToGrid:be=!1,snapGrid:q=sdt,onlyRenderVisibleElements:we=!1,selectNodesOnDrag:Te=!0,nodesDraggable:Ee,nodesConnectable:ue,nodesFocusable:ge,nodeOrigin:he=ndt,edgesFocusable:ve,edgesUpdatable:le,elementsSelectable:ne,defaultViewport:Ae=idt,minZoom:pe=.5,maxZoom:ke=2,translateExtent:Le=$P,preventScrolling:qe=!0,nodeExtent:ze,defaultMarkerColor:Re="#b1b1b7",zoomOnScroll:We=!0,zoomOnPinch:ct=!0,panOnScroll:Ze=!1,panOnScrollSpeed:Qe=.5,panOnScrollMode:wt=Bg.Free,zoomOnDoubleClick:ar=!0,panOnDrag:qt=!0,onPaneClick:gr,onPaneMouseEnter:Pr,onPaneMouseMove:yr,onPaneMouseLeave:Tn,onPaneScroll:Rr,onPaneContextMenu:Ha,children:Rn,onEdgeContextMenu:Lr,onEdgeDoubleClick:pr,onEdgeMouseEnter:Jr,onEdgeMouseMove:vs,onEdgeMouseLeave:Za,onEdgeUpdate:Ln,onEdgeUpdateStart:Qs,onEdgeUpdateEnd:tr,onReconnect:va,onReconnectStart:ca,onReconnectEnd:Fa,reconnectRadius:Xa=10,edgeUpdaterRadius:en=10,onNodesChange:Se,onEdgesChange:Ve,noDragClassName:Me="nodrag",noWheelClassName:He="nowheel",noPanClassName:Ne="nopan",fitView:xe=!1,fitViewOptions:Fe,connectOnClick:Ge=!0,attributionPosition:Ue,proOptions:Ye,defaultEdgeOptions:et,elevateNodesOnSelect:Nt=!0,elevateEdgesOnSelect:Et=!1,disableKeyboardA11y:zt=!1,autoPanOnConnect:Dt=!0,autoPanOnNodeDrag:Vt=!0,connectionRadius:kr=20,isValidConnection:ea,onError:ta,style:oa,id:bs,nodeDragThreshold:Uo,...ys},fi)=>{const zs=bs||"1";return ft.createElement("div",{...ys,style:{...oa,...odt},ref:fi,className:Wl(["react-flow",n]),"data-testid":"rf__wrapper",id:bs},ft.createElement(Xhe,null,ft.createElement(edt,{onInit:d,onMove:u,onMoveStart:f,onMoveEnd:A,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:N,onNodeMouseMove:E,onNodeMouseLeave:B,onNodeContextMenu:_,onNodeDoubleClick:I,nodeTypes:i,edgeTypes:o,connectionLineType:U,connectionLineStyle:Y,connectionLineComponent:P,connectionLineContainerStyle:D,selectionKeyCode:J,selectionOnDrag:ce,selectionMode:ie,deleteKeyCode:W,multiSelectionKeyCode:de,panActivationKeyCode:re,zoomActivationKeyCode:oe,onlyRenderVisibleElements:we,selectNodesOnDrag:Te,defaultViewport:Ae,translateExtent:Le,minZoom:pe,maxZoom:ke,preventScrolling:qe,zoomOnScroll:We,zoomOnPinch:ct,zoomOnDoubleClick:ar,panOnScroll:Ze,panOnScrollSpeed:Qe,panOnScrollMode:wt,panOnDrag:qt,onPaneClick:gr,onPaneMouseEnter:Pr,onPaneMouseMove:yr,onPaneMouseLeave:Tn,onPaneScroll:Rr,onPaneContextMenu:Ha,onSelectionContextMenu:Q,onSelectionStart:G,onSelectionEnd:X,onEdgeContextMenu:Lr,onEdgeDoubleClick:pr,onEdgeMouseEnter:Jr,onEdgeMouseMove:vs,onEdgeMouseLeave:Za,onReconnect:va??Ln,onReconnectStart:ca??Qs,onReconnectEnd:Fa??tr,reconnectRadius:Xa??en,defaultMarkerColor:Re,noDragClassName:Me,noWheelClassName:He,noPanClassName:Ne,elevateEdgesOnSelect:Et,rfId:zs,disableKeyboardA11y:zt,nodeOrigin:he,nodeExtent:ze}),ft.createElement(Ylt,{nodes:e,edges:t,defaultNodes:r,defaultEdges:a,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,nodesDraggable:Ee,nodesConnectable:ue,nodesFocusable:ge,edgesFocusable:ve,edgesUpdatable:le,elementsSelectable:ne,elevateNodesOnSelect:Nt,minZoom:pe,maxZoom:ke,nodeExtent:ze,onNodesChange:Se,onEdgesChange:Ve,snapToGrid:be,snapGrid:q,connectionMode:Z,translateExtent:Le,connectOnClick:Ge,defaultEdgeOptions:et,fitView:xe,fitViewOptions:Fe,onNodesDelete:L,onEdgesDelete:F,onNodeDragStart:j,onNodeDrag:k,onNodeDragStop:T,onSelectionDrag:H,onSelectionDragStart:M,onSelectionDragStop:K,noPanClassName:Ne,nodeOrigin:he,rfId:zs,autoPanOnConnect:Dt,autoPanOnNodeDrag:Vt,onError:ta,connectionRadius:kr,isValidConnection:ea,nodeDragThreshold:Uo}),ft.createElement(Wlt,{onSelectionChange:S}),Rn,ft.createElement(wlt,{proOptions:Ye,position:Ue}),ft.createElement(rct,{rfId:zs,disableKeyboardA11y:zt})))});Yhe.displayName="ReactFlow";function Jhe(e){return t=>{const[r,a]=w.useState(t),n=w.useCallback(i=>a(o=>e(i,o)),[]);return[r,a,n]}}const ldt=Jhe(Lhe),cdt=Jhe(pct);function ddt(){return ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ft.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function udt(){return ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ft.createElement("path",{d:"M0 0h32v4.2H0z"}))}function fdt(){return ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ft.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function hdt(){return ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ft.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Adt(){return ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ft.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Xw=({children:e,className:t,...r})=>ft.createElement("button",{type:"button",className:Wl(["react-flow__controls-button",t]),...r},e);Xw.displayName="ControlButton";const mdt=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Zhe=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:a=!0,fitViewOptions:n,onZoomIn:i,onZoomOut:o,onFitView:l,onInteractiveChange:c,className:d,children:u,position:f="bottom-left"})=>{const A=go(),[m,g]=w.useState(!1),{isInteractive:x,minZoomReached:v,maxZoomReached:y}=xs(mdt,_l),{zoomIn:N,zoomOut:E,fitView:B}=I3();if(w.useEffect(()=>{g(!0)},[]),!m)return null;const _=()=>{N(),i==null||i()},I=()=>{E(),o==null||o()},j=()=>{B(n),l==null||l()},k=()=>{A.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)};return ft.createElement(che,{className:Wl(["react-flow__controls",d]),position:f,style:e,"data-testid":"rf__controls"},t&&ft.createElement(ft.Fragment,null,ft.createElement(Xw,{onClick:_,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},ft.createElement(ddt,null)),ft.createElement(Xw,{onClick:I,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v},ft.createElement(udt,null))),r&&ft.createElement(Xw,{className:"react-flow__controls-fitview",onClick:j,title:"fit view","aria-label":"fit view"},ft.createElement(fdt,null)),a&&ft.createElement(Xw,{className:"react-flow__controls-interactive",onClick:k,title:"toggle interactivity","aria-label":"toggle interactivity"},x?ft.createElement(Adt,null):ft.createElement(hdt,null)),u)};Zhe.displayName="Controls";var pdt=w.memo(Zhe),uf;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(uf||(uf={}));function gdt({color:e,dimensions:t,lineWidth:r}){return ft.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function xdt({color:e,radius:t}){return ft.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const vdt={[uf.Dots]:"#91919a",[uf.Lines]:"#eee",[uf.Cross]:"#e2e2e2"},bdt={[uf.Dots]:1,[uf.Lines]:1,[uf.Cross]:6},ydt=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function e0e({id:e,variant:t=uf.Dots,gap:r=20,size:a,lineWidth:n=1,offset:i=2,color:o,style:l,className:c}){const d=w.useRef(null),{transform:u,patternId:f}=xs(ydt,_l),A=o||vdt[t],m=a||bdt[t],g=t===uf.Dots,x=t===uf.Cross,v=Array.isArray(r)?r:[r,r],y=[v[0]*u[2]||1,v[1]*u[2]||1],N=m*u[2],E=x?[N,N]:y,B=g?[N/i,N/i]:[E[0]/i,E[1]/i];return ft.createElement("svg",{className:Wl(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:d,"data-testid":"rf__background"},ft.createElement("pattern",{id:f+e,x:u[0]%y[0],y:u[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${B[0]},-${B[1]})`},g?ft.createElement(xdt,{color:A,radius:N/i}):ft.createElement(gdt,{dimensions:E,color:A,lineWidth:n})),ft.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}e0e.displayName="Background";var wdt=w.memo(e0e);function Ndt(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),a=r.createElement("base"),n=r.createElement("a");return r.head.appendChild(a),r.body.appendChild(n),t&&(a.href=t),n.href=e,n.href}const Edt=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function Xm(e){const t=[];for(let r=0,a=e.length;r<a;r++)t.push(e[r]);return t}let Iv=null;function t0e(e={}){return Iv||(e.includeStyleProperties?(Iv=e.includeStyleProperties,Iv):(Iv=Xm(window.getComputedStyle(document.documentElement)),Iv))}function e_(e,t){const a=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return a?parseFloat(a.replace("px","")):0}function Cdt(e){const t=e_(e,"border-left-width"),r=e_(e,"border-right-width");return e.clientWidth+t+r}function jdt(e){const t=e_(e,"border-top-width"),r=e_(e,"border-bottom-width");return e.clientHeight+t+r}function r0e(e,t={}){const r=t.width||Cdt(e),a=t.height||jdt(e);return{width:r,height:a}}function kdt(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Jc=16384;function Sdt(e){(e.width>Jc||e.height>Jc)&&(e.width>Jc&&e.height>Jc?e.width>e.height?(e.height*=Jc/e.width,e.width=Jc):(e.width*=Jc/e.height,e.height=Jc):e.width>Jc?(e.height*=Jc/e.width,e.width=Jc):(e.width*=Jc/e.height,e.height=Jc))}function t_(e){return new Promise((t,r)=>{const a=new Image;a.onload=()=>{a.decode().then(()=>{requestAnimationFrame(()=>t(a))})},a.onerror=r,a.crossOrigin="anonymous",a.decoding="async",a.src=e})}async function _dt(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function Tdt(e,t,r){const a="http://www.w3.org/2000/svg",n=document.createElementNS(a,"svg"),i=document.createElementNS(a,"foreignObject");return n.setAttribute("width",`${t}`),n.setAttribute("height",`${r}`),n.setAttribute("viewBox",`0 0 ${t} ${r}`),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),n.appendChild(i),i.appendChild(e),_dt(n)}const Sc=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||Sc(r,t)};function Bdt(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function Idt(e,t){return t0e(t).map(r=>{const a=e.getPropertyValue(r),n=e.getPropertyPriority(r);return`${r}: ${a}${n?" !important":""};`}).join(" ")}function Odt(e,t,r,a){const n=`.${e}:${t}`,i=r.cssText?Bdt(r):Idt(r,a);return document.createTextNode(`${n}{${i}}`)}function GY(e,t,r,a){const n=window.getComputedStyle(e,r),i=n.getPropertyValue("content");if(i===""||i==="none")return;const o=Edt();try{t.className=`${t.className} ${o}`}catch{return}const l=document.createElement("style");l.appendChild(Odt(o,r,n,a)),t.appendChild(l)}function Ddt(e,t,r){GY(e,t,":before",r),GY(e,t,":after",r)}const qY="application/font-woff",KY="image/jpeg",Fdt={woff:qY,woff2:qY,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:KY,jpeg:KY,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Pdt(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function BU(e){const t=Pdt(e).toLowerCase();return Fdt[t]||""}function Rdt(e){return e.split(/,/)[1]}function VP(e){return e.search(/^(data:)/)!==-1}function Ldt(e,t){return`data:${t};base64,${e}`}async function a0e(e,t,r){const a=await fetch(e,t);if(a.status===404)throw new Error(`Resource "${a.url}" not found`);const n=await a.blob();return new Promise((i,o)=>{const l=new FileReader;l.onerror=o,l.onloadend=()=>{try{i(r({res:a,result:l.result}))}catch(c){o(c)}},l.readAsDataURL(n)})}const NO={};function Mdt(e,t,r){let a=e.replace(/\?.*/,"");return r&&(a=e),/ttf|otf|eot|woff2?/i.test(a)&&(a=a.replace(/.*\//,"")),t?`[${t}]${a}`:a}async function IU(e,t,r){const a=Mdt(e,t,r.includeQueryParams);if(NO[a]!=null)return NO[a];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let n;try{const i=await a0e(e,r.fetchRequestInit,({res:o,result:l})=>(t||(t=o.headers.get("Content-Type")||""),Rdt(l)));n=Ldt(i,t)}catch(i){n=r.imagePlaceholder||"";let o=`Failed to fetch resource: ${e}`;i&&(o=typeof i=="string"?i:i.message),o&&console.warn(o)}return NO[a]=n,n}async function Udt(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):t_(t)}async function Hdt(e,t){if(e.currentSrc){const i=document.createElement("canvas"),o=i.getContext("2d");i.width=e.clientWidth,i.height=e.clientHeight,o==null||o.drawImage(e,0,0,i.width,i.height);const l=i.toDataURL();return t_(l)}const r=e.poster,a=BU(r),n=await IU(r,a,t);return t_(n)}async function Qdt(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await O3(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function zdt(e,t){return Sc(e,HTMLCanvasElement)?Udt(e):Sc(e,HTMLVideoElement)?Hdt(e,t):Sc(e,HTMLIFrameElement)?Qdt(e,t):e.cloneNode(n0e(e))}const $dt=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",n0e=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function Vdt(e,t,r){var a,n;if(n0e(t))return t;let i=[];return $dt(e)&&e.assignedNodes?i=Xm(e.assignedNodes()):Sc(e,HTMLIFrameElement)&&(!((a=e.contentDocument)===null||a===void 0)&&a.body)?i=Xm(e.contentDocument.body.childNodes):i=Xm(((n=e.shadowRoot)!==null&&n!==void 0?n:e).childNodes),i.length===0||Sc(e,HTMLVideoElement)||await i.reduce((o,l)=>o.then(()=>O3(l,r)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function Gdt(e,t,r){const a=t.style;if(!a)return;const n=window.getComputedStyle(e);n.cssText?(a.cssText=n.cssText,a.transformOrigin=n.transformOrigin):t0e(r).forEach(i=>{let o=n.getPropertyValue(i);i==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),Sc(e,HTMLIFrameElement)&&i==="display"&&o==="inline"&&(o="block"),i==="d"&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),a.setProperty(i,o,n.getPropertyPriority(i))})}function qdt(e,t){Sc(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Sc(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function Kdt(e,t){if(Sc(e,HTMLSelectElement)){const r=t,a=Array.from(r.children).find(n=>e.value===n.getAttribute("value"));a&&a.setAttribute("selected","")}}function Wdt(e,t,r){return Sc(t,Element)&&(Gdt(e,t,r),Ddt(e,t,r),qdt(e,t),Kdt(e,t)),t}async function Xdt(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const a={};for(let i=0;i<r.length;i++){const l=r[i].getAttribute("xlink:href");if(l){const c=e.querySelector(l),d=document.querySelector(l);!c&&d&&!a[l]&&(a[l]=await O3(d,t,!0))}}const n=Object.values(a);if(n.length){const i="http://www.w3.org/1999/xhtml",o=document.createElementNS(i,"svg");o.setAttribute("xmlns",i),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const l=document.createElementNS(i,"defs");o.appendChild(l);for(let c=0;c<n.length;c++)l.appendChild(n[c]);e.appendChild(o)}return e}async function O3(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(a=>zdt(a,t)).then(a=>Vdt(e,a,t)).then(a=>Wdt(e,a,t)).then(a=>Xdt(a,t))}const s0e=/url\((['"]?)([^'"]+?)\1\)/g,Ydt=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Jdt=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Zdt(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function eut(e){const t=[];return e.replace(s0e,(r,a,n)=>(t.push(n),r)),t.filter(r=>!VP(r))}async function tut(e,t,r,a,n){try{const i=r?Ndt(t,r):t,o=BU(t);let l;return n||(l=await IU(i,o,a)),e.replace(Zdt(t),`$1${l}$3`)}catch{}return e}function rut(e,{preferredFontFormat:t}){return t?e.replace(Jdt,r=>{for(;;){const[a,,n]=Ydt.exec(r)||[];if(!n)return"";if(n===t)return`src: ${a};`}}):e}function i0e(e){return e.search(s0e)!==-1}async function o0e(e,t,r){if(!i0e(e))return e;const a=rut(e,r);return eut(a).reduce((i,o)=>i.then(l=>tut(l,o,t,r)),Promise.resolve(a))}async function Ov(e,t,r){var a;const n=(a=t.style)===null||a===void 0?void 0:a.getPropertyValue(e);if(n){const i=await o0e(n,null,r);return t.style.setProperty(e,i,t.style.getPropertyPriority(e)),!0}return!1}async function aut(e,t){await Ov("background",e,t)||await Ov("background-image",e,t),await Ov("mask",e,t)||await Ov("-webkit-mask",e,t)||await Ov("mask-image",e,t)||await Ov("-webkit-mask-image",e,t)}async function nut(e,t){const r=Sc(e,HTMLImageElement);if(!(r&&!VP(e.src))&&!(Sc(e,SVGImageElement)&&!VP(e.href.baseVal)))return;const a=r?e.src:e.href.baseVal,n=await IU(a,BU(a),t);await new Promise((i,o)=>{e.onload=i,e.onerror=t.onImageErrorHandler?(...c)=>{try{i(t.onImageErrorHandler(...c))}catch(d){o(d)}}:o;const l=e;l.decode&&(l.decode=i),l.loading==="lazy"&&(l.loading="eager"),r?(e.srcset="",e.src=n):e.href.baseVal=n})}async function sut(e,t){const a=Xm(e.childNodes).map(n=>l0e(n,t));await Promise.all(a).then(()=>e)}async function l0e(e,t){Sc(e,Element)&&(await aut(e,t),await nut(e,t),await sut(e,t))}function iut(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const a=t.style;return a!=null&&Object.keys(a).forEach(n=>{r[n]=a[n]}),e}const WY={};async function XY(e){let t=WY[e];if(t!=null)return t;const a=await(await fetch(e)).text();return t={url:e,cssText:a},WY[e]=t,t}async function YY(e,t){let r=e.cssText;const a=/url\(["']?([^"')]+)["']?\)/g,i=(r.match(/url\([^)]+\)/g)||[]).map(async o=>{let l=o.replace(a,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),a0e(l,t.fetchRequestInit,({result:c})=>(r=r.replace(o,`url(${c})`),[o,c]))});return Promise.all(i).then(()=>r)}function JY(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let a=e.replace(r,"");const n=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=n.exec(a);if(c===null)break;t.push(c[0])}a=a.replace(n,"");const i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(o,"gi");for(;;){let c=i.exec(a);if(c===null){if(c=l.exec(a),c===null)break;i.lastIndex=l.lastIndex}else l.lastIndex=i.lastIndex;t.push(c[0])}return t}async function out(e,t){const r=[],a=[];return e.forEach(n=>{if("cssRules"in n)try{Xm(n.cssRules||[]).forEach((i,o)=>{if(i.type===CSSRule.IMPORT_RULE){let l=o+1;const c=i.href,d=XY(c).then(u=>YY(u,t)).then(u=>JY(u).forEach(f=>{try{n.insertRule(f,f.startsWith("@import")?l+=1:n.cssRules.length)}catch(A){console.error("Error inserting rule from remote css",{rule:f,error:A})}})).catch(u=>{console.error("Error loading remote css",u.toString())});a.push(d)}})}catch(i){const o=e.find(l=>l.href==null)||document.styleSheets[0];n.href!=null&&a.push(XY(n.href).then(l=>YY(l,t)).then(l=>JY(l).forEach(c=>{o.insertRule(c,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",i)}}),Promise.all(a).then(()=>(e.forEach(n=>{if("cssRules"in n)try{Xm(n.cssRules||[]).forEach(i=>{r.push(i)})}catch(i){console.error(`Error while reading CSS rules from ${n.href}`,i)}}),r))}function lut(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>i0e(t.style.getPropertyValue("src")))}async function cut(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=Xm(e.ownerDocument.styleSheets),a=await out(r,t);return lut(a)}function c0e(e){return e.trim().replace(/["']/g,"")}function dut(e){const t=new Set;function r(a){(a.style.fontFamily||getComputedStyle(a).fontFamily).split(",").forEach(i=>{t.add(c0e(i))}),Array.from(a.children).forEach(i=>{i instanceof HTMLElement&&r(i)})}return r(e),t}async function uut(e,t){const r=await cut(e,t),a=dut(e);return(await Promise.all(r.filter(i=>a.has(c0e(i.style.fontFamily))).map(i=>{const o=i.parentStyleSheet?i.parentStyleSheet.href:null;return o0e(i.cssText,o,t)}))).join(`
`)}async function fut(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await uut(e,t);if(r){const a=document.createElement("style"),n=document.createTextNode(r);a.appendChild(n),e.firstChild?e.insertBefore(a,e.firstChild):e.appendChild(a)}}async function hut(e,t={}){const{width:r,height:a}=r0e(e,t),n=await O3(e,t,!0);return await fut(n,t),await l0e(n,t),iut(n,t),await Tdt(n,r,a)}async function Aut(e,t={}){const{width:r,height:a}=r0e(e,t),n=await hut(e,t),i=await t_(n),o=document.createElement("canvas"),l=o.getContext("2d"),c=t.pixelRatio||kdt(),d=t.canvasWidth||r,u=t.canvasHeight||a;return o.width=d*c,o.height=u*c,t.skipAutoScale||Sdt(o),o.style.width=`${d}`,o.style.height=`${u}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,o.width,o.height)),l.drawImage(i,0,0,o.width,o.height),o}async function D3(e,t={}){return(await Aut(e,t)).toDataURL()}const d0e="recursos_crucigramas",OU="recursos_lineas_de_tiempo",DU="recursos_mapas_mentales",u0e="recursos_sopas_de_letras",F3=e=>{var r,a,n,i;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString())||t.fechaCreacion,createdAt:((i=(n=t.createdAt)==null?void 0:n.toDate)==null?void 0:i.call(n).toISOString())||t.createdAt}},mut=e=>{const t=jt(ut(st,d0e),Gt("fechaCreacion","desc"));return rr(t,r=>{const a=r.docs.map(n=>F3(n));e(a)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},put=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:dr.fromDate(new Date)};return(await Kr(ut(st,d0e),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},gut=e=>{const t=jt(ut(st,OU),Gt("createdAt","desc"));return rr(t,r=>{const a=r.docs.map(n=>F3(n));e(a)},r=>{console.error("Error al suscribirse a las líneas de tiempo:",r),e([])})},xut=async(e,t)=>{try{const{id:r,...a}=e,n=$t(st,OU,r);await Us(n,{...a,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:dr.fromDate(new Date(a.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la línea de tiempo:",r),new Error("No se pudo guardar la línea de tiempo.")}},vut=async e=>{try{const t=$t(st,OU,e);await Ua(t)}catch(t){throw console.error("Error al eliminar la línea de tiempo:",t),new Error("No se pudo eliminar la línea de tiempo.")}},but=e=>{const t=jt(ut(st,DU),Gt("createdAt","desc"));return rr(t,r=>{const a=r.docs.map(n=>F3(n));e(a)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},yut=async(e,t)=>{try{const{id:r,...a}=e,n=$t(st,DU,r);await Us(n,{...a,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:dr.fromDate(new Date(a.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},wut=async e=>{try{const t=$t(st,DU,e);await Ua(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},Nut=e=>{const t=jt(ut(st,u0e),Gt("createdAt","desc"));return rr(t,r=>{const a=r.docs.map(n=>F3(n));e(a)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},Eut=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:dr.fromDate(new Date)};return(await Kr(ut(st,u0e),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},Cut=()=>s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),jut=()=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),kut=()=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),Sut=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Práctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return s.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[s.jsx(E1,{type:"target",position:Cr.Left,className:"w-2 h-2 !bg-slate-400"}),s.jsx("span",{className:"text-xl",children:e.icon||"🧠"}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&s.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),s.jsx(E1,{type:"source",position:Cr.Right,className:"w-2 h-2 !bg-slate-400"})]})},GP=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,a)=>r+GP(a,t),0),ZY=(e,t="tree")=>{const r=[],a=[];if(t==="tree"){const o=(l,c,d)=>{r.push({id:l.id,position:{x:c*280,y:d},data:{label:l.label,icon:l.icon,type:l.type},type:"custom"});const u=GP(l,100);let f=d-u/2+100/2;(l.children||[]).forEach(A=>{const m=GP(A,100),g=f+m/2-100/2;a.push({id:`e-${l.id}-${A.id}`,source:l.id,target:A.id,type:"smoothstep",animated:!0}),o(A,c+1,g),f+=m})};o(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const o=300,l=500;(e.children||[]).forEach((c,d)=>{const u=d/e.children.length*2*Math.PI;r.push({id:c.id,position:{x:o*Math.cos(u),y:o*Math.sin(u)},data:{label:c.label,icon:c.icon,type:c.type},type:"custom"}),a.push({id:`e-${e.id}-${c.id}`,source:e.id,target:c.id,type:"smoothstep"}),(c.children||[]).forEach((f,A)=>{const m=u+(A-(c.children.length-1)/2)*.25;r.push({id:f.id,position:{x:l*Math.cos(m),y:l*Math.sin(m)},data:{label:f.label,icon:f.icon,type:f.type},type:"custom"}),a.push({id:`e-${c.id}-${f.id}`,source:c.id,target:f.id,type:"smoothstep"})})})}return{nodes:r,edges:a}},f0e=({node:e,onUpdate:t,onAddChild:r,onDelete:a,level:n=0})=>{const i=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],o=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return s.jsxs("div",{className:`pl-4 ${n>0?"border-l "+o[n-1%o.length]:""}`,children:[s.jsx("div",{className:`p-2 rounded-lg my-1 ${i[n%i.length]}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:e.label,onChange:l=>t(e.id,l.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),s.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),n>0&&s.jsx("button",{onClick:()=>a(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(e.children||[]).map(l=>s.jsx(f0e,{node:l,onUpdate:t,onAddChild:r,onDelete:a,level:n+1},l.id))]})},_ut={custom:Sut},Tut=({mapData:e,onBack:t,onSave:r})=>{const[a,n]=w.useState(e.treeData),[i,o]=w.useState("tree"),[l,c]=w.useState(!1),[d,u,f]=ldt([]),[A,m,g]=cdt([]),{fitView:x}=I3();w.useEffect(()=>{const{nodes:_,edges:I}=ZY(a,i);u(_),m(I),setTimeout(()=>x({duration:300}),50)},[a,i,u,m,x]);const v=(_,I)=>{const j=JSON.parse(JSON.stringify(a)),k=T=>T.id===_?(T.label=I,!0):(T.children||[]).some(k);k(j),n(j)},y=_=>{const I=JSON.parse(JSON.stringify(a)),j=k=>k.id===_?(k.children||(k.children=[]),k.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(k.children||[]).some(j);j(I),n(I)},N=_=>{const I=JSON.parse(JSON.stringify(a)),j=k=>{const T=(k.children||[]).findIndex(L=>L.id===_);return T!==-1?(k.children.splice(T,1),!0):(k.children||[]).some(j)};j(I),n(I)},E=()=>{c(!0);const{nodes:_,edges:I}=ZY(a,i);r({...e,treeData:a,nodes:_,edges:I}),setTimeout(()=>c(!1),1e3)},B=async _=>{const I=document.querySelector(".react-flow");I&&D3(I,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(j=>{{const k=document.createElement("a");k.download=`${e.tema}.png`,k.href=j,k.click()}}).catch(j=>console.error("oops, something went wrong!",j))};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),s.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:s.jsxs(Yhe,{nodes:d,edges:A,onNodesChange:f,onEdgesChange:g,fitView:!0,nodeTypes:_ut,children:[s.jsx(pdt,{}),s.jsx(wdt,{})]})}),s.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[s.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),s.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[s.jsxs("button",{onClick:()=>o("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${i==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[s.jsx(jut,{})," Vista en árbol"]}),s.jsxs("button",{onClick:()=>o("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${i==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[s.jsx(kut,{})," Vista central"]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:s.jsx(f0e,{node:a,onUpdate:v,onAddChild:y,onDelete:N})}),s.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[s.jsx("button",{onClick:()=>B(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),s.jsx("button",{onClick:E,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:l?"Guardado!":"Guardar"})]})]})]})]})},But=({onBack:e,currentUser:t})=>{const[r,a]=w.useState("list"),[n,i]=w.useState([]),[o,l]=w.useState(null),[c,d]=w.useState(!1),[u,f]=w.useState(!0),[A,m]=w.useState(""),[g,x]=w.useState(""),[v,y]=w.useState("");w.useEffect(()=>{f(!0);const j=but(k=>{i(k),f(!1)});return()=>j()},[]);const N=async j=>{if(j.preventDefault(),!A.trim()){alert("El tema es obligatorio.");return}d(!0);{alert("La API Key de Gemini no está configurada."),d(!1);return}},E=async j=>{try{await yut(j,t)}catch(k){console.error("Error saving mind map:",k),alert("No se pudo guardar el mapa mental.")}},B=j=>{l(j),a("editor")},_=async j=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await wut(j)}catch(k){console.error("Error deleting mind map:",k),alert("No se pudo eliminar el mapa mental.")}},I=()=>{switch(r){case"editor":return o?s.jsx(TU,{children:s.jsx(Tut,{mapData:o,onBack:()=>a("list"),onSave:E})}):null;case"config":return s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),s.jsx("button",{onClick:()=>a("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",id:"tema",value:A,onChange:j=>m(j.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),s.jsx("textarea",{id:"contenido",value:v,onChange:j=>y(j.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),s.jsx("div",{className:"flex justify-end pt-4",children:s.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:c?s.jsx(Cut,{}):"Generar Mapa con IA"})})]})]});case"list":default:return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),s.jsx("button",{onClick:()=>a("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.length>0?n.map(j=>s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[s.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:j.tema}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(j.createdAt).toLocaleDateString("es-CL")]}),s.jsxs("div",{className:"mt-4 flex gap-2",children:[s.jsx("button",{onClick:()=>B(j),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),s.jsx("button",{onClick:()=>_(j.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},j.id)):s.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return u?s.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("span",{className:"text-4xl",children:"🧠"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),s.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),I()]})},Iut=()=>s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Out=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Dut=({onBack:e,currentUser:t})=>{const[r,a]=w.useState([]),[n,i]=w.useState("Media"),[o,l]=w.useState(10),[c,d]=w.useState(!1),[u,f]=w.useState(Array(10).fill("")),[A,m]=w.useState(""),[g,x]=w.useState(null),[v,y]=w.useState({ai:!1,puzzle:!1,data:!0}),N=w.useRef(null);w.useEffect(()=>{y(F=>({...F,data:!0}));const L=Nut(F=>{a(F),y(S=>({...S,data:!1}))});return()=>L()},[]),w.useEffect(()=>{f(L=>{const F=Array(o).fill("");for(let S=0;S<Math.min(L.length,o);S++)F[S]=L[S];return F})},[o]);const E=(L,F)=>{const S=[...u];S[L]=F,f(S)},B=async()=>{if(A.trim()){y(L=>({...L,ai:!0}));try{alert("La API Key de Gemini no está configurada."),y(Y=>({...Y,ai:!1}));return}catch(L){console.error("Error generating words with AI:",L),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{y(L=>({...L,ai:!1}))}}},_=(L,F,S,M,H,K)=>{for(let Q=0;Q<L.length;Q++){const G=S+Q*H.y,X=M+Q*H.x;if(G<0||G>=K||X<0||X>=K||F[G][X]&&F[G][X]!==L[Q])return!1}return!0},I=(L,F,S,M,H)=>{for(let K=0;K<L.length;K++)F[S+K*H.y][M+K*H.x]=L[K]},j=async()=>{y(G=>({...G,puzzle:!0})),x(null),await new Promise(G=>setTimeout(G,100));const L=u.map(G=>G.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(L.length===0){alert("Por favor, ingrese al menos una palabra válida."),y(G=>({...G,puzzle:!1}));return}const F=Math.max(...L.map(G=>G.length));let S=Math.max(F,L.length)+2;n==="Media"&&(S+=3),n==="Difícil"&&(S+=5),S=Math.min(Math.max(S,10),25);const M=Array(S).fill(null).map(()=>Array(S).fill(null)),H=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];n!=="Fácil"&&H.push({x:1,y:-1}),n==="Difícil"&&H.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const G of L.sort((X,Z)=>Z.length-X.length)){let X=!1;for(let Z=0;Z<100;Z++){const U=H[Math.floor(Math.random()*H.length)],Y=Math.floor(Math.random()*S),P=Math.floor(Math.random()*S);if(_(G,M,Y,P,U,S)){I(G,M,Y,P,U),X=!0;break}}X||console.warn(`No se pudo colocar la palabra: ${G}`)}const K=M.map(G=>G.map(X=>X||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),Q={tema:A||"Personalizado",grid:K.map(G=>G.join("")),words:L.sort()};try{const G=await Eut(Q,t);x({...Q,id:G,createdAt:new Date().toISOString()})}catch(G){console.error("Error saving puzzle:",G),alert("No se pudo guardar la sopa de letras.")}finally{y(G=>({...G,puzzle:!1}))}},k=()=>{N.current&&D3(N.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(L=>{const F=document.createElement("a");F.download="sopa-de-letras.png",F.href=L,F.click()}).catch(L=>{console.error("oops, something went wrong!",L),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},T=()=>{var S;if(!g)return null;const L=((S=g.grid[0])==null?void 0:S.length)||1,F=g.grid.join("").split("");return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{ref:N,className:"p-6 bg-white",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsx("div",{className:"md:col-span-2",children:s.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${L}, minmax(0, 1fr))`},children:F.map((M,H)=>s.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:M},H))})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),s.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:g.words.map(M=>s.jsx("li",{children:M},M))})]})]})}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),s.jsx("button",{onClick:k,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return v.data?s.jsx("div",{className:"text-center py-10",children:"Cargando..."}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-4xl",children:"🅰️"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),s.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!g&&s.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),s.jsxs("select",{value:n,onChange:L=>i(L.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{children:"Fácil"}),s.jsx("option",{children:"Media"}),s.jsx("option",{children:"Difícil"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(L=>s.jsx("button",{onClick:()=>{l(L),d(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!c&&o===L?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:L},L)),s.jsx("button",{onClick:()=>d(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${c?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),c&&s.jsx("input",{type:"number",value:o,onChange:L=>l(parseInt(L.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{id:"ai-theme",type:"text",value:A,onChange:L=>m(L.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("button",{onClick:B,disabled:v.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:v.ai?s.jsx(Iut,{}):s.jsxs(s.Fragment,{children:[s.jsx(Out,{}),s.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:u.map((L,F)=>s.jsx("input",{type:"text",value:L,onChange:S=>E(F,S.target.value),placeholder:`Palabra ${F+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},F))})]}),s.jsx("div",{className:"text-right pt-4",children:s.jsx("button",{onClick:j,disabled:v.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:v.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),g&&T()]})},Fut=()=>s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Put=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Rut=({timeline:e,onSave:t,onBack:r})=>{const[a,n]=w.useState(e),[i,o]=w.useState(null),l=w.useRef(null),c=(m,g,x)=>{n(v=>({...v,events:v.events.map(y=>y.id===m?{...y,[g]:x}:y)}))},d=()=>{const m={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},g=[...a.events,m].sort((x,v)=>parseInt(x.date)-parseInt(v.date));n(x=>({...x,events:g}))},u=m=>{n(g=>({...g,events:g.events.filter(x=>x.id!==m)}))},f=async m=>{if(!m.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}o(m.id);{alert("La API Key de Gemini no está configurada."),o(null);return}},A=()=>{l.current&&D3(l.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(m=>{const g=document.createElement("a");g.download=`linea-tiempo-${a.tema.replace(/\s+/g,"_")}.png`,g.href=m,g.click()}).catch(m=>{console.error("Error al generar la imagen:",m),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:a.tema}),s.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:s.jsxs("div",{ref:l,className:"relative p-10",children:[s.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),s.jsx("div",{className:"relative",children:a.events.sort((m,g)=>parseInt(m.date)-parseInt(g.date)).map((m,g)=>{const x=g%2===0;return s.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[s.jsx("div",{className:"w-1/2",children:x&&s.jsx("div",{className:"text-right pr-8",children:s.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[s.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})}),s.jsx("div",{className:"z-10 flex-shrink-0",children:s.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),s.jsx("div",{className:"w-1/2",children:!x&&s.jsx("div",{className:"text-left pl-8",children:s.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[s.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})})]},m.id)})})]})}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[s.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),s.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:a.events.map(m=>s.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[s.jsx("input",{type:"text",value:m.date,onChange:g=>c(m.id,"date",g.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("textarea",{value:m.description,onChange:g=>c(m.id,"description",g.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),s.jsx("button",{onClick:()=>f(m),disabled:i===m.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:i===m.id?s.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):s.jsx(Put,{})})]}),s.jsx("button",{onClick:()=>u(m.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},m.id))}),s.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[s.jsx("button",{onClick:d,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:A,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),s.jsx("button",{onClick:()=>t(a),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},Lut=({onBack:e,currentUser:t})=>{const[r,a]=w.useState("list"),[n,i]=w.useState([]),[o,l]=w.useState(null),[c,d]=w.useState(!1),[u,f]=w.useState(!0),[A,m]=w.useState(""),[g,x]=w.useState(""),[v,y]=w.useState("");w.useEffect(()=>{f(!0);const _=gut(I=>{i(I),f(!1)});return()=>_()},[]);const N=async _=>{if(_.preventDefault(),!A.trim()){alert("El tema es obligatorio.");return}d(!0);{alert("La API Key de Gemini no está configurada."),d(!1);return}},E=async _=>{try{await xut(_,t),a("list"),l(null)}catch(I){console.error("Error saving timeline:",I),alert("No se pudo guardar la línea de tiempo.")}},B=async _=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await vut(_)}catch(I){console.error("Error deleting timeline:",I),alert("No se pudo eliminar la línea de tiempo.")}};return r==="editor"&&o?s.jsx(Rut,{timeline:o,onSave:E,onBack:()=>a("list")}):u?s.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-4xl",children:"🕒"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),s.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),s.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",id:"tema",value:A,onChange:_=>m(_.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),s.jsx("input",{type:"text",id:"fechaInicio",value:g,onChange:_=>x(_.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),s.jsx("input",{type:"text",id:"fechaFin",value:v,onChange:_=>y(_.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),s.jsx("div",{className:"text-right",children:s.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:c?s.jsx(Fut,{}):"Generar con IA"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),n.length>0?n.map(_=>s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:_.tema}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(_.createdAt).toLocaleDateString("es-CL")]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{l(_),a("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),s.jsx("button",{onClick:()=>B(_.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},_.id)):s.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},Mut=()=>s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),eJ=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Uut=({onBack:e,currentUser:t})=>{const[r,a]=w.useState([]),[n,i]=w.useState(10),[o,l]=w.useState(!1),[c,d]=w.useState(Array(10).fill("")),[u,f]=w.useState(Array(10).fill("")),[A,m]=w.useState(""),[g,x]=w.useState(null),[v,y]=w.useState(!1),[N,E]=w.useState({ai:!1,puzzle:!1,data:!0}),[B,_]=w.useState(null),I=w.useRef(null);w.useEffect(()=>{E(K=>({...K,data:!0}));const H=mut(K=>{const Q=K.map(G=>{const{grid_flat:X,grid_width:Z,...U}=G,Y=[];if(X&&Z>0)for(let P=0;P<X.length;P+=Z)Y.push(X.slice(P,P+Z));return{...U,grid:Y}});a(Q),E(G=>({...G,data:!1}))});return()=>H()},[]),w.useEffect(()=>{const H=n;d(K=>Array.from({length:H},(Q,G)=>K[G]||"")),f(K=>Array.from({length:H},(Q,G)=>K[G]||""))},[n]);const j=(H,K)=>{const Q=[...c];Q[H]=K,d(Q)},k=(H,K)=>{const Q=[...u];Q[H]=K,f(Q)},T=async()=>{if(A.trim()){E(H=>({...H,ai:!0}));try{alert("La API Key de Gemini no está configurada."),E(ie=>({...ie,ai:!1}));return}catch(H){console.error("Error generating words/clues with AI:",H),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{E(H=>({...H,ai:!1}))}}},L=async H=>{const K=c[H];if(!K||!K.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}_(H);try{alert("La API Key de Gemini no está configurada."),_(null);return}catch(Q){console.error("Error generating clue with AI:",Q),alert("No se pudo generar la pista.")}finally{_(null)}},F=w.useCallback(()=>{try{const H=c.map((ge,he)=>({word:ge.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:u[he]})).filter(ge=>ge.word.length>0);if(H.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;H.sort((ge,he)=>he.word.length-ge.word.length);const K=H[0].word.length,Q=Math.max(K,H.length)*2;let G=Array.from({length:Q},()=>Array(Q).fill(null));const X=[],Z=H.shift(),U=Math.floor(Q/2),Y=Math.floor((Q-Z.word.length)/2);for(let ge=0;ge<Z.word.length;ge++)G[U][Y+ge]=Z.word[ge];X.push({word:Z.word,clue:Z.clue,direction:"across",row:U,col:Y});for(const ge of H){let he={score:-1,row:-1,col:-1,direction:"across"};for(const ve of X)for(let le=0;le<ve.word.length;le++)for(let ne=0;ne<ge.word.length;ne++)if(ve.word[le]===ge.word[ne]){let Ae=0,pe,ke,Le;ve.direction==="across"?(Le="down",pe=ve.row-ne,ke=ve.col+le):(Le="across",pe=ve.row+le,ke=ve.col-ne);let qe=!0;for(let ze=0;ze<ge.word.length;ze++){const Re=pe+(Le==="down"?ze:0),We=ke+(Le==="across"?ze:0);if(Re<0||Re>=Q||We<0||We>=Q){qe=!1;break}const ct=G[Re][We],Ze=Re===ve.row+(ve.direction==="down"?le:0)&&We===ve.col+(ve.direction==="across"?le:0);if(ct&&!Ze){qe=!1;break}if(ct&&Ze&&ct!==ge.word[ne]){qe=!1;break}if(!Ze){if(Le==="across"&&(Re>0&&G[Re-1][We]||Re<Q-1&&G[Re+1][We])){qe=!1;break}if(Le==="down"&&(We>0&&G[Re][We-1]||We<Q-1&&G[Re][We+1])){qe=!1;break}}ct&&Ae++}qe&&Ae>he.score&&(he={score:Ae,row:pe,col:ke,direction:Le})}if(he.score>-1){for(let ve=0;ve<ge.word.length;ve++){const le=he.row+(he.direction==="down"?ve:0),ne=he.col+(he.direction==="across"?ve:0);G[le][ne]=ge.word[ve]}X.push({word:ge.word,clue:ge.clue,direction:he.direction,row:he.row,col:he.col})}}let P=Q,D=-1,W=Q,J=-1;X.forEach(ge=>{P=Math.min(P,ge.row),D=Math.max(D,ge.row+(ge.direction==="down"?ge.word.length-1:0)),W=Math.min(W,ge.col),J=Math.max(J,ge.col+(ge.direction==="across"?ge.word.length-1:0))}),D===-1&&(P=X[0].row,D=X[0].row,W=X[0].col,J=X[0].col+X[0].word.length-1);const ce=1,ie=Math.max(0,P-ce),re=Math.min(Q,D+1+ce),de=Math.max(0,W-ce),oe=Math.min(Q,J+1+ce),be=G.slice(ie,re).map(ge=>ge.slice(de,oe)),q=X.map(ge=>({...ge,row:ge.row-ie,col:ge.col-de})).sort((ge,he)=>ge.row-he.row||ge.col-he.col);let we=1;const Te=[],Ee=new Map;q.forEach(ge=>{const he=`${ge.row},${ge.col}`;Ee.has(he)||Ee.set(he,we++),Te.push({...ge,number:Ee.get(he)})});const ue=be.map(ge=>ge.map(he=>({char:he,number:null})));return Te.forEach(ge=>{const he=`${ge.row},${ge.col}`;ue[ge.row]&&ue[ge.row][ge.col]!==void 0&&(ue[ge.row][ge.col].number=Ee.get(he))}),{grid:ue,clues:{across:Te.filter(ge=>ge.direction==="across").sort((ge,he)=>ge.number-he.number),down:Te.filter(ge=>ge.direction==="down").sort((ge,he)=>ge.number-he.number)}}}catch(H){return console.error("Error generating crossword grid:",H),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[c,u]),S=async()=>{var K;E(Q=>({...Q,puzzle:!0})),x(null),await new Promise(Q=>setTimeout(Q,100));const H=F();if(H){const Q={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:A||"Personalizado",grid:H.grid,clues:H.clues},{grid:G,...X}=Q,Z={...X,grid_flat:G.flat().map(U=>U.char||""),grid_width:((K=G[0])==null?void 0:K.length)||0};try{const U=await put(Z,t);x({...Q,id:U,fechaCreacion:new Date().toISOString()})}catch(U){console.error("Error saving puzzle:",U),alert("No se pudo guardar el crucigrama en la base de datos.")}}E(Q=>({...Q,puzzle:!1}))},M=()=>{I.current&&(y(!1),setTimeout(()=>{D3(I.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(H=>{const K=document.createElement("a");K.download="crucigrama.png",K.href=H,K.click()}).catch(H=>console.error("Error generating image",H))},100))};return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-4xl",children:"✏️"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),s.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),g?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{ref:I,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsx("div",{children:s.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${g.grid[0].length}, 2rem)`},children:g.grid.flat().map((H,K)=>s.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:H.char?"white":"black"},children:[H.number&&s.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:H.number}),v&&H.char&&s.jsx("span",{children:H.char})]},K))})}),s.jsxs("div",{className:"text-sm",children:[s.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),s.jsx("ul",{className:"space-y-1",children:g.clues.across.map(H=>s.jsxs("li",{children:[s.jsxs("strong",{children:[H.number,"."]})," ",H.clue]},`${H.word}-${H.clue}`))}),s.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),s.jsx("ul",{className:"space-y-1",children:g.clues.down.map(H=>s.jsxs("li",{children:[s.jsxs("strong",{children:[H.number,"."]})," ",H.clue]},`${H.word}-${H.clue}`))})]})]})}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:v,onChange:()=>y(!v),className:"h-5 w-5 rounded"}),s.jsx("span",{children:"Mostrar Solución"})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),s.jsx("button",{onClick:M,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):s.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(H=>s.jsx("button",{onClick:()=>{i(H),l(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!o&&n===H?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:H},H)),s.jsx("button",{onClick:()=>l(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${o?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),o&&s.jsx("input",{type:"number",value:n,onChange:H=>i(parseInt(H.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{id:"ai-theme",type:"text",value:A,onChange:H=>m(H.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("button",{onClick:T,disabled:N.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:N.ai?s.jsx(Mut,{}):s.jsxs(s.Fragment,{children:[s.jsx(eJ,{}),s.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),s.jsx("div",{className:"space-y-3",children:Array.from({length:n}).map((H,K)=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.jsx("input",{type:"text",value:c[K],onChange:Q=>j(K,Q.target.value),placeholder:`Palabra ${K+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[s.jsx("textarea",{value:u[K],onChange:Q=>k(K,Q.target.value),placeholder:`Pista ${K+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("button",{onClick:()=>L(K),disabled:B===K,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:B===K?s.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):s.jsx(eJ,{})})]})]},K))}),s.jsx("div",{className:"text-right pt-4",children:s.jsx("button",{onClick:S,disabled:N.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:N.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},Hut=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],Qut=({recurso:e,onClick:t})=>s.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[s.jsx("div",{className:"text-6xl mb-4",children:e.icon}),s.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),zut=()=>{const[e,t]=w.useState("menu"),{currentUser:r}=_E(),a=()=>e!=="menu"&&!r?s.jsx("div",{className:"text-center p-8",children:"Cargando información de usuario..."}):e==="mapasMentales"?s.jsx(But,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?s.jsx(Dut,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?s.jsx(Lut,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?s.jsx(Uut,{onBack:()=>t("menu"),currentUser:r}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Hut.map(n=>s.jsx(Qut,{recurso:n,onClick:()=>t(n.id)},n.id))})]});return s.jsx("div",{className:"animate-fade-in space-y-6",children:a()})},$ut="evaluaciones_formativas",Vut="calificaciones_formativas",h0e="trabajos_grupales_formativos",A0e=e=>{var r,a,n,i;const t=e.data();return{id:e.id,...t,fecha:((a=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((i=(n=t.fechaPresentacion)==null?void 0:n.toDate)==null?void 0:i.call(n).toISOString().split("T")[0])||t.fechaPresentacion}},Gut=(e,t)=>{const r=jt(ut(st,$ut),Kt("curso","==",e));return rr(r,a=>{t(a.docs.map(n=>A0e(n)))},a=>{console.error("Error subscribing to student evaluations:",a),t([])})},qut=(e,t)=>{if(!e||e.length===0)return()=>{};const r=e.map(a=>{const n=$t(st,Vut,a);return rr(n,i=>{i.exists()?t({[a]:i.data()}):t({[a]:{}})},i=>{(i==null?void 0:i.code)!=="permission-denied"&&console.error(`Error subscribing to grade doc ${a}:`,i)})});return()=>r.forEach(a=>a())},Kut=(e,t)=>{const r=jt(ut(st,h0e),Kt("curso","==",e));return rr(r,a=>{t(a.docs.map(n=>A0e(n)))},a=>{console.error("Error subscribing to group projects:",a),t([])})},Wut=async e=>{try{const{id:t,...r}=e,a=$t(st,h0e,t);await Us(a,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},Xut=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState({}),[i,o]=w.useState([]),[l,c]=w.useState(!0),[d,u]=w.useState(null),[f,A]=w.useState(!1),[m,g]=w.useState(null),x=w.useRef(null);w.useEffect(()=>{if(!e.curso){c(!1);return}c(!0);const B=Gut(e.curso,r),_=Kut(e.curso,I=>{o(I),c(!1)});return()=>{B(),_()}},[e.curso]),w.useEffect(()=>{if(t.length===0){n({});return}const B=t.map(k=>k.id);let _={};const j=qut(B,k=>{_={..._,...k},n(_)});return()=>{j()}},[t]);const v=w.useMemo(()=>{if(!e.curso)return[];const _=t.filter(j=>j.curso===e.curso).reduce((j,k)=>((j[k.asignatura]=j[k.asignatura]||[]).push(k),j),{});return Object.entries(_).map(([j,k])=>{let T=0,L=0;const F=k.map(M=>{var Q;const H=(Q=a[M.id])==null?void 0:Q[e.nombreCompleto];let K="No Trabajado";return H==="trabajado"?(T+=7,L++,K="Trabajado"):H==="no trabajado"&&(T+=2,L++,K="No Trabajado"),{id:M.id,nombreActividad:M.nombreActividad,fecha:M.fecha,estado:K}}).filter(M=>{var H;return(H=a[M.id])==null?void 0:H[e.nombreCompleto]}),S=L>0?(T/L).toFixed(1):"N/A";return{asignatura:j,promedio:S,actividades:F.sort((M,H)=>new Date(H.fecha).getTime()-new Date(M.fecha).getTime())}}).filter(j=>j.actividades.length>0).sort((j,k)=>j.asignatura.localeCompare(k.asignatura))},[t,a,e]);w.useEffect(()=>{if(v.reduce((T,L)=>T+L.actividades.length,0)===0){u(null);return}const _=v.reduce((T,L)=>{const F=parseFloat(L.promedio);return isNaN(F)?T:T+F},0),I=v.length>0?_/v.length:0,j=ZC.find(T=>I>=T.promedioMin&&I<=T.promedioMax)||null,k=ZC.filter(T=>I>=T.promedioMin);if(u({puntajeTotal:0,promedio:I,rangoActual:j,insigniasGanadas:k}),x.current!==null){const T=ZC.find(L=>x.current>=L.promedioMin&&x.current<=L.promedioMax)||null;j&&(!T||j.nombre!==T.nombre)&&g(j)}x.current=I},[v]);const y=w.useMemo(()=>e.curso?i.filter(B=>B.curso===e.curso).map(B=>{const _=B.grupos.find(I=>I.integrantes.some(j=>j.nombre===e.nombreCompleto));return _?{...B,miGrupo:_}:null}).filter(B=>B!==null).sort((B,_)=>new Date(_.fechaPresentacion).getTime()-new Date(B.fechaPresentacion).getTime()):[],[i,e]),N=async(B,_)=>{const I=i.find(k=>k.id===B);if(!I)return;const j={...I,grupos:I.grupos.map(k=>k.integrantes.some(L=>L.nombre===e.nombreCompleto)?{...k,integrantes:k.integrantes.map(L=>L.nombre===e.nombreCompleto?{...L,rol:_||void 0}:L)}:k)};try{await Wut(j)}catch(k){console.error("Error updating role:",k),alert("No se pudo actualizar el rol.")}},E=B=>{const _=parseFloat(B);return isNaN(_)?"bg-slate-400":_<4?"bg-red-500":_<5.5?"bg-yellow-500":"bg-green-500"};return l?s.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[m&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:B=>B.stopPropagation(),children:[s.jsx("div",{className:"text-8xl animate-bounce",children:m.emoji}),s.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),s.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:m.nombre}),s.jsx("p",{className:"text-slate-600 mt-4",children:m.mensaje}),s.jsx("button",{onClick:()=>g(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),f&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>A(!1),children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:B=>B.stopPropagation(),children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),s.jsx("div",{className:"overflow-y-auto space-y-3",children:ZC.map(B=>{const _=d==null?void 0:d.insigniasGanadas.some(I=>I.nombre===B.nombre);return s.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${_?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[s.jsx("div",{className:"text-5xl",children:B.emoji}),s.jsxs("div",{children:[s.jsx("h3",{className:`font-bold ${_?"text-amber-700":"text-slate-600"}`,children:B.nombre}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",B.promedioMin," y ",B.promedioMax]})]})]},B.nombre)})})]})}),s.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),s.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),d&&d.rangoActual&&s.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),s.jsx("h2",{className:"text-3xl font-bold",children:d.rangoActual.nombre}),s.jsx("button",{onClick:()=>A(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-7xl",children:d.rangoActual.emoji}),s.jsx("p",{className:"font-bold text-2xl mt-2",children:d.promedio.toFixed(1)}),s.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),v.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(B=>s.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800",children:B.asignatura}),s.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),s.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${E(B.promedio)}`,children:B.promedio})]}),s.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),B.actividades.map(_=>s.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-700",children:_.nombreActividad}),s.jsx("p",{className:"text-xs text-slate-500",children:new Date(_.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),s.jsx("span",{className:`font-semibold ${_.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:_.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},_.id))]})]},B.asignatura))}):s.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[s.jsx("span",{className:"text-5xl",children:"📊"}),s.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),s.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),y.length>0&&s.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),s.jsx("div",{className:"space-y-4",children:y.map(B=>{const _=B.miGrupo.integrantes.filter(j=>j.nombre!==e.nombreCompleto&&j.rol).map(j=>j.rol),I=$ae.filter(j=>!_.includes(j));return s.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[s.jsx("h3",{className:"font-bold text-slate-800",children:B.nombreActividad}),s.jsxs("p",{className:"text-sm text-slate-500",children:[B.asignatura," - Presentación: ",new Date(B.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),s.jsxs("div",{className:"mt-3 pt-3 border-t",children:[s.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",B.miGrupo.numero]}),s.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:B.miGrupo.integrantes.map(j=>s.jsxs("li",{className:"grid grid-cols-2 items-center",children:[s.jsx("span",{className:j.nombre===e.nombreCompleto?"font-bold":"",children:j.nombre}),j.nombre===e.nombreCompleto?s.jsxs("select",{value:j.rol||"",onChange:k=>N(B.id,k.target.value),className:"text-sm p-1 border rounded w-full",children:[s.jsx("option",{value:"",children:"-- Seleccionar rol --"}),j.rol&&!I.includes(j.rol)&&s.jsx("option",{value:j.rol,children:j.rol}),I.map(k=>s.jsx("option",{value:k,children:k},k))]}):s.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:j.rol||"Sin rol"})]},j.nombre))})]})]},B.id)})})]})]})},Yut="proyectos_interdisciplinarios",m0e="entregas_interdisciplinarias",p0e=e=>{var r,a,n,i;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((i=(n=t.fechaCompletado)==null?void 0:n.toDate)==null?void 0:i.call(n).toISOString())||t.fechaCompletado}},Jut=(e,t)=>{const r=jt(ut(st,Yut),Kt("cursos","array-contains",e));return rr(r,a=>{const n=a.docs.map(i=>p0e(i));t(n)},a=>{console.error("Error al suscribirse a los proyectos:",a),t([])})},Zut=(e,t)=>{const r=jt(ut(st,m0e),Kt("estudianteId","==",e));return rr(r,a=>{const n=a.docs.map(i=>p0e(i));t(n)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},eft=async e=>{try{const{id:t,...r}=e,a=$t(st,m0e,t),n={...r,fechaCompletado:dr.fromDate(new Date(r.fechaCompletado||Date.now()))};await Us(a,n,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},tft=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState([]),[i,o]=w.useState(null),[l,c]=w.useState(!0);w.useEffect(()=>{if(!e.curso||!e.id){c(!1);return}c(!0);const f=Jut(e.curso,r),A=Zut(e.id,m=>{n(m),c(!1)});return()=>{f(),A()}},[e.curso,e.id]);const d=async f=>{try{await eft(f)}catch(A){console.error("Failed to update submission:",A),alert("Hubo un error al guardar tu entrega.")}},u=({plan:f,tarea:A})=>{const m=w.useMemo(()=>{const _=a.find(I=>I.planificacionId===f.id&&I.tareaId===A.id);return _||{id:`${f.id}_${A.id}_${e.id}`,planificacionId:f.id,tareaId:A.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[f.id,A.id,a]),[g,x]=w.useState(!1),[v,y]=w.useState({observaciones:m.observacionesEstudiante||"",enlace:m.enlaceUrl||""}),N=_=>{var j;const I=(j=_.target.files)==null?void 0:j[0];I&&(alert(`Simulación: Archivo "${I.name}" listo para subir.`),d({...m,archivoAdjunto:{nombre:I.name,url:`simulated/path/${I.name}`},fechaCompletado:new Date().toISOString()}))},E=()=>{d({...m,observacionesEstudiante:v.observaciones,enlaceUrl:v.enlace,fechaCompletado:new Date().toISOString()})},B=()=>{d({...m,completada:!m.completada,fechaCompletado:new Date().toISOString()})};return s.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:m.completada,onChange:B,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:`font-semibold ${m.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",A.numero,": ",A.instrucciones]}),s.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",A.fechaEntrega]}),A.recursoUrl&&s.jsx("a",{href:A.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),s.jsx("button",{onClick:()=>x(!g),className:"text-sm font-semibold",children:g?"Ocultar":"Entregar"})]}),g&&s.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[s.jsx("textarea",{value:v.observaciones,onChange:_=>y({...v,observaciones:_.target.value}),onBlur:E,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),s.jsx("input",{type:"url",value:v.enlace,onChange:_=>y({...v,enlace:_.target.value}),onBlur:E,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),s.jsx("input",{type:"file",onChange:N,className:"text-sm"}),m.archivoAdjunto&&s.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",m.archivoAdjunto.nombre]})]}),m.feedbackProfesor&&s.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[s.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),s.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:m.feedbackProfesor})]})]})};return l?s.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(f=>{const A=f.tareas||[],g=a.filter(v=>v.planificacionId===f.id).filter(v=>v.completada).length,x=A.length>0?g/A.length*100:0;return s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[s.jsxs("button",{onClick:()=>o(i===f.id?null:f.id),className:"w-full text-left",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:f.nombreProyecto}),s.jsxs("div",{className:"mt-2 space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[s.jsx("span",{children:"Progreso"}),s.jsxs("span",{children:[Math.round(x),"%"]})]}),s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${x}%`}})})]})]}),i===f.id&&s.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:A.length>0?A.map(v=>s.jsx(u,{plan:f,tarea:v},v.id)):s.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},f.id)}):s.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[s.jsx("span",{className:"text-5xl",children:"🎉"}),s.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),s.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},rft=({ciclos:e})=>{var B,_,I,j,k;const[t,r]=w.useState(!1),[a,n]=w.useState(null),[i,o]=w.useState(null),[l,c]=w.useState(null),d=T=>{if(!T)return null;try{let L=T.trim();const F=L.match(/```json([\s\S]*?)```/i)||L.match(/```([\s\S]*?)```/i);F&&F[1]&&(L=F[1]);const S=L.indexOf("{"),M=L.lastIndexOf("}");return S!==-1&&M!==-1&&M>S&&(L=L.slice(S,M+1)),JSON.parse(L)}catch{return null}},u=e.length,f=e.filter(T=>T.videoObservacionUrl&&T.retroalimentacion.exito).length,A=new Set(e.map(T=>T.docenteInfo)).size,m=e.reduce((T,L)=>{if(!L.horaInicio||!L.horaTermino)return T;const F=new Date(`2000/01/01 ${L.horaInicio}`),M=(new Date(`2000/01/01 ${L.horaTermino}`).getTime()-F.getTime())/(1e3*60);return T+M},0)/e.length,g=e.reduce((T,L)=>{const F=new Date(L.fecha).toLocaleDateString("es-ES",{month:"long"});return T[F]=(T[F]||0)+1,T},{}),x=e.reduce((T,L)=>(L.asignaturaInfo&&(T[L.asignaturaInfo]=(T[L.asignaturaInfo]||0)+1),T),{}),v=Object.entries(x).sort(([,T],[,L])=>L-T).slice(0,5),y=w.useMemo(()=>e.map(T=>{var L,F,S;return{fecha:T.fecha,docente:T.docenteInfo,asignatura:T.asignaturaInfo,foco:(L=T.retroalimentacion)==null?void 0:L.foco,exito:(F=T.retroalimentacion)==null?void 0:F.exito,brecha:(S=T.retroalimentacion)==null?void 0:S.brecha}}).filter(T=>T.foco||T.brecha||T.exito),[e]),N=()=>{const T=Object.entries(g).map(([M,H])=>`${M}: ${H}`).join(", "),L=v.map(([M,H])=>`${M} (${H})`).join(", "),F=u?Math.round(f/u*100):0,S=y.slice(0,12).map(M=>`- ${new Date(M.fecha).toLocaleDateString()} | Docente: ${M.docente} | Asig.: ${M.asignatura}
         Exitos: ${M.exito||"-"}
         Foco: ${M.foco||"-"}
         Brecha: ${M.brecha?`min ${M.brecha.minutoInicial||"?"}-${M.brecha.minutoFinal||"?"} | preguntas: ${M.brecha.preguntas||"-"} | indicadores: ${M.brecha.indicadores||"-"}`:"-"}`).join(`
`);return`Eres un asesor pedagógico experto en OPR. Analiza los siguientes datos agregados de ciclos de observación y retroalimentación y devuelve un JSON con insights accionables para Subdirección.

DATOS RESUMEN:
- Total de ciclos: ${u}
- Ciclos completados: ${f} (tasa: ${F}%)
- Docentes únicos observados: ${A}
- Tiempo promedio de observación (min): ${isFinite(m)?Math.round(m):0}
- Distribución por mes: ${T||"sin datos"}
- Asignaturas más observadas (top 5): ${L||"sin datos"}

MUESTRAS DE FOCO/ÉXITO/BRECHAS (máx. 12):
${S||"(no hay muestras)"}

DEVUELVE SOLO JSON (sin comentarios) con este esquema:
{
  "resumenGeneral": "string",
  "tendencias": ["string"],
  "riesgos": ["string"],
  "focosRecomendados": [
    { "foco": "string", "justificativo": "string opcional" }
  ],
  "proximosPasos": ["string"],
  "indicadores": [ { "nombre": "string", "valor": "string|number" } ]
}
`},E=async()=>{if(u){r(!0),n(null),c(null),o(null);try{const T=N(),L=await GL(T,1,!0,"OPR"),F=d(L);F?c(F):o(L)}catch(T){n((T==null?void 0:T.message)||"No se pudo obtener el análisis con IA.")}finally{r(!1)}}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(bl,{className:"w-5 h-5 text-indigo-600"}),"Asistente IA del Ciclo OPR"]}),s.jsx("button",{onClick:E,disabled:t||u===0,className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium border ${t||u===0?"opacity-50 cursor-not-allowed":"hover:bg-slate-50 dark:hover:bg-slate-700"} border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-200`,title:u===0?"No hay ciclos para analizar":"Generar análisis con IA",children:t?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-600"}),"Generando..."]}):s.jsx(s.Fragment,{children:"Generar análisis"})})]}),a&&s.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:a}),!a&&(l||i)&&s.jsx("div",{className:"mt-2 grid grid-cols-1 lg:grid-cols-2 gap-4",children:l?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-3",children:[l.resumenGeneral&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Resumen"}),s.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:l.resumenGeneral})]}),(B=l.tendencias)!=null&&B.length?s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Tendencias"}),s.jsx("ul",{className:"list-disc pl-5 text-sm text-slate-700 dark:text-slate-300",children:l.tendencias.map((T,L)=>s.jsx("li",{children:T},L))})]}):null,(_=l.riesgos)!=null&&_.length?s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Riesgos"}),s.jsx("ul",{className:"list-disc pl-5 text-sm text-slate-700 dark:text-slate-300",children:l.riesgos.map((T,L)=>s.jsx("li",{children:T},L))})]}):null]}),s.jsxs("div",{className:"space-y-3",children:[(I=l.focosRecomendados)!=null&&I.length?s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Focos recomendados"}),s.jsx("ul",{className:"space-y-2",children:l.focosRecomendados.map((T,L)=>s.jsxs("li",{className:"text-sm text-slate-700 dark:text-slate-300",children:[s.jsx("span",{className:"font-medium",children:T.foco}),T.justificativo?s.jsx("span",{className:"block text-slate-600 dark:text-slate-400",children:T.justificativo}):null]},L))})]}):null,(j=l.proximosPasos)!=null&&j.length?s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Próximos pasos"}),s.jsx("ol",{className:"list-decimal pl-5 text-sm text-slate-700 dark:text-slate-300",children:l.proximosPasos.map((T,L)=>s.jsx("li",{children:T},L))})]}):null,(k=l.indicadores)!=null&&k.length?s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.indicadores.map((T,L)=>s.jsxs("div",{className:"px-3 py-2 rounded border dark:border-slate-700 text-sm",children:[s.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:T.nombre}),s.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-100",children:String(T.valor)})]},L))})]}):null]})]}):s.jsx("div",{className:"col-span-2 text-sm text-slate-700 dark:text-slate-300",children:s.jsx(BE,{content:i,context:"dashboard-opr-ai"})})}),!a&&!l&&!i&&s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Genera un análisis para obtener tendencias, focos y próximos pasos basados en los ciclos registrados."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:s.jsx(bl,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Ciclos"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u})]})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:s.jsx(dn,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Ciclos Completados"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:f})]})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/50 rounded-lg",children:s.jsx(_i,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docentes Observados"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:A})]})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:s.jsx(bc,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Tiempo Promedio"}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[Math.round(m)," min"]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(Ro,{className:"w-5 h-5 text-indigo-600"}),"Ciclos por Mes"]}),s.jsx("div",{className:"space-y-2",children:Object.entries(g).map(([T,L])=>s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 capitalize",children:T}),s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:L})]}),s.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-2 bg-indigo-600 dark:bg-indigo-500 rounded-full",style:{width:`${L/u*100}%`}})})]})},T))})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(cd,{className:"w-5 h-5 text-amber-600"}),"Asignaturas Más Observadas"]}),s.jsx("div",{className:"space-y-2",children:v.map(([T,L])=>s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:T}),s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:L})]}),s.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-2 bg-amber-600 dark:bg-amber-500 rounded-full",style:{width:`${L/Math.max(...Object.values(x))*100}%`}})})]})},T))})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(jc,{className:"w-5 h-5 text-blue-600"}),"Estado de los Ciclos"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docente"}),s.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Fecha"}),s.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Asignatura"}),s.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estado"})]})}),s.jsx("tbody",{children:e.map(T=>s.jsxs("tr",{className:"border-t dark:border-slate-700",children:[s.jsx("td",{className:"py-2 px-3 text-sm text-slate-900 dark:text-slate-300",children:T.docenteInfo}),s.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:new Date(T.fecha).toLocaleDateString()}),s.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:T.asignaturaInfo}),s.jsx("td",{className:"py-2 px-3",children:T.videoObservacionUrl&&T.retroalimentacion.exito?s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[s.jsx(dn,{className:"w-3 h-3"})," Completado"]}):s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded",children:[s.jsx(jc,{className:"w-3 h-3"})," Pendiente"]})})]},T.id))})]})})]})]})},aft=({acompanamientoId:e,onEdit:t,readOnly:r=!1,allowDelete:a=!0})=>{const[n,i]=w.useState([]),[o,l]=w.useState(!0),[c,d]=w.useState(null);w.useEffect(()=>{l(!0),d(null);let m=null;try{m=Ent(e,g=>{i(g),l(!1)},async g=>{console.warn("Suscripción ciclos falló, usando fetch una vez.",g);try{const x=await _P(e);i(x)}catch(x){d((x==null?void 0:x.message)||"No se pudieron cargar los ciclos OPR.")}finally{l(!1)}})}catch(g){console.warn("Fallo suscripción, hago fetch único.",g),(async()=>{try{const x=await _P(e);i(x)}catch(x){d((x==null?void 0:x.message)||"No se pudieron cargar los ciclos OPR.")}finally{l(!1)}})()}return()=>{try{m&&m()}catch{}}},[e]);const u=async m=>{if(confirm("¿Eliminar este ciclo OPR? Esta acción no se puede deshacer."))try{await TP(m)}catch{alert("No se pudo eliminar el ciclo.")}},[f,A]=w.useState(!1);return o?s.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-amber-600"})," Cargando ciclos OPR..."]}):c?s.jsx("div",{className:"p-3 border border-red-300 dark:border-red-800 bg-red-50 dark:bg-red-900/20 rounded",children:s.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:c})}):n.length?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Ciclos OPR"}),s.jsx("button",{onClick:()=>A(!f),className:"px-4 py-2 text-sm font-medium text-white bg-amber-600 hover:bg-amber-700 rounded-lg shadow-sm transition-colors",children:f?"Ver Lista":"Ver Dashboard"})]}),f?s.jsx("div",{children:s.jsx(rft,{ciclos:n})}):s.jsx("div",{className:"space-y-3",children:n.map(m=>{var g;return s.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm",children:s.jsxs("div",{className:"flex justify-between items-start gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J8,{className:"w-4 h-4 text-purple-600"}),s.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:m.nombreCiclo||"Ciclo"}),s.jsxs("span",{className:"text-sm text-slate-500",children:["• ",new Date(m.fecha).toLocaleDateString("es-CL")]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-slate-600 dark:text-slate-300",children:[m.videoObservacionUrl&&s.jsxs("a",{className:"flex items-center gap-1 hover:underline text-blue-600 dark:text-blue-400",href:m.videoObservacionUrl,target:"_blank",rel:"noopener noreferrer",title:"Ver video de observación",children:[s.jsx(Pae,{className:"w-4 h-4"})," Video observación"]}),((g=m.retroalimentacion)==null?void 0:g.videoModeloUrl)&&s.jsxs("a",{className:"flex items-center gap-1 hover:underline text-blue-600 dark:text-blue-400",href:m.retroalimentacion.videoModeloUrl,target:"_blank",rel:"noopener noreferrer",title:"Ver video modelo",children:[s.jsx(Q1,{className:"w-4 h-4"})," Video modelo"]}),m.horaInicio&&m.horaTermino&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(bc,{className:"w-4 h-4"})," ",m.horaInicio,"–",m.horaTermino]})]})]}),!r&&s.jsxs("div",{className:"flex items-center gap-2",children:[t&&s.jsx("button",{onClick:()=>t(m),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Editar"}),a&&s.jsx("button",{onClick:()=>u(m.id),title:"Eliminar ciclo",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:s.jsx(Ia,{className:"w-4 h-4"})})]})]})},m.id)})})]}):s.jsx("div",{className:"p-6 text-center bg-slate-100 dark:bg-slate-800 rounded",children:s.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:"No hay ciclos OPR registrados para este acompañamiento."})})},Xs=({label:e,value:t})=>t?s.jsxs("div",{className:"flex gap-2 text-sm",children:[s.jsx("div",{className:"text-slate-500 dark:text-slate-400 min-w-28",children:e}),s.jsx("div",{className:"text-slate-800 dark:text-slate-200 flex-1",children:t})]}):null,nft=({ciclo:e,onClose:t})=>{const{nombreCiclo:r,fecha:a,horaInicio:n,horaTermino:i,videoObservacionUrl:o,detallesObservacion:l=[],retroalimentacion:c,planificacion:d,seguimiento:u}=e,f=e.docenteInfo||e.docente||"",A=e.cursoInfo||"",m=e.asignaturaInfo||"";return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:t,children:s.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-slate-800 rounded-xl shadow-2xl overflow-hidden animate-fade-in-up",onClick:g=>g.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b dark:border-slate-700",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J8,{className:"w-5 h-5 text-purple-600"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:r||"Ciclo OPR"})]}),s.jsx("button",{onClick:t,className:"p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-700",title:"Cerrar",children:s.jsx(ho,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"px-5 py-4 space-y-6 max-h-[80vh] overflow-auto",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(Xs,{label:"Fecha",value:new Date(a).toLocaleDateString("es-CL")}),s.jsx(Xs,{label:"Hora",value:n||i?`${n||""}${n&&i?" – ":""}${i||""}`:void 0}),s.jsx(Xs,{label:"Docente",value:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(Fke,{className:"w-4 h-4 text-sky-600"}),f]})}),s.jsx(Xs,{label:"Curso / Asignatura",value:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(Rs,{className:"w-4 h-4 text-amber-600"}),[A,m].filter(Boolean).join(" • ")]})}),o&&s.jsx(Xs,{label:"Video",value:s.jsxs("a",{className:"inline-flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:underline",href:o,target:"_blank",rel:"noopener noreferrer",children:[s.jsx(Pae,{className:"w-4 h-4"})," Ver video de observación"]})})]}),l!=null&&l.length?s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2 flex items-center gap-2",children:[s.jsx(bc,{className:"w-4 h-4 text-blue-600"})," Registro detallado de observación"]}),s.jsx("div",{className:"overflow-x-auto border rounded-md dark:border-slate-700",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 text-slate-600 dark:text-slate-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left p-2",children:"Minuto"}),s.jsx("th",{className:"text-left p-2",children:"Acciones Docente"}),s.jsx("th",{className:"text-left p-2",children:"Acciones Estudiantes"}),s.jsx("th",{className:"text-left p-2",children:"Actividades"})]})}),s.jsx("tbody",{children:l.map(g=>s.jsxs("tr",{className:"border-t dark:border-slate-700 align-top",children:[s.jsx("td",{className:"p-2 whitespace-nowrap",children:g.minuto}),s.jsx("td",{className:"p-2",children:g.accionesDocente||"—"}),s.jsx("td",{className:"p-2",children:g.accionesEstudiantes||"—"}),s.jsx("td",{className:"p-2",children:g.actividades||"—"})]},g.id))})]})})]}):null,c&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2 flex items-center gap-2",children:[s.jsx(Q1,{className:"w-4 h-4 text-green-600"})," Retroalimentación"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(Xs,{label:"Éxito",value:c.exito}),s.jsx(Xs,{label:"Foco",value:c.foco}),s.jsx(Xs,{label:"Modelo",value:c.modelo}),s.jsx(Xs,{label:"Elementos a identificar",value:c.elementosIdentificar})]}),c.brecha&&s.jsxs("div",{className:"mt-3 p-3 rounded border dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50",children:[s.jsx("div",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Análisis de brecha"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[s.jsx(Xs,{label:"Minuto inicial",value:c.brecha.minutoInicial}),s.jsx(Xs,{label:"Minuto final",value:c.brecha.minutoFinal}),s.jsx(Xs,{label:"Indicadores",value:c.brecha.indicadores})]}),s.jsx("div",{className:"mt-2 text-sm",children:s.jsx(Xs,{label:"Preguntas",value:c.brecha.preguntas})})]})]}),d&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2",children:"Planificación de práctica"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(Xs,{label:"Preparación",value:d.preparacion}),s.jsx(Xs,{label:"Objetivo",value:d.objetivo}),s.jsx(Xs,{label:"Actividad",value:d.actividad}),s.jsx(Xs,{label:"Tiempo",value:d.tiempo})]})]}),u&&(u.fecha||u.curso||u.profesor||u.firma)&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsx(Xs,{label:"Fecha",value:u.fecha}),s.jsx(Xs,{label:"Curso",value:u.curso}),s.jsx(Xs,{label:"Profesor",value:u.profesor}),s.jsx(Xs,{label:"Firma",value:u.firma})]})]})]}),s.jsx("div",{className:"px-5 py-3 bg-slate-50 dark:bg-slate-700/50 border-t dark:border-slate-700 flex justify-end",children:s.jsx("button",{onClick:t,className:"px-4 py-2 rounded-md bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-100 hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cerrar"})})]})})},sft=({data:e})=>s.jsx("div",{className:"space-y-4",children:e.map((r,a)=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[s.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),s.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),s.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:s.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+a))}),ift=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState(!1),[i,o]=w.useState(null),[l,c]=w.useState(null),[d,u]=w.useState(h2),[f,A]=w.useState([]),[m,g]=w.useState(null),x=w.useCallback(async()=>{n(!0);try{let E;if(e.email)try{E=await jnt(e.email.toLowerCase())}catch{E=await uY(e.nombreCompleto)}else E=await uY(e.nombreCompleto);const B=E.sort((_,I)=>{const j=_.fecha?new Date(_.fecha).getTime():0;return(I.fecha?new Date(I.fecha).getTime():0)-j});r(B),o(null)}catch(E){console.error("Error al cargar acompañamientos desde Firestore",E),o("No se pudieron cargar tus acompañamientos desde la nube.")}finally{n(!1)}},[e.nombreCompleto]),v=w.useCallback(async()=>{try{const E=await knt(e.nombreCompleto);E&&u(E)}catch(E){console.error("Error al cargar rúbrica personalizada",E)}},[e.nombreCompleto]);w.useEffect(()=>{x(),v()},[x,v]),w.useEffect(()=>{(async()=>{try{const B=await Pfe(),_=(e.email||"").toLowerCase(),I=e.nombreCompleto,j=B.filter(k=>k.docenteEmailLower===_||k.docenteInfo===I||k.docente===I);j.sort((k,T)=>k.fecha<T.fecha?1:k.fecha>T.fecha?-1:0),A(j)}catch(B){console.warn("No se pudieron cargar Ciclos OPR independientes.",B),A([])}})()},[e.email,e.nombreCompleto]);const y=w.useMemo(()=>{if(!l)return[];const E={};return d.forEach(B=>{E[B.domain]={total:0,count:0},B.criteria.forEach(_=>{const I=l.rubricaResultados[_.name];I&&(E[B.domain].total+=I,E[B.domain].count++)})}),Object.entries(E).map(([B,_])=>({label:B,value:_.count>0?_.total/_.count:0}))},[l,d]),N=E=>{const B=new xr;B.setFont("helvetica","bold"),B.setFontSize(10),B.setTextColor(100),B.text("LICEO INDUSTRIAL DE RECOLETA",B.internal.pageSize.getWidth()/2,15,{align:"center"}),B.setFont("helvetica","bold"),B.setFontSize(16),B.setTextColor(40),B.text("Informe de Acompañamiento Docente",B.internal.pageSize.getWidth()/2,25,{align:"center"}),B.setFontSize(12),B.setFont("helvetica","normal"),ji(B,{startY:35,body:[["Docente:",E.docente],["Fecha:",new Date(E.fecha).toLocaleDateString("es-CL")],["Asignatura:",E.asignatura],["Curso:",E.curso],["Bloques:",E.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let _=B.lastAutoTable.finalY+15;if(Object.keys(E.rubricaResultados).length>0){const k=[],T=["Débil","Incipiente","Satisfactorio","Avanzado"];d.forEach(L=>{k.push([{content:L.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),L.criteria.forEach(F=>{const S=E.rubricaResultados[F.name],M=S?T[S-1]:"No evaluado";k.push([F.name,M])})}),ji(B,{startY:_,head:[["Indicador","Nivel de Logro"]],body:k,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),_=B.lastAutoTable.finalY+15}const I=(k,T)=>{if(!T)return;_>250&&(B.addPage(),_=20,B.setFont("helvetica","bold"),B.setFontSize(10),B.setTextColor(100),B.text("LICEO INDUSTRIAL DE RECOLETA",B.internal.pageSize.getWidth()/2,15,{align:"center"}),_=25),B.setFont("helvetica","bold"),B.setFontSize(14),B.setTextColor(40),B.text(k,14,_),_+=8,B.setFont("helvetica","normal"),B.setFontSize(11),B.setTextColor(60);const L=B.splitTextToSize(T.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);B.text(L,14,_),_+=L.length*5+10};I("Observaciones Generales",E.observacionesGenerales),I("Retroalimentación Consolidada",E.retroalimentacionConsolidada);const j=B.getNumberOfPages();for(let k=1;k<=j;k++)B.setPage(k),B.setFontSize(8),B.setTextColor(128),B.text(`Página ${k} de ${j}`,B.internal.pageSize.getWidth()/2,B.internal.pageSize.getHeight()-10,{align:"center"});B.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(E.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return l?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),s.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(l.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",l.curso," - ",l.asignatura]})]}),s.jsxs("button",{onClick:()=>N(l),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[s.jsx(zae,{})," Exportar PDF"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2 space-y-6",children:s.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[s.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),s.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:s.jsx("p",{className:"whitespace-pre-wrap",children:l.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),s.jsx("h3",{children:"Observaciones Generales"}),s.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:s.jsx("p",{className:"whitespace-pre-wrap",children:l.observacionesGenerales||"Sin observaciones."})})]})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),s.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:s.jsx(sft,{data:y})})]})]}),l.id&&s.jsxs("div",{className:"mt-10",children:[s.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Mis Ciclos OPR"}),s.jsx("div",{className:"border rounded-lg dark:border-slate-700 p-4 bg-white dark:bg-slate-800",children:s.jsx(aft,{acompanamientoId:l.id,readOnly:!0,allowDelete:!1})})]})]}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),a&&s.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),i&&s.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:i}),!a&&t.length===0&&s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),s.jsx("div",{className:"space-y-4",children:!a&&t.length>0?t.map(E=>s.jsx("button",{onClick:()=>c(E),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[E.curso," - ",E.asignatura]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(E.fecha).toLocaleDateString("es-CL"),E.bloques&&` | Bloques: ${E.bloques}`]}),Object.keys(E.rubricaResultados).length>0&&s.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(E.rubricaResultados).length," criterios"]})]}),s.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},E.id)):!a&&s.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[s.jsx("span",{className:"text-5xl",children:"👍"}),s.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})}),s.jsxs("div",{className:"mt-10",children:[s.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Ciclos OPR Independientes"}),f.length===0?s.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded border dark:border-slate-700 text-slate-600 dark:text-slate-300",children:"No tienes ciclos OPR independientes registrados."}):s.jsx("div",{className:"space-y-3",children:f.map(E=>s.jsx("button",{onClick:()=>g(E),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:s.jsx("div",{className:"flex justify-between items-start gap-3",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.nombreCiclo||"Ciclo"}),s.jsxs("span",{className:"text-sm text-slate-500",children:["• ",new Date(E.fecha).toLocaleDateString("es-CL")]})]}),E.cursoInfo&&E.asignaturaInfo&&s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:[E.cursoInfo," • ",E.asignaturaInfo]})]})})},E.id))})]}),m&&s.jsx(nft,{ciclo:m,onClose:()=>g(null)})]})},oft=e=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const t=ut(lr,"planificaciones"),r=jt(t,Gt("fechaCreacion","desc"));return rr(r,n=>{const i=[];n.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log("✅ Todas las planificaciones cargadas:",i.length),e(i)},n=>{throw console.error("❌ Error al cargar todas las planificaciones:",n),n})}catch(t){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",t),t}},lft=(e,t)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",e),!e)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=ut(lr,"planificaciones"),a=jt(r,Kt("userId","==",e),Gt("fechaCreacion","desc"));return rr(a,i=>{const o=[];i.forEach(l=>{const c=l.data();o.push({id:l.id,...c})}),console.log("✅ Planificaciones del usuario cargadas:",o.length),t(o)},i=>{throw console.error("❌ Error al cargar planificaciones del usuario:",i),i})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}};function cft(e){for(var t=e.length/6|0,r=new Array(t),a=0;a<t;)r[a]="#"+e.slice(a*6,++a*6);return r}const dft=cft("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var uft={value:function(){}};function g0e(){for(var e=0,t=arguments.length,r={},a;e<t;++e){if(!(a=arguments[e]+"")||a in r||/[\s.]/.test(a))throw new Error("illegal type: "+a);r[a]=[]}return new Qk(r)}function Qk(e){this._=e}function fft(e,t){return e.trim().split(/^|\s+/).map(function(r){var a="",n=r.indexOf(".");if(n>=0&&(a=r.slice(n+1),r=r.slice(0,n)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:a}})}Qk.prototype=g0e.prototype={constructor:Qk,on:function(e,t){var r=this._,a=fft(e+"",r),n,i=-1,o=a.length;if(arguments.length<2){for(;++i<o;)if((n=(e=a[i]).type)&&(n=hft(r[n],e.name)))return n;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(n=(e=a[i]).type)r[n]=tJ(r[n],e.name,t);else if(t==null)for(n in r)r[n]=tJ(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Qk(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var r=new Array(n),a=0,n,i;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],a=0,n=i.length;a<n;++a)i[a].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],n=0,i=a.length;n<i;++n)a[n].value.apply(t,r)}};function hft(e,t){for(var r=0,a=e.length,n;r<a;++r)if((n=e[r]).name===t)return n.value}function tJ(e,t,r){for(var a=0,n=e.length;a<n;++a)if(e[a].name===t){e[a]=uft,e=e.slice(0,a).concat(e.slice(a+1));break}return r!=null&&e.push({name:t,value:r}),e}const Aft=Object.freeze(Object.defineProperty({__proto__:null,dispatch:g0e},Symbol.toStringTag,{value:"Module"})),mft=Qpe(Aft);var EO,rJ;function pft(){if(rJ)return EO;rJ=1;const e=mft.dispatch,t=Math.PI/180,r={archimedean:x,rectangular:v},a=64,n=2048;EO=function(){var B=[256,256],_=i,I=o,j=c,k=l,T=l,L=d,F=u,S=x,M=[],H=1/0,K=e("word","end"),Q=null,G=Math.random,X={},Z=N;X.canvas=function(P){return arguments.length?(Z=E(P),X):Z},X.start=function(){var P=U(Z()),D=y((B[0]>>5)*B[1]),W=null,J=M.length,ce=-1,ie=[],re=M.map(function(oe,be){return oe.text=_.call(this,oe,be),oe.font=I.call(this,oe,be),oe.style=k.call(this,oe,be),oe.weight=T.call(this,oe,be),oe.rotate=L.call(this,oe,be),oe.size=~~j.call(this,oe,be),oe.padding=F.call(this,oe,be),oe}).sort(function(oe,be){return be.size-oe.size});return Q&&clearInterval(Q),Q=setInterval(de,0),de(),X;function de(){for(var oe=Date.now();Date.now()-oe<H&&++ce<J&&Q;){var be=re[ce];be.x=B[0]*(G()+.5)>>1,be.y=B[1]*(G()+.5)>>1,f(P,be,re,ce),be.hasText&&Y(D,be,W)&&(ie.push(be),K.call("word",X,be),W?m(W,be):W=[{x:be.x+be.x0,y:be.y+be.y0},{x:be.x+be.x1,y:be.y+be.y1}],be.x-=B[0]>>1,be.y-=B[1]>>1)}ce>=J&&(X.stop(),K.call("end",X,ie,W))}},X.stop=function(){Q&&(clearInterval(Q),Q=null);for(const P of M)delete P.sprite;return X};function U(P){const D=P.getContext("2d",{willReadFrequently:!0});P.width=P.height=1;const W=Math.sqrt(D.getImageData(0,0,1,1).data.length>>2);return P.width=(a<<5)/W,P.height=n/W,D.fillStyle=D.strokeStyle="red",{context:D,ratio:W}}function Y(P,D,W){B[0],B[1];for(var J=D.x,ce=D.y,ie=Math.sqrt(B[0]*B[0]+B[1]*B[1]),re=S(B),de=G()<.5?1:-1,oe=-de,be,q,we;(be=re(oe+=de))&&(q=~~be[0],we=~~be[1],!(Math.min(Math.abs(q),Math.abs(we))>=ie));)if(D.x=J+q,D.y=ce+we,!(D.x+D.x0<0||D.y+D.y0<0||D.x+D.x1>B[0]||D.y+D.y1>B[1])&&(!W||g(D,W))&&!A(D,P,B[0])){for(var Te=D.sprite,Ee=D.width>>5,ue=B[0]>>5,ge=D.x-(Ee<<4),he=ge&127,ve=32-he,le=D.y1-D.y0,ne=(D.y+D.y0)*ue+(ge>>5),Ae,pe=0;pe<le;pe++){Ae=0;for(var ke=0;ke<=Ee;ke++)P[ne+ke]|=Ae<<ve|(ke<Ee?(Ae=Te[pe*Ee+ke])>>>he:0);ne+=ue}return!0}return!1}return X.timeInterval=function(P){return arguments.length?(H=P??1/0,X):H},X.words=function(P){return arguments.length?(M=P,X):M},X.size=function(P){return arguments.length?(B=[+P[0],+P[1]],X):B},X.font=function(P){return arguments.length?(I=E(P),X):I},X.fontStyle=function(P){return arguments.length?(k=E(P),X):k},X.fontWeight=function(P){return arguments.length?(T=E(P),X):T},X.rotate=function(P){return arguments.length?(L=E(P),X):L},X.text=function(P){return arguments.length?(_=E(P),X):_},X.spiral=function(P){return arguments.length?(S=r[P]||P,X):S},X.fontSize=function(P){return arguments.length?(j=E(P),X):j},X.padding=function(P){return arguments.length?(F=E(P),X):F},X.random=function(P){return arguments.length?(G=P,X):G},X.on=function(){var P=K.on.apply(K,arguments);return P===K?X:P},X};function i(B){return B.text}function o(){return"serif"}function l(){return"normal"}function c(B){return Math.sqrt(B.value)}function d(){return(~~(random()*6)-3)*30}function u(){return 1}function f(B,_,I,j){if(!_.sprite){var k=B.context,T=B.ratio;k.clearRect(0,0,(a<<5)/T,n/T);var L=0,F=0,S=0,M=I.length;for(--j;++j<M;){_=I[j],k.save(),k.font=_.style+" "+_.weight+" "+~~((_.size+1)/T)+"px "+_.font;const be=k.measureText(_.text),q=-Math.floor(be.width/2);let we=(be.width+1)*T,Te=_.size<<1;if(_.rotate){var H=Math.sin(_.rotate*t),K=Math.cos(_.rotate*t),Q=we*K,G=we*H,X=Te*K,Z=Te*H;we=Math.max(Math.abs(Q+Z),Math.abs(Q-Z))+31>>5<<5,Te=~~Math.max(Math.abs(G+X),Math.abs(G-X))}else we=we+31>>5<<5;if(Te>S&&(S=Te),L+we>=a<<5&&(L=0,F+=S,S=0),F+Te>=n)break;k.translate((L+(we>>1))/T,(F+(Te>>1))/T),_.rotate&&k.rotate(_.rotate*t),k.fillText(_.text,q,0),_.padding&&(k.lineWidth=2*_.padding,k.strokeText(_.text,q,0)),k.restore(),_.width=we,_.height=Te,_.xoff=L,_.yoff=F,_.x1=we>>1,_.y1=Te>>1,_.x0=-_.x1,_.y0=-_.y1,_.hasText=!0,L+=we}for(var U=k.getImageData(0,0,(a<<5)/T,n/T).data,Y=[];--j>=0;)if(_=I[j],!!_.hasText){for(var P=_.width,D=P>>5,W=_.y1-_.y0,J=0;J<W*D;J++)Y[J]=0;if(L=_.xoff,L==null)return;F=_.yoff;for(var ce=0,ie=-1,re=0;re<W;re++){for(var J=0;J<P;J++){var de=D*re+(J>>5),oe=U[(F+re)*(a<<5)+(L+J)<<2]?1<<31-J%32:0;Y[de]|=oe,ce|=oe}ce?ie=re:(_.y0++,W--,re--,F++)}_.y1=_.y0+ie,_.sprite=Y.slice(0,(_.y1-_.y0)*D)}}}function A(B,_,I){I>>=5;for(var j=B.sprite,k=B.width>>5,T=B.x-(k<<4),L=T&127,F=32-L,S=B.y1-B.y0,M=(B.y+B.y0)*I+(T>>5),H,K=0;K<S;K++){H=0;for(var Q=0;Q<=k;Q++)if((H<<F|(Q<k?(H=j[K*k+Q])>>>L:0))&_[M+Q])return!0;M+=I}return!1}function m(B,_){var I=B[0],j=B[1];_.x+_.x0<I.x&&(I.x=_.x+_.x0),_.y+_.y0<I.y&&(I.y=_.y+_.y0),_.x+_.x1>j.x&&(j.x=_.x+_.x1),_.y+_.y1>j.y&&(j.y=_.y+_.y1)}function g(B,_){return B.x+B.x1>_[0].x&&B.x+B.x0<_[1].x&&B.y+B.y1>_[0].y&&B.y+B.y0<_[1].y}function x(B){var _=B[0]/B[1];return function(I){return[_*(I*=.1)*Math.cos(I),I*Math.sin(I)]}}function v(B){var _=4,I=_*B[0]/B[1],j=0,k=0;return function(T){var L=T<0?-1:1;switch(Math.sqrt(1+4*L*T)-L&3){case 0:j+=I;break;case 1:k+=_;break;case 2:j-=I;break;default:k-=_;break}return[j,k]}}function y(B){for(var _=[],I=-1;++I<B;)_[I]=0;return _}function N(){return document.createElement("canvas")}function E(B){return typeof B=="function"?B:function(){return B}}return EO}var gft=pft();const xft=Kl(gft),vft=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),bft=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),yft=()=>s.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),wft=e=>{const[t,r]=w.useState([]),[a,n]=w.useState(!0),[i,o]=w.useState(null),l=w.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return w.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){o("Usuario no autenticado"),n(!1);return}try{let c;const d=u=>{r(u),n(!1),o(null)};if(l)c=oft(d);else{const u=e.email||e.id||"";c=lft(d,u)}return c}catch(c){o(c instanceof Error?c.message:"Error al conectar con la base de datos"),n(!1)}},[e,l]),{planificaciones:t,loading:a,error:i,canViewAllPlans:l}},Nft=({plan:e,onClose:t})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[s.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),s.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:s.jsx(bft,{})})]}),s.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[s.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),s.jsxs("p",{className:"mt-2",children:[s.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),s.jsx("div",{className:"mt-3",children:s.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),s.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),s.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,a)=>s.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[s.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",a+1,": ",r.actividades]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[s.jsxs("span",{children:[s.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),s.jsxs("span",{children:[s.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},a))}),e.reflexionUnidad&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexión Docente"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?s.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,a)=>s.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[s.jsxs("span",{className:"font-bold text-amber-500",children:[a+1,"."]})," ",r]},r))}):s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafíos"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),aJ=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],Eft=["1º Medio","2º Medio","3º Medio","4º Medio"],Cft=({words:e})=>{const t=w.useRef(null);return w.useEffect(()=>{if(!e.length||!t.current)return;const r=lu(t.current);r.selectAll("*").remove();const a=xft().size([500,350]).words(e.map(i=>({...i}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(i=>Math.sqrt(i.value)*12).on("end",n);a.start();function n(i){r.attr("width",a.size()[0]).attr("height",a.size()[1]).append("g").attr("transform",`translate(${a.size()[0]/2},${a.size()[1]/2})`).selectAll("text").data(i).enter().append("text").style("font-size",o=>`${o.size}px`).style("font-family","Impact").style("fill",(o,l)=>P4(dft)(l.toString())).attr("text-anchor","middle").attr("transform",o=>`translate(${[o.x,o.y]})rotate(${o.rotate})`).text(o=>o.text)}},[e]),s.jsx("svg",{ref:t})},jft=({planificaciones:e})=>{const[t,r]=w.useState("todos"),[a,n]=w.useState("todos"),i=w.useMemo(()=>["todos",...Array.from(new Set(e.map(u=>u.asignatura)))],[e]),o=w.useMemo(()=>e.filter(u=>(t==="todos"||u.nivel===t)&&(a==="todos"||u.asignatura===a)&&u.reflexionUnidad),[e,t,a]),l=w.useMemo(()=>{const u=aJ.reduce((f,A)=>({...f,[A]:0}),{});return o.forEach(f=>{var A,m;return(m=(A=f.reflexionUnidad)==null?void 0:A.ordenHabilidades)==null?void 0:m.forEach((g,x)=>{u[g]!==void 0&&(u[g]+=aJ.length-x)})}),Object.entries(u).map(([f,A])=>({text:f,value:A})).sort((f,A)=>A.value-f.value)},[o]),c=w.useMemo(()=>{const u=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),A=(o.map(m=>{var g,x;return`${((g=m.reflexionUnidad)==null?void 0:g.fortalezas)||""} ${((x=m.reflexionUnidad)==null?void 0:x.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((m,g)=>(u.has(g)||(m[g]=(m[g]||0)+1),m),{});return Object.entries(A).map(([m,g])=>({text:m,value:g})).sort((m,g)=>g.value-m.value).slice(0,50)},[o]),d="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return s.jsxs("div",{className:"animate-fade-in",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),s.jsxs("select",{value:t,onChange:u=>r(u.target.value),className:d,children:[s.jsx("option",{value:"todos",children:"Todos los Niveles"}),Eft.map(u=>s.jsx("option",{value:u,children:u},u))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),s.jsx("select",{value:a,onChange:u=>n(u.target.value),className:d,children:i.map(u=>s.jsx("option",{value:u,children:u==="todos"?"Todas las Asignaturas":u},u))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),l.every(u=>u.value===0)?s.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):s.jsx("ul",{className:"space-y-3",children:l.map((u,f)=>s.jsxs("li",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:f+1}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:u.text}),s.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:s.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${u.value/(l[0].value||1)*100}%`}})})]})]},u.text))})]}),s.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),c.length>0?s.jsx(Cft,{words:c}):s.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},kft=({currentUser:e})=>{const{planificaciones:t,loading:r,error:a,canViewAllPlans:n}=wft(e),[i,o]=w.useState("seguimiento"),[l,c]=w.useState("1º"),[d,u]=w.useState(null),[f,A]=w.useState(null),m=w.useMemo(()=>{const v={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"};return t.filter(y=>y.nivel===v[l]&&y.tipo==="Unidad")},[t,l]),g=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];if(!(e!=null&&e.id))return s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{children:"Usuario no autenticado."})});if(r)return s.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[s.jsx(yft,{}),s.jsx("span",{children:"Cargando planificaciones..."})]});if(a)return s.jsx("div",{className:"text-center py-8",children:s.jsxs("p",{className:"text-red-500",children:["Error: ",a]})});const x=()=>s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:s.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(v=>s.jsx("button",{onClick:()=>c(v.key),className:`${l===v.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:v.label},v.key))})}),m.length===0?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):s.jsx("div",{className:"space-y-4",children:cn.map(v=>{const y=m.filter(E=>E.asignatura===v);if(y.length===0)return null;const N=d===v;return s.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[s.jsxs("button",{onClick:()=>u(N?null:v),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:v}),s.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," unidad",y.length>1?"es":""]})]}),s.jsx("span",{className:`transform transition-transform ${N?"rotate-180":""}`,children:s.jsx(vft,{})})]}),N&&s.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:s.jsx("ul",{className:"space-y-3",children:y.map(E=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>A(E),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[s.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:E.nombreUnidad}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",E.autor||"N/A"]})]})},E.id))})})]},v)})})]});return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),n&&s.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"👑 Vista administrativa"})]}),s.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:s.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[s.jsx("button",{onClick:()=>o("seguimiento"),className:`${i==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),s.jsx("button",{onClick:()=>o("analisis"),className:`${i==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Análisis de Reflexiones"})]})}),i==="seguimiento"&&x(),i==="analisis"&&s.jsx(jft,{planificaciones:t.filter(v=>v.tipo==="Unidad")})]}),f&&s.jsx(Nft,{plan:f,onClose:()=>A(null)})]})},P3="analisisTaxonomicos",Sft=async()=>{try{const e=jt(ut(lr,P3),Gt("uploadDate","desc"));return(await Nr(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los análisis:",e),new Error("No se pudieron cargar los análisis taxonómicos")}},_ft=async e=>{if(!e)return[];try{const t=jt(ut(lr,P3),Kt("userId","==",e),Gt("uploadDate","desc"));return(await Nr(t)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){throw console.error("Error al obtener análisis por usuario:",t),new Error("No se pudieron cargar los análisis del usuario")}},Tft=async e=>{try{return{id:(await Kr(ut(lr,P3),e)).id,...e}}catch(t){throw console.error("Error al crear análisis:",t),new Error("No se pudo crear el análisis taxonómico")}},Bft=async e=>{try{const t=$t(lr,P3,e);await Ua(t)}catch(t){throw console.error("Error al eliminar análisis:",t,"ID:",e),new Error("No se pudo eliminar el análisis taxonómico")}},uy="multicopias",FU=e=>{if(e===null||typeof e!="object")return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([r,a])=>{a!==void 0&&(t[r]=typeof a=="object"&&a!==null?FU(a):a)}),t},nJ=e=>{try{if(!e)return;if(typeof e.toDate=="function")return e.toDate().toISOString();if(e.seconds)return new Date(e.seconds*1e3+Math.floor((e.nanoseconds||0)/1e6)).toISOString()}catch{}},PU=e=>{const t=e.data()||{};return{...t,id:e.id,createdAt:nJ(t.createdAt)||new Date().toISOString(),updatedAt:nJ(t.updatedAt)||void 0}};async function Ift(e,t="multicopias"){const r=Date.now(),a=e.name.replace(/\s+/g,"_"),n=`${t}/${r}/${a}`,i=vu(c4,n);return await H1(i,e),await gA(i)}async function x0e(e){const{id:t,createdAt:r,updatedAt:a,solicitanteEmailLower:n,...i}=e||{},o=i,l=FU({...o,estado:o.estado||"Enviada",solicitanteEmailLower:o.solicitanteEmail?o.solicitanteEmail.toLowerCase():void 0,createdAt:Da(),updatedAt:Da()});return(await Kr(ut(st,uy),l)).id}async function v0e(e,t){if(!e)throw new Error("updateSolicitudMulticopia: id requerido");const r=FU({...t,updatedAt:Da()});await zi($t(st,uy,e),r)}function b0e(e,t){const r=ut(st,uy);let a;return e.emailLower?a=jt(r,Kt("solicitanteEmailLower","==",e.emailLower),Gt("createdAt","desc")):e.solicitanteId?a=jt(r,Kt("solicitanteId","==",e.solicitanteId),Gt("createdAt","desc")):a=jt(r,Gt("createdAt","desc")),rr(a,n=>t(n.docs.map(PU)),n=>{console.error("subscribeMulticopiasPorSolicitante",n),t([])})}function y0e(e,t){const r=ut(st,uy),a=jt(r,Gt("createdAt","desc"));return rr(a,n=>{const o=n.docs.map(PU).filter(l=>!(e.nivel&&e.nivel!=="Todos"&&(l.nivel||"")!==e.nivel||e.curso&&e.curso!=="Todos"&&(l.curso||"")!==e.curso||e.asignatura&&e.asignatura!=="Todas"&&(l.asignatura||"")!==e.asignatura||e.docenteNombre&&e.docenteNombre!=="Todos"&&(l.solicitanteNombre||"")!==e.docenteNombre||e.estado&&e.estado!=="Todos"&&(l.estado||"Enviada")!==e.estado));t(o)},n=>{console.error("subscribeMulticopiasAllConFiltros",n),t([])})}async function Yw(e,t,r,a){if(!e)throw new Error("cambiarEstadoMulticopia: id requerido");const n={estado:t};t==="Visada"&&(n.visadoPor=r),t==="Aceptada"&&(n.aceptadoPor=r),t==="Rechazada"&&(n.rechazadoPor=r,a!=null&&a.motivoRechazo&&(n.motivoRechazo=a.motivoRechazo)),t==="Completada"&&(n.completadoPor=r),await v0e(e,n)}async function w0e(e){try{if(!e.solicitanteNombre&&!e.solicitanteEmail)return;await Vae({docenteNombre:e.solicitanteNombre,docenteEmail:e.solicitanteEmail,tipo:"alerta",titulo:"Multicopia aceptada",mensaje:"Su solicitud fue aceptada. La multicopia estará lista en un plazo máximo de 48 horas.",estudianteNombre:void 0,estudianteId:void 0,accionRequerida:void 0})}catch(t){console.warn("No se pudo crear notificación de aceptación:",t)}}async function N0e(e,t){if(!e)throw new Error("eliminarSolicitudMulticopia: id requerido");if(t!=null&&t.adjuntoUrl)try{const r=vu(c4,t.adjuntoUrl);await r4(r)}catch(r){console.warn("No se pudo eliminar adjunto de Storage (continuando con borrado de doc):",r)}await Ua($t(st,uy,e))}async function E0e(e={}){const{emailLower:t,max:r=200}=e;let a;const n=ut(st,uy);t?a=jt(n,Kt("solicitanteEmailLower","==",t)):a=jt(n,Gt("createdAt","desc"));let o=(await Nr(a)).docs.map(PU).filter(l=>!!l.adjuntoUrl);return t&&(o=o.sort((l,c)=>(c.createdAt||"").localeCompare(l.createdAt||""))),o.slice(0,r)}const Oft=Object.freeze(Object.defineProperty({__proto__:null,cambiarEstadoMulticopia:Yw,createSolicitudMulticopia:x0e,eliminarSolicitudMulticopia:N0e,listarAdjuntosMulticopias:E0e,notificarAceptacionMulticopia:w0e,subscribeMulticopiasAllConFiltros:y0e,subscribeMulticopiasPorSolicitante:b0e,updateSolicitudMulticopia:v0e,uploadAdjuntoMulticopia:Ift},Symbol.toStringTag,{value:"Module"})),sJ=["1º Medio","2º Medio","3º Medio","4º Medio"],mm=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],Dv={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},Dft=()=>s.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),iJ=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState(!1),[i,o]=w.useState(null),[l,c]=w.useState(null),[d,u]=w.useState(""),[f,A]=w.useState(!1),[m,g]=w.useState(null),[x,v]=w.useState(null),[y,N]=w.useState([]),[E,B]=w.useState(""),[_,I]=w.useState(""),[j,k]=w.useState(""),[T,L]=w.useState(""),[F,S]=w.useState(""),[M,H]=w.useState("resumen"),K=w.useCallback(async()=>{if(e!=null&&e.id){n(!0);try{const D=e.profile==="SUBDIRECCION"?await Sft():await _ft(e.id);r(D),o(null)}catch(D){console.error("Error al cargar análisis:",D),o("No se pudieron cargar los análisis.")}finally{n(!1)}}},[e]);w.useEffect(()=>{K()},[K]),w.useEffect(()=>{(async()=>{try{const D=(e.email||"").toLowerCase(),J=(await E0e({emailLower:e.profile==="SUBDIRECCION"?void 0:D,max:300})).map(ce=>({id:ce.id,titulo:ce.tituloMaterial,url:ce.adjuntoUrl,createdAt:ce.createdAt,asignatura:ce.asignatura,nivel:ce.nivel}));N(J)}catch(D){console.warn("No se pudieron cargar adjuntos de Multicopias:",D)}})()},[e]);const Q=async D=>{var J;const W=(J=D.target.files)==null?void 0:J[0];if(W){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(W.type)){o("Por favor, suba un archivo PDF o DOCX válido.");return}g(W),u(W.name),o(null);const ie=new FileReader;ie.onloadend=()=>{var de;const re=(de=ie.result)==null?void 0:de.split(",")[1];if(!re){o("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),v(null);return}v({mimeType:W.type,data:re})},ie.onerror=()=>o("Error al leer el archivo."),ie.readAsDataURL(W)}},G=async()=>{if(!d.trim()||!x&&!E){o("Debe subir un documento o seleccionar uno desde Multicopias, y asignarle un nombre para analizar.");return}if(!_||!j){o("Seleccione Nivel y Asignatura antes de analizar.");return}A(!0),o(null);const D=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser válido y tener la siguiente estructura:
               {
                 "analysisResults": [
                   { "question": "...", "habilidadBloom": "..." }
                 ],
                 "summary": {
                   "Recordar": 0,
                   "Comprender": 0,
                   "Aplicar": 0,
                   "Analizar": 0,
                   "Evaluar": 0,
                   "Crear": 0
                 }
               }
            Donde "summary" contiene el conteo total de preguntas por cada nivel de Bloom.
        `;mm.reduce((W,J)=>({...W,[J]:{type:"number"}}),{});try{m3("Análisis Taxonómico",e);const W=ln.currentUser;if(!W)throw new Error("Usuario no autenticado.");const J=await W.getIdToken(),ce=await fetch("/api/analisisTaxonomico",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${J}`},body:JSON.stringify({prompt:D,fileData:x,fileUrl:E||void 0,documentName:d,nivelForm:_,asignaturaForm:j,userId:e.id})});if(!ce.ok){const oe=await ce.text();throw console.error("Error response from backend:",oe),new Error(`Error al analizar el documento con IA: ${ce.statusText}`)}const ie=await ce.json(),re={documentName:d,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:ie.analysisResults,summary:ie.summary,nivel:_,asignatura:j},de=await Tft(re);await K(),c(de),u(""),g(null),v(null),B(""),I(""),k("")}catch(W){console.error(W);const J=W instanceof Error?W.message:"Hubo un error al analizar el documento.";o(J)}finally{A(!1)}},X=async D=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await Bft(D),await K(),(l==null?void 0:l.id)===D&&c(null)}catch{o("No se pudo eliminar el análisis.")}},Z=w.useMemo(()=>t.filter(D=>{const W=T?D.nivel===T:!0,J=F?D.asignatura===F:!0;return W&&J}),[t,T,F]),U=w.useMemo(()=>{const D={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};Z.forEach(J=>{mm.forEach(ce=>{var re;const ie=((re=J.summary)==null?void 0:re[ce])||0;D[ce]+=ie})});const W=Object.values(D).reduce((J,ce)=>J+ce,0);return{acc:D,total:W}},[Z]),Y=w.useMemo(()=>{const D=new Map;Z.forEach(J=>{const ce=J.asignatura||"Sin asignatura";D.has(ce)||D.set(ce,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const ie=D.get(ce);mm.forEach(re=>{var de;ie[re]+=((de=J.summary)==null?void 0:de[re])||0})});const W=Array.from(D.entries()).map(([J,ce])=>({asignatura:J,counts:ce,total:Object.values(ce).reduce((ie,re)=>ie+re,0)}));return W.sort((J,ce)=>ce.total-J.total),W},[Z]),P=w.useMemo(()=>l?Object.values(l.summary).reduce((W,J)=>W+(J||0),0):0,[l]);return s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonomico de Evaluaciones"}),i&&s.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:i}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),s.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:s.jsxs("div",{className:"space-y-1 text-center",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:s.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),s.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[s.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[s.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:Q,accept:".pdf,.doc,.docx"}),s.jsx("span",{children:"Cargue un archivo"})]}),s.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),s.jsx("p",{className:"text-xs text-slate-500",children:m?m.name:"PDF, DOCX hasta 10MB"})]})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"O seleccionar desde Multicopias"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:E,onChange:D=>B(D.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 pl-10",children:[s.jsx("option",{value:"",children:"— Seleccione un adjunto —"}),y.map(D=>s.jsxs("option",{value:D.url,children:[D.titulo," ",D.nivel?`• ${D.nivel}`:""," ",D.asignatura?`• ${D.asignatura}`:""]},D.id))]}),s.jsx(ab,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})]}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Se listan adjuntos que hayan sido subidos en Multicopias."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),s.jsxs("select",{value:_,onChange:D=>I(D.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Seleccione"}),sJ.map(D=>s.jsx("option",{value:D,children:D},D))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),s.jsxs("select",{value:j,onChange:D=>k(D.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Seleccione"}),cn.map(D=>s.jsx("option",{value:D,children:D},D))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),s.jsx("input",{type:"text",id:"documentName",value:d,onChange:D=>u(D.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsx("button",{onClick:G,disabled:f||!x&&!E,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:f?s.jsx(Dft,{}):"Analizar con IA"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),a?s.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados."}):s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(D=>s.jsxs("button",{onClick:()=>c(D),className:`w-full text-left p-3 rounded-md border ${(l==null?void 0:l.id)===D.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[s.jsx("p",{className:"font-semibold truncate",children:D.documentName}),s.jsx("p",{className:"text-xs text-slate-500",children:new Date(D.uploadDate).toLocaleString("es-CL")}),(D.nivel||D.asignatura)&&s.jsxs("p",{className:"text-xs text-slate-500",children:[D.nivel||"Nivel s/i"," • ",D.asignatura||"Asignatura s/i"]})]},D.id))})]})]}),s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),s.jsxs("select",{value:T,onChange:D=>L(D.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Todos"}),sJ.map(D=>s.jsx("option",{value:D,children:D},D))]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),s.jsxs("select",{value:F,onChange:D=>S(D.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Todas"}),cn.map(D=>s.jsx("option",{value:D,children:D},D))]})]}),s.jsx("button",{type:"button",onClick:()=>{L(""),S("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[s.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:s.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[s.jsx("button",{onClick:()=>H("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${M==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),s.jsx("button",{onClick:()=>H("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${M==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparación por Asignatura"})]})}),M==="resumen"?s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),s.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[Z.length," análisis considerados"]})]}),s.jsx("div",{className:"space-y-3",children:mm.map(D=>{const W=U.acc[D],J=U.total>0?W/U.total*100:0;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[s.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:D}),s.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[W," (",J.toFixed(0),"%)"]})]}),s.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:s.jsx("div",{className:`${Dv[D]} h-4 rounded-full`,style:{width:`${J}%`}})})]},D)})}),s.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:mm.map(D=>s.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[s.jsx("span",{className:"text-sm",children:D}),s.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${Dv[D]}`,children:U.acc[D]})]},D))})]}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparación por Asignatura"}),s.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[Y.length," asignaturas comparadas"]})]}),Y.length===0?s.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):s.jsx("div",{className:"space-y-5",children:Y.map(D=>{const W=D.total||1;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[s.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:D.asignatura}),s.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[D.total," ítems"]})]}),s.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:mm.map(J=>{const ce=D.counts[J]||0,ie=ce/W*100;return s.jsx("div",{className:`${Dv[J]} h-5`,style:{width:`${ie}%`},title:`${J}: ${ce} (${ie.toFixed(0)}%)`},J)})}),s.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:mm.map(J=>s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[s.jsx("span",{className:`inline-block w-3 h-3 rounded ${Dv[J]}`}),s.jsx("span",{children:J})]},J))})]},D.asignatura)})})]})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:l?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.documentName}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(l.uploadDate).toLocaleString("es-CL"),(l.nivel||l.asignatura)&&s.jsxs(s.Fragment,{children:[" ","• ",l.nivel||"Nivel s/i"," • ",l.asignatura||"Asignatura s/i"]})]})]}),s.jsx("button",{onClick:()=>X(l.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",P," preguntas)"]}),s.jsx("div",{className:"space-y-3",children:mm.map(D=>{const W=l.summary[D]||0,J=P>0?W/P*100:0;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[s.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:D}),s.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[W," (",J.toFixed(0),"%)"]})]}),s.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:s.jsx("div",{className:`${Dv[D]} h-4 rounded-full`,style:{width:`${J}%`}})})]},D)})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),s.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:l.analysisResults.map((D,W)=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:D.question}),s.jsx("td",{className:"px-4 py-3 text-sm",children:s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${Dv[D.habilidadBloom]}`,children:D.habilidadBloom})})]},W))})]})})]})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})]})},RU="notas_practica",Fft=e=>({id:e.id,...e.data()}),Pft=(e,t)=>{const r=jt(ut(st,RU),Kt("estudianteId","==",e),Gt("createdAt","desc"));return rr(r,a=>{t(a.docs.map(n=>Fft(n)))})},Rft=async e=>{const t={...e};Object.keys(t).forEach(r=>{t[r]===void 0&&delete t[r]}),await Kr(ut(st,RU),{...t,createdAt:Da()})},Lft=async e=>{await Ua($t(st,RU,e))};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Kg=function(){return Kg=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},Kg.apply(this,arguments)};function Mft(e,t,r,a){return new(r||(r=Promise))(function(n,i){function o(d){try{c(a.next(d))}catch(u){i(u)}}function l(d){try{c(a.throw(d))}catch(u){i(u)}}function c(d){var u;d.done?n(d.value):(u=d.value,u instanceof r?u:new r(function(f){f(u)})).then(o,l)}c((a=a.apply(e,[])).next())})}function Uft(e,t){var r,a,n,i,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(c){return function(d){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(n=2&u[0]?a.return:u[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,u[1])).done)return n;switch(a=0,n&&(u=[2&u[0],n.value]),u[0]){case 0:case 1:n=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,a=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(n=o.trys,!((n=n.length>0&&n[n.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!n||u[1]>n[0]&&u[1]<n[3])){o.label=u[1];break}if(u[0]===6&&o.label<n[1]){o.label=n[1],n=u;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(u);break}n[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(f){u=[6,f],a=0}finally{r=n=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([c,d])}}}function Dr(){return Dr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Dr.apply(this,arguments)}function Wg(e){return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wg(e)}function C0e(e){var t=function(r,a){if(Wg(r)!=="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,a);if(Wg(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(r)}(e,"string");return Wg(t)==="symbol"?t:String(t)}function fb(e,t,r){return(t=C0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oJ(Object(r),!0).forEach(function(a){fb(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oJ(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function lJ(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,C0e(a.key),a)}}function qP(e,t){return qP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},qP(e,t)}function r_(e){return r_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},r_(e)}function Hft(e,t){if(t&&(Wg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function Qft(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,a=r_(e);if(t){var n=r_(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return Hft(this,r)}}function KP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function j0e(e,t){if(e){if(typeof e=="string")return KP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?KP(e,t):void 0}}function LU(e){return function(t){if(Array.isArray(t))return KP(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||j0e(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var zft=function(){function e(r){var a=this;this._insertTag=function(n){var i;i=a.tags.length===0?a.insertionPoint?a.insertionPoint.nextSibling:a.prepend?a.container.firstChild:a.before:a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(n,i),a.tags.push(n)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(i){var o=document.createElement("style");return o.setAttribute("data-emotion",i.key),i.nonce!==void 0&&o.setAttribute("nonce",i.nonce),o.appendChild(document.createTextNode("")),o.setAttribute("data-s",""),o}(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(i){if(i.sheet)return i.sheet;for(var o=0;o<document.styleSheets.length;o++)if(document.styleSheets[o].ownerNode===i)return document.styleSheets[o]}(a);try{n.insertRule(r,n.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Yd="-ms-",cJ="-moz-",Ya="-webkit-",MU="decl",k0e="@keyframes",$ft=Math.abs,R3=String.fromCharCode,Vft=Object.assign;function S0e(e){return e.trim()}function sn(e,t,r){return e.replace(t,r)}function WP(e,t){return e.indexOf(t)}function _o(e,t){return 0|e.charCodeAt(t)}function DN(e,t,r){return e.slice(t,r)}function fh(e){return e.length}function UU(e){return e.length}function Uj(e,t){return t.push(e),e}var L3=1,C1=1,_0e=0,Bc=0,Ni=0,fy="";function M3(e,t,r,a,n,i,o){return{value:e,root:t,parent:r,type:a,props:n,children:i,line:L3,column:C1,length:o,return:""}}function ww(e,t){return Vft(M3("",null,null,"",null,null,0),e,{length:-e.length},t)}function xd(){return Ni=Bc<_0e?_o(fy,Bc++):0,C1++,Ni===10&&(C1=1,L3++),Ni}function Oh(){return _o(fy,Bc)}function zk(){return Bc}function FE(e,t){return DN(fy,e,t)}function FN(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function T0e(e){return L3=C1=1,_0e=fh(fy=e),Bc=0,[]}function B0e(e){return fy="",e}function $k(e){return S0e(FE(Bc-1,XP(e===91?e+2:e===40?e+1:e)))}function Gft(e){for(;(Ni=Oh())&&Ni<33;)xd();return FN(e)>2||FN(Ni)>3?"":" "}function qft(e,t){for(;--t&&xd()&&!(Ni<48||Ni>102||Ni>57&&Ni<65||Ni>70&&Ni<97););return FE(e,zk()+(t<6&&Oh()==32&&xd()==32))}function XP(e){for(;xd();)switch(Ni){case e:return Bc;case 34:case 39:e!==34&&e!==39&&XP(Ni);break;case 40:e===41&&XP(e);break;case 92:xd()}return Bc}function Kft(e,t){for(;xd()&&e+Ni!==57&&(e+Ni!==84||Oh()!==47););return"/*"+FE(t,Bc-1)+"*"+R3(e===47?e:xd())}function Wft(e){for(;!FN(Oh());)xd();return FE(e,Bc)}function dJ(e){return B0e(Vk("",null,null,null,[""],e=T0e(e),0,[0],e))}function Vk(e,t,r,a,n,i,o,l,c){for(var d=0,u=0,f=o,A=0,m=0,g=0,x=1,v=1,y=1,N=0,E="",B=n,_=i,I=a,j=E;v;)switch(g=N,N=xd()){case 40:if(g!=108&&_o(j,f-1)==58){WP(j+=sn($k(N),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:j+=$k(N);break;case 9:case 10:case 13:case 32:j+=Gft(g);break;case 92:j+=qft(zk()-1,7);continue;case 47:switch(Oh()){case 42:case 47:Uj(Xft(Kft(xd(),zk()),t,r),c);break;default:j+="/"}break;case 123*x:l[d++]=fh(j)*y;case 125*x:case 59:case 0:switch(N){case 0:case 125:v=0;case 59+u:m>0&&fh(j)-f&&Uj(m>32?fJ(j+";",a,r,f-1):fJ(sn(j," ","")+";",a,r,f-2),c);break;case 59:j+=";";default:if(Uj(I=uJ(j,t,r,d,u,n,l,E,B=[],_=[],f),i),N===123)if(u===0)Vk(j,t,I,I,B,i,f,l,_);else switch(A===99&&_o(j,3)===110?100:A){case 100:case 109:case 115:Vk(e,I,I,a&&Uj(uJ(e,I,I,0,0,n,l,E,n,B=[],f),_),n,_,f,l,a?B:_);break;default:Vk(j,I,I,I,[""],_,0,l,_)}}d=u=m=0,x=y=1,E=j="",f=o;break;case 58:f=1+fh(j),m=g;default:if(x<1){if(N==123)--x;else if(N==125&&x++==0&&(Ni=Bc>0?_o(fy,--Bc):0,C1--,Ni===10&&(C1=1,L3--),Ni==125))continue}switch(j+=R3(N),N*x){case 38:y=u>0?1:(j+="\f",-1);break;case 44:l[d++]=(fh(j)-1)*y,y=1;break;case 64:Oh()===45&&(j+=$k(xd())),A=Oh(),u=f=fh(E=j+=Wft(zk())),N++;break;case 45:g===45&&fh(j)==2&&(x=0)}}return i}function uJ(e,t,r,a,n,i,o,l,c,d,u){for(var f=n-1,A=n===0?i:[""],m=UU(A),g=0,x=0,v=0;g<a;++g)for(var y=0,N=DN(e,f+1,f=$ft(x=o[g])),E=e;y<m;++y)(E=S0e(x>0?A[y]+" "+N:sn(N,/&\f/g,A[y])))&&(c[v++]=E);return M3(e,t,r,n===0?"rule":l,c,d,u)}function Xft(e,t,r){return M3(e,t,r,"comm",R3(Ni),DN(e,2,-2),0)}function fJ(e,t,r,a){return M3(e,t,r,MU,DN(e,0,a),DN(e,a+1,-1),a)}function Xg(e,t){for(var r="",a=UU(e),n=0;n<a;n++)r+=t(e[n],n,e,t)||"";return r}function hJ(e,t,r,a){switch(e.type){case"@import":case MU:return e.return=e.return||e.value;case"comm":return"";case k0e:return e.return=e.value+"{"+Xg(e.children,a)+"}";case"rule":e.value=e.props.join(",")}return fh(r=Xg(e.children,a))?e.return=e.value+"{"+r+"}":""}function AJ(e){var t=UU(e);return function(r,a,n,i){for(var o="",l=0;l<t;l++)o+=e[l](r,a,n,i)||"";return o}}function Yft(e){return function(t){t.root||(t=t.return)&&e(t)}}function I0e(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Jft=function(e,t,r){for(var a=0,n=0;a=n,n=Oh(),a===38&&n===12&&(t[r]=1),!FN(n);)xd();return FE(e,Bc)},Zft=function(e,t){return B0e(function(r,a){var n=-1,i=44;do switch(FN(i)){case 0:i===38&&Oh()===12&&(a[n]=1),r[n]+=Jft(Bc-1,a,n);break;case 2:r[n]+=$k(i);break;case 4:if(i===44){r[++n]=Oh()===58?"&\f":"",a[n]=r[n].length;break}default:r[n]+=R3(i)}while(i=xd());return r}(T0e(e),t))},mJ=new WeakMap,eht=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,a=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||mJ.get(r))&&!a){mJ.set(e,!0);for(var n=[],i=Zft(t,n),o=r.props,l=0,c=0;l<i.length;l++)for(var d=0;d<o.length;d++,c++)e.props[c]=n[l]?i[l].replace(/&\f/g,o[d]):o[d]+" "+i[l]}}},tht=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function O0e(e,t){switch(function(r,a){return 45^_o(r,0)?(((a<<2^_o(r,0))<<2^_o(r,1))<<2^_o(r,2))<<2^_o(r,3):0}(e,t)){case 5103:return Ya+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ya+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ya+e+cJ+e+Yd+e+e;case 6828:case 4268:return Ya+e+Yd+e+e;case 6165:return Ya+e+Yd+"flex-"+e+e;case 5187:return Ya+e+sn(e,/(\w+).+(:[^]+)/,Ya+"box-$1$2-ms-flex-$1$2")+e;case 5443:return Ya+e+Yd+"flex-item-"+sn(e,/flex-|-self/,"")+e;case 4675:return Ya+e+Yd+"flex-line-pack"+sn(e,/align-content|flex-|-self/,"")+e;case 5548:return Ya+e+Yd+sn(e,"shrink","negative")+e;case 5292:return Ya+e+Yd+sn(e,"basis","preferred-size")+e;case 6060:return Ya+"box-"+sn(e,"-grow","")+Ya+e+Yd+sn(e,"grow","positive")+e;case 4554:return Ya+sn(e,/([^-])(transform)/g,"$1"+Ya+"$2")+e;case 6187:return sn(sn(sn(e,/(zoom-|grab)/,Ya+"$1"),/(image-set)/,Ya+"$1"),e,"")+e;case 5495:case 3959:return sn(e,/(image-set\([^]*)/,Ya+"$1$`$1");case 4968:return sn(sn(e,/(.+:)(flex-)?(.*)/,Ya+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ya+e+e;case 4095:case 3583:case 4068:case 2532:return sn(e,/(.+)-inline(.+)/,Ya+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(fh(e)-1-t>6)switch(_o(e,t+1)){case 109:if(_o(e,t+4)!==45)break;case 102:return sn(e,/(.+:)(.+)-([^]+)/,"$1"+Ya+"$2-$3$1"+cJ+(_o(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~WP(e,"stretch")?O0e(sn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(_o(e,t+1)!==115)break;case 6444:switch(_o(e,fh(e)-3-(~WP(e,"!important")&&10))){case 107:return sn(e,":",":"+Ya)+e;case 101:return sn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ya+(_o(e,14)===45?"inline-":"")+"box$3$1"+Ya+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(_o(e,t+11)){case 114:return Ya+e+Yd+sn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ya+e+Yd+sn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ya+e+Yd+sn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Ya+e+Yd+e+e}return e}var pJ,Hj,Gk=typeof document<"u",rht=Gk?void 0:(pJ=function(){return I0e(function(){var e={};return function(t){return e[t]}})},Hj=new WeakMap,function(e){if(Hj.has(e))return Hj.get(e);var t=pJ(e);return Hj.set(e,t),t}),aht=[function(e,t,r,a){if(e.length>-1&&!e.return)switch(e.type){case MU:e.return=O0e(e.value,e.length);break;case k0e:return Xg([ww(e,{value:sn(e.value,"@","@"+Ya)})],a);case"rule":if(e.length)return function(n,i){return n.map(i).join("")}(e.props,function(n){switch(function(i,o){return(i=o.exec(i))?i[0]:i}(n,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Xg([ww(e,{props:[sn(n,/:(read-\w+)/,":-moz-$1")]})],a);case"::placeholder":return Xg([ww(e,{props:[sn(n,/:(plac\w+)/,":"+Ya+"input-$1")]}),ww(e,{props:[sn(n,/:(plac\w+)/,":-moz-$1")]}),ww(e,{props:[sn(n,/:(plac\w+)/,"-ms-input-$1")]})],a)}return""})}}],D0e=function(e){var t=e.key;if(Gk&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){y.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var a=e.stylisPlugins||aht,n,i,o={},l=[];Gk&&(n=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var N=y.getAttribute("data-emotion").split(" "),E=1;E<N.length;E++)o[N[E]]=!0;l.push(y)}));var c=[eht,tht];if(Gk){var d,u=[hJ,Yft(function(y){d.insert(y)})],f=AJ(c.concat(a,u));i=function(y,N,E,B){d=E,Xg(dJ(y?y+"{"+N.styles+"}":N.styles),f),B&&(v.inserted[N.name]=!0)}}else{var A=[hJ],m=AJ(c.concat(a,A)),g=rht(a)(t),x=function(y,N){var E=N.name;return g[E]===void 0&&(g[E]=Xg(dJ(y?y+"{"+N.styles+"}":N.styles),m)),g[E]};i=function(y,N,E,B){var _=N.name,I=x(y,N);return v.compat===void 0?(B&&(v.inserted[_]=!0),I):B?void(v.inserted[_]=I):I}}var v={key:t,sheet:new zft({key:t,container:n,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:i};return v.sheet.hydrate(l),v};function fn(e,t,r){return e(r={path:t,exports:{},require:function(a,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(n==null&&r.path)}},r.exports),r.exports}var xo=typeof Symbol=="function"&&Symbol.for,YP=xo?Symbol.for("react.element"):60103,JP=xo?Symbol.for("react.portal"):60106,qk=xo?Symbol.for("react.fragment"):60107,Kk=xo?Symbol.for("react.strict_mode"):60108,Wk=xo?Symbol.for("react.profiler"):60114,Xk=xo?Symbol.for("react.provider"):60109,Yk=xo?Symbol.for("react.context"):60110,ZP=xo?Symbol.for("react.async_mode"):60111,a_=xo?Symbol.for("react.concurrent_mode"):60111,Jk=xo?Symbol.for("react.forward_ref"):60112,Zk=xo?Symbol.for("react.suspense"):60113,nht=xo?Symbol.for("react.suspense_list"):60120,e5=xo?Symbol.for("react.memo"):60115,t5=xo?Symbol.for("react.lazy"):60116,sht=xo?Symbol.for("react.block"):60121,iht=xo?Symbol.for("react.fundamental"):60117,oht=xo?Symbol.for("react.responder"):60118,lht=xo?Symbol.for("react.scope"):60119;function Zc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case YP:switch(e=e.type){case ZP:case a_:case qk:case Wk:case Kk:case Zk:return e;default:switch(e=e&&e.$$typeof){case Yk:case Jk:case t5:case e5:case Xk:return e;default:return t}}case JP:return t}}}function gJ(e){return Zc(e)===a_}var cht={AsyncMode:ZP,ConcurrentMode:a_,ContextConsumer:Yk,ContextProvider:Xk,Element:YP,ForwardRef:Jk,Fragment:qk,Lazy:t5,Memo:e5,Portal:JP,Profiler:Wk,StrictMode:Kk,Suspense:Zk,isAsyncMode:function(e){return gJ(e)||Zc(e)===ZP},isConcurrentMode:gJ,isContextConsumer:function(e){return Zc(e)===Yk},isContextProvider:function(e){return Zc(e)===Xk},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===YP},isForwardRef:function(e){return Zc(e)===Jk},isFragment:function(e){return Zc(e)===qk},isLazy:function(e){return Zc(e)===t5},isMemo:function(e){return Zc(e)===e5},isPortal:function(e){return Zc(e)===JP},isProfiler:function(e){return Zc(e)===Wk},isStrictMode:function(e){return Zc(e)===Kk},isSuspense:function(e){return Zc(e)===Zk},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===qk||e===a_||e===Wk||e===Kk||e===Zk||e===nht||typeof e=="object"&&e!==null&&(e.$$typeof===t5||e.$$typeof===e5||e.$$typeof===Xk||e.$$typeof===Yk||e.$$typeof===Jk||e.$$typeof===iht||e.$$typeof===oht||e.$$typeof===lht||e.$$typeof===sht)},typeOf:Zc};fn(function(e,t){});var xJ=fn(function(e){e.exports=cht}),vJ={};vJ[xJ.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},vJ[xJ.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var eR=typeof document<"u";function F0e(e,t,r){var a="";return r.split(" ").forEach(function(n){e[n]!==void 0?t.push(e[n]+";"):a+=n+" "}),a}var HU=function(e,t,r){var a=e.key+"-"+t.name;(r===!1||eR===!1&&e.compat!==void 0)&&e.registered[a]===void 0&&(e.registered[a]=t.styles)},QU=function(e,t,r){HU(e,t,r);var a=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var n="",i=t;do{var o=e.insert(t===i?"."+a:"",i,e.sheet,!0);eR||o===void 0||(n+=o),i=i.next}while(i!==void 0);if(!eR&&n.length!==0)return n}},dht={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},uht=/[A-Z]|^ms/g,fht=/_EMO_([^_]+?)_([^]*?)_EMO_/g,P0e=function(e){return e.charCodeAt(1)===45},bJ=function(e){return e!=null&&typeof e!="boolean"},CO=I0e(function(e){return P0e(e)?e:e.replace(uht,"-$&").toLowerCase()}),yJ=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(fht,function(r,a,n){return hh={name:a,styles:n,next:hh},a})}return dht[e]===1||P0e(e)||typeof t!="number"||t===0?t:t+"px"};function I2(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return hh={name:r.name,styles:r.styles,next:hh},r.name;if(r.styles!==void 0){var a=r.next;if(a!==void 0)for(;a!==void 0;)hh={name:a.name,styles:a.styles,next:hh},a=a.next;var n=r.styles+";";return n}return function(c,d,u){var f="";if(Array.isArray(u))for(var A=0;A<u.length;A++)f+=I2(c,d,u[A])+";";else for(var m in u){var g=u[m];if(typeof g!="object")d!=null&&d[g]!==void 0?f+=m+"{"+d[g]+"}":bJ(g)&&(f+=CO(m)+":"+yJ(m,g)+";");else if(!Array.isArray(g)||typeof g[0]!="string"||d!=null&&d[g[0]]!==void 0){var x=I2(c,d,g);switch(m){case"animation":case"animationName":f+=CO(m)+":"+x+";";break;default:f+=m+"{"+x+"}"}}else for(var v=0;v<g.length;v++)bJ(g[v])&&(f+=CO(m)+":"+yJ(m,g[v])+";")}return f}(e,t,r);case"function":if(e!==void 0){var i=hh,o=r(e);return hh=i,I2(e,t,o)}break}if(t==null)return r;var l=t[r];return l!==void 0?l:r}var hh,wJ=/label:\s*([^\s;\n{]+)\s*(;|$)/g,U3=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var a=!0,n="";hh=void 0;var i=e[0];i==null||i.raw===void 0?(a=!1,n+=I2(r,t,i)):n+=i[0];for(var o=1;o<e.length;o++)n+=I2(r,t,e[o]),a&&(n+=i[o]);wJ.lastIndex=0;for(var l,c="";(l=wJ.exec(n))!==null;)c+="-"+l[1];var d=function(u){for(var f,A=0,m=0,g=u.length;g>=4;++m,g-=4)f=1540483477*(65535&(f=255&u.charCodeAt(m)|(255&u.charCodeAt(++m))<<8|(255&u.charCodeAt(++m))<<16|(255&u.charCodeAt(++m))<<24))+(59797*(f>>>16)<<16),A=1540483477*(65535&(f^=f>>>24))+(59797*(f>>>16)<<16)^1540483477*(65535&A)+(59797*(A>>>16)<<16);switch(g){case 3:A^=(255&u.charCodeAt(m+2))<<16;case 2:A^=(255&u.charCodeAt(m+1))<<8;case 1:A=1540483477*(65535&(A^=255&u.charCodeAt(m)))+(59797*(A>>>16)<<16)}return(((A=1540483477*(65535&(A^=A>>>13))+(59797*(A>>>16)<<16))^A>>>15)>>>0).toString(36)}(n)+c;return{name:d,styles:n,next:hh}},hht=typeof document<"u",Aht=function(e){return e()},R0e=!!w.useInsertionEffect&&w.useInsertionEffect,L0e=hht&&R0e||Aht,NJ=R0e||w.useLayoutEffect,Ub=typeof document<"u",zU={}.hasOwnProperty,n_=w.createContext(typeof HTMLElement<"u"?D0e({key:"css"}):null);n_.Provider;var H3=function(e){return w.forwardRef(function(t,r){var a=w.useContext(n_);return e(t,a,r)})};Ub||(H3=function(e){return function(t){var r=w.useContext(n_);return r===null?(r=D0e({key:"css"}),w.createElement(n_.Provider,{value:r},e(t,r))):e(t,r)}});var $U=w.createContext({}),tR="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",mht=function(e,t){var r={};for(var a in t)zU.call(t,a)&&(r[a]=t[a]);return r[tR]=e,r},pht=function(e){var t=e.cache,r=e.serialized,a=e.isStringTag;HU(t,r,a);var n=L0e(function(){return QU(t,r,a)});if(!Ub&&n!==void 0){for(var i,o=r.name,l=r.next;l!==void 0;)o+=" "+l.name,l=l.next;return w.createElement("style",((i={})["data-emotion"]=t.key+" "+o,i.dangerouslySetInnerHTML={__html:n},i.nonce=t.sheet.nonce,i))}return null},ght=H3(function(e,t,r){var a=e.css;typeof a=="string"&&t.registered[a]!==void 0&&(a=t.registered[a]);var n=e[tR],i=[a],o="";typeof e.className=="string"?o=F0e(t.registered,i,e.className):e.className!=null&&(o=e.className+" ");var l=U3(i,void 0,w.useContext($U));o+=t.key+"-"+l.name;var c={};for(var d in e)!zU.call(e,d)||d==="css"||d===tR||(c[d]=e[d]);return c.ref=r,c.className=o,w.createElement(w.Fragment,null,w.createElement(pht,{cache:t,serialized:l,isStringTag:typeof n=="string"}),w.createElement(n,c))});fn(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var _r=function(e,t){var r=arguments;if(t==null||!zU.call(t,"css"))return w.createElement.apply(void 0,r);var a=r.length,n=new Array(a);n[0]=ght,n[1]=mht(e,t);for(var i=2;i<a;i++)n[i]=r[i];return w.createElement.apply(null,n)};H3(function(e,t){var r=e.styles,a=U3([r],void 0,w.useContext($U));if(!Ub){for(var n,i=a.name,o=a.styles,l=a.next;l!==void 0;)i+=" "+l.name,o+=l.styles,l=l.next;var c=t.compat===!0,d=t.insert("",{name:i,styles:o},t.sheet,c);return c?null:w.createElement("style",((n={})["data-emotion"]=t.key+"-global "+i,n.dangerouslySetInnerHTML={__html:d},n.nonce=t.sheet.nonce,n))}var u=w.useRef();return NJ(function(){var f=t.key+"-global",A=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),m=!1,g=document.querySelector('style[data-emotion="'+f+" "+a.name+'"]');return t.sheet.tags.length&&(A.before=t.sheet.tags[0]),g!==null&&(m=!0,g.setAttribute("data-emotion",f),A.hydrate([g])),u.current=[A,m],function(){A.flush()}},[t]),NJ(function(){var f=u.current,A=f[0];if(f[1])f[1]=!1;else{if(a.next!==void 0&&QU(t,a.next,!0),A.tags.length){var m=A.tags[A.tags.length-1].nextElementSibling;A.before=m,A.flush()}t.insert("",a,A,!1)}},[t,a.name]),null});function VU(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return U3(t)}var xht=function e(t){for(var r=t.length,a=0,n="";a<r;a++){var i=t[a];if(i!=null){var o=void 0;switch(typeof i){case"boolean":break;case"object":if(Array.isArray(i))o=e(i);else for(var l in o="",i)i[l]&&l&&(o&&(o+=" "),o+=l);break;default:o=i}o&&(n&&(n+=" "),n+=o)}}return n};function vht(e,t,r){var a=[],n=F0e(e,a,r);return a.length<2?r:n+t(a)}var bht=function(e){var t,r=e.cache,a=e.serializedArr,n=L0e(function(){for(var i="",o=0;o<a.length;o++){var l=QU(r,a[o],!1);Ub||l===void 0||(i+=l)}if(!Ub)return i});return Ub||n.length===0?null:w.createElement("style",((t={})["data-emotion"]=r.key+" "+a.map(function(i){return i.name}).join(" "),t.dangerouslySetInnerHTML={__html:n},t.nonce=r.sheet.nonce,t))};H3(function(e,t){var r=[],a=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var d=U3(l,t.registered);return r.push(d),HU(t,d,!1),t.key+"-"+d.name},n={css:a,cx:function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return vht(t.registered,a,xht(l))},theme:w.useContext($U)},i=e.children(n);return w.createElement(w.Fragment,null,w.createElement(bht,{cache:t,serializedArr:r}),i)});function ao(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,a){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,o,l,c,d=[],u=!0,f=!1;try{if(l=(n=n.call(r)).next,a===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(i=l.call(n)).done)&&(d.push(i.value),d.length!==a);u=!0);}catch(A){f=!0,o=A}finally{try{if(!u&&n.return!=null&&(c=n.return(),Object(c)!==c))return}finally{if(f)throw o}}return d}}(e,t)||j0e(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function xh(e,t){if(e==null)return{};var r,a,n=function(o,l){if(o==null)return{};var c,d,u={},f=Object.keys(o);for(d=0;d<f.length;d++)c=f[d],l.indexOf(c)>=0||(u[c]=o[c]);return u}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function W0(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function M0e(e){return W0(e).getComputedStyle(e)}const Qj=Math.round;function U0e(e){return Q0e(e)?(e.nodeName||"").toLowerCase():""}let zj;function H0e(e){return e instanceof W0(e).HTMLElement}function r5(e){return e instanceof W0(e).Element}function Q0e(e){return e instanceof W0(e).Node}function EJ(e){return typeof ShadowRoot>"u"?!1:e instanceof W0(e).ShadowRoot||e instanceof ShadowRoot}function z0e(e){const{overflow:t,overflowX:r,overflowY:a,display:n}=M0e(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+r)&&!["inline","contents"].includes(n)}function yht(){return/^((?!chrome|android).)*safari/i.test(function(){if(zj)return zj;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(zj=e.brands.map(t=>t.brand+"/"+t.version).join(" "),zj):navigator.userAgent}())}function $0e(e){return r5(e)?e:e.contextElement}const V0e={x:1,y:1};function CJ(e){const t=$0e(e);if(!H0e(t))return V0e;const r=t.getBoundingClientRect(),{width:a,height:n,fallback:i}=function(c){const d=M0e(c);let u=parseFloat(d.width),f=parseFloat(d.height);const A=c.offsetWidth,m=c.offsetHeight,g=Qj(u)!==A||Qj(f)!==m;return g&&(u=A,f=m),{width:u,height:f,fallback:g}}(t);let o=(i?Qj(r.width):r.width)/a,l=(i?Qj(r.height):r.height)/n;return o&&Number.isFinite(o)||(o=1),l&&Number.isFinite(l)||(l=1),{x:o,y:l}}function jJ(e,t,r,a){var n,i;t===void 0&&(t=!1),r===void 0&&(r=!1);const o=e.getBoundingClientRect(),l=$0e(e);let c=V0e;t&&(c=CJ(e));const d=l?W0(l):window,u=yht()&&r;let f=(o.left+(u&&((n=d.visualViewport)==null?void 0:n.offsetLeft)||0))/c.x,A=(o.top+(u&&((i=d.visualViewport)==null?void 0:i.offsetTop)||0))/c.y,m=o.width/c.x,g=o.height/c.y;if(l){const x=W0(l),v=a;let y=x.frameElement;for(;y&&a&&v!==x;){const N=CJ(y),E=y.getBoundingClientRect(),B=getComputedStyle(y);E.x+=(y.clientLeft+parseFloat(B.paddingLeft))*N.x,E.y+=(y.clientTop+parseFloat(B.paddingTop))*N.y,f*=N.x,A*=N.y,m*=N.x,g*=N.y,f+=E.x,A+=E.y,y=W0(y).frameElement}}return{width:m,height:g,top:A,right:f+m,bottom:A+g,left:f,x:f,y:A}}function wht(e){if(U0e(e)==="html")return e;const t=e.assignedSlot||e.parentNode||EJ(e)&&e.host||function(r){return((Q0e(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return EJ(t)?t.host:t}function G0e(e){const t=wht(e);return function(r){return["html","body","#document"].includes(U0e(r))}(t)?t.ownerDocument.body:H0e(t)&&z0e(t)?t:G0e(t)}function a5(e,t){var r;t===void 0&&(t=[]);const a=G0e(e),n=a===((r=e.ownerDocument)==null?void 0:r.body),i=W0(a);return n?t.concat(i,i.visualViewport||[],z0e(a)?a:[]):t.concat(a,a5(a))}var rR=typeof document<"u"?w.useLayoutEffect:w.useEffect,Nht=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],s_=function(){};function Eht(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function Cht(e,t){for(var r=arguments.length,a=new Array(r>2?r-2:0),n=2;n<r;n++)a[n-2]=arguments[n];var i=[].concat(a);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&i.push("".concat(Eht(e,o)));return i.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var kJ=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):Wg(e)==="object"&&e!==null?[e]:[];var t},SJ=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,Er({},xh(e,Nht))},_s=function(e,t,r){var a=e.cx,n=e.getStyles,i=e.getClassNames,o=e.className;return{css:n(t,e),className:a(r??{},i(t,e),o)}};function Q3(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function q0e(e){return Q3(e)?window.pageYOffset:e.scrollTop}function i_(e,t){Q3(e)?window.scrollTo(0,t):e.scrollTop=t}function jht(e,t,r,a){return r*((e=e/a-1)*e*e+1)+t}function $j(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:s_,n=q0e(e),i=t-n,o=10,l=0;function c(){var d=jht(l+=o,n,i,r);i_(e,d),l<r?window.requestAnimationFrame(c):a(e)}c()}function _J(e,t){var r=e.getBoundingClientRect(),a=t.getBoundingClientRect(),n=t.offsetHeight/3;a.bottom+n>r.bottom?i_(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+n,e.scrollHeight)):a.top-n<r.top&&i_(e,Math.max(t.offsetTop-n,0))}function TJ(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var K0e=!1,kht={get passive(){return K0e=!0}},Vj=typeof window<"u"?window:{};Vj.addEventListener&&Vj.removeEventListener&&(Vj.addEventListener("p",s_,kht),Vj.removeEventListener("p",s_,!1));var Sht=K0e;function _ht(e){return e!=null}function Gj(e,t,r){return e?t:r}var Tht=["children","innerProps"],Bht=["children","innerProps"];function Iht(e){var t=e.maxHeight,r=e.menuEl,a=e.minHeight,n=e.placement,i=e.shouldScroll,o=e.isFixedPosition,l=e.controlHeight,c=function(K){var Q=getComputedStyle(K),G=Q.position==="absolute",X=/(auto|scroll)/;if(Q.position==="fixed")return document.documentElement;for(var Z=K;Z=Z.parentElement;)if(Q=getComputedStyle(Z),(!G||Q.position!=="static")&&X.test(Q.overflow+Q.overflowY+Q.overflowX))return Z;return document.documentElement}(r),d={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return d;var u,f=c.getBoundingClientRect().height,A=r.getBoundingClientRect(),m=A.bottom,g=A.height,x=A.top,v=r.offsetParent.getBoundingClientRect().top,y=o||Q3(u=c)?window.innerHeight:u.clientHeight,N=q0e(c),E=parseInt(getComputedStyle(r).marginBottom,10),B=parseInt(getComputedStyle(r).marginTop,10),_=v-B,I=y-x,j=_+N,k=f-N-x,T=m-y+N+E,L=N+x-B,F=160;switch(n){case"auto":case"bottom":if(I>=g)return{placement:"bottom",maxHeight:t};if(k>=g&&!o)return i&&$j(c,T,F),{placement:"bottom",maxHeight:t};if(!o&&k>=a||o&&I>=a)return i&&$j(c,T,F),{placement:"bottom",maxHeight:o?I-E:k-E};if(n==="auto"||o){var S=t,M=o?_:j;return M>=a&&(S=Math.min(M-E-l,t)),{placement:"top",maxHeight:S}}if(n==="bottom")return i&&i_(c,T),{placement:"bottom",maxHeight:t};break;case"top":if(_>=g)return{placement:"top",maxHeight:t};if(j>=g&&!o)return i&&$j(c,L,F),{placement:"top",maxHeight:t};if(!o&&j>=a||o&&_>=a){var H=t;return(!o&&j>=a||o&&_>=a)&&(H=o?_-B:j-B),i&&$j(c,L,F),{placement:"top",maxHeight:H}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(n,'".'))}return d}var BJ,W0e=function(e){return e==="auto"?"bottom":e},X0e=w.createContext(null),Oht=function(e){var t=e.children,r=e.minMenuHeight,a=e.maxMenuHeight,n=e.menuPlacement,i=e.menuPosition,o=e.menuShouldScrollIntoView,l=e.theme,c=(w.useContext(X0e)||{}).setPortalPlacement,d=w.useRef(null),u=ao(w.useState(a),2),f=u[0],A=u[1],m=ao(w.useState(null),2),g=m[0],x=m[1],v=l.spacing.controlHeight;return rR(function(){var y=d.current;if(y){var N=i==="fixed",E=Iht({maxHeight:a,menuEl:y,minHeight:r,placement:n,shouldScroll:o&&!N,isFixedPosition:N,controlHeight:v});A(E.maxHeight),x(E.placement),c==null||c(E.placement)}},[a,n,i,o,r,c,v]),t({ref:d,placerProps:Er(Er({},e),{},{placement:g||W0e(n),maxHeight:f})})},Dht=function(e){var t=e.children,r=e.innerRef,a=e.innerProps;return _r("div",Dr({},_s(e,"menu",{menu:!0}),{ref:r},a),t)},Y0e=function(e,t){var r=e.theme,a=r.spacing.baseUnit,n=r.colors;return Er({textAlign:"center"},t?{}:{color:n.neutral40,padding:"".concat(2*a,"px ").concat(3*a,"px")})},Fht=Y0e,Pht=Y0e,Rht=["size"],Lht=["innerProps","isRtl","size"],jO,kO,Mht={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},J0e=function(e){var t=e.size,r=xh(e,Rht);return _r("svg",Dr({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Mht},r))},SO=function(e){return _r(J0e,Dr({size:20},e),_r("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},IJ=function(e){return _r(J0e,Dr({size:20},e),_r("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Z0e=function(e,t){var r=e.isFocused,a=e.theme,n=a.spacing.baseUnit,i=a.colors;return Er({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?i.neutral60:i.neutral20,padding:2*n,":hover":{color:r?i.neutral80:i.neutral40}})},Uht=Z0e,Hht=Z0e,Qht=function(){var e=VU.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(BJ||(jO=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],kO||(kO=jO.slice(0)),BJ=Object.freeze(Object.defineProperties(jO,{raw:{value:Object.freeze(kO)}})))),_O=function(e){var t=e.delay,r=e.offset;return _r("span",{css:VU({animation:"".concat(Qht," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},zht=function(e){var t=e.children,r=e.isDisabled,a=e.isFocused,n=e.innerRef,i=e.innerProps,o=e.menuIsOpen;return _r("div",Dr({ref:n},_s(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":a,"control--menu-is-open":o}),i,{"aria-disabled":r||void 0}),t)},$ht=["data"],Vht=function(e){var t=e.children,r=e.cx,a=e.getStyles,n=e.getClassNames,i=e.Heading,o=e.headingProps,l=e.innerProps,c=e.label,d=e.theme,u=e.selectProps;return _r("div",Dr({},_s(e,"group",{group:!0}),l),_r(i,Dr({},o,{selectProps:u,theme:d,getStyles:a,getClassNames:n,cx:r}),c),_r("div",null,t))},Ght=["innerRef","isDisabled","isHidden","inputClassName"],eAe={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},qht={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Er({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},eAe)},Kht=function(e){return Er({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},eAe)},OJ=function(e){var t=e.children,r=e.innerProps;return _r("div",r,t)},Wht=function(e){var t=e.children,r=e.components,a=e.data,n=e.innerProps,i=e.isDisabled,o=e.removeProps,l=e.selectProps,c=r.Container,d=r.Label,u=r.Remove;return _r(c,{data:a,innerProps:Er(Er({},_s(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":i})),n),selectProps:l},_r(d,{data:a,innerProps:Er({},_s(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},t),_r(u,{data:a,innerProps:Er(Er({},_s(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},o),selectProps:l}))},Xht={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return _r("div",Dr({},_s(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||_r(SO,null))},Control:zht,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return _r("div",Dr({},_s(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||_r(IJ,null))},DownChevron:IJ,CrossIcon:SO,Group:Vht,GroupHeading:function(e){var t=SJ(e);t.data;var r=xh(t,$ht);return _r("div",Dr({},_s(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return _r("div",Dr({},_s(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return _r("span",Dr({},t,_s(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,a=SJ(e),n=a.innerRef,i=a.isDisabled,o=a.isHidden,l=a.inputClassName,c=xh(a,Ght);return _r("div",Dr({},_s(e,"input",{"input-container":!0}),{"data-value":r||""}),_r("input",Dr({className:t({input:!0},l),ref:n,style:Kht(o),disabled:i},c)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,a=e.size,n=a===void 0?4:a,i=xh(e,Lht);return _r("div",Dr({},_s(Er(Er({},i),{},{innerProps:t,isRtl:r,size:n}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),_r(_O,{delay:0,offset:r}),_r(_O,{delay:160,offset:!0}),_r(_O,{delay:320,offset:!r}))},Menu:Dht,MenuList:function(e){var t=e.children,r=e.innerProps,a=e.innerRef,n=e.isMulti;return _r("div",Dr({},_s(e,"menuList",{"menu-list":!0,"menu-list--is-multi":n}),{ref:a},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,a=e.controlElement,n=e.innerProps,i=e.menuPlacement,o=e.menuPosition,l=w.useRef(null),c=w.useRef(null),d=ao(w.useState(W0e(i)),2),u=d[0],f=d[1],A=w.useMemo(function(){return{setPortalPlacement:f}},[]),m=ao(w.useState(null),2),g=m[0],x=m[1],v=w.useCallback(function(){if(a){var B=function(j){var k=j.getBoundingClientRect();return{bottom:k.bottom,height:k.height,left:k.left,right:k.right,top:k.top,width:k.width}}(a),_=o==="fixed"?0:window.pageYOffset,I=B[u]+_;I===(g==null?void 0:g.offset)&&B.left===(g==null?void 0:g.rect.left)&&B.width===(g==null?void 0:g.rect.width)||x({offset:I,rect:B})}},[a,o,u,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);rR(function(){v()},[v]);var y=w.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),a&&l.current&&(c.current=function(B,_,I,j){j===void 0&&(j={});const{ancestorScroll:k=!0,ancestorResize:T=!0,elementResize:L=!0,animationFrame:F=!1}=j,S=k&&!F,M=S||T?[...r5(B)?a5(B):B.contextElement?a5(B.contextElement):[],...a5(_)]:[];M.forEach(G=>{S&&G.addEventListener("scroll",I,{passive:!0}),T&&G.addEventListener("resize",I)});let H,K=null;if(L){let G=!0;K=new ResizeObserver(()=>{G||I(),G=!1}),r5(B)&&!F&&K.observe(B),r5(B)||!B.contextElement||F||K.observe(B.contextElement),K.observe(_)}let Q=F?jJ(B):null;return F&&function G(){const X=jJ(B);!Q||X.x===Q.x&&X.y===Q.y&&X.width===Q.width&&X.height===Q.height||I(),Q=X,H=requestAnimationFrame(G)}(),I(),()=>{var G;M.forEach(X=>{S&&X.removeEventListener("scroll",I),T&&X.removeEventListener("resize",I)}),(G=K)==null||G.disconnect(),K=null,F&&cancelAnimationFrame(H)}}(a,l.current,v,{elementResize:"ResizeObserver"in window}))},[a,v]);rR(function(){y()},[y]);var N=w.useCallback(function(B){l.current=B,y()},[y]);if(!t&&o!=="fixed"||!g)return null;var E=_r("div",Dr({ref:N},_s(Er(Er({},e),{},{offset:g.offset,position:o,rect:g.rect}),"menuPortal",{"menu-portal":!0}),n),r);return _r(X0e.Provider,{value:A},t?ZL.createPortal(E,t):E)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,a=e.innerProps,n=xh(e,Bht);return _r("div",Dr({},_s(Er(Er({},n),{},{children:r,innerProps:a}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),a),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,a=e.innerProps,n=xh(e,Tht);return _r("div",Dr({},_s(Er(Er({},n),{},{children:r,innerProps:a}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),a),r)},MultiValue:Wht,MultiValueContainer:OJ,MultiValueLabel:OJ,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return _r("div",Dr({role:"button"},r),t||_r(SO,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,a=e.isFocused,n=e.isSelected,i=e.innerRef,o=e.innerProps;return _r("div",Dr({},_s(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":a,"option--is-selected":n}),{ref:i,"aria-disabled":r},o),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return _r("div",Dr({},_s(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,a=e.isDisabled,n=e.isRtl;return _r("div",Dr({},_s(e,"container",{"--is-disabled":a,"--is-rtl":n}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,a=e.innerProps;return _r("div",Dr({},_s(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),a),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,a=e.isMulti,n=e.hasValue;return _r("div",Dr({},_s(e,"valueContainer",{"value-container":!0,"value-container--is-multi":a,"value-container--has-value":n}),r),t)}},DJ=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function Yht(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(a=e[r],n=t[r],!(a===n||DJ(a)&&DJ(n)))return!1;var a,n;return!0}for(var Jht={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},FJ=function(e){return _r("span",Dr({css:Jht},e))},Zht={guidance:function(e){var t=e.isSearchable,r=e.isMulti,a=e.tabSelectsValue,n=e.context,i=e.isInitialFocus;switch(n){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(a?", press Tab to select the option and exit the menu":"",".");case"input":return i?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,a=r===void 0?"":r,n=e.labels,i=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(a,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(n.length>1?"s":""," ").concat(n.join(","),", selected.");case"select-option":return"option ".concat(a,i?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,a=e.options,n=e.label,i=n===void 0?"":n,o=e.selectValue,l=e.isDisabled,c=e.isSelected,d=e.isAppleDevice,u=function(m,g){return m&&m.length?"".concat(m.indexOf(g)+1," of ").concat(m.length):""};if(t==="value"&&o)return"value ".concat(i," focused, ").concat(u(o,r),".");if(t==="menu"&&d){var f=l?" disabled":"",A="".concat(c?" selected":"").concat(f);return"".concat(i).concat(A,", ").concat(u(a,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},e0t=function(e){var t=e.ariaSelection,r=e.focusedOption,a=e.focusedValue,n=e.focusableOptions,i=e.isFocused,o=e.selectValue,l=e.selectProps,c=e.id,d=e.isAppleDevice,u=l.ariaLiveMessages,f=l.getOptionLabel,A=l.inputValue,m=l.isMulti,g=l.isOptionDisabled,x=l.isSearchable,v=l.menuIsOpen,y=l.options,N=l.screenReaderStatus,E=l.tabSelectsValue,B=l.isLoading,_=l["aria-label"],I=l["aria-live"],j=w.useMemo(function(){return Er(Er({},Zht),u||{})},[u]),k=w.useMemo(function(){var H,K="";if(t&&j.onChange){var Q=t.option,G=t.options,X=t.removedValue,Z=t.removedValues,U=t.value,Y=X||Q||(H=U,Array.isArray(H)?null:H),P=Y?f(Y):"",D=G||Z||void 0,W=D?D.map(f):[],J=Er({isDisabled:Y&&g(Y,o),label:P,labels:W},t);K=j.onChange(J)}return K},[t,j,g,o,f]),T=w.useMemo(function(){var H="",K=r||a,Q=!!(r&&o&&o.includes(r));if(K&&j.onFocus){var G={focused:K,label:f(K),isDisabled:g(K,o),isSelected:Q,options:n,context:K===r?"menu":"value",selectValue:o,isAppleDevice:d};H=j.onFocus(G)}return H},[r,a,f,g,j,n,o,d]),L=w.useMemo(function(){var H="";if(v&&y.length&&!B&&j.onFilter){var K=N({count:n.length});H=j.onFilter({inputValue:A,resultsMessage:K})}return H},[n,A,v,j,y,N,B]),F=(t==null?void 0:t.action)==="initial-input-focus",S=w.useMemo(function(){var H="";if(j.guidance){var K=a?"value":v?"menu":"input";H=j.guidance({"aria-label":_,context:K,isDisabled:r&&g(r,o),isMulti:m,isSearchable:x,tabSelectsValue:E,isInitialFocus:F})}return H},[_,r,a,m,g,x,v,j,o,E,F]),M=_r(w.Fragment,null,_r("span",{id:"aria-selection"},k),_r("span",{id:"aria-focused"},T),_r("span",{id:"aria-results"},L),_r("span",{id:"aria-guidance"},S));return _r(w.Fragment,null,_r(FJ,{id:c},F&&M),_r(FJ,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},i&&!F&&M))},TO=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],t0t=new RegExp("["+TO.map(function(e){return e.letters}).join("")+"]","g"),tAe={},BO=0;BO<TO.length;BO++)for(var IO=TO[BO],OO=0;OO<IO.letters.length;OO++)tAe[IO.letters[OO]]=IO.base;var rAe=function(e){return e.replace(t0t,function(t){return tAe[t]})},r0t=function(e,t){t===void 0&&(t=Yht);var r=null;function a(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(r&&r.lastThis===this&&t(n,r.lastArgs))return r.lastResult;var o=e.apply(this,n);return r={lastResult:o,lastArgs:n,lastThis:this},o}return a.clear=function(){r=null},a}(rAe),PJ=function(e){return e.replace(/^\s+|\s+$/g,"")},a0t=function(e){return"".concat(e.label," ").concat(e.value)},n0t=["innerRef"];function s0t(e){var t=e.innerRef,r=function(a){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var l=Object.entries(a).filter(function(c){var d=ao(c,1)[0];return!i.includes(d)});return l.reduce(function(c,d){var u=ao(d,2),f=u[0],A=u[1];return c[f]=A,c},{})}(xh(e,n0t),"onExited","in","enter","exit","appear");return _r("input",Dr({ref:t},r,{css:VU({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var RJ=["boxSizing","height","overflow","paddingRight","position"],LJ={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function MJ(e){e.preventDefault()}function UJ(e){e.stopPropagation()}function HJ(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function QJ(){return"ontouchstart"in window||navigator.maxTouchPoints}var zJ=!(typeof window>"u"||!window.document||!window.document.createElement),Nw=0,Fv={capture:!1,passive:!1},i0t=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},o0t={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function l0t(e){var t=e.children,r=e.lockEnabled,a=e.captureEnabled,n=function(o){var l=o.isEnabled,c=o.onBottomArrive,d=o.onBottomLeave,u=o.onTopArrive,f=o.onTopLeave,A=w.useRef(!1),m=w.useRef(!1),g=w.useRef(0),x=w.useRef(null),v=w.useCallback(function(I,j){if(x.current!==null){var k=x.current,T=k.scrollTop,L=k.scrollHeight,F=k.clientHeight,S=x.current,M=j>0,H=L-F-T,K=!1;H>j&&A.current&&(d&&d(I),A.current=!1),M&&m.current&&(f&&f(I),m.current=!1),M&&j>H?(c&&!A.current&&c(I),S.scrollTop=L,K=!0,A.current=!0):!M&&-j>T&&(u&&!m.current&&u(I),S.scrollTop=0,K=!0,m.current=!0),K&&function(Q){Q.cancelable&&Q.preventDefault(),Q.stopPropagation()}(I)}},[c,d,u,f]),y=w.useCallback(function(I){v(I,I.deltaY)},[v]),N=w.useCallback(function(I){g.current=I.changedTouches[0].clientY},[]),E=w.useCallback(function(I){var j=g.current-I.changedTouches[0].clientY;v(I,j)},[v]),B=w.useCallback(function(I){if(I){var j=!!Sht&&{passive:!1};I.addEventListener("wheel",y,j),I.addEventListener("touchstart",N,j),I.addEventListener("touchmove",E,j)}},[E,N,y]),_=w.useCallback(function(I){I&&(I.removeEventListener("wheel",y,!1),I.removeEventListener("touchstart",N,!1),I.removeEventListener("touchmove",E,!1))},[E,N,y]);return w.useEffect(function(){if(l){var I=x.current;return B(I),function(){_(I)}}},[l,B,_]),function(I){x.current=I}}({isEnabled:a===void 0||a,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),i=function(o){var l=o.isEnabled,c=o.accountForScrollbars,d=c===void 0||c,u=w.useRef({}),f=w.useRef(null),A=w.useCallback(function(g){if(zJ){var x=document.body,v=x&&x.style;if(d&&RJ.forEach(function(B){var _=v&&v[B];u.current[B]=_}),d&&Nw<1){var y=parseInt(u.current.paddingRight,10)||0,N=document.body?document.body.clientWidth:0,E=window.innerWidth-N+y||0;Object.keys(LJ).forEach(function(B){var _=LJ[B];v&&(v[B]=_)}),v&&(v.paddingRight="".concat(E,"px"))}x&&QJ()&&(x.addEventListener("touchmove",MJ,Fv),g&&(g.addEventListener("touchstart",HJ,Fv),g.addEventListener("touchmove",UJ,Fv))),Nw+=1}},[d]),m=w.useCallback(function(g){if(zJ){var x=document.body,v=x&&x.style;Nw=Math.max(Nw-1,0),d&&Nw<1&&RJ.forEach(function(y){var N=u.current[y];v&&(v[y]=N)}),x&&QJ()&&(x.removeEventListener("touchmove",MJ,Fv),g&&(g.removeEventListener("touchstart",HJ,Fv),g.removeEventListener("touchmove",UJ,Fv)))}},[d]);return w.useEffect(function(){if(l){var g=f.current;return A(g),function(){m(g)}}},[l,A,m]),function(g){f.current=g}}({isEnabled:r});return _r(w.Fragment,null,r&&_r("div",{onClick:i0t,css:o0t}),t(function(o){n(o),i(o)}))}var c0t={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},d0t=function(e){var t=e.name,r=e.onFocus;return _r("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:c0t,value:"",onChange:function(){}})};function aR(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function aAe(){return aR(/^Mac/i)}function u0t(){return aR(/^iPhone/i)||aR(/^iPad/i)||aAe()&&navigator.maxTouchPoints>1}var f0t,h0t={clearIndicator:Hht,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,a=e.isFocused,n=e.theme,i=n.colors,o=n.borderRadius;return Er({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:n.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?i.neutral5:i.neutral0,borderColor:r?i.neutral10:a?i.primary:i.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:a?"0 0 0 1px ".concat(i.primary):void 0,"&:hover":{borderColor:a?i.primary:i.neutral30}})},dropdownIndicator:Uht,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,a=r.colors,n=r.spacing;return Er({label:"group",cursor:"default",display:"block"},t?{}:{color:a.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*n.baseUnit,paddingRight:3*n.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,a=e.theme,n=a.spacing.baseUnit,i=a.colors;return Er({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?i.neutral10:i.neutral20,marginBottom:2*n,marginTop:2*n})},input:function(e,t){var r=e.isDisabled,a=e.value,n=e.theme,i=n.spacing,o=n.colors;return Er(Er({visibility:r?"hidden":"visible",transform:a?"translateZ(0)":""},qht),t?{}:{margin:i.baseUnit/2,paddingBottom:i.baseUnit/2,paddingTop:i.baseUnit/2,color:o.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,a=e.size,n=e.theme,i=n.colors,o=n.spacing.baseUnit;return Er({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:a,lineHeight:1,marginRight:a,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?i.neutral60:i.neutral20,padding:2*o})},loadingMessage:Pht,menu:function(e,t){var r,a=e.placement,n=e.theme,i=n.borderRadius,o=n.spacing,l=n.colors;return Er((fb(r={label:"menu"},function(c){return c?{bottom:"top",top:"bottom"}[c]:"bottom"}(a),"100%"),fb(r,"position","absolute"),fb(r,"width","100%"),fb(r,"zIndex",1),r),t?{}:{backgroundColor:l.neutral0,borderRadius:i,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},menuList:function(e,t){var r=e.maxHeight,a=e.theme.spacing.baseUnit;return Er({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:a,paddingTop:a})},menuPortal:function(e){var t=e.rect,r=e.offset,a=e.position;return{left:t.left,position:a,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,a=r.spacing,n=r.borderRadius,i=r.colors;return Er({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:i.neutral10,borderRadius:n/2,margin:a.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,a=r.borderRadius,n=r.colors,i=e.cropWithEllipsis;return Er({overflow:"hidden",textOverflow:i||i===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:a/2,color:n.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,a=r.spacing,n=r.borderRadius,i=r.colors,o=e.isFocused;return Er({alignItems:"center",display:"flex"},t?{}:{borderRadius:n/2,backgroundColor:o?i.dangerLight:void 0,paddingLeft:a.baseUnit,paddingRight:a.baseUnit,":hover":{backgroundColor:i.dangerLight,color:i.danger}})},noOptionsMessage:Fht,option:function(e,t){var r=e.isDisabled,a=e.isFocused,n=e.isSelected,i=e.theme,o=i.spacing,l=i.colors;return Er({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:n?l.primary:a?l.primary25:"transparent",color:r?l.neutral20:n?l.neutral0:"inherit",padding:"".concat(2*o.baseUnit,"px ").concat(3*o.baseUnit,"px"),":active":{backgroundColor:r?void 0:n?l.primary:l.primary50}})},placeholder:function(e,t){var r=e.theme,a=r.spacing,n=r.colors;return Er({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:n.neutral50,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,a=e.theme,n=a.spacing,i=a.colors;return Er({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?i.neutral40:i.neutral80,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,a=e.isMulti,n=e.hasValue,i=e.selectProps.controlShouldRenderValue;return Er({alignItems:"center",display:a&&n&&i?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},DO={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},A0t={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:TJ(),captureMenuScroll:!TJ(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=Er({ignoreCase:!0,ignoreAccents:!0,stringify:a0t,trim:!0,matchFrom:"any"},f0t),a=r.ignoreCase,n=r.ignoreAccents,i=r.stringify,o=r.trim,l=r.matchFrom,c=o?PJ(t):t,d=o?PJ(i(e)):i(e);return a&&(c=c.toLowerCase(),d=d.toLowerCase()),n&&(c=r0t(c),d=rAe(d)),l==="start"?d.substr(0,c.length)===c:d.indexOf(c)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function $J(e,t,r,a){return{type:"option",data:t,isDisabled:sAe(e,t,r),isSelected:iAe(e,t,r),label:nAe(e,t),value:o_(e,t),index:a}}function qj(e,t){return e.options.map(function(r,a){if("options"in r){var n=r.options.map(function(o,l){return $J(e,o,t,l)}).filter(function(o){return qJ(e,o)});return n.length>0?{type:"group",data:r,options:n,index:a}:void 0}var i=$J(e,r,t,a);return qJ(e,i)?i:void 0}).filter(_ht)}function VJ(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,LU(r.options.map(function(a){return a.data}))):t.push(r.data),t},[])}function GJ(e,t){return e.reduce(function(r,a){return a.type==="group"?r.push.apply(r,LU(a.options.map(function(n){return{data:n.data,id:"".concat(t,"-").concat(a.index,"-").concat(n.index)}}))):r.push({data:a.data,id:"".concat(t,"-").concat(a.index)}),r},[])}function qJ(e,t){var r=e.inputValue,a=r===void 0?"":r,n=t.data,i=t.isSelected,o=t.label,l=t.value;return(!lAe(e)||!i)&&oAe(e,{label:o,value:l,data:n},a)}var FO=function(e,t){var r;return((r=e.find(function(a){return a.data===t}))===null||r===void 0?void 0:r.id)||null},nAe=function(e,t){return e.getOptionLabel(t)},o_=function(e,t){return e.getOptionValue(t)};function sAe(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function iAe(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var a=o_(e,t);return r.some(function(n){return o_(e,n)===a})}function oAe(e,t,r){return!e.filterOption||e.filterOption(t,r)}var lAe=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},m0t=1,cAe=function(e){(function(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),l&&qP(o,l)})(i,w.Component);var t,r,a,n=Qft(i);function i(o){var l;if(function(f,A){if(!(f instanceof A))throw new TypeError("Cannot call a class as a function")}(this,i),(l=n.call(this,o)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},l.blockOptionHover=!1,l.isComposing=!1,l.commonProps=void 0,l.initialTouchX=0,l.initialTouchY=0,l.openAfterFocus=!1,l.scrollToFocusedOptionOnUpdate=!1,l.userIsDragging=void 0,l.isAppleDevice=aAe()||u0t(),l.controlRef=null,l.getControlRef=function(f){l.controlRef=f},l.focusedOptionRef=null,l.getFocusedOptionRef=function(f){l.focusedOptionRef=f},l.menuListRef=null,l.getMenuListRef=function(f){l.menuListRef=f},l.inputRef=null,l.getInputRef=function(f){l.inputRef=f},l.focus=l.focusInput,l.blur=l.blurInput,l.onChange=function(f,A){var m=l.props,g=m.onChange,x=m.name;A.name=x,l.ariaOnChange(f,A),g(f,A)},l.setValue=function(f,A,m){var g=l.props,x=g.closeMenuOnSelect,v=g.isMulti,y=g.inputValue;l.onInputChange("",{action:"set-value",prevInputValue:y}),x&&(l.setState({inputIsHiddenAfterUpdate:!v}),l.onMenuClose()),l.setState({clearFocusValueOnUpdate:!0}),l.onChange(f,{action:A,option:m})},l.selectOption=function(f){var A=l.props,m=A.blurInputOnSelect,g=A.isMulti,x=A.name,v=l.state.selectValue,y=g&&l.isOptionSelected(f,v),N=l.isOptionDisabled(f,v);if(y){var E=l.getOptionValue(f);l.setValue(v.filter(function(B){return l.getOptionValue(B)!==E}),"deselect-option",f)}else{if(N)return void l.ariaOnChange(f,{action:"select-option",option:f,name:x});g?l.setValue([].concat(LU(v),[f]),"select-option",f):l.setValue(f,"select-option")}m&&l.blurInput()},l.removeValue=function(f){var A=l.props.isMulti,m=l.state.selectValue,g=l.getOptionValue(f),x=m.filter(function(y){return l.getOptionValue(y)!==g}),v=Gj(A,x,x[0]||null);l.onChange(v,{action:"remove-value",removedValue:f}),l.focusInput()},l.clearValue=function(){var f=l.state.selectValue;l.onChange(Gj(l.props.isMulti,[],null),{action:"clear",removedValues:f})},l.popValue=function(){var f=l.props.isMulti,A=l.state.selectValue,m=A[A.length-1],g=A.slice(0,A.length-1),x=Gj(f,g,g[0]||null);l.onChange(x,{action:"pop-value",removedValue:m})},l.getFocusedOptionId=function(f){return FO(l.state.focusableOptionsWithIds,f)},l.getFocusableOptionsWithIds=function(){return GJ(qj(l.props,l.state.selectValue),l.getElementId("option"))},l.getValue=function(){return l.state.selectValue},l.cx=function(){for(var f=arguments.length,A=new Array(f),m=0;m<f;m++)A[m]=arguments[m];return Cht.apply(void 0,[l.props.classNamePrefix].concat(A))},l.getOptionLabel=function(f){return nAe(l.props,f)},l.getOptionValue=function(f){return o_(l.props,f)},l.getStyles=function(f,A){var m=l.props.unstyled,g=h0t[f](A,m);g.boxSizing="border-box";var x=l.props.styles[f];return x?x(g,A):g},l.getClassNames=function(f,A){var m,g;return(m=(g=l.props.classNames)[f])===null||m===void 0?void 0:m.call(g,A)},l.getElementId=function(f){return"".concat(l.state.instancePrefix,"-").concat(f)},l.getComponents=function(){return f=l.props,Er(Er({},Xht),f.components);var f},l.buildCategorizedOptions=function(){return qj(l.props,l.state.selectValue)},l.getCategorizedOptions=function(){return l.props.menuIsOpen?l.buildCategorizedOptions():[]},l.buildFocusableOptions=function(){return VJ(l.buildCategorizedOptions())},l.getFocusableOptions=function(){return l.props.menuIsOpen?l.buildFocusableOptions():[]},l.ariaOnChange=function(f,A){l.setState({ariaSelection:Er({value:f},A)})},l.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),l.focusInput())},l.onMenuMouseMove=function(f){l.blockOptionHover=!1},l.onControlMouseDown=function(f){if(!f.defaultPrevented){var A=l.props.openMenuOnClick;l.state.isFocused?l.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&l.onMenuClose():A&&l.openMenu("first"):(A&&(l.openAfterFocus=!0),l.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},l.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0||l.props.isDisabled)){var A=l.props,m=A.isMulti,g=A.menuIsOpen;l.focusInput(),g?(l.setState({inputIsHiddenAfterUpdate:!m}),l.onMenuClose()):l.openMenu("first"),f.preventDefault()}},l.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(l.clearValue(),f.preventDefault(),l.openAfterFocus=!1,f.type==="touchend"?l.focusInput():setTimeout(function(){return l.focusInput()}))},l.onScroll=function(f){typeof l.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&Q3(f.target)&&l.props.onMenuClose():typeof l.props.closeMenuOnScroll=="function"&&l.props.closeMenuOnScroll(f)&&l.props.onMenuClose()},l.onCompositionStart=function(){l.isComposing=!0},l.onCompositionEnd=function(){l.isComposing=!1},l.onTouchStart=function(f){var A=f.touches,m=A&&A.item(0);m&&(l.initialTouchX=m.clientX,l.initialTouchY=m.clientY,l.userIsDragging=!1)},l.onTouchMove=function(f){var A=f.touches,m=A&&A.item(0);if(m){var g=Math.abs(m.clientX-l.initialTouchX),x=Math.abs(m.clientY-l.initialTouchY);l.userIsDragging=g>5||x>5}},l.onTouchEnd=function(f){l.userIsDragging||(l.controlRef&&!l.controlRef.contains(f.target)&&l.menuListRef&&!l.menuListRef.contains(f.target)&&l.blurInput(),l.initialTouchX=0,l.initialTouchY=0)},l.onControlTouchEnd=function(f){l.userIsDragging||l.onControlMouseDown(f)},l.onClearIndicatorTouchEnd=function(f){l.userIsDragging||l.onClearIndicatorMouseDown(f)},l.onDropdownIndicatorTouchEnd=function(f){l.userIsDragging||l.onDropdownIndicatorMouseDown(f)},l.handleInputChange=function(f){var A=l.props.inputValue,m=f.currentTarget.value;l.setState({inputIsHiddenAfterUpdate:!1}),l.onInputChange(m,{action:"input-change",prevInputValue:A}),l.props.menuIsOpen||l.onMenuOpen()},l.onInputFocus=function(f){l.props.onFocus&&l.props.onFocus(f),l.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(l.openAfterFocus||l.props.openMenuOnFocus)&&l.openMenu("first"),l.openAfterFocus=!1},l.onInputBlur=function(f){var A=l.props.inputValue;l.menuListRef&&l.menuListRef.contains(document.activeElement)?l.inputRef.focus():(l.props.onBlur&&l.props.onBlur(f),l.onInputChange("",{action:"input-blur",prevInputValue:A}),l.onMenuClose(),l.setState({focusedValue:null,isFocused:!1}))},l.onOptionHover=function(f){if(!l.blockOptionHover&&l.state.focusedOption!==f){var A=l.getFocusableOptions().indexOf(f);l.setState({focusedOption:f,focusedOptionId:A>-1?l.getFocusedOptionId(f):null})}},l.shouldHideSelectedOptions=function(){return lAe(l.props)},l.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),l.focus()},l.onKeyDown=function(f){var A=l.props,m=A.isMulti,g=A.backspaceRemovesValue,x=A.escapeClearsValue,v=A.inputValue,y=A.isClearable,N=A.isDisabled,E=A.menuIsOpen,B=A.onKeyDown,_=A.tabSelectsValue,I=A.openMenuOnFocus,j=l.state,k=j.focusedOption,T=j.focusedValue,L=j.selectValue;if(!(N||typeof B=="function"&&(B(f),f.defaultPrevented))){switch(l.blockOptionHover=!0,f.key){case"ArrowLeft":if(!m||v)return;l.focusValue("previous");break;case"ArrowRight":if(!m||v)return;l.focusValue("next");break;case"Delete":case"Backspace":if(v)return;if(T)l.removeValue(T);else{if(!g)return;m?l.popValue():y&&l.clearValue()}break;case"Tab":if(l.isComposing||f.shiftKey||!E||!_||!k||I&&l.isOptionSelected(k,L))return;l.selectOption(k);break;case"Enter":if(f.keyCode===229)break;if(E){if(!k||l.isComposing)return;l.selectOption(k);break}return;case"Escape":E?(l.setState({inputIsHiddenAfterUpdate:!1}),l.onInputChange("",{action:"menu-close",prevInputValue:v}),l.onMenuClose()):y&&x&&l.clearValue();break;case" ":if(v)return;if(!E){l.openMenu("first");break}if(!k)return;l.selectOption(k);break;case"ArrowUp":E?l.focusOption("up"):l.openMenu("last");break;case"ArrowDown":E?l.focusOption("down"):l.openMenu("first");break;case"PageUp":if(!E)return;l.focusOption("pageup");break;case"PageDown":if(!E)return;l.focusOption("pagedown");break;case"Home":if(!E)return;l.focusOption("first");break;case"End":if(!E)return;l.focusOption("last");break;default:return}f.preventDefault()}},l.state.instancePrefix="react-select-"+(l.props.instanceId||++m0t),l.state.selectValue=kJ(o.value),o.menuIsOpen&&l.state.selectValue.length){var c=l.getFocusableOptionsWithIds(),d=l.buildFocusableOptions(),u=d.indexOf(l.state.selectValue[0]);l.state.focusableOptionsWithIds=c,l.state.focusedOption=d[u],l.state.focusedOptionId=FO(c,d[u])}return l}return t=i,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&_J(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(o){var l=this.props,c=l.isDisabled,d=l.menuIsOpen,u=this.state.isFocused;(u&&!c&&o.isDisabled||u&&d&&!o.menuIsOpen)&&this.focusInput(),u&&c&&!o.isDisabled?this.setState({isFocused:!1},this.onMenuClose):u||c||!o.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(_J(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(o,l){this.props.onInputChange(o,l)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(o){var l=this,c=this.state,d=c.selectValue,u=c.isFocused,f=this.buildFocusableOptions(),A=o==="first"?0:f.length-1;if(!this.props.isMulti){var m=f.indexOf(d[0]);m>-1&&(A=m)}this.scrollToFocusedOptionOnUpdate=!(u&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[A],focusedOptionId:this.getFocusedOptionId(f[A])},function(){return l.onMenuOpen()})}},{key:"focusValue",value:function(o){var l=this.state,c=l.selectValue,d=l.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var u=c.indexOf(d);d||(u=-1);var f=c.length-1,A=-1;if(c.length){switch(o){case"previous":A=u===0?0:u===-1?f:u-1;break;case"next":u>-1&&u<f&&(A=u+1)}this.setState({inputIsHidden:A!==-1,focusedValue:c[A]})}}}},{key:"focusOption",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",l=this.props.pageSize,c=this.state.focusedOption,d=this.getFocusableOptions();if(d.length){var u=0,f=d.indexOf(c);c||(f=-1),o==="up"?u=f>0?f-1:d.length-1:o==="down"?u=(f+1)%d.length:o==="pageup"?(u=f-l)<0&&(u=0):o==="pagedown"?(u=f+l)>d.length-1&&(u=d.length-1):o==="last"&&(u=d.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:d[u],focusedValue:null,focusedOptionId:this.getFocusedOptionId(d[u])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(DO):Er(Er({},DO),this.props.theme):DO}},{key:"getCommonProps",value:function(){var o=this.clearValue,l=this.cx,c=this.getStyles,d=this.getClassNames,u=this.getValue,f=this.selectOption,A=this.setValue,m=this.props,g=m.isMulti,x=m.isRtl,v=m.options;return{clearValue:o,cx:l,getStyles:c,getClassNames:d,getValue:u,hasValue:this.hasValue(),isMulti:g,isRtl:x,options:v,selectOption:f,selectProps:m,setValue:A,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var o=this.props,l=o.isClearable,c=o.isMulti;return l===void 0?c:l}},{key:"isOptionDisabled",value:function(o,l){return sAe(this.props,o,l)}},{key:"isOptionSelected",value:function(o,l){return iAe(this.props,o,l)}},{key:"filterOption",value:function(o,l){return oAe(this.props,o,l)}},{key:"formatOptionLabel",value:function(o,l){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,d=this.state.selectValue;return this.props.formatOptionLabel(o,{context:l,inputValue:c,selectValue:d})}return this.getOptionLabel(o)}},{key:"formatGroupLabel",value:function(o){return this.props.formatGroupLabel(o)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var o=this.props,l=o.isDisabled,c=o.isSearchable,d=o.inputId,u=o.inputValue,f=o.tabIndex,A=o.form,m=o.menuIsOpen,g=o.required,x=this.getComponents().Input,v=this.state,y=v.inputIsHidden,N=v.ariaSelection,E=this.commonProps,B=d||this.getElementId("input"),_=Er(Er(Er({"aria-autocomplete":"list","aria-expanded":m,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},m&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(N==null?void 0:N.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?w.createElement(x,Dr({},E,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:B,innerRef:this.getInputRef,isDisabled:l,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:A,type:"text",value:u},_)):w.createElement(s0t,Dr({id:B,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:s_,onFocus:this.onInputFocus,disabled:l,tabIndex:f,inputMode:"none",form:A,value:""},_))}},{key:"renderPlaceholderOrValue",value:function(){var o=this,l=this.getComponents(),c=l.MultiValue,d=l.MultiValueContainer,u=l.MultiValueLabel,f=l.MultiValueRemove,A=l.SingleValue,m=l.Placeholder,g=this.commonProps,x=this.props,v=x.controlShouldRenderValue,y=x.isDisabled,N=x.isMulti,E=x.inputValue,B=x.placeholder,_=this.state,I=_.selectValue,j=_.focusedValue,k=_.isFocused;if(!this.hasValue()||!v)return E?null:w.createElement(m,Dr({},g,{key:"placeholder",isDisabled:y,isFocused:k,innerProps:{id:this.getElementId("placeholder")}}),B);if(N)return I.map(function(L,F){var S=L===j,M="".concat(o.getOptionLabel(L),"-").concat(o.getOptionValue(L));return w.createElement(c,Dr({},g,{components:{Container:d,Label:u,Remove:f},isFocused:S,isDisabled:y,key:M,index:F,removeProps:{onClick:function(){return o.removeValue(L)},onTouchEnd:function(){return o.removeValue(L)},onMouseDown:function(H){H.preventDefault()}},data:L}),o.formatOptionLabel(L,"value"))});if(E)return null;var T=I[0];return w.createElement(A,Dr({},g,{data:T,isDisabled:y}),this.formatOptionLabel(T,"value"))}},{key:"renderClearIndicator",value:function(){var o=this.getComponents().ClearIndicator,l=this.commonProps,c=this.props,d=c.isDisabled,u=c.isLoading,f=this.state.isFocused;if(!this.isClearable()||!o||d||!this.hasValue()||u)return null;var A={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return w.createElement(o,Dr({},l,{innerProps:A,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var o=this.getComponents().LoadingIndicator,l=this.commonProps,c=this.props,d=c.isDisabled,u=c.isLoading,f=this.state.isFocused;return o&&u?w.createElement(o,Dr({},l,{innerProps:{"aria-hidden":"true"},isDisabled:d,isFocused:f})):null}},{key:"renderIndicatorSeparator",value:function(){var o=this.getComponents(),l=o.DropdownIndicator,c=o.IndicatorSeparator;if(!l||!c)return null;var d=this.commonProps,u=this.props.isDisabled,f=this.state.isFocused;return w.createElement(c,Dr({},d,{isDisabled:u,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var o=this.getComponents().DropdownIndicator;if(!o)return null;var l=this.commonProps,c=this.props.isDisabled,d=this.state.isFocused,u={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return w.createElement(o,Dr({},l,{innerProps:u,isDisabled:c,isFocused:d}))}},{key:"renderMenu",value:function(){var o=this,l=this.getComponents(),c=l.Group,d=l.GroupHeading,u=l.Menu,f=l.MenuList,A=l.MenuPortal,m=l.LoadingMessage,g=l.NoOptionsMessage,x=l.Option,v=this.commonProps,y=this.state.focusedOption,N=this.props,E=N.captureMenuScroll,B=N.inputValue,_=N.isLoading,I=N.loadingMessage,j=N.minMenuHeight,k=N.maxMenuHeight,T=N.menuIsOpen,L=N.menuPlacement,F=N.menuPosition,S=N.menuPortalTarget,M=N.menuShouldBlockScroll,H=N.menuShouldScrollIntoView,K=N.noOptionsMessage,Q=N.onMenuScrollToTop,G=N.onMenuScrollToBottom;if(!T)return null;var X,Z=function(W,J){var ce=W.type,ie=W.data,re=W.isDisabled,de=W.isSelected,oe=W.label,be=W.value,q=y===ie,we=re?void 0:function(){return o.onOptionHover(ie)},Te=re?void 0:function(){return o.selectOption(ie)},Ee="".concat(o.getElementId("option"),"-").concat(J),ue={id:Ee,onClick:Te,onMouseMove:we,onMouseOver:we,tabIndex:-1,role:"option","aria-selected":o.isAppleDevice?void 0:de};return w.createElement(x,Dr({},v,{innerProps:ue,data:ie,isDisabled:re,isSelected:de,key:Ee,label:oe,type:ce,value:be,isFocused:q,innerRef:q?o.getFocusedOptionRef:void 0}),o.formatOptionLabel(W.data,"menu"))};if(this.hasOptions())X=this.getCategorizedOptions().map(function(W){if(W.type==="group"){var J=W.data,ce=W.options,ie=W.index,re="".concat(o.getElementId("group"),"-").concat(ie),de="".concat(re,"-heading");return w.createElement(c,Dr({},v,{key:re,data:J,options:ce,Heading:d,headingProps:{id:de,data:W.data},label:o.formatGroupLabel(W.data)}),W.options.map(function(oe){return Z(oe,"".concat(ie,"-").concat(oe.index))}))}if(W.type==="option")return Z(W,"".concat(W.index))});else if(_){var U=I({inputValue:B});if(U===null)return null;X=w.createElement(m,v,U)}else{var Y=K({inputValue:B});if(Y===null)return null;X=w.createElement(g,v,Y)}var P={minMenuHeight:j,maxMenuHeight:k,menuPlacement:L,menuPosition:F,menuShouldScrollIntoView:H},D=w.createElement(Oht,Dr({},v,P),function(W){var J=W.ref,ce=W.placerProps,ie=ce.placement,re=ce.maxHeight;return w.createElement(u,Dr({},v,P,{innerRef:J,innerProps:{onMouseDown:o.onMenuMouseDown,onMouseMove:o.onMenuMouseMove},isLoading:_,placement:ie}),w.createElement(l0t,{captureEnabled:E,onTopArrive:Q,onBottomArrive:G,lockEnabled:M},function(de){return w.createElement(f,Dr({},v,{innerRef:function(oe){o.getMenuListRef(oe),de(oe)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:o.getElementId("listbox")},isLoading:_,maxHeight:re,focusedOption:y}),X)}))});return S||F==="fixed"?w.createElement(A,Dr({},v,{appendTo:S,controlElement:this.controlRef,menuPlacement:L,menuPosition:F}),D):D}},{key:"renderFormField",value:function(){var o=this,l=this.props,c=l.delimiter,d=l.isDisabled,u=l.isMulti,f=l.name,A=l.required,m=this.state.selectValue;if(A&&!this.hasValue()&&!d)return w.createElement(d0t,{name:f,onFocus:this.onValueInputFocus});if(f&&!d){if(u){if(c){var g=m.map(function(y){return o.getOptionValue(y)}).join(c);return w.createElement("input",{name:f,type:"hidden",value:g})}var x=m.length>0?m.map(function(y,N){return w.createElement("input",{key:"i-".concat(N),name:f,type:"hidden",value:o.getOptionValue(y)})}):w.createElement("input",{name:f,type:"hidden",value:""});return w.createElement("div",null,x)}var v=m[0]?this.getOptionValue(m[0]):"";return w.createElement("input",{name:f,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var o=this.commonProps,l=this.state,c=l.ariaSelection,d=l.focusedOption,u=l.focusedValue,f=l.isFocused,A=l.selectValue,m=this.getFocusableOptions();return w.createElement(e0t,Dr({},o,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:d,focusedValue:u,isFocused:f,selectValue:A,focusableOptions:m,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var o=this.getComponents(),l=o.Control,c=o.IndicatorsContainer,d=o.SelectContainer,u=o.ValueContainer,f=this.props,A=f.className,m=f.id,g=f.isDisabled,x=f.menuIsOpen,v=this.state.isFocused,y=this.commonProps=this.getCommonProps();return w.createElement(d,Dr({},y,{className:A,innerProps:{id:m,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:v}),this.renderLiveRegion(),w.createElement(l,Dr({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:v,menuIsOpen:x}),w.createElement(u,Dr({},y,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),w.createElement(c,Dr({},y,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],a=[{key:"getDerivedStateFromProps",value:function(o,l){var c=l.prevProps,d=l.clearFocusValueOnUpdate,u=l.inputIsHiddenAfterUpdate,f=l.ariaSelection,A=l.isFocused,m=l.prevWasFocused,g=l.instancePrefix,x=o.options,v=o.value,y=o.menuIsOpen,N=o.inputValue,E=o.isMulti,B=kJ(v),_={};if(c&&(v!==c.value||x!==c.options||y!==c.menuIsOpen||N!==c.inputValue)){var I=y?function(M,H){return VJ(qj(M,H))}(o,B):[],j=y?GJ(qj(o,B),"".concat(g,"-option")):[],k=d?function(M,H){var K=M.focusedValue,Q=M.selectValue.indexOf(K);if(Q>-1){if(H.indexOf(K)>-1)return K;if(Q<H.length)return H[Q]}return null}(l,B):null,T=function(M,H){var K=M.focusedOption;return K&&H.indexOf(K)>-1?K:H[0]}(l,I);_={selectValue:B,focusedOption:T,focusedOptionId:FO(j,T),focusableOptionsWithIds:j,focusedValue:k,clearFocusValueOnUpdate:!1}}var L=u!=null&&o!==c?{inputIsHidden:u,inputIsHiddenAfterUpdate:void 0}:{},F=f,S=A&&m;return A&&!S&&(F={value:Gj(E,B,B[0]||null),options:B,action:"initial-input-focus"},S=!m),(f==null?void 0:f.action)==="initial-input-focus"&&(F=null),Er(Er(Er({},_),L),{},{prevProps:o,ariaSelection:F,prevWasFocused:S})}}],r&&lJ(t.prototype,r),a&&lJ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),i}();cAe.defaultProps=A0t;var p0t=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],g0t=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],GU=fn(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),x0t=fn(function(e){var t=GU.default;e.exports=function(r,a){if(t(r)!=="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,a||"default");if(t(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),dAe=fn(function(e){var t=GU.default;e.exports=function(r){var a=x0t(r,"string");return t(a)==="symbol"?a:String(a)},e.exports.__esModule=!0,e.exports.default=e.exports}),v0t=fn(function(e){e.exports=function(t,r,a){return(r=dAe(r))in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t},e.exports.__esModule=!0,e.exports.default=e.exports});fn(function(e){function t(r,a){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);a&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,i)}return n}e.exports=function(r){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?t(Object(n),!0).forEach(function(i){v0t(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),fn(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),fn(function(e){function t(r,a){for(var n=0;n<a.length;n++){var i=a[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,dAe(i.key),i)}}e.exports=function(r,a,n){return a&&t(r.prototype,a),n&&t(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var b0t=fn(function(e){function t(r,a){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});fn(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&b0t(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var KJ=fn(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),y0t=fn(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),w0t=fn(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),N0t=fn(function(e){var t=GU.default;e.exports=function(r,a){if(a&&(t(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w0t(r)},e.exports.__esModule=!0,e.exports.default=e.exports});fn(function(e){e.exports=function(t){var r=y0t();return function(){var a,n=KJ(t);if(r){var i=KJ(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return N0t(this,a)}},e.exports.__esModule=!0,e.exports.default=e.exports});var nR=fn(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n},e.exports.__esModule=!0,e.exports.default=e.exports}),E0t=fn(function(e){e.exports=function(t){if(Array.isArray(t))return nR(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),C0t=fn(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),uAe=fn(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return nR(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set"?Array.from(t):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?nR(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),j0t=fn(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});fn(function(e){e.exports=function(t){return E0t(t)||C0t(t)||uAe(t)||j0t()},e.exports.__esModule=!0,e.exports.default=e.exports});var k0t=fn(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),S0t=fn(function(e){e.exports=function(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var n,i,o,l,c=[],d=!0,u=!1;try{if(o=(a=a.call(t)).next,r===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(n=o.call(a)).done)&&(c.push(n.value),c.length!==r);d=!0);}catch(f){u=!0,i=f}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw i}}return c}},e.exports.__esModule=!0,e.exports.default=e.exports}),_0t=fn(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});fn(function(e){e.exports=function(t,r){return k0t(t)||S0t(t,r)||uAe(t,r)||_0t()},e.exports.__esModule=!0,e.exports.default=e.exports});var T0t=fn(function(e){e.exports=function(t,r){if(t==null)return{};var a,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)a=o[n],r.indexOf(a)>=0||(i[a]=t[a]);return i},e.exports.__esModule=!0,e.exports.default=e.exports});fn(function(e){e.exports=function(t,r){if(t==null)return{};var a,n,i=T0t(t,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)a=o[n],r.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i},e.exports.__esModule=!0,e.exports.default=e.exports}),fn(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var B0t=w.forwardRef(function(e,t){var r=function(n){var i=n.defaultOptions,o=i!==void 0&&i,l=n.cacheOptions,c=l!==void 0&&l,d=n.loadOptions;n.options;var u=n.isLoading,f=u!==void 0&&u,A=n.onInputChange,m=n.filterOption,g=m===void 0?null:m,x=xh(n,g0t),v=x.inputValue,y=w.useRef(void 0),N=w.useRef(!1),E=ao(w.useState(Array.isArray(o)?o:void 0),2),B=E[0],_=E[1],I=ao(w.useState(v!==void 0?v:""),2),j=I[0],k=I[1],T=ao(w.useState(o===!0),2),L=T[0],F=T[1],S=ao(w.useState(void 0),2),M=S[0],H=S[1],K=ao(w.useState([]),2),Q=K[0],G=K[1],X=ao(w.useState(!1),2),Z=X[0],U=X[1],Y=ao(w.useState({}),2),P=Y[0],D=Y[1],W=ao(w.useState(void 0),2),J=W[0],ce=W[1],ie=ao(w.useState(void 0),2),re=ie[0],de=ie[1];c!==re&&(D({}),de(c)),o!==J&&(_(Array.isArray(o)?o:void 0),ce(o)),w.useEffect(function(){return N.current=!0,function(){N.current=!1}},[]);var oe=w.useCallback(function(we,Te){if(!d)return Te();var Ee=d(we,Te);Ee&&typeof Ee.then=="function"&&Ee.then(Te,function(){return Te()})},[d]);w.useEffect(function(){o===!0&&oe(j,function(we){N.current&&(_(we||[]),F(!!y.current))})},[]);var be=w.useCallback(function(we,Te){var Ee=function(ge,he,ve){if(ve){var le=ve(ge,he);if(typeof le=="string")return le}return ge}(we,Te,A);if(!Ee)return y.current=void 0,k(""),H(""),G([]),F(!1),void U(!1);if(c&&P[Ee])k(Ee),H(Ee),G(P[Ee]),F(!1),U(!1);else{var ue=y.current={};k(Ee),F(!0),U(!M),oe(Ee,function(ge){N&&ue===y.current&&(y.current=void 0,F(!1),H(Ee),G(ge||[]),U(!1),D(ge?Er(Er({},P),{},fb({},Ee,ge)):P))})}},[c,oe,M,P,A]),q=Z?[]:j&&M?Q:B||[];return Er(Er({},x),{},{options:q,isLoading:L||f,onInputChange:be,filterOption:g})}(e),a=function(n){var i=n.defaultInputValue,o=i===void 0?"":i,l=n.defaultMenuIsOpen,c=l!==void 0&&l,d=n.defaultValue,u=d===void 0?null:d,f=n.inputValue,A=n.menuIsOpen,m=n.onChange,g=n.onInputChange,x=n.onMenuClose,v=n.onMenuOpen,y=n.value,N=xh(n,p0t),E=ao(w.useState(f!==void 0?f:o),2),B=E[0],_=E[1],I=ao(w.useState(A!==void 0?A:c),2),j=I[0],k=I[1],T=ao(w.useState(y!==void 0?y:u),2),L=T[0],F=T[1],S=w.useCallback(function(Z,U){typeof m=="function"&&m(Z,U),F(Z)},[m]),M=w.useCallback(function(Z,U){var Y;typeof g=="function"&&(Y=g(Z,U)),_(Y!==void 0?Y:Z)},[g]),H=w.useCallback(function(){typeof v=="function"&&v(),k(!0)},[v]),K=w.useCallback(function(){typeof x=="function"&&x(),k(!1)},[x]),Q=f!==void 0?f:B,G=A!==void 0?A:j,X=y!==void 0?y:L;return Er(Er({},N),{},{inputValue:Q,menuIsOpen:G,onChange:S,onInputChange:M,onMenuClose:K,onMenuOpen:H,value:X})}(r);return w.createElement(cAe,Dr({ref:t},a))}),I0t=B0t,O0t=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var a,n,i;if(Array.isArray(t)){if((a=t.length)!=r.length)return!1;for(n=a;n--!=0;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((a=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=a;n--!=0;)if(!Object.prototype.hasOwnProperty.call(r,i[n]))return!1;for(n=a;n--!=0;){var o=i[n];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r},hb;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(hb||(hb={}));class yg{constructor({apiKey:t,authReferrerPolicy:r,channel:a,client:n,id:i="__googleMapsScriptId",language:o,libraries:l=[],mapIds:c,nonce:d,region:u,retries:f=3,url:A="https://maps.googleapis.com/maps/api/js",version:m}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=a,this.client=n,this.id=i||"__googleMapsScriptId",this.language=o,this.libraries=l,this.mapIds=c,this.nonce=d,this.region=u,this.retries=f,this.url=A,this.version=m,yg.instance){if(!O0t(this.options,yg.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(yg.instance.options)}`);return yg.instance}yg.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?hb.FAILURE:this.done?hb.SUCCESS:this.loading?hb.LOADING:hb.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(a=>{a?r(a.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var D0t=function(e,t,r){var a,n=e.bounds,i=e.location,o=function(c,d){var u={};for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&d.indexOf(f)<0&&(u[f]=c[f]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var A=0;for(f=Object.getOwnPropertySymbols(c);A<f.length;A++)d.indexOf(f[A])<0&&Object.prototype.propertyIsEnumerable.call(c,f[A])&&(u[f[A]]=c[f[A]])}return u}(e,["bounds","location"]),l=Kg({input:t},o);return r&&(l.sessionToken=r),n&&(l.bounds=new((a=google.maps.LatLngBounds).bind.apply(a,function(){for(var c=0,d=0,u=arguments.length;d<u;d++)c+=arguments[d].length;var f=Array(c),A=0;for(d=0;d<u;d++)for(var m=arguments[d],g=0,x=m.length;g<x;g++,A++)f[A]=m[g];return f}([void 0],n)))),i&&(l.location=new google.maps.LatLng(i)),l},F0t=function(e){var t=e.autocompletionRequest,r=e.debounce,a=e.minLengthAutocomplete,n=e.placesService,i=e.sessionToken,o=e.withSessionToken,l=function(c,d,u){u===void 0&&(u={});var f=u.maxWait,A=w.useRef(null),m=w.useRef([]),g=u.leading,x=u.trailing===void 0||u.trailing,v=w.useRef(!1),y=w.useRef(null),N=w.useRef(!1),E=w.useRef(c);E.current=c;var B=w.useCallback(function(){clearTimeout(y.current),clearTimeout(A.current),A.current=null,m.current=[],y.current=null,v.current=!1},[]);w.useEffect(function(){return N.current=!1,function(){N.current=!0}},[]);var _=w.useCallback(function(){for(var j=[],k=0;k<arguments.length;k++)j[k]=arguments[k];m.current=j,clearTimeout(y.current),v.current&&(v.current=!1),y.current||!g||v.current||(E.current.apply(E,j),v.current=!0),y.current=setTimeout(function(){var T=!0;g&&v.current&&(T=!1),B(),!N.current&&x&&T&&E.current.apply(E,j)},d),f&&!A.current&&x&&(A.current=setTimeout(function(){var T=m.current;B(),N.current||E.current.apply(null,T)},f))},[f,d,B,g,x]),I=w.useCallback(function(){y.current&&(E.current.apply(null,m.current),B())},[B]);return[_,B,I]}(function(c,d){if(!n)return d([]);if(c.length<a)return d([]);var u=Kg({},t);n.getPlacePredictions(D0t(u,c,o&&i),function(f){d((f||[]).map(function(A){return{label:A.description,value:A}}))})},r)[0];return l},WJ=w.forwardRef(function(e,t){var r,a,n,i,o,l,c,d,u=function(x){var v=x.apiKey,y=x.apiOptions,N=x.onLoadFailed,E=w.useState(void 0),B=E[0],_=E[1],I=w.useState(void 0),j=I[0],k=I[1],T=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");_(new window.google.maps.places.AutocompleteService),k(new google.maps.places.AutocompleteSessionToken)};return w.useEffect(function(){v?Mft(void 0,void 0,void 0,function(){var L;return Uft(this,function(F){switch(F.label){case 0:if(!v)return[2];F.label=1;case 1:return F.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new yg(Kg({apiKey:v},Kg({libraries:["places"]},y))).load()];case 2:F.sent(),F.label=3;case 3:return T(),[3,5];case 4:return L=F.sent(),typeof N=="function"&&N(L),[3,5];case 5:return[2]}})}):T()},[]),{placesService:B,sessionToken:j,setSessionToken:k}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(a=e.apiOptions)!==null&&a!==void 0?a:{},onLoadFailed:(n=e.onLoadFailed)!==null&&n!==void 0?n:console.error}),f=u.placesService,A=u.sessionToken,m=u.setSessionToken,g=F0t({autocompletionRequest:(i=e.autocompletionRequest)!==null&&i!==void 0?i:{},debounce:(o=e.debounce)!==null&&o!==void 0?o:300,minLengthAutocomplete:(l=e.minLengthAutocomplete)!==null&&l!==void 0?l:0,placesService:f,sessionToken:A,withSessionToken:(c=e.withSessionToken)!==null&&c!==void 0&&c});return w.useImperativeHandle(t,function(){return{getSessionToken:function(){return A},refreshSessionToken:function(){m(new google.maps.places.AutocompleteSessionToken)}}},[A]),ft.createElement(I0t,Kg({},(d=e.selectProps)!==null&&d!==void 0?d:{},{loadOptions:g,getOptionValue:function(x){return x.value.place_id}}))});/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var sR=function(e,t){return sR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(r[n]=a[n])},sR(e,t)};function Cf(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");sR(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var iR=function(){return iR=Object.assign||function(t){for(var r,a=1,n=arguments.length;a<n;a++){r=arguments[a];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},iR.apply(this,arguments)};function Rl(e,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(f){o(f)}}function c(u){try{d(a.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(e,[])).next())})}function sl(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},a,n,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,n=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(u){d=[6,u],n=0}finally{a=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Kj(e,t,r){if(arguments.length===2)for(var a=0,n=t.length,i;a<n;a++)(i||!(a in t))&&(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||t)}var AA=function(){function e(t,r,a,n){this.left=t,this.top=r,this.width=a,this.height=n}return e.prototype.add=function(t,r,a,n){return new e(this.left+t,this.top+r,this.width+a,this.height+n)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var a=Array.from(r).find(function(n){return n.width!==0});return a?new e(a.left+t.windowBounds.left,a.top+t.windowBounds.top,a.width,a.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),z3=function(e,t){return AA.fromClientRect(e,t.getBoundingClientRect())},P0t=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var a=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),n=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new AA(0,0,a,n)},$3=function(e){for(var t=[],r=0,a=e.length;r<a;){var n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<a){var i=e.charCodeAt(r++);(i&64512)===56320?t.push(((n&1023)<<10)+(i&1023)+65536):(t.push(n),r--)}else t.push(n)}return t},ei=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var a=[],n=-1,i="";++n<r;){var o=e[n];o<=65535?a.push(o):(o-=65536,a.push((o>>10)+55296,o%1024+56320)),(n+1===r||a.length>16384)&&(i+=String.fromCharCode.apply(String,a),a.length=0)}return i},XJ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R0t=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Wj=0;Wj<XJ.length;Wj++)R0t[XJ.charCodeAt(Wj)]=Wj;var YJ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Jw=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Xj=0;Xj<YJ.length;Xj++)Jw[YJ.charCodeAt(Xj)]=Xj;var L0t=function(e){var t=e.length*.75,r=e.length,a,n=0,i,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),u=Array.isArray(d)?d:new Uint8Array(d);for(a=0;a<r;a+=4)i=Jw[e.charCodeAt(a)],o=Jw[e.charCodeAt(a+1)],l=Jw[e.charCodeAt(a+2)],c=Jw[e.charCodeAt(a+3)],u[n++]=i<<2|o>>4,u[n++]=(o&15)<<4|l>>2,u[n++]=(l&3)<<6|c&63;return d},M0t=function(e){for(var t=e.length,r=[],a=0;a<t;a+=2)r.push(e[a+1]<<8|e[a]);return r},U0t=function(e){for(var t=e.length,r=[],a=0;a<t;a+=4)r.push(e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a]);return r},Yg=5,qU=11,PO=2,H0t=qU-Yg,fAe=65536>>Yg,Q0t=1<<Yg,RO=Q0t-1,z0t=1024>>Yg,$0t=fAe+z0t,V0t=$0t,G0t=32,q0t=V0t+G0t,K0t=65536>>qU,W0t=1<<H0t,X0t=W0t-1,JJ=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},Y0t=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},J0t=function(e,t){var r=L0t(e),a=Array.isArray(r)?U0t(r):new Uint32Array(r),n=Array.isArray(r)?M0t(r):new Uint16Array(r),i=24,o=JJ(n,i/2,a[4]/2),l=a[5]===2?JJ(n,(i+a[4])/2):Y0t(a,Math.ceil((i+a[4])/4));return new Z0t(a[0],a[1],a[2],a[3],o,l)},Z0t=function(){function e(t,r,a,n,i,o){this.initialValue=t,this.errorValue=r,this.highStart=a,this.highValueIndex=n,this.index=i,this.data=o}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Yg],r=(r<<PO)+(t&RO),this.data[r];if(t<=65535)return r=this.index[fAe+(t-55296>>Yg)],r=(r<<PO)+(t&RO),this.data[r];if(t<this.highStart)return r=q0t-K0t+(t>>qU),r=this.index[r],r+=t>>Yg&X0t,r=this.index[r],r=(r<<PO)+(t&RO),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),ZJ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",eAt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Yj=0;Yj<ZJ.length;Yj++)eAt[ZJ.charCodeAt(Yj)]=Yj;var tAt="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",eZ=50,rAt=1,hAe=2,AAe=3,aAt=4,nAt=5,tZ=7,mAe=8,rZ=9,Pm=10,oR=11,aZ=12,lR=13,sAt=14,Zw=15,cR=16,Jj=17,Ew=18,iAt=19,nZ=20,dR=21,Cw=22,LO=23,Pv=24,ed=25,e2=26,t2=27,Rv=28,oAt=29,wg=30,lAt=31,Zj=32,ek=33,uR=34,fR=35,hR=36,PN=37,AR=38,n5=39,s5=40,MO=41,pAe=42,cAt=43,dAt=[9001,65288],gAe="!",wa="×",tk="÷",mR=J0t(tAt),N0=[wg,hR],pR=[rAt,hAe,AAe,nAt],xAe=[Pm,mAe],sZ=[t2,e2],uAt=pR.concat(xAe),iZ=[AR,n5,s5,uR,fR],fAt=[Zw,lR],hAt=function(e,t){t===void 0&&(t="strict");var r=[],a=[],n=[];return e.forEach(function(i,o){var l=mR.get(i);if(l>eZ?(n.push(!0),l-=eZ):n.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return a.push(o),r.push(cR);if(l===aAt||l===oR){if(o===0)return a.push(o),r.push(wg);var c=r[o-1];return uAt.indexOf(c)===-1?(a.push(a[o-1]),r.push(c)):(a.push(o),r.push(wg))}if(a.push(o),l===lAt)return r.push(t==="strict"?dR:PN);if(l===pAe||l===oAt)return r.push(wg);if(l===cAt)return i>=131072&&i<=196605||i>=196608&&i<=262141?r.push(PN):r.push(wg);r.push(l)}),[a,r,n]},UO=function(e,t,r,a){var n=a[r];if(Array.isArray(e)?e.indexOf(n)!==-1:e===n)for(var i=r;i<=a.length;){i++;var o=a[i];if(o===t)return!0;if(o!==Pm)break}if(n===Pm)for(var i=r;i>0;){i--;var l=a[i];if(Array.isArray(e)?e.indexOf(l)!==-1:e===l)for(var c=r;c<=a.length;){c++;var o=a[c];if(o===t)return!0;if(o!==Pm)break}if(l!==Pm)break}return!1},oZ=function(e,t){for(var r=e;r>=0;){var a=t[r];if(a===Pm)r--;else return a}return 0},AAt=function(e,t,r,a,n){if(r[a]===0)return wa;var i=a-1;if(Array.isArray(n)&&n[i]===!0)return wa;var o=i-1,l=i+1,c=t[i],d=o>=0?t[o]:0,u=t[l];if(c===hAe&&u===AAe)return wa;if(pR.indexOf(c)!==-1)return gAe;if(pR.indexOf(u)!==-1||xAe.indexOf(u)!==-1)return wa;if(oZ(i,t)===mAe)return tk;if(mR.get(e[i])===oR||(c===Zj||c===ek)&&mR.get(e[l])===oR||c===tZ||u===tZ||c===rZ||[Pm,lR,Zw].indexOf(c)===-1&&u===rZ||[Jj,Ew,iAt,Pv,Rv].indexOf(u)!==-1||oZ(i,t)===Cw||UO(LO,Cw,i,t)||UO([Jj,Ew],dR,i,t)||UO(aZ,aZ,i,t))return wa;if(c===Pm)return tk;if(c===LO||u===LO)return wa;if(u===cR||c===cR)return tk;if([lR,Zw,dR].indexOf(u)!==-1||c===sAt||d===hR&&fAt.indexOf(c)!==-1||c===Rv&&u===hR||u===nZ||N0.indexOf(u)!==-1&&c===ed||N0.indexOf(c)!==-1&&u===ed||c===t2&&[PN,Zj,ek].indexOf(u)!==-1||[PN,Zj,ek].indexOf(c)!==-1&&u===e2||N0.indexOf(c)!==-1&&sZ.indexOf(u)!==-1||sZ.indexOf(c)!==-1&&N0.indexOf(u)!==-1||[t2,e2].indexOf(c)!==-1&&(u===ed||[Cw,Zw].indexOf(u)!==-1&&t[l+1]===ed)||[Cw,Zw].indexOf(c)!==-1&&u===ed||c===ed&&[ed,Rv,Pv].indexOf(u)!==-1)return wa;if([ed,Rv,Pv,Jj,Ew].indexOf(u)!==-1)for(var f=i;f>=0;){var A=t[f];if(A===ed)return wa;if([Rv,Pv].indexOf(A)!==-1)f--;else break}if([t2,e2].indexOf(u)!==-1)for(var f=[Jj,Ew].indexOf(c)!==-1?o:i;f>=0;){var A=t[f];if(A===ed)return wa;if([Rv,Pv].indexOf(A)!==-1)f--;else break}if(AR===c&&[AR,n5,uR,fR].indexOf(u)!==-1||[n5,uR].indexOf(c)!==-1&&[n5,s5].indexOf(u)!==-1||[s5,fR].indexOf(c)!==-1&&u===s5||iZ.indexOf(c)!==-1&&[nZ,e2].indexOf(u)!==-1||iZ.indexOf(u)!==-1&&c===t2||N0.indexOf(c)!==-1&&N0.indexOf(u)!==-1||c===Pv&&N0.indexOf(u)!==-1||N0.concat(ed).indexOf(c)!==-1&&u===Cw&&dAt.indexOf(e[l])===-1||N0.concat(ed).indexOf(u)!==-1&&c===Ew)return wa;if(c===MO&&u===MO){for(var m=r[i],g=1;m>0&&(m--,t[m]===MO);)g++;if(g%2!==0)return wa}return c===Zj&&u===ek?wa:tk},mAt=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=hAt(e,t.lineBreak),a=r[0],n=r[1],i=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(n=n.map(function(l){return[ed,wg,pAe].indexOf(l)!==-1?PN:l}));var o=t.wordBreak==="keep-all"?i.map(function(l,c){return l&&e[c]>=19968&&e[c]<=40959}):void 0;return[a,n,o]},pAt=function(){function e(t,r,a,n){this.codePoints=t,this.required=r===gAe,this.start=a,this.end=n}return e.prototype.slice=function(){return ei.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),gAt=function(e,t){var r=$3(e),a=mAt(r,t),n=a[0],i=a[1],o=a[2],l=r.length,c=0,d=0;return{next:function(){if(d>=l)return{done:!0,value:null};for(var u=wa;d<l&&(u=AAt(r,i,n,++d,o))===wa;);if(u!==wa||d===l){var f=new pAt(r,u,c,d);return c=d,{value:f,done:!1}}return{done:!0,value:null}}}},xAt=1,vAt=2,PE=4,lZ=8,l_=10,cZ=47,O2=92,bAt=9,yAt=32,rk=34,jw=61,wAt=35,NAt=36,EAt=37,ak=39,nk=40,kw=41,CAt=95,gc=45,jAt=33,kAt=60,SAt=62,_At=64,TAt=91,BAt=93,IAt=61,OAt=123,sk=63,DAt=125,dZ=124,FAt=126,PAt=128,uZ=65533,HO=42,Ig=43,RAt=44,LAt=58,MAt=59,RN=46,UAt=0,HAt=8,QAt=11,zAt=14,$At=31,VAt=127,sh=-1,vAe=48,bAe=97,yAe=101,GAt=102,qAt=117,KAt=122,wAe=65,NAe=69,EAe=70,WAt=85,XAt=90,ul=function(e){return e>=vAe&&e<=57},YAt=function(e){return e>=55296&&e<=57343},Lv=function(e){return ul(e)||e>=wAe&&e<=EAe||e>=bAe&&e<=GAt},JAt=function(e){return e>=bAe&&e<=KAt},ZAt=function(e){return e>=wAe&&e<=XAt},emt=function(e){return JAt(e)||ZAt(e)},tmt=function(e){return e>=PAt},ik=function(e){return e===l_||e===bAt||e===yAt},c_=function(e){return emt(e)||tmt(e)||e===CAt},fZ=function(e){return c_(e)||ul(e)||e===gc},rmt=function(e){return e>=UAt&&e<=HAt||e===QAt||e>=zAt&&e<=$At||e===VAt},wm=function(e,t){return e!==O2?!1:t!==l_},ok=function(e,t,r){return e===gc?c_(t)||wm(t,r):c_(e)?!0:!!(e===O2&&wm(e,t))},QO=function(e,t,r){return e===Ig||e===gc?ul(t)?!0:t===RN&&ul(r):ul(e===RN?t:e)},amt=function(e){var t=0,r=1;(e[t]===Ig||e[t]===gc)&&(e[t]===gc&&(r=-1),t++);for(var a=[];ul(e[t]);)a.push(e[t++]);var n=a.length?parseInt(ei.apply(void 0,a),10):0;e[t]===RN&&t++;for(var i=[];ul(e[t]);)i.push(e[t++]);var o=i.length,l=o?parseInt(ei.apply(void 0,i),10):0;(e[t]===NAe||e[t]===yAe)&&t++;var c=1;(e[t]===Ig||e[t]===gc)&&(e[t]===gc&&(c=-1),t++);for(var d=[];ul(e[t]);)d.push(e[t++]);var u=d.length?parseInt(ei.apply(void 0,d),10):0;return r*(n+l*Math.pow(10,-o))*Math.pow(10,c*u)},nmt={type:2},smt={type:3},imt={type:4},omt={type:13},lmt={type:8},cmt={type:21},dmt={type:9},umt={type:10},fmt={type:11},hmt={type:12},Amt={type:14},lk={type:23},mmt={type:1},pmt={type:25},gmt={type:24},xmt={type:26},vmt={type:27},bmt={type:28},ymt={type:29},wmt={type:31},gR={type:32},CAe=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat($3(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==gR;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case rk:return this.consumeStringToken(rk);case wAt:var r=this.peekCodePoint(0),a=this.peekCodePoint(1),n=this.peekCodePoint(2);if(fZ(r)||wm(a,n)){var i=ok(r,a,n)?vAt:xAt,o=this.consumeName();return{type:5,value:o,flags:i}}break;case NAt:if(this.peekCodePoint(0)===jw)return this.consumeCodePoint(),omt;break;case ak:return this.consumeStringToken(ak);case nk:return nmt;case kw:return smt;case HO:if(this.peekCodePoint(0)===jw)return this.consumeCodePoint(),Amt;break;case Ig:if(QO(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case RAt:return imt;case gc:var l=t,c=this.peekCodePoint(0),d=this.peekCodePoint(1);if(QO(l,c,d))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(ok(l,c,d))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===gc&&d===SAt)return this.consumeCodePoint(),this.consumeCodePoint(),gmt;break;case RN:if(QO(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case cZ:if(this.peekCodePoint(0)===HO)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===HO&&(u=this.consumeCodePoint(),u===cZ))return this.consumeToken();if(u===sh)return this.consumeToken()}break;case LAt:return xmt;case MAt:return vmt;case kAt:if(this.peekCodePoint(0)===jAt&&this.peekCodePoint(1)===gc&&this.peekCodePoint(2)===gc)return this.consumeCodePoint(),this.consumeCodePoint(),pmt;break;case _At:var f=this.peekCodePoint(0),A=this.peekCodePoint(1),m=this.peekCodePoint(2);if(ok(f,A,m)){var o=this.consumeName();return{type:7,value:o}}break;case TAt:return bmt;case O2:if(wm(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case BAt:return ymt;case IAt:if(this.peekCodePoint(0)===jw)return this.consumeCodePoint(),lmt;break;case OAt:return fmt;case DAt:return hmt;case qAt:case WAt:var g=this.peekCodePoint(0),x=this.peekCodePoint(1);return g===Ig&&(Lv(x)||x===sk)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case dZ:if(this.peekCodePoint(0)===jw)return this.consumeCodePoint(),dmt;if(this.peekCodePoint(0)===dZ)return this.consumeCodePoint(),cmt;break;case FAt:if(this.peekCodePoint(0)===jw)return this.consumeCodePoint(),umt;break;case sh:return gR}return ik(t)?(this.consumeWhiteSpace(),wmt):ul(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):c_(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:ei(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();Lv(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var a=!1;r===sk&&t.length<6;)t.push(r),r=this.consumeCodePoint(),a=!0;if(a){var n=parseInt(ei.apply(void 0,t.map(function(c){return c===sk?vAe:c})),16),i=parseInt(ei.apply(void 0,t.map(function(c){return c===sk?EAe:c})),16);return{type:30,start:n,end:i}}var o=parseInt(ei.apply(void 0,t),16);if(this.peekCodePoint(0)===gc&&Lv(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];Lv(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var i=parseInt(ei.apply(void 0,l),16);return{type:30,start:o,end:i}}else return{type:30,start:o,end:o}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===nk?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===nk?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===sh)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===ak||r===rk){var a=this.consumeStringToken(this.consumeCodePoint());return a.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===sh||this.peekCodePoint(0)===kw)?(this.consumeCodePoint(),{type:22,value:a.value}):(this.consumeBadUrlRemnants(),lk)}for(;;){var n=this.consumeCodePoint();if(n===sh||n===kw)return{type:22,value:ei.apply(void 0,t)};if(ik(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===sh||this.peekCodePoint(0)===kw?(this.consumeCodePoint(),{type:22,value:ei.apply(void 0,t)}):(this.consumeBadUrlRemnants(),lk);if(n===rk||n===ak||n===nk||rmt(n))return this.consumeBadUrlRemnants(),lk;if(n===O2)if(wm(n,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),lk;else t.push(n)}},e.prototype.consumeWhiteSpace=function(){for(;ik(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===kw||t===sh)return;wm(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,a="";t>0;){var n=Math.min(r,t);a+=ei.apply(void 0,this._value.splice(0,n)),t-=n}return this._value.shift(),a},e.prototype.consumeStringToken=function(t){var r="",a=0;do{var n=this._value[a];if(n===sh||n===void 0||n===t)return r+=this.consumeStringSlice(a),{type:0,value:r};if(n===l_)return this._value.splice(0,a),mmt;if(n===O2){var i=this._value[a+1];i!==sh&&i!==void 0&&(i===l_?(r+=this.consumeStringSlice(a),a=-1,this._value.shift()):wm(n,i)&&(r+=this.consumeStringSlice(a),r+=ei(this.consumeEscapedCodePoint()),a=-1))}a++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=PE,a=this.peekCodePoint(0);for((a===Ig||a===gc)&&t.push(this.consumeCodePoint());ul(this.peekCodePoint(0));)t.push(this.consumeCodePoint());a=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(a===RN&&ul(n))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=lZ;ul(this.peekCodePoint(0));)t.push(this.consumeCodePoint());a=this.peekCodePoint(0),n=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((a===NAe||a===yAe)&&((n===Ig||n===gc)&&ul(i)||ul(n)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=lZ;ul(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[amt(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],a=t[1],n=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);if(ok(n,i,o)){var l=this.consumeName();return{type:15,number:r,flags:a,unit:l}}return n===EAt?(this.consumeCodePoint(),{type:16,number:r,flags:a}):{type:17,number:r,flags:a}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Lv(t)){for(var r=ei(t);Lv(this.peekCodePoint(0))&&r.length<6;)r+=ei(this.consumeCodePoint());ik(this.peekCodePoint(0))&&this.consumeCodePoint();var a=parseInt(r,16);return a===0||YAt(a)||a>1114111?uZ:a}return t===sh?uZ:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(fZ(r))t+=ei(r);else if(wm(r,this.peekCodePoint(0)))t+=ei(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),jAe=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new CAe;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},a=this.consumeToken();;){if(a.type===32||Emt(a,t))return r;this.reconsumeToken(a),r.values.push(this.consumeComponentValue()),a=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var a=this.consumeToken();if(a.type===32||a.type===3)return r;this.reconsumeToken(a),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?gR:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),RE=function(e){return e.type===15},hy=function(e){return e.type===17},kn=function(e){return e.type===20},Nmt=function(e){return e.type===0},xR=function(e,t){return kn(e)&&e.value===t},kAe=function(e){return e.type!==31},j1=function(e){return e.type!==31&&e.type!==4},$h=function(e){var t=[],r=[];return e.forEach(function(a){if(a.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}a.type!==31&&r.push(a)}),r.length&&t.push(r),t},Emt=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},xp=function(e){return e.type===17||e.type===15},Ei=function(e){return e.type===16||xp(e)},SAe=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Po={type:17,number:0,flags:PE},KU={type:16,number:50,flags:PE},Rm={type:16,number:100,flags:PE},r2=function(e,t,r){var a=e[0],n=e[1];return[zn(a,t),zn(typeof n<"u"?n:a,r)]},zn=function(e,t){if(e.type===16)return e.number/100*t;if(RE(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},_Ae="deg",TAe="grad",BAe="rad",IAe="turn",V3={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case _Ae:return Math.PI*t.number/180;case TAe:return Math.PI/200*t.number;case BAe:return t.number;case IAe:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},OAe=function(e){return e.type===15&&(e.unit===_Ae||e.unit===TAe||e.unit===BAe||e.unit===IAe)},DAe=function(e){var t=e.filter(kn).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Po,Po];case"to top":case"bottom":return hu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Po,Rm];case"to right":case"left":return hu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Rm,Rm];case"to bottom":case"top":return hu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Rm,Po];case"to left":case"right":return hu(270)}return 0},hu=function(e){return Math.PI*e/180},Ym={name:"color",parse:function(e,t){if(t.type===18){var r=Cmt[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var a=t.value.substring(0,1),n=t.value.substring(1,2),i=t.value.substring(2,3);return Lm(parseInt(a+a,16),parseInt(n+n,16),parseInt(i+i,16),1)}if(t.value.length===4){var a=t.value.substring(0,1),n=t.value.substring(1,2),i=t.value.substring(2,3),o=t.value.substring(3,4);return Lm(parseInt(a+a,16),parseInt(n+n,16),parseInt(i+i,16),parseInt(o+o,16)/255)}if(t.value.length===6){var a=t.value.substring(0,2),n=t.value.substring(2,4),i=t.value.substring(4,6);return Lm(parseInt(a,16),parseInt(n,16),parseInt(i,16),1)}if(t.value.length===8){var a=t.value.substring(0,2),n=t.value.substring(2,4),i=t.value.substring(4,6),o=t.value.substring(6,8);return Lm(parseInt(a,16),parseInt(n,16),parseInt(i,16),parseInt(o,16)/255)}}if(t.type===20){var l=X0[t.value.toUpperCase()];if(typeof l<"u")return l}return X0.TRANSPARENT}},Jm=function(e){return(255&e)===0},ro=function(e){var t=255&e,r=255&e>>8,a=255&e>>16,n=255&e>>24;return t<255?"rgba("+n+","+a+","+r+","+t/255+")":"rgb("+n+","+a+","+r+")"},Lm=function(e,t,r,a){return(e<<24|t<<16|r<<8|Math.round(a*255)<<0)>>>0},hZ=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},AZ=function(e,t){var r=t.filter(j1);if(r.length===3){var a=r.map(hZ),n=a[0],i=a[1],o=a[2];return Lm(n,i,o,1)}if(r.length===4){var l=r.map(hZ),n=l[0],i=l[1],o=l[2],c=l[3];return Lm(n,i,o,c)}return 0};function zO(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var mZ=function(e,t){var r=t.filter(j1),a=r[0],n=r[1],i=r[2],o=r[3],l=(a.type===17?hu(a.number):V3.parse(e,a))/(Math.PI*2),c=Ei(n)?n.number/100:0,d=Ei(i)?i.number/100:0,u=typeof o<"u"&&Ei(o)?zn(o,1):1;if(c===0)return Lm(d*255,d*255,d*255,1);var f=d<=.5?d*(c+1):d+c-d*c,A=d*2-f,m=zO(A,f,l+1/3),g=zO(A,f,l),x=zO(A,f,l-1/3);return Lm(m*255,g*255,x*255,u)},Cmt={hsl:mZ,hsla:mZ,rgb:AZ,rgba:AZ},D2=function(e,t){return Ym.parse(e,jAe.create(t).parseComponentValue())},X0={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},jmt={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(kn(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},kmt={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},G3=function(e,t){var r=Ym.parse(e,t[0]),a=t[1];return a&&Ei(a)?{color:r,stop:a}:{color:r,stop:null}},pZ=function(e,t){var r=e[0],a=e[e.length-1];r.stop===null&&(r.stop=Po),a.stop===null&&(a.stop=Rm);for(var n=[],i=0,o=0;o<e.length;o++){var l=e[o].stop;if(l!==null){var c=zn(l,t);c>i?n.push(c):n.push(i),i=c}else n.push(null)}for(var d=null,o=0;o<n.length;o++){var u=n[o];if(u===null)d===null&&(d=o);else if(d!==null){for(var f=o-d,A=n[d-1],m=(u-A)/(f+1),g=1;g<=f;g++)n[d+g-1]=m*g;d=null}}return e.map(function(x,v){var y=x.color;return{color:y,stop:Math.max(Math.min(1,n[v]/t),0)}})},Smt=function(e,t,r){var a=t/2,n=r/2,i=zn(e[0],t)-a,o=n-zn(e[1],r);return(Math.atan2(o,i)+Math.PI*2)%(Math.PI*2)},_mt=function(e,t,r){var a=typeof e=="number"?e:Smt(e,t,r),n=Math.abs(t*Math.sin(a))+Math.abs(r*Math.cos(a)),i=t/2,o=r/2,l=n/2,c=Math.sin(a-Math.PI/2)*l,d=Math.cos(a-Math.PI/2)*l;return[n,i-d,i+d,o-c,o+c]},Ku=function(e,t){return Math.sqrt(e*e+t*t)},gZ=function(e,t,r,a,n){var i=[[0,0],[0,t],[e,0],[e,t]];return i.reduce(function(o,l){var c=l[0],d=l[1],u=Ku(r-c,a-d);return(n?u<o.optimumDistance:u>o.optimumDistance)?{optimumCorner:l,optimumDistance:u}:o},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},Tmt=function(e,t,r,a,n){var i=0,o=0;switch(e.size){case 0:e.shape===0?i=o=Math.min(Math.abs(t),Math.abs(t-a),Math.abs(r),Math.abs(r-n)):e.shape===1&&(i=Math.min(Math.abs(t),Math.abs(t-a)),o=Math.min(Math.abs(r),Math.abs(r-n)));break;case 2:if(e.shape===0)i=o=Math.min(Ku(t,r),Ku(t,r-n),Ku(t-a,r),Ku(t-a,r-n));else if(e.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-n))/Math.min(Math.abs(t),Math.abs(t-a)),c=gZ(a,n,t,r,!0),d=c[0],u=c[1];i=Ku(d-t,(u-r)/l),o=l*i}break;case 1:e.shape===0?i=o=Math.max(Math.abs(t),Math.abs(t-a),Math.abs(r),Math.abs(r-n)):e.shape===1&&(i=Math.max(Math.abs(t),Math.abs(t-a)),o=Math.max(Math.abs(r),Math.abs(r-n)));break;case 3:if(e.shape===0)i=o=Math.max(Ku(t,r),Ku(t,r-n),Ku(t-a,r),Ku(t-a,r-n));else if(e.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-n))/Math.max(Math.abs(t),Math.abs(t-a)),f=gZ(a,n,t,r,!1),d=f[0],u=f[1];i=Ku(d-t,(u-r)/l),o=l*i}break}return Array.isArray(e.size)&&(i=zn(e.size[0],a),o=e.size.length===2?zn(e.size[1],n):i),[i,o]},Bmt=function(e,t){var r=hu(180),a=[];return $h(t).forEach(function(n,i){if(i===0){var o=n[0];if(o.type===20&&o.value==="to"){r=DAe(n);return}else if(OAe(o)){r=V3.parse(e,o);return}}var l=G3(e,n);a.push(l)}),{angle:r,stops:a,type:1}},ck=function(e,t){var r=hu(180),a=[];return $h(t).forEach(function(n,i){if(i===0){var o=n[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=DAe(n);return}else if(OAe(o)){r=(V3.parse(e,o)+hu(270))%hu(360);return}}var l=G3(e,n);a.push(l)}),{angle:r,stops:a,type:1}},Imt=function(e,t){var r=hu(180),a=[],n=1,i=0,o=3,l=[];return $h(t).forEach(function(c,d){var u=c[0];if(d===0){if(kn(u)&&u.value==="linear"){n=1;return}else if(kn(u)&&u.value==="radial"){n=2;return}}if(u.type===18){if(u.name==="from"){var f=Ym.parse(e,u.values[0]);a.push({stop:Po,color:f})}else if(u.name==="to"){var f=Ym.parse(e,u.values[0]);a.push({stop:Rm,color:f})}else if(u.name==="color-stop"){var A=u.values.filter(j1);if(A.length===2){var f=Ym.parse(e,A[1]),m=A[0];hy(m)&&a.push({stop:{type:16,number:m.number*100,flags:m.flags},color:f})}}}}),n===1?{angle:(r+hu(180))%hu(360),stops:a,type:n}:{size:o,shape:i,stops:a,position:l,type:n}},FAe="closest-side",PAe="farthest-side",RAe="closest-corner",LAe="farthest-corner",MAe="circle",UAe="ellipse",HAe="cover",QAe="contain",Omt=function(e,t){var r=0,a=3,n=[],i=[];return $h(t).forEach(function(o,l){var c=!0;if(l===0){var d=!1;c=o.reduce(function(f,A){if(d)if(kn(A))switch(A.value){case"center":return i.push(KU),f;case"top":case"left":return i.push(Po),f;case"right":case"bottom":return i.push(Rm),f}else(Ei(A)||xp(A))&&i.push(A);else if(kn(A))switch(A.value){case MAe:return r=0,!1;case UAe:return r=1,!1;case"at":return d=!0,!1;case FAe:return a=0,!1;case HAe:case PAe:return a=1,!1;case QAe:case RAe:return a=2,!1;case LAe:return a=3,!1}else if(xp(A)||Ei(A))return Array.isArray(a)||(a=[]),a.push(A),!1;return f},c)}if(c){var u=G3(e,o);n.push(u)}}),{size:a,shape:r,stops:n,position:i,type:2}},dk=function(e,t){var r=0,a=3,n=[],i=[];return $h(t).forEach(function(o,l){var c=!0;if(l===0?c=o.reduce(function(u,f){if(kn(f))switch(f.value){case"center":return i.push(KU),!1;case"top":case"left":return i.push(Po),!1;case"right":case"bottom":return i.push(Rm),!1}else if(Ei(f)||xp(f))return i.push(f),!1;return u},c):l===1&&(c=o.reduce(function(u,f){if(kn(f))switch(f.value){case MAe:return r=0,!1;case UAe:return r=1,!1;case QAe:case FAe:return a=0,!1;case PAe:return a=1,!1;case RAe:return a=2,!1;case HAe:case LAe:return a=3,!1}else if(xp(f)||Ei(f))return Array.isArray(a)||(a=[]),a.push(f),!1;return u},c)),c){var d=G3(e,o);n.push(d)}}),{size:a,shape:r,stops:n,position:i,type:2}},Dmt=function(e){return e.type===1},Fmt=function(e){return e.type===2},WU={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var a=zAe[t.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return a(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function Pmt(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!zAe[e.name])}var zAe={"linear-gradient":Bmt,"-moz-linear-gradient":ck,"-ms-linear-gradient":ck,"-o-linear-gradient":ck,"-webkit-linear-gradient":ck,"radial-gradient":Omt,"-moz-radial-gradient":dk,"-ms-radial-gradient":dk,"-o-radial-gradient":dk,"-webkit-radial-gradient":dk,"-webkit-gradient":Imt},Rmt={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(a){return j1(a)&&Pmt(a)}).map(function(a){return WU.parse(e,a)})}},Lmt={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(kn(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Mmt={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return $h(t).map(function(r){return r.filter(Ei)}).map(SAe)}},Umt={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return $h(t).map(function(r){return r.filter(kn).map(function(a){return a.value}).join(" ")}).map(Hmt)}},Hmt=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Hb;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Hb||(Hb={}));var Qmt={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return $h(t).map(function(r){return r.filter(zmt)})}},zmt=function(e){return kn(e)||Ei(e)},q3=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},$mt=q3("top"),Vmt=q3("right"),Gmt=q3("bottom"),qmt=q3("left"),K3=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return SAe(r.filter(Ei))}}},Kmt=K3("top-left"),Wmt=K3("top-right"),Xmt=K3("bottom-right"),Ymt=K3("bottom-left"),W3=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Jmt=W3("top"),Zmt=W3("right"),ept=W3("bottom"),tpt=W3("left"),X3=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return RE(r)?r.number:0}}},rpt=X3("top"),apt=X3("right"),npt=X3("bottom"),spt=X3("left"),ipt={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},opt={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},lpt={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(kn).reduce(function(r,a){return r|cpt(a.value)},0)}},cpt=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},dpt={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},upt={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},d_;(function(e){e.NORMAL="normal",e.STRICT="strict"})(d_||(d_={}));var fpt={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return d_.STRICT;case"normal":default:return d_.NORMAL}}},hpt={name:"line-height",initialValue:"normal",prefix:!1,type:4},xZ=function(e,t){return kn(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:Ei(e)?zn(e,t):t},Apt={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:WU.parse(e,t)}},mpt={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},vR={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Y3=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},ppt=Y3("top"),gpt=Y3("right"),xpt=Y3("bottom"),vpt=Y3("left"),bpt={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(kn).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},ypt={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},J3=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},wpt=J3("top"),Npt=J3("right"),Ept=J3("bottom"),Cpt=J3("left"),jpt={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},kpt={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Spt={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&xR(t[0],"none")?[]:$h(t).map(function(r){for(var a={color:X0.TRANSPARENT,offsetX:Po,offsetY:Po,blur:Po},n=0,i=0;i<r.length;i++){var o=r[i];xp(o)?(n===0?a.offsetX=o:n===1?a.offsetY=o:a.blur=o,n++):a.color=Ym.parse(e,o)}return a})}},_pt={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Tpt={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=Opt[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},Bpt=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},Ipt=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=t[0],a=t[1];t[2],t[3];var n=t[4],i=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var o=t[12],l=t[13];return t[14],t[15],t.length===16?[r,a,n,i,o,l]:null},Opt={matrix:Bpt,matrix3d:Ipt},vZ={type:16,number:50,flags:PE},Dpt=[vZ,vZ],Fpt={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(Ei);return r.length!==2?Dpt:[r[0],r[1]]}},Ppt={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},F2;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(F2||(F2={}));var Rpt={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return F2.BREAK_ALL;case"keep-all":return F2.KEEP_ALL;case"normal":default:return F2.NORMAL}}},Lpt={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(hy(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},$Ae={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},Mpt={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return hy(t)?t.number:1}},Upt={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Hpt={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(kn).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},Qpt={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],a=[];return t.forEach(function(n){switch(n.type){case 20:case 0:r.push(n.value);break;case 17:r.push(n.number.toString());break;case 4:a.push(r.join(" ")),r.length=0;break}}),r.length&&a.push(r.join(" ")),a.map(function(n){return n.indexOf(" ")===-1?n:"'"+n+"'"})}},zpt={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},$pt={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(hy(t))return t.number;if(kn(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},Vpt={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(kn).map(function(r){return r.value})}},Gpt={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Li=function(e,t){return(e&t)!==0},qpt={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},Kpt={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var a=[],n=t.filter(kAe),i=0;i<n.length;i++){var o=n[i],l=n[i+1];if(o.type===20){var c=l&&hy(l)?l.number:1;a.push({counter:o.value,increment:c})}}return a}},Wpt={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],a=t.filter(kAe),n=0;n<a.length;n++){var i=a[n],o=a[n+1];if(kn(i)&&i.value!=="none"){var l=o&&hy(o)?o.number:0;r.push({counter:i.value,reset:l})}}return r}},Xpt={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(RE).map(function(r){return $Ae.parse(e,r)})}},Ypt={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var a=[],n=t.filter(Nmt);if(n.length%2!==0)return null;for(var i=0;i<n.length;i+=2){var o=n[i].value,l=n[i+1].value;a.push({open:o,close:l})}return a}},bZ=function(e,t,r){if(!e)return"";var a=e[Math.min(t,e.length-1)];return a?r?a.open:a.close:""},Jpt={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&xR(t[0],"none")?[]:$h(t).map(function(r){for(var a={color:255,offsetX:Po,offsetY:Po,blur:Po,spread:Po,inset:!1},n=0,i=0;i<r.length;i++){var o=r[i];xR(o,"inset")?a.inset=!0:xp(o)?(n===0?a.offsetX=o:n===1?a.offsetY=o:n===2?a.blur=o:a.spread=o,n++):a.color=Ym.parse(e,o)}return a})}},Zpt={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],a=[];return t.filter(kn).forEach(function(n){switch(n.value){case"stroke":a.push(1);break;case"fill":a.push(0);break;case"markers":a.push(2);break}}),r.forEach(function(n){a.indexOf(n)===-1&&a.push(n)}),a}},egt={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},tgt={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return RE(t)?t.number:0}},rgt=function(){function e(t,r){var a,n;this.animationDuration=cr(t,Xpt,r.animationDuration),this.backgroundClip=cr(t,jmt,r.backgroundClip),this.backgroundColor=cr(t,kmt,r.backgroundColor),this.backgroundImage=cr(t,Rmt,r.backgroundImage),this.backgroundOrigin=cr(t,Lmt,r.backgroundOrigin),this.backgroundPosition=cr(t,Mmt,r.backgroundPosition),this.backgroundRepeat=cr(t,Umt,r.backgroundRepeat),this.backgroundSize=cr(t,Qmt,r.backgroundSize),this.borderTopColor=cr(t,$mt,r.borderTopColor),this.borderRightColor=cr(t,Vmt,r.borderRightColor),this.borderBottomColor=cr(t,Gmt,r.borderBottomColor),this.borderLeftColor=cr(t,qmt,r.borderLeftColor),this.borderTopLeftRadius=cr(t,Kmt,r.borderTopLeftRadius),this.borderTopRightRadius=cr(t,Wmt,r.borderTopRightRadius),this.borderBottomRightRadius=cr(t,Xmt,r.borderBottomRightRadius),this.borderBottomLeftRadius=cr(t,Ymt,r.borderBottomLeftRadius),this.borderTopStyle=cr(t,Jmt,r.borderTopStyle),this.borderRightStyle=cr(t,Zmt,r.borderRightStyle),this.borderBottomStyle=cr(t,ept,r.borderBottomStyle),this.borderLeftStyle=cr(t,tpt,r.borderLeftStyle),this.borderTopWidth=cr(t,rpt,r.borderTopWidth),this.borderRightWidth=cr(t,apt,r.borderRightWidth),this.borderBottomWidth=cr(t,npt,r.borderBottomWidth),this.borderLeftWidth=cr(t,spt,r.borderLeftWidth),this.boxShadow=cr(t,Jpt,r.boxShadow),this.color=cr(t,ipt,r.color),this.direction=cr(t,opt,r.direction),this.display=cr(t,lpt,r.display),this.float=cr(t,dpt,r.cssFloat),this.fontFamily=cr(t,Qpt,r.fontFamily),this.fontSize=cr(t,zpt,r.fontSize),this.fontStyle=cr(t,Gpt,r.fontStyle),this.fontVariant=cr(t,Vpt,r.fontVariant),this.fontWeight=cr(t,$pt,r.fontWeight),this.letterSpacing=cr(t,upt,r.letterSpacing),this.lineBreak=cr(t,fpt,r.lineBreak),this.lineHeight=cr(t,hpt,r.lineHeight),this.listStyleImage=cr(t,Apt,r.listStyleImage),this.listStylePosition=cr(t,mpt,r.listStylePosition),this.listStyleType=cr(t,vR,r.listStyleType),this.marginTop=cr(t,ppt,r.marginTop),this.marginRight=cr(t,gpt,r.marginRight),this.marginBottom=cr(t,xpt,r.marginBottom),this.marginLeft=cr(t,vpt,r.marginLeft),this.opacity=cr(t,Mpt,r.opacity);var i=cr(t,bpt,r.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=cr(t,ypt,r.overflowWrap),this.paddingTop=cr(t,wpt,r.paddingTop),this.paddingRight=cr(t,Npt,r.paddingRight),this.paddingBottom=cr(t,Ept,r.paddingBottom),this.paddingLeft=cr(t,Cpt,r.paddingLeft),this.paintOrder=cr(t,Zpt,r.paintOrder),this.position=cr(t,kpt,r.position),this.textAlign=cr(t,jpt,r.textAlign),this.textDecorationColor=cr(t,Upt,(a=r.textDecorationColor)!==null&&a!==void 0?a:r.color),this.textDecorationLine=cr(t,Hpt,(n=r.textDecorationLine)!==null&&n!==void 0?n:r.textDecoration),this.textShadow=cr(t,Spt,r.textShadow),this.textTransform=cr(t,_pt,r.textTransform),this.transform=cr(t,Tpt,r.transform),this.transformOrigin=cr(t,Fpt,r.transformOrigin),this.visibility=cr(t,Ppt,r.visibility),this.webkitTextStrokeColor=cr(t,egt,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=cr(t,tgt,r.webkitTextStrokeWidth),this.wordBreak=cr(t,Rpt,r.wordBreak),this.zIndex=cr(t,Lpt,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return Jm(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Li(this.display,4)||Li(this.display,33554432)||Li(this.display,268435456)||Li(this.display,536870912)||Li(this.display,67108864)||Li(this.display,134217728)},e}(),agt=function(){function e(t,r){this.content=cr(t,qpt,r.content),this.quotes=cr(t,Ypt,r.quotes)}return e}(),yZ=function(){function e(t,r){this.counterIncrement=cr(t,Kpt,r.counterIncrement),this.counterReset=cr(t,Wpt,r.counterReset)}return e}(),cr=function(e,t,r){var a=new CAe,n=r!==null&&typeof r<"u"?r.toString():t.initialValue;a.write(n);var i=new jAe(a.read());switch(t.type){case 2:var o=i.parseComponentValue();return t.parse(e,kn(o)?o.value:t.initialValue);case 0:return t.parse(e,i.parseComponentValue());case 1:return t.parse(e,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(t.format){case"angle":return V3.parse(e,i.parseComponentValue());case"color":return Ym.parse(e,i.parseComponentValue());case"image":return WU.parse(e,i.parseComponentValue());case"length":var l=i.parseComponentValue();return xp(l)?l:Po;case"length-percentage":var c=i.parseComponentValue();return Ei(c)?c:Po;case"time":return $Ae.parse(e,i.parseComponentValue())}break}},ngt="data-html2canvas-debug",sgt=function(e){var t=e.getAttribute(ngt);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},bR=function(e,t){var r=sgt(e);return r===1||t===r},Vh=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,bR(r,3))debugger;this.styles=new rgt(t,window.getComputedStyle(r,null)),NR(r)&&(this.styles.animationDuration.some(function(a){return a>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=z3(this.context,r),bR(r,4)&&(this.flags|=16)}return e}(),igt="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",wZ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var uk=0;uk<wZ.length;uk++)a2[wZ.charCodeAt(uk)]=uk;var ogt=function(e){var t=e.length*.75,r=e.length,a,n=0,i,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),u=Array.isArray(d)?d:new Uint8Array(d);for(a=0;a<r;a+=4)i=a2[e.charCodeAt(a)],o=a2[e.charCodeAt(a+1)],l=a2[e.charCodeAt(a+2)],c=a2[e.charCodeAt(a+3)],u[n++]=i<<2|o>>4,u[n++]=(o&15)<<4|l>>2,u[n++]=(l&3)<<6|c&63;return d},lgt=function(e){for(var t=e.length,r=[],a=0;a<t;a+=2)r.push(e[a+1]<<8|e[a]);return r},cgt=function(e){for(var t=e.length,r=[],a=0;a<t;a+=4)r.push(e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a]);return r},Jg=5,XU=11,$O=2,dgt=XU-Jg,VAe=65536>>Jg,ugt=1<<Jg,VO=ugt-1,fgt=1024>>Jg,hgt=VAe+fgt,Agt=hgt,mgt=32,pgt=Agt+mgt,ggt=65536>>XU,xgt=1<<dgt,vgt=xgt-1,NZ=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},bgt=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},ygt=function(e,t){var r=ogt(e),a=Array.isArray(r)?cgt(r):new Uint32Array(r),n=Array.isArray(r)?lgt(r):new Uint16Array(r),i=24,o=NZ(n,i/2,a[4]/2),l=a[5]===2?NZ(n,(i+a[4])/2):bgt(a,Math.ceil((i+a[4])/4));return new wgt(a[0],a[1],a[2],a[3],o,l)},wgt=function(){function e(t,r,a,n,i,o){this.initialValue=t,this.errorValue=r,this.highStart=a,this.highValueIndex=n,this.index=i,this.data=o}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Jg],r=(r<<$O)+(t&VO),this.data[r];if(t<=65535)return r=this.index[VAe+(t-55296>>Jg)],r=(r<<$O)+(t&VO),this.data[r];if(t<this.highStart)return r=pgt-ggt+(t>>XU),r=this.index[r],r+=t>>Jg&vgt,r=this.index[r],r=(r<<$O)+(t&VO),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),EZ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ngt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var fk=0;fk<EZ.length;fk++)Ngt[EZ.charCodeAt(fk)]=fk;var Egt=1,GO=2,qO=3,CZ=4,jZ=5,Cgt=7,kZ=8,KO=9,WO=10,SZ=11,_Z=12,TZ=13,BZ=14,XO=15,jgt=function(e){for(var t=[],r=0,a=e.length;r<a;){var n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<a){var i=e.charCodeAt(r++);(i&64512)===56320?t.push(((n&1023)<<10)+(i&1023)+65536):(t.push(n),r--)}else t.push(n)}return t},kgt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var a=[],n=-1,i="";++n<r;){var o=e[n];o<=65535?a.push(o):(o-=65536,a.push((o>>10)+55296,o%1024+56320)),(n+1===r||a.length>16384)&&(i+=String.fromCharCode.apply(String,a),a.length=0)}return i},Sgt=ygt(igt),au="×",YO="÷",_gt=function(e){return Sgt.get(e)},Tgt=function(e,t,r){var a=r-2,n=t[a],i=t[r-1],o=t[r];if(i===GO&&o===qO)return au;if(i===GO||i===qO||i===CZ||o===GO||o===qO||o===CZ)return YO;if(i===kZ&&[kZ,KO,SZ,_Z].indexOf(o)!==-1||(i===SZ||i===KO)&&(o===KO||o===WO)||(i===_Z||i===WO)&&o===WO||o===TZ||o===jZ||o===Cgt||i===Egt)return au;if(i===TZ&&o===BZ){for(;n===jZ;)n=t[--a];if(n===BZ)return au}if(i===XO&&o===XO){for(var l=0;n===XO;)l++,n=t[--a];if(l%2===0)return au}return YO},Bgt=function(e){var t=jgt(e),r=t.length,a=0,n=0,i=t.map(_gt);return{next:function(){if(a>=r)return{done:!0,value:null};for(var o=au;a<r&&(o=Tgt(t,i,++a))===au;);if(o!==au||a===r){var l=kgt.apply(null,t.slice(n,a));return n=a,{value:l,done:!1}}return{done:!0,value:null}}}},Igt=function(e){for(var t=Bgt(e),r=[],a;!(a=t.next()).done;)a.value&&r.push(a.value.slice());return r},Ogt=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var a=e.createElement("boundtest");a.style.height=t+"px",a.style.display="block",e.body.appendChild(a),r.selectNode(a);var n=r.getBoundingClientRect(),i=Math.round(n.height);if(e.body.removeChild(a),i===t)return!0}}return!1},Dgt=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var a=t.firstChild,n=$3(a.data).map(function(c){return ei(c)}),i=0,o={},l=n.every(function(c,d){r.setStart(a,i),r.setEnd(a,i+c.length);var u=r.getBoundingClientRect();i+=c.length;var f=u.x>o.x||u.y>o.y;return o=u,d===0?!0:f});return e.body.removeChild(t),l},Fgt=function(){return typeof new Image().crossOrigin<"u"},Pgt=function(){return typeof new XMLHttpRequest().responseType=="string"},Rgt=function(e){var t=new Image,r=e.createElement("canvas"),a=r.getContext("2d");if(!a)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{a.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},IZ=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},Lgt=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var a=t.getContext("2d");if(!a)return Promise.reject(!1);a.fillStyle="rgb(0, 255, 0)",a.fillRect(0,0,r,r);var n=new Image,i=t.toDataURL();n.src=i;var o=yR(r,r,0,0,n);return a.fillStyle="red",a.fillRect(0,0,r,r),OZ(o).then(function(l){a.drawImage(l,0,0);var c=a.getImageData(0,0,r,r).data;a.fillStyle="red",a.fillRect(0,0,r,r);var d=e.createElement("div");return d.style.backgroundImage="url("+i+")",d.style.height=r+"px",IZ(c)?OZ(yR(r,r,0,0,d)):Promise.reject(!1)}).then(function(l){return a.drawImage(l,0,0),IZ(a.getImageData(0,0,r,r).data)}).catch(function(){return!1})},yR=function(e,t,r,a,n){var i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),l=document.createElementNS(i,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",a.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(n),o},OZ=function(e){return new Promise(function(t,r){var a=new Image;a.onload=function(){return t(a)},a.onerror=r,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},To={get SUPPORT_RANGE_BOUNDS(){var e=Ogt(document);return Object.defineProperty(To,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=To.SUPPORT_RANGE_BOUNDS&&Dgt(document);return Object.defineProperty(To,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=Rgt(document);return Object.defineProperty(To,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?Lgt(document):Promise.resolve(!1);return Object.defineProperty(To,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=Fgt();return Object.defineProperty(To,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=Pgt();return Object.defineProperty(To,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(To,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(To,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},P2=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),Mgt=function(e,t,r,a){var n=Qgt(t,r),i=[],o=0;return n.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(To.SUPPORT_RANGE_BOUNDS){var c=DZ(a,o,l.length).getClientRects();if(c.length>1){var d=YU(l),u=0;d.forEach(function(A){i.push(new P2(A,AA.fromDOMRectList(e,DZ(a,u+o,A.length).getClientRects()))),u+=A.length})}else i.push(new P2(l,AA.fromDOMRectList(e,c)))}else{var f=a.splitText(l.length);i.push(new P2(l,Ugt(e,a))),a=f}else To.SUPPORT_RANGE_BOUNDS||(a=a.splitText(l.length));o+=l.length}),i},Ugt=function(e,t){var r=t.ownerDocument;if(r){var a=r.createElement("html2canvaswrapper");a.appendChild(t.cloneNode(!0));var n=t.parentNode;if(n){n.replaceChild(a,t);var i=z3(e,a);return a.firstChild&&n.replaceChild(a.firstChild,a),i}}return AA.EMPTY},DZ=function(e,t,r){var a=e.ownerDocument;if(!a)throw new Error("Node has no owner document");var n=a.createRange();return n.setStart(e,t),n.setEnd(e,t+r),n},YU=function(e){if(To.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return Igt(e)},Hgt=function(e,t){if(To.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(a){return a.segment})}return $gt(e,t)},Qgt=function(e,t){return t.letterSpacing!==0?YU(e):Hgt(e,t)},zgt=[32,160,4961,65792,65793,4153,4241],$gt=function(e,t){for(var r=gAt(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),a=[],n,i=function(){if(n.value){var o=n.value.slice(),l=$3(o),c="";l.forEach(function(d){zgt.indexOf(d)===-1?c+=ei(d):(c.length&&a.push(c),a.push(ei(d)),c="")}),c.length&&a.push(c)}};!(n=r.next()).done;)i();return a},Vgt=function(){function e(t,r,a){this.text=Ggt(r.data,a.textTransform),this.textBounds=Mgt(t,this.text,a,r)}return e}(),Ggt=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(qgt,Kgt);case 2:return e.toUpperCase();default:return e}},qgt=/(^|\s|:|-|\(|\))([a-z])/g,Kgt=function(e,t,r){return e.length>0?t+r.toUpperCase():e},GAe=function(e){Cf(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n.src=a.currentSrc||a.src,n.intrinsicWidth=a.naturalWidth,n.intrinsicHeight=a.naturalHeight,n.context.cache.addImage(n.src),n}return t}(Vh),qAe=function(e){Cf(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n.canvas=a,n.intrinsicWidth=a.width,n.intrinsicHeight=a.height,n}return t}(Vh),KAe=function(e){Cf(t,e);function t(r,a){var n=e.call(this,r,a)||this,i=new XMLSerializer,o=z3(r,a);return a.setAttribute("width",o.width+"px"),a.setAttribute("height",o.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(a)),n.intrinsicWidth=a.width.baseVal.value,n.intrinsicHeight=a.height.baseVal.value,n.context.cache.addImage(n.svg),n}return t}(Vh),WAe=function(e){Cf(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n.value=a.value,n}return t}(Vh),wR=function(e){Cf(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n.start=a.start,n.reversed=typeof a.reversed=="boolean"&&a.reversed===!0,n}return t}(Vh),Wgt=[{type:15,flags:0,unit:"px",number:3}],Xgt=[{type:16,flags:0,number:50}],Ygt=function(e){return e.width>e.height?new AA(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new AA(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},Jgt=function(e){var t=e.type===Zgt?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},u_="checkbox",f_="radio",Zgt="password",FZ=707406591,JU=function(e){Cf(t,e);function t(r,a){var n=e.call(this,r,a)||this;switch(n.type=a.type.toLowerCase(),n.checked=a.checked,n.value=Jgt(a),(n.type===u_||n.type===f_)&&(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=Ygt(n.bounds)),n.type){case u_:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=Wgt;break;case f_:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=Xgt;break}return n}return t}(Vh),XAe=function(e){Cf(t,e);function t(r,a){var n=e.call(this,r,a)||this,i=a.options[a.selectedIndex||0];return n.value=i&&i.text||"",n}return t}(Vh),YAe=function(e){Cf(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n.value=a.value,n}return t}(Vh),JAe=function(e){Cf(t,e);function t(r,a){var n=e.call(this,r,a)||this;n.src=a.src,n.width=parseInt(a.width,10)||0,n.height=parseInt(a.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(a.contentWindow&&a.contentWindow.document&&a.contentWindow.document.documentElement){n.tree=eme(r,a.contentWindow.document.documentElement);var i=a.contentWindow.document.documentElement?D2(r,getComputedStyle(a.contentWindow.document.documentElement).backgroundColor):X0.TRANSPARENT,o=a.contentWindow.document.body?D2(r,getComputedStyle(a.contentWindow.document.body).backgroundColor):X0.TRANSPARENT;n.backgroundColor=Jm(i)?Jm(o)?n.styles.backgroundColor:o:i}}catch{}return n}return t}(Vh),ext=["OL","UL","MENU"],i5=function(e,t,r,a){for(var n=t.firstChild,i=void 0;n;n=i)if(i=n.nextSibling,tme(n)&&n.data.trim().length>0)r.textNodes.push(new Vgt(e,n,r.styles));else if(Ab(n))if(sme(n)&&n.assignedNodes)n.assignedNodes().forEach(function(l){return i5(e,l,r,a)});else{var o=ZAe(e,n);o.styles.isVisible()&&(txt(n,o,a)?o.flags|=4:rxt(o.styles)&&(o.flags|=2),ext.indexOf(n.tagName)!==-1&&(o.flags|=8),r.elements.push(o),n.slot,n.shadowRoot?i5(e,n.shadowRoot,o,a):!h_(n)&&!rme(n)&&!A_(n)&&i5(e,n,o,a))}},ZAe=function(e,t){return ER(t)?new GAe(e,t):ame(t)?new qAe(e,t):rme(t)?new KAe(e,t):axt(t)?new WAe(e,t):nxt(t)?new wR(e,t):sxt(t)?new JU(e,t):A_(t)?new XAe(e,t):h_(t)?new YAe(e,t):nme(t)?new JAe(e,t):new Vh(e,t)},eme=function(e,t){var r=ZAe(e,t);return r.flags|=4,i5(e,t,r,r),r},txt=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||ZU(e)&&r.styles.isTransparent()},rxt=function(e){return e.isPositioned()||e.isFloating()},tme=function(e){return e.nodeType===Node.TEXT_NODE},Ab=function(e){return e.nodeType===Node.ELEMENT_NODE},NR=function(e){return Ab(e)&&typeof e.style<"u"&&!o5(e)},o5=function(e){return typeof e.className=="object"},axt=function(e){return e.tagName==="LI"},nxt=function(e){return e.tagName==="OL"},sxt=function(e){return e.tagName==="INPUT"},ixt=function(e){return e.tagName==="HTML"},rme=function(e){return e.tagName==="svg"},ZU=function(e){return e.tagName==="BODY"},ame=function(e){return e.tagName==="CANVAS"},PZ=function(e){return e.tagName==="VIDEO"},ER=function(e){return e.tagName==="IMG"},nme=function(e){return e.tagName==="IFRAME"},RZ=function(e){return e.tagName==="STYLE"},oxt=function(e){return e.tagName==="SCRIPT"},h_=function(e){return e.tagName==="TEXTAREA"},A_=function(e){return e.tagName==="SELECT"},sme=function(e){return e.tagName==="SLOT"},LZ=function(e){return e.tagName.indexOf("-")>0},lxt=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(a){return r.counters[a].pop()})},e.prototype.parse=function(t){var r=this,a=t.counterIncrement,n=t.counterReset,i=!0;a!==null&&a.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(i=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var o=[];return i&&n.forEach(function(l){var c=r.counters[l.counter];o.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),o},e}(),MZ={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},UZ={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},cxt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},dxt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Mv=function(e,t,r,a,n,i){return e<t||e>r?LN(e,n,i.length>0):a.integers.reduce(function(o,l,c){for(;e>=l;)e-=l,o+=a.values[c];return o},"")+i},ime=function(e,t,r,a){var n="";do r||e--,n=a(e)+n,e/=t;while(e*t>=t);return n},Ys=function(e,t,r,a,n){var i=r-t+1;return(e<0?"-":"")+(ime(Math.abs(e),i,a,function(o){return ei(Math.floor(o%i)+t)})+n)},ig=function(e,t,r){r===void 0&&(r=". ");var a=t.length;return ime(Math.abs(e),a,!1,function(n){return t[Math.floor(n%a)]})+r},Jv=1,gm=2,xm=4,n2=8,E0=function(e,t,r,a,n,i){if(e<-9999||e>9999)return LN(e,4,n.length>0);var o=Math.abs(e),l=n;if(o===0)return t[0]+l;for(var c=0;o>0&&c<=4;c++){var d=o%10;d===0&&Li(i,Jv)&&l!==""?l=t[d]+l:d>1||d===1&&c===0||d===1&&c===1&&Li(i,gm)||d===1&&c===1&&Li(i,xm)&&e>100||d===1&&c>1&&Li(i,n2)?l=t[d]+(c>0?r[c-1]:"")+l:d===1&&c>0&&(l=r[c-1]+l),o=Math.floor(o/10)}return(e<0?a:"")+l},HZ="十百千萬",QZ="拾佰仟萬",zZ="マイナス",JO="마이너스",LN=function(e,t,r){var a=r?". ":"",n=r?"、":"",i=r?", ":"",o=r?" ":"";switch(t){case 0:return"•"+o;case 1:return"◦"+o;case 2:return"◾"+o;case 5:var l=Ys(e,48,57,!0,a);return l.length<4?"0"+l:l;case 4:return ig(e,"〇一二三四五六七八九",n);case 6:return Mv(e,1,3999,MZ,3,a).toLowerCase();case 7:return Mv(e,1,3999,MZ,3,a);case 8:return Ys(e,945,969,!1,a);case 9:return Ys(e,97,122,!1,a);case 10:return Ys(e,65,90,!1,a);case 11:return Ys(e,1632,1641,!0,a);case 12:case 49:return Mv(e,1,9999,UZ,3,a);case 35:return Mv(e,1,9999,UZ,3,a).toLowerCase();case 13:return Ys(e,2534,2543,!0,a);case 14:case 30:return Ys(e,6112,6121,!0,a);case 15:return ig(e,"子丑寅卯辰巳午未申酉戌亥",n);case 16:return ig(e,"甲乙丙丁戊己庚辛壬癸",n);case 17:case 48:return E0(e,"零一二三四五六七八九",HZ,"負",n,gm|xm|n2);case 47:return E0(e,"零壹貳參肆伍陸柒捌玖",QZ,"負",n,Jv|gm|xm|n2);case 42:return E0(e,"零一二三四五六七八九",HZ,"负",n,gm|xm|n2);case 41:return E0(e,"零壹贰叁肆伍陆柒捌玖",QZ,"负",n,Jv|gm|xm|n2);case 26:return E0(e,"〇一二三四五六七八九","十百千万",zZ,n,0);case 25:return E0(e,"零壱弐参四伍六七八九","拾百千万",zZ,n,Jv|gm|xm);case 31:return E0(e,"영일이삼사오육칠팔구","십백천만",JO,i,Jv|gm|xm);case 33:return E0(e,"零一二三四五六七八九","十百千萬",JO,i,0);case 32:return E0(e,"零壹貳參四五六七八九","拾百千",JO,i,Jv|gm|xm);case 18:return Ys(e,2406,2415,!0,a);case 20:return Mv(e,1,19999,dxt,3,a);case 21:return Ys(e,2790,2799,!0,a);case 22:return Ys(e,2662,2671,!0,a);case 22:return Mv(e,1,10999,cxt,3,a);case 23:return ig(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return ig(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Ys(e,3302,3311,!0,a);case 28:return ig(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",n);case 29:return ig(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",n);case 34:return Ys(e,3792,3801,!0,a);case 37:return Ys(e,6160,6169,!0,a);case 38:return Ys(e,4160,4169,!0,a);case 39:return Ys(e,2918,2927,!0,a);case 40:return Ys(e,1776,1785,!0,a);case 43:return Ys(e,3046,3055,!0,a);case 44:return Ys(e,3174,3183,!0,a);case 45:return Ys(e,3664,3673,!0,a);case 46:return Ys(e,3872,3881,!0,a);case 3:default:return Ys(e,48,57,!0,a)}},ome="data-html2canvas-ignore",$Z=function(){function e(t,r,a){if(this.context=t,this.options=a,this.scrolledElements=[],this.referenceElement=r,this.counters=new lxt,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var a=this,n=uxt(t,r);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var i=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,l=n.contentWindow,c=l.document,d=Axt(n).then(function(){return Rl(a,void 0,void 0,function(){var u,f;return sl(this,function(A){switch(A.label){case 0:return this.scrolledElements.forEach(xxt),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),u=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:A.sent(),A.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,hxt(c)]:[3,4];case 3:A.sent(),A.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(c,f)}).then(function(){return n})]:[2,n]}})})});return c.open(),c.write(pxt(document.doctype)+"<html></html>"),gxt(this.referenceElement.ownerDocument,i,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),d},e.prototype.createElementClone=function(t){if(bR(t,2))debugger;if(ame(t))return this.createCanvasClone(t);if(PZ(t))return this.createVideoClone(t);if(RZ(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return ER(r)&&(ER(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),LZ(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return ZO(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var a=[].slice.call(r.cssRules,0).reduce(function(i,o){return o&&typeof o.cssText=="string"?i+o.cssText:i},""),n=t.cloneNode(!1);return n.textContent=a,n}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var a=t.ownerDocument.createElement("img");try{return a.src=t.toDataURL(),a}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var n=t.cloneNode(!1);try{n.width=t.width,n.height=t.height;var i=t.getContext("2d"),o=n.getContext("2d");if(o)if(!this.options.allowTaint&&i)o.putImageData(i.getImageData(0,0,t.width,t.height),0,0);else{var l=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return n}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return n},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var a=r.getContext("2d");try{return a&&(a.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||a.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var n=t.ownerDocument.createElement("canvas");return n.width=t.offsetWidth,n.height=t.offsetHeight,n},e.prototype.appendChildNode=function(t,r,a){(!Ab(r)||!oxt(r)&&!r.hasAttribute(ome)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Ab(r)||!RZ(r))&&t.appendChild(this.cloneNode(r,a))},e.prototype.cloneChildNodes=function(t,r,a){for(var n=this,i=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;i;i=i.nextSibling)if(Ab(i)&&sme(i)&&typeof i.assignedNodes=="function"){var o=i.assignedNodes();o.length&&o.forEach(function(l){return n.appendChildNode(r,l,a)})}else this.appendChildNode(r,i,a)},e.prototype.cloneNode=function(t,r){if(tme(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var a=t.ownerDocument.defaultView;if(a&&Ab(t)&&(NR(t)||o5(t))){var n=this.createElementClone(t);n.style.transitionProperty="none";var i=a.getComputedStyle(t),o=a.getComputedStyle(t,":before"),l=a.getComputedStyle(t,":after");this.referenceElement===t&&NR(n)&&(this.clonedReferenceElement=n),ZU(n)&&yxt(n);var c=this.counters.parse(new yZ(this.context,i)),d=this.resolvePseudoContent(t,n,o,R2.BEFORE);LZ(t)&&(r=!0),PZ(t)||this.cloneChildNodes(t,n,r),d&&n.insertBefore(d,n.firstChild);var u=this.resolvePseudoContent(t,n,l,R2.AFTER);return u&&n.appendChild(u),this.counters.pop(c),(i&&(this.options.copyStyles||o5(t))&&!nme(t)||r)&&ZO(i,n),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([n,t.scrollLeft,t.scrollTop]),(h_(t)||A_(t))&&(h_(n)||A_(n))&&(n.value=t.value),n}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,a,n){var i=this;if(a){var o=a.content,l=r.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||a.display==="none")){this.counters.parse(new yZ(this.context,a));var c=new agt(this.context,a),d=l.createElement("html2canvaspseudoelement");ZO(a,d),c.content.forEach(function(f){if(f.type===0)d.appendChild(l.createTextNode(f.value));else if(f.type===22){var A=l.createElement("img");A.src=f.value,A.style.opacity="1",d.appendChild(A)}else if(f.type===18){if(f.name==="attr"){var m=f.values.filter(kn);m.length&&d.appendChild(l.createTextNode(t.getAttribute(m[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter(j1),x=g[0],v=g[1];if(x&&kn(x)){var y=i.counters.getCounterValue(x.value),N=v&&kn(v)?vR.parse(i.context,v.value):3;d.appendChild(l.createTextNode(LN(y,N,!1)))}}else if(f.name==="counters"){var E=f.values.filter(j1),x=E[0],B=E[1],v=E[2];if(x&&kn(x)){var _=i.counters.getCounterValues(x.value),I=v&&kn(v)?vR.parse(i.context,v.value):3,j=B&&B.type===0?B.value:"",k=_.map(function(F){return LN(F,I,!1)}).join(j);d.appendChild(l.createTextNode(k))}}}else if(f.type===20)switch(f.value){case"open-quote":d.appendChild(l.createTextNode(bZ(c.quotes,i.quoteDepth++,!0)));break;case"close-quote":d.appendChild(l.createTextNode(bZ(c.quotes,--i.quoteDepth,!1)));break;default:d.appendChild(l.createTextNode(f.value))}}),d.className=CR+" "+jR;var u=n===R2.BEFORE?" "+CR:" "+jR;return o5(r)?r.className.baseValue+=u:r.className+=u,d}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),R2;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(R2||(R2={}));var uxt=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(ome,"true"),e.body.appendChild(r),r},fxt=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},hxt=function(e){return Promise.all([].slice.call(e.images,0).map(fxt))},Axt=function(e){return new Promise(function(t,r){var a=e.contentWindow;if(!a)return r("No window assigned for iframe");var n=a.document;a.onload=e.onload=function(){a.onload=e.onload=null;var i=setInterval(function(){n.body.childNodes.length>0&&n.readyState==="complete"&&(clearInterval(i),t(e))},50)}})},mxt=["all","d","content"],ZO=function(e,t){for(var r=e.length-1;r>=0;r--){var a=e.item(r);mxt.indexOf(a)===-1&&t.style.setProperty(a,e.getPropertyValue(a))}return t},pxt=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},gxt=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},xxt=function(e){var t=e[0],r=e[1],a=e[2];t.scrollLeft=r,t.scrollTop=a},vxt=":before",bxt=":after",CR="___html2canvas___pseudoelement_before",jR="___html2canvas___pseudoelement_after",VZ=`{
    content: "" !important;
    display: none !important;
}`,yxt=function(e){wxt(e,"."+CR+vxt+VZ+`
         .`+jR+bxt+VZ)},wxt=function(e,t){var r=e.ownerDocument;if(r){var a=r.createElement("style");a.textContent=t,e.appendChild(a)}},lme=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),Nxt=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(tD(t)||kxt(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return Rl(this,void 0,void 0,function(){var r,a,n,i,o=this;return sl(this,function(l){switch(l.label){case 0:return r=lme.isSameOrigin(t),a=!eD(t)&&this._options.useCORS===!0&&To.SUPPORT_CORS_IMAGES&&!r,n=!eD(t)&&!r&&!tD(t)&&typeof this._options.proxy=="string"&&To.SUPPORT_CORS_XHR&&!a,!r&&this._options.allowTaint===!1&&!eD(t)&&!tD(t)&&!n&&!a?[2]:(i=t,n?[4,this.proxy(i)]:[3,2]);case 1:i=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,d){var u=new Image;u.onload=function(){return c(u)},u.onerror=d,(Sxt(i)||a)&&(u.crossOrigin="anonymous"),u.src=i,u.complete===!0&&setTimeout(function(){return c(u)},500),o._options.imageTimeout>0&&setTimeout(function(){return d("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,a=this._options.proxy;if(!a)throw new Error("No proxy defined");var n=t.substring(0,256);return new Promise(function(i,o){var l=To.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")i(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return i(f.result)},!1),f.addEventListener("error",function(A){return o(A)},!1),f.readAsDataURL(c.response)}else o("Failed to proxy resource "+n+" with status code "+c.status)},c.onerror=o;var d=a.indexOf("?")>-1?"&":"?";if(c.open("GET",""+a+d+"url="+encodeURIComponent(t)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var u=r._options.imageTimeout;c.timeout=u,c.ontimeout=function(){return o("Timed out ("+u+"ms) proxying "+n)}}c.send()})},e}(),Ext=/^data:image\/svg\+xml/i,Cxt=/^data:image\/.*;base64,/i,jxt=/^data:image\/.*/i,kxt=function(e){return To.SUPPORT_SVG_DRAWING||!_xt(e)},eD=function(e){return jxt.test(e)},Sxt=function(e){return Cxt.test(e)},tD=function(e){return e.substr(0,4)==="blob"},_xt=function(e){return e.substr(-3).toLowerCase()==="svg"||Ext.test(e)},ir=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),Uv=function(e,t,r){return new ir(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},hk=function(){function e(t,r,a,n){this.type=1,this.start=t,this.startControl=r,this.endControl=a,this.end=n}return e.prototype.subdivide=function(t,r){var a=Uv(this.start,this.startControl,t),n=Uv(this.startControl,this.endControl,t),i=Uv(this.endControl,this.end,t),o=Uv(a,n,t),l=Uv(n,i,t),c=Uv(o,l,t);return r?new e(this.start,a,o,c):new e(c,l,i,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),ou=function(e){return e.type===1},Txt=function(){function e(t){var r=t.styles,a=t.bounds,n=r2(r.borderTopLeftRadius,a.width,a.height),i=n[0],o=n[1],l=r2(r.borderTopRightRadius,a.width,a.height),c=l[0],d=l[1],u=r2(r.borderBottomRightRadius,a.width,a.height),f=u[0],A=u[1],m=r2(r.borderBottomLeftRadius,a.width,a.height),g=m[0],x=m[1],v=[];v.push((i+c)/a.width),v.push((g+f)/a.width),v.push((o+x)/a.height),v.push((d+A)/a.height);var y=Math.max.apply(Math,v);y>1&&(i/=y,o/=y,c/=y,d/=y,f/=y,A/=y,g/=y,x/=y);var N=a.width-c,E=a.height-A,B=a.width-f,_=a.height-x,I=r.borderTopWidth,j=r.borderRightWidth,k=r.borderBottomWidth,T=r.borderLeftWidth,L=zn(r.paddingTop,t.bounds.width),F=zn(r.paddingRight,t.bounds.width),S=zn(r.paddingBottom,t.bounds.width),M=zn(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||o>0?as(a.left+T/3,a.top+I/3,i-T/3,o-I/3,nn.TOP_LEFT):new ir(a.left+T/3,a.top+I/3),this.topRightBorderDoubleOuterBox=i>0||o>0?as(a.left+N,a.top+I/3,c-j/3,d-I/3,nn.TOP_RIGHT):new ir(a.left+a.width-j/3,a.top+I/3),this.bottomRightBorderDoubleOuterBox=f>0||A>0?as(a.left+B,a.top+E,f-j/3,A-k/3,nn.BOTTOM_RIGHT):new ir(a.left+a.width-j/3,a.top+a.height-k/3),this.bottomLeftBorderDoubleOuterBox=g>0||x>0?as(a.left+T/3,a.top+_,g-T/3,x-k/3,nn.BOTTOM_LEFT):new ir(a.left+T/3,a.top+a.height-k/3),this.topLeftBorderDoubleInnerBox=i>0||o>0?as(a.left+T*2/3,a.top+I*2/3,i-T*2/3,o-I*2/3,nn.TOP_LEFT):new ir(a.left+T*2/3,a.top+I*2/3),this.topRightBorderDoubleInnerBox=i>0||o>0?as(a.left+N,a.top+I*2/3,c-j*2/3,d-I*2/3,nn.TOP_RIGHT):new ir(a.left+a.width-j*2/3,a.top+I*2/3),this.bottomRightBorderDoubleInnerBox=f>0||A>0?as(a.left+B,a.top+E,f-j*2/3,A-k*2/3,nn.BOTTOM_RIGHT):new ir(a.left+a.width-j*2/3,a.top+a.height-k*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||x>0?as(a.left+T*2/3,a.top+_,g-T*2/3,x-k*2/3,nn.BOTTOM_LEFT):new ir(a.left+T*2/3,a.top+a.height-k*2/3),this.topLeftBorderStroke=i>0||o>0?as(a.left+T/2,a.top+I/2,i-T/2,o-I/2,nn.TOP_LEFT):new ir(a.left+T/2,a.top+I/2),this.topRightBorderStroke=i>0||o>0?as(a.left+N,a.top+I/2,c-j/2,d-I/2,nn.TOP_RIGHT):new ir(a.left+a.width-j/2,a.top+I/2),this.bottomRightBorderStroke=f>0||A>0?as(a.left+B,a.top+E,f-j/2,A-k/2,nn.BOTTOM_RIGHT):new ir(a.left+a.width-j/2,a.top+a.height-k/2),this.bottomLeftBorderStroke=g>0||x>0?as(a.left+T/2,a.top+_,g-T/2,x-k/2,nn.BOTTOM_LEFT):new ir(a.left+T/2,a.top+a.height-k/2),this.topLeftBorderBox=i>0||o>0?as(a.left,a.top,i,o,nn.TOP_LEFT):new ir(a.left,a.top),this.topRightBorderBox=c>0||d>0?as(a.left+N,a.top,c,d,nn.TOP_RIGHT):new ir(a.left+a.width,a.top),this.bottomRightBorderBox=f>0||A>0?as(a.left+B,a.top+E,f,A,nn.BOTTOM_RIGHT):new ir(a.left+a.width,a.top+a.height),this.bottomLeftBorderBox=g>0||x>0?as(a.left,a.top+_,g,x,nn.BOTTOM_LEFT):new ir(a.left,a.top+a.height),this.topLeftPaddingBox=i>0||o>0?as(a.left+T,a.top+I,Math.max(0,i-T),Math.max(0,o-I),nn.TOP_LEFT):new ir(a.left+T,a.top+I),this.topRightPaddingBox=c>0||d>0?as(a.left+Math.min(N,a.width-j),a.top+I,N>a.width+j?0:Math.max(0,c-j),Math.max(0,d-I),nn.TOP_RIGHT):new ir(a.left+a.width-j,a.top+I),this.bottomRightPaddingBox=f>0||A>0?as(a.left+Math.min(B,a.width-T),a.top+Math.min(E,a.height-k),Math.max(0,f-j),Math.max(0,A-k),nn.BOTTOM_RIGHT):new ir(a.left+a.width-j,a.top+a.height-k),this.bottomLeftPaddingBox=g>0||x>0?as(a.left+T,a.top+Math.min(_,a.height-k),Math.max(0,g-T),Math.max(0,x-k),nn.BOTTOM_LEFT):new ir(a.left+T,a.top+a.height-k),this.topLeftContentBox=i>0||o>0?as(a.left+T+M,a.top+I+L,Math.max(0,i-(T+M)),Math.max(0,o-(I+L)),nn.TOP_LEFT):new ir(a.left+T+M,a.top+I+L),this.topRightContentBox=c>0||d>0?as(a.left+Math.min(N,a.width+T+M),a.top+I+L,N>a.width+T+M?0:c-T+M,d-(I+L),nn.TOP_RIGHT):new ir(a.left+a.width-(j+F),a.top+I+L),this.bottomRightContentBox=f>0||A>0?as(a.left+Math.min(B,a.width-(T+M)),a.top+Math.min(E,a.height+I+L),Math.max(0,f-(j+F)),A-(k+S),nn.BOTTOM_RIGHT):new ir(a.left+a.width-(j+F),a.top+a.height-(k+S)),this.bottomLeftContentBox=g>0||x>0?as(a.left+T+M,a.top+_,Math.max(0,g-(T+M)),x-(k+S),nn.BOTTOM_LEFT):new ir(a.left+T+M,a.top+a.height-(k+S))}return e}(),nn;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(nn||(nn={}));var as=function(e,t,r,a,n){var i=4*((Math.sqrt(2)-1)/3),o=r*i,l=a*i,c=e+r,d=t+a;switch(n){case nn.TOP_LEFT:return new hk(new ir(e,d),new ir(e,d-l),new ir(c-o,t),new ir(c,t));case nn.TOP_RIGHT:return new hk(new ir(e,t),new ir(e+o,t),new ir(c,d-l),new ir(c,d));case nn.BOTTOM_RIGHT:return new hk(new ir(c,t),new ir(c,t+l),new ir(e+o,d),new ir(e,d));case nn.BOTTOM_LEFT:default:return new hk(new ir(c,d),new ir(c-o,d),new ir(e,t+l),new ir(e,t))}},m_=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Bxt=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},p_=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Ixt=function(){function e(t,r,a){this.offsetX=t,this.offsetY=r,this.matrix=a,this.type=0,this.target=6}return e}(),Ak=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),Oxt=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),Dxt=function(e){return e.type===0},cme=function(e){return e.type===1},Fxt=function(e){return e.type===2},GZ=function(e,t){return e.length===t.length?e.some(function(r,a){return r===t[a]}):!1},Pxt=function(e,t,r,a,n){return e.map(function(i,o){switch(o){case 0:return i.add(t,r);case 1:return i.add(t+a,r);case 2:return i.add(t+a,r+n);case 3:return i.add(t,r+n)}return i})},dme=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),ume=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new Txt(this.container),this.container.styles.opacity<1&&this.effects.push(new Oxt(this.container.styles.opacity)),this.container.styles.transform!==null){var a=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new Ixt(a,n,i))}if(this.container.styles.overflowX!==0){var o=m_(this.curves),l=p_(this.curves);GZ(o,l)?this.effects.push(new Ak(o,6)):(this.effects.push(new Ak(o,2)),this.effects.push(new Ak(l,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,a=this.parent,n=this.effects.slice(0);a;){var i=a.effects.filter(function(c){return!cme(c)});if(r||a.container.styles.position!==0||!a.parent){if(n.unshift.apply(n,i),r=[2,3].indexOf(a.container.styles.position)===-1,a.container.styles.overflowX!==0){var o=m_(a.curves),l=p_(a.curves);GZ(o,l)||n.unshift(new Ak(l,6))}}else n.unshift.apply(n,i);a=a.parent}return n.filter(function(c){return Li(c.target,t)})},e}(),kR=function(e,t,r,a){e.container.elements.forEach(function(n){var i=Li(n.flags,4),o=Li(n.flags,2),l=new ume(n,e);Li(n.styles.display,2048)&&a.push(l);var c=Li(n.flags,8)?[]:a;if(i||o){var d=i||n.styles.isPositioned()?r:t,u=new dme(l);if(n.styles.isPositioned()||n.styles.opacity<1||n.styles.isTransformed()){var f=n.styles.zIndex.order;if(f<0){var A=0;d.negativeZIndex.some(function(g,x){return f>g.element.container.styles.zIndex.order?(A=x,!1):A>0}),d.negativeZIndex.splice(A,0,u)}else if(f>0){var m=0;d.positiveZIndex.some(function(g,x){return f>=g.element.container.styles.zIndex.order?(m=x+1,!1):m>0}),d.positiveZIndex.splice(m,0,u)}else d.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else n.styles.isFloating()?d.nonPositionedFloats.push(u):d.nonPositionedInlineLevel.push(u);kR(l,u,i?u:r,c)}else n.styles.isInlineLevel()?t.inlineLevel.push(l):t.nonInlineLevel.push(l),kR(l,t,r,c);Li(n.flags,8)&&fme(n,c)})},fme=function(e,t){for(var r=e instanceof wR?e.start:1,a=e instanceof wR?e.reversed:!1,n=0;n<t.length;n++){var i=t[n];i.container instanceof WAe&&typeof i.container.value=="number"&&i.container.value!==0&&(r=i.container.value),i.listValue=LN(r,i.container.styles.listStyleType,!0),r+=a?-1:1}},Rxt=function(e){var t=new ume(e,null),r=new dme(t),a=[];return kR(t,r,r,a),fme(t.container,a),r},qZ=function(e,t){switch(t){case 0:return Au(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Au(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Au(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Au(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Lxt=function(e,t){switch(t){case 0:return Au(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Au(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Au(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Au(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Mxt=function(e,t){switch(t){case 0:return Au(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Au(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Au(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Au(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},Uxt=function(e,t){switch(t){case 0:return mk(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return mk(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return mk(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return mk(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},mk=function(e,t){var r=[];return ou(e)?r.push(e.subdivide(.5,!1)):r.push(e),ou(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},Au=function(e,t,r,a){var n=[];return ou(e)?n.push(e.subdivide(.5,!1)):n.push(e),ou(r)?n.push(r.subdivide(.5,!0)):n.push(r),ou(a)?n.push(a.subdivide(.5,!0).reverse()):n.push(a),ou(t)?n.push(t.subdivide(.5,!1).reverse()):n.push(t),n},hme=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},g_=function(e){var t=e.styles,r=e.bounds,a=zn(t.paddingLeft,r.width),n=zn(t.paddingRight,r.width),i=zn(t.paddingTop,r.width),o=zn(t.paddingBottom,r.width);return r.add(a+t.borderLeftWidth,i+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+a+n),-(t.borderTopWidth+t.borderBottomWidth+i+o))},Hxt=function(e,t){return e===0?t.bounds:e===2?g_(t):hme(t)},Qxt=function(e,t){return e===0?t.bounds:e===2?g_(t):hme(t)},rD=function(e,t,r){var a=Hxt(Zv(e.styles.backgroundOrigin,t),e),n=Qxt(Zv(e.styles.backgroundClip,t),e),i=zxt(Zv(e.styles.backgroundSize,t),r,a),o=i[0],l=i[1],c=r2(Zv(e.styles.backgroundPosition,t),a.width-o,a.height-l),d=$xt(Zv(e.styles.backgroundRepeat,t),c,i,a,n),u=Math.round(a.left+c[0]),f=Math.round(a.top+c[1]);return[d,u,f,o,l]},Hv=function(e){return kn(e)&&e.value===Hb.AUTO},pk=function(e){return typeof e=="number"},zxt=function(e,t,r){var a=t[0],n=t[1],i=t[2],o=e[0],l=e[1];if(!o)return[0,0];if(Ei(o)&&l&&Ei(l))return[zn(o,r.width),zn(l,r.height)];var c=pk(i);if(kn(o)&&(o.value===Hb.CONTAIN||o.value===Hb.COVER)){if(pk(i)){var d=r.width/r.height;return d<i!=(o.value===Hb.COVER)?[r.width,r.width/i]:[r.height*i,r.height]}return[r.width,r.height]}var u=pk(a),f=pk(n),A=u||f;if(Hv(o)&&(!l||Hv(l))){if(u&&f)return[a,n];if(!c&&!A)return[r.width,r.height];if(A&&c){var m=u?a:n*i,g=f?n:a/i;return[m,g]}var x=u?a:r.width,v=f?n:r.height;return[x,v]}if(c){var y=0,N=0;return Ei(o)?y=zn(o,r.width):Ei(l)&&(N=zn(l,r.height)),Hv(o)?y=N*i:(!l||Hv(l))&&(N=y/i),[y,N]}var E=null,B=null;if(Ei(o)?E=zn(o,r.width):l&&Ei(l)&&(B=zn(l,r.height)),E!==null&&(!l||Hv(l))&&(B=u&&f?E/a*n:r.height),B!==null&&Hv(o)&&(E=u&&f?B/n*a:r.width),E!==null&&B!==null)return[E,B];throw new Error("Unable to calculate background-size for element")},Zv=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},$xt=function(e,t,r,a,n){var i=t[0],o=t[1],l=r[0],c=r[1];switch(e){case 2:return[new ir(Math.round(a.left),Math.round(a.top+o)),new ir(Math.round(a.left+a.width),Math.round(a.top+o)),new ir(Math.round(a.left+a.width),Math.round(c+a.top+o)),new ir(Math.round(a.left),Math.round(c+a.top+o))];case 3:return[new ir(Math.round(a.left+i),Math.round(a.top)),new ir(Math.round(a.left+i+l),Math.round(a.top)),new ir(Math.round(a.left+i+l),Math.round(a.height+a.top)),new ir(Math.round(a.left+i),Math.round(a.height+a.top))];case 1:return[new ir(Math.round(a.left+i),Math.round(a.top+o)),new ir(Math.round(a.left+i+l),Math.round(a.top+o)),new ir(Math.round(a.left+i+l),Math.round(a.top+o+c)),new ir(Math.round(a.left+i),Math.round(a.top+o+c))];default:return[new ir(Math.round(n.left),Math.round(n.top)),new ir(Math.round(n.left+n.width),Math.round(n.top)),new ir(Math.round(n.left+n.width),Math.round(n.height+n.top)),new ir(Math.round(n.left),Math.round(n.height+n.top))]}},Vxt="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",KZ="Hidden Text",Gxt=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var a=this._document.createElement("div"),n=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;a.style.visibility="hidden",a.style.fontFamily=t,a.style.fontSize=r,a.style.margin="0",a.style.padding="0",a.style.whiteSpace="nowrap",o.appendChild(a),n.src=Vxt,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",i.style.fontFamily=t,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(KZ)),a.appendChild(i),a.appendChild(n);var l=n.offsetTop-i.offsetTop+2;a.removeChild(i),a.appendChild(this._document.createTextNode(KZ)),a.style.lineHeight="normal",n.style.verticalAlign="super";var c=n.offsetTop-a.offsetTop+2;return o.removeChild(a),{baseline:l,middle:c}},e.prototype.getMetrics=function(t,r){var a=t+" "+r;return typeof this._data[a]>"u"&&(this._data[a]=this.parseMetrics(t,r)),this._data[a]},e}(),Ame=function(){function e(t,r){this.context=t,this.options=r}return e}(),qxt=1e4,Kxt=function(e){Cf(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n._activeEffects=[],n.canvas=a.canvas?a.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),a.canvas||(n.canvas.width=Math.floor(a.width*a.scale),n.canvas.height=Math.floor(a.height*a.scale),n.canvas.style.width=a.width+"px",n.canvas.style.height=a.height+"px"),n.fontMetrics=new Gxt(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-a.x,-a.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+a.width+"x"+a.height+") with scale "+a.scale),n}return t.prototype.applyEffects=function(r){for(var a=this;this._activeEffects.length;)this.popEffect();r.forEach(function(n){return a.applyEffect(n)})},t.prototype.applyEffect=function(r){this.ctx.save(),Fxt(r)&&(this.ctx.globalAlpha=r.opacity),Dxt(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),cme(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return Rl(this,void 0,void 0,function(){var a;return sl(this,function(n){switch(n.label){case 0:return a=r.element.container.styles,a.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return Rl(this,void 0,void 0,function(){return sl(this,function(a){switch(a.label){case 0:if(Li(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return a.sent(),[4,this.renderNodeContent(r)];case 2:a.sent(),a.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,a,n){var i=this;if(a===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+n);else{var o=YU(r.text);o.reduce(function(l,c){return i.ctx.fillText(c,l,r.bounds.top+n),l+i.ctx.measureText(c).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var a=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),n=Zxt(r.fontFamily).join(", "),i=RE(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,a,r.fontWeight,i,n].join(" "),n,i]},t.prototype.renderTextNode=function(r,a){return Rl(this,void 0,void 0,function(){var n,i,o,l,c,d,u,f,A=this;return sl(this,function(m){return n=this.createFontStyle(a),i=n[0],o=n[1],l=n[2],this.ctx.font=i,this.ctx.direction=a.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,l),d=c.baseline,u=c.middle,f=a.paintOrder,r.textBounds.forEach(function(g){f.forEach(function(x){switch(x){case 0:A.ctx.fillStyle=ro(a.color),A.renderTextWithLetterSpacing(g,a.letterSpacing,d);var v=a.textShadow;v.length&&g.text.trim().length&&(v.slice(0).reverse().forEach(function(y){A.ctx.shadowColor=ro(y.color),A.ctx.shadowOffsetX=y.offsetX.number*A.options.scale,A.ctx.shadowOffsetY=y.offsetY.number*A.options.scale,A.ctx.shadowBlur=y.blur.number,A.renderTextWithLetterSpacing(g,a.letterSpacing,d)}),A.ctx.shadowColor="",A.ctx.shadowOffsetX=0,A.ctx.shadowOffsetY=0,A.ctx.shadowBlur=0),a.textDecorationLine.length&&(A.ctx.fillStyle=ro(a.textDecorationColor||a.color),a.textDecorationLine.forEach(function(y){switch(y){case 1:A.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+d),g.bounds.width,1);break;case 2:A.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:A.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+u),g.bounds.width,1);break}}));break;case 1:a.webkitTextStrokeWidth&&g.text.trim().length&&(A.ctx.strokeStyle=ro(a.webkitTextStrokeColor),A.ctx.lineWidth=a.webkitTextStrokeWidth,A.ctx.lineJoin=window.chrome?"miter":"round",A.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+d)),A.ctx.strokeStyle="",A.ctx.lineWidth=0,A.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,a,n){if(n&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var i=g_(r),o=p_(a);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,r.intrinsicWidth,r.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return Rl(this,void 0,void 0,function(){var a,n,i,o,l,c,N,N,d,u,f,A,B,m,g,_,x,v,y,N,E,B,_;return sl(this,function(I){switch(I.label){case 0:this.applyEffects(r.getEffects(4)),a=r.container,n=r.curves,i=a.styles,o=0,l=a.textNodes,I.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,i)]):[3,4];case 2:I.sent(),I.label=3;case 3:return o++,[3,1];case 4:if(!(a instanceof GAe))return[3,8];I.label=5;case 5:return I.trys.push([5,7,,8]),[4,this.context.cache.match(a.src)];case 6:return N=I.sent(),this.renderReplacedElement(a,n,N),[3,8];case 7:return I.sent(),this.context.logger.error("Error loading image "+a.src),[3,8];case 8:if(a instanceof qAe&&this.renderReplacedElement(a,n,a.canvas),!(a instanceof KAe))return[3,12];I.label=9;case 9:return I.trys.push([9,11,,12]),[4,this.context.cache.match(a.svg)];case 10:return N=I.sent(),this.renderReplacedElement(a,n,N),[3,12];case 11:return I.sent(),this.context.logger.error("Error loading svg "+a.svg.substring(0,255)),[3,12];case 12:return a instanceof JAe&&a.tree?(d=new t(this.context,{scale:this.options.scale,backgroundColor:a.backgroundColor,x:0,y:0,width:a.width,height:a.height}),[4,d.render(a.tree)]):[3,14];case 13:u=I.sent(),a.width&&a.height&&this.ctx.drawImage(u,0,0,a.width,a.height,a.bounds.left,a.bounds.top,a.bounds.width,a.bounds.height),I.label=14;case 14:if(a instanceof JU&&(f=Math.min(a.bounds.width,a.bounds.height),a.type===u_?a.checked&&(this.ctx.save(),this.path([new ir(a.bounds.left+f*.39363,a.bounds.top+f*.79),new ir(a.bounds.left+f*.16,a.bounds.top+f*.5549),new ir(a.bounds.left+f*.27347,a.bounds.top+f*.44071),new ir(a.bounds.left+f*.39694,a.bounds.top+f*.5649),new ir(a.bounds.left+f*.72983,a.bounds.top+f*.23),new ir(a.bounds.left+f*.84,a.bounds.top+f*.34085),new ir(a.bounds.left+f*.39363,a.bounds.top+f*.79)]),this.ctx.fillStyle=ro(FZ),this.ctx.fill(),this.ctx.restore()):a.type===f_&&a.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(a.bounds.left+f/2,a.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=ro(FZ),this.ctx.fill(),this.ctx.restore())),Wxt(a)&&a.value.length){switch(A=this.createFontStyle(i),B=A[0],m=A[1],g=this.fontMetrics.getMetrics(B,m).baseline,this.ctx.font=B,this.ctx.fillStyle=ro(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Yxt(a.styles.textAlign),_=g_(a),x=0,a.styles.textAlign){case 1:x+=_.width/2;break;case 2:x+=_.width;break}v=_.add(x,0,0,-_.height/2+1),this.ctx.save(),this.path([new ir(_.left,_.top),new ir(_.left+_.width,_.top),new ir(_.left+_.width,_.top+_.height),new ir(_.left,_.top+_.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new P2(a.value,v),i.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Li(a.styles.display,2048))return[3,20];if(a.styles.listStyleImage===null)return[3,19];if(y=a.styles.listStyleImage,y.type!==0)return[3,18];N=void 0,E=y.url,I.label=15;case 15:return I.trys.push([15,17,,18]),[4,this.context.cache.match(E)];case 16:return N=I.sent(),this.ctx.drawImage(N,a.bounds.left-(N.width+10),a.bounds.top),[3,18];case 17:return I.sent(),this.context.logger.error("Error loading list-style-image "+E),[3,18];case 18:return[3,20];case 19:r.listValue&&a.styles.listStyleType!==-1&&(B=this.createFontStyle(i)[0],this.ctx.font=B,this.ctx.fillStyle=ro(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",_=new AA(a.bounds.left,a.bounds.top+zn(a.styles.paddingTop,a.bounds.width),a.bounds.width,xZ(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new P2(r.listValue,_),i.letterSpacing,xZ(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),I.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return Rl(this,void 0,void 0,function(){var a,n,y,i,o,y,l,c,y,d,u,y,f,A,y,m,g,y,x,v,y;return sl(this,function(N){switch(N.label){case 0:if(Li(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:N.sent(),a=0,n=r.negativeZIndex,N.label=2;case 2:return a<n.length?(y=n[a],[4,this.renderStack(y)]):[3,5];case 3:N.sent(),N.label=4;case 4:return a++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:N.sent(),i=0,o=r.nonInlineLevel,N.label=7;case 7:return i<o.length?(y=o[i],[4,this.renderNode(y)]):[3,10];case 8:N.sent(),N.label=9;case 9:return i++,[3,7];case 10:l=0,c=r.nonPositionedFloats,N.label=11;case 11:return l<c.length?(y=c[l],[4,this.renderStack(y)]):[3,14];case 12:N.sent(),N.label=13;case 13:return l++,[3,11];case 14:d=0,u=r.nonPositionedInlineLevel,N.label=15;case 15:return d<u.length?(y=u[d],[4,this.renderStack(y)]):[3,18];case 16:N.sent(),N.label=17;case 17:return d++,[3,15];case 18:f=0,A=r.inlineLevel,N.label=19;case 19:return f<A.length?(y=A[f],[4,this.renderNode(y)]):[3,22];case 20:N.sent(),N.label=21;case 21:return f++,[3,19];case 22:m=0,g=r.zeroOrAutoZIndexOrTransformedOrOpacity,N.label=23;case 23:return m<g.length?(y=g[m],[4,this.renderStack(y)]):[3,26];case 24:N.sent(),N.label=25;case 25:return m++,[3,23];case 26:x=0,v=r.positiveZIndex,N.label=27;case 27:return x<v.length?(y=v[x],[4,this.renderStack(y)]):[3,30];case 28:N.sent(),N.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var a=this;r.forEach(function(n,i){var o=ou(n)?n.start:n;i===0?a.ctx.moveTo(o.x,o.y):a.ctx.lineTo(o.x,o.y),ou(n)&&a.ctx.bezierCurveTo(n.startControl.x,n.startControl.y,n.endControl.x,n.endControl.y,n.end.x,n.end.y)})},t.prototype.renderRepeat=function(r,a,n,i){this.path(r),this.ctx.fillStyle=a,this.ctx.translate(n,i),this.ctx.fill(),this.ctx.translate(-n,-i)},t.prototype.resizeImage=function(r,a,n){var i;if(r.width===a&&r.height===n)return r;var o=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,l=o.createElement("canvas");l.width=Math.max(1,a),l.height=Math.max(1,n);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,a,n),l},t.prototype.renderBackgroundImage=function(r){return Rl(this,void 0,void 0,function(){var a,n,i,o,l,c;return sl(this,function(d){switch(d.label){case 0:a=r.styles.backgroundImage.length-1,n=function(u){var f,A,m,L,Q,G,M,H,k,g,L,Q,G,M,H,x,v,y,N,E,B,_,I,j,k,T,L,F,S,M,H,K,Q,G,X,Z,U,Y,P,D,W,J;return sl(this,function(ce){switch(ce.label){case 0:if(u.type!==0)return[3,5];f=void 0,A=u.url,ce.label=1;case 1:return ce.trys.push([1,3,,4]),[4,i.context.cache.match(A)];case 2:return f=ce.sent(),[3,4];case 3:return ce.sent(),i.context.logger.error("Error loading background-image "+A),[3,4];case 4:return f&&(m=rD(r,a,[f.width,f.height,f.width/f.height]),L=m[0],Q=m[1],G=m[2],M=m[3],H=m[4],k=i.ctx.createPattern(i.resizeImage(f,M,H),"repeat"),i.renderRepeat(L,k,Q,G)),[3,6];case 5:Dmt(u)?(g=rD(r,a,[null,null,null]),L=g[0],Q=g[1],G=g[2],M=g[3],H=g[4],x=_mt(u.angle,M,H),v=x[0],y=x[1],N=x[2],E=x[3],B=x[4],_=document.createElement("canvas"),_.width=M,_.height=H,I=_.getContext("2d"),j=I.createLinearGradient(y,E,N,B),pZ(u.stops,v).forEach(function(ie){return j.addColorStop(ie.stop,ro(ie.color))}),I.fillStyle=j,I.fillRect(0,0,M,H),M>0&&H>0&&(k=i.ctx.createPattern(_,"repeat"),i.renderRepeat(L,k,Q,G))):Fmt(u)&&(T=rD(r,a,[null,null,null]),L=T[0],F=T[1],S=T[2],M=T[3],H=T[4],K=u.position.length===0?[KU]:u.position,Q=zn(K[0],M),G=zn(K[K.length-1],H),X=Tmt(u,Q,G,M,H),Z=X[0],U=X[1],Z>0&&U>0&&(Y=i.ctx.createRadialGradient(F+Q,S+G,0,F+Q,S+G,Z),pZ(u.stops,Z*2).forEach(function(ie){return Y.addColorStop(ie.stop,ro(ie.color))}),i.path(L),i.ctx.fillStyle=Y,Z!==U?(P=r.bounds.left+.5*r.bounds.width,D=r.bounds.top+.5*r.bounds.height,W=U/Z,J=1/W,i.ctx.save(),i.ctx.translate(P,D),i.ctx.transform(1,0,0,W,0,0),i.ctx.translate(-P,-D),i.ctx.fillRect(F,J*(S-D)+D,M,H*J),i.ctx.restore()):i.ctx.fill())),ce.label=6;case 6:return a--,[2]}})},i=this,o=0,l=r.styles.backgroundImage.slice(0).reverse(),d.label=1;case 1:return o<l.length?(c=l[o],[5,n(c)]):[3,4];case 2:d.sent(),d.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,a,n){return Rl(this,void 0,void 0,function(){return sl(this,function(i){return this.path(qZ(n,a)),this.ctx.fillStyle=ro(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,a,n,i){return Rl(this,void 0,void 0,function(){var o,l;return sl(this,function(c){switch(c.label){case 0:return a<3?[4,this.renderSolidBorder(r,n,i)]:[3,2];case 1:return c.sent(),[2];case 2:return o=Lxt(i,n),this.path(o),this.ctx.fillStyle=ro(r),this.ctx.fill(),l=Mxt(i,n),this.path(l),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return Rl(this,void 0,void 0,function(){var a,n,i,o,l,c,d,u,f=this;return sl(this,function(A){switch(A.label){case 0:return this.applyEffects(r.getEffects(2)),a=r.container.styles,n=!Jm(a.backgroundColor)||a.backgroundImage.length,i=[{style:a.borderTopStyle,color:a.borderTopColor,width:a.borderTopWidth},{style:a.borderRightStyle,color:a.borderRightColor,width:a.borderRightWidth},{style:a.borderBottomStyle,color:a.borderBottomColor,width:a.borderBottomWidth},{style:a.borderLeftStyle,color:a.borderLeftColor,width:a.borderLeftWidth}],o=Xxt(Zv(a.backgroundClip,0),r.curves),n||a.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),Jm(a.backgroundColor)||(this.ctx.fillStyle=ro(a.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:A.sent(),this.ctx.restore(),a.boxShadow.slice(0).reverse().forEach(function(m){f.ctx.save();var g=m_(r.curves),x=m.inset?0:qxt,v=Pxt(g,-x+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(f.path(g),f.ctx.clip(),f.mask(v)):(f.mask(g),f.ctx.clip(),f.path(v)),f.ctx.shadowOffsetX=m.offsetX.number+x,f.ctx.shadowOffsetY=m.offsetY.number,f.ctx.shadowColor=ro(m.color),f.ctx.shadowBlur=m.blur.number,f.ctx.fillStyle=m.inset?ro(m.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),A.label=2;case 2:l=0,c=0,d=i,A.label=3;case 3:return c<d.length?(u=d[c],u.style!==0&&!Jm(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return A.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,l,r.curves,3)];case 6:return A.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,l,r.curves)];case 8:return A.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,l,r.curves)];case 10:A.sent(),A.label=11;case 11:l++,A.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,a,n,i,o){return Rl(this,void 0,void 0,function(){var l,c,d,u,f,A,m,g,x,v,y,N,E,B,_,I,_,I;return sl(this,function(j){return this.ctx.save(),l=Uxt(i,n),c=qZ(i,n),o===2&&(this.path(c),this.ctx.clip()),ou(c[0])?(d=c[0].start.x,u=c[0].start.y):(d=c[0].x,u=c[0].y),ou(c[1])?(f=c[1].end.x,A=c[1].end.y):(f=c[1].x,A=c[1].y),n===0||n===2?m=Math.abs(d-f):m=Math.abs(u-A),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(c.slice(0,2)),g=a<3?a*3:a*2,x=a<3?a*2:a,o===3&&(g=a,x=a),v=!0,m<=g*2?v=!1:m<=g*2+x?(y=m/(2*g+x),g*=y,x*=y):(N=Math.floor((m+x)/(g+x)),E=(m-N*g)/(N-1),B=(m-(N+1)*g)/N,x=B<=0||Math.abs(x-E)<Math.abs(x-B)?E:B),v&&(o===3?this.ctx.setLineDash([0,g+x]):this.ctx.setLineDash([g,x])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=a):this.ctx.lineWidth=a*2+1.1,this.ctx.strokeStyle=ro(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(ou(c[0])&&(_=c[3],I=c[0],this.ctx.beginPath(),this.formatPath([new ir(_.end.x,_.end.y),new ir(I.start.x,I.start.y)]),this.ctx.stroke()),ou(c[1])&&(_=c[1],I=c[2],this.ctx.beginPath(),this.formatPath([new ir(_.end.x,_.end.y),new ir(I.start.x,I.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return Rl(this,void 0,void 0,function(){var a;return sl(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ro(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),a=Rxt(r),[4,this.renderStack(a)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(Ame),Wxt=function(e){return e instanceof YAe||e instanceof XAe?!0:e instanceof JU&&e.type!==f_&&e.type!==u_},Xxt=function(e,t){switch(e){case 0:return m_(t);case 2:return Bxt(t);case 1:default:return p_(t)}},Yxt=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Jxt=["-apple-system","system-ui"],Zxt=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return Jxt.indexOf(t)===-1}):e},evt=function(e){Cf(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n.canvas=a.canvas?a.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=a,n.canvas.width=Math.floor(a.width*a.scale),n.canvas.height=Math.floor(a.height*a.scale),n.canvas.style.width=a.width+"px",n.canvas.style.height=a.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-a.x,-a.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+a.width+"x"+a.height+" at "+a.x+","+a.y+") with scale "+a.scale),n}return t.prototype.render=function(r){return Rl(this,void 0,void 0,function(){var a,n;return sl(this,function(i){switch(i.label){case 0:return a=yR(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,tvt(a)];case 1:return n=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ro(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(Ame),tvt=function(e){return new Promise(function(t,r){var a=new Image;a.onload=function(){t(a)},a.onerror=r,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},rvt=function(){function e(t){var r=t.id,a=t.enabled;this.id=r,this.enabled=a,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Kj([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Kj([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Kj([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Kj([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),avt=function(){function e(t,r){var a;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new rvt({id:this.instanceName,enabled:t.logging}),this.cache=(a=t.cache)!==null&&a!==void 0?a:new Nxt(this,t)}return e.instanceCount=1,e}(),SR=function(e,t){return t===void 0&&(t={}),nvt(e,t)};typeof window<"u"&&lme.setContext(window);var nvt=function(e,t){return Rl(void 0,void 0,void 0,function(){var r,a,n,i,o,l,c,d,u,f,A,m,g,x,v,y,N,E,B,_,j,I,j,k,T,L,F,S,M,H,K,Q,G,X,Z,U,Y,P,D,W;return sl(this,function(J){switch(J.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(a=r.defaultView,!a)throw new Error("Document is not attached to a Window");return n={allowTaint:(k=t.allowTaint)!==null&&k!==void 0?k:!1,imageTimeout:(T=t.imageTimeout)!==null&&T!==void 0?T:15e3,proxy:t.proxy,useCORS:(L=t.useCORS)!==null&&L!==void 0?L:!1},i=iR({logging:(F=t.logging)!==null&&F!==void 0?F:!0,cache:t.cache},n),o={windowWidth:(S=t.windowWidth)!==null&&S!==void 0?S:a.innerWidth,windowHeight:(M=t.windowHeight)!==null&&M!==void 0?M:a.innerHeight,scrollX:(H=t.scrollX)!==null&&H!==void 0?H:a.pageXOffset,scrollY:(K=t.scrollY)!==null&&K!==void 0?K:a.pageYOffset},l=new AA(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new avt(i,l),d=(Q=t.foreignObjectRendering)!==null&&Q!==void 0?Q:!1,u={allowTaint:(G=t.allowTaint)!==null&&G!==void 0?G:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:d,copyStyles:d},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),f=new $Z(c,e,u),A=f.clonedReferenceElement,A?[4,f.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=J.sent(),g=ZU(A)||ixt(A)?P0t(A.ownerDocument):z3(c,A),x=g.width,v=g.height,y=g.left,N=g.top,E=svt(c,A,t.backgroundColor),B={canvas:t.canvas,backgroundColor:E,scale:(Z=(X=t.scale)!==null&&X!==void 0?X:a.devicePixelRatio)!==null&&Z!==void 0?Z:1,x:((U=t.x)!==null&&U!==void 0?U:0)+y,y:((Y=t.y)!==null&&Y!==void 0?Y:0)+N,width:(P=t.width)!==null&&P!==void 0?P:Math.ceil(x),height:(D=t.height)!==null&&D!==void 0?D:Math.ceil(v)},d?(c.logger.debug("Document cloned, using foreign object rendering"),j=new evt(c,B),[4,j.render(A)]):[3,3];case 2:return _=J.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+y+","+N+" with size "+x+"x"+v+" using computed rendering"),c.logger.debug("Starting DOM parsing"),I=eme(c,A),E===I.styles.backgroundColor&&(I.styles.backgroundColor=X0.TRANSPARENT),c.logger.debug("Starting renderer for element at "+B.x+","+B.y+" with size "+B.width+"x"+B.height),j=new Kxt(c,B),[4,j.render(I)];case 4:_=J.sent(),J.label=5;case 5:return(!((W=t.removeContainer)!==null&&W!==void 0)||W)&&($Z.destroy(m)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,_]}})})},svt=function(e,t,r){var a=t.ownerDocument,n=a.documentElement?D2(e,getComputedStyle(a.documentElement).backgroundColor):X0.TRANSPARENT,i=a.body?D2(e,getComputedStyle(a.body).backgroundColor):X0.TRANSPARENT,o=typeof r=="string"?D2(e,r):r===null?X0.TRANSPARENT:4294967295;return t===a.documentElement?Jm(n)?Jm(i)?o:i:n:o};const ivt=Object.freeze(Object.defineProperty({__proto__:null,default:SR},Symbol.toStringTag,{value:"Module"})),ovt=e=>{const[t,r]=w.useState(!1),[a,n]=w.useState(null);return w.useEffect(()=>{const i="google-maps-script";if(document.getElementById(i)||window.google){r(!0);return}const o=document.createElement("script");o.id=i,o.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,o.async=!0,o.defer=!0,o.onload=()=>r(!0),o.onerror=()=>n(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(o)},[e]),{isLoaded:t,error:a}},mme=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de práctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisión y mentoría"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicación interna"}],lvt=["Mecánica Industrial","Mecánica Automotriz"],cvt=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:mme.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),WZ=({empresas:e,isLoaded:t,route:r})=>{const a=w.useRef(null),n=w.useRef(null),i=w.useRef([]),o=w.useRef(null),l=e.filter(c=>{var d,u;return((d=c.coordenadas)==null?void 0:d.lat)&&((u=c.coordenadas)==null?void 0:u.lng)});return w.useEffect(()=>{!t||!a.current||!window.google||(n.current||(n.current=new window.google.maps.Map(a.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),o.current||(o.current=new window.google.maps.DirectionsRenderer),i.current.forEach(c=>c.setMap(null)),i.current=[],o.current.setMap(null),r?(o.current.setMap(n.current),o.current.setDirections(r)):l.forEach(c=>{const d=new window.google.maps.Marker({position:{lat:c.coordenadas.lat,lng:c.coordenadas.lng},map:n.current,title:c.nombre}),u=new window.google.maps.InfoWindow({content:`<div style="font-weight: bold;">${c.nombre}</div><div>${c.direccion}</div>`});d.addListener("click",()=>{u.open(n.current,d)}),i.current.push(d)}))},[l,t,r]),s.jsxs("div",{className:"relative",id:"map-container-for-pdf",children:[s.jsx("div",{ref:a,className:"h-[600px] w-full rounded-lg border"}),!r&&l.length===0&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:s.jsx("div",{className:"text-center p-6",children:s.jsx("p",{className:"text-gray-600 text-lg",children:"📍 No hay empresas geo-localizadas"})})})]})},dvt=({route:e,travelMode:t})=>{const n=t==="TRANSIT"?45:30,i=e.routes[0].legs.reduce((f,A)=>{var m;return f+(((m=A.duration)==null?void 0:m.value)||0)},0),l=(e.routes[0].legs.length>1?e.routes[0].legs.length-1:0)*n*60,c=i+l,d=e.routes[0].legs.reduce((f,A)=>{var m;return f+(((m=A.distance)==null?void 0:m.value)||0)},0),u=t==="DRIVING"?d/1e3/12*1300:0;return s.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",id:"route-details-for-pdf",children:[s.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),s.jsx("div",{className:"space-y-4",children:e.routes[0].legs.map((f,A)=>{var m,g,x;return s.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("h4",{className:"font-bold text-lg",children:["Tramo ",A+1,": ",f.start_address.split(",")[0]," → ",f.end_address.split(",")[0]]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[(m=f.duration)==null?void 0:m.text," • ",(g=f.distance)==null?void 0:g.text]})]}),t==="TRANSIT"&&s.jsx("div",{className:"space-y-3",children:(x=f.steps)==null?void 0:x.map((v,y)=>v.transit&&s.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[s.jsx("span",{className:"text-lg",children:"🚌"}),s.jsx("span",{dangerouslySetInnerHTML:{__html:v.instructions}})]},y))})]},A)})}),s.jsxs("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:[s.jsxs("p",{children:["Tiempo de viaje: ",Math.round(i/60)," min"]}),s.jsxs("p",{children:["Tiempo en paradas: ",Math.round(l/60)," min"]}),s.jsxs("p",{className:"text-lg",children:["Duración Total Estimada: ",Math.round(c/60)," min"]}),s.jsxs("p",{children:["Distancia Total: ",(d/1e3).toFixed(1)," km"]}),t==="DRIVING"&&s.jsxs("p",{className:"text-green-600",children:["Costo Bencina Aprox: $",u.toLocaleString("es-CL",{maximumFractionDigits:0})]})]})]})},XZ=async e=>window.google?new Promise(t=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["geometry"]},(a,n)=>{var i;n===window.google.maps.places.PlacesServiceStatus.OK&&((i=a==null?void 0:a.geometry)!=null&&i.location)?t({lat:a.geometry.location.lat(),lng:a.geometry.location.lng()}):t(null)})}):null,uvt=({data:e})=>{const t=["#0088FE","#00C49F","#FFBB28","#FF8042"];return s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[s.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),s.jsx(oi,{width:"100%",height:300,children:s.jsxs(kE,{children:[s.jsx(cy,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:e.porEspecialidad.map((r,a)=>s.jsx(Lh,{fill:t[a%t.length]},`cell-${a}`))}),s.jsx(ii,{})]})})]}),s.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[s.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),s.jsx(oi,{width:"100%",height:300,children:s.jsxs(Ad,{data:e.porSupervisor,layout:"vertical",children:[s.jsx(uu,{strokeDasharray:"3 3"}),s.jsx(yl,{type:"number"}),s.jsx(wl,{type:"category",dataKey:"name",width:150}),s.jsx(ii,{}),s.jsx(Ec,{dataKey:"value",fill:"#82ca9d",name:"Empresas"})]})})]}),s.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 lg:col-span-3",children:[s.jsx("h3",{className:"font-bold mb-4",children:"Distribución por Comuna"}),s.jsx(oi,{width:"100%",height:300,children:s.jsxs(Ad,{data:e.porComuna,children:[s.jsx(uu,{strokeDasharray:"3 3"}),s.jsx(yl,{dataKey:"name"}),s.jsx(wl,{}),s.jsx(ii,{}),s.jsx(Ec,{dataKey:"value",fill:"#8884d8",name:"Empresas"})]})})]}),s.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[s.jsx("h3",{className:"font-bold mb-4",children:"Calificación por Ámbito"}),s.jsx(oi,{width:"100%",height:300,children:s.jsxs(mue,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[s.jsx(T7,{}),s.jsx(CE,{dataKey:"subject"}),s.jsx(EE,{angle:30,domain:[0,5]}),s.jsx(u3,{name:"Promedio",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),s.jsx(ii,{})]})})]}),s.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[s.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),s.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:s.jsx("ul",{className:"space-y-2",children:e.ranking.map((r,a)=>s.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50",children:[s.jsxs("span",{className:"font-semibold",children:[a+1,". ",r.nombre]}),s.jsxs("span",{className:"font-bold text-amber-500",children:[r.promedio.toFixed(1)," ★"]})]},r.id))})})]})]})},fvt=({data:e})=>{var o;const t=["#6366F1","#06B6D4","#22C55E","#F59E0B","#EF4444"],r=((o=e==null?void 0:e.porEspecialidad)==null?void 0:o.reduce((l,c)=>l+(c.value||0),0))||0,a=((e==null?void 0:e.ranking)||[]).filter(l=>l.coordenadas).length||0,n=(()=>{const l=((e==null?void 0:e.ranking)||[]).map(c=>c.promedio).filter(c=>!isNaN(c)&&c>0);return l.length?l.reduce((c,d)=>c+d,0)/l.length:0})(),i=new Set(((e==null?void 0:e.porSupervisor)||[]).map(l=>l.name)).size;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-indigo-500 to-indigo-400 text-white shadow-md",children:[s.jsx("div",{className:"text-xs opacity-90",children:"Empresas"}),s.jsx("div",{className:"text-2xl font-bold",children:r})]}),s.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-cyan-500 to-cyan-400 text-white shadow-md",children:[s.jsx("div",{className:"text-xs opacity-90",children:"Geo-localizadas"}),s.jsx("div",{className:"text-2xl font-bold",children:a})]}),s.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-emerald-500 to-emerald-400 text-white shadow-md",children:[s.jsx("div",{className:"text-xs opacity-90",children:"Promedio Calificación"}),s.jsxs("div",{className:"text-2xl font-bold",children:[n.toFixed(1)," ★"]})]}),s.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-amber-500 to-amber-400 text-white shadow-md",children:[s.jsx("div",{className:"text-xs opacity-90",children:"Supervisores Activos"}),s.jsx("div",{className:"text-2xl font-bold",children:i})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900 col-span-1",children:[s.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),s.jsx(oi,{width:"100%",height:300,children:s.jsxs(kE,{children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"grad1",x1:"0",y1:"0",x2:"1",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#6366F1"}),s.jsx("stop",{offset:"100%",stopColor:"#22C55E"})]})}),s.jsx(cy,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,strokeWidth:3,stroke:"#ffffff",children:e.porEspecialidad.map((l,c)=>s.jsx(Lh,{fill:t[c%t.length]},`cell-${c}`))}),s.jsx(ii,{})]})}),s.jsx("div",{className:"-mt-24 h-0 flex items-center justify-center pointer-events-none select-none",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Total"}),s.jsx("div",{className:"text-2xl font-bold",children:r})]})})]}),s.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900 col-span-1 md:col-span-2",children:[s.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),s.jsx(oi,{width:"100%",height:300,children:s.jsxs(Ad,{data:e.porSupervisor,layout:"vertical",margin:{left:12,right:12},children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"gradGreen",x1:"0",y1:"0",x2:"1",y2:"0",children:[s.jsx("stop",{offset:"0%",stopColor:"#06B6D4"}),s.jsx("stop",{offset:"100%",stopColor:"#22C55E"})]})}),s.jsx(yl,{type:"number",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12}}),s.jsx(wl,{type:"category",dataKey:"name",width:140,axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:12}}),s.jsx(ii,{cursor:{fill:"rgba(148,163,184,0.15)"}}),s.jsx(Ec,{dataKey:"value",fill:"url(#gradGreen)",name:"Empresas",radius:[8,8,8,8]})]})})]}),s.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900 col-span-1 lg:col-span-3",children:[s.jsx("h3",{className:"font-bold mb-4",children:"Distribución por Comuna"}),s.jsx(oi,{width:"100%",height:300,children:s.jsxs(Ad,{data:e.porComuna,margin:{left:0,right:0},children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"gradIndigo",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#6366F1"}),s.jsx("stop",{offset:"100%",stopColor:"#8B5CF6"})]})}),s.jsx(yl,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:12},interval:0,angle:-15,height:60,dy:10}),s.jsx(wl,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12}}),s.jsx(ii,{cursor:{fill:"rgba(99,102,241,0.08)"}}),s.jsx(Ec,{dataKey:"value",name:"Empresas",fill:"url(#gradIndigo)",radius:[6,6,0,0]})]})})]}),s.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900 col-span-1",children:[s.jsx("h3",{className:"font-bold mb-4",children:"Calificación por Ámbito"}),s.jsx(oi,{width:"100%",height:300,children:s.jsxs(mue,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[s.jsx(T7,{stroke:"#e2e8f0"}),s.jsx(CE,{dataKey:"subject",tick:{fill:"#64748b",fontSize:12}}),s.jsx(EE,{angle:30,domain:[0,5],tick:{fill:"#94a3b8",fontSize:10}}),s.jsx(u3,{name:"Promedio",dataKey:"A",stroke:"#06B6D4",fill:"#06B6D4",fillOpacity:.35}),s.jsx(ii,{})]})})]}),s.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900 col-span-1 md:col-span-2",children:[s.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),s.jsx("div",{className:"overflow-y-auto max-h-[300px] divide-y",children:(e.ranking||[]).map((l,c)=>s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-sm font-semibold text-slate-600",children:c+1}),s.jsx("span",{className:"font-medium",children:l.nombre})]}),s.jsxs("span",{className:"font-bold text-amber-500",children:[(l.promedio||0).toFixed(1)," ★"]})]},l.id||c))})]})]})]})},hvt=()=>{const{currentUser:e}=_E(),[t,r]=w.useState([]),[a,n]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState("todos"),[d,u]=w.useState("list"),[f,A]=w.useState(!0),[m,g]=w.useState(null),[x,v]=w.useState(!0),[y,N]=w.useState(null),[E,B]=w.useState(null),[_,I]=w.useState(null),[j,k]=w.useState([]),[T,L]=w.useState(null),[F,S]=w.useState(!1),[M,H]=w.useState("DRIVING"),[K,Q]=w.useState(""),[G,X]=w.useState([]),[Z,U]=w.useState({}),[Y,P]=w.useState({}),D="AIzaSyDjpSq97TvCxx7jIY7fEapTysmiZ1H30bg",{isLoaded:W,error:J}=ovt(D);w.useEffect(()=>{v(!0);const ne=Bfe(r),Ae=Vat(n),pe=$at(o),ke=qat(X);return v(!1),()=>{ne(),Ae(),pe(),ke(),Object.values(Z).forEach(Le=>Le.unsub&&Le.unsub())}},[]),w.useEffect(()=>{Object.values(Z).forEach(ke=>ke.unsub&&ke.unsub());const ne={},Ae=ke=>!!ke&&(ke.startsWith("3º")||ke.startsWith("4º"));let pe=i.filter(ke=>Ae(ke.curso));return l!=="todos"&&(pe=pe.filter(ke=>(ke.curso||"")===l)),pe.forEach(ke=>{const Le=Pft(ke.id,qe=>{U(ze=>({...ze,[ke.id]:{...ze[ke.id]||{},notas:qe}}))});ne[ke.id]={notas:[],unsub:Le}}),U(ke=>({...ke,...ne})),()=>{Object.values(ne).forEach(ke=>ke.unsub&&ke.unsub())}},[i,l]);const ce=w.useMemo(()=>{const ne=t.reduce((qe,ze)=>{const Re=ze.area||"Sin especificar";return qe[Re]=(qe[Re]||0)+1,qe},{}),Ae=t.reduce((qe,ze)=>{var We;const Re=((We=ze.docenteSupervisor)==null?void 0:We.nombreCompleto)||"Sin asignar";return qe[Re]=(qe[Re]||0)+1,qe},{}),pe=t.reduce((qe,ze)=>{const Re=ze.direccion.split(",").map(ct=>ct.trim()),We=Re.length>1?Re[1]:"Desconocida";return qe[We]=(qe[We]||0)+1,qe},{}),ke=mme.map(qe=>{const ze=t.flatMap(We=>{var ct;return(ct=We.calificaciones.find(Ze=>Ze.elemento===qe.elemento))==null?void 0:ct.score}).filter(We=>We!=null),Re=ze.length>0?ze.reduce((We,ct)=>We+ct,0)/ze.length:0;return{subject:qe.elemento.split(" ")[0],A:Re,fullMark:5}}),Le=t.map(qe=>{const ze=qe.calificaciones.map(We=>We.score).filter(We=>We!=null),Re=ze.length>0?ze.reduce((We,ct)=>We+ct,0)/ze.length:0;return{...qe,promedio:Re}}).filter(qe=>qe.promedio>0).sort((qe,ze)=>ze.promedio-qe.promedio);return{porEspecialidad:Object.entries(ne).map(([qe,ze])=>({name:qe,value:ze})),porSupervisor:Object.entries(Ae).map(([qe,ze])=>({name:qe,value:ze})),porComuna:Object.entries(pe).map(([qe,ze])=>({name:qe,value:ze})),calificacionPorAmbito:ke,ranking:Le}},[t]),ie=async()=>{if(m)try{const ne=new Set(m.estudiantesAsignados||[]),Ae=m.id,pe=[];if(ne.size>0){const ke=new Map(i.map(Le=>[Le.id,Le]));for(const Le of t){if(Ae&&Le.id===Ae)continue;const qe=Le.estudiantesAsignados||[];for(const ze of ne)if(qe.includes(ze)){const Re=ke.get(ze);Re&&pe.push({student:Re,empresa:Le})}}}if(pe.length>0){const Le=`Algunos estudiantes ya están asignados a otra empresa:

${pe.map(Re=>`• ${Re.student.nombreCompleto}${Re.student.curso?` (${Re.student.curso})`:""} → ${Re.empresa.nombre}`).join(`
`)}

¿Deseas reasignarlos a "${m.nombre}"? Esto los quitará de su empresa anterior.`;if(!window.confirm(Le))return;const ze=new Map;for(const{student:Re,empresa:We}of pe)ze.has(We.id)||ze.set(We.id,{empresa:We,ids:new Set}),ze.get(We.id).ids.add(Re.id);for(const{empresa:Re,ids:We}of ze.values()){const ct=(Re.estudiantesAsignados||[]).filter(Ze=>!We.has(Ze));await pw({...Re,estudiantesAsignados:ct})}}await pw(m),u("list"),g(null),N(null)}catch(ne){console.error(ne),alert("No se pudo guardar la empresa.")}},re=async ne=>{window.confirm("¿Está seguro de eliminar esta empresa?")&&await zat(ne)},de=(ne,Ae)=>{g(pe=>pe?{...pe,[ne]:Ae}:null)},oe=async ne=>{var Ae;if(N(ne),(Ae=ne==null?void 0:ne.value)!=null&&Ae.place_id&&W){const pe=await XZ(ne.value.place_id);de("direccion",ne.label||""),de("coordenadas",pe)}else de("direccion",(ne==null?void 0:ne.label)||"")},be=ne=>{g(JSON.parse(JSON.stringify(ne))),ne.direccion&&N({label:ne.direccion,value:{description:ne.direccion}}),u("form")},q=async ne=>{var Ae;if(B(ne),(Ae=ne==null?void 0:ne.value)!=null&&Ae.place_id&&W){const pe=await XZ(ne.value.place_id);I(pe)}},we=ne=>{k(Ae=>Ae.some(pe=>pe.id===ne.id)?Ae.filter(pe=>pe.id!==ne.id):[...Ae,ne])},Te=()=>{if(!_||j.length===0||!W)return;S(!0);const ne=new window.google.maps.DirectionsService,Ae=j.filter(pe=>pe.coordenadas).map(pe=>({location:pe.coordenadas,stopover:!0}));ne.route({origin:_,destination:_,waypoints:Ae,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode[M]},(pe,ke)=>{S(!1),ke===window.google.maps.DirectionsStatus.OK&&pe?L(pe):alert("No se pudo calcular la ruta: "+ke)})},Ee=()=>{L(null),B(null),I(null),k([]),Q("")},ue=async()=>{if(!K||!E||!_||j.length===0){alert("Por favor, asigna un nombre a la ruta y asegúrate de tener un punto de partida y empresas seleccionadas.");return}const ne={nombre:K,startPoint:{label:E.label,coords:_},empresas:j.map(Ae=>({id:Ae.id,nombre:Ae.nombre,coordenadas:Ae.coordenadas})),travelMode:M};try{await Gat(ne),alert("Ruta guardada con éxito."),u("saved-routes")}catch{alert("Error al guardar la ruta.")}},ge=async()=>{const ne=document.getElementById("map-container-for-pdf"),Ae=document.getElementById("route-details-for-pdf");if(!ne||!Ae)return;const pe=new xr("p","mm","a4"),ke=pe.internal.pageSize.getWidth();pe.text(`Ruta de Supervisión: ${K||"Sin nombre"}`,10,15),pe.setFontSize(10),pe.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,10,22);const qe=(await SR(ne,{useCORS:!0})).toDataURL("image/png");pe.addImage(qe,"PNG",10,30,ke-20,100);const Re=(await SR(Ae)).toDataURL("image/png"),We=pe.getImageProperties(Re),ct=We.height*(ke-20)/We.width;pe.addImage(Re,"PNG",10,135,ke-20,ct),pe.save(`ruta-${K||"supervision"}.pdf`)},he=ne=>{B({label:ne.startPoint.label,value:null}),I(ne.startPoint.coords),k(ne.empresas),H(ne.travelMode),Q(ne.nombre),u("route")},ve=async ne=>{window.confirm("¿Estás seguro de que quieres eliminar esta ruta guardada?")&&(await Kat(ne),alert("Ruta eliminada."))},le=async(ne,Ae)=>{try{const pe=t.find(qe=>(qe.estudiantesAsignados||[]).includes(ne.id))||null;if(!Ae){if(!pe)return;const qe=(pe.estudiantesAsignados||[]).filter(ze=>ze!==ne.id);await pw({...pe,estudiantesAsignados:qe});return}const ke=t.find(qe=>qe.id===Ae);if(!ke){alert("Empresa no encontrada.");return}if(pe&&pe.id===ke.id)return;if(pe){const qe=`"${ne.nombreCompleto}" ya está asignado a "${pe.nombre}".

¿Deseas reasignarlo a "${ke.nombre}"?`;if(!window.confirm(qe))return}if(pe){const qe=(pe.estudiantesAsignados||[]).filter(ze=>ze!==ne.id);await pw({...pe,estudiantesAsignados:qe})}const Le=new Set(ke.estudiantesAsignados||[]);Le.add(ne.id),await pw({...ke,estudiantesAsignados:Array.from(Le)})}catch(pe){console.error(pe),alert("No se pudo asignar la empresa.")}};return x?s.jsx("div",{className:"text-center p-8",children:"Cargando..."}):J?s.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-6 rounded-xl shadow-md",role:"alert",children:[s.jsx("p",{className:"font-bold text-lg",children:"Error de Configuración de Google Maps"}),s.jsx("p",{className:"mt-2",children:J.message}),s.jsxs("p",{className:"mt-4 text-sm",children:["Para solucionar este problema, por favor crea un archivo llamado ",s.jsx("code",{children:".env.local"})," en la raíz del proyecto y añade la siguiente línea:"]}),s.jsx("pre",{className:"bg-gray-800 text-white p-3 rounded-md mt-2 text-sm",children:"VITE_GOOGLE_MAPS_API_KEY=TU_API_KEY_DE_GOOGLE_MAPS"}),s.jsxs("p",{className:"mt-2 text-sm",children:["Reemplaza ",s.jsx("code",{children:"TU_API_KEY_DE_GOOGLE_MAPS"}),' con tu clave real. Asegúrate de que la clave tenga habilitada la "Maps JavaScript API" y la "Places API" en tu consola de Google Cloud.']})]}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Gestión de Empresas"}),s.jsxs("div",{className:"flex items-center gap-4",children:[d!=="list"&&s.jsx("button",{onClick:()=>{u("list"),N(null),g(null),Ee()},className:"font-semibold hover:text-blue-600",children:"← Volver al listado"}),d==="list"&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>u("dashboard"),title:"Dashboard",className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[s.jsx(Lae,{size:18})," Dashboard"]}),s.jsx("button",{onClick:()=>u("estudiantes"),title:"Estudiantes",className:"bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Estudiantes"}),s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-100 dark:bg-slate-700 text-sm",children:[s.jsx("span",{children:"Vista moderna"}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"sr-only peer",checked:f,onChange:ne=>A(ne.target.checked)}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full dark:bg-gray-600 peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:bg-blue-600 after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all"})]})]}),s.jsx("button",{onClick:()=>u("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),s.jsx("button",{onClick:()=>u("route"),title:"Ruta de Supervisión",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisión"}),s.jsx("button",{onClick:()=>u("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:"🗺️"}),s.jsx("button",{onClick:()=>{g(cvt()),u("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),d==="dashboard"&&(f?s.jsx(fvt,{data:ce}):s.jsx(uvt,{data:ce})),d==="estudiantes"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Estudiantes (3º y 4º)"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Curso"}),s.jsxs("select",{value:l,onChange:ne=>c(ne.target.value),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"todos",children:"Todos"}),Vm.map(ne=>s.jsx("option",{value:ne,children:ne},ne))]})]})]}),(()=>{const ne=ke=>!!ke&&(ke.startsWith("3º")||ke.startsWith("4º"));let Ae=i.filter(ke=>ne(ke.curso));l!=="todos"&&(Ae=Ae.filter(ke=>(ke.curso||"")===l));const pe=ke=>{for(const Le of t){const qe=Le.estudiantesAsignados||[];if(qe.includes(ke.id)||ke.email&&qe.includes(ke.email))return Le}return null};return Ae.length===0?s.jsx("div",{className:"text-center p-8 text-slate-500 bg-slate-50 dark:bg-slate-700/30 rounded-lg",children:"No hay estudiantes para el filtro seleccionado."}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Ae.map(ke=>{var qe,ze,Re,We,ct;const Le=pe(ke);return s.jsxs("div",{className:"p-4 rounded-xl border bg-white dark:bg-slate-900 flex flex-col gap-3 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 text-indigo-700 flex items-center justify-center font-bold",children:((qe=ke.nombreCompleto)==null?void 0:qe.split(" ").map(Ze=>Ze[0]).slice(0,2).join(""))||"E"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:ke.nombreCompleto}),s.jsx("div",{className:"text-xs text-slate-500",children:ke.curso||"—"})]})]}),s.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700"}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(n$,{className:"w-4 h-4 text-slate-400 mt-1"}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"font-medium",children:"Empresa:"})," ",(Le==null?void 0:Le.nombre)||"Sin empresa asignada"]}),s.jsx("div",{className:"text-xs text-slate-500",children:(Le==null?void 0:Le.direccion)||""})]})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Lg,{className:"w-4 h-4 text-slate-400 mt-1"}),s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"font-medium",children:"Supervisor:"})," ",((ze=Le==null?void 0:Le.docenteSupervisor)==null?void 0:ze.nombreCompleto)||"—"]})]}),s.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{className:"text-xs text-slate-500",children:"Asignar empresa"}),s.jsxs("select",{value:(Le==null?void 0:Le.id)||"",onChange:Ze=>le(ke,Ze.target.value),className:"border rounded-md px-2 py-1 text-sm dark:bg-slate-800 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Sin empresa"}),t.slice().sort((Ze,Qe)=>(Ze.nombre||"").localeCompare(Qe.nombre||"","es")).map(Ze=>s.jsx("option",{value:Ze.id,children:Ze.nombre},Ze.id))]})]}),s.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Notas de práctica"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("select",{value:((Re=Y[ke.id])==null?void 0:Re.color)||"yellow",onChange:Ze=>P(Qe=>{var wt;return{...Qe,[ke.id]:{texto:((wt=Qe[ke.id])==null?void 0:wt.texto)||"",color:Ze.target.value}}}),className:"border rounded px-1 py-0.5 text-xs dark:bg-slate-800 dark:border-slate-600",children:[s.jsx("option",{value:"yellow",children:"Amarillo"}),s.jsx("option",{value:"pink",children:"Rosado"}),s.jsx("option",{value:"green",children:"Verde"}),s.jsx("option",{value:"blue",children:"Azul"})]}),s.jsx("button",{className:"text-xs bg-indigo-500 hover:bg-indigo-600 text-white px-2 py-1 rounded",onClick:async()=>{var ar,qt;const Ze=(((ar=Y[ke.id])==null?void 0:ar.texto)||"").trim(),Qe=((qt=Y[ke.id])==null?void 0:qt.color)||"yellow";if(!Ze)return;const wt={estudianteId:ke.id,estudianteNombre:ke.nombreCompleto,curso:ke.curso,autorId:(e==null?void 0:e.id)||"system",autorNombre:(e==null?void 0:e.nombreCompleto)||"Usuario",texto:Ze,color:Qe};Le!=null&&Le.id&&(wt.empresaId=Le.id),Le!=null&&Le.nombre&&(wt.empresaNombre=Le.nombre),await Rft(wt),P(gr=>({...gr,[ke.id]:{texto:"",color:Qe}}))},children:"Agregar"})]})]}),s.jsx("textarea",{value:((We=Y[ke.id])==null?void 0:We.texto)||"",onChange:Ze=>P(Qe=>{var wt;return{...Qe,[ke.id]:{texto:Ze.target.value,color:((wt=Qe[ke.id])==null?void 0:wt.color)||"yellow"}}}),placeholder:"Escribe una nota breve...",className:"w-full border rounded p-2 text-sm dark:bg-slate-800 dark:border-slate-600",rows:2}),s.jsx("div",{className:"space-y-2",children:(((ct=Z[ke.id])==null?void 0:ct.notas)||[]).map(Ze=>s.jsxs("div",{className:`rounded p-2 text-sm shadow border ${Ze.color==="pink"?"bg-pink-50 border-pink-200":Ze.color==="green"?"bg-green-50 border-green-200":Ze.color==="blue"?"bg-blue-50 border-blue-200":"bg-yellow-50 border-yellow-200"}`,children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"font-medium text-slate-700",children:Ze.autorNombre||"Usuario"}),s.jsx("button",{onClick:()=>Lft(Ze.id),className:"text-xs text-red-600 hover:underline",children:"Eliminar"})]}),s.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:Ze.texto})]},Ze.id))})]})]},ke.id)})})})()]}),d==="saved-routes"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisión Guardadas"}),s.jsx("div",{className:"space-y-3",children:G.length===0?s.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):G.map(ne=>s.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-bold",children:ne.nombre}),s.jsxs("p",{className:"text-sm text-slate-500",children:[ne.empresas.length," paradas"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>he(ne),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),s.jsx("button",{onClick:()=>ve(ne.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},ne.id))})]}),d==="route"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisión"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),s.jsx("input",{type:"text",value:K,onChange:ne=>Q(ne.target.value),placeholder:"Ej: Supervisión Zona Norte",className:"input-style w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),s.jsx(WJ,{apiKey:D,selectProps:{value:E,onChange:q,placeholder:"Buscar dirección de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),s.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[s.jsx("button",{onClick:()=>H("DRIVING"),className:`w-full py-2 rounded-md transition ${M==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automóvil"}),s.jsx("button",{onClick:()=>H("TRANSIT"),className:`w-full py-2 rounded-md transition ${M==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Público"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),s.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:t.filter(ne=>ne.coordenadas).map(ne=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:`route-${ne.id}`,checked:j.some(Ae=>Ae.id===ne.id),onChange:()=>we(ne),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:`route-${ne.id}`,className:"ml-3 text-sm text-gray-700",children:ne.nombre})]},ne.id))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("button",{onClick:Te,disabled:!_||j.length===0||F,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:F?"Calculando...":"Visualizar Ruta"}),s.jsx("button",{onClick:ue,disabled:!K||!_||j.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),s.jsx("button",{onClick:ge,disabled:!T,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),s.jsx("button",{onClick:Ee,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),s.jsx("div",{children:s.jsx(WZ,{empresas:j,isLoaded:W,route:T})})]}),T&&s.jsx(dvt,{route:T,travelMode:M})]}),d==="map"&&s.jsx(WZ,{empresas:t,isLoaded:W}),d==="list"&&s.jsx("div",{className:"space-y-3",children:t.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):t.map(ne=>{var Ae,pe;return s.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg",children:ne.nombre}),s.jsxs("p",{className:"text-sm text-slate-500",children:[ne.rut," | ",ne.direccion]}),s.jsxs("p",{className:"text-sm text-slate-600",children:["Área: ",ne.area||"No especificada"," | Cupos: ",ne.cupos," | Supervisor: ",((Ae=ne.docenteSupervisor)==null?void 0:Ae.nombreCompleto)||"Ninguno"," | Estudiantes: ",((pe=ne.estudiantesAsignados)==null?void 0:pe.length)||0]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>be(ne),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),s.jsx("button",{onClick:()=>re(ne.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},ne.id)})}),d==="form"&&m&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"id"in m?"Editando Empresa":"Nueva Empresa"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"relative flex items-center",children:[s.jsx(n$,{className:"absolute left-3 w-5 h-5 text-slate-400"}),s.jsx("input",{value:m.nombre,onChange:ne=>de("nombre",ne.target.value),placeholder:"Nombre Empresa",className:"input-style pl-10",required:!0})]}),s.jsxs("div",{className:"relative flex items-center",children:[s.jsx(dje,{className:"absolute left-3 w-5 h-5 text-slate-400"}),s.jsx("input",{value:m.rut,onChange:ne=>de("rut",ne.target.value),placeholder:"RUT Empresa",className:"input-style pl-10",required:!0})]}),s.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[s.jsx(J2,{className:"absolute left-3 top-5 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),s.jsx("div",{className:"w-full pl-10",children:s.jsx(WJ,{apiKey:D,selectProps:{value:y,onChange:oe,placeholder:"Buscar dirección..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})})]}),s.jsxs("div",{className:"relative flex items-center",children:[s.jsx(Lg,{className:"absolute left-3 w-5 h-5 text-slate-400"}),s.jsx("input",{value:m.contacto,onChange:ne=>de("contacto",ne.target.value),placeholder:"Contacto",className:"input-style pl-10"})]}),s.jsxs("div",{className:"relative flex items-center",children:[s.jsx(Mae,{className:"absolute left-3 w-5 h-5 text-slate-400"}),s.jsx("input",{type:"email",value:m.email||"",onChange:ne=>de("email",ne.target.value),placeholder:"Correo electrónico",className:"input-style pl-10"})]}),s.jsxs("div",{className:"relative flex items-center",children:[s.jsx(_i,{className:"absolute left-3 w-5 h-5 text-slate-400"}),s.jsx("input",{type:"number",value:m.cupos,onChange:ne=>de("cupos",parseInt(ne.target.value)||1),placeholder:"N° de cupos",className:"input-style pl-10",min:"1"})]}),s.jsxs("div",{className:"relative flex items-center",children:[s.jsx(e1,{className:"absolute left-3 w-5 h-5 text-slate-400"}),s.jsxs("select",{value:m.area||"",onChange:ne=>de("area",ne.target.value),className:"input-style pl-10 w-full",children:[s.jsx("option",{value:"",disabled:!0,children:"Seleccione un área"}),lvt.map(ne=>s.jsx("option",{value:ne,children:ne},ne))]})]}),s.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[s.jsx(Lg,{className:"absolute left-3 w-5 h-5 text-slate-400"}),s.jsxs("select",{value:m.docenteSupervisor?JSON.stringify(m.docenteSupervisor):"",onChange:ne=>{const Ae=ne.target.value;de("docenteSupervisor",Ae?JSON.parse(Ae):void 0)},className:"input-style pl-10 w-full",children:[s.jsx("option",{value:"",children:"Sin supervisor asignado"}),a.map(ne=>s.jsx("option",{value:JSON.stringify({id:ne.id,nombreCompleto:ne.nombreCompleto}),children:ne.nombreCompleto},ne.id))]})]}),s.jsxs("div",{className:"md:col-span-2 border rounded-lg p-4 bg-white dark:bg-slate-900",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Estudiantes asignados"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-center",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Curso"}),s.jsxs("select",{className:"input-style w-full",value:l,onChange:ne=>c(ne.target.value),children:[s.jsx("option",{value:"todos",children:"Todos 3º y 4º"}),s.jsx("option",{value:"3ºA",children:"3ºA"}),s.jsx("option",{value:"3ºB",children:"3ºB"}),s.jsx("option",{value:"3ºC",children:"3ºC"}),s.jsx("option",{value:"3ºD",children:"3ºD"}),s.jsx("option",{value:"4ºA",children:"4ºA"}),s.jsx("option",{value:"4ºB",children:"4ºB"}),s.jsx("option",{value:"4ºC",children:"4ºC"}),s.jsx("option",{value:"4ºD",children:"4ºD"})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Selecciona estudiantes"}),s.jsxs("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2",children:[i.filter(ne=>{const Ae=(ne.curso||"").toUpperCase(),pe=/^([34])º[A-D]$/.test(Ae),ke=l==="todos"?pe:Ae===l.toUpperCase();return pe&&ke}).map(ne=>{const Ae=(m.estudiantesAsignados||[]).includes(ne.id);return s.jsxs("label",{className:"flex items-center gap-2 py-1 px-2 rounded hover:bg-slate-50",children:[s.jsx("input",{type:"checkbox",checked:Ae,onChange:pe=>{const ke=new Set(m.estudiantesAsignados||[]);pe.target.checked?ke.add(ne.id):ke.delete(ne.id),de("estudiantesAsignados",Array.from(ke))},className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),s.jsxs("span",{className:"text-sm",children:[ne.nombreCompleto," ",s.jsxs("span",{className:"text-slate-500",children:["(",ne.curso||"—",")"]})]})]},ne.id)}),i.filter(ne=>{const Ae=(ne.curso||"").toUpperCase(),pe=/^([34])º[A-D]$/.test(Ae),ke=l==="todos"?pe:Ae===l.toUpperCase();return pe&&ke}).length===0&&s.jsx("div",{className:"text-sm text-slate-500 p-2",children:"No hay estudiantes para el filtro seleccionado."})]})]})]})]})]}),s.jsxs("div",{className:"space-y-4 pt-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Evaluación de la Empresa"}),m.calificaciones.map((ne,Ae)=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[s.jsx(Hae,{className:"w-5 h-5 text-slate-400"}),s.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:ne.elemento}),s.jsxs("select",{value:ne.score||"",onChange:pe=>{const ke=[...m.calificaciones];ke[Ae].score=pe.target.value?parseInt(pe.target.value):null,de("calificaciones",ke)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[s.jsx("option",{value:"",children:"Sin calificar"}),[1,2,3,4,5].map(pe=>s.jsx("option",{value:pe,children:pe},pe))]})]},Ae))]}),s.jsx("div",{className:"pt-6",children:s.jsx("button",{onClick:ie,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!m.nombre||!m.rut,children:"Guardar Empresa"})})]})]})},e9="dpd_actividades",pme="dpd_respuestas",Avt="usuarios";function mvt(e,{includeArchived:t=!1}={}){const r=ut(st,e9),a=t?jt(r,Gt("createdAt","desc")):jt(r,Kt("isArchived","==",!1),Gt("createdAt","desc"));return rr(a,n=>{const i=n.docs.map(o=>({id:o.id,...o.data()}));e(i)})}async function pvt(e){const t=ut(st,e9);return(await Kr(t,{...e,isArchived:!1,createdAt:Da(),updatedAt:Da()})).id}async function gvt(e){const t=$t(st,e9,e);await Ua(t)}function xvt(e,t){const r=ut(st,pme),a=jt(r,Kt("activityId","==",e),Gt("createdAt","desc"));return rr(a,n=>{const i=n.docs.map(o=>({id:o.id,...o.data()}));t(i)})}async function vvt(e){const t=ut(st,pme);return(await Kr(t,{...e,createdAt:Da()})).id}function bvt(e,t){const r=ut(st,Avt),a=jt(r,Kt("profile","in",e));return rr(a,n=>{const i=n.docs.map(o=>{const l=o.data();return{id:o.id,nombre:(l==null?void 0:l.displayName)||(l==null?void 0:l.name)||(l==null?void 0:l.email)||"Sin nombre",profile:l==null?void 0:l.profile,email:l==null?void 0:l.email}});t(i)})}function gme(e){return(e||"").trim().split(/\s+/).filter(Boolean).length}const x_=500,YZ=()=>({titulo:"",dimension:"Liderazgo Curricular",subdimension:"Planificación y organización del currículo",creadorPerfil:"PROFESORADO",creadorId:"",creadorNombre:"",preguntas:[],aiTema:"",aiCantidad:3}),Sw=ft.memo(({title:e,icon:t,right:r,children:a})=>s.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-4 md:p-6 shadow-sm",children:[s.jsxs("header",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[t,e]}),r]}),a]})),yvt=ft.memo(({value:e,onChange:t,canCreate:r})=>{const a=(n,i)=>s.jsx("button",{onClick:()=>t(n),className:`px-3 py-1.5 rounded-lg text-sm border transition ${e===n?"bg-indigo-600 text-white border-indigo-600":"bg-white hover:bg-indigo-50"}`,disabled:n==="crear"&&!r,title:n==="crear"&&!r?"Tu perfil no crea actividades":"",children:i},n);return s.jsxs("div",{className:"flex items-center gap-2",children:[a("responder","Responder"),a("dashboard","Dashboard"),a("crear","Nueva actividad")]})}),wvt=ft.memo(({items:e,selectedId:t,onSelect:r,canDelete:a,onDelete:n})=>e.length?s.jsx("ul",{className:"space-y-2",children:e.map(i=>{const o=i.id===t;return s.jsxs("li",{children:[s.jsxs("button",{onClick:()=>r(i.id),className:`w-full flex items-center justify-between gap-2 rounded-xl border px-3 py-2 text-left transition ${o?"border-indigo-600 bg-indigo-600 text-white":"border-slate-200 bg-white hover:bg-indigo-50"}`,title:`${i.titulo} • ${i.dimension} / ${i.subdimension}`,children:[s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(rA,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:i.titulo})]}),s.jsx(n4,{className:"w-4 h-4 opacity-70"})]}),a(i)&&s.jsx("button",{onClick:()=>n(i.id,i.titulo),className:"mt-1 text-xs text-red-600 hover:underline",title:"Eliminar actividad",children:"Eliminar"})]},i.id)})}):s.jsxs("div",{className:"p-4 text-sm text-slate-500 flex items-center gap-2",children:[s.jsx(eje,{className:"w-4 h-4"})," Aún no hay actividades creadas."]})),aD=ft.memo(({label:e,value:t,pill:r})=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-slate-500",children:[e,":"]}),r?s.jsx("span",{className:"px-2 py-0.5 rounded-full bg-indigo-50 text-indigo-700 text-xs",children:t}):s.jsx("span",{className:"font-medium",children:t})]})),Nvt=ft.memo(({label:e,value:t,total:r=0})=>{const a=r>0?t/r*100:t>0?100:0,n=a>=75?"from-emerald-500":a>=50?"from-blue-500":a>=25?"from-amber-500":"from-rose-500";return s.jsxs("div",{className:"relative mt-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),s.jsx("span",{className:"text-sm font-medium text-slate-700",children:t})]}),s.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5",children:s.jsx("div",{className:`h-2.5 rounded-full bg-gradient-to-r ${n} to-transparent transition-all duration-500`,style:{width:`${Math.min(100,a)}%`}})})]})}),Evt=ft.memo(({option:e,options:t,onChangeText:r,onDelete:a})=>{const n=w.useCallback(o=>r(e.id,o.target.value),[e.id,r]),i=w.useCallback(()=>a(e.id),[e.id,a]);return s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{value:e.text,onChange:n,className:"flex-1 border rounded-lg px-3 py-1.5",placeholder:`Opción ${t.findIndex(o=>o.id===e.id)+1}`}),s.jsx("button",{onClick:i,className:"text-red-600 hover:text-red-700",title:"Eliminar opción",children:s.jsx(Ia,{className:"w-4 h-4"})})]})}),Cvt=ft.memo(({q:e,index:t,onRemove:r,onPatch:a})=>{const n=w.useCallback(f=>a(e.id,{enunciado:f.target.value}),[e.id,a]),i=w.useCallback(f=>a(e.id,{maxPalabras:parseInt(f.target.value||"500")}),[e.id,a]),o=w.useCallback(f=>a(e.id,{multiple:f.target.checked}),[e.id,a]),l=w.useCallback(()=>a(e.id,{opciones:[...e.opciones,{id:crypto.randomUUID(),text:""}]}),[e.id,e.opciones,a]),c=w.useCallback((f,A)=>{a(e.id,{opciones:e.opciones.map(m=>m.id===f?{...m,text:A}:m)})},[e.id,e.opciones,a]),d=w.useCallback(f=>a(e.id,{opciones:e.opciones.filter(A=>A.id!==f)}),[e.id,e.opciones,a]),u=w.useCallback(()=>r(e.id),[e.id,r]);return s.jsxs("div",{className:"border rounded-xl p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-sm text-slate-600",children:["#",t+1," • ",e.tipo==="abierta"?"Abierta":"Selección múltiple"]}),s.jsx("button",{onClick:u,className:"text-red-600 hover:text-red-700",title:"Eliminar",children:s.jsx(Ia,{className:"w-4 h-4"})})]}),s.jsx("input",{value:e.enunciado,onChange:n,className:"w-full border rounded-lg px-3 py-2 mb-2",placeholder:"Escribe el enunciado de la pregunta"}),e.tipo==="abierta"?s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("label",{className:"text-sm",children:"Máx. palabras"}),s.jsx("input",{type:"number",min:50,max:1e3,value:e.maxPalabras||x_,onChange:i,className:"w-24 border rounded-lg px-2 py-1"})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[s.jsx("input",{type:"checkbox",checked:e.multiple??!0,onChange:o})," Permitir selección múltiple"]}),e.opciones.map(f=>s.jsx(Evt,{option:f,options:e.opciones,onChangeText:c,onDelete:d},f.id)),s.jsx("button",{onClick:l,className:"text-sm text-sky-700 hover:underline",children:"+ Añadir opción"})]})]})}),jvt=ft.memo(({q:e,respuestas:t,onChange:r})=>{var o,l;const a=w.useCallback(c=>r(e,c.target.value),[e,r]);if(e.tipo==="abierta"){const c=((o=t[e.id])==null?void 0:o.valorTexto)||"";return s.jsxs("div",{className:"border rounded-xl p-3",children:[s.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),s.jsx("textarea",{rows:5,value:c,onChange:a,placeholder:`Máximo ${e.maxPalabras||x_} palabras…`,className:"w-full border rounded-lg px-3 py-2"}),s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[gme(c)," / ",e.maxPalabras||x_," palabras"]})]})}const n=((l=t[e.id])==null?void 0:l.seleccionados)||[],i=c=>{let d=new Set(n);n.includes(c)?d.delete(c):e.multiple?d.add(c):d=new Set([c]),r(e,Array.from(d))};return s.jsxs("div",{className:"border rounded-xl p-3",children:[s.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),s.jsx("div",{className:"flex flex-col gap-2",children:(e.opciones||[]).map((c,d)=>{const u=n.includes(c);return s.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:e.multiple?"checkbox":"radio",name:e.multiple?`answer-${e.id}[]`:`answer-${e.id}`,checked:u,onChange:()=>i(c)}),s.jsx("span",{children:c})]},`${e.id}-${d}`)})})]})}),kvt=({currentUser:e})=>{var P;const[t,r]=w.useState("responder"),[a,n]=w.useState([]),[i,o]=w.useState(""),[l,c]=w.useState(""),[d,u]=w.useState(YZ()),f=w.useCallback(D=>u(W=>({...W,...D})),[]),[A,m]=w.useState([]),[g,x]=w.useState({}),[v,y]=w.useState([]),N=p$.includes(e==null?void 0:e.profile)||(e==null?void 0:e.isAdmin);w.useEffect(()=>{const D=mvt(W=>{n(W),o(J=>{var ce;return J||(((ce=W[0])==null?void 0:ce.id)??"")})});return()=>D()},[]),w.useEffect(()=>{const D=bvt(["PROFESORADO","SUBDIRECCION"],W=>{m(W),u(J=>{if(J.creadorId)return J;const ce=W.find(ie=>ie.id===(e==null?void 0:e.uid));return ce?{...J,creadorId:ce.id,creadorNombre:ce.nombre,creadorPerfil:ce.profile||J.creadorPerfil}:J})});return()=>D()},[e]),w.useEffect(()=>{if(!i)return;const D=xvt(i,y);return()=>D()},[i]);const E=w.useMemo(()=>a.find(D=>D.id===i),[a,i]);w.useMemo(()=>_0[d.dimension]||[],[d.dimension]),w.useEffect(()=>{u(D=>{const W=_0[D.dimension]||[],J=W.includes(D.subdimension)?D.subdimension:W[0]||"";return J===D.subdimension?D:{...D,subdimension:J}})},[d.dimension]);const B=w.useCallback(()=>{const D={id:crypto.randomUUID(),tipo:"abierta",enunciado:"Escribe aquí tu pregunta abierta",maxPalabras:x_};u(W=>({...W,preguntas:[...W.preguntas,D]}))},[]),_=w.useCallback(()=>{const D={id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:"Selecciona la(s) opción(es) que corresponda(n)",opciones:[{id:crypto.randomUUID(),text:"Opción 1"},{id:crypto.randomUUID(),text:"Opción 2"},{id:crypto.randomUUID(),text:"Opción 3"},{id:crypto.randomUUID(),text:"Opción 4"}],multiple:!0};u(W=>({...W,preguntas:[...W.preguntas,D]}))},[]),I=w.useCallback((D,W)=>{u(J=>({...J,preguntas:J.preguntas.map(ce=>ce.id===D?{...ce,...W}:ce)}))},[]),j=w.useCallback(D=>{u(W=>({...W,preguntas:W.preguntas.filter(J=>J.id!==D)}))},[]),[k,T]=w.useState(!1),L=w.useCallback(async()=>{if(!(!d.aiTema||d.aiCantidad<1)){T(!0);try{const W=(await BRe(d.aiTema,d.aiCantidad)).map(J=>({id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:J.enunciado,opciones:J.opciones.slice(0,5).map(ce=>({id:crypto.randomUUID(),text:ce})),multiple:!0}));u(J=>({...J,preguntas:[...J.preguntas,...W]}))}finally{T(!1)}}},[d.aiTema,d.aiCantidad]),[F,S]=w.useState([]);w.useEffect(()=>{(async()=>{var J;if(!E)return;const W=[];for(const ce of v)if(ce.respuestas)for(const[ie,re]of Object.entries(ce.respuestas)){const de=E.preguntas.find(be=>be.id===ie);if(!de||de.tipo!=="abierta")continue;const oe=re;oe.tipo==="abierta"&&((J=oe.valorTexto)!=null&&J.trim())&&W.push(oe.valorTexto.trim())}if(console.log("Respuestas abiertas encontradas:",W.length),W.length>0)try{const ce=await IRe(W,30);console.log("Keywords generadas:",ce),S(ce)}catch(ce){console.error("Error al extraer keywords:",ce),S([])}else S([])})()},[E,v]);const M=w.useMemo(()=>{if(!E)return{};const D={};for(const W of E.preguntas)W.tipo==="seleccion_multiple"&&(D[W.id]={},(W.opciones||[]).forEach(J=>D[W.id][J]=0));for(const W of v)for(const[J,ce]of Object.entries(W.respuestas||{})){const ie=ce;if((ie==null?void 0:ie.tipo)==="seleccion_multiple")for(const re of ie.seleccionados||[])D[J]||(D[J]={}),D[J][re]=(D[J][re]||0)+1}return D},[E,v]),H=w.useCallback(D=>D.map(W=>W.tipo==="abierta"?W:{...W,opciones:W.opciones.map(J=>J.text)}),[]),K=w.useCallback(()=>u(YZ()),[]),Q=w.useCallback(async()=>{if(!d.titulo.trim())return alert("Debes ingresar un título");if(!d.creadorId)return alert("Debes seleccionar un creador");const D={titulo:d.titulo,dimension:d.dimension,subdimension:d.subdimension,creadorId:d.creadorId,creadorNombre:d.creadorNombre,creadorPerfil:d.creadorPerfil,preguntas:H(d.preguntas)},W=await pvt(D);K(),o(W),r("responder")},[d,H,K]),G=w.useCallback(async(D,W)=>{var ce;if(window.confirm(`¿Eliminar "${W}"?
Se eliminarán la actividad, sus preguntas y respuestas. Esta acción no se puede deshacer.`)){if(await gvt(D),i===D){const ie=a.filter(re=>re.id!==D);o(((ce=ie[0])==null?void 0:ce.id)||""),ie.length||r("crear")}alert("Actividad eliminada.")}},[i,a]),X=w.useCallback(async()=>{if(!E||!v.length)return;const D=new xr("p","mm","a4"),W=20;let J=W;D.setFontSize(20),D.text(`Informe: ${E.titulo}`,W,J),J+=10,D.setFontSize(12),D.text(`Dimensión: ${E.dimension}`,W,J+=10),D.text(`Subdimensión: ${E.subdimension}`,W,J+=7),D.text(`Creador: ${E.creadorNombre} (${E.creadorPerfil})`,W,J+=7),D.text(`Total de respuestas: ${v.length}`,W,J+=7),J+=10;for(const ce of E.preguntas){if(J>250&&(D.addPage(),J=W),D.setFontSize(14),D.text(`Pregunta: ${ce.enunciado}`,W,J+=10),J+=5,D.setFontSize(12),ce.tipo==="seleccion_multiple"){const ie=M[ce.id]||{},re=v.length;Object.entries(ie).forEach(([de,oe])=>{const be=re>0?Math.round(oe/re*100):0;D.text(`${de}: ${oe} respuestas (${be}%)`,W+5,J+=7)})}else{D.text("Respuestas:",W,J+=7);for(const ie of v){const re=ie.respuestas[ce.id];if((re==null?void 0:re.tipo)==="abierta"&&re.valorTexto){J>250&&(D.addPage(),J=W),D.text(`${ie.userNombre}:`,W+5,J+=7);const de=D.splitTextToSize(re.valorTexto,170);D.text(de,W+10,J+=7),J+=de.length*7}}}J+=10}if(F.length>0){J>250&&(D.addPage(),J=W),D.setFontSize(14),D.text("Conceptos clave detectados:",W,J+=10),D.setFontSize(12);const ce=F.map(re=>`${re.keyword} (${Math.round(re.score*100)}%)`).join(", "),ie=D.splitTextToSize(ce,170);D.text(ie,W,J+=7)}D.save(`informe_${E.titulo.replace(/\s+/g,"_")}.pdf`)},[E,v,M,F]),Z=w.useCallback(D=>{const W=e==null?void 0:e.isAdmin,J=D.creadorId===(e==null?void 0:e.uid);return N&&(W||J)},[e,N]),U=w.useCallback((D,W)=>{x(J=>({...J,[D.id]:D.tipo==="abierta"?{tipo:"abierta",valorTexto:W}:{tipo:"seleccion_multiple",seleccionados:W}}))},[]),Y=w.useCallback(async()=>{if(E){for(const D of E.preguntas){const W=g[D.id];if(W&&D.tipo==="abierta"&&D.maxPalabras){const J=gme(W.valorTexto||"");if(J>D.maxPalabras)return alert(`La respuesta a "${D.enunciado}" supera el máximo de ${D.maxPalabras} palabras (${J}).`)}}await vvt({activityId:E.id,userId:(e==null?void 0:e.uid)||"anon",userNombre:(e==null?void 0:e.displayName)||(e==null?void 0:e.name)||"Anónimo",respuestas:g}),x({}),alert("¡Respuestas enviadas!")}},[E,g,e]);return s.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[s.jsxs("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(i4,{className:"w-7 h-7 text-indigo-600"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Desarrollo Profesional Docente"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Crea sesiones, responde y explora insights en tiempo real."})]})]}),s.jsx(yvt,{value:t,onChange:r,canCreate:N})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[s.jsx("aside",{className:"lg:col-span-4 xl:col-span-3",children:s.jsx(Sw,{title:"Actividades",icon:s.jsx(rA,{className:"w-5 h-5 text-indigo-600"}),children:s.jsx(wvt,{items:a,selectedId:i,onSelect:D=>{o(D),r("responder")},canDelete:Z,onDelete:G})})}),s.jsxs("main",{className:"lg:col-span-8 xl:col-span-9 space-y-6",children:[t==="crear"&&N&&s.jsxs(Sw,{title:"Nueva actividad / sesión",icon:s.jsx(c$,{className:"w-5 h-5 text-indigo-600"}),right:s.jsxs("button",{onClick:Q,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[s.jsx(kl,{className:"w-4 h-4"}),"Guardar"]}),children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Título"}),s.jsx("input",{value:d.titulo,onChange:D=>f({titulo:D.target.value}),placeholder:"Ej: Comunidades de aprendizaje 1",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Área de trabajo (Dimensión PME)"}),s.jsx("select",{value:d.dimension,onChange:D=>f({dimension:D.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:Object.keys(_0).map(D=>s.jsx("option",{value:D,children:D},D))}),s.jsx("select",{value:d.subdimension,onChange:D=>f({subdimension:D.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:(_0[d.dimension]||[]).map(D=>s.jsx("option",{value:D,children:D},D))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Creador • Perfil"}),s.jsx("select",{value:d.creadorPerfil,onChange:D=>f({creadorPerfil:D.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:p$.map(D=>s.jsx("option",{value:D,children:D},D))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Creador • Usuario"}),s.jsxs("select",{value:d.creadorId,onChange:D=>{const W=D.target.value,J=A.find(ce=>ce.id===W);f({creadorId:W,creadorNombre:(J==null?void 0:J.nombre)||""})},className:"w-full border rounded-lg px-3 py-2 bg-white",children:[s.jsx("option",{value:"",children:"Seleccione…"}),A.filter(D=>D.profile===d.creadorPerfil).map(D=>s.jsx("option",{value:D.id,children:D.nombre},D.id))]})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[s.jsx(Q1,{className:"w-4 h-4"})," Preguntas"]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[s.jsxs("button",{onClick:B,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[s.jsx(Si,{className:"w-4 h-4"})," Abierta"]}),s.jsxs("button",{onClick:_,className:"inline-flex items-center gap-2 bg-sky-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[s.jsx(Si,{className:"w-4 h-4"})," Selección múltiple"]}),s.jsxs("div",{className:"ms-auto flex items-center gap-2",children:[s.jsxs("div",{className:"hidden md:inline-flex items-center gap-1 text-slate-500 text-xs",children:[s.jsx(Qae,{className:"w-4 h-4"})," IA"]}),s.jsx("input",{value:d.aiTema,onChange:D=>f({aiTema:D.target.value}),placeholder:"Tema para IA (p. ej., evaluación formativa)",className:"border rounded-lg px-3 py-1.5"}),s.jsx("input",{type:"number",min:1,max:10,value:d.aiCantidad,onChange:D=>f({aiCantidad:parseInt(D.target.value||"1")}),className:"w-20 border rounded-lg px-3 py-1.5"}),s.jsxs("button",{onClick:L,disabled:k||!d.aiTema,className:"inline-flex items-center gap-2 bg-fuchsia-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90 disabled:opacity-50",children:[s.jsx(Rg,{className:"w-4 h-4"}),k?"Generando…":"Generar con IA"]})]})]}),s.jsxs("div",{className:"space-y-4",children:[d.preguntas.map((D,W)=>s.jsx(Cvt,{q:D,index:W,onRemove:j,onPatch:I},D.id)),d.preguntas.length===0&&s.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[s.jsx(dn,{className:"w-4 h-4"}),"Añade preguntas abiertas o de selección múltiple (o usa IA)."]})]})]})]}),t==="responder"&&E&&s.jsx(Sw,{title:`Responder: ${E.titulo}`,icon:s.jsx(_i,{className:"w-5 h-5 text-indigo-600"}),right:s.jsxs("button",{onClick:Y,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[s.jsx(kl,{className:"w-4 h-4"}),"Enviar respuestas"]}),children:s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"grid md:grid-cols-3 gap-3 text-sm",children:[s.jsx(aD,{pill:!0,label:"Dimensión",value:E.dimension}),s.jsx(aD,{pill:!0,label:"Subdimensión",value:E.subdimension}),s.jsx(aD,{pill:!0,label:"Creador",value:`${E.creadorNombre} • ${E.creadorPerfil}`})]}),E.preguntas.map(D=>s.jsx(jvt,{q:D,respuestas:g,onChange:U},D.id))]})}),t==="respuestas_individuales"&&E&&s.jsx(Sw,{title:`Respuestas individuales: ${E.titulo}`,icon:s.jsx(_i,{className:"w-5 h-5 text-indigo-600"}),right:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:X,disabled:!v.length,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[s.jsx(pf,{className:"w-4 h-4"}),"Descargar informe"]}),s.jsxs("button",{onClick:()=>{c(""),r("dashboard")},className:"inline-flex items-center gap-2 bg-slate-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[s.jsx(bl,{className:"w-4 h-4"}),"Volver al dashboard"]})]}),children:s.jsxs("div",{className:"grid md:grid-cols-12 gap-6",children:[s.jsx("div",{className:"md:col-span-4 lg:col-span-3",children:s.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[s.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[s.jsx(Kv,{className:"w-5 h-5 text-indigo-600"}),"Usuarios (",v.length,")"]}),s.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:v.length>0?v.map(D=>{var W;return s.jsxs("button",{onClick:()=>c(D.userId),className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${l===D.userId?"bg-indigo-50 text-indigo-700 font-medium border border-indigo-200 shadow-sm":"hover:bg-slate-50 border border-transparent"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"p-1.5 bg-indigo-100 rounded-lg",children:s.jsx(Kv,{className:"w-4 h-4 text-indigo-600"})}),s.jsx("span",{className:"font-medium",children:D.userNombre})]}),s.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1.5",children:[s.jsx(Ro,{className:"w-3.5 h-3.5"}),new Date(((W=D.createdAt)==null?void 0:W.seconds)*1e3).toLocaleDateString()]})]},D.userId)}):s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(Kv,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No hay respuestas todavía"})]})})]})}),s.jsx("div",{className:"md:col-span-8 lg:col-span-9",children:l?s.jsxs(s.Fragment,{children:[s.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2 text-lg",children:[s.jsx(c$,{className:"w-5 h-5 text-indigo-600"}),"Respuestas de:"," ",s.jsx("span",{className:"text-indigo-600",children:(P=v.find(D=>D.userId===l))==null?void 0:P.userNombre})]}),s.jsx("div",{className:"space-y-6",children:E.preguntas.map(D=>{var ce;const W=v.find(ie=>ie.userId===l),J=(ce=W==null?void 0:W.respuestas)==null?void 0:ce[D.id];return console.log("Respuesta encontrada:",{preguntaId:D.id,tipo:D.tipo,respuesta:J}),s.jsxs("div",{className:"bg-white p-6 border border-slate-200 rounded-xl shadow-sm",children:[s.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[s.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg shrink-0",children:D.tipo==="abierta"?s.jsx(d$,{className:"w-5 h-5 text-indigo-600"}):s.jsx(Nb,{className:"w-5 h-5 text-indigo-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:D.enunciado}),s.jsx("p",{className:"text-sm text-slate-500 mt-1",children:D.tipo==="abierta"?"Respuesta abierta":"Selección múltiple"})]})]}),D.tipo==="abierta"?(J==null?void 0:J.tipo)==="abierta"&&J.valorTexto?s.jsx("div",{className:"mt-3 bg-slate-50 rounded-lg p-4",children:s.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:J.valorTexto})}):s.jsx("p",{className:"text-slate-500 italic mt-3",children:"Sin respuesta"}):s.jsxs("div",{className:"space-y-2 mt-3",children:[(D.opciones||[]).map(ie=>{const de=((J==null?void 0:J.tipo)==="seleccion_multiple"?J.seleccionados||[]:[]).includes(ie.text);return s.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-all ${de?"border-indigo-200 bg-indigo-50 text-indigo-700 shadow-sm":"border-slate-200 text-slate-500"}`,children:[s.jsx("div",{className:"flex-shrink-0",children:de?s.jsx(dn,{className:"w-4 h-4 text-indigo-600"}):s.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 rounded-full"})}),s.jsx("span",{className:"text-sm",children:typeof ie=="string"?ie:ie.text})]},typeof ie=="string"?ie:ie.id)}),!J&&s.jsx("p",{className:"text-slate-500 italic mt-1 text-sm",children:"Sin respuesta"})]})]},D.id)})})]}):s.jsx("div",{className:"text-center text-slate-500 py-12",children:"Selecciona un usuario para ver sus respuestas"})})]})}),t==="dashboard"&&E&&s.jsxs(Sw,{title:`Dashboard: ${E.titulo}`,icon:s.jsx(X2,{className:"w-5 h-5 text-indigo-600"}),right:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>r("respuestas_individuales"),className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:[s.jsx(Kv,{className:"w-4 h-4"}),"Ver respuestas individuales"]}),Z(E)&&s.jsxs("button",{onClick:()=>G(E.id,E.titulo),className:"inline-flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[s.jsx(Ia,{className:"w-4 h-4"}),"Eliminar actividad"]})]}),children:[s.jsx("div",{className:"mb-6",children:s.jsxs("button",{onClick:X,disabled:!v.length,className:"w-full md:w-auto inline-flex items-center justify-center gap-2 bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-lg font-medium",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[s.jsx(pf,{className:"w-5 h-5"}),"Descargar Informe Global"]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:s.jsx(Kv,{className:"w-5 h-5 text-indigo-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500",children:"Total respuestas"}),s.jsx("p",{className:"text-xl font-semibold",children:v.length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:s.jsx(Nb,{className:"w-5 h-5 text-emerald-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500",children:"Preguntas"}),s.jsx("p",{className:"text-xl font-semibold",children:E.preguntas.length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(op,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500",children:"Creador"}),s.jsx("p",{className:"text-sm font-medium truncate",children:E.creadorNombre})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(Ro,{className:"w-5 h-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500",children:"Fecha"}),s.jsx("p",{className:"text-sm font-medium",children:(()=>{const D=E.createdAt,W=D!=null&&D.toDate?D.toDate():D!=null&&D.seconds?new Date(D.seconds*1e3):D?new Date(D):null;return W?W.toLocaleDateString():"No disponible"})()})]})]})})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(wb,{className:"w-5 h-5 text-indigo-600"}),s.jsx("h4",{className:"font-semibold",children:"Resultados de selección múltiple"})]}),s.jsxs("div",{className:"space-y-4",children:[E.preguntas.filter(D=>D.tipo==="seleccion_multiple").map(D=>s.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[s.jsx("p",{className:"font-medium mb-3 text-slate-700",children:D.enunciado}),Object.entries(M[D.id]||{}).map(([W,J])=>s.jsx(Nvt,{label:W,value:J},W)),s.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1",children:[s.jsx(t1,{className:"w-4 h-4"}),"Total respuestas: ",v.length]})]},D.id)),E.preguntas.filter(D=>D.tipo==="seleccion_multiple").length===0&&s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(Nb,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No hay preguntas de selección múltiple en esta actividad."})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(YEe,{className:"w-5 h-5 text-indigo-600"}),s.jsx("h4",{className:"font-semibold",children:"Conceptos clave (IA)"})]}),F.length?s.jsx("div",{className:"flex flex-wrap gap-2",children:F.map(D=>s.jsx("span",{className:"rounded-full px-3 py-1.5 text-sm bg-gradient-to-r from-indigo-50 to-purple-50 text-indigo-700 border border-indigo-100 shadow-sm transition-transform hover:scale-105",style:{fontSize:`${12+Math.round(D.score*18)}px`},children:D.keyword},D.keyword))}):s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(d$,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"Aún no hay suficientes respuestas abiertas para mostrar conceptos."})]})]})]})]})]})]})]})};var LE=e=>e.type==="checkbox",Og=e=>e instanceof Date,Ql=e=>e==null;const xme=e=>typeof e=="object";var ci=e=>!Ql(e)&&!Array.isArray(e)&&xme(e)&&!Og(e),Svt=e=>ci(e)&&e.target?LE(e.target)?e.target.checked:e.target.value:e,_vt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Tvt=(e,t)=>e.has(_vt(t)),Bvt=e=>{const t=e.constructor&&e.constructor.prototype;return ci(t)&&t.hasOwnProperty("isPrototypeOf")},t9=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ns(e){let t;const r=Array.isArray(e),a=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(t9&&(e instanceof Blob||a))&&(r||ci(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!Bvt(e))t=e;else for(const n in e)e.hasOwnProperty(n)&&(t[n]=ns(e[n]));else return e;return t}var Z3=e=>/^\w*$/.test(e),ss=e=>e===void 0,eT=e=>Array.isArray(e)?e.filter(Boolean):[],r9=e=>eT(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ur=(e,t,r)=>{if(!t||!ci(e))return r;const a=(Z3(t)?[t]:r9(t)).reduce((n,i)=>Ql(n)?n:n[i],e);return ss(a)||a===e?ss(e[t])?r:e[t]:a},uh=e=>typeof e=="boolean",Hn=(e,t,r)=>{let a=-1;const n=Z3(t)?[t]:r9(t),i=n.length,o=i-1;for(;++a<i;){const l=n[a];let c=r;if(a!==o){const d=e[l];c=ci(d)||Array.isArray(d)?d:isNaN(+n[a+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const JZ={BLUR:"blur",FOCUS_OUT:"focusout"},cu={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},C0={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},vme=ft.createContext(null);vme.displayName="HookFormContext";const Ivt=()=>ft.useContext(vme);var Ovt=(e,t,r,a=!0)=>{const n={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(n,i,{get:()=>{const o=i;return t._proxyFormState[o]!==cu.all&&(t._proxyFormState[o]=!a||cu.all),e[o]}});return n};const bme=typeof window<"u"?ft.useLayoutEffect:ft.useEffect;var Nh=e=>typeof e=="string",Dvt=(e,t,r,a,n)=>Nh(e)?(a&&t.watch.add(e),ur(r,e,n)):Array.isArray(e)?e.map(i=>(a&&t.watch.add(i),ur(r,i))):(a&&(t.watchAll=!0),r),_R=e=>Ql(e)||!xme(e);function _m(e,t,r=new WeakSet){if(_R(e)||_R(t))return e===t;if(Og(e)&&Og(t))return e.getTime()===t.getTime();const a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of a){const o=e[i];if(!n.includes(i))return!1;if(i!=="ref"){const l=t[i];if(Og(o)&&Og(l)||ci(o)&&ci(l)||Array.isArray(o)&&Array.isArray(l)?!_m(o,l,r):o!==l)return!1}}return!0}var Fvt=(e,t,r,a,n)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[a]:n||!0}}:{},Cc=e=>Array.isArray(e)?e:[e],ZZ=()=>{let e=[];return{get observers(){return e},next:n=>{for(const i of e)i.next&&i.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(i=>i!==n)}}),unsubscribe:()=>{e=[]}}},Ll=e=>ci(e)&&!Object.keys(e).length,a9=e=>e.type==="file",Zu=e=>typeof e=="function",v_=e=>{if(!t9)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},yme=e=>e.type==="select-multiple",n9=e=>e.type==="radio",Pvt=e=>n9(e)||LE(e),nD=e=>v_(e)&&e.isConnected;function Rvt(e,t){const r=t.slice(0,-1).length;let a=0;for(;a<r;)e=ss(e)?a++:e[t[a++]];return e}function Lvt(e){for(const t in e)if(e.hasOwnProperty(t)&&!ss(e[t]))return!1;return!0}function Zs(e,t){const r=Array.isArray(t)?t:Z3(t)?[t]:r9(t),a=r.length===1?e:Rvt(e,r),n=r.length-1,i=r[n];return a&&delete a[i],n!==0&&(ci(a)&&Ll(a)||Array.isArray(a)&&Lvt(a))&&Zs(e,r.slice(0,-1)),e}var wme=e=>{for(const t in e)if(Zu(e[t]))return!0;return!1};function b_(e,t={}){const r=Array.isArray(e);if(ci(e)||r)for(const a in e)Array.isArray(e[a])||ci(e[a])&&!wme(e[a])?(t[a]=Array.isArray(e[a])?[]:{},b_(e[a],t[a])):Ql(e[a])||(t[a]=!0);return t}function Nme(e,t,r){const a=Array.isArray(e);if(ci(e)||a)for(const n in e)Array.isArray(e[n])||ci(e[n])&&!wme(e[n])?ss(t)||_R(r[n])?r[n]=Array.isArray(e[n])?b_(e[n],[]):{...b_(e[n])}:Nme(e[n],Ql(t)?{}:t[n],r[n]):r[n]=!_m(e[n],t[n]);return r}var _w=(e,t)=>Nme(e,t,b_(t));const eee={value:!1,isValid:!1},tee={value:!0,isValid:!0};var Eme=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!ss(e[0].attributes.value)?ss(e[0].value)||e[0].value===""?tee:{value:e[0].value,isValid:!0}:tee:eee}return eee},Cme=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:a})=>ss(e)?e:t?e===""?NaN:e&&+e:r&&Nh(e)?new Date(e):a?a(e):e;const ree={isValid:!1,value:null};var jme=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,ree):ree;function aee(e){const t=e.ref;return a9(t)?t.files:n9(t)?jme(e.refs).value:yme(t)?[...t.selectedOptions].map(({value:r})=>r):LE(t)?Eme(e.refs).value:Cme(ss(t.value)?e.ref.value:t.value,e)}var Mvt=(e,t,r,a)=>{const n={};for(const i of e){const o=ur(t,i);o&&Hn(n,i,o._f)}return{criteriaMode:r,names:[...e],fields:n,shouldUseNativeValidation:a}},y_=e=>e instanceof RegExp,Tw=e=>ss(e)?e:y_(e)?e.source:ci(e)?y_(e.value)?e.value.source:e.value:e,mb=e=>({isOnSubmit:!e||e===cu.onSubmit,isOnBlur:e===cu.onBlur,isOnChange:e===cu.onChange,isOnAll:e===cu.all,isOnTouch:e===cu.onTouched});const nee="AsyncFunction";var Uvt=e=>!!e&&!!e.validate&&!!(Zu(e.validate)&&e.validate.constructor.name===nee||ci(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===nee)),Hvt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),TR=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(a=>e.startsWith(a)&&/^\.\w+/.test(e.slice(a.length))));const Qb=(e,t,r,a)=>{for(const n of r||Object.keys(e)){const i=ur(e,n);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],n)&&!a)return!0;if(o.ref&&t(o.ref,o.name)&&!a)return!0;if(Qb(l,t))break}else if(ci(l)&&Qb(l,t))break}}};function see(e,t,r){const a=ur(e,r);if(a||Z3(r))return{error:a,name:r};const n=r.split(".");for(;n.length;){const i=n.join("."),o=ur(t,i),l=ur(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};n.pop()}return{name:r}}var Qvt=(e,t,r,a)=>{r(e);const{name:n,...i}=e;return Ll(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!a||cu.all))},zvt=(e,t,r)=>!e||!t||e===t||Cc(e).some(a=>a&&(r?a===t:a.startsWith(t)||t.startsWith(a))),$vt=(e,t,r,a,n)=>n.isOnAll?!1:!r&&n.isOnTouch?!(t||e):(r?a.isOnBlur:n.isOnBlur)?!e:(r?a.isOnChange:n.isOnChange)?e:!0,Vvt=(e,t)=>!eT(ur(e,t)).length&&Zs(e,t),kme=(e,t,r)=>{const a=Cc(ur(e,r));return Hn(a,"root",t[r]),Hn(e,r,a),e},l5=e=>Nh(e);function iee(e,t,r="validate"){if(l5(e)||Array.isArray(e)&&e.every(l5)||uh(e)&&!e)return{type:r,message:l5(e)?e:"",ref:t}}var Qv=e=>ci(e)&&!y_(e)?e:{value:e,message:""},BR=async(e,t,r,a,n,i)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:u,min:f,max:A,pattern:m,validate:g,name:x,valueAsNumber:v,mount:y}=e._f,N=ur(r,x);if(!y||t.has(x))return{};const E=l?l[0]:o,B=S=>{n&&E.reportValidity&&(E.setCustomValidity(uh(S)?"":S||""),E.reportValidity())},_={},I=n9(o),j=LE(o),k=I||j,T=(v||a9(o))&&ss(o.value)&&ss(N)||v_(o)&&o.value===""||N===""||Array.isArray(N)&&!N.length,L=Fvt.bind(null,x,a,_),F=(S,M,H,K=C0.maxLength,Q=C0.minLength)=>{const G=S?M:H;_[x]={type:S?K:Q,message:G,ref:o,...L(S?K:Q,G)}};if(i?!Array.isArray(N)||!N.length:c&&(!k&&(T||Ql(N))||uh(N)&&!N||j&&!Eme(l).isValid||I&&!jme(l).isValid)){const{value:S,message:M}=l5(c)?{value:!!c,message:c}:Qv(c);if(S&&(_[x]={type:C0.required,message:M,ref:E,...L(C0.required,M)},!a))return B(M),_}if(!T&&(!Ql(f)||!Ql(A))){let S,M;const H=Qv(A),K=Qv(f);if(!Ql(N)&&!isNaN(N)){const Q=o.valueAsNumber||N&&+N;Ql(H.value)||(S=Q>H.value),Ql(K.value)||(M=Q<K.value)}else{const Q=o.valueAsDate||new Date(N),G=U=>new Date(new Date().toDateString()+" "+U),X=o.type=="time",Z=o.type=="week";Nh(H.value)&&N&&(S=X?G(N)>G(H.value):Z?N>H.value:Q>new Date(H.value)),Nh(K.value)&&N&&(M=X?G(N)<G(K.value):Z?N<K.value:Q<new Date(K.value))}if((S||M)&&(F(!!S,H.message,K.message,C0.max,C0.min),!a))return B(_[x].message),_}if((d||u)&&!T&&(Nh(N)||i&&Array.isArray(N))){const S=Qv(d),M=Qv(u),H=!Ql(S.value)&&N.length>+S.value,K=!Ql(M.value)&&N.length<+M.value;if((H||K)&&(F(H,S.message,M.message),!a))return B(_[x].message),_}if(m&&!T&&Nh(N)){const{value:S,message:M}=Qv(m);if(y_(S)&&!N.match(S)&&(_[x]={type:C0.pattern,message:M,ref:o,...L(C0.pattern,M)},!a))return B(M),_}if(g){if(Zu(g)){const S=await g(N,r),M=iee(S,E);if(M&&(_[x]={...M,...L(C0.validate,M.message)},!a))return B(M.message),_}else if(ci(g)){let S={};for(const M in g){if(!Ll(S)&&!a)break;const H=iee(await g[M](N,r),E,M);H&&(S={...H,...L(M,H.message)},B(H.message),a&&(_[x]=S))}if(!Ll(S)&&(_[x]={ref:E,...S},!a))return _}}return B(!0),_};const Gvt={mode:cu.onSubmit,reValidateMode:cu.onChange,shouldFocusError:!0};function qvt(e={}){let t={...Gvt,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Zu(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},a={},n=ci(t.defaultValues)||ci(t.values)?ns(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:ns(n),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const A={array:ZZ(),state:ZZ()},m=t.criteriaMode===cu.all,g=le=>ne=>{clearTimeout(d),d=setTimeout(le,ne)},x=async le=>{if(!t.disabled&&(u.isValid||f.isValid||le)){const ne=t.resolver?Ll((await j()).errors):await T(a,!0);ne!==r.isValid&&A.state.next({isValid:ne})}},v=(le,ne)=>{!t.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&((le||Array.from(l.mount)).forEach(Ae=>{Ae&&(ne?Hn(r.validatingFields,Ae,ne):Zs(r.validatingFields,Ae))}),A.state.next({validatingFields:r.validatingFields,isValidating:!Ll(r.validatingFields)}))},y=(le,ne=[],Ae,pe,ke=!0,Le=!0)=>{if(pe&&Ae&&!t.disabled){if(o.action=!0,Le&&Array.isArray(ur(a,le))){const qe=Ae(ur(a,le),pe.argA,pe.argB);ke&&Hn(a,le,qe)}if(Le&&Array.isArray(ur(r.errors,le))){const qe=Ae(ur(r.errors,le),pe.argA,pe.argB);ke&&Hn(r.errors,le,qe),Vvt(r.errors,le)}if((u.touchedFields||f.touchedFields)&&Le&&Array.isArray(ur(r.touchedFields,le))){const qe=Ae(ur(r.touchedFields,le),pe.argA,pe.argB);ke&&Hn(r.touchedFields,le,qe)}(u.dirtyFields||f.dirtyFields)&&(r.dirtyFields=_w(n,i)),A.state.next({name:le,isDirty:F(le,ne),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Hn(i,le,ne)},N=(le,ne)=>{Hn(r.errors,le,ne),A.state.next({errors:r.errors})},E=le=>{r.errors=le,A.state.next({errors:r.errors,isValid:!1})},B=(le,ne,Ae,pe)=>{const ke=ur(a,le);if(ke){const Le=ur(i,le,ss(Ae)?ur(n,le):Ae);ss(Le)||pe&&pe.defaultChecked||ne?Hn(i,le,ne?Le:aee(ke._f)):H(le,Le),o.mount&&x()}},_=(le,ne,Ae,pe,ke)=>{let Le=!1,qe=!1;const ze={name:le};if(!t.disabled){if(!Ae||pe){(u.isDirty||f.isDirty)&&(qe=r.isDirty,r.isDirty=ze.isDirty=F(),Le=qe!==ze.isDirty);const Re=_m(ur(n,le),ne);qe=!!ur(r.dirtyFields,le),Re?Zs(r.dirtyFields,le):Hn(r.dirtyFields,le,!0),ze.dirtyFields=r.dirtyFields,Le=Le||(u.dirtyFields||f.dirtyFields)&&qe!==!Re}if(Ae){const Re=ur(r.touchedFields,le);Re||(Hn(r.touchedFields,le,Ae),ze.touchedFields=r.touchedFields,Le=Le||(u.touchedFields||f.touchedFields)&&Re!==Ae)}Le&&ke&&A.state.next(ze)}return Le?ze:{}},I=(le,ne,Ae,pe)=>{const ke=ur(r.errors,le),Le=(u.isValid||f.isValid)&&uh(ne)&&r.isValid!==ne;if(t.delayError&&Ae?(c=g(()=>N(le,Ae)),c(t.delayError)):(clearTimeout(d),c=null,Ae?Hn(r.errors,le,Ae):Zs(r.errors,le)),(Ae?!_m(ke,Ae):ke)||!Ll(pe)||Le){const qe={...pe,...Le&&uh(ne)?{isValid:ne}:{},errors:r.errors,name:le};r={...r,...qe},A.state.next(qe)}},j=async le=>{v(le,!0);const ne=await t.resolver(i,t.context,Mvt(le||l.mount,a,t.criteriaMode,t.shouldUseNativeValidation));return v(le),ne},k=async le=>{const{errors:ne}=await j(le);if(le)for(const Ae of le){const pe=ur(ne,Ae);pe?Hn(r.errors,Ae,pe):Zs(r.errors,Ae)}else r.errors=ne;return ne},T=async(le,ne,Ae={valid:!0})=>{for(const pe in le){const ke=le[pe];if(ke){const{_f:Le,...qe}=ke;if(Le){const ze=l.array.has(Le.name),Re=ke._f&&Uvt(ke._f);Re&&u.validatingFields&&v([pe],!0);const We=await BR(ke,l.disabled,i,m,t.shouldUseNativeValidation&&!ne,ze);if(Re&&u.validatingFields&&v([pe]),We[Le.name]&&(Ae.valid=!1,ne))break;!ne&&(ur(We,Le.name)?ze?kme(r.errors,We,Le.name):Hn(r.errors,Le.name,We[Le.name]):Zs(r.errors,Le.name))}!Ll(qe)&&await T(qe,ne,Ae)}}return Ae.valid},L=()=>{for(const le of l.unMount){const ne=ur(a,le);ne&&(ne._f.refs?ne._f.refs.every(Ae=>!nD(Ae)):!nD(ne._f.ref))&&ie(le)}l.unMount=new Set},F=(le,ne)=>!t.disabled&&(le&&ne&&Hn(i,le,ne),!_m(U(),n)),S=(le,ne,Ae)=>Dvt(le,l,{...o.mount?i:ss(ne)?n:Nh(le)?{[le]:ne}:ne},Ae,ne),M=le=>eT(ur(o.mount?i:n,le,t.shouldUnregister?ur(n,le,[]):[])),H=(le,ne,Ae={})=>{const pe=ur(a,le);let ke=ne;if(pe){const Le=pe._f;Le&&(!Le.disabled&&Hn(i,le,Cme(ne,Le)),ke=v_(Le.ref)&&Ql(ne)?"":ne,yme(Le.ref)?[...Le.ref.options].forEach(qe=>qe.selected=ke.includes(qe.value)):Le.refs?LE(Le.ref)?Le.refs.forEach(qe=>{(!qe.defaultChecked||!qe.disabled)&&(Array.isArray(ke)?qe.checked=!!ke.find(ze=>ze===qe.value):qe.checked=ke===qe.value||!!ke)}):Le.refs.forEach(qe=>qe.checked=qe.value===ke):a9(Le.ref)?Le.ref.value="":(Le.ref.value=ke,Le.ref.type||A.state.next({name:le,values:ns(i)})))}(Ae.shouldDirty||Ae.shouldTouch)&&_(le,ke,Ae.shouldTouch,Ae.shouldDirty,!0),Ae.shouldValidate&&Z(le)},K=(le,ne,Ae)=>{for(const pe in ne){if(!ne.hasOwnProperty(pe))return;const ke=ne[pe],Le=le+"."+pe,qe=ur(a,Le);(l.array.has(le)||ci(ke)||qe&&!qe._f)&&!Og(ke)?K(Le,ke,Ae):H(Le,ke,Ae)}},Q=(le,ne,Ae={})=>{const pe=ur(a,le),ke=l.array.has(le),Le=ns(ne);Hn(i,le,Le),ke?(A.array.next({name:le,values:ns(i)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&Ae.shouldDirty&&A.state.next({name:le,dirtyFields:_w(n,i),isDirty:F(le,Le)})):pe&&!pe._f&&!Ql(Le)?K(le,Le,Ae):H(le,Le,Ae),TR(le,l)&&A.state.next({...r,name:le}),A.state.next({name:o.mount?le:void 0,values:ns(i)})},G=async le=>{o.mount=!0;const ne=le.target;let Ae=ne.name,pe=!0;const ke=ur(a,Ae),Le=Re=>{pe=Number.isNaN(Re)||Og(Re)&&isNaN(Re.getTime())||_m(Re,ur(i,Ae,Re))},qe=mb(t.mode),ze=mb(t.reValidateMode);if(ke){let Re,We;const ct=ne.type?aee(ke._f):Svt(le),Ze=le.type===JZ.BLUR||le.type===JZ.FOCUS_OUT,Qe=!Hvt(ke._f)&&!t.resolver&&!ur(r.errors,Ae)&&!ke._f.deps||$vt(Ze,ur(r.touchedFields,Ae),r.isSubmitted,ze,qe),wt=TR(Ae,l,Ze);Hn(i,Ae,ct),Ze?(!ne||!ne.readOnly)&&(ke._f.onBlur&&ke._f.onBlur(le),c&&c(0)):ke._f.onChange&&ke._f.onChange(le);const ar=_(Ae,ct,Ze),qt=!Ll(ar)||wt;if(!Ze&&A.state.next({name:Ae,type:le.type,values:ns(i)}),Qe)return(u.isValid||f.isValid)&&(t.mode==="onBlur"?Ze&&x():Ze||x()),qt&&A.state.next({name:Ae,...wt?{}:ar});if(!Ze&&wt&&A.state.next({...r}),t.resolver){const{errors:gr}=await j([Ae]);if(Le(ct),pe){const Pr=see(r.errors,a,Ae),yr=see(gr,a,Pr.name||Ae);Re=yr.error,Ae=yr.name,We=Ll(gr)}}else v([Ae],!0),Re=(await BR(ke,l.disabled,i,m,t.shouldUseNativeValidation))[Ae],v([Ae]),Le(ct),pe&&(Re?We=!1:(u.isValid||f.isValid)&&(We=await T(a,!0)));pe&&(ke._f.deps&&Z(ke._f.deps),I(Ae,We,Re,ar))}},X=(le,ne)=>{if(ur(r.errors,ne)&&le.focus)return le.focus(),1},Z=async(le,ne={})=>{let Ae,pe;const ke=Cc(le);if(t.resolver){const Le=await k(ss(le)?le:ke);Ae=Ll(Le),pe=le?!ke.some(qe=>ur(Le,qe)):Ae}else le?(pe=(await Promise.all(ke.map(async Le=>{const qe=ur(a,Le);return await T(qe&&qe._f?{[Le]:qe}:qe)}))).every(Boolean),!(!pe&&!r.isValid)&&x()):pe=Ae=await T(a);return A.state.next({...!Nh(le)||(u.isValid||f.isValid)&&Ae!==r.isValid?{}:{name:le},...t.resolver||!le?{isValid:Ae}:{},errors:r.errors}),ne.shouldFocus&&!pe&&Qb(a,X,le?ke:l.mount),pe},U=le=>{const ne={...o.mount?i:n};return ss(le)?ne:Nh(le)?ur(ne,le):le.map(Ae=>ur(ne,Ae))},Y=(le,ne)=>({invalid:!!ur((ne||r).errors,le),isDirty:!!ur((ne||r).dirtyFields,le),error:ur((ne||r).errors,le),isValidating:!!ur(r.validatingFields,le),isTouched:!!ur((ne||r).touchedFields,le)}),P=le=>{le&&Cc(le).forEach(ne=>Zs(r.errors,ne)),A.state.next({errors:le?r.errors:{}})},D=(le,ne,Ae)=>{const pe=(ur(a,le,{_f:{}})._f||{}).ref,ke=ur(r.errors,le)||{},{ref:Le,message:qe,type:ze,...Re}=ke;Hn(r.errors,le,{...Re,...ne,ref:pe}),A.state.next({name:le,errors:r.errors,isValid:!1}),Ae&&Ae.shouldFocus&&pe&&pe.focus&&pe.focus()},W=(le,ne)=>Zu(le)?A.state.subscribe({next:Ae=>"values"in Ae&&le(S(void 0,ne),Ae)}):S(le,ne,!0),J=le=>A.state.subscribe({next:ne=>{zvt(le.name,ne.name,le.exact)&&Qvt(ne,le.formState||u,ge,le.reRenderRoot)&&le.callback({values:{...i},...r,...ne,defaultValues:n})}}).unsubscribe,ce=le=>(o.mount=!0,f={...f,...le.formState},J({...le,formState:f})),ie=(le,ne={})=>{for(const Ae of le?Cc(le):l.mount)l.mount.delete(Ae),l.array.delete(Ae),ne.keepValue||(Zs(a,Ae),Zs(i,Ae)),!ne.keepError&&Zs(r.errors,Ae),!ne.keepDirty&&Zs(r.dirtyFields,Ae),!ne.keepTouched&&Zs(r.touchedFields,Ae),!ne.keepIsValidating&&Zs(r.validatingFields,Ae),!t.shouldUnregister&&!ne.keepDefaultValue&&Zs(n,Ae);A.state.next({values:ns(i)}),A.state.next({...r,...ne.keepDirty?{isDirty:F()}:{}}),!ne.keepIsValid&&x()},re=({disabled:le,name:ne})=>{(uh(le)&&o.mount||le||l.disabled.has(ne))&&(le?l.disabled.add(ne):l.disabled.delete(ne))},de=(le,ne={})=>{let Ae=ur(a,le);const pe=uh(ne.disabled)||uh(t.disabled);return Hn(a,le,{...Ae||{},_f:{...Ae&&Ae._f?Ae._f:{ref:{name:le}},name:le,mount:!0,...ne}}),l.mount.add(le),Ae?re({disabled:uh(ne.disabled)?ne.disabled:t.disabled,name:le}):B(le,!0,ne.value),{...pe?{disabled:ne.disabled||t.disabled}:{},...t.progressive?{required:!!ne.required,min:Tw(ne.min),max:Tw(ne.max),minLength:Tw(ne.minLength),maxLength:Tw(ne.maxLength),pattern:Tw(ne.pattern)}:{},name:le,onChange:G,onBlur:G,ref:ke=>{if(ke){de(le,ne),Ae=ur(a,le);const Le=ss(ke.value)&&ke.querySelectorAll&&ke.querySelectorAll("input,select,textarea")[0]||ke,qe=Pvt(Le),ze=Ae._f.refs||[];if(qe?ze.find(Re=>Re===Le):Le===Ae._f.ref)return;Hn(a,le,{_f:{...Ae._f,...qe?{refs:[...ze.filter(nD),Le,...Array.isArray(ur(n,le))?[{}]:[]],ref:{type:Le.type,name:le}}:{ref:Le}}}),B(le,!1,void 0,Le)}else Ae=ur(a,le,{}),Ae._f&&(Ae._f.mount=!1),(t.shouldUnregister||ne.shouldUnregister)&&!(Tvt(l.array,le)&&o.action)&&l.unMount.add(le)}}},oe=()=>t.shouldFocusError&&Qb(a,X,l.mount),be=le=>{uh(le)&&(A.state.next({disabled:le}),Qb(a,(ne,Ae)=>{const pe=ur(a,Ae);pe&&(ne.disabled=pe._f.disabled||le,Array.isArray(pe._f.refs)&&pe._f.refs.forEach(ke=>{ke.disabled=pe._f.disabled||le}))},0,!1))},q=(le,ne)=>async Ae=>{let pe;Ae&&(Ae.preventDefault&&Ae.preventDefault(),Ae.persist&&Ae.persist());let ke=ns(i);if(A.state.next({isSubmitting:!0}),t.resolver){const{errors:Le,values:qe}=await j();r.errors=Le,ke=ns(qe)}else await T(a);if(l.disabled.size)for(const Le of l.disabled)Zs(ke,Le);if(Zs(r.errors,"root"),Ll(r.errors)){A.state.next({errors:{}});try{await le(ke,Ae)}catch(Le){pe=Le}}else ne&&await ne({...r.errors},Ae),oe(),setTimeout(oe);if(A.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ll(r.errors)&&!pe,submitCount:r.submitCount+1,errors:r.errors}),pe)throw pe},we=(le,ne={})=>{ur(a,le)&&(ss(ne.defaultValue)?Q(le,ns(ur(n,le))):(Q(le,ne.defaultValue),Hn(n,le,ns(ne.defaultValue))),ne.keepTouched||Zs(r.touchedFields,le),ne.keepDirty||(Zs(r.dirtyFields,le),r.isDirty=ne.defaultValue?F(le,ns(ur(n,le))):F()),ne.keepError||(Zs(r.errors,le),u.isValid&&x()),A.state.next({...r}))},Te=(le,ne={})=>{const Ae=le?ns(le):n,pe=ns(Ae),ke=Ll(le),Le=ke?n:pe;if(ne.keepDefaultValues||(n=Ae),!ne.keepValues){if(ne.keepDirtyValues){const qe=new Set([...l.mount,...Object.keys(_w(n,i))]);for(const ze of Array.from(qe))ur(r.dirtyFields,ze)?Hn(Le,ze,ur(i,ze)):Q(ze,ur(Le,ze))}else{if(t9&&ss(le))for(const qe of l.mount){const ze=ur(a,qe);if(ze&&ze._f){const Re=Array.isArray(ze._f.refs)?ze._f.refs[0]:ze._f.ref;if(v_(Re)){const We=Re.closest("form");if(We){We.reset();break}}}}if(ne.keepFieldsRef)for(const qe of l.mount)Q(qe,ur(Le,qe));else a={}}i=t.shouldUnregister?ne.keepDefaultValues?ns(n):{}:ns(Le),A.array.next({values:{...Le}}),A.state.next({values:{...Le}})}l={mount:ne.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!ne.keepIsValid||!!ne.keepDirtyValues,o.watch=!!t.shouldUnregister,A.state.next({submitCount:ne.keepSubmitCount?r.submitCount:0,isDirty:ke?!1:ne.keepDirty?r.isDirty:!!(ne.keepDefaultValues&&!_m(le,n)),isSubmitted:ne.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ke?{}:ne.keepDirtyValues?ne.keepDefaultValues&&i?_w(n,i):r.dirtyFields:ne.keepDefaultValues&&le?_w(n,le):ne.keepDirty?r.dirtyFields:{},touchedFields:ne.keepTouched?r.touchedFields:{},errors:ne.keepErrors?r.errors:{},isSubmitSuccessful:ne.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},Ee=(le,ne)=>Te(Zu(le)?le(i):le,ne),ue=(le,ne={})=>{const Ae=ur(a,le),pe=Ae&&Ae._f;if(pe){const ke=pe.refs?pe.refs[0]:pe.ref;ke.focus&&(ke.focus(),ne.shouldSelect&&Zu(ke.select)&&ke.select())}},ge=le=>{r={...r,...le}},ve={control:{register:de,unregister:ie,getFieldState:Y,handleSubmit:q,setError:D,_subscribe:J,_runSchema:j,_focusError:oe,_getWatch:S,_getDirty:F,_setValid:x,_setFieldArray:y,_setDisabledField:re,_setErrors:E,_getFieldArray:M,_reset:Te,_resetDefaultValues:()=>Zu(t.defaultValues)&&t.defaultValues().then(le=>{Ee(le,t.resetOptions),A.state.next({isLoading:!1})}),_removeUnmounted:L,_disableForm:be,_subjects:A,_proxyFormState:u,get _fields(){return a},get _formValues(){return i},get _state(){return o},set _state(le){o=le},get _defaultValues(){return n},get _names(){return l},set _names(le){l=le},get _formState(){return r},get _options(){return t},set _options(le){t={...t,...le}}},subscribe:ce,trigger:Z,register:de,handleSubmit:q,watch:W,setValue:Q,getValues:U,reset:Ee,resetField:we,clearErrors:P,unregister:ie,setError:D,setFocus:ue,getFieldState:Y};return{...ve,formControl:ve}}var pm=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},sD=(e,t,r={})=>r.shouldFocus||ss(r.shouldFocus)?r.focusName||`${e}.${ss(r.focusIndex)?t:r.focusIndex}.`:"",iD=(e,t)=>[...e,...Cc(t)],oD=e=>Array.isArray(e)?e.map(()=>{}):void 0;function lD(e,t,r){return[...e.slice(0,t),...Cc(r),...e.slice(t)]}var cD=(e,t,r)=>Array.isArray(e)?(ss(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],dD=(e,t)=>[...Cc(t),...Cc(e)];function Kvt(e,t){let r=0;const a=[...e];for(const n of t)a.splice(n-r,1),r++;return eT(a).length?a:[]}var uD=(e,t)=>ss(t)?[]:Kvt(e,Cc(t).sort((r,a)=>r-a)),fD=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},oee=(e,t,r)=>(e[t]=r,e);function Wvt(e){const t=Ivt(),{control:r=t.control,name:a,keyName:n="id",shouldUnregister:i,rules:o}=e,[l,c]=ft.useState(r._getFieldArray(a)),d=ft.useRef(r._getFieldArray(a).map(pm)),u=ft.useRef(l),f=ft.useRef(!1);u.current=l,r._names.array.add(a),ft.useMemo(()=>o&&r.register(a,o),[r,o,a]),bme(()=>r._subjects.array.subscribe({next:({values:_,name:I})=>{if(I===a||!I){const j=ur(_,a);Array.isArray(j)&&(c(j),d.current=j.map(pm))}}}).unsubscribe,[r,a]);const A=ft.useCallback(_=>{f.current=!0,r._setFieldArray(a,_)},[r,a]),m=(_,I)=>{const j=Cc(ns(_)),k=iD(r._getFieldArray(a),j);r._names.focus=sD(a,k.length-1,I),d.current=iD(d.current,j.map(pm)),A(k),c(k),r._setFieldArray(a,k,iD,{argA:oD(_)})},g=(_,I)=>{const j=Cc(ns(_)),k=dD(r._getFieldArray(a),j);r._names.focus=sD(a,0,I),d.current=dD(d.current,j.map(pm)),A(k),c(k),r._setFieldArray(a,k,dD,{argA:oD(_)})},x=_=>{const I=uD(r._getFieldArray(a),_);d.current=uD(d.current,_),A(I),c(I),!Array.isArray(ur(r._fields,a))&&Hn(r._fields,a,void 0),r._setFieldArray(a,I,uD,{argA:_})},v=(_,I,j)=>{const k=Cc(ns(I)),T=lD(r._getFieldArray(a),_,k);r._names.focus=sD(a,_,j),d.current=lD(d.current,_,k.map(pm)),A(T),c(T),r._setFieldArray(a,T,lD,{argA:_,argB:oD(I)})},y=(_,I)=>{const j=r._getFieldArray(a);fD(j,_,I),fD(d.current,_,I),A(j),c(j),r._setFieldArray(a,j,fD,{argA:_,argB:I},!1)},N=(_,I)=>{const j=r._getFieldArray(a);cD(j,_,I),cD(d.current,_,I),A(j),c(j),r._setFieldArray(a,j,cD,{argA:_,argB:I},!1)},E=(_,I)=>{const j=ns(I),k=oee(r._getFieldArray(a),_,j);d.current=[...k].map((T,L)=>!T||L===_?pm():d.current[L]),A(k),c([...k]),r._setFieldArray(a,k,oee,{argA:_,argB:j},!0,!1)},B=_=>{const I=Cc(ns(_));d.current=I.map(pm),A([...I]),c([...I]),r._setFieldArray(a,[...I],j=>j,{},!0,!1)};return ft.useEffect(()=>{if(r._state.action=!1,TR(a,r._names)&&r._subjects.state.next({...r._formState}),f.current&&(!mb(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!mb(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([a]).then(_=>{const I=ur(_.errors,a),j=ur(r._formState.errors,a);(j?!I&&j.type||I&&(j.type!==I.type||j.message!==I.message):I&&I.type)&&(I?Hn(r._formState.errors,a,I):Zs(r._formState.errors,a),r._subjects.state.next({errors:r._formState.errors}))});else{const _=ur(r._fields,a);_&&_._f&&!(mb(r._options.reValidateMode).isOnSubmit&&mb(r._options.mode).isOnSubmit)&&BR(_,r._names.disabled,r._formValues,r._options.criteriaMode===cu.all,r._options.shouldUseNativeValidation,!0).then(I=>!Ll(I)&&r._subjects.state.next({errors:kme(r._formState.errors,I,a)}))}r._subjects.state.next({name:a,values:ns(r._formValues)}),r._names.focus&&Qb(r._fields,(_,I)=>{if(r._names.focus&&I.startsWith(r._names.focus)&&_.focus)return _.focus(),1}),r._names.focus="",r._setValid(),f.current=!1},[l,a,r]),ft.useEffect(()=>(!ur(r._formValues,a)&&r._setFieldArray(a),()=>{const _=(I,j)=>{const k=ur(r._fields,I);k&&k._f&&(k._f.mount=j)};r._options.shouldUnregister||i?r.unregister(a):_(a,!1)}),[a,r,n,i]),{swap:ft.useCallback(y,[A,a,r]),move:ft.useCallback(N,[A,a,r]),prepend:ft.useCallback(g,[A,a,r]),append:ft.useCallback(m,[A,a,r]),remove:ft.useCallback(x,[A,a,r]),insert:ft.useCallback(v,[A,a,r]),update:ft.useCallback(E,[A,a,r]),replace:ft.useCallback(B,[A,a,r]),fields:ft.useMemo(()=>l.map((_,I)=>({..._,[n]:d.current[I]||pm()})),[l,n])}}function Xvt(e={}){const t=ft.useRef(void 0),r=ft.useRef(void 0),[a,n]=ft.useState({isDirty:!1,isValidating:!1,isLoading:Zu(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Zu(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:a},e.defaultValues&&!Zu(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=qvt(e);t.current={...l,formState:a}}const i=t.current.control;return i._options=e,bme(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>n({...i._formState}),reRenderRoot:!0});return n(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),ft.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),ft.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),ft.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),ft.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),ft.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==a.isDirty&&i._subjects.state.next({isDirty:o})}},[i,a.isDirty]),ft.useEffect(()=>{e.values&&!_m(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,n(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),ft.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=Ovt(a,i),t.current}const IR=ut(lr,"alternancias");async function Yvt(e){return(await Kr(IR,{...e,createdAt:Da(),updatedAt:Da()})).id}async function Jvt({especialidad:e,pageSize:t=10,lastDoc:r}){let a=jt(IR,Gt("createdAt","desc"),El(t));e&&(a=jt(IR,Kt("especialidad","==",e),Gt("createdAt","desc"),El(t))),r&&(a=jt(a,Zre(r)));const n=await Nr(a);return{items:n.docs.map(o=>({id:o.id,...o.data()})),lastDoc:n.docs[n.docs.length-1]}}async function Zvt(e,t){const r=$t(lr,"alternancias",e);await zi(r,{...t,updatedAt:Da()})}async function ebt(e){const t=$t(lr,"alternancias",e);await Ua(t)}async function tbt(e,t,r){const a=ut(lr,"alternancias",e,t);await Kr(a,{...r,createdAt:Da()})}async function rbt(e,t){const r=ut(lr,"alternancias",e,t);return(await Nr(r)).docs.map(n=>({id:n.id,...n.data()}))}async function abt(e,t){const r=`alternancias/${e}/evidencias/${Date.now()}_${t.name}`,a=vu(jx,r);await H1(a,t);const n=await gA(a);return await tbt(e,"evidencias",{url:n,path:r,nombre:t.name}),{url:n,path:r}}const og=({title:e,icon:t,children:r,accent:a="indigo"})=>{const n={indigo:"border-indigo-200 bg-indigo-50/60",emerald:"border-emerald-200 bg-emerald-50/60",amber:"border-amber-200 bg-amber-50/60",sky:"border-sky-200 bg-sky-50/60",slate:"border-slate-200 bg-white/70"};return s.jsxs("div",{className:`rounded-2xl border ${n[a]} p-4 md:p-5 shadow-sm`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-9 h-9 rounded-xl bg-white shadow-sm border border-slate-200",children:t}),s.jsx("h2",{className:"text-lg md:text-xl font-semibold text-slate-800",children:e})]}),r]})},nl=({children:e,hint:t})=>s.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),t&&s.jsx("span",{className:"text-[11px] text-slate-500",children:t})]}),lg=({children:e,tone:t="indigo"})=>{const r={indigo:"bg-indigo-100 text-indigo-700 border-indigo-200",emerald:"bg-emerald-100 text-emerald-700 border-emerald-200",amber:"bg-amber-100 text-amber-800 border-amber-200",sky:"bg-sky-100 text-sky-700 border-sky-200"};return s.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${r[t]}`,children:e})},j0=({title:e,onClick:t,tone:r="neutral",children:a,type:n="button",disabled:i})=>{const o={primary:"bg-indigo-600 hover:bg-indigo-700 text-white border border-indigo-700 shadow-sm",danger:"bg-rose-600 hover:bg-rose-700 text-white border border-rose-700 shadow-sm",warning:"bg-amber-500 hover:bg-amber-600 text-white border border-amber-600 shadow-sm",success:"bg-emerald-600 hover:bg-emerald-700 text-white border border-emerald-700 shadow-sm",neutral:"bg-white hover:bg-slate-50 text-slate-700 border border-slate-200 shadow-sm"};return s.jsx("button",{type:n,title:e,onClick:t,disabled:i,className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl text-sm transition ${o[r]} disabled:opacity-60`,children:a})},nbt=({className:e})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[s.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8Z"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),sbt=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState(null),[i,o]=w.useState(!1),[l,c]=w.useState(!1),[d,u]=w.useState(null),[f,A]=w.useState([]),[m,g]=w.useState(!1),{register:x,control:v,handleSubmit:y,reset:N,watch:E,setValue:B,formState:{isSubmitting:_}}=Xvt({defaultValues:{especialidad:"",curso:[],institucion:"",modulos:[],tipoAlternancia:[],fundamentacion:"",actividades:[],equipo:[],contrapartes:[],tutores:[],analisisCurricular:""}}),I=Wvt({control:v,name:"actividades"}),j=["COORDINACION_TP","SUBDIRECCION"],k=((e==null?void 0:e.role)||"").toString().trim().toUpperCase();if(!(!k||j.some(D=>k.includes(D))))return s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"rounded-xl border border-rose-200 bg-rose-50/60 p-4 text-rose-700 flex items-center gap-2",children:[s.jsx(gke,{className:"w-5 h-5"}),"Acceso no autorizado"]})});const L=D=>(D||"").replace(/\s*[-–]\s*\d+\s*horas?$/i,"").trim(),F=(D,W)=>{var J;return!D||!W?[]:((J=h5e[D])==null?void 0:J[W])??[]},S=E("especialidad"),M=E("modulos")||[],H=w.useMemo(()=>S?d5e[S]??[]:[],[S]),K=w.useMemo(()=>S?f5e[S]??[]:[],[S]);w.useEffect(()=>{B("curso",[]),B("modulos",[]);const D=[...E("actividades")||[]].map(W=>({...W,modulo:"",oa:""}));B("actividades",D)},[S]),w.useEffect(()=>{const D=[...E("actividades")||[]].map(W=>W.modulo&&!M.includes(W.modulo)?{...W,modulo:"",oa:""}:W);B("actividades",D)},[M]);const Q=async()=>{o(!0);const{items:D}=await Jvt({});r(D),o(!1)};w.useEffect(()=>{Q()},[]);const G=async D=>{a?await Zvt(a,{...D}):await Yvt({...D,createdBy:(e==null?void 0:e.email)||"desconocido"}),N(),n(null),await Q()},X=D=>{const W=Array.isArray(D.curso)?D.curso:D.curso?[D.curso]:[],J=Array.isArray(D.modulos)?D.modulos.map(ie=>L(ie)):[],ce=Array.isArray(D.actividades)?D.actividades.map(ie=>({...ie,modulo:ie!=null&&ie.modulo?L(ie.modulo):"",oa:(ie==null?void 0:ie.oa)||""})):[];N({...D,curso:W,modulos:J,actividades:ce}),n(D.id),window.scrollTo({top:0,behavior:"smooth"})},Z=async D=>{confirm("¿Eliminar esta alternancia?")&&(await ebt(D),await Q())},U=async(D,W)=>{await abt(D,W),alert("Evidencia subida correctamente")},Y=async D=>{g(!0);const W=Array.isArray(D.curso)?D.curso:D.curso?[D.curso]:[],J=Array.isArray(D.modulos)?D.modulos:[],ce=Array.isArray(D.actividades)?D.actividades.map(re=>({fecha:(re==null?void 0:re.fecha)||"",tipo:(re==null?void 0:re.tipo)||"",actividad:(re==null?void 0:re.actividad)||"",lugar:(re==null?void 0:re.lugar)||"",evidencias:(re==null?void 0:re.evidencias)||"",modulo:(re==null?void 0:re.modulo)||"",oa:(re==null?void 0:re.oa)||""})):[],ie={...D,curso:W,modulos:J,actividades:ce};u(ie);try{const re=await rbt(D.id,"evidencias");A(re)}catch{A([])}c(!0),g(!1)},P=D=>{const W=Array.from(D.currentTarget.selectedOptions).map(J=>J.value);B("curso",W,{shouldDirty:!0})};return s.jsxs("div",{className:"p-4 md:p-6",children:[s.jsx("div",{className:"mb-6 rounded-2xl bg-gradient-to-r from-indigo-600 via-sky-600 to-emerald-600 text-white p-5 shadow-sm",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-11 h-11 rounded-xl bg-white/10 flex items-center justify-center",children:s.jsx(e1,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl md:text-2xl font-semibold",children:"Formación por Alternancia"}),s.jsx("p",{className:"text-white/90 text-sm",children:"Registra planes, actividades y evidencias. Interfaz moderna, responsiva y con íconos."})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(j0,{title:"Nuevo plan",onClick:()=>{N(),n(null)},tone:"neutral",children:[s.jsx(ho,{className:"w-4 h-4"}),"Limpiar"]}),s.jsxs(j0,{title:"Guardar",type:"submit",tone:"success",disabled:_,children:[_?s.jsx(si,{className:"w-4 h-4 animate-spin"}):s.jsx(kl,{className:"w-4 h-4"}),"Guardar"]})]})]})}),s.jsx(og,{title:"Planes guardados",icon:s.jsx(rA,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:i?s.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(si,{className:"w-4 h-4 animate-spin"})," Cargando…"]}):t.length===0?s.jsx("p",{className:"text-slate-500 text-sm",children:"No hay alternancias registradas"}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(D=>s.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm hover:shadow-md transition",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-semibold",children:[s.jsx(Im,{className:"w-4 h-4 text-indigo-600"}),D.especialidad]}),s.jsxs("div",{className:"text-sm text-slate-600 flex flex-wrap gap-2",children:[s.jsx(lg,{tone:"indigo",children:Array.isArray(D.curso)?D.curso.join(", "):D.curso}),s.jsx(lg,{tone:"sky",children:D.institucion}),(Array.isArray(D.tipoAlternancia)?D.tipoAlternancia:[]).slice(0,2).map(W=>s.jsx(lg,{tone:"emerald",children:W},W))]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(j0,{title:"Ver",onClick:()=>Y(D),children:[s.jsx(nbt,{className:"w-4 h-4"})," Ver"]}),s.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-1 rounded-xl bg-amber-500 hover:bg-amber-600 text-white text-xs px-3 py-2 transition",children:[s.jsx(kx,{className:"w-4 h-4"}),s.jsx("input",{type:"file",className:"hidden",onChange:W=>W.target.files&&U(D.id,W.target.files[0])}),"Evidencia"]}),s.jsxs(j0,{title:"Editar",onClick:()=>X(D),children:[s.jsx(Z2,{className:"w-4 h-4"})," Editar"]}),s.jsxs(j0,{title:"Eliminar",onClick:()=>Z(D.id),tone:"danger",children:[s.jsx(Ia,{className:"w-4 h-4"})," Eliminar"]})]})]})},D.id))})}),l&&d&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>c(!1)}),s.jsxs("div",{className:"relative z-10 w-full max-w-5xl max-h-[90vh] overflow-y-auto rounded-2xl bg-white shadow-xl border border-slate-200",children:[s.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-5 py-3 border-b bg-white/90 backdrop-blur",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-9 h-9 rounded-xl bg-indigo-50 border border-indigo-100 flex items-center justify-center",children:s.jsx(e1,{className:"w-5 h-5 text-indigo-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Plan de Alternancia"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Visualización detallada"})]})]}),s.jsxs(j0,{title:"Cerrar",onClick:()=>c(!1),children:[s.jsx(ho,{className:"w-4 h-4"})," Cerrar"]})]}),s.jsxs("div",{className:"p-5 space-y-5",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:[s.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[s.jsx(nl,{children:"Especialidad"}),s.jsxs("div",{className:"flex items-center gap-2 text-slate-800",children:[s.jsx(Im,{className:"w-4 h-4 text-indigo-600"})," ",d.especialidad||"-"]})]}),s.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[s.jsx(nl,{children:"Institución"}),s.jsxs("div",{className:"flex items-center gap-2 text-slate-800",children:[s.jsx(yb,{className:"w-4 h-4 text-sky-600"})," ",d.institucion||"-"]})]}),s.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[s.jsx(nl,{children:"Cursos"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:(d.curso||[]).map(D=>s.jsx(lg,{tone:"sky",children:D},D))})]}),s.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[s.jsx(nl,{children:"Tipos de Alternancia"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:(d.tipoAlternancia||[]).map(D=>s.jsx(lg,{tone:"emerald",children:D},D))})]}),s.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[s.jsx(nl,{children:"Módulos"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:(d.modulos||[]).map(D=>s.jsx(lg,{tone:"indigo",children:D},D))})]}),s.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[s.jsx(nl,{children:"Creado por"}),s.jsx("div",{className:"text-slate-700 text-sm",children:d.createdBy||"-"})]})]}),s.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[s.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Fundamentación técnico‑pedagógica"}),s.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:d.fundamentacion||"—"})]}),s.jsxs("div",{className:"rounded-2xl border border-slate-200",children:[s.jsx("div",{className:"px-4 py-3 border-b bg-slate-50/50",children:s.jsx("h4",{className:"font-semibold text-slate-800",children:"Plan de actividades"})}),d.actividades&&d.actividades.length>0?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-2 text-left",children:"Fecha"}),s.jsx("th",{className:"p-2 text-left",children:"Tipo"}),s.jsx("th",{className:"p-2 text-left",children:"Actividad"}),s.jsx("th",{className:"p-2 text-left",children:"Lugar"}),s.jsx("th",{className:"p-2 text-left",children:"Módulo"}),s.jsx("th",{className:"p-2 text-left",children:"OA"}),s.jsx("th",{className:"p-2 text-left",children:"Evidencias"})]})}),s.jsx("tbody",{className:"divide-y",children:d.actividades.map((D,W)=>s.jsxs("tr",{children:[s.jsx("td",{className:"p-2 text-slate-700",children:D.fecha||"—"}),s.jsx("td",{className:"p-2 text-slate-700",children:D.tipo||"—"}),s.jsx("td",{className:"p-2 text-slate-700",children:D.actividad||"—"}),s.jsx("td",{className:"p-2 text-slate-700",children:D.lugar||"—"}),s.jsx("td",{className:"p-2 text-slate-700",children:D.modulo||"—"}),s.jsx("td",{className:"p-2 text-slate-700",children:D.oa||"—"}),s.jsx("td",{className:"p-2 text-slate-700",children:D.evidencias||"—"})]},W))})]})}):s.jsx("div",{className:"p-4 text-sm text-slate-500",children:"Sin actividades registradas"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[s.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Equipo"}),(d.equipo||[]).length>0?s.jsx("ul",{className:"space-y-1 text-sm",children:d.equipo.map((D,W)=>s.jsxs("li",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-700",children:D.nombre||"—"}),s.jsx("span",{className:"text-slate-500",children:D.rol||""})]},W))}):s.jsx("p",{className:"text-sm text-slate-500",children:"Sin equipo registrado"})]}),s.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[s.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Contrapartes"}),(d.contrapartes||[]).length>0?s.jsx("ul",{className:"space-y-1 text-sm",children:d.contrapartes.map((D,W)=>s.jsxs("li",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-700",children:D.nombre||"—"}),s.jsx("span",{className:"text-slate-500",children:D.rol||""})]},W))}):s.jsx("p",{className:"text-sm text-slate-500",children:"Sin contrapartes"})]}),s.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[s.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Tutores"}),(d.tutores||[]).length>0?s.jsx("ul",{className:"space-y-1 text-sm",children:d.tutores.map((D,W)=>s.jsxs("li",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-700",children:D.nombre||"—"}),s.jsx("span",{className:"text-slate-500",children:D.rol||""})]},W))}):s.jsx("p",{className:"text-sm text-slate-500",children:"Sin tutores"})]})]}),s.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[s.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Análisis Curricular"}),s.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:d.analisisCurricular||"—"})]}),s.jsxs("div",{className:"rounded-2xl border border-slate-200",children:[s.jsxs("div",{className:"px-4 py-3 border-b bg-slate-50/50 flex items-center justify-between",children:[s.jsx("h4",{className:"font-semibold text-slate-800",children:"Evidencias subidas"}),m&&s.jsx("span",{className:"text-sm text-slate-500",children:"Cargando…"})]}),(f||[]).length>0?s.jsx("div",{className:"p-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:f.map(D=>s.jsxs("a",{href:D.url,target:"_blank",rel:"noreferrer",className:"group rounded-xl border border-slate-200 p-3 hover:shadow-sm transition bg-white flex items-center gap-3",children:[s.jsx(GD,{className:"w-5 h-5 text-emerald-600"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm text-slate-800 truncate group-hover:underline",children:D.nombre||"archivo"}),s.jsx("div",{className:"text-xs text-slate-500 truncate",children:D.path||""})]})]},D.id))}):s.jsx("div",{className:"p-4 text-sm text-slate-500",children:"No hay evidencias adjuntas"})]})]})]})]}),s.jsxs("form",{onSubmit:y(G),className:"mt-6 space-y-5",children:[s.jsx(og,{title:"Contexto de la Alternancia",icon:s.jsx(yb,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(nl,{children:"Especialidad"}),s.jsxs("div",{className:"relative",children:[s.jsx(Im,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),s.jsxs("select",{...x("especialidad"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-indigo-100",children:[s.jsx("option",{value:"",children:"Selecciona…"}),l5e.map(D=>s.jsx("option",{value:D,children:D},D))]})]})]}),s.jsxs("div",{children:[s.jsx(nl,{children:"Institución"}),s.jsxs("div",{className:"relative",children:[s.jsx(yb,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),s.jsxs("select",{...x("institucion"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-sky-100",children:[s.jsx("option",{value:"",children:"Selecciona…"}),c5e.map(D=>s.jsx("option",{value:D,children:D},D))]})]})]}),s.jsxs("div",{children:[s.jsx(nl,{hint:"Ctrl/Cmd + clic para seleccionar múltiples cursos.",children:"Cursos"}),s.jsxs("div",{className:"relative",children:[s.jsx(_i,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),s.jsx("select",{multiple:!0,size:4,...x("curso"),onChange:P,className:"w-full min-h-[120px] rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-emerald-100 disabled:opacity-50",disabled:!S,children:S?H.map(D=>s.jsx("option",{value:D,children:D},D)):s.jsx("option",{value:"",children:"Elige especialidad primero"})})]}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(E("curso")||[]).map(D=>s.jsx(lg,{tone:"sky",children:D},D))})]})]})}),s.jsx(og,{title:"Módulos implicados",icon:s.jsx(i4,{className:"w-5 h-5 text-emerald-700"}),accent:"emerald",children:S?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:K.map(D=>s.jsxs("label",{className:"flex items-start gap-2 rounded-xl border border-emerald-200 bg-white p-3 shadow-sm hover:shadow transition",children:[s.jsx("input",{type:"checkbox",value:D,className:"mt-1 accent-emerald-600",...x("modulos")}),s.jsx("span",{className:"text-sm text-slate-700",children:D})]},D))}):s.jsx("p",{className:"text-sm text-slate-500",children:"Elige una especialidad para ver los módulos."})}),s.jsx(og,{title:"Tipo de Alternancia",icon:s.jsx(Nb,{className:"w-5 h-5 text-amber-700"}),accent:"amber",children:s.jsx("div",{className:"flex gap-3 flex-wrap",children:u5e.map(D=>s.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200 bg-white px-3 py-2 text-sm shadow-sm hover:shadow transition",children:[s.jsx("input",{type:"checkbox",value:D,className:"accent-amber-600",...x("tipoAlternancia")}),s.jsx("span",{className:"text-slate-700",children:D})]},D))})}),s.jsx(og,{title:"Fundamentación técnico‑pedagógica",icon:s.jsx(qEe,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:s.jsx("textarea",{...x("fundamentacion"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Describe brevemente la finalidad pedagógica, vínculos curriculares y el aporte para los estudiantes."})}),s.jsx(og,{title:"Plan de actividades",icon:s.jsx(rA,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:s.jsxs("div",{className:"space-y-3",children:[I.fields.map((D,W)=>{const J=E(`actividades.${W}.modulo`)||"",ce=F(S,J);return s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(nl,{children:"Fecha"}),s.jsx(Ro,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),s.jsx("input",{type:"date",placeholder:"Fecha",...x(`actividades.${W}.fecha`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),s.jsxs("div",{children:[s.jsx(nl,{children:"Tipo"}),s.jsx("input",{placeholder:"Pasantía, visita, taller...",...x(`actividades.${W}.tipo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),s.jsxs("div",{children:[s.jsx(nl,{children:"Actividad"}),s.jsx("input",{placeholder:"Descripción breve",...x(`actividades.${W}.actividad`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(nl,{children:"Lugar"}),s.jsx(J2,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),s.jsx("input",{placeholder:"Empresa/IP/CFT/Lab",...x(`actividades.${W}.lugar`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(nl,{children:"Evidencias"}),s.jsx(GD,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),s.jsx("input",{placeholder:"Informe, fotos, lista asistencia...",...x(`actividades.${W}.evidencias`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]})]}),s.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx(nl,{children:"Módulo"}),s.jsxs("select",{...x(`actividades.${W}.modulo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!S||M.length===0,children:[s.jsx("option",{value:"",children:!S&&"Elige especialidad arriba"||M.length===0&&"Selecciona módulos arriba"||"Selecciona…"}),M.map(ie=>s.jsx("option",{value:ie,children:ie},ie))]})]}),s.jsxs("div",{children:[s.jsx(nl,{children:"Objetivo de Aprendizaje (OA)"}),s.jsxs("select",{...x(`actividades.${W}.oa`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!J||ce.length===0,children:[s.jsx("option",{value:"",children:J?ce.length===0?"Sin OA definidos para este módulo":"Selecciona…":"Selecciona módulo primero"}),ce.map(ie=>s.jsx("option",{value:ie,children:ie},ie))]})]})]}),s.jsx("div",{className:"mt-3 flex justify-end",children:s.jsxs(j0,{title:"Eliminar fila",onClick:()=>I.remove(W),tone:"danger",children:[s.jsx(Ia,{className:"w-4 h-4"}),"Eliminar actividad"]})})]},D.id)}),s.jsxs(j0,{title:"Agregar actividad",onClick:()=>I.append({fecha:"",tipo:"",actividad:"",lugar:"",evidencias:"",modulo:"",oa:""}),tone:"primary",children:[s.jsx(Si,{className:"w-4 h-4"})," Agregar actividad"]})]})}),s.jsx(og,{title:"Análisis Curricular",icon:s.jsx(Im,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:s.jsx("textarea",{...x("analisisCurricular"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Módulos implicados + OA/AE asociados + distribución de horas (liceo/otro lugar)."})}),s.jsx("div",{className:"flex items-center justify-end gap-2",children:s.jsxs(j0,{title:"Guardar",type:"submit",tone:"success",disabled:_,children:[_?s.jsx(si,{className:"w-4 h-4 animate-spin"}):s.jsx(dn,{className:"w-4 h-4"}),"Guardar"]})})]})]})},OR=["INCIPIENTE","EN_DESARROLLO","LOGRADO","SOBRESALIENTE"],ibt={INCIPIENTE:25},obt=["AULA","TALLER","EMPRESA"],lee={escalaMin:1,escalaMax:7,porcentajeAprobacion:60,notaAprobacion:4,regla:"lineal"},Sme="tp_especialidades",_me="tp_modulos",lbt="tp_resultados_aprendizaje",cbt="tp_criterios_evaluacion",DR="tp_rubricas",Tme="tp_evidencias",Bme="tp_evaluaciones_comp",FR="config_evaluacion/competencias",cee=()=>Date.now(),Ime=async()=>{const e=await tA($t(lr,FR));return e.exists()?e.data():(await Us($t(lr,FR),lee),lee)},dbt=(e,t)=>{const{escalaMin:r,escalaMax:a,porcentajeAprobacion:n,notaAprobacion:i}=t;if(e<=n){const o=(i-r)/(n-0||1);return Number((r+o*(e-0)).toFixed(1))}else{const o=(a-i)/(100-n||1);return Number((i+o*(e-n)).toFixed(1))}},ubt=async(e,t)=>{const r=await Ime();let a=0,n=0;Object.entries(t).forEach(([l,c])=>{n+=c;const d=e[l],u=(d==null?void 0:d.puntaje)??ibt.INCIPIENTE;a+=u*c/100});const i=n?a/n*100:0,o=dbt(i,r);return{puntajeTotal:a,porcentaje:i,nota:o}},dee=e=>Kr(ut(lr,Sme),e),fbt=e=>{const t=jt(ut(lr,Sme),Gt("nombre"));return rr(t,r=>{e(r.docs.map(a=>({id:a.id,...a.data()})))},r=>{console.error("[competenciasHelper] subscribeEspecialidades error:",r),e([])})},uee=e=>Kr(ut(lr,_me),e),fee=async e=>{const t=jt(ut(lr,_me),Kt("especialidadId","==",e),Gt("nombre"));return(await Nr(t)).docs.map(a=>({id:a.id,...a.data()}))},hbt=async e=>{const t=jt(ut(lr,lbt),Kt("moduloId","==",e),Gt("codigo"));return(await Nr(t)).docs.map(a=>({id:a.id,...a.data()}))},Abt=async e=>{const t=jt(ut(lr,cbt),Kt("raId","==",e),Gt("codigo"));return(await Nr(t)).docs.map(a=>({id:a.id,...a.data()}))},mbt=async e=>e.id?(await zi($t(lr,DR,e.id),{...e,updatedAt:cee()}),e.id):(await Kr(ut(lr,DR),{...e,updatedAt:cee()})).id,Ome=async e=>{const t=jt(ut(lr,DR),Kt("raId","==",e)),a=(await Nr(t)).docs[0];return a?{id:a.id,...a.data()}:null},pbt=async(e,t)=>{const r=vu(jx,t),a=await H1(r,e);return{url:await gA(a.ref),path:a.ref.fullPath}},gbt=e=>Kr(ut(lr,Tme),e),xbt=(e,t)=>{const r=jt(ut(lr,Tme),Kt("raId","==",e),Gt("fecha","desc"));return rr(r,a=>{t(a.docs.map(n=>({id:n.id,...n.data()})))},a=>{console.error("[competenciasHelper] subscribeEvidenciasByRA error:",a,"raId=",e),t([])})},vbt=async e=>{const t=await Ome(e.raId),r=(t==null?void 0:t.ponderacionCE)??{},{puntajeTotal:a,porcentaje:n,nota:i}=await ubt(e.ceIdScores,r);return Kr(ut(lr,Bme),{...e,puntajeTotal:a,porcentaje:n,nota:i})},bbt=(e,t)=>{const r=jt(ut(lr,Bme),Kt("raId","==",e),Gt("fecha","desc"));return rr(r,a=>{t(a.docs.map(n=>({id:n.id,...n.data()})))},a=>{console.error("[competenciasHelper] subscribeEvaluacionesByRA error:",a,"raId=",e),t([])})},ybt=async e=>{const t=await Ime();await Us($t(lr,FR),{...t,...e},{merge:!0})},wbt=({raId:e,ces:t,rubrica:r,onSaved:a,currentUserId:n})=>{const[i,o]=w.useState(null);if(w.useEffect(()=>{o(e?r??{id:"",raId:e,niveles:OR,descriptores:[],ponderacionCE:Object.fromEntries(t.map(f=>[f.id,f.peso])),updatedAt:Date.now(),createdBy:n}:null)},[e,r,t,n]),!e)return s.jsx("div",{children:"Selecciona un RA para editar su rúbrica."});if(!i)return null;const l=(f,A)=>{o(m=>m&&{...m,ponderacionCE:{...m.ponderacionCE,[f]:A}})},c=(f,A,m)=>{o(g=>{if(!g)return g;const x=g.descriptores.filter(v=>!(v.ceId===f&&v.nivel===A));return{...g,descriptores:[...x,{ceId:f,nivel:A,descriptor:m,puntaje:A==="SOBRESALIENTE"?100:A==="LOGRADO"?75:A==="EN_DESARROLLO"?50:25}]}})},d=w.useMemo(()=>Object.values(i.ponderacionCE).reduce((f,A)=>f+(Number(A)||0),0),[i.ponderacionCE]),u=async()=>{const f=await mbt(i);a==null||a(f)};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Rúbrica por CE (debe sumar 100%)"}),s.jsxs("div",{className:`px-2 py-1 rounded-full text-xs ${d===100?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:["Total: ",d,"%"]})]}),s.jsx("div",{className:"space-y-4",children:t.map(f=>s.jsxs("div",{className:"border rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold text-slate-800",children:[f.codigo," — ",f.descriptor]}),s.jsxs("div",{className:"text-xs text-slate-500",children:["Evidencia esperada: ",f.evidenciaEsperada||"—"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs text-slate-500",children:"Peso"}),s.jsx("input",{type:"number",className:"w-20 border rounded-lg px-2 py-1",value:i.ponderacionCE[f.id]??0,onChange:A=>l(f.id,Number(A.target.value))}),s.jsx("span",{className:"text-xs text-slate-500",children:"%"})]})]}),s.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3",children:OR.map(A=>{const m=i.descriptores.find(g=>g.ceId===f.id&&g.nivel===A);return s.jsxs("div",{className:"bg-slate-50 border rounded-lg p-3",children:[s.jsx("div",{className:"text-xs font-medium text-slate-600 mb-1",children:A.replace("_"," ")}),s.jsx("textarea",{className:"w-full border rounded-lg px-2 py-1 text-sm",rows:2,value:(m==null?void 0:m.descriptor)||"",onChange:g=>c(f.id,A,g.target.value),placeholder:"Descriptor observable y medible…"})]},A)})})]},f.id))}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{onClick:u,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:[s.jsx(kl,{className:"w-4 h-4"}),s.jsx("span",{children:"Guardar rúbrica"})]})})]})},Nbt=({raId:e,currentUser:t,evidencias:r})=>{const[a,n]=w.useState(""),[i,o]=w.useState(""),[l,c]=w.useState("AULA"),[d,u]=w.useState(null),[f,A]=w.useState(""),[m,g]=w.useState(!1);if(!e)return s.jsx("div",{children:"Selecciona una RA para gestionar evidencias."});const x=async()=>{if(!(!d||!a)){g(!0);try{const v=d.name.split(".").pop(),y=`evidencias/${e}/${a}/${Date.now()}.${v}`,{url:N,path:E}=await pbt(d,y);await gbt({estudianteId:a,raId:e,ceId:i||void 0,url:N,tipo:Ebt(d.name),fecha:Date.now(),autorId:t.id,contexto:l,observaciones:f,storagePath:E}),u(null),A(""),n(""),o("")}finally{g(!1)}}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[s.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Estudiante (ID)",value:a,onChange:v=>n(v.target.value)}),s.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"CE (opcional)",value:i,onChange:v=>o(v.target.value)}),s.jsxs("select",{className:"border rounded-xl px-3 py-2",value:l,onChange:v=>c(v.target.value),children:[s.jsx("option",{value:"AULA",children:"AULA"}),s.jsx("option",{value:"TALLER",children:"TALLER"}),s.jsx("option",{value:"EMPRESA",children:"EMPRESA"})]}),s.jsx("input",{type:"file",onChange:v=>{var y;return u(((y=v.target.files)==null?void 0:y[0])||null)},className:"border rounded-xl px-3 py-2"})]}),s.jsx("textarea",{className:"w-full border rounded-xl px-3 py-2",rows:2,placeholder:"Observaciones…",value:f,onChange:v=>A(v.target.value)}),s.jsxs("button",{onClick:x,disabled:m||!d||!a,className:`flex items-center gap-2 rounded-xl px-4 py-2 ${m||!d||!a?"bg-slate-200 text-slate-500":"bg-indigo-600 hover:bg-indigo-700 text-white"}`,children:[s.jsx(kx,{className:"w-4 h-4"}),s.jsx("span",{children:"Subir evidencia"})]}),s.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:r.map(v=>s.jsxs("a",{href:v.url,target:"_blank",rel:"noreferrer",className:"border rounded-xl p-3 hover:shadow",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[Cbt(v.tipo),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:new Date(v.fecha).toLocaleString()}),s.jsxs("div",{className:"text-xs text-slate-500",children:[v.contexto," — Est.: ",v.estudianteId]})]})]}),v.observaciones&&s.jsx("div",{className:"text-xs text-slate-600 mt-2",children:v.observaciones})]},v.id))})]})},Ebt=e=>{var r;const t=(r=e.split(".").pop())==null?void 0:r.toLowerCase();return["png","jpg","jpeg","webp","gif"].includes(t||"")?"imagen":["mp4","mov","avi","mkv","webm"].includes(t||"")?"video":["pdf","doc","docx","ppt","pptx","xls","xlsx","txt","csv"].includes(t||"")?"documento":"otro"},Cbt=e=>{switch(e){case"imagen":return s.jsx(O5,{className:"w-5 h-5 text-rose-600"});case"video":return s.jsx(KCe,{className:"w-5 h-5 text-indigo-600"});case"documento":return s.jsx(Lo,{className:"w-5 h-5 text-emerald-600"});default:return s.jsx(kx,{className:"w-5 h-5 text-slate-500"})}},hee=["#6366F1","#22C55E","#F59E0B","#EF4444","#14B8A6","#8B5CF6","#F43F5E"],jbt=({raId:e})=>{const[t,r]=w.useState([]);if(w.useEffect(()=>{if(!e){r([]);return}const o=bbt(e,r);return()=>o()},[e]),!e)return s.jsx("div",{children:"Selecciona una RA para visualizar el dashboard."});const a=w.useMemo(()=>{const o={};return t.forEach(l=>{const c=l.curso||"—";o[c]||(o[c]={curso:c,promedio:0,n:0}),o[c].promedio+=l.nota,o[c].n+=1}),Object.values(o).map(l=>({curso:l.curso,promedio:Number((l.promedio/(l.n||1)).toFixed(2)),n:l.n}))},[t]),n=w.useMemo(()=>{const o={"1.0-3.9":0,"4.0-4.9":0,"5.0-5.9":0,"6.0-7.0":0};return t.forEach(l=>{l.nota<4?o["1.0-3.9"]++:l.nota<5?o["4.0-4.9"]++:l.nota<6?o["5.0-5.9"]++:o["6.0-7.0"]++}),Object.entries(o).map(([l,c])=>({rango:l,value:c}))},[t]),i=()=>{const o=t.map(d=>({id:d.id,estudianteId:d.estudianteId,curso:d.curso,raId:d.raId,porcentaje:d.porcentaje,nota:d.nota,fecha:new Date(d.fecha).toISOString(),contexto:d.contexto})),l=Fs.book_new(),c=Fs.json_to_sheet(o);Fs.book_append_sheet(l,c,"Evaluaciones_RA"),K1(l,`evaluaciones_${e}.xlsx`)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[s.jsx(bl,{className:"w-5 h-5 text-indigo-600"}),"Resumen de logro por curso"]}),s.jsxs("button",{onClick:i,className:"flex items-center gap-2 border rounded-xl px-3 py-2 hover:bg-slate-50",children:[s.jsx(pf,{className:"w-4 h-4"}),s.jsx("span",{children:"Descargar CSV"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{className:"h-72 border rounded-xl p-3",children:s.jsx(oi,{width:"100%",height:"100%",children:s.jsxs(Ad,{data:a,children:[s.jsx(yl,{dataKey:"curso"}),s.jsx(wl,{domain:[1,7]}),s.jsx(ii,{}),s.jsx(Ec,{dataKey:"promedio"})]})})}),s.jsx("div",{className:"h-72 border rounded-xl p-3",children:s.jsx(oi,{width:"100%",height:"100%",children:s.jsxs(kE,{children:[s.jsx(cy,{data:n,dataKey:"value",nameKey:"rango",outerRadius:90,label:!0,children:n.map((o,l)=>s.jsx(Lh,{fill:hee[l%hee.length]},`c-${l}`))}),s.jsx(ii,{}),s.jsx(Sp,{})]})})})]}),s.jsx("div",{className:"text-xs text-slate-500",children:"Nota: los promedios consideran la conversión lineal configurable (Decreto 67)."})]})},Bw=({active:e,onClick:t,icon:r,label:a})=>s.jsxs("button",{onClick:t,className:`flex items-center gap-2 px-3 py-2 rounded-full transition 
    ${e?"bg-indigo-600 text-white shadow":"bg-white text-slate-700 hover:bg-slate-100 border"}`,children:[r,s.jsx("span",{className:"font-medium",children:a})]}),zv=({children:e,className:t})=>s.jsx("div",{className:`bg-white rounded-2xl shadow-sm border p-4 ${t||""}`,children:e}),kbt=({currentUser:e})=>{const[t,r]=w.useState("planificacion"),[a,n]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState([]),[d,u]=w.useState([]),[f,A]=w.useState({}),[m,g]=w.useState(null),[x,v]=w.useState([]),[y,N]=w.useState(""),E=Q=>(Q||"").toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/\s+/g," ").trim(),B="automotriz",_="industrial",I=w.useMemo(()=>new Set(["modulo 01 – ajuste de motores.","modulo 01 - ajuste de motores.","modulo 01 ajuste de motores.","modulo 02 – lectura de planos y manuales tecnicos.","modulo 03 – manejo de residuos y desechos automotrices.","modulo 04 – mantenimiento de sistemas de seguridad y confortabilidad.","modulo 05 – mantenimiento de sistemas electricos y electronicos."].map(E)),[]),j=w.useMemo(()=>new Set(["modulo 00 – emprendimiento y empleabilidad (mecanica automotriz).","modulo 06 – mantenimiento de motores.","modulo 07 – mantenimiento de sistemas hidraulicos y neumaticos.","modulo 08 – mantenimiento de los sistemas de transmision y frenos.","modulo 09 – mantenimiento de sistemas de direccion y suspension."].map(E)),[]),k=w.useMemo(()=>new Set(["modulo 01 – soldadura industrial.","modulo 02 – mantenimiento de herramientas.","modulo 03 – medicion y verificacion.","modulo 04 – mecanica de banco.","modulo 05 – lectura de manuales y planos.","modulo 06 – emprendimiento y empleabilidad (mencion maquinas-herramientas).","modulo 07 – torneado de piezas y conjuntos mecanicos.","modulo 08 – fresado de piezas y conjuntos mecanicos.","modulo 09 – taladrado y rectificado de piezas mecanicas.","modulo 10 – mecanizado con maquinas de control numerico computacional (cnc)."].map(E)),[]),T=w.useMemo(()=>new Set(["modulo 03 – manejo de residuos y desechos automotrices.","modulo 03 - manejo de residuos y desechos automotrices.","modulo 06 – mantenimiento de motores.","modulo 06 - mantenimiento de motores."].map(E)),[]);w.useEffect(()=>{const Q=fbt(n);return()=>Q()},[]),w.useEffect(()=>{f.especialidadId?fee(f.especialidadId).then(o):o([]),A(Q=>({...Q,moduloId:void 0,raId:void 0})),c([]),u([]),g(null)},[f.especialidadId]),w.useEffect(()=>{const Q=a.find(X=>X.id===f.especialidadId);E(Q==null?void 0:Q.nombre).includes(B)?N(X=>X===""?"3":X):N("")},[f.especialidadId,a]),w.useEffect(()=>{f.moduloId?hbt(f.moduloId).then(c):c([]),A(Q=>({...Q,raId:void 0})),u([]),g(null)},[f.moduloId]),w.useEffect(()=>{if(f.raId){Abt(f.raId).then(u),Ome(f.raId).then(g);const Q=xbt(f.raId,v);return()=>Q()}else u([]),g(null),v([])},[f.raId]);const L=f.raId&&d.length>0,{especialidadesFiltradas:F,espFiltroFallback:S}=w.useMemo(()=>{if(!(a!=null&&a.length))return{especialidadesFiltradas:[],espFiltroFallback:!1};const Q=a.filter(G=>{const X=E(G.nombre);return X.includes(B)||X.includes(_)});return Q.length===0?{especialidadesFiltradas:a,espFiltroFallback:!0}:{especialidadesFiltradas:Q,espFiltroFallback:!1}},[a]),M=w.useMemo(()=>{const Q=a.find(G=>G.id===f.especialidadId);return E(Q==null?void 0:Q.nombre)},[a,f.especialidadId]),{modulosFiltrados:H,filtroFallback:K}=w.useMemo(()=>{let Q=!1;if(!(i!=null&&i.length))return{modulosFiltrados:[],filtroFallback:!1};if(M.includes(B)){if(!y)return{modulosFiltrados:[],filtroFallback:!1};const G=y==="3"?I:j,X=i.filter(Z=>G.has(E(Z.nombre)));return X.length===0?(Q=!0,{modulosFiltrados:i,filtroFallback:Q}):{modulosFiltrados:X,filtroFallback:Q}}if(M.includes(_)){const G=i.filter(X=>k.has(E(X.nombre)));return G.length===0&&i.length>0?(Q=!0,{modulosFiltrados:i,filtroFallback:Q}):{modulosFiltrados:G,filtroFallback:Q}}return{modulosFiltrados:i,filtroFallback:Q}},[i,M,y,I,j,k]);return s.jsxs("div",{className:"w-full min-h-screen bg-slate-50",children:[s.jsx("div",{className:"sticky top-0 z-10 bg-white border-b",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(i4,{className:"w-6 h-6 text-indigo-600"}),s.jsx("h1",{className:"text-xl font-semibold text-slate-800",children:"Evaluación por Competencias EMTP"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Bw,{active:t==="planificacion",onClick:()=>r("planificacion"),icon:s.jsx(rA,{className:"w-4 h-4"}),label:"Planificar"}),s.jsx(Bw,{active:t==="evaluar",onClick:()=>r("evaluar"),icon:s.jsx(cke,{className:"w-4 h-4"}),label:"Evaluar"}),s.jsx(Bw,{active:t==="evidencias",onClick:()=>r("evidencias"),icon:s.jsx(kx,{className:"w-4 h-4"}),label:"Evidencias"}),s.jsx(Bw,{active:t==="dashboard",onClick:()=>r("dashboard"),icon:s.jsx(bl,{className:"w-4 h-4"}),label:"Dashboard"}),s.jsx(Bw,{active:t==="config",onClick:()=>r("config"),icon:s.jsx(eL,{className:"w-4 h-4"}),label:"Config"})]})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[s.jsx(zv,{children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Especialidad"}),s.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.especialidadId||"",onChange:Q=>A({especialidadId:Q.target.value}),children:[s.jsx("option",{value:"",children:"— Selecciona —"}),F.map(Q=>s.jsx("option",{value:Q.id,children:Q.nombre},Q.id))]}),S&&s.jsx("p",{className:"mt-1 text-xs text-amber-600",children:"Mostrando todas las especialidades por falta de coincidencia exacta con los nombres esperados (Automotriz/Industrial)."})]}),M.includes(B)&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Curso (Automotriz)"}),s.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:y,onChange:Q=>{N(Q.target.value),A(G=>({...G,moduloId:void 0,raId:void 0}))},children:[s.jsx("option",{value:"",children:"— Selecciona —"}),s.jsx("option",{value:"3",children:"3º medio"}),s.jsx("option",{value:"4",children:"4º medio TP"})]})]}),s.jsxs("div",{className:"sm:col-span-2",children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Módulo"}),s.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.moduloId||"",onChange:Q=>A(G=>({...G,moduloId:Q.target.value})),children:[s.jsx("option",{value:"",children:"— Selecciona —"}),H.map(Q=>{const X=M.includes(B)&&T.has(E(Q.nombre))?`${Q.nombre} — Currículum Nacional`:Q.nombre;return s.jsx("option",{value:Q.id,children:X},Q.id)})]}),K&&s.jsx("p",{className:"mt-1 text-xs text-amber-600",children:"Mostrando todos los módulos de la especialidad por falta de coincidencia exacta con la lista. Podemos alinear los nombres en Firestore para filtrar con precisión."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Resultado de Aprendizaje (RA)"}),s.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.raId||"",onChange:Q=>A(G=>({...G,raId:Q.target.value})),children:[s.jsx("option",{value:"",children:"— Selecciona —"}),l.map(Q=>s.jsxs("option",{value:Q.id,children:[Q.codigo," — ",Q.enunciado.slice(0,60),Q.enunciado.length>60?"…":""]},Q.id))]})]})]})}),t==="planificacion"&&s.jsx(zv,{children:s.jsx(wbt,{raId:f.raId,ces:d,rubrica:m,onSaved:Q=>{},currentUserId:e.id})}),t==="evaluar"&&s.jsxs(zv,{children:[!L&&s.jsx("div",{className:"text-slate-600",children:"Selecciona una RA con criterios (CE) para comenzar a evaluar."}),L&&s.jsx(Sbt,{raId:f.raId,ces:d,currentUser:e})]}),t==="evidencias"&&s.jsx(zv,{children:s.jsx(Nbt,{raId:f.raId,currentUser:e,evidencias:x})}),t==="dashboard"&&s.jsx(zv,{children:s.jsx(jbt,{raId:f.raId})}),t==="config"&&s.jsxs(zv,{children:[s.jsx(_bt,{}),s.jsxs("div",{className:"mt-6 border-t pt-4",children:[s.jsx(Tbt,{especialidades:a,normalize:E,onSeeded:async()=>{if(f.especialidadId){const Q=await fee(f.especialidadId);o(Q)}}}),s.jsx("div",{className:"mt-4",children:s.jsx(SeedRAAutomotriz,{getModuloByName:Q=>i.find(G=>E(G.nombre)===E(Q))})})]})]})]})]})},Sbt=({raId:e,ces:t,currentUser:r})=>{const[a,n]=w.useState(""),[i,o]=w.useState(r.curso||""),[l,c]=w.useState("AULA"),[d,u]=w.useState(""),[f,A]=w.useState({}),m=(v,y,N)=>{A(E=>({...E,[v]:{nivel:y,puntaje:N}}))},g=a&&Object.keys(f).length===t.length,x=async()=>{const v={estudianteId:a,curso:i,raId:e,ceIdScores:f,evaluadorId:r.id,fecha:Date.now(),contexto:l,retroalimentacion:d};await vbt(v),u(""),A({}),n("")};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Estudiante (ID)"}),s.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:a,onChange:v=>n(v.target.value),placeholder:"rut_o_uid"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Curso"}),s.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:i,onChange:v=>o(v.target.value),placeholder:"p.ej. 3ºB"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Contexto"}),s.jsx("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:l,onChange:v=>c(v.target.value),children:obt.map(v=>s.jsx("option",{value:v,children:v},v))})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("button",{disabled:!g,onClick:x,className:`w-full flex items-center justify-center gap-2 rounded-xl px-3 py-2 transition ${g?"bg-emerald-600 hover:bg-emerald-700 text-white":"bg-slate-200 text-slate-500 cursor-not-allowed"}`,children:[s.jsx(dn,{className:"w-4 h-4"}),s.jsx("span",{children:"Guardar evaluación"})]})})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.map(v=>s.jsxs("div",{className:"border rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"font-semibold text-slate-800",children:[v.codigo," — ",v.descriptor]}),s.jsxs("span",{className:"text-xs text-slate-500",children:["Peso ",v.peso,"%"]})]}),s.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2",children:OR.map(y=>{var N;return s.jsx("button",{onClick:()=>m(v.id,y,y==="SOBRESALIENTE"?100:y==="LOGRADO"?75:y==="EN_DESARROLLO"?50:25),className:`px-3 py-2 rounded-lg border text-sm ${((N=f[v.id])==null?void 0:N.nivel)===y?"bg-indigo-600 text-white":"bg-white hover:bg-slate-50"}`,children:y.replace("_"," ")},y)})})]},v.id))}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Retroalimentación formativa"}),s.jsx("textarea",{value:d,onChange:v=>u(v.target.value),className:"mt-1 w-full border rounded-xl px-3 py-2",rows:3,placeholder:"Sugerencias específicas para mejorar..."})]})]})},_bt=()=>{const[e,t]=w.useState(60),[r,a]=w.useState(4),n=async()=>{await ybt({porcentajeAprobacion:e,notaAprobacion:r})};return s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Porcentaje de aprobación (%)"}),s.jsx("input",{type:"number",className:"mt-1 w-full border rounded-xl px-3 py-2",value:e,onChange:i=>t(Number(i.target.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Nota de aprobación"}),s.jsx("input",{type:"number",step:"0.1",className:"mt-1 w-full border rounded-xl px-3 py-2",value:r,onChange:i=>a(Number(i.target.value))})]}),s.jsx("button",{onClick:n,className:"self-end bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:"Guardar"})]})},Tbt=({especialidades:e,normalize:t,onSeeded:r})=>{const[a,n]=w.useState(!1),[i,o]=w.useState(""),l=async()=>{n(!0),o("Sembrando especialidades y módulos base…");try{const c=m=>e.find(g=>t(g.nombre)===t(m));let d=c("Mecánica Automotriz"),u=c("Mecánica Industrial");d||(d={id:(await dee({nombre:"Mecánica Automotriz"})).id,nombre:"Mecánica Automotriz"}),u||(u={id:(await dee({nombre:"Mecánica Industrial"})).id,nombre:"Mecánica Industrial"});const f=["Módulo 01 – Ajuste de motores.","Módulo 02 – Lectura de planos y manuales técnicos.","Módulo 03 – Manejo de residuos y desechos automotrices.","Módulo 04 – Mantenimiento de sistemas de seguridad y confortabilidad.","Módulo 05 – Mantenimiento de sistemas eléctricos y electrónicos.","Módulo 00 – Emprendimiento y empleabilidad (mecánica automotriz).","Módulo 06 – Mantenimiento de motores.","Módulo 07 – Mantenimiento de sistemas hidráulicos y neumáticos.","Módulo 08 – Mantenimiento de los sistemas de transmisión y frenos.","Módulo 09 – Mantenimiento de sistemas de dirección y suspensión."],A=["Módulo 01 – Soldadura industrial.","Módulo 02 – Mantenimiento de herramientas.","Módulo 03 – Medición y verificación.","Módulo 04 – Mecánica de banco.","Módulo 05 – Lectura de manuales y planos.","Módulo 06 – Emprendimiento y empleabilidad (mención Máquinas-Herramientas).","Módulo 07 – Torneado de piezas y conjuntos mecánicos.","Módulo 08 – Fresado de piezas y conjuntos mecánicos.","Módulo 09 – Taladrado y rectificado de piezas mecánicas.","Módulo 10 – Mecanizado con máquinas de control numérico computacional (CNC)."];for(const m of f)await uee({nombre:m,especialidadId:d.id});for(const m of A)await uee({nombre:m,especialidadId:u.id});o("Datos base sembrados correctamente. Actualiza los selectores para verlos."),await r()}catch(c){console.error(c),o(`Error al sembrar: ${(c==null?void 0:c.message)||c}`)}finally{n(!1)}};return s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{disabled:a,onClick:l,className:`px-4 py-2 rounded-xl text-white ${a?"bg-slate-400":"bg-amber-600 hover:bg-amber-700"}`,children:a?"Sembrando…":"Sembrar datos base (Automotriz/Industrial)"}),i&&s.jsx("span",{className:"text-sm text-slate-600",children:i})]}),s.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Crea especialidades y módulos mínimos si no existen aún."})]})};function Bbt(e){for(const t of e)if(t.textoBase&&t.textoBase.trim())return t.textoBase.trim();return null}function Ibt(e){if(e.asignatura!=="Lectura")return e;const t={...e};let r=Bbt(t.preguntas||[]);return!r&&t.descripcion&&t.descripcion.length>100&&(r=t.descripcion,t.preguntas&&t.preguntas.length>0&&(t.preguntas[0]={...t.preguntas[0],textoBase:r})),r&&(t.textoBase=r),t}const Obt=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState(null),[i,o]=w.useState({}),[l,c]=w.useState(!0),[d,u]=w.useState(!1),[f,A]=w.useState(!1),[m,g]=w.useState(null),[x,v]=w.useState(null),[y,N]=w.useState(null),[E,B]=w.useState([]),[_,I]=w.useState(null),j=K=>{if(!K)return"";let Q=K.trim().toLowerCase();return Q=Q.replace(/°/g,"º"),Q=Q.replace(/\s+(medio|básico|basico)/g,""),Q=Q.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),Q=Q.replace(/^(\d)(?![º])/,"$1º"),Q=Q.replace(/\s+/g,"").toUpperCase(),Q};w.useEffect(()=>{(async()=>{if(e.id)try{c(!0);const Q=j(e.curso||"");console.log(`[DEBUG] SimceEvaluacionEstudiante - Cargando evaluaciones para estudiante: ${e.id}, curso: ${e.curso} (normalizado: ${Q})`);const[G,X]=await Promise.all([ps(()=>Promise.resolve().then(()=>EP),void 0).then(Y=>Y.obtenerSetsPreguntasPorCurso(Q)),ps(()=>Promise.resolve().then(()=>EP),void 0).then(Y=>Y.obtenerSetsPreguntasPorEstudiante(e.id))]),Z=new Map;[...G,...X].forEach(Y=>Z.set(Y.id,Y));const U=Array.from(Z.values());r(U),T({porCurso:G.length,porEstudiante:X.length,total:U.length}),console.log(`[DEBUG] SimceEvaluacionEstudiante - Evaluaciones por curso: ${G.length}, por estudiante: ${X.length}, total: ${U.length}`)}catch(Q){console.error("Error al cargar evaluaciones:",Q),v("No se pudieron cargar las evaluaciones disponibles")}finally{c(!1)}})()},[e]);const[k,T]=w.useState(null),L=async K=>{var Q,G;try{c(!0),o({}),v(null),g(null),A(!1),console.log(`[DEBUG] Seleccionando evaluación con ID: ${K}`);let X=await _2(K);if(console.log("[DEBUG] Evaluación completa obtenida:",X),console.log("[DEBUG] Preguntas en la evaluación:",((Q=X==null?void 0:X.preguntas)==null?void 0:Q.length)||0),X&&(X=Ibt(X),console.log("[DEBUG] Evaluación procesada con texto base asegurado"),n(X)),X!=null&&X.preguntas){const U=X.preguntas.some(Y=>Y.textoBase)||X.textoBase;if(console.log("[DEBUG] ¿La evaluación tiene texto base?",U),U){const Y=X.textoBase||((G=X.preguntas.find(P=>P.textoBase))==null?void 0:G.textoBase);console.log("[DEBUG] Texto base encontrado:",(Y==null?void 0:Y.substring(0,50))+"...")}}const Z=await bfe(e.id||"",K);if(console.log(`[DEBUG] Intentos existentes para esta evaluación: ${Z.length}`),B(Z),Z.length>0){I(Z[0]),A(!0);const U=await _2(K);if(U){n(U);const Y=Z[0],P=U.preguntas.map(D=>{var J;const W=((J=Y.respuestas.find(ce=>ce.preguntaId===D.id))==null?void 0:J.alternativaSeleccionada)||"";return{preguntaId:D.id,pregunta:D,respuestaSeleccionada:W,esCorrecta:W===D.respuestaCorrecta}});g({porcentajeLogro:Y.porcentajeLogro,nivelLogro:Y.nivelLogro,respuestasCorrectas:P.filter(D=>D.esCorrecta).length,totalPreguntas:U.preguntas.length,detalle:P})}}else{const U=await _2(K);if(U){const Y=[...U.preguntas].sort(()=>Math.random()-.5);Y.forEach(P=>{P.alternativas=[...P.alternativas].sort(()=>Math.random()-.5)}),n({...U,preguntas:Y}),N(Date.now())}}}catch(X){console.error("Error al seleccionar evaluación:",X),v("No se pudo cargar la evaluación seleccionada")}finally{c(!1)}},F=(K,Q)=>{o({...i,[K]:Q})},S=async()=>{if(a)try{const K=a.preguntas.map(J=>J.id),Q=Object.keys(i);if(Q.length<K.length){v(`Debe responder todas las preguntas antes de enviar (faltan ${K.length-Q.length})`);return}u(!0);let G=0;const X=a.preguntas.map(J=>{const ce=i[J.id],ie=ce===J.respuestaCorrecta;return ie&&G++,{preguntaId:J.id,pregunta:J,respuestaSeleccionada:ce,esCorrecta:ie}}),Z=a.preguntas.length,U=G/Z*100;let Y;U>=80?Y="Adecuado":U>=50?Y="Elemental":Y="Insuficiente";const P=Date.now(),D=y?Math.floor((P-y)/1e3):0,W={setId:a.id,estudianteId:e.id||"",estudianteNombre:e.nombreCompleto||"",respuestas:Object.entries(i).map(([J,ce])=>{const ie=a.preguntas.find(de=>de.id===J),re=ie==null?void 0:ie.respuestaCorrecta;return{preguntaId:J,alternativaSeleccionadaId:String(ce),esCorrecta:String(ce)===re}}),porcentajeAciertos:U,nivelLogro:Y,fechaEnvio:new Date().toISOString()};await vfe(W),g({porcentajeLogro:U,nivelLogro:Y,respuestasCorrectas:G,totalPreguntas:Z,detalle:X}),A(!0)}catch(K){console.error("Error al enviar respuestas:",K),v("Ocurrió un error al enviar sus respuestas. Intente nuevamente.")}finally{u(!1)}},M=K=>{const Q=Math.floor(K/60),G=K%60;return`${Q}:${G<10?"0":""}${G}`},H=K=>{switch(K){case"Adecuado":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"Elemental":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Insuficiente":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-slate-100 text-slate-800 dark:bg-slate-900/30 dark:text-slate-300"}};return l?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(_h,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando evaluaciones..."})]}):s.jsx("div",{className:"space-y-6",children:a?f?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Resultados: ",a.titulo]}),s.jsx("button",{onClick:()=>{n(null),g(null),A(!1)},className:"text-slate-600 hover:text-slate-900 font-semibold dark:text-slate-400 dark:hover:text-slate-200",children:"Volver a evaluaciones"})]}),s.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-6 rounded-lg mb-6",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Tu nivel de logro"}),s.jsx("div",{className:`text-lg font-bold px-4 py-1 rounded-md ${H((m==null?void 0:m.nivelLogro)||"")}`,children:m==null?void 0:m.nivelLogro}),s.jsxs("div",{className:"mt-4",children:[s.jsx(uCe,{className:"w-16 h-16 mx-auto text-indigo-500 mb-2"}),s.jsxs("div",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400",children:[m==null?void 0:m.porcentajeLogro.toFixed(1),"%"]}),s.jsxs("div",{className:"text-slate-600 dark:text-slate-400",children:[m==null?void 0:m.respuestasCorrectas," de ",m==null?void 0:m.totalPreguntas," correctas"]})]})]}),s.jsx("div",{className:"w-full max-w-md h-6 bg-slate-200 dark:bg-slate-600 rounded-full overflow-hidden mt-4",children:s.jsx("div",{className:`h-full ${(m==null?void 0:m.nivelLogro)==="Adecuado"?"bg-green-500":(m==null?void 0:m.nivelLogro)==="Elemental"?"bg-yellow-500":"bg-red-500"}`,style:{width:`${(m==null?void 0:m.porcentajeLogro)||0}%`}})}),s.jsxs("div",{className:"flex justify-between w-full max-w-md text-xs mt-1",children:[s.jsx("span",{children:"0%"}),s.jsx("span",{children:"50%"}),s.jsx("span",{children:"100%"})]})]})}),s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Detalle de respuestas"}),s.jsx("div",{className:"space-y-6",children:m==null?void 0:m.detalle.map((K,Q)=>s.jsxs("div",{className:"p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[s.jsxs("h4",{className:"font-bold mb-2",children:[s.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",Q+1]}),K.pregunta.enunciado]}),s.jsx("div",{className:"ml-6 mt-3 space-y-2",children:K.pregunta.alternativas.map(G=>s.jsxs("div",{className:`flex items-start ${G.id===K.respuestaSeleccionada?G.id===K.pregunta.respuestaCorrecta?"text-green-700 dark:text-green-400 font-semibold":"text-red-700 dark:text-red-400 font-semibold":G.id===K.pregunta.respuestaCorrecta?"text-green-700 dark:text-green-400 font-semibold":""}`,children:[s.jsxs("div",{className:"font-bold mr-2 min-w-[20px]",children:[G.id,")"]}),s.jsx("div",{children:G.texto}),G.id===K.respuestaSeleccionada&&G.id===K.pregunta.respuestaCorrecta&&s.jsx(dn,{className:"w-4 h-4 ml-1 text-green-600 dark:text-green-400"}),G.id===K.respuestaSeleccionada&&G.id!==K.pregunta.respuestaCorrecta&&s.jsx(mh,{className:"w-4 h-4 ml-1 text-red-600 dark:text-red-400"}),G.id!==K.respuestaSeleccionada&&G.id===K.pregunta.respuestaCorrecta&&s.jsx(dn,{className:"w-4 h-4 ml-1 text-green-600 dark:text-green-400"})]},G.id))}),s.jsx("div",{className:"mt-4 text-sm",children:s.jsxs("div",{className:"bg-green-50 text-green-800 dark:bg-green-900/20 dark:text-green-300 p-2 rounded-md",children:[s.jsx("span",{className:"font-semibold",children:"Explicación:"})," ",K.pregunta.explicacion]})})]},K.preguntaId))}),s.jsx("div",{className:"mt-6 flex justify-center",children:s.jsx("button",{onClick:()=>{n(null),g(null),A(!1)},className:"py-2 px-4 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Volver a evaluaciones"})})]}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:a.titulo}),s.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[a.asignatura," - ",a.preguntas.length," preguntas"]})]}),s.jsx("button",{onClick:()=>{window.confirm("¿Está seguro que desea salir? Se perderán todas las respuestas.")&&n(null)},className:"text-slate-600 hover:text-slate-900 font-semibold dark:text-slate-400 dark:hover:text-slate-200",children:"Cancelar"})]}),s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800 mb-6 flex items-start",children:[s.jsx(r1,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-500 mr-2 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-yellow-800 dark:text-yellow-400",children:"Instrucciones"}),s.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 list-disc pl-5",children:[s.jsx("li",{children:"Responde todas las preguntas antes de enviar."}),s.jsx("li",{children:"Solo tienes un intento para responder."}),s.jsx("li",{children:"Una vez enviado, podrás ver tu resultado y las respuestas correctas."}),s.jsx("li",{children:"No refresques ni cierres la página durante la evaluación."})]})]})]}),x&&s.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200 rounded-md flex items-center",children:[s.jsx(mh,{className:"w-4 h-4 mr-2"}),x]}),(a.asignatura==="Lectura"||a.asignatura==="Competencia Lectora")&&(()=>{var Q,G;console.log("[DEBUG] Asignatura de Lectura detectada, buscando texto base");let K=a.textoBase||((Q=a.preguntas.find(X=>X.textoBase))==null?void 0:Q.textoBase)||((G=a.preguntas[0])==null?void 0:G.textoBase);return console.log("[DEBUG] Texto base encontrado:",K?"SÍ":"NO"),K||(console.log("[WARNING] Es una evaluación de Lectura pero no tiene texto base"),a.descripcion&&a.descripcion.length>50&&(K=`⚠️ NOTA: El texto de comprensión no está disponible. La evaluación podría estar incompleta. Comunícate con tu profesor.

`+a.descripcion,console.log("[DEBUG] Usando descripción como texto base alternativo"))),K?s.jsxs("div",{className:"mb-8 p-5 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:s.jsx(Rs,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:"📖 Texto de Comprensión Lectora"}),s.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Lee atentamente el siguiente texto antes de responder las preguntas"})]})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800",children:s.jsx("div",{className:"prose prose-sm max-w-none text-slate-800 dark:text-slate-200",children:s.jsx(BE,{content:K,context:"simce-texto-base"})})})]}):null})(),s.jsx("div",{className:"space-y-6",children:a.preguntas.map((K,Q)=>s.jsxs("div",{className:`p-4 rounded-lg border ${i[K.id]?"border-green-200 dark:border-green-700/50":"border-slate-200 dark:border-slate-700"}`,children:[s.jsxs("h4",{className:"font-bold mb-2",children:[s.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",Q+1]}),K.enunciado]}),s.jsx("div",{className:"ml-6 mt-3 space-y-2",children:K.alternativas.map(G=>s.jsxs("div",{className:`flex items-center p-2 rounded-md cursor-pointer ${i[K.id]===G.id?"bg-indigo-100 dark:bg-indigo-900/50":"hover:bg-slate-100 dark:hover:bg-slate-700/50"}`,onClick:()=>F(K.id,G.id),children:[s.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center mr-3 ${i[K.id]===G.id?"border-indigo-600 dark:border-indigo-400":"border-slate-400 dark:border-slate-500"}`,children:i[K.id]===G.id&&s.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-600 dark:bg-indigo-400"})}),s.jsxs("div",{className:"font-bold mr-2",children:[G.id,")"]}),s.jsx("div",{children:G.texto})]},G.id))}),!i[K.id]&&s.jsx("div",{className:"mt-2 text-amber-600 dark:text-amber-400 text-sm",children:"Por favor selecciona una respuesta"})]},K.id))}),s.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[s.jsxs("div",{className:"text-slate-600 dark:text-slate-400 flex items-center",children:[s.jsx(bc,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"text-sm",children:y&&s.jsxs(s.Fragment,{children:["Tiempo transcurrido: ",M(Math.floor((Date.now()-y)/1e3))]})})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:[Object.keys(i).length," de ",a.preguntas.length," respondidas"]}),s.jsx("button",{onClick:S,disabled:d||Object.keys(i).length!==a.preguntas.length,className:"py-2 px-4 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",children:d?s.jsxs(s.Fragment,{children:[s.jsx(_h,{className:"w-4 h-4 animate-spin"}),s.jsx("span",{children:"Enviando..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Z8,{className:"w-4 h-4"}),s.jsx("span",{children:"Enviar respuestas"})]})})]})]})]}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones disponibles"}),k&&s.jsxs("div",{className:"mb-4 p-3 rounded-md bg-slate-50 dark:bg-slate-900/20 border border-slate-200 dark:border-slate-700 text-xs text-slate-600 dark:text-slate-300",children:[s.jsx("strong",{children:"Debug:"})," Detectadas ",s.jsx("b",{children:k.porCurso})," por curso, ",s.jsx("b",{children:k.porEstudiante})," por asignación directa, ",s.jsx("b",{children:k.total})," total."]}),t.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(GD,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay evaluaciones asignadas para tu curso en este momento."})]}):s.jsx("div",{className:"space-y-4",children:t.map(K=>s.jsx("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>L(K.id),children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:`p-2 rounded-md mr-4 ${K.asignatura==="Lectura"||K.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:K.asignatura==="Lectura"||K.asignatura==="Competencia Lectora"?s.jsx(Rs,{className:"w-6 h-6"}):s.jsx(Y8,{className:"w-6 h-6"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-lg",children:K.titulo}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:K.descripcion}),s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:K.asignatura}),s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:[K.preguntas.length," preguntas"]}),s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:new Date(K.fechaAsignacion).toLocaleDateString()})]})]})]})},K.id))})]})})},Dbt=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState(null),[i,o]=w.useState([]),[l,c]=w.useState([]),[d,u]=w.useState(null),[f,A]=w.useState(!0),[m,g]=w.useState(null),[x,v]=w.useState("general"),[y,N]=w.useState("todos"),E=K=>typeof(K==null?void 0:K.porcentajeAciertos)=="number"?K.porcentajeAciertos:typeof(K==null?void 0:K.porcentajeLogro)=="number"?K.porcentajeLogro:0,B=K=>{const Q=K&&(K.fechaEnvio||K.fechaRealizacion)||null;return Q?new Date(Q).toLocaleDateString():"-"},_=K=>Array.isArray(K==null?void 0:K.respuestas)?K.respuestas.filter(Q=>Q==null?void 0:Q.esCorrecta).length:typeof(K==null?void 0:K.respuestasCorrectas)=="number"?K.respuestasCorrectas:"-",I=K=>{const Q=K&&(K.tiempoRealizacion??K.duracionSegundos);if(typeof Q=="number"&&Q>0){const G=Math.floor(Q/60),X=(Q%60).toString().padStart(2,"0");return`${G}:${X}`}return"-"};w.useEffect(()=>{(async()=>{try{A(!0);const Q=await yfe(e.id||"");r(Q)}catch(Q){console.error("Error al cargar evaluaciones:",Q),g("No se pudieron cargar las evaluaciones")}finally{A(!1)}})()},[e]);const j=async K=>{try{A(!0),g(null);const Q=await _2(K);if(Q){n(Q);const G=Array.isArray(Q.cursosAsignados)?Q.cursosAsignados:[];if(G.length>0){const X=await Mx(),Z=J=>{if(!J)return"";let ce=J.trim().toLowerCase();return ce=ce.replace(/°/g,"º"),ce=ce.replace(/\s+(medio|básico|basico)/g,""),ce=ce.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),ce=ce.replace(/^(\d)(?![º])/,"$1º"),ce=ce.replace(/\s+/g,"").toUpperCase(),ce},U=Z(G[0]),Y=X.filter(J=>J.profile==="ESTUDIANTE"&&Z(J.curso||"")===U);c(Y);const P=Y.map(J=>J.id);let D=[];if(P.length>0){const{obtenerResultadosPorCurso:J}=await ps(async()=>{const{obtenerResultadosPorCurso:ce}=await Promise.resolve().then(()=>EP);return{obtenerResultadosPorCurso:ce}},void 0);D=await J(K,P)}else D=await NP(K);o(D);const W=await wfe(K,G[0]);W&&u(W)}else{const X=await NP(K);o(X),c([]),u(null)}}}catch(Q){console.error("Error al seleccionar evaluación:",Q),g("No se pudo cargar la información de la evaluación seleccionada")}finally{A(!1)}},k=async()=>{console.log("Generando Excel...")},T=K=>{switch(K){case"Adecuado":return"text-green-600 dark:text-green-400";case"Elemental":return"text-yellow-600 dark:text-yellow-400";case"Insuficiente":return"text-red-600 dark:text-red-400";default:return"text-slate-600 dark:text-slate-400"}},L=K=>{switch(K){case"Adecuado":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"Elemental":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Insuficiente":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-slate-100 text-slate-800 dark:bg-slate-900/30 dark:text-slate-300"}},F=()=>{if(!d)return null;const{porcentajeAdecuado:K,porcentajeElemental:Q,porcentajeInsuficiente:G}=d;return s.jsxs("div",{className:"mt-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Distribución por niveles de logro"}),s.jsxs("div",{className:"w-full h-8 rounded-md overflow-hidden flex mb-2",children:[s.jsx("div",{className:"h-full bg-green-500 dark:bg-green-600 transition-all",style:{width:`${K}%`}}),s.jsx("div",{className:"h-full bg-yellow-500 dark:bg-yellow-600 transition-all",style:{width:`${Q}%`}}),s.jsx("div",{className:"h-full bg-red-500 dark:bg-red-600 transition-all",style:{width:`${G}%`}})]}),s.jsxs("div",{className:"flex justify-between text-sm text-slate-600 dark:text-slate-400",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 dark:bg-green-600 rounded-sm mr-1"}),s.jsxs("span",{children:["Adecuado: ",K.toFixed(1),"%"]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-yellow-500 dark:bg-yellow-600 rounded-sm mr-1"}),s.jsxs("span",{children:["Elemental: ",Q.toFixed(1),"%"]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 dark:bg-red-600 rounded-sm mr-1"}),s.jsxs("span",{children:["Insuficiente: ",G.toFixed(1),"%"]})]})]})]})},S=()=>d?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-full bg-blue-100 dark:bg-blue-900/50",children:s.jsx(_i,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estudiantes evaluados"}),s.jsx("div",{className:"text-2xl font-bold",children:d.totalEstudiantes})]})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-full bg-indigo-100 dark:bg-indigo-900/50",children:s.jsx(Oae,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Promedio de logro"}),s.jsxs("div",{className:"text-2xl font-bold",children:[d.promedioLogro.toFixed(1),"%"]})]})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-full bg-green-100 dark:bg-green-900/50",children:s.jsx(MEe,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Nivel predominante"}),s.jsx("div",{className:`text-2xl font-bold ${T(d.nivelPredominante)}`,children:d.nivelPredominante})]})]})})]}),F(),s.jsxs("div",{className:"mt-8",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Estadísticas por eje temático"}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:s.jsx("div",{className:"space-y-4",children:d.porEjeTematico.map((K,Q)=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"font-medium",children:K.eje}),s.jsxs("span",{className:"text-sm",children:[K.promedio.toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full",children:s.jsx("div",{className:`h-full rounded-full ${K.promedio>=80?"bg-green-500":K.promedio>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${K.promedio}%`}})})]},Q))})})]})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(_h,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),s.jsx("p",{children:"No hay datos disponibles para mostrar"})]}),M=()=>{const Q=(l.length>0?l:[]).map(G=>({est:G,intento:i.find(X=>X.estudianteId===G.id)})).filter(({intento:G})=>y==="todos"?!0:G&&typeof G.nivelLogro=="string"&&G.nivelLogro.toLowerCase()===y);return s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Resultados por estudiante"}),s.jsx("div",{className:"flex space-x-2",children:s.jsxs("select",{className:"text-sm border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 px-2 py-1",value:y,onChange:G=>N(G.target.value),children:[s.jsx("option",{value:"todos",children:"Todos los niveles"}),s.jsx("option",{value:"adecuado",children:"Adecuado"}),s.jsx("option",{value:"elemental",children:"Elemental"}),s.jsx("option",{value:"insuficiente",children:"Insuficiente"})]})})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[s.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Estudiante"}),s.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Curso"}),s.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"% Logro"}),s.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Nivel"}),s.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Correctas"}),s.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Tiempo"}),s.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Fecha"})]})}),s.jsx("tbody",{children:Q.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-slate-600 dark:text-slate-400",children:l.length===0?"No hay estudiantes detectados para el curso asignado o no hay intentos registrados.":"No hay datos para mostrar con los filtros seleccionados"})}):Q.map(({est:G,intento:X})=>s.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[s.jsx("td",{className:"px-4 py-3",children:(X==null?void 0:X.estudianteNombre)||G.nombreCompleto||"—"}),s.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:G.curso||(X==null?void 0:X.curso)||"-"}),s.jsx("td",{className:"px-4 py-3 font-semibold",children:X?E(X).toFixed(1)+"%":"—"}),s.jsx("td",{className:"px-4 py-3",children:X?s.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${L(X.nivelLogro)}`,children:X.nivelLogro}):s.jsx("span",{className:"text-slate-400",children:"—"})}),s.jsx("td",{className:"px-4 py-3",children:X?`${_(X)}/${(a==null?void 0:a.preguntas.length)||"-"}`:"—"}),s.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:X?I(X):"—"}),s.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:X?B(X):"—"})]},G.id))})]})})})]})},H=()=>!a||!(d!=null&&d.porPregunta)||!d.porPregunta.length?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(_h,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),s.jsx("p",{children:"No hay datos disponibles para mostrar"})]}):s.jsxs("div",{className:"mt-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Análisis por pregunta"}),s.jsx("div",{className:"space-y-6",children:d.porPregunta.map((K,Q)=>{var X;const G=a.preguntas.find(Z=>Z.id===K.preguntaId);return G?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-bold mb-2",children:[s.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",Q+1]}),G.enunciado]}),s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[s.jsx("span",{className:"font-medium",children:"Eje temático:"})," ",G.ejeTematico||"No especificado"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Porcentaje de acierto"}),s.jsxs("div",{className:`text-xl font-bold ${K.porcentajeAcierto>=80?"text-green-600 dark:text-green-400":K.porcentajeAcierto>=50?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`,children:[K.porcentajeAcierto.toFixed(1),"%"]})]})]}),s.jsx("div",{className:"mt-4",children:s.jsx("div",{className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full mb-2",children:s.jsx("div",{className:`h-full rounded-full ${K.porcentajeAcierto>=80?"bg-green-500":K.porcentajeAcierto>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${K.porcentajeAcierto}%`}})})}),s.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Distribución de respuestas"}),s.jsx("div",{className:"space-y-2",children:K.distribucionRespuestas.map(Z=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs ${Z.alternativaId===G.respuestaCorrecta?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"} mr-2`,children:Z.alternativaId}),s.jsx("div",{className:"flex-1",children:s.jsx("div",{className:"w-full h-4 bg-slate-200 dark:bg-slate-700 rounded-sm overflow-hidden",children:s.jsx("div",{className:`h-full ${Z.alternativaId===G.respuestaCorrecta?"bg-green-500 dark:bg-green-600":"bg-red-500 dark:bg-red-600"}`,style:{width:`${Z.porcentaje}%`}})})}),s.jsxs("div",{className:"ml-2 w-10 text-right text-sm",children:[Z.porcentaje.toFixed(0),"%"]})]},Z.alternativaId))})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Alternativa correcta"}),s.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded border border-green-200 dark:border-green-800 text-green-800 dark:text-green-300",children:s.jsxs("div",{className:"flex items-start",children:[s.jsxs("div",{className:"font-bold mr-2",children:[G.respuestaCorrecta,")"]}),s.jsx("div",{children:(X=G.alternativas.find(Z=>Z.id===G.respuestaCorrecta))==null?void 0:X.texto})]})}),s.jsxs("div",{className:"mt-4",children:[s.jsx("h5",{className:"text-sm font-semibold mb-1",children:"Dificultad"}),s.jsx("div",{className:`inline-block px-3 py-1 rounded text-sm ${K.porcentajeAcierto>=80?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":K.porcentajeAcierto>=50?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:K.porcentajeAcierto>=80?"Baja":K.porcentajeAcierto>=50?"Media":"Alta"})]})]})]})]},K.preguntaId):null})})]});return f?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(_h,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando información..."})]}):s.jsx("div",{className:"space-y-6",children:a?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-slate-200 dark:border-slate-700 pb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:a.titulo}),s.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[a.asignatura," • ",i.length," estudiantes evaluados"]}),Array.isArray(a.cursosAsignados)&&a.cursosAsignados.length>0&&s.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[s.jsx("span",{className:"font-semibold text-xs text-indigo-700 dark:text-indigo-300",children:"Cursos asignados:"}),a.cursosAsignados.map((K,Q)=>s.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-0.5 px-2 rounded-full text-xs",children:K},K+Q))]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:k,className:"py-2 px-3 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-1 text-sm",children:[s.jsx(pf,{className:"w-4 h-4"}),s.jsx("span",{children:"Exportar"})]}),s.jsx("button",{onClick:()=>n(null),className:"py-2 px-3 bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-md hover:bg-slate-300 dark:hover:bg-slate-600 text-sm",children:"Volver"})]})]}),m&&s.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200 rounded-md flex items-center",children:[s.jsx(mh,{className:"w-4 h-4 mr-2"}),m]}),s.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-700 mb-6",children:[s.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${x==="general"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>v("general"),children:"Vista general"}),s.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${x==="porEstudiante"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>v("porEstudiante"),children:"Por estudiante"}),s.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${x==="porPregunta"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>v("porPregunta"),children:"Por pregunta"})]}),x==="general"&&S(),x==="porEstudiante"&&M(),x==="porPregunta"&&H()]}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones para analizar"}),t.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Im,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay evaluaciones SIMCE creadas aún."})]}):s.jsx("div",{className:"space-y-4",children:t.map(K=>s.jsx("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>j(K.id),children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:`p-2 rounded-md mr-4 ${K.asignatura==="Lectura"||K.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:K.asignatura==="Lectura"||K.asignatura==="Competencia Lectora"?s.jsx(Rs,{className:"w-6 h-6"}):s.jsx(Y8,{className:"w-6 h-6"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-lg",children:K.titulo}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:K.descripcion}),s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:K.asignatura}),s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:[K.preguntas.length," preguntas"]}),s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:(()=>{try{const Q=K.fechaCreacion,G=typeof(Q==null?void 0:Q.toDate)=="function"?Q.toDate():new Date(Q);return isNaN(G.getTime())?"-":G.toLocaleDateString()}catch{return"-"}})()})]})]})]})},K.id))})]})})},gk=({currentUser:e})=>{const[t,r]=w.useState("generador"),a=(e==null?void 0:e.profile)===Tt.PROFESORADO||(e==null?void 0:e.profile)===Tt.SUBDIRECCION||(e==null?void 0:e.profile)===Tt.COORDINACION_TP,n=(e==null?void 0:e.profile)===Tt.ESTUDIANTE;return w.useEffect(()=>{n&&r("evaluacion")},[n]),s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación SIMCE"})}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md overflow-hidden",children:[s.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex",children:[a&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>r("generador"),className:`flex items-center gap-2 px-4 py-3 ${t==="generador"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[s.jsx(Z2,{className:"w-4 h-4"}),s.jsx("span",{children:"Generador de Preguntas"})]}),s.jsxs("button",{onClick:()=>r("resultados"),className:`flex items-center gap-2 px-4 py-3 ${t==="resultados"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[s.jsx(bl,{className:"w-4 h-4"}),s.jsx("span",{children:"Resultados"})]})]}),n&&s.jsxs("button",{onClick:()=>r("evaluacion"),className:`flex items-center gap-2 px-4 py-3 ${t==="evaluacion"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[s.jsx(Nb,{className:"w-4 h-4"}),s.jsx("span",{children:"Mis Evaluaciones"})]})]})}),s.jsxs("div",{className:"p-6",children:[a&&t==="generador"&&s.jsx(Nrt,{currentUser:e}),a&&t==="resultados"&&s.jsx(Dbt,{currentUser:e}),n&&t==="evaluacion"&&s.jsx(Obt,{currentUser:e}),!a&&!n&&s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:"No tienes permisos para acceder a este módulo."})})]})]})]})},Fbt=["Enviada","Visada","Aceptada","Rechazada","Completada"],hD=({currentUser:e})=>{const t=e.profile===Tt.SUBDIRECCION,r=e.profile===Tt.COORDINACION_TP,[a,n]=w.useState(""),[i,o]=w.useState(cn[0]),[l,c]=w.useState(D0[0]),[d,u]=w.useState(""),[f,A]=w.useState(30),[m,g]=w.useState(new Date().toISOString().split("T")[0]),[x,v]=w.useState(""),[y,N]=w.useState(null),[E,B]=w.useState(""),[_,I]=w.useState(null),[j,k]=w.useState(!1),[T,L]=w.useState([]),[F,S]=w.useState([]),[M,H]=w.useState("Todos"),[K,Q]=w.useState("Todas"),[G,X]=w.useState("Todos"),[Z,U]=w.useState("Todos"),[Y,P]=w.useState("Todos"),[D,W]=w.useState(null),[J,ce]=w.useState(""),[ie,re]=w.useState(!1),[de,oe]=w.useState(null),[be,q]=w.useState(!1),[we,Te]=w.useState(!0),Ee=w.useMemo(()=>{const Qe=new Set;return F.forEach(wt=>wt.solicitanteNombre&&Qe.add(wt.solicitanteNombre)),["Todos",...Array.from(Qe).sort()]},[F]),ue=w.useMemo(()=>{const Qe=new Set;return F.forEach(wt=>wt.asignatura&&Qe.add(wt.asignatura)),["Todas",...Array.from(Qe).sort()]},[F]),ge=w.useMemo(()=>{const Qe=new Set;return F.forEach(wt=>wt.curso&&Qe.add(wt.curso)),["Todos",...Array.from(Qe).sort()]},[F]),he=w.useMemo(()=>F.length,[F]),ve=w.useMemo(()=>F.reduce((Qe,wt)=>Qe+(Number(wt.cantidadCopias)||0),0),[F]),le=Qe=>{const wt=new Map;for(const ar of F){const qt=(Qe(ar)||"—").trim()||"—";wt.set(qt,(wt.get(qt)||0)+1)}return Array.from(wt.entries()).map(([ar,qt])=>({name:ar,value:qt})).sort((ar,qt)=>qt.value-ar.value)},ne=w.useMemo(()=>le(Qe=>Qe.estado||"Enviada"),[F]),Ae=w.useMemo(()=>le(Qe=>Qe.nivel||"—"),[F]),pe=w.useMemo(()=>le(Qe=>Qe.asignatura||"—").slice(0,10),[F]),ke=w.useMemo(()=>le(Qe=>Qe.solicitanteNombre||"—").slice(0,10),[F]),Le=w.useMemo(()=>le(Qe=>Qe.curso||"—").slice(0,10),[F]),qe={Enviada:"#f59e0b",Visada:"#3b82f6",Aceptada:"#10b981",Rechazada:"#ef4444",Completada:"#059669"},ze=["#0ea5e9","#22c55e","#f97316","#6366f1","#14b8a6","#eab308","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f43f5e"];w.useEffect(()=>{var wt;const Qe=b0e({emailLower:(wt=e.email)==null?void 0:wt.toLowerCase()},L);if(t||r){const ar=y0e({nivel:Y,curso:M,asignatura:K,docenteNombre:G,estado:Z},S);return()=>{Qe(),ar()}}return()=>{Qe()}},[e.email,t,r,Y,M,K,G,Z]);const Re=async Qe=>{if(Qe.preventDefault(),!a.trim()){I("Debe indicar un título o descripción del material.");return}try{k(!0),I(null);let wt;if(y)try{const{uploadAdjuntoMulticopia:qt}=await ps(async()=>{const{uploadAdjuntoMulticopia:gr}=await Promise.resolve().then(()=>Oft);return{uploadAdjuntoMulticopia:gr}},void 0);wt=await qt(y,"multicopias")}catch(qt){console.warn("No se pudo subir el adjunto:",qt)}const ar={solicitanteId:e.id,solicitanteNombre:e.nombreCompleto,solicitanteEmail:e.email,tituloMaterial:a,asignatura:i,nivel:l,curso:d||void 0,cantidadCopias:Math.max(1,Number(f)||1),fechaEntregaDeseada:m,enlaceUrl:x||void 0,adjuntoUrl:wt,comentarios:E||void 0,estado:"Enviada"};await x0e(ar),n(""),c(D0[0]),u(""),A(30),v(""),N(null),B("")}catch(wt){I((wt==null?void 0:wt.message)||"No se pudo crear la solicitud.")}finally{k(!1)}},We=()=>s.jsxs("form",{onSubmit:Re,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Título o descripción del material"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{value:a,onChange:Qe=>n(Qe.target.value),className:"w-full border rounded-md px-3 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Ej: Prueba de ecuaciones lineales Unidad 2"}),s.jsx(Lo,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Asignatura"}),s.jsx("select",{value:i,onChange:Qe=>o(Qe.target.value),className:"w-full border rounded-md px-3 py-2",children:cn.map(Qe=>s.jsx("option",{value:Qe,children:Qe},Qe))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Nivel"}),s.jsx("select",{required:!0,value:l,onChange:Qe=>c(Qe.target.value),className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500",children:D0.map(Qe=>s.jsx("option",{value:Qe,children:Qe},Qe))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Curso (opcional)"}),s.jsxs("select",{value:d,onChange:Qe=>u(Qe.target.value),className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500",children:[s.jsx("option",{value:"",children:"—"}),on.map(Qe=>s.jsx("option",{value:Qe,children:Qe},Qe))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Cantidad de copias"}),s.jsx("input",{type:"number",min:1,value:f,onChange:Qe=>A(parseInt(Qe.target.value)||1),className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Fecha de entrega deseada"}),s.jsx("input",{type:"date",value:m,onChange:Qe=>g(Qe.target.value),className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Enlace al material (Drive, etc.)"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{value:x,onChange:Qe=>v(Qe.target.value),className:"w-full border rounded-md px-3 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"https://..."}),s.jsx(D5,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"O subir archivo (opcional)"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"file",onChange:Qe=>{var wt;return N(((wt=Qe.target.files)==null?void 0:wt[0])||null)},className:"block w-full text-sm text-slate-600 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"}),s.jsx(ab,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 pointer-events-none"})]}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Se guardará en Storage y se adjuntará a la solicitud."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Comentarios"}),s.jsx("textarea",{value:E,onChange:Qe=>B(Qe.target.value),rows:3,className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Indicaciones adicionales"})]}),_&&s.jsx("p",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:_}),s.jsx("div",{className:"text-right",children:s.jsxs("button",{type:"submit",disabled:j,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400 shadow-sm",children:[s.jsx(Z8,{className:"h-4 w-4"})," ",j?"Enviando…":"Enviar solicitud"]})})]}),ct=()=>s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Título"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Asignatura"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Nivel"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Curso"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Cantidad"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha deseada"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Material"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Estado"}),s.jsx("th",{className:"px-4 py-2"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:T.map(Qe=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-4 py-2 text-sm",children:Qe.createdAt?new Date(Qe.createdAt).toLocaleString("es-CL"):"—"}),s.jsx("td",{className:"px-4 py-2 text-sm font-medium text-slate-800",children:Qe.tituloMaterial}),s.jsx("td",{className:"px-4 py-2 text-sm",children:Qe.asignatura}),s.jsx("td",{className:"px-4 py-2 text-sm",children:Qe.nivel}),s.jsx("td",{className:"px-4 py-2 text-sm",children:Qe.curso||"—"}),s.jsx("td",{className:"px-4 py-2 text-sm",children:Qe.cantidadCopias}),s.jsx("td",{className:"px-4 py-2 text-sm",children:Qe.fechaEntregaDeseada}),s.jsxs("td",{className:"px-4 py-2 text-sm",children:[s.jsxs("div",{className:"flex gap-2 items-center",children:[Qe.enlaceUrl&&s.jsx("a",{href:Qe.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Enlace"}),Qe.adjuntoUrl&&s.jsx("a",{href:Qe.adjuntoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-emerald-600 hover:underline",children:"Archivo"}),!Qe.enlaceUrl&&!Qe.adjuntoUrl&&s.jsx("span",{className:"text-slate-400",children:"—"})]}),Qe.estado==="Rechazada"&&Qe.motivoRechazo&&s.jsxs("div",{className:"text-xs text-red-600 mt-1",children:["Motivo: ",Qe.motivoRechazo]})]}),s.jsx("td",{className:"px-4 py-2 text-sm",children:s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${Qe.estado==="Aceptada"?"bg-green-100 text-green-800":Qe.estado==="Rechazada"?"bg-red-100 text-red-700":Qe.estado==="Visada"?"bg-blue-100 text-blue-800":Qe.estado==="Completada"?"bg-emerald-100 text-emerald-800":"bg-yellow-100 text-yellow-800"}`,children:[Qe.estado==="Aceptada"&&s.jsx(dn,{className:"h-3 w-3"}),Qe.estado==="Rechazada"&&s.jsx(mh,{className:"h-3 w-3"}),Qe.estado==="Visada"&&s.jsx(Pg,{className:"h-3 w-3"}),Qe.estado==="Completada"&&s.jsx(Lw,{className:"h-3 w-3"}),Qe.estado==="Enviada"&&s.jsx(ab,{className:"h-3 w-3"}),Qe.estado]})}),s.jsx("td",{className:"px-4 py-2 text-sm text-right",children:(Qe.estado==="Enviada"||Qe.estado==="Rechazada")&&s.jsx("button",{title:"Eliminar",onClick:()=>oe(Qe),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-slate-200 text-slate-800 hover:bg-slate-300",children:s.jsx(Ia,{className:"h-4 w-4"})})})]},Qe.id))})]})}),Ze=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-600 w-full md:w-auto",children:[s.jsx(ZN,{className:"h-4 w-4"})," ",s.jsx("span",{className:"text-sm",children:"Filtros"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Nivel"}),s.jsx("select",{value:Y,onChange:Qe=>P(Qe.target.value),className:"border rounded-md px-3 py-1.5",children:["Todos",...D0].map(Qe=>s.jsx("option",{value:Qe,children:Qe},Qe))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Docente"}),s.jsx("select",{value:G,onChange:Qe=>X(Qe.target.value),className:"border rounded-md px-3 py-1.5",children:Ee.map(Qe=>s.jsx("option",{value:Qe,children:Qe},Qe))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Asignatura"}),s.jsx("select",{value:K,onChange:Qe=>Q(Qe.target.value),className:"border rounded-md px-3 py-1.5",children:ue.map(Qe=>s.jsx("option",{value:Qe,children:Qe},Qe))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Curso"}),s.jsx("select",{value:M,onChange:Qe=>H(Qe.target.value),className:"border rounded-md px-3 py-1.5",children:ge.map(Qe=>s.jsx("option",{value:Qe,children:Qe},Qe))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Estado"}),s.jsx("select",{value:Z,onChange:Qe=>U(Qe.target.value),className:"border rounded-md px-3 py-1.5",children:["Todos",...Fbt].map(Qe=>s.jsx("option",{value:Qe,children:Qe},Qe))})]})]}),s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-700",children:"Resumen gráfico"}),s.jsxs("button",{onClick:()=>Te(Qe=>!Qe),className:"text-xs px-3 py-1.5 rounded border bg-white hover:bg-slate-50",children:[we?"Ocultar":"Ver"," gráficos"]})]}),we&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"col-span-1 lg:col-span-3 grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"rounded-xl border p-4 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Total solicitudes"}),s.jsx("div",{className:"text-2xl font-bold",children:he})]}),s.jsxs("div",{className:"rounded-xl border p-4 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Total copias pedidas"}),s.jsx("div",{className:"text-2xl font-bold",children:ve})]}),s.jsxs("div",{className:"rounded-xl border p-4 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Docentes únicos"}),s.jsx("div",{className:"text-2xl font-bold",children:new Set(F.map(Qe=>Qe.solicitanteNombre||"—")).size})]}),s.jsxs("div",{className:"rounded-xl border p-4 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Asignaturas únicas"}),s.jsx("div",{className:"text-2xl font-bold",children:new Set(F.map(Qe=>Qe.asignatura||"—")).size})]})]}),s.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por estado"}),s.jsx("div",{className:"h-[240px]",children:s.jsx(oi,{width:"100%",height:"100%",children:s.jsxs(kE,{children:[s.jsx(cy,{data:ne,dataKey:"value",nameKey:"name",outerRadius:80,children:ne.map((Qe,wt)=>s.jsx(Lh,{fill:qe[Qe.name]||ze[wt%ze.length]},`estado-${wt}`))}),s.jsx(ii,{}),s.jsx(Sp,{})]})})})]}),s.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por nivel"}),s.jsx("div",{className:"h-[240px]",children:s.jsx(oi,{width:"100%",height:"100%",children:s.jsxs(Ad,{data:Ae,margin:{left:8,right:8,bottom:8},children:[s.jsx(uu,{strokeDasharray:"3 3"}),s.jsx(yl,{dataKey:"name",tick:{fontSize:12},interval:0,angle:-20,height:50,textAnchor:"end"}),s.jsx(wl,{allowDecimals:!1}),s.jsx(ii,{}),s.jsx(Ec,{dataKey:"value",fill:"#3b82f6",radius:[4,4,0,0]})]})})})]}),s.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por asignatura (Top 10)"}),s.jsx("div",{className:"h-[240px]",children:s.jsx(oi,{width:"100%",height:"100%",children:s.jsxs(Ad,{data:pe,margin:{left:8,right:8,bottom:8},children:[s.jsx(uu,{strokeDasharray:"3 3"}),s.jsx(yl,{dataKey:"name",tick:{fontSize:11},interval:0,angle:-30,height:70,textAnchor:"end"}),s.jsx(wl,{allowDecimals:!1}),s.jsx(ii,{}),s.jsx(Ec,{dataKey:"value",fill:"#10b981",radius:[4,4,0,0]})]})})})]}),s.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por docente (Top 10)"}),s.jsx("div",{className:"h-[260px]",children:s.jsx(oi,{width:"100%",height:"100%",children:s.jsxs(Ad,{data:ke,margin:{left:8,right:8,bottom:8},children:[s.jsx(uu,{strokeDasharray:"3 3"}),s.jsx(yl,{dataKey:"name",tick:{fontSize:11},interval:0,angle:-30,height:70,textAnchor:"end"}),s.jsx(wl,{allowDecimals:!1}),s.jsx(ii,{}),s.jsx(Ec,{dataKey:"value",fill:"#f59e0b",radius:[4,4,0,0]})]})})})]}),s.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por curso (Top 10)"}),s.jsx("div",{className:"h-[240px]",children:s.jsx(oi,{width:"100%",height:"100%",children:s.jsxs(Ad,{data:Le,margin:{left:8,right:8,bottom:8},children:[s.jsx(uu,{strokeDasharray:"3 3"}),s.jsx(yl,{dataKey:"name",tick:{fontSize:11},interval:0,angle:-30,height:70,textAnchor:"end"}),s.jsx(wl,{allowDecimals:!1}),s.jsx(ii,{}),s.jsx(Ec,{dataKey:"value",fill:"#8b5cf6",radius:[4,4,0,0]})]})})})]})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Docente"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Título"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Asignatura"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Nivel"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Curso"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Cantidad"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha deseada"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Material"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Estado"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Motivo"}),s.jsx("th",{className:"px-3 py-2"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:F.map(Qe=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-3 py-2 text-sm",children:Qe.createdAt?new Date(Qe.createdAt).toLocaleString("es-CL"):"—"}),s.jsx("td",{className:"px-3 py-2 text-sm",children:Qe.solicitanteNombre}),s.jsx("td",{className:"px-3 py-2 text-sm font-medium text-slate-800",children:Qe.tituloMaterial}),s.jsx("td",{className:"px-3 py-2 text-sm",children:Qe.asignatura}),s.jsx("td",{className:"px-3 py-2 text-sm",children:Qe.nivel}),s.jsx("td",{className:"px-3 py-2 text-sm",children:Qe.curso||"—"}),s.jsx("td",{className:"px-3 py-2 text-sm",children:Qe.cantidadCopias}),s.jsx("td",{className:"px-3 py-2 text-sm",children:Qe.fechaEntregaDeseada}),s.jsx("td",{className:"px-3 py-2 text-sm",children:s.jsxs("div",{className:"flex gap-2 items-center",children:[Qe.enlaceUrl&&s.jsxs("a",{href:Qe.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:underline",children:[s.jsx(D5,{className:"h-4 w-4"})," Enlace"]}),Qe.adjuntoUrl&&s.jsxs("a",{href:Qe.adjuntoUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-emerald-600 hover:underline",children:[s.jsx(ab,{className:"h-4 w-4"})," Archivo"]}),!Qe.enlaceUrl&&!Qe.adjuntoUrl&&s.jsx("span",{className:"text-slate-400",children:"—"})]})}),s.jsx("td",{className:"px-3 py-2 text-sm",children:s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${Qe.estado==="Aceptada"?"bg-green-100 text-green-800":Qe.estado==="Rechazada"?"bg-red-100 text-red-700":Qe.estado==="Visada"?"bg-blue-100 text-blue-800":Qe.estado==="Completada"?"bg-emerald-100 text-emerald-800":"bg-yellow-100 text-yellow-800"}`,children:[Qe.estado==="Aceptada"&&s.jsx(dn,{className:"h-3 w-3"}),Qe.estado==="Rechazada"&&s.jsx(mh,{className:"h-3 w-3"}),Qe.estado==="Visada"&&s.jsx(Pg,{className:"h-3 w-3"}),Qe.estado==="Completada"&&s.jsx(Lw,{className:"h-3 w-3"}),Qe.estado==="Enviada"&&s.jsx(ab,{className:"h-3 w-3"}),Qe.estado]})}),s.jsx("td",{className:"px-3 py-2 text-sm max-w-[240px] truncate",title:Qe.motivoRechazo||"",children:Qe.motivoRechazo||"—"}),s.jsxs("td",{className:"px-3 py-2 text-sm text-right space-x-2",children:[Qe.estado==="Enviada"&&s.jsxs("button",{onClick:async()=>await Yw(Qe.id,"Visada",e.nombreCompleto),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:[s.jsx(Pg,{className:"h-4 w-4"})," Visar"]}),(Qe.estado==="Enviada"||Qe.estado==="Visada")&&s.jsxs("button",{onClick:async()=>{await Yw(Qe.id,"Aceptada",e.nombreCompleto),await w0e(Qe)},className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700",children:[s.jsx(dn,{className:"h-4 w-4"})," Aceptar"]}),Qe.estado!=="Rechazada"&&Qe.estado!=="Completada"&&s.jsxs("button",{onClick:()=>{W(Qe),ce("")},className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",children:[s.jsx(mh,{className:"h-4 w-4"})," Rechazar"]}),Qe.estado==="Aceptada"&&s.jsxs("button",{onClick:async()=>await Yw(Qe.id,"Completada",e.nombreCompleto),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-emerald-600 text-white hover:bg-emerald-700",children:[s.jsx(Lw,{className:"h-4 w-4"})," Completada"]}),e.id===Qe.solicitanteId&&(Qe.estado==="Enviada"||Qe.estado==="Rechazada")&&s.jsxs("button",{title:"Eliminar",onClick:()=>oe(Qe),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-slate-200 text-slate-800 hover:bg-slate-300",children:[s.jsx(Ia,{className:"h-4 w-4"})," Eliminar"]})]})]},Qe.id))})]})}),D&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl p-6 shadow-xl",children:[s.jsx("h3",{className:"text-lg font-bold mb-3",children:"Motivo de rechazo"}),s.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Indica brevemente el motivo del rechazo para que el docente pueda corregir o reenviar."}),s.jsx("textarea",{rows:4,value:J,onChange:Qe=>ce(Qe.target.value),className:"w-full border-slate-300 rounded-md",placeholder:"Ej: El material no es legible o falta la portada."}),s.jsxs("div",{className:"mt-5 flex justify-end gap-2",children:[s.jsxs("button",{onClick:()=>{W(null),ce("")},className:"inline-flex items-center gap-1 px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:[s.jsx(mh,{className:"h-4 w-4"})," Cancelar"]}),s.jsx("button",{disabled:ie,onClick:async()=>{if(D)try{re(!0),await Yw(D.id,"Rechazada",e.nombreCompleto,{motivoRechazo:J||void 0}),W(null),ce("")}finally{re(!1)}},className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 disabled:bg-red-400",children:ie?"Guardando…":s.jsxs(s.Fragment,{children:[s.jsx(mh,{className:"h-4 w-4"})," Confirmar rechazo"]})})]})]})}),de&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl p-6 shadow-xl",children:[s.jsxs("h3",{className:"text-lg font-bold mb-3 flex items-center gap-2 text-red-700",children:[s.jsx(Ia,{className:"h-5 w-5"})," Eliminar solicitud"]}),s.jsxs("p",{className:"text-sm text-slate-600 mb-3",children:["Esta acción eliminará la solicitud “",de.tituloMaterial,"”. Si tiene un archivo adjunto, también se intentará borrar del almacenamiento."]}),s.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"¿Deseas continuar?"}),s.jsxs("div",{className:"mt-1 flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>oe(null),className:"inline-flex items-center gap-1 px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),s.jsx("button",{disabled:be,onClick:async()=>{try{q(!0),await N0e(de.id,{adjuntoUrl:de.adjuntoUrl}),oe(null)}catch{alert("No se pudo eliminar.")}finally{q(!1)}},className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 disabled:bg-red-400",children:be?"Eliminando…":s.jsxs(s.Fragment,{children:[s.jsx(Ia,{className:"h-4 w-4"})," Eliminar"]})})]})]})})]});return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-2xl shadow",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(i4,{className:"h-6 w-6 text-amber-600"}),s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Multicopias"})]}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Gestiona solicitudes de copias de material evaluativo y pedagógico."}),(e.profile===Tt.PROFESORADO||r)&&s.jsxs("div",{className:"mb-8",children:[s.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-slate-800 dark:text-slate-200 mb-3",children:[s.jsx(Lo,{className:"h-5 w-5 text-amber-600"})," Nueva solicitud"]}),We()]}),(e.profile===Tt.PROFESORADO||r)&&s.jsxs("div",{className:"mb-10",children:[s.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-slate-800 dark:text-slate-200 mb-3",children:[s.jsx(Kv,{className:"h-5 w-5 text-amber-600"})," Mis solicitudes"]}),ct()]}),t&&s.jsxs("div",{children:[s.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-slate-800 dark:text-slate-200 mb-3",children:[s.jsx(Lw,{className:"h-5 w-5 text-amber-600"})," Panel de Subdirección"]}),Ze()]})]})};async function Pbt(e){const t=ut(st,"ensayo_evaluaciones"),r={...e,createdAt:Da(),tipo:"evaluacion_ensayo",indicadores:10};return(await Kr(t,r)).id}async function Rbt(e){const t=ut(st,"ensayo_evaluaciones"),r=jt(t,Gt("createdAt","desc"),El(e==null?void 0:e.max)),a=await Nr(r),n=[];a.forEach(o=>{const l=o.data();n.push({id:o.id,...l,createdAt:l.createdAt??null,tipo:l.tipo,indicadores:l.indicadores})});let i=n;return e!=null&&e.filtroCurso&&(i=i.filter(o=>(o.curso||"").toUpperCase()===e.filtroCurso.toUpperCase())),e!=null&&e.filtroAsignatura&&(i=i.filter(o=>(o.asignatura||"")===e.filtroAsignatura)),e!=null&&e.filtroProfesorId&&(i=i.filter(o=>(o.profesorId||"")===e.filtroProfesorId)),e!=null&&e.filtroCreadorId&&(i=i.filter(o=>(o.creadorId||"")===e.filtroCreadorId)),i}function PR(e){if(e!==void 0){if(e===null)return null;if(Array.isArray(e))return e.map(PR);if(typeof e=="object"){const t={};return Object.entries(e).forEach(([r,a])=>{const n=PR(a);n!==void 0&&(t[r]=n)}),t}return e}}async function Lbt(e,t){const r=$t(st,"ensayo_evaluaciones",e),a=PR({...t});await zi(r,a)}async function Mbt(e){const t=$t(st,"ensayo_evaluaciones",e);await Ua(t)}const xk=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},ad=[1,2,3,4,5,6,7,8,9,10],RR={1:"Llega puntualmente a la evaluación.",2:"Sigue las instrucciones dadas por el/la docente respecto a su ubicación en la sala de clases.",3:"Sigue las instrucciones dadas por el/la docente respecto al inicio de la evaluación.",4:"Se mantiene en silencio mientras desarrolla la evaluación.",5:"Mantiene su celular o cualquier equipo tecnológico en silencio y guardado.",6:"Levanta la mano si requiere consultar alguna duda.",7:"Espera en silencio mientras es atendido por el/la docente para resolver sus dudas.",8:"Se observa que el/la estudiante realiza el esfuerzo por llevar a término satisfactorio su evaluación.",9:"Respeta los tiempos considerados para realizar la evaluación y se mantiene en silencio una vez finalizada.",10:"Entrega el instrumento de evaluación cuando se le solicita."},AD=({currentUser:e})=>{const[t,r]=w.useState("captura"),[a,n]=w.useState(""),[i,o]=w.useState("Lengua y Literatura"),[l,c]=w.useState(""),[d,u]=w.useState([]),[f,A]=w.useState(!1),[m,g]=w.useState(!1),[x,v]=w.useState(!1),[y,N]=w.useState([]),[E,B]=w.useState({}),[_,I]=w.useState(null),[j,k]=w.useState(!1),[T,L]=w.useState(""),[F,S]=w.useState(""),[M,H]=w.useState(""),[K,Q]=w.useState(!0),[G,X]=w.useState(""),[Z,U]=w.useState(""),[Y,P]=w.useState([]),[D,W]=w.useState({}),[J,ce]=w.useState({});w.useEffect(()=>{A(!0),Mx().then(q=>u(q)).finally(()=>A(!1))},[]);const ie=w.useMemo(()=>d.filter(q=>q.profile==="PROFESORADO"||q.profile==="PROFESORADO"),[d]);w.useEffect(()=>{const q=xk(a),we=d.filter(Ee=>Ee.profile==="ESTUDIANTE"&&xk(Ee.curso||"")===q).map(Ee=>({id:Ee.id,nombre:Ee.nombreCompleto}));P(we);const Te={};we.forEach(Ee=>{Te[Ee.id]={},ad.forEach(ue=>{Te[Ee.id][ue]=!0})}),W(Te),ce({})},[a,d]);const re=(q,we)=>{W(Te=>{var Ee;return{...Te,[q]:{...Te[q],[we]:!((Ee=Te[q])!=null&&Ee[we])}}})},de=q=>{if(J[q])return 0;const we=D[q];if(!we)return 0;const Ee=ad.map(ue=>we[ue]?7:2).reduce((ue,ge)=>ue+ge,0)/ad.length;return Math.round(Ee*10)/10},oe=w.useMemo(()=>{if(Y.length===0)return ad.map(we=>({indicador:we,porcentajeOn:0,promedio:0}));const q=Y.filter(we=>!J[we.id]);return q.length===0?ad.map(we=>({indicador:we,porcentajeOn:0,promedio:0})):ad.map(we=>{const Te=q.reduce((ge,he)=>{var ve;return ge+((ve=D[he.id])!=null&&ve[we]?1:0)},0),Ee=Math.round(Te/q.length*100),ue=q.reduce((ge,he)=>{var ve;return ge+((ve=D[he.id])!=null&&ve[we]?7:2)},0)/q.length;return{indicador:we,porcentajeOn:Ee,promedio:Math.round(ue*10)/10}})},[Y,D,J]),be=async()=>{var q;if(!(!a||!i||!l||Y.length===0)){g(!0);try{await Pbt({curso:xk(a),asignatura:i,profesorId:l,profesorNombre:((q=d.find(we=>we.id===l))==null?void 0:q.nombreCompleto)||"",creadorId:e.id,creadorNombre:e.nombreCompleto,fecha:new Date().toISOString(),resultados:Y.map(we=>{const Te=!!J[we.id];return{estudianteId:we.id,estudianteNombre:we.nombre,indicadores:ad.map(Ee=>{var ue;return(ue=D[we.id])!=null&&ue[Ee]?7:2}),promedio:Te?null:de(we.id),ausente:Te}})}),alert("Evaluación guardada")}catch(we){console.error("Error guardando evaluación de ensayo",we),alert("No se pudo guardar. Reintenta.")}finally{g(!1)}}};return w.useEffect(()=>{(async()=>{if(t==="guardados"){v(!0);try{let Te=await Rbt({max:200,filtroCurso:T?xk(T):void 0,filtroAsignatura:F||void 0,filtroProfesorId:M||void 0,filtroCreadorId:K?e.id:void 0});if(G){const Ee=new Date(G+"T00:00:00");Te=Te.filter(ue=>{var ge,he;return(((he=(ge=ue.createdAt)==null?void 0:ge.toDate)==null?void 0:he.call(ge))||new Date(ue.fecha))>=Ee})}if(Z){const Ee=new Date(Z+"T23:59:59");Te=Te.filter(ue=>{var ge,he;return(((he=(ge=ue.createdAt)==null?void 0:ge.toDate)==null?void 0:he.call(ge))||new Date(ue.fecha))<=Ee})}N(Te)}finally{v(!1)}}})()},[t,e.id,T,F,M,K,G,Z]),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2 border-b border-slate-200 dark:border-slate-700",children:[s.jsxs("button",{className:`px-3 py-2 text-sm inline-flex items-center gap-2 border-b-2 ${t==="captura"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"}`,onClick:()=>r("captura"),children:[s.jsx(rA,{className:"w-4 h-4"})," Captura"]}),s.jsxs("button",{className:`px-3 py-2 text-sm inline-flex items-center gap-2 border-b-2 ${t==="guardados"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"}`,onClick:()=>r("guardados"),children:[s.jsx(_je,{className:"w-4 h-4"})," Guardados"]})]}),t==="guardados"&&s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Ensayos guardados"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-md border border-slate-300 text-slate-700 hover:bg-slate-50",onClick:()=>zbt(y),title:"Exportar CSV (aplica filtros)",children:[s.jsx(pf,{className:"w-3.5 h-3.5"})," Exportar CSV"]}),s.jsx("button",{className:"text-xs text-slate-500 hover:text-slate-700",onClick:()=>r("captura"),children:"Ir a captura"})]})]}),s.jsx(Ubt,{guardados:y}),s.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-6 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500",children:"Curso"}),s.jsxs("select",{value:T,onChange:q=>L(q.target.value),className:"w-full border rounded-md px-2 py-1 text-sm",children:[s.jsx("option",{value:"",children:"Todos"}),on.map(q=>s.jsx("option",{value:q,children:q},q))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500",children:"Asignatura"}),s.jsxs("select",{value:F,onChange:q=>S(q.target.value),className:"w-full border rounded-md px-2 py-1 text-sm",children:[s.jsx("option",{value:"",children:"Todas"}),cn.map(q=>s.jsx("option",{value:q,children:q},q))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500",children:"Profesor/a"}),s.jsxs("select",{value:M,onChange:q=>H(q.target.value),className:"w-full border rounded-md px-2 py-1 text-sm",children:[s.jsx("option",{value:"",children:"Todos"}),d.filter(q=>q.profile==="PROFESORADO").map(q=>s.jsx("option",{value:q.id,children:q.nombreCompleto},q.id))]})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:K,onChange:q=>Q(q.target.checked)})," Solo mis registros"]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500",children:"Desde"}),s.jsx("input",{type:"date",value:G,onChange:q=>X(q.target.value),className:"w-full border rounded-md px-2 py-1 text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500",children:"Hasta"}),s.jsx("input",{type:"date",value:Z,onChange:q=>U(q.target.value),className:"w-full border rounded-md px-2 py-1 text-sm"})]})]}),s.jsx("div",{className:"mt-3 overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-900/40",children:[s.jsx("th",{className:"px-2 py-2 text-left text-xs font-semibold text-slate-500",children:"Detalle"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Curso"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Asignatura"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Profesor"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Creador/a"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Nº Estudiantes"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Exportar"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Acciones"})]})}),s.jsxs("tbody",{children:[x&&s.jsx("tr",{children:s.jsx("td",{colSpan:9,className:"px-4 py-6 text-center text-slate-500",children:"Cargando…"})}),!x&&y.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:9,className:"px-4 py-6 text-center text-slate-500",children:"No hay ensayos guardados."})}),y.map(q=>{var we,Te,Ee;return s.jsxs(ft.Fragment,{children:[s.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700/50 hover:bg-slate-50/50",children:[s.jsx("td",{className:"px-2 py-2",children:s.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-slate-600 hover:text-slate-800",onClick:()=>B(ue=>({...ue,[q.id]:!ue[q.id]})),children:[E[q.id]?s.jsx(Sk,{className:"w-4 h-4"}):s.jsx(n4,{className:"w-4 h-4"}),E[q.id]?"Ocultar":"Ver"]})}),s.jsx("td",{className:"px-3 py-2 text-sm",children:(((Te=(we=q.createdAt)==null?void 0:we.toDate)==null?void 0:Te.call(we))||new Date(q.fecha)).toLocaleString()}),s.jsx("td",{className:"px-3 py-2 text-sm",children:q.curso}),s.jsx("td",{className:"px-3 py-2 text-sm",children:q.asignatura}),s.jsx("td",{className:"px-3 py-2 text-sm",children:q.profesorNombre}),s.jsx("td",{className:"px-3 py-2 text-sm",children:q.creadorNombre}),s.jsx("td",{className:"px-3 py-2 text-sm",children:((Ee=q.resultados)==null?void 0:Ee.length)??0}),s.jsx("td",{className:"px-3 py-2 text-sm",children:s.jsxs("button",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-md border border-slate-300 text-slate-700 hover:bg-slate-50",onClick:()=>Qbt(q),title:"Exportar CSV de esta evaluación",children:[s.jsx(pf,{className:"w-3.5 h-3.5"})," CSV"]})}),s.jsx("td",{className:"px-3 py-2 text-sm",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-md border border-slate-300 text-slate-700 hover:bg-slate-50",onClick:()=>I(q),title:"Editar",children:[s.jsx(o4,{className:"w-3.5 h-3.5"})," Editar"]}),s.jsxs("button",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-md border border-red-300 text-red-700 hover:bg-red-50",onClick:async()=>{if(confirm("¿Eliminar esta evaluación? Esta acción no se puede deshacer."))try{await Mbt(q.id),N(ge=>ge.filter(he=>he.id!==q.id))}catch(ge){alert("No se pudo eliminar"),console.error(ge)}},title:"Eliminar",children:[s.jsx(Ia,{className:"w-3.5 h-3.5"})," Eliminar"]})]})})]}),E[q.id]&&s.jsx("tr",{className:"bg-slate-50/40 dark:bg-slate-900/30",children:s.jsx("td",{colSpan:9,className:"px-4 py-3",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Estudiante"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Ausente"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Promedio"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Indicadores"})]})}),s.jsx("tbody",{children:(q.resultados||[]).map((ue,ge)=>s.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700/40",children:[s.jsx("td",{className:"px-3 py-1.5 whitespace-nowrap",children:ue.estudianteNombre}),s.jsx("td",{className:"px-3 py-1.5",children:ue.ausente?s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-slate-200 text-slate-700 text-xs",children:"Sí"}):s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-emerald-100 text-emerald-700 text-xs",children:"No"})}),s.jsx("td",{className:"px-3 py-1.5 font-semibold",children:ue.ausente?"—":(ue.promedio??0).toFixed(1)}),s.jsx("td",{className:"px-3 py-1.5",children:s.jsx("div",{className:"flex items-center gap-1",children:(ue.indicadores||[]).map((he,ve)=>s.jsx("span",{className:`w-4 h-4 rounded-full border ${he>=7?"bg-emerald-500 border-emerald-600":"bg-red-400 border-red-500"}`,title:`${ve+1}: ${he.toFixed(1)}`},ve))})})]},ue.estudianteId||ge))})]})})})})]},q.id)})]})]})})]})}),_&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>!j&&I(null)}),s.jsxs("div",{className:"relative bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 w-full max-w-2xl p-4 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-sm font-semibold",children:"Editar evaluación"}),s.jsx("button",{className:"p-1 text-slate-500 hover:text-slate-700",onClick:()=>!j&&I(null),children:s.jsx(ho,{className:"w-4 h-4"})})]}),s.jsxs("form",{onSubmit:async q=>{q.preventDefault(),k(!0);try{await Lbt(_.id,{curso:_.curso,asignatura:_.asignatura,profesorId:_.profesorId,profesorNombre:_.profesorNombre,creadorId:_.creadorId,creadorNombre:_.creadorNombre,fecha:_.fecha}),N(we=>we.map(Te=>Te.id===_.id?{...Te,..._}:Te)),I(null)}catch(we){console.error(we),alert("No se pudo guardar cambios")}finally{k(!1)}},className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500",children:"Curso"}),s.jsx("select",{value:_.curso,onChange:q=>I({..._,curso:q.target.value}),className:"w-full border rounded-md px-2 py-1 text-sm",children:on.map(q=>s.jsx("option",{value:q,children:q},q))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500",children:"Asignatura"}),s.jsx("select",{value:_.asignatura,onChange:q=>I({..._,asignatura:q.target.value}),className:"w-full border rounded-md px-2 py-1 text-sm",children:cn.map(q=>s.jsx("option",{value:q,children:q},q))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500",children:"Profesor/a"}),s.jsx("select",{value:_.profesorId,onChange:q=>{const we=q.target.value,Te=d.find(Ee=>Ee.id===we);I({..._,profesorId:we,profesorNombre:(Te==null?void 0:Te.nombreCompleto)||_.profesorNombre})},className:"w-full border rounded-md px-2 py-1 text-sm",children:d.filter(q=>q.profile==="PROFESORADO").map(q=>s.jsx("option",{value:q.id,children:q.nombreCompleto},q.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500",children:"Fecha (ISO)"}),s.jsx("input",{type:"datetime-local",value:new Date(_.fecha).toISOString().slice(0,16),onChange:q=>{const we=new Date(q.target.value).toISOString();I({..._,fecha:we})},className:"w-full border rounded-md px-2 py-1 text-sm"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",className:"px-3 py-1.5 text-sm rounded-md border",onClick:()=>I(null),disabled:j,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-3 py-1.5 text-sm rounded-md bg-amber-500 text-white hover:bg-amber-600 disabled:opacity-50",disabled:j,children:j?"Guardando…":"Guardar cambios"})]})]}),s.jsx("div",{className:"mt-4 text-xs text-slate-500",children:"Nota: La edición de resultados individuales no está habilitada aún en este modal."})]})]}),t==="captura"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200 mb-3",children:"Indicadores evaluados"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 text-sm",children:ad.map(q=>s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 text-xs font-bold shrink-0",children:q}),s.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:RR[q]})]},q))})]}),Y.length>0&&s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200 mb-3",children:"Desempeño del curso por indicador"}),s.jsx("div",{className:"space-y-2",children:oe.map(q=>s.jsxs("div",{className:"grid grid-cols-12 items-center gap-2",children:[s.jsxs("div",{className:"col-span-12 md:col-span-3 lg:col-span-2 text-xs text-slate-600 dark:text-slate-300",children:[q.indicador,". ",RR[q.indicador]]}),s.jsx("div",{className:"col-span-12 md:col-span-6 lg:col-span-7",children:s.jsx("div",{className:"w-full h-3 rounded-full bg-slate-100 dark:bg-slate-700 overflow-hidden",children:s.jsx("div",{className:"h-3 bg-emerald-500",style:{width:`${q.porcentajeOn}%`}})})}),s.jsxs("div",{className:"col-span-12 md:col-span-3 lg:col-span-3 flex justify-between text-xs text-slate-700 dark:text-slate-200",children:[s.jsxs("span",{className:"font-medium",children:[q.porcentajeOn,"% con 7.0"]}),s.jsxs("span",{children:["Prom: ",q.promedio.toFixed(1)]})]})]},q.indicador))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Curso"}),s.jsxs("select",{value:a,onChange:q=>n(q.target.value),className:"w-full border rounded-md px-3 py-2",children:[s.jsx("option",{value:"",children:"Seleccione…"}),on.map(q=>s.jsx("option",{value:q,children:q},q))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Asignatura"}),s.jsx("select",{value:i,onChange:q=>o(q.target.value),className:"w-full border rounded-md px-3 py-2",children:cn.map(q=>s.jsx("option",{value:q,children:q},q))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Profesor responsable"}),s.jsxs("select",{value:l,onChange:q=>c(q.target.value),className:"w-full border rounded-md px-3 py-2",children:[s.jsx("option",{value:"",children:"Seleccione…"}),ie.map(q=>s.jsx("option",{value:q.id,children:q.nombreCompleto},q.id))]})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("button",{onClick:be,disabled:!a||!i||!l||m,className:"inline-flex items-center gap-2 px-4 py-2 rounded-md bg-amber-500 text-white hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[m?s.jsx(si,{className:"w-4 h-4 animate-spin"}):s.jsx(kl,{className:"w-4 h-4"})," Guardar"]})})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow border border-slate-200 dark:border-slate-700 overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-900/40",children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Estudiante"}),ad.map(q=>s.jsx("th",{className:"px-2 py-2 text-center text-xs font-semibold text-slate-500",children:q},q)),s.jsx("th",{className:"px-3 py-2 text-center text-xs font-semibold text-slate-500",children:"Prom."})]})}),s.jsxs("tbody",{children:[f&&s.jsx("tr",{children:s.jsx("td",{colSpan:12,className:"px-4 py-6 text-center text-slate-500",children:"Cargando estudiantes…"})}),!f&&Y.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:12,className:"px-4 py-6 text-center text-slate-500",children:"Seleccione curso para listar estudiantes."})}),Y.map(q=>s.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700/50 hover:bg-slate-50/50",children:[s.jsx("td",{className:"px-4 py-2 text-sm whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(Lg,{className:"w-4 h-4 text-slate-400"})," ",q.nombre]}),s.jsxs("label",{className:"inline-flex items-center gap-1 text-xs text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:!!J[q.id],onChange:we=>ce(Te=>({...Te,[q.id]:we.target.checked}))}),"Ausente"]})]})}),ad.map(we=>{var Ee;const Te=((Ee=D[q.id])==null?void 0:Ee[we])??!0;return s.jsx("td",{className:"px-2 py-2 text-center",children:s.jsx("button",{type:"button",onClick:()=>!J[q.id]&&re(q.id,we),disabled:!!J[q.id],className:`inline-flex items-center justify-center w-7 h-7 rounded-full border transition ${J[q.id]?"opacity-40 cursor-not-allowed bg-slate-50 border-slate-200":Te?"bg-green-100 border-green-300 text-green-700":"bg-red-50 border-red-300 text-red-600"}`,title:J[q.id]?"Ausente":Te?"7.0":"2.0",children:Te?s.jsx(JN,{className:"w-4 h-4"}):s.jsx(kCe,{className:"w-4 h-4"})})},we)}),s.jsx("td",{className:"px-3 py-2 text-center font-semibold text-slate-700",children:J[q.id]?"—":de(q.id).toFixed(1)})]},q.id))]})]})})]})]})},Ubt=({guardados:e})=>{const t=ft.useMemo(()=>{let r=e.length,a=0,n=0,i=0,o=0,l=0;const c=Array(10).fill(0),d=Array(10).fill(0);e.forEach(A=>{const m=A.resultados||[];a+=m.length,m.forEach(g=>{g.ausente?i+=1:(n+=1,typeof g.promedio=="number"&&(o+=g.promedio,l+=1),(g.indicadores||[]).forEach((x,v)=>{x>=7&&(c[v]+=1),d[v]+=1}))})});const u=l>0?Math.round(o/l*10)/10:0,f=c.map((A,m)=>{const g=d[m]||0;return g>0?Math.round(A/g*100):0});return{evaluaciones:r,estudiantes:a,presentes:n,ausentes:i,promedioGlobal:u,indicadoresPct:f}},[e]);return s.jsxs("div",{className:"mt-3 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[s.jsx(Iw,{label:"Evaluaciones",value:t.evaluaciones}),s.jsx(Iw,{label:"Estudiantes",value:t.estudiantes}),s.jsx(Iw,{label:"Presentes",value:t.presentes}),s.jsx(Iw,{label:"Ausentes",value:t.ausentes}),s.jsx(Iw,{label:"Prom. global",value:t.promedioGlobal.toFixed(1)})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-semibold text-slate-500 mb-2",children:"Porcentaje 7.0 por indicador"}),s.jsx("div",{className:"space-y-2",children:ad.map((r,a)=>s.jsxs("div",{className:"grid grid-cols-12 items-center gap-2",children:[s.jsxs("div",{className:"col-span-12 md:col-span-3 lg:col-span-2 text-xs text-slate-600 dark:text-slate-300",children:[r,". ",RR[r]]}),s.jsx("div",{className:"col-span-12 md:col-span-6 lg:col-span-7",children:s.jsx("div",{className:"w-full h-3 rounded-full bg-slate-100 dark:bg-slate-700 overflow-hidden",children:s.jsx("div",{className:"h-3 bg-emerald-500",style:{width:`${t.indicadoresPct[a]}%`}})})}),s.jsx("div",{className:"col-span-12 md:col-span-3 lg:col-span-3 flex justify-end text-xs text-slate-700 dark:text-slate-200",children:s.jsxs("span",{className:"font-medium",children:[t.indicadoresPct[a],"%"]})})]},r))})]})]})},Iw=({label:e,value:t})=>s.jsxs("div",{className:"p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[s.jsx("div",{className:"text-xs text-slate-500",children:e}),s.jsx("div",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:t})]});function Hbt(e){if(e==null)return"";const t=String(e).replace(/"/g,'""');return/[",\n]/.test(t)?'"'+t+'"':t}function Dme(e,t){const r=t.map(o=>o.map(Hbt).join(",")).join(`
`),a=new Blob([r],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(a),i=document.createElement("a");i.href=n,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)}function Qbt(e){var n,i;const t=["EvaluacionID","Fecha","Curso","Asignatura","Profesor","Creador","EstudianteID","Estudiante","Ausente","Promedio",...ad.map(o=>`Indicador_${o}`)],r=(((i=(n=e.createdAt)==null?void 0:n.toDate)==null?void 0:i.call(n))||new Date(e.fecha)).toISOString(),a=[t];(e.resultados||[]).forEach(o=>{const l=[e.id,r,e.curso,e.asignatura,e.profesorNombre,e.creadorNombre,o.estudianteId,o.estudianteNombre,o.ausente?"SI":"NO",o.ausente?"":String(o.promedio??"")],c=(o.indicadores||[]).map(d=>typeof d=="number"?d.toFixed(1):"");a.push([...l,...c])}),Dme(`evaluacion_${e.id}.csv`,a)}function zbt(e){const r=[["EvaluacionID","Fecha","Curso","Asignatura","Profesor","Creador","EstudianteID","Estudiante","Ausente","Promedio",...ad.map(n=>`Indicador_${n}`)]];e.forEach(n=>{var o,l;const i=(((l=(o=n.createdAt)==null?void 0:o.toDate)==null?void 0:l.call(o))||new Date(n.fecha)).toISOString();(n.resultados||[]).forEach(c=>{const d=[n.id,i,n.curso,n.asignatura,n.profesorNombre,n.creadorNombre,c.estudianteId,c.estudianteNombre,c.ausente?"SI":"NO",c.ausente?"":String(c.promedio??"")],u=(c.indicadores||[]).map(f=>typeof f=="number"?f.toFixed(1):"");r.push([...d,...u])})});const a=new Date().toISOString().slice(0,19).replace(/[:T]/g,"-");Dme(`evaluaciones_filtradas_${a}.csv`,r)}const $bt={"1º Medio":"1º","2º Medio":"2º","3º Medio":"3º","4º Medio":"4º"};function Vbt(e){const t=$bt[e]||"";return on.filter(r=>r.startsWith(t))}function Gbt(){const[e,t]=w.useState({}),[r,a]=w.useState(!0);w.useEffect(()=>{const i=sie(o=>{t(o||{}),a(!1)});return()=>i&&i()},[]);const n=w.useMemo(()=>D0.map(i=>({nivel:i,cursos:Vbt(i)})).filter(i=>i.cursos.length>0),[]);return s.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-semibold",children:"Horario semanal del liceo"}),r&&s.jsx("span",{className:"text-sm text-gray-500",children:"Cargando…"})]}),s.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:Th.map(i=>s.jsxs("section",{className:"rounded-xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-slate-900 shadow-sm overflow-hidden",children:[s.jsx("header",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-slate-800/40",children:s.jsx("h2",{className:"text-lg font-semibold",children:i})}),s.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:n.map(({nivel:o,cursos:l})=>s.jsxs("div",{className:"p-3 md:p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:"h-5 w-1.5 rounded bg-amber-500"}),s.jsx("h3",{className:"text-base md:text-lg font-medium",children:o}),s.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[l.length," curso(s)"]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-gray-600 dark:text-gray-300",children:[s.jsx("th",{className:"px-2 py-2 font-semibold sticky left-0 bg-white dark:bg-slate-900 z-10",children:"BLOQUE"}),s.jsx("th",{className:"px-2 py-2 font-semibold",children:"INICIO"}),s.jsx("th",{className:"px-2 py-2 font-semibold",children:"FINAL"}),l.map(c=>s.jsx("th",{className:"px-2 py-2 font-semibold whitespace-nowrap",children:c},c))]})}),s.jsx("tbody",{children:Is.map(c=>{const d=String(c.bloque);return s.jsxs("tr",{className:"border-t border-gray-100 dark:border-gray-800 align-top",children:[s.jsx("td",{className:"px-2 py-2 font-medium sticky left-0 bg-white dark:bg-slate-900 z-10",children:c.bloque}),s.jsx("td",{className:"px-2 py-2 text-gray-600 dark:text-gray-300",children:c.inicio}),s.jsx("td",{className:"px-2 py-2 text-gray-600 dark:text-gray-300",children:c.fin}),l.map(u=>{var x,v;const f=(v=(x=e==null?void 0:e[i])==null?void 0:x[d])==null?void 0:v[u],A=(f==null?void 0:f.asignatura)||"",m=(f==null?void 0:f.profesor)||"",g=!!(A||m);return s.jsx("td",{className:`px-2 py-2 ${g?"bg-white dark:bg-slate-900":"bg-gray-50 dark:bg-slate-800/30"}`,children:s.jsxs("div",{className:"min-w-[9rem] md:min-w-[12rem] lg:min-w-[14rem] xl:min-w-[16rem]",children:[s.jsx("div",{className:"font-medium leading-5 truncate",title:A,children:A||"—"}),s.jsx("div",{className:"text-xs text-gray-500 truncate",title:m,children:m})]})},u)})]},c.bloque)})})]})})]},o))})]},i))})]})}const tT="intranet_entries",qbt=(e,t)=>{try{const r=jt(ut(lr,tT),Gt("createdAt","desc"));return rr(r,a=>{const n=[];a.forEach(i=>n.push({id:i.id,...i.data()})),e(n)},a=>t&&t(a))}catch(r){return t&&t(r),()=>{}}},Kbt=async e=>{const t=ln.currentUser;if(!t)throw new Error("No autenticado");const r={...e,creadoPor:t.email||"desconocido",createdAt:e.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()};return(await Kr(ut(lr,tT),r)).id},Aee=async(e,t)=>{const r={...t,updatedAt:new Date().toISOString()},a=JSON.parse(JSON.stringify(r));await zi($t(lr,tT,e),a)},Wbt=async e=>{await Ua($t(lr,tT,e))},Xbt=e=>e.replace(/[^a-zA-Z0-9._-]/g,"_");function Ybt(e,t){const r=Date.now(),a=Xbt(t);return`${e==="image"?"intranet/images":"intranet/videos"}/${r}_${a}`}function mee(e,t,r){return new Promise((a,n)=>{const i=Ybt(t,e.name),o=vu(jx,i),l=K8(o,e,{contentType:e.type});l.on("state_changed",c=>{const d=c.bytesTransferred/c.totalBytes*100;r==null||r(Math.round(d))},n,async()=>{try{const c=await gA(l.snapshot.ref);a({url:c,path:i})}catch(c){n(c)}})})}async function Jbt(e){try{await r4(vu(jx,e))}catch(t){console.warn("No se pudo eliminar del storage:",t)}}const mD={titulo:"",resumen:"",contenidoHtml:"",etiquetas:[],enlaces:[],imagenes:[],videos:[],destacado:!1,autorNombre:""},Fme=({label:e})=>s.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300 ring-1 ring-amber-200/60 dark:ring-amber-800/40",children:[s.jsx(Nke,{className:"w-3.5 h-3.5 mr-1.5"})," ",e]}),MN=e=>{try{return e?new URL(e).hostname.replace(/^www\./,""):""}catch{return e||""}},LR=e=>{const t=MN(e);return t?`https://www.google.com/s2/favicons?sz=64&domain=${encodeURIComponent(t)}`:void 0},pee=(e,t=28)=>e?e.length>t?e.slice(0,t-1)+"…":e:"",Zbt=({draft:e,setDraft:t,newLink:r,setNewLink:a,showPreview:n,setShowPreview:i,editing:o,saveDraft:l,cancelEdit:c,imgUploadPct:d,setImgUploadPct:u,vidUploadPct:f,setVidUploadPct:A})=>{var B,_,I,j;const m=k=>{try{return new URL(k),!0}catch{return!1}},[g,x]=w.useState(!1),[v,y]=w.useState(!1),N=async k=>{const T=Array.from(k);for(const L of T){if(!/^image\/(png|jpe?g|gif)$/i.test(L.type)){alert("Formato de imagen no soportado. Usa PNG, JPG o GIF.");continue}if(L.size>10*1024*1024){alert("Imagen supera 10 MB.");continue}try{u(0);const{url:S}=await mee(L,"image",M=>u(M));t(M=>({...M,imagenes:[...M.imagenes||[],{url:S}]}))}catch(S){alert((S==null?void 0:S.message)||"Error al subir imagen")}finally{u(null)}}},E=async k=>{const T=Array.from(k);for(const L of T){if(!/^(video\/mp4|video\/quicktime)$/i.test(L.type)){alert("Formato de video no soportado. Usa MP4 o MOV.");continue}if(L.size>500*1024*1024){alert("Video supera 500 MB.");continue}try{A(0);const{url:S}=await mee(L,"video",M=>A(M));t(M=>({...M,videos:[...M.videos||[],{url:S}]}))}catch(S){alert((S==null?void 0:S.message)||"Error al subir video")}finally{A(null)}}};return s.jsxs("div",{className:"bg-white p-5 md:p-6 rounded-xl shadow border border-slate-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-5",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-slate-900",children:o?"Editar entrada":"Nueva entrada"}),e.destacado&&s.jsx("span",{className:"inline-flex items-center text-xs font-semibold text-amber-700 bg-amber-50 border border-amber-200 px-2 py-0.5 rounded-full",children:"Destacado"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:c,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md bg-slate-100 text-slate-700 hover:bg-slate-200",children:[s.jsx(ho,{className:"w-4 h-4"})," Cancelar"]}),s.jsxs("button",{disabled:d!==null||f!==null,onClick:l,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed",children:[s.jsx(kl,{className:"w-4 h-4"})," Guardar"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Título"}),s.jsx("input",{value:e.titulo,onChange:k=>t({...e,titulo:k.target.value}),className:"w-full mt-1 rounded-md border border-slate-300 px-3 py-2 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Título de la entrada"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Contenido principal (HTML básico o texto)"}),s.jsx("textarea",{rows:14,value:e.contenidoHtml,onChange:k=>t({...e,contenidoHtml:k.target.value}),className:"w-full mt-1 rounded-md border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Puedes pegar HTML limpio (sin scripts) o escribir texto plano."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Etiquetas (separadas por comas)"}),s.jsx("input",{value:(e.etiquetas||[]).join(", "),onChange:k=>t({...e,etiquetas:k.target.value.split(",").map(T=>T.trim()).filter(Boolean)}),className:"w-full mt-1 rounded-md border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ej: admisión, protocolos, reuniones"}),s.jsx("div",{className:"mt-2",children:!!((B=e.etiquetas)!=null&&B.length)&&s.jsx("div",{className:"flex flex-wrap gap-2",children:e.etiquetas.map(k=>s.jsx(Fme,{label:k},k))})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Enlaces externos"}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 mt-1",children:[s.jsx("input",{placeholder:"Título (opcional)",value:r.titulo||"",onChange:k=>a({...r,titulo:k.target.value}),className:"sm:flex-1 rounded-md border border-slate-300 px-3 py-2"}),s.jsx("input",{placeholder:"https://sitio.com/recurso",value:r.url,onChange:k=>a({...r,url:k.target.value}),className:"sm:flex-[2] rounded-md border border-slate-300 px-3 py-2"}),s.jsxs("button",{type:"button",onClick:()=>{if(!r.url||!m(r.url)){alert("Ingresa una URL válida.");return}const k=[...e.enlaces||[]];k.push({url:r.url.trim(),...r.titulo?{titulo:r.titulo.trim()}:{}}),t({...e,enlaces:k}),a({url:""})},className:"inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:[s.jsx(Si,{className:"w-4 h-4"})," Agregar enlace"]})]}),!!((_=e.enlaces)!=null&&_.length)&&s.jsx("div",{className:"mt-3 space-y-2",children:e.enlaces.map((k,T)=>s.jsxs("div",{className:"flex items-center justify-between gap-3 px-3 py-2 rounded-md bg-slate-50 border border-slate-200",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 min-w-0",children:[LR(k.url)&&s.jsx("img",{src:LR(k.url),alt:k.titulo||k.url,className:"w-4 h-4 rounded"}),s.jsx("span",{className:"font-medium truncate max-w-[220px] sm:max-w-[260px]",title:k.titulo||k.url,children:k.titulo||MN(k.url)}),s.jsx("span",{className:"text-slate-400",children:"·"}),s.jsxs("a",{href:k.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:underline whitespace-nowrap",children:[s.jsx(Fg,{className:"w-3.5 h-3.5"})," Abrir"]})]}),s.jsx("button",{onClick:()=>t({...e,enlaces:(e.enlaces||[]).filter((L,F)=>F!==T)}),className:"p-1 rounded hover:bg-red-50 text-red-600",title:"Eliminar",children:s.jsx(Ia,{className:"w-4 h-4"})})]},T))})]}),s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-medium text-slate-700",children:[s.jsx("input",{type:"checkbox",checked:!!e.destacado,onChange:k=>t({...e,destacado:k.target.checked})}),s.jsx(qD,{className:"w-4 h-4"})," Destacado"]})})]}),s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-800",children:"Resumen"}),s.jsx("span",{className:"text-xs text-slate-500",children:"Opcional"})]}),s.jsx("textarea",{rows:5,value:e.resumen||"",onChange:k=>t({...e,resumen:k.target.value}),className:"mt-2 w-full rounded-md border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Breve síntesis para el feed"})]}),s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-slate-200",children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-800",children:"Previsualización"}),s.jsx("button",{onClick:()=>i(k=>!k),className:"inline-flex items-center gap-1 text-sm text-slate-600 hover:text-slate-800",children:n?s.jsxs(s.Fragment,{children:[s.jsx(MCe,{className:"w-4 h-4"})," Ocultar"]}):s.jsxs(s.Fragment,{children:[s.jsx(Pg,{className:"w-4 h-4"})," Mostrar"]})})]}),s.jsx("div",{className:"p-3 min-h-[8rem]",children:n?s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx(BE,{content:e.contenidoHtml,context:"intranet-editor-preview"})}):s.jsx("div",{className:"text-slate-500 text-sm",children:"Activa la previsualización para ver el contenido renderizado."})})]}),s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white shadow-sm",children:[s.jsxs("div",{className:"p-3 border-b border-slate-200",children:[s.jsxs("h4",{className:"text-sm font-semibold text-slate-800 flex items-center gap-2",children:[s.jsx(O5,{className:"w-4 h-4"})," Imágenes"]}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Formatos: PNG, JPG, GIF. Máx. 10 MB."})]}),s.jsx("div",{onDragOver:k=>{k.preventDefault(),x(!0)},onDragLeave:()=>x(!1),onDrop:k=>{var T;k.preventDefault(),x(!1),(T=k.dataTransfer.files)!=null&&T.length&&N(k.dataTransfer.files)},className:`m-3 rounded-md border-2 ${g?"border-blue-500 bg-blue-50":"border-dashed border-slate-300"} p-4 text-center cursor-pointer`,children:s.jsxs("label",{className:"block",children:[s.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:k=>{k.target.files&&N(k.target.files),k.currentTarget.value=""}}),s.jsxs("div",{className:"flex flex-col items-center gap-2 text-slate-600",children:[d!==null?s.jsx(si,{className:"w-6 h-6 animate-spin"}):s.jsx(s$,{className:"w-6 h-6"}),s.jsx("span",{className:"text-sm",children:"Arrastra y suelta o haz click para subir"}),d!==null&&s.jsxs("div",{className:"w-full max-w-xs mt-1",children:[s.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-2 bg-blue-600",style:{width:`${Math.round(d)}%`}})}),s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Subiendo imagen… ",Math.round(d),"%"]})]})]})]})}),!!((I=e.imagenes)!=null&&I.length)&&s.jsx("div",{className:"px-3 pb-3 grid grid-cols-3 gap-2",children:e.imagenes.map((k,T)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:k.url,alt:k.titulo||`img-${T}`,className:"w-full h-20 object-cover rounded-md"}),s.jsx("button",{type:"button",onClick:()=>t({...e,imagenes:(e.imagenes||[]).filter((L,F)=>F!==T)}),className:"absolute top-1 right-1 p-1 rounded bg-white/90 hover:bg-white",children:s.jsx(ho,{className:"w-3.5 h-3.5"})})]},T))})]}),s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white shadow-sm",children:[s.jsxs("div",{className:"p-3 border-b border-slate-200",children:[s.jsxs("h4",{className:"text-sm font-semibold text-slate-800 flex items-center gap-2",children:[s.jsx(cd,{className:"w-4 h-4"})," Videos"]}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Formatos: MP4, MOV. Máx. 500 MB. También puedes pegar URLs."})]}),s.jsxs("div",{className:"m-3",children:[s.jsxs("div",{onDragOver:k=>{k.preventDefault(),y(!0)},onDragLeave:()=>y(!1),onDrop:k=>{var T;k.preventDefault(),y(!1),(T=k.dataTransfer.files)!=null&&T.length&&E(k.dataTransfer.files)},className:`rounded-md border-2 ${v?"border-blue-500 bg-blue-50":"border-dashed border-slate-300"} p-4 text-center cursor-pointer`,children:[s.jsxs("label",{className:"block",children:[s.jsx("input",{type:"file",accept:"video/*",multiple:!0,className:"hidden",onChange:k=>{k.target.files&&E(k.target.files),k.currentTarget.value=""}}),s.jsxs("div",{className:"flex flex-col items-center gap-2 text-slate-600",children:[f!==null?s.jsx(si,{className:"w-6 h-6 animate-spin"}):s.jsx(s$,{className:"w-6 h-6"}),s.jsx("span",{className:"text-sm",children:"Arrastra y suelta o haz click para subir"})]})]}),f!==null&&s.jsxs("div",{className:"w-full max-w-xs mt-3 mx-auto",children:[s.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-2 bg-blue-600",style:{width:`${Math.round(f)}%`}})}),s.jsxs("div",{className:"text-xs text-slate-500 mt-1 text-center",children:["Subiendo video… ",Math.round(f),"%"]})]})]}),s.jsxs("div",{className:"mt-3 flex gap-2",children:[s.jsx("input",{placeholder:"https://video-ejemplo.com/archivo.mp4",className:"flex-1 rounded-md border border-slate-300 px-3 py-2",onKeyDown:k=>{const T=k.currentTarget.value.trim();if(k.key==="Enter"){if(!m(T)){alert("URL de video no válida.");return}t(L=>({...L,videos:[...L.videos||[],{url:T}]})),k.currentTarget.value=""}}}),s.jsx("button",{type:"button",onClick:k=>{var F;const T=k.currentTarget.previousSibling,L=(F=T==null?void 0:T.value)==null?void 0:F.trim();if(L){if(!m(L)){alert("URL de video no válida.");return}t(S=>({...S,videos:[...S.videos||[],{url:L}]})),T.value=""}},className:"inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:"Agregar URL"})]}),!!((j=e.videos)!=null&&j.length)&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.videos.map((k,T)=>s.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-md bg-slate-50 border border-slate-200 text-sm",children:[s.jsx(cd,{className:"w-4 h-4"})," ",k.titulo||MN(k.url),s.jsx("button",{type:"button",onClick:()=>t({...e,videos:(e.videos||[]).filter((L,F)=>F!==T)}),className:"ml-2 p-1 rounded hover:bg-slate-200",children:s.jsx(ho,{className:"w-3.5 h-3.5"})})]},T))})]})]})]})]})]})},e1t=ft.memo(Zbt),t1t=({currentUser:e})=>{const t=e.profile===Tt.SUBDIRECCION,r=[Tt.SUBDIRECCION,Tt.PROFESORADO,Tt.COORDINACION_TP].includes(e.profile),a=[Tt.PROFESORADO,Tt.COORDINACION_TP].includes(e.profile),[n,i]=w.useState([]),[o,l]=w.useState(!0),[c,d]=w.useState(null),[u,f]=w.useState(null),[A,m]=w.useState(mD),[g,x]=w.useState(!1),[v,y]=w.useState(!1),[N,E]=w.useState({url:""}),[B,_]=w.useState(null),[I,j]=w.useState(null),[k,T]=w.useState({order:[],colors:{},version:1}),[L,F]=w.useState(!1),[S,M]=w.useState(null),[H,K]=w.useState(null),Q=w.useMemo(()=>[{id:"auto",label:"Auto",Comp:Qae},{id:"file",label:"Documento",Comp:Lo},{id:"folder",label:"Carpeta",Comp:aje},{id:"link",label:"Enlace",Comp:D5},{id:"image",label:"Imagen",Comp:O5},{id:"video",label:"Video",Comp:cd},{id:"calendar",label:"Calendario",Comp:Ro},{id:"megaphone",label:"Anuncio",Comp:Uae},{id:"book",label:"Libro/Guía",Comp:Rs},{id:"users",label:"Personas",Comp:_i},{id:"settings",label:"Ajustes",Comp:eL},{id:"star",label:"Destacado",Comp:Hae},{id:"message",label:"Mensaje",Comp:Q1},{id:"bell",label:"Notificación",Comp:zEe},{id:"clipboard",label:"Lista",Comp:rA},{id:"check",label:"Aprobado",Comp:JN},{id:"alert",label:"Alerta",Comp:r1},{id:"pin",label:"Pin",Comp:qD},{id:"mappin",label:"Ubicación",Comp:J2},{id:"graduation",label:"Educación",Comp:op},{id:"briefcase",label:"Portafolio",Comp:e1},{id:"building",label:"Edificio",Comp:yb},{id:"sheet",label:"Hoja de cálculo",Comp:s4},{id:"barchart",label:"Gráfico barras",Comp:bl},{id:"piechart",label:"Gráfico torta",Comp:wb},{id:"heart",label:"Corazón",Comp:fje},{id:"lightbulb",label:"Idea",Comp:Eje},{id:"rocket",label:"Cohete",Comp:ake},{id:"globe",label:"Globo",Comp:oje},{id:"map",label:"Mapa",Comp:Dje},{id:"clock",label:"Reloj",Comp:BCe},{id:"mail",label:"Correo",Comp:Mae},{id:"phone",label:"Teléfono",Comp:Kje},{id:"camera",label:"Cámara",Comp:iCe},{id:"play",label:"Reproducir",Comp:wCe}],[]),[G,X]=w.useState("auto"),[Z,U]=w.useState(""),Y=q=>{K(q),X(q.iconId||"auto")},P=()=>{K(null)};w.useEffect(()=>{if(!r)return;l(!0);const q=qbt(we=>{i(we),T(Te=>{const Ee=new Set(we.map(ve=>ve.id)),ue=Te.order.filter(ve=>Ee.has(ve)),ge={};Object.entries(Te.colors).forEach(([ve,le])=>{Ee.has(ve)&&(ge[ve]=String(le))});const he={...Te,order:ue,colors:ge};return D(he),he}),l(!1)},we=>{console.error("Error al suscribirse a intranet:",we),d("No se pudo cargar la intranet."),l(!1)});return()=>{try{q&&q()}catch{}}},[r]),w.useEffect(()=>{if(a)try{const q=localStorage.getItem(`intranet_prefs_${e.id}`);if(q){const we=JSON.parse(q);we&&typeof we=="object"&&T({order:we.order||[],colors:we.colors||{},version:1})}}catch{}},[a,e.id]);const D=q=>{try{localStorage.setItem(`intranet_prefs_${e.id}`,JSON.stringify(q))}catch{}},W=(q,we)=>{T(Te=>{const Ee={...Te,colors:{...Te.colors}};return we?Ee.colors[q]=we:delete Ee.colors[q],D(Ee),Ee})},J=(q,we)=>{T(Te=>{const Ee=n.map(ne=>ne.id),ue=Te.order.filter(ne=>Ee.includes(ne)).concat(Ee.filter(ne=>!Te.order.includes(ne))),ge=ue.indexOf(q);if(ge<0)return Te;const he=we==="up"?ge-1:ge+1;if(he<0||he>=ue.length)return Te;const ve=ue.slice();[ve[ge],ve[he]]=[ve[he],ve[ge]];const le={...Te,order:ve,colors:Te.colors,version:Te.version};return D(le),le})},ce=()=>{f(null),m({...mD,autorNombre:e.nombreCompleto}),x(!0)},ie=({e:q,index:we})=>{var le,ne,Ae,pe;const Te="p-1.5 rounded-md bg-slate-100 hover:bg-slate-200 text-slate-700",Ee=k.colors[q.id],ue=()=>{var ke,Le,qe;return(ke=q.videos)!=null&&ke.length?cd:(Le=q.imagenes)!=null&&Le.length?O5:(qe=q.enlaces)!=null&&qe.length?Fg:Lo},ge=w.useMemo(()=>{const ke={};return Q.forEach(({id:Le,Comp:qe})=>{Le!=="auto"&&(ke[Le]=qe)}),ke},[Q]),he=q.iconId&&q.iconId!=="auto"&&ge[q.iconId]||ue(),ve=a&&L;return s.jsxs("div",{className:`relative rounded-xl shadow-sm hover:shadow-md transition overflow-hidden border bg-white ${ve?"cursor-move":""} ${S===q.id?"opacity-80 ring-2 ring-blue-400":""}`,style:{borderColor:"var(--tw-colors-slate-200)",borderLeft:Ee?`6px solid ${Ee}`:void 0},draggable:ve,onDragStart:ke=>{ve&&(M(q.id),ke.dataTransfer.setData("text/plain",q.id),ke.dataTransfer.effectAllowed="move")},onDragEnd:()=>M(null),onDragOver:ke=>{ve&&(ke.preventDefault(),ke.dataTransfer.dropEffect="move")},onDrop:ke=>{if(!ve)return;ke.preventDefault();const Le=ke.dataTransfer.getData("text/plain"),qe=q.id;!Le||Le===qe||(T(ze=>{const Re=n.map(qt=>qt.id),We=ze.order.filter(qt=>Re.includes(qt)).concat(Re.filter(qt=>!ze.order.includes(qt))),ct=We.indexOf(Le),Ze=We.indexOf(qe);if(ct<0||Ze<0)return ze;const Qe=We.slice(),[wt]=Qe.splice(ct,1);Qe.splice(Ze,0,wt);const ar={...ze,order:Qe};return D(ar),ar}),M(null))},children:[t&&s.jsxs("div",{className:"absolute top-2 right-2 z-20 flex items-center gap-1",children:[s.jsx("button",{onClick:()=>re(q),className:Te,title:"Editar contenido",children:s.jsx(Z2,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Y(q),className:Te,title:"Editar icono",children:s.jsx(qD,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>be(q.id),className:"p-1.5 rounded-md bg-slate-100 hover:bg-slate-200 text-red-600",title:"Eliminar",children:s.jsx(Ia,{className:"w-4 h-4"})})]}),a&&L&&s.jsxs("div",{className:"absolute top-2 left-2 z-20 flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{type:"button",className:"px-1.5 py-1 rounded-md border border-slate-300 bg-white hover:bg-slate-50 text-xs",onClick:()=>J(q.id,"up"),title:"Subir",children:"↑"}),s.jsx("button",{type:"button",className:"px-1.5 py-1 rounded-md border border-slate-300 bg-white hover:bg-slate-50 text-xs",onClick:()=>J(q.id,"down"),title:"Bajar",children:"↓"})]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[s.jsx("input",{type:"color",value:Ee||"#ffffff",onChange:ke=>W(q.id,ke.target.value),title:"Color"}),s.jsx("button",{type:"button",className:"px-1.5 py-1 rounded-md border border-slate-300 bg-white hover:bg-slate-50",onClick:()=>W(q.id,void 0),title:"Quitar color",children:"✕"})]})]}),s.jsxs("div",{className:"p-4 relative z-0",children:[s.jsx("div",{className:"flex items-start justify-between gap-3",children:s.jsxs("div",{className:"min-w-0",children:[s.jsx("h4",{className:"text-lg font-semibold text-slate-900 dark:text-white truncate",title:q.titulo,children:q.titulo}),s.jsxs("p",{className:"text-sm text-slate-700/80 dark:text-slate-300/90",children:[new Date(q.createdAt).toLocaleString("es-CL")," • ",q.autorNombre||q.creadoPor]})]})}),!!q.resumen&&s.jsx("p",{className:"mt-1 text-slate-800 dark:text-slate-200",children:q.resumen}),s.jsx("div",{className:"mt-3 prose prose-slate max-w-none dark:prose-invert text-sm",children:s.jsx(BE,{content:q.contenidoHtml,context:"intranet-entry"})}),!!((le=q.etiquetas)!=null&&le.length)&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:q.etiquetas.map(ke=>s.jsx(Fme,{label:ke},ke))}),!!((ne=q.enlaces)!=null&&ne.length)&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:q.enlaces.map((ke,Le)=>{const qe=MN(ke.url),ze=LR(ke.url),Re=ke.titulo||qe||"Abrir";return s.jsxs("a",{href:ke.url,target:"_blank",rel:"noopener noreferrer",className:"min-w-0 inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-blue-50 text-blue-700 ring-1 ring-blue-200 hover:bg-blue-100 dark:bg-blue-900/20 dark:text-blue-300 dark:ring-blue-800 text-sm transition max-w-full",children:[ze&&s.jsx("img",{src:ze,alt:qe,className:"w-4 h-4 rounded shrink-0"}),s.jsx("span",{className:"font-medium truncate max-w-[180px] sm:max-w-[220px]",title:Re,children:pee(Re,30)}),s.jsx(Fg,{className:"w-3.5 h-3.5 shrink-0"})]},Le)})}),!!((Ae=q.imagenes)!=null&&Ae.length)&&s.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-3 gap-2",children:q.imagenes.map((ke,Le)=>s.jsx("img",{src:ke.url,alt:ke.titulo||`img-${Le}`,className:"w-full h-32 object-cover rounded-md"},Le))}),!!((pe=q.videos)!=null&&pe.length)&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:q.videos.map((ke,Le)=>s.jsxs("a",{href:ke.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-amber-50 text-amber-700 ring-1 ring-amber-200 hover:bg-amber-100 dark:bg-amber-900/20 dark:text-amber-300 dark:ring-amber-800 text-sm transition",children:[s.jsx(cd,{className:"w-4 h-4"})," ",pee(ke.titulo||MN(ke.url)||"Video",30),s.jsx(Fg,{className:"w-3.5 h-3.5"})]},Le))}),s.jsx("div",{className:"mt-6 grid place-items-center pointer-events-none select-none",children:s.jsx(he,{className:"text-slate-300 w-16 h-16 md:w-20 md:h-20"})})]})]})},re=q=>{f(q);const{id:we,createdAt:Te,creadoPor:Ee,...ue}=q;m({...ue}),x(!0)},de=()=>{f(null),m(mD),x(!1)},oe=async()=>{try{const q={...A};if(!q.titulo||!q.contenidoHtml){alert("Título y contenido son obligatorios");return}u?await Aee(u.id,q):await Kbt(q),de(),x(!1)}catch(q){alert((q==null?void 0:q.message)||"No se pudo guardar la entrada")}},be=async q=>{var we,Te;if(confirm("¿Eliminar esta entrada?"))try{const Ee=n.find(ge=>ge.id===q),ue=[];(we=Ee==null?void 0:Ee.imagenes)==null||we.forEach(ge=>{ge.storagePath&&ue.push(ge.storagePath)}),(Te=Ee==null?void 0:Ee.videos)==null||Te.forEach(ge=>{ge.storagePath&&ue.push(ge.storagePath)}),ue.length&&await Promise.all(ue.map(ge=>Jbt(ge).catch(()=>{}))),await Wbt(q)}catch(Ee){alert((Ee==null?void 0:Ee.message)||"No se pudo eliminar")}};return r?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Intranet"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Información institucional, enlaces y recursos para el profesorado y coordinación."})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[a&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>F(q=>!q),className:`inline-flex items-center gap-2 px-3 py-2 rounded-lg border ${L?"bg-blue-600 text-white border-blue-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"}`,children:L?"Salir de personalización":"Personalizar"}),L&&s.jsx("button",{onClick:()=>{const q={order:[],colors:{},version:1};T(q),D(q)},className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border bg-white text-slate-700 border-slate-300 hover:bg-slate-50",children:"Restablecer"})]}),t&&s.jsxs("button",{onClick:ce,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-amber-500 text-white hover:bg-amber-600",children:[s.jsx(Si,{className:"w-4 h-4"})," Nueva entrada"]})]})]}),t&&g&&s.jsx(e1t,{draft:A,setDraft:m,newLink:N,setNewLink:E,showPreview:v,setShowPreview:y,editing:!!u,saveDraft:oe,cancelEdit:de,imgUploadPct:B,setImgUploadPct:_,vidUploadPct:I,setVidUploadPct:j}),o?s.jsx("div",{className:"text-slate-600 dark:text-slate-300",children:"Cargando intranet..."}):n.length===0?s.jsx("div",{className:"p-8 text-center rounded-xl bg-slate-50 dark:bg-slate-800 border dark:border-slate-700",children:"Aún no hay entradas publicadas."}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:(()=>{const q=n.slice().sort((we,Te)=>+!!Te.destacado-+!!we.destacado);if(a){const we=k.order.filter(ue=>q.find(ge=>ge.id===ue)),Te=q.filter(ue=>!we.includes(ue.id));return[...we.map(ue=>q.find(ge=>ge.id===ue)).filter(Boolean),...Te].map((ue,ge)=>s.jsx(ie,{e:ue,index:ge},ue.id))}return q.map((we,Te)=>s.jsx(ie,{e:we,index:Te},we.id))})()}),t&&H&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:P}),s.jsxs("div",{className:"relative w-full max-w-lg mx-4 bg-white rounded-xl shadow-xl border border-slate-200 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h5",{className:"text-slate-800 font-semibold",children:"Apariencia de tarjeta (icono)"}),s.jsx("button",{onClick:P,className:"p-1 rounded hover:bg-slate-100","aria-label":"Cerrar",children:s.jsx(ho,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Icono"}),s.jsx("input",{type:"text",value:Z,onChange:q=>U(q.target.value),placeholder:"Buscar icono...",className:"w-40 rounded-md border border-slate-300 px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsx("div",{className:"mt-2 grid grid-cols-5 gap-2",children:Q.filter(q=>q.label.toLowerCase().includes(Z.toLowerCase())||q.id.includes(Z.toLowerCase())).map(q=>{const we=q.Comp,Te=G===q.id||q.id==="auto"&&G==="auto";return s.jsxs("button",{type:"button",onClick:()=>X(q.id),className:`flex flex-col items-center justify-center gap-1 px-2 py-2 rounded-md border text-xs ${Te?"border-blue-600 bg-blue-50 text-blue-700":"border-slate-200 hover:bg-slate-50 text-slate-700"}`,title:q.label,children:[s.jsx(we,{className:"w-5 h-5"}),s.jsx("span",{className:"truncate w-full text-center",children:q.label})]},q.id)})})]}),s.jsxs("div",{className:"mt-4 flex flex-wrap justify-end gap-2",children:[s.jsx("button",{onClick:P,className:"px-3 py-2 rounded-md bg-slate-100 text-slate-700 hover:bg-slate-200",children:"Cancelar"}),s.jsx("button",{onClick:async()=>{if(H)try{await Aee(H.id,{gradiente:null,iconId:G==="auto"?null:G}),P()}catch(q){alert((q==null?void 0:q.message)||"No se pudo guardar")}},className:"px-3 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})]}):s.jsx("div",{className:"p-6 rounded-xl bg-white dark:bg-slate-800 border dark:border-slate-700",children:"No autorizado."})},r1t=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState(""),[i,o]=w.useState([]),[l,c]=w.useState(!1),[d,u]=w.useState(!1),[f,A]=w.useState(null),[m,g]=w.useState(""),[x,v]=w.useState(""),[y,N]=w.useState(""),[E,B]=w.useState([]),[_,I]=w.useState(null),[j,k]=w.useState(""),T=w.useMemo(()=>{const U=t.flatMap(Y=>Array.isArray(Y.tags)?Y.tags:[]);return Array.from(new Set(U))},[t]),L=w.useRef(null),F=w.useMemo(()=>e.profile===Tt.SUBDIRECCION,[e.profile]);w.useEffect(()=>{const U=Nue(r);return()=>U()},[]),w.useEffect(()=>{var U;(U=L.current)==null||U.scrollIntoView({behavior:"smooth"})},[i]);const S=async()=>{const U=a.trim();if(U){o(Y=>[...Y,{role:"user",text:U}]),n(""),c(!0);try{const Y=E.length>0?E:void 0,P=await QZe(U,3,Y),D=Array.isArray(P.citations)?P.citations.map(W=>({index:W.index,id:W.id,title:W.title})):[];o(W=>[...W,{role:"assistant",text:P.answer,citations:D}])}catch(Y){console.error("Error consultando Documentación:",Y);const P=(Y==null?void 0:Y.message)||"Ocurrió un error al consultar la documentación.";o(D=>[...D,{role:"assistant",text:P}])}finally{c(!1)}}},M=async()=>{if(F&&f)try{u(!0);const U=m.trim()||f.name.replace(/\.[^.]+$/,"").replace(/[_-]+/g," "),Y=await Eue(U,x.trim()||"",y.split(",").map(D=>D.trim()).filter(Boolean)),P=await Cue(Y,f);await MS(Y,P.storagePath,U,x.trim()||"",y.split(",").map(D=>D.trim()).filter(Boolean),P.contentType),A(null),g(""),v(""),N("")}catch(U){console.error("Upload error:",U)}finally{u(!1)}},H=async U=>{if(F)try{u(!0),await MS(U.id,U.storagePath,U.title,U.description||"",Array.isArray(U.tags)?U.tags:[],U.contentType||void 0)}catch(Y){console.error("Reindex error:",Y)}finally{u(!1)}},K=async U=>{try{if(!U.storagePath)return;const{ref:Y,getDownloadURL:P}=await ps(async()=>{const{ref:J,getDownloadURL:ce}=await Promise.resolve().then(()=>nEe);return{ref:J,getDownloadURL:ce}},void 0),{storage:D}=await ps(async()=>{const{storage:J}=await Promise.resolve().then(()=>X8);return{storage:J}},void 0),W=await P(Y(D,U.storagePath));k(U.title),I(W)}catch(Y){console.error("Error abriendo documento:",Y)}},Q=U=>{B(Y=>Y.includes(U)?Y.filter(P=>P!==U):[...Y,U])},G=()=>B([]),X=U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),S())},Z=F;return s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700",children:[s.jsx(Lo,{className:"w-5 h-5 text-amber-500"}),s.jsx("span",{className:"font-semibold",children:"Documentación institucional"})]}),Z&&s.jsxs("div",{className:"flex-1 min-w-[280px] flex flex-wrap gap-2 items-center",children:[s.jsxs("label",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700 cursor-pointer",children:[s.jsx(ab,{className:"w-4 h-4"}),s.jsx("input",{type:"file",className:"hidden",accept:"application/pdf,text/plain",onChange:U=>{var Y;return A(((Y=U.target.files)==null?void 0:Y[0])||null)}}),s.jsx("span",{className:"text-sm",children:f?f.name:"Seleccionar archivo (PDF/TXT)"})]}),s.jsx("input",{value:m,onChange:U=>g(U.target.value),placeholder:"Título (opcional)",className:"px-3 py-2 rounded-xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700 text-sm"}),s.jsx("input",{value:x,onChange:U=>v(U.target.value),placeholder:"Descripción (opcional)",className:"px-3 py-2 rounded-xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700 text-sm flex-1"}),s.jsx("input",{value:y,onChange:U=>N(U.target.value),placeholder:"Tags (coma)",className:"px-3 py-2 rounded-xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700 text-sm"}),s.jsxs("button",{disabled:d||!f,onClick:M,className:"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-amber-500 text-white hover:bg-amber-600 disabled:opacity-50",children:[d?s.jsx(si,{className:"w-4 h-4 animate-spin"}):s.jsx(kx,{className:"w-4 h-4"})," Subir e indexar"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 rounded-2xl ring-1 ring-slate-200 dark:ring-slate-700 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"font-semibold",children:"Repositorio"}),F&&s.jsx(eL,{className:"w-4 h-4 text-slate-500",title:"Sólo Subdirección configura"})]}),s.jsxs("div",{className:"mb-3 flex flex-wrap gap-2",children:[T.map(U=>s.jsx("button",{onClick:()=>Q(U),className:`text-xs px-2 py-1 rounded-full ring-1 ${E.includes(U)?"bg-amber-500 text-white ring-amber-500":"bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-200 ring-slate-200 dark:ring-slate-600"}`,children:U},U)),E.length>0&&s.jsx("button",{onClick:G,className:"text-xs px-2 py-1 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-200 ring-1 ring-slate-200 dark:ring-slate-600",children:"Limpiar"})]}),s.jsxs("div",{className:"space-y-2 max-h-[60vh] overflow-auto",children:[t.length===0&&s.jsx("div",{className:"text-sm text-slate-500",children:"Aún no hay documentos cargados."}),t.filter(U=>E.length===0||Array.isArray(U.tags)&&U.tags.some(Y=>E.includes(Y))).map(U=>s.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[s.jsx("div",{className:"w-9 h-9 rounded-lg bg-amber-50 text-amber-600 dark:bg-amber-500/20 dark:text-amber-300 flex items-center justify-center",children:s.jsx(Lo,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium truncate",title:U.title,children:U.title}),U.description&&s.jsx("div",{className:"text-xs text-slate-500 truncate",title:U.description,children:U.description}),s.jsxs("div",{className:"text-[11px] text-slate-400 mt-1",children:[U.pageCount?`${U.pageCount} pág.`:""," ",U.contentText?`· ${U.contentText.length} chars`:""]}),Array.isArray(U.tags)&&U.tags.length>0&&s.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:U.tags.map(Y=>s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-200 ring-1 ring-slate-200 dark:ring-slate-600",children:Y},Y))})]}),F&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:`text-slate-400 ${U.storagePath?"hover:text-indigo-600":"opacity-40 cursor-not-allowed"}`,title:U.storagePath?"Ver documento":"No hay archivo asociado para ver",onClick:()=>U.storagePath&&K(U),disabled:!U.storagePath,children:s.jsx(Pg,{className:"w-4 h-4"})}),s.jsx("button",{className:`text-slate-400 ${U.storagePath?"hover:text-emerald-600":"opacity-40 cursor-not-allowed"}`,title:U.storagePath?"Reindexar":"No hay archivo asociado para reindexar",onClick:()=>U.storagePath&&H(U),disabled:!U.storagePath,children:s.jsx(ske,{className:"w-4 h-4"})}),s.jsx("button",{className:"text-slate-400 hover:text-red-600",title:"Eliminar",onClick:()=>jue(U.id),children:s.jsx(Ia,{className:"w-4 h-4"})})]})]},U.id))]})]}),s.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-2xl ring-1 ring-slate-200 dark:ring-slate-700 p-4 flex flex-col min-h-[60vh]",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:"w-9 h-9 rounded-lg bg-emerald-50 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-300 flex items-center justify-center",children:s.jsx(Q1,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:"Asistente de Documentación"}),s.jsx("div",{className:"text-xs text-slate-500",children:"Pregunta sobre reglamentos, protocolos y documentos institucionales"})]})]}),T.length>0&&s.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Filtrar por temas:"}),T.map(U=>s.jsx("button",{onClick:()=>Q(U),className:`text-xs px-2 py-1 rounded-full ring-1 ${E.includes(U)?"bg-emerald-600 text-white ring-emerald-600":"bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-200 ring-slate-200 dark:ring-slate-600"}`,children:U},`chat-${U}`)),E.length>0&&s.jsx("button",{onClick:G,className:"text-xs px-2 py-1 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-200 ring-1 ring-slate-200 dark:ring-slate-600",children:"Limpiar"})]}),s.jsxs("div",{className:"flex-1 overflow-auto space-y-3",children:[i.map((U,Y)=>s.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 py-2 ${U.role==="user"?"ml-auto bg-amber-100 dark:bg-amber-900/40 text-slate-900 dark:text-slate-100":"bg-slate-100 dark:bg-slate-700/60 text-slate-800 dark:text-slate-100"}`,children:[s.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:U.text}),U.citations&&U.citations.length>0&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:U.citations.map(P=>s.jsxs("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-white/70 dark:bg-slate-800/70 ring-1 ring-slate-200 dark:ring-slate-600",title:P.title,children:["Doc ",P.index]},P.id))})]},Y)),s.jsx("div",{ref:L})]}),s.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[s.jsx("input",{value:a,onChange:U=>n(U.target.value),onKeyDown:X,placeholder:"Escribe tu pregunta…",className:"flex-1 px-4 py-3 rounded-xl bg-white dark:bg-slate-900 ring-1 ring-slate-200 dark:ring-slate-700"}),s.jsxs("button",{onClick:S,disabled:l||!a.trim(),className:"inline-flex items-center gap-2 px-4 py-3 rounded-xl bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-50",children:[l?s.jsx(si,{className:"w-4 h-4 animate-spin"}):s.jsx(Z8,{className:"w-4 h-4"})," Enviar"]})]})]})]}),_&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:()=>I(null),children:s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full h-[90vh] max-w-5xl overflow-hidden flex flex-col",onClick:U=>U.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"font-medium truncate mr-2",children:j}),s.jsx("button",{className:"text-slate-500 hover:text-slate-800",onClick:()=>I(null),title:"Cerrar",children:s.jsx(ho,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex-1 bg-slate-50 dark:bg-slate-800",children:s.jsx("iframe",{src:`${_}#toolbar=1&navpanes=0`,className:"w-full h-full",title:j})})]})})]})},a1t=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},n1t=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:a,canChangeProfile:n,unreadMessagesCount:i,refreshUnreadCount:o})=>{const l=e.profile,c=w.useMemo(()=>{const I=s5e[l]||[];return l!==Tt.ESTUDIANTE?I:I.filter(j=>{if(j.name==="Asistencia a Empresa"){const k=a1t(e.curso||"");return k.startsWith("3º")||k.startsWith("4º")}return!0})},[l,e.curso]),[d,u]=w.useState(null),[f,A]=w.useState(!1),[m,g]=w.useState(!1),[x,v]=w.useState({planificacion:!0,evaluacion:!0,reflexion:!0,herramientas:!0,sd_gestion:!0,sd_planificacion:!0,sd_reflexion:!0,sd_herramientas:!0,coord_gestion:!0,coord_formacion:!0,coord_utilidades:!0}),y=w.useRef([]);w.useEffect(()=>{c&&c.length>0?u(c[0]):u(null)},[l,c]);const N=w.useCallback(I=>{u(I),window.innerWidth<768&&A(!1)},[]),E=w.useCallback(I=>{const j=c.find(k=>k.name===I);j&&N(j)},[c,N]),B=()=>s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center h-20 px-4 border-b border-white/10 bg-[#121926]",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-9 h-9 rounded-full bg-amber-400 flex items-center justify-center shadow-inner",children:s.jsx("span",{className:"text-slate-900 inline-flex items-center justify-center",children:s.jsx(Vke,{className:"w-4 h-4"})})}),!m&&s.jsx("span",{className:"text-white font-extrabold text-xl tracking-tight",children:"Gestión LIR"})]}),s.jsx("button",{type:"button",onClick:()=>g(I=>!I),className:"ml-auto w-9 h-9 inline-flex items-center justify-center rounded-full hover:bg-white/10 transition",title:m?"Expandir":"Colapsar",children:m?s.jsx(n4,{className:"w-5 h-5 text-slate-200"}):s.jsx(Y2,{className:"w-5 h-5 text-slate-200"})})]}),s.jsx("nav",{className:"flex-1 overflow-y-auto p-3 bg-[#1B2433]",children:l===Tt.PROFESORADO&&!m?s.jsxs("div",{className:"space-y-3",children:[[{id:"planificacion",title:"Planificación",items:["Intranet","Planificación","Recursos de Aprendizaje","Interdisciplinario","Inclusión"]},{id:"evaluacion",title:"Evaluación",items:["Evaluación de Ensayo","Evaluación de Aprendizajes","Evaluaciones Formativas","Evaluación de Competencias","Actividades Remotas","SIMCE"]},{id:"reflexion",title:"Reflexión",items:["Análisis Taxonómico","Mis Acompañamientos","Desarrollo Profesional"]},{id:"herramientas",title:"Herramientas",items:["Documentación","Muro de Anuncios","Mensajería Interna","Generador de Actas"]}].map(I=>{const j=!!x[I.id],k=I.items.map(T=>c.find(L=>L.name===T)).filter(Boolean);return k.length===0?null:s.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[s.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 hover:bg-white/10 transition",onClick:()=>v(T=>({...T,[I.id]:!T[I.id]})),"aria-expanded":j,children:[s.jsx("span",{className:"text-sm font-semibold text-white/90",children:I.title}),s.jsx(Sk,{className:`w-4 h-4 text-white/70 transition-transform ${j?"rotate-180":""}`})]}),j&&s.jsx("div",{className:"px-2 pb-2",children:k.map(T=>{const L=(d==null?void 0:d.name)===T.name;return s.jsxs("button",{onClick:()=>N(T),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                              ${L?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:T.name,children:[s.jsx("span",{className:`shrink-0 ${L?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:T.icon}),s.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:T.name})]},T.name)})})]},I.id)}),c.filter(I=>!["Intranet","Planificación","Recursos de Aprendizaje","Interdisciplinario","Inclusión","Evaluación de Aprendizajes","Evaluaciones Formativas","Evaluación de Competencias","Actividades Remotas","SIMCE","Análisis Taxonómico","Mis Acompañamientos","Desarrollo Profesional","Muro de Anuncios","Mensajería Interna","Generador de Actas"].includes(I.name)).length>0&&s.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[s.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-white/90",children:"Otros"}),s.jsx("div",{className:"px-2 pb-2",children:c.filter(I=>!["Intranet","Planificación","Recursos de Aprendizaje","Interdisciplinario","Inclusión","Evaluación de Aprendizajes","Evaluaciones Formativas","Evaluación de Competencias","Actividades Remotas","SIMCE","Análisis Taxonómico","Mis Acompañamientos","Desarrollo Profesional","Muro de Anuncios","Mensajería Interna","Generador de Actas"].includes(I.name)).map(I=>{const j=(d==null?void 0:d.name)===I.name;return s.jsxs("button",{onClick:()=>N(I),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                            ${j?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:I.name,children:[s.jsx("span",{className:`shrink-0 ${j?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:I.icon}),s.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:I.name})]},I.name)})})]})]}):l===Tt.SUBDIRECCION&&!m?s.jsxs("div",{className:"space-y-3",children:[[{id:"sd_gestion",title:"Gestión",items:["Intranet","Administración","Horario del liceo","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedagógicas"]},{id:"sd_planificacion",title:"Planificación",items:["Planificación","Seguimiento Curricular","Interdisciplinario","Inclusión"]},{id:"sd_reflexion",title:"Reflexión",items:["Acompañamiento docente","Análisis Taxonómico","Dashboard"]},{id:"sd_herramientas",title:"Herramientas",items:["Documentación","Calendario Académico","Muro de Anuncios","Mensajería Interna","Generador de Actas"]}].map(I=>{const j=!!x[I.id],k=I.items.map(T=>c.find(L=>L.name===T)).filter(Boolean);return k.length===0?null:s.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[s.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 hover:bg-white/10 transition",onClick:()=>v(T=>({...T,[I.id]:!T[I.id]})),"aria-expanded":j,children:[s.jsx("span",{className:"text-sm font-semibold text-white/90",children:I.title}),s.jsx(Sk,{className:`w-4 h-4 text-white/70 transition-transform ${j?"rotate-180":""}`})]}),j&&s.jsx("div",{className:"px-2 pb-2",children:k.map(T=>{const L=(d==null?void 0:d.name)===T.name;return s.jsxs("button",{onClick:()=>N(T),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                              ${L?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:T.name,children:[s.jsx("span",{className:`shrink-0 ${L?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:T.icon}),s.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:T.name})]},T.name)})})]},I.id)}),c.filter(I=>!["Intranet","Administración","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedagógicas","Seguimiento Curricular","Interdisciplinario","Inclusión","Acompañamiento docente","Análisis Taxonómico","Dashboard","Calendario Académico","Muro de Anuncios","Mensajería Interna","Generador de Actas"].includes(I.name)).length>0&&s.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[s.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-white/90",children:"Otros"}),s.jsx("div",{className:"px-2 pb-2",children:c.filter(I=>!["Intranet","Administración","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedagógicas","Seguimiento Curricular","Interdisciplinario","Inclusión","Acompañamiento docente","Análisis Taxonómico","Dashboard","Calendario Académico","Muro de Anuncios","Mensajería Interna","Generador de Actas"].includes(I.name)).map(I=>{const j=(d==null?void 0:d.name)===I.name;return s.jsxs("button",{onClick:()=>N(I),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                            ${j?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:I.name,children:[s.jsx("span",{className:`shrink-0 ${j?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:I.icon}),s.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:I.name})]},I.name)})})]})]}):l===Tt.COORDINACION_TP&&!m?s.jsx("div",{className:"space-y-3",children:[{id:"coord_gestion",title:"Gestión",items:["Seguimiento Dual","Asistencia Dual","Gestión de Empresas","Pañol"]},{id:"coord_formacion",title:"Formación",items:["Alternancia TP","Desarrollo Profesional","Evaluación de Ensayo","SIMCE"]},{id:"coord_utilidades",title:"Utilidades",items:["Documentación","Mensajería Interna","Muro de Anuncios","Calendario Académico","Generador de Actas","Multicopias"]}].map(I=>{const j=!!x[I.id],k=I.items.map(T=>c.find(L=>L.name===T)).filter(Boolean);return k.length===0?null:s.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[s.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 hover:bg-white/10 transition",onClick:()=>v(T=>({...T,[I.id]:!T[I.id]})),"aria-expanded":j,children:[s.jsx("span",{className:"text-sm font-semibold text-white/90",children:I.title}),s.jsx(Sk,{className:`w-4 h-4 text-white/70 transition-transform ${j?"rotate-180":""}`})]}),j&&s.jsx("div",{className:"px-2 pb-2",children:k.map(T=>{const L=(d==null?void 0:d.name)===T.name;return s.jsxs("button",{onClick:()=>N(T),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                              ${L?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:T.name,children:[s.jsx("span",{className:`shrink-0 ${L?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:T.icon}),s.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:T.name})]},T.name)})})]},I.id)})}):s.jsx("div",{className:"space-y-1",onKeyDown:I=>{var k,T,L;const j=y.current.findIndex(F=>F===document.activeElement);if(I.key==="ArrowDown"){I.preventDefault();const F=Math.min(j===-1?0:j+1,y.current.length-1);(k=y.current[F])==null||k.focus()}else if(I.key==="ArrowUp"){I.preventDefault();const F=Math.max(j===-1?0:j-1,0);(T=y.current[F])==null||T.focus()}else I.key==="Enter"&&j>=0&&((L=y.current[j])==null||L.click())},children:c.map((I,j)=>{const k=(d==null?void 0:d.name)===I.name;return s.jsxs("button",{ref:T=>y.current[j]=T,onClick:()=>N(I),className:`w-full group flex items-center ${m?"justify-center px-2":"justify-start px-4"} gap-3 py-3 rounded-2xl transition-all
                    ${k?"bg-amber-400 text-slate-900 font-bold shadow-md":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:m?I.name:void 0,children:[s.jsx("span",{className:`shrink-0 ${k?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:I.icon}),!m&&s.jsx("span",{className:"text-[1.05rem] leading-tight whitespace-normal break-words text-left",children:I.name})]},I.name)})})})]}),_=()=>{if(!d)return s.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full flex items-center justify-center",children:s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Seleccione un módulo del menú para comenzar."})});if(d.name==="Intranet")return s.jsx(t1t,{currentUser:e});if(d.name==="Documentación")return s.jsx(r1t,{currentUser:e});if(d.name==="Calendario Académico")return s.jsx(ret,{profile:l});if(d.name==="Muro de Anuncios")return s.jsx(oet,{currentUser:e});if(d.name==="Mensajería Interna")return s.jsx(Mnt,{currentUser:e,refreshUnreadCount:o});if(d.name==="Generador de Actas")return s.jsx(pet,{});if(d.name==="Desarrollo Profesional")return s.jsx(kvt,{currentUser:e});if(l===Tt.SUBDIRECCION){if(d.name==="Dashboard")return s.jsx($Pe,{currentUser:e});if(d.name==="Administración")return s.jsx(Frt,{});if(d.name==="Horario del liceo")return s.jsx(Gbt,{});if(d.name==="Planificación")return s.jsx(gX,{currentUser:e});if(d.name==="Multicopias")return s.jsx(hD,{currentUser:e});if(d.name==="Evaluación de Ensayo")return s.jsx(AD,{currentUser:e});if(d.name==="Seguimiento Curricular")return s.jsx(kft,{currentUser:e});if(d.name==="Acompañamiento docente")return s.jsx(Bnt,{currentUser:e});if(d.name==="Análisis Taxonómico")return s.jsx(iJ,{currentUser:e});if(d.name==="SIMCE")return s.jsx(gk,{currentUser:e});if(d.name==="Interdisciplinario")return s.jsx(hY,{});if(d.name==="Registro de inasistencias y reemplazos docentes")return s.jsx(MPe,{currentUser:e});if(d.name==="Crear horarios")return s.jsx(MRe,{});if(d.name==="Seguimiento de acciones pedagógicas")return s.jsx(BZe,{});if(d.name==="Inclusión")return s.jsx(oY,{currentUser:e})}if(l===Tt.PROFESORADO){if(d.name==="Planificación")return s.jsx(gX,{currentUser:e});if(d.name==="Mis Acompañamientos")return s.jsx(ift,{currentUser:e});if(d.name==="Recursos de Aprendizaje")return s.jsx(zut,{});if(d.name==="Multicopias")return s.jsx(hD,{currentUser:e});if(d.name==="Análisis Taxonómico")return s.jsx(iJ,{currentUser:e});if(d.name==="SIMCE")return s.jsx(gk,{currentUser:e});if(d.name==="Interdisciplinario")return s.jsx(hY,{});if(d.name==="Inclusión")return s.jsx(oY,{currentUser:e});if(d.name==="Actividades Remotas")return s.jsx(uat,{});if(d.name==="Evaluación de Ensayo")return s.jsx(AD,{currentUser:e});if(d.name==="Evaluación de Aprendizajes")return s.jsx(Irt,{});if(d.name==="Evaluaciones Formativas")return s.jsx(hnt,{currentUser:e});if(d.name==="Evaluación de Competencias")return s.jsx(kbt,{currentUser:e})}if(l===Tt.COORDINACION_TP){if(d.name==="Seguimiento Dual")return s.jsx(Vrt,{});if(d.name==="Asistencia Dual")return s.jsx(Yat,{});if(d.name==="Pañol")return s.jsx(ost,{});if(d.name==="Multicopias")return s.jsx(hD,{currentUser:e});if(d.name==="Evaluación de Ensayo")return s.jsx(AD,{currentUser:e});if(d.name==="SIMCE")return s.jsx(gk,{currentUser:e});if(d.name==="Gestión de Empresas")return s.jsx(hvt,{});if(d.name==="Alternancia TP")return s.jsx(sbt,{})}if(l===Tt.ESTUDIANTE){if(d.name==="Auto-aprendizaje")return s.jsx(wat,{currentUser:e});if(d.name==="Evaluación Formativa")return s.jsx(Xut,{currentUser:e});if(d.name==="Tareas Interdisciplinarias")return s.jsx(tft,{currentUser:e});if(d.name==="SIMCE")return s.jsx(gk,{currentUser:e});if(d.name==="Asistencia a Empresa")return s.jsx(Pat,{currentUser:e})}return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full animate-fade-in",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:d.name}),s.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:s.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",s.jsx("span",{className:"font-semibold",children:d.name}),"."]})})]})};return s.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-b from-slate-100 to-slate-50 dark:from-slate-950 dark:to-slate-900",children:[s.jsx(y5e,{currentUser:e,onLogout:t,onNavigate:E,onUserUpdate:r,onChangeProfile:a,canChangeProfile:n,toggleSidebar:()=>A(I=>!I),unreadMessagesCount:i,refreshUnreadCount:o}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f&&s.jsx("div",{onClick:()=>A(!1),className:"fixed inset-0 bg-black/40 backdrop-blur-[1px] z-20 md:hidden"}),s.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 ${m?"w-16":"w-72"} 
          bg-[#0F1724] text-white flex flex-col transform md:translate-x-0
          ${f?"translate-x-0":"-translate-x-full"} md:translate-x-0
          transition-all duration-300 ease-in-out border-r border-white/10`,children:s.jsx(B,{})}),s.jsx("main",{className:"flex-1 overflow-y-auto",children:s.jsxs("div",{className:"relative p-5 md:p-8 space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow hover:shadow-md transition",onClick:()=>A(!0),title:"Abrir menú",children:s.jsx(Rje,{className:"w-5 h-5"})}),(d==null?void 0:d.icon)&&s.jsx("span",{className:"inline-flex items-center justify-center w-9 h-9 rounded-xl bg-white dark:bg-slate-800 shadow",children:d.icon}),s.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-slate-100",children:(d==null?void 0:d.name)??"Dashboard"})]})}),s.jsx("div",{className:"min-h-[60vh]",children:_()})]})})]})]})},gee=({onSelectProfile:e,isAdminView:t=!1,allowedProfiles:r})=>{const a=ft.useMemo(()=>new Map(A$.map(i=>[i.id,i])),[]),n=ft.useMemo(()=>r&&r.length>0?r.map(i=>a.get(i)).filter(Boolean):A$,[r,a]);return s.jsxs("div",{className:`relative flex flex-col items-center justify-center min-h-screen p-6 overflow-hidden
                    bg-gradient-to-br from-blue-50 via-blue-100 to-yellow-50
                    dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[s.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[s.jsx("div",{className:`absolute -top-24 -left-16 h-72 w-72 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-yellow-300 to-yellow-200
                        dark:from-yellow-400/20 dark:to-yellow-500/20`}),s.jsx("div",{className:`absolute top-40 -right-10 h-80 w-80 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-blue-300 to-sky-300
                        dark:from-blue-500/20 dark:to-sky-500/20`}),s.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-96 w-96 rounded-full blur-3xl opacity-30
                        bg-gradient-to-tr from-sky-200 to-blue-200
                        dark:from-sky-500/20 dark:to-blue-500/20`})]}),s.jsxs("div",{className:"text-center mb-10",children:[s.jsx("div",{className:"mb-4 flex justify-center items-center",children:s.jsx(tL,{})}),s.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mt-2 drop-shadow-sm",children:"Gestión Pedagógica LIR"}),s.jsx("p",{className:"text-slate-700/80 dark:text-slate-300/80 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:n.map(i=>s.jsxs("button",{onClick:()=>e(i.id),className:`group relative overflow-hidden p-8 rounded-2xl
                       bg-white/10 dark:bg-white/5
                       backdrop-blur-xl border border-white/30 dark:border-white/10
                       shadow-lg hover:shadow-2xl hover:-translate-y-1.5
                       transition-all duration-300 ease-out
                       focus:outline-none focus:ring-4 focus:ring-yellow-400/40`,children:[s.jsx("div",{className:`pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100
                            transition-opacity duration-300
                            bg-gradient-to-br from-white/40 to-transparent`}),s.jsx("div",{className:"text-slate-800 dark:text-slate-200 group-hover:text-yellow-500 transition-colors duration-300",children:i.icon}),s.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-900 dark:text-slate-100 drop-shadow-[0_1px_0_rgba(0,0,0,0.1)]",children:i.label})]},i.id))}),s.jsxs("footer",{className:"absolute bottom-4 text-slate-600 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},s1t=()=>{const[e,t]=w.useState(null),[r,a]=w.useState(null),[n,i]=w.useState(!0),[o,l]=w.useState(null),[c,d]=w.useState(!1),[u,f]=w.useState(null),[A,m]=w.useState(!1),[g,x]=w.useState(null),[v,y]=w.useState(null);w.useEffect(()=>{const k=new URLSearchParams(window.location.search),T=k.get("auth"),L=k.get("userId");k.get("module"),T==="success"&&L&&(y("¡Autorización de Google Slides completada exitosamente!"),setTimeout(()=>{const F=window.location.pathname;window.history.replaceState({},document.title,F),y(null)},3e3))},[]),w.useEffect(()=>{const k=Zee(ln,async T=>{if(t(T),T)try{const L=await Bae(T.email);if(L){if(a(L),L.profile===Tt.SUBDIRECCION)d(!0);else if(L.profile===Tt.COORDINACION_TP){const F=localStorage.getItem(`lir-effective-profile-${T.email}`);F===Tt.PROFESORADO||F===Tt.COORDINACION_TP?(x(F),m(!1)):m(!0)}}else l("Usuario no encontrado en la base de datos. Contacte al administrador."),await IB()}catch{l("Error al conectar con la base de datos."),await IB()}else a(null),f(null),d(!1),l(null),m(!1),x(null);i(!1)});return()=>k()},[]);const N=async(k,T)=>{if(l(null),!k.trim()||!T.trim()){l("Por favor ingrese email y contraseña");return}try{await jEe(k.trim(),T)}catch(L){switch(L.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":l("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":l("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":l("Error de conexión. Verifique su internet.");break;default:l("Ocurrió un error al intentar iniciar sesión.")}}},E=async k=>{try{await kEe(k)}catch(T){console.error("Error al enviar email de recuperación:",T)}},B=k=>{f(k),d(!1)},_=()=>{(r==null?void 0:r.profile)===Tt.SUBDIRECCION?(d(!0),f(null)):(r==null?void 0:r.profile)===Tt.COORDINACION_TP&&(m(!0),x(null))},I=async()=>{try{await IB()}catch(k){console.error("Error al cerrar sesión:",k)}};if(n)return s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mb-4 flex justify-center items-center",children:s.jsx(tL,{})}),s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!e||!r)return s.jsx(A5e,{onLoginAttempt:N,onForgotPasswordRequest:E,error:o});if(c&&r.profile===Tt.SUBDIRECCION)return s.jsx(gee,{onSelectProfile:B,isAdminView:!0});if(A&&r.profile===Tt.COORDINACION_TP){const k=[Tt.COORDINACION_TP,Tt.PROFESORADO];return s.jsx(gee,{onSelectProfile:T=>{x(T),m(!1),e!=null&&e.email&&localStorage.setItem(`lir-effective-profile-${e.email}`,T)},isAdminView:!0,allowedProfiles:k})}const j=u||g||r.profile;return s.jsxs(s.Fragment,{children:[v&&s.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-green-500 text-white p-4 rounded-lg shadow-lg flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:"✅"}),s.jsx("span",{children:v})]}),s.jsx(n1t,{currentUser:{...r,profile:j},onLogout:I,onChangeProfile:r.profile===Tt.SUBDIRECCION||r.profile===Tt.COORDINACION_TP?_:void 0,canChangeProfile:r.profile===Tt.SUBDIRECCION||r.profile===Tt.COORDINACION_TP})]})},Pme=document.getElementById("root");if(!Pme)throw new Error("Could not find root element to mount to");const i1t=Zpe.createRoot(Pme);i1t.render(s.jsx(ft.StrictMode,{children:s.jsx(s1t,{})}));export{wn as _,l1t as c,Kl as g};
