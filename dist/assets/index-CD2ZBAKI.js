(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var LSe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function t5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lb={exports:{}},fp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nB;function KO(){if(nB)return fp;nB=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var i=null;if(a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),"key"in s){a={};for(var o in s)o!=="key"&&(a[o]=s[o])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:i,ref:s!==void 0?s:null,props:a}}return fp.Fragment=e,fp.jsx=n,fp.jsxs=n,fp}var rB;function qO(){return rB||(rB=1,lb.exports=KO()),lb.exports}var u=qO(),cb={exports:{}},Mn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sB;function WO(){if(sB)return Mn;sB=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(X){return X===null||typeof X!="object"?null:(X=h&&X[h]||X["@@iterator"],typeof X=="function"?X:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,b={};function E(X,de,j){this.props=X,this.context=de,this.refs=b,this.updater=j||g}E.prototype.isReactComponent={},E.prototype.setState=function(X,de){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,de,"setState")},E.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function B(){}B.prototype=E.prototype;function I(X,de,j){this.props=X,this.context=de,this.refs=b,this.updater=j||g}var k=I.prototype=new B;k.constructor=I,w(k,E.prototype),k.isPureReactComponent=!0;var F=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function S(X,de,j,W,J,ne){return j=ne.ref,{$$typeof:t,type:X,key:de,ref:j!==void 0?j:null,props:ne}}function N(X,de){return S(X.type,de,void 0,void 0,void 0,X.props)}function T(X){return typeof X=="object"&&X!==null&&X.$$typeof===t}function V(X){var de={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(j){return de[j]})}var M=/\/+/g;function U(X,de){return typeof X=="object"&&X!==null&&X.key!=null?V(""+X.key):de.toString(36)}function O(){}function G(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(O,O):(X.status="pending",X.then(function(de){X.status==="pending"&&(X.status="fulfilled",X.value=de)},function(de){X.status==="pending"&&(X.status="rejected",X.reason=de)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function ie(X,de,j,W,J){var ne=typeof X;(ne==="undefined"||ne==="boolean")&&(X=null);var oe=!1;if(X===null)oe=!0;else switch(ne){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(X.$$typeof){case t:case e:oe=!0;break;case d:return oe=X._init,ie(oe(X._payload),de,j,W,J)}}if(oe)return J=J(X),oe=W===""?"."+U(X,0):W,F(J)?(j="",oe!=null&&(j=oe.replace(M,"$&/")+"/"),ie(J,de,j,"",function(ge){return ge})):J!=null&&(T(J)&&(J=N(J,j+(J.key==null||X&&X.key===J.key?"":(""+J.key).replace(M,"$&/")+"/")+oe)),de.push(J)),1;oe=0;var ue=W===""?".":W+":";if(F(X))for(var me=0;me<X.length;me++)W=X[me],ne=ue+U(W,me),oe+=ie(W,de,j,ne,J);else if(me=p(X),typeof me=="function")for(X=me.call(X),me=0;!(W=X.next()).done;)W=W.value,ne=ue+U(W,me++),oe+=ie(W,de,j,ne,J);else if(ne==="object"){if(typeof X.then=="function")return ie(G(X),de,j,W,J);throw de=String(X),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.")}return oe}function K(X,de,j){if(X==null)return X;var W=[],J=0;return ie(X,W,"","",function(ne){return de.call(j,ne,J++)}),W}function q(X){if(X._status===-1){var de=X._result;de=de(),de.then(function(j){(X._status===0||X._status===-1)&&(X._status=1,X._result=j)},function(j){(X._status===0||X._status===-1)&&(X._status=2,X._result=j)}),X._status===-1&&(X._status=0,X._result=de)}if(X._status===1)return X._result.default;throw X._result}var se=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var de=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(de))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)};function Z(){}return Mn.Children={map:K,forEach:function(X,de,j){K(X,function(){de.apply(this,arguments)},j)},count:function(X){var de=0;return K(X,function(){de++}),de},toArray:function(X){return K(X,function(de){return de})||[]},only:function(X){if(!T(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},Mn.Component=E,Mn.Fragment=n,Mn.Profiler=s,Mn.PureComponent=I,Mn.StrictMode=r,Mn.Suspense=l,Mn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Mn.__COMPILER_RUNTIME={__proto__:null,c:function(X){return D.H.useMemoCache(X)}},Mn.cache=function(X){return function(){return X.apply(null,arguments)}},Mn.cloneElement=function(X,de,j){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var W=w({},X.props),J=X.key,ne=void 0;if(de!=null)for(oe in de.ref!==void 0&&(ne=void 0),de.key!==void 0&&(J=""+de.key),de)!P.call(de,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&de.ref===void 0||(W[oe]=de[oe]);var oe=arguments.length-2;if(oe===1)W.children=j;else if(1<oe){for(var ue=Array(oe),me=0;me<oe;me++)ue[me]=arguments[me+2];W.children=ue}return S(X.type,J,void 0,void 0,ne,W)},Mn.createContext=function(X){return X={$$typeof:i,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:a,_context:X},X},Mn.createElement=function(X,de,j){var W,J={},ne=null;if(de!=null)for(W in de.key!==void 0&&(ne=""+de.key),de)P.call(de,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(J[W]=de[W]);var oe=arguments.length-2;if(oe===1)J.children=j;else if(1<oe){for(var ue=Array(oe),me=0;me<oe;me++)ue[me]=arguments[me+2];J.children=ue}if(X&&X.defaultProps)for(W in oe=X.defaultProps,oe)J[W]===void 0&&(J[W]=oe[W]);return S(X,ne,void 0,void 0,null,J)},Mn.createRef=function(){return{current:null}},Mn.forwardRef=function(X){return{$$typeof:o,render:X}},Mn.isValidElement=T,Mn.lazy=function(X){return{$$typeof:d,_payload:{_status:-1,_result:X},_init:q}},Mn.memo=function(X,de){return{$$typeof:A,type:X,compare:de===void 0?null:de}},Mn.startTransition=function(X){var de=D.T,j={};D.T=j;try{var W=X(),J=D.S;J!==null&&J(j,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(Z,se)}catch(ne){se(ne)}finally{D.T=de}},Mn.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Mn.use=function(X){return D.H.use(X)},Mn.useActionState=function(X,de,j){return D.H.useActionState(X,de,j)},Mn.useCallback=function(X,de){return D.H.useCallback(X,de)},Mn.useContext=function(X){return D.H.useContext(X)},Mn.useDebugValue=function(){},Mn.useDeferredValue=function(X,de){return D.H.useDeferredValue(X,de)},Mn.useEffect=function(X,de,j){var W=D.H;if(typeof j=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(X,de)},Mn.useId=function(){return D.H.useId()},Mn.useImperativeHandle=function(X,de,j){return D.H.useImperativeHandle(X,de,j)},Mn.useInsertionEffect=function(X,de){return D.H.useInsertionEffect(X,de)},Mn.useLayoutEffect=function(X,de){return D.H.useLayoutEffect(X,de)},Mn.useMemo=function(X,de){return D.H.useMemo(X,de)},Mn.useOptimistic=function(X,de){return D.H.useOptimistic(X,de)},Mn.useReducer=function(X,de,j){return D.H.useReducer(X,de,j)},Mn.useRef=function(X){return D.H.useRef(X)},Mn.useState=function(X){return D.H.useState(X)},Mn.useSyncExternalStore=function(X,de,j){return D.H.useSyncExternalStore(X,de,j)},Mn.useTransition=function(){return D.H.useTransition()},Mn.version="19.1.1",Mn}var aB;function Zg(){return aB||(aB=1,cb.exports=WO()),cb.exports}var ee=Zg();const ut=t5(ee);var Ab={exports:{}},hp={},ub={exports:{}},db={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iB;function $O(){return iB||(iB=1,function(t){function e(K,q){var se=K.length;K.push(q);e:for(;0<se;){var Z=se-1>>>1,X=K[Z];if(0<s(X,q))K[Z]=q,K[se]=X,se=Z;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var q=K[0],se=K.pop();if(se!==q){K[0]=se;e:for(var Z=0,X=K.length,de=X>>>1;Z<de;){var j=2*(Z+1)-1,W=K[j],J=j+1,ne=K[J];if(0>s(W,se))J<X&&0>s(ne,W)?(K[Z]=ne,K[J]=se,Z=J):(K[Z]=W,K[j]=se,Z=j);else if(J<X&&0>s(ne,se))K[Z]=ne,K[J]=se,Z=J;else break e}}return q}function s(K,q){var se=K.sortIndex-q.sortIndex;return se!==0?se:K.id-q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var l=[],A=[],d=1,h=null,p=3,g=!1,w=!1,b=!1,E=!1,B=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function F(K){for(var q=n(A);q!==null;){if(q.callback===null)r(A);else if(q.startTime<=K)r(A),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(A)}}function D(K){if(b=!1,F(K),!w)if(n(l)!==null)w=!0,P||(P=!0,U());else{var q=n(A);q!==null&&ie(D,q.startTime-K)}}var P=!1,S=-1,N=5,T=-1;function V(){return E?!0:!(t.unstable_now()-T<N)}function M(){if(E=!1,P){var K=t.unstable_now();T=K;var q=!0;try{e:{w=!1,b&&(b=!1,I(S),S=-1),g=!0;var se=p;try{t:{for(F(K),h=n(l);h!==null&&!(h.expirationTime>K&&V());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,p=h.priorityLevel;var X=Z(h.expirationTime<=K);if(K=t.unstable_now(),typeof X=="function"){h.callback=X,F(K),q=!0;break t}h===n(l)&&r(l),F(K)}else r(l);h=n(l)}if(h!==null)q=!0;else{var de=n(A);de!==null&&ie(D,de.startTime-K),q=!1}}break e}finally{h=null,p=se,g=!1}q=void 0}}finally{q?U():P=!1}}}var U;if(typeof k=="function")U=function(){k(M)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,G=O.port2;O.port1.onmessage=M,U=function(){G.postMessage(null)}}else U=function(){B(M,0)};function ie(K,q){S=B(function(){K(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(K){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var se=p;p=q;try{return K()}finally{p=se}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(K,q){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var se=p;p=K;try{return q()}finally{p=se}},t.unstable_scheduleCallback=function(K,q,se){var Z=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Z+se:Z):se=Z,K){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=se+X,K={id:d++,callback:q,priorityLevel:K,startTime:se,expirationTime:X,sortIndex:-1},se>Z?(K.sortIndex=se,e(A,K),n(l)===null&&K===n(A)&&(b?(I(S),S=-1):b=!0,ie(D,se-Z))):(K.sortIndex=X,e(l,K),w||g||(w=!0,P||(P=!0,U()))),K},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(K){var q=p;return function(){var se=p;p=q;try{return K.apply(this,arguments)}finally{p=se}}}}(db)),db}var oB;function YO(){return oB||(oB=1,ub.exports=$O()),ub.exports}var fb={exports:{}},hi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lB;function JO(){if(lB)return hi;lB=1;var t=Zg();function e(l){var A="https://react.dev/errors/"+l;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)A+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(l,A,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:h==null?null:""+h,children:l,containerInfo:A,implementation:d}}var i=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,A){if(l==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}return hi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,hi.createPortal=function(l,A){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error(e(299));return a(l,A,null,d)},hi.flushSync=function(l){var A=i.T,d=r.p;try{if(i.T=null,r.p=2,l)return l()}finally{i.T=A,r.p=d,r.d.f()}},hi.preconnect=function(l,A){typeof l=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,r.d.C(l,A))},hi.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},hi.preinit=function(l,A){if(typeof l=="string"&&A&&typeof A.as=="string"){var d=A.as,h=o(d,A.crossOrigin),p=typeof A.integrity=="string"?A.integrity:void 0,g=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;d==="style"?r.d.S(l,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:g}):d==="script"&&r.d.X(l,{crossOrigin:h,integrity:p,fetchPriority:g,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},hi.preinitModule=function(l,A){if(typeof l=="string")if(typeof A=="object"&&A!==null){if(A.as==null||A.as==="script"){var d=o(A.as,A.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})}}else A==null&&r.d.M(l)},hi.preload=function(l,A){if(typeof l=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){var d=A.as,h=o(d,A.crossOrigin);r.d.L(l,d,{crossOrigin:h,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},hi.preloadModule=function(l,A){if(typeof l=="string")if(A){var d=o(A.as,A.crossOrigin);r.d.m(l,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:d,integrity:typeof A.integrity=="string"?A.integrity:void 0})}else r.d.m(l)},hi.requestFormReset=function(l){r.d.r(l)},hi.unstable_batchedUpdates=function(l,A){return l(A)},hi.useFormState=function(l,A,d){return i.H.useFormState(l,A,d)},hi.useFormStatus=function(){return i.H.useHostTransitionStatus()},hi.version="19.1.1",hi}var cB;function DR(){if(cB)return fb.exports;cB=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),fb.exports=JO(),fb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AB;function XO(){if(AB)return hp;AB=1;var t=YO(),e=Zg(),n=DR();function r(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function a(c){var f=c,m=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(m=f.return),c=f.return;while(c)}return f.tag===3?m:null}function i(c){if(c.tag===13){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function o(c){if(a(c)!==c)throw Error(r(188))}function l(c){var f=c.alternate;if(!f){if(f=a(c),f===null)throw Error(r(188));return f!==c?null:c}for(var m=c,y=f;;){var R=m.return;if(R===null)break;var Q=R.alternate;if(Q===null){if(y=R.return,y!==null){m=y;continue}break}if(R.child===Q.child){for(Q=R.child;Q;){if(Q===m)return o(R),c;if(Q===y)return o(R),f;Q=Q.sibling}throw Error(r(188))}if(m.return!==y.return)m=R,y=Q;else{for(var le=!1,we=R.child;we;){if(we===m){le=!0,m=R,y=Q;break}if(we===y){le=!0,y=R,m=Q;break}we=we.sibling}if(!le){for(we=Q.child;we;){if(we===m){le=!0,m=Q,y=R;break}if(we===y){le=!0,y=Q,m=R;break}we=we.sibling}if(!le)throw Error(r(189))}}if(m.alternate!==y)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?c:f}function A(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(f=A(c),f!==null)return f;c=c.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),k=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function U(c){return c===null||typeof c!="object"?null:(c=M&&c[M]||c["@@iterator"],typeof c=="function"?c:null)}var O=Symbol.for("react.client.reference");function G(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===O?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case w:return"Fragment";case E:return"Profiler";case b:return"StrictMode";case D:return"Suspense";case P:return"SuspenseList";case T:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case g:return"Portal";case k:return(c.displayName||"Context")+".Provider";case I:return(c._context.displayName||"Context")+".Consumer";case F:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case S:return f=c.displayName||null,f!==null?f:G(c.type)||"Memo";case N:f=c._payload,c=c._init;try{return G(c(f))}catch{}}return null}var ie=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},Z=[],X=-1;function de(c){return{current:c}}function j(c){0>X||(c.current=Z[X],Z[X]=null,X--)}function W(c,f){X++,Z[X]=c.current,c.current=f}var J=de(null),ne=de(null),oe=de(null),ue=de(null);function me(c,f){switch(W(oe,f),W(ne,c),W(J,null),f.nodeType){case 9:case 11:c=(c=f.documentElement)&&(c=c.namespaceURI)?kT(c):0;break;default:if(c=f.tagName,f=f.namespaceURI)f=kT(f),c=IT(f,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}j(J),W(J,c)}function ge(){j(J),j(ne),j(oe)}function ke(c){c.memoizedState!==null&&W(ue,c);var f=J.current,m=IT(f,c.type);f!==m&&(W(ne,c),W(J,m))}function ve(c){ne.current===c&&(j(J),j(ne)),ue.current===c&&(j(ue),lp._currentValue=se)}var ae=Object.prototype.hasOwnProperty,Re=t.unstable_scheduleCallback,Je=t.unstable_cancelCallback,De=t.unstable_shouldYield,Ee=t.unstable_requestPaint,Ge=t.unstable_now,tt=t.unstable_getCurrentPriorityLevel,it=t.unstable_ImmediatePriority,mt=t.unstable_UserBlockingPriority,Ct=t.unstable_NormalPriority,At=t.unstable_LowPriority,Nt=t.unstable_IdlePriority,It=t.log,qt=t.unstable_setDisableYieldValue,Lt=null,Vt=null;function Yt(c){if(typeof It=="function"&&qt(c),Vt&&typeof Vt.setStrictMode=="function")try{Vt.setStrictMode(Lt,c)}catch{}}var Mt=Math.clz32?Math.clz32:xn,kt=Math.log,gt=Math.LN2;function xn(c){return c>>>=0,c===0?32:31-(kt(c)/gt|0)|0}var Wt=256,rr=4194304;function mn(c){var f=c&42;if(f!==0)return f;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function kn(c,f,m){var y=c.pendingLanes;if(y===0)return 0;var R=0,Q=c.suspendedLanes,le=c.pingedLanes;c=c.warmLanes;var we=y&134217727;return we!==0?(y=we&~Q,y!==0?R=mn(y):(le&=we,le!==0?R=mn(le):m||(m=we&~c,m!==0&&(R=mn(m))))):(we=y&~Q,we!==0?R=mn(we):le!==0?R=mn(le):m||(m=y&~c,m!==0&&(R=mn(m)))),R===0?0:f!==0&&f!==R&&(f&Q)===0&&(Q=R&-R,m=f&-f,Q>=m||Q===32&&(m&4194048)!==0)?f:R}function Er(c,f){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&f)===0}function Tn(c,f){switch(c){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zs(){var c=Wt;return Wt<<=1,(Wt&4194048)===0&&(Wt=256),c}function Jn(){var c=rr;return rr<<=1,(rr&62914560)===0&&(rr=4194304),c}function qr(c){for(var f=[],m=0;31>m;m++)f.push(c);return f}function as(c,f){c.pendingLanes|=f,f!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function Rn(c,f,m,y,R,Q){var le=c.pendingLanes;c.pendingLanes=m,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=m,c.entangledLanes&=m,c.errorRecoveryDisabledLanes&=m,c.shellSuspendCounter=0;var we=c.entanglements,Fe=c.expirationTimes,et=c.hiddenUpdates;for(m=le&~m;0<m;){var dt=31-Mt(m),yt=1<<dt;we[dt]=0,Fe[dt]=-1;var rt=et[dt];if(rt!==null)for(et[dt]=null,dt=0;dt<rt.length;dt++){var st=rt[dt];st!==null&&(st.lane&=-536870913)}m&=~yt}y!==0&&Zt(c,y,0),Q!==0&&R===0&&c.tag!==0&&(c.suspendedLanes|=Q&~(le&~f))}function Zt(c,f,m){c.pendingLanes|=f,c.suspendedLanes&=~f;var y=31-Mt(f);c.entangledLanes|=f,c.entanglements[y]=c.entanglements[y]|1073741824|m&4194090}function jn(c,f){var m=c.entangledLanes|=f;for(c=c.entanglements;m;){var y=31-Mt(m),R=1<<y;R&f|c[y]&f&&(c[y]|=f),m&=~R}}function ea(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function jr(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function us(){var c=q.p;return c!==0?c:(c=window.event,c===void 0?32:YT(c.type))}function ma(c,f){var m=q.p;try{return q.p=c,f()}finally{q.p=m}}var Ht=Math.random().toString(36).slice(2),sr="__reactFiber$"+Ht,Xn="__reactProps$"+Ht,_r="__reactContainer$"+Ht,Nr="__reactEvents$"+Ht,Or="__reactListeners$"+Ht,fe="__reactHandles$"+Ht,Be="__reactResources$"+Ht,Ce="__reactMarker$"+Ht;function _e(c){delete c[sr],delete c[Xn],delete c[Nr],delete c[Or],delete c[fe]}function Se(c){var f=c[sr];if(f)return f;for(var m=c.parentNode;m;){if(f=m[_r]||m[sr]){if(m=f.alternate,f.child!==null||m!==null&&m.child!==null)for(c=UT(c);c!==null;){if(m=c[sr])return m;c=UT(c)}return f}c=m,m=c.parentNode}return null}function Ne(c){if(c=c[sr]||c[_r]){var f=c.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return c}return null}function Ke(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c.stateNode;throw Error(r(33))}function nt(c){var f=c[Be];return f||(f=c[Be]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Qe(c){c[Ce]=!0}var We=new Set,Xe={};function vt(c,f){Bt(c,f),Bt(c+"Capture",f)}function Bt(c,f){for(Xe[c]=f,c=0;c<f.length;c++)We.add(f[c])}var Pt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),St={},Ft={};function cn(c){return ae.call(Ft,c)?!0:ae.call(St,c)?!1:Pt.test(c)?Ft[c]=!0:(St[c]=!0,!1)}function Dn(c,f,m){if(cn(f))if(m===null)c.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":c.removeAttribute(f);return;case"boolean":var y=f.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){c.removeAttribute(f);return}}c.setAttribute(f,""+m)}}function Un(c,f,m){if(m===null)c.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttribute(f,""+m)}}function On(c,f,m,y){if(y===null)c.removeAttribute(m);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(m);return}c.setAttributeNS(f,m,""+y)}}var bs,ri;function Cs(c){if(bs===void 0)try{throw Error()}catch(m){var f=m.stack.trim().match(/\n( *(at )?)/);bs=f&&f[1]||"",ri=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bs+c+ri}var ta=!1;function Us(c,f){if(!c||ta)return"";ta=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(f){var yt=function(){throw Error()};if(Object.defineProperty(yt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(yt,[])}catch(st){var rt=st}Reflect.construct(c,[],yt)}else{try{yt.call()}catch(st){rt=st}c.call(yt.prototype)}}else{try{throw Error()}catch(st){rt=st}(yt=c())&&typeof yt.catch=="function"&&yt.catch(function(){})}}catch(st){if(st&&rt&&typeof st.stack=="string")return[st.stack,rt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Q=y.DetermineComponentFrameRoot(),le=Q[0],we=Q[1];if(le&&we){var Fe=le.split(`
`),et=we.split(`
`);for(R=y=0;y<Fe.length&&!Fe[y].includes("DetermineComponentFrameRoot");)y++;for(;R<et.length&&!et[R].includes("DetermineComponentFrameRoot");)R++;if(y===Fe.length||R===et.length)for(y=Fe.length-1,R=et.length-1;1<=y&&0<=R&&Fe[y]!==et[R];)R--;for(;1<=y&&0<=R;y--,R--)if(Fe[y]!==et[R]){if(y!==1||R!==1)do if(y--,R--,0>R||Fe[y]!==et[R]){var dt=`
`+Fe[y].replace(" at new "," at ");return c.displayName&&dt.includes("<anonymous>")&&(dt=dt.replace("<anonymous>",c.displayName)),dt}while(1<=y&&0<=R);break}}}finally{ta=!1,Error.prepareStackTrace=m}return(m=c?c.displayName||c.name:"")?Cs(m):""}function pa(c){switch(c.tag){case 26:case 27:case 5:return Cs(c.type);case 16:return Cs("Lazy");case 13:return Cs("Suspense");case 19:return Cs("SuspenseList");case 0:case 15:return Us(c.type,!1);case 11:return Us(c.type.render,!1);case 1:return Us(c.type,!0);case 31:return Cs("Activity");default:return""}}function Qr(c){try{var f="";do f+=pa(c),c=c.return;while(c);return f}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function na(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function vc(c){var f=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function bu(c){var f=vc(c)?"checked":"value",m=Object.getOwnPropertyDescriptor(c.constructor.prototype,f),y=""+c[f];if(!c.hasOwnProperty(f)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var R=m.get,Q=m.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return R.call(this)},set:function(le){y=""+le,Q.call(this,le)}}),Object.defineProperty(c,f,{enumerable:m.enumerable}),{getValue:function(){return y},setValue:function(le){y=""+le},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}function zo(c){c._valueTracker||(c._valueTracker=bu(c))}function wA(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var m=f.getValue(),y="";return c&&(y=vc(c)?c.checked?"true":"false":c.value),c=y,c!==m?(f.setValue(c),!0):!1}function ga(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var yc=/[\n"\\]/g;function ar(c){return c.replace(yc,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function xa(c,f,m,y,R,Q,le,we){c.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?c.type=le:c.removeAttribute("type"),f!=null?le==="number"?(f===0&&c.value===""||c.value!=f)&&(c.value=""+na(f)):c.value!==""+na(f)&&(c.value=""+na(f)):le!=="submit"&&le!=="reset"||c.removeAttribute("value"),f!=null?qo(c,le,na(f)):m!=null?qo(c,le,na(m)):y!=null&&c.removeAttribute("value"),R==null&&Q!=null&&(c.defaultChecked=!!Q),R!=null&&(c.checked=R&&typeof R!="function"&&typeof R!="symbol"),we!=null&&typeof we!="function"&&typeof we!="symbol"&&typeof we!="boolean"?c.name=""+na(we):c.removeAttribute("name")}function Ko(c,f,m,y,R,Q,le,we){if(Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"&&(c.type=Q),f!=null||m!=null){if(!(Q!=="submit"&&Q!=="reset"||f!=null))return;m=m!=null?""+na(m):"",f=f!=null?""+na(f):m,we||f===c.value||(c.value=f),c.defaultValue=f}y=y??R,y=typeof y!="function"&&typeof y!="symbol"&&!!y,c.checked=we?c.checked:!!y,c.defaultChecked=!!y,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(c.name=le)}function qo(c,f,m){f==="number"&&ga(c.ownerDocument)===c||c.defaultValue===""+m||(c.defaultValue=""+m)}function qi(c,f,m,y){if(c=c.options,f){f={};for(var R=0;R<m.length;R++)f["$"+m[R]]=!0;for(m=0;m<c.length;m++)R=f.hasOwnProperty("$"+c[m].value),c[m].selected!==R&&(c[m].selected=R),R&&y&&(c[m].defaultSelected=!0)}else{for(m=""+na(m),f=null,R=0;R<c.length;R++){if(c[R].value===m){c[R].selected=!0,y&&(c[R].defaultSelected=!0);return}f!==null||c[R].disabled||(f=c[R])}f!==null&&(f.selected=!0)}}function gr(c,f,m){if(f!=null&&(f=""+na(f),f!==c.value&&(c.value=f),m==null)){c.defaultValue!==f&&(c.defaultValue=f);return}c.defaultValue=m!=null?""+na(m):""}function Wo(c,f,m,y){if(f==null){if(y!=null){if(m!=null)throw Error(r(92));if(ie(y)){if(1<y.length)throw Error(r(93));y=y[0]}m=y}m==null&&(m=""),f=m}m=na(f),c.defaultValue=m,y=c.textContent,y===m&&y!==""&&y!==null&&(c.value=y)}function si(c,f){if(f){var m=c.firstChild;if(m&&m===c.lastChild&&m.nodeType===3){m.nodeValue=f;return}}c.textContent=f}var xo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cu(c,f,m){var y=f.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?y?c.setProperty(f,""):f==="float"?c.cssFloat="":c[f]="":y?c.setProperty(f,m):typeof m!="number"||m===0||xo.has(f)?f==="float"?c.cssFloat=m:c[f]=(""+m).trim():c[f]=m+"px"}function bA(c,f,m){if(f!=null&&typeof f!="object")throw Error(r(62));if(c=c.style,m!=null){for(var y in m)!m.hasOwnProperty(y)||f!=null&&f.hasOwnProperty(y)||(y.indexOf("--")===0?c.setProperty(y,""):y==="float"?c.cssFloat="":c[y]="");for(var R in f)y=f[R],f.hasOwnProperty(R)&&m[R]!==y&&Cu(c,R,y)}else for(var Q in f)f.hasOwnProperty(Q)&&Cu(c,Q,f[Q])}function CA(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yo(c){return wc.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var Wi=null;function kr(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var wo=null,$i=null;function un(c){var f=Ne(c);if(f&&(c=f.stateNode)){var m=c[Xn]||null;e:switch(c=f.stateNode,f.type){case"input":if(xa(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),f=m.name,m.type==="radio"&&f!=null){for(m=c;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+ar(""+f)+'"][type="radio"]'),f=0;f<m.length;f++){var y=m[f];if(y!==c&&y.form===c.form){var R=y[Xn]||null;if(!R)throw Error(r(90));xa(y,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(f=0;f<m.length;f++)y=m[f],y.form===c.form&&wA(y)}break e;case"textarea":gr(c,m.value,m.defaultValue);break e;case"select":f=m.value,f!=null&&qi(c,!!m.multiple,f,!1)}}}var Yi=!1;function Eu(c,f,m){if(Yi)return c(f,m);Yi=!0;try{var y=c(f);return y}finally{if(Yi=!1,(wo!==null||$i!==null)&&(e1(),wo&&(f=wo,c=$i,$i=wo=null,un(f),c)))for(f=0;f<c.length;f++)un(c[f])}}function Ba(c,f){var m=c.stateNode;if(m===null)return null;var y=m[Xn]||null;if(y===null)return null;m=y[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(c=c.type,y=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!y;break e;default:c=!1}if(c)return null;if(m&&typeof m!="function")throw Error(r(231,f,typeof m));return m}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Va=!1;if(ai)try{var Ji={};Object.defineProperty(Ji,"passive",{get:function(){Va=!0}}),window.addEventListener("test",Ji,Ji),window.removeEventListener("test",Ji,Ji)}catch{Va=!1}var ii=null,$o=null,bo=null;function EA(){if(bo)return bo;var c,f=$o,m=f.length,y,R="value"in ii?ii.value:ii.textContent,Q=R.length;for(c=0;c<m&&f[c]===R[c];c++);var le=m-c;for(y=1;y<=le&&f[m-y]===R[Q-y];y++);return bo=R.slice(c,1<y?1-y:void 0)}function oi(c){var f=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&f===13&&(c=13)):c=f,c===10&&(c=13),32<=c||c===13?c:0}function Na(){return!0}function Xi(){return!1}function Es(c){function f(m,y,R,Q,le){this._reactName=m,this._targetInst=R,this.type=y,this.nativeEvent=Q,this.target=le,this.currentTarget=null;for(var we in c)c.hasOwnProperty(we)&&(m=c[we],this[we]=m?m(Q):Q[we]);return this.isDefaultPrevented=(Q.defaultPrevented!=null?Q.defaultPrevented:Q.returnValue===!1)?Na:Xi,this.isPropagationStopped=Xi,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Na)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Na)},persist:function(){},isPersistent:Na}),f}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yo=Es(Kn),Zi=d({},Kn,{view:0,detail:0}),_A=Es(Zi),Il,Fl,Li,ka=d({},Zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:el,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Li&&(Li&&c.type==="mousemove"?(Il=c.screenX-Li.screenX,Fl=c.screenY-Li.screenY):Fl=Il=0,Li=c),Il)},movementY:function(c){return"movementY"in c?c.movementY:Fl}}),_s=Es(ka),_u=d({},ka,{dataTransfer:0}),Jo=Es(_u),va=d({},Zi,{relatedTarget:0}),Xo=Es(va),Co=d({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),bc=Es(Co),Rl=d({},Kn,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Cc=Es(Rl),SA=d({},Kn,{data:0}),Dl=Es(SA),Zo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ul={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ec={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ll(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):(c=Ec[c])?!!f[c]:!1}function el(){return Ll}var Su=d({},Zi,{key:function(c){if(c.key){var f=Zo[c.key]||c.key;if(f!=="Unidentified")return f}return c.type==="keypress"?(c=oi(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?Ul[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:el,charCode:function(c){return c.type==="keypress"?oi(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?oi(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),Eo=Es(Su),tl=d({},ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ml=Es(tl),Ia=d({},Zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:el}),_c=Es(Ia),H=d({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ae=Es(H),Ie=d({},ka,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Ue=Es(Ie),He=d({},Kn,{newState:0,oldState:0}),ot=Es(He),Et=[9,13,27,32],jt=ai&&"CompositionEvent"in window,_=null;ai&&"documentMode"in document&&(_=document.documentMode);var Y=ai&&"TextEvent"in window&&!_,re=ai&&(!jt||_&&8<_&&11>=_),ye=" ",Oe=!1;function Ze(c,f){switch(c){case"keyup":return Et.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _t(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var dn=!1;function qn(c,f){switch(c){case"compositionend":return _t(f);case"keypress":return f.which!==32?null:(Oe=!0,ye);case"textInput":return c=f.data,c===ye&&Oe?null:c;default:return null}}function _n(c,f){if(dn)return c==="compositionend"||!jt&&Ze(c,f)?(c=EA(),bo=$o=ii=null,dn=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return re&&f.locale!=="ko"?null:f.data;default:return null}}var xr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sr(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f==="input"?!!xr[c.type]:f==="textarea"}function eo(c,f,m,y){wo?$i?$i.push(y):$i=[y]:wo=y,f=i1(f,"onChange"),0<f.length&&(m=new Yo("onChange","change",null,m,y),c.push({event:m,listeners:f}))}var ds=null,li=null;function nl(c){_T(c,0)}function Sc(c){var f=Ke(c);if(wA(f))return c}function Tu(c,f){if(c==="change")return f}var TA=!1;if(ai){var Ls;if(ai){var Tc="oninput"in document;if(!Tc){var BA=document.createElement("div");BA.setAttribute("oninput","return;"),Tc=typeof BA.oninput=="function"}Ls=Tc}else Ls=!1;TA=Ls&&(!document.documentMode||9<document.documentMode)}function NA(){ds&&(ds.detachEvent("onpropertychange",Bu),li=ds=null)}function Bu(c){if(c.propertyName==="value"&&Sc(li)){var f=[];eo(f,li,c,kr(c)),Eu(nl,f)}}function ci(c,f,m){c==="focusin"?(NA(),ds=f,li=m,ds.attachEvent("onpropertychange",Bu)):c==="focusout"&&NA()}function Nm(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Sc(li)}function tf(c,f){if(c==="click")return Sc(f)}function yh(c,f){if(c==="input"||c==="change")return Sc(f)}function to(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var ra=typeof Object.is=="function"?Object.is:to;function Bc(c,f){if(ra(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var m=Object.keys(c),y=Object.keys(f);if(m.length!==y.length)return!1;for(y=0;y<m.length;y++){var R=m[y];if(!ae.call(f,R)||!ra(c[R],f[R]))return!1}return!0}function nf(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Pl(c,f){var m=nf(c);c=0;for(var y;m;){if(m.nodeType===3){if(y=c+m.textContent.length,c<=f&&y>=f)return{node:m,offset:f-c};c=y}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=nf(m)}}function Nc(c,f){return c&&f?c===f?!0:c&&c.nodeType===3?!1:f&&f.nodeType===3?Nc(c,f.parentNode):"contains"in c?c.contains(f):c.compareDocumentPosition?!!(c.compareDocumentPosition(f)&16):!1:!1}function Ga(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var f=ga(c.document);f instanceof c.HTMLIFrameElement;){try{var m=typeof f.contentWindow.location.href=="string"}catch{m=!1}if(m)c=f.contentWindow;else break;f=ga(c.document)}return f}function ya(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&(f==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||f==="textarea"||c.contentEditable==="true")}var kc=ai&&"documentMode"in document&&11>=document.documentMode,Ai=null,_o=null,rl=null,So=!1;function is(c,f,m){var y=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;So||Ai==null||Ai!==ga(y)||(y=Ai,"selectionStart"in y&&ya(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),rl&&Bc(rl,y)||(rl=y,y=i1(_o,"onSelect"),0<y.length&&(f=new Yo("onSelect","select",null,f,m),c.push({event:f,listeners:y}),f.target=Ai)))}function To(c,f){var m={};return m[c.toLowerCase()]=f.toLowerCase(),m["Webkit"+c]="webkit"+f,m["Moz"+c]="moz"+f,m}var Ss={animationend:To("Animation","AnimationEnd"),animationiteration:To("Animation","AnimationIteration"),animationstart:To("Animation","AnimationStart"),transitionrun:To("Transition","TransitionRun"),transitionstart:To("Transition","TransitionStart"),transitioncancel:To("Transition","TransitionCancel"),transitionend:To("Transition","TransitionEnd")},ui={},kA={};ai&&(kA=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function sl(c){if(ui[c])return ui[c];if(!Ss[c])return c;var f=Ss[c],m;for(m in f)if(f.hasOwnProperty(m)&&m in kA)return ui[c]=f[m];return c}var Nu=sl("animationend"),Ic=sl("animationiteration"),Fc=sl("animationstart"),Rc=sl("transitionrun"),IA=sl("transitionstart"),ku=sl("transitioncancel"),Dc=sl("transitionend"),jl=new Map,FA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");FA.push("scrollEnd");function os(c,f){jl.set(c,f),vt(f,[c])}var Mi=new WeakMap;function Hn(c,f){if(typeof c=="object"&&c!==null){var m=Mi.get(c);return m!==void 0?m:(f={value:c,source:f,stack:Qr(f)},Mi.set(c,f),f)}return{value:c,source:f,stack:Qr(f)}}var Vn=[],Hr=0,fs=0;function no(){for(var c=Hr,f=fs=Hr=0;f<c;){var m=Vn[f];Vn[f++]=null;var y=Vn[f];Vn[f++]=null;var R=Vn[f];Vn[f++]=null;var Q=Vn[f];if(Vn[f++]=null,y!==null&&R!==null){var le=y.pending;le===null?R.next=R:(R.next=le.next,le.next=R),y.pending=R}Q!==0&&wh(m,R,Q)}}function Uc(c,f,m,y){Vn[Hr++]=c,Vn[Hr++]=f,Vn[Hr++]=m,Vn[Hr++]=y,fs|=y,c.lanes|=y,c=c.alternate,c!==null&&(c.lanes|=y)}function Lc(c,f,m,y){return Uc(c,f,m,y),RA(c)}function Ol(c,f){return Uc(c,null,null,f),RA(c)}function wh(c,f,m){c.lanes|=m;var y=c.alternate;y!==null&&(y.lanes|=m);for(var R=!1,Q=c.return;Q!==null;)Q.childLanes|=m,y=Q.alternate,y!==null&&(y.childLanes|=m),Q.tag===22&&(c=Q.stateNode,c===null||c._visibility&1||(R=!0)),c=Q,Q=Q.return;return c.tag===3?(Q=c.stateNode,R&&f!==null&&(R=31-Mt(m),c=Q.hiddenUpdates,y=c[R],y===null?c[R]=[f]:y.push(f),f.lane=m|536870912),Q):null}function RA(c){if(50<ep)throw ep=0,Fw=null,Error(r(185));for(var f=c.return;f!==null;)c=f,f=c.return;return c.tag===3?c.stateNode:null}var sa={};function ro(c,f,m,y){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fa(c,f,m,y){return new ro(c,f,m,y)}function Iu(c){return c=c.prototype,!(!c||!c.isReactComponent)}function al(c,f){var m=c.alternate;return m===null?(m=Fa(c.tag,f,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=f,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&65011712,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,f=c.dependencies,m.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m.refCleanup=c.refCleanup,m}function rf(c,f){c.flags&=65011714;var m=c.alternate;return m===null?(c.childLanes=0,c.lanes=f,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=m.childLanes,c.lanes=m.lanes,c.child=m.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=m.memoizedProps,c.memoizedState=m.memoizedState,c.updateQueue=m.updateQueue,c.type=m.type,f=m.dependencies,c.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),c}function DA(c,f,m,y,R,Q){var le=0;if(y=c,typeof c=="function")Iu(c)&&(le=1);else if(typeof c=="string")le=RO(c,m,J.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case T:return c=Fa(31,m,f,R),c.elementType=T,c.lanes=Q,c;case w:return Ql(m.children,R,Q,f);case b:le=8,R|=24;break;case E:return c=Fa(12,m,f,R|2),c.elementType=E,c.lanes=Q,c;case D:return c=Fa(13,m,f,R),c.elementType=D,c.lanes=Q,c;case P:return c=Fa(19,m,f,R),c.elementType=P,c.lanes=Q,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case B:case k:le=10;break e;case I:le=9;break e;case F:le=11;break e;case S:le=14;break e;case N:le=16,y=null;break e}le=29,m=Error(r(130,c===null?"null":typeof c,"")),y=null}return f=Fa(le,m,f,R),f.elementType=c,f.type=y,f.lanes=Q,f}function Ql(c,f,m,y){return c=Fa(7,c,y,f),c.lanes=m,c}function bh(c,f,m){return c=Fa(6,c,null,f),c.lanes=m,c}function sf(c,f,m){return f=Fa(4,c.children!==null?c.children:[],c.key,f),f.lanes=m,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}var Mc=[],Hl=0,Fu=null,Ch=0,so=[],Pi=0,UA=null,Vl=1,Gl="";function LA(c,f){Mc[Hl++]=Ch,Mc[Hl++]=Fu,Fu=c,Ch=f}function Ex(c,f,m){so[Pi++]=Vl,so[Pi++]=Gl,so[Pi++]=UA,UA=c;var y=Vl;c=Gl;var R=32-Mt(y)-1;y&=~(1<<R),m+=1;var Q=32-Mt(f)+R;if(30<Q){var le=R-R%5;Q=(y&(1<<le)-1).toString(32),y>>=le,R-=le,Vl=1<<32-Mt(f)+R|m<<R|y,Gl=Q+c}else Vl=1<<Q|m<<R|y,Gl=c}function af(c){c.return!==null&&(LA(c,1),Ex(c,1,0))}function of(c){for(;c===Fu;)Fu=Mc[--Hl],Mc[Hl]=null,Ch=Mc[--Hl],Mc[Hl]=null;for(;c===UA;)UA=so[--Pi],so[Pi]=null,Gl=so[--Pi],so[Pi]=null,Vl=so[--Pi],so[Pi]=null}var Ms=null,ls=null,fr=!1,Pc=null,il=!1,km=Error(r(519));function MA(c){var f=Error(r(418,""));throw Ru(Hn(f,c)),km}function _x(c){var f=c.stateNode,m=c.type,y=c.memoizedProps;switch(f[sr]=c,f[Xn]=y,m){case"dialog":er("cancel",f),er("close",f);break;case"iframe":case"object":case"embed":er("load",f);break;case"video":case"audio":for(m=0;m<np.length;m++)er(np[m],f);break;case"source":er("error",f);break;case"img":case"image":case"link":er("error",f),er("load",f);break;case"details":er("toggle",f);break;case"input":er("invalid",f),Ko(f,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),zo(f);break;case"select":er("invalid",f);break;case"textarea":er("invalid",f),Wo(f,y.value,y.defaultValue,y.children),zo(f)}m=y.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||f.textContent===""+m||y.suppressHydrationWarning===!0||NT(f.textContent,m)?(y.popover!=null&&(er("beforetoggle",f),er("toggle",f)),y.onScroll!=null&&er("scroll",f),y.onScrollEnd!=null&&er("scrollend",f),y.onClick!=null&&(f.onclick=o1),f=!0):f=!1,f||MA(c)}function zl(c){for(Ms=c.return;Ms;)switch(Ms.tag){case 5:case 13:il=!1;return;case 27:case 3:il=!0;return;default:Ms=Ms.return}}function za(c){if(c!==Ms)return!1;if(!fr)return zl(c),fr=!0,!1;var f=c.tag,m;if((m=f!==3&&f!==27)&&((m=f===5)&&(m=c.type,m=!(m!=="form"&&m!=="button")||Ww(c.type,c.memoizedProps)),m=!m),m&&ls&&MA(c),zl(c),f===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,f=0;c;){if(c.nodeType===8)if(m=c.data,m==="/$"){if(f===0){ls=Zl(c.nextSibling);break e}f--}else m!=="$"&&m!=="$!"&&m!=="$?"||f++;c=c.nextSibling}ls=null}}else f===27?(f=ls,Yu(c.type)?(c=Xw,Xw=null,ls=c):ls=f):ls=Ms?Zl(c.stateNode.nextSibling):null;return!0}function ji(){ls=Ms=null,fr=!1}function Sx(){var c=Pc;return c!==null&&(oo===null?oo=c:oo.push.apply(oo,c),Pc=null),c}function Ru(c){Pc===null?Pc=[c]:Pc.push(c)}var ol=de(null),aa=null,Kl=null;function jc(c,f,m){W(ol,f._currentValue),f._currentValue=m}function ll(c){c._currentValue=ol.current,j(ol)}function Eh(c,f,m){for(;c!==null;){var y=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,y!==null&&(y.childLanes|=f)):y!==null&&(y.childLanes&f)!==f&&(y.childLanes|=f),c===m)break;c=c.return}}function _h(c,f,m,y){var R=c.child;for(R!==null&&(R.return=c);R!==null;){var Q=R.dependencies;if(Q!==null){var le=R.child;Q=Q.firstContext;e:for(;Q!==null;){var we=Q;Q=R;for(var Fe=0;Fe<f.length;Fe++)if(we.context===f[Fe]){Q.lanes|=m,we=Q.alternate,we!==null&&(we.lanes|=m),Eh(Q.return,m,c),y||(le=null);break e}Q=we.next}}else if(R.tag===18){if(le=R.return,le===null)throw Error(r(341));le.lanes|=m,Q=le.alternate,Q!==null&&(Q.lanes|=m),Eh(le,m,c),le=null}else le=R.child;if(le!==null)le.return=R;else for(le=R;le!==null;){if(le===c){le=null;break}if(R=le.sibling,R!==null){R.return=le.return,le=R;break}le=le.return}R=le}}function Du(c,f,m,y){c=null;for(var R=f,Q=!1;R!==null;){if(!Q){if((R.flags&524288)!==0)Q=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var le=R.alternate;if(le===null)throw Error(r(387));if(le=le.memoizedProps,le!==null){var we=R.type;ra(R.pendingProps.value,le.value)||(c!==null?c.push(we):c=[we])}}else if(R===ue.current){if(le=R.alternate,le===null)throw Error(r(387));le.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(c!==null?c.push(lp):c=[lp])}R=R.return}c!==null&&_h(f,c,m,y),f.flags|=262144}function Sh(c){for(c=c.firstContext;c!==null;){if(!ra(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function cl(c){aa=c,Kl=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Ps(c){return Th(aa,c)}function Oc(c,f){return aa===null&&cl(c),Th(c,f)}function Th(c,f){var m=f._currentValue;if(f={context:f,memoizedValue:m,next:null},Kl===null){if(c===null)throw Error(r(308));Kl=f,c.dependencies={lanes:0,firstContext:f},c.flags|=524288}else Kl=Kl.next=f;return m}var rw=typeof AbortController<"u"?AbortController:function(){var c=[],f=this.signal={aborted:!1,addEventListener:function(m,y){c.push(y)}};this.abort=function(){f.aborted=!0,c.forEach(function(m){return m()})}},Tx=t.unstable_scheduleCallback,sw=t.unstable_NormalPriority,js={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Im(){return{controller:new rw,data:new Map,refCount:0}}function lf(c){c.refCount--,c.refCount===0&&Tx(sw,function(){c.controller.abort()})}var cf=null,Fm=0,PA=0,ql=null;function aw(c,f){if(cf===null){var m=cf=[];Fm=0,PA=jw(),ql={status:"pending",value:void 0,then:function(y){m.push(y)}}}return Fm++,f.then(Bx,Bx),f}function Bx(){if(--Fm===0&&cf!==null){ql!==null&&(ql.status="fulfilled");var c=cf;cf=null,PA=0,ql=null;for(var f=0;f<c.length;f++)(0,c[f])()}}function Nx(c,f){var m=[],y={status:"pending",value:null,reason:null,then:function(R){m.push(R)}};return c.then(function(){y.status="fulfilled",y.value=f;for(var R=0;R<m.length;R++)(0,m[R])(f)},function(R){for(y.status="rejected",y.reason=R,R=0;R<m.length;R++)(0,m[R])(void 0)}),y}var C=K.S;K.S=function(c,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&aw(c,f),C!==null&&C(c,f)};var L=de(null);function z(){var c=L.current;return c!==null?c:Jr.pooledCache}function te(c,f){f===null?W(L,L.current):W(L,f.pool)}function ce(){var c=z();return c===null?null:{parent:js._currentValue,pool:c}}var he=Error(r(460)),pe=Error(r(474)),xe=Error(r(542)),be={then:function(){}};function Te(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Le(){}function Ye(c,f,m){switch(m=c[m],m===void 0?c.push(f):m!==f&&(f.then(Le,Le),f=m),f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,pt(c),c;default:if(typeof f.status=="string")f.then(Le,Le);else{if(c=Jr,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=f,c.status="pending",c.then(function(y){if(f.status==="pending"){var R=f;R.status="fulfilled",R.value=y}},function(y){if(f.status==="pending"){var R=f;R.status="rejected",R.reason=y}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,pt(c),c}throw qe=f,he}}var qe=null;function Ve(){if(qe===null)throw Error(r(459));var c=qe;return qe=null,c}function pt(c){if(c===he||c===xe)throw Error(r(483))}var at=!1;function Me(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function je(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function ct(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function xt(c,f,m){var y=c.updateQueue;if(y===null)return null;if(y=y.shared,(Fr&2)!==0){var R=y.pending;return R===null?f.next=f:(f.next=R.next,R.next=f),y.pending=f,f=RA(c),wh(c,null,m),f}return Uc(c,y,f,m),RA(c)}function ft(c,f,m){if(f=f.updateQueue,f!==null&&(f=f.shared,(m&4194048)!==0)){var y=f.lanes;y&=c.pendingLanes,m|=y,f.lanes=m,jn(c,m)}}function Gt(c,f){var m=c.updateQueue,y=c.alternate;if(y!==null&&(y=y.updateQueue,m===y)){var R=null,Q=null;if(m=m.firstBaseUpdate,m!==null){do{var le={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};Q===null?R=Q=le:Q=Q.next=le,m=m.next}while(m!==null);Q===null?R=Q=f:Q=Q.next=f}else R=Q=f;m={baseState:y.baseState,firstBaseUpdate:R,lastBaseUpdate:Q,shared:y.shared,callbacks:y.callbacks},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=f:c.next=f,m.lastBaseUpdate=f}var Ut=!1;function en(){if(Ut){var c=ql;if(c!==null)throw c}}function Ot(c,f,m,y){Ut=!1;var R=c.updateQueue;at=!1;var Q=R.firstBaseUpdate,le=R.lastBaseUpdate,we=R.shared.pending;if(we!==null){R.shared.pending=null;var Fe=we,et=Fe.next;Fe.next=null,le===null?Q=et:le.next=et,le=Fe;var dt=c.alternate;dt!==null&&(dt=dt.updateQueue,we=dt.lastBaseUpdate,we!==le&&(we===null?dt.firstBaseUpdate=et:we.next=et,dt.lastBaseUpdate=Fe))}if(Q!==null){var yt=R.baseState;le=0,dt=et=Fe=null,we=Q;do{var rt=we.lane&-536870913,st=rt!==we.lane;if(st?(Ar&rt)===rt:(y&rt)===rt){rt!==0&&rt===PA&&(Ut=!0),dt!==null&&(dt=dt.next={lane:0,tag:we.tag,payload:we.payload,callback:null,next:null});e:{var Cn=c,fn=we;rt=f;var Gr=m;switch(fn.tag){case 1:if(Cn=fn.payload,typeof Cn=="function"){yt=Cn.call(Gr,yt,rt);break e}yt=Cn;break e;case 3:Cn.flags=Cn.flags&-65537|128;case 0:if(Cn=fn.payload,rt=typeof Cn=="function"?Cn.call(Gr,yt,rt):Cn,rt==null)break e;yt=d({},yt,rt);break e;case 2:at=!0}}rt=we.callback,rt!==null&&(c.flags|=64,st&&(c.flags|=8192),st=R.callbacks,st===null?R.callbacks=[rt]:st.push(rt))}else st={lane:rt,tag:we.tag,payload:we.payload,callback:we.callback,next:null},dt===null?(et=dt=st,Fe=yt):dt=dt.next=st,le|=rt;if(we=we.next,we===null){if(we=R.shared.pending,we===null)break;st=we,we=st.next,st.next=null,R.lastBaseUpdate=st,R.shared.pending=null}}while(!0);dt===null&&(Fe=yt),R.baseState=Fe,R.firstBaseUpdate=et,R.lastBaseUpdate=dt,Q===null&&(R.shared.lanes=0),Ku|=le,c.lanes=le,c.memoizedState=yt}}function lr(c,f){if(typeof c!="function")throw Error(r(191,c));c.call(f)}function vr(c,f){var m=c.callbacks;if(m!==null)for(c.callbacks=null,c=0;c<m.length;c++)lr(m[c],f)}var Qn=de(null),Ln=de(0);function Tr(c,f){c=WA,W(Ln,c),W(Qn,f),WA=c|f.baseLanes}function yr(){W(Ln,WA),W(Qn,Qn.current)}function Sn(){WA=Ln.current,j(Qn),j(Ln)}var Ir=0,An=null,vn=null,ir=null,cr=!1,ia=!1,Os=!1,hs=0,ms=0,Ts=null,ao=0;function wr(){throw Error(r(321))}function Bs(c,f){if(f===null)return!1;for(var m=0;m<f.length&&m<c.length;m++)if(!ra(c[m],f[m]))return!1;return!0}function Bo(c,f,m,y,R,Q){return Ir=Q,An=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,K.H=c===null||c.memoizedState===null?c4:A4,Os=!1,Q=m(y,R),Os=!1,ia&&(Q=jA(f,m,y,R)),Qc(c),Q}function Qc(c){K.H=Qx;var f=vn!==null&&vn.next!==null;if(Ir=0,ir=vn=An=null,cr=!1,ms=0,Ts=null,f)throw Error(r(300));c===null||Ra||(c=c.dependencies,c!==null&&Sh(c)&&(Ra=!0))}function jA(c,f,m,y){An=c;var R=0;do{if(ia&&(Ts=null),ms=0,ia=!1,25<=R)throw Error(r(301));if(R+=1,ir=vn=null,c.updateQueue!=null){var Q=c.updateQueue;Q.lastEffect=null,Q.events=null,Q.stores=null,Q.memoCache!=null&&(Q.memoCache.index=0)}K.H=Gj,Q=f(m,y)}while(ia);return Q}function Hc(){var c=K.H,f=c.useState()[0];return f=typeof f.then=="function"?Vc(f):f,c=c.useState()[0],(vn!==null?vn.memoizedState:null)!==c&&(An.flags|=1024),f}function Yr(){var c=hs!==0;return hs=0,c}function Af(c,f,m){f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~m}function Bh(c){if(cr){for(c=c.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}cr=!1}Ir=0,ir=vn=An=null,ia=!1,ms=hs=0,Ts=null}function Ka(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ir===null?An.memoizedState=ir=c:ir=ir.next=c,ir}function Zr(){if(vn===null){var c=An.alternate;c=c!==null?c.memoizedState:null}else c=vn.next;var f=ir===null?An.memoizedState:ir.next;if(f!==null)ir=f,vn=c;else{if(c===null)throw An.alternate===null?Error(r(467)):Error(r(310));vn=c,c={memoizedState:vn.memoizedState,baseState:vn.baseState,baseQueue:vn.baseQueue,queue:vn.queue,next:null},ir===null?An.memoizedState=ir=c:ir=ir.next=c}return ir}function OA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vc(c){var f=ms;return ms+=1,Ts===null&&(Ts=[]),c=Ye(Ts,c,f),f=An,(ir===null?f.memoizedState:ir.next)===null&&(f=f.alternate,K.H=f===null||f.memoizedState===null?c4:A4),c}function di(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return Vc(c);if(c.$$typeof===k)return Ps(c)}throw Error(r(438,String(c)))}function Gc(c){var f=null,m=An.updateQueue;if(m!==null&&(f=m.memoCache),f==null){var y=An.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(f={data:y.data.map(function(R){return R.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),m===null&&(m=OA(),An.updateQueue=m),m.memoCache=f,m=f.data[f.index],m===void 0)for(m=f.data[f.index]=Array(c),y=0;y<c;y++)m[y]=V;return f.index++,m}function fi(c,f){return typeof f=="function"?f(c):f}function uf(c){var f=Zr();return Uu(f,vn,c)}function Uu(c,f,m){var y=c.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=m;var R=c.baseQueue,Q=y.pending;if(Q!==null){if(R!==null){var le=R.next;R.next=Q.next,Q.next=le}f.baseQueue=R=Q,y.pending=null}if(Q=c.baseState,R===null)c.memoizedState=Q;else{f=R.next;var we=le=null,Fe=null,et=f,dt=!1;do{var yt=et.lane&-536870913;if(yt!==et.lane?(Ar&yt)===yt:(Ir&yt)===yt){var rt=et.revertLane;if(rt===0)Fe!==null&&(Fe=Fe.next={lane:0,revertLane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),yt===PA&&(dt=!0);else if((Ir&rt)===rt){et=et.next,rt===PA&&(dt=!0);continue}else yt={lane:0,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},Fe===null?(we=Fe=yt,le=Q):Fe=Fe.next=yt,An.lanes|=rt,Ku|=rt;yt=et.action,Os&&m(Q,yt),Q=et.hasEagerState?et.eagerState:m(Q,yt)}else rt={lane:yt,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},Fe===null?(we=Fe=rt,le=Q):Fe=Fe.next=rt,An.lanes|=yt,Ku|=yt;et=et.next}while(et!==null&&et!==f);if(Fe===null?le=Q:Fe.next=we,!ra(Q,c.memoizedState)&&(Ra=!0,dt&&(m=ql,m!==null)))throw m;c.memoizedState=Q,c.baseState=le,c.baseQueue=Fe,y.lastRenderedState=Q}return R===null&&(y.lanes=0),[c.memoizedState,y.dispatch]}function Nh(c){var f=Zr(),m=f.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=c;var y=m.dispatch,R=m.pending,Q=f.memoizedState;if(R!==null){m.pending=null;var le=R=R.next;do Q=c(Q,le.action),le=le.next;while(le!==R);ra(Q,f.memoizedState)||(Ra=!0),f.memoizedState=Q,f.baseQueue===null&&(f.baseState=Q),m.lastRenderedState=Q}return[Q,y]}function df(c,f,m){var y=An,R=Zr(),Q=fr;if(Q){if(m===void 0)throw Error(r(407));m=m()}else m=f();var le=!ra((vn||R).memoizedState,m);le&&(R.memoizedState=m,Ra=!0),R=R.queue;var we=Lu.bind(null,y,R,c);if(ju(2048,8,we,[c]),R.getSnapshot!==f||le||ir!==null&&ir.memoizedState.tag&1){if(y.flags|=2048,$l(9,pf(),ff.bind(null,y,R,m,f),null),Jr===null)throw Error(r(349));Q||(Ir&124)!==0||kh(y,f,m)}return m}function kh(c,f,m){c.flags|=16384,c={getSnapshot:f,value:m},f=An.updateQueue,f===null?(f=OA(),An.updateQueue=f,f.stores=[c]):(m=f.stores,m===null?f.stores=[c]:m.push(c))}function ff(c,f,m,y){f.value=m,f.getSnapshot=y,kx(f)&&Ix(c)}function Lu(c,f,m){return m(function(){kx(f)&&Ix(c)})}function kx(c){var f=c.getSnapshot;c=c.value;try{var m=f();return!ra(c,m)}catch{return!0}}function Ix(c){var f=Ol(c,2);f!==null&&Do(f,c,2)}function hf(c){var f=Ka();if(typeof c=="function"){var m=c;if(c=m(),Os){Yt(!0);try{m()}finally{Yt(!1)}}}return f.memoizedState=f.baseState=c,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:c},f}function Wl(c,f,m,y){return c.baseState=m,Uu(c,vn,typeof y=="function"?y:fi)}function iw(c,f,m,y,R){if(Ox(c))throw Error(r(485));if(c=f.action,c!==null){var Q={payload:R,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){Q.listeners.push(le)}};K.T!==null?m(!0):Q.isTransition=!1,y(Q),m=f.pending,m===null?(Q.next=f.pending=Q,Fx(f,Q)):(Q.next=m.next,f.pending=m.next=Q)}}function Fx(c,f){var m=f.action,y=f.payload,R=c.state;if(f.isTransition){var Q=K.T,le={};K.T=le;try{var we=m(R,y),Fe=K.S;Fe!==null&&Fe(le,we),Rx(c,f,we)}catch(et){Mu(c,f,et)}finally{K.T=Q}}else try{Q=m(R,y),Rx(c,f,Q)}catch(et){Mu(c,f,et)}}function Rx(c,f,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(y){Rm(c,f,y)},function(y){return Mu(c,f,y)}):Rm(c,f,m)}function Rm(c,f,m){f.status="fulfilled",f.value=m,Dm(f),c.state=m,f=c.pending,f!==null&&(m=f.next,m===f?c.pending=null:(m=m.next,f.next=m,Fx(c,m)))}function Mu(c,f,m){var y=c.pending;if(c.pending=null,y!==null){y=y.next;do f.status="rejected",f.reason=m,Dm(f),f=f.next;while(f!==y)}c.action=null}function Dm(c){c=c.listeners;for(var f=0;f<c.length;f++)(0,c[f])()}function Um(c,f){return f}function mf(c,f){if(fr){var m=Jr.formState;if(m!==null){e:{var y=An;if(fr){if(ls){t:{for(var R=ls,Q=il;R.nodeType!==8;){if(!Q){R=null;break t}if(R=Zl(R.nextSibling),R===null){R=null;break t}}Q=R.data,R=Q==="F!"||Q==="F"?R:null}if(R){ls=Zl(R.nextSibling),y=R.data==="F!";break e}}MA(y)}y=!1}y&&(f=m[0])}}return m=Ka(),m.memoizedState=m.baseState=f,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Um,lastRenderedState:f},m.queue=y,m=i4.bind(null,An,y),y.dispatch=m,y=hf(!1),Q=ow.bind(null,An,!1,y.queue),y=Ka(),R={state:f,dispatch:null,action:c,pending:null},y.queue=R,m=iw.bind(null,An,R,Q,m),R.dispatch=m,y.memoizedState=c,[f,m,!1]}function Ih(c){var f=Zr();return Pu(f,vn,c)}function Pu(c,f,m){if(f=Uu(c,f,Um)[0],c=uf(fi)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var y=Vc(f)}catch(le){throw le===he?xe:le}else y=f;f=Zr();var R=f.queue,Q=R.dispatch;return m!==f.memoizedState&&(An.flags|=2048,$l(9,pf(),Dx.bind(null,R,m),null)),[y,Q,c]}function Dx(c,f){c.action=f}function Ux(c){var f=Zr(),m=vn;if(m!==null)return Pu(f,m,c);Zr(),f=f.memoizedState,m=Zr();var y=m.queue.dispatch;return m.memoizedState=c,[f,y,!1]}function $l(c,f,m,y){return c={tag:c,create:m,deps:y,inst:f,next:null},f=An.updateQueue,f===null&&(f=OA(),An.updateQueue=f),m=f.lastEffect,m===null?f.lastEffect=c.next=c:(y=m.next,m.next=c,c.next=y,f.lastEffect=c),c}function pf(){return{destroy:void 0,resource:void 0}}function Fh(){return Zr().memoizedState}function No(c,f,m,y){var R=Ka();y=y===void 0?null:y,An.flags|=c,R.memoizedState=$l(1|f,pf(),m,y)}function ju(c,f,m,y){var R=Zr();y=y===void 0?null:y;var Q=R.memoizedState.inst;vn!==null&&y!==null&&Bs(y,vn.memoizedState.deps)?R.memoizedState=$l(f,Q,m,y):(An.flags|=c,R.memoizedState=$l(1|f,Q,m,y))}function Lm(c,f){No(8390656,8,c,f)}function Lx(c,f){ju(2048,8,c,f)}function Mm(c,f){return ju(4,2,c,f)}function QA(c,f){return ju(4,4,c,f)}function Mx(c,f){if(typeof f=="function"){c=c();var m=f(c);return function(){typeof m=="function"?m():f(null)}}if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function Pm(c,f,m){m=m!=null?m.concat([c]):null,ju(4,4,Mx.bind(null,f,c),m)}function jm(){}function Om(c,f){var m=Zr();f=f===void 0?null:f;var y=m.memoizedState;return f!==null&&Bs(f,y[1])?y[0]:(m.memoizedState=[c,f],c)}function Px(c,f){var m=Zr();f=f===void 0?null:f;var y=m.memoizedState;if(f!==null&&Bs(f,y[1]))return y[0];if(y=c(),Os){Yt(!0);try{c()}finally{Yt(!1)}}return m.memoizedState=[y,f],y}function HA(c,f,m){return m===void 0||(Ir&1073741824)!==0?c.memoizedState=f:(c.memoizedState=m,c=nT(),An.lanes|=c,Ku|=c,m)}function Rh(c,f,m,y){return ra(m,f)?m:Qn.current!==null?(c=HA(c,m,y),ra(c,f)||(Ra=!0),c):(Ir&42)===0?(Ra=!0,c.memoizedState=m):(c=nT(),An.lanes|=c,Ku|=c,f)}function gf(c,f,m,y,R){var Q=q.p;q.p=Q!==0&&8>Q?Q:8;var le=K.T,we={};K.T=we,ow(c,!1,f,m);try{var Fe=R(),et=K.S;if(et!==null&&et(we,Fe),Fe!==null&&typeof Fe=="object"&&typeof Fe.then=="function"){var dt=Nx(Fe,y);Gm(c,f,dt,Ro(c))}else Gm(c,f,y,Ro(c))}catch(yt){Gm(c,f,{then:function(){},status:"rejected",reason:yt},Ro())}finally{q.p=Q,K.T=le}}function Yl(){}function Al(c,f,m,y){if(c.tag!==5)throw Error(r(476));var R=Jl(c).queue;gf(c,R,f,se,m===null?Yl:function(){return xf(c),m(y)})}function Jl(c){var f=c.memoizedState;if(f!==null)return f;f={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:se},next:null};var m={};return f.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:m},next:null},c.memoizedState=f,c=c.alternate,c!==null&&(c.memoizedState=f),f}function xf(c){var f=Jl(c).next.queue;Gm(c,f,{},Ro())}function vf(){return Ps(lp)}function Qm(){return Zr().memoizedState}function jx(){return Zr().memoizedState}function Hm(c){for(var f=c.return;f!==null;){switch(f.tag){case 24:case 3:var m=Ro();c=ct(m);var y=xt(f,c,m);y!==null&&(Do(y,f,m),ft(y,f,m)),f={cache:Im()},c.payload=f;return}f=f.return}}function Vm(c,f,m){var y=Ro();m={lane:y,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Ox(c)?o4(f,m):(m=Lc(c,f,m,y),m!==null&&(Do(m,c,y),l4(m,f,y)))}function i4(c,f,m){var y=Ro();Gm(c,f,m,y)}function Gm(c,f,m,y){var R={lane:y,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Ox(c))o4(f,R);else{var Q=c.alternate;if(c.lanes===0&&(Q===null||Q.lanes===0)&&(Q=f.lastRenderedReducer,Q!==null))try{var le=f.lastRenderedState,we=Q(le,m);if(R.hasEagerState=!0,R.eagerState=we,ra(we,le))return Uc(c,f,R,0),Jr===null&&no(),!1}catch{}finally{}if(m=Lc(c,f,R,y),m!==null)return Do(m,c,y),l4(m,f,y),!0}return!1}function ow(c,f,m,y){if(y={lane:2,revertLane:jw(),action:y,hasEagerState:!1,eagerState:null,next:null},Ox(c)){if(f)throw Error(r(479))}else f=Lc(c,m,y,2),f!==null&&Do(f,c,2)}function Ox(c){var f=c.alternate;return c===An||f!==null&&f===An}function o4(c,f){ia=cr=!0;var m=c.pending;m===null?f.next=f:(f.next=m.next,m.next=f),c.pending=f}function l4(c,f,m){if((m&4194048)!==0){var y=f.lanes;y&=c.pendingLanes,m|=y,f.lanes=m,jn(c,m)}}var Qx={readContext:Ps,use:di,useCallback:wr,useContext:wr,useEffect:wr,useImperativeHandle:wr,useLayoutEffect:wr,useInsertionEffect:wr,useMemo:wr,useReducer:wr,useRef:wr,useState:wr,useDebugValue:wr,useDeferredValue:wr,useTransition:wr,useSyncExternalStore:wr,useId:wr,useHostTransitionStatus:wr,useFormState:wr,useActionState:wr,useOptimistic:wr,useMemoCache:wr,useCacheRefresh:wr},c4={readContext:Ps,use:di,useCallback:function(c,f){return Ka().memoizedState=[c,f===void 0?null:f],c},useContext:Ps,useEffect:Lm,useImperativeHandle:function(c,f,m){m=m!=null?m.concat([c]):null,No(4194308,4,Mx.bind(null,f,c),m)},useLayoutEffect:function(c,f){return No(4194308,4,c,f)},useInsertionEffect:function(c,f){No(4,2,c,f)},useMemo:function(c,f){var m=Ka();f=f===void 0?null:f;var y=c();if(Os){Yt(!0);try{c()}finally{Yt(!1)}}return m.memoizedState=[y,f],y},useReducer:function(c,f,m){var y=Ka();if(m!==void 0){var R=m(f);if(Os){Yt(!0);try{m(f)}finally{Yt(!1)}}}else R=f;return y.memoizedState=y.baseState=R,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:R},y.queue=c,c=c.dispatch=Vm.bind(null,An,c),[y.memoizedState,c]},useRef:function(c){var f=Ka();return c={current:c},f.memoizedState=c},useState:function(c){c=hf(c);var f=c.queue,m=i4.bind(null,An,f);return f.dispatch=m,[c.memoizedState,m]},useDebugValue:jm,useDeferredValue:function(c,f){var m=Ka();return HA(m,c,f)},useTransition:function(){var c=hf(!1);return c=gf.bind(null,An,c.queue,!0,!1),Ka().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,f,m){var y=An,R=Ka();if(fr){if(m===void 0)throw Error(r(407));m=m()}else{if(m=f(),Jr===null)throw Error(r(349));(Ar&124)!==0||kh(y,f,m)}R.memoizedState=m;var Q={value:m,getSnapshot:f};return R.queue=Q,Lm(Lu.bind(null,y,Q,c),[c]),y.flags|=2048,$l(9,pf(),ff.bind(null,y,Q,m,f),null),m},useId:function(){var c=Ka(),f=Jr.identifierPrefix;if(fr){var m=Gl,y=Vl;m=(y&~(1<<32-Mt(y)-1)).toString(32)+m,f="«"+f+"R"+m,m=hs++,0<m&&(f+="H"+m.toString(32)),f+="»"}else m=ao++,f="«"+f+"r"+m.toString(32)+"»";return c.memoizedState=f},useHostTransitionStatus:vf,useFormState:mf,useActionState:mf,useOptimistic:function(c){var f=Ka();f.memoizedState=f.baseState=c;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=m,f=ow.bind(null,An,!0,m),m.dispatch=f,[c,f]},useMemoCache:Gc,useCacheRefresh:function(){return Ka().memoizedState=Hm.bind(null,An)}},A4={readContext:Ps,use:di,useCallback:Om,useContext:Ps,useEffect:Lx,useImperativeHandle:Pm,useInsertionEffect:Mm,useLayoutEffect:QA,useMemo:Px,useReducer:uf,useRef:Fh,useState:function(){return uf(fi)},useDebugValue:jm,useDeferredValue:function(c,f){var m=Zr();return Rh(m,vn.memoizedState,c,f)},useTransition:function(){var c=uf(fi)[0],f=Zr().memoizedState;return[typeof c=="boolean"?c:Vc(c),f]},useSyncExternalStore:df,useId:Qm,useHostTransitionStatus:vf,useFormState:Ih,useActionState:Ih,useOptimistic:function(c,f){var m=Zr();return Wl(m,vn,c,f)},useMemoCache:Gc,useCacheRefresh:jx},Gj={readContext:Ps,use:di,useCallback:Om,useContext:Ps,useEffect:Lx,useImperativeHandle:Pm,useInsertionEffect:Mm,useLayoutEffect:QA,useMemo:Px,useReducer:Nh,useRef:Fh,useState:function(){return Nh(fi)},useDebugValue:jm,useDeferredValue:function(c,f){var m=Zr();return vn===null?HA(m,c,f):Rh(m,vn.memoizedState,c,f)},useTransition:function(){var c=Nh(fi)[0],f=Zr().memoizedState;return[typeof c=="boolean"?c:Vc(c),f]},useSyncExternalStore:df,useId:Qm,useHostTransitionStatus:vf,useFormState:Ux,useActionState:Ux,useOptimistic:function(c,f){var m=Zr();return vn!==null?Wl(m,vn,c,f):(m.baseState=c,[c,m.queue.dispatch])},useMemoCache:Gc,useCacheRefresh:jx},Dh=null,zm=0;function Hx(c){var f=zm;return zm+=1,Dh===null&&(Dh=[]),Ye(Dh,c,f)}function Km(c,f){f=f.props.ref,c.ref=f!==void 0?f:null}function Vx(c,f){throw f.$$typeof===h?Error(r(525)):(c=Object.prototype.toString.call(f),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c)))}function u4(c){var f=c._init;return f(c._payload)}function d4(c){function f(ze,Pe){if(c){var $e=ze.deletions;$e===null?(ze.deletions=[Pe],ze.flags|=16):$e.push(Pe)}}function m(ze,Pe){if(!c)return null;for(;Pe!==null;)f(ze,Pe),Pe=Pe.sibling;return null}function y(ze){for(var Pe=new Map;ze!==null;)ze.key!==null?Pe.set(ze.key,ze):Pe.set(ze.index,ze),ze=ze.sibling;return Pe}function R(ze,Pe){return ze=al(ze,Pe),ze.index=0,ze.sibling=null,ze}function Q(ze,Pe,$e){return ze.index=$e,c?($e=ze.alternate,$e!==null?($e=$e.index,$e<Pe?(ze.flags|=67108866,Pe):$e):(ze.flags|=67108866,Pe)):(ze.flags|=1048576,Pe)}function le(ze){return c&&ze.alternate===null&&(ze.flags|=67108866),ze}function we(ze,Pe,$e,ht){return Pe===null||Pe.tag!==6?(Pe=bh($e,ze.mode,ht),Pe.return=ze,Pe):(Pe=R(Pe,$e),Pe.return=ze,Pe)}function Fe(ze,Pe,$e,ht){var Jt=$e.type;return Jt===w?dt(ze,Pe,$e.props.children,ht,$e.key):Pe!==null&&(Pe.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===N&&u4(Jt)===Pe.type)?(Pe=R(Pe,$e.props),Km(Pe,$e),Pe.return=ze,Pe):(Pe=DA($e.type,$e.key,$e.props,null,ze.mode,ht),Km(Pe,$e),Pe.return=ze,Pe)}function et(ze,Pe,$e,ht){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==$e.containerInfo||Pe.stateNode.implementation!==$e.implementation?(Pe=sf($e,ze.mode,ht),Pe.return=ze,Pe):(Pe=R(Pe,$e.children||[]),Pe.return=ze,Pe)}function dt(ze,Pe,$e,ht,Jt){return Pe===null||Pe.tag!==7?(Pe=Ql($e,ze.mode,ht,Jt),Pe.return=ze,Pe):(Pe=R(Pe,$e),Pe.return=ze,Pe)}function yt(ze,Pe,$e){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Pe=bh(""+Pe,ze.mode,$e),Pe.return=ze,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case p:return $e=DA(Pe.type,Pe.key,Pe.props,null,ze.mode,$e),Km($e,Pe),$e.return=ze,$e;case g:return Pe=sf(Pe,ze.mode,$e),Pe.return=ze,Pe;case N:var ht=Pe._init;return Pe=ht(Pe._payload),yt(ze,Pe,$e)}if(ie(Pe)||U(Pe))return Pe=Ql(Pe,ze.mode,$e,null),Pe.return=ze,Pe;if(typeof Pe.then=="function")return yt(ze,Hx(Pe),$e);if(Pe.$$typeof===k)return yt(ze,Oc(ze,Pe),$e);Vx(ze,Pe)}return null}function rt(ze,Pe,$e,ht){var Jt=Pe!==null?Pe.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return Jt!==null?null:we(ze,Pe,""+$e,ht);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case p:return $e.key===Jt?Fe(ze,Pe,$e,ht):null;case g:return $e.key===Jt?et(ze,Pe,$e,ht):null;case N:return Jt=$e._init,$e=Jt($e._payload),rt(ze,Pe,$e,ht)}if(ie($e)||U($e))return Jt!==null?null:dt(ze,Pe,$e,ht,null);if(typeof $e.then=="function")return rt(ze,Pe,Hx($e),ht);if($e.$$typeof===k)return rt(ze,Pe,Oc(ze,$e),ht);Vx(ze,$e)}return null}function st(ze,Pe,$e,ht,Jt){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return ze=ze.get($e)||null,we(Pe,ze,""+ht,Jt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case p:return ze=ze.get(ht.key===null?$e:ht.key)||null,Fe(Pe,ze,ht,Jt);case g:return ze=ze.get(ht.key===null?$e:ht.key)||null,et(Pe,ze,ht,Jt);case N:var Wn=ht._init;return ht=Wn(ht._payload),st(ze,Pe,$e,ht,Jt)}if(ie(ht)||U(ht))return ze=ze.get($e)||null,dt(Pe,ze,ht,Jt,null);if(typeof ht.then=="function")return st(ze,Pe,$e,Hx(ht),Jt);if(ht.$$typeof===k)return st(ze,Pe,$e,Oc(Pe,ht),Jt);Vx(Pe,ht)}return null}function Cn(ze,Pe,$e,ht){for(var Jt=null,Wn=null,rn=Pe,pn=Pe=0,Ua=null;rn!==null&&pn<$e.length;pn++){rn.index>pn?(Ua=rn,rn=null):Ua=rn.sibling;var br=rt(ze,rn,$e[pn],ht);if(br===null){rn===null&&(rn=Ua);break}c&&rn&&br.alternate===null&&f(ze,rn),Pe=Q(br,Pe,pn),Wn===null?Jt=br:Wn.sibling=br,Wn=br,rn=Ua}if(pn===$e.length)return m(ze,rn),fr&&LA(ze,pn),Jt;if(rn===null){for(;pn<$e.length;pn++)rn=yt(ze,$e[pn],ht),rn!==null&&(Pe=Q(rn,Pe,pn),Wn===null?Jt=rn:Wn.sibling=rn,Wn=rn);return fr&&LA(ze,pn),Jt}for(rn=y(rn);pn<$e.length;pn++)Ua=st(rn,ze,pn,$e[pn],ht),Ua!==null&&(c&&Ua.alternate!==null&&rn.delete(Ua.key===null?pn:Ua.key),Pe=Q(Ua,Pe,pn),Wn===null?Jt=Ua:Wn.sibling=Ua,Wn=Ua);return c&&rn.forEach(function(td){return f(ze,td)}),fr&&LA(ze,pn),Jt}function fn(ze,Pe,$e,ht){if($e==null)throw Error(r(151));for(var Jt=null,Wn=null,rn=Pe,pn=Pe=0,Ua=null,br=$e.next();rn!==null&&!br.done;pn++,br=$e.next()){rn.index>pn?(Ua=rn,rn=null):Ua=rn.sibling;var td=rt(ze,rn,br.value,ht);if(td===null){rn===null&&(rn=Ua);break}c&&rn&&td.alternate===null&&f(ze,rn),Pe=Q(td,Pe,pn),Wn===null?Jt=td:Wn.sibling=td,Wn=td,rn=Ua}if(br.done)return m(ze,rn),fr&&LA(ze,pn),Jt;if(rn===null){for(;!br.done;pn++,br=$e.next())br=yt(ze,br.value,ht),br!==null&&(Pe=Q(br,Pe,pn),Wn===null?Jt=br:Wn.sibling=br,Wn=br);return fr&&LA(ze,pn),Jt}for(rn=y(rn);!br.done;pn++,br=$e.next())br=st(rn,ze,pn,br.value,ht),br!==null&&(c&&br.alternate!==null&&rn.delete(br.key===null?pn:br.key),Pe=Q(br,Pe,pn),Wn===null?Jt=br:Wn.sibling=br,Wn=br);return c&&rn.forEach(function(zO){return f(ze,zO)}),fr&&LA(ze,pn),Jt}function Gr(ze,Pe,$e,ht){if(typeof $e=="object"&&$e!==null&&$e.type===w&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case p:e:{for(var Jt=$e.key;Pe!==null;){if(Pe.key===Jt){if(Jt=$e.type,Jt===w){if(Pe.tag===7){m(ze,Pe.sibling),ht=R(Pe,$e.props.children),ht.return=ze,ze=ht;break e}}else if(Pe.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===N&&u4(Jt)===Pe.type){m(ze,Pe.sibling),ht=R(Pe,$e.props),Km(ht,$e),ht.return=ze,ze=ht;break e}m(ze,Pe);break}else f(ze,Pe);Pe=Pe.sibling}$e.type===w?(ht=Ql($e.props.children,ze.mode,ht,$e.key),ht.return=ze,ze=ht):(ht=DA($e.type,$e.key,$e.props,null,ze.mode,ht),Km(ht,$e),ht.return=ze,ze=ht)}return le(ze);case g:e:{for(Jt=$e.key;Pe!==null;){if(Pe.key===Jt)if(Pe.tag===4&&Pe.stateNode.containerInfo===$e.containerInfo&&Pe.stateNode.implementation===$e.implementation){m(ze,Pe.sibling),ht=R(Pe,$e.children||[]),ht.return=ze,ze=ht;break e}else{m(ze,Pe);break}else f(ze,Pe);Pe=Pe.sibling}ht=sf($e,ze.mode,ht),ht.return=ze,ze=ht}return le(ze);case N:return Jt=$e._init,$e=Jt($e._payload),Gr(ze,Pe,$e,ht)}if(ie($e))return Cn(ze,Pe,$e,ht);if(U($e)){if(Jt=U($e),typeof Jt!="function")throw Error(r(150));return $e=Jt.call($e),fn(ze,Pe,$e,ht)}if(typeof $e.then=="function")return Gr(ze,Pe,Hx($e),ht);if($e.$$typeof===k)return Gr(ze,Pe,Oc(ze,$e),ht);Vx(ze,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint"?($e=""+$e,Pe!==null&&Pe.tag===6?(m(ze,Pe.sibling),ht=R(Pe,$e),ht.return=ze,ze=ht):(m(ze,Pe),ht=bh($e,ze.mode,ht),ht.return=ze,ze=ht),le(ze)):m(ze,Pe)}return function(ze,Pe,$e,ht){try{zm=0;var Jt=Gr(ze,Pe,$e,ht);return Dh=null,Jt}catch(rn){if(rn===he||rn===xe)throw rn;var Wn=Fa(29,rn,null,ze.mode);return Wn.lanes=ht,Wn.return=ze,Wn}finally{}}}var Uh=d4(!0),f4=d4(!1),ul=de(null),zc=null;function Ou(c){var f=c.alternate;W(wa,wa.current&1),W(ul,c),zc===null&&(f===null||Qn.current!==null||f.memoizedState!==null)&&(zc=c)}function h4(c){if(c.tag===22){if(W(wa,wa.current),W(ul,c),zc===null){var f=c.alternate;f!==null&&f.memoizedState!==null&&(zc=c)}}else Qu()}function Qu(){W(wa,wa.current),W(ul,ul.current)}function VA(c){j(ul),zc===c&&(zc=null),j(wa)}var wa=de(0);function Gx(c){for(var f=c;f!==null;){if(f.tag===13){var m=f.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||Jw(m)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function lw(c,f,m,y){f=c.memoizedState,m=m(y,f),m=m==null?f:d({},f,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var cw={enqueueSetState:function(c,f,m){c=c._reactInternals;var y=Ro(),R=ct(y);R.payload=f,m!=null&&(R.callback=m),f=xt(c,R,y),f!==null&&(Do(f,c,y),ft(f,c,y))},enqueueReplaceState:function(c,f,m){c=c._reactInternals;var y=Ro(),R=ct(y);R.tag=1,R.payload=f,m!=null&&(R.callback=m),f=xt(c,R,y),f!==null&&(Do(f,c,y),ft(f,c,y))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var m=Ro(),y=ct(m);y.tag=2,f!=null&&(y.callback=f),f=xt(c,y,m),f!==null&&(Do(f,c,m),ft(f,c,m))}};function m4(c,f,m,y,R,Q,le){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(y,Q,le):f.prototype&&f.prototype.isPureReactComponent?!Bc(m,y)||!Bc(R,Q):!0}function p4(c,f,m,y){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(m,y),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(m,y),f.state!==c&&cw.enqueueReplaceState(f,f.state,null)}function yf(c,f){var m=f;if("ref"in f){m={};for(var y in f)y!=="ref"&&(m[y]=f[y])}if(c=c.defaultProps){m===f&&(m=d({},m));for(var R in c)m[R]===void 0&&(m[R]=c[R])}return m}var zx=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function g4(c){zx(c)}function x4(c){console.error(c)}function v4(c){zx(c)}function Kx(c,f){try{var m=c.onUncaughtError;m(f.value,{componentStack:f.stack})}catch(y){setTimeout(function(){throw y})}}function y4(c,f,m){try{var y=c.onCaughtError;y(m.value,{componentStack:m.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function Aw(c,f,m){return m=ct(m),m.tag=3,m.payload={element:null},m.callback=function(){Kx(c,f)},m}function w4(c){return c=ct(c),c.tag=3,c}function b4(c,f,m,y){var R=m.type.getDerivedStateFromError;if(typeof R=="function"){var Q=y.value;c.payload=function(){return R(Q)},c.callback=function(){y4(f,m,y)}}var le=m.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(c.callback=function(){y4(f,m,y),typeof R!="function"&&(qu===null?qu=new Set([this]):qu.add(this));var we=y.stack;this.componentDidCatch(y.value,{componentStack:we!==null?we:""})})}function zj(c,f,m,y,R){if(m.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(f=m.alternate,f!==null&&Du(f,m,R,!0),m=ul.current,m!==null){switch(m.tag){case 13:return zc===null?Dw():m.alternate===null&&Ns===0&&(Ns=3),m.flags&=-257,m.flags|=65536,m.lanes=R,y===be?m.flags|=16384:(f=m.updateQueue,f===null?m.updateQueue=new Set([y]):f.add(y),Lw(c,y,R)),!1;case 22:return m.flags|=65536,y===be?m.flags|=16384:(f=m.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([y])},m.updateQueue=f):(m=f.retryQueue,m===null?f.retryQueue=new Set([y]):m.add(y)),Lw(c,y,R)),!1}throw Error(r(435,m.tag))}return Lw(c,y,R),Dw(),!1}if(fr)return f=ul.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=R,y!==km&&(c=Error(r(422),{cause:y}),Ru(Hn(c,m)))):(y!==km&&(f=Error(r(423),{cause:y}),Ru(Hn(f,m))),c=c.current.alternate,c.flags|=65536,R&=-R,c.lanes|=R,y=Hn(y,m),R=Aw(c.stateNode,y,R),Gt(c,R),Ns!==4&&(Ns=2)),!1;var Q=Error(r(520),{cause:y});if(Q=Hn(Q,m),Zm===null?Zm=[Q]:Zm.push(Q),Ns!==4&&(Ns=2),f===null)return!0;y=Hn(y,m),m=f;do{switch(m.tag){case 3:return m.flags|=65536,c=R&-R,m.lanes|=c,c=Aw(m.stateNode,y,c),Gt(m,c),!1;case 1:if(f=m.type,Q=m.stateNode,(m.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(qu===null||!qu.has(Q))))return m.flags|=65536,R&=-R,m.lanes|=R,R=w4(R),b4(R,c,m,y),Gt(m,R),!1}m=m.return}while(m!==null);return!1}var C4=Error(r(461)),Ra=!1;function qa(c,f,m,y){f.child=c===null?f4(f,null,m,y):Uh(f,c.child,m,y)}function E4(c,f,m,y,R){m=m.render;var Q=f.ref;if("ref"in y){var le={};for(var we in y)we!=="ref"&&(le[we]=y[we])}else le=y;return cl(f),y=Bo(c,f,m,le,Q,R),we=Yr(),c!==null&&!Ra?(Af(c,f,R),GA(c,f,R)):(fr&&we&&af(f),f.flags|=1,qa(c,f,y,R),f.child)}function _4(c,f,m,y,R){if(c===null){var Q=m.type;return typeof Q=="function"&&!Iu(Q)&&Q.defaultProps===void 0&&m.compare===null?(f.tag=15,f.type=Q,S4(c,f,Q,y,R)):(c=DA(m.type,null,y,f,f.mode,R),c.ref=f.ref,c.return=f,f.child=c)}if(Q=c.child,!xw(c,R)){var le=Q.memoizedProps;if(m=m.compare,m=m!==null?m:Bc,m(le,y)&&c.ref===f.ref)return GA(c,f,R)}return f.flags|=1,c=al(Q,y),c.ref=f.ref,c.return=f,f.child=c}function S4(c,f,m,y,R){if(c!==null){var Q=c.memoizedProps;if(Bc(Q,y)&&c.ref===f.ref)if(Ra=!1,f.pendingProps=y=Q,xw(c,R))(c.flags&131072)!==0&&(Ra=!0);else return f.lanes=c.lanes,GA(c,f,R)}return uw(c,f,m,y,R)}function T4(c,f,m){var y=f.pendingProps,R=y.children,Q=c!==null?c.memoizedState:null;if(y.mode==="hidden"){if((f.flags&128)!==0){if(y=Q!==null?Q.baseLanes|m:m,c!==null){for(R=f.child=c.child,Q=0;R!==null;)Q=Q|R.lanes|R.childLanes,R=R.sibling;f.childLanes=Q&~y}else f.childLanes=0,f.child=null;return B4(c,f,y,m)}if((m&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},c!==null&&te(f,Q!==null?Q.cachePool:null),Q!==null?Tr(f,Q):yr(),h4(f);else return f.lanes=f.childLanes=536870912,B4(c,f,Q!==null?Q.baseLanes|m:m,m)}else Q!==null?(te(f,Q.cachePool),Tr(f,Q),Qu(),f.memoizedState=null):(c!==null&&te(f,null),yr(),Qu());return qa(c,f,R,m),f.child}function B4(c,f,m,y){var R=z();return R=R===null?null:{parent:js._currentValue,pool:R},f.memoizedState={baseLanes:m,cachePool:R},c!==null&&te(f,null),yr(),h4(f),c!==null&&Du(c,f,y,!0),null}function qx(c,f){var m=f.ref;if(m===null)c!==null&&c.ref!==null&&(f.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(c===null||c.ref!==m)&&(f.flags|=4194816)}}function uw(c,f,m,y,R){return cl(f),m=Bo(c,f,m,y,void 0,R),y=Yr(),c!==null&&!Ra?(Af(c,f,R),GA(c,f,R)):(fr&&y&&af(f),f.flags|=1,qa(c,f,m,R),f.child)}function N4(c,f,m,y,R,Q){return cl(f),f.updateQueue=null,m=jA(f,y,m,R),Qc(c),y=Yr(),c!==null&&!Ra?(Af(c,f,Q),GA(c,f,Q)):(fr&&y&&af(f),f.flags|=1,qa(c,f,m,Q),f.child)}function k4(c,f,m,y,R){if(cl(f),f.stateNode===null){var Q=sa,le=m.contextType;typeof le=="object"&&le!==null&&(Q=Ps(le)),Q=new m(y,Q),f.memoizedState=Q.state!==null&&Q.state!==void 0?Q.state:null,Q.updater=cw,f.stateNode=Q,Q._reactInternals=f,Q=f.stateNode,Q.props=y,Q.state=f.memoizedState,Q.refs={},Me(f),le=m.contextType,Q.context=typeof le=="object"&&le!==null?Ps(le):sa,Q.state=f.memoizedState,le=m.getDerivedStateFromProps,typeof le=="function"&&(lw(f,m,le,y),Q.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof Q.getSnapshotBeforeUpdate=="function"||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(le=Q.state,typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount(),le!==Q.state&&cw.enqueueReplaceState(Q,Q.state,null),Ot(f,y,Q,R),en(),Q.state=f.memoizedState),typeof Q.componentDidMount=="function"&&(f.flags|=4194308),y=!0}else if(c===null){Q=f.stateNode;var we=f.memoizedProps,Fe=yf(m,we);Q.props=Fe;var et=Q.context,dt=m.contextType;le=sa,typeof dt=="object"&&dt!==null&&(le=Ps(dt));var yt=m.getDerivedStateFromProps;dt=typeof yt=="function"||typeof Q.getSnapshotBeforeUpdate=="function",we=f.pendingProps!==we,dt||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(we||et!==le)&&p4(f,Q,y,le),at=!1;var rt=f.memoizedState;Q.state=rt,Ot(f,y,Q,R),en(),et=f.memoizedState,we||rt!==et||at?(typeof yt=="function"&&(lw(f,m,yt,y),et=f.memoizedState),(Fe=at||m4(f,m,Fe,y,rt,et,le))?(dt||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount()),typeof Q.componentDidMount=="function"&&(f.flags|=4194308)):(typeof Q.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=y,f.memoizedState=et),Q.props=y,Q.state=et,Q.context=le,y=Fe):(typeof Q.componentDidMount=="function"&&(f.flags|=4194308),y=!1)}else{Q=f.stateNode,je(c,f),le=f.memoizedProps,dt=yf(m,le),Q.props=dt,yt=f.pendingProps,rt=Q.context,et=m.contextType,Fe=sa,typeof et=="object"&&et!==null&&(Fe=Ps(et)),we=m.getDerivedStateFromProps,(et=typeof we=="function"||typeof Q.getSnapshotBeforeUpdate=="function")||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(le!==yt||rt!==Fe)&&p4(f,Q,y,Fe),at=!1,rt=f.memoizedState,Q.state=rt,Ot(f,y,Q,R),en();var st=f.memoizedState;le!==yt||rt!==st||at||c!==null&&c.dependencies!==null&&Sh(c.dependencies)?(typeof we=="function"&&(lw(f,m,we,y),st=f.memoizedState),(dt=at||m4(f,m,dt,y,rt,st,Fe)||c!==null&&c.dependencies!==null&&Sh(c.dependencies))?(et||typeof Q.UNSAFE_componentWillUpdate!="function"&&typeof Q.componentWillUpdate!="function"||(typeof Q.componentWillUpdate=="function"&&Q.componentWillUpdate(y,st,Fe),typeof Q.UNSAFE_componentWillUpdate=="function"&&Q.UNSAFE_componentWillUpdate(y,st,Fe)),typeof Q.componentDidUpdate=="function"&&(f.flags|=4),typeof Q.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof Q.componentDidUpdate!="function"||le===c.memoizedProps&&rt===c.memoizedState||(f.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||le===c.memoizedProps&&rt===c.memoizedState||(f.flags|=1024),f.memoizedProps=y,f.memoizedState=st),Q.props=y,Q.state=st,Q.context=Fe,y=dt):(typeof Q.componentDidUpdate!="function"||le===c.memoizedProps&&rt===c.memoizedState||(f.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||le===c.memoizedProps&&rt===c.memoizedState||(f.flags|=1024),y=!1)}return Q=y,qx(c,f),y=(f.flags&128)!==0,Q||y?(Q=f.stateNode,m=y&&typeof m.getDerivedStateFromError!="function"?null:Q.render(),f.flags|=1,c!==null&&y?(f.child=Uh(f,c.child,null,R),f.child=Uh(f,null,m,R)):qa(c,f,m,R),f.memoizedState=Q.state,c=f.child):c=GA(c,f,R),c}function I4(c,f,m,y){return ji(),f.flags|=256,qa(c,f,m,y),f.child}var dw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fw(c){return{baseLanes:c,cachePool:ce()}}function hw(c,f,m){return c=c!==null?c.childLanes&~m:0,f&&(c|=dl),c}function F4(c,f,m){var y=f.pendingProps,R=!1,Q=(f.flags&128)!==0,le;if((le=Q)||(le=c!==null&&c.memoizedState===null?!1:(wa.current&2)!==0),le&&(R=!0,f.flags&=-129),le=(f.flags&32)!==0,f.flags&=-33,c===null){if(fr){if(R?Ou(f):Qu(),fr){var we=ls,Fe;if(Fe=we){e:{for(Fe=we,we=il;Fe.nodeType!==8;){if(!we){we=null;break e}if(Fe=Zl(Fe.nextSibling),Fe===null){we=null;break e}}we=Fe}we!==null?(f.memoizedState={dehydrated:we,treeContext:UA!==null?{id:Vl,overflow:Gl}:null,retryLane:536870912,hydrationErrors:null},Fe=Fa(18,null,null,0),Fe.stateNode=we,Fe.return=f,f.child=Fe,Ms=f,ls=null,Fe=!0):Fe=!1}Fe||MA(f)}if(we=f.memoizedState,we!==null&&(we=we.dehydrated,we!==null))return Jw(we)?f.lanes=32:f.lanes=536870912,null;VA(f)}return we=y.children,y=y.fallback,R?(Qu(),R=f.mode,we=Wx({mode:"hidden",children:we},R),y=Ql(y,R,m,null),we.return=f,y.return=f,we.sibling=y,f.child=we,R=f.child,R.memoizedState=fw(m),R.childLanes=hw(c,le,m),f.memoizedState=dw,y):(Ou(f),mw(f,we))}if(Fe=c.memoizedState,Fe!==null&&(we=Fe.dehydrated,we!==null)){if(Q)f.flags&256?(Ou(f),f.flags&=-257,f=pw(c,f,m)):f.memoizedState!==null?(Qu(),f.child=c.child,f.flags|=128,f=null):(Qu(),R=y.fallback,we=f.mode,y=Wx({mode:"visible",children:y.children},we),R=Ql(R,we,m,null),R.flags|=2,y.return=f,R.return=f,y.sibling=R,f.child=y,Uh(f,c.child,null,m),y=f.child,y.memoizedState=fw(m),y.childLanes=hw(c,le,m),f.memoizedState=dw,f=R);else if(Ou(f),Jw(we)){if(le=we.nextSibling&&we.nextSibling.dataset,le)var et=le.dgst;le=et,y=Error(r(419)),y.stack="",y.digest=le,Ru({value:y,source:null,stack:null}),f=pw(c,f,m)}else if(Ra||Du(c,f,m,!1),le=(m&c.childLanes)!==0,Ra||le){if(le=Jr,le!==null&&(y=m&-m,y=(y&42)!==0?1:ea(y),y=(y&(le.suspendedLanes|m))!==0?0:y,y!==0&&y!==Fe.retryLane))throw Fe.retryLane=y,Ol(c,y),Do(le,c,y),C4;we.data==="$?"||Dw(),f=pw(c,f,m)}else we.data==="$?"?(f.flags|=192,f.child=c.child,f=null):(c=Fe.treeContext,ls=Zl(we.nextSibling),Ms=f,fr=!0,Pc=null,il=!1,c!==null&&(so[Pi++]=Vl,so[Pi++]=Gl,so[Pi++]=UA,Vl=c.id,Gl=c.overflow,UA=f),f=mw(f,y.children),f.flags|=4096);return f}return R?(Qu(),R=y.fallback,we=f.mode,Fe=c.child,et=Fe.sibling,y=al(Fe,{mode:"hidden",children:y.children}),y.subtreeFlags=Fe.subtreeFlags&65011712,et!==null?R=al(et,R):(R=Ql(R,we,m,null),R.flags|=2),R.return=f,y.return=f,y.sibling=R,f.child=y,y=R,R=f.child,we=c.child.memoizedState,we===null?we=fw(m):(Fe=we.cachePool,Fe!==null?(et=js._currentValue,Fe=Fe.parent!==et?{parent:et,pool:et}:Fe):Fe=ce(),we={baseLanes:we.baseLanes|m,cachePool:Fe}),R.memoizedState=we,R.childLanes=hw(c,le,m),f.memoizedState=dw,y):(Ou(f),m=c.child,c=m.sibling,m=al(m,{mode:"visible",children:y.children}),m.return=f,m.sibling=null,c!==null&&(le=f.deletions,le===null?(f.deletions=[c],f.flags|=16):le.push(c)),f.child=m,f.memoizedState=null,m)}function mw(c,f){return f=Wx({mode:"visible",children:f},c.mode),f.return=c,c.child=f}function Wx(c,f){return c=Fa(22,c,null,f),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function pw(c,f,m){return Uh(f,c.child,null,m),c=mw(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function R4(c,f,m){c.lanes|=f;var y=c.alternate;y!==null&&(y.lanes|=f),Eh(c.return,f,m)}function gw(c,f,m,y,R){var Q=c.memoizedState;Q===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:y,tail:m,tailMode:R}:(Q.isBackwards=f,Q.rendering=null,Q.renderingStartTime=0,Q.last=y,Q.tail=m,Q.tailMode=R)}function D4(c,f,m){var y=f.pendingProps,R=y.revealOrder,Q=y.tail;if(qa(c,f,y.children,m),y=wa.current,(y&2)!==0)y=y&1|2,f.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&R4(c,m,f);else if(c.tag===19)R4(c,m,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}y&=1}switch(W(wa,y),R){case"forwards":for(m=f.child,R=null;m!==null;)c=m.alternate,c!==null&&Gx(c)===null&&(R=m),m=m.sibling;m=R,m===null?(R=f.child,f.child=null):(R=m.sibling,m.sibling=null),gw(f,!1,R,m,Q);break;case"backwards":for(m=null,R=f.child,f.child=null;R!==null;){if(c=R.alternate,c!==null&&Gx(c)===null){f.child=R;break}c=R.sibling,R.sibling=m,m=R,R=c}gw(f,!0,m,null,Q);break;case"together":gw(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function GA(c,f,m){if(c!==null&&(f.dependencies=c.dependencies),Ku|=f.lanes,(m&f.childLanes)===0)if(c!==null){if(Du(c,f,m,!1),(m&f.childLanes)===0)return null}else return null;if(c!==null&&f.child!==c.child)throw Error(r(153));if(f.child!==null){for(c=f.child,m=al(c,c.pendingProps),f.child=m,m.return=f;c.sibling!==null;)c=c.sibling,m=m.sibling=al(c,c.pendingProps),m.return=f;m.sibling=null}return f.child}function xw(c,f){return(c.lanes&f)!==0?!0:(c=c.dependencies,!!(c!==null&&Sh(c)))}function Kj(c,f,m){switch(f.tag){case 3:me(f,f.stateNode.containerInfo),jc(f,js,c.memoizedState.cache),ji();break;case 27:case 5:ke(f);break;case 4:me(f,f.stateNode.containerInfo);break;case 10:jc(f,f.type,f.memoizedProps.value);break;case 13:var y=f.memoizedState;if(y!==null)return y.dehydrated!==null?(Ou(f),f.flags|=128,null):(m&f.child.childLanes)!==0?F4(c,f,m):(Ou(f),c=GA(c,f,m),c!==null?c.sibling:null);Ou(f);break;case 19:var R=(c.flags&128)!==0;if(y=(m&f.childLanes)!==0,y||(Du(c,f,m,!1),y=(m&f.childLanes)!==0),R){if(y)return D4(c,f,m);f.flags|=128}if(R=f.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),W(wa,wa.current),y)break;return null;case 22:case 23:return f.lanes=0,T4(c,f,m);case 24:jc(f,js,c.memoizedState.cache)}return GA(c,f,m)}function U4(c,f,m){if(c!==null)if(c.memoizedProps!==f.pendingProps)Ra=!0;else{if(!xw(c,m)&&(f.flags&128)===0)return Ra=!1,Kj(c,f,m);Ra=(c.flags&131072)!==0}else Ra=!1,fr&&(f.flags&1048576)!==0&&Ex(f,Ch,f.index);switch(f.lanes=0,f.tag){case 16:e:{c=f.pendingProps;var y=f.elementType,R=y._init;if(y=R(y._payload),f.type=y,typeof y=="function")Iu(y)?(c=yf(y,c),f.tag=1,f=k4(null,f,y,c,m)):(f.tag=0,f=uw(null,f,y,c,m));else{if(y!=null){if(R=y.$$typeof,R===F){f.tag=11,f=E4(null,f,y,c,m);break e}else if(R===S){f.tag=14,f=_4(null,f,y,c,m);break e}}throw f=G(y)||y,Error(r(306,f,""))}}return f;case 0:return uw(c,f,f.type,f.pendingProps,m);case 1:return y=f.type,R=yf(y,f.pendingProps),k4(c,f,y,R,m);case 3:e:{if(me(f,f.stateNode.containerInfo),c===null)throw Error(r(387));y=f.pendingProps;var Q=f.memoizedState;R=Q.element,je(c,f),Ot(f,y,null,m);var le=f.memoizedState;if(y=le.cache,jc(f,js,y),y!==Q.cache&&_h(f,[js],m,!0),en(),y=le.element,Q.isDehydrated)if(Q={element:y,isDehydrated:!1,cache:le.cache},f.updateQueue.baseState=Q,f.memoizedState=Q,f.flags&256){f=I4(c,f,y,m);break e}else if(y!==R){R=Hn(Error(r(424)),f),Ru(R),f=I4(c,f,y,m);break e}else{switch(c=f.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(ls=Zl(c.firstChild),Ms=f,fr=!0,Pc=null,il=!0,m=f4(f,null,y,m),f.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(ji(),y===R){f=GA(c,f,m);break e}qa(c,f,y,m)}f=f.child}return f;case 26:return qx(c,f),c===null?(m=jT(f.type,null,f.pendingProps,null))?f.memoizedState=m:fr||(m=f.type,c=f.pendingProps,y=l1(oe.current).createElement(m),y[sr]=f,y[Xn]=c,$a(y,m,c),Qe(y),f.stateNode=y):f.memoizedState=jT(f.type,c.memoizedProps,f.pendingProps,c.memoizedState),null;case 27:return ke(f),c===null&&fr&&(y=f.stateNode=LT(f.type,f.pendingProps,oe.current),Ms=f,il=!0,R=ls,Yu(f.type)?(Xw=R,ls=Zl(y.firstChild)):ls=R),qa(c,f,f.pendingProps.children,m),qx(c,f),c===null&&(f.flags|=4194304),f.child;case 5:return c===null&&fr&&((R=y=ls)&&(y=yO(y,f.type,f.pendingProps,il),y!==null?(f.stateNode=y,Ms=f,ls=Zl(y.firstChild),il=!1,R=!0):R=!1),R||MA(f)),ke(f),R=f.type,Q=f.pendingProps,le=c!==null?c.memoizedProps:null,y=Q.children,Ww(R,Q)?y=null:le!==null&&Ww(R,le)&&(f.flags|=32),f.memoizedState!==null&&(R=Bo(c,f,Hc,null,null,m),lp._currentValue=R),qx(c,f),qa(c,f,y,m),f.child;case 6:return c===null&&fr&&((c=m=ls)&&(m=wO(m,f.pendingProps,il),m!==null?(f.stateNode=m,Ms=f,ls=null,c=!0):c=!1),c||MA(f)),null;case 13:return F4(c,f,m);case 4:return me(f,f.stateNode.containerInfo),y=f.pendingProps,c===null?f.child=Uh(f,null,y,m):qa(c,f,y,m),f.child;case 11:return E4(c,f,f.type,f.pendingProps,m);case 7:return qa(c,f,f.pendingProps,m),f.child;case 8:return qa(c,f,f.pendingProps.children,m),f.child;case 12:return qa(c,f,f.pendingProps.children,m),f.child;case 10:return y=f.pendingProps,jc(f,f.type,y.value),qa(c,f,y.children,m),f.child;case 9:return R=f.type._context,y=f.pendingProps.children,cl(f),R=Ps(R),y=y(R),f.flags|=1,qa(c,f,y,m),f.child;case 14:return _4(c,f,f.type,f.pendingProps,m);case 15:return S4(c,f,f.type,f.pendingProps,m);case 19:return D4(c,f,m);case 31:return y=f.pendingProps,m=f.mode,y={mode:y.mode,children:y.children},c===null?(m=Wx(y,m),m.ref=f.ref,f.child=m,m.return=f,f=m):(m=al(c.child,y),m.ref=f.ref,f.child=m,m.return=f,f=m),f;case 22:return T4(c,f,m);case 24:return cl(f),y=Ps(js),c===null?(R=z(),R===null&&(R=Jr,Q=Im(),R.pooledCache=Q,Q.refCount++,Q!==null&&(R.pooledCacheLanes|=m),R=Q),f.memoizedState={parent:y,cache:R},Me(f),jc(f,js,R)):((c.lanes&m)!==0&&(je(c,f),Ot(f,null,null,m),en()),R=c.memoizedState,Q=f.memoizedState,R.parent!==y?(R={parent:y,cache:y},f.memoizedState=R,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=R),jc(f,js,y)):(y=Q.cache,jc(f,js,y),y!==R.cache&&_h(f,[js],m,!0))),qa(c,f,f.pendingProps.children,m),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function zA(c){c.flags|=4}function L4(c,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!GT(f)){if(f=ul.current,f!==null&&((Ar&4194048)===Ar?zc!==null:(Ar&62914560)!==Ar&&(Ar&536870912)===0||f!==zc))throw qe=be,pe;c.flags|=8192}}function $x(c,f){f!==null&&(c.flags|=4),c.flags&16384&&(f=c.tag!==22?Jn():536870912,c.lanes|=f,jh|=f)}function qm(c,f){if(!fr)switch(c.tailMode){case"hidden":f=c.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var y=null;m!==null;)m.alternate!==null&&(y=m),m=m.sibling;y===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:y.sibling=null}}function ps(c){var f=c.alternate!==null&&c.alternate.child===c.child,m=0,y=0;if(f)for(var R=c.child;R!==null;)m|=R.lanes|R.childLanes,y|=R.subtreeFlags&65011712,y|=R.flags&65011712,R.return=c,R=R.sibling;else for(R=c.child;R!==null;)m|=R.lanes|R.childLanes,y|=R.subtreeFlags,y|=R.flags,R.return=c,R=R.sibling;return c.subtreeFlags|=y,c.childLanes=m,f}function qj(c,f,m){var y=f.pendingProps;switch(of(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ps(f),null;case 1:return ps(f),null;case 3:return m=f.stateNode,y=null,c!==null&&(y=c.memoizedState.cache),f.memoizedState.cache!==y&&(f.flags|=2048),ll(js),ge(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(c===null||c.child===null)&&(za(f)?zA(f):c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Sx())),ps(f),null;case 26:return m=f.memoizedState,c===null?(zA(f),m!==null?(ps(f),L4(f,m)):(ps(f),f.flags&=-16777217)):m?m!==c.memoizedState?(zA(f),ps(f),L4(f,m)):(ps(f),f.flags&=-16777217):(c.memoizedProps!==y&&zA(f),ps(f),f.flags&=-16777217),null;case 27:ve(f),m=oe.current;var R=f.type;if(c!==null&&f.stateNode!=null)c.memoizedProps!==y&&zA(f);else{if(!y){if(f.stateNode===null)throw Error(r(166));return ps(f),null}c=J.current,za(f)?_x(f):(c=LT(R,y,m),f.stateNode=c,zA(f))}return ps(f),null;case 5:if(ve(f),m=f.type,c!==null&&f.stateNode!=null)c.memoizedProps!==y&&zA(f);else{if(!y){if(f.stateNode===null)throw Error(r(166));return ps(f),null}if(c=J.current,za(f))_x(f);else{switch(R=l1(oe.current),c){case 1:c=R.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:c=R.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":c=R.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":c=R.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":c=R.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof y.is=="string"?R.createElement("select",{is:y.is}):R.createElement("select"),y.multiple?c.multiple=!0:y.size&&(c.size=y.size);break;default:c=typeof y.is=="string"?R.createElement(m,{is:y.is}):R.createElement(m)}}c[sr]=f,c[Xn]=y;e:for(R=f.child;R!==null;){if(R.tag===5||R.tag===6)c.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===f)break e;for(;R.sibling===null;){if(R.return===null||R.return===f)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}f.stateNode=c;e:switch($a(c,m,y),m){case"button":case"input":case"select":case"textarea":c=!!y.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&zA(f)}}return ps(f),f.flags&=-16777217,null;case 6:if(c&&f.stateNode!=null)c.memoizedProps!==y&&zA(f);else{if(typeof y!="string"&&f.stateNode===null)throw Error(r(166));if(c=oe.current,za(f)){if(c=f.stateNode,m=f.memoizedProps,y=null,R=Ms,R!==null)switch(R.tag){case 27:case 5:y=R.memoizedProps}c[sr]=f,c=!!(c.nodeValue===m||y!==null&&y.suppressHydrationWarning===!0||NT(c.nodeValue,m)),c||MA(f)}else c=l1(c).createTextNode(y),c[sr]=f,f.stateNode=c}return ps(f),null;case 13:if(y=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(R=za(f),y!==null&&y.dehydrated!==null){if(c===null){if(!R)throw Error(r(318));if(R=f.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(r(317));R[sr]=f}else ji(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;ps(f),R=!1}else R=Sx(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=R),R=!0;if(!R)return f.flags&256?(VA(f),f):(VA(f),null)}if(VA(f),(f.flags&128)!==0)return f.lanes=m,f;if(m=y!==null,c=c!==null&&c.memoizedState!==null,m){y=f.child,R=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(R=y.alternate.memoizedState.cachePool.pool);var Q=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(Q=y.memoizedState.cachePool.pool),Q!==R&&(y.flags|=2048)}return m!==c&&m&&(f.child.flags|=8192),$x(f,f.updateQueue),ps(f),null;case 4:return ge(),c===null&&Vw(f.stateNode.containerInfo),ps(f),null;case 10:return ll(f.type),ps(f),null;case 19:if(j(wa),R=f.memoizedState,R===null)return ps(f),null;if(y=(f.flags&128)!==0,Q=R.rendering,Q===null)if(y)qm(R,!1);else{if(Ns!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if(Q=Gx(c),Q!==null){for(f.flags|=128,qm(R,!1),c=Q.updateQueue,f.updateQueue=c,$x(f,c),f.subtreeFlags=0,c=m,m=f.child;m!==null;)rf(m,c),m=m.sibling;return W(wa,wa.current&1|2),f.child}c=c.sibling}R.tail!==null&&Ge()>Xx&&(f.flags|=128,y=!0,qm(R,!1),f.lanes=4194304)}else{if(!y)if(c=Gx(Q),c!==null){if(f.flags|=128,y=!0,c=c.updateQueue,f.updateQueue=c,$x(f,c),qm(R,!0),R.tail===null&&R.tailMode==="hidden"&&!Q.alternate&&!fr)return ps(f),null}else 2*Ge()-R.renderingStartTime>Xx&&m!==536870912&&(f.flags|=128,y=!0,qm(R,!1),f.lanes=4194304);R.isBackwards?(Q.sibling=f.child,f.child=Q):(c=R.last,c!==null?c.sibling=Q:f.child=Q,R.last=Q)}return R.tail!==null?(f=R.tail,R.rendering=f,R.tail=f.sibling,R.renderingStartTime=Ge(),f.sibling=null,c=wa.current,W(wa,y?c&1|2:c&1),f):(ps(f),null);case 22:case 23:return VA(f),Sn(),y=f.memoizedState!==null,c!==null?c.memoizedState!==null!==y&&(f.flags|=8192):y&&(f.flags|=8192),y?(m&536870912)!==0&&(f.flags&128)===0&&(ps(f),f.subtreeFlags&6&&(f.flags|=8192)):ps(f),m=f.updateQueue,m!==null&&$x(f,m.retryQueue),m=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),y=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==m&&(f.flags|=2048),c!==null&&j(L),null;case 24:return m=null,c!==null&&(m=c.memoizedState.cache),f.memoizedState.cache!==m&&(f.flags|=2048),ll(js),ps(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function Wj(c,f){switch(of(f),f.tag){case 1:return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return ll(js),ge(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 26:case 27:case 5:return ve(f),null;case 13:if(VA(f),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(r(340));ji()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return j(wa),null;case 4:return ge(),null;case 10:return ll(f.type),null;case 22:case 23:return VA(f),Sn(),c!==null&&j(L),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 24:return ll(js),null;case 25:return null;default:return null}}function M4(c,f){switch(of(f),f.tag){case 3:ll(js),ge();break;case 26:case 27:case 5:ve(f);break;case 4:ge();break;case 13:VA(f);break;case 19:j(wa);break;case 10:ll(f.type);break;case 22:case 23:VA(f),Sn(),c!==null&&j(L);break;case 24:ll(js)}}function Wm(c,f){try{var m=f.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var R=y.next;m=R;do{if((m.tag&c)===c){y=void 0;var Q=m.create,le=m.inst;y=Q(),le.destroy=y}m=m.next}while(m!==R)}}catch(we){Wr(f,f.return,we)}}function Hu(c,f,m){try{var y=f.updateQueue,R=y!==null?y.lastEffect:null;if(R!==null){var Q=R.next;y=Q;do{if((y.tag&c)===c){var le=y.inst,we=le.destroy;if(we!==void 0){le.destroy=void 0,R=f;var Fe=m,et=we;try{et()}catch(dt){Wr(R,Fe,dt)}}}y=y.next}while(y!==Q)}}catch(dt){Wr(f,f.return,dt)}}function P4(c){var f=c.updateQueue;if(f!==null){var m=c.stateNode;try{vr(f,m)}catch(y){Wr(c,c.return,y)}}}function j4(c,f,m){m.props=yf(c.type,c.memoizedProps),m.state=c.memoizedState;try{m.componentWillUnmount()}catch(y){Wr(c,f,y)}}function $m(c,f){try{var m=c.ref;if(m!==null){switch(c.tag){case 26:case 27:case 5:var y=c.stateNode;break;case 30:y=c.stateNode;break;default:y=c.stateNode}typeof m=="function"?c.refCleanup=m(y):m.current=y}}catch(R){Wr(c,f,R)}}function Kc(c,f){var m=c.ref,y=c.refCleanup;if(m!==null)if(typeof y=="function")try{y()}catch(R){Wr(c,f,R)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(R){Wr(c,f,R)}else m.current=null}function O4(c){var f=c.type,m=c.memoizedProps,y=c.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":m.autoFocus&&y.focus();break e;case"img":m.src?y.src=m.src:m.srcSet&&(y.srcset=m.srcSet)}}catch(R){Wr(c,c.return,R)}}function vw(c,f,m){try{var y=c.stateNode;mO(y,c.type,m,f),y[Xn]=f}catch(R){Wr(c,c.return,R)}}function Q4(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&Yu(c.type)||c.tag===4}function yw(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Q4(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&Yu(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function ww(c,f,m){var y=c.tag;if(y===5||y===6)c=c.stateNode,f?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(c,f):(f=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,f.appendChild(c),m=m._reactRootContainer,m!=null||f.onclick!==null||(f.onclick=o1));else if(y!==4&&(y===27&&Yu(c.type)&&(m=c.stateNode,f=null),c=c.child,c!==null))for(ww(c,f,m),c=c.sibling;c!==null;)ww(c,f,m),c=c.sibling}function Yx(c,f,m){var y=c.tag;if(y===5||y===6)c=c.stateNode,f?m.insertBefore(c,f):m.appendChild(c);else if(y!==4&&(y===27&&Yu(c.type)&&(m=c.stateNode),c=c.child,c!==null))for(Yx(c,f,m),c=c.sibling;c!==null;)Yx(c,f,m),c=c.sibling}function H4(c){var f=c.stateNode,m=c.memoizedProps;try{for(var y=c.type,R=f.attributes;R.length;)f.removeAttributeNode(R[0]);$a(f,y,m),f[sr]=c,f[Xn]=m}catch(Q){Wr(c,c.return,Q)}}var KA=!1,Qs=!1,bw=!1,V4=typeof WeakSet=="function"?WeakSet:Set,Da=null;function $j(c,f){if(c=c.containerInfo,Kw=h1,c=Ga(c),ya(c)){if("selectionStart"in c)var m={start:c.selectionStart,end:c.selectionEnd};else e:{m=(m=c.ownerDocument)&&m.defaultView||window;var y=m.getSelection&&m.getSelection();if(y&&y.rangeCount!==0){m=y.anchorNode;var R=y.anchorOffset,Q=y.focusNode;y=y.focusOffset;try{m.nodeType,Q.nodeType}catch{m=null;break e}var le=0,we=-1,Fe=-1,et=0,dt=0,yt=c,rt=null;t:for(;;){for(var st;yt!==m||R!==0&&yt.nodeType!==3||(we=le+R),yt!==Q||y!==0&&yt.nodeType!==3||(Fe=le+y),yt.nodeType===3&&(le+=yt.nodeValue.length),(st=yt.firstChild)!==null;)rt=yt,yt=st;for(;;){if(yt===c)break t;if(rt===m&&++et===R&&(we=le),rt===Q&&++dt===y&&(Fe=le),(st=yt.nextSibling)!==null)break;yt=rt,rt=yt.parentNode}yt=st}m=we===-1||Fe===-1?null:{start:we,end:Fe}}else m=null}m=m||{start:0,end:0}}else m=null;for(qw={focusedElem:c,selectionRange:m},h1=!1,Da=f;Da!==null;)if(f=Da,c=f.child,(f.subtreeFlags&1024)!==0&&c!==null)c.return=f,Da=c;else for(;Da!==null;){switch(f=Da,Q=f.alternate,c=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&Q!==null){c=void 0,m=f,R=Q.memoizedProps,Q=Q.memoizedState,y=m.stateNode;try{var Cn=yf(m.type,R,m.elementType===m.type);c=y.getSnapshotBeforeUpdate(Cn,Q),y.__reactInternalSnapshotBeforeUpdate=c}catch(fn){Wr(m,m.return,fn)}}break;case 3:if((c&1024)!==0){if(c=f.stateNode.containerInfo,m=c.nodeType,m===9)Yw(c);else if(m===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":Yw(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=f.sibling,c!==null){c.return=f.return,Da=c;break}Da=f.return}}function G4(c,f,m){var y=m.flags;switch(m.tag){case 0:case 11:case 15:Vu(c,m),y&4&&Wm(5,m);break;case 1:if(Vu(c,m),y&4)if(c=m.stateNode,f===null)try{c.componentDidMount()}catch(le){Wr(m,m.return,le)}else{var R=yf(m.type,f.memoizedProps);f=f.memoizedState;try{c.componentDidUpdate(R,f,c.__reactInternalSnapshotBeforeUpdate)}catch(le){Wr(m,m.return,le)}}y&64&&P4(m),y&512&&$m(m,m.return);break;case 3:if(Vu(c,m),y&64&&(c=m.updateQueue,c!==null)){if(f=null,m.child!==null)switch(m.child.tag){case 27:case 5:f=m.child.stateNode;break;case 1:f=m.child.stateNode}try{vr(c,f)}catch(le){Wr(m,m.return,le)}}break;case 27:f===null&&y&4&&H4(m);case 26:case 5:Vu(c,m),f===null&&y&4&&O4(m),y&512&&$m(m,m.return);break;case 12:Vu(c,m);break;case 13:Vu(c,m),y&4&&q4(c,m),y&64&&(c=m.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(m=sO.bind(null,m),bO(c,m))));break;case 22:if(y=m.memoizedState!==null||KA,!y){f=f!==null&&f.memoizedState!==null||Qs,R=KA;var Q=Qs;KA=y,(Qs=f)&&!Q?Gu(c,m,(m.subtreeFlags&8772)!==0):Vu(c,m),KA=R,Qs=Q}break;case 30:break;default:Vu(c,m)}}function z4(c){var f=c.alternate;f!==null&&(c.alternate=null,z4(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&_e(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var cs=null,io=!1;function qA(c,f,m){for(m=m.child;m!==null;)K4(c,f,m),m=m.sibling}function K4(c,f,m){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(Lt,m)}catch{}switch(m.tag){case 26:Qs||Kc(m,f),qA(c,f,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Qs||Kc(m,f);var y=cs,R=io;Yu(m.type)&&(cs=m.stateNode,io=!1),qA(c,f,m),sp(m.stateNode),cs=y,io=R;break;case 5:Qs||Kc(m,f);case 6:if(y=cs,R=io,cs=null,qA(c,f,m),cs=y,io=R,cs!==null)if(io)try{(cs.nodeType===9?cs.body:cs.nodeName==="HTML"?cs.ownerDocument.body:cs).removeChild(m.stateNode)}catch(Q){Wr(m,f,Q)}else try{cs.removeChild(m.stateNode)}catch(Q){Wr(m,f,Q)}break;case 18:cs!==null&&(io?(c=cs,DT(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,m.stateNode),dp(c)):DT(cs,m.stateNode));break;case 4:y=cs,R=io,cs=m.stateNode.containerInfo,io=!0,qA(c,f,m),cs=y,io=R;break;case 0:case 11:case 14:case 15:Qs||Hu(2,m,f),Qs||Hu(4,m,f),qA(c,f,m);break;case 1:Qs||(Kc(m,f),y=m.stateNode,typeof y.componentWillUnmount=="function"&&j4(m,f,y)),qA(c,f,m);break;case 21:qA(c,f,m);break;case 22:Qs=(y=Qs)||m.memoizedState!==null,qA(c,f,m),Qs=y;break;default:qA(c,f,m)}}function q4(c,f){if(f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{dp(c)}catch(m){Wr(f,f.return,m)}}function Yj(c){switch(c.tag){case 13:case 19:var f=c.stateNode;return f===null&&(f=c.stateNode=new V4),f;case 22:return c=c.stateNode,f=c._retryCache,f===null&&(f=c._retryCache=new V4),f;default:throw Error(r(435,c.tag))}}function Cw(c,f){var m=Yj(c);f.forEach(function(y){var R=aO.bind(null,c,y);m.has(y)||(m.add(y),y.then(R,R))})}function ko(c,f){var m=f.deletions;if(m!==null)for(var y=0;y<m.length;y++){var R=m[y],Q=c,le=f,we=le;e:for(;we!==null;){switch(we.tag){case 27:if(Yu(we.type)){cs=we.stateNode,io=!1;break e}break;case 5:cs=we.stateNode,io=!1;break e;case 3:case 4:cs=we.stateNode.containerInfo,io=!0;break e}we=we.return}if(cs===null)throw Error(r(160));K4(Q,le,R),cs=null,io=!1,Q=R.alternate,Q!==null&&(Q.return=null),R.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)W4(f,c),f=f.sibling}var Xl=null;function W4(c,f){var m=c.alternate,y=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:ko(f,c),Io(c),y&4&&(Hu(3,c,c.return),Wm(3,c),Hu(5,c,c.return));break;case 1:ko(f,c),Io(c),y&512&&(Qs||m===null||Kc(m,m.return)),y&64&&KA&&(c=c.updateQueue,c!==null&&(y=c.callbacks,y!==null&&(m=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=m===null?y:m.concat(y))));break;case 26:var R=Xl;if(ko(f,c),Io(c),y&512&&(Qs||m===null||Kc(m,m.return)),y&4){var Q=m!==null?m.memoizedState:null;if(y=c.memoizedState,m===null)if(y===null)if(c.stateNode===null){e:{y=c.type,m=c.memoizedProps,R=R.ownerDocument||R;t:switch(y){case"title":Q=R.getElementsByTagName("title")[0],(!Q||Q[Ce]||Q[sr]||Q.namespaceURI==="http://www.w3.org/2000/svg"||Q.hasAttribute("itemprop"))&&(Q=R.createElement(y),R.head.insertBefore(Q,R.querySelector("head > title"))),$a(Q,y,m),Q[sr]=c,Qe(Q),y=Q;break e;case"link":var le=HT("link","href",R).get(y+(m.href||""));if(le){for(var we=0;we<le.length;we++)if(Q=le[we],Q.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&Q.getAttribute("rel")===(m.rel==null?null:m.rel)&&Q.getAttribute("title")===(m.title==null?null:m.title)&&Q.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){le.splice(we,1);break t}}Q=R.createElement(y),$a(Q,y,m),R.head.appendChild(Q);break;case"meta":if(le=HT("meta","content",R).get(y+(m.content||""))){for(we=0;we<le.length;we++)if(Q=le[we],Q.getAttribute("content")===(m.content==null?null:""+m.content)&&Q.getAttribute("name")===(m.name==null?null:m.name)&&Q.getAttribute("property")===(m.property==null?null:m.property)&&Q.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&Q.getAttribute("charset")===(m.charSet==null?null:m.charSet)){le.splice(we,1);break t}}Q=R.createElement(y),$a(Q,y,m),R.head.appendChild(Q);break;default:throw Error(r(468,y))}Q[sr]=c,Qe(Q),y=Q}c.stateNode=y}else VT(R,c.type,c.stateNode);else c.stateNode=QT(R,y,c.memoizedProps);else Q!==y?(Q===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):Q.count--,y===null?VT(R,c.type,c.stateNode):QT(R,y,c.memoizedProps)):y===null&&c.stateNode!==null&&vw(c,c.memoizedProps,m.memoizedProps)}break;case 27:ko(f,c),Io(c),y&512&&(Qs||m===null||Kc(m,m.return)),m!==null&&y&4&&vw(c,c.memoizedProps,m.memoizedProps);break;case 5:if(ko(f,c),Io(c),y&512&&(Qs||m===null||Kc(m,m.return)),c.flags&32){R=c.stateNode;try{si(R,"")}catch(st){Wr(c,c.return,st)}}y&4&&c.stateNode!=null&&(R=c.memoizedProps,vw(c,R,m!==null?m.memoizedProps:R)),y&1024&&(bw=!0);break;case 6:if(ko(f,c),Io(c),y&4){if(c.stateNode===null)throw Error(r(162));y=c.memoizedProps,m=c.stateNode;try{m.nodeValue=y}catch(st){Wr(c,c.return,st)}}break;case 3:if(u1=null,R=Xl,Xl=c1(f.containerInfo),ko(f,c),Xl=R,Io(c),y&4&&m!==null&&m.memoizedState.isDehydrated)try{dp(f.containerInfo)}catch(st){Wr(c,c.return,st)}bw&&(bw=!1,$4(c));break;case 4:y=Xl,Xl=c1(c.stateNode.containerInfo),ko(f,c),Io(c),Xl=y;break;case 12:ko(f,c),Io(c);break;case 13:ko(f,c),Io(c),c.child.flags&8192&&c.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(Nw=Ge()),y&4&&(y=c.updateQueue,y!==null&&(c.updateQueue=null,Cw(c,y)));break;case 22:R=c.memoizedState!==null;var Fe=m!==null&&m.memoizedState!==null,et=KA,dt=Qs;if(KA=et||R,Qs=dt||Fe,ko(f,c),Qs=dt,KA=et,Io(c),y&8192)e:for(f=c.stateNode,f._visibility=R?f._visibility&-2:f._visibility|1,R&&(m===null||Fe||KA||Qs||wf(c)),m=null,f=c;;){if(f.tag===5||f.tag===26){if(m===null){Fe=m=f;try{if(Q=Fe.stateNode,R)le=Q.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{we=Fe.stateNode;var yt=Fe.memoizedProps.style,rt=yt!=null&&yt.hasOwnProperty("display")?yt.display:null;we.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(st){Wr(Fe,Fe.return,st)}}}else if(f.tag===6){if(m===null){Fe=f;try{Fe.stateNode.nodeValue=R?"":Fe.memoizedProps}catch(st){Wr(Fe,Fe.return,st)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===c)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break e;for(;f.sibling===null;){if(f.return===null||f.return===c)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}y&4&&(y=c.updateQueue,y!==null&&(m=y.retryQueue,m!==null&&(y.retryQueue=null,Cw(c,m))));break;case 19:ko(f,c),Io(c),y&4&&(y=c.updateQueue,y!==null&&(c.updateQueue=null,Cw(c,y)));break;case 30:break;case 21:break;default:ko(f,c),Io(c)}}function Io(c){var f=c.flags;if(f&2){try{for(var m,y=c.return;y!==null;){if(Q4(y)){m=y;break}y=y.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var R=m.stateNode,Q=yw(c);Yx(c,Q,R);break;case 5:var le=m.stateNode;m.flags&32&&(si(le,""),m.flags&=-33);var we=yw(c);Yx(c,we,le);break;case 3:case 4:var Fe=m.stateNode.containerInfo,et=yw(c);ww(c,et,Fe);break;default:throw Error(r(161))}}catch(dt){Wr(c,c.return,dt)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function $4(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var f=c;$4(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),c=c.sibling}}function Vu(c,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)G4(c,f.alternate,f),f=f.sibling}function wf(c){for(c=c.child;c!==null;){var f=c;switch(f.tag){case 0:case 11:case 14:case 15:Hu(4,f,f.return),wf(f);break;case 1:Kc(f,f.return);var m=f.stateNode;typeof m.componentWillUnmount=="function"&&j4(f,f.return,m),wf(f);break;case 27:sp(f.stateNode);case 26:case 5:Kc(f,f.return),wf(f);break;case 22:f.memoizedState===null&&wf(f);break;case 30:wf(f);break;default:wf(f)}c=c.sibling}}function Gu(c,f,m){for(m=m&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var y=f.alternate,R=c,Q=f,le=Q.flags;switch(Q.tag){case 0:case 11:case 15:Gu(R,Q,m),Wm(4,Q);break;case 1:if(Gu(R,Q,m),y=Q,R=y.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(et){Wr(y,y.return,et)}if(y=Q,R=y.updateQueue,R!==null){var we=y.stateNode;try{var Fe=R.shared.hiddenCallbacks;if(Fe!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Fe.length;R++)lr(Fe[R],we)}catch(et){Wr(y,y.return,et)}}m&&le&64&&P4(Q),$m(Q,Q.return);break;case 27:H4(Q);case 26:case 5:Gu(R,Q,m),m&&y===null&&le&4&&O4(Q),$m(Q,Q.return);break;case 12:Gu(R,Q,m);break;case 13:Gu(R,Q,m),m&&le&4&&q4(R,Q);break;case 22:Q.memoizedState===null&&Gu(R,Q,m),$m(Q,Q.return);break;case 30:break;default:Gu(R,Q,m)}f=f.sibling}}function Ew(c,f){var m=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),c=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(c=f.memoizedState.cachePool.pool),c!==m&&(c!=null&&c.refCount++,m!=null&&lf(m))}function _w(c,f){c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&lf(c))}function qc(c,f,m,y){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)Y4(c,f,m,y),f=f.sibling}function Y4(c,f,m,y){var R=f.flags;switch(f.tag){case 0:case 11:case 15:qc(c,f,m,y),R&2048&&Wm(9,f);break;case 1:qc(c,f,m,y);break;case 3:qc(c,f,m,y),R&2048&&(c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&lf(c)));break;case 12:if(R&2048){qc(c,f,m,y),c=f.stateNode;try{var Q=f.memoizedProps,le=Q.id,we=Q.onPostCommit;typeof we=="function"&&we(le,f.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Fe){Wr(f,f.return,Fe)}}else qc(c,f,m,y);break;case 13:qc(c,f,m,y);break;case 23:break;case 22:Q=f.stateNode,le=f.alternate,f.memoizedState!==null?Q._visibility&2?qc(c,f,m,y):Ym(c,f):Q._visibility&2?qc(c,f,m,y):(Q._visibility|=2,Lh(c,f,m,y,(f.subtreeFlags&10256)!==0)),R&2048&&Ew(le,f);break;case 24:qc(c,f,m,y),R&2048&&_w(f.alternate,f);break;default:qc(c,f,m,y)}}function Lh(c,f,m,y,R){for(R=R&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var Q=c,le=f,we=m,Fe=y,et=le.flags;switch(le.tag){case 0:case 11:case 15:Lh(Q,le,we,Fe,R),Wm(8,le);break;case 23:break;case 22:var dt=le.stateNode;le.memoizedState!==null?dt._visibility&2?Lh(Q,le,we,Fe,R):Ym(Q,le):(dt._visibility|=2,Lh(Q,le,we,Fe,R)),R&&et&2048&&Ew(le.alternate,le);break;case 24:Lh(Q,le,we,Fe,R),R&&et&2048&&_w(le.alternate,le);break;default:Lh(Q,le,we,Fe,R)}f=f.sibling}}function Ym(c,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var m=c,y=f,R=y.flags;switch(y.tag){case 22:Ym(m,y),R&2048&&Ew(y.alternate,y);break;case 24:Ym(m,y),R&2048&&_w(y.alternate,y);break;default:Ym(m,y)}f=f.sibling}}var Jm=8192;function Mh(c){if(c.subtreeFlags&Jm)for(c=c.child;c!==null;)J4(c),c=c.sibling}function J4(c){switch(c.tag){case 26:Mh(c),c.flags&Jm&&c.memoizedState!==null&&UO(Xl,c.memoizedState,c.memoizedProps);break;case 5:Mh(c);break;case 3:case 4:var f=Xl;Xl=c1(c.stateNode.containerInfo),Mh(c),Xl=f;break;case 22:c.memoizedState===null&&(f=c.alternate,f!==null&&f.memoizedState!==null?(f=Jm,Jm=16777216,Mh(c),Jm=f):Mh(c));break;default:Mh(c)}}function X4(c){var f=c.alternate;if(f!==null&&(c=f.child,c!==null)){f.child=null;do f=c.sibling,c.sibling=null,c=f;while(c!==null)}}function Xm(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var y=f[m];Da=y,eT(y,c)}X4(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Z4(c),c=c.sibling}function Z4(c){switch(c.tag){case 0:case 11:case 15:Xm(c),c.flags&2048&&Hu(9,c,c.return);break;case 3:Xm(c);break;case 12:Xm(c);break;case 22:var f=c.stateNode;c.memoizedState!==null&&f._visibility&2&&(c.return===null||c.return.tag!==13)?(f._visibility&=-3,Jx(c)):Xm(c);break;default:Xm(c)}}function Jx(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var y=f[m];Da=y,eT(y,c)}X4(c)}for(c=c.child;c!==null;){switch(f=c,f.tag){case 0:case 11:case 15:Hu(8,f,f.return),Jx(f);break;case 22:m=f.stateNode,m._visibility&2&&(m._visibility&=-3,Jx(f));break;default:Jx(f)}c=c.sibling}}function eT(c,f){for(;Da!==null;){var m=Da;switch(m.tag){case 0:case 11:case 15:Hu(8,m,f);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var y=m.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:lf(m.memoizedState.cache)}if(y=m.child,y!==null)y.return=m,Da=y;else e:for(m=c;Da!==null;){y=Da;var R=y.sibling,Q=y.return;if(z4(y),y===m){Da=null;break e}if(R!==null){R.return=Q,Da=R;break e}Da=Q}}}var Jj={getCacheForType:function(c){var f=Ps(js),m=f.data.get(c);return m===void 0&&(m=c(),f.data.set(c,m)),m}},Xj=typeof WeakMap=="function"?WeakMap:Map,Fr=0,Jr=null,Zn=null,Ar=0,Rr=0,Fo=null,zu=!1,Ph=!1,Sw=!1,WA=0,Ns=0,Ku=0,bf=0,Tw=0,dl=0,jh=0,Zm=null,oo=null,Bw=!1,Nw=0,Xx=1/0,Zx=null,qu=null,Wa=0,Wu=null,Oh=null,Qh=0,kw=0,Iw=null,tT=null,ep=0,Fw=null;function Ro(){if((Fr&2)!==0&&Ar!==0)return Ar&-Ar;if(K.T!==null){var c=PA;return c!==0?c:jw()}return us()}function nT(){dl===0&&(dl=(Ar&536870912)===0||fr?Zs():536870912);var c=ul.current;return c!==null&&(c.flags|=32),dl}function Do(c,f,m){(c===Jr&&(Rr===2||Rr===9)||c.cancelPendingCommit!==null)&&(Hh(c,0),$u(c,Ar,dl,!1)),as(c,m),((Fr&2)===0||c!==Jr)&&(c===Jr&&((Fr&2)===0&&(bf|=m),Ns===4&&$u(c,Ar,dl,!1)),Wc(c))}function rT(c,f,m){if((Fr&6)!==0)throw Error(r(327));var y=!m&&(f&124)===0&&(f&c.expiredLanes)===0||Er(c,f),R=y?tO(c,f):Uw(c,f,!0),Q=y;do{if(R===0){Ph&&!y&&$u(c,f,0,!1);break}else{if(m=c.current.alternate,Q&&!Zj(m)){R=Uw(c,f,!1),Q=!1;continue}if(R===2){if(Q=f,c.errorRecoveryDisabledLanes&Q)var le=0;else le=c.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){f=le;e:{var we=c;R=Zm;var Fe=we.current.memoizedState.isDehydrated;if(Fe&&(Hh(we,le).flags|=256),le=Uw(we,le,!1),le!==2){if(Sw&&!Fe){we.errorRecoveryDisabledLanes|=Q,bf|=Q,R=4;break e}Q=oo,oo=R,Q!==null&&(oo===null?oo=Q:oo.push.apply(oo,Q))}R=le}if(Q=!1,R!==2)continue}}if(R===1){Hh(c,0),$u(c,f,0,!0);break}e:{switch(y=c,Q=R,Q){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:$u(y,f,dl,!zu);break e;case 2:oo=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(R=Nw+300-Ge(),10<R)){if($u(y,f,dl,!zu),kn(y,0,!0)!==0)break e;y.timeoutHandle=FT(sT.bind(null,y,m,oo,Zx,Bw,f,dl,bf,jh,zu,Q,2,-0,0),R);break e}sT(y,m,oo,Zx,Bw,f,dl,bf,jh,zu,Q,0,-0,0)}}break}while(!0);Wc(c)}function sT(c,f,m,y,R,Q,le,we,Fe,et,dt,yt,rt,st){if(c.timeoutHandle=-1,yt=f.subtreeFlags,(yt&8192||(yt&16785408)===16785408)&&(op={stylesheets:null,count:0,unsuspend:DO},J4(f),yt=LO(),yt!==null)){c.cancelPendingCommit=yt(uT.bind(null,c,f,Q,m,y,R,le,we,Fe,dt,1,rt,st)),$u(c,Q,le,!et);return}uT(c,f,Q,m,y,R,le,we,Fe)}function Zj(c){for(var f=c;;){var m=f.tag;if((m===0||m===11||m===15)&&f.flags&16384&&(m=f.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var y=0;y<m.length;y++){var R=m[y],Q=R.getSnapshot;R=R.value;try{if(!ra(Q(),R))return!1}catch{return!1}}if(m=f.child,f.subtreeFlags&16384&&m!==null)m.return=f,f=m;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function $u(c,f,m,y){f&=~Tw,f&=~bf,c.suspendedLanes|=f,c.pingedLanes&=~f,y&&(c.warmLanes|=f),y=c.expirationTimes;for(var R=f;0<R;){var Q=31-Mt(R),le=1<<Q;y[Q]=-1,R&=~le}m!==0&&Zt(c,m,f)}function e1(){return(Fr&6)===0?(tp(0),!1):!0}function Rw(){if(Zn!==null){if(Rr===0)var c=Zn.return;else c=Zn,Kl=aa=null,Bh(c),Dh=null,zm=0,c=Zn;for(;c!==null;)M4(c.alternate,c),c=c.return;Zn=null}}function Hh(c,f){var m=c.timeoutHandle;m!==-1&&(c.timeoutHandle=-1,gO(m)),m=c.cancelPendingCommit,m!==null&&(c.cancelPendingCommit=null,m()),Rw(),Jr=c,Zn=m=al(c.current,null),Ar=f,Rr=0,Fo=null,zu=!1,Ph=Er(c,f),Sw=!1,jh=dl=Tw=bf=Ku=Ns=0,oo=Zm=null,Bw=!1,(f&8)!==0&&(f|=f&32);var y=c.entangledLanes;if(y!==0)for(c=c.entanglements,y&=f;0<y;){var R=31-Mt(y),Q=1<<R;f|=c[R],y&=~Q}return WA=f,no(),m}function aT(c,f){An=null,K.H=Qx,f===he||f===xe?(f=Ve(),Rr=3):f===pe?(f=Ve(),Rr=4):Rr=f===C4?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Fo=f,Zn===null&&(Ns=1,Kx(c,Hn(f,c.current)))}function iT(){var c=K.H;return K.H=Qx,c===null?Qx:c}function oT(){var c=K.A;return K.A=Jj,c}function Dw(){Ns=4,zu||(Ar&4194048)!==Ar&&ul.current!==null||(Ph=!0),(Ku&134217727)===0&&(bf&134217727)===0||Jr===null||$u(Jr,Ar,dl,!1)}function Uw(c,f,m){var y=Fr;Fr|=2;var R=iT(),Q=oT();(Jr!==c||Ar!==f)&&(Zx=null,Hh(c,f)),f=!1;var le=Ns;e:do try{if(Rr!==0&&Zn!==null){var we=Zn,Fe=Fo;switch(Rr){case 8:Rw(),le=6;break e;case 3:case 2:case 9:case 6:ul.current===null&&(f=!0);var et=Rr;if(Rr=0,Fo=null,Vh(c,we,Fe,et),m&&Ph){le=0;break e}break;default:et=Rr,Rr=0,Fo=null,Vh(c,we,Fe,et)}}eO(),le=Ns;break}catch(dt){aT(c,dt)}while(!0);return f&&c.shellSuspendCounter++,Kl=aa=null,Fr=y,K.H=R,K.A=Q,Zn===null&&(Jr=null,Ar=0,no()),le}function eO(){for(;Zn!==null;)lT(Zn)}function tO(c,f){var m=Fr;Fr|=2;var y=iT(),R=oT();Jr!==c||Ar!==f?(Zx=null,Xx=Ge()+500,Hh(c,f)):Ph=Er(c,f);e:do try{if(Rr!==0&&Zn!==null){f=Zn;var Q=Fo;t:switch(Rr){case 1:Rr=0,Fo=null,Vh(c,f,Q,1);break;case 2:case 9:if(Te(Q)){Rr=0,Fo=null,cT(f);break}f=function(){Rr!==2&&Rr!==9||Jr!==c||(Rr=7),Wc(c)},Q.then(f,f);break e;case 3:Rr=7;break e;case 4:Rr=5;break e;case 7:Te(Q)?(Rr=0,Fo=null,cT(f)):(Rr=0,Fo=null,Vh(c,f,Q,7));break;case 5:var le=null;switch(Zn.tag){case 26:le=Zn.memoizedState;case 5:case 27:var we=Zn;if(!le||GT(le)){Rr=0,Fo=null;var Fe=we.sibling;if(Fe!==null)Zn=Fe;else{var et=we.return;et!==null?(Zn=et,t1(et)):Zn=null}break t}}Rr=0,Fo=null,Vh(c,f,Q,5);break;case 6:Rr=0,Fo=null,Vh(c,f,Q,6);break;case 8:Rw(),Ns=6;break e;default:throw Error(r(462))}}nO();break}catch(dt){aT(c,dt)}while(!0);return Kl=aa=null,K.H=y,K.A=R,Fr=m,Zn!==null?0:(Jr=null,Ar=0,no(),Ns)}function nO(){for(;Zn!==null&&!De();)lT(Zn)}function lT(c){var f=U4(c.alternate,c,WA);c.memoizedProps=c.pendingProps,f===null?t1(c):Zn=f}function cT(c){var f=c,m=f.alternate;switch(f.tag){case 15:case 0:f=N4(m,f,f.pendingProps,f.type,void 0,Ar);break;case 11:f=N4(m,f,f.pendingProps,f.type.render,f.ref,Ar);break;case 5:Bh(f);default:M4(m,f),f=Zn=rf(f,WA),f=U4(m,f,WA)}c.memoizedProps=c.pendingProps,f===null?t1(c):Zn=f}function Vh(c,f,m,y){Kl=aa=null,Bh(f),Dh=null,zm=0;var R=f.return;try{if(zj(c,R,f,m,Ar)){Ns=1,Kx(c,Hn(m,c.current)),Zn=null;return}}catch(Q){if(R!==null)throw Zn=R,Q;Ns=1,Kx(c,Hn(m,c.current)),Zn=null;return}f.flags&32768?(fr||y===1?c=!0:Ph||(Ar&536870912)!==0?c=!1:(zu=c=!0,(y===2||y===9||y===3||y===6)&&(y=ul.current,y!==null&&y.tag===13&&(y.flags|=16384))),AT(f,c)):t1(f)}function t1(c){var f=c;do{if((f.flags&32768)!==0){AT(f,zu);return}c=f.return;var m=qj(f.alternate,f,WA);if(m!==null){Zn=m;return}if(f=f.sibling,f!==null){Zn=f;return}Zn=f=c}while(f!==null);Ns===0&&(Ns=5)}function AT(c,f){do{var m=Wj(c.alternate,c);if(m!==null){m.flags&=32767,Zn=m;return}if(m=c.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!f&&(c=c.sibling,c!==null)){Zn=c;return}Zn=c=m}while(c!==null);Ns=6,Zn=null}function uT(c,f,m,y,R,Q,le,we,Fe){c.cancelPendingCommit=null;do n1();while(Wa!==0);if((Fr&6)!==0)throw Error(r(327));if(f!==null){if(f===c.current)throw Error(r(177));if(Q=f.lanes|f.childLanes,Q|=fs,Rn(c,m,Q,le,we,Fe),c===Jr&&(Zn=Jr=null,Ar=0),Oh=f,Wu=c,Qh=m,kw=Q,Iw=R,tT=y,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,iO(Ct,function(){return pT(),null})):(c.callbackNode=null,c.callbackPriority=0),y=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||y){y=K.T,K.T=null,R=q.p,q.p=2,le=Fr,Fr|=4;try{$j(c,f,m)}finally{Fr=le,q.p=R,K.T=y}}Wa=1,dT(),fT(),hT()}}function dT(){if(Wa===1){Wa=0;var c=Wu,f=Oh,m=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||m){m=K.T,K.T=null;var y=q.p;q.p=2;var R=Fr;Fr|=4;try{W4(f,c);var Q=qw,le=Ga(c.containerInfo),we=Q.focusedElem,Fe=Q.selectionRange;if(le!==we&&we&&we.ownerDocument&&Nc(we.ownerDocument.documentElement,we)){if(Fe!==null&&ya(we)){var et=Fe.start,dt=Fe.end;if(dt===void 0&&(dt=et),"selectionStart"in we)we.selectionStart=et,we.selectionEnd=Math.min(dt,we.value.length);else{var yt=we.ownerDocument||document,rt=yt&&yt.defaultView||window;if(rt.getSelection){var st=rt.getSelection(),Cn=we.textContent.length,fn=Math.min(Fe.start,Cn),Gr=Fe.end===void 0?fn:Math.min(Fe.end,Cn);!st.extend&&fn>Gr&&(le=Gr,Gr=fn,fn=le);var ze=Pl(we,fn),Pe=Pl(we,Gr);if(ze&&Pe&&(st.rangeCount!==1||st.anchorNode!==ze.node||st.anchorOffset!==ze.offset||st.focusNode!==Pe.node||st.focusOffset!==Pe.offset)){var $e=yt.createRange();$e.setStart(ze.node,ze.offset),st.removeAllRanges(),fn>Gr?(st.addRange($e),st.extend(Pe.node,Pe.offset)):($e.setEnd(Pe.node,Pe.offset),st.addRange($e))}}}}for(yt=[],st=we;st=st.parentNode;)st.nodeType===1&&yt.push({element:st,left:st.scrollLeft,top:st.scrollTop});for(typeof we.focus=="function"&&we.focus(),we=0;we<yt.length;we++){var ht=yt[we];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}h1=!!Kw,qw=Kw=null}finally{Fr=R,q.p=y,K.T=m}}c.current=f,Wa=2}}function fT(){if(Wa===2){Wa=0;var c=Wu,f=Oh,m=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||m){m=K.T,K.T=null;var y=q.p;q.p=2;var R=Fr;Fr|=4;try{G4(c,f.alternate,f)}finally{Fr=R,q.p=y,K.T=m}}Wa=3}}function hT(){if(Wa===4||Wa===3){Wa=0,Ee();var c=Wu,f=Oh,m=Qh,y=tT;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Wa=5:(Wa=0,Oh=Wu=null,mT(c,c.pendingLanes));var R=c.pendingLanes;if(R===0&&(qu=null),jr(m),f=f.stateNode,Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(Lt,f,void 0,(f.current.flags&128)===128)}catch{}if(y!==null){f=K.T,R=q.p,q.p=2,K.T=null;try{for(var Q=c.onRecoverableError,le=0;le<y.length;le++){var we=y[le];Q(we.value,{componentStack:we.stack})}}finally{K.T=f,q.p=R}}(Qh&3)!==0&&n1(),Wc(c),R=c.pendingLanes,(m&4194090)!==0&&(R&42)!==0?c===Fw?ep++:(ep=0,Fw=c):ep=0,tp(0)}}function mT(c,f){(c.pooledCacheLanes&=f)===0&&(f=c.pooledCache,f!=null&&(c.pooledCache=null,lf(f)))}function n1(c){return dT(),fT(),hT(),pT()}function pT(){if(Wa!==5)return!1;var c=Wu,f=kw;kw=0;var m=jr(Qh),y=K.T,R=q.p;try{q.p=32>m?32:m,K.T=null,m=Iw,Iw=null;var Q=Wu,le=Qh;if(Wa=0,Oh=Wu=null,Qh=0,(Fr&6)!==0)throw Error(r(331));var we=Fr;if(Fr|=4,Z4(Q.current),Y4(Q,Q.current,le,m),Fr=we,tp(0,!1),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(Lt,Q)}catch{}return!0}finally{q.p=R,K.T=y,mT(c,f)}}function gT(c,f,m){f=Hn(m,f),f=Aw(c.stateNode,f,2),c=xt(c,f,2),c!==null&&(as(c,2),Wc(c))}function Wr(c,f,m){if(c.tag===3)gT(c,c,m);else for(;f!==null;){if(f.tag===3){gT(f,c,m);break}else if(f.tag===1){var y=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(qu===null||!qu.has(y))){c=Hn(m,c),m=w4(2),y=xt(f,m,2),y!==null&&(b4(m,y,f,c),as(y,2),Wc(y));break}}f=f.return}}function Lw(c,f,m){var y=c.pingCache;if(y===null){y=c.pingCache=new Xj;var R=new Set;y.set(f,R)}else R=y.get(f),R===void 0&&(R=new Set,y.set(f,R));R.has(m)||(Sw=!0,R.add(m),c=rO.bind(null,c,f,m),f.then(c,c))}function rO(c,f,m){var y=c.pingCache;y!==null&&y.delete(f),c.pingedLanes|=c.suspendedLanes&m,c.warmLanes&=~m,Jr===c&&(Ar&m)===m&&(Ns===4||Ns===3&&(Ar&62914560)===Ar&&300>Ge()-Nw?(Fr&2)===0&&Hh(c,0):Tw|=m,jh===Ar&&(jh=0)),Wc(c)}function xT(c,f){f===0&&(f=Jn()),c=Ol(c,f),c!==null&&(as(c,f),Wc(c))}function sO(c){var f=c.memoizedState,m=0;f!==null&&(m=f.retryLane),xT(c,m)}function aO(c,f){var m=0;switch(c.tag){case 13:var y=c.stateNode,R=c.memoizedState;R!==null&&(m=R.retryLane);break;case 19:y=c.stateNode;break;case 22:y=c.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(f),xT(c,m)}function iO(c,f){return Re(c,f)}var r1=null,Gh=null,Mw=!1,s1=!1,Pw=!1,Cf=0;function Wc(c){c!==Gh&&c.next===null&&(Gh===null?r1=Gh=c:Gh=Gh.next=c),s1=!0,Mw||(Mw=!0,lO())}function tp(c,f){if(!Pw&&s1){Pw=!0;do for(var m=!1,y=r1;y!==null;){if(c!==0){var R=y.pendingLanes;if(R===0)var Q=0;else{var le=y.suspendedLanes,we=y.pingedLanes;Q=(1<<31-Mt(42|c)+1)-1,Q&=R&~(le&~we),Q=Q&201326741?Q&201326741|1:Q?Q|2:0}Q!==0&&(m=!0,bT(y,Q))}else Q=Ar,Q=kn(y,y===Jr?Q:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(Q&3)===0||Er(y,Q)||(m=!0,bT(y,Q));y=y.next}while(m);Pw=!1}}function oO(){vT()}function vT(){s1=Mw=!1;var c=0;Cf!==0&&(pO()&&(c=Cf),Cf=0);for(var f=Ge(),m=null,y=r1;y!==null;){var R=y.next,Q=yT(y,f);Q===0?(y.next=null,m===null?r1=R:m.next=R,R===null&&(Gh=m)):(m=y,(c!==0||(Q&3)!==0)&&(s1=!0)),y=R}tp(c)}function yT(c,f){for(var m=c.suspendedLanes,y=c.pingedLanes,R=c.expirationTimes,Q=c.pendingLanes&-62914561;0<Q;){var le=31-Mt(Q),we=1<<le,Fe=R[le];Fe===-1?((we&m)===0||(we&y)!==0)&&(R[le]=Tn(we,f)):Fe<=f&&(c.expiredLanes|=we),Q&=~we}if(f=Jr,m=Ar,m=kn(c,c===f?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),y=c.callbackNode,m===0||c===f&&(Rr===2||Rr===9)||c.cancelPendingCommit!==null)return y!==null&&y!==null&&Je(y),c.callbackNode=null,c.callbackPriority=0;if((m&3)===0||Er(c,m)){if(f=m&-m,f===c.callbackPriority)return f;switch(y!==null&&Je(y),jr(m)){case 2:case 8:m=mt;break;case 32:m=Ct;break;case 268435456:m=Nt;break;default:m=Ct}return y=wT.bind(null,c),m=Re(m,y),c.callbackPriority=f,c.callbackNode=m,f}return y!==null&&y!==null&&Je(y),c.callbackPriority=2,c.callbackNode=null,2}function wT(c,f){if(Wa!==0&&Wa!==5)return c.callbackNode=null,c.callbackPriority=0,null;var m=c.callbackNode;if(n1()&&c.callbackNode!==m)return null;var y=Ar;return y=kn(c,c===Jr?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),y===0?null:(rT(c,y,f),yT(c,Ge()),c.callbackNode!=null&&c.callbackNode===m?wT.bind(null,c):null)}function bT(c,f){if(n1())return null;rT(c,f,!0)}function lO(){xO(function(){(Fr&6)!==0?Re(it,oO):vT()})}function jw(){return Cf===0&&(Cf=Zs()),Cf}function CT(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:yo(""+c)}function ET(c,f){var m=f.ownerDocument.createElement("input");return m.name=f.name,m.value=f.value,c.id&&m.setAttribute("form",c.id),f.parentNode.insertBefore(m,f),c=new FormData(c),m.parentNode.removeChild(m),c}function cO(c,f,m,y,R){if(f==="submit"&&m&&m.stateNode===R){var Q=CT((R[Xn]||null).action),le=y.submitter;le&&(f=(f=le[Xn]||null)?CT(f.formAction):le.getAttribute("formAction"),f!==null&&(Q=f,le=null));var we=new Yo("action","action",null,y,R);c.push({event:we,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Cf!==0){var Fe=le?ET(R,le):new FormData(R);Al(m,{pending:!0,data:Fe,method:R.method,action:Q},null,Fe)}}else typeof Q=="function"&&(we.preventDefault(),Fe=le?ET(R,le):new FormData(R),Al(m,{pending:!0,data:Fe,method:R.method,action:Q},Q,Fe))},currentTarget:R}]})}}for(var Ow=0;Ow<FA.length;Ow++){var Qw=FA[Ow],AO=Qw.toLowerCase(),uO=Qw[0].toUpperCase()+Qw.slice(1);os(AO,"on"+uO)}os(Nu,"onAnimationEnd"),os(Ic,"onAnimationIteration"),os(Fc,"onAnimationStart"),os("dblclick","onDoubleClick"),os("focusin","onFocus"),os("focusout","onBlur"),os(Rc,"onTransitionRun"),os(IA,"onTransitionStart"),os(ku,"onTransitionCancel"),os(Dc,"onTransitionEnd"),Bt("onMouseEnter",["mouseout","mouseover"]),Bt("onMouseLeave",["mouseout","mouseover"]),Bt("onPointerEnter",["pointerout","pointerover"]),Bt("onPointerLeave",["pointerout","pointerover"]),vt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vt("onBeforeInput",["compositionend","keypress","textInput","paste"]),vt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var np="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(np));function _T(c,f){f=(f&4)!==0;for(var m=0;m<c.length;m++){var y=c[m],R=y.event;y=y.listeners;e:{var Q=void 0;if(f)for(var le=y.length-1;0<=le;le--){var we=y[le],Fe=we.instance,et=we.currentTarget;if(we=we.listener,Fe!==Q&&R.isPropagationStopped())break e;Q=we,R.currentTarget=et;try{Q(R)}catch(dt){zx(dt)}R.currentTarget=null,Q=Fe}else for(le=0;le<y.length;le++){if(we=y[le],Fe=we.instance,et=we.currentTarget,we=we.listener,Fe!==Q&&R.isPropagationStopped())break e;Q=we,R.currentTarget=et;try{Q(R)}catch(dt){zx(dt)}R.currentTarget=null,Q=Fe}}}}function er(c,f){var m=f[Nr];m===void 0&&(m=f[Nr]=new Set);var y=c+"__bubble";m.has(y)||(ST(f,c,2,!1),m.add(y))}function Hw(c,f,m){var y=0;f&&(y|=4),ST(m,c,y,f)}var a1="_reactListening"+Math.random().toString(36).slice(2);function Vw(c){if(!c[a1]){c[a1]=!0,We.forEach(function(m){m!=="selectionchange"&&(dO.has(m)||Hw(m,!1,c),Hw(m,!0,c))});var f=c.nodeType===9?c:c.ownerDocument;f===null||f[a1]||(f[a1]=!0,Hw("selectionchange",!1,f))}}function ST(c,f,m,y){switch(YT(f)){case 2:var R=jO;break;case 8:R=OO;break;default:R=rb}m=R.bind(null,f,m,c),R=void 0,!Va||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(R=!0),y?R!==void 0?c.addEventListener(f,m,{capture:!0,passive:R}):c.addEventListener(f,m,!0):R!==void 0?c.addEventListener(f,m,{passive:R}):c.addEventListener(f,m,!1)}function Gw(c,f,m,y,R){var Q=y;if((f&1)===0&&(f&2)===0&&y!==null)e:for(;;){if(y===null)return;var le=y.tag;if(le===3||le===4){var we=y.stateNode.containerInfo;if(we===R)break;if(le===4)for(le=y.return;le!==null;){var Fe=le.tag;if((Fe===3||Fe===4)&&le.stateNode.containerInfo===R)return;le=le.return}for(;we!==null;){if(le=Se(we),le===null)return;if(Fe=le.tag,Fe===5||Fe===6||Fe===26||Fe===27){y=Q=le;continue e}we=we.parentNode}}y=y.return}Eu(function(){var et=Q,dt=kr(m),yt=[];e:{var rt=jl.get(c);if(rt!==void 0){var st=Yo,Cn=c;switch(c){case"keypress":if(oi(m)===0)break e;case"keydown":case"keyup":st=Eo;break;case"focusin":Cn="focus",st=Xo;break;case"focusout":Cn="blur",st=Xo;break;case"beforeblur":case"afterblur":st=Xo;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=_s;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=Jo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=_c;break;case Nu:case Ic:case Fc:st=bc;break;case Dc:st=Ae;break;case"scroll":case"scrollend":st=_A;break;case"wheel":st=Ue;break;case"copy":case"cut":case"paste":st=Cc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=Ml;break;case"toggle":case"beforetoggle":st=ot}var fn=(f&4)!==0,Gr=!fn&&(c==="scroll"||c==="scrollend"),ze=fn?rt!==null?rt+"Capture":null:rt;fn=[];for(var Pe=et,$e;Pe!==null;){var ht=Pe;if($e=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||$e===null||ze===null||(ht=Ba(Pe,ze),ht!=null&&fn.push(rp(Pe,ht,$e))),Gr)break;Pe=Pe.return}0<fn.length&&(rt=new st(rt,Cn,null,m,dt),yt.push({event:rt,listeners:fn}))}}if((f&7)===0){e:{if(rt=c==="mouseover"||c==="pointerover",st=c==="mouseout"||c==="pointerout",rt&&m!==Wi&&(Cn=m.relatedTarget||m.fromElement)&&(Se(Cn)||Cn[_r]))break e;if((st||rt)&&(rt=dt.window===dt?dt:(rt=dt.ownerDocument)?rt.defaultView||rt.parentWindow:window,st?(Cn=m.relatedTarget||m.toElement,st=et,Cn=Cn?Se(Cn):null,Cn!==null&&(Gr=a(Cn),fn=Cn.tag,Cn!==Gr||fn!==5&&fn!==27&&fn!==6)&&(Cn=null)):(st=null,Cn=et),st!==Cn)){if(fn=_s,ht="onMouseLeave",ze="onMouseEnter",Pe="mouse",(c==="pointerout"||c==="pointerover")&&(fn=Ml,ht="onPointerLeave",ze="onPointerEnter",Pe="pointer"),Gr=st==null?rt:Ke(st),$e=Cn==null?rt:Ke(Cn),rt=new fn(ht,Pe+"leave",st,m,dt),rt.target=Gr,rt.relatedTarget=$e,ht=null,Se(dt)===et&&(fn=new fn(ze,Pe+"enter",Cn,m,dt),fn.target=$e,fn.relatedTarget=Gr,ht=fn),Gr=ht,st&&Cn)t:{for(fn=st,ze=Cn,Pe=0,$e=fn;$e;$e=zh($e))Pe++;for($e=0,ht=ze;ht;ht=zh(ht))$e++;for(;0<Pe-$e;)fn=zh(fn),Pe--;for(;0<$e-Pe;)ze=zh(ze),$e--;for(;Pe--;){if(fn===ze||ze!==null&&fn===ze.alternate)break t;fn=zh(fn),ze=zh(ze)}fn=null}else fn=null;st!==null&&TT(yt,rt,st,fn,!1),Cn!==null&&Gr!==null&&TT(yt,Gr,Cn,fn,!0)}}e:{if(rt=et?Ke(et):window,st=rt.nodeName&&rt.nodeName.toLowerCase(),st==="select"||st==="input"&&rt.type==="file")var Jt=Tu;else if(Sr(rt))if(TA)Jt=yh;else{Jt=Nm;var Wn=ci}else st=rt.nodeName,!st||st.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?et&&CA(et.elementType)&&(Jt=Tu):Jt=tf;if(Jt&&(Jt=Jt(c,et))){eo(yt,Jt,m,dt);break e}Wn&&Wn(c,rt,et),c==="focusout"&&et&&rt.type==="number"&&et.memoizedProps.value!=null&&qo(rt,"number",rt.value)}switch(Wn=et?Ke(et):window,c){case"focusin":(Sr(Wn)||Wn.contentEditable==="true")&&(Ai=Wn,_o=et,rl=null);break;case"focusout":rl=_o=Ai=null;break;case"mousedown":So=!0;break;case"contextmenu":case"mouseup":case"dragend":So=!1,is(yt,m,dt);break;case"selectionchange":if(kc)break;case"keydown":case"keyup":is(yt,m,dt)}var rn;if(jt)e:{switch(c){case"compositionstart":var pn="onCompositionStart";break e;case"compositionend":pn="onCompositionEnd";break e;case"compositionupdate":pn="onCompositionUpdate";break e}pn=void 0}else dn?Ze(c,m)&&(pn="onCompositionEnd"):c==="keydown"&&m.keyCode===229&&(pn="onCompositionStart");pn&&(re&&m.locale!=="ko"&&(dn||pn!=="onCompositionStart"?pn==="onCompositionEnd"&&dn&&(rn=EA()):(ii=dt,$o="value"in ii?ii.value:ii.textContent,dn=!0)),Wn=i1(et,pn),0<Wn.length&&(pn=new Dl(pn,c,null,m,dt),yt.push({event:pn,listeners:Wn}),rn?pn.data=rn:(rn=_t(m),rn!==null&&(pn.data=rn)))),(rn=Y?qn(c,m):_n(c,m))&&(pn=i1(et,"onBeforeInput"),0<pn.length&&(Wn=new Dl("onBeforeInput","beforeinput",null,m,dt),yt.push({event:Wn,listeners:pn}),Wn.data=rn)),cO(yt,c,et,m,dt)}_T(yt,f)})}function rp(c,f,m){return{instance:c,listener:f,currentTarget:m}}function i1(c,f){for(var m=f+"Capture",y=[];c!==null;){var R=c,Q=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||Q===null||(R=Ba(c,m),R!=null&&y.unshift(rp(c,R,Q)),R=Ba(c,f),R!=null&&y.push(rp(c,R,Q))),c.tag===3)return y;c=c.return}return[]}function zh(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function TT(c,f,m,y,R){for(var Q=f._reactName,le=[];m!==null&&m!==y;){var we=m,Fe=we.alternate,et=we.stateNode;if(we=we.tag,Fe!==null&&Fe===y)break;we!==5&&we!==26&&we!==27||et===null||(Fe=et,R?(et=Ba(m,Q),et!=null&&le.unshift(rp(m,et,Fe))):R||(et=Ba(m,Q),et!=null&&le.push(rp(m,et,Fe)))),m=m.return}le.length!==0&&c.push({event:f,listeners:le})}var fO=/\r\n?/g,hO=/\u0000|\uFFFD/g;function BT(c){return(typeof c=="string"?c:""+c).replace(fO,`
`).replace(hO,"")}function NT(c,f){return f=BT(f),BT(c)===f}function o1(){}function Vr(c,f,m,y,R,Q){switch(m){case"children":typeof y=="string"?f==="body"||f==="textarea"&&y===""||si(c,y):(typeof y=="number"||typeof y=="bigint")&&f!=="body"&&si(c,""+y);break;case"className":Un(c,"class",y);break;case"tabIndex":Un(c,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Un(c,m,y);break;case"style":bA(c,y,Q);break;case"data":if(f!=="object"){Un(c,"data",y);break}case"src":case"href":if(y===""&&(f!=="a"||m!=="href")){c.removeAttribute(m);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){c.removeAttribute(m);break}y=yo(""+y),c.setAttribute(m,y);break;case"action":case"formAction":if(typeof y=="function"){c.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Q=="function"&&(m==="formAction"?(f!=="input"&&Vr(c,f,"name",R.name,R,null),Vr(c,f,"formEncType",R.formEncType,R,null),Vr(c,f,"formMethod",R.formMethod,R,null),Vr(c,f,"formTarget",R.formTarget,R,null)):(Vr(c,f,"encType",R.encType,R,null),Vr(c,f,"method",R.method,R,null),Vr(c,f,"target",R.target,R,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){c.removeAttribute(m);break}y=yo(""+y),c.setAttribute(m,y);break;case"onClick":y!=null&&(c.onclick=o1);break;case"onScroll":y!=null&&er("scroll",c);break;case"onScrollEnd":y!=null&&er("scrollend",c);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(m=y.__html,m!=null){if(R.children!=null)throw Error(r(60));c.innerHTML=m}}break;case"multiple":c.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":c.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){c.removeAttribute("xlink:href");break}m=yo(""+y),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?c.setAttribute(m,""+y):c.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?c.setAttribute(m,""):c.removeAttribute(m);break;case"capture":case"download":y===!0?c.setAttribute(m,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?c.setAttribute(m,y):c.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?c.setAttribute(m,y):c.removeAttribute(m);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?c.removeAttribute(m):c.setAttribute(m,y);break;case"popover":er("beforetoggle",c),er("toggle",c),Dn(c,"popover",y);break;case"xlinkActuate":On(c,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":On(c,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":On(c,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":On(c,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":On(c,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":On(c,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":On(c,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":On(c,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":On(c,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Dn(c,"is",y);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=vo.get(m)||m,Dn(c,m,y))}}function zw(c,f,m,y,R,Q){switch(m){case"style":bA(c,y,Q);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(m=y.__html,m!=null){if(R.children!=null)throw Error(r(60));c.innerHTML=m}}break;case"children":typeof y=="string"?si(c,y):(typeof y=="number"||typeof y=="bigint")&&si(c,""+y);break;case"onScroll":y!=null&&er("scroll",c);break;case"onScrollEnd":y!=null&&er("scrollend",c);break;case"onClick":y!=null&&(c.onclick=o1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xe.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(R=m.endsWith("Capture"),f=m.slice(2,R?m.length-7:void 0),Q=c[Xn]||null,Q=Q!=null?Q[m]:null,typeof Q=="function"&&c.removeEventListener(f,Q,R),typeof y=="function")){typeof Q!="function"&&Q!==null&&(m in c?c[m]=null:c.hasAttribute(m)&&c.removeAttribute(m)),c.addEventListener(f,y,R);break e}m in c?c[m]=y:y===!0?c.setAttribute(m,""):Dn(c,m,y)}}}function $a(c,f,m){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":er("error",c),er("load",c);var y=!1,R=!1,Q;for(Q in m)if(m.hasOwnProperty(Q)){var le=m[Q];if(le!=null)switch(Q){case"src":y=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Vr(c,f,Q,le,m,null)}}R&&Vr(c,f,"srcSet",m.srcSet,m,null),y&&Vr(c,f,"src",m.src,m,null);return;case"input":er("invalid",c);var we=Q=le=R=null,Fe=null,et=null;for(y in m)if(m.hasOwnProperty(y)){var dt=m[y];if(dt!=null)switch(y){case"name":R=dt;break;case"type":le=dt;break;case"checked":Fe=dt;break;case"defaultChecked":et=dt;break;case"value":Q=dt;break;case"defaultValue":we=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(r(137,f));break;default:Vr(c,f,y,dt,m,null)}}Ko(c,Q,we,Fe,et,le,R,!1),zo(c);return;case"select":er("invalid",c),y=le=Q=null;for(R in m)if(m.hasOwnProperty(R)&&(we=m[R],we!=null))switch(R){case"value":Q=we;break;case"defaultValue":le=we;break;case"multiple":y=we;default:Vr(c,f,R,we,m,null)}f=Q,m=le,c.multiple=!!y,f!=null?qi(c,!!y,f,!1):m!=null&&qi(c,!!y,m,!0);return;case"textarea":er("invalid",c),Q=R=y=null;for(le in m)if(m.hasOwnProperty(le)&&(we=m[le],we!=null))switch(le){case"value":y=we;break;case"defaultValue":R=we;break;case"children":Q=we;break;case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(91));break;default:Vr(c,f,le,we,m,null)}Wo(c,y,R,Q),zo(c);return;case"option":for(Fe in m)if(m.hasOwnProperty(Fe)&&(y=m[Fe],y!=null))switch(Fe){case"selected":c.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Vr(c,f,Fe,y,m,null)}return;case"dialog":er("beforetoggle",c),er("toggle",c),er("cancel",c),er("close",c);break;case"iframe":case"object":er("load",c);break;case"video":case"audio":for(y=0;y<np.length;y++)er(np[y],c);break;case"image":er("error",c),er("load",c);break;case"details":er("toggle",c);break;case"embed":case"source":case"link":er("error",c),er("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(et in m)if(m.hasOwnProperty(et)&&(y=m[et],y!=null))switch(et){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Vr(c,f,et,y,m,null)}return;default:if(CA(f)){for(dt in m)m.hasOwnProperty(dt)&&(y=m[dt],y!==void 0&&zw(c,f,dt,y,m,void 0));return}}for(we in m)m.hasOwnProperty(we)&&(y=m[we],y!=null&&Vr(c,f,we,y,m,null))}function mO(c,f,m,y){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,Q=null,le=null,we=null,Fe=null,et=null,dt=null;for(st in m){var yt=m[st];if(m.hasOwnProperty(st)&&yt!=null)switch(st){case"checked":break;case"value":break;case"defaultValue":Fe=yt;default:y.hasOwnProperty(st)||Vr(c,f,st,null,y,yt)}}for(var rt in y){var st=y[rt];if(yt=m[rt],y.hasOwnProperty(rt)&&(st!=null||yt!=null))switch(rt){case"type":Q=st;break;case"name":R=st;break;case"checked":et=st;break;case"defaultChecked":dt=st;break;case"value":le=st;break;case"defaultValue":we=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(r(137,f));break;default:st!==yt&&Vr(c,f,rt,st,y,yt)}}xa(c,le,we,Fe,et,dt,Q,R);return;case"select":st=le=we=rt=null;for(Q in m)if(Fe=m[Q],m.hasOwnProperty(Q)&&Fe!=null)switch(Q){case"value":break;case"multiple":st=Fe;default:y.hasOwnProperty(Q)||Vr(c,f,Q,null,y,Fe)}for(R in y)if(Q=y[R],Fe=m[R],y.hasOwnProperty(R)&&(Q!=null||Fe!=null))switch(R){case"value":rt=Q;break;case"defaultValue":we=Q;break;case"multiple":le=Q;default:Q!==Fe&&Vr(c,f,R,Q,y,Fe)}f=we,m=le,y=st,rt!=null?qi(c,!!m,rt,!1):!!y!=!!m&&(f!=null?qi(c,!!m,f,!0):qi(c,!!m,m?[]:"",!1));return;case"textarea":st=rt=null;for(we in m)if(R=m[we],m.hasOwnProperty(we)&&R!=null&&!y.hasOwnProperty(we))switch(we){case"value":break;case"children":break;default:Vr(c,f,we,null,y,R)}for(le in y)if(R=y[le],Q=m[le],y.hasOwnProperty(le)&&(R!=null||Q!=null))switch(le){case"value":rt=R;break;case"defaultValue":st=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:R!==Q&&Vr(c,f,le,R,y,Q)}gr(c,rt,st);return;case"option":for(var Cn in m)if(rt=m[Cn],m.hasOwnProperty(Cn)&&rt!=null&&!y.hasOwnProperty(Cn))switch(Cn){case"selected":c.selected=!1;break;default:Vr(c,f,Cn,null,y,rt)}for(Fe in y)if(rt=y[Fe],st=m[Fe],y.hasOwnProperty(Fe)&&rt!==st&&(rt!=null||st!=null))switch(Fe){case"selected":c.selected=rt&&typeof rt!="function"&&typeof rt!="symbol";break;default:Vr(c,f,Fe,rt,y,st)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fn in m)rt=m[fn],m.hasOwnProperty(fn)&&rt!=null&&!y.hasOwnProperty(fn)&&Vr(c,f,fn,null,y,rt);for(et in y)if(rt=y[et],st=m[et],y.hasOwnProperty(et)&&rt!==st&&(rt!=null||st!=null))switch(et){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(r(137,f));break;default:Vr(c,f,et,rt,y,st)}return;default:if(CA(f)){for(var Gr in m)rt=m[Gr],m.hasOwnProperty(Gr)&&rt!==void 0&&!y.hasOwnProperty(Gr)&&zw(c,f,Gr,void 0,y,rt);for(dt in y)rt=y[dt],st=m[dt],!y.hasOwnProperty(dt)||rt===st||rt===void 0&&st===void 0||zw(c,f,dt,rt,y,st);return}}for(var ze in m)rt=m[ze],m.hasOwnProperty(ze)&&rt!=null&&!y.hasOwnProperty(ze)&&Vr(c,f,ze,null,y,rt);for(yt in y)rt=y[yt],st=m[yt],!y.hasOwnProperty(yt)||rt===st||rt==null&&st==null||Vr(c,f,yt,rt,y,st)}var Kw=null,qw=null;function l1(c){return c.nodeType===9?c:c.ownerDocument}function kT(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function IT(c,f){if(c===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&f==="foreignObject"?0:c}function Ww(c,f){return c==="textarea"||c==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var $w=null;function pO(){var c=window.event;return c&&c.type==="popstate"?c===$w?!1:($w=c,!0):($w=null,!1)}var FT=typeof setTimeout=="function"?setTimeout:void 0,gO=typeof clearTimeout=="function"?clearTimeout:void 0,RT=typeof Promise=="function"?Promise:void 0,xO=typeof queueMicrotask=="function"?queueMicrotask:typeof RT<"u"?function(c){return RT.resolve(null).then(c).catch(vO)}:FT;function vO(c){setTimeout(function(){throw c})}function Yu(c){return c==="head"}function DT(c,f){var m=f,y=0,R=0;do{var Q=m.nextSibling;if(c.removeChild(m),Q&&Q.nodeType===8)if(m=Q.data,m==="/$"){if(0<y&&8>y){m=y;var le=c.ownerDocument;if(m&1&&sp(le.documentElement),m&2&&sp(le.body),m&4)for(m=le.head,sp(m),le=m.firstChild;le;){var we=le.nextSibling,Fe=le.nodeName;le[Ce]||Fe==="SCRIPT"||Fe==="STYLE"||Fe==="LINK"&&le.rel.toLowerCase()==="stylesheet"||m.removeChild(le),le=we}}if(R===0){c.removeChild(Q),dp(f);return}R--}else m==="$"||m==="$?"||m==="$!"?R++:y=m.charCodeAt(0)-48;else y=0;m=Q}while(m);dp(f)}function Yw(c){var f=c.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var m=f;switch(f=f.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Yw(m),_e(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}c.removeChild(m)}}function yO(c,f,m,y){for(;c.nodeType===1;){var R=m;if(c.nodeName.toLowerCase()!==f.toLowerCase()){if(!y&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(y){if(!c[Ce])switch(f){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(Q=c.getAttribute("rel"),Q==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(Q!==R.rel||c.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||c.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||c.getAttribute("title")!==(R.title==null?null:R.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(Q=c.getAttribute("src"),(Q!==(R.src==null?null:R.src)||c.getAttribute("type")!==(R.type==null?null:R.type)||c.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&Q&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(f==="input"&&c.type==="hidden"){var Q=R.name==null?null:""+R.name;if(R.type==="hidden"&&c.getAttribute("name")===Q)return c}else return c;if(c=Zl(c.nextSibling),c===null)break}return null}function wO(c,f,m){if(f==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!m||(c=Zl(c.nextSibling),c===null))return null;return c}function Jw(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function bO(c,f){var m=c.ownerDocument;if(c.data!=="$?"||m.readyState==="complete")f();else{var y=function(){f(),m.removeEventListener("DOMContentLoaded",y)};m.addEventListener("DOMContentLoaded",y),c._reactRetry=y}}function Zl(c){for(;c!=null;c=c.nextSibling){var f=c.nodeType;if(f===1||f===3)break;if(f===8){if(f=c.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return c}var Xw=null;function UT(c){c=c.previousSibling;for(var f=0;c;){if(c.nodeType===8){var m=c.data;if(m==="$"||m==="$!"||m==="$?"){if(f===0)return c;f--}else m==="/$"&&f++}c=c.previousSibling}return null}function LT(c,f,m){switch(f=l1(m),c){case"html":if(c=f.documentElement,!c)throw Error(r(452));return c;case"head":if(c=f.head,!c)throw Error(r(453));return c;case"body":if(c=f.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function sp(c){for(var f=c.attributes;f.length;)c.removeAttributeNode(f[0]);_e(c)}var fl=new Map,MT=new Set;function c1(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var $A=q.d;q.d={f:CO,r:EO,D:_O,C:SO,L:TO,m:BO,X:kO,S:NO,M:IO};function CO(){var c=$A.f(),f=e1();return c||f}function EO(c){var f=Ne(c);f!==null&&f.tag===5&&f.type==="form"?xf(f):$A.r(c)}var Kh=typeof document>"u"?null:document;function PT(c,f,m){var y=Kh;if(y&&typeof f=="string"&&f){var R=ar(f);R='link[rel="'+c+'"][href="'+R+'"]',typeof m=="string"&&(R+='[crossorigin="'+m+'"]'),MT.has(R)||(MT.add(R),c={rel:c,crossOrigin:m,href:f},y.querySelector(R)===null&&(f=y.createElement("link"),$a(f,"link",c),Qe(f),y.head.appendChild(f)))}}function _O(c){$A.D(c),PT("dns-prefetch",c,null)}function SO(c,f){$A.C(c,f),PT("preconnect",c,f)}function TO(c,f,m){$A.L(c,f,m);var y=Kh;if(y&&c&&f){var R='link[rel="preload"][as="'+ar(f)+'"]';f==="image"&&m&&m.imageSrcSet?(R+='[imagesrcset="'+ar(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(R+='[imagesizes="'+ar(m.imageSizes)+'"]')):R+='[href="'+ar(c)+'"]';var Q=R;switch(f){case"style":Q=qh(c);break;case"script":Q=Wh(c)}fl.has(Q)||(c=d({rel:"preload",href:f==="image"&&m&&m.imageSrcSet?void 0:c,as:f},m),fl.set(Q,c),y.querySelector(R)!==null||f==="style"&&y.querySelector(ap(Q))||f==="script"&&y.querySelector(ip(Q))||(f=y.createElement("link"),$a(f,"link",c),Qe(f),y.head.appendChild(f)))}}function BO(c,f){$A.m(c,f);var m=Kh;if(m&&c){var y=f&&typeof f.as=="string"?f.as:"script",R='link[rel="modulepreload"][as="'+ar(y)+'"][href="'+ar(c)+'"]',Q=R;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Q=Wh(c)}if(!fl.has(Q)&&(c=d({rel:"modulepreload",href:c},f),fl.set(Q,c),m.querySelector(R)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(ip(Q)))return}y=m.createElement("link"),$a(y,"link",c),Qe(y),m.head.appendChild(y)}}}function NO(c,f,m){$A.S(c,f,m);var y=Kh;if(y&&c){var R=nt(y).hoistableStyles,Q=qh(c);f=f||"default";var le=R.get(Q);if(!le){var we={loading:0,preload:null};if(le=y.querySelector(ap(Q)))we.loading=5;else{c=d({rel:"stylesheet",href:c,"data-precedence":f},m),(m=fl.get(Q))&&Zw(c,m);var Fe=le=y.createElement("link");Qe(Fe),$a(Fe,"link",c),Fe._p=new Promise(function(et,dt){Fe.onload=et,Fe.onerror=dt}),Fe.addEventListener("load",function(){we.loading|=1}),Fe.addEventListener("error",function(){we.loading|=2}),we.loading|=4,A1(le,f,y)}le={type:"stylesheet",instance:le,count:1,state:we},R.set(Q,le)}}}function kO(c,f){$A.X(c,f);var m=Kh;if(m&&c){var y=nt(m).hoistableScripts,R=Wh(c),Q=y.get(R);Q||(Q=m.querySelector(ip(R)),Q||(c=d({src:c,async:!0},f),(f=fl.get(R))&&eb(c,f),Q=m.createElement("script"),Qe(Q),$a(Q,"link",c),m.head.appendChild(Q)),Q={type:"script",instance:Q,count:1,state:null},y.set(R,Q))}}function IO(c,f){$A.M(c,f);var m=Kh;if(m&&c){var y=nt(m).hoistableScripts,R=Wh(c),Q=y.get(R);Q||(Q=m.querySelector(ip(R)),Q||(c=d({src:c,async:!0,type:"module"},f),(f=fl.get(R))&&eb(c,f),Q=m.createElement("script"),Qe(Q),$a(Q,"link",c),m.head.appendChild(Q)),Q={type:"script",instance:Q,count:1,state:null},y.set(R,Q))}}function jT(c,f,m,y){var R=(R=oe.current)?c1(R):null;if(!R)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(f=qh(m.href),m=nt(R).hoistableStyles,y=m.get(f),y||(y={type:"style",instance:null,count:0,state:null},m.set(f,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){c=qh(m.href);var Q=nt(R).hoistableStyles,le=Q.get(c);if(le||(R=R.ownerDocument||R,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Q.set(c,le),(Q=R.querySelector(ap(c)))&&!Q._p&&(le.instance=Q,le.state.loading=5),fl.has(c)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},fl.set(c,m),Q||FO(R,c,m,le.state))),f&&y===null)throw Error(r(528,""));return le}if(f&&y!==null)throw Error(r(529,""));return null;case"script":return f=m.async,m=m.src,typeof m=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Wh(m),m=nt(R).hoistableScripts,y=m.get(f),y||(y={type:"script",instance:null,count:0,state:null},m.set(f,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function qh(c){return'href="'+ar(c)+'"'}function ap(c){return'link[rel="stylesheet"]['+c+"]"}function OT(c){return d({},c,{"data-precedence":c.precedence,precedence:null})}function FO(c,f,m,y){c.querySelector('link[rel="preload"][as="style"]['+f+"]")?y.loading=1:(f=c.createElement("link"),y.preload=f,f.addEventListener("load",function(){return y.loading|=1}),f.addEventListener("error",function(){return y.loading|=2}),$a(f,"link",m),Qe(f),c.head.appendChild(f))}function Wh(c){return'[src="'+ar(c)+'"]'}function ip(c){return"script[async]"+c}function QT(c,f,m){if(f.count++,f.instance===null)switch(f.type){case"style":var y=c.querySelector('style[data-href~="'+ar(m.href)+'"]');if(y)return f.instance=y,Qe(y),y;var R=d({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return y=(c.ownerDocument||c).createElement("style"),Qe(y),$a(y,"style",R),A1(y,m.precedence,c),f.instance=y;case"stylesheet":R=qh(m.href);var Q=c.querySelector(ap(R));if(Q)return f.state.loading|=4,f.instance=Q,Qe(Q),Q;y=OT(m),(R=fl.get(R))&&Zw(y,R),Q=(c.ownerDocument||c).createElement("link"),Qe(Q);var le=Q;return le._p=new Promise(function(we,Fe){le.onload=we,le.onerror=Fe}),$a(Q,"link",y),f.state.loading|=4,A1(Q,m.precedence,c),f.instance=Q;case"script":return Q=Wh(m.src),(R=c.querySelector(ip(Q)))?(f.instance=R,Qe(R),R):(y=m,(R=fl.get(Q))&&(y=d({},m),eb(y,R)),c=c.ownerDocument||c,R=c.createElement("script"),Qe(R),$a(R,"link",y),c.head.appendChild(R),f.instance=R);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(y=f.instance,f.state.loading|=4,A1(y,m.precedence,c));return f.instance}function A1(c,f,m){for(var y=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=y.length?y[y.length-1]:null,Q=R,le=0;le<y.length;le++){var we=y[le];if(we.dataset.precedence===f)Q=we;else if(Q!==R)break}Q?Q.parentNode.insertBefore(c,Q.nextSibling):(f=m.nodeType===9?m.head:m,f.insertBefore(c,f.firstChild))}function Zw(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.title==null&&(c.title=f.title)}function eb(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.integrity==null&&(c.integrity=f.integrity)}var u1=null;function HT(c,f,m){if(u1===null){var y=new Map,R=u1=new Map;R.set(m,y)}else R=u1,y=R.get(m),y||(y=new Map,R.set(m,y));if(y.has(c))return y;for(y.set(c,null),m=m.getElementsByTagName(c),R=0;R<m.length;R++){var Q=m[R];if(!(Q[Ce]||Q[sr]||c==="link"&&Q.getAttribute("rel")==="stylesheet")&&Q.namespaceURI!=="http://www.w3.org/2000/svg"){var le=Q.getAttribute(f)||"";le=c+le;var we=y.get(le);we?we.push(Q):y.set(le,[Q])}}return y}function VT(c,f,m){c=c.ownerDocument||c,c.head.insertBefore(m,f==="title"?c.querySelector("head > title"):null)}function RO(c,f,m){if(m===1||f.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return c=f.disabled,typeof f.precedence=="string"&&c==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function GT(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var op=null;function DO(){}function UO(c,f,m){if(op===null)throw Error(r(475));var y=op;if(f.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var R=qh(m.href),Q=c.querySelector(ap(R));if(Q){c=Q._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(y.count++,y=d1.bind(y),c.then(y,y)),f.state.loading|=4,f.instance=Q,Qe(Q);return}Q=c.ownerDocument||c,m=OT(m),(R=fl.get(R))&&Zw(m,R),Q=Q.createElement("link"),Qe(Q);var le=Q;le._p=new Promise(function(we,Fe){le.onload=we,le.onerror=Fe}),$a(Q,"link",m),f.instance=Q}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(y.count++,f=d1.bind(y),c.addEventListener("load",f),c.addEventListener("error",f))}}function LO(){if(op===null)throw Error(r(475));var c=op;return c.stylesheets&&c.count===0&&tb(c,c.stylesheets),0<c.count?function(f){var m=setTimeout(function(){if(c.stylesheets&&tb(c,c.stylesheets),c.unsuspend){var y=c.unsuspend;c.unsuspend=null,y()}},6e4);return c.unsuspend=f,function(){c.unsuspend=null,clearTimeout(m)}}:null}function d1(){if(this.count--,this.count===0){if(this.stylesheets)tb(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var f1=null;function tb(c,f){c.stylesheets=null,c.unsuspend!==null&&(c.count++,f1=new Map,f.forEach(MO,c),f1=null,d1.call(c))}function MO(c,f){if(!(f.state.loading&4)){var m=f1.get(c);if(m)var y=m.get(null);else{m=new Map,f1.set(c,m);for(var R=c.querySelectorAll("link[data-precedence],style[data-precedence]"),Q=0;Q<R.length;Q++){var le=R[Q];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(m.set(le.dataset.precedence,le),y=le)}y&&m.set(null,y)}R=f.instance,le=R.getAttribute("data-precedence"),Q=m.get(le)||y,Q===y&&m.set(null,R),m.set(le,R),this.count++,y=d1.bind(this),R.addEventListener("load",y),R.addEventListener("error",y),Q?Q.parentNode.insertBefore(R,Q.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(R,c.firstChild)),f.state.loading|=4}}var lp={$$typeof:k,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function PO(c,f,m,y,R,Q,le,we){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qr(0),this.hiddenUpdates=qr(null),this.identifierPrefix=y,this.onUncaughtError=R,this.onCaughtError=Q,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=we,this.incompleteTransitions=new Map}function zT(c,f,m,y,R,Q,le,we,Fe,et,dt,yt){return c=new PO(c,f,m,le,we,Fe,et,yt),f=1,Q===!0&&(f|=24),Q=Fa(3,null,null,f),c.current=Q,Q.stateNode=c,f=Im(),f.refCount++,c.pooledCache=f,f.refCount++,Q.memoizedState={element:y,isDehydrated:m,cache:f},Me(Q),c}function KT(c){return c?(c=sa,c):sa}function qT(c,f,m,y,R,Q){R=KT(R),y.context===null?y.context=R:y.pendingContext=R,y=ct(f),y.payload={element:m},Q=Q===void 0?null:Q,Q!==null&&(y.callback=Q),m=xt(c,y,f),m!==null&&(Do(m,c,f),ft(m,c,f))}function WT(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<f?m:f}}function nb(c,f){WT(c,f),(c=c.alternate)&&WT(c,f)}function $T(c){if(c.tag===13){var f=Ol(c,67108864);f!==null&&Do(f,c,67108864),nb(c,67108864)}}var h1=!0;function jO(c,f,m,y){var R=K.T;K.T=null;var Q=q.p;try{q.p=2,rb(c,f,m,y)}finally{q.p=Q,K.T=R}}function OO(c,f,m,y){var R=K.T;K.T=null;var Q=q.p;try{q.p=8,rb(c,f,m,y)}finally{q.p=Q,K.T=R}}function rb(c,f,m,y){if(h1){var R=sb(y);if(R===null)Gw(c,f,y,m1,m),JT(c,y);else if(HO(R,c,f,m,y))y.stopPropagation();else if(JT(c,y),f&4&&-1<QO.indexOf(c)){for(;R!==null;){var Q=Ne(R);if(Q!==null)switch(Q.tag){case 3:if(Q=Q.stateNode,Q.current.memoizedState.isDehydrated){var le=mn(Q.pendingLanes);if(le!==0){var we=Q;for(we.pendingLanes|=2,we.entangledLanes|=2;le;){var Fe=1<<31-Mt(le);we.entanglements[1]|=Fe,le&=~Fe}Wc(Q),(Fr&6)===0&&(Xx=Ge()+500,tp(0))}}break;case 13:we=Ol(Q,2),we!==null&&Do(we,Q,2),e1(),nb(Q,2)}if(Q=sb(y),Q===null&&Gw(c,f,y,m1,m),Q===R)break;R=Q}R!==null&&y.stopPropagation()}else Gw(c,f,y,null,m)}}function sb(c){return c=kr(c),ab(c)}var m1=null;function ab(c){if(m1=null,c=Se(c),c!==null){var f=a(c);if(f===null)c=null;else{var m=f.tag;if(m===13){if(c=i(f),c!==null)return c;c=null}else if(m===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null)}}return m1=c,null}function YT(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tt()){case it:return 2;case mt:return 8;case Ct:case At:return 32;case Nt:return 268435456;default:return 32}default:return 32}}var ib=!1,Ju=null,Xu=null,Zu=null,cp=new Map,Ap=new Map,ed=[],QO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function JT(c,f){switch(c){case"focusin":case"focusout":Ju=null;break;case"dragenter":case"dragleave":Xu=null;break;case"mouseover":case"mouseout":Zu=null;break;case"pointerover":case"pointerout":cp.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ap.delete(f.pointerId)}}function up(c,f,m,y,R,Q){return c===null||c.nativeEvent!==Q?(c={blockedOn:f,domEventName:m,eventSystemFlags:y,nativeEvent:Q,targetContainers:[R]},f!==null&&(f=Ne(f),f!==null&&$T(f)),c):(c.eventSystemFlags|=y,f=c.targetContainers,R!==null&&f.indexOf(R)===-1&&f.push(R),c)}function HO(c,f,m,y,R){switch(f){case"focusin":return Ju=up(Ju,c,f,m,y,R),!0;case"dragenter":return Xu=up(Xu,c,f,m,y,R),!0;case"mouseover":return Zu=up(Zu,c,f,m,y,R),!0;case"pointerover":var Q=R.pointerId;return cp.set(Q,up(cp.get(Q)||null,c,f,m,y,R)),!0;case"gotpointercapture":return Q=R.pointerId,Ap.set(Q,up(Ap.get(Q)||null,c,f,m,y,R)),!0}return!1}function XT(c){var f=Se(c.target);if(f!==null){var m=a(f);if(m!==null){if(f=m.tag,f===13){if(f=i(m),f!==null){c.blockedOn=f,ma(c.priority,function(){if(m.tag===13){var y=Ro();y=ea(y);var R=Ol(m,y);R!==null&&Do(R,m,y),nb(m,y)}});return}}else if(f===3&&m.stateNode.current.memoizedState.isDehydrated){c.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}c.blockedOn=null}function p1(c){if(c.blockedOn!==null)return!1;for(var f=c.targetContainers;0<f.length;){var m=sb(c.nativeEvent);if(m===null){m=c.nativeEvent;var y=new m.constructor(m.type,m);Wi=y,m.target.dispatchEvent(y),Wi=null}else return f=Ne(m),f!==null&&$T(f),c.blockedOn=m,!1;f.shift()}return!0}function ZT(c,f,m){p1(c)&&m.delete(f)}function VO(){ib=!1,Ju!==null&&p1(Ju)&&(Ju=null),Xu!==null&&p1(Xu)&&(Xu=null),Zu!==null&&p1(Zu)&&(Zu=null),cp.forEach(ZT),Ap.forEach(ZT)}function g1(c,f){c.blockedOn===f&&(c.blockedOn=null,ib||(ib=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,VO)))}var x1=null;function eB(c){x1!==c&&(x1=c,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){x1===c&&(x1=null);for(var f=0;f<c.length;f+=3){var m=c[f],y=c[f+1],R=c[f+2];if(typeof y!="function"){if(ab(y||m)===null)continue;break}var Q=Ne(m);Q!==null&&(c.splice(f,3),f-=3,Al(Q,{pending:!0,data:R,method:m.method,action:y},y,R))}}))}function dp(c){function f(Fe){return g1(Fe,c)}Ju!==null&&g1(Ju,c),Xu!==null&&g1(Xu,c),Zu!==null&&g1(Zu,c),cp.forEach(f),Ap.forEach(f);for(var m=0;m<ed.length;m++){var y=ed[m];y.blockedOn===c&&(y.blockedOn=null)}for(;0<ed.length&&(m=ed[0],m.blockedOn===null);)XT(m),m.blockedOn===null&&ed.shift();if(m=(c.ownerDocument||c).$$reactFormReplay,m!=null)for(y=0;y<m.length;y+=3){var R=m[y],Q=m[y+1],le=R[Xn]||null;if(typeof Q=="function")le||eB(m);else if(le){var we=null;if(Q&&Q.hasAttribute("formAction")){if(R=Q,le=Q[Xn]||null)we=le.formAction;else if(ab(R)!==null)continue}else we=le.action;typeof we=="function"?m[y+1]=we:(m.splice(y,3),y-=3),eB(m)}}}function ob(c){this._internalRoot=c}v1.prototype.render=ob.prototype.render=function(c){var f=this._internalRoot;if(f===null)throw Error(r(409));var m=f.current,y=Ro();qT(m,y,c,f,null,null)},v1.prototype.unmount=ob.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var f=c.containerInfo;qT(c.current,2,null,c,null,null),e1(),f[_r]=null}};function v1(c){this._internalRoot=c}v1.prototype.unstable_scheduleHydration=function(c){if(c){var f=us();c={blockedOn:null,target:c,priority:f};for(var m=0;m<ed.length&&f!==0&&f<ed[m].priority;m++);ed.splice(m,0,c),m===0&&XT(c)}};var tB=e.version;if(tB!=="19.1.1")throw Error(r(527,tB,"19.1.1"));q.findDOMNode=function(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=l(f),c=c!==null?A(c):null,c=c===null?null:c.stateNode,c};var GO={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var y1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!y1.isDisabled&&y1.supportsFiber)try{Lt=y1.inject(GO),Vt=y1}catch{}}return hp.createRoot=function(c,f){if(!s(c))throw Error(r(299));var m=!1,y="",R=g4,Q=x4,le=v4,we=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(R=f.onUncaughtError),f.onCaughtError!==void 0&&(Q=f.onCaughtError),f.onRecoverableError!==void 0&&(le=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(we=f.unstable_transitionCallbacks)),f=zT(c,1,!1,null,null,m,y,R,Q,le,we,null),c[_r]=f.current,Vw(c),new ob(f)},hp.hydrateRoot=function(c,f,m){if(!s(c))throw Error(r(299));var y=!1,R="",Q=g4,le=x4,we=v4,Fe=null,et=null;return m!=null&&(m.unstable_strictMode===!0&&(y=!0),m.identifierPrefix!==void 0&&(R=m.identifierPrefix),m.onUncaughtError!==void 0&&(Q=m.onUncaughtError),m.onCaughtError!==void 0&&(le=m.onCaughtError),m.onRecoverableError!==void 0&&(we=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(Fe=m.unstable_transitionCallbacks),m.formState!==void 0&&(et=m.formState)),f=zT(c,1,!0,f,m??null,y,R,Q,le,we,Fe,et),f.context=KT(null),m=f.current,y=Ro(),y=ea(y),R=ct(y),R.callback=null,xt(m,R,y),m=y,f.current.lanes=m,as(f,m),Wc(f),c[_r]=f.current,Vw(c),new v1(f)},hp.version="19.1.1",hp}var uB;function ZO(){if(uB)return Ab.exports;uB=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ab.exports=XO(),Ab.exports}var eQ=ZO();const tQ=t5(eQ),nQ=()=>{};var dB={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},rQ=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],i=t[n++],o=t[n++],l=((s&7)<<18|(a&63)<<12|(i&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const a=t[n++],i=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|i&63)}}return e.join("")},LR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],i=s+1<t.length,o=i?t[s+1]:0,l=s+2<t.length,A=l?t[s+2]:0,d=a>>2,h=(a&3)<<4|o>>4;let p=(o&15)<<2|A>>6,g=A&63;l||(g=64,i||(p=64)),r.push(n[d],n[h],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(UR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rQ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const A=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||o==null||A==null||h==null)throw new sQ;const p=a<<2|o>>4;if(r.push(p),A!==64){const g=o<<4&240|A>>2;if(r.push(g),h!==64){const w=A<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sQ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aQ=function(t){const e=UR(t);return LR.encodeByteArray(e,!0)},Xv=function(t){return aQ(t).replace(/\./g,"")},MR=function(t){try{return LR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iQ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oQ=()=>iQ().__FIREBASE_DEFAULTS__,lQ=()=>{if(typeof process>"u"||typeof dB>"u")return;const t=dB.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cQ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&MR(t[1]);return e&&JSON.parse(e)},ay=()=>{try{return nQ()||oQ()||lQ()||cQ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},PR=t=>{var e,n;return(n=(e=ay())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},AQ=t=>{const e=PR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},jR=()=>{var t;return(t=ay())==null?void 0:t.config},OR=t=>{var e;return(e=ay())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uQ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function QR(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dQ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Xv(JSON.stringify(n)),Xv(JSON.stringify(i)),""].join(".")}const Yp={};function fQ(){const t={prod:[],emulator:[]};for(const e of Object.keys(Yp))Yp[e]?t.emulator.push(e):t.prod.push(e);return t}function hQ(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let fB=!1;function HR(t,e){if(typeof window>"u"||typeof document>"u"||!fm(window.location.host)||Yp[t]===e||Yp[t]||fB)return;Yp[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",a=fQ().prod.length>0;function i(){const p=document.getElementById(r);p&&p.remove()}function o(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function A(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{fB=!0,i()},p}function d(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=hQ(r),g=n("text"),w=document.getElementById(g)||document.createElement("span"),b=n("learnmore"),E=document.getElementById(b)||document.createElement("a"),B=n("preprendIcon"),I=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const k=p.element;o(k),d(E,b);const F=A();l(I,B),k.append(I,w,E,F),document.body.appendChild(k)}a?(w.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mQ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fi())}function pQ(){var e;const t=(e=ay())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gQ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xQ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vQ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yQ(){const t=Fi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wQ(){return!pQ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bQ(){try{return typeof indexedDB=="object"}catch{return!1}}function CQ(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EQ="FirebaseError";class gu extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=EQ,Object.setPrototypeOf(this,gu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ex.prototype.create)}}class ex{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],i=a?_Q(a,r):"Error",o=`${this.serviceName}: ${i} (${s}).`;return new gu(s,o,r)}}function _Q(t,e){return t.replace(SQ,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const SQ=/\{\$([^}]+)}/g;function TQ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],i=e[s];if(hB(a)&&hB(i)){if(!Yf(a,i))return!1}else if(a!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function hB(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Np(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function kp(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function BQ(t,e){const n=new NQ(t,e);return n.subscribe.bind(n)}class NQ{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");kQ(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=hb),s.error===void 0&&(s.error=hb),s.complete===void 0&&(s.complete=hb);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kQ(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function hb(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t){return t&&t._delegate?t._delegate:t}class Jf{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IQ=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new uQ;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RQ(e))try{this.getOrInitializeService({instanceIdentifier:Sf})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Sf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sf){return this.instances.has(e)}getOptions(e=Sf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&i.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FQ(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Sf){return this.component?this.component.multipleInstances?e:Sf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function FQ(t){return t===Sf?void 0:t}function RQ(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DQ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new IQ(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(nr||(nr={}));const UQ={debug:nr.DEBUG,verbose:nr.VERBOSE,info:nr.INFO,warn:nr.WARN,error:nr.ERROR,silent:nr.SILENT},LQ=nr.INFO,MQ={[nr.DEBUG]:"log",[nr.VERBOSE]:"log",[nr.INFO]:"info",[nr.WARN]:"warn",[nr.ERROR]:"error"},PQ=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=MQ[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let n5=class{constructor(e){this.name=e,this._logLevel=LQ,this._logHandler=PQ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UQ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nr.DEBUG,...e),this._logHandler(this,nr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nr.VERBOSE,...e),this._logHandler(this,nr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nr.INFO,...e),this._logHandler(this,nr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nr.WARN,...e),this._logHandler(this,nr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nr.ERROR,...e),this._logHandler(this,nr.ERROR,...e)}};const jQ=(t,e)=>e.some(n=>t instanceof n);let mB,pB;function OQ(){return mB||(mB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QQ(){return pB||(pB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VR=new WeakMap,eE=new WeakMap,GR=new WeakMap,mb=new WeakMap,r5=new WeakMap;function HQ(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",i)},a=()=>{n(Sd(t.result)),s()},i=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&VR.set(n,t)}).catch(()=>{}),r5.set(e,t),e}function VQ(t){if(eE.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",i),t.removeEventListener("abort",i)},a=()=>{n(),s()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",i),t.addEventListener("abort",i)});eE.set(t,e)}let tE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return eE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sd(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function GQ(t){tE=t(tE)}function zQ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(pb(this),e,...n);return GR.set(r,e.sort?e.sort():[e]),Sd(r)}:QQ().includes(t)?function(...e){return t.apply(pb(this),e),Sd(VR.get(this))}:function(...e){return Sd(t.apply(pb(this),e))}}function KQ(t){return typeof t=="function"?zQ(t):(t instanceof IDBTransaction&&VQ(t),jQ(t,OQ())?new Proxy(t,tE):t)}function Sd(t){if(t instanceof IDBRequest)return HQ(t);if(mb.has(t))return mb.get(t);const e=KQ(t);return e!==t&&(mb.set(t,e),r5.set(e,t)),e}const pb=t=>r5.get(t);function qQ(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const i=indexedDB.open(t,e),o=Sd(i);return r&&i.addEventListener("upgradeneeded",l=>{r(Sd(i.result),l.oldVersion,l.newVersion,Sd(i.transaction),l)}),n&&i.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),s&&l.addEventListener("versionchange",A=>s(A.oldVersion,A.newVersion,A))}).catch(()=>{}),o}const WQ=["get","getKey","getAll","getAllKeys","count"],$Q=["put","add","delete","clear"],gb=new Map;function gB(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gb.get(e))return gb.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=$Q.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||WQ.includes(n)))return;const a=async function(i,...o){const l=this.transaction(i,s?"readwrite":"readonly");let A=l.store;return r&&(A=A.index(o.shift())),(await Promise.all([A[n](...o),s&&l.done]))[0]};return gb.set(e,a),a}GQ(t=>({...t,get:(e,n,r)=>gB(e,n)||t.get(e,n,r),has:(e,n)=>!!gB(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YQ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(JQ(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function JQ(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nE="@firebase/app",xB="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=new n5("@firebase/app"),XQ="@firebase/app-compat",ZQ="@firebase/analytics-compat",e9="@firebase/analytics",t9="@firebase/app-check-compat",n9="@firebase/app-check",r9="@firebase/auth",s9="@firebase/auth-compat",a9="@firebase/database",i9="@firebase/data-connect",o9="@firebase/database-compat",l9="@firebase/functions",c9="@firebase/functions-compat",A9="@firebase/installations",u9="@firebase/installations-compat",d9="@firebase/messaging",f9="@firebase/messaging-compat",h9="@firebase/performance",m9="@firebase/performance-compat",p9="@firebase/remote-config",g9="@firebase/remote-config-compat",x9="@firebase/storage",v9="@firebase/storage-compat",y9="@firebase/firestore",w9="@firebase/ai",b9="@firebase/firestore-compat",C9="firebase",E9="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="[DEFAULT]",_9={[nE]:"fire-core",[XQ]:"fire-core-compat",[e9]:"fire-analytics",[ZQ]:"fire-analytics-compat",[n9]:"fire-app-check",[t9]:"fire-app-check-compat",[r9]:"fire-auth",[s9]:"fire-auth-compat",[a9]:"fire-rtdb",[i9]:"fire-data-connect",[o9]:"fire-rtdb-compat",[l9]:"fire-fn",[c9]:"fire-fn-compat",[A9]:"fire-iid",[u9]:"fire-iid-compat",[d9]:"fire-fcm",[f9]:"fire-fcm-compat",[h9]:"fire-perf",[m9]:"fire-perf-compat",[p9]:"fire-rc",[g9]:"fire-rc-compat",[x9]:"fire-gcs",[v9]:"fire-gcs-compat",[y9]:"fire-fst",[b9]:"fire-fst-compat",[w9]:"fire-vertex","fire-js":"fire-js",[C9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=new Map,S9=new Map,sE=new Map;function vB(t,e){try{t.container.addComponent(e)}catch(n){cu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function J0(t){const e=t.name;if(sE.has(e))return cu.debug(`There were multiple attempts to register component ${e}.`),!1;sE.set(e,t);for(const n of Zv.values())vB(n,t);for(const n of S9.values())vB(n,t);return!0}function s5(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ac(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Td=new ex("app","Firebase",T9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Td.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm=E9;function zR(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:rE,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Td.create("bad-app-name",{appName:String(s)});if(n||(n=jR()),!n)throw Td.create("no-options");const a=Zv.get(s);if(a){if(Yf(n,a.options)&&Yf(r,a.config))return a;throw Td.create("duplicate-app",{appName:s})}const i=new DQ(s);for(const l of sE.values())i.addComponent(l);const o=new B9(n,r,i);return Zv.set(s,o),o}function KR(t=rE){const e=Zv.get(t);if(!e&&t===rE&&jR())return zR();if(!e)throw Td.create("no-app",{appName:t});return e}function Bd(t,e,n){let r=_9[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const i=[`Unable to register library "${r}" with version "${e}":`];s&&i.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&i.push("and"),a&&i.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cu.warn(i.join(" "));return}J0(new Jf(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9="firebase-heartbeat-database",k9=1,vg="firebase-heartbeat-store";let xb=null;function qR(){return xb||(xb=qQ(N9,k9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(vg)}catch(n){console.warn(n)}}}}).catch(t=>{throw Td.create("idb-open",{originalErrorMessage:t.message})})),xb}async function I9(t){try{const n=(await qR()).transaction(vg),r=await n.objectStore(vg).get(WR(t));return await n.done,r}catch(e){if(e instanceof gu)cu.warn(e.message);else{const n=Td.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});cu.warn(n.message)}}}async function yB(t,e){try{const r=(await qR()).transaction(vg,"readwrite");await r.objectStore(vg).put(e,WR(t)),await r.done}catch(n){if(n instanceof gu)cu.warn(n.message);else{const r=Td.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});cu.warn(r.message)}}}function WR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9=1024,R9=30;class D9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new L9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=wB();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(i=>i.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>R9){const i=M9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){cu.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wB(),{heartbeatsToSend:r,unsentEntries:s}=U9(this._heartbeatsCache.heartbeats),a=Xv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return cu.warn(n),""}}}function wB(){return new Date().toISOString().substring(0,10)}function U9(t,e=F9){const n=[];let r=t.slice();for(const s of t){const a=n.find(i=>i.agent===s.agent);if(a){if(a.dates.push(s.date),bB(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),bB(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class L9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bQ()?CQ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await I9(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return yB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return yB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function bB(t){return Xv(JSON.stringify({version:2,heartbeats:t})).length}function M9(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P9(t){J0(new Jf("platform-logger",e=>new YQ(e),"PRIVATE")),J0(new Jf("heartbeat",e=>new D9(e),"PRIVATE")),Bd(nE,xB,t),Bd(nE,xB,"esm2020"),Bd("fire-js","")}P9("");function $R(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const j9=$R,YR=new ex("auth","Firebase",$R());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=new n5("@firebase/auth");function O9(t,...e){e2.logLevel<=nr.WARN&&e2.warn(`Auth (${hm}): ${t}`,...e)}function Tv(t,...e){e2.logLevel<=nr.ERROR&&e2.error(`Auth (${hm}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t,...e){throw a5(t,...e)}function oA(t,...e){return a5(t,...e)}function JR(t,e,n){const r={...j9(),[e]:n};return new ex("auth","Firebase",r).create(e,{appName:t.name})}function Nd(t){return JR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function a5(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return YR.create(t,...e)}function bn(t,e,...n){if(!t)throw a5(e,...n)}function eu(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tv(e),new Error(e)}function Au(t,e){t||eu(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Q9(){return CB()==="http:"||CB()==="https:"}function CB(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Q9()||xQ()||"connection"in navigator)?navigator.onLine:!0}function V9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n){this.shortDelay=e,this.longDelay=n,Au(n>e,"Short delay should be less than long delay!"),this.isMobile=mQ()||vQ()}get(){return H9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(t,e){Au(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;eu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;eu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;eu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],K9=new nx(3e4,6e4);function ch(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Jd(t,e,n,r,s={}){return ZR(t,s,async()=>{let a={},i={};r&&(e==="GET"?i=r:a={body:JSON.stringify(r)});const o=tx({key:t.config.apiKey,...i}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const A={method:e,headers:l,...a};return gQ()||(A.referrerPolicy="no-referrer"),t.emulatorConfig&&fm(t.emulatorConfig.host)&&(A.credentials="include"),XR.fetch()(await eD(t,t.config.apiHost,n,o),A)})}async function ZR(t,e,n){t._canInitEmulator=!1;const r={...G9,...e};try{const s=new W9(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const i=await a.json();if("needConfirmation"in i)throw w1(t,"account-exists-with-different-credential",i);if(a.ok&&!("errorMessage"in i))return i;{const o=a.ok?i.errorMessage:i.error.message,[l,A]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw w1(t,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw w1(t,"email-already-in-use",i);if(l==="USER_DISABLED")throw w1(t,"user-disabled",i);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(A)throw JR(t,d,A);hc(t,d)}}catch(s){if(s instanceof gu)throw s;hc(t,"network-request-failed",{message:String(s)})}}async function iy(t,e,n,r,s={}){const a=await Jd(t,e,n,r,s);return"mfaPendingCredential"in a&&hc(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function eD(t,e,n,r){const s=`${e}${n}?${r}`,a=t,i=a.config.emulator?i5(t.config,s):`${t.config.apiScheme}://${s}`;return z9.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(i).toString():i}function q9(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class W9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(oA(this.auth,"network-request-failed")),K9.get())})}}function w1(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=oA(t,e,r);return s.customData._tokenResponse=n,s}function EB(t){return t!==void 0&&t.enterprise!==void 0}class $9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return q9(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Y9(t,e){return Jd(t,"GET","/v2/recaptchaConfig",ch(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J9(t,e){return Jd(t,"POST","/v1/accounts:delete",e)}async function t2(t,e){return Jd(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function X9(t,e=!1){const n=hA(t),r=await n.getIdToken(e),s=o5(r);bn(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,i=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Jp(vb(s.auth_time)),issuedAtTime:Jp(vb(s.iat)),expirationTime:Jp(vb(s.exp)),signInProvider:i||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function vb(t){return Number(t)*1e3}function o5(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Tv("JWT malformed, contained fewer than 3 sections"),null;try{const s=MR(n);return s?JSON.parse(s):(Tv("Failed to decode base64 JWT payload"),null)}catch(s){return Tv("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function _B(t){const e=o5(t);return bn(e,"internal-error"),bn(typeof e.exp<"u","internal-error"),bn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yg(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof gu&&Z9(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Z9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jp(this.lastLoginAt),this.creationTime=Jp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n2(t){var h;const e=t.auth,n=await t.getIdToken(),r=await yg(t,t2(e,{idToken:n}));bn(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=(h=s.providerUserInfo)!=null&&h.length?tD(s.providerUserInfo):[],i=nH(t.providerData,a),o=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(i!=null&&i.length),A=o?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new iE(s.createdAt,s.lastLoginAt),isAnonymous:A};Object.assign(t,d)}async function tH(t){const e=hA(t);await n2(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nH(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function tD(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rH(t,e){const n=await ZR(t,{},async()=>{const r=tx({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,i=await eD(t,s,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return t.emulatorConfig&&fm(t.emulatorConfig.host)&&(l.credentials="include"),XR.fetch()(i,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sH(t,e){return Jd(t,"POST","/v2/accounts:revokeToken",ch(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){bn(e.idToken,"internal-error"),bn(typeof e.idToken<"u","internal-error"),bn(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_B(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){bn(e.length!==0,"internal-error");const n=_B(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(bn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await rH(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,i=new N0;return r&&(bn(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),s&&(bn(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),a&&(bn(typeof a=="number","internal-error",{appName:e}),i.expirationTime=a),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new N0,this.toJSON())}_performRefresh(){return eu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(t,e){bn(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class lc{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new eH(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new iE(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await yg(this,this.stsTokenManager.getToken(this.auth,e));return bn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return X9(this,e)}reload(){return tH(this)}_assign(e){this!==e&&(bn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new lc({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){bn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await n2(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ac(this.auth.app))return Promise.reject(Nd(this.auth));const e=await this.getIdToken();return await yg(this,J9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,a=n.phoneNumber??void 0,i=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,A=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:g,providerData:w,stsTokenManager:b}=n;bn(h&&b,e,"internal-error");const E=N0.fromJSON(this.name,b);bn(typeof h=="string",e,"internal-error"),nd(r,e.name),nd(s,e.name),bn(typeof p=="boolean",e,"internal-error"),bn(typeof g=="boolean",e,"internal-error"),nd(a,e.name),nd(i,e.name),nd(o,e.name),nd(l,e.name),nd(A,e.name),nd(d,e.name);const B=new lc({uid:h,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:g,photoURL:i,phoneNumber:a,tenantId:o,stsTokenManager:E,createdAt:A,lastLoginAt:d});return w&&Array.isArray(w)&&(B.providerData=w.map(I=>({...I}))),l&&(B._redirectEventId=l),B}static async _fromIdTokenResponse(e,n,r=!1){const s=new N0;s.updateFromServerResponse(n);const a=new lc({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await n2(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];bn(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?tD(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),o=new N0;o.updateFromIdToken(r);const l=new lc({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:i}),A={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new iE(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,A),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB=new Map;function tu(t){Au(t instanceof Function,"Expected a class definition");let e=SB.get(t);return e?(Au(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,SB.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nD.type="NONE";const TB=nD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(t,e,n){return`firebase:${t}:${e}:${n}`}class k0{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Bv(this.userKey,s.apiKey,a),this.fullPersistenceKey=Bv("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await t2(this.auth,{idToken:e}).catch(()=>{});return n?lc._fromGetAccountInfoResponse(this.auth,n,e):null}return lc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new k0(tu(TB),e,r);const s=(await Promise.all(n.map(async A=>{if(await A._isAvailable())return A}))).filter(A=>A);let a=s[0]||tu(TB);const i=Bv(r,e.config.apiKey,e.name);let o=null;for(const A of n)try{const d=await A._get(i);if(d){let h;if(typeof d=="string"){const p=await t2(e,{idToken:d}).catch(()=>{});if(!p)break;h=await lc._fromGetAccountInfoResponse(e,p,d)}else h=lc._fromJSON(e,d);A!==a&&(o=h),a=A;break}}catch{}const l=s.filter(A=>A._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new k0(a,e,r):(a=l[0],o&&await a._set(i,o.toJSON()),await Promise.all(n.map(async A=>{if(A!==a)try{await A._remove(i)}catch{}})),new k0(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BB(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lD(e))return"Blackberry";if(cD(e))return"Webos";if(sD(e))return"Safari";if((e.includes("chrome/")||aD(e))&&!e.includes("edge/"))return"Chrome";if(oD(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function rD(t=Fi()){return/firefox\//i.test(t)}function sD(t=Fi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aD(t=Fi()){return/crios\//i.test(t)}function iD(t=Fi()){return/iemobile/i.test(t)}function oD(t=Fi()){return/android/i.test(t)}function lD(t=Fi()){return/blackberry/i.test(t)}function cD(t=Fi()){return/webos/i.test(t)}function l5(t=Fi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aH(t=Fi()){var e;return l5(t)&&!!((e=window.navigator)!=null&&e.standalone)}function iH(){return yQ()&&document.documentMode===10}function AD(t=Fi()){return l5(t)||oD(t)||cD(t)||lD(t)||/windows phone/i.test(t)||iD(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t,e=[]){let n;switch(t){case"Browser":n=BB(Fi());break;case"Worker":n=`${BB(Fi())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${hm}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((i,o)=>{try{const l=e(a);i(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lH(t,e={}){return Jd(t,"GET","/v2/passwordPolicy",ch(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cH=6;class AH{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??cH,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uH{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new NB(this),this.idTokenSubscription=new NB(this),this.beforeStateQueue=new oH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=tu(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await k0.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await t2(this,{idToken:e}),r=await lc._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(ac(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(a=this.redirectUser)==null?void 0:a._redirectEventId,o=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return bn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await n2(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=V9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ac(this.app))return Promise.reject(Nd(this));const n=e?hA(e):null;return n&&bn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&bn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ac(this.app)?Promise.reject(Nd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ac(this.app)?Promise.reject(Nd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(tu(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lH(this),n=new AH(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ex("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sH(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&tu(e)||this._popupRedirectResolver;bn(n,this,"argument-error"),this.redirectPersistenceManager=await k0.create(this,[tu(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(bn(o,this,"internal-error"),o.then(()=>{i||a(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{i=!0,l()}}else{const l=e.addObserver(n);return()=>{i=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return bn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(ac(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&O9(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function mm(t){return hA(t)}class NB{constructor(e){this.auth=e,this.observer=null,this.addObserver=BQ(n=>this.observer=n)}get next(){return bn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dH(t){oy=t}function dD(t){return oy.loadJS(t)}function fH(){return oy.recaptchaEnterpriseScript}function hH(){return oy.gapiScript}function mH(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class pH{constructor(){this.enterprise=new gH}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class gH{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const xH="recaptcha-enterprise",fD="NO_RECAPTCHA";class vH{constructor(e){this.type=xH,this.auth=mm(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(i,o)=>{Y9(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const A=new $9(l);return a.tenantId==null?a._agentRecaptchaConfig=A:a._tenantRecaptchaConfigs[a.tenantId]=A,i(A.siteKey)}}).catch(l=>{o(l)})})}function s(a,i,o){const l=window.grecaptcha;EB(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(A=>{i(A)}).catch(()=>{i(fD)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new pH().execute("siteKey",{action:"verify"}):new Promise((a,i)=>{r(this.auth).then(o=>{if(!n&&EB(window.grecaptcha))s(o,a,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=fH();l.length!==0&&(l+=o),dD(l).then(()=>{s(o,a,i)}).catch(A=>{i(A)})}}).catch(o=>{i(o)})})}}async function kB(t,e,n,r=!1,s=!1){const a=new vH(t);let i;if(s)i=fD;else try{i=await a.verify(n)}catch{i=await a.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,A=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:A,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function IB(t,e,n,r,s){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await kB(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await kB(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yH(t,e){const n=s5(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Yf(a,e??{}))return s;hc(s,"already-initialized")}return n.initialize({options:e})}function wH(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(tu);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function bH(t,e,n){const r=mm(t);bn(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=hD(e),{host:i,port:o}=CH(e),l=o===null?"":`:${o}`,A={url:`${a}//${i}${l}/`},d=Object.freeze({host:i,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){bn(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),bn(Yf(A,r.config.emulator)&&Yf(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=A,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,fm(i)?(QR(`${a}//${i}${l}`),HR("Auth",!0)):EH()}function hD(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function CH(t){const e=hD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:FB(r.substr(a.length+1))}}else{const[a,i]=r.split(":");return{host:a,port:FB(i)}}}function FB(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function EH(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return eu("not implemented")}_getIdTokenResponse(e){return eu("not implemented")}_linkToIdToken(e,n){return eu("not implemented")}_getReauthenticationResolver(e){return eu("not implemented")}}async function _H(t,e){return Jd(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SH(t,e){return iy(t,"POST","/v1/accounts:signInWithPassword",ch(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TH(t,e){return iy(t,"POST","/v1/accounts:signInWithEmailLink",ch(t,e))}async function BH(t,e){return iy(t,"POST","/v1/accounts:signInWithEmailLink",ch(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg extends c5{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new wg(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new wg(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return IB(e,n,"signInWithPassword",SH);case"emailLink":return TH(e,{email:this._email,oobCode:this._password});default:hc(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return IB(e,r,"signUpPassword",_H);case"emailLink":return BH(e,{idToken:n,email:this._email,oobCode:this._password});default:hc(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I0(t,e){return iy(t,"POST","/v1/accounts:signInWithIdp",ch(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NH="http://localhost";class Xf extends c5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hc("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=n;if(!r||!s)return null;const i=new Xf(r,s);return i.idToken=a.idToken||void 0,i.accessToken=a.accessToken||void 0,i.secret=a.secret,i.nonce=a.nonce,i.pendingToken=a.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return I0(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,I0(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,I0(e,n)}buildRequest(){const e={requestUri:NH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=tx(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kH(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IH(t){const e=Np(kp(t)).link,n=e?Np(kp(e)).deep_link_id:null,r=Np(kp(t)).deep_link_id;return(r?Np(kp(r)).link:null)||r||n||e||t}class A5{constructor(e){const n=Np(kp(e)),r=n.apiKey??null,s=n.oobCode??null,a=kH(n.mode??null);bn(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=IH(e);try{return new A5(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(){this.providerId=pm.PROVIDER_ID}static credential(e,n){return wg._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=A5.parseLink(n);return bn(r,"argument-error"),wg._fromEmailAndCode(e,r.code,r.tenantId)}}pm.PROVIDER_ID="password";pm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";pm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx extends mD{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd extends rx{constructor(){super("facebook.com")}static credential(e){return Xf._fromParams({providerId:fd.PROVIDER_ID,signInMethod:fd.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fd.credentialFromTaggedObject(e)}static credentialFromError(e){return fd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fd.credential(e.oauthAccessToken)}catch{return null}}}fd.FACEBOOK_SIGN_IN_METHOD="facebook.com";fd.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd extends rx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xf._fromParams({providerId:hd.PROVIDER_ID,signInMethod:hd.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return hd.credentialFromTaggedObject(e)}static credentialFromError(e){return hd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return hd.credential(n,r)}catch{return null}}}hd.GOOGLE_SIGN_IN_METHOD="google.com";hd.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md extends rx{constructor(){super("github.com")}static credential(e){return Xf._fromParams({providerId:md.PROVIDER_ID,signInMethod:md.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return md.credentialFromTaggedObject(e)}static credentialFromError(e){return md.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return md.credential(e.oauthAccessToken)}catch{return null}}}md.GITHUB_SIGN_IN_METHOD="github.com";md.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd extends rx{constructor(){super("twitter.com")}static credential(e,n){return Xf._fromParams({providerId:pd.PROVIDER_ID,signInMethod:pd.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pd.credentialFromTaggedObject(e)}static credentialFromError(e){return pd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return pd.credential(n,r)}catch{return null}}}pd.TWITTER_SIGN_IN_METHOD="twitter.com";pd.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await lc._fromIdTokenResponse(e,r,s),i=RB(r);return new X0({user:a,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=RB(r);return new X0({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function RB(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2 extends gu{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,r2.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new r2(e,n,r,s)}}function pD(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?r2._fromErrorAndOperation(t,a,e,r):a})}async function FH(t,e,n=!1){const r=await yg(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return X0._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RH(t,e,n=!1){const{auth:r}=t;if(ac(r.app))return Promise.reject(Nd(r));const s="reauthenticate";try{const a=await yg(t,pD(r,s,e,t),n);bn(a.idToken,r,"internal-error");const i=o5(a.idToken);bn(i,r,"internal-error");const{sub:o}=i;return bn(t.uid===o,r,"user-mismatch"),X0._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&hc(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gD(t,e,n=!1){if(ac(t.app))return Promise.reject(Nd(t));const r="signIn",s=await pD(t,r,e),a=await X0._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function DH(t,e){return gD(mm(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UH(t){const e=mm(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function LH(t,e,n){return ac(t.app)?Promise.reject(Nd(t)):DH(hA(t),pm.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&UH(t),r})}function MH(t,e,n,r){return hA(t).onIdTokenChanged(e,n,r)}function PH(t,e,n){return hA(t).beforeAuthStateChanged(e,n)}function jH(t,e,n,r){return hA(t).onAuthStateChanged(e,n,r)}function OH(t){return hA(t).signOut()}const s2="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(s2,"1"),this.storage.removeItem(s2),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QH=1e3,HH=10;class vD extends xD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,o,l)=>{this.notifyListeners(i,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},a=this.storage.getItem(r);iH()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,HH):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},QH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}vD.type="LOCAL";const VH=vD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD extends xD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yD.type="SESSION";const wD=yD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GH(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ly(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const o=Array.from(i).map(async A=>A(n.origin,a)),l=await GH(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ly.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,i;return new Promise((o,l)=>{const A=u5("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);i={messageChannel:s,onMessage(h){const p=h;if(p.data.eventId===A)switch(p.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(p.data.response);break;default:clearTimeout(d),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:A,data:n},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(){return window}function KH(t){lA().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(){return typeof lA().WorkerGlobalScope<"u"&&typeof lA().importScripts=="function"}async function qH(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WH(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function $H(){return bD()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD="firebaseLocalStorageDb",YH=1,a2="firebaseLocalStorage",ED="fbase_key";class sx{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cy(t,e){return t.transaction([a2],e?"readwrite":"readonly").objectStore(a2)}function JH(){const t=indexedDB.deleteDatabase(CD);return new sx(t).toPromise()}function oE(){const t=indexedDB.open(CD,YH);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(a2,{keyPath:ED})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(a2)?e(r):(r.close(),await JH(),e(await oE()))})})}async function DB(t,e,n){const r=cy(t,!0).put({[ED]:e,value:n});return new sx(r).toPromise()}async function XH(t,e){const n=cy(t,!1).get(e),r=await new sx(n).toPromise();return r===void 0?null:r.value}function UB(t,e){const n=cy(t,!0).delete(e);return new sx(n).toPromise()}const ZH=800,eV=3;class _D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await oE(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>eV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ly._getInstance($H()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await qH(),!this.activeServiceWorker)return;this.sender=new zH(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await oE();return await DB(e,s2,"1"),await UB(e,s2),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>DB(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>XH(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>UB(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=cy(s,!1).getAll();return new sx(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_D.type="LOCAL";const tV=_D;new nx(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(t,e){return e?tu(e):(bn(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5 extends c5{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return I0(e,this._buildIdpRequest())}_linkToIdToken(e,n){return I0(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return I0(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function rV(t){return gD(t.auth,new d5(t),t.bypassAuthState)}function sV(t){const{auth:e,user:n}=t;return bn(n,e,"internal-error"),RH(n,new d5(t),t.bypassAuthState)}async function aV(t){const{auth:e,user:n}=t;return bn(n,e,"internal-error"),FH(n,new d5(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:i,type:o}=e;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(A){this.reject(A)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rV;case"linkViaPopup":case"linkViaRedirect":return aV;case"reauthViaPopup":case"reauthViaRedirect":return sV;default:hc(this.auth,"internal-error")}}resolve(e){Au(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Au(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=new nx(2e3,1e4);class C0 extends SD{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,C0.currentPopupAction&&C0.currentPopupAction.cancel(),C0.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return bn(e,this.auth,"internal-error"),e}async onExecution(){Au(this.filter.length===1,"Popup operations only handle one event");const e=u5();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(oA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(oA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C0.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iV.get())};e()}}C0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV="pendingRedirect",Nv=new Map;class lV extends SD{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Nv.get(this.auth._key());if(!e){try{const r=await cV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Nv.set(this.auth._key(),e)}return this.bypassAuthState||Nv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cV(t,e){const n=dV(e),r=uV(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function AV(t,e){Nv.set(t._key(),e)}function uV(t){return tu(t._redirectPersistence)}function dV(t){return Bv(oV,t.config.apiKey,t.name)}async function fV(t,e,n=!1){if(ac(t.app))return Promise.reject(Nd(t));const r=mm(t),s=nV(r,e),i=await new lV(r,s,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=600*1e3;class mV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!TD(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(oA(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hV&&this.cachedEventUids.clear(),this.cachedEventUids.has(LB(e))}saveEventToCache(e){this.cachedEventUids.add(LB(e)),this.lastProcessedEventTime=Date.now()}}function LB(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function TD({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TD(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gV(t,e={}){return Jd(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vV=/^https?/;async function yV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await gV(t);for(const n of e)try{if(wV(n))return}catch{}hc(t,"unauthorized-domain")}function wV(t){const e=aE(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!vV.test(n))return!1;if(xV.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=new nx(3e4,6e4);function MB(){const t=lA().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function CV(t){return new Promise((e,n)=>{var s,a,i;function r(){MB(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{MB(),n(oA(t,"network-request-failed"))},timeout:bV.get()})}if((a=(s=lA().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((i=lA().gapi)!=null&&i.load)r();else{const o=mH("iframefcb");return lA()[o]=()=>{gapi.load?r():n(oA(t,"network-request-failed"))},dD(`${hH()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw kv=null,e})}let kv=null;function EV(t){return kv=kv||CV(t),kv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=new nx(5e3,15e3),SV="__/auth/iframe",TV="emulator/auth/iframe",BV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kV(t){const e=t.config;bn(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?i5(e,TV):`https://${t.config.authDomain}/${SV}`,r={apiKey:e.apiKey,appName:t.name,v:hm},s=NV.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${tx(r).slice(1)}`}async function IV(t){const e=await EV(t),n=lA().gapi;return bn(n,t,"internal-error"),e.open({where:document.body,url:kV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BV,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const i=oA(t,"network-request-failed"),o=lA().setTimeout(()=>{a(i)},_V.get());function l(){lA().clearTimeout(o),s(r)}r.ping(l).then(l,()=>{a(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},RV=500,DV=600,UV="_blank",LV="http://localhost";class PB{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MV(t,e,n,r=RV,s=DV){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...FV,width:r.toString(),height:s.toString(),top:a,left:i},A=Fi().toLowerCase();n&&(o=aD(A)?UV:n),rD(A)&&(e=e||LV,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[g,w])=>`${p}${g}=${w},`,"");if(aH(A)&&o!=="_self")return PV(e||"",o),new PB(null);const h=window.open(e||"",o,d);bn(h,t,"popup-blocked");try{h.focus()}catch{}return new PB(h)}function PV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV="__/auth/handler",OV="emulator/auth/handler",QV=encodeURIComponent("fac");async function jB(t,e,n,r,s,a){bn(t.config.authDomain,t,"auth-domain-config-required"),bn(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:hm,eventId:s};if(e instanceof mD){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",TQ(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof rx){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),A=l?`#${QV}=${encodeURIComponent(l)}`:"";return`${HV(t)}?${tx(o).slice(1)}${A}`}function HV({config:t}){return t.emulator?i5(t,OV):`https://${t.authDomain}/${jV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="webStorageSupport";class VV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wD,this._completeRedirectFn=fV,this._overrideRedirectResult=AV}async _openPopup(e,n,r,s){var i;Au((i=this.eventManagers[e._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await jB(e,n,r,aE(),s);return MV(e,a,u5())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await jB(e,n,r,aE(),s);return KH(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Au(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await IV(e),r=new mV(e);return n.register("authEvent",s=>(bn(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yb,{type:yb},s=>{var i;const a=(i=s==null?void 0:s[0])==null?void 0:i[yb];a!==void 0&&n(!!a),hc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return AD()||sD()||l5()}}const GV=VV;var OB="@firebase/auth",QB="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){bn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qV(t){J0(new Jf("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;bn(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uD(t)},A=new uH(r,s,a,l);return wH(A,n),A},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),J0(new Jf("auth-internal",e=>{const n=mm(e.getProvider("auth").getImmediate());return(r=>new zV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bd(OB,QB,KV(t)),Bd(OB,QB,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV=300,$V=OR("authIdTokenMaxAge")||WV;let HB=null;const YV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>$V)return;const s=n==null?void 0:n.token;HB!==s&&(HB=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function JV(t=KR()){const e=s5(t,"auth");if(e.isInitialized())return e.getImmediate();const n=yH(t,{popupRedirectResolver:GV,persistence:[tV,VH,wD]}),r=OR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const i=YV(a.toString());PH(n,i,()=>i(n.currentUser)),MH(n,o=>i(o))}}const s=PR("auth");return s&&bH(n,`http://${s}`),n}function XV(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}dH({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=oA("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",XV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qV("Browser");var VB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kd,BD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,N){function T(){}T.prototype=N.prototype,S.D=N.prototype,S.prototype=new T,S.prototype.constructor=S,S.C=function(V,M,U){for(var O=Array(arguments.length-2),G=2;G<arguments.length;G++)O[G-2]=arguments[G];return N.prototype[M].apply(V,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,N,T){T||(T=0);var V=Array(16);if(typeof N=="string")for(var M=0;16>M;++M)V[M]=N.charCodeAt(T++)|N.charCodeAt(T++)<<8|N.charCodeAt(T++)<<16|N.charCodeAt(T++)<<24;else for(M=0;16>M;++M)V[M]=N[T++]|N[T++]<<8|N[T++]<<16|N[T++]<<24;N=S.g[0],T=S.g[1],M=S.g[2];var U=S.g[3],O=N+(U^T&(M^U))+V[0]+3614090360&4294967295;N=T+(O<<7&4294967295|O>>>25),O=U+(M^N&(T^M))+V[1]+3905402710&4294967295,U=N+(O<<12&4294967295|O>>>20),O=M+(T^U&(N^T))+V[2]+606105819&4294967295,M=U+(O<<17&4294967295|O>>>15),O=T+(N^M&(U^N))+V[3]+3250441966&4294967295,T=M+(O<<22&4294967295|O>>>10),O=N+(U^T&(M^U))+V[4]+4118548399&4294967295,N=T+(O<<7&4294967295|O>>>25),O=U+(M^N&(T^M))+V[5]+1200080426&4294967295,U=N+(O<<12&4294967295|O>>>20),O=M+(T^U&(N^T))+V[6]+2821735955&4294967295,M=U+(O<<17&4294967295|O>>>15),O=T+(N^M&(U^N))+V[7]+4249261313&4294967295,T=M+(O<<22&4294967295|O>>>10),O=N+(U^T&(M^U))+V[8]+1770035416&4294967295,N=T+(O<<7&4294967295|O>>>25),O=U+(M^N&(T^M))+V[9]+2336552879&4294967295,U=N+(O<<12&4294967295|O>>>20),O=M+(T^U&(N^T))+V[10]+4294925233&4294967295,M=U+(O<<17&4294967295|O>>>15),O=T+(N^M&(U^N))+V[11]+2304563134&4294967295,T=M+(O<<22&4294967295|O>>>10),O=N+(U^T&(M^U))+V[12]+1804603682&4294967295,N=T+(O<<7&4294967295|O>>>25),O=U+(M^N&(T^M))+V[13]+4254626195&4294967295,U=N+(O<<12&4294967295|O>>>20),O=M+(T^U&(N^T))+V[14]+2792965006&4294967295,M=U+(O<<17&4294967295|O>>>15),O=T+(N^M&(U^N))+V[15]+1236535329&4294967295,T=M+(O<<22&4294967295|O>>>10),O=N+(M^U&(T^M))+V[1]+4129170786&4294967295,N=T+(O<<5&4294967295|O>>>27),O=U+(T^M&(N^T))+V[6]+3225465664&4294967295,U=N+(O<<9&4294967295|O>>>23),O=M+(N^T&(U^N))+V[11]+643717713&4294967295,M=U+(O<<14&4294967295|O>>>18),O=T+(U^N&(M^U))+V[0]+3921069994&4294967295,T=M+(O<<20&4294967295|O>>>12),O=N+(M^U&(T^M))+V[5]+3593408605&4294967295,N=T+(O<<5&4294967295|O>>>27),O=U+(T^M&(N^T))+V[10]+38016083&4294967295,U=N+(O<<9&4294967295|O>>>23),O=M+(N^T&(U^N))+V[15]+3634488961&4294967295,M=U+(O<<14&4294967295|O>>>18),O=T+(U^N&(M^U))+V[4]+3889429448&4294967295,T=M+(O<<20&4294967295|O>>>12),O=N+(M^U&(T^M))+V[9]+568446438&4294967295,N=T+(O<<5&4294967295|O>>>27),O=U+(T^M&(N^T))+V[14]+3275163606&4294967295,U=N+(O<<9&4294967295|O>>>23),O=M+(N^T&(U^N))+V[3]+4107603335&4294967295,M=U+(O<<14&4294967295|O>>>18),O=T+(U^N&(M^U))+V[8]+1163531501&4294967295,T=M+(O<<20&4294967295|O>>>12),O=N+(M^U&(T^M))+V[13]+2850285829&4294967295,N=T+(O<<5&4294967295|O>>>27),O=U+(T^M&(N^T))+V[2]+4243563512&4294967295,U=N+(O<<9&4294967295|O>>>23),O=M+(N^T&(U^N))+V[7]+1735328473&4294967295,M=U+(O<<14&4294967295|O>>>18),O=T+(U^N&(M^U))+V[12]+2368359562&4294967295,T=M+(O<<20&4294967295|O>>>12),O=N+(T^M^U)+V[5]+4294588738&4294967295,N=T+(O<<4&4294967295|O>>>28),O=U+(N^T^M)+V[8]+2272392833&4294967295,U=N+(O<<11&4294967295|O>>>21),O=M+(U^N^T)+V[11]+1839030562&4294967295,M=U+(O<<16&4294967295|O>>>16),O=T+(M^U^N)+V[14]+4259657740&4294967295,T=M+(O<<23&4294967295|O>>>9),O=N+(T^M^U)+V[1]+2763975236&4294967295,N=T+(O<<4&4294967295|O>>>28),O=U+(N^T^M)+V[4]+1272893353&4294967295,U=N+(O<<11&4294967295|O>>>21),O=M+(U^N^T)+V[7]+4139469664&4294967295,M=U+(O<<16&4294967295|O>>>16),O=T+(M^U^N)+V[10]+3200236656&4294967295,T=M+(O<<23&4294967295|O>>>9),O=N+(T^M^U)+V[13]+681279174&4294967295,N=T+(O<<4&4294967295|O>>>28),O=U+(N^T^M)+V[0]+3936430074&4294967295,U=N+(O<<11&4294967295|O>>>21),O=M+(U^N^T)+V[3]+3572445317&4294967295,M=U+(O<<16&4294967295|O>>>16),O=T+(M^U^N)+V[6]+76029189&4294967295,T=M+(O<<23&4294967295|O>>>9),O=N+(T^M^U)+V[9]+3654602809&4294967295,N=T+(O<<4&4294967295|O>>>28),O=U+(N^T^M)+V[12]+3873151461&4294967295,U=N+(O<<11&4294967295|O>>>21),O=M+(U^N^T)+V[15]+530742520&4294967295,M=U+(O<<16&4294967295|O>>>16),O=T+(M^U^N)+V[2]+3299628645&4294967295,T=M+(O<<23&4294967295|O>>>9),O=N+(M^(T|~U))+V[0]+4096336452&4294967295,N=T+(O<<6&4294967295|O>>>26),O=U+(T^(N|~M))+V[7]+1126891415&4294967295,U=N+(O<<10&4294967295|O>>>22),O=M+(N^(U|~T))+V[14]+2878612391&4294967295,M=U+(O<<15&4294967295|O>>>17),O=T+(U^(M|~N))+V[5]+4237533241&4294967295,T=M+(O<<21&4294967295|O>>>11),O=N+(M^(T|~U))+V[12]+1700485571&4294967295,N=T+(O<<6&4294967295|O>>>26),O=U+(T^(N|~M))+V[3]+2399980690&4294967295,U=N+(O<<10&4294967295|O>>>22),O=M+(N^(U|~T))+V[10]+4293915773&4294967295,M=U+(O<<15&4294967295|O>>>17),O=T+(U^(M|~N))+V[1]+2240044497&4294967295,T=M+(O<<21&4294967295|O>>>11),O=N+(M^(T|~U))+V[8]+1873313359&4294967295,N=T+(O<<6&4294967295|O>>>26),O=U+(T^(N|~M))+V[15]+4264355552&4294967295,U=N+(O<<10&4294967295|O>>>22),O=M+(N^(U|~T))+V[6]+2734768916&4294967295,M=U+(O<<15&4294967295|O>>>17),O=T+(U^(M|~N))+V[13]+1309151649&4294967295,T=M+(O<<21&4294967295|O>>>11),O=N+(M^(T|~U))+V[4]+4149444226&4294967295,N=T+(O<<6&4294967295|O>>>26),O=U+(T^(N|~M))+V[11]+3174756917&4294967295,U=N+(O<<10&4294967295|O>>>22),O=M+(N^(U|~T))+V[2]+718787259&4294967295,M=U+(O<<15&4294967295|O>>>17),O=T+(U^(M|~N))+V[9]+3951481745&4294967295,S.g[0]=S.g[0]+N&4294967295,S.g[1]=S.g[1]+(M+(O<<21&4294967295|O>>>11))&4294967295,S.g[2]=S.g[2]+M&4294967295,S.g[3]=S.g[3]+U&4294967295}r.prototype.u=function(S,N){N===void 0&&(N=S.length);for(var T=N-this.blockSize,V=this.B,M=this.h,U=0;U<N;){if(M==0)for(;U<=T;)s(this,S,U),U+=this.blockSize;if(typeof S=="string"){for(;U<N;)if(V[M++]=S.charCodeAt(U++),M==this.blockSize){s(this,V),M=0;break}}else for(;U<N;)if(V[M++]=S[U++],M==this.blockSize){s(this,V),M=0;break}}this.h=M,this.o+=N},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var N=1;N<S.length-8;++N)S[N]=0;var T=8*this.o;for(N=S.length-8;N<S.length;++N)S[N]=T&255,T/=256;for(this.u(S),S=Array(16),N=T=0;4>N;++N)for(var V=0;32>V;V+=8)S[T++]=this.g[N]>>>V&255;return S};function a(S,N){var T=o;return Object.prototype.hasOwnProperty.call(T,S)?T[S]:T[S]=N(S)}function i(S,N){this.h=N;for(var T=[],V=!0,M=S.length-1;0<=M;M--){var U=S[M]|0;V&&U==N||(T[M]=U,V=!1)}this.g=T}var o={};function l(S){return-128<=S&&128>S?a(S,function(N){return new i([N|0],0>N?-1:0)}):new i([S|0],0>S?-1:0)}function A(S){if(isNaN(S)||!isFinite(S))return h;if(0>S)return E(A(-S));for(var N=[],T=1,V=0;S>=T;V++)N[V]=S/T|0,T*=4294967296;return new i(N,0)}function d(S,N){if(S.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(S.charAt(0)=="-")return E(d(S.substring(1),N));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=A(Math.pow(N,8)),V=h,M=0;M<S.length;M+=8){var U=Math.min(8,S.length-M),O=parseInt(S.substring(M,M+U),N);8>U?(U=A(Math.pow(N,U)),V=V.j(U).add(A(O))):(V=V.j(T),V=V.add(A(O)))}return V}var h=l(0),p=l(1),g=l(16777216);t=i.prototype,t.m=function(){if(b(this))return-E(this).m();for(var S=0,N=1,T=0;T<this.g.length;T++){var V=this.i(T);S+=(0<=V?V:4294967296+V)*N,N*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(b(this))return"-"+E(this).toString(S);for(var N=A(Math.pow(S,6)),T=this,V="";;){var M=F(T,N).g;T=B(T,M.j(N));var U=((0<T.g.length?T.g[0]:T.h)>>>0).toString(S);if(T=M,w(T))return U+V;for(;6>U.length;)U="0"+U;V=U+V}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(var N=0;N<S.g.length;N++)if(S.g[N]!=0)return!1;return!0}function b(S){return S.h==-1}t.l=function(S){return S=B(this,S),b(S)?-1:w(S)?0:1};function E(S){for(var N=S.g.length,T=[],V=0;V<N;V++)T[V]=~S.g[V];return new i(T,~S.h).add(p)}t.abs=function(){return b(this)?E(this):this},t.add=function(S){for(var N=Math.max(this.g.length,S.g.length),T=[],V=0,M=0;M<=N;M++){var U=V+(this.i(M)&65535)+(S.i(M)&65535),O=(U>>>16)+(this.i(M)>>>16)+(S.i(M)>>>16);V=O>>>16,U&=65535,O&=65535,T[M]=O<<16|U}return new i(T,T[T.length-1]&-2147483648?-1:0)};function B(S,N){return S.add(E(N))}t.j=function(S){if(w(this)||w(S))return h;if(b(this))return b(S)?E(this).j(E(S)):E(E(this).j(S));if(b(S))return E(this.j(E(S)));if(0>this.l(g)&&0>S.l(g))return A(this.m()*S.m());for(var N=this.g.length+S.g.length,T=[],V=0;V<2*N;V++)T[V]=0;for(V=0;V<this.g.length;V++)for(var M=0;M<S.g.length;M++){var U=this.i(V)>>>16,O=this.i(V)&65535,G=S.i(M)>>>16,ie=S.i(M)&65535;T[2*V+2*M]+=O*ie,I(T,2*V+2*M),T[2*V+2*M+1]+=U*ie,I(T,2*V+2*M+1),T[2*V+2*M+1]+=O*G,I(T,2*V+2*M+1),T[2*V+2*M+2]+=U*G,I(T,2*V+2*M+2)}for(V=0;V<N;V++)T[V]=T[2*V+1]<<16|T[2*V];for(V=N;V<2*N;V++)T[V]=0;return new i(T,0)};function I(S,N){for(;(S[N]&65535)!=S[N];)S[N+1]+=S[N]>>>16,S[N]&=65535,N++}function k(S,N){this.g=S,this.h=N}function F(S,N){if(w(N))throw Error("division by zero");if(w(S))return new k(h,h);if(b(S))return N=F(E(S),N),new k(E(N.g),E(N.h));if(b(N))return N=F(S,E(N)),new k(E(N.g),N.h);if(30<S.g.length){if(b(S)||b(N))throw Error("slowDivide_ only works with positive integers.");for(var T=p,V=N;0>=V.l(S);)T=D(T),V=D(V);var M=P(T,1),U=P(V,1);for(V=P(V,2),T=P(T,2);!w(V);){var O=U.add(V);0>=O.l(S)&&(M=M.add(T),U=O),V=P(V,1),T=P(T,1)}return N=B(S,M.j(N)),new k(M,N)}for(M=h;0<=S.l(N);){for(T=Math.max(1,Math.floor(S.m()/N.m())),V=Math.ceil(Math.log(T)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),U=A(T),O=U.j(N);b(O)||0<O.l(S);)T-=V,U=A(T),O=U.j(N);w(U)&&(U=p),M=M.add(U),S=B(S,O)}return new k(M,S)}t.A=function(S){return F(this,S).h},t.and=function(S){for(var N=Math.max(this.g.length,S.g.length),T=[],V=0;V<N;V++)T[V]=this.i(V)&S.i(V);return new i(T,this.h&S.h)},t.or=function(S){for(var N=Math.max(this.g.length,S.g.length),T=[],V=0;V<N;V++)T[V]=this.i(V)|S.i(V);return new i(T,this.h|S.h)},t.xor=function(S){for(var N=Math.max(this.g.length,S.g.length),T=[],V=0;V<N;V++)T[V]=this.i(V)^S.i(V);return new i(T,this.h^S.h)};function D(S){for(var N=S.g.length+1,T=[],V=0;V<N;V++)T[V]=S.i(V)<<1|S.i(V-1)>>>31;return new i(T,S.h)}function P(S,N){var T=N>>5;N%=32;for(var V=S.g.length-T,M=[],U=0;U<V;U++)M[U]=0<N?S.i(U+T)>>>N|S.i(U+T+1)<<32-N:S.i(U+T);return new i(M,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,BD=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=A,i.fromString=d,kd=i}).apply(typeof VB<"u"?VB:typeof self<"u"?self:typeof window<"u"?window:{});var b1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ND,Ip,kD,Iv,lE,ID,FD,RD;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(_,Y,re){return _==Array.prototype||_==Object.prototype||(_[Y]=re.value),_};function n(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof b1=="object"&&b1];for(var Y=0;Y<_.length;++Y){var re=_[Y];if(re&&re.Math==Math)return re}throw Error("Cannot find global object")}var r=n(this);function s(_,Y){if(Y)e:{var re=r;_=_.split(".");for(var ye=0;ye<_.length-1;ye++){var Oe=_[ye];if(!(Oe in re))break e;re=re[Oe]}_=_[_.length-1],ye=re[_],Y=Y(ye),Y!=ye&&Y!=null&&e(re,_,{configurable:!0,writable:!0,value:Y})}}function a(_,Y){_ instanceof String&&(_+="");var re=0,ye=!1,Oe={next:function(){if(!ye&&re<_.length){var Ze=re++;return{value:Y(Ze,_[Ze]),done:!1}}return ye=!0,{done:!0,value:void 0}}};return Oe[Symbol.iterator]=function(){return Oe},Oe}s("Array.prototype.values",function(_){return _||function(){return a(this,function(Y,re){return re})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(_){var Y=typeof _;return Y=Y!="object"?Y:_?Array.isArray(_)?"array":Y:"null",Y=="array"||Y=="object"&&typeof _.length=="number"}function A(_){var Y=typeof _;return Y=="object"&&_!=null||Y=="function"}function d(_,Y,re){return _.call.apply(_.bind,arguments)}function h(_,Y,re){if(!_)throw Error();if(2<arguments.length){var ye=Array.prototype.slice.call(arguments,2);return function(){var Oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Oe,ye),_.apply(Y,Oe)}}return function(){return _.apply(Y,arguments)}}function p(_,Y,re){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function g(_,Y){var re=Array.prototype.slice.call(arguments,1);return function(){var ye=re.slice();return ye.push.apply(ye,arguments),_.apply(this,ye)}}function w(_,Y){function re(){}re.prototype=Y.prototype,_.aa=Y.prototype,_.prototype=new re,_.prototype.constructor=_,_.Qb=function(ye,Oe,Ze){for(var _t=Array(arguments.length-2),dn=2;dn<arguments.length;dn++)_t[dn-2]=arguments[dn];return Y.prototype[Oe].apply(ye,_t)}}function b(_){const Y=_.length;if(0<Y){const re=Array(Y);for(let ye=0;ye<Y;ye++)re[ye]=_[ye];return re}return[]}function E(_,Y){for(let re=1;re<arguments.length;re++){const ye=arguments[re];if(l(ye)){const Oe=_.length||0,Ze=ye.length||0;_.length=Oe+Ze;for(let _t=0;_t<Ze;_t++)_[Oe+_t]=ye[_t]}else _.push(ye)}}class B{constructor(Y,re){this.i=Y,this.j=re,this.h=0,this.g=null}get(){let Y;return 0<this.h?(this.h--,Y=this.g,this.g=Y.next,Y.next=null):Y=this.i(),Y}}function I(_){return/^[\s\xa0]*$/.test(_)}function k(){var _=o.navigator;return _&&(_=_.userAgent)?_:""}function F(_){return F[" "](_),_}F[" "]=function(){};var D=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function P(_,Y,re){for(const ye in _)Y.call(re,_[ye],ye,_)}function S(_,Y){for(const re in _)Y.call(void 0,_[re],re,_)}function N(_){const Y={};for(const re in _)Y[re]=_[re];return Y}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(_,Y){let re,ye;for(let Oe=1;Oe<arguments.length;Oe++){ye=arguments[Oe];for(re in ye)_[re]=ye[re];for(let Ze=0;Ze<T.length;Ze++)re=T[Ze],Object.prototype.hasOwnProperty.call(ye,re)&&(_[re]=ye[re])}}function M(_){var Y=1;_=_.split(":");const re=[];for(;0<Y&&_.length;)re.push(_.shift()),Y--;return _.length&&re.push(_.join(":")),re}function U(_){o.setTimeout(()=>{throw _},0)}function O(){var _=Z;let Y=null;return _.g&&(Y=_.g,_.g=_.g.next,_.g||(_.h=null),Y.next=null),Y}class G{constructor(){this.h=this.g=null}add(Y,re){const ye=ie.get();ye.set(Y,re),this.h?this.h.next=ye:this.g=ye,this.h=ye}}var ie=new B(()=>new K,_=>_.reset());class K{constructor(){this.next=this.g=this.h=null}set(Y,re){this.h=Y,this.g=re,this.next=null}reset(){this.next=this.g=this.h=null}}let q,se=!1,Z=new G,X=()=>{const _=o.Promise.resolve(void 0);q=()=>{_.then(de)}};var de=()=>{for(var _;_=O();){try{_.h.call(_.g)}catch(re){U(re)}var Y=ie;Y.j(_),100>Y.h&&(Y.h++,_.next=Y.g,Y.g=_)}se=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(_,Y){this.type=_,this.g=this.target=Y,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var _=!1,Y=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const re=()=>{};o.addEventListener("test",re,Y),o.removeEventListener("test",re,Y)}catch{}return _}();function ne(_,Y){if(W.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_){var re=this.type=_.type,ye=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;if(this.target=_.target||_.srcElement,this.g=Y,Y=_.relatedTarget){if(D){e:{try{F(Y.nodeName);var Oe=!0;break e}catch{}Oe=!1}Oe||(Y=null)}}else re=="mouseover"?Y=_.fromElement:re=="mouseout"&&(Y=_.toElement);this.relatedTarget=Y,ye?(this.clientX=ye.clientX!==void 0?ye.clientX:ye.pageX,this.clientY=ye.clientY!==void 0?ye.clientY:ye.pageY,this.screenX=ye.screenX||0,this.screenY=ye.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=typeof _.pointerType=="string"?_.pointerType:oe[_.pointerType]||"",this.state=_.state,this.i=_,_.defaultPrevented&&ne.aa.h.call(this)}}w(ne,W);var oe={2:"touch",3:"pen",4:"mouse"};ne.prototype.h=function(){ne.aa.h.call(this);var _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),me=0;function ge(_,Y,re,ye,Oe){this.listener=_,this.proxy=null,this.src=Y,this.type=re,this.capture=!!ye,this.ha=Oe,this.key=++me,this.da=this.fa=!1}function ke(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function ve(_){this.src=_,this.g={},this.h=0}ve.prototype.add=function(_,Y,re,ye,Oe){var Ze=_.toString();_=this.g[Ze],_||(_=this.g[Ze]=[],this.h++);var _t=Re(_,Y,ye,Oe);return-1<_t?(Y=_[_t],re||(Y.fa=!1)):(Y=new ge(Y,this.src,Ze,!!ye,Oe),Y.fa=re,_.push(Y)),Y};function ae(_,Y){var re=Y.type;if(re in _.g){var ye=_.g[re],Oe=Array.prototype.indexOf.call(ye,Y,void 0),Ze;(Ze=0<=Oe)&&Array.prototype.splice.call(ye,Oe,1),Ze&&(ke(Y),_.g[re].length==0&&(delete _.g[re],_.h--))}}function Re(_,Y,re,ye){for(var Oe=0;Oe<_.length;++Oe){var Ze=_[Oe];if(!Ze.da&&Ze.listener==Y&&Ze.capture==!!re&&Ze.ha==ye)return Oe}return-1}var Je="closure_lm_"+(1e6*Math.random()|0),De={};function Ee(_,Y,re,ye,Oe){if(Array.isArray(Y)){for(var Ze=0;Ze<Y.length;Ze++)Ee(_,Y[Ze],re,ye,Oe);return null}return re=qt(re),_&&_[ue]?_.K(Y,re,A(ye)?!!ye.capture:!1,Oe):Ge(_,Y,re,!1,ye,Oe)}function Ge(_,Y,re,ye,Oe,Ze){if(!Y)throw Error("Invalid event type");var _t=A(Oe)?!!Oe.capture:!!Oe,dn=Nt(_);if(dn||(_[Je]=dn=new ve(_)),re=dn.add(Y,re,ye,_t,Ze),re.proxy)return re;if(ye=tt(),re.proxy=ye,ye.src=_,ye.listener=re,_.addEventListener)J||(Oe=_t),Oe===void 0&&(Oe=!1),_.addEventListener(Y.toString(),ye,Oe);else if(_.attachEvent)_.attachEvent(Ct(Y.toString()),ye);else if(_.addListener&&_.removeListener)_.addListener(ye);else throw Error("addEventListener and attachEvent are unavailable.");return re}function tt(){function _(re){return Y.call(_.src,_.listener,re)}const Y=At;return _}function it(_,Y,re,ye,Oe){if(Array.isArray(Y))for(var Ze=0;Ze<Y.length;Ze++)it(_,Y[Ze],re,ye,Oe);else ye=A(ye)?!!ye.capture:!!ye,re=qt(re),_&&_[ue]?(_=_.i,Y=String(Y).toString(),Y in _.g&&(Ze=_.g[Y],re=Re(Ze,re,ye,Oe),-1<re&&(ke(Ze[re]),Array.prototype.splice.call(Ze,re,1),Ze.length==0&&(delete _.g[Y],_.h--)))):_&&(_=Nt(_))&&(Y=_.g[Y.toString()],_=-1,Y&&(_=Re(Y,re,ye,Oe)),(re=-1<_?Y[_]:null)&&mt(re))}function mt(_){if(typeof _!="number"&&_&&!_.da){var Y=_.src;if(Y&&Y[ue])ae(Y.i,_);else{var re=_.type,ye=_.proxy;Y.removeEventListener?Y.removeEventListener(re,ye,_.capture):Y.detachEvent?Y.detachEvent(Ct(re),ye):Y.addListener&&Y.removeListener&&Y.removeListener(ye),(re=Nt(Y))?(ae(re,_),re.h==0&&(re.src=null,Y[Je]=null)):ke(_)}}}function Ct(_){return _ in De?De[_]:De[_]="on"+_}function At(_,Y){if(_.da)_=!0;else{Y=new ne(Y,this);var re=_.listener,ye=_.ha||_.src;_.fa&&mt(_),_=re.call(ye,Y)}return _}function Nt(_){return _=_[Je],_ instanceof ve?_:null}var It="__closure_events_fn_"+(1e9*Math.random()>>>0);function qt(_){return typeof _=="function"?_:(_[It]||(_[It]=function(Y){return _.handleEvent(Y)}),_[It])}function Lt(){j.call(this),this.i=new ve(this),this.M=this,this.F=null}w(Lt,j),Lt.prototype[ue]=!0,Lt.prototype.removeEventListener=function(_,Y,re,ye){it(this,_,Y,re,ye)};function Vt(_,Y){var re,ye=_.F;if(ye)for(re=[];ye;ye=ye.F)re.push(ye);if(_=_.M,ye=Y.type||Y,typeof Y=="string")Y=new W(Y,_);else if(Y instanceof W)Y.target=Y.target||_;else{var Oe=Y;Y=new W(ye,_),V(Y,Oe)}if(Oe=!0,re)for(var Ze=re.length-1;0<=Ze;Ze--){var _t=Y.g=re[Ze];Oe=Yt(_t,ye,!0,Y)&&Oe}if(_t=Y.g=_,Oe=Yt(_t,ye,!0,Y)&&Oe,Oe=Yt(_t,ye,!1,Y)&&Oe,re)for(Ze=0;Ze<re.length;Ze++)_t=Y.g=re[Ze],Oe=Yt(_t,ye,!1,Y)&&Oe}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var _=this.i,Y;for(Y in _.g){for(var re=_.g[Y],ye=0;ye<re.length;ye++)ke(re[ye]);delete _.g[Y],_.h--}}this.F=null},Lt.prototype.K=function(_,Y,re,ye){return this.i.add(String(_),Y,!1,re,ye)},Lt.prototype.L=function(_,Y,re,ye){return this.i.add(String(_),Y,!0,re,ye)};function Yt(_,Y,re,ye){if(Y=_.i.g[String(Y)],!Y)return!0;Y=Y.concat();for(var Oe=!0,Ze=0;Ze<Y.length;++Ze){var _t=Y[Ze];if(_t&&!_t.da&&_t.capture==re){var dn=_t.listener,qn=_t.ha||_t.src;_t.fa&&ae(_.i,_t),Oe=dn.call(qn,ye)!==!1&&Oe}}return Oe&&!ye.defaultPrevented}function Mt(_,Y,re){if(typeof _=="function")re&&(_=p(_,re));else if(_&&typeof _.handleEvent=="function")_=p(_.handleEvent,_);else throw Error("Invalid listener argument");return 2147483647<Number(Y)?-1:o.setTimeout(_,Y||0)}function kt(_){_.g=Mt(()=>{_.g=null,_.i&&(_.i=!1,kt(_))},_.l);const Y=_.h;_.h=null,_.m.apply(null,Y)}class gt extends j{constructor(Y,re){super(),this.m=Y,this.l=re,this.h=null,this.i=!1,this.g=null}j(Y){this.h=arguments,this.g?this.i=!0:kt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xn(_){j.call(this),this.h=_,this.g={}}w(xn,j);var Wt=[];function rr(_){P(_.g,function(Y,re){this.g.hasOwnProperty(re)&&mt(Y)},_),_.g={}}xn.prototype.N=function(){xn.aa.N.call(this),rr(this)},xn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mn=o.JSON.stringify,kn=o.JSON.parse,Er=class{stringify(_){return o.JSON.stringify(_,void 0)}parse(_){return o.JSON.parse(_,void 0)}};function Tn(){}Tn.prototype.h=null;function Zs(_){return _.h||(_.h=_.i())}function Jn(){}var qr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function as(){W.call(this,"d")}w(as,W);function Rn(){W.call(this,"c")}w(Rn,W);var Zt={},jn=null;function ea(){return jn=jn||new Lt}Zt.La="serverreachability";function jr(_){W.call(this,Zt.La,_)}w(jr,W);function us(_){const Y=ea();Vt(Y,new jr(Y))}Zt.STAT_EVENT="statevent";function ma(_,Y){W.call(this,Zt.STAT_EVENT,_),this.stat=Y}w(ma,W);function Ht(_){const Y=ea();Vt(Y,new ma(Y,_))}Zt.Ma="timingevent";function sr(_,Y){W.call(this,Zt.Ma,_),this.size=Y}w(sr,W);function Xn(_,Y){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){_()},Y)}function _r(){this.g=!0}_r.prototype.xa=function(){this.g=!1};function Nr(_,Y,re,ye,Oe,Ze){_.info(function(){if(_.g)if(Ze)for(var _t="",dn=Ze.split("&"),qn=0;qn<dn.length;qn++){var _n=dn[qn].split("=");if(1<_n.length){var xr=_n[0];_n=_n[1];var Sr=xr.split("_");_t=2<=Sr.length&&Sr[1]=="type"?_t+(xr+"="+_n+"&"):_t+(xr+"=redacted&")}}else _t=null;else _t=Ze;return"XMLHTTP REQ ("+ye+") [attempt "+Oe+"]: "+Y+`
`+re+`
`+_t})}function Or(_,Y,re,ye,Oe,Ze,_t){_.info(function(){return"XMLHTTP RESP ("+ye+") [ attempt "+Oe+"]: "+Y+`
`+re+`
`+Ze+" "+_t})}function fe(_,Y,re,ye){_.info(function(){return"XMLHTTP TEXT ("+Y+"): "+Ce(_,re)+(ye?" "+ye:"")})}function Be(_,Y){_.info(function(){return"TIMEOUT: "+Y})}_r.prototype.info=function(){};function Ce(_,Y){if(!_.g)return Y;if(!Y)return null;try{var re=JSON.parse(Y);if(re){for(_=0;_<re.length;_++)if(Array.isArray(re[_])){var ye=re[_];if(!(2>ye.length)){var Oe=ye[1];if(Array.isArray(Oe)&&!(1>Oe.length)){var Ze=Oe[0];if(Ze!="noop"&&Ze!="stop"&&Ze!="close")for(var _t=1;_t<Oe.length;_t++)Oe[_t]=""}}}}return mn(re)}catch{return Y}}var _e={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Se={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ne;function Ke(){}w(Ke,Tn),Ke.prototype.g=function(){return new XMLHttpRequest},Ke.prototype.i=function(){return{}},Ne=new Ke;function nt(_,Y,re,ye){this.j=_,this.i=Y,this.l=re,this.R=ye||1,this.U=new xn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qe}function Qe(){this.i=null,this.g="",this.h=!1}var We={},Xe={};function vt(_,Y,re){_.L=1,_.v=Wo(xa(Y)),_.m=re,_.P=!0,Bt(_,null)}function Bt(_,Y){_.F=Date.now(),Ft(_),_.A=xa(_.v);var re=_.A,ye=_.R;Array.isArray(ye)||(ye=[String(ye)]),un(re.i,"t",ye),_.C=0,re=_.j.J,_.h=new Qe,_.g=Ae(_.j,re?Y:null,!_.m),0<_.O&&(_.M=new gt(p(_.Y,_,_.g),_.O)),Y=_.U,re=_.g,ye=_.ca;var Oe="readystatechange";Array.isArray(Oe)||(Oe&&(Wt[0]=Oe.toString()),Oe=Wt);for(var Ze=0;Ze<Oe.length;Ze++){var _t=Ee(re,Oe[Ze],ye||Y.handleEvent,!1,Y.h||Y);if(!_t)break;Y.g[_t.key]=_t}Y=_.H?N(_.H):{},_.m?(_.u||(_.u="POST"),Y["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.A,_.u,_.m,Y)):(_.u="GET",_.g.ea(_.A,_.u,null,Y)),us(),Nr(_.i,_.u,_.A,_.l,_.R,_.m)}nt.prototype.ca=function(_){_=_.target;const Y=this.M;Y&&_s(_)==3?Y.j():this.Y(_)},nt.prototype.Y=function(_){try{if(_==this.g)e:{const Sr=_s(this.g);var Y=this.g.Ba();const eo=this.g.Z();if(!(3>Sr)&&(Sr!=3||this.g&&(this.h.h||this.g.oa()||_u(this.g)))){this.J||Sr!=4||Y==7||(Y==8||0>=eo?us(3):us(2)),Dn(this);var re=this.g.Z();this.X=re;t:if(Pt(this)){var ye=_u(this.g);_="";var Oe=ye.length,Ze=_s(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){On(this),Un(this);var _t="";break t}this.h.i=new o.TextDecoder}for(Y=0;Y<Oe;Y++)this.h.h=!0,_+=this.h.i.decode(ye[Y],{stream:!(Ze&&Y==Oe-1)});ye.length=0,this.h.g+=_,this.C=0,_t=this.h.g}else _t=this.g.oa();if(this.o=re==200,Or(this.i,this.u,this.A,this.l,this.R,Sr,re),this.o){if(this.T&&!this.K){t:{if(this.g){var dn,qn=this.g;if((dn=qn.g?qn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(dn)){var _n=dn;break t}}_n=null}if(re=_n)fe(this.i,this.l,re,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bs(this,re);else{this.o=!1,this.s=3,Ht(12),On(this),Un(this);break e}}if(this.P){re=!0;let ds;for(;!this.J&&this.C<_t.length;)if(ds=St(this,_t),ds==Xe){Sr==4&&(this.s=4,Ht(14),re=!1),fe(this.i,this.l,null,"[Incomplete Response]");break}else if(ds==We){this.s=4,Ht(15),fe(this.i,this.l,_t,"[Invalid Chunk]"),re=!1;break}else fe(this.i,this.l,ds,null),bs(this,ds);if(Pt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Sr!=4||_t.length!=0||this.h.h||(this.s=1,Ht(16),re=!1),this.o=this.o&&re,!re)fe(this.i,this.l,_t,"[Invalid Chunked Response]"),On(this),Un(this);else if(0<_t.length&&!this.W){this.W=!0;var xr=this.j;xr.g==this&&xr.ba&&!xr.M&&(xr.j.info("Great, no buffering proxy detected. Bytes received: "+_t.length),el(xr),xr.M=!0,Ht(11))}}else fe(this.i,this.l,_t,null),bs(this,_t);Sr==4&&On(this),this.o&&!this.J&&(Sr==4?tl(this.j,this):(this.o=!1,Ft(this)))}else Jo(this.g),re==400&&0<_t.indexOf("Unknown SID")?(this.s=3,Ht(12)):(this.s=0,Ht(13)),On(this),Un(this)}}}catch{}finally{}};function Pt(_){return _.g?_.u=="GET"&&_.L!=2&&_.j.Ca:!1}function St(_,Y){var re=_.C,ye=Y.indexOf(`
`,re);return ye==-1?Xe:(re=Number(Y.substring(re,ye)),isNaN(re)?We:(ye+=1,ye+re>Y.length?Xe:(Y=Y.slice(ye,ye+re),_.C=ye+re,Y)))}nt.prototype.cancel=function(){this.J=!0,On(this)};function Ft(_){_.S=Date.now()+_.I,cn(_,_.I)}function cn(_,Y){if(_.B!=null)throw Error("WatchDog timer not null");_.B=Xn(p(_.ba,_),Y)}function Dn(_){_.B&&(o.clearTimeout(_.B),_.B=null)}nt.prototype.ba=function(){this.B=null;const _=Date.now();0<=_-this.S?(Be(this.i,this.A),this.L!=2&&(us(),Ht(17)),On(this),this.s=2,Un(this)):cn(this,this.S-_)};function Un(_){_.j.G==0||_.J||tl(_.j,_)}function On(_){Dn(_);var Y=_.M;Y&&typeof Y.ma=="function"&&Y.ma(),_.M=null,rr(_.U),_.g&&(Y=_.g,_.g=null,Y.abort(),Y.ma())}function bs(_,Y){try{var re=_.j;if(re.G!=0&&(re.g==_||pa(re.h,_))){if(!_.K&&pa(re.h,_)&&re.G==3){try{var ye=re.Da.g.parse(Y)}catch{ye=null}if(Array.isArray(ye)&&ye.length==3){var Oe=ye;if(Oe[0]==0){e:if(!re.u){if(re.g)if(re.g.F+3e3<_.F)Eo(re),bc(re);else break e;Ll(re),Ht(18)}}else re.za=Oe[1],0<re.za-re.T&&37500>Oe[2]&&re.F&&re.v==0&&!re.C&&(re.C=Xn(p(re.Za,re),6e3));if(1>=Us(re.h)&&re.ca){try{re.ca()}catch{}re.ca=void 0}}else Ia(re,11)}else if((_.K||re.g==_)&&Eo(re),!I(Y))for(Oe=re.Da.g.parse(Y),Y=0;Y<Oe.length;Y++){let _n=Oe[Y];if(re.T=_n[0],_n=_n[1],re.G==2)if(_n[0]=="c"){re.K=_n[1],re.ia=_n[2];const xr=_n[3];xr!=null&&(re.la=xr,re.j.info("VER="+re.la));const Sr=_n[4];Sr!=null&&(re.Aa=Sr,re.j.info("SVER="+re.Aa));const eo=_n[5];eo!=null&&typeof eo=="number"&&0<eo&&(ye=1.5*eo,re.L=ye,re.j.info("backChannelRequestTimeoutMs_="+ye)),ye=re;const ds=_.g;if(ds){const li=ds.g?ds.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(li){var Ze=ye.h;Ze.g||li.indexOf("spdy")==-1&&li.indexOf("quic")==-1&&li.indexOf("h2")==-1||(Ze.j=Ze.l,Ze.g=new Set,Ze.h&&(Qr(Ze,Ze.h),Ze.h=null))}if(ye.D){const nl=ds.g?ds.g.getResponseHeader("X-HTTP-Session-Id"):null;nl&&(ye.ya=nl,gr(ye.I,ye.D,nl))}}re.G=3,re.l&&re.l.ua(),re.ba&&(re.R=Date.now()-_.F,re.j.info("Handshake RTT: "+re.R+"ms")),ye=re;var _t=_;if(ye.qa=H(ye,ye.J?ye.ia:null,ye.W),_t.K){na(ye.h,_t);var dn=_t,qn=ye.L;qn&&(dn.I=qn),dn.B&&(Dn(dn),Ft(dn)),ye.g=_t}else Ec(ye);0<re.i.length&&Cc(re)}else _n[0]!="stop"&&_n[0]!="close"||Ia(re,7);else re.G==3&&(_n[0]=="stop"||_n[0]=="close"?_n[0]=="stop"?Ia(re,7):Co(re):_n[0]!="noop"&&re.l&&re.l.ta(_n),re.v=0)}}us(4)}catch{}}var ri=class{constructor(_,Y){this.g=_,this.map=Y}};function Cs(_){this.l=_||10,o.PerformanceNavigationTiming?(_=o.performance.getEntriesByType("navigation"),_=0<_.length&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ta(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Us(_){return _.h?1:_.g?_.g.size:0}function pa(_,Y){return _.h?_.h==Y:_.g?_.g.has(Y):!1}function Qr(_,Y){_.g?_.g.add(Y):_.h=Y}function na(_,Y){_.h&&_.h==Y?_.h=null:_.g&&_.g.has(Y)&&_.g.delete(Y)}Cs.prototype.cancel=function(){if(this.i=vc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function vc(_){if(_.h!=null)return _.i.concat(_.h.D);if(_.g!=null&&_.g.size!==0){let Y=_.i;for(const re of _.g.values())Y=Y.concat(re.D);return Y}return b(_.i)}function bu(_){if(_.V&&typeof _.V=="function")return _.V();if(typeof Map<"u"&&_ instanceof Map||typeof Set<"u"&&_ instanceof Set)return Array.from(_.values());if(typeof _=="string")return _.split("");if(l(_)){for(var Y=[],re=_.length,ye=0;ye<re;ye++)Y.push(_[ye]);return Y}Y=[],re=0;for(ye in _)Y[re++]=_[ye];return Y}function zo(_){if(_.na&&typeof _.na=="function")return _.na();if(!_.V||typeof _.V!="function"){if(typeof Map<"u"&&_ instanceof Map)return Array.from(_.keys());if(!(typeof Set<"u"&&_ instanceof Set)){if(l(_)||typeof _=="string"){var Y=[];_=_.length;for(var re=0;re<_;re++)Y.push(re);return Y}Y=[],re=0;for(const ye in _)Y[re++]=ye;return Y}}}function wA(_,Y){if(_.forEach&&typeof _.forEach=="function")_.forEach(Y,void 0);else if(l(_)||typeof _=="string")Array.prototype.forEach.call(_,Y,void 0);else for(var re=zo(_),ye=bu(_),Oe=ye.length,Ze=0;Ze<Oe;Ze++)Y.call(void 0,ye[Ze],re&&re[Ze],_)}var ga=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yc(_,Y){if(_){_=_.split("&");for(var re=0;re<_.length;re++){var ye=_[re].indexOf("="),Oe=null;if(0<=ye){var Ze=_[re].substring(0,ye);Oe=_[re].substring(ye+1)}else Ze=_[re];Y(Ze,Oe?decodeURIComponent(Oe.replace(/\+/g," ")):"")}}}function ar(_){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,_ instanceof ar){this.h=_.h,Ko(this,_.j),this.o=_.o,this.g=_.g,qo(this,_.s),this.l=_.l;var Y=_.i,re=new Wi;re.i=Y.i,Y.g&&(re.g=new Map(Y.g),re.h=Y.h),qi(this,re),this.m=_.m}else _&&(Y=String(_).match(ga))?(this.h=!1,Ko(this,Y[1]||"",!0),this.o=si(Y[2]||""),this.g=si(Y[3]||"",!0),qo(this,Y[4]),this.l=si(Y[5]||"",!0),qi(this,Y[6]||"",!0),this.m=si(Y[7]||"")):(this.h=!1,this.i=new Wi(null,this.h))}ar.prototype.toString=function(){var _=[],Y=this.j;Y&&_.push(xo(Y,bA,!0),":");var re=this.g;return(re||Y=="file")&&(_.push("//"),(Y=this.o)&&_.push(xo(Y,bA,!0),"@"),_.push(encodeURIComponent(String(re)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),re=this.s,re!=null&&_.push(":",String(re))),(re=this.l)&&(this.g&&re.charAt(0)!="/"&&_.push("/"),_.push(xo(re,re.charAt(0)=="/"?vo:CA,!0))),(re=this.i.toString())&&_.push("?",re),(re=this.m)&&_.push("#",xo(re,yo)),_.join("")};function xa(_){return new ar(_)}function Ko(_,Y,re){_.j=re?si(Y,!0):Y,_.j&&(_.j=_.j.replace(/:$/,""))}function qo(_,Y){if(Y){if(Y=Number(Y),isNaN(Y)||0>Y)throw Error("Bad port number "+Y);_.s=Y}else _.s=null}function qi(_,Y,re){Y instanceof Wi?(_.i=Y,Eu(_.i,_.h)):(re||(Y=xo(Y,wc)),_.i=new Wi(Y,_.h))}function gr(_,Y,re){_.i.set(Y,re)}function Wo(_){return gr(_,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),_}function si(_,Y){return _?Y?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function xo(_,Y,re){return typeof _=="string"?(_=encodeURI(_).replace(Y,Cu),re&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Cu(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var bA=/[#\/\?@]/g,CA=/[#\?:]/g,vo=/[#\?]/g,wc=/[#\?@]/g,yo=/#/g;function Wi(_,Y){this.h=this.g=null,this.i=_||null,this.j=!!Y}function kr(_){_.g||(_.g=new Map,_.h=0,_.i&&yc(_.i,function(Y,re){_.add(decodeURIComponent(Y.replace(/\+/g," ")),re)}))}t=Wi.prototype,t.add=function(_,Y){kr(this),this.i=null,_=Yi(this,_);var re=this.g.get(_);return re||this.g.set(_,re=[]),re.push(Y),this.h+=1,this};function wo(_,Y){kr(_),Y=Yi(_,Y),_.g.has(Y)&&(_.i=null,_.h-=_.g.get(Y).length,_.g.delete(Y))}function $i(_,Y){return kr(_),Y=Yi(_,Y),_.g.has(Y)}t.forEach=function(_,Y){kr(this),this.g.forEach(function(re,ye){re.forEach(function(Oe){_.call(Y,Oe,ye,this)},this)},this)},t.na=function(){kr(this);const _=Array.from(this.g.values()),Y=Array.from(this.g.keys()),re=[];for(let ye=0;ye<Y.length;ye++){const Oe=_[ye];for(let Ze=0;Ze<Oe.length;Ze++)re.push(Y[ye])}return re},t.V=function(_){kr(this);let Y=[];if(typeof _=="string")$i(this,_)&&(Y=Y.concat(this.g.get(Yi(this,_))));else{_=Array.from(this.g.values());for(let re=0;re<_.length;re++)Y=Y.concat(_[re])}return Y},t.set=function(_,Y){return kr(this),this.i=null,_=Yi(this,_),$i(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[Y]),this.h+=1,this},t.get=function(_,Y){return _?(_=this.V(_),0<_.length?String(_[0]):Y):Y};function un(_,Y,re){wo(_,Y),0<re.length&&(_.i=null,_.g.set(Yi(_,Y),b(re)),_.h+=re.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],Y=Array.from(this.g.keys());for(var re=0;re<Y.length;re++){var ye=Y[re];const Ze=encodeURIComponent(String(ye)),_t=this.V(ye);for(ye=0;ye<_t.length;ye++){var Oe=Ze;_t[ye]!==""&&(Oe+="="+encodeURIComponent(String(_t[ye]))),_.push(Oe)}}return this.i=_.join("&")};function Yi(_,Y){return Y=String(Y),_.j&&(Y=Y.toLowerCase()),Y}function Eu(_,Y){Y&&!_.j&&(kr(_),_.i=null,_.g.forEach(function(re,ye){var Oe=ye.toLowerCase();ye!=Oe&&(wo(this,ye),un(this,Oe,re))},_)),_.j=Y}function Ba(_,Y){const re=new _r;if(o.Image){const ye=new Image;ye.onload=g(Va,re,"TestLoadImage: loaded",!0,Y,ye),ye.onerror=g(Va,re,"TestLoadImage: error",!1,Y,ye),ye.onabort=g(Va,re,"TestLoadImage: abort",!1,Y,ye),ye.ontimeout=g(Va,re,"TestLoadImage: timeout",!1,Y,ye),o.setTimeout(function(){ye.ontimeout&&ye.ontimeout()},1e4),ye.src=_}else Y(!1)}function ai(_,Y){const re=new _r,ye=new AbortController,Oe=setTimeout(()=>{ye.abort(),Va(re,"TestPingServer: timeout",!1,Y)},1e4);fetch(_,{signal:ye.signal}).then(Ze=>{clearTimeout(Oe),Ze.ok?Va(re,"TestPingServer: ok",!0,Y):Va(re,"TestPingServer: server error",!1,Y)}).catch(()=>{clearTimeout(Oe),Va(re,"TestPingServer: error",!1,Y)})}function Va(_,Y,re,ye,Oe){try{Oe&&(Oe.onload=null,Oe.onerror=null,Oe.onabort=null,Oe.ontimeout=null),ye(re)}catch{}}function Ji(){this.g=new Er}function ii(_,Y,re){const ye=re||"";try{wA(_,function(Oe,Ze){let _t=Oe;A(Oe)&&(_t=mn(Oe)),Y.push(ye+Ze+"="+encodeURIComponent(_t))})}catch(Oe){throw Y.push(ye+"type="+encodeURIComponent("_badmap")),Oe}}function $o(_){this.l=_.Ub||null,this.j=_.eb||!1}w($o,Tn),$o.prototype.g=function(){return new bo(this.l,this.j)},$o.prototype.i=function(_){return function(){return _}}({});function bo(_,Y){Lt.call(this),this.D=_,this.o=Y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(bo,Lt),t=bo.prototype,t.open=function(_,Y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=_,this.A=Y,this.readyState=1,Na(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const Y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};_&&(Y.body=_),(this.D||o).fetch(new Request(this.A,Y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oi(this)),this.readyState=0},t.Sa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,Na(this)),this.g&&(this.readyState=3,Na(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;EA(this)}else _.text().then(this.Ra.bind(this),this.ga.bind(this))};function EA(_){_.j.read().then(_.Pa.bind(_)).catch(_.ga.bind(_))}t.Pa=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var Y=_.value?_.value:new Uint8Array(0);(Y=this.v.decode(Y,{stream:!_.done}))&&(this.response=this.responseText+=Y)}_.done?oi(this):Na(this),this.readyState==3&&EA(this)}},t.Ra=function(_){this.g&&(this.response=this.responseText=_,oi(this))},t.Qa=function(_){this.g&&(this.response=_,oi(this))},t.ga=function(){this.g&&oi(this)};function oi(_){_.readyState=4,_.l=null,_.j=null,_.v=null,Na(_)}t.setRequestHeader=function(_,Y){this.u.append(_,Y)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],Y=this.h.entries();for(var re=Y.next();!re.done;)re=re.value,_.push(re[0]+": "+re[1]),re=Y.next();return _.join(`\r
`)};function Na(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function Xi(_){let Y="";return P(_,function(re,ye){Y+=ye,Y+=":",Y+=re,Y+=`\r
`}),Y}function Es(_,Y,re){e:{for(ye in re){var ye=!1;break e}ye=!0}ye||(re=Xi(re),typeof _=="string"?re!=null&&encodeURIComponent(String(re)):gr(_,Y,re))}function Kn(_){Lt.call(this),this.headers=new Map,this.o=_||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Kn,Lt);var Yo=/^https?$/i,Zi=["POST","PUT"];t=Kn.prototype,t.Ha=function(_){this.J=_},t.ea=function(_,Y,re,ye){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);Y=Y?Y.toUpperCase():"GET",this.D=_,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ne.g(),this.v=this.o?Zs(this.o):Zs(Ne),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(Y,String(_),!0),this.B=!1}catch(Ze){_A(this,Ze);return}if(_=re||"",re=new Map(this.headers),ye)if(Object.getPrototypeOf(ye)===Object.prototype)for(var Oe in ye)re.set(Oe,ye[Oe]);else if(typeof ye.keys=="function"&&typeof ye.get=="function")for(const Ze of ye.keys())re.set(Ze,ye.get(Ze));else throw Error("Unknown input type for opt_headers: "+String(ye));ye=Array.from(re.keys()).find(Ze=>Ze.toLowerCase()=="content-type"),Oe=o.FormData&&_ instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Zi,Y,void 0))||ye||Oe||re.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ze,_t]of re)this.g.setRequestHeader(Ze,_t);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ka(this),this.u=!0,this.g.send(_),this.u=!1}catch(Ze){_A(this,Ze)}};function _A(_,Y){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=Y,_.m=5,Il(_),Li(_)}function Il(_){_.A||(_.A=!0,Vt(_,"complete"),Vt(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=_||7,Vt(this,"complete"),Vt(this,"abort"),Li(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Li(this,!0)),Kn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Fl(this):this.bb())},t.bb=function(){Fl(this)};function Fl(_){if(_.h&&typeof i<"u"&&(!_.v[1]||_s(_)!=4||_.Z()!=2)){if(_.u&&_s(_)==4)Mt(_.Ea,0,_);else if(Vt(_,"readystatechange"),_s(_)==4){_.h=!1;try{const _t=_.Z();e:switch(_t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var Y=!0;break e;default:Y=!1}var re;if(!(re=Y)){var ye;if(ye=_t===0){var Oe=String(_.D).match(ga)[1]||null;!Oe&&o.self&&o.self.location&&(Oe=o.self.location.protocol.slice(0,-1)),ye=!Yo.test(Oe?Oe.toLowerCase():"")}re=ye}if(re)Vt(_,"complete"),Vt(_,"success");else{_.m=6;try{var Ze=2<_s(_)?_.g.statusText:""}catch{Ze=""}_.l=Ze+" ["+_.Z()+"]",Il(_)}}finally{Li(_)}}}}function Li(_,Y){if(_.g){ka(_);const re=_.g,ye=_.v[0]?()=>{}:null;_.g=null,_.v=null,Y||Vt(_,"ready");try{re.onreadystatechange=ye}catch{}}}function ka(_){_.I&&(o.clearTimeout(_.I),_.I=null)}t.isActive=function(){return!!this.g};function _s(_){return _.g?_.g.readyState:0}t.Z=function(){try{return 2<_s(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(_){if(this.g){var Y=this.g.responseText;return _&&Y.indexOf(_)==0&&(Y=Y.substring(_.length)),kn(Y)}};function _u(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.H){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function Jo(_){const Y={};_=(_.g&&2<=_s(_)&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let ye=0;ye<_.length;ye++){if(I(_[ye]))continue;var re=M(_[ye]);const Oe=re[0];if(re=re[1],typeof re!="string")continue;re=re.trim();const Ze=Y[Oe]||[];Y[Oe]=Ze,Ze.push(re)}S(Y,function(ye){return ye.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function va(_,Y,re){return re&&re.internalChannelParams&&re.internalChannelParams[_]||Y}function Xo(_){this.Aa=0,this.i=[],this.j=new _r,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=va("failFast",!1,_),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=va("baseRetryDelayMs",5e3,_),this.cb=va("retryDelaySeedMs",1e4,_),this.Wa=va("forwardChannelMaxRetries",2,_),this.wa=va("forwardChannelRequestTimeoutMs",2e4,_),this.pa=_&&_.xmlHttpFactory||void 0,this.Xa=_&&_.Tb||void 0,this.Ca=_&&_.useFetchStreams||!1,this.L=void 0,this.J=_&&_.supportsCrossDomainXhr||!1,this.K="",this.h=new Cs(_&&_.concurrentRequestLimit),this.Da=new Ji,this.P=_&&_.fastHandshake||!1,this.O=_&&_.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=_&&_.Rb||!1,_&&_.xa&&this.j.xa(),_&&_.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&_&&_.detectBufferingProxy||!1,this.ja=void 0,_&&_.longPollingTimeout&&0<_.longPollingTimeout&&(this.ja=_.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Xo.prototype,t.la=8,t.G=1,t.connect=function(_,Y,re,ye){Ht(0),this.W=_,this.H=Y||{},re&&ye!==void 0&&(this.H.OSID=re,this.H.OAID=ye),this.F=this.X,this.I=H(this,null,this.W),Cc(this)};function Co(_){if(Rl(_),_.G==3){var Y=_.U++,re=xa(_.I);if(gr(re,"SID",_.K),gr(re,"RID",Y),gr(re,"TYPE","terminate"),Zo(_,re),Y=new nt(_,_.j,Y),Y.L=2,Y.v=Wo(xa(re)),re=!1,o.navigator&&o.navigator.sendBeacon)try{re=o.navigator.sendBeacon(Y.v.toString(),"")}catch{}!re&&o.Image&&(new Image().src=Y.v,re=!0),re||(Y.g=Ae(Y.j,null),Y.g.ea(Y.v)),Y.F=Date.now(),Ft(Y)}_c(_)}function bc(_){_.g&&(el(_),_.g.cancel(),_.g=null)}function Rl(_){bc(_),_.u&&(o.clearTimeout(_.u),_.u=null),Eo(_),_.h.cancel(),_.s&&(typeof _.s=="number"&&o.clearTimeout(_.s),_.s=null)}function Cc(_){if(!ta(_.h)&&!_.s){_.s=!0;var Y=_.Ga;q||X(),se||(q(),se=!0),Z.add(Y,_),_.B=0}}function SA(_,Y){return Us(_.h)>=_.h.j-(_.s?1:0)?!1:_.s?(_.i=Y.D.concat(_.i),!0):_.G==1||_.G==2||_.B>=(_.Va?0:_.Wa)?!1:(_.s=Xn(p(_.Ga,_,Y),Ml(_,_.B)),_.B++,!0)}t.Ga=function(_){if(this.s)if(this.s=null,this.G==1){if(!_){this.U=Math.floor(1e5*Math.random()),_=this.U++;const Oe=new nt(this,this.j,_);let Ze=this.o;if(this.S&&(Ze?(Ze=N(Ze),V(Ze,this.S)):Ze=this.S),this.m!==null||this.O||(Oe.H=Ze,Ze=null),this.P)e:{for(var Y=0,re=0;re<this.i.length;re++){t:{var ye=this.i[re];if("__data__"in ye.map&&(ye=ye.map.__data__,typeof ye=="string")){ye=ye.length;break t}ye=void 0}if(ye===void 0)break;if(Y+=ye,4096<Y){Y=re;break e}if(Y===4096||re===this.i.length-1){Y=re+1;break e}}Y=1e3}else Y=1e3;Y=Ul(this,Oe,Y),re=xa(this.I),gr(re,"RID",_),gr(re,"CVER",22),this.D&&gr(re,"X-HTTP-Session-Id",this.D),Zo(this,re),Ze&&(this.O?Y="headers="+encodeURIComponent(String(Xi(Ze)))+"&"+Y:this.m&&Es(re,this.m,Ze)),Qr(this.h,Oe),this.Ua&&gr(re,"TYPE","init"),this.P?(gr(re,"$req",Y),gr(re,"SID","null"),Oe.T=!0,vt(Oe,re,null)):vt(Oe,re,Y),this.G=2}}else this.G==3&&(_?Dl(this,_):this.i.length==0||ta(this.h)||Dl(this))};function Dl(_,Y){var re;Y?re=Y.l:re=_.U++;const ye=xa(_.I);gr(ye,"SID",_.K),gr(ye,"RID",re),gr(ye,"AID",_.T),Zo(_,ye),_.m&&_.o&&Es(ye,_.m,_.o),re=new nt(_,_.j,re,_.B+1),_.m===null&&(re.H=_.o),Y&&(_.i=Y.D.concat(_.i)),Y=Ul(_,re,1e3),re.I=Math.round(.5*_.wa)+Math.round(.5*_.wa*Math.random()),Qr(_.h,re),vt(re,ye,Y)}function Zo(_,Y){_.H&&P(_.H,function(re,ye){gr(Y,ye,re)}),_.l&&wA({},function(re,ye){gr(Y,ye,re)})}function Ul(_,Y,re){re=Math.min(_.i.length,re);var ye=_.l?p(_.l.Na,_.l,_):null;e:{var Oe=_.i;let Ze=-1;for(;;){const _t=["count="+re];Ze==-1?0<re?(Ze=Oe[0].g,_t.push("ofs="+Ze)):Ze=0:_t.push("ofs="+Ze);let dn=!0;for(let qn=0;qn<re;qn++){let _n=Oe[qn].g;const xr=Oe[qn].map;if(_n-=Ze,0>_n)Ze=Math.max(0,Oe[qn].g-100),dn=!1;else try{ii(xr,_t,"req"+_n+"_")}catch{ye&&ye(xr)}}if(dn){ye=_t.join("&");break e}}}return _=_.i.splice(0,re),Y.D=_,ye}function Ec(_){if(!_.g&&!_.u){_.Y=1;var Y=_.Fa;q||X(),se||(q(),se=!0),Z.add(Y,_),_.v=0}}function Ll(_){return _.g||_.u||3<=_.v?!1:(_.Y++,_.u=Xn(p(_.Fa,_),Ml(_,_.v)),_.v++,!0)}t.Fa=function(){if(this.u=null,Su(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var _=2*this.R;this.j.info("BP detection timer enabled: "+_),this.A=Xn(p(this.ab,this),_)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ht(10),bc(this),Su(this))};function el(_){_.A!=null&&(o.clearTimeout(_.A),_.A=null)}function Su(_){_.g=new nt(_,_.j,"rpc",_.Y),_.m===null&&(_.g.H=_.o),_.g.O=0;var Y=xa(_.qa);gr(Y,"RID","rpc"),gr(Y,"SID",_.K),gr(Y,"AID",_.T),gr(Y,"CI",_.F?"0":"1"),!_.F&&_.ja&&gr(Y,"TO",_.ja),gr(Y,"TYPE","xmlhttp"),Zo(_,Y),_.m&&_.o&&Es(Y,_.m,_.o),_.L&&(_.g.I=_.L);var re=_.g;_=_.ia,re.L=1,re.v=Wo(xa(Y)),re.m=null,re.P=!0,Bt(re,_)}t.Za=function(){this.C!=null&&(this.C=null,bc(this),Ll(this),Ht(19))};function Eo(_){_.C!=null&&(o.clearTimeout(_.C),_.C=null)}function tl(_,Y){var re=null;if(_.g==Y){Eo(_),el(_),_.g=null;var ye=2}else if(pa(_.h,Y))re=Y.D,na(_.h,Y),ye=1;else return;if(_.G!=0){if(Y.o)if(ye==1){re=Y.m?Y.m.length:0,Y=Date.now()-Y.F;var Oe=_.B;ye=ea(),Vt(ye,new sr(ye,re)),Cc(_)}else Ec(_);else if(Oe=Y.s,Oe==3||Oe==0&&0<Y.X||!(ye==1&&SA(_,Y)||ye==2&&Ll(_)))switch(re&&0<re.length&&(Y=_.h,Y.i=Y.i.concat(re)),Oe){case 1:Ia(_,5);break;case 4:Ia(_,10);break;case 3:Ia(_,6);break;default:Ia(_,2)}}}function Ml(_,Y){let re=_.Ta+Math.floor(Math.random()*_.cb);return _.isActive()||(re*=2),re*Y}function Ia(_,Y){if(_.j.info("Error code "+Y),Y==2){var re=p(_.fb,_),ye=_.Xa;const Oe=!ye;ye=new ar(ye||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ko(ye,"https"),Wo(ye),Oe?Ba(ye.toString(),re):ai(ye.toString(),re)}else Ht(2);_.G=0,_.l&&_.l.sa(Y),_c(_),Rl(_)}t.fb=function(_){_?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function _c(_){if(_.G=0,_.ka=[],_.l){const Y=vc(_.h);(Y.length!=0||_.i.length!=0)&&(E(_.ka,Y),E(_.ka,_.i),_.h.i.length=0,b(_.i),_.i.length=0),_.l.ra()}}function H(_,Y,re){var ye=re instanceof ar?xa(re):new ar(re);if(ye.g!="")Y&&(ye.g=Y+"."+ye.g),qo(ye,ye.s);else{var Oe=o.location;ye=Oe.protocol,Y=Y?Y+"."+Oe.hostname:Oe.hostname,Oe=+Oe.port;var Ze=new ar(null);ye&&Ko(Ze,ye),Y&&(Ze.g=Y),Oe&&qo(Ze,Oe),re&&(Ze.l=re),ye=Ze}return re=_.D,Y=_.ya,re&&Y&&gr(ye,re,Y),gr(ye,"VER",_.la),Zo(_,ye),ye}function Ae(_,Y,re){if(Y&&!_.J)throw Error("Can't create secondary domain capable XhrIo object.");return Y=_.Ca&&!_.pa?new Kn(new $o({eb:re})):new Kn(_.pa),Y.Ha(_.J),Y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ie(){}t=Ie.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ue(){}Ue.prototype.g=function(_,Y){return new He(_,Y)};function He(_,Y){Lt.call(this),this.g=new Xo(Y),this.l=_,this.h=Y&&Y.messageUrlParams||null,_=Y&&Y.messageHeaders||null,Y&&Y.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=Y&&Y.initMessageHeaders||null,Y&&Y.messageContentType&&(_?_["X-WebChannel-Content-Type"]=Y.messageContentType:_={"X-WebChannel-Content-Type":Y.messageContentType}),Y&&Y.va&&(_?_["X-WebChannel-Client-Profile"]=Y.va:_={"X-WebChannel-Client-Profile":Y.va}),this.g.S=_,(_=Y&&Y.Sb)&&!I(_)&&(this.g.m=_),this.v=Y&&Y.supportsCrossDomainXhr||!1,this.u=Y&&Y.sendRawJson||!1,(Y=Y&&Y.httpSessionIdParam)&&!I(Y)&&(this.g.D=Y,_=this.h,_!==null&&Y in _&&(_=this.h,Y in _&&delete _[Y])),this.j=new jt(this)}w(He,Lt),He.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},He.prototype.close=function(){Co(this.g)},He.prototype.o=function(_){var Y=this.g;if(typeof _=="string"){var re={};re.__data__=_,_=re}else this.u&&(re={},re.__data__=mn(_),_=re);Y.i.push(new ri(Y.Ya++,_)),Y.G==3&&Cc(Y)},He.prototype.N=function(){this.g.l=null,delete this.j,Co(this.g),delete this.g,He.aa.N.call(this)};function ot(_){as.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var Y=_.__sm__;if(Y){e:{for(const re in Y){_=re;break e}_=void 0}(this.i=_)&&(_=this.i,Y=Y!==null&&_ in Y?Y[_]:void 0),this.data=Y}else this.data=_}w(ot,as);function Et(){Rn.call(this),this.status=1}w(Et,Rn);function jt(_){this.g=_}w(jt,Ie),jt.prototype.ua=function(){Vt(this.g,"a")},jt.prototype.ta=function(_){Vt(this.g,new ot(_))},jt.prototype.sa=function(_){Vt(this.g,new Et)},jt.prototype.ra=function(){Vt(this.g,"b")},Ue.prototype.createWebChannel=Ue.prototype.g,He.prototype.send=He.prototype.o,He.prototype.open=He.prototype.m,He.prototype.close=He.prototype.close,RD=function(){return new Ue},FD=function(){return ea()},ID=Zt,lE={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_e.NO_ERROR=0,_e.TIMEOUT=8,_e.HTTP_ERROR=6,Iv=_e,Se.COMPLETE="complete",kD=Se,Jn.EventType=qr,qr.OPEN="a",qr.CLOSE="b",qr.ERROR="c",qr.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,Ip=Jn,Kn.prototype.listenOnce=Kn.prototype.L,Kn.prototype.getLastError=Kn.prototype.Ka,Kn.prototype.getLastErrorCode=Kn.prototype.Ba,Kn.prototype.getStatus=Kn.prototype.Z,Kn.prototype.getResponseJson=Kn.prototype.Oa,Kn.prototype.getResponseText=Kn.prototype.oa,Kn.prototype.send=Kn.prototype.ea,Kn.prototype.setWithCredentials=Kn.prototype.Ha,ND=Kn}).apply(typeof b1<"u"?b1:typeof self<"u"?self:typeof window<"u"?window:{});const GB="@firebase/firestore",zB="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bi.UNAUTHENTICATED=new bi(null),bi.GOOGLE_CREDENTIALS=new bi("google-credentials-uid"),bi.FIRST_PARTY=new bi("first-party-uid"),bi.MOCK_USER=new bi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gm="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf=new n5("@firebase/firestore");function f0(){return Zf.logLevel}function $t(t,...e){if(Zf.logLevel<=nr.DEBUG){const n=e.map(f5);Zf.debug(`Firestore (${gm}): ${t}`,...n)}}function uu(t,...e){if(Zf.logLevel<=nr.ERROR){const n=e.map(f5);Zf.error(`Firestore (${gm}): ${t}`,...n)}}function Z0(t,...e){if(Zf.logLevel<=nr.WARN){const n=e.map(f5);Zf.warn(`Firestore (${gm}): ${t}`,...n)}}function f5(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,DD(t,r,n)}function DD(t,e,n){let r=`FIRESTORE (${gm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw uu(r),new Error(r)}function ys(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||DD(e,s,r)}function dr(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class on extends gu{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bi.UNAUTHENTICATED))}shutdown(){}}class eG{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class tG{constructor(e){this.t=e,this.currentUser=bi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ys(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let a=new Pf;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Pf,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{$t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):($t("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Pf)}},0),i()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ys(typeof r.accessToken=="string",31837,{l:r}),new UD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ys(e===null||typeof e=="string",2055,{h:e}),new bi(e)}}class nG{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=bi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class rG{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new nG(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(bi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class KB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sG{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ac(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ys(this.o===void 0,3512);const r=a=>{a.error!=null&&$t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const i=a.token!==this.m;return this.m=a.token,$t("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{$t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):$t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new KB(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ys(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new KB(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aG(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=aG(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function or(t,e){return t<e?-1:t>e?1:0}function cE(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),a=e.charAt(r);if(s!==a)return wb(s)===wb(a)?or(s,a):wb(s)?1:-1}return or(t.length,e.length)}const iG=55296,oG=57343;function wb(t){const e=t.charCodeAt(0);return e>=iG&&e<=oG}function em(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qB="__name__";class tA{constructor(e,n,r){n===void 0?n=0:n>e.length&&In(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&In(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return tA.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof tA?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=tA.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return or(e.length,n.length)}static compareSegments(e,n){const r=tA.isNumericId(e),s=tA.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?tA.extractNumericId(e).compare(tA.extractNumericId(n)):cE(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return kd.fromString(e.substring(4,e.length-2))}}class gs extends tA{construct(e,n,r){return new gs(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new on(Qt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new gs(n)}static emptyPath(){return new gs([])}}const lG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vi extends tA{construct(e,n,r){return new Vi(e,n,r)}static isValidIdentifier(e){return lG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qB}static keyField(){return new Vi([qB])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new on(Qt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let i=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new on(Qt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new on(Qt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else o==="`"?(i=!i,s++):o!=="."||i?(r+=o,s++):(a(),s++)}if(a(),i)throw new on(Qt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vi(n)}static emptyPath(){return new Vi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.path=e}static fromPath(e){return new hn(gs.fromString(e))}static fromName(e){return new hn(gs.fromString(e).popFirst(5))}static empty(){return new hn(gs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gs.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return gs.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new hn(new gs(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cG(t,e,n){if(!n)throw new on(Qt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AG(t,e,n,r){if(e===!0&&r===!0)throw new on(Qt.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function WB(t){if(!hn.isDocumentKey(t))throw new on(Qt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uG(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function dG(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":In(12329,{type:typeof t})}function AE(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new on(Qt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dG(t);throw new on(Qt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(t,e){const n={typeString:t};return e&&(n.value=e),n}function ax(t,e){if(!uG(t))throw new on(Qt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const i=t[r];if(s&&typeof i!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&i!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new on(Qt.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B=-62135596800,YB=1e6;class ua{static now(){return ua.fromMillis(Date.now())}static fromDate(e){return ua.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*YB);return new ua(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new on(Qt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new on(Qt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<$B)throw new on(Qt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new on(Qt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/YB}_compareTo(e){return this.seconds===e.seconds?or(this.nanoseconds,e.nanoseconds):or(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ua._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ax(e,ua._jsonSchema))return new ua(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$B;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ua._jsonSchemaVersion="firestore/timestamp/1.0",ua._jsonSchema={type:fa("string",ua._jsonSchemaVersion),seconds:fa("number"),nanoseconds:fa("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{static fromTimestamp(e){return new Nn(e)}static min(){return new Nn(new ua(0,0))}static max(){return new Nn(new ua(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg=-1;function fG(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Nn.fromTimestamp(r===1e9?new ua(n+1,0):new ua(n,r));return new Pd(s,hn.empty(),e)}function hG(t){return new Pd(t.readTime,t.key,bg)}class Pd{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Pd(Nn.min(),hn.empty(),bg)}static max(){return new Pd(Nn.max(),hn.empty(),bg)}}function mG(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=hn.comparator(t.documentKey,e.documentKey),n!==0?n:or(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gG{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ay(t){if(t.code!==Qt.FAILED_PRECONDITION||t.message!==pG)throw t;$t("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&In(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new wt((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof wt?n:wt.resolve(n)}catch(n){return wt.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):wt.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):wt.reject(n)}static resolve(e){return new wt((n,r)=>{n(e)})}static reject(e){return new wt((n,r)=>{r(e)})}static waitFor(e){return new wt((n,r)=>{let s=0,a=0,i=!1;e.forEach(o=>{++s,o.next(()=>{++a,i&&a===s&&n()},l=>r(l))}),i=!0,a===s&&n()})}static or(e){let n=wt.resolve(!1);for(const r of e)n=n.next(s=>s?wt.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new wt((r,s)=>{const a=e.length,i=new Array(a);let o=0;for(let l=0;l<a;l++){const A=l;n(e[A]).next(d=>{i[A]=d,++o,o===a&&r(i)},d=>s(d))}})}static doWhile(e,n){return new wt((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function xG(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xm(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}uy.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vG=-1;function dy(t){return t==null}function uE(t){return t===0&&1/t==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="";function yG(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=JB(e)),e=wG(t.get(n),e);return JB(e)}function wG(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case LD:n+="";break;default:n+=a}}return n}function JB(t){return t+LD+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XB(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ix(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bG(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,n){this.comparator=e,this.root=n||Xa.EMPTY}insert(e,n){return new Js(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xa.BLACK,null,null))}remove(e){return new Js(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xa.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new C1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new C1(this.root,e,this.comparator,!1)}getReverseIterator(){return new C1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new C1(this.root,e,this.comparator,!0)}}class C1{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xa{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??Xa.RED,this.left=s??Xa.EMPTY,this.right=a??Xa.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new Xa(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xa.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Xa.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw In(43730,{key:this.key,value:this.value});if(this.right.isRed())throw In(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw In(27949);return e+(this.isRed()?0:1)}}Xa.EMPTY=null,Xa.RED=!0,Xa.BLACK=!1;Xa.EMPTY=new class{constructor(){this.size=0}get key(){throw In(57766)}get value(){throw In(16141)}get color(){throw In(16727)}get left(){throw In(29726)}get right(){throw In(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new Xa(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.comparator=e,this.data=new Js(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ZB(this.data.getIterator())}getIteratorFrom(e){return new ZB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof _a)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _a(this.comparator);return n.data=e,n}}class ZB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e){this.fields=e,e.sort(Vi.comparator)}static empty(){return new xd([])}unionWith(e){let n=new _a(Vi.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xd(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return em(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new MD("Invalid base64 string: "+a):a}}(e);return new ni(n)}static fromUint8Array(e){const n=function(s){let a="";for(let i=0;i<s.length;++i)a+=String.fromCharCode(s[i]);return a}(e);return new ni(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return or(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ni.EMPTY_BYTE_STRING=new ni("");const CG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jd(t){if(ys(!!t,39018),typeof t=="string"){let e=0;const n=CG.exec(t);if(ys(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zs(t.seconds),nanos:zs(t.nanos)}}function zs(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Od(t){return typeof t=="string"?ni.fromBase64String(t):ni.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD="server_timestamp",jD="__type__",OD="__previous_value__",QD="__local_write_time__";function m5(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[jD])==null?void 0:r.stringValue)===PD}function fy(t){const e=t.mapValue.fields[OD];return m5(e)?fy(e):e}function Cg(t){const e=jd(t.mapValue.fields[QD].timestampValue);return new ua(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EG{constructor(e,n,r,s,a,i,o,l,A,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=A,this.isUsingEmulator=d}}const i2="(default)";class Eg{constructor(e,n){this.projectId=e,this.database=n||i2}static empty(){return new Eg("","")}get isDefaultDatabase(){return this.database===i2}isEqual(e){return e instanceof Eg&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _G="__type__",SG="__max__",E1={mapValue:{}},TG="__vector__",dE="value";function Qd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?m5(t)?4:NG(t)?9007199254740991:BG(t)?10:11:In(28295,{value:t})}function dA(t,e){if(t===e)return!0;const n=Qd(t);if(n!==Qd(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Cg(t).isEqual(Cg(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const i=jd(s.timestampValue),o=jd(a.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Od(s.bytesValue).isEqual(Od(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return zs(s.geoPointValue.latitude)===zs(a.geoPointValue.latitude)&&zs(s.geoPointValue.longitude)===zs(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return zs(s.integerValue)===zs(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const i=zs(s.doubleValue),o=zs(a.doubleValue);return i===o?uE(i)===uE(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return em(t.arrayValue.values||[],e.arrayValue.values||[],dA);case 10:case 11:return function(s,a){const i=s.mapValue.fields||{},o=a.mapValue.fields||{};if(XB(i)!==XB(o))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(o[l]===void 0||!dA(i[l],o[l])))return!1;return!0}(t,e);default:return In(52216,{left:t})}}function _g(t,e){return(t.values||[]).find(n=>dA(n,e))!==void 0}function tm(t,e){if(t===e)return 0;const n=Qd(t),r=Qd(e);if(n!==r)return or(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return or(t.booleanValue,e.booleanValue);case 2:return function(a,i){const o=zs(a.integerValue||a.doubleValue),l=zs(i.integerValue||i.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return eN(t.timestampValue,e.timestampValue);case 4:return eN(Cg(t),Cg(e));case 5:return cE(t.stringValue,e.stringValue);case 6:return function(a,i){const o=Od(a),l=Od(i);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(a,i){const o=a.split("/"),l=i.split("/");for(let A=0;A<o.length&&A<l.length;A++){const d=or(o[A],l[A]);if(d!==0)return d}return or(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,i){const o=or(zs(a.latitude),zs(i.latitude));return o!==0?o:or(zs(a.longitude),zs(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tN(t.arrayValue,e.arrayValue);case 10:return function(a,i){var p,g,w,b;const o=a.fields||{},l=i.fields||{},A=(p=o[dE])==null?void 0:p.arrayValue,d=(g=l[dE])==null?void 0:g.arrayValue,h=or(((w=A==null?void 0:A.values)==null?void 0:w.length)||0,((b=d==null?void 0:d.values)==null?void 0:b.length)||0);return h!==0?h:tN(A,d)}(t.mapValue,e.mapValue);case 11:return function(a,i){if(a===E1.mapValue&&i===E1.mapValue)return 0;if(a===E1.mapValue)return 1;if(i===E1.mapValue)return-1;const o=a.fields||{},l=Object.keys(o),A=i.fields||{},d=Object.keys(A);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=cE(l[h],d[h]);if(p!==0)return p;const g=tm(o[l[h]],A[d[h]]);if(g!==0)return g}return or(l.length,d.length)}(t.mapValue,e.mapValue);default:throw In(23264,{he:n})}}function eN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return or(t,e);const n=jd(t),r=jd(e),s=or(n.seconds,r.seconds);return s!==0?s:or(n.nanos,r.nanos)}function tN(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=tm(n[s],r[s]);if(a)return a}return or(n.length,r.length)}function nm(t){return fE(t)}function fE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=jd(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Od(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return hn.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=fE(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const i of r)a?a=!1:s+=",",s+=`${i}:${fE(n.fields[i])}`;return s+"}"}(t.mapValue):In(61005,{value:t})}function Fv(t){switch(Qd(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=fy(t);return e?16+Fv(e):16;case 5:return 2*t.stringValue.length;case 6:return Od(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+Fv(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ix(r.fields,(a,i)=>{s+=a.length+Fv(i)}),s}(t.mapValue);default:throw In(13486,{value:t})}}function hE(t){return!!t&&"integerValue"in t}function p5(t){return!!t&&"arrayValue"in t}function nN(t){return!!t&&"nullValue"in t}function rN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bb(t){return!!t&&"mapValue"in t}function BG(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[_G])==null?void 0:r.stringValue)===TG}function Xp(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ix(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Xp(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xp(t.arrayValue.values[n]);return e}return{...t}}function NG(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===SG}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.value=e}static empty(){return new rA({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bb(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xp(n)}setAll(e){let n=Vi.emptyPath(),r={},s=[];e.forEach((i,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=o.popLast()}i?r[o.lastSegment()]=Xp(i):s.push(o.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());bb(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return dA(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];bb(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ix(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new rA(Xp(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n,r,s,a,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Si(e,0,Nn.min(),Nn.min(),Nn.min(),rA.empty(),0)}static newFoundDocument(e,n,r,s){return new Si(e,1,n,Nn.min(),r,s,0)}static newNoDocument(e,n){return new Si(e,2,n,Nn.min(),Nn.min(),rA.empty(),0)}static newUnknownDocument(e,n){return new Si(e,3,n,Nn.min(),Nn.min(),rA.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Nn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rA.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rA.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Si&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Si(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,n){this.position=e,this.inclusive=n}}function sN(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],i=t.position[s];if(a.field.isKeyField()?r=hn.comparator(hn.fromName(i.referenceValue),n.key):r=tm(i,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function aN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!dA(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n="asc"){this.field=e,this.dir=n}}function kG(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{}class Ca extends HD{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new FG(e,n,r):n==="array-contains"?new UG(e,r):n==="in"?new LG(e,r):n==="not-in"?new MG(e,r):n==="array-contains-any"?new PG(e,r):new Ca(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new RG(e,r):new DG(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(tm(n,this.value)):n!==null&&Qd(this.value)===Qd(n)&&this.matchesComparison(tm(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return In(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fA extends HD{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new fA(e,n)}matches(e){return VD(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function VD(t){return t.op==="and"}function GD(t){return IG(t)&&VD(t)}function IG(t){for(const e of t.filters)if(e instanceof fA)return!1;return!0}function mE(t){if(t instanceof Ca)return t.field.canonicalString()+t.op.toString()+nm(t.value);if(GD(t))return t.filters.map(e=>mE(e)).join(",");{const e=t.filters.map(n=>mE(n)).join(",");return`${t.op}(${e})`}}function zD(t,e){return t instanceof Ca?function(r,s){return s instanceof Ca&&r.op===s.op&&r.field.isEqual(s.field)&&dA(r.value,s.value)}(t,e):t instanceof fA?function(r,s){return s instanceof fA&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,i,o)=>a&&zD(i,s.filters[o]),!0):!1}(t,e):void In(19439)}function KD(t){return t instanceof Ca?function(n){return`${n.field.canonicalString()} ${n.op} ${nm(n.value)}`}(t):t instanceof fA?function(n){return n.op.toString()+" {"+n.getFilters().map(KD).join(" ,")+"}"}(t):"Filter"}class FG extends Ca{constructor(e,n,r){super(e,n,r),this.key=hn.fromName(r.referenceValue)}matches(e){const n=hn.comparator(e.key,this.key);return this.matchesComparison(n)}}class RG extends Ca{constructor(e,n){super(e,"in",n),this.keys=qD("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class DG extends Ca{constructor(e,n){super(e,"not-in",n),this.keys=qD("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function qD(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>hn.fromName(r.referenceValue))}class UG extends Ca{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return p5(n)&&_g(n.arrayValue,this.value)}}class LG extends Ca{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_g(this.value.arrayValue,n)}}class MG extends Ca{constructor(e,n){super(e,"not-in",n)}matches(e){if(_g(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!_g(this.value.arrayValue,n)}}class PG extends Ca{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!p5(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_g(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jG{constructor(e,n=null,r=[],s=[],a=null,i=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=i,this.endAt=o,this.Te=null}}function iN(t,e=null,n=[],r=[],s=null,a=null,i=null){return new jG(t,e,n,r,s,a,i)}function g5(t){const e=dr(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>mE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),dy(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>nm(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>nm(r)).join(",")),e.Te=n}return e.Te}function x5(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kG(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!aN(t.startAt,e.startAt)&&aN(t.endAt,e.endAt)}function pE(t){return hn.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n=null,r=[],s=[],a=null,i="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=i,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function OG(t,e,n,r,s,a,i,o){return new hy(t,e,n,r,s,a,i,o)}function v5(t){return new hy(t)}function oN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function QG(t){return t.collectionGroup!==null}function Zp(t){const e=dr(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new _a(Vi.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(A=>{A.isInequality()&&(o=o.add(A.field))})}),o})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new l2(a,r))}),n.has(Vi.keyField().canonicalString())||e.Ie.push(new l2(Vi.keyField(),r))}return e.Ie}function cA(t){const e=dr(t);return e.Ee||(e.Ee=HG(e,Zp(t))),e.Ee}function HG(t,e){if(t.limitType==="F")return iN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new l2(s.field,a)});const n=t.endAt?new o2(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new o2(t.startAt.position,t.startAt.inclusive):null;return iN(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function gE(t,e,n){return new hy(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function my(t,e){return x5(cA(t),cA(e))&&t.limitType===e.limitType}function WD(t){return`${g5(cA(t))}|lt:${t.limitType}`}function h0(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>KD(s)).join(", ")}]`),dy(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>nm(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>nm(s)).join(",")),`Target(${r})`}(cA(t))}; limitType=${t.limitType})`}function py(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):hn.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of Zp(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(i,o,l){const A=sN(i,o,l);return i.inclusive?A<=0:A<0}(r.startAt,Zp(r),s)||r.endAt&&!function(i,o,l){const A=sN(i,o,l);return i.inclusive?A>=0:A>0}(r.endAt,Zp(r),s))}(t,e)}function VG(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $D(t){return(e,n)=>{let r=!1;for(const s of Zp(t)){const a=GG(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function GG(t,e,n){const r=t.field.isKeyField()?hn.comparator(e.key,n.key):function(a,i,o){const l=i.data.field(a),A=o.data.field(a);return l!==null&&A!==null?tm(l,A):In(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return In(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ix(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return bG(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zG=new Js(hn.comparator);function Hd(){return zG}const YD=new Js(hn.comparator);function Fp(...t){let e=YD;for(const n of t)e=e.insert(n.key,n);return e}function KG(t){let e=YD;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Rf(){return eg()}function JD(){return eg()}function eg(){return new Ah(t=>t.toString(),(t,e)=>t.isEqual(e))}const qG=new _a(hn.comparator);function hr(...t){let e=qG;for(const n of t)e=e.add(n);return e}const WG=new _a(or);function $G(){return WG}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YG(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uE(e)?"-0":e}}function JG(t){return{integerValue:""+t}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(){this._=void 0}}function XG(t,e,n){return t instanceof xE?function(s,a){const i={fields:{[jD]:{stringValue:PD},[QD]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&m5(a)&&(a=fy(a)),a&&(i.fields[OD]=a),{mapValue:i}}(n,e):t instanceof c2?XD(t,e):t instanceof A2?ZD(t,e):function(s,a){const i=ez(s,a),o=lN(i)+lN(s.Ae);return hE(i)&&hE(s.Ae)?JG(o):YG(s.serializer,o)}(t,e)}function ZG(t,e,n){return t instanceof c2?XD(t,e):t instanceof A2?ZD(t,e):n}function ez(t,e){return t instanceof vE?function(r){return hE(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class xE extends gy{}class c2 extends gy{constructor(e){super(),this.elements=e}}function XD(t,e){const n=eU(e);for(const r of t.elements)n.some(s=>dA(s,r))||n.push(r);return{arrayValue:{values:n}}}class A2 extends gy{constructor(e){super(),this.elements=e}}function ZD(t,e){let n=eU(e);for(const r of t.elements)n=n.filter(s=>!dA(s,r));return{arrayValue:{values:n}}}class vE extends gy{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function lN(t){return zs(t.integerValue||t.doubleValue)}function eU(t){return p5(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function tz(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof c2&&s instanceof c2||r instanceof A2&&s instanceof A2?em(r.elements,s.elements,dA):r instanceof vE&&s instanceof vE?dA(r.Ae,s.Ae):r instanceof xE&&s instanceof xE}(t.transform,e.transform)}class jf{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new jf}static exists(e){return new jf(void 0,e)}static updateTime(e){return new jf(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class y5{}function tU(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rz(t.key,jf.none()):new w5(t.key,t.data,jf.none());{const n=t.data,r=rA.empty();let s=new _a(Vi.comparator);for(let a of e.fields)if(!s.has(a)){let i=n.field(a);i===null&&a.length>1&&(a=a.popLast(),i=n.field(a)),i===null?r.delete(a):r.set(a,i),s=s.add(a)}return new xy(t.key,r,new xd(s.toArray()),jf.none())}}function nz(t,e,n){t instanceof w5?function(s,a,i){const o=s.value.clone(),l=AN(s.fieldTransforms,a,i.transformResults);o.setAll(l),a.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof xy?function(s,a,i){if(!Rv(s.precondition,a))return void a.convertToUnknownDocument(i.version);const o=AN(s.fieldTransforms,a,i.transformResults),l=a.data;l.setAll(nU(s)),l.setAll(o),a.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,n):function(s,a,i){a.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function tg(t,e,n,r){return t instanceof w5?function(a,i,o,l){if(!Rv(a.precondition,i))return o;const A=a.value.clone(),d=uN(a.fieldTransforms,l,i);return A.setAll(d),i.convertToFoundDocument(i.version,A).setHasLocalMutations(),null}(t,e,n,r):t instanceof xy?function(a,i,o,l){if(!Rv(a.precondition,i))return o;const A=uN(a.fieldTransforms,l,i),d=i.data;return d.setAll(nU(a)),d.setAll(A),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(a,i,o){return Rv(a.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function cN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&em(r,s,(a,i)=>tz(a,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class w5 extends y5{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class xy extends y5{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function nU(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function AN(t,e,n){const r=new Map;ys(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const a=t[s],i=a.transform,o=e.data.field(a.field);r.set(a.field,ZG(i,o,n[s]))}return r}function uN(t,e,n){const r=new Map;for(const s of t){const a=s.transform,i=n.data.field(s.field);r.set(s.field,XG(a,i,e))}return r}class rz extends y5{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&nz(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=tg(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=tg(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=JD();return this.mutations.forEach(s=>{const a=e.get(s.key),i=a.overlayedDocument;let o=this.applyToLocalView(i,a.mutatedFields);o=n.has(s.key)?null:o;const l=tU(i,o);l!==null&&r.set(s.key,l),i.isValidDocument()||i.convertToNoDocument(Nn.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),hr())}isEqual(e){return this.batchId===e.batchId&&em(this.mutations,e.mutations,(n,r)=>cN(n,r))&&em(this.baseMutations,e.baseMutations,(n,r)=>cN(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var la,ur;function rU(t){if(t===void 0)return uu("GRPC error has no .code"),Qt.UNKNOWN;switch(t){case la.OK:return Qt.OK;case la.CANCELLED:return Qt.CANCELLED;case la.UNKNOWN:return Qt.UNKNOWN;case la.DEADLINE_EXCEEDED:return Qt.DEADLINE_EXCEEDED;case la.RESOURCE_EXHAUSTED:return Qt.RESOURCE_EXHAUSTED;case la.INTERNAL:return Qt.INTERNAL;case la.UNAVAILABLE:return Qt.UNAVAILABLE;case la.UNAUTHENTICATED:return Qt.UNAUTHENTICATED;case la.INVALID_ARGUMENT:return Qt.INVALID_ARGUMENT;case la.NOT_FOUND:return Qt.NOT_FOUND;case la.ALREADY_EXISTS:return Qt.ALREADY_EXISTS;case la.PERMISSION_DENIED:return Qt.PERMISSION_DENIED;case la.FAILED_PRECONDITION:return Qt.FAILED_PRECONDITION;case la.ABORTED:return Qt.ABORTED;case la.OUT_OF_RANGE:return Qt.OUT_OF_RANGE;case la.UNIMPLEMENTED:return Qt.UNIMPLEMENTED;case la.DATA_LOSS:return Qt.DATA_LOSS;default:return In(39323,{code:t})}}(ur=la||(la={}))[ur.OK=0]="OK",ur[ur.CANCELLED=1]="CANCELLED",ur[ur.UNKNOWN=2]="UNKNOWN",ur[ur.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ur[ur.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ur[ur.NOT_FOUND=5]="NOT_FOUND",ur[ur.ALREADY_EXISTS=6]="ALREADY_EXISTS",ur[ur.PERMISSION_DENIED=7]="PERMISSION_DENIED",ur[ur.UNAUTHENTICATED=16]="UNAUTHENTICATED",ur[ur.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ur[ur.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ur[ur.ABORTED=10]="ABORTED",ur[ur.OUT_OF_RANGE=11]="OUT_OF_RANGE",ur[ur.UNIMPLEMENTED=12]="UNIMPLEMENTED",ur[ur.INTERNAL=13]="INTERNAL",ur[ur.UNAVAILABLE=14]="UNAVAILABLE",ur[ur.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oz(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lz=new kd([4294967295,4294967295],0);function dN(t){const e=oz().encode(t),n=new BD;return n.update(e),new Uint8Array(n.digest())}function fN(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new kd([n,r],0),new kd([s,a],0)]}class b5{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Rp(`Invalid padding: ${n}`);if(r<0)throw new Rp(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rp(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Rp(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=kd.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(kd.fromNumber(r)));return s.compare(lz)===1&&(s=new kd([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=dN(e),[r,s]=fN(n);for(let a=0;a<this.hashCount;a++){const i=this.ye(r,s,a);if(!this.we(i))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),i=new b5(a,s,n);return r.forEach(o=>i.insert(o)),i}insert(e){if(this.ge===0)return;const n=dN(e),[r,s]=fN(n);for(let a=0;a<this.hashCount;a++){const i=this.ye(r,s,a);this.Se(i)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Rp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ox.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new vy(Nn.min(),s,new Js(or),Hd(),hr())}}class ox{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ox(r,n,hr(),hr(),hr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class sU{constructor(e,n){this.targetId=e,this.Ce=n}}class aU{constructor(e,n,r=ni.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class hN{constructor(){this.ve=0,this.Fe=mN(),this.Me=ni.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=hr(),n=hr(),r=hr();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:In(38017,{changeType:a})}}),new ox(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=mN()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ys(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class cz{constructor(e){this.Ge=e,this.ze=new Map,this.je=Hd(),this.Je=_1(),this.He=_1(),this.Ye=new Js(or)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:In(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(pE(a))if(r===0){const i=new hn(a.path);this.et(n,i,Si.newNoDocument(i,Nn.min()))}else ys(r===1,20013,{expectedCount:r});else{const i=this._t(n);if(i!==r){const o=this.ut(e),l=o?this.ct(o,e,i):1;if(l!==0){this.it(n);const A=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,A)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let i,o;try{i=Od(r).toUint8Array()}catch(l){if(l instanceof MD)return Z0("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new b5(i,s,a)}catch(l){return Z0(l instanceof Rp?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(n,a,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((a,i)=>{const o=this.ot(i);if(o){if(a.current&&pE(o.target)){const l=new hn(o.target.path);this.It(l).has(i)||this.Et(i,l)||this.et(i,l,Si.newNoDocument(l,e))}a.Be&&(n.set(i,a.ke()),a.qe())}});let r=hr();this.He.forEach((a,i)=>{let o=!0;i.forEachWhile(l=>{const A=this.ot(l);return!A||A.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(a))}),this.je.forEach((a,i)=>i.setReadTime(e));const s=new vy(e,n,this.Ye,this.je,r);return this.je=Hd(),this.Je=_1(),this.He=_1(),this.Ye=new Js(or),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new hN,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new _a(or),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new _a(or),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||$t("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new hN),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function _1(){return new Js(hn.comparator)}function mN(){return new Js(hn.comparator)}const Az={asc:"ASCENDING",desc:"DESCENDING"},uz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dz={and:"AND",or:"OR"};class fz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yE(t,e){return t.useProto3Json||dy(e)?e:{value:e}}function hz(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mz(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function F0(t){return ys(!!t,49232),Nn.fromTimestamp(function(n){const r=jd(n);return new ua(r.seconds,r.nanos)}(t))}function pz(t,e){return wE(t,e).canonicalString()}function wE(t,e){const n=function(s){return new gs(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function iU(t){const e=gs.fromString(t);return ys(uU(e),10190,{key:e.toString()}),e}function Cb(t,e){const n=iU(e);if(n.get(1)!==t.databaseId.projectId)throw new on(Qt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new on(Qt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new hn(lU(n))}function oU(t,e){return pz(t.databaseId,e)}function gz(t){const e=iU(t);return e.length===4?gs.emptyPath():lU(e)}function pN(t){return new gs(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lU(t){return ys(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function xz(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(A){return A==="NO_CHANGE"?0:A==="ADD"?1:A==="REMOVE"?2:A==="CURRENT"?3:A==="RESET"?4:In(39313,{state:A})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(A,d){return A.useProto3Json?(ys(d===void 0||typeof d=="string",58123),ni.fromBase64String(d||"")):(ys(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ni.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(A){const d=A.code===void 0?Qt.UNKNOWN:rU(A.code);return new on(d,A.message||"")}(i);n=new aU(r,s,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Cb(t,r.document.name),a=F0(r.document.updateTime),i=r.document.createTime?F0(r.document.createTime):Nn.min(),o=new rA({mapValue:{fields:r.document.fields}}),l=Si.newFoundDocument(s,a,i,o),A=r.targetIds||[],d=r.removedTargetIds||[];n=new Dv(A,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Cb(t,r.document),a=r.readTime?F0(r.readTime):Nn.min(),i=Si.newNoDocument(s,a),o=r.removedTargetIds||[];n=new Dv([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Cb(t,r.document),a=r.removedTargetIds||[];n=new Dv([],a,s,null)}else{if(!("filter"in e))return In(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,i=new iz(s,a),o=r.targetId;n=new sU(o,i)}}return n}function vz(t,e){return{documents:[oU(t,e.path)]}}function yz(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=oU(t,s);const a=function(A){if(A.length!==0)return AU(fA.create(A,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const i=function(A){if(A.length!==0)return A.map(d=>function(p){return{field:m0(p.field),direction:Cz(p.dir)}}(d))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=yE(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(A){return{before:A.inclusive,values:A.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(A){return{before:!A.inclusive,values:A.position}}(e.endAt)),{ft:n,parent:s}}function wz(t){let e=gz(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ys(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let a=[];n.where&&(a=function(h){const p=cU(h);return p instanceof fA&&GD(p)?p.getFilters():[p]}(n.where));let i=[];n.orderBy&&(i=function(h){return h.map(p=>function(w){return new l2(p0(w.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let o=null;n.limit&&(o=function(h){let p;return p=typeof h=="object"?h.value:h,dy(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,g=h.values||[];return new o2(g,p)}(n.startAt));let A=null;return n.endAt&&(A=function(h){const p=!h.before,g=h.values||[];return new o2(g,p)}(n.endAt)),OG(e,s,i,a,o,"F",l,A)}function bz(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return In(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cU(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=p0(n.unaryFilter.field);return Ca.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=p0(n.unaryFilter.field);return Ca.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=p0(n.unaryFilter.field);return Ca.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=p0(n.unaryFilter.field);return Ca.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return In(61313);default:return In(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ca.create(p0(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return In(58110);default:return In(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return fA.create(n.compositeFilter.filters.map(r=>cU(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return In(1026)}}(n.compositeFilter.op))}(t):In(30097,{filter:t})}function Cz(t){return Az[t]}function Ez(t){return uz[t]}function _z(t){return dz[t]}function m0(t){return{fieldPath:t.canonicalString()}}function p0(t){return Vi.fromServerFormat(t.fieldPath)}function AU(t){return t instanceof Ca?function(n){if(n.op==="=="){if(rN(n.value))return{unaryFilter:{field:m0(n.field),op:"IS_NAN"}};if(nN(n.value))return{unaryFilter:{field:m0(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rN(n.value))return{unaryFilter:{field:m0(n.field),op:"IS_NOT_NAN"}};if(nN(n.value))return{unaryFilter:{field:m0(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:m0(n.field),op:Ez(n.op),value:n.value}}}(t):t instanceof fA?function(n){const r=n.getFilters().map(s=>AU(s));return r.length===1?r[0]:{compositeFilter:{op:_z(n.op),filters:r}}}(t):In(54877,{filter:t})}function uU(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n,r,s,a=Nn.min(),i=Nn.min(),o=ni.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new vd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vd(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(e){this.yt=e}}function Tz(t){const e=wz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gE(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(){this.Cn=new Nz}addToCollectionParentIndex(e,n){return this.Cn.add(n),wt.resolve()}getCollectionParents(e,n){return wt.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return wt.resolve()}deleteFieldIndex(e,n){return wt.resolve()}deleteAllFieldIndexes(e){return wt.resolve()}createTargetIndexes(e,n){return wt.resolve()}getDocumentsMatchingTarget(e,n){return wt.resolve(null)}getIndexType(e,n){return wt.resolve(0)}getFieldIndexes(e,n){return wt.resolve([])}getNextCollectionGroupToUpdate(e){return wt.resolve(null)}getMinOffset(e,n){return wt.resolve(Pd.min())}getMinOffsetFromCollectionGroup(e,n){return wt.resolve(Pd.min())}updateCollectionGroup(e,n,r){return wt.resolve()}updateIndexEntries(e,n){return wt.resolve()}}class Nz{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new _a(gs.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new _a(gs.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dU=41943040;class co{static withCacheSize(e){return new co(e,co.DEFAULT_COLLECTION_PERCENTILE,co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */co.DEFAULT_COLLECTION_PERCENTILE=10,co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,co.DEFAULT=new co(dU,co.DEFAULT_COLLECTION_PERCENTILE,co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),co.DISABLED=new co(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new rm(0)}static cr(){return new rm(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="LruGarbageCollector",kz=1048576;function vN([t,e],[n,r]){const s=or(t,n);return s===0?or(e,r):s}class Iz{constructor(e){this.Ir=e,this.buffer=new _a(vN),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();vN(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Fz{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$t(xN,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){xm(n)?$t(xN,"Ignoring IndexedDB error during garbage collection: ",n):await Ay(n)}await this.Vr(3e5)})}}class Rz{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return wt.resolve(uy.ce);const r=new Iz(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($t("LruGarbageCollector","Garbage collection skipped; disabled"),wt.resolve(gN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($t("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gN):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,a,i,o,l,A;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?($t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,i=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,n))).next(h=>(a=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(A=Date.now(),f0()<=nr.DEBUG&&$t("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${s} in `+(o-i)+`ms
	Removed ${a} targets in `+(l-o)+`ms
	Removed ${h} documents in `+(A-l)+`ms
Total Duration: ${A-d}ms`),wt.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:h})))}}function Dz(t,e){return new Rz(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(){this.changes=new Ah(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Si.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?wt.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mz{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&tg(r.mutation,s,xd.empty(),ua.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,hr()).next(()=>r))}getLocalViewOfDocuments(e,n,r=hr()){const s=Rf();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let i=Fp();return a.forEach((o,l)=>{i=i.insert(o,l.overlayedDocument)}),i}))}getOverlayedDocuments(e,n){const r=Rf();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,hr()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((i,o)=>{n.set(i,o)})})}computeViews(e,n,r,s){let a=Hd();const i=eg(),o=function(){return eg()}();return n.forEach((l,A)=>{const d=r.get(A.key);s.has(A.key)&&(d===void 0||d.mutation instanceof xy)?a=a.insert(A.key,A):d!==void 0?(i.set(A.key,d.mutation.getFieldMask()),tg(d.mutation,A,d.mutation.getFieldMask(),ua.now())):i.set(A.key,xd.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((A,d)=>i.set(A,d)),n.forEach((A,d)=>o.set(A,new Lz(d,i.get(A)??null))),o))}recalculateAndSaveOverlays(e,n){const r=eg();let s=new Js((i,o)=>i-o),a=hr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(i=>{for(const o of i)o.keys().forEach(l=>{const A=n.get(l);if(A===null)return;let d=r.get(l)||xd.empty();d=o.applyToLocalView(A,d),r.set(l,d);const h=(s.get(o.batchId)||hr()).add(l);s=s.insert(o.batchId,h)})}).next(()=>{const i=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),A=l.key,d=l.value,h=JD();d.forEach(p=>{if(!a.has(p)){const g=tU(n.get(p),r.get(p));g!==null&&h.set(p,g),a=a.add(p)}}),i.push(this.documentOverlayCache.saveOverlays(e,A,h))}return wt.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(i){return hn.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):QG(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const i=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):wt.resolve(Rf());let o=bg,l=a;return i.next(A=>wt.forEach(A,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),a.get(d)?wt.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,A,a)).next(()=>this.computeViews(e,l,A,hr())).next(d=>({batchId:o,changes:KG(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new hn(n)).next(r=>{let s=Fp();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let i=Fp();return this.indexManager.getCollectionParents(e,a).next(o=>wt.forEach(o,l=>{const A=function(h,p){return new hy(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,A,r,s).next(d=>{d.forEach((h,p)=>{i=i.insert(h,p)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(a=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(i=>{a.forEach((l,A)=>{const d=A.getKey();i.get(d)===null&&(i=i.insert(d,Si.newInvalidDocument(d)))});let o=Fp();return i.forEach((l,A)=>{const d=a.get(l);d!==void 0&&tg(d.mutation,A,xd.empty(),ua.now()),py(n,A)&&(o=o.insert(l,A))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return wt.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:F0(s.createTime)}}(n)),wt.resolve()}getNamedQuery(e,n){return wt.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:Tz(s.bundledQuery),readTime:F0(s.readTime)}}(n)),wt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jz{constructor(){this.overlays=new Js(hn.comparator),this.qr=new Map}getOverlay(e,n){return wt.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Rf();return wt.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.St(e,n,a)}),wt.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(r)),wt.resolve()}getOverlaysForCollection(e,n,r){const s=Rf(),a=n.length+1,i=new hn(n.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const l=o.getNext().value,A=l.getKey();if(!n.isPrefixOf(A.path))break;A.path.length===a&&l.largestBatchId>r&&s.set(l.getKey(),l)}return wt.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Js((A,d)=>A-d);const i=this.overlays.getIterator();for(;i.hasNext();){const A=i.getNext().value;if(A.getKey().getCollectionGroup()===n&&A.largestBatchId>r){let d=a.get(A.largestBatchId);d===null&&(d=Rf(),a=a.insert(A.largestBatchId,d)),d.set(A.getKey(),A)}}const o=Rf(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((A,d)=>o.set(A,d)),!(o.size()>=s)););return wt.resolve(o)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const i=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new az(n,r));let a=this.qr.get(n);a===void 0&&(a=hr(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(){this.sessionToken=ni.EMPTY_BYTE_STRING}getSessionToken(e){return wt.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,wt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(){this.Qr=new _a(Ma.$r),this.Ur=new _a(Ma.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ma(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ma(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new hn(new gs([])),r=new Ma(n,e),s=new Ma(n,e+1),a=[];return this.Ur.forEachInRange([r,s],i=>{this.Gr(i),a.push(i.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new hn(new gs([])),r=new Ma(n,e),s=new Ma(n,e+1);let a=hr();return this.Ur.forEachInRange([r,s],i=>{a=a.add(i.key)}),a}containsKey(e){const n=new Ma(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ma{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return hn.comparator(e.key,n.key)||or(e.Yr,n.Yr)}static Kr(e,n){return or(e.Yr,n.Yr)||hn.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new _a(Ma.$r)}checkEmpty(e){return wt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new sz(a,n,r,s);this.mutationQueue.push(i);for(const o of s)this.Zr=this.Zr.add(new Ma(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return wt.resolve(i)}lookupMutationBatch(e,n){return wt.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),a=s<0?0:s;return wt.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return wt.resolve(this.mutationQueue.length===0?vG:this.tr-1)}getAllMutationBatches(e){return wt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ma(n,0),s=new Ma(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,s],i=>{const o=this.Xr(i.Yr);a.push(o)}),wt.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _a(or);return n.forEach(s=>{const a=new Ma(s,0),i=new Ma(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,i],o=>{r=r.add(o.Yr)})}),wt.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;hn.isDocumentKey(a)||(a=a.child(""));const i=new Ma(new hn(a),0);let o=new _a(or);return this.Zr.forEachWhile(l=>{const A=l.key.path;return!!r.isPrefixOf(A)&&(A.length===s&&(o=o.add(l.Yr)),!0)},i),wt.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ys(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return wt.forEach(n.mutations,s=>{const a=new Ma(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ma(n,0),s=this.Zr.firstAfterOrEqual(r);return wt.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,wt.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(e){this.ri=e,this.docs=function(){return new Js(hn.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,i=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:i}),this.size+=i-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return wt.resolve(r?r.document.mutableCopy():Si.newInvalidDocument(n))}getEntries(e,n){let r=Hd();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Si.newInvalidDocument(s))}),wt.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Hd();const i=n.path,o=new hn(i.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:A,value:{document:d}}=l.getNext();if(!i.isPrefixOf(A.path))break;A.path.length>i.length+1||mG(hG(d),r)<=0||(s.has(d.key)||py(n,d))&&(a=a.insert(d.key,d.mutableCopy()))}return wt.resolve(a)}getAllFromCollectionGroup(e,n,r,s){In(9500)}ii(e,n){return wt.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Vz(this)}getSize(e){return wt.resolve(this.size)}}class Vz extends Uz{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),wt.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(e){this.persistence=e,this.si=new Ah(n=>g5(n),x5),this.lastRemoteSnapshotVersion=Nn.min(),this.highestTargetId=0,this.oi=0,this._i=new C5,this.targetCount=0,this.ai=rm.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),wt.resolve()}getLastRemoteSnapshotVersion(e){return wt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return wt.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),wt.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),wt.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new rm(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,wt.resolve()}updateTargetData(e,n){return this.Pr(n),wt.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,wt.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.si.delete(i),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),wt.waitFor(a).next(()=>s)}getTargetCount(e){return wt.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return wt.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),wt.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(i=>{a.push(s.markPotentiallyOrphaned(e,i))}),wt.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),wt.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return wt.resolve(r)}containsKey(e,n){return wt.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e,n){this.ui={},this.overlays={},this.ci=new uy(0),this.li=!1,this.li=!0,this.hi=new Oz,this.referenceDelegate=e(this),this.Pi=new Gz(this),this.indexManager=new Bz,this.remoteDocumentCache=function(s){return new Hz(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Sz(n),this.Ii=new Pz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Qz(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){$t("MemoryPersistence","Starting transaction:",e);const s=new zz(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(e,n){return wt.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class zz extends gG{constructor(e){super(),this.currentSequenceNumber=e}}class E5{constructor(e){this.persistence=e,this.Ri=new C5,this.Vi=null}static mi(e){return new E5(e)}get fi(){if(this.Vi)return this.Vi;throw In(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),wt.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),wt.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),wt.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wt.forEach(this.fi,r=>{const s=hn.fromPath(r);return this.gi(e,s).next(a=>{a||n.removeEntry(s,Nn.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return wt.or([()=>wt.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class u2{constructor(e,n){this.persistence=e,this.pi=new Ah(r=>yG(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Dz(this,n)}static mi(e,n){return new u2(e,n)}Ei(){}di(e){return wt.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return wt.forEach(this.pi,(r,s)=>this.br(e,r,s).next(a=>a?wt.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,i=>this.br(e,i,n).next(o=>{o||(r++,a.removeEntry(i,Nn.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),wt.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),wt.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),wt.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),wt.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Fv(e.data.value)),n}br(e,n,r){return wt.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return wt.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=hr(),s=hr();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new _5(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qz{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return wQ()?8:xG(Fi())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ys(e,n).next(i=>{a.result=i}).next(()=>{if(!a.result)return this.ws(e,n,s,r).next(i=>{a.result=i})}).next(()=>{if(a.result)return;const i=new Kz;return this.Ss(e,n,i).next(o=>{if(a.result=o,this.Vs)return this.bs(e,n,i,o.size)})}).next(()=>a.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(f0()<=nr.DEBUG&&$t("QueryEngine","SDK will not create cache indexes for query:",h0(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),wt.resolve()):(f0()<=nr.DEBUG&&$t("QueryEngine","Query:",h0(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(f0()<=nr.DEBUG&&$t("QueryEngine","The SDK decides to create cache indexes for query:",h0(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cA(n))):wt.resolve())}ys(e,n){if(oN(n))return wt.resolve(null);let r=cA(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=gE(n,null,"F"),r=cA(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const i=hr(...a);return this.ps.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const A=this.Ds(n,o);return this.Cs(n,A,i,l.readTime)?this.ys(e,gE(n,null,"F")):this.vs(e,A,n,l)}))})))}ws(e,n,r,s){return oN(n)||s.isEqual(Nn.min())?wt.resolve(null):this.ps.getDocuments(e,r).next(a=>{const i=this.Ds(n,a);return this.Cs(n,i,r,s)?wt.resolve(null):(f0()<=nr.DEBUG&&$t("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),h0(n)),this.vs(e,i,n,fG(s,bg)).next(o=>o))})}Ds(e,n){let r=new _a($D(e));return n.forEach((s,a)=>{py(e,a)&&(r=r.add(a))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,r){return f0()<=nr.DEBUG&&$t("QueryEngine","Using full collection scan to execute query:",h0(n)),this.ps.getDocumentsMatchingQuery(e,n,Pd.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(i=>{a=a.insert(i.key,i)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5="LocalStore",Wz=3e8;class $z{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Js(or),this.xs=new Ah(a=>g5(a),x5),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Mz(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Yz(t,e,n,r){return new $z(t,e,n,r)}async function hU(t,e){const n=dr(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const i=[],o=[];let l=hr();for(const A of s){i.push(A.batchId);for(const d of A.mutations)l=l.add(d.key)}for(const A of a){o.push(A.batchId);for(const d of A.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(A=>({Ls:A,removedBatchIds:i,addedBatchIds:o}))})})}function mU(t){const e=dr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Jz(t,e){const n=dr(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const o=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;o.push(n.Pi.removeMatchingKeys(a,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(a,d.addedDocuments,h)));let g=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(ni.EMPTY_BYTE_STRING,Nn.min()).withLastLimboFreeSnapshotVersion(Nn.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),s=s.insert(h,g),function(b,E,B){return b.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=Wz?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(p,g,d)&&o.push(n.Pi.updateTargetData(a,g))});let l=Hd(),A=hr();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,d))}),o.push(Xz(a,i,e.documentUpdates).next(d=>{l=d.ks,A=d.qs})),!r.isEqual(Nn.min())){const d=n.Pi.getLastRemoteSnapshotVersion(a).next(h=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r));o.push(d)}return wt.waitFor(o).next(()=>i.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,l,A)).next(()=>l)}).then(a=>(n.Ms=s,a))}function Xz(t,e,n){let r=hr(),s=hr();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let i=Hd();return n.forEach((o,l)=>{const A=a.get(o);l.isFoundDocument()!==A.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Nn.min())?(e.removeEntry(o,l.readTime),i=i.insert(o,l)):!A.isValidDocument()||l.version.compareTo(A.version)>0||l.version.compareTo(A.version)===0&&A.hasPendingWrites?(e.addEntry(l),i=i.insert(o,l)):$t(S5,"Ignoring outdated watch update for ",o,". Current version:",A.version," Watch version:",l.version)}),{ks:i,qs:s}})}function Zz(t,e){const n=dr(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(a=>a?(s=a,wt.resolve(s)):n.Pi.allocateTargetId(r).next(i=>(s=new vd(e,i,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function bE(t,e,n){const r=dr(t),s=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,i=>r.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!xm(i))throw i;$t(S5,`Failed to update sequence numbers for target ${e}: ${i}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function yN(t,e,n){const r=dr(t);let s=Nn.min(),a=hr();return r.persistence.runTransaction("Execute query","readwrite",i=>function(l,A,d){const h=dr(l),p=h.xs.get(d);return p!==void 0?wt.resolve(h.Ms.get(p)):h.Pi.getTargetData(A,d)}(r,i,cA(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(i,o.targetId).next(l=>{a=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(i,e,n?s:Nn.min(),n?a:hr())).next(o=>(eK(r,VG(e),o),{documents:o,Qs:a})))}function eK(t,e,n){let r=t.Os.get(e)||Nn.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Os.set(e,r)}class wN{constructor(){this.activeTargetIds=$G()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tK{constructor(){this.Mo=new wN,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wN,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nK{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="ConnectivityMonitor";class CN{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$t(bN,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$t(bN,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S1=null;function CE(){return S1===null?S1=function(){return 268435456+Math.round(2147483648*Math.random())}():S1++,"0x"+S1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="RestConnection",rK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sK{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===i2?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,a){const i=CE(),o=this.zo(e,n.toUriEncodedString());$t(Eb,`Sending RPC '${e}' ${i}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,a);const{host:A}=new URL(o),d=fm(A);return this.Jo(e,o,l,r,d).then(h=>($t(Eb,`Received RPC '${e}' ${i}: `,h),h),h=>{throw Z0(Eb,`RPC '${e}' ${i} failed with error: `,h,"url: ",o,"request:",r),h})}Ho(e,n,r,s,a,i){return this.Go(e,n,r,s,a)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gm}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}zo(e,n){const r=rK[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aK{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi="WebChannelConnection";class iK extends sK{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,a){const i=CE();return new Promise((o,l)=>{const A=new ND;A.setWithCredentials(!0),A.listenOnce(kD.COMPLETE,()=>{try{switch(A.getLastErrorCode()){case Iv.NO_ERROR:const h=A.getResponseJson();$t(mi,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case Iv.TIMEOUT:$t(mi,`RPC '${e}' ${i} timed out`),l(new on(Qt.DEADLINE_EXCEEDED,"Request time out"));break;case Iv.HTTP_ERROR:const p=A.getStatus();if($t(mi,`RPC '${e}' ${i} failed with status:`,p,"response text:",A.getResponseText()),p>0){let g=A.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const b=function(B){const I=B.toLowerCase().replace(/_/g,"-");return Object.values(Qt).indexOf(I)>=0?I:Qt.UNKNOWN}(w.status);l(new on(b,w.message))}else l(new on(Qt.UNKNOWN,"Server responded with status "+A.getStatus()))}else l(new on(Qt.UNAVAILABLE,"Connection failed."));break;default:In(9055,{l_:e,streamId:i,h_:A.getLastErrorCode(),P_:A.getLastError()})}}finally{$t(mi,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);$t(mi,`RPC '${e}' ${i} sending request:`,s),A.send(n,"POST",d,r,15)})}T_(e,n,r){const s=CE(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=RD(),o=FD(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},A=this.longPollingOptions.timeoutSeconds;A!==void 0&&(l.longPollingTimeout=Math.round(1e3*A)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=a.join("");$t(mi,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=i.createWebChannel(d,l);this.I_(h);let p=!1,g=!1;const w=new aK({Yo:E=>{g?$t(mi,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(p||($t(mi,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),$t(mi,`RPC '${e}' stream ${s} sending:`,E),h.send(E))},Zo:()=>h.close()}),b=(E,B,I)=>{E.listen(B,k=>{try{I(k)}catch(F){setTimeout(()=>{throw F},0)}})};return b(h,Ip.EventType.OPEN,()=>{g||($t(mi,`RPC '${e}' stream ${s} transport opened.`),w.o_())}),b(h,Ip.EventType.CLOSE,()=>{g||(g=!0,$t(mi,`RPC '${e}' stream ${s} transport closed`),w.a_(),this.E_(h))}),b(h,Ip.EventType.ERROR,E=>{g||(g=!0,Z0(mi,`RPC '${e}' stream ${s} transport errored. Name:`,E.name,"Message:",E.message),w.a_(new on(Qt.UNAVAILABLE,"The operation could not be completed")))}),b(h,Ip.EventType.MESSAGE,E=>{var B;if(!g){const I=E.data[0];ys(!!I,16349);const k=I,F=(k==null?void 0:k.error)||((B=k[0])==null?void 0:B.error);if(F){$t(mi,`RPC '${e}' stream ${s} received error:`,F);const D=F.status;let P=function(T){const V=la[T];if(V!==void 0)return rU(V)}(D),S=F.message;P===void 0&&(P=Qt.INTERNAL,S="Unknown error status: "+D+" with message "+F.message),g=!0,w.a_(new on(P,S)),h.close()}else $t(mi,`RPC '${e}' stream ${s} received:`,I),w.u_(I)}}),b(o,ID.STAT_EVENT,E=>{E.stat===lE.PROXY?$t(mi,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===lE.NOPROXY&&$t(mi,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function _b(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(t){return new fz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&$t("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="PersistentStream";class oK{constructor(e,n,r,s,a,i,o,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=a,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new gU(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Qt.RESOURCE_EXHAUSTED?(uu(n.toString()),uu("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Qt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new on(Qt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return $t(EN,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():($t(EN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lK extends oK{constructor(e,n,r,s,a,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,i),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=xz(this.serializer,e),r=function(a){if(!("targetChange"in a))return Nn.min();const i=a.targetChange;return i.targetIds&&i.targetIds.length?Nn.min():i.readTime?F0(i.readTime):Nn.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=pN(this.serializer),n.addTarget=function(a,i){let o;const l=i.target;if(o=pE(l)?{documents:vz(a,l)}:{query:yz(a,l).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=mz(a,i.resumeToken);const A=yE(a,i.expectedCount);A!==null&&(o.expectedCount=A)}else if(i.snapshotVersion.compareTo(Nn.min())>0){o.readTime=hz(a,i.snapshotVersion.toTimestamp());const A=yE(a,i.expectedCount);A!==null&&(o.expectedCount=A)}return o}(this.serializer,e);const r=bz(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=pN(this.serializer),n.removeTarget=e,this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cK{}class AK extends cK{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new on(Qt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,i])=>this.connection.Go(e,wE(n,r),s,a,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Qt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new on(Qt.UNKNOWN,a.toString())})}Ho(e,n,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(e,wE(n,r),s,i,o,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Qt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new on(Qt.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class uK{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(uu(n),this.aa=!1):$t("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="RemoteStore";class dK{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(i=>{r.enqueueAndForget(async()=>{cx(this)&&($t(sm,"Restarting streams for network reachability change."),await async function(l){const A=dr(l);A.Ea.add(4),await lx(A),A.Ra.set("Unknown"),A.Ea.delete(4),await yy(A)}(this))})}),this.Ra=new uK(r,s)}}async function yy(t){if(cx(t))for(const e of t.da)await e(!0)}async function lx(t){for(const e of t.da)await e(!1)}function xU(t,e){const n=dr(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),k5(n)?N5(n):vm(n).O_()&&B5(n,e))}function T5(t,e){const n=dr(t),r=vm(n);n.Ia.delete(e),r.O_()&&vU(n,e),n.Ia.size===0&&(r.O_()?r.L_():cx(n)&&n.Ra.set("Unknown"))}function B5(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Nn.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vm(t).Y_(e)}function vU(t,e){t.Va.Ue(e),vm(t).Z_(e)}function N5(t){t.Va=new cz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),vm(t).start(),t.Ra.ua()}function k5(t){return cx(t)&&!vm(t).x_()&&t.Ia.size>0}function cx(t){return dr(t).Ea.size===0}function yU(t){t.Va=void 0}async function fK(t){t.Ra.set("Online")}async function hK(t){t.Ia.forEach((e,n)=>{B5(t,e)})}async function mK(t,e){yU(t),k5(t)?(t.Ra.ha(e),N5(t)):t.Ra.set("Unknown")}async function pK(t,e,n){if(t.Ra.set("Online"),e instanceof aU&&e.state===2&&e.cause)try{await async function(s,a){const i=a.cause;for(const o of a.targetIds)s.Ia.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.Ia.delete(o),s.Va.removeTarget(o))}(t,e)}catch(r){$t(sm,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _N(t,r)}else if(e instanceof Dv?t.Va.Ze(e):e instanceof sU?t.Va.st(e):t.Va.tt(e),!n.isEqual(Nn.min()))try{const r=await mU(t.localStore);n.compareTo(r)>=0&&await function(a,i){const o=a.Va.Tt(i);return o.targetChanges.forEach((l,A)=>{if(l.resumeToken.approximateByteSize()>0){const d=a.Ia.get(A);d&&a.Ia.set(A,d.withResumeToken(l.resumeToken,i))}}),o.targetMismatches.forEach((l,A)=>{const d=a.Ia.get(l);if(!d)return;a.Ia.set(l,d.withResumeToken(ni.EMPTY_BYTE_STRING,d.snapshotVersion)),vU(a,l);const h=new vd(d.target,l,A,d.sequenceNumber);B5(a,h)}),a.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){$t(sm,"Failed to raise snapshot:",r),await _N(t,r)}}async function _N(t,e,n){if(!xm(e))throw e;t.Ea.add(1),await lx(t),t.Ra.set("Offline"),n||(n=()=>mU(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$t(sm,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await yy(t)})}async function SN(t,e){const n=dr(t);n.asyncQueue.verifyOperationInProgress(),$t(sm,"RemoteStore received new credentials");const r=cx(n);n.Ea.add(3),await lx(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await yy(n)}async function gK(t,e){const n=dr(t);e?(n.Ea.delete(2),await yy(n)):e||(n.Ea.add(2),await lx(n),n.Ra.set("Unknown"))}function vm(t){return t.ma||(t.ma=function(n,r,s){const a=dr(n);return a.sa(),new lK(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:fK.bind(null,t),t_:hK.bind(null,t),r_:mK.bind(null,t),H_:pK.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),k5(t)?N5(t):t.Ra.set("Unknown")):(await t.ma.stop(),yU(t))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Pf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const i=Date.now()+r,o=new I5(e,n,i,s,a);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new on(Qt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wU(t,e){if(uu("AsyncQueue",`${e}: ${t}`),xm(t))return new on(Qt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{static emptySet(e){return new R0(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||hn.comparator(n.key,r.key):(n,r)=>hn.comparator(n.key,r.key),this.keyedMap=Fp(),this.sortedSet=new Js(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof R0)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new R0;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.ga=new Js(hn.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):In(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class am{constructor(e,n,r,s,a,i,o,l,A){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=A}static fromInitialDocuments(e,n,r,s,a){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new am(e,n,R0.emptySet(n),i,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&my(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xK{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class vK{constructor(){this.queries=BN(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=dr(n),a=s.queries;s.queries=BN(),a.forEach((i,o)=>{for(const l of o.Sa)l.onError(r)})})(this,new on(Qt.ABORTED,"Firestore shutting down"))}}function BN(){return new Ah(t=>WD(t),my)}async function yK(t,e){const n=dr(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.ba()&&e.Da()&&(r=2):(a=new xK,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(i){const o=wU(i,`Initialization of query '${h0(e.query)}' failed`);return void e.onError(o)}n.queries.set(s,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&F5(n)}async function wK(t,e){const n=dr(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const i=a.Sa.indexOf(e);i>=0&&(a.Sa.splice(i,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function bK(t,e){const n=dr(t);let r=!1;for(const s of e){const a=s.query,i=n.queries.get(a);if(i){for(const o of i.Sa)o.Fa(s)&&(r=!0);i.wa=s}}r&&F5(n)}function CK(t,e,n){const r=dr(t),s=r.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);r.queries.delete(e)}function F5(t){t.Ca.forEach(e=>{e.next()})}var EE,NN;(NN=EE||(EE={})).Ma="default",NN.Cache="cache";class EK{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new am(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=am.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==EE.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e){this.key=e}}class CU{constructor(e){this.key=e}}class _K{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=hr(),this.mutatedKeys=hr(),this.eu=$D(e),this.tu=new R0(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new TN,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,i=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,A=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),g=py(this.query,h)?h:null,w=!!p&&this.mutatedKeys.has(p.key),b=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let E=!1;p&&g?p.data.isEqual(g.data)?w!==b&&(r.track({type:3,doc:g}),E=!0):this.su(p,g)||(r.track({type:2,doc:g}),E=!0,(l&&this.eu(g,l)>0||A&&this.eu(g,A)<0)&&(o=!0)):!p&&g?(r.track({type:0,doc:g}),E=!0):p&&!g&&(r.track({type:1,doc:p}),E=!0,(l||A)&&(o=!0)),E&&(g?(i=i.add(g),a=b?a.add(d):a.delete(d)):(i=i.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{tu:i,iu:r,Cs:o,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((d,h)=>function(g,w){const b=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return In(20277,{Rt:E})}};return b(g)-b(w)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const o=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,A=l!==this.Za;return this.Za=l,i.length!==0||A?{snapshot:new am(this.query,e.tu,a,i,e.mutatedKeys,l===0,A,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new TN,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=hr(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new CU(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new bU(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=hr();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return am.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const R5="SyncEngine";class SK{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class TK{constructor(e){this.key=e,this.hu=!1}}class BK{constructor(e,n,r,s,a,i){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Ah(o=>WD(o),my),this.Iu=new Map,this.Eu=new Set,this.du=new Js(hn.comparator),this.Au=new Map,this.Ru=new C5,this.Vu={},this.mu=new Map,this.fu=rm.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function NK(t,e,n=!0){const r=BU(t);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await EU(r,e,n,!0),s}async function kK(t,e){const n=BU(t);await EU(n,e,!0,!1)}async function EU(t,e,n,r){const s=await Zz(t.localStore,cA(e)),a=s.targetId,i=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await IK(t,e,a,i==="current",s.resumeToken)),t.isPrimaryClient&&n&&xU(t.remoteStore,s),o}async function IK(t,e,n,r,s){t.pu=(h,p,g)=>async function(b,E,B,I){let k=E.view.ru(B);k.Cs&&(k=await yN(b.localStore,E.query,!1).then(({documents:S})=>E.view.ru(S,k)));const F=I&&I.targetChanges.get(E.targetId),D=I&&I.targetMismatches.get(E.targetId)!=null,P=E.view.applyChanges(k,b.isPrimaryClient,F,D);return IN(b,E.targetId,P.au),P.snapshot}(t,h,p,g);const a=await yN(t.localStore,e,!0),i=new _K(e,a.Qs),o=i.ru(a.documents),l=ox.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),A=i.applyChanges(o,t.isPrimaryClient,l);IN(t,n,A.au);const d=new SK(e,n,i);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),A.snapshot}async function FK(t,e,n){const r=dr(t),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter(i=>!my(i,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await bE(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&T5(r.remoteStore,s.targetId),_E(r,s.targetId)}).catch(Ay)):(_E(r,s.targetId),await bE(r.localStore,s.targetId,!0))}async function RK(t,e){const n=dr(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),T5(n.remoteStore,r.targetId))}async function _U(t,e){const n=dr(t);try{const r=await Jz(n.localStore,e);e.targetChanges.forEach((s,a)=>{const i=n.Au.get(a);i&&(ys(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?i.hu=!0:s.modifiedDocuments.size>0?ys(i.hu,14607):s.removedDocuments.size>0&&(ys(i.hu,42227),i.hu=!1))}),await TU(n,r,e)}catch(r){await Ay(r)}}function kN(t,e,n){const r=dr(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((a,i)=>{const o=i.view.va(e);o.snapshot&&s.push(o.snapshot)}),function(i,o){const l=dr(i);l.onlineState=o;let A=!1;l.queries.forEach((d,h)=>{for(const p of h.Sa)p.va(o)&&(A=!0)}),A&&F5(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function DK(t,e,n){const r=dr(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),a=s&&s.key;if(a){let i=new Js(hn.comparator);i=i.insert(a,Si.newNoDocument(a,Nn.min()));const o=hr().add(a),l=new vy(Nn.min(),new Map,new Js(or),i,o);await _U(r,l),r.du=r.du.remove(a),r.Au.delete(e),D5(r)}else await bE(r.localStore,e,!1).then(()=>_E(r,e,n)).catch(Ay)}function _E(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||SU(t,r)})}function SU(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(T5(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),D5(t))}function IN(t,e,n){for(const r of n)r instanceof bU?(t.Ru.addReference(r.key,e),UK(t,r)):r instanceof CU?($t(R5,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||SU(t,r.key)):In(19791,{wu:r})}function UK(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||($t(R5,"New document in limbo: "+n),t.Eu.add(r),D5(t))}function D5(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new hn(gs.fromString(e)),r=t.fu.next();t.Au.set(r,new TK(n)),t.du=t.du.insert(n,r),xU(t.remoteStore,new vd(cA(v5(n.path)),r,"TargetPurposeLimboResolution",uy.ce))}}async function TU(t,e,n){const r=dr(t),s=[],a=[],i=[];r.Tu.isEmpty()||(r.Tu.forEach((o,l)=>{i.push(r.pu(l,e,n).then(A=>{var d;if((A||n)&&r.isPrimaryClient){const h=A?!A.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(A){s.push(A);const h=_5.As(l.targetId,A);a.push(h)}}))}),await Promise.all(i),r.Pu.H_(s),await async function(l,A){const d=dr(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>wt.forEach(A,p=>wt.forEach(p.Es,g=>d.persistence.referenceDelegate.addReference(h,p.targetId,g)).next(()=>wt.forEach(p.ds,g=>d.persistence.referenceDelegate.removeReference(h,p.targetId,g)))))}catch(h){if(!xm(h))throw h;$t(S5,"Failed to update sequence numbers: "+h)}for(const h of A){const p=h.targetId;if(!h.fromCache){const g=d.Ms.get(p),w=g.snapshotVersion,b=g.withLastLimboFreeSnapshotVersion(w);d.Ms=d.Ms.insert(p,b)}}}(r.localStore,a))}async function LK(t,e){const n=dr(t);if(!n.currentUser.isEqual(e)){$t(R5,"User change. New user:",e.toKey());const r=await hU(n.localStore,e);n.currentUser=e,function(a,i){a.mu.forEach(o=>{o.forEach(l=>{l.reject(new on(Qt.CANCELLED,i))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await TU(n,r.Ls)}}function MK(t,e){const n=dr(t),r=n.Au.get(e);if(r&&r.hu)return hr().add(r.key);{let s=hr();const a=n.Iu.get(e);if(!a)return s;for(const i of a){const o=n.Tu.get(i);s=s.unionWith(o.view.nu)}return s}}function BU(t){const e=dr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_U.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DK.bind(null,e),e.Pu.H_=bK.bind(null,e.eventManager),e.Pu.yu=CK.bind(null,e.eventManager),e}class d2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pU(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Yz(this.persistence,new qz,e.initialUser,this.serializer)}Cu(e){return new fU(E5.mi,this.serializer)}Du(e){return new tK}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}d2.provider={build:()=>new d2};class PK extends d2{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ys(this.persistence.referenceDelegate instanceof u2,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Fz(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?co.withCacheSize(this.cacheSizeBytes):co.DEFAULT;return new fU(r=>u2.mi(r,n),this.serializer)}}class SE{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>kN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=LK.bind(null,this.syncEngine),await gK(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vK}()}createDatastore(e){const n=pU(e.databaseInfo.databaseId),r=function(a){return new iK(a)}(e.databaseInfo);return function(a,i,o,l){return new AK(a,i,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,i,o){return new dK(r,s,a,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>kN(this.syncEngine,n,0),function(){return CN.v()?new CN:new nK}())}createSyncEngine(e,n){return function(s,a,i,o,l,A,d){const h=new BK(s,a,i,o,l,A);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=dr(s);$t(sm,"RemoteStore shutting down."),a.Ea.add(5),await lx(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}SE.provider={build:()=>new SE};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jK{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):uu("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="FirestoreClient";class OK{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=bi.UNAUTHENTICATED,this.clientId=h5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async i=>{$t(Vd,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>($t(Vd,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=wU(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Sb(t,e){t.asyncQueue.verifyOperationInProgress(),$t(Vd,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await hU(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function FN(t,e){t.asyncQueue.verifyOperationInProgress();const n=await QK(t);$t(Vd,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>SN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>SN(e.remoteStore,s)),t._onlineComponents=e}async function QK(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$t(Vd,"Using user provided OfflineComponentProvider");try{await Sb(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===Qt.FAILED_PRECONDITION||s.code===Qt.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Z0("Error using user provided cache. Falling back to memory cache: "+n),await Sb(t,new d2)}}else $t(Vd,"Using default OfflineComponentProvider"),await Sb(t,new PK(void 0));return t._offlineComponents}async function HK(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($t(Vd,"Using user provided OnlineComponentProvider"),await FN(t,t._uninitializedComponentsProvider._online)):($t(Vd,"Using default OnlineComponentProvider"),await FN(t,new SE))),t._onlineComponents}async function VK(t){const e=await HK(t),n=e.eventManager;return n.onListen=NK.bind(null,e.syncEngine),n.onUnlisten=FK.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kK.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RK.bind(null,e.syncEngine),n}function GK(t,e,n={}){const r=new Pf;return t.asyncQueue.enqueueAndForget(async()=>function(a,i,o,l,A){const d=new jK({next:p=>{d.Nu(),i.enqueueAndForget(()=>wK(a,h));const g=p.docs.has(o);!g&&p.fromCache?A.reject(new on(Qt.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?A.reject(new on(Qt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):A.resolve(p)},error:p=>A.reject(p)}),h=new EK(v5(o.path),d,{includeMetadataChanges:!0,qa:!0});return yK(a,h)}(await VK(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NU(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU="firestore.googleapis.com",DN=!0;class UN{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new on(Qt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kU,this.ssl=DN}else this.host=e.host,this.ssl=e.ssl??DN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dU;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kz)throw new on(Qt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NU(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new on(Qt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new on(Qt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new on(Qt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class U5{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new on(Qt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new on(Qt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UN(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ZV;switch(r.type){case"firstParty":return new rG(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new on(Qt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=RN.get(n);r&&($t("ComponentProvider","Removing Datastore"),RN.delete(n),r.terminate())}(this),Promise.resolve()}}function zK(t,e,n,r={}){var A;t=AE(t,U5);const s=fm(e),a=t._getSettings(),i={...a,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;s&&(QR(`https://${o}`),HR("Firestore",!0)),a.host!==kU&&a.host!==o&&Z0("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...a,host:o,ssl:s,emulatorOptions:r};if(!Yf(l,i)&&(t._setSettings(l),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=bi.MOCK_USER;else{d=dQ(r.mockUserToken,(A=t._app)==null?void 0:A.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new on(Qt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new bi(p)}t._authCredentials=new eG(new UD(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new L5(this.firestore,e,this._query)}}class Gi{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gi(this.firestore,e,this._key)}toJSON(){return{type:Gi._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ax(n,Gi._jsonSchema))return new Gi(e,r||null,new hn(gs.fromString(n.referencePath)))}}Gi._jsonSchemaVersion="firestore/documentReference/1.0",Gi._jsonSchema={type:fa("string",Gi._jsonSchemaVersion),referencePath:fa("string")};class Sg extends L5{constructor(e,n,r){super(e,n,v5(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gi(this.firestore,null,new hn(e))}withConverter(e){return new Sg(this.firestore,e,this._path)}}function KK(t,e,...n){if(t=hA(t),arguments.length===1&&(e=h5.newId()),cG("doc","path",e),t instanceof U5){const r=gs.fromString(e,...n);return WB(r),new Gi(t,null,new hn(r))}{if(!(t instanceof Gi||t instanceof Sg))throw new on(Qt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(gs.fromString(e,...n));return WB(r),new Gi(t.firestore,t instanceof Sg?t.converter:null,new hn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN="AsyncQueue";class MN{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new gU(this,"async_queue_retry"),this._c=()=>{const r=_b();r&&$t(LN,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=_b();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=_b();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Pf;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!xm(e))throw e;$t(LN,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,uu("INTERNAL UNHANDLED ERROR: ",PN(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=I5.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&In(47125,{Pc:PN(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function PN(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class IU extends U5{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new MN,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new MN(e),this._firestoreClient=void 0,await e}}}function qK(t,e){const n=typeof t=="object"?t:KR(),r=typeof t=="string"?t:i2,s=s5(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=AQ("firestore");a&&zK(s,...a)}return s}function WK(t){if(t._terminated)throw new on(Qt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$K(t),t._firestoreClient}function $K(t){var r,s,a;const e=t._freezeSettings(),n=function(o,l,A,d){return new EG(o,l,A,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,NU(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new OK(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sA(ni.fromBase64String(e))}catch(n){throw new on(Qt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sA(ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sA._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ax(e,sA._jsonSchema))return sA.fromBase64String(e.bytes)}}sA._jsonSchemaVersion="firestore/bytes/1.0",sA._jsonSchema={type:fa("string",sA._jsonSchemaVersion),bytes:fa("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new on(Qt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new on(Qt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new on(Qt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return or(this._lat,e._lat)||or(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Id._jsonSchemaVersion}}static fromJSON(e){if(ax(e,Id._jsonSchema))return new Id(e.latitude,e.longitude)}}Id._jsonSchemaVersion="firestore/geoPoint/1.0",Id._jsonSchema={type:fa("string",Id._jsonSchemaVersion),latitude:fa("number"),longitude:fa("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Fd._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ax(e,Fd._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Fd(e.vectorValues);throw new on(Qt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fd._jsonSchemaVersion="firestore/vectorValue/1.0",Fd._jsonSchema={type:fa("string",Fd._jsonSchemaVersion),vectorValues:fa("object")};const YK=new RegExp("[~\\*/\\[\\]]");function JK(t,e,n){if(e.search(YK)>=0)throw jN(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new FU(...e.split("."))._internalPath}catch{throw jN(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function jN(t,e,n,r,s){let a=`Function ${e}() called with invalid data`;a+=". ";let i="";return new on(Qt.INVALID_ARGUMENT,a+t+i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Gi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new XK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(DU("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class XK extends RU{data(){return super.data()}}function DU(t,e){return typeof e=="string"?JK(t,e):e instanceof FU?e._internalPath:e._delegate._internalPath}class ZK{convertValue(e,n="none"){switch(Qd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Od(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw In(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ix(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var r,s,a;const n=(a=(s=(r=e.fields)==null?void 0:r[dE].arrayValue)==null?void 0:s.values)==null?void 0:a.map(i=>zs(i.doubleValue));return new Fd(n)}convertGeoPoint(e){return new Id(zs(e.latitude),zs(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=fy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Cg(e));default:return null}}convertTimestamp(e){const n=jd(e);return new ua(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=gs.fromString(e);ys(uU(r),9688,{name:e});const s=new Eg(r.get(1),r.get(3)),a=new hn(r.popFirst(5));return s.isEqual(n)||uu(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}class Dp{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Of extends RU{constructor(e,n,r,s,a,i){super(e,n,r,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Uv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(DU("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new on(Qt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Of._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Of._jsonSchemaVersion="firestore/documentSnapshot/1.0",Of._jsonSchema={type:fa("string",Of._jsonSchemaVersion),bundleSource:fa("string","DocumentSnapshot"),bundleName:fa("string"),bundle:fa("string")};class Uv extends Of{data(e={}){return super.data(e)}}class ng{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Dp(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Uv(this._firestore,this._userDataWriter,r.key,r,new Dp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new on(Qt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const l=new Uv(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Dp(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const l=new Uv(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Dp(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let A=-1,d=-1;return o.type!==0&&(A=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:eq(o.type),doc:l,oldIndex:A,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new on(Qt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ng._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=h5.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eq(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return In(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tq(t){t=AE(t,Gi);const e=AE(t.firestore,IU);return GK(WK(e),t._key).then(n=>rq(e,t,n))}ng._jsonSchemaVersion="firestore/querySnapshot/1.0",ng._jsonSchema={type:fa("string",ng._jsonSchemaVersion),bundleSource:fa("string","QuerySnapshot"),bundleName:fa("string"),bundle:fa("string")};class nq extends ZK{constructor(e){super(),this.firestore=e}convertBytes(e){return new sA(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gi(this.firestore,null,n)}}function rq(t,e,n){const r=n.docs.get(e._key),s=new nq(t);return new Of(t,s,e._key,r,new Dp(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){gm=s})(hm),J0(new Jf("firestore",(r,{instanceIdentifier:s,options:a})=>{const i=r.getProvider("app").getImmediate(),o=new IU(new tG(r.getProvider("auth-internal")),new sG(i,r.getProvider("app-check-internal")),function(A,d){if(!Object.prototype.hasOwnProperty.apply(A.options,["projectId"]))throw new on(Qt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eg(A.options.projectId,d)}(i,s),i);return a={useFetchStreams:n,...a},o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),Bd(GB,zB,e),Bd(GB,zB,"esm2020")})();var sq="firebase",aq="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bd(sq,aq,"app");const iq={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.appspot.com",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},UU=zR(iq),Tb=JV(UU),oq=qK(UU);var nn=(t=>(t.SUBDIRECCION="SUBDIRECCION",t.PROFESORADO="PROFESORADO",t.COORDINACION_TP="COORDINACION_TP",t.ESTUDIANTE="ESTUDIANTE",t))(nn||{}),Gn=(t=>(t.EVALUACION="Evaluación",t.ACTO="Acto",t.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",t.SALIDA_PEDAGOGICA="Salida Pedagógica",t))(Gn||{}),Nf=(t=>(t.PRUEBA_PARCIAL="Prueba parcial",t.GUIA_APRENDIZAJE="Guía de Aprendizaje",t.RUBRICA="Rúbrica",t.PAUTA_COTEJO="Pauta de Cotejo",t))(Nf||{});const ha="w-6 h-6",wy="w-24 h-24",lq=()=>u.jsxs("svg",{className:"w-32 h-32 text-slate-700 dark:text-slate-300",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M9 14V10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M12 14V8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),cq=()=>u.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M9 18h6"}),u.jsx("path",{d:"M10 22h4"}),u.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),Aq=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),uq=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ha,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Up=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ha,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),Lp=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ha,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),LU=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),dq=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:wy,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),fq=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:wy,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),hq=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:wy,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),mq=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:wy,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),pq=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ha,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),ON=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ha,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),T1=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ha,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Bb=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ha,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),B1=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ha,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Nb=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ha,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),QN=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ha,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),gq=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ha,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),xq=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ha,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),vq=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ha,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),yq=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:ha,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),HN=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:ha,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),wq=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ha,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),kb=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ha,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),bq=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:ha,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),Cq=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ha,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),VN=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:ha,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})});nn.SUBDIRECCION,nn.PROFESORADO,nn.COORDINACION_TP,nn.ESTUDIANTE;const Eq={[nn.SUBDIRECCION]:[{name:"Dashboard",icon:u.jsx(pq,{})},{name:"Administración",icon:u.jsx(yq,{})},{name:"Seguimiento Curricular",icon:u.jsx(Cq,{})},{name:"Acompañamiento docente",icon:u.jsx(vq,{})},{name:"Análisis Taxonómico",icon:u.jsx(VN,{})},{name:"Interdisciplinario",icon:u.jsx(kb,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:u.jsx(ON,{})},{name:"Crear horarios",icon:u.jsx(Bb,{})},{name:"Seguimiento de acciones pedagógicas",icon:u.jsx(B1,{})},{name:"Inclusión",icon:u.jsx(HN,{})},{name:"Calendario Académico",icon:u.jsx(T1,{})},{name:"Muro de Anuncios",icon:u.jsx(Up,{})},{name:"Mensajería Interna",icon:u.jsx(Lp,{})},{name:"Generador de Actas",icon:u.jsx(Nb,{})}],[nn.PROFESORADO]:[{name:"Planificación",icon:u.jsx(QN,{})},{name:"Mis Acompañamientos",icon:u.jsx(wq,{})},{name:"Recursos de Aprendizaje",icon:u.jsx(gq,{})},{name:"Análisis Taxonómico",icon:u.jsx(VN,{})},{name:"Interdisciplinario",icon:u.jsx(kb,{})},{name:"Inclusión",icon:u.jsx(HN,{})},{name:"Actividades Remotas",icon:u.jsx(xq,{})},{name:"Evaluación de Aprendizajes",icon:u.jsx(Nb,{})},{name:"Evaluaciones Formativas",icon:u.jsx(B1,{})},{name:"Calendario Académico",icon:u.jsx(T1,{})},{name:"Muro de Anuncios",icon:u.jsx(Up,{})},{name:"Mensajería Interna",icon:u.jsx(Lp,{})},{name:"Generador de Actas",icon:u.jsx(ON,{})}],[nn.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:u.jsx(B1,{})},{name:"Asistencia Dual",icon:u.jsx(Bb,{})},{name:"Pañol",icon:u.jsx(bq,{})},{name:"Calendario Académico",icon:u.jsx(T1,{})},{name:"Muro de Anuncios",icon:u.jsx(Up,{})},{name:"Mensajería Interna",icon:u.jsx(Lp,{})},{name:"Generador de Actas",icon:u.jsx(Nb,{})}],[nn.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:u.jsx(QN,{})},{name:"Evaluación Formativa",icon:u.jsx(B1,{})},{name:"Tareas Interdisciplinarias",icon:u.jsx(kb,{})},{name:"Asistencia a Empresa",icon:u.jsx(Bb,{})},{name:"Calendario Académico",icon:u.jsx(T1,{})},{name:"Muro de Anuncios",icon:u.jsx(Up,{})},{name:"Mensajería Interna",icon:u.jsx(Lp,{})}]},GN=["Currículum y Evaluación","Convivencia Escolar","Orientación","Gestión Pedagógica General"],mp=["Pendiente","En Proceso","Cumplida"],f2=["1º Medio","2º Medio","3º Medio","4º Medio"],Ho=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],$s=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],TE=["Juan Pérez","María González","Carlos Soto","Ana Fernández","Luis Rojas","Laura Muñoz","Pedro Castillo","Sofía Reyes","Diego Flores","Valentina Castro"],Lv=["Lunes","Martes","Miércoles","Jueves","Viernes"],BE=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],_q={"1º y 2º medio":{"Lengua y Literatura":6,Matemática:6,Inglés:3,"Historia y Geografía":4,"Educación Física":2,Ciencias:4,"Artes/Música":2,Tecnología:2,Orientación:1},"3º y 4º medio (Humanista-Científico)":{"Lengua y Literatura":4,Matemática:4,Inglés:2,"Historia y Geografía":3,"Educación Ciudadana":2,Filosofía:3,"Ciencias para la Ciudadanía":2,"Educación Física":2},"3º y 4º medio (Técnico-Profesional)":{"Lengua y Literatura":2,Matemática:2,Inglés:2,"Historia y Geografía":2,Filosofía:2,"Educación Física":2,"Módulo TP":18}},g0={[Gn.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[Gn.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[Gn.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[Gn.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},Sq=Object.values(Nf),Ib=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],Fb=["Vinculado","Desvinculado","En proceso","Empresa"],Qf=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],Tq=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],h2=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],m2=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],MU=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],N1=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],Bq=({onLoginAttempt:t,onForgotPasswordRequest:e,error:n})=>{const[r,s]=ee.useState(""),[a,i]=ee.useState(""),[o,l]=ee.useState("login"),A=p=>{p.preventDefault(),t(r,a)},d=p=>{p.preventDefault(),e(r),l("forgot_sent")},h=()=>o==="forgot"?u.jsxs("form",{onSubmit:d,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:p=>s(p.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),u.jsx("div",{children:u.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),u.jsx("div",{className:"text-sm text-center",children:u.jsx("button",{type:"button",onClick:()=>l("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):o==="forgot_sent"?u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),u.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",u.jsx("strong",{children:r}),", hemos enviado un enlace para restablecer su contraseña."]}),u.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),u.jsx("button",{type:"button",onClick:()=>{l("login"),s("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):u.jsxs("form",{onSubmit:A,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:p=>s(p.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:p=>i(p.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),n&&u.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:u.jsx("p",{children:n})}),u.jsx("div",{className:"text-sm text-center",children:u.jsx("button",{type:"button",onClick:()=>l("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),u.jsx("div",{children:u.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return u.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[u.jsxs("div",{className:"text-center mb-10",children:[u.jsx("div",{className:"mb-4 flex justify-center items-center",children:u.jsx(lq,{})}),u.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),u.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:h()}),u.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},Rb=({trigger:t,children:e,onOpen:n})=>{const[r,s]=ee.useState(!1),a=ee.useRef(null),i=()=>{const l=!r;s(l),l&&n&&n()},o=l=>{a.current&&!a.current.contains(l.target)&&s(!1)};return ee.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),u.jsxs("div",{className:"relative",ref:a,children:[u.jsx("div",{onClick:i,children:t}),r&&u.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>s(!1),children:e})]})},zN="usuariosLiceo",Nq=({user:t,onClose:e,onSave:n})=>{const[r,s]=ee.useState({nombreCompleto:t.nombreCompleto,email:t.email,fotoUrl:t.fotoUrl||""}),a=o=>{s({...r,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const l={...t,...r};try{const A=localStorage.getItem(zN);let d=A?JSON.parse(A):[];const h=d.findIndex(p=>p.id===t.id);h>-1?d[h]=l:d.push(l),localStorage.setItem(zN,JSON.stringify(d)),n(l),e()}catch(A){console.error("Failed to save user profile:",A),alert("No se pudo guardar el perfil.")}};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:u.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:u.jsxs("form",{onSubmit:i,children:[u.jsxs("div",{className:"p-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),u.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:r.fotoUrl,onChange:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),u.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:r.nombreCompleto,onChange:a,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),u.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:a,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),u.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.profile})]})]})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[u.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},KN="usuariosLiceo",kq=({user:t,onClose:e,onSave:n})=>{const[r,s]=ee.useState(""),[a,i]=ee.useState(""),[o,l]=ee.useState(null),A=d=>{if(d.preventDefault(),l(null),!r){l("La contraseña no puede estar en blanco.");return}if(r!==a){l("Las contraseñas no coinciden.");return}const h={...t,password:r};try{const p=localStorage.getItem(KN);let g=p?JSON.parse(p):[];const w=g.findIndex(b=>b.id===t.id);w>-1?g[w]=h:g.push(h),localStorage.setItem(KN,JSON.stringify(g)),n(h),e()}catch(p){console.error("Failed to save new password:",p),l("No se pudo guardar la nueva contraseña.")}};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:u.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:u.jsxs("form",{onSubmit:A,children:[u.jsxs("div",{className:"p-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),u.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.email})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:r,onChange:d=>s(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:a,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&u.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:u.jsx("p",{children:o})})]})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[u.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})},qN="anunciosMuro",WN="mensajesInternos",$N="lir-read-status",Iq=({user:t})=>{if(t.fotoUrl)return u.jsx("img",{src:t.fotoUrl,alt:t.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const e=t.nombreCompleto||"",n=String(e).split(" ").filter(r=>r).map(r=>r[0]).join("").toUpperCase();return u.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:n.substring(0,2)})},Fq=({currentUser:t,onLogout:e,onNavigate:n,onUserUpdate:r,onChangeProfile:s,toggleSidebar:a,unreadMessagesCount:i,refreshUnreadCount:o})=>{const[l,A]=ee.useState([]),[d,h]=ee.useState([]),[p,g]=ee.useState(!1),[w,b]=ee.useState(!1),E=ee.useCallback(()=>{try{const F=localStorage.getItem(`${$N}-${t.id}`);return F?JSON.parse(F):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[t.id]),B=ee.useCallback(F=>{try{localStorage.setItem(`${$N}-${t.id}`,JSON.stringify(F))}catch(D){console.error("Failed to set read status:",D)}},[t.id]);ee.useEffect(()=>{const F=JSON.parse(localStorage.getItem(qN)||"[]"),D=E();A(F.filter(S=>!D.announcements.includes(S.id)));const P=JSON.parse(localStorage.getItem(WN)||"[]");h(P.filter(S=>S.para===t.email).sort((S,N)=>new Date(N.fecha).getTime()-new Date(S.fecha).getTime()).slice(0,5))},[t.id,E,i]);const I=()=>{const F=E(),D=JSON.parse(localStorage.getItem(qN)||"[]").map(P=>P.id);F.announcements=D,B(F),A([])},k=()=>{const F=E(),P=JSON.parse(localStorage.getItem(WN)||"[]").filter(S=>S.para===t.email).map(S=>S.id);F.messages=[...new Set([...F.messages,...P])],B(F),o()};return u.jsxs(u.Fragment,{children:[u.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:u.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:a,children:u.jsx(Aq,{})}),u.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>n("Dashboard"),children:[u.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),u.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),u.jsx("div",{className:"flex-1 flex justify-center",children:u.jsx("button",{onClick:()=>n("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:u.jsx(uq,{})})}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Rb,{onOpen:I,trigger:u.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Notificaciones",children:[u.jsx(Up,{}),l.length>0&&u.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:l.length})]}),children:u.jsxs("div",{className:"p-2",children:[u.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),u.jsxs("ul",{className:"mt-1",children:[l.slice(0,3).map(F=>u.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[u.jsx("p",{className:"font-bold dark:text-slate-200",children:F.titulo}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:F.mensaje})]},F.id)),l.length===0&&u.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),u.jsx("button",{onClick:()=>n("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),u.jsx(Rb,{onOpen:k,trigger:u.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[u.jsx(Lp,{}),i>0&&u.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:i})]}),children:u.jsxs("div",{className:"p-2",children:[u.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),u.jsxs("ul",{className:"mt-1",children:[d.slice(0,3).map(F=>u.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[u.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",F.de]}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:F.asunto})]},F.id)),d.length===0&&u.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),u.jsx("button",{onClick:()=>n("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),u.jsx(Rb,{trigger:u.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:u.jsx(Iq,{user:t})}),children:u.jsxs("div",{className:"p-2",children:[u.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:t.nombreCompleto}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:t.profile})]}),u.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[u.jsx("li",{children:u.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),u.jsx("li",{children:u.jsx("button",{onClick:()=>b(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),t.email==="subdi@lir.cl"&&u.jsx("li",{children:u.jsx("button",{onClick:s,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cambiar Perfil"})}),u.jsx("li",{children:u.jsx("button",{onClick:e,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),p&&u.jsx(Nq,{user:t,onClose:()=>g(!1),onSave:r}),w&&u.jsx(kq,{user:t,onClose:()=>b(!1),onSave:r})]})},Rq=Array.from({length:12},(t,e)=>e+1),Dq="usuariosLiceo",YN="reemplazosDocentes",JN={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},Uq=({selectedBlocks:t,onChange:e,legend:n})=>u.jsxs("fieldset",{children:[u.jsx("legend",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:n}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:Rq.map(r=>u.jsxs("label",{className:"flex items-center space-x-2 p-2 border rounded-lg hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-700 transition-colors",children:[u.jsx("input",{type:"checkbox",value:r,checked:t.includes(r),onChange:e,className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),u.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:r})]},r))})]}),Lq=()=>{const[t,e]=ee.useState(()=>{try{const E=localStorage.getItem(YN);return E?JSON.parse(E):[]}catch(E){return console.error("Error al leer reemplazos de localStorage",E),[]}}),[n,r]=ee.useState([]),[s,a]=ee.useState(JN),[i,o]=ee.useState(""),[l,A]=ee.useState(null);ee.useEffect(()=>{try{const E=localStorage.getItem(Dq);if(E){const I=JSON.parse(E).filter(k=>k.profile===nn.PROFESORADO).map(k=>k.nombreCompleto).sort();r(I)}}catch(E){console.error("Error al cargar profesores desde localStorage",E)}},[]),ee.useEffect(()=>{try{localStorage.setItem(YN,JSON.stringify(t))}catch(E){console.error("Error al guardar reemplazos en localStorage",E)}},[t]);const d=ee.useCallback(E=>{const{name:B,value:I}=E.target;a(k=>({...k,[B]:I}))},[]),h=ee.useCallback(E=>{const B=parseInt(E.target.value,10);a(I=>{const k=I.bloquesAfectados,F=k.includes(B)?k.filter(D=>D!==B):[...k,B].sort((D,P)=>D-P);return{...I,bloquesAfectados:F}})},[]),p=ee.useCallback(E=>{E.preventDefault(),A(null);const{docenteAusente:B,asignaturaAusente:I,curso:k,diaAusencia:F,bloquesAfectados:D,docenteReemplazante:P,asignaturaReemplazante:S}=s;if(!B||!I||!k||!F||!P||!S||D.length===0){A("Todos los campos son obligatorios y debe seleccionar al menos un bloque.");return}const N=I.trim().toLowerCase()===S.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",T={id:crypto.randomUUID(),...s,resultado:N};e(V=>[T,...V]),a(JN)},[s]),g=ee.useCallback(E=>{window.confirm("¿Está seguro de que desea eliminar este registro?")&&e(B=>B.filter(I=>I.id!==E))},[]),w=ee.useMemo(()=>{if(!i)return t;const E=i.toLowerCase();return t.filter(B=>B.docenteAusente.toLowerCase().includes(E)||B.docenteReemplazante.toLowerCase().includes(E)||B.diaAusencia.includes(E)||B.curso.toLowerCase().includes(E))},[t,i]),b="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Registro de Inasistencias y Reemplazos"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete el formulario para registrar una nueva suplencia."}),u.jsxs("form",{onSubmit:p,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Ausente"}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"docenteAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),u.jsxs("select",{name:"docenteAusente",value:s.docenteAusente,onChange:d,className:b,children:[u.jsx("option",{value:"",children:"Seleccione un docente"}),n.map(E=>u.jsx("option",{value:E,children:E},E))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asignaturaAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),u.jsxs("select",{name:"asignaturaAusente",value:s.asignaturaAusente,onChange:d,className:b,children:[u.jsx("option",{value:"",children:"Seleccione una asignatura"}),Ho.map(E=>u.jsx("option",{value:E,children:E},E))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),u.jsxs("select",{name:"curso",value:s.curso,onChange:d,className:b,children:[u.jsx("option",{value:"",children:"Seleccione un curso"}),$s.map(E=>u.jsx("option",{value:E,children:E},E))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"diaAusencia",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Día Ausencia"}),u.jsx("input",{type:"date",name:"diaAusencia",value:s.diaAusencia,onChange:d,className:b})]}),u.jsx(Uq,{legend:"Bloques Afectados",selectedBlocks:s.bloquesAfectados,onChange:h})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Reemplazante"}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"docenteReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),u.jsxs("select",{name:"docenteReemplazante",value:s.docenteReemplazante,onChange:d,className:b,children:[u.jsx("option",{value:"",children:"Seleccione un docente"}),n.map(E=>u.jsx("option",{value:E,children:E},E))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asignaturaReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),u.jsxs("select",{name:"asignaturaReemplazante",value:s.asignaturaReemplazante,onChange:d,className:b,children:[u.jsx("option",{value:"",children:"Seleccione una asignatura"}),Ho.map(E=>u.jsx("option",{value:E,children:E},E))]})]})]})]}),l&&u.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:l}),u.jsx("div",{className:"pt-4 text-right",children:u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Registrar Reemplazo"})})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Reemplazos"}),u.jsx("div",{className:"mb-4",children:u.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)...",value:i,onChange:E=>o(E.target.value),className:b+" md:w-1/2"})}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Ausente"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Reemplazante"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Bloques"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Resultado"}),u.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:w.length>0?w.map(E=>u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:E.diaAusencia}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:E.curso}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[E.docenteAusente,u.jsx("br",{}),u.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:E.asignaturaAusente})]}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[E.docenteReemplazante,u.jsx("br",{}),u.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:E.asignaturaReemplazante})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:E.bloquesAfectados.join(", ")}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:u.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${E.resultado==="Hora realizada"?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:E.resultado})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:u.jsx("button",{onClick:()=>g(E.id),title:"Eliminar registro",className:"p-1 text-red-600 hover:text-red-800 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},E.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No se encontraron registros."})})})]})})]})]})},Mq="acompanamientoDocenteRecords",Pq="eventosCalendario",jq="acompanamientoDocenteCustomRubrica",$c=({title:t,value:e,description:n})=>u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),u.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:e}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:n})]}),Ef=({title:t,data:e,colorClass:n,valueFormatter:r=s=>String(s)})=>{const s=ee.useMemo(()=>e.map(i=>typeof i.value=="number"?i.value:parseFloat(String(i.value))||0),[e]),a=ee.useMemo(()=>Math.max(...s,1),[s]);return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),u.jsx("div",{className:"space-y-4",children:e.length>0?e.sort((i,o)=>(typeof o.value=="number"?o.value:0)-(typeof i.value=="number"?i.value:0)).map((i,o)=>{const l=typeof i.value=="number"?i.value:parseFloat(String(i.value))||0;return u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[u.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:i.label}),u.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:r(i.value)})]}),u.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:u.jsx("div",{className:`${n} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${l/a*100}%`}})})]},i.label+o)}):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},Oq=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState([]),[s,a]=ee.useState([]),[i,o]=ee.useState(m2);ee.useEffect(()=>{const h=()=>{try{const p=localStorage.getItem("reemplazosDocentes");p&&e(JSON.parse(p));const g=localStorage.getItem(Mq);g&&r(JSON.parse(g));const w=localStorage.getItem(Pq);w&&a(JSON.parse(w));const b=localStorage.getItem(jq);o(b?JSON.parse(b):m2)}catch(p){console.error("Error al leer datos de localStorage para el dashboard",p)}};return h(),window.addEventListener("storage",h),()=>window.removeEventListener("storage",h)},[]);const l=ee.useMemo(()=>{const h=t.length;if(h===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const p=t.filter(k=>k.resultado==="Hora realizada").length,g=h-p,w=`${(p/h*100).toFixed(1)}%`,b=(k,F)=>k.reduce((D,P)=>{const S=P[F];return typeof S=="string"&&(D[S]=(D[S]||0)+1),D},{}),E=b(t,"docenteAusente"),B=b(t,"docenteReemplazante"),I=b(t,"curso");return{totalInasistencias:h,horasRealizadas:p,horasCubiertas:g,tasaCobertura:w,inasistenciasPorDocente:Object.entries(E).map(([k,F])=>({label:k,value:F})),reemplazosPorDocente:Object.entries(B).map(([k,F])=>({label:k,value:F})),inasistenciasPorCurso:Object.entries(I).map(([k,F])=>({label:k,value:F})),distribucionResultados:[{label:"Hora Realizada",value:p},{label:"Hora Cubierta",value:g}]}},[t]),A=ee.useMemo(()=>{const h=n.length;if(h===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const p=new Map;i.forEach(F=>{F.criteria.forEach(D=>{p.set(D.name,F.domain)})});let g=0,w=0;const b={},E={};n.forEach(F=>{b[F.docente]||(b[F.docente]={total:0,count:0}),Object.entries(F.rubricaResultados).forEach(([D,P])=>{g+=P,w++,b[F.docente].total+=P,b[F.docente].count++;const S=p.get(D);S&&(E[S]||(E[S]={total:0,count:0}),E[S].total+=P,E[S].count++)})});const B=w>0?(g/w).toFixed(2):"N/A",I=Object.entries(b).map(([F,D])=>({label:F,value:D.count>0?(D.total/D.count).toFixed(2):0})),k=Object.entries(E).map(([F,D])=>({label:F,value:D.count>0?(D.total/D.count).toFixed(2):0}));return{totalAcompanamientos:h,promedioGeneral:B,desempenoPorDocente:I,desempenoPorDominio:k}},[n,i]),d=ee.useMemo(()=>{const h={[Gn.EVALUACION]:0,[Gn.ACTO]:0,[Gn.ACTIVIDAD_FOCALIZADA]:0,[Gn.SALIDA_PEDAGOGICA]:0};for(const g of s)h.hasOwnProperty(g.type)&&h[g.type]++;const p=Object.entries(h).map(([g,w])=>({label:g0[g].label,value:w}));return{totalEvaluaciones:h[Gn.EVALUACION],totalActos:h[Gn.ACTO],totalActividadesFocalizadas:h[Gn.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:h[Gn.SALIDA_PEDAGOGICA],distribucionEventos:p}},[s]);return l.totalInasistencias===0&&A.totalAcompanamientos===0&&s.length===0?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[u.jsx("span",{className:"text-6xl mb-4",children:"📊"}),u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes (Inasistencias, Acompañamiento, etc)."})]}):u.jsxs("div",{className:"space-y-12 animate-fade-in",children:[l.totalInasistencias>0&&u.jsxs("div",{className:"space-y-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Dashboard de Inasistencias"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx($c,{title:"Total Inasistencias",value:l.totalInasistencias,description:"Registros totales"}),u.jsx($c,{title:"Horas Realizadas",value:l.horasRealizadas,description:"Reemplazo con misma asignatura"}),u.jsx($c,{title:"Horas Cubiertas",value:l.horasCubiertas,description:"Reemplazo con otra asignatura"}),u.jsx($c,{title:"Tasa de Cobertura Efectiva",value:l.tasaCobertura,description:"% de horas realizadas"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsx(Ef,{title:"Inasistencias por Docente",data:l.inasistenciasPorDocente,colorClass:"bg-red-400"}),u.jsx(Ef,{title:"Reemplazos por Docente",data:l.reemplazosPorDocente,colorClass:"bg-sky-400"}),u.jsx(Ef,{title:"Inasistencias por Curso",data:l.inasistenciasPorCurso,colorClass:"bg-amber-400"}),u.jsx(Ef,{title:"Distribución de Resultados",data:l.distribucionResultados,colorClass:"bg-green-400"})]})]}),A.totalAcompanamientos>0&&u.jsxs("div",{className:"space-y-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Dashboard de Acompañamiento Docente"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx($c,{title:"Total Acompañamientos",value:A.totalAcompanamientos,description:"Registros realizados"}),u.jsx($c,{title:"Promedio General",value:A.promedioGeneral,description:"Calificación promedio (1-4)"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsx(Ef,{title:"Desempeño Promedio por Docente",data:A.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:h=>Number(h).toFixed(2)}),u.jsx(Ef,{title:"Desempeño Promedio por Dominio",data:A.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:h=>Number(h).toFixed(2)})]})]}),s.length>0&&u.jsxs("div",{className:"space-y-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen del Calendario Académico"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx($c,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados"}),u.jsx($c,{title:"Actos",value:d.totalActos,description:"Eventos registrados"}),u.jsx($c,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados"}),u.jsx($c,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados"})]}),u.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:u.jsx(Ef,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400"})})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Qq,Hq;function Vq(){return{geminiUrl:Qq,vertexUrl:Hq}}function Gq(t,e,n,r){var s,a;if(!(t!=null&&t.baseUrl)){const i=Vq();return e?(s=i.vertexUrl)!==null&&s!==void 0?s:n:(a=i.geminiUrl)!==null&&a!==void 0?a:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uh{}function tn(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function v(t,e,n){for(let a=0;a<e.length-1;a++){const i=e[a];if(i.endsWith("[]")){const o=i.slice(0,-2);if(!(o in t))if(Array.isArray(n))t[o]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(t[o])){const l=t[o];if(Array.isArray(n))for(let A=0;A<l.length;A++){const d=l[A];v(d,e.slice(a+1),n[A])}else for(const A of l)v(A,e.slice(a+1),n)}return}else if(i.endsWith("[0]")){const o=i.slice(0,-3);o in t||(t[o]=[{}]);const l=t[o];v(l[0],e.slice(a+1),n);return}(!t[i]||typeof t[i]!="object")&&(t[i]={}),t=t[i]}const r=e[e.length-1],s=t[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function x(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const s=r.slice(0,-2);if(s in t){const a=t[s];return Array.isArray(a)?a.map(i=>x(i,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NE(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var XN;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(XN||(XN={}));var ZN;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(ZN||(ZN={}));var Tt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Tt||(Tt={}));var e3;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(e3||(e3={}));var t3;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(t3||(t3={}));var n3;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(n3||(n3={}));var r3;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(r3||(r3={}));var s3;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(s3||(s3={}));var a3;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(a3||(a3={}));var i3;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(i3||(i3={}));var o3;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(o3||(o3={}));var l3;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(l3||(l3={}));var c3;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(c3||(c3={}));var A3;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(A3||(A3={}));var u3;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(u3||(u3={}));var d3;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(d3||(d3={}));var p2;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(p2||(p2={}));var f3;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(f3||(f3={}));var kE;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(kE||(kE={}));var h3;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(h3||(h3={}));var m3;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(m3||(m3={}));var p3;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(p3||(p3={}));var g3;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(g3||(g3={}));var x3;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(x3||(x3={}));var v3;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(v3||(v3={}));var y3;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(y3||(y3={}));var w3;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(w3||(w3={}));var b3;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(b3||(b3={}));var C3;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(C3||(C3={}));var E3;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(E3||(E3={}));var _3;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(_3||(_3={}));var S3;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(S3||(S3={}));var T3;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(T3||(T3={}));var B3;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(B3||(B3={}));var N3;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(N3||(N3={}));var k3;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(k3||(k3={}));var I3;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(I3||(I3={}));var F3;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(F3||(F3={}));var R3;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(R3||(R3={}));var D3;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(D3||(D3={}));var U3;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(U3||(U3={}));var E0;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(E0||(E0={}));class IE{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class pp{get text(){var e,n,r,s,a,i,o,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let A="",d=!1;const h=[];for(const p of(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[g,w]of Object.entries(p))g!=="text"&&g!=="thought"&&(w!==null||w!==void 0)&&h.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;d=!0,A+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?A:void 0}get data(){var e,n,r,s,a,i,o,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let A="";const d=[];for(const h of(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[p,g]of Object.entries(h))p!=="inlineData"&&(g!==null||g!==void 0)&&d.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(A+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),A.length>0?btoa(A):void 0}get functionCalls(){var e,n,r,s,a,i,o,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const A=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((A==null?void 0:A.length)!==0)return A}get executableCode(){var e,n,r,s,a,i,o,l,A;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(A=d==null?void 0:d[0])===null||A===void 0?void 0:A.code}get codeExecutionResult(){var e,n,r,s,a,i,o,l,A;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(A=d==null?void 0:d[0])===null||A===void 0?void 0:A.output}}class L3{}class M3{}class zq{}class Kq{}class P3{}class j3{}class O3{}class qq{}class Q3{}class H3{}class V3{}class G3{}class Wq{}class $q{}class Yq{}class z3{}class Jq{get text(){var e,n,r;let s="",a=!1;const i=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,A]of Object.entries(o))l!=="text"&&l!=="thought"&&A!==null&&i.push(l);if(typeof o.text=="string"){if(typeof o.thought=="boolean"&&o.thought)continue;a=!0,s+=o.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,n,r;let s="";const a=[];for(const i of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[o,l]of Object.entries(i))o!=="inlineData"&&l!==null&&a.push(o);i.inlineData&&typeof i.inlineData.data=="string"&&(s+=atob(i.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class g2{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new g2;if(r.name=e.name,r.metadata=e.metadata,r.done=e.done,r.error=e.error,n){const s=e.response;if(s){const a=new Q3,i=s.videos;a.generatedVideos=i==null?void 0:i.map(o=>({video:{uri:o.gcsUri,videoBytes:o.bytesBase64Encoded?NE(o.bytesBase64Encoded):void 0,mimeType:o.mimeType}})),a.raiMediaFilteredCount=s.raiMediaFilteredCount,a.raiMediaFilteredReasons=s.raiMediaFilteredReasons,r.response=a}}else{const s=e.response;if(s){const a=new Q3,i=s.generateVideoResponse,o=i==null?void 0:i.generatedSamples;a.generatedVideos=o==null?void 0:o.map(l=>{const A=l.video;return{video:{uri:A==null?void 0:A.uri,videoBytes:A!=null&&A.encodedVideo?NE(A==null?void 0:A.encodedVideo):void 0,mimeType:l.encoding}}}),a.raiMediaFilteredCount=i==null?void 0:i.raiMediaFilteredCount,a.raiMediaFilteredReasons=i==null?void 0:i.raiMediaFilteredReasons,r.response=a}}return r}}class Xq{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pr(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function PU(t,e){const n=Pr(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function jU(t){return Array.isArray(t)?t.map(e=>x2(e)):[x2(t)]}function x2(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function OU(t){const e=x2(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function QU(t){const e=x2(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function K3(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function HU(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>K3(e)):[K3(t)]}function FE(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function q3(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function W3(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ki(t){if(t==null)throw new Error("ContentUnion is required");return FE(t)?t:{role:"user",parts:HU(t)}}function VU(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=ki(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=ki(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ki(n)):[ki(e)]}function Sl(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(q3(t)||W3(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ki(t)]}const e=[],n=[],r=FE(t[0]);for(const s of t){const a=FE(s);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(q3(s)||W3(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||e.push({role:"user",parts:HU(n)}),e}function Zq(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Tt).includes(n[0].toUpperCase())?n[0].toUpperCase():Tt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Tt).includes(r.toUpperCase())?r.toUpperCase():Tt.TYPE_UNSPECIFIED})}}function D0(t){const e={},n=["items"],r=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&Zq(t.type,e);for(const[i,o]of Object.entries(t))if(o!=null)if(i=="type"){if(o==="null")throw new Error("type: null can not be the only possible type for the field.");if(o instanceof Array)continue;e.type=Object.values(Tt).includes(o.toUpperCase())?o.toUpperCase():Tt.TYPE_UNSPECIFIED}else if(n.includes(i))e[i]=D0(o);else if(r.includes(i)){const l=[];for(const A of o){if(A.type=="null"){e.nullable=!0;continue}l.push(D0(A))}e[i]=l}else if(s.includes(i)){const l={};for(const[A,d]of Object.entries(o))l[A]=D0(d);e[i]=l}else{if(i==="additionalProperties")continue;e[i]=o}return e}function M5(t){return D0(t)}function P5(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function j5(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ym(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=D0(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=D0(e.response));return t}function wm(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function eW(t,e,n,r=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function xu(t,e){if(typeof e!="string")throw new Error("name must be a string");return eW(t,e,"cachedContents")}function GU(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function dh(t){return NE(t)}function tW(t){return t!=null&&typeof t=="object"&&"name"in t}function nW(t){return t!=null&&typeof t=="object"&&"video"in t}function rW(t){return t!=null&&typeof t=="object"&&"uri"in t}function zU(t){var e;let n;if(tW(t)&&(n=t.name),!(rW(t)&&(n=t.uri,n===void 0))&&!(nW(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function KU(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function qU(t){for(const e of["models","tunedModels","publisherModels"])if(sW(t,e))return t[e];return[]}function sW(t,e){return t!==null&&typeof t=="object"&&e in t}function aW(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function iW(t,e={}){const n=[],r=new Set;for(const s of t){const a=s.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const i=aW(s,e);i.functionDeclarations&&n.push(...i.functionDeclarations)}return{functionDeclarations:n}}function WU(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function oW(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function bm(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function $U(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lW(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function cW(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function AW(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function uW(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],lW(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],cW(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],AW(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function YU(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>uW(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function dW(t){const e={},n=x(t,["anyOf"]);n!=null&&v(e,["anyOf"],n);const r=x(t,["default"]);r!=null&&v(e,["default"],r);const s=x(t,["description"]);s!=null&&v(e,["description"],s);const a=x(t,["enum"]);a!=null&&v(e,["enum"],a);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const A=x(t,["maxItems"]);A!=null&&v(e,["maxItems"],A);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const p=x(t,["maximum"]);p!=null&&v(e,["maximum"],p);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const w=x(t,["minLength"]);w!=null&&v(e,["minLength"],w);const b=x(t,["minProperties"]);b!=null&&v(e,["minProperties"],b);const E=x(t,["minimum"]);E!=null&&v(e,["minimum"],E);const B=x(t,["nullable"]);B!=null&&v(e,["nullable"],B);const I=x(t,["pattern"]);I!=null&&v(e,["pattern"],I);const k=x(t,["properties"]);k!=null&&v(e,["properties"],k);const F=x(t,["propertyOrdering"]);F!=null&&v(e,["propertyOrdering"],F);const D=x(t,["required"]);D!=null&&v(e,["required"],D);const P=x(t,["title"]);P!=null&&v(e,["title"],P);const S=x(t,["type"]);return S!=null&&v(e,["type"],S),e}function fW(t){const e={};if(x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=x(t,["category"]);n!=null&&v(e,["category"],n);const r=x(t,["threshold"]);return r!=null&&v(e,["threshold"],r),e}function hW(t){const e={},n=x(t,["behavior"]);n!=null&&v(e,["behavior"],n);const r=x(t,["description"]);r!=null&&v(e,["description"],r);const s=x(t,["name"]);s!=null&&v(e,["name"],s);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function mW(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function pW(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],mW(n)),e}function gW(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function xW(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],gW(n)),e}function vW(){return{}}function yW(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(A=>hW(A))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(t,["googleSearch"]);r!=null&&v(e,["googleSearch"],pW(r));const s=x(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],xW(s)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],vW());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function wW(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["allowedFunctionNames"]);return r!=null&&v(e,["allowedFunctionNames"],r),e}function bW(t){const e={},n=x(t,["latitude"]);n!=null&&v(e,["latitude"],n);const r=x(t,["longitude"]);return r!=null&&v(e,["longitude"],r),e}function CW(t){const e={},n=x(t,["latLng"]);n!=null&&v(e,["latLng"],bW(n));const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function EW(t){const e={},n=x(t,["functionCallingConfig"]);n!=null&&v(e,["functionCallingConfig"],wW(n));const r=x(t,["retrievalConfig"]);return r!=null&&v(e,["retrievalConfig"],CW(r)),e}function _W(t){const e={},n=x(t,["voiceName"]);return n!=null&&v(e,["voiceName"],n),e}function JU(t){const e={},n=x(t,["prebuiltVoiceConfig"]);return n!=null&&v(e,["prebuiltVoiceConfig"],_W(n)),e}function SW(t){const e={},n=x(t,["speaker"]);n!=null&&v(e,["speaker"],n);const r=x(t,["voiceConfig"]);return r!=null&&v(e,["voiceConfig"],JU(r)),e}function TW(t){const e={},n=x(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>SW(s))),v(e,["speakerVoiceConfigs"],r)}return e}function BW(t){const e={},n=x(t,["voiceConfig"]);n!=null&&v(e,["voiceConfig"],JU(n));const r=x(t,["multiSpeakerVoiceConfig"]);r!=null&&v(e,["multiSpeakerVoiceConfig"],TW(r));const s=x(t,["languageCode"]);return s!=null&&v(e,["languageCode"],s),e}function NW(t){const e={},n=x(t,["includeThoughts"]);n!=null&&v(e,["includeThoughts"],n);const r=x(t,["thinkingBudget"]);return r!=null&&v(e,["thinkingBudget"],r),e}function kW(t,e,n){const r={},s=x(e,["systemInstruction"]);n!==void 0&&s!=null&&v(n,["systemInstruction"],YU(ki(s)));const a=x(e,["temperature"]);a!=null&&v(r,["temperature"],a);const i=x(e,["topP"]);i!=null&&v(r,["topP"],i);const o=x(e,["topK"]);o!=null&&v(r,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(r,["candidateCount"],l);const A=x(e,["maxOutputTokens"]);A!=null&&v(r,["maxOutputTokens"],A);const d=x(e,["stopSequences"]);d!=null&&v(r,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(r,["responseLogprobs"],h);const p=x(e,["logprobs"]);p!=null&&v(r,["logprobs"],p);const g=x(e,["presencePenalty"]);g!=null&&v(r,["presencePenalty"],g);const w=x(e,["frequencyPenalty"]);w!=null&&v(r,["frequencyPenalty"],w);const b=x(e,["seed"]);b!=null&&v(r,["seed"],b);const E=x(e,["responseMimeType"]);E!=null&&v(r,["responseMimeType"],E);const B=x(e,["responseSchema"]);B!=null&&v(r,["responseSchema"],dW(M5(B)));const I=x(e,["responseJsonSchema"]);if(I!=null&&v(r,["responseJsonSchema"],I),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=x(e,["safetySettings"]);if(n!==void 0&&k!=null){let M=k;Array.isArray(M)&&(M=M.map(U=>fW(U))),v(n,["safetySettings"],M)}const F=x(e,["tools"]);if(n!==void 0&&F!=null){let M=wm(F);Array.isArray(M)&&(M=M.map(U=>yW(ym(U)))),v(n,["tools"],M)}const D=x(e,["toolConfig"]);if(n!==void 0&&D!=null&&v(n,["toolConfig"],EW(D)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=x(e,["cachedContent"]);n!==void 0&&P!=null&&v(n,["cachedContent"],xu(t,P));const S=x(e,["responseModalities"]);S!=null&&v(r,["responseModalities"],S);const N=x(e,["mediaResolution"]);N!=null&&v(r,["mediaResolution"],N);const T=x(e,["speechConfig"]);if(T!=null&&v(r,["speechConfig"],BW(P5(T))),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=x(e,["thinkingConfig"]);return V!=null&&v(r,["thinkingConfig"],NW(V)),r}function IW(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["request","model"],Pr(t,r));const s=x(e,["contents"]);if(s!=null){let i=Sl(s);Array.isArray(i)&&(i=i.map(o=>YU(o))),v(n,["request","contents"],i)}const a=x(e,["config"]);return a!=null&&v(n,["request","generationConfig"],kW(t,a,n)),n}function FW(t,e){const n={};if(x(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(x(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=x(e,["fileName"]);r!=null&&v(n,["fileName"],r);const s=x(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>IW(t,i))),v(n,["requests","requests"],a)}return n}function RW(t,e){const n={},r=x(t,["displayName"]);if(e!==void 0&&r!=null&&v(e,["batch","displayName"],r),x(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function DW(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Pr(t,r));const s=x(e,["src"]);s!=null&&v(n,["batch","inputConfig"],FW(t,WU(t,s)));const a=x(e,["config"]);return a!=null&&v(n,["config"],RW(a,n)),n}function UW(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],bm(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function LW(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],bm(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function MW(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const s=x(t,["pageToken"]);if(e!==void 0&&s!=null&&v(e,["_query","pageToken"],s),x(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function PW(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],MW(n,e)),e}function jW(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],bm(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function OW(t){const e={},n=x(t,["format"]);n!=null&&v(e,["instancesFormat"],n);const r=x(t,["gcsUri"]);r!=null&&v(e,["gcsSource","uris"],r);const s=x(t,["bigqueryUri"]);if(s!=null&&v(e,["bigquerySource","inputUri"],s),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function QW(t){const e={},n=x(t,["format"]);n!=null&&v(e,["predictionsFormat"],n);const r=x(t,["gcsUri"]);r!=null&&v(e,["gcsDestination","outputUriPrefix"],r);const s=x(t,["bigqueryUri"]);if(s!=null&&v(e,["bigqueryDestination","outputUri"],s),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function HW(t,e){const n={},r=x(t,["displayName"]);e!==void 0&&r!=null&&v(e,["displayName"],r);const s=x(t,["dest"]);return e!==void 0&&s!=null&&v(e,["outputConfig"],QW(oW(s))),n}function VW(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["model"],Pr(t,r));const s=x(e,["src"]);s!=null&&v(n,["inputConfig"],OW(WU(t,s)));const a=x(e,["config"]);return a!=null&&v(n,["config"],HW(a,n)),n}function GW(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],bm(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function zW(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],bm(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function KW(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const s=x(t,["pageToken"]);e!==void 0&&s!=null&&v(e,["_query","pageToken"],s);const a=x(t,["filter"]);return e!==void 0&&a!=null&&v(e,["_query","filter"],a),n}function qW(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],KW(n,e)),e}function WW(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],bm(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function $W(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function YW(t){const e={},n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function JW(t){const e={},n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function XW(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],$W(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],YW(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],JW(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function ZW(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>XW(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function e$(t){const e={},n=x(t,["citationSources"]);return n!=null&&v(e,["citations"],n),e}function t$(t){const e={},n=x(t,["retrievedUrl"]);n!=null&&v(e,["retrievedUrl"],n);const r=x(t,["urlRetrievalStatus"]);return r!=null&&v(e,["urlRetrievalStatus"],r),e}function n$(t){const e={},n=x(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>t$(s))),v(e,["urlMetadata"],r)}return e}function r$(t){const e={},n=x(t,["content"]);n!=null&&v(e,["content"],ZW(n));const r=x(t,["citationMetadata"]);r!=null&&v(e,["citationMetadata"],e$(r));const s=x(t,["tokenCount"]);s!=null&&v(e,["tokenCount"],s);const a=x(t,["finishReason"]);a!=null&&v(e,["finishReason"],a);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],n$(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const A=x(t,["index"]);A!=null&&v(e,["index"],A);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function s$(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["candidates"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>r$(l))),v(e,["candidates"],o)}const s=x(t,["modelVersion"]);s!=null&&v(e,["modelVersion"],s);const a=x(t,["promptFeedback"]);a!=null&&v(e,["promptFeedback"],a);const i=x(t,["usageMetadata"]);return i!=null&&v(e,["usageMetadata"],i),e}function XU(t){const e={},n=x(t,["details"]);n!=null&&v(e,["details"],n);const r=x(t,["code"]);r!=null&&v(e,["code"],r);const s=x(t,["message"]);return s!=null&&v(e,["message"],s),e}function a$(t){const e={},n=x(t,["response"]);n!=null&&v(e,["response"],s$(n));const r=x(t,["error"]);return r!=null&&v(e,["error"],XU(r)),e}function i$(t){const e={},n=x(t,["responsesFile"]);n!=null&&v(e,["fileName"],n);const r=x(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a$(a))),v(e,["inlinedResponses"],s)}return e}function RE(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["metadata","displayName"]);r!=null&&v(e,["displayName"],r);const s=x(t,["metadata","state"]);s!=null&&v(e,["state"],$U(s));const a=x(t,["metadata","createTime"]);a!=null&&v(e,["createTime"],a);const i=x(t,["metadata","endTime"]);i!=null&&v(e,["endTime"],i);const o=x(t,["metadata","updateTime"]);o!=null&&v(e,["updateTime"],o);const l=x(t,["metadata","model"]);l!=null&&v(e,["model"],l);const A=x(t,["metadata","output"]);return A!=null&&v(e,["dest"],i$(A)),e}function o$(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const s=x(t,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>RE(i))),v(e,["batchJobs"],a)}return e}function l$(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["done"]);r!=null&&v(e,["done"],r);const s=x(t,["error"]);return s!=null&&v(e,["error"],XU(s)),e}function ZU(t){const e={},n=x(t,["details"]);n!=null&&v(e,["details"],n);const r=x(t,["code"]);r!=null&&v(e,["code"],r);const s=x(t,["message"]);return s!=null&&v(e,["message"],s),e}function c$(t){const e={},n=x(t,["instancesFormat"]);n!=null&&v(e,["format"],n);const r=x(t,["gcsSource","uris"]);r!=null&&v(e,["gcsUri"],r);const s=x(t,["bigquerySource","inputUri"]);return s!=null&&v(e,["bigqueryUri"],s),e}function A$(t){const e={},n=x(t,["predictionsFormat"]);n!=null&&v(e,["format"],n);const r=x(t,["gcsDestination","outputUriPrefix"]);r!=null&&v(e,["gcsUri"],r);const s=x(t,["bigqueryDestination","outputUri"]);return s!=null&&v(e,["bigqueryUri"],s),e}function DE(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const s=x(t,["state"]);s!=null&&v(e,["state"],$U(s));const a=x(t,["error"]);a!=null&&v(e,["error"],ZU(a));const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["startTime"]);o!=null&&v(e,["startTime"],o);const l=x(t,["endTime"]);l!=null&&v(e,["endTime"],l);const A=x(t,["updateTime"]);A!=null&&v(e,["updateTime"],A);const d=x(t,["model"]);d!=null&&v(e,["model"],d);const h=x(t,["inputConfig"]);h!=null&&v(e,["src"],c$(h));const p=x(t,["outputConfig"]);return p!=null&&v(e,["dest"],A$(p)),e}function u$(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const s=x(t,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>DE(i))),v(e,["batchJobs"],a)}return e}function d$(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["done"]);r!=null&&v(e,["done"],r);const s=x(t,["error"]);return s!=null&&v(e,["error"],ZU(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var eh;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(eh||(eh={}));class Ax{constructor(e,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,s)}init(e,n,r){var s,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!r||Object.keys(r).length===0?i={config:{}}:typeof r=="object"?i=Object.assign({},r):i=r,i.config&&(i.config.pageToken=n.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(a=(s=i.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class f$ extends uh{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${s}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new Ax(eh.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=VW(this.apiClient,e);return o=tn("batchPredictionJobs",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>DE(d))}else{const A=DW(this.apiClient,e);return o=tn("{model}:batchGenerateContent",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>RE(d))}}async get(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=GW(this.apiClient,e);return o=tn("batchPredictionJobs/{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>DE(d))}else{const A=UW(this.apiClient,e);return o=tn("batches/{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>RE(d))}}async cancel(e){var n,r,s,a;let i="",o={};if(this.apiClient.isVertexAI()){const l=zW(this.apiClient,e);i=tn("batchPredictionJobs/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=LW(this.apiClient,e);i=tn("batches/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=qW(e);return o=tn("batchPredictionJobs",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=u$(d),p=new z3;return Object.assign(p,h),p})}else{const A=PW(e);return o=tn("batches",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=o$(d),p=new z3;return Object.assign(p,h),p})}}async delete(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=WW(this.apiClient,e);return o=tn("batchPredictionJobs/{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>d$(d))}else{const A=jW(this.apiClient,e);return o=tn("batches/{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>l$(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h$(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function m$(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function p$(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function g$(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],h$(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],m$(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],p$(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function $3(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>g$(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function x$(t){const e={},n=x(t,["behavior"]);n!=null&&v(e,["behavior"],n);const r=x(t,["description"]);r!=null&&v(e,["description"],r);const s=x(t,["name"]);s!=null&&v(e,["name"],s);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function v$(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function y$(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],v$(n)),e}function w$(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function b$(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],w$(n)),e}function C$(){return{}}function E$(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(A=>x$(A))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(t,["googleSearch"]);r!=null&&v(e,["googleSearch"],y$(r));const s=x(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],b$(s)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],C$());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function _$(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["allowedFunctionNames"]);return r!=null&&v(e,["allowedFunctionNames"],r),e}function S$(t){const e={},n=x(t,["latitude"]);n!=null&&v(e,["latitude"],n);const r=x(t,["longitude"]);return r!=null&&v(e,["longitude"],r),e}function T$(t){const e={},n=x(t,["latLng"]);n!=null&&v(e,["latLng"],S$(n));const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function B$(t){const e={},n=x(t,["functionCallingConfig"]);n!=null&&v(e,["functionCallingConfig"],_$(n));const r=x(t,["retrievalConfig"]);return r!=null&&v(e,["retrievalConfig"],T$(r)),e}function N$(t,e){const n={},r=x(t,["ttl"]);e!==void 0&&r!=null&&v(e,["ttl"],r);const s=x(t,["expireTime"]);e!==void 0&&s!=null&&v(e,["expireTime"],s);const a=x(t,["displayName"]);e!==void 0&&a!=null&&v(e,["displayName"],a);const i=x(t,["contents"]);if(e!==void 0&&i!=null){let d=Sl(i);Array.isArray(d)&&(d=d.map(h=>$3(h))),v(e,["contents"],d)}const o=x(t,["systemInstruction"]);e!==void 0&&o!=null&&v(e,["systemInstruction"],$3(ki(o)));const l=x(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>E$(h))),v(e,["tools"],d)}const A=x(t,["toolConfig"]);if(e!==void 0&&A!=null&&v(e,["toolConfig"],B$(A)),x(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function k$(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["model"],PU(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],N$(s,n)),n}function I$(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],xu(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function F$(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],xu(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function R$(t,e){const n={},r=x(t,["ttl"]);e!==void 0&&r!=null&&v(e,["ttl"],r);const s=x(t,["expireTime"]);return e!==void 0&&s!=null&&v(e,["expireTime"],s),n}function D$(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],xu(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],R$(s,n)),n}function U$(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const s=x(t,["pageToken"]);return e!==void 0&&s!=null&&v(e,["_query","pageToken"],s),n}function L$(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],U$(n,e)),e}function M$(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function P$(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["data"]);r!=null&&v(e,["data"],r);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function j$(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function O$(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],M$(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],P$(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],j$(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Y3(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>O$(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function Q$(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=x(t,["description"]);n!=null&&v(e,["description"],n);const r=x(t,["name"]);r!=null&&v(e,["name"],r);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const a=x(t,["parametersJsonSchema"]);a!=null&&v(e,["parametersJsonSchema"],a);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function H$(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function V$(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],H$(n)),e}function G$(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function z$(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],G$(n)),e}function K$(){return{}}function q$(t){const e={},n=x(t,["apiKeyString"]);return n!=null&&v(e,["apiKeyString"],n),e}function W$(t){const e={},n=x(t,["apiKeyConfig"]);n!=null&&v(e,["apiKeyConfig"],q$(n));const r=x(t,["authType"]);r!=null&&v(e,["authType"],r);const s=x(t,["googleServiceAccountConfig"]);s!=null&&v(e,["googleServiceAccountConfig"],s);const a=x(t,["httpBasicAuthConfig"]);a!=null&&v(e,["httpBasicAuthConfig"],a);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function $$(t){const e={},n=x(t,["authConfig"]);return n!=null&&v(e,["authConfig"],W$(n)),e}function Y$(){return{}}function J$(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>Q$(p))),v(e,["functionDeclarations"],h)}const r=x(t,["retrieval"]);r!=null&&v(e,["retrieval"],r);const s=x(t,["googleSearch"]);s!=null&&v(e,["googleSearch"],V$(s));const a=x(t,["googleSearchRetrieval"]);a!=null&&v(e,["googleSearchRetrieval"],z$(a)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],K$());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],$$(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],Y$());const A=x(t,["codeExecution"]);A!=null&&v(e,["codeExecution"],A);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function X$(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["allowedFunctionNames"]);return r!=null&&v(e,["allowedFunctionNames"],r),e}function Z$(t){const e={},n=x(t,["latitude"]);n!=null&&v(e,["latitude"],n);const r=x(t,["longitude"]);return r!=null&&v(e,["longitude"],r),e}function eY(t){const e={},n=x(t,["latLng"]);n!=null&&v(e,["latLng"],Z$(n));const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function tY(t){const e={},n=x(t,["functionCallingConfig"]);n!=null&&v(e,["functionCallingConfig"],X$(n));const r=x(t,["retrievalConfig"]);return r!=null&&v(e,["retrievalConfig"],eY(r)),e}function nY(t,e){const n={},r=x(t,["ttl"]);e!==void 0&&r!=null&&v(e,["ttl"],r);const s=x(t,["expireTime"]);e!==void 0&&s!=null&&v(e,["expireTime"],s);const a=x(t,["displayName"]);e!==void 0&&a!=null&&v(e,["displayName"],a);const i=x(t,["contents"]);if(e!==void 0&&i!=null){let h=Sl(i);Array.isArray(h)&&(h=h.map(p=>Y3(p))),v(e,["contents"],h)}const o=x(t,["systemInstruction"]);e!==void 0&&o!=null&&v(e,["systemInstruction"],Y3(ki(o)));const l=x(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>J$(p))),v(e,["tools"],h)}const A=x(t,["toolConfig"]);e!==void 0&&A!=null&&v(e,["toolConfig"],tY(A));const d=x(t,["kmsKeyName"]);return e!==void 0&&d!=null&&v(e,["encryption_spec","kmsKeyName"],d),n}function rY(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["model"],PU(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],nY(s,n)),n}function sY(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],xu(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function aY(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],xu(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function iY(t,e){const n={},r=x(t,["ttl"]);e!==void 0&&r!=null&&v(e,["ttl"],r);const s=x(t,["expireTime"]);return e!==void 0&&s!=null&&v(e,["expireTime"],s),n}function oY(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],xu(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],iY(s,n)),n}function lY(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const s=x(t,["pageToken"]);return e!==void 0&&s!=null&&v(e,["_query","pageToken"],s),n}function cY(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],lY(n,e)),e}function Mv(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const s=x(t,["model"]);s!=null&&v(e,["model"],s);const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const i=x(t,["updateTime"]);i!=null&&v(e,["updateTime"],i);const o=x(t,["expireTime"]);o!=null&&v(e,["expireTime"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function AY(){return{}}function uY(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const s=x(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>Mv(i))),v(e,["cachedContents"],a)}return e}function Pv(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const s=x(t,["model"]);s!=null&&v(e,["model"],s);const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const i=x(t,["updateTime"]);i!=null&&v(e,["updateTime"],i);const o=x(t,["expireTime"]);o!=null&&v(e,["expireTime"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function dY(){return{}}function fY(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const s=x(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>Pv(i))),v(e,["cachedContents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hY extends uh{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ax(eh.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=rY(this.apiClient,e);return o=tn("cachedContents",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>Pv(d))}else{const A=k$(this.apiClient,e);return o=tn("cachedContents",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>Mv(d))}}async get(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=sY(this.apiClient,e);return o=tn("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>Pv(d))}else{const A=I$(this.apiClient,e);return o=tn("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>Mv(d))}}async delete(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=aY(this.apiClient,e);return o=tn("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(()=>{const d=dY(),h=new V3;return Object.assign(h,d),h})}else{const A=F$(this.apiClient,e);return o=tn("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(()=>{const d=AY(),h=new V3;return Object.assign(h,d),h})}}async update(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=oY(this.apiClient,e);return o=tn("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>Pv(d))}else{const A=D$(this.apiClient,e);return o=tn("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>Mv(d))}}async listInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=cY(e);return o=tn("cachedContents",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=fY(d),p=new G3;return Object.assign(p,h),p})}else{const A=L$(e);return o=tn("cachedContents",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=uY(d),p=new G3;return Object.assign(p,h),p})}}}function J3(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function es(t){return this instanceof es?(this.v=t,this):new es(t)}function U0(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(g){return function(w){return Promise.resolve(w).then(g,h)}}function o(g,w){r[g]&&(s[g]=function(b){return new Promise(function(E,B){a.push([g,b,E,B])>1||l(g,b)})},w&&(s[g]=w(s[g])))}function l(g,w){try{A(r[g](w))}catch(b){p(a[0][3],b)}}function A(g){g.value instanceof es?Promise.resolve(g.value.v).then(d,h):p(a[0][2],g)}function d(g){l("next",g)}function h(g){l("throw",g)}function p(g,w){g(w),a.shift(),a.length&&l(a[0][0],a[0][1])}}function rg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof J3=="function"?J3(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(i){return new Promise(function(o,l){i=t[a](i),s(o,l,i.done,i.value)})}}function s(a,i,o,l){Promise.resolve(l).then(function(A){a({value:A,done:o})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mY(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:eL(n)}function eL(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function pY(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function X3(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const s=[];let a=!0;for(;r<n&&t[r].role==="model";)s.push(t[r]),a&&!eL(t[r])&&(a=!1),r++;a?e.push(...s):e.pop()}return e}class gY{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new xY(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class xY{constructor(e,n,r,s={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),pY(a)}async sendMessage(e){var n;await this.sendPromise;const r=ki(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,i,o;const l=await s,A=(i=(a=l.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content,d=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];d!=null&&(p=(o=d.slice(h))!==null&&o!==void 0?o:[]);const g=A?[A]:[];this.recordHistory(r,g,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const r=ki(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,r)}getHistory(e=!1){const n=e?X3(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,s;return U0(this,arguments,function*(){var i,o,l,A;const d=[];try{for(var h=!0,p=rg(e),g;g=yield es(p.next()),i=g.done,!i;h=!0){A=g.value,h=!1;const w=A;if(mY(w)){const b=(s=(r=w.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content;b!==void 0&&d.push(b)}yield yield es(w)}}catch(w){o={error:w}}finally{try{!h&&!i&&(l=p.return)&&(yield es(l.call(p)))}finally{if(o)throw o.error}}this.recordHistory(n,d)})}recordHistory(e,n,r){let s=[];n.length>0&&n.every(a=>a.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...X3(r)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class by extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,by.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vY(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const s=x(t,["pageToken"]);return e!==void 0&&s!=null&&v(e,["_query","pageToken"],s),n}function yY(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],vY(n,e)),e}function wY(t){const e={},n=x(t,["details"]);n!=null&&v(e,["details"],n);const r=x(t,["message"]);r!=null&&v(e,["message"],r);const s=x(t,["code"]);return s!=null&&v(e,["code"],s),e}function bY(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const s=x(t,["mimeType"]);s!=null&&v(e,["mimeType"],s);const a=x(t,["sizeBytes"]);a!=null&&v(e,["sizeBytes"],a);const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["expirationTime"]);o!=null&&v(e,["expirationTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const A=x(t,["sha256Hash"]);A!=null&&v(e,["sha256Hash"],A);const d=x(t,["uri"]);d!=null&&v(e,["uri"],d);const h=x(t,["downloadUri"]);h!=null&&v(e,["downloadUri"],h);const p=x(t,["state"]);p!=null&&v(e,["state"],p);const g=x(t,["source"]);g!=null&&v(e,["source"],g);const w=x(t,["videoMetadata"]);w!=null&&v(e,["videoMetadata"],w);const b=x(t,["error"]);return b!=null&&v(e,["error"],wY(b)),e}function CY(t){const e={},n=x(t,["file"]);n!=null&&v(e,["file"],bY(n));const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function EY(t){const e={},n=x(t,["name"]);n!=null&&v(e,["_url","file"],zU(n));const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function _Y(t){const e={},n=x(t,["name"]);n!=null&&v(e,["_url","file"],zU(n));const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function SY(t){const e={},n=x(t,["details"]);n!=null&&v(e,["details"],n);const r=x(t,["message"]);r!=null&&v(e,["message"],r);const s=x(t,["code"]);return s!=null&&v(e,["code"],s),e}function UE(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const s=x(t,["mimeType"]);s!=null&&v(e,["mimeType"],s);const a=x(t,["sizeBytes"]);a!=null&&v(e,["sizeBytes"],a);const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["expirationTime"]);o!=null&&v(e,["expirationTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const A=x(t,["sha256Hash"]);A!=null&&v(e,["sha256Hash"],A);const d=x(t,["uri"]);d!=null&&v(e,["uri"],d);const h=x(t,["downloadUri"]);h!=null&&v(e,["downloadUri"],h);const p=x(t,["state"]);p!=null&&v(e,["state"],p);const g=x(t,["source"]);g!=null&&v(e,["source"],g);const w=x(t,["videoMetadata"]);w!=null&&v(e,["videoMetadata"],w);const b=x(t,["error"]);return b!=null&&v(e,["error"],SY(b)),e}function TY(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const s=x(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>UE(i))),v(e,["files"],a)}return e}function BY(t){const e={},n=x(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function NY(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kY extends uh{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ax(eh.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>UE(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=yY(e);return a=tn("files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(A=>{const d=A;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const A=TY(l),d=new Wq;return Object.assign(d,A),d})}}async createInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=CY(e);return a=tn("upload/v1beta/files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const A=BY(l),d=new $q;return Object.assign(d,A),d})}}async get(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=EY(e);return a=tn("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>UE(l))}}async delete(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=_Y(e);return a=tn("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(()=>{const l=NY(),A=new Yq;return Object.assign(A,l),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IY(t){const e={},n=x(t,["voiceName"]);return n!=null&&v(e,["voiceName"],n),e}function tL(t){const e={},n=x(t,["prebuiltVoiceConfig"]);return n!=null&&v(e,["prebuiltVoiceConfig"],IY(n)),e}function FY(t){const e={},n=x(t,["speaker"]);n!=null&&v(e,["speaker"],n);const r=x(t,["voiceConfig"]);return r!=null&&v(e,["voiceConfig"],tL(r)),e}function RY(t){const e={},n=x(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>FY(s))),v(e,["speakerVoiceConfigs"],r)}return e}function DY(t){const e={},n=x(t,["voiceConfig"]);n!=null&&v(e,["voiceConfig"],tL(n));const r=x(t,["multiSpeakerVoiceConfig"]);r!=null&&v(e,["multiSpeakerVoiceConfig"],RY(r));const s=x(t,["languageCode"]);return s!=null&&v(e,["languageCode"],s),e}function UY(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function LY(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function MY(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function PY(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],UY(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],LY(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],MY(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function jY(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>PY(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function OY(t){const e={},n=x(t,["behavior"]);n!=null&&v(e,["behavior"],n);const r=x(t,["description"]);r!=null&&v(e,["description"],r);const s=x(t,["name"]);s!=null&&v(e,["name"],s);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function QY(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function HY(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],QY(n)),e}function VY(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function GY(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],VY(n)),e}function zY(){return{}}function KY(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(A=>OY(A))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(t,["googleSearch"]);r!=null&&v(e,["googleSearch"],HY(r));const s=x(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],GY(s)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],zY());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function qY(t){const e={},n=x(t,["handle"]);if(n!=null&&v(e,["handle"],n),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Z3(){return{}}function WY(t){const e={},n=x(t,["disabled"]);n!=null&&v(e,["disabled"],n);const r=x(t,["startOfSpeechSensitivity"]);r!=null&&v(e,["startOfSpeechSensitivity"],r);const s=x(t,["endOfSpeechSensitivity"]);s!=null&&v(e,["endOfSpeechSensitivity"],s);const a=x(t,["prefixPaddingMs"]);a!=null&&v(e,["prefixPaddingMs"],a);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function $Y(t){const e={},n=x(t,["automaticActivityDetection"]);n!=null&&v(e,["automaticActivityDetection"],WY(n));const r=x(t,["activityHandling"]);r!=null&&v(e,["activityHandling"],r);const s=x(t,["turnCoverage"]);return s!=null&&v(e,["turnCoverage"],s),e}function YY(t){const e={},n=x(t,["targetTokens"]);return n!=null&&v(e,["targetTokens"],n),e}function JY(t){const e={},n=x(t,["triggerTokens"]);n!=null&&v(e,["triggerTokens"],n);const r=x(t,["slidingWindow"]);return r!=null&&v(e,["slidingWindow"],YY(r)),e}function XY(t){const e={},n=x(t,["proactiveAudio"]);return n!=null&&v(e,["proactiveAudio"],n),e}function ZY(t,e){const n={},r=x(t,["generationConfig"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig"],r);const s=x(t,["responseModalities"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","responseModalities"],s);const a=x(t,["temperature"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","temperature"],a);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const A=x(t,["mediaResolution"]);e!==void 0&&A!=null&&v(e,["setup","generationConfig","mediaResolution"],A);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],DY(j5(h)));const p=x(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],p);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],jY(ki(g)));const w=x(t,["tools"]);if(e!==void 0&&w!=null){let D=wm(w);Array.isArray(D)&&(D=D.map(P=>KY(ym(P)))),v(e,["setup","tools"],D)}const b=x(t,["sessionResumption"]);e!==void 0&&b!=null&&v(e,["setup","sessionResumption"],qY(b));const E=x(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&v(e,["setup","inputAudioTranscription"],Z3());const B=x(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&v(e,["setup","outputAudioTranscription"],Z3());const I=x(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&v(e,["setup","realtimeInputConfig"],$Y(I));const k=x(t,["contextWindowCompression"]);e!==void 0&&k!=null&&v(e,["setup","contextWindowCompression"],JY(k));const F=x(t,["proactivity"]);return e!==void 0&&F!=null&&v(e,["setup","proactivity"],XY(F)),n}function eJ(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["setup","model"],Pr(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],ZY(s,n)),n}function tJ(){return{}}function nJ(){return{}}function rJ(t){const e={},n=x(t,["media"]);n!=null&&v(e,["mediaChunks"],jU(n));const r=x(t,["audio"]);r!=null&&v(e,["audio"],QU(r));const s=x(t,["audioStreamEnd"]);s!=null&&v(e,["audioStreamEnd"],s);const a=x(t,["video"]);a!=null&&v(e,["video"],OU(a));const i=x(t,["text"]);return i!=null&&v(e,["text"],i),x(t,["activityStart"])!=null&&v(e,["activityStart"],tJ()),x(t,["activityEnd"])!=null&&v(e,["activityEnd"],nJ()),e}function nL(t){const e={},n=x(t,["text"]);n!=null&&v(e,["text"],n);const r=x(t,["weight"]);return r!=null&&v(e,["weight"],r),e}function sJ(t){const e={},n=x(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>nL(s))),v(e,["weightedPrompts"],r)}return e}function rL(t){const e={},n=x(t,["temperature"]);n!=null&&v(e,["temperature"],n);const r=x(t,["topK"]);r!=null&&v(e,["topK"],r);const s=x(t,["seed"]);s!=null&&v(e,["seed"],s);const a=x(t,["guidance"]);a!=null&&v(e,["guidance"],a);const i=x(t,["bpm"]);i!=null&&v(e,["bpm"],i);const o=x(t,["density"]);o!=null&&v(e,["density"],o);const l=x(t,["brightness"]);l!=null&&v(e,["brightness"],l);const A=x(t,["scale"]);A!=null&&v(e,["scale"],A);const d=x(t,["muteBass"]);d!=null&&v(e,["muteBass"],d);const h=x(t,["muteDrums"]);h!=null&&v(e,["muteDrums"],h);const p=x(t,["onlyBassAndDrums"]);return p!=null&&v(e,["onlyBassAndDrums"],p),e}function aJ(t){const e={},n=x(t,["musicGenerationConfig"]);return n!=null&&v(e,["musicGenerationConfig"],rL(n)),e}function sL(t){const e={},n=x(t,["model"]);return n!=null&&v(e,["model"],n),e}function aL(t){const e={},n=x(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>nL(s))),v(e,["weightedPrompts"],r)}return e}function LE(t){const e={},n=x(t,["setup"]);n!=null&&v(e,["setup"],sL(n));const r=x(t,["clientContent"]);r!=null&&v(e,["clientContent"],aL(r));const s=x(t,["musicGenerationConfig"]);s!=null&&v(e,["musicGenerationConfig"],rL(s));const a=x(t,["playbackControl"]);return a!=null&&v(e,["playbackControl"],a),e}function iJ(t){const e={},n=x(t,["voiceName"]);return n!=null&&v(e,["voiceName"],n),e}function oJ(t){const e={},n=x(t,["prebuiltVoiceConfig"]);return n!=null&&v(e,["prebuiltVoiceConfig"],iJ(n)),e}function lJ(t){const e={},n=x(t,["voiceConfig"]);if(n!=null&&v(e,["voiceConfig"],oJ(n)),x(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function cJ(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function AJ(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["data"]);r!=null&&v(e,["data"],r);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function uJ(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function dJ(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],cJ(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],AJ(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],uJ(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function fJ(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>dJ(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function hJ(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=x(t,["description"]);n!=null&&v(e,["description"],n);const r=x(t,["name"]);r!=null&&v(e,["name"],r);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const a=x(t,["parametersJsonSchema"]);a!=null&&v(e,["parametersJsonSchema"],a);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function mJ(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function pJ(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],mJ(n)),e}function gJ(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function xJ(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],gJ(n)),e}function vJ(){return{}}function yJ(t){const e={},n=x(t,["apiKeyString"]);return n!=null&&v(e,["apiKeyString"],n),e}function wJ(t){const e={},n=x(t,["apiKeyConfig"]);n!=null&&v(e,["apiKeyConfig"],yJ(n));const r=x(t,["authType"]);r!=null&&v(e,["authType"],r);const s=x(t,["googleServiceAccountConfig"]);s!=null&&v(e,["googleServiceAccountConfig"],s);const a=x(t,["httpBasicAuthConfig"]);a!=null&&v(e,["httpBasicAuthConfig"],a);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function bJ(t){const e={},n=x(t,["authConfig"]);return n!=null&&v(e,["authConfig"],wJ(n)),e}function CJ(){return{}}function EJ(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>hJ(p))),v(e,["functionDeclarations"],h)}const r=x(t,["retrieval"]);r!=null&&v(e,["retrieval"],r);const s=x(t,["googleSearch"]);s!=null&&v(e,["googleSearch"],pJ(s));const a=x(t,["googleSearchRetrieval"]);a!=null&&v(e,["googleSearchRetrieval"],xJ(a)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],vJ());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],bJ(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],CJ());const A=x(t,["codeExecution"]);A!=null&&v(e,["codeExecution"],A);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function _J(t){const e={},n=x(t,["handle"]);n!=null&&v(e,["handle"],n);const r=x(t,["transparent"]);return r!=null&&v(e,["transparent"],r),e}function ek(){return{}}function SJ(t){const e={},n=x(t,["disabled"]);n!=null&&v(e,["disabled"],n);const r=x(t,["startOfSpeechSensitivity"]);r!=null&&v(e,["startOfSpeechSensitivity"],r);const s=x(t,["endOfSpeechSensitivity"]);s!=null&&v(e,["endOfSpeechSensitivity"],s);const a=x(t,["prefixPaddingMs"]);a!=null&&v(e,["prefixPaddingMs"],a);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function TJ(t){const e={},n=x(t,["automaticActivityDetection"]);n!=null&&v(e,["automaticActivityDetection"],SJ(n));const r=x(t,["activityHandling"]);r!=null&&v(e,["activityHandling"],r);const s=x(t,["turnCoverage"]);return s!=null&&v(e,["turnCoverage"],s),e}function BJ(t){const e={},n=x(t,["targetTokens"]);return n!=null&&v(e,["targetTokens"],n),e}function NJ(t){const e={},n=x(t,["triggerTokens"]);n!=null&&v(e,["triggerTokens"],n);const r=x(t,["slidingWindow"]);return r!=null&&v(e,["slidingWindow"],BJ(r)),e}function kJ(t){const e={},n=x(t,["proactiveAudio"]);return n!=null&&v(e,["proactiveAudio"],n),e}function IJ(t,e){const n={},r=x(t,["generationConfig"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig"],r);const s=x(t,["responseModalities"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","responseModalities"],s);const a=x(t,["temperature"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","temperature"],a);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const A=x(t,["mediaResolution"]);e!==void 0&&A!=null&&v(e,["setup","generationConfig","mediaResolution"],A);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],lJ(j5(h)));const p=x(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],p);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],fJ(ki(g)));const w=x(t,["tools"]);if(e!==void 0&&w!=null){let D=wm(w);Array.isArray(D)&&(D=D.map(P=>EJ(ym(P)))),v(e,["setup","tools"],D)}const b=x(t,["sessionResumption"]);e!==void 0&&b!=null&&v(e,["setup","sessionResumption"],_J(b));const E=x(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&v(e,["setup","inputAudioTranscription"],ek());const B=x(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&v(e,["setup","outputAudioTranscription"],ek());const I=x(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&v(e,["setup","realtimeInputConfig"],TJ(I));const k=x(t,["contextWindowCompression"]);e!==void 0&&k!=null&&v(e,["setup","contextWindowCompression"],NJ(k));const F=x(t,["proactivity"]);return e!==void 0&&F!=null&&v(e,["setup","proactivity"],kJ(F)),n}function FJ(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["setup","model"],Pr(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],IJ(s,n)),n}function RJ(){return{}}function DJ(){return{}}function UJ(t){const e={},n=x(t,["media"]);n!=null&&v(e,["mediaChunks"],jU(n));const r=x(t,["audio"]);r!=null&&v(e,["audio"],QU(r));const s=x(t,["audioStreamEnd"]);s!=null&&v(e,["audioStreamEnd"],s);const a=x(t,["video"]);a!=null&&v(e,["video"],OU(a));const i=x(t,["text"]);return i!=null&&v(e,["text"],i),x(t,["activityStart"])!=null&&v(e,["activityStart"],RJ()),x(t,["activityEnd"])!=null&&v(e,["activityEnd"],DJ()),e}function LJ(){return{}}function MJ(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function PJ(t){const e={},n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function jJ(t){const e={},n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function OJ(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],MJ(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],PJ(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],jJ(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function QJ(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>OJ(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function tk(t){const e={},n=x(t,["text"]);n!=null&&v(e,["text"],n);const r=x(t,["finished"]);return r!=null&&v(e,["finished"],r),e}function HJ(t){const e={},n=x(t,["retrievedUrl"]);n!=null&&v(e,["retrievedUrl"],n);const r=x(t,["urlRetrievalStatus"]);return r!=null&&v(e,["urlRetrievalStatus"],r),e}function VJ(t){const e={},n=x(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>HJ(s))),v(e,["urlMetadata"],r)}return e}function GJ(t){const e={},n=x(t,["modelTurn"]);n!=null&&v(e,["modelTurn"],QJ(n));const r=x(t,["turnComplete"]);r!=null&&v(e,["turnComplete"],r);const s=x(t,["interrupted"]);s!=null&&v(e,["interrupted"],s);const a=x(t,["groundingMetadata"]);a!=null&&v(e,["groundingMetadata"],a);const i=x(t,["generationComplete"]);i!=null&&v(e,["generationComplete"],i);const o=x(t,["inputTranscription"]);o!=null&&v(e,["inputTranscription"],tk(o));const l=x(t,["outputTranscription"]);l!=null&&v(e,["outputTranscription"],tk(l));const A=x(t,["urlContextMetadata"]);return A!=null&&v(e,["urlContextMetadata"],VJ(A)),e}function zJ(t){const e={},n=x(t,["id"]);n!=null&&v(e,["id"],n);const r=x(t,["args"]);r!=null&&v(e,["args"],r);const s=x(t,["name"]);return s!=null&&v(e,["name"],s),e}function KJ(t){const e={},n=x(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>zJ(s))),v(e,["functionCalls"],r)}return e}function qJ(t){const e={},n=x(t,["ids"]);return n!=null&&v(e,["ids"],n),e}function k1(t){const e={},n=x(t,["modality"]);n!=null&&v(e,["modality"],n);const r=x(t,["tokenCount"]);return r!=null&&v(e,["tokenCount"],r),e}function WJ(t){const e={},n=x(t,["promptTokenCount"]);n!=null&&v(e,["promptTokenCount"],n);const r=x(t,["cachedContentTokenCount"]);r!=null&&v(e,["cachedContentTokenCount"],r);const s=x(t,["responseTokenCount"]);s!=null&&v(e,["responseTokenCount"],s);const a=x(t,["toolUsePromptTokenCount"]);a!=null&&v(e,["toolUsePromptTokenCount"],a);const i=x(t,["thoughtsTokenCount"]);i!=null&&v(e,["thoughtsTokenCount"],i);const o=x(t,["totalTokenCount"]);o!=null&&v(e,["totalTokenCount"],o);const l=x(t,["promptTokensDetails"]);if(l!=null){let p=l;Array.isArray(p)&&(p=p.map(g=>k1(g))),v(e,["promptTokensDetails"],p)}const A=x(t,["cacheTokensDetails"]);if(A!=null){let p=A;Array.isArray(p)&&(p=p.map(g=>k1(g))),v(e,["cacheTokensDetails"],p)}const d=x(t,["responseTokensDetails"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(g=>k1(g))),v(e,["responseTokensDetails"],p)}const h=x(t,["toolUsePromptTokensDetails"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(g=>k1(g))),v(e,["toolUsePromptTokensDetails"],p)}return e}function $J(t){const e={},n=x(t,["timeLeft"]);return n!=null&&v(e,["timeLeft"],n),e}function YJ(t){const e={},n=x(t,["newHandle"]);n!=null&&v(e,["newHandle"],n);const r=x(t,["resumable"]);r!=null&&v(e,["resumable"],r);const s=x(t,["lastConsumedClientMessageIndex"]);return s!=null&&v(e,["lastConsumedClientMessageIndex"],s),e}function JJ(t){const e={};x(t,["setupComplete"])!=null&&v(e,["setupComplete"],LJ());const r=x(t,["serverContent"]);r!=null&&v(e,["serverContent"],GJ(r));const s=x(t,["toolCall"]);s!=null&&v(e,["toolCall"],KJ(s));const a=x(t,["toolCallCancellation"]);a!=null&&v(e,["toolCallCancellation"],qJ(a));const i=x(t,["usageMetadata"]);i!=null&&v(e,["usageMetadata"],WJ(i));const o=x(t,["goAway"]);o!=null&&v(e,["goAway"],$J(o));const l=x(t,["sessionResumptionUpdate"]);return l!=null&&v(e,["sessionResumptionUpdate"],YJ(l)),e}function XJ(){return{}}function ZJ(t){const e={},n=x(t,["text"]);n!=null&&v(e,["text"],n);const r=x(t,["weight"]);return r!=null&&v(e,["weight"],r),e}function eX(t){const e={},n=x(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>ZJ(s))),v(e,["weightedPrompts"],r)}return e}function tX(t){const e={},n=x(t,["temperature"]);n!=null&&v(e,["temperature"],n);const r=x(t,["topK"]);r!=null&&v(e,["topK"],r);const s=x(t,["seed"]);s!=null&&v(e,["seed"],s);const a=x(t,["guidance"]);a!=null&&v(e,["guidance"],a);const i=x(t,["bpm"]);i!=null&&v(e,["bpm"],i);const o=x(t,["density"]);o!=null&&v(e,["density"],o);const l=x(t,["brightness"]);l!=null&&v(e,["brightness"],l);const A=x(t,["scale"]);A!=null&&v(e,["scale"],A);const d=x(t,["muteBass"]);d!=null&&v(e,["muteBass"],d);const h=x(t,["muteDrums"]);h!=null&&v(e,["muteDrums"],h);const p=x(t,["onlyBassAndDrums"]);return p!=null&&v(e,["onlyBassAndDrums"],p),e}function nX(t){const e={},n=x(t,["clientContent"]);n!=null&&v(e,["clientContent"],eX(n));const r=x(t,["musicGenerationConfig"]);return r!=null&&v(e,["musicGenerationConfig"],tX(r)),e}function rX(t){const e={},n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);r!=null&&v(e,["mimeType"],r);const s=x(t,["sourceMetadata"]);return s!=null&&v(e,["sourceMetadata"],nX(s)),e}function sX(t){const e={},n=x(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>rX(s))),v(e,["audioChunks"],r)}return e}function aX(t){const e={},n=x(t,["text"]);n!=null&&v(e,["text"],n);const r=x(t,["filteredReason"]);return r!=null&&v(e,["filteredReason"],r),e}function iX(t){const e={};x(t,["setupComplete"])!=null&&v(e,["setupComplete"],XJ());const r=x(t,["serverContent"]);r!=null&&v(e,["serverContent"],sX(r));const s=x(t,["filteredPrompt"]);return s!=null&&v(e,["filteredPrompt"],aX(s)),e}function oX(t){const e={},n=x(t,["sessionId"]);return n!=null&&v(e,["sessionId"],n),e}function lX(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function cX(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["data"]);r!=null&&v(e,["data"],r);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function AX(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function uX(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],lX(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],cX(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],AX(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function dX(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>uX(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function nk(t){const e={},n=x(t,["text"]);n!=null&&v(e,["text"],n);const r=x(t,["finished"]);return r!=null&&v(e,["finished"],r),e}function fX(t){const e={},n=x(t,["modelTurn"]);n!=null&&v(e,["modelTurn"],dX(n));const r=x(t,["turnComplete"]);r!=null&&v(e,["turnComplete"],r);const s=x(t,["interrupted"]);s!=null&&v(e,["interrupted"],s);const a=x(t,["groundingMetadata"]);a!=null&&v(e,["groundingMetadata"],a);const i=x(t,["generationComplete"]);i!=null&&v(e,["generationComplete"],i);const o=x(t,["inputTranscription"]);o!=null&&v(e,["inputTranscription"],nk(o));const l=x(t,["outputTranscription"]);return l!=null&&v(e,["outputTranscription"],nk(l)),e}function hX(t){const e={},n=x(t,["args"]);n!=null&&v(e,["args"],n);const r=x(t,["name"]);return r!=null&&v(e,["name"],r),e}function mX(t){const e={},n=x(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>hX(s))),v(e,["functionCalls"],r)}return e}function pX(t){const e={},n=x(t,["ids"]);return n!=null&&v(e,["ids"],n),e}function I1(t){const e={},n=x(t,["modality"]);n!=null&&v(e,["modality"],n);const r=x(t,["tokenCount"]);return r!=null&&v(e,["tokenCount"],r),e}function gX(t){const e={},n=x(t,["promptTokenCount"]);n!=null&&v(e,["promptTokenCount"],n);const r=x(t,["cachedContentTokenCount"]);r!=null&&v(e,["cachedContentTokenCount"],r);const s=x(t,["candidatesTokenCount"]);s!=null&&v(e,["responseTokenCount"],s);const a=x(t,["toolUsePromptTokenCount"]);a!=null&&v(e,["toolUsePromptTokenCount"],a);const i=x(t,["thoughtsTokenCount"]);i!=null&&v(e,["thoughtsTokenCount"],i);const o=x(t,["totalTokenCount"]);o!=null&&v(e,["totalTokenCount"],o);const l=x(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(w=>I1(w))),v(e,["promptTokensDetails"],g)}const A=x(t,["cacheTokensDetails"]);if(A!=null){let g=A;Array.isArray(g)&&(g=g.map(w=>I1(w))),v(e,["cacheTokensDetails"],g)}const d=x(t,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(w=>I1(w))),v(e,["responseTokensDetails"],g)}const h=x(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(w=>I1(w))),v(e,["toolUsePromptTokensDetails"],g)}const p=x(t,["trafficType"]);return p!=null&&v(e,["trafficType"],p),e}function xX(t){const e={},n=x(t,["timeLeft"]);return n!=null&&v(e,["timeLeft"],n),e}function vX(t){const e={},n=x(t,["newHandle"]);n!=null&&v(e,["newHandle"],n);const r=x(t,["resumable"]);r!=null&&v(e,["resumable"],r);const s=x(t,["lastConsumedClientMessageIndex"]);return s!=null&&v(e,["lastConsumedClientMessageIndex"],s),e}function yX(t){const e={},n=x(t,["setupComplete"]);n!=null&&v(e,["setupComplete"],oX(n));const r=x(t,["serverContent"]);r!=null&&v(e,["serverContent"],fX(r));const s=x(t,["toolCall"]);s!=null&&v(e,["toolCall"],mX(s));const a=x(t,["toolCallCancellation"]);a!=null&&v(e,["toolCallCancellation"],pX(a));const i=x(t,["usageMetadata"]);i!=null&&v(e,["usageMetadata"],gX(i));const o=x(t,["goAway"]);o!=null&&v(e,["goAway"],xX(o));const l=x(t,["sessionResumptionUpdate"]);return l!=null&&v(e,["sessionResumptionUpdate"],vX(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wX(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function bX(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function CX(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function EX(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],wX(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],bX(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],CX(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Cy(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>EX(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function _X(t){const e={},n=x(t,["anyOf"]);n!=null&&v(e,["anyOf"],n);const r=x(t,["default"]);r!=null&&v(e,["default"],r);const s=x(t,["description"]);s!=null&&v(e,["description"],s);const a=x(t,["enum"]);a!=null&&v(e,["enum"],a);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const A=x(t,["maxItems"]);A!=null&&v(e,["maxItems"],A);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const p=x(t,["maximum"]);p!=null&&v(e,["maximum"],p);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const w=x(t,["minLength"]);w!=null&&v(e,["minLength"],w);const b=x(t,["minProperties"]);b!=null&&v(e,["minProperties"],b);const E=x(t,["minimum"]);E!=null&&v(e,["minimum"],E);const B=x(t,["nullable"]);B!=null&&v(e,["nullable"],B);const I=x(t,["pattern"]);I!=null&&v(e,["pattern"],I);const k=x(t,["properties"]);k!=null&&v(e,["properties"],k);const F=x(t,["propertyOrdering"]);F!=null&&v(e,["propertyOrdering"],F);const D=x(t,["required"]);D!=null&&v(e,["required"],D);const P=x(t,["title"]);P!=null&&v(e,["title"],P);const S=x(t,["type"]);return S!=null&&v(e,["type"],S),e}function SX(t){const e={};if(x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=x(t,["category"]);n!=null&&v(e,["category"],n);const r=x(t,["threshold"]);return r!=null&&v(e,["threshold"],r),e}function TX(t){const e={},n=x(t,["behavior"]);n!=null&&v(e,["behavior"],n);const r=x(t,["description"]);r!=null&&v(e,["description"],r);const s=x(t,["name"]);s!=null&&v(e,["name"],s);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function BX(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function NX(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],BX(n)),e}function kX(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function IX(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],kX(n)),e}function FX(){return{}}function RX(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(A=>TX(A))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(t,["googleSearch"]);r!=null&&v(e,["googleSearch"],NX(r));const s=x(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],IX(s)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],FX());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function DX(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["allowedFunctionNames"]);return r!=null&&v(e,["allowedFunctionNames"],r),e}function UX(t){const e={},n=x(t,["latitude"]);n!=null&&v(e,["latitude"],n);const r=x(t,["longitude"]);return r!=null&&v(e,["longitude"],r),e}function LX(t){const e={},n=x(t,["latLng"]);n!=null&&v(e,["latLng"],UX(n));const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function MX(t){const e={},n=x(t,["functionCallingConfig"]);n!=null&&v(e,["functionCallingConfig"],DX(n));const r=x(t,["retrievalConfig"]);return r!=null&&v(e,["retrievalConfig"],LX(r)),e}function PX(t){const e={},n=x(t,["voiceName"]);return n!=null&&v(e,["voiceName"],n),e}function iL(t){const e={},n=x(t,["prebuiltVoiceConfig"]);return n!=null&&v(e,["prebuiltVoiceConfig"],PX(n)),e}function jX(t){const e={},n=x(t,["speaker"]);n!=null&&v(e,["speaker"],n);const r=x(t,["voiceConfig"]);return r!=null&&v(e,["voiceConfig"],iL(r)),e}function OX(t){const e={},n=x(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>jX(s))),v(e,["speakerVoiceConfigs"],r)}return e}function QX(t){const e={},n=x(t,["voiceConfig"]);n!=null&&v(e,["voiceConfig"],iL(n));const r=x(t,["multiSpeakerVoiceConfig"]);r!=null&&v(e,["multiSpeakerVoiceConfig"],OX(r));const s=x(t,["languageCode"]);return s!=null&&v(e,["languageCode"],s),e}function HX(t){const e={},n=x(t,["includeThoughts"]);n!=null&&v(e,["includeThoughts"],n);const r=x(t,["thinkingBudget"]);return r!=null&&v(e,["thinkingBudget"],r),e}function VX(t,e,n){const r={},s=x(e,["systemInstruction"]);n!==void 0&&s!=null&&v(n,["systemInstruction"],Cy(ki(s)));const a=x(e,["temperature"]);a!=null&&v(r,["temperature"],a);const i=x(e,["topP"]);i!=null&&v(r,["topP"],i);const o=x(e,["topK"]);o!=null&&v(r,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(r,["candidateCount"],l);const A=x(e,["maxOutputTokens"]);A!=null&&v(r,["maxOutputTokens"],A);const d=x(e,["stopSequences"]);d!=null&&v(r,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(r,["responseLogprobs"],h);const p=x(e,["logprobs"]);p!=null&&v(r,["logprobs"],p);const g=x(e,["presencePenalty"]);g!=null&&v(r,["presencePenalty"],g);const w=x(e,["frequencyPenalty"]);w!=null&&v(r,["frequencyPenalty"],w);const b=x(e,["seed"]);b!=null&&v(r,["seed"],b);const E=x(e,["responseMimeType"]);E!=null&&v(r,["responseMimeType"],E);const B=x(e,["responseSchema"]);B!=null&&v(r,["responseSchema"],_X(M5(B)));const I=x(e,["responseJsonSchema"]);if(I!=null&&v(r,["responseJsonSchema"],I),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=x(e,["safetySettings"]);if(n!==void 0&&k!=null){let M=k;Array.isArray(M)&&(M=M.map(U=>SX(U))),v(n,["safetySettings"],M)}const F=x(e,["tools"]);if(n!==void 0&&F!=null){let M=wm(F);Array.isArray(M)&&(M=M.map(U=>RX(ym(U)))),v(n,["tools"],M)}const D=x(e,["toolConfig"]);if(n!==void 0&&D!=null&&v(n,["toolConfig"],MX(D)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=x(e,["cachedContent"]);n!==void 0&&P!=null&&v(n,["cachedContent"],xu(t,P));const S=x(e,["responseModalities"]);S!=null&&v(r,["responseModalities"],S);const N=x(e,["mediaResolution"]);N!=null&&v(r,["mediaResolution"],N);const T=x(e,["speechConfig"]);if(T!=null&&v(r,["speechConfig"],QX(P5(T))),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=x(e,["thinkingConfig"]);return V!=null&&v(r,["thinkingConfig"],HX(V)),r}function rk(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Pr(t,r));const s=x(e,["contents"]);if(s!=null){let i=Sl(s);Array.isArray(i)&&(i=i.map(o=>Cy(o))),v(n,["contents"],i)}const a=x(e,["config"]);return a!=null&&v(n,["generationConfig"],VX(t,a,n)),n}function GX(t,e){const n={},r=x(t,["taskType"]);e!==void 0&&r!=null&&v(e,["requests[]","taskType"],r);const s=x(t,["title"]);e!==void 0&&s!=null&&v(e,["requests[]","title"],s);const a=x(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&v(e,["requests[]","outputDimensionality"],a),x(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function zX(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Pr(t,r));const s=x(e,["contents"]);s!=null&&v(n,["requests[]","content"],VU(t,s));const a=x(e,["config"]);a!=null&&v(n,["config"],GX(a,n));const i=x(e,["model"]);return i!==void 0&&v(n,["requests[]","model"],Pr(t,i)),n}function KX(t,e){const n={};if(x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=x(t,["numberOfImages"]);e!==void 0&&r!=null&&v(e,["parameters","sampleCount"],r);const s=x(t,["aspectRatio"]);e!==void 0&&s!=null&&v(e,["parameters","aspectRatio"],s);const a=x(t,["guidanceScale"]);if(e!==void 0&&a!=null&&v(e,["parameters","guidanceScale"],a),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=x(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&v(e,["parameters","safetySetting"],i);const o=x(t,["personGeneration"]);e!==void 0&&o!=null&&v(e,["parameters","personGeneration"],o);const l=x(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&v(e,["parameters","includeSafetyAttributes"],l);const A=x(t,["includeRaiReason"]);e!==void 0&&A!=null&&v(e,["parameters","includeRaiReason"],A);const d=x(t,["language"]);e!==void 0&&d!=null&&v(e,["parameters","language"],d);const h=x(t,["outputMimeType"]);e!==void 0&&h!=null&&v(e,["parameters","outputOptions","mimeType"],h);const p=x(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&v(e,["parameters","outputOptions","compressionQuality"],p),x(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(x(t,["imageSize"])!==void 0)throw new Error("imageSize parameter is not supported in Gemini API.");if(x(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function qX(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Pr(t,r));const s=x(e,["prompt"]);s!=null&&v(n,["instances[0]","prompt"],s);const a=x(e,["config"]);return a!=null&&v(n,["config"],KX(a,n)),n}function WX(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","name"],Pr(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function $X(t,e,n){const r={},s=x(e,["pageSize"]);n!==void 0&&s!=null&&v(n,["_query","pageSize"],s);const a=x(e,["pageToken"]);n!==void 0&&a!=null&&v(n,["_query","pageToken"],a);const i=x(e,["filter"]);n!==void 0&&i!=null&&v(n,["_query","filter"],i);const o=x(e,["queryBase"]);return n!==void 0&&o!=null&&v(n,["_url","models_url"],KU(t,o)),r}function YX(t,e){const n={},r=x(e,["config"]);return r!=null&&v(n,["config"],$X(t,r,n)),n}function JX(t,e){const n={},r=x(t,["displayName"]);e!==void 0&&r!=null&&v(e,["displayName"],r);const s=x(t,["description"]);e!==void 0&&s!=null&&v(e,["description"],s);const a=x(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&v(e,["defaultCheckpointId"],a),n}function XX(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","name"],Pr(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],JX(s,n)),n}function ZX(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","name"],Pr(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function eZ(t){const e={};if(x(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(x(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(x(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function tZ(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Pr(t,r));const s=x(e,["contents"]);if(s!=null){let i=Sl(s);Array.isArray(i)&&(i=i.map(o=>Cy(o))),v(n,["contents"],i)}const a=x(e,["config"]);return a!=null&&v(n,["config"],eZ(a)),n}function nZ(t){const e={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=x(t,["imageBytes"]);n!=null&&v(e,["bytesBase64Encoded"],dh(n));const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function rZ(t,e){const n={},r=x(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&v(e,["parameters","sampleCount"],r),x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=x(t,["durationSeconds"]);if(e!==void 0&&s!=null&&v(e,["parameters","durationSeconds"],s),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=x(t,["aspectRatio"]);if(e!==void 0&&a!=null&&v(e,["parameters","aspectRatio"],a),x(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const i=x(t,["personGeneration"]);if(e!==void 0&&i!=null&&v(e,["parameters","personGeneration"],i),x(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const o=x(t,["negativePrompt"]);e!==void 0&&o!=null&&v(e,["parameters","negativePrompt"],o);const l=x(t,["enhancePrompt"]);if(e!==void 0&&l!=null&&v(e,["parameters","enhancePrompt"],l),x(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(x(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(x(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function sZ(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Pr(t,r));const s=x(e,["prompt"]);s!=null&&v(n,["instances[0]","prompt"],s);const a=x(e,["image"]);if(a!=null&&v(n,["instances[0]","image"],nZ(a)),x(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const i=x(e,["config"]);return i!=null&&v(n,["config"],rZ(i,n)),n}function aZ(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function iZ(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["data"]);r!=null&&v(e,["data"],r);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function oZ(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function lZ(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],aZ(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],iZ(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],oZ(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Cm(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>lZ(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function cZ(t){const e={},n=x(t,["anyOf"]);n!=null&&v(e,["anyOf"],n);const r=x(t,["default"]);r!=null&&v(e,["default"],r);const s=x(t,["description"]);s!=null&&v(e,["description"],s);const a=x(t,["enum"]);a!=null&&v(e,["enum"],a);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const A=x(t,["maxItems"]);A!=null&&v(e,["maxItems"],A);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const p=x(t,["maximum"]);p!=null&&v(e,["maximum"],p);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const w=x(t,["minLength"]);w!=null&&v(e,["minLength"],w);const b=x(t,["minProperties"]);b!=null&&v(e,["minProperties"],b);const E=x(t,["minimum"]);E!=null&&v(e,["minimum"],E);const B=x(t,["nullable"]);B!=null&&v(e,["nullable"],B);const I=x(t,["pattern"]);I!=null&&v(e,["pattern"],I);const k=x(t,["properties"]);k!=null&&v(e,["properties"],k);const F=x(t,["propertyOrdering"]);F!=null&&v(e,["propertyOrdering"],F);const D=x(t,["required"]);D!=null&&v(e,["required"],D);const P=x(t,["title"]);P!=null&&v(e,["title"],P);const S=x(t,["type"]);return S!=null&&v(e,["type"],S),e}function AZ(t){const e={},n=x(t,["featureSelectionPreference"]);return n!=null&&v(e,["featureSelectionPreference"],n),e}function uZ(t){const e={},n=x(t,["method"]);n!=null&&v(e,["method"],n);const r=x(t,["category"]);r!=null&&v(e,["category"],r);const s=x(t,["threshold"]);return s!=null&&v(e,["threshold"],s),e}function dZ(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=x(t,["description"]);n!=null&&v(e,["description"],n);const r=x(t,["name"]);r!=null&&v(e,["name"],r);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const a=x(t,["parametersJsonSchema"]);a!=null&&v(e,["parametersJsonSchema"],a);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function fZ(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function hZ(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],fZ(n)),e}function mZ(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function pZ(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],mZ(n)),e}function gZ(){return{}}function xZ(t){const e={},n=x(t,["apiKeyString"]);return n!=null&&v(e,["apiKeyString"],n),e}function vZ(t){const e={},n=x(t,["apiKeyConfig"]);n!=null&&v(e,["apiKeyConfig"],xZ(n));const r=x(t,["authType"]);r!=null&&v(e,["authType"],r);const s=x(t,["googleServiceAccountConfig"]);s!=null&&v(e,["googleServiceAccountConfig"],s);const a=x(t,["httpBasicAuthConfig"]);a!=null&&v(e,["httpBasicAuthConfig"],a);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function yZ(t){const e={},n=x(t,["authConfig"]);return n!=null&&v(e,["authConfig"],vZ(n)),e}function wZ(){return{}}function oL(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>dZ(p))),v(e,["functionDeclarations"],h)}const r=x(t,["retrieval"]);r!=null&&v(e,["retrieval"],r);const s=x(t,["googleSearch"]);s!=null&&v(e,["googleSearch"],hZ(s));const a=x(t,["googleSearchRetrieval"]);a!=null&&v(e,["googleSearchRetrieval"],pZ(a)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],gZ());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],yZ(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],wZ());const A=x(t,["codeExecution"]);A!=null&&v(e,["codeExecution"],A);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function bZ(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["allowedFunctionNames"]);return r!=null&&v(e,["allowedFunctionNames"],r),e}function CZ(t){const e={},n=x(t,["latitude"]);n!=null&&v(e,["latitude"],n);const r=x(t,["longitude"]);return r!=null&&v(e,["longitude"],r),e}function EZ(t){const e={},n=x(t,["latLng"]);n!=null&&v(e,["latLng"],CZ(n));const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function _Z(t){const e={},n=x(t,["functionCallingConfig"]);n!=null&&v(e,["functionCallingConfig"],bZ(n));const r=x(t,["retrievalConfig"]);return r!=null&&v(e,["retrievalConfig"],EZ(r)),e}function SZ(t){const e={},n=x(t,["voiceName"]);return n!=null&&v(e,["voiceName"],n),e}function TZ(t){const e={},n=x(t,["prebuiltVoiceConfig"]);return n!=null&&v(e,["prebuiltVoiceConfig"],SZ(n)),e}function BZ(t){const e={},n=x(t,["voiceConfig"]);if(n!=null&&v(e,["voiceConfig"],TZ(n)),x(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function NZ(t){const e={},n=x(t,["includeThoughts"]);n!=null&&v(e,["includeThoughts"],n);const r=x(t,["thinkingBudget"]);return r!=null&&v(e,["thinkingBudget"],r),e}function kZ(t,e,n){const r={},s=x(e,["systemInstruction"]);n!==void 0&&s!=null&&v(n,["systemInstruction"],Cm(ki(s)));const a=x(e,["temperature"]);a!=null&&v(r,["temperature"],a);const i=x(e,["topP"]);i!=null&&v(r,["topP"],i);const o=x(e,["topK"]);o!=null&&v(r,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(r,["candidateCount"],l);const A=x(e,["maxOutputTokens"]);A!=null&&v(r,["maxOutputTokens"],A);const d=x(e,["stopSequences"]);d!=null&&v(r,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(r,["responseLogprobs"],h);const p=x(e,["logprobs"]);p!=null&&v(r,["logprobs"],p);const g=x(e,["presencePenalty"]);g!=null&&v(r,["presencePenalty"],g);const w=x(e,["frequencyPenalty"]);w!=null&&v(r,["frequencyPenalty"],w);const b=x(e,["seed"]);b!=null&&v(r,["seed"],b);const E=x(e,["responseMimeType"]);E!=null&&v(r,["responseMimeType"],E);const B=x(e,["responseSchema"]);B!=null&&v(r,["responseSchema"],cZ(M5(B)));const I=x(e,["responseJsonSchema"]);I!=null&&v(r,["responseJsonSchema"],I);const k=x(e,["routingConfig"]);k!=null&&v(r,["routingConfig"],k);const F=x(e,["modelSelectionConfig"]);F!=null&&v(r,["modelConfig"],AZ(F));const D=x(e,["safetySettings"]);if(n!==void 0&&D!=null){let ie=D;Array.isArray(ie)&&(ie=ie.map(K=>uZ(K))),v(n,["safetySettings"],ie)}const P=x(e,["tools"]);if(n!==void 0&&P!=null){let ie=wm(P);Array.isArray(ie)&&(ie=ie.map(K=>oL(ym(K)))),v(n,["tools"],ie)}const S=x(e,["toolConfig"]);n!==void 0&&S!=null&&v(n,["toolConfig"],_Z(S));const N=x(e,["labels"]);n!==void 0&&N!=null&&v(n,["labels"],N);const T=x(e,["cachedContent"]);n!==void 0&&T!=null&&v(n,["cachedContent"],xu(t,T));const V=x(e,["responseModalities"]);V!=null&&v(r,["responseModalities"],V);const M=x(e,["mediaResolution"]);M!=null&&v(r,["mediaResolution"],M);const U=x(e,["speechConfig"]);U!=null&&v(r,["speechConfig"],BZ(P5(U)));const O=x(e,["audioTimestamp"]);O!=null&&v(r,["audioTimestamp"],O);const G=x(e,["thinkingConfig"]);return G!=null&&v(r,["thinkingConfig"],NZ(G)),r}function sk(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Pr(t,r));const s=x(e,["contents"]);if(s!=null){let i=Sl(s);Array.isArray(i)&&(i=i.map(o=>Cm(o))),v(n,["contents"],i)}const a=x(e,["config"]);return a!=null&&v(n,["generationConfig"],kZ(t,a,n)),n}function IZ(t,e){const n={},r=x(t,["taskType"]);e!==void 0&&r!=null&&v(e,["instances[]","task_type"],r);const s=x(t,["title"]);e!==void 0&&s!=null&&v(e,["instances[]","title"],s);const a=x(t,["outputDimensionality"]);e!==void 0&&a!=null&&v(e,["parameters","outputDimensionality"],a);const i=x(t,["mimeType"]);e!==void 0&&i!=null&&v(e,["instances[]","mimeType"],i);const o=x(t,["autoTruncate"]);return e!==void 0&&o!=null&&v(e,["parameters","autoTruncate"],o),n}function FZ(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Pr(t,r));const s=x(e,["contents"]);s!=null&&v(n,["instances[]","content"],VU(t,s));const a=x(e,["config"]);return a!=null&&v(n,["config"],IZ(a,n)),n}function RZ(t,e){const n={},r=x(t,["outputGcsUri"]);e!==void 0&&r!=null&&v(e,["parameters","storageUri"],r);const s=x(t,["negativePrompt"]);e!==void 0&&s!=null&&v(e,["parameters","negativePrompt"],s);const a=x(t,["numberOfImages"]);e!==void 0&&a!=null&&v(e,["parameters","sampleCount"],a);const i=x(t,["aspectRatio"]);e!==void 0&&i!=null&&v(e,["parameters","aspectRatio"],i);const o=x(t,["guidanceScale"]);e!==void 0&&o!=null&&v(e,["parameters","guidanceScale"],o);const l=x(t,["seed"]);e!==void 0&&l!=null&&v(e,["parameters","seed"],l);const A=x(t,["safetyFilterLevel"]);e!==void 0&&A!=null&&v(e,["parameters","safetySetting"],A);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&v(e,["parameters","includeSafetyAttributes"],h);const p=x(t,["includeRaiReason"]);e!==void 0&&p!=null&&v(e,["parameters","includeRaiReason"],p);const g=x(t,["language"]);e!==void 0&&g!=null&&v(e,["parameters","language"],g);const w=x(t,["outputMimeType"]);e!==void 0&&w!=null&&v(e,["parameters","outputOptions","mimeType"],w);const b=x(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&v(e,["parameters","outputOptions","compressionQuality"],b);const E=x(t,["addWatermark"]);e!==void 0&&E!=null&&v(e,["parameters","addWatermark"],E);const B=x(t,["imageSize"]);e!==void 0&&B!=null&&v(e,["parameters","sampleImageSize"],B);const I=x(t,["enhancePrompt"]);return e!==void 0&&I!=null&&v(e,["parameters","enhancePrompt"],I),n}function DZ(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Pr(t,r));const s=x(e,["prompt"]);s!=null&&v(n,["instances[0]","prompt"],s);const a=x(e,["config"]);return a!=null&&v(n,["config"],RZ(a,n)),n}function Ey(t){const e={},n=x(t,["gcsUri"]);n!=null&&v(e,["gcsUri"],n);const r=x(t,["imageBytes"]);r!=null&&v(e,["bytesBase64Encoded"],dh(r));const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function UZ(t){const e={},n=x(t,["maskMode"]);n!=null&&v(e,["maskMode"],n);const r=x(t,["segmentationClasses"]);r!=null&&v(e,["maskClasses"],r);const s=x(t,["maskDilation"]);return s!=null&&v(e,["dilation"],s),e}function LZ(t){const e={},n=x(t,["controlType"]);n!=null&&v(e,["controlType"],n);const r=x(t,["enableControlImageComputation"]);return r!=null&&v(e,["computeControl"],r),e}function MZ(t){const e={},n=x(t,["styleDescription"]);return n!=null&&v(e,["styleDescription"],n),e}function PZ(t){const e={},n=x(t,["subjectType"]);n!=null&&v(e,["subjectType"],n);const r=x(t,["subjectDescription"]);return r!=null&&v(e,["subjectDescription"],r),e}function jZ(t){const e={},n=x(t,["referenceImage"]);n!=null&&v(e,["referenceImage"],Ey(n));const r=x(t,["referenceId"]);r!=null&&v(e,["referenceId"],r);const s=x(t,["referenceType"]);s!=null&&v(e,["referenceType"],s);const a=x(t,["maskImageConfig"]);a!=null&&v(e,["maskImageConfig"],UZ(a));const i=x(t,["controlImageConfig"]);i!=null&&v(e,["controlImageConfig"],LZ(i));const o=x(t,["styleImageConfig"]);o!=null&&v(e,["styleImageConfig"],MZ(o));const l=x(t,["subjectImageConfig"]);return l!=null&&v(e,["subjectImageConfig"],PZ(l)),e}function OZ(t,e){const n={},r=x(t,["outputGcsUri"]);e!==void 0&&r!=null&&v(e,["parameters","storageUri"],r);const s=x(t,["negativePrompt"]);e!==void 0&&s!=null&&v(e,["parameters","negativePrompt"],s);const a=x(t,["numberOfImages"]);e!==void 0&&a!=null&&v(e,["parameters","sampleCount"],a);const i=x(t,["aspectRatio"]);e!==void 0&&i!=null&&v(e,["parameters","aspectRatio"],i);const o=x(t,["guidanceScale"]);e!==void 0&&o!=null&&v(e,["parameters","guidanceScale"],o);const l=x(t,["seed"]);e!==void 0&&l!=null&&v(e,["parameters","seed"],l);const A=x(t,["safetyFilterLevel"]);e!==void 0&&A!=null&&v(e,["parameters","safetySetting"],A);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&v(e,["parameters","includeSafetyAttributes"],h);const p=x(t,["includeRaiReason"]);e!==void 0&&p!=null&&v(e,["parameters","includeRaiReason"],p);const g=x(t,["language"]);e!==void 0&&g!=null&&v(e,["parameters","language"],g);const w=x(t,["outputMimeType"]);e!==void 0&&w!=null&&v(e,["parameters","outputOptions","mimeType"],w);const b=x(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&v(e,["parameters","outputOptions","compressionQuality"],b);const E=x(t,["addWatermark"]);e!==void 0&&E!=null&&v(e,["parameters","addWatermark"],E);const B=x(t,["editMode"]);e!==void 0&&B!=null&&v(e,["parameters","editMode"],B);const I=x(t,["baseSteps"]);return e!==void 0&&I!=null&&v(e,["parameters","editConfig","baseSteps"],I),n}function QZ(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Pr(t,r));const s=x(e,["prompt"]);s!=null&&v(n,["instances[0]","prompt"],s);const a=x(e,["referenceImages"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>jZ(l))),v(n,["instances[0]","referenceImages"],o)}const i=x(e,["config"]);return i!=null&&v(n,["config"],OZ(i,n)),n}function HZ(t,e){const n={},r=x(t,["includeRaiReason"]);e!==void 0&&r!=null&&v(e,["parameters","includeRaiReason"],r);const s=x(t,["outputMimeType"]);e!==void 0&&s!=null&&v(e,["parameters","outputOptions","mimeType"],s);const a=x(t,["outputCompressionQuality"]);e!==void 0&&a!=null&&v(e,["parameters","outputOptions","compressionQuality"],a);const i=x(t,["enhanceInputImage"]);e!==void 0&&i!=null&&v(e,["parameters","upscaleConfig","enhanceInputImage"],i);const o=x(t,["imagePreservationFactor"]);e!==void 0&&o!=null&&v(e,["parameters","upscaleConfig","imagePreservationFactor"],o);const l=x(t,["numberOfImages"]);e!==void 0&&l!=null&&v(e,["parameters","sampleCount"],l);const A=x(t,["mode"]);return e!==void 0&&A!=null&&v(e,["parameters","mode"],A),n}function VZ(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Pr(t,r));const s=x(e,["image"]);s!=null&&v(n,["instances[0]","image"],Ey(s));const a=x(e,["upscaleFactor"]);a!=null&&v(n,["parameters","upscaleConfig","upscaleFactor"],a);const i=x(e,["config"]);return i!=null&&v(n,["config"],HZ(i,n)),n}function GZ(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","name"],Pr(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function zZ(t,e,n){const r={},s=x(e,["pageSize"]);n!==void 0&&s!=null&&v(n,["_query","pageSize"],s);const a=x(e,["pageToken"]);n!==void 0&&a!=null&&v(n,["_query","pageToken"],a);const i=x(e,["filter"]);n!==void 0&&i!=null&&v(n,["_query","filter"],i);const o=x(e,["queryBase"]);return n!==void 0&&o!=null&&v(n,["_url","models_url"],KU(t,o)),r}function KZ(t,e){const n={},r=x(e,["config"]);return r!=null&&v(n,["config"],zZ(t,r,n)),n}function qZ(t,e){const n={},r=x(t,["displayName"]);e!==void 0&&r!=null&&v(e,["displayName"],r);const s=x(t,["description"]);e!==void 0&&s!=null&&v(e,["description"],s);const a=x(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&v(e,["defaultCheckpointId"],a),n}function WZ(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Pr(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],qZ(s,n)),n}function $Z(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","name"],Pr(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function YZ(t,e){const n={},r=x(t,["systemInstruction"]);e!==void 0&&r!=null&&v(e,["systemInstruction"],Cm(ki(r)));const s=x(t,["tools"]);if(e!==void 0&&s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>oL(o))),v(e,["tools"],i)}const a=x(t,["generationConfig"]);return e!==void 0&&a!=null&&v(e,["generationConfig"],a),n}function JZ(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Pr(t,r));const s=x(e,["contents"]);if(s!=null){let i=Sl(s);Array.isArray(i)&&(i=i.map(o=>Cm(o))),v(n,["contents"],i)}const a=x(e,["config"]);return a!=null&&v(n,["config"],YZ(a,n)),n}function XZ(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Pr(t,r));const s=x(e,["contents"]);if(s!=null){let i=Sl(s);Array.isArray(i)&&(i=i.map(o=>Cm(o))),v(n,["contents"],i)}const a=x(e,["config"]);return a!=null&&v(n,["config"],a),n}function ZZ(t){const e={},n=x(t,["uri"]);n!=null&&v(e,["gcsUri"],n);const r=x(t,["videoBytes"]);r!=null&&v(e,["bytesBase64Encoded"],dh(r));const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function eee(t,e){const n={},r=x(t,["numberOfVideos"]);e!==void 0&&r!=null&&v(e,["parameters","sampleCount"],r);const s=x(t,["outputGcsUri"]);e!==void 0&&s!=null&&v(e,["parameters","storageUri"],s);const a=x(t,["fps"]);e!==void 0&&a!=null&&v(e,["parameters","fps"],a);const i=x(t,["durationSeconds"]);e!==void 0&&i!=null&&v(e,["parameters","durationSeconds"],i);const o=x(t,["seed"]);e!==void 0&&o!=null&&v(e,["parameters","seed"],o);const l=x(t,["aspectRatio"]);e!==void 0&&l!=null&&v(e,["parameters","aspectRatio"],l);const A=x(t,["resolution"]);e!==void 0&&A!=null&&v(e,["parameters","resolution"],A);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["pubsubTopic"]);e!==void 0&&h!=null&&v(e,["parameters","pubsubTopic"],h);const p=x(t,["negativePrompt"]);e!==void 0&&p!=null&&v(e,["parameters","negativePrompt"],p);const g=x(t,["enhancePrompt"]);e!==void 0&&g!=null&&v(e,["parameters","enhancePrompt"],g);const w=x(t,["generateAudio"]);e!==void 0&&w!=null&&v(e,["parameters","generateAudio"],w);const b=x(t,["lastFrame"]);e!==void 0&&b!=null&&v(e,["instances[0]","lastFrame"],Ey(b));const E=x(t,["compressionQuality"]);return e!==void 0&&E!=null&&v(e,["parameters","compressionQuality"],E),n}function tee(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Pr(t,r));const s=x(e,["prompt"]);s!=null&&v(n,["instances[0]","prompt"],s);const a=x(e,["image"]);a!=null&&v(n,["instances[0]","image"],Ey(a));const i=x(e,["video"]);i!=null&&v(n,["instances[0]","video"],ZZ(i));const o=x(e,["config"]);return o!=null&&v(n,["config"],eee(o,n)),n}function nee(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function ree(t){const e={},n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function see(t){const e={},n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function aee(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],nee(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],ree(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],see(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function iee(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>aee(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function oee(t){const e={},n=x(t,["citationSources"]);return n!=null&&v(e,["citations"],n),e}function lee(t){const e={},n=x(t,["retrievedUrl"]);n!=null&&v(e,["retrievedUrl"],n);const r=x(t,["urlRetrievalStatus"]);return r!=null&&v(e,["urlRetrievalStatus"],r),e}function cee(t){const e={},n=x(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>lee(s))),v(e,["urlMetadata"],r)}return e}function Aee(t){const e={},n=x(t,["content"]);n!=null&&v(e,["content"],iee(n));const r=x(t,["citationMetadata"]);r!=null&&v(e,["citationMetadata"],oee(r));const s=x(t,["tokenCount"]);s!=null&&v(e,["tokenCount"],s);const a=x(t,["finishReason"]);a!=null&&v(e,["finishReason"],a);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],cee(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const A=x(t,["index"]);A!=null&&v(e,["index"],A);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function ak(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["candidates"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>Aee(l))),v(e,["candidates"],o)}const s=x(t,["modelVersion"]);s!=null&&v(e,["modelVersion"],s);const a=x(t,["promptFeedback"]);a!=null&&v(e,["promptFeedback"],a);const i=x(t,["usageMetadata"]);return i!=null&&v(e,["usageMetadata"],i),e}function uee(t){const e={},n=x(t,["values"]);return n!=null&&v(e,["values"],n),e}function dee(){return{}}function fee(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>uee(i))),v(e,["embeddings"],a)}return x(t,["metadata"])!=null&&v(e,["metadata"],dee()),e}function hee(t){const e={},n=x(t,["bytesBase64Encoded"]);n!=null&&v(e,["imageBytes"],dh(n));const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function lL(t){const e={},n=x(t,["safetyAttributes","categories"]);n!=null&&v(e,["categories"],n);const r=x(t,["safetyAttributes","scores"]);r!=null&&v(e,["scores"],r);const s=x(t,["contentType"]);return s!=null&&v(e,["contentType"],s),e}function mee(t){const e={},n=x(t,["_self"]);n!=null&&v(e,["image"],hee(n));const r=x(t,["raiFilteredReason"]);r!=null&&v(e,["raiFilteredReason"],r);const s=x(t,["_self"]);return s!=null&&v(e,["safetyAttributes"],lL(s)),e}function pee(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>mee(i))),v(e,["generatedImages"],a)}const s=x(t,["positivePromptSafetyAttributes"]);return s!=null&&v(e,["positivePromptSafetyAttributes"],lL(s)),e}function gee(t){const e={},n=x(t,["baseModel"]);n!=null&&v(e,["baseModel"],n);const r=x(t,["createTime"]);r!=null&&v(e,["createTime"],r);const s=x(t,["updateTime"]);return s!=null&&v(e,["updateTime"],s),e}function ME(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const s=x(t,["description"]);s!=null&&v(e,["description"],s);const a=x(t,["version"]);a!=null&&v(e,["version"],a);const i=x(t,["_self"]);i!=null&&v(e,["tunedModelInfo"],gee(i));const o=x(t,["inputTokenLimit"]);o!=null&&v(e,["inputTokenLimit"],o);const l=x(t,["outputTokenLimit"]);l!=null&&v(e,["outputTokenLimit"],l);const A=x(t,["supportedGenerationMethods"]);return A!=null&&v(e,["supportedActions"],A),e}function xee(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const s=x(t,["_self"]);if(s!=null){let a=qU(s);Array.isArray(a)&&(a=a.map(i=>ME(i))),v(e,["models"],a)}return e}function vee(){return{}}function yee(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["totalTokens"]);r!=null&&v(e,["totalTokens"],r);const s=x(t,["cachedContentTokenCount"]);return s!=null&&v(e,["cachedContentTokenCount"],s),e}function wee(t){const e={},n=x(t,["video","uri"]);n!=null&&v(e,["uri"],n);const r=x(t,["video","encodedVideo"]);r!=null&&v(e,["videoBytes"],dh(r));const s=x(t,["encoding"]);return s!=null&&v(e,["mimeType"],s),e}function bee(t){const e={},n=x(t,["_self"]);return n!=null&&v(e,["video"],wee(n)),e}function Cee(t){const e={},n=x(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>bee(i))),v(e,["generatedVideos"],a)}const r=x(t,["raiMediaFilteredCount"]);r!=null&&v(e,["raiMediaFilteredCount"],r);const s=x(t,["raiMediaFilteredReasons"]);return s!=null&&v(e,["raiMediaFilteredReasons"],s),e}function Eee(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["metadata"]);r!=null&&v(e,["metadata"],r);const s=x(t,["done"]);s!=null&&v(e,["done"],s);const a=x(t,["error"]);a!=null&&v(e,["error"],a);const i=x(t,["response","generateVideoResponse"]);return i!=null&&v(e,["response"],Cee(i)),e}function _ee(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function See(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["data"]);r!=null&&v(e,["data"],r);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function Tee(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function Bee(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],_ee(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],See(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],Tee(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Nee(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Bee(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function kee(t){const e={},n=x(t,["citations"]);return n!=null&&v(e,["citations"],n),e}function Iee(t){const e={},n=x(t,["retrievedUrl"]);n!=null&&v(e,["retrievedUrl"],n);const r=x(t,["urlRetrievalStatus"]);return r!=null&&v(e,["urlRetrievalStatus"],r),e}function Fee(t){const e={},n=x(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Iee(s))),v(e,["urlMetadata"],r)}return e}function Ree(t){const e={},n=x(t,["content"]);n!=null&&v(e,["content"],Nee(n));const r=x(t,["citationMetadata"]);r!=null&&v(e,["citationMetadata"],kee(r));const s=x(t,["finishMessage"]);s!=null&&v(e,["finishMessage"],s);const a=x(t,["finishReason"]);a!=null&&v(e,["finishReason"],a);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],Fee(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const A=x(t,["index"]);A!=null&&v(e,["index"],A);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function ik(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["candidates"]);if(r!=null){let A=r;Array.isArray(A)&&(A=A.map(d=>Ree(d))),v(e,["candidates"],A)}const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const a=x(t,["responseId"]);a!=null&&v(e,["responseId"],a);const i=x(t,["modelVersion"]);i!=null&&v(e,["modelVersion"],i);const o=x(t,["promptFeedback"]);o!=null&&v(e,["promptFeedback"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function Dee(t){const e={},n=x(t,["truncated"]);n!=null&&v(e,["truncated"],n);const r=x(t,["token_count"]);return r!=null&&v(e,["tokenCount"],r),e}function Uee(t){const e={},n=x(t,["values"]);n!=null&&v(e,["values"],n);const r=x(t,["statistics"]);return r!=null&&v(e,["statistics"],Dee(r)),e}function Lee(t){const e={},n=x(t,["billableCharacterCount"]);return n!=null&&v(e,["billableCharacterCount"],n),e}function Mee(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>Uee(i))),v(e,["embeddings"],a)}const s=x(t,["metadata"]);return s!=null&&v(e,["metadata"],Lee(s)),e}function Pee(t){const e={},n=x(t,["gcsUri"]);n!=null&&v(e,["gcsUri"],n);const r=x(t,["bytesBase64Encoded"]);r!=null&&v(e,["imageBytes"],dh(r));const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function cL(t){const e={},n=x(t,["safetyAttributes","categories"]);n!=null&&v(e,["categories"],n);const r=x(t,["safetyAttributes","scores"]);r!=null&&v(e,["scores"],r);const s=x(t,["contentType"]);return s!=null&&v(e,["contentType"],s),e}function O5(t){const e={},n=x(t,["_self"]);n!=null&&v(e,["image"],Pee(n));const r=x(t,["raiFilteredReason"]);r!=null&&v(e,["raiFilteredReason"],r);const s=x(t,["_self"]);s!=null&&v(e,["safetyAttributes"],cL(s));const a=x(t,["prompt"]);return a!=null&&v(e,["enhancedPrompt"],a),e}function jee(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>O5(i))),v(e,["generatedImages"],a)}const s=x(t,["positivePromptSafetyAttributes"]);return s!=null&&v(e,["positivePromptSafetyAttributes"],cL(s)),e}function Oee(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>O5(a))),v(e,["generatedImages"],s)}return e}function Qee(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>O5(a))),v(e,["generatedImages"],s)}return e}function Hee(t){const e={},n=x(t,["endpoint"]);n!=null&&v(e,["name"],n);const r=x(t,["deployedModelId"]);return r!=null&&v(e,["deployedModelId"],r),e}function Vee(t){const e={},n=x(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&v(e,["baseModel"],n);const r=x(t,["createTime"]);r!=null&&v(e,["createTime"],r);const s=x(t,["updateTime"]);return s!=null&&v(e,["updateTime"],s),e}function Gee(t){const e={},n=x(t,["checkpointId"]);n!=null&&v(e,["checkpointId"],n);const r=x(t,["epoch"]);r!=null&&v(e,["epoch"],r);const s=x(t,["step"]);return s!=null&&v(e,["step"],s),e}function PE(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const s=x(t,["description"]);s!=null&&v(e,["description"],s);const a=x(t,["versionId"]);a!=null&&v(e,["version"],a);const i=x(t,["deployedModels"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(p=>Hee(p))),v(e,["endpoints"],h)}const o=x(t,["labels"]);o!=null&&v(e,["labels"],o);const l=x(t,["_self"]);l!=null&&v(e,["tunedModelInfo"],Vee(l));const A=x(t,["defaultCheckpointId"]);A!=null&&v(e,["defaultCheckpointId"],A);const d=x(t,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(p=>Gee(p))),v(e,["checkpoints"],h)}return e}function zee(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const s=x(t,["_self"]);if(s!=null){let a=qU(s);Array.isArray(a)&&(a=a.map(i=>PE(i))),v(e,["models"],a)}return e}function Kee(){return{}}function qee(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["totalTokens"]);return r!=null&&v(e,["totalTokens"],r),e}function Wee(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["tokensInfo"]);return r!=null&&v(e,["tokensInfo"],r),e}function $ee(t){const e={},n=x(t,["gcsUri"]);n!=null&&v(e,["uri"],n);const r=x(t,["bytesBase64Encoded"]);r!=null&&v(e,["videoBytes"],dh(r));const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function Yee(t){const e={},n=x(t,["_self"]);return n!=null&&v(e,["video"],$ee(n)),e}function Jee(t){const e={},n=x(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>Yee(i))),v(e,["generatedVideos"],a)}const r=x(t,["raiMediaFilteredCount"]);r!=null&&v(e,["raiMediaFilteredCount"],r);const s=x(t,["raiMediaFilteredReasons"]);return s!=null&&v(e,["raiMediaFilteredReasons"],s),e}function Xee(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["metadata"]);r!=null&&v(e,["metadata"],r);const s=x(t,["done"]);s!=null&&v(e,["done"],s);const a=x(t,["error"]);a!=null&&v(e,["error"],a);const i=x(t,["response"]);return i!=null&&v(e,["response"],Jee(i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zee="Content-Type",ete="X-Server-Timeout",tte="User-Agent",jE="x-goog-api-client",nte="1.12.0",rte=`google-genai-sdk/${nte}`,ste="v1beta1",ate="v1beta",ok=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class ite{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:ste,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:ate,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[i,o]of Object.entries(e.queryParams))s.searchParams.append(i,String(o));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(n))typeof a=="object"?r[s]=Object.assign(Object.assign({},r[s]),a):a!==void 0&&(r[s]=a);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const s=new AbortController,a=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const i=setTimeout(()=>s.abort(),n.timeout);i&&typeof i.unref=="function"&&i.unref()}r&&r.addEventListener("abort",()=>{s.abort()}),e.signal=a}return n&&n.extraBody!==null&&ote(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await lk(s),new IE(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await lk(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return U0(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let i="";for(;;){const{done:o,value:l}=yield es(s.read());if(o){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const A=a.decode(l,{stream:!0});try{const h=JSON.parse(A);if("error"in h){const p=JSON.parse(JSON.stringify(h.error)),g=p.status,w=p.code,b=`got status: ${g}. ${JSON.stringify(h)}`;if(w>=400&&w<600)throw new by({message:b,status:w})}}catch(h){if(h.name==="ApiError")throw h}i+=A;let d=i.match(ok);for(;d;){const h=d[1];try{const p=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield es(new IE(p)),i=i.slice(d[0].length),d=i.match(ok)}catch(p){throw new Error(`exception parsing stream chunk ${h}. ${p}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=rte+" "+this.clientOptions.userAgentExtra;return e[tte]=n,e[jE]=n,e[Zee]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,s]of Object.entries(e.headers))n.append(r,s);e.timeout&&e.timeout>0&&n.append(ete,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,i=await a.stat(e);s.sizeBytes=String(i.size);const o=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:i.type;if(o===void 0||o==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=o;const l=await this.fetchUploadUrl(s,n);return a.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let s={};n!=null&&n.httpOptions?s=n.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},i=await this.request({path:tn("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:s});if(!i||!(i!=null&&i.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const o=(r=i==null?void 0:i.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(o===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return o}}async function lk(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new by({message:s,status:n}):new Error(s)}}function ote(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,i){const o=Object.assign({},a);for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const A=i[l],d=o[l];A&&typeof A=="object"&&!Array.isArray(A)&&d&&typeof d=="object"&&!Array.isArray(d)?o[l]=r(d,A):(d&&A&&typeof d!=typeof A&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof A}. Overwriting.`),o[l]=A)}return o}const s=r(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lte="mcp_used/unknown";let cte=!1;function AL(t){for(const e of t)if(Ate(e)||typeof e=="object"&&"inputSchema"in e)return!0;return cte}function uL(t){var e;const n=(e=t[jE])!==null&&e!==void 0?e:"";t[jE]=(n+` ${lte}`).trimStart()}function Ate(t){return t!==null&&typeof t=="object"&&t instanceof Q5}function ute(t,e=100){return U0(this,arguments,function*(){let r,s=0;for(;s<e;){const a=yield es(t.listTools({cursor:r}));for(const i of a.tools)yield yield es(i),s++;if(!a.nextCursor)break;r=a.nextCursor}})}class Q5{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Q5(e,n)}async initialize(){var e,n,r,s;if(this.mcpTools.length>0)return;const a={},i=[];for(const d of this.mcpClients)try{for(var o=!0,l=(n=void 0,rg(ute(d))),A;A=await l.next(),e=A.done,!e;o=!0){s=A.value,o=!1;const h=s;i.push(h);const p=h.name;if(a[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);a[p]=d}}catch(h){n={error:h}}finally{try{!o&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=i,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),iW(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const i=await s.callTool({name:r.name,arguments:r.args},void 0,a);n.push({functionResponse:{name:r.name,response:i.isError?{error:i}:i}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function dte(t,e,n){const r=new Xq;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data);const a=iX(s);Object.assign(r,a),e(r)}class fte{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),i=pte(this.apiClient.getDefaultHeaders()),o=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${o}`;let A=()=>{};const d=new Promise(k=>{A=k}),h=e.callbacks,p=function(){A({})},g=this.apiClient,w={onopen:p,onmessage:k=>{dte(g,h.onmessage,k)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(k){},onclose:(r=h==null?void 0:h.onclose)!==null&&r!==void 0?r:function(k){}},b=this.webSocketFactory.create(l,mte(i),w);b.connect(),await d;const E=Pr(this.apiClient,e.model),B=sL({model:E}),I=LE({setup:B});return b.send(JSON.stringify(I)),new hte(b,this.apiClient)}}class hte{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=sJ(e),r=aL(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=aJ(e),r=LE(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=LE({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(E0.PLAY)}pause(){this.sendPlaybackControl(E0.PAUSE)}stop(){this.sendPlaybackControl(E0.STOP)}resetContext(){this.sendPlaybackControl(E0.RESET_CONTEXT)}close(){this.conn.close()}}function mte(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function pte(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gte="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function xte(t,e,n){const r=new Jq;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const a=JSON.parse(s);if(t.isVertexAI()){const i=yX(a);Object.assign(r,i)}else{const i=JJ(a);Object.assign(r,i)}e(r)}class vte{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new fte(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,s,a,i,o;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),A=this.apiClient.getApiVersion();let d;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&AL(e.config.tools)&&uL(h);const p=Cte(h);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${A}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{const T=this.apiClient.getApiKey();let V="BidiGenerateContent",M="key";T!=null&&T.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),A!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",M="access_token"),d=`${l}/ws/google.ai.generativelanguage.${A}.GenerativeService.${V}?${M}=${T}`}let g=()=>{};const w=new Promise(T=>{g=T}),b=e.callbacks,E=function(){var T;(T=b==null?void 0:b.onopen)===null||T===void 0||T.call(b),g({})},B=this.apiClient,I={onopen:E,onmessage:T=>{xte(B,b.onmessage,T)},onerror:(n=b==null?void 0:b.onerror)!==null&&n!==void 0?n:function(T){},onclose:(r=b==null?void 0:b.onclose)!==null&&r!==void 0?r:function(T){}},k=this.webSocketFactory.create(d,bte(p),I);k.connect(),await w;let F=Pr(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&F.startsWith("publishers/")){const T=this.apiClient.getProject(),V=this.apiClient.getLocation();F=`projects/${T}/locations/${V}/`+F}let D={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[p2.AUDIO]}:e.config.responseModalities=[p2.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const P=(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[],S=[];for(const T of P)if(this.isCallableTool(T)){const V=T;S.push(await V.tool())}else S.push(T);S.length>0&&(e.config.tools=S);const N={model:F,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?D=FJ(this.apiClient,N):D=eJ(this.apiClient,N),delete D.config,k.send(JSON.stringify(D)),new wte(k,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const yte={turnComplete:!0};class wte{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Sl(n.turns),e.isVertexAI()?r=r.map(s=>Cm(s)):r=r.map(s=>Cy(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(gte)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},yte),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:UJ(e)}:n={realtimeInput:rJ(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function bte(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Cte(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ck=10;function Ak(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const i of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(L0(i)){s=!0;break}if(!s)return!0;const a=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function L0(t){return"callTool"in t&&typeof t.callTool=="function"}function Ete(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>L0(s)))!==null&&r!==void 0?r:!1}function _te(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>!L0(s)))!==null&&r!==void 0?r:!1}function uk(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ste extends uh{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,s,a,i,o;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Ete(n)||Ak(n.config))return await this.generateContentInternal(l);if(_te(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let A,d;const h=Sl(l.contents),p=(a=(s=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:ck;let g=0;for(;g<p&&(A=await this.generateContentInternal(l),!(!A.functionCalls||A.functionCalls.length===0));){const w=A.candidates[0].content,b=[];for(const E of(o=(i=n.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(L0(E)){const I=await E.callTool(A.functionCalls);b.push(...I)}g++,d={role:"user",parts:b},l.contents=Sl(l.contents),l.contents.push(w),l.contents.push(d),uk(l.config)&&(h.push(w),h.push(d))}return uk(l.config)&&(A.automaticFunctionCallingHistory=h),A},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),Ak(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let a;const i=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=l==null?void 0:l.safetyAttributes:i.push(l);let o;return a?o={generatedImages:i,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:o={generatedImages:i,sdkHttpResponse:r.sdkHttpResponse},o}),this.list=async n=>{var r;const i={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((r=i.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new Ax(eh.PAGED_ITEM_MODELS,o=>this.listInternal(o),await this.listInternal(i),i)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,s;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const i=await Promise.all(a.map(async l=>L0(l)?await l.tool():l)),o={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};if(o.config.tools=i,e.config&&e.config.tools&&AL(e.config.tools)){const l=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let A=Object.assign({},l);Object.keys(A).length===0&&(A=this.apiClient.getDefaultHeaders()),uL(A),o.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:A})}return o}async initAfcToolsMap(e){var n,r,s;const a=new Map;for(const i of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(L0(i)){const o=i,l=await o.tool();for(const A of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!A.name)throw new Error("Function declaration name is required.");if(a.has(A.name))throw new Error(`Duplicate tool declaration name: ${A.name}`);a.set(A.name,o)}}return a}async processAfcStream(e){var n,r,s;const a=(s=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:ck;let i=!1,o=0;const l=await this.initAfcToolsMap(e);return function(A,d,h){var p,g;return U0(this,arguments,function*(){for(var w,b,E,B;o<a;){i&&(o++,i=!1);const D=yield es(A.processParamsMaybeAddMcpUsage(h)),P=yield es(A.generateContentStreamInternal(D)),S=[],N=[];try{for(var I=!0,k=(b=void 0,rg(P)),F;F=yield es(k.next()),w=F.done,!w;I=!0){B=F.value,I=!1;const T=B;if(yield yield es(T),T.candidates&&(!((p=T.candidates[0])===null||p===void 0)&&p.content)){N.push(T.candidates[0].content);for(const V of(g=T.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(o<a&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(V.functionCall.name)){const M=yield es(d.get(V.functionCall.name).callTool([V.functionCall]));S.push(...M)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(T){b={error:T}}finally{try{!I&&!w&&(E=k.return)&&(yield es(E.call(k)))}finally{if(b)throw b.error}}if(S.length>0){i=!0;const T=new pp;T.candidates=[{content:{role:"user",parts:S}}],yield yield es(T);const V=[];V.push(...N),V.push({role:"user",parts:S});const M=Sl(h.contents).concat(V);h.contents=M}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=sk(this.apiClient,e);return o=tn("{model}:generateContent",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=ik(d),p=new pp;return Object.assign(p,h),p})}else{const A=rk(this.apiClient,e);return o=tn("{model}:generateContent",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=ak(d),p=new pp;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=sk(this.apiClient,e);return o=tn("{model}:streamGenerateContent?alt=sse",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),i.then(function(h){return U0(this,arguments,function*(){var p,g,w,b;try{for(var E=!0,B=rg(h),I;I=yield es(B.next()),p=I.done,!p;E=!0){b=I.value,E=!1;const k=b,F=ik(yield es(k.json()));F.sdkHttpResponse={headers:k.headers};const D=new pp;Object.assign(D,F),yield yield es(D)}}catch(k){g={error:k}}finally{try{!E&&!p&&(w=B.return)&&(yield es(w.call(B)))}finally{if(g)throw g.error}}})})}else{const A=rk(this.apiClient,e);return o=tn("{model}:streamGenerateContent?alt=sse",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),i.then(function(h){return U0(this,arguments,function*(){var p,g,w,b;try{for(var E=!0,B=rg(h),I;I=yield es(B.next()),p=I.done,!p;E=!0){b=I.value,E=!1;const k=b,F=ak(yield es(k.json()));F.sdkHttpResponse={headers:k.headers};const D=new pp;Object.assign(D,F),yield yield es(D)}}catch(k){g={error:k}}finally{try{!E&&!p&&(w=B.return)&&(yield es(w.call(B)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=FZ(this.apiClient,e);return o=tn("{model}:predict",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=Mee(d),p=new L3;return Object.assign(p,h),p})}else{const A=zX(this.apiClient,e);return o=tn("{model}:batchEmbedContents",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=fee(d),p=new L3;return Object.assign(p,h),p})}}async generateImagesInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=DZ(this.apiClient,e);return o=tn("{model}:predict",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=jee(d),p=new M3;return Object.assign(p,h),p})}else{const A=qX(this.apiClient,e);return o=tn("{model}:predict",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=pee(d),p=new M3;return Object.assign(p,h),p})}}async editImageInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=QZ(this.apiClient,e);return a=tn("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(A=>{const d=A;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const A=Oee(l),d=new zq;return Object.assign(d,A),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=VZ(this.apiClient,e);return a=tn("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(A=>{const d=A;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const A=Qee(l),d=new Kq;return Object.assign(d,A),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=GZ(this.apiClient,e);return o=tn("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>PE(d))}else{const A=WX(this.apiClient,e);return o=tn("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>ME(d))}}async listInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=KZ(this.apiClient,e);return o=tn("{models_url}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=zee(d),p=new P3;return Object.assign(p,h),p})}else{const A=YX(this.apiClient,e);return o=tn("{models_url}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=xee(d),p=new P3;return Object.assign(p,h),p})}}async update(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=WZ(this.apiClient,e);return o=tn("{model}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>PE(d))}else{const A=XX(this.apiClient,e);return o=tn("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>ME(d))}}async delete(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=$Z(this.apiClient,e);return o=tn("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(()=>{const d=Kee(),h=new j3;return Object.assign(h,d),h})}else{const A=ZX(this.apiClient,e);return o=tn("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(()=>{const d=vee(),h=new j3;return Object.assign(h,d),h})}}async countTokens(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=JZ(this.apiClient,e);return o=tn("{model}:countTokens",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=qee(d),p=new O3;return Object.assign(p,h),p})}else{const A=tZ(this.apiClient,e);return o=tn("{model}:countTokens",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=yee(d),p=new O3;return Object.assign(p,h),p})}}async computeTokens(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=XZ(this.apiClient,e);return a=tn("{model}:computeTokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(A=>{const d=A;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const A=Wee(l),d=new qq;return Object.assign(d,A),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=tee(this.apiClient,e);return o=tn("{model}:predictLongRunning",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>{const h=Xee(d),p=new g2;return Object.assign(p,h),p})}else{const A=sZ(this.apiClient,e);return o=tn("{model}:predictLongRunning",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>{const h=Eee(d),p=new g2;return Object.assign(p,h),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tte(t){const e={},n=x(t,["operationName"]);n!=null&&v(e,["_url","operationName"],n);const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function Bte(t){const e={},n=x(t,["operationName"]);n!=null&&v(e,["_url","operationName"],n);const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function Nte(t){const e={},n=x(t,["operationName"]);n!=null&&v(e,["operationName"],n);const r=x(t,["resourceName"]);r!=null&&v(e,["_url","resourceName"],r);const s=x(t,["config"]);return s!=null&&v(e,["config"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kte extends uh{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=Bte(e);return o=tn("{operationName}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i}else{const A=Tte(e);return o=tn("{operationName}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i}}async fetchPredictVideosOperationInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=Nte(e);return a=tn("{resourceName}:fetchPredictOperation",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ite(t){const e={},n=x(t,["voiceName"]);return n!=null&&v(e,["voiceName"],n),e}function dL(t){const e={},n=x(t,["prebuiltVoiceConfig"]);return n!=null&&v(e,["prebuiltVoiceConfig"],Ite(n)),e}function Fte(t){const e={},n=x(t,["speaker"]);n!=null&&v(e,["speaker"],n);const r=x(t,["voiceConfig"]);return r!=null&&v(e,["voiceConfig"],dL(r)),e}function Rte(t){const e={},n=x(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Fte(s))),v(e,["speakerVoiceConfigs"],r)}return e}function Dte(t){const e={},n=x(t,["voiceConfig"]);n!=null&&v(e,["voiceConfig"],dL(n));const r=x(t,["multiSpeakerVoiceConfig"]);r!=null&&v(e,["multiSpeakerVoiceConfig"],Rte(r));const s=x(t,["languageCode"]);return s!=null&&v(e,["languageCode"],s),e}function Ute(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function Lte(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function Mte(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function Pte(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],Ute(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],Lte(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],Mte(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function jte(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Pte(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function Ote(t){const e={},n=x(t,["behavior"]);n!=null&&v(e,["behavior"],n);const r=x(t,["description"]);r!=null&&v(e,["description"],r);const s=x(t,["name"]);s!=null&&v(e,["name"],s);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function Qte(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function Hte(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],Qte(n)),e}function Vte(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function Gte(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],Vte(n)),e}function zte(){return{}}function Kte(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(A=>Ote(A))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(t,["googleSearch"]);r!=null&&v(e,["googleSearch"],Hte(r));const s=x(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],Gte(s)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],zte());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function qte(t){const e={},n=x(t,["handle"]);if(n!=null&&v(e,["handle"],n),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function dk(){return{}}function Wte(t){const e={},n=x(t,["disabled"]);n!=null&&v(e,["disabled"],n);const r=x(t,["startOfSpeechSensitivity"]);r!=null&&v(e,["startOfSpeechSensitivity"],r);const s=x(t,["endOfSpeechSensitivity"]);s!=null&&v(e,["endOfSpeechSensitivity"],s);const a=x(t,["prefixPaddingMs"]);a!=null&&v(e,["prefixPaddingMs"],a);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function $te(t){const e={},n=x(t,["automaticActivityDetection"]);n!=null&&v(e,["automaticActivityDetection"],Wte(n));const r=x(t,["activityHandling"]);r!=null&&v(e,["activityHandling"],r);const s=x(t,["turnCoverage"]);return s!=null&&v(e,["turnCoverage"],s),e}function Yte(t){const e={},n=x(t,["targetTokens"]);return n!=null&&v(e,["targetTokens"],n),e}function Jte(t){const e={},n=x(t,["triggerTokens"]);n!=null&&v(e,["triggerTokens"],n);const r=x(t,["slidingWindow"]);return r!=null&&v(e,["slidingWindow"],Yte(r)),e}function Xte(t){const e={},n=x(t,["proactiveAudio"]);return n!=null&&v(e,["proactiveAudio"],n),e}function Zte(t,e){const n={},r=x(t,["generationConfig"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig"],r);const s=x(t,["responseModalities"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","responseModalities"],s);const a=x(t,["temperature"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","temperature"],a);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const A=x(t,["mediaResolution"]);e!==void 0&&A!=null&&v(e,["setup","generationConfig","mediaResolution"],A);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],Dte(j5(h)));const p=x(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],p);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],jte(ki(g)));const w=x(t,["tools"]);if(e!==void 0&&w!=null){let D=wm(w);Array.isArray(D)&&(D=D.map(P=>Kte(ym(P)))),v(e,["setup","tools"],D)}const b=x(t,["sessionResumption"]);e!==void 0&&b!=null&&v(e,["setup","sessionResumption"],qte(b));const E=x(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&v(e,["setup","inputAudioTranscription"],dk());const B=x(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&v(e,["setup","outputAudioTranscription"],dk());const I=x(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&v(e,["setup","realtimeInputConfig"],$te(I));const k=x(t,["contextWindowCompression"]);e!==void 0&&k!=null&&v(e,["setup","contextWindowCompression"],Jte(k));const F=x(t,["proactivity"]);return e!==void 0&&F!=null&&v(e,["setup","proactivity"],Xte(F)),n}function ene(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["setup","model"],Pr(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],Zte(s,n)),n}function tne(t,e,n){const r={},s=x(e,["expireTime"]);n!==void 0&&s!=null&&v(n,["expireTime"],s);const a=x(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&v(n,["newSessionExpireTime"],a);const i=x(e,["uses"]);n!==void 0&&i!=null&&v(n,["uses"],i);const o=x(e,["liveConnectConstraints"]);n!==void 0&&o!=null&&v(n,["bidiGenerateContentSetup"],ene(t,o));const l=x(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&v(n,["fieldMask"],l),r}function nne(t,e){const n={},r=x(e,["config"]);return r!=null&&v(n,["config"],tne(t,r,n)),n}function rne(t){const e={},n=x(t,["name"]);return n!=null&&v(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sne(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(a=>`${n}.${a}`);e.push(...s)}else e.push(n)}return e.join(",")}function ane(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const a=sne(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let o=[];s.length>0&&(o=s.map(A=>i.includes(A)?`generationConfig.${A}`:A));const l=[];a&&l.push(a),o.length>0&&l.push(...o),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class ine extends uh{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const o=nne(this.apiClient,e);a=tn("auth_tokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query;const l=ane(o,e.config);return s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json()),s.then(A=>rne(A))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function one(t){const e={},n=x(t,["name"]);n!=null&&v(e,["_url","name"],n);const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function lne(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const s=x(t,["pageToken"]);e!==void 0&&s!=null&&v(e,["_query","pageToken"],s);const a=x(t,["filter"]);return e!==void 0&&a!=null&&v(e,["_query","filter"],a),n}function cne(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],lne(n,e)),e}function Ane(t){const e={},n=x(t,["textInput"]);n!=null&&v(e,["textInput"],n);const r=x(t,["output"]);return r!=null&&v(e,["output"],r),e}function une(t){const e={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=x(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Ane(s))),v(e,["examples","examples"],r)}return e}function dne(t,e){const n={};if(x(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=x(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&v(e,["displayName"],r),x(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=x(t,["epochCount"]);e!==void 0&&s!=null&&v(e,["tuningTask","hyperparameters","epochCount"],s);const a=x(t,["learningRateMultiplier"]);if(a!=null&&v(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),x(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(x(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const i=x(t,["batchSize"]);e!==void 0&&i!=null&&v(e,["tuningTask","hyperparameters","batchSize"],i);const o=x(t,["learningRate"]);return e!==void 0&&o!=null&&v(e,["tuningTask","hyperparameters","learningRate"],o),n}function fne(t){const e={},n=x(t,["baseModel"]);n!=null&&v(e,["baseModel"],n);const r=x(t,["trainingDataset"]);r!=null&&v(e,["tuningTask","trainingData"],une(r));const s=x(t,["config"]);return s!=null&&v(e,["config"],dne(s,e)),e}function hne(t){const e={},n=x(t,["name"]);n!=null&&v(e,["_url","name"],n);const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function mne(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const s=x(t,["pageToken"]);e!==void 0&&s!=null&&v(e,["_query","pageToken"],s);const a=x(t,["filter"]);return e!==void 0&&a!=null&&v(e,["_query","filter"],a),n}function pne(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],mne(n,e)),e}function gne(t,e){const n={},r=x(t,["gcsUri"]);e!==void 0&&r!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],r);const s=x(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],s),x(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function xne(t,e){const n={},r=x(t,["gcsUri"]);r!=null&&v(n,["validationDatasetUri"],r);const s=x(t,["vertexDatasetResource"]);return e!==void 0&&s!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],s),n}function vne(t,e){const n={},r=x(t,["validationDataset"]);e!==void 0&&r!=null&&v(e,["supervisedTuningSpec"],xne(r,n));const s=x(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&v(e,["tunedModelDisplayName"],s);const a=x(t,["description"]);e!==void 0&&a!=null&&v(e,["description"],a);const i=x(t,["epochCount"]);e!==void 0&&i!=null&&v(e,["supervisedTuningSpec","hyperParameters","epochCount"],i);const o=x(t,["learningRateMultiplier"]);e!==void 0&&o!=null&&v(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],o);const l=x(t,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&v(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const A=x(t,["adapterSize"]);if(e!==void 0&&A!=null&&v(e,["supervisedTuningSpec","hyperParameters","adapterSize"],A),x(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(x(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function yne(t){const e={},n=x(t,["baseModel"]);n!=null&&v(e,["baseModel"],n);const r=x(t,["trainingDataset"]);r!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],gne(r,e));const s=x(t,["config"]);return s!=null&&v(e,["config"],vne(s,e)),e}function wne(t){const e={},n=x(t,["name"]);n!=null&&v(e,["model"],n);const r=x(t,["name"]);return r!=null&&v(e,["endpoint"],r),e}function fL(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["name"]);r!=null&&v(e,["name"],r);const s=x(t,["state"]);s!=null&&v(e,["state"],GU(s));const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const i=x(t,["tuningTask","startTime"]);i!=null&&v(e,["startTime"],i);const o=x(t,["tuningTask","completeTime"]);o!=null&&v(e,["endTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const A=x(t,["description"]);A!=null&&v(e,["description"],A);const d=x(t,["baseModel"]);d!=null&&v(e,["baseModel"],d);const h=x(t,["_self"]);h!=null&&v(e,["tunedModel"],wne(h));const p=x(t,["distillationSpec"]);p!=null&&v(e,["distillationSpec"],p);const g=x(t,["experiment"]);g!=null&&v(e,["experiment"],g);const w=x(t,["labels"]);w!=null&&v(e,["labels"],w);const b=x(t,["pipelineJob"]);b!=null&&v(e,["pipelineJob"],b);const E=x(t,["satisfiesPzi"]);E!=null&&v(e,["satisfiesPzi"],E);const B=x(t,["satisfiesPzs"]);B!=null&&v(e,["satisfiesPzs"],B);const I=x(t,["serviceAccount"]);I!=null&&v(e,["serviceAccount"],I);const k=x(t,["tunedModelDisplayName"]);return k!=null&&v(e,["tunedModelDisplayName"],k),e}function bne(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const s=x(t,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>fL(i))),v(e,["tuningJobs"],a)}return e}function Cne(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["name"]);r!=null&&v(e,["name"],r);const s=x(t,["metadata"]);s!=null&&v(e,["metadata"],s);const a=x(t,["done"]);a!=null&&v(e,["done"],a);const i=x(t,["error"]);return i!=null&&v(e,["error"],i),e}function Ene(t){const e={},n=x(t,["checkpointId"]);n!=null&&v(e,["checkpointId"],n);const r=x(t,["epoch"]);r!=null&&v(e,["epoch"],r);const s=x(t,["step"]);s!=null&&v(e,["step"],s);const a=x(t,["endpoint"]);return a!=null&&v(e,["endpoint"],a),e}function _ne(t){const e={},n=x(t,["model"]);n!=null&&v(e,["model"],n);const r=x(t,["endpoint"]);r!=null&&v(e,["endpoint"],r);const s=x(t,["checkpoints"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>Ene(i))),v(e,["checkpoints"],a)}return e}function OE(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["name"]);r!=null&&v(e,["name"],r);const s=x(t,["state"]);s!=null&&v(e,["state"],GU(s));const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const i=x(t,["startTime"]);i!=null&&v(e,["startTime"],i);const o=x(t,["endTime"]);o!=null&&v(e,["endTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const A=x(t,["error"]);A!=null&&v(e,["error"],A);const d=x(t,["description"]);d!=null&&v(e,["description"],d);const h=x(t,["baseModel"]);h!=null&&v(e,["baseModel"],h);const p=x(t,["tunedModel"]);p!=null&&v(e,["tunedModel"],_ne(p));const g=x(t,["supervisedTuningSpec"]);g!=null&&v(e,["supervisedTuningSpec"],g);const w=x(t,["tuningDataStats"]);w!=null&&v(e,["tuningDataStats"],w);const b=x(t,["encryptionSpec"]);b!=null&&v(e,["encryptionSpec"],b);const E=x(t,["partnerModelTuningSpec"]);E!=null&&v(e,["partnerModelTuningSpec"],E);const B=x(t,["distillationSpec"]);B!=null&&v(e,["distillationSpec"],B);const I=x(t,["experiment"]);I!=null&&v(e,["experiment"],I);const k=x(t,["labels"]);k!=null&&v(e,["labels"],k);const F=x(t,["pipelineJob"]);F!=null&&v(e,["pipelineJob"],F);const D=x(t,["satisfiesPzi"]);D!=null&&v(e,["satisfiesPzi"],D);const P=x(t,["satisfiesPzs"]);P!=null&&v(e,["satisfiesPzs"],P);const S=x(t,["serviceAccount"]);S!=null&&v(e,["serviceAccount"],S);const N=x(t,["tunedModelDisplayName"]);return N!=null&&v(e,["tunedModelDisplayName"],N),e}function Sne(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const s=x(t,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>OE(i))),v(e,["tuningJobs"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tne extends uh{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Ax(eh.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const r=await this.tuneMldevInternal(n);let s="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?s=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(s=r.name.split("/operations/")[0]),{name:s,state:kE.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=hne(e);return o=tn("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>OE(d))}else{const A=one(e);return o=tn("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>fL(d))}}async listInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=pne(e);return o=tn("tuningJobs",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=Sne(d),p=new H3;return Object.assign(p,h),p})}else{const A=cne(e);return o=tn("tunedModels",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=bne(d),p=new H3;return Object.assign(p,h),p})}}async tuneInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=yne(e);return a=tn("tuningJobs",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(A=>{const d=A;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>OE(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=fne(e);return a=tn("tunedModels",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(A=>{const d=A;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>Cne(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bne{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Nne=1024*1024*8,kne=3,Ine=1e3,Fne=2,Db="x-goog-upload-status";async function Rne(t,e,n){var r,s,a;let i=0,o=0,l=new IE(new Response),A="upload";for(i=t.size;o<i;){const h=Math.min(Nne,i-o),p=t.slice(o,o+h);o+h>=i&&(A+=", finalize");let g=0,w=Ine;for(;g<kne&&(l=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":A,"X-Goog-Upload-Offset":String(o),"Content-Length":String(h)}}}),!(!((r=l==null?void 0:l.headers)===null||r===void 0)&&r[Db]));)g++,await Une(w),w=w*Fne;if(o+=h,((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[Db])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await(l==null?void 0:l.json());if(((a=l==null?void 0:l.headers)===null||a===void 0?void 0:a[Db])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function Dne(t){return{size:t.size,type:t.type}}function Une(t){return new Promise(e=>setTimeout(e,t))}class Lne{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Rne(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Dne(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mne{create(e,n,r){return new Pne(e,n,r)}}class Pne{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fk="x-goog-api-key";class jne{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(fk)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(fk,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const One="gl-node/";class Sa{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=Gq(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const s=new jne(this.apiKey);this.apiClient=new ite({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:One+"web",uploader:new Lne,downloader:new Bne}),this.models=new Ste(this.apiClient),this.live=new vte(this.apiClient,s,new Mne),this.batches=new f$(this.apiClient),this.chats=new gY(this.models,this.apiClient),this.caches=new hY(this.apiClient),this.files=new kY(this.apiClient),this.operations=new kte(this.apiClient),this.authTokens=new ine(this.apiClient),this.tunings=new Tne(this.apiClient)}}const hk="apiCallLogs",Qne="lir-sessionUser",mo=t=>{try{const e=localStorage.getItem(Qne);if(!e){console.warn("No se pudo registrar la llamada a la API: no hay usuario en sesión.");return}const n=JSON.parse(e),r=localStorage.getItem(hk),s=r?JSON.parse(r):[],i=[{id:crypto.randomUUID(),timestamp:new Date().toISOString(),userId:n.id,userEmail:n.email,module:t},...s].slice(0,2e3);localStorage.setItem(hk,JSON.stringify(i)),window.dispatchEvent(new Event("storage"))}catch(e){console.error("Error al registrar la llamada a la API:",e)}},Ub="asignacionesHorario",Lb="horariosGenerados",Hne="usuariosLiceo",Vne=({horarios:t})=>Object.keys(t).length===0?u.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:u.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'Aún no se ha generado ningún horario. Utilice la pestaña de "Configuración" para generar uno.'})}):u.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:u.jsxs("table",{className:"min-w-full border-collapse",children:[u.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:u.jsxs("tr",{children:[u.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),u.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),$s.map(e=>u.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:e},e))]})}),u.jsx("tbody",{children:Lv.map(e=>u.jsxs(ut.Fragment,{children:[u.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:u.jsx("th",{colSpan:2+$s.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:e.toUpperCase()})}),BE.map(({bloque:n,inicio:r,fin:s})=>u.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[u.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:n}),u.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${r} - ${s}`}),$s.map(a=>{var o,l;const i=(l=(o=t[a])==null?void 0:o[e])==null?void 0:l[n];return u.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?u.jsxs("div",{className:"flex flex-col justify-center h-full",children:[u.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),u.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):u.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${a}-${e}-${n}`)})]},`${e}-${n}`))]},e))})]})}),Gne=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState({curso:"",asignatura:"",profesor:""}),[s,a]=ee.useState([]),[i,o]=ee.useState({}),[l,A]=ee.useState($s[0]),[d,h]=ee.useState(!1),[p,g]=ee.useState(null),[w,b]=ee.useState(null),[E,B]=ee.useState(null),[I,k]=ee.useState({asignatura:"",profesor:""}),[F,D]=ee.useState("edicion"),[P,S]=ee.useState("");ee.useEffect(()=>{try{const K=localStorage.getItem(Ub);K&&e(JSON.parse(K));const q=localStorage.getItem(Lb);q&&o(JSON.parse(q));const se=localStorage.getItem(Hne);if(se){const X=JSON.parse(se).filter(de=>de.profile===nn.PROFESORADO).map(de=>de.nombreCompleto).sort();a(X)}}catch(K){console.error("Error al cargar datos de localStorage",K),g("No se pudieron cargar los datos guardados.")}},[]);const N=K=>{if(K.preventDefault(),!n.curso||!n.asignatura||!n.profesor){g("Todos los campos de la asignación son obligatorios.");return}const q=[...t,{...n,id:crypto.randomUUID()}];e(q),localStorage.setItem(Ub,JSON.stringify(q)),r({curso:"",asignatura:"",profesor:""}),g(null)},T=K=>{const q=t.filter(se=>se.id!==K);e(q),localStorage.setItem(Ub,JSON.stringify(q))},V=async()=>{if(t.length===0){g("Debe agregar al menos una asignación de profesor antes de generar el horario.");return}h(!0),g(null),b(null);try{mo("Crear Horarios");const K=new Sa({apiKey:void 0}),q=`
                Eres un asistente experto en planificación de horarios escolares para un liceo técnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Días de la semana: ${Lv.join(", ")}
                - Bloques horarios por día: 10 bloques con los siguientes horarios: ${JSON.stringify(BE,null,2)}
                - Cursos del liceo: ${$s.join(", ")}

                **Contexto Adicional de Especialidades (3º y 4º Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecánica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecánica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3°/4° Medio Automotriz" y "3°/4° Medio Industrial" correctamente.

                **Reglas de Asignación de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura según el nivel del curso:
                ${JSON.stringify(_q,null,2)}
                Notas sobre las reglas:
                - '1º y 2º medio' aplica a cursos que empiezan con '1º' o '2º'.
                - '3º y 4º medio' aplica a cursos que empiezan con '3º' o '4º'.
                - Algunas reglas aplican a cursos específicos (ej. Mecánica).

                **Asignaciones de Profesores (Input):**
                Aquí está la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(t,null,2)}

                **REGLA CRÍTICA INVIOLABLE:**
                La restricción más importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo día y mismo bloque horario. Es físicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las demás. No deben existir topes de horario para ningún profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${P||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma más balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo día si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un único objeto JSON válido, sin texto adicional antes o después. La estructura del JSON debe ser la siguiente:
                {
                  "1ºA": {
                    "Lunes": { "1": { "asignatura": "Matemática", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemática", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1ºB": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada día de la semana. Cada día tiene claves para cada bloque del 1 al 10. Si un bloque está vacío, usa \`{ "asignatura": null, "profesor": null }\`.
            `,se=await K.models.generateContent({model:"gemini-2.5-flash",contents:q,config:{responseMimeType:"application/json"}}),Z=JSON.parse(se.text);o(Z),localStorage.setItem(Lb,JSON.stringify(Z)),b("¡Horario generado y guardado con éxito!")}catch(K){console.error("Error al generar horario con IA:",K),g("Ocurrió un error al contactar con la IA o al procesar la respuesta. Por favor, inténtelo de nuevo.")}finally{h(!1)}},M=(K,q,se)=>{B({dia:K,bloque:q}),k({asignatura:(se==null?void 0:se.asignatura)||"",profesor:(se==null?void 0:se.profesor)||""})},U=()=>{if(!E)return;const{dia:K,bloque:q}=E,se={...i};se[l]||(se[l]={}),se[l][K]||(se[l][K]={}),se[l][K][q]={asignatura:I.asignatura||null,profesor:I.profesor||null},o(se),localStorage.setItem(Lb,JSON.stringify(se)),B(null)},O="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",G=()=>{const K=i[l]||{};return u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[u.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),Lv.map(q=>u.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:q},q))]})}),u.jsx("tbody",{children:BE.map(({bloque:q,inicio:se,fin:Z})=>u.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[u.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[u.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:q}),u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${se} - ${Z}`})]}),Lv.map(X=>{var W;const de=(E==null?void 0:E.dia)===X&&(E==null?void 0:E.bloque)===q,j=(W=K[X])==null?void 0:W[q];return u.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!de&&M(X,q,j),children:de?u.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[u.jsx("input",{type:"text",placeholder:"Asignatura",value:I.asignatura,onChange:J=>k(ne=>({...ne,asignatura:J.target.value})),className:O+" text-xs mb-1"}),u.jsx("input",{type:"text",placeholder:"Profesor",value:I.profesor,onChange:J=>k(ne=>({...ne,profesor:J.target.value})),className:O+" text-xs"}),u.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[u.jsx("button",{onClick:()=>B(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),u.jsx("button",{onClick:U,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):j!=null&&j.asignatura?u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:j.asignatura}),u.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",j.profesor,")"]})]}):u.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${X}-${q}`)})]},q))})]})})},ie=()=>u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🔧 1. Configuración de Asignaciones"}),u.jsxs("form",{onSubmit:N,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),u.jsxs("select",{name:"curso",value:n.curso,onChange:K=>r(q=>({...q,curso:K.target.value})),className:O,children:[u.jsx("option",{value:"",children:"Seleccione"}),$s.map(K=>u.jsx("option",{value:K,children:K},K))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),u.jsxs("select",{name:"asignatura",value:n.asignatura,onChange:K=>r(q=>({...q,asignatura:K.target.value})),className:O,children:[u.jsx("option",{value:"",children:"Seleccione"}),Ho.map(K=>u.jsx("option",{value:K,children:K},K))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),u.jsxs("select",{name:"profesor",value:n.profesor,onChange:K=>r(q=>({...q,profesor:K.target.value})),className:O,children:[u.jsx("option",{value:"",children:"Seleccione"}),s.map(K=>u.jsx("option",{value:K,children:K},K))]})]}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),u.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:u.jsx("ul",{className:"space-y-2",children:t.map(K=>u.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[u.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[K.curso," - ",K.asignatura," - ",u.jsx("strong",{children:K.profesor})]}),u.jsx("button",{onClick:()=>T(K.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:"×"})]},K.id))})})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🧠 2. Generación Automática con IA"}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),u.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:P,onChange:K=>S(K.target.value),rows:3,placeholder:"Ej: Dejar los módulos teóricos en la mañana y los prácticos en la tarde. Evitar poner 2 bloques de matemática seguidos.",className:O})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("button",{onClick:V,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),p&&u.jsx("p",{className:"text-red-600",children:p}),w&&u.jsx("p",{className:"text-green-600",children:w})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"📅 3. Visualización y Edición por Curso"}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),u.jsx("select",{id:"selectCurso",value:l,onChange:K=>A(K.target.value),className:O+" md:w-1/3",children:$s.map(K=>u.jsx("option",{value:K,children:K},K))})]}),Object.keys(i).length>0?G():u.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:u.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Aún no se ha generado ningún horario. Utilice el botón de generación con IA."})})]})]});return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:u.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[u.jsx("button",{onClick:()=>D("edicion"),className:`${F==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuración y Edición por Curso"}),u.jsx("button",{onClick:()=>D("global"),className:`${F==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),F==="edicion"?ie():u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),u.jsx(Vne,{horarios:i})]})]})},F1="accionesPedagogicas",mk={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente"},zne={Pendiente:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En Proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Cumplida:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},Kne=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState(mk),[s,a]=ee.useState(null),[i,o]=ee.useState(""),[l,A]=ee.useState(""),[d,h]=ee.useState(""),[p,g]=ee.useState(null);ee.useEffect(()=>{try{const P=localStorage.getItem(F1);P&&e(JSON.parse(P))}catch(P){console.error("Error al leer acciones de localStorage",P)}},[]);const w=ee.useCallback(P=>{const{name:S,value:N}=P.target;r(T=>({...T,[S]:N}))},[]),b=ee.useCallback(()=>{r(mk),a(null),g(null)},[]),E=ee.useCallback(P=>{P.preventDefault();const{fechaRegistro:S,responsable:N,area:T,descripcion:V,fechaCumplimiento:M,estado:U}=n;if(!S||!N||!T||!V||!M){g("Todos los campos son obligatorios.");return}const O=s?t.map(G=>G.id===s?{...n,id:s}:G):[{...n,id:crypto.randomUUID()},...t];e(O),localStorage.setItem(F1,JSON.stringify(O)),b()},[n,s,t,b]),B=ee.useCallback(P=>{window.scrollTo({top:0,behavior:"smooth"}),a(P.id),r(P)},[]),I=ee.useCallback(P=>{if(window.confirm("¿Está seguro de que desea eliminar esta acción?")){const S=t.filter(N=>N.id!==P);e(S),localStorage.setItem(F1,JSON.stringify(S))}},[t]),k=ee.useCallback(P=>{const S=t.map(N=>{if(N.id===P){const V=(mp.indexOf(N.estado)+1)%mp.length;return{...N,estado:mp[V]}}return N});e(S),localStorage.setItem(F1,JSON.stringify(S))},[t]),F=ee.useMemo(()=>t.filter(P=>{const S=i===""||P.responsable.toLowerCase().includes(i.toLowerCase())||P.descripcion.toLowerCase().includes(i.toLowerCase()),N=l===""||P.area===l,T=d===""||P.estado===d;return S&&N&&T}),[t,i,l,d]),D="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Acciones Pedagógicas"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:s?"Editando acción existente.":"Registre una nueva acción de seguimiento."}),u.jsxs("form",{onSubmit:E,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"fechaRegistro",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Registro"}),u.jsx("input",{type:"date",name:"fechaRegistro",value:n.fechaRegistro,onChange:w,className:D})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),u.jsx("input",{type:"text",name:"responsable",value:n.responsable,onChange:w,placeholder:"Nombre del responsable",className:D})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Área Vinculada"}),u.jsxs("select",{name:"area",value:n.area,onChange:w,className:D,children:[u.jsx("option",{value:"",children:"Seleccione un área"}),GN.map(P=>u.jsx("option",{value:P,children:P},P))]})]}),u.jsxs("div",{className:"lg:col-span-3",children:[u.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Descripción de la Acción"}),u.jsx("textarea",{name:"descripcion",value:n.descripcion,onChange:w,rows:3,placeholder:"Detalle de la acción a realizar...",className:D})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"fechaCumplimiento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Cumplimiento"}),u.jsx("input",{type:"date",name:"fechaCumplimiento",value:n.fechaCumplimiento,onChange:w,className:D})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"estado",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado de Avance"}),u.jsx("select",{name:"estado",value:n.estado,onChange:w,className:D,children:mp.map(P=>u.jsx("option",{value:P,children:P},P))})]})]}),p&&u.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:p}),u.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[s&&u.jsx("button",{type:"button",onClick:b,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:s?"Actualizar Acción":"Registrar Acción"})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Tabla de Seguimiento"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[u.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:i,onChange:P=>o(P.target.value),className:D+" md:col-span-1"}),u.jsxs("select",{value:l,onChange:P=>A(P.target.value),className:D,children:[u.jsx("option",{value:"",children:"Filtrar por Área"}),GN.map(P=>u.jsx("option",{value:P,children:P},P))]}),u.jsxs("select",{value:d,onChange:P=>h(P.target.value),className:D,children:[u.jsx("option",{value:"",children:"Filtrar por Estado"}),mp.map(P=>u.jsx("option",{value:P,children:P},P))]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Responsable"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Área"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Descripción"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fechas"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:F.length>0?F.map(P=>u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:P.responsable}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:P.area}),u.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-slate-300 max-w-sm whitespace-normal",children:P.descripcion}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("span",{children:["Reg: ",P.fechaRegistro]}),u.jsxs("span",{className:"font-semibold",children:["Comp: ",P.fechaCumplimiento]})]})}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm",children:u.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${zne[P.estado]}`,children:P.estado})}),u.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[u.jsx("button",{onClick:()=>k(P.id),title:"Cambiar Estado",className:"text-blue-600 hover:text-blue-800 p-1 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/40",children:"🔁"}),u.jsx("button",{onClick:()=>B(P),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),u.jsx("button",{onClick:()=>I(P.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},P.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:6,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No se encontraron acciones con los filtros actuales."})})})]})})]})]})},Mb="planificacionesDocente",pk="actividadesCalendario",Pb="eventosCalendario",qne=({lesson:t,onClose:e,onSave:n})=>{const[r,s]=ee.useState(t),a=o=>{s({...r,[o.target.name]:o.target.value})},i=()=>{n(r),e()};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:o=>o.stopPropagation(),children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),u.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(r).map(([o,l])=>u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:o.replace(/([A-Z])/g," $1")}),u.jsx("textarea",{name:o,value:l,onChange:a,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]},o))}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[u.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),u.jsx("button",{onClick:i,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},Wne=({plan:t,onEditLesson:e,onUseLesson:n})=>u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",t.objetivosAprendizaje]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Indicadores de Evaluación:"})," ",t.indicadoresEvaluacion]})]}),u.jsx("div",{className:"space-y-4",children:t.detallesLeccion.map((r,s)=>u.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[u.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",s+1,": ",r.actividades]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Habilidad (Bloom):"})," ",r.habilidadesBloom]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Perfil de Egreso:"})," ",r.perfilEgreso]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Interdisciplinariedad:"})," ",r.asignaturasInterdisciplinariedad]})]}),u.jsxs("div",{className:"flex gap-2 mt-4",children:[u.jsx("button",{onClick:()=>e(s,r),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300",children:"Editar"}),u.jsx("button",{onClick:()=>n(r,t),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200",children:"Usar para Plan de Clase"})]})]},s))})]}),$ne=({plan:t,onBack:e,onSave:n})=>{const[r,s]=ee.useState(t),a=i=>{const{name:o,value:l}=i.target,[A,d]=o.split(".");s(A==="momentosClase"?h=>({...h,momentosClase:{...h.momentosClase,[d]:l}}):h=>({...h,[o]:l}))};return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:t.nombreClase}),u.jsx("button",{onClick:e,className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),u.jsx("textarea",{name:"momentosClase.inicio",value:r.momentosClase.inicio,onChange:a,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),u.jsx("textarea",{name:"momentosClase.desarrollo",value:r.momentosClase.desarrollo,onChange:a,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),u.jsx("textarea",{name:"momentosClase.cierre",value:r.momentosClase.cierre,onChange:a,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700"})]})]}),u.jsx("div",{className:"text-right mt-6",children:u.jsx("button",{onClick:()=>n(r),className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]})},Yne=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState("list"),[s,a]=ee.useState(null),[i,o]=ee.useState(!1),[l,A]=ee.useState(!1),d={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[h,p]=ee.useState(d);ee.useEffect(()=>{const D=localStorage.getItem(pk);D&&e(JSON.parse(D))},[]),ee.useEffect(()=>{if(n==="summary"&&s)try{const D=localStorage.getItem(Pb),S=(D?JSON.parse(D):[]).some(N=>N.type===Gn.ACTIVIDAD_FOCALIZADA&&N.date===s.fecha&&N.responsables===s.nombre&&N.ubicacion===s.ubicacion);A(S)}catch(D){console.error("Could not check calendar",D)}},[n,s]);const g=D=>{e(D),localStorage.setItem(pk,JSON.stringify(D))},w=D=>{const{name:P,value:S}=D.target;p(N=>({...N,[P]:S}))},b=(D,P,S)=>{p(N=>({...N,tareas:N.tareas.map(T=>T.id===D?{...T,[P]:S}:T)}))},E=()=>{p(D=>({...D,tareas:[...D.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},B=D=>{p(P=>({...P,tareas:P.tareas.filter(S=>S.id!==D)}))},I=async D=>{D.preventDefault(),o(!0);const P=`Basado en la siguiente información de una actividad, genera un objetivo claro y conciso para esta.
        - Nombre: ${h.nombre}
        - Descripción: ${h.descripcion}
        - Tareas: ${h.tareas.map(S=>S.descripcion).join(", ")}
        El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propósito principal de la actividad.`;try{mo("Planificación - Actividad Calendario");const N=await new Sa({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:P}),T={id:crypto.randomUUID(),...h,objetivo:N.text.replace(/(\*\*|\*)/g,"")};g([T,...t]),a(T),r("summary")}catch(S){console.error("Error al generar objetivo con IA:",S),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");const N={id:crypto.randomUUID(),...h,objetivo:"No generado"};g([N,...t]),a(N),r("summary")}finally{o(!1)}},k=D=>{if(!D)return;const P={date:D.fecha,type:Gn.ACTIVIDAD_FOCALIZADA,responsables:D.nombre,ubicacion:D.ubicacion,horario:D.hora};try{const S=localStorage.getItem(Pb),N=S?JSON.parse(S):[],T=[{...P,id:crypto.randomUUID()},...N];localStorage.setItem(Pb,JSON.stringify(T)),A(!0),alert("Actividad añadida al Calendario Académico.")}catch(S){console.error("Error adding to calendar:",S),alert("Hubo un error al agregar la actividad al calendario.")}},F="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return n==="form"?u.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:u.jsxs("form",{onSubmit:I,className:"space-y-8",children:[u.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("input",{name:"nombre",value:h.nombre,onChange:w,placeholder:"Nombre de la Actividad",className:F,required:!0}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx("input",{name:"fecha",type:"date",value:h.fecha,onChange:w,className:F,required:!0}),u.jsx("input",{name:"hora",type:"time",value:h.hora,onChange:w,className:F,required:!0})]}),u.jsx("textarea",{name:"descripcion",value:h.descripcion,onChange:w,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:F,required:!0}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx("input",{name:"ubicacion",value:h.ubicacion,onChange:w,placeholder:"Ubicación",className:F,required:!0}),u.jsx("input",{name:"participantes",value:h.participantes,onChange:w,placeholder:"Participantes",className:F,required:!0})]}),u.jsx("textarea",{name:"recursosGenerales",value:h.recursosGenerales,onChange:w,placeholder:"Recursos Generales Necesarios",rows:2,className:F})]})]}),u.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),u.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md",children:"+ Agregar Tarea"})]}),u.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:h.tareas.map((D,P)=>u.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[u.jsx("button",{type:"button",onClick:()=>B(D.id),className:"absolute top-1 right-1 text-red-500 text-lg",children:"×"}),u.jsx("textarea",{value:D.descripcion,onChange:S=>b(D.id,"descripcion",S.target.value),placeholder:`Descripción de la Tarea ${P+1}`,rows:2,className:F,required:!0}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[u.jsx("input",{value:D.responsable,onChange:S=>b(D.id,"responsable",S.target.value),placeholder:"Responsable",className:F,required:!0}),u.jsx("input",{value:D.recursos,onChange:S=>b(D.id,"recursos",S.target.value),placeholder:"Recursos Necesarios",className:F})]})]},D.id))})]}),u.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[u.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),u.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),u.jsxs("div",{className:"flex justify-end gap-4",children:[u.jsx("button",{type:"button",onClick:()=>r("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg",children:"Cancelar"}),u.jsx("button",{type:"submit",disabled:i,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center",children:i?u.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[u.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[u.jsx("span",{className:"text-2xl",children:"✓"}),u.jsxs("div",{children:[u.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),u.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),u.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[u.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),u.jsxs("div",{className:"space-y-4 text-sm",children:[u.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[u.jsx("strong",{className:"text-slate-500",children:"Nombre:"})," ",u.jsx("span",{children:s.nombre})]}),u.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[u.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"})," ",u.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),u.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[u.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),u.jsx("p",{children:s.descripcion})]}),u.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[u.jsx("strong",{className:"text-slate-500",children:"Ubicación:"})," ",u.jsx("span",{children:s.ubicacion})]}),u.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[u.jsx("strong",{className:"text-slate-500",children:"Participantes:"})," ",u.jsx("span",{children:s.participantes})]}),u.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[u.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),u.jsx("p",{children:s.recursosGenerales})]}),u.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[u.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),u.jsx("p",{children:s.objetivo})]})]}),u.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[u.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),u.jsx("button",{onClick:()=>k(s),disabled:l,className:`font-bold px-4 py-2 rounded-lg transition-colors ${l?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:l?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),u.jsx("button",{onClick:()=>{r("list"),a(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),u.jsx("button",{onClick:()=>{r("form"),p(d)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),u.jsx("div",{className:"space-y-3",children:t.length>0?t.map(D=>u.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:D.nombre}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(D.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",D.ubicacion]})]},D.id)):u.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},Jne=({currentUser:t})=>{const[e,n]=ee.useState([]),r={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[s,a]=ee.useState(r),[i,o]=ee.useState(null),[l,A]=ee.useState(!1),[d,h]=ee.useState(null),[p,g]=ee.useState("unidad"),[w,b]=ee.useState(null),[E,B]=ee.useState(null),I=ee.useMemo(()=>t.asignaturas||[],[t.asignaturas]),k=ee.useMemo(()=>{const K=t.cursos||[],q=new Set;return K.forEach(se=>{se.startsWith("1º")?q.add("1º Medio"):se.startsWith("2º")?q.add("2º Medio"):se.startsWith("3º")?q.add("3º Medio"):se.startsWith("4º")&&q.add("4º Medio")}),Array.from(q)},[t.cursos]);ee.useEffect(()=>{a(K=>({...K,asignatura:I[0]||"",nivel:k[0]||""}))},[I,k]);const F=ee.useCallback(K=>{n(K),localStorage.setItem(Mb,JSON.stringify(K)),window.dispatchEvent(new Event("storage"))},[]);ee.useEffect(()=>{try{const K=localStorage.getItem(Mb);K&&n(JSON.parse(K))}catch(K){console.error("Error al cargar planificaciones de localStorage",K)}},[]);const D=K=>{const{name:q,value:se}=K.target;a(Z=>({...Z,[q]:q==="cantidadClases"?parseInt(se,10):se}))},P=()=>{const{asignatura:K,nivel:q,nombreUnidad:se,contenidos:Z,cantidadClases:X,observaciones:de,ideasParaUnidad:j}=s;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica completa en formato JSON estructurado, basándote en la información proporcionada.

        **Información Base:**
        - Asignatura: ${K}
        - Nivel: ${q}
        - Nombre de la Unidad: "${se}"
        - Contenidos clave a trabajar (insumo principal): "${Z}"
        - Cantidad de clases para la unidad: ${X}
        - Ideas y perspectiva del docente para la unidad: "${j||"Ninguna. Sé creativo."}"
        - Observaciones y énfasis del docente: "${de||"Ninguna"}"

        Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
        1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
        2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
        3.  **detallesLeccion**: Un array con EXACTAMENTE ${X} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
            - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
            - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
            - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
            - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
            - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
            - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

        Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},S=async K=>{if(K.preventDefault(),A(!0),h(null),!s.contenidos||!s.nombreUnidad){h("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),A(!1);return}try{mo("Planificación - Unidad");const q=new Sa({apiKey:void 0}),se=P(),Z={type:Tt.OBJECT,properties:{objetivosAprendizaje:{type:Tt.STRING},indicadoresEvaluacion:{type:Tt.STRING},detallesLeccion:{type:Tt.ARRAY,items:{type:Tt.OBJECT,properties:{objetivosAprendizaje:{type:Tt.STRING},contenidosConceptuales:{type:Tt.STRING},habilidadesBloom:{type:Tt.STRING},perfilEgreso:{type:Tt.STRING},actividades:{type:Tt.STRING},asignaturasInterdisciplinariedad:{type:Tt.STRING}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},X=await q.models.generateContent({model:"gemini-2.5-flash",contents:se,config:{responseMimeType:"application/json",responseSchema:Z}}),de=JSON.parse(X.text),j={id:(i==null?void 0:i.id)||crypto.randomUUID(),fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Unidad",asignatura:s.asignatura,nivel:s.nivel,nombreUnidad:s.nombreUnidad,contenidos:s.contenidos,cantidadClases:s.cantidadClases,observaciones:s.observaciones,ideasParaUnidad:s.ideasParaUnidad,objetivosAprendizaje:de.objetivosAprendizaje,indicadoresEvaluacion:de.indicadoresEvaluacion,detallesLeccion:de.detallesLeccion},W=i?e.map(J=>J.id===i.id?j:J):[j,...e];F(W),o(j)}catch(q){console.error("Error al generar planificación con IA",q),h("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{A(!1)}},N=async(K,q)=>{A(!0),h(null);const se=`A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
        
        - Asignatura: ${q.asignatura}
        - Nivel: ${q.nivel}
        - Objetivo de la clase: ${K.objetivosAprendizaje}
        - Contenidos: ${K.contenidosConceptuales}
        - Actividades sugeridas: ${K.actividades}
        
        Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{mo("Planificación - Utilizar Clase");const Z=new Sa({apiKey:void 0}),X={type:Tt.OBJECT,properties:{inicio:{type:Tt.STRING},desarrollo:{type:Tt.STRING},cierre:{type:Tt.STRING}},required:["inicio","desarrollo","cierre"]},de=await Z.models.generateContent({model:"gemini-2.5-flash",contents:se,config:{responseMimeType:"application/json",responseSchema:X}}),j=JSON.parse(de.text),W={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Clase",asignatura:q.asignatura,nivel:q.nivel,contenidos:K.contenidosConceptuales,observaciones:"",nombreClase:K.actividades,duracionClase:80,momentosClase:j,detalleLeccionOrigen:K},J=JSON.parse(localStorage.getItem(Mb)||"[]"),ne=[W,...J];F(ne),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),g("clase")}catch(Z){console.error("Error al generar plan de clase con IA",Z),h("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{A(!1)}},T=K=>{K.tipo==="Unidad"&&(a({asignatura:K.asignatura,nivel:K.nivel,nombreUnidad:K.nombreUnidad,contenidos:K.contenidos,cantidadClases:K.cantidadClases,observaciones:K.observaciones,ideasParaUnidad:K.ideasParaUnidad||""}),o(K),window.scrollTo({top:0,behavior:"smooth"}))},V=K=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?")){const q=e.filter(se=>se.id!==K);F(q),(i==null?void 0:i.id)===K&&(o(null),a(r))}},M=(K,q)=>{i&&B({planId:i.id,lessonIndex:K,lessonData:q})},U=K=>{if(!E)return;const{planId:q,lessonIndex:se}=E,Z=e.map(de=>{if(de.id===q&&de.tipo==="Unidad"){const j=[...de.detallesLeccion];return j[se]=K,{...de,detallesLeccion:j}}return de});F(Z);const X=Z.find(de=>de.id===q);X&&o(X),B(null)},O="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",G=()=>u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."}),u.jsxs("form",{onSubmit:S,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),u.jsx("select",{name:"asignatura",value:s.asignatura,onChange:D,className:O,children:I.length>0?I.map(K=>u.jsx("option",{value:K,children:K},K)):u.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),u.jsx("select",{name:"nivel",value:s.nivel,onChange:D,className:O,children:k.length>0?k.map(K=>u.jsx("option",{value:K,children:K},K)):u.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",name:"nombreUnidad",value:s.nombreUnidad,onChange:D,className:O,placeholder:"Ej: La Célula y sus procesos"})]}),u.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[u.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("textarea",{name:"contenidos",value:s.contenidos,onChange:D,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:O})]}),u.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[u.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),u.jsx("textarea",{name:"ideasParaUnidad",value:s.ideasParaUnidad,onChange:D,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:O})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),u.jsx("input",{type:"number",name:"cantidadClases",value:s.cantidadClases,onChange:D,className:O,min:"1",max:"20"})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),u.jsx("textarea",{name:"observaciones",value:s.observaciones,onChange:D,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:O})]})]}),u.jsx("div",{className:"pt-4 text-right",children:u.jsx("button",{type:"submit",disabled:l,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?u.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):i?"Regenerar":"Generar Plan"})}),d&&u.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:d})]})]}),i&&u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),u.jsx(Wne,{plan:i,onEditLesson:M,onUseLesson:N})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),u.jsx("div",{className:"space-y-4",children:e.filter(K=>K.tipo==="Unidad").length>0?e.filter(K=>K.tipo==="Unidad").map(K=>u.jsx("div",{className:`p-4 border rounded-lg ${(i==null?void 0:i.id)===K.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:K.nombreUnidad}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(K.fechaCreacion).toLocaleString("es-CL")]}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",K.contenidos]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>T(K),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver y Editar"}),u.jsx("button",{onClick:()=>V(K.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]})},K.id)):u.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),ie=()=>{const K=e.filter(q=>q.tipo==="Clase").sort((q,se)=>new Date(se.fechaCreacion).getTime()-new Date(q.fechaCreacion).getTime());return w?u.jsx($ne,{plan:w,onBack:()=>b(null),onSave:q=>{const se=e.map(Z=>Z.id===q.id?q:Z);F(se),b(q)}}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),u.jsx("div",{className:"space-y-4",children:K.length>0?K.map(q=>u.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:q.nombreClase}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(q.fechaCreacion).toLocaleString("es-CL")]}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",q.contenidos]})]}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("button",{onClick:()=>b(q),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},q.id)):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación"}),u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:u.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[u.jsx("button",{onClick:()=>g("unidad"),className:`${p==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),u.jsx("button",{onClick:()=>g("clase"),className:`${p==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),u.jsx("button",{onClick:()=>g("calendario"),className:`${p==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),p==="unidad"&&G(),p==="clase"&&ie(),p==="calendario"&&u.jsx(Yne,{}),E&&u.jsx(qne,{lesson:E.lessonData,onClose:()=>B(null),onSave:U})]})},gk="eventosCalendario",Xne=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],Zne=t=>{switch(t.type){case Gn.EVALUACION:return`${t.subtype} - ${t.asignatura}`;case Gn.ACTO:return`Acto: ${t.ubicacion}`;case Gn.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case Gn.SALIDA_PEDAGOGICA:return`Salida: ${t.ubicacion}`;default:return"Evento"}},ere=({isOpen:t,onClose:e,onSave:n,onDelete:r,event:s,date:a})=>{const[i,o]=ee.useState({});ee.useEffect(()=>{o(s||{type:Gn.EVALUACION,subtype:Nf.PRUEBA_PARCIAL,asignatura:Ho[0],curso:$s[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[s]);const l="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",A=w=>{const{name:b,value:E}=w.target;o(B=>({...B,[b]:E}))},d=w=>{o(b=>{if(b.type===Gn.SALIDA_PEDAGOGICA){const E=b.cursos||[],B=E.includes(w)?E.filter(I=>I!==w):[...E,w];return{...b,cursos:B.sort()}}return b})},h=w=>{switch(w.preventDefault(),i.type){case Gn.EVALUACION:n({date:a,type:Gn.EVALUACION,subtype:i.subtype,asignatura:i.asignatura,curso:i.curso,contenidos:i.contenidos,enlace:i.subtype===Nf.RUBRICA||i.subtype===Nf.PAUTA_COTEJO?i.enlace:void 0});break;case Gn.ACTO:n({date:a,type:Gn.ACTO,responsables:i.responsables,ubicacion:i.ubicacion,horario:i.horario});break;case Gn.ACTIVIDAD_FOCALIZADA:n({date:a,type:Gn.ACTIVIDAD_FOCALIZADA,responsables:i.responsables,ubicacion:i.ubicacion,horario:i.horario});break;case Gn.SALIDA_PEDAGOGICA:n({date:a,type:Gn.SALIDA_PEDAGOGICA,responsable:i.responsable,ubicacion:i.ubicacion,cursos:i.cursos});break}e()};if(!t)return null;const p=new Date(`${a}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),g=()=>{switch(i.type){case Gn.EVALUACION:return u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subtipo"}),u.jsx("select",{id:"subtype",name:"subtype",value:i.subtype,onChange:A,required:!0,className:l,children:Sq.map(w=>u.jsx("option",{value:w,children:w},w))})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),u.jsx("select",{id:"asignatura",name:"asignatura",value:i.asignatura,onChange:A,required:!0,className:l,children:Ho.map(w=>u.jsx("option",{value:w,children:w},w))})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),u.jsx("select",{id:"curso",name:"curso",value:i.curso,onChange:A,required:!0,className:l,children:$s.map(w=>u.jsx("option",{value:w,children:w},w))})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos"}),u.jsx("textarea",{id:"contenidos",name:"contenidos",value:i.contenidos,onChange:A,required:!0,rows:3,className:l})]}),(i.subtype===Nf.RUBRICA||i.subtype===Nf.PAUTA_COTEJO)&&u.jsxs("div",{children:[u.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),u.jsx("input",{id:"enlace",name:"enlace",type:"url",value:i.enlace,onChange:A,placeholder:"https://...",className:l})]})]});case Gn.ACTO:case Gn.ACTIVIDAD_FOCALIZADA:return u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsables"}),u.jsx("input",{id:"responsables",name:"responsables",type:"text",value:i.responsables,onChange:A,required:!0,className:l})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación"}),u.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:i.ubicacion,onChange:A,required:!0,className:l})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Horario"}),u.jsx("input",{id:"horario",name:"horario",type:"text",value:i.horario,onChange:A,required:!0,className:l})]})]});case Gn.SALIDA_PEDAGOGICA:return u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),u.jsx("input",{id:"responsable",name:"responsable",type:"text",value:i.responsable,onChange:A,required:!0,className:l})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),u.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:i.ubicacion,onChange:A,required:!0,className:l})]}),u.jsxs("fieldset",{children:[u.jsx("legend",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),u.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border p-2 rounded-md dark:border-slate-600 text-slate-700 dark:text-slate-300",children:$s.map(w=>u.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[u.jsx("input",{type:"checkbox",checked:(i.cursos||[]).includes(w),onChange:()=>d(w),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),u.jsx("span",{children:w})]},w))})]})]});default:return null}};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:e,children:u.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg animate-fade-in-up",onClick:w=>w.stopPropagation(),children:u.jsxs("form",{onSubmit:h,children:[u.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:s?"Editar Evento":"Agregar Evento"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6 font-semibold",children:p}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),u.jsx("select",{id:"type",name:"type",value:i.type,onChange:A,className:l,children:Object.values(Gn).map(w=>u.jsx("option",{value:w,children:w},w))})]}),g()]})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 px-6 py-4 rounded-b-xl flex justify-between items-center",children:[u.jsx("div",{children:s&&r&&u.jsx("button",{type:"button",onClick:r,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold",children:"Eliminar"})}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar"})]})]})]})})})},tre=({profile:t})=>{const[e,n]=ee.useState(new Date),[r,s]=ee.useState([]),[a,i]=ee.useState(Object.values(Gn)),[o,l]=ee.useState(!1),[A,d]=ee.useState(null),[h,p]=ee.useState(null);ee.useEffect(()=>{try{const F=localStorage.getItem(gk);F&&s(JSON.parse(F))}catch(F){console.error("Error al cargar eventos de localStorage",F)}},[]),ee.useEffect(()=>{try{localStorage.setItem(gk,JSON.stringify(r))}catch(F){console.error("Error al guardar eventos en localStorage",F)}},[r]);const g=ee.useMemo(()=>{const F=e.getFullYear(),D=e.getMonth(),P=new Date(F,D,1).getDay(),S=new Date(F,D+1,0).getDate(),N=[];let T=1;for(let V=0;V<6;V++){const M=[];for(let U=0;U<7;U++)V===0&&U<P||T>S?M.push(null):(M.push(new Date(F,D,T)),T++);if(N.push(M),T>S)break}return N},[e]),w=F=>{i(D=>D.includes(F)?D.filter(P=>P!==F):[...D,F])},b=()=>{a.length===Object.values(Gn).length?i([]):i(Object.values(Gn))},E=F=>{t!==nn.ESTUDIANTE&&(d(F.toISOString().split("T")[0]),p(null),l(!0))},B=(F,D)=>{D.stopPropagation(),t!==nn.ESTUDIANTE&&(d(F.date),p(F),l(!0))},I=F=>{s(h?r.map(D=>D.id===h.id?{...F,id:D.id}:D):[...r,{...F,id:crypto.randomUUID()}])},k=()=>{h&&(s(r.filter(F=>F.id!==h.id)),l(!1))};return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Calendario Académico"}),u.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:u.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),u.jsx("div",{className:"ml-3",children:u.jsx("p",{className:"text-sm",children:"Recuerda que el calendario escolar completo se encuentra disponible en la intranet. Este calendario es de exclusivo uso evaluativo y académico."})})]})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Filtrar por tipo de evento:"}),u.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[u.jsx("button",{onClick:b,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-slate-700 text-white hover:bg-slate-600 dark:bg-slate-600 dark:hover:bg-slate-500 transition-colors",children:a.length===Object.values(Gn).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(Gn).map(F=>u.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2 ${a.includes(F)?`shadow-sm ${g0[F].color}`:"bg-slate-100 text-slate-600 hover:bg-slate-200 opacity-70 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600 dark:opacity-60"}`,children:[u.jsx("input",{type:"checkbox",checked:a.includes(F),onChange:()=>w(F),className:"hidden"}),u.jsx("span",{children:g0[F].icon}),u.jsx("span",{children:g0[F].label})]},F))]})]}),u.jsxs("div",{className:"border dark:border-slate-700 rounded-lg overflow-hidden",children:[u.jsxs("header",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 border-b dark:border-slate-700",children:[u.jsx("button",{onClick:()=>n(new Date(e.setMonth(e.getMonth()-1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:"<"}),u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize",children:e.toLocaleString("es-CL",{month:"long",year:"numeric"})}),u.jsx("button",{onClick:()=>n(new Date(e.setMonth(e.getMonth()+1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:">"}),u.jsx("button",{onClick:()=>n(new Date),className:"ml-4 bg-slate-800 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Hoy"})]}),u.jsx("div",{className:"grid grid-cols-7",children:Xne.map(F=>u.jsx("div",{className:"text-center font-semibold text-slate-500 dark:text-slate-400 text-sm py-3 bg-slate-50 dark:bg-slate-700/50 border-b border-r dark:border-slate-700",children:F},F))}),u.jsx("div",{className:"grid grid-cols-7 grid-rows-6",children:g.flat().map((F,D)=>{const P=F&&F.toDateString()===new Date().toDateString(),S=F==null?void 0:F.toISOString().split("T")[0],N=S?r.filter(T=>T.date===S&&a.includes(T.type)):[];return u.jsx("div",{onClick:()=>F&&E(F),className:`border-b border-r dark:border-slate-700 p-2 h-36 flex flex-col overflow-hidden relative group ${F?t!==nn.ESTUDIANTE?"cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50":"":"bg-slate-50 dark:bg-slate-800/50"}`,children:F&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:`self-end text-sm font-semibold ${P?"bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-600 dark:text-slate-300"}`,children:F.getDate()}),u.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:N.map(T=>u.jsxs("div",{onClick:V=>B(T,V),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${g0[T.type].color}`,children:[u.jsx("span",{children:g0[T.type].icon}),u.jsx("span",{className:"truncate",children:Zne(T)})]},T.id))}),t!==nn.ESTUDIANTE&&u.jsx("button",{className:"absolute bottom-1 right-1 bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-lg font-bold",children:"+"})]})},D)})})]}),o&&u.jsx(ere,{isOpen:o,onClose:()=>l(!1),onSave:I,onDelete:k,event:h,date:A})]})},xk="anunciosMuro",vk=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],nre=({currentUser:t})=>{const[e,n]=ee.useState(()=>{try{const I=localStorage.getItem(xk);return I?JSON.parse(I):[]}catch(I){return console.error("Error al leer anuncios de localStorage en la inicialización",I),[]}}),[r,s]=ee.useState({titulo:"",mensaje:"",adjunto:""}),[a,i]=ee.useState({tipo:"Todos",cursos:[]});ee.useEffect(()=>{try{localStorage.setItem(xk,JSON.stringify(e))}catch(I){console.error("Error al guardar anuncios en localStorage",I)}},[e]);const o=I=>{const{name:k,value:F}=I.target;s(D=>({...D,[k]:F}))},l=I=>{i({tipo:I,cursos:I==="Cursos"?[]:void 0})},A=I=>{i(k=>{var D;if(k.tipo!=="Cursos")return k;const F=(D=k.cursos)!=null&&D.includes(I)?k.cursos.filter(P=>P!==I):[...k.cursos||[],I];return{...k,cursos:F}})},d=I=>{if(I.preventDefault(),!r.titulo||!r.mensaje){alert("Título y mensaje son obligatorios.");return}if(a.tipo==="Cursos"&&(!a.cursos||a.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}const k={id:crypto.randomUUID(),fechaPublicacion:new Date().toISOString(),destacado:!1,autor:t.nombreCompleto,profileCreador:t.profile,destinatarios:a,...r};n(F=>[k,...F]),s({titulo:"",mensaje:"",adjunto:""}),i({tipo:"Todos",cursos:[]})},h=I=>{window.confirm("¿Está seguro de que desea eliminar este anuncio?")&&n(k=>k.filter(F=>F.id!==I))},p=I=>{n(k=>k.map(F=>F.id===I?{...F,destacado:!F.destacado}:F))},g=ee.useMemo(()=>[...e].sort((I,k)=>I.destacado&&!k.destacado?-1:!I.destacado&&k.destacado?1:new Date(k.fechaPublicacion).getTime()-new Date(I.fechaPublicacion).getTime()),[e]),w=ee.useMemo(()=>{const I=t.profile,k=t.curso;return g.filter(F=>{if(I===nn.SUBDIRECCION)return!0;if(!F.destinatarios)return I!==nn.ESTUDIANTE;const{tipo:D,cursos:P}=F.destinatarios;return D==="Todos"||D==="Profesores"&&I===nn.PROFESORADO||D==="Coordinación TP"&&I===nn.COORDINACION_TP?!0:D==="Cursos"?I===nn.ESTUDIANTE?P==null?void 0:P.includes(k||""):!0:!1})},[g,t]),b=I=>t.profile===nn.ESTUDIANTE?!1:t.profile===nn.SUBDIRECCION||t.profile===I.profileCreador,E=()=>t.profile===nn.SUBDIRECCION||t.profile===nn.PROFESORADO,B="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),t.profile!==nn.ESTUDIANTE?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),u.jsxs("form",{onSubmit:d,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),u.jsx("input",{type:"text",name:"titulo",value:r.titulo,onChange:o,required:!0,className:B})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),u.jsx("textarea",{name:"mensaje",value:r.mensaje,onChange:o,required:!0,rows:4,className:B})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),u.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(I=>u.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"destinatarioTipo",value:I,checked:a.tipo===I,onChange:()=>l(I),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),u.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:I.replace("Coordinación TP","Coord. TP")})]},I))})]}),a.tipo==="Cursos"&&u.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:$s.map(I=>{var k;return u.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:(k=a.cursos)==null?void 0:k.includes(I),onChange:()=>A(I),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),u.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:I})]},I)})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),u.jsx("input",{type:"url",name:"adjunto",value:r.adjunto,onChange:o,placeholder:"https://ejemplo.com/documento.pdf",className:B})]}),u.jsx("div",{className:"pt-2 text-right",children:u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:w.length>0?w.map((I,k)=>{const F=vk[k%vk.length];return u.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${F.bg} ${F.rotate}`,children:[I.destacado&&u.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:u.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),u.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:I.titulo}),u.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:I.mensaje}),I.adjunto&&u.jsx("div",{className:"font-sans text-sm mb-4",children:u.jsxs("a",{href:I.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),u.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold",children:I.autor}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(I.fechaPublicacion).toLocaleString("es-CL")})]}),u.jsxs("div",{className:"flex items-center",children:[E()&&u.jsx("button",{onClick:()=>p(I.id),title:I.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:u.jsx("span",{className:`text-xl transition-opacity ${I.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),b(I)&&u.jsx("button",{onClick:()=>h(I.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},I.id)}):u.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md text-center col-span-full",children:u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay anuncios para mostrar con los filtros actuales."})})})]})},jb="actasDeReunion",hL=window.SpeechRecognition||window.webkitSpeechRecognition,yk=!!hL,rre=({isListening:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),sre=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState(null),[s,a]=ee.useState({tipoReunion:Ib[0],asistentes:"",textoReunion:""}),[i,o]=ee.useState(!1),[l,A]=ee.useState(!1),[d,h]=ee.useState(null),p=ee.useRef(null);ee.useEffect(()=>{try{const F=localStorage.getItem(jb);if(F){const D=JSON.parse(F);e(D),D.length>0&&!n&&r(D[0])}}catch(F){console.error("Error al leer actas de localStorage",F)}},[n]);const g=F=>{const{name:D,value:P}=F.target;a(S=>({...S,[D]:P}))},w=ee.useCallback(()=>{var F;if(!yk){h("El reconocimiento de voz no es compatible con este navegador.");return}i?(F=p.current)==null||F.stop():(p.current=new hL,p.current.lang="es-CL",p.current.continuous=!0,p.current.interimResults=!0,p.current.onresult=D=>{let P="";for(let S=D.resultIndex;S<D.results.length;++S)D.results[S].isFinal&&(P+=D.results[S][0].transcript+". ");a(S=>({...S,textoReunion:S.textoReunion+P}))},p.current.onstart=()=>o(!0),p.current.onend=()=>o(!1),p.current.onerror=D=>{console.error("Speech recognition error",D.error),h(`Error de reconocimiento: ${D.error}`),o(!1)},p.current.start())},[i]),b=async F=>{F.preventDefault();const{tipoReunion:D,asistentes:P,textoReunion:S}=s;if(!D||!P.trim()||!S.trim()){h("Todos los campos son obligatorios.");return}A(!0),h(null);try{mo("Generador de Actas");const N=new Sa({apiKey:void 0}),T=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${S}"
                
                Asistentes a la reunión para referencia de nombres: ${P}
            `,V={type:Tt.OBJECT,properties:{temas:{type:Tt.ARRAY,description:"Lista de los principales temas tratados en la reunión.",items:{type:Tt.STRING}},acuerdos:{type:Tt.ARRAY,description:"Lista de los acuerdos o decisiones tomadas.",items:{type:Tt.STRING}},plazos:{type:Tt.ARRAY,description:"Lista de fechas límite o plazos mencionados en el texto.",items:{type:Tt.STRING}},responsables:{type:Tt.ARRAY,description:"Lista de las personas asignadas como responsables de tareas.",items:{type:Tt.STRING}}},required:["temas","acuerdos","plazos","responsables"]},M=await N.models.generateContent({model:"gemini-2.5-flash",contents:T,config:{responseMimeType:"application/json",responseSchema:V}}),U=JSON.parse(M.text),O={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),...s,...U},G=[O,...t];e(G),localStorage.setItem(jb,JSON.stringify(G)),a({tipoReunion:Ib[0],asistentes:"",textoReunion:""}),r(O)}catch(N){console.error("Error al analizar acta con IA:",N),h("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{A(!1)}},E=F=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?")){const D=t.filter(P=>P.id!==F);e(D),localStorage.setItem(jb,JSON.stringify(D)),(n==null?void 0:n.id)===F&&r(D.length>0?D[0]:null)}},B=F=>{r(F)},I=F=>F.temas||F.acuerdos||F.plazos||F.responsables?u.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),F.temas&&F.temas.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),u.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:F.temas.map((P,S)=>u.jsx("li",{children:P},S))})]}),F.acuerdos&&F.acuerdos.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),u.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:F.acuerdos.map((P,S)=>u.jsx("li",{children:P},S))})]}),F.plazos&&F.plazos.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),u.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:F.plazos.map((P,S)=>u.jsx("li",{children:P},S))})]}),F.responsables&&F.responsables.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),u.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:F.responsables.map((P,S)=>u.jsx("li",{children:P},S))})]})]}):null,k="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[u.jsxs("div",{className:"md:col-span-1 space-y-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),u.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:u.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),u.jsx("div",{className:"ml-3",children:u.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",u.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),u.jsxs("form",{onSubmit:b,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),u.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:g,required:!0,className:k,children:Ib.map(F=>u.jsx("option",{value:F,children:F},F))})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),u.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:g,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:k})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),u.jsxs("div",{className:"relative",children:[u.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:g,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:k}),yk&&u.jsx("button",{type:"button",onClick:w,title:i?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${i?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:u.jsx(rre,{isListening:i})})]})]}),d&&u.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:d}),u.jsx("div",{className:"pt-2 text-right",children:u.jsx("button",{type:"submit",disabled:l,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?u.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),u.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.sort((F,D)=>new Date(D.fechaCreacion).getTime()-new Date(F.fechaCreacion).getTime()).map(F=>u.jsxs("button",{onClick:()=>B(F),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===F.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[u.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:F.tipoReunion}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(F.fechaCreacion).toLocaleDateString("es-CL")})]},F.id)):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),u.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?u.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${n.tipoReunion}`}),u.jsx("button",{onClick:()=>E(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[u.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),u.jsx("h2",{children:"Asistentes"}),u.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((F,D)=>F.trim()&&u.jsx("li",{children:F.trim()},D))}),I(n),u.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),u.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:u.jsx("p",{children:n.textoReunion})})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[u.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),u.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},are="modulepreload",ire=function(t){return"/"+t},wk={},QE=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let i=function(A){return Promise.all(A.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=i(n.map(A=>{if(A=ire(A),A in wk)return;wk[A]=!0;const d=A.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":are,d||(p.as="script"),p.crossOrigin="",p.href=A,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((g,w)=>{p.addEventListener("load",g),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${A}`)))})}))}function a(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function Lr(t){"@babel/helpers - typeof";return Lr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lr(t)}var Bi=Uint8Array,Qo=Uint16Array,H5=Int32Array,_y=new Bi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Sy=new Bi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),HE=new Bi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mL=function(t,e){for(var n=new Qo(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var s=new H5(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)s[a]=a-n[r]<<5|r;return{b:n,r:s}},pL=mL(_y,2),gL=pL.b,VE=pL.r;gL[28]=258,VE[258]=28;var xL=mL(Sy,0),ore=xL.b,bk=xL.r,GE=new Qo(32768);for(var ns=0;ns<32768;++ns){var rd=(ns&43690)>>1|(ns&21845)<<1;rd=(rd&52428)>>2|(rd&13107)<<2,rd=(rd&61680)>>4|(rd&3855)<<4,GE[ns]=((rd&65280)>>8|(rd&255)<<8)>>1}var AA=function(t,e,n){for(var r=t.length,s=0,a=new Qo(e);s<r;++s)t[s]&&++a[t[s]-1];var i=new Qo(e);for(s=1;s<e;++s)i[s]=i[s-1]+a[s-1]<<1;var o;if(n){o=new Qo(1<<e);var l=15-e;for(s=0;s<r;++s)if(t[s])for(var A=s<<4|t[s],d=e-t[s],h=i[t[s]-1]++<<d,p=h|(1<<d)-1;h<=p;++h)o[GE[h]>>l]=A}else for(o=new Qo(r),s=0;s<r;++s)t[s]&&(o[s]=GE[i[t[s]-1]++]>>15-t[s]);return o},Gd=new Bi(288);for(var ns=0;ns<144;++ns)Gd[ns]=8;for(var ns=144;ns<256;++ns)Gd[ns]=9;for(var ns=256;ns<280;++ns)Gd[ns]=7;for(var ns=280;ns<288;++ns)Gd[ns]=8;var Tg=new Bi(32);for(var ns=0;ns<32;++ns)Tg[ns]=5;var lre=AA(Gd,9,0),cre=AA(Gd,9,1),Are=AA(Tg,5,0),ure=AA(Tg,5,1),Ob=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},ec=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},Qb=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},V5=function(t){return(t+7)/8|0},vL=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Bi(t.subarray(e,n))},dre=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],sc=function(t,e,n){var r=new Error(e||dre[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,sc),!n)throw r;return r},fre=function(t,e,n,r){var s=t.length,a=0;if(!s||e.f&&!e.l)return n||new Bi(0);var i=!n,o=i||e.i!=2,l=e.i;i&&(n=new Bi(s*3));var A=function(ve){var ae=n.length;if(ve>ae){var Re=new Bi(Math.max(ae*2,ve));Re.set(n),n=Re}},d=e.f||0,h=e.p||0,p=e.b||0,g=e.l,w=e.d,b=e.m,E=e.n,B=s*8;do{if(!g){d=ec(t,h,1);var I=ec(t,h+1,3);if(h+=3,I)if(I==1)g=cre,w=ure,b=9,E=5;else if(I==2){var P=ec(t,h,31)+257,S=ec(t,h+10,15)+4,N=P+ec(t,h+5,31)+1;h+=14;for(var T=new Bi(N),V=new Bi(19),M=0;M<S;++M)V[HE[M]]=ec(t,h+M*3,7);h+=S*3;for(var U=Ob(V),O=(1<<U)-1,G=AA(V,U,1),M=0;M<N;){var ie=G[ec(t,h,O)];h+=ie&15;var k=ie>>4;if(k<16)T[M++]=k;else{var K=0,q=0;for(k==16?(q=3+ec(t,h,3),h+=2,K=T[M-1]):k==17?(q=3+ec(t,h,7),h+=3):k==18&&(q=11+ec(t,h,127),h+=7);q--;)T[M++]=K}}var se=T.subarray(0,P),Z=T.subarray(P);b=Ob(se),E=Ob(Z),g=AA(se,b,1),w=AA(Z,E,1)}else sc(1);else{var k=V5(h)+4,F=t[k-4]|t[k-3]<<8,D=k+F;if(D>s){l&&sc(0);break}o&&A(p+F),n.set(t.subarray(k,D),p),e.b=p+=F,e.p=h=D*8,e.f=d;continue}if(h>B){l&&sc(0);break}}o&&A(p+131072);for(var X=(1<<b)-1,de=(1<<E)-1,j=h;;j=h){var K=g[Qb(t,h)&X],W=K>>4;if(h+=K&15,h>B){l&&sc(0);break}if(K||sc(2),W<256)n[p++]=W;else if(W==256){j=h,g=null;break}else{var J=W-254;if(W>264){var M=W-257,ne=_y[M];J=ec(t,h,(1<<ne)-1)+gL[M],h+=ne}var oe=w[Qb(t,h)&de],ue=oe>>4;oe||sc(3),h+=oe&15;var Z=ore[ue];if(ue>3){var ne=Sy[ue];Z+=Qb(t,h)&(1<<ne)-1,h+=ne}if(h>B){l&&sc(0);break}o&&A(p+131072);var me=p+J;if(p<Z){var ge=a-Z,ke=Math.min(Z,me);for(ge+p<0&&sc(3);p<ke;++p)n[p]=r[ge+p]}for(;p<me;++p)n[p]=n[p-Z]}}e.l=g,e.p=j,e.b=p,e.f=d,g&&(d=1,e.m=b,e.d=w,e.n=E)}while(!d);return p!=n.length&&i?vL(n,0,p):n.subarray(0,p)},YA=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},gp=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},Hb=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var s=n.length,a=n.slice();if(!s)return{t:wL,l:0};if(s==1){var i=new Bi(n[0].s+1);return i[n[0].s]=1,{t:i,l:1}}n.sort(function(D,P){return D.f-P.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],A=0,d=1,h=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=s-1;)o=n[n[A].f<n[h].f?A++:h++],l=n[A!=d&&n[A].f<n[h].f?A++:h++],n[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var p=a[0].s,r=1;r<s;++r)a[r].s>p&&(p=a[r].s);var g=new Qo(p+1),w=zE(n[d-1],g,0);if(w>e){var r=0,b=0,E=w-e,B=1<<E;for(a.sort(function(P,S){return g[S.s]-g[P.s]||P.f-S.f});r<s;++r){var I=a[r].s;if(g[I]>e)b+=B-(1<<w-g[I]),g[I]=e;else break}for(b>>=E;b>0;){var k=a[r].s;g[k]<e?b-=1<<e-g[k]++-1:++r}for(;r>=0&&b;--r){var F=a[r].s;g[F]==e&&(--g[F],++b)}w=e}return{t:new Bi(g),l:w}},zE=function(t,e,n){return t.s==-1?Math.max(zE(t.l,e,n+1),zE(t.r,e,n+1)):e[t.s]=n},Ck=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Qo(++e),r=0,s=t[0],a=1,i=function(l){n[r++]=l},o=1;o<=e;++o)if(t[o]==s&&o!=e)++a;else{if(!s&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(s),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(s);a=1,s=t[o]}return{c:n.subarray(0,r),n:e}},xp=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},yL=function(t,e,n){var r=n.length,s=V5(e+2);t[s]=r&255,t[s+1]=r>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var a=0;a<r;++a)t[s+a+4]=n[a];return(s+4+r)*8},Ek=function(t,e,n,r,s,a,i,o,l,A,d){YA(e,d++,n),++s[256];for(var h=Hb(s,15),p=h.t,g=h.l,w=Hb(a,15),b=w.t,E=w.l,B=Ck(p),I=B.c,k=B.n,F=Ck(b),D=F.c,P=F.n,S=new Qo(19),N=0;N<I.length;++N)++S[I[N]&31];for(var N=0;N<D.length;++N)++S[D[N]&31];for(var T=Hb(S,7),V=T.t,M=T.l,U=19;U>4&&!V[HE[U-1]];--U);var O=A+5<<3,G=xp(s,Gd)+xp(a,Tg)+i,ie=xp(s,p)+xp(a,b)+i+14+3*U+xp(S,V)+2*S[16]+3*S[17]+7*S[18];if(l>=0&&O<=G&&O<=ie)return yL(e,d,t.subarray(l,l+A));var K,q,se,Z;if(YA(e,d,1+(ie<G)),d+=2,ie<G){K=AA(p,g,0),q=p,se=AA(b,E,0),Z=b;var X=AA(V,M,0);YA(e,d,k-257),YA(e,d+5,P-1),YA(e,d+10,U-4),d+=14;for(var N=0;N<U;++N)YA(e,d+3*N,V[HE[N]]);d+=3*U;for(var de=[I,D],j=0;j<2;++j)for(var W=de[j],N=0;N<W.length;++N){var J=W[N]&31;YA(e,d,X[J]),d+=V[J],J>15&&(YA(e,d,W[N]>>5&127),d+=W[N]>>12)}}else K=lre,q=Gd,se=Are,Z=Tg;for(var N=0;N<o;++N){var ne=r[N];if(ne>255){var J=ne>>18&31;gp(e,d,K[J+257]),d+=q[J+257],J>7&&(YA(e,d,ne>>23&31),d+=_y[J]);var oe=ne&31;gp(e,d,se[oe]),d+=Z[oe],oe>3&&(gp(e,d,ne>>5&8191),d+=Sy[oe])}else gp(e,d,K[ne]),d+=q[ne]}return gp(e,d,K[256]),d+q[256]},hre=new H5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),wL=new Bi(0),mre=function(t,e,n,r,s,a){var i=a.z||t.length,o=new Bi(r+i+5*(1+Math.ceil(i/7e3))+s),l=o.subarray(r,o.length-s),A=a.l,d=(a.r||0)&7;if(e){d&&(l[0]=a.r>>3);for(var h=hre[e-1],p=h>>13,g=h&8191,w=(1<<n)-1,b=a.p||new Qo(32768),E=a.h||new Qo(w+1),B=Math.ceil(n/3),I=2*B,k=function(Je){return(t[Je]^t[Je+1]<<B^t[Je+2]<<I)&w},F=new H5(25e3),D=new Qo(288),P=new Qo(32),S=0,N=0,T=a.i||0,V=0,M=a.w||0,U=0;T+2<i;++T){var O=k(T),G=T&32767,ie=E[O];if(b[G]=ie,E[O]=G,M<=T){var K=i-T;if((S>7e3||V>24576)&&(K>423||!A)){d=Ek(t,l,0,F,D,P,N,V,U,T-U,d),V=S=N=0,U=T;for(var q=0;q<286;++q)D[q]=0;for(var q=0;q<30;++q)P[q]=0}var se=2,Z=0,X=g,de=G-ie&32767;if(K>2&&O==k(T-de))for(var j=Math.min(p,K)-1,W=Math.min(32767,T),J=Math.min(258,K);de<=W&&--X&&G!=ie;){if(t[T+se]==t[T+se-de]){for(var ne=0;ne<J&&t[T+ne]==t[T+ne-de];++ne);if(ne>se){if(se=ne,Z=de,ne>j)break;for(var oe=Math.min(de,ne-2),ue=0,q=0;q<oe;++q){var me=T-de+q&32767,ge=b[me],ke=me-ge&32767;ke>ue&&(ue=ke,ie=me)}}}G=ie,ie=b[G],de+=G-ie&32767}if(Z){F[V++]=268435456|VE[se]<<18|bk[Z];var ve=VE[se]&31,ae=bk[Z]&31;N+=_y[ve]+Sy[ae],++D[257+ve],++P[ae],M=T+se,++S}else F[V++]=t[T],++D[t[T]]}}for(T=Math.max(T,M);T<i;++T)F[V++]=t[T],++D[t[T]];d=Ek(t,l,A,F,D,P,N,V,U,T-U,d),A||(a.r=d&7|l[d/8|0]<<3,d-=7,a.h=E,a.p=b,a.i=T,a.w=M)}else{for(var T=a.w||0;T<i+A;T+=65535){var Re=T+65535;Re>=i&&(l[d/8|0]=A,Re=i),d=yL(l,d+1,t.subarray(T,Re))}a.i=i}return vL(o,0,r+V5(d)+s)},bL=function(){var t=1,e=0;return{p:function(n){for(var r=t,s=e,a=n.length|0,i=0;i!=a;){for(var o=Math.min(i+2655,a);i<o;++i)s+=r+=n[i];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}t=r,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},pre=function(t,e,n,r,s){if(!s&&(s={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),i=new Bi(a.length+t.length);i.set(a),i.set(t,a.length),t=i,s.w=a.length}return mre(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,s)},CL=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},gre=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=bL();s.p(e.dictionary),CL(t,2,s.d())}},xre=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&sc(6,"invalid zlib data"),(t[1]>>5&1)==1&&sc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function KE(t,e){e||(e={});var n=bL();n.p(t);var r=pre(t,e,e.dictionary?6:2,4);return gre(r,e),CL(r,r.length-4,n.d()),r}function vre(t,e){return fre(t.subarray(xre(t),-4),{i:2},e,e)}var yre=typeof TextDecoder<"u"&&new TextDecoder,wre=0;try{yre.decode(wL,{stream:!0}),wre=1}catch{}var yn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Vb(){yn.console&&typeof yn.console.log=="function"&&yn.console.log.apply(yn.console,arguments)}var $r={log:Vb,warn:function(t){yn.console&&(typeof yn.console.warn=="function"?yn.console.warn.apply(yn.console,arguments):Vb.call(null,arguments))},error:function(t){yn.console&&(typeof yn.console.error=="function"?yn.console.error.apply(yn.console,arguments):Vb(t))}};function Gb(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Tf(r.response,e,n)},r.onerror=function(){$r.error("could not download file")},r.send()}function _k(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function R1(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var sg,qE,Tf=yn.saveAs||((typeof window>"u"?"undefined":Lr(window))!=="object"||window!==yn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=yn.URL||yn.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?_k(s.href)?Gb(t,e,n):R1(s,s.target="_blank"):R1(s)):(s.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){R1(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(_k(t))Gb(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){R1(r)})}else navigator.msSaveOrOpenBlob(function(s,a){return a===void 0?a={autoBom:!1}:Lr(a)!=="object"&&($r.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return Gb(t,e,n);var s=t.type==="application/octet-stream",a=/constructor/i.test(yn.HTMLElement)||yn.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||s&&a)&&(typeof FileReader>"u"?"undefined":Lr(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},o.readAsDataURL(t)}else{var l=yn.URL||yn.webkitURL,A=l.createObjectURL(t);r?r.location=A:location.href=A,r=null,setTimeout(function(){l.revokeObjectURL(A)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function EL(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var s=n[r].re,a=n[r].process,i=s.exec(t);i&&(e=a(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),A=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),A.length==1&&(A="0"+A),"#"+o+l+A}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function zb(t,e){var n=t[0],r=t[1],s=t[2],a=t[3];n=pi(n,r,s,a,e[0],7,-680876936),a=pi(a,n,r,s,e[1],12,-389564586),s=pi(s,a,n,r,e[2],17,606105819),r=pi(r,s,a,n,e[3],22,-1044525330),n=pi(n,r,s,a,e[4],7,-176418897),a=pi(a,n,r,s,e[5],12,1200080426),s=pi(s,a,n,r,e[6],17,-1473231341),r=pi(r,s,a,n,e[7],22,-45705983),n=pi(n,r,s,a,e[8],7,1770035416),a=pi(a,n,r,s,e[9],12,-1958414417),s=pi(s,a,n,r,e[10],17,-42063),r=pi(r,s,a,n,e[11],22,-1990404162),n=pi(n,r,s,a,e[12],7,1804603682),a=pi(a,n,r,s,e[13],12,-40341101),s=pi(s,a,n,r,e[14],17,-1502002290),n=gi(n,r=pi(r,s,a,n,e[15],22,1236535329),s,a,e[1],5,-165796510),a=gi(a,n,r,s,e[6],9,-1069501632),s=gi(s,a,n,r,e[11],14,643717713),r=gi(r,s,a,n,e[0],20,-373897302),n=gi(n,r,s,a,e[5],5,-701558691),a=gi(a,n,r,s,e[10],9,38016083),s=gi(s,a,n,r,e[15],14,-660478335),r=gi(r,s,a,n,e[4],20,-405537848),n=gi(n,r,s,a,e[9],5,568446438),a=gi(a,n,r,s,e[14],9,-1019803690),s=gi(s,a,n,r,e[3],14,-187363961),r=gi(r,s,a,n,e[8],20,1163531501),n=gi(n,r,s,a,e[13],5,-1444681467),a=gi(a,n,r,s,e[2],9,-51403784),s=gi(s,a,n,r,e[7],14,1735328473),n=xi(n,r=gi(r,s,a,n,e[12],20,-1926607734),s,a,e[5],4,-378558),a=xi(a,n,r,s,e[8],11,-2022574463),s=xi(s,a,n,r,e[11],16,1839030562),r=xi(r,s,a,n,e[14],23,-35309556),n=xi(n,r,s,a,e[1],4,-1530992060),a=xi(a,n,r,s,e[4],11,1272893353),s=xi(s,a,n,r,e[7],16,-155497632),r=xi(r,s,a,n,e[10],23,-1094730640),n=xi(n,r,s,a,e[13],4,681279174),a=xi(a,n,r,s,e[0],11,-358537222),s=xi(s,a,n,r,e[3],16,-722521979),r=xi(r,s,a,n,e[6],23,76029189),n=xi(n,r,s,a,e[9],4,-640364487),a=xi(a,n,r,s,e[12],11,-421815835),s=xi(s,a,n,r,e[15],16,530742520),n=vi(n,r=xi(r,s,a,n,e[2],23,-995338651),s,a,e[0],6,-198630844),a=vi(a,n,r,s,e[7],10,1126891415),s=vi(s,a,n,r,e[14],15,-1416354905),r=vi(r,s,a,n,e[5],21,-57434055),n=vi(n,r,s,a,e[12],6,1700485571),a=vi(a,n,r,s,e[3],10,-1894986606),s=vi(s,a,n,r,e[10],15,-1051523),r=vi(r,s,a,n,e[1],21,-2054922799),n=vi(n,r,s,a,e[8],6,1873313359),a=vi(a,n,r,s,e[15],10,-30611744),s=vi(s,a,n,r,e[6],15,-1560198380),r=vi(r,s,a,n,e[13],21,1309151649),n=vi(n,r,s,a,e[4],6,-145523070),a=vi(a,n,r,s,e[11],10,-1120210379),s=vi(s,a,n,r,e[2],15,718787259),r=vi(r,s,a,n,e[9],21,-343485551),t[0]=yd(n,t[0]),t[1]=yd(r,t[1]),t[2]=yd(s,t[2]),t[3]=yd(a,t[3])}function Ty(t,e,n,r,s,a){return e=yd(yd(e,t),yd(r,a)),yd(e<<s|e>>>32-s,n)}function pi(t,e,n,r,s,a,i){return Ty(e&n|~e&r,t,e,s,a,i)}function gi(t,e,n,r,s,a,i){return Ty(e&r|n&~r,t,e,s,a,i)}function xi(t,e,n,r,s,a,i){return Ty(e^n^r,t,e,s,a,i)}function vi(t,e,n,r,s,a,i){return Ty(n^(e|~r),t,e,s,a,i)}function _L(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)zb(r,bre(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(zb(r,s),e=0;e<16;e++)s[e]=0;return s[14]=8*n,zb(r,s),r}function bre(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}sg=yn.atob.bind(yn),qE=yn.btoa.bind(yn);var Sk="0123456789abcdef".split("");function Cre(t){for(var e="",n=0;n<4;n++)e+=Sk[t>>8*n+4&15]+Sk[t>>8*n&15];return e}function Ere(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function WE(t){return _L(t).map(Ere).join("")}var _re=function(t){for(var e=0;e<t.length;e++)t[e]=Cre(t[e]);return t.join("")}(_L("hello"))!="5d41402abc4b2a76b9719d911017c592";function yd(t,e){if(_re){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function $E(t,e){var n,r,s,a;if(t!==n){for(var i=(s=t,a=1+(256/t.length>>0),new Array(a+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var A=0;for(l=0;l<256;l++){var d=o[l];A=(A+d+i.charCodeAt(l))%256,o[l]=o[A],o[A]=d}n=t,r=o}else o=r;var h=e.length,p=0,g=0,w="";for(l=0;l<h;l++)g=(g+(d=o[p=(p+1)%256]))%256,o[p]=o[g],o[g]=d,i=o[(o[p]+o[g])%256],w+=String.fromCharCode(e.charCodeAt(l)^i);return w}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Tk={print:4,modify:8,copy:16,"annot-forms":32};function x0(t,e,n,r){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(Tk.perm!==void 0)throw new Error("Invalid permission: "+o);s+=Tk[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),i=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,i),this.P=-(1+(255^s)),this.encryptionKey=WE(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=$E(this.encryptionKey,this.padding)}function v0(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var s=t.charCodeAt(r);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[r]}return e}function Bk(t){if(Lr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,s){if(s=s||!1,typeof n!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var a=Math.random().toString(35);return e[n][a]=[r,!!s],a},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var a in e[n]){var i=e[n][a];try{i[0].apply(t,r)}catch(o){yn.console&&$r.error("jsPDF PubSub Error",o.message,o)}i[1]&&s.push(a)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function v2(t){if(!(this instanceof v2))return new v2(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function SL(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function kf(t,e,n,r,s){if(!(this instanceof kf))return new kf(t,e,n,r,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,SL.call(this,r,s)}function _0(t,e,n,r,s){if(!(this instanceof _0))return new _0(t,e,n,r,s);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,SL.call(this,r,s)}function sn(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],a=arguments[3],i=[],o=1,l=16,A="S",d=null;Lr(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,s=t.format||s,a=t.compress||t.compressPdf||a,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),A=t.defaultPathOperation||"S"),i=t.filters||(a===!0?["FlateEncode"]:i),r=r||"mm",n=(""+(n||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,p={},g={internal:{},__private__:{}};g.__private__.PubSub=Bk;var w="1.3",b=g.__private__.getPdfVersion=function(){return w};g.__private__.setPdfVersion=function(H){w=H};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return E};var B=g.__private__.getPageFormat=function(H){return E[H]};s=s||"a4";var I={COMPAT:"compat",ADVANCED:"advanced"},k=I.COMPAT;function F(){this.saveGraphicsState(),Ee(new Ht(gt,0,0,-gt,0,Ia()*gt).toString()+" cm"),this.setFontSize(this.getFontSize()/gt),A="n",k=I.ADVANCED}function D(){this.restoreGraphicsState(),A="S",k=I.COMPAT}var P=g.__private__.combineFontStyleAndFontWeight=function(H,Ae){if(H=="bold"&&Ae=="normal"||H=="bold"&&Ae==400||H=="normal"&&Ae=="italic"||H=="bold"&&Ae=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ae&&(H=Ae==400||Ae==="normal"?H==="italic"?"italic":"normal":Ae!=700&&Ae!=="bold"||H!=="normal"?(Ae==700?"bold":Ae)+""+H:"bold"),H};g.advancedAPI=function(H){var Ae=k===I.COMPAT;return Ae&&F.call(this),typeof H!="function"||(H(this),Ae&&D.call(this)),this},g.compatAPI=function(H){var Ae=k===I.ADVANCED;return Ae&&D.call(this),typeof H!="function"||(H(this),Ae&&F.call(this)),this},g.isAdvancedAPI=function(){return k===I.ADVANCED};var S,N=function(H){if(k!==I.ADVANCED)throw new Error(H+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},T=g.roundToPrecision=g.__private__.roundToPrecision=function(H,Ae){var Ie=e||Ae;if(isNaN(H)||isNaN(Ie))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return H.toFixed(Ie).replace(/0+$/,"")};S=g.hpf=g.__private__.hpf=typeof l=="number"?function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return T(H,l)}:l==="smart"?function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return T(H,H>-1&&H<1?16:5)}:function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return T(H,16)};var V=g.f2=g.__private__.f2=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.f2");return T(H,2)},M=g.__private__.f3=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.f3");return T(H,3)},U=g.scale=g.__private__.scale=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.scale");return k===I.COMPAT?H*gt:k===I.ADVANCED?H:void 0},O=function(H){return k===I.COMPAT?Ia()-H:k===I.ADVANCED?H:void 0},G=function(H){return U(O(H))};g.__private__.setPrecision=g.setPrecision=function(H){typeof parseInt(H,10)=="number"&&(e=parseInt(H,10))};var ie,K="00000000000000000000000000000000",q=g.__private__.getFileId=function(){return K},se=g.__private__.setFileId=function(H){return K=H!==void 0&&/^[a-fA-F0-9]{32}$/.test(H)?H.toUpperCase():K.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(kr=new x0(d.userPermissions,d.userPassword,d.ownerPassword,K)),K};g.setFileId=function(H){return se(H),this},g.getFileId=function(){return q()};var Z=g.__private__.convertDateToPDFDate=function(H){var Ae=H.getTimezoneOffset(),Ie=Ae<0?"+":"-",Ue=Math.floor(Math.abs(Ae/60)),He=Math.abs(Ae%60),ot=[Ie,J(Ue),"'",J(He),"'"].join("");return["D:",H.getFullYear(),J(H.getMonth()+1),J(H.getDate()),J(H.getHours()),J(H.getMinutes()),J(H.getSeconds()),ot].join("")},X=g.__private__.convertPDFDateToDate=function(H){var Ae=parseInt(H.substr(2,4),10),Ie=parseInt(H.substr(6,2),10)-1,Ue=parseInt(H.substr(8,2),10),He=parseInt(H.substr(10,2),10),ot=parseInt(H.substr(12,2),10),Et=parseInt(H.substr(14,2),10);return new Date(Ae,Ie,Ue,He,ot,Et,0)},de=g.__private__.setCreationDate=function(H){var Ae;if(H===void 0&&(H=new Date),H instanceof Date)Ae=Z(H);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(H))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ae=H}return ie=Ae},j=g.__private__.getCreationDate=function(H){var Ae=ie;return H==="jsDate"&&(Ae=X(ie)),Ae};g.setCreationDate=function(H){return de(H),this},g.getCreationDate=function(H){return j(H)};var W,J=g.__private__.padd2=function(H){return("0"+parseInt(H)).slice(-2)},ne=g.__private__.padd2Hex=function(H){return("00"+(H=H.toString())).substr(H.length)},oe=0,ue=[],me=[],ge=0,ke=[],ve=[],ae=!1,Re=me,Je=function(){oe=0,ge=0,me=[],ue=[],ke=[],Ce=Or(),_e=Or()};g.__private__.setCustomOutputDestination=function(H){ae=!0,Re=H};var De=function(H){ae||(Re=H)};g.__private__.resetCustomOutputDestination=function(){ae=!1,Re=me};var Ee=g.__private__.out=function(H){return H=H.toString(),ge+=H.length+1,Re.push(H),Re},Ge=g.__private__.write=function(H){return Ee(arguments.length===1?H.toString():Array.prototype.join.call(arguments," "))},tt=g.__private__.getArrayBuffer=function(H){for(var Ae=H.length,Ie=new ArrayBuffer(Ae),Ue=new Uint8Array(Ie);Ae--;)Ue[Ae]=H.charCodeAt(Ae);return Ie},it=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return it};var mt=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(H){return mt=k===I.ADVANCED?H/gt:H,this};var Ct,At=g.__private__.getFontSize=g.getFontSize=function(){return k===I.COMPAT?mt:mt*gt},Nt=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(H){return Nt=H,this},g.__private__.getR2L=g.getR2L=function(){return Nt};var It,qt=g.__private__.setZoomMode=function(H){var Ae=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(H))Ct=H;else if(isNaN(H)){if(Ae.indexOf(H)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+H+'" is not recognized.');Ct=H}else Ct=parseInt(H,10)};g.__private__.getZoomMode=function(){return Ct};var Lt,Vt=g.__private__.setPageMode=function(H){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(H)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+H+'" is not recognized.');It=H};g.__private__.getPageMode=function(){return It};var Yt=g.__private__.setLayoutMode=function(H){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(H)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+H+'" is not recognized.');Lt=H};g.__private__.getLayoutMode=function(){return Lt},g.__private__.setDisplayMode=g.setDisplayMode=function(H,Ae,Ie){return qt(H),Yt(Ae),Vt(Ie),this};var Mt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(H){if(Object.keys(Mt).indexOf(H)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Mt[H]},g.__private__.getDocumentProperties=function(){return Mt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(H){for(var Ae in Mt)Mt.hasOwnProperty(Ae)&&H[Ae]&&(Mt[Ae]=H[Ae]);return this},g.__private__.setDocumentProperty=function(H,Ae){if(Object.keys(Mt).indexOf(H)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Mt[H]=Ae};var kt,gt,xn,Wt,rr,mn={},kn={},Er=[],Tn={},Zs={},Jn={},qr={},as=null,Rn=0,Zt=[],jn=new Bk(g),ea=t.hotfixes||[],jr={},us={},ma=[],Ht=function H(Ae,Ie,Ue,He,ot,Et){if(!(this instanceof H))return new H(Ae,Ie,Ue,He,ot,Et);isNaN(Ae)&&(Ae=1),isNaN(Ie)&&(Ie=0),isNaN(Ue)&&(Ue=0),isNaN(He)&&(He=1),isNaN(ot)&&(ot=0),isNaN(Et)&&(Et=0),this._matrix=[Ae,Ie,Ue,He,ot,Et]};Object.defineProperty(Ht.prototype,"sx",{get:function(){return this._matrix[0]},set:function(H){this._matrix[0]=H}}),Object.defineProperty(Ht.prototype,"shy",{get:function(){return this._matrix[1]},set:function(H){this._matrix[1]=H}}),Object.defineProperty(Ht.prototype,"shx",{get:function(){return this._matrix[2]},set:function(H){this._matrix[2]=H}}),Object.defineProperty(Ht.prototype,"sy",{get:function(){return this._matrix[3]},set:function(H){this._matrix[3]=H}}),Object.defineProperty(Ht.prototype,"tx",{get:function(){return this._matrix[4]},set:function(H){this._matrix[4]=H}}),Object.defineProperty(Ht.prototype,"ty",{get:function(){return this._matrix[5]},set:function(H){this._matrix[5]=H}}),Object.defineProperty(Ht.prototype,"a",{get:function(){return this._matrix[0]},set:function(H){this._matrix[0]=H}}),Object.defineProperty(Ht.prototype,"b",{get:function(){return this._matrix[1]},set:function(H){this._matrix[1]=H}}),Object.defineProperty(Ht.prototype,"c",{get:function(){return this._matrix[2]},set:function(H){this._matrix[2]=H}}),Object.defineProperty(Ht.prototype,"d",{get:function(){return this._matrix[3]},set:function(H){this._matrix[3]=H}}),Object.defineProperty(Ht.prototype,"e",{get:function(){return this._matrix[4]},set:function(H){this._matrix[4]=H}}),Object.defineProperty(Ht.prototype,"f",{get:function(){return this._matrix[5]},set:function(H){this._matrix[5]=H}}),Object.defineProperty(Ht.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ht.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ht.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ht.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ht.prototype.join=function(H){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(H)},Ht.prototype.multiply=function(H){var Ae=H.sx*this.sx+H.shy*this.shx,Ie=H.sx*this.shy+H.shy*this.sy,Ue=H.shx*this.sx+H.sy*this.shx,He=H.shx*this.shy+H.sy*this.sy,ot=H.tx*this.sx+H.ty*this.shx+this.tx,Et=H.tx*this.shy+H.ty*this.sy+this.ty;return new Ht(Ae,Ie,Ue,He,ot,Et)},Ht.prototype.decompose=function(){var H=this.sx,Ae=this.shy,Ie=this.shx,Ue=this.sy,He=this.tx,ot=this.ty,Et=Math.sqrt(H*H+Ae*Ae),jt=(H/=Et)*Ie+(Ae/=Et)*Ue;Ie-=H*jt,Ue-=Ae*jt;var _=Math.sqrt(Ie*Ie+Ue*Ue);return jt/=_,H*(Ue/=_)<Ae*(Ie/=_)&&(H=-H,Ae=-Ae,jt=-jt,Et=-Et),{scale:new Ht(Et,0,0,_,0,0),translate:new Ht(1,0,0,1,He,ot),rotate:new Ht(H,Ae,-Ae,H,0,0),skew:new Ht(1,0,jt,1,0,0)}},Ht.prototype.toString=function(H){return this.join(" ")},Ht.prototype.inversed=function(){var H=this.sx,Ae=this.shy,Ie=this.shx,Ue=this.sy,He=this.tx,ot=this.ty,Et=1/(H*Ue-Ae*Ie),jt=Ue*Et,_=-Ae*Et,Y=-Ie*Et,re=H*Et;return new Ht(jt,_,Y,re,-jt*He-Y*ot,-_*He-re*ot)},Ht.prototype.applyToPoint=function(H){var Ae=H.x*this.sx+H.y*this.shx+this.tx,Ie=H.x*this.shy+H.y*this.sy+this.ty;return new Ul(Ae,Ie)},Ht.prototype.applyToRectangle=function(H){var Ae=this.applyToPoint(H),Ie=this.applyToPoint(new Ul(H.x+H.w,H.y+H.h));return new Ec(Ae.x,Ae.y,Ie.x-Ae.x,Ie.y-Ae.y)},Ht.prototype.clone=function(){var H=this.sx,Ae=this.shy,Ie=this.shx,Ue=this.sy,He=this.tx,ot=this.ty;return new Ht(H,Ae,Ie,Ue,He,ot)},g.Matrix=Ht;var sr=g.matrixMult=function(H,Ae){return Ae.multiply(H)},Xn=new Ht(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Xn;var _r=function(H,Ae){if(!Zs[H]){var Ie=(Ae instanceof kf?"Sh":"P")+(Object.keys(Tn).length+1).toString(10);Ae.id=Ie,Zs[H]=Ie,Tn[Ie]=Ae,jn.publish("addPattern",Ae)}};g.ShadingPattern=kf,g.TilingPattern=_0,g.addShadingPattern=function(H,Ae){return N("addShadingPattern()"),_r(H,Ae),this},g.beginTilingPattern=function(H){N("beginTilingPattern()"),el(H.boundingBox[0],H.boundingBox[1],H.boundingBox[2]-H.boundingBox[0],H.boundingBox[3]-H.boundingBox[1],H.matrix)},g.endTilingPattern=function(H,Ae){N("endTilingPattern()"),Ae.stream=ve[W].join(`
`),_r(H,Ae),jn.publish("endTilingPattern",Ae),ma.pop().restore()};var Nr=g.__private__.newObject=function(){var H=Or();return fe(H,!0),H},Or=g.__private__.newObjectDeferred=function(){return oe++,ue[oe]=function(){return ge},oe},fe=function(H,Ae){return Ae=typeof Ae=="boolean"&&Ae,ue[H]=ge,Ae&&Ee(H+" 0 obj"),H},Be=g.__private__.newAdditionalObject=function(){var H={objId:Or(),content:""};return ke.push(H),H},Ce=Or(),_e=Or(),Se=g.__private__.decodeColorString=function(H){var Ae=H.split(" ");if(Ae.length!==2||Ae[1]!=="g"&&Ae[1]!=="G")Ae.length===5&&(Ae[4]==="k"||Ae[4]==="K")&&(Ae=[(1-Ae[0])*(1-Ae[3]),(1-Ae[1])*(1-Ae[3]),(1-Ae[2])*(1-Ae[3]),"r"]);else{var Ie=parseFloat(Ae[0]);Ae=[Ie,Ie,Ie,"r"]}for(var Ue="#",He=0;He<3;He++)Ue+=("0"+Math.floor(255*parseFloat(Ae[He])).toString(16)).slice(-2);return Ue},Ne=g.__private__.encodeColorString=function(H){var Ae;typeof H=="string"&&(H={ch1:H});var Ie=H.ch1,Ue=H.ch2,He=H.ch3,ot=H.ch4,Et=H.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ie=="string"&&Ie.charAt(0)!=="#"){var jt=new EL(Ie);if(jt.ok)Ie=jt.toHex();else if(!/^\d*\.?\d*$/.test(Ie))throw new Error('Invalid color "'+Ie+'" passed to jsPDF.encodeColorString.')}if(typeof Ie=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ie)&&(Ie="#"+Ie[1]+Ie[1]+Ie[2]+Ie[2]+Ie[3]+Ie[3]),typeof Ie=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ie)){var _=parseInt(Ie.substr(1),16);Ie=_>>16&255,Ue=_>>8&255,He=255&_}if(Ue===void 0||ot===void 0&&Ie===Ue&&Ue===He)if(typeof Ie=="string")Ae=Ie+" "+Et[0];else switch(H.precision){case 2:Ae=V(Ie/255)+" "+Et[0];break;case 3:default:Ae=M(Ie/255)+" "+Et[0]}else if(ot===void 0||Lr(ot)==="object"){if(ot&&!isNaN(ot.a)&&ot.a===0)return Ae=["1.","1.","1.",Et[1]].join(" ");if(typeof Ie=="string")Ae=[Ie,Ue,He,Et[1]].join(" ");else switch(H.precision){case 2:Ae=[V(Ie/255),V(Ue/255),V(He/255),Et[1]].join(" ");break;default:case 3:Ae=[M(Ie/255),M(Ue/255),M(He/255),Et[1]].join(" ")}}else if(typeof Ie=="string")Ae=[Ie,Ue,He,ot,Et[2]].join(" ");else switch(H.precision){case 2:Ae=[V(Ie),V(Ue),V(He),V(ot),Et[2]].join(" ");break;case 3:default:Ae=[M(Ie),M(Ue),M(He),M(ot),Et[2]].join(" ")}return Ae},Ke=g.__private__.getFilters=function(){return i},nt=g.__private__.putStream=function(H){var Ae=(H=H||{}).data||"",Ie=H.filters||Ke(),Ue=H.alreadyAppliedFilters||[],He=H.addLength1||!1,ot=Ae.length,Et=H.objectId,jt=function(dn){return dn};if(d!==null&&Et===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(jt=kr.encryptor(Et,0));var _={};Ie===!0&&(Ie=["FlateEncode"]);var Y=H.additionalKeyValues||[],re=(_=sn.API.processDataByFilters!==void 0?sn.API.processDataByFilters(Ae,Ie):{data:Ae,reverseChain:[]}).reverseChain+(Array.isArray(Ue)?Ue.join(" "):Ue.toString());if(_.data.length!==0&&(Y.push({key:"Length",value:_.data.length}),He===!0&&Y.push({key:"Length1",value:ot})),re.length!=0)if(re.split("/").length-1==1)Y.push({key:"Filter",value:re});else{Y.push({key:"Filter",value:"["+re+"]"});for(var ye=0;ye<Y.length;ye+=1)if(Y[ye].key==="DecodeParms"){for(var Oe=[],Ze=0;Ze<_.reverseChain.split("/").length-1;Ze+=1)Oe.push("null");Oe.push(Y[ye].value),Y[ye].value="["+Oe.join(" ")+"]"}}Ee("<<");for(var _t=0;_t<Y.length;_t++)Ee("/"+Y[_t].key+" "+Y[_t].value);Ee(">>"),_.data.length!==0&&(Ee("stream"),Ee(jt(_.data)),Ee("endstream"))},Qe=g.__private__.putPage=function(H){var Ae=H.number,Ie=H.data,Ue=H.objId,He=H.contentsObjId;fe(Ue,!0),Ee("<</Type /Page"),Ee("/Parent "+H.rootDictionaryObjId+" 0 R"),Ee("/Resources "+H.resourceDictionaryObjId+" 0 R"),Ee("/MediaBox ["+parseFloat(S(H.mediaBox.bottomLeftX))+" "+parseFloat(S(H.mediaBox.bottomLeftY))+" "+S(H.mediaBox.topRightX)+" "+S(H.mediaBox.topRightY)+"]"),H.cropBox!==null&&Ee("/CropBox ["+S(H.cropBox.bottomLeftX)+" "+S(H.cropBox.bottomLeftY)+" "+S(H.cropBox.topRightX)+" "+S(H.cropBox.topRightY)+"]"),H.bleedBox!==null&&Ee("/BleedBox ["+S(H.bleedBox.bottomLeftX)+" "+S(H.bleedBox.bottomLeftY)+" "+S(H.bleedBox.topRightX)+" "+S(H.bleedBox.topRightY)+"]"),H.trimBox!==null&&Ee("/TrimBox ["+S(H.trimBox.bottomLeftX)+" "+S(H.trimBox.bottomLeftY)+" "+S(H.trimBox.topRightX)+" "+S(H.trimBox.topRightY)+"]"),H.artBox!==null&&Ee("/ArtBox ["+S(H.artBox.bottomLeftX)+" "+S(H.artBox.bottomLeftY)+" "+S(H.artBox.topRightX)+" "+S(H.artBox.topRightY)+"]"),typeof H.userUnit=="number"&&H.userUnit!==1&&Ee("/UserUnit "+H.userUnit),jn.publish("putPage",{objId:Ue,pageContext:Zt[Ae],pageNumber:Ae,page:Ie}),Ee("/Contents "+He+" 0 R"),Ee(">>"),Ee("endobj");var ot=Ie.join(`
`);return k===I.ADVANCED&&(ot+=`
Q`),fe(He,!0),nt({data:ot,filters:Ke(),objectId:He}),Ee("endobj"),Ue},We=g.__private__.putPages=function(){var H,Ae,Ie=[];for(H=1;H<=Rn;H++)Zt[H].objId=Or(),Zt[H].contentsObjId=Or();for(H=1;H<=Rn;H++)Ie.push(Qe({number:H,data:ve[H],objId:Zt[H].objId,contentsObjId:Zt[H].contentsObjId,mediaBox:Zt[H].mediaBox,cropBox:Zt[H].cropBox,bleedBox:Zt[H].bleedBox,trimBox:Zt[H].trimBox,artBox:Zt[H].artBox,userUnit:Zt[H].userUnit,rootDictionaryObjId:Ce,resourceDictionaryObjId:_e}));fe(Ce,!0),Ee("<</Type /Pages");var Ue="/Kids [";for(Ae=0;Ae<Rn;Ae++)Ue+=Ie[Ae]+" 0 R ";Ee(Ue+"]"),Ee("/Count "+Rn),Ee(">>"),Ee("endobj"),jn.publish("postPutPages")},Xe=function(H){jn.publish("putFont",{font:H,out:Ee,newObject:Nr,putStream:nt}),H.isAlreadyPutted!==!0&&(H.objectNumber=Nr(),Ee("<<"),Ee("/Type /Font"),Ee("/BaseFont /"+v0(H.postScriptName)),Ee("/Subtype /Type1"),typeof H.encoding=="string"&&Ee("/Encoding /"+H.encoding),Ee("/FirstChar 32"),Ee("/LastChar 255"),Ee(">>"),Ee("endobj"))},vt=function(){for(var H in mn)mn.hasOwnProperty(H)&&(h===!1||h===!0&&p.hasOwnProperty(H))&&Xe(mn[H])},Bt=function(H){H.objectNumber=Nr();var Ae=[];Ae.push({key:"Type",value:"/XObject"}),Ae.push({key:"Subtype",value:"/Form"}),Ae.push({key:"BBox",value:"["+[S(H.x),S(H.y),S(H.x+H.width),S(H.y+H.height)].join(" ")+"]"}),Ae.push({key:"Matrix",value:"["+H.matrix.toString()+"]"});var Ie=H.pages[1].join(`
`);nt({data:Ie,additionalKeyValues:Ae,objectId:H.objectNumber}),Ee("endobj")},Pt=function(){for(var H in jr)jr.hasOwnProperty(H)&&Bt(jr[H])},St=function(H,Ae){var Ie,Ue=[],He=1/(Ae-1);for(Ie=0;Ie<1;Ie+=He)Ue.push(Ie);if(Ue.push(1),H[0].offset!=0){var ot={offset:0,color:H[0].color};H.unshift(ot)}if(H[H.length-1].offset!=1){var Et={offset:1,color:H[H.length-1].color};H.push(Et)}for(var jt="",_=0,Y=0;Y<Ue.length;Y++){for(Ie=Ue[Y];Ie>H[_+1].offset;)_++;var re=H[_].offset,ye=(Ie-re)/(H[_+1].offset-re),Oe=H[_].color,Ze=H[_+1].color;jt+=ne(Math.round((1-ye)*Oe[0]+ye*Ze[0]).toString(16))+ne(Math.round((1-ye)*Oe[1]+ye*Ze[1]).toString(16))+ne(Math.round((1-ye)*Oe[2]+ye*Ze[2]).toString(16))}return jt.trim()},Ft=function(H,Ae){Ae||(Ae=21);var Ie=Nr(),Ue=St(H.colors,Ae),He=[];He.push({key:"FunctionType",value:"0"}),He.push({key:"Domain",value:"[0.0 1.0]"}),He.push({key:"Size",value:"["+Ae+"]"}),He.push({key:"BitsPerSample",value:"8"}),He.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),He.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),nt({data:Ue,additionalKeyValues:He,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ie}),Ee("endobj"),H.objectNumber=Nr(),Ee("<< /ShadingType "+H.type),Ee("/ColorSpace /DeviceRGB");var ot="/Coords ["+S(parseFloat(H.coords[0]))+" "+S(parseFloat(H.coords[1]))+" ";H.type===2?ot+=S(parseFloat(H.coords[2]))+" "+S(parseFloat(H.coords[3])):ot+=S(parseFloat(H.coords[2]))+" "+S(parseFloat(H.coords[3]))+" "+S(parseFloat(H.coords[4]))+" "+S(parseFloat(H.coords[5])),Ee(ot+="]"),H.matrix&&Ee("/Matrix ["+H.matrix.toString()+"]"),Ee("/Function "+Ie+" 0 R"),Ee("/Extend [true true]"),Ee(">>"),Ee("endobj")},cn=function(H,Ae){var Ie=Or(),Ue=Nr();Ae.push({resourcesOid:Ie,objectOid:Ue}),H.objectNumber=Ue;var He=[];He.push({key:"Type",value:"/Pattern"}),He.push({key:"PatternType",value:"1"}),He.push({key:"PaintType",value:"1"}),He.push({key:"TilingType",value:"1"}),He.push({key:"BBox",value:"["+H.boundingBox.map(S).join(" ")+"]"}),He.push({key:"XStep",value:S(H.xStep)}),He.push({key:"YStep",value:S(H.yStep)}),He.push({key:"Resources",value:Ie+" 0 R"}),H.matrix&&He.push({key:"Matrix",value:"["+H.matrix.toString()+"]"}),nt({data:H.stream,additionalKeyValues:He,objectId:H.objectNumber}),Ee("endobj")},Dn=function(H){var Ae;for(Ae in Tn)Tn.hasOwnProperty(Ae)&&(Tn[Ae]instanceof kf?Ft(Tn[Ae]):Tn[Ae]instanceof _0&&cn(Tn[Ae],H))},Un=function(H){for(var Ae in H.objectNumber=Nr(),Ee("<<"),H)switch(Ae){case"opacity":Ee("/ca "+V(H[Ae]));break;case"stroke-opacity":Ee("/CA "+V(H[Ae]))}Ee(">>"),Ee("endobj")},On=function(){var H;for(H in Jn)Jn.hasOwnProperty(H)&&Un(Jn[H])},bs=function(){for(var H in Ee("/XObject <<"),jr)jr.hasOwnProperty(H)&&jr[H].objectNumber>=0&&Ee("/"+H+" "+jr[H].objectNumber+" 0 R");jn.publish("putXobjectDict"),Ee(">>")},ri=function(){kr.oid=Nr(),Ee("<<"),Ee("/Filter /Standard"),Ee("/V "+kr.v),Ee("/R "+kr.r),Ee("/U <"+kr.toHexString(kr.U)+">"),Ee("/O <"+kr.toHexString(kr.O)+">"),Ee("/P "+kr.P),Ee(">>"),Ee("endobj")},Cs=function(){for(var H in Ee("/Font <<"),mn)mn.hasOwnProperty(H)&&(h===!1||h===!0&&p.hasOwnProperty(H))&&Ee("/"+H+" "+mn[H].objectNumber+" 0 R");Ee(">>")},ta=function(){if(Object.keys(Tn).length>0){for(var H in Ee("/Shading <<"),Tn)Tn.hasOwnProperty(H)&&Tn[H]instanceof kf&&Tn[H].objectNumber>=0&&Ee("/"+H+" "+Tn[H].objectNumber+" 0 R");jn.publish("putShadingPatternDict"),Ee(">>")}},Us=function(H){if(Object.keys(Tn).length>0){for(var Ae in Ee("/Pattern <<"),Tn)Tn.hasOwnProperty(Ae)&&Tn[Ae]instanceof g.TilingPattern&&Tn[Ae].objectNumber>=0&&Tn[Ae].objectNumber<H&&Ee("/"+Ae+" "+Tn[Ae].objectNumber+" 0 R");jn.publish("putTilingPatternDict"),Ee(">>")}},pa=function(){if(Object.keys(Jn).length>0){var H;for(H in Ee("/ExtGState <<"),Jn)Jn.hasOwnProperty(H)&&Jn[H].objectNumber>=0&&Ee("/"+H+" "+Jn[H].objectNumber+" 0 R");jn.publish("putGStateDict"),Ee(">>")}},Qr=function(H){fe(H.resourcesOid,!0),Ee("<<"),Ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Cs(),ta(),Us(H.objectOid),pa(),bs(),Ee(">>"),Ee("endobj")},na=function(){var H=[];vt(),On(),Pt(),Dn(H),jn.publish("putResources"),H.forEach(Qr),Qr({resourcesOid:_e,objectOid:Number.MAX_SAFE_INTEGER}),jn.publish("postPutResources")},vc=function(){jn.publish("putAdditionalObjects");for(var H=0;H<ke.length;H++){var Ae=ke[H];fe(Ae.objId,!0),Ee(Ae.content),Ee("endobj")}jn.publish("postPutAdditionalObjects")},bu=function(H){kn[H.fontName]=kn[H.fontName]||{},kn[H.fontName][H.fontStyle]=H.id},zo=function(H,Ae,Ie,Ue,He){var ot={id:"F"+(Object.keys(mn).length+1).toString(10),postScriptName:H,fontName:Ae,fontStyle:Ie,encoding:Ue,isStandardFont:He||!1,metadata:{}};return jn.publish("addFont",{font:ot,instance:this}),mn[ot.id]=ot,bu(ot),ot.id},wA=function(H){for(var Ae=0,Ie=it.length;Ae<Ie;Ae++){var Ue=zo.call(this,H[Ae][0],H[Ae][1],H[Ae][2],it[Ae][3],!0);h===!1&&(p[Ue]=!0);var He=H[Ae][0].split("-");bu({id:Ue,fontName:He[0],fontStyle:He[1]||""})}jn.publish("addFonts",{fonts:mn,dictionary:kn})},ga=function(H){return H.foo=function(){try{return H.apply(this,arguments)}catch(Ue){var Ae=Ue.stack||"";~Ae.indexOf(" at ")&&(Ae=Ae.split(" at ")[1]);var Ie="Error in function "+Ae.split(`
`)[0].split("<")[0]+": "+Ue.message;if(!yn.console)throw new Error(Ie);yn.console.error(Ie,Ue),yn.alert&&alert(Ie)}},H.foo.bar=H,H.foo},yc=function(H,Ae){var Ie,Ue,He,ot,Et,jt,_,Y,re;if(He=(Ae=Ae||{}).sourceEncoding||"Unicode",Et=Ae.outputEncoding,(Ae.autoencode||Et)&&mn[kt].metadata&&mn[kt].metadata[He]&&mn[kt].metadata[He].encoding&&(ot=mn[kt].metadata[He].encoding,!Et&&mn[kt].encoding&&(Et=mn[kt].encoding),!Et&&ot.codePages&&(Et=ot.codePages[0]),typeof Et=="string"&&(Et=ot[Et]),Et)){for(_=!1,jt=[],Ie=0,Ue=H.length;Ie<Ue;Ie++)(Y=Et[H.charCodeAt(Ie)])?jt.push(String.fromCharCode(Y)):jt.push(H[Ie]),jt[Ie].charCodeAt(0)>>8&&(_=!0);H=jt.join("")}for(Ie=H.length;_===void 0&&Ie!==0;)H.charCodeAt(Ie-1)>>8&&(_=!0),Ie--;if(!_)return H;for(jt=Ae.noBOM?[]:[254,255],Ie=0,Ue=H.length;Ie<Ue;Ie++){if((re=(Y=H.charCodeAt(Ie))>>8)>>8)throw new Error("Character at position "+Ie+" of string '"+H+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");jt.push(re),jt.push(Y-(re<<8))}return String.fromCharCode.apply(void 0,jt)},ar=g.__private__.pdfEscape=g.pdfEscape=function(H,Ae){return yc(H,Ae).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xa=g.__private__.beginPage=function(H){ve[++Rn]=[],Zt[Rn]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(H[0]),topRightY:Number(H[1])}},qi(Rn),De(ve[W])},Ko=function(H,Ae){var Ie,Ue,He;switch(n=Ae||n,typeof H=="string"&&(Ie=B(H.toLowerCase()),Array.isArray(Ie)&&(Ue=Ie[0],He=Ie[1])),Array.isArray(H)&&(Ue=H[0]*gt,He=H[1]*gt),isNaN(Ue)&&(Ue=s[0],He=s[1]),(Ue>14400||He>14400)&&($r.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ue=Math.min(14400,Ue),He=Math.min(14400,He)),s=[Ue,He],n.substr(0,1)){case"l":He>Ue&&(s=[He,Ue]);break;case"p":Ue>He&&(s=[He,Ue])}xa(s),_A(Yo),Ee(va),SA!==0&&Ee(SA+" J"),Dl!==0&&Ee(Dl+" j"),jn.publish("addPage",{pageNumber:Rn})},qo=function(H){H>0&&H<=Rn&&(ve.splice(H,1),Zt.splice(H,1),Rn--,W>Rn&&(W=Rn),this.setPage(W))},qi=function(H){H>0&&H<=Rn&&(W=H)},gr=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return ve.length-1},Wo=function(H,Ae,Ie){var Ue,He=void 0;return Ie=Ie||{},H=H!==void 0?H:mn[kt].fontName,Ae=Ae!==void 0?Ae:mn[kt].fontStyle,Ue=H.toLowerCase(),kn[Ue]!==void 0&&kn[Ue][Ae]!==void 0?He=kn[Ue][Ae]:kn[H]!==void 0&&kn[H][Ae]!==void 0?He=kn[H][Ae]:Ie.disableWarning===!1&&$r.warn("Unable to look up font label for font '"+H+"', '"+Ae+"'. Refer to getFontList() for available fonts."),He||Ie.noFallback||(He=kn.times[Ae])==null&&(He=kn.times.normal),He},si=g.__private__.putInfo=function(){var H=Nr(),Ae=function(Ue){return Ue};for(var Ie in d!==null&&(Ae=kr.encryptor(H,0)),Ee("<<"),Ee("/Producer ("+ar(Ae("jsPDF "+sn.version))+")"),Mt)Mt.hasOwnProperty(Ie)&&Mt[Ie]&&Ee("/"+Ie.substr(0,1).toUpperCase()+Ie.substr(1)+" ("+ar(Ae(Mt[Ie]))+")");Ee("/CreationDate ("+ar(Ae(ie))+")"),Ee(">>"),Ee("endobj")},xo=g.__private__.putCatalog=function(H){var Ae=(H=H||{}).rootDictionaryObjId||Ce;switch(Nr(),Ee("<<"),Ee("/Type /Catalog"),Ee("/Pages "+Ae+" 0 R"),Ct||(Ct="fullwidth"),Ct){case"fullwidth":Ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ee("/OpenAction [3 0 R /Fit]");break;case"original":Ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ie=""+Ct;Ie.substr(Ie.length-1)==="%"&&(Ct=parseInt(Ct)/100),typeof Ct=="number"&&Ee("/OpenAction [3 0 R /XYZ null null "+V(Ct)+"]")}switch(Lt||(Lt="continuous"),Lt){case"continuous":Ee("/PageLayout /OneColumn");break;case"single":Ee("/PageLayout /SinglePage");break;case"two":case"twoleft":Ee("/PageLayout /TwoColumnLeft");break;case"tworight":Ee("/PageLayout /TwoColumnRight")}It&&Ee("/PageMode /"+It),jn.publish("putCatalog"),Ee(">>"),Ee("endobj")},Cu=g.__private__.putTrailer=function(){Ee("trailer"),Ee("<<"),Ee("/Size "+(oe+1)),Ee("/Root "+oe+" 0 R"),Ee("/Info "+(oe-1)+" 0 R"),d!==null&&Ee("/Encrypt "+kr.oid+" 0 R"),Ee("/ID [ <"+K+"> <"+K+"> ]"),Ee(">>")},bA=g.__private__.putHeader=function(){Ee("%PDF-"+w),Ee("%ºß¬à")},CA=g.__private__.putXRef=function(){var H="0000000000";Ee("xref"),Ee("0 "+(oe+1)),Ee("0000000000 65535 f ");for(var Ae=1;Ae<=oe;Ae++)typeof ue[Ae]=="function"?Ee((H+ue[Ae]()).slice(-10)+" 00000 n "):ue[Ae]!==void 0?Ee((H+ue[Ae]).slice(-10)+" 00000 n "):Ee("0000000000 00000 n ")},vo=g.__private__.buildDocument=function(){Je(),De(me),jn.publish("buildDocument"),bA(),We(),vc(),na(),d!==null&&ri(),si(),xo();var H=ge;return CA(),Cu(),Ee("startxref"),Ee(""+H),Ee("%%EOF"),De(ve[W]),me.join(`
`)},wc=g.__private__.getBlob=function(H){return new Blob([tt(H)],{type:"application/pdf"})},yo=g.output=g.__private__.output=ga(function(H,Ae){switch(typeof(Ae=Ae||{})=="string"?Ae={filename:Ae}:Ae.filename=Ae.filename||"generated.pdf",H){case void 0:return vo();case"save":g.save(Ae.filename);break;case"arraybuffer":return tt(vo());case"blob":return wc(vo());case"bloburi":case"bloburl":if(yn.URL!==void 0&&typeof yn.URL.createObjectURL=="function")return yn.URL&&yn.URL.createObjectURL(wc(vo()))||void 0;$r.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ie="",Ue=vo();try{Ie=qE(Ue)}catch{Ie=qE(unescape(encodeURIComponent(Ue)))}return"data:application/pdf;filename="+Ae.filename+";base64,"+Ie;case"pdfobjectnewwindow":if(Object.prototype.toString.call(yn)==="[object Window]"){var He="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ot=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ae.pdfObjectUrl&&(He=Ae.pdfObjectUrl,ot="");var Et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+He+'"'+ot+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ae)+");<\/script></body></html>",jt=yn.open();return jt!==null&&jt.document.write(Et),jt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(yn)==="[object Window]"){var _='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ae.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ae.filename+'" width="500px" height="400px" /></body></html>',Y=yn.open();if(Y!==null){Y.document.write(_);var re=this;Y.document.documentElement.querySelector("#pdfViewer").onload=function(){Y.document.title=Ae.filename,Y.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(re.output("bloburl"))}}return Y}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(yn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ae)+'"></iframe></body></html>',Oe=yn.open();if(Oe!==null&&(Oe.document.write(ye),Oe.document.title=Ae.filename),Oe||typeof safari>"u")return Oe;break;case"datauri":case"dataurl":return yn.document.location.href=this.output("datauristring",Ae);default:return null}}),Wi=function(H){return Array.isArray(ea)===!0&&ea.indexOf(H)>-1};switch(r){case"pt":gt=1;break;case"mm":gt=72/25.4;break;case"cm":gt=72/2.54;break;case"in":gt=72;break;case"px":gt=Wi("px_scaling")==1?.75:96/72;break;case"pc":case"em":gt=12;break;case"ex":gt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);gt=r}var kr=null;de(),se();var wo=function(H){return d!==null?kr.encryptor(H,0):function(Ae){return Ae}},$i=g.__private__.getPageInfo=g.getPageInfo=function(H){if(isNaN(H)||H%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Zt[H].objId,pageNumber:H,pageContext:Zt[H]}},un=g.__private__.getPageInfoByObjId=function(H){if(isNaN(H)||H%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ae in Zt)if(Zt[Ae].objId===H)break;return $i(Ae)},Yi=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:Zt[W].objId,pageNumber:W,pageContext:Zt[W]}};g.addPage=function(){return Ko.apply(this,arguments),this},g.setPage=function(){return qi.apply(this,arguments),De.call(this,ve[W]),this},g.insertPage=function(H){return this.addPage(),this.movePage(W,H),this},g.movePage=function(H,Ae){var Ie,Ue;if(H>Ae){Ie=ve[H],Ue=Zt[H];for(var He=H;He>Ae;He--)ve[He]=ve[He-1],Zt[He]=Zt[He-1];ve[Ae]=Ie,Zt[Ae]=Ue,this.setPage(Ae)}else if(H<Ae){Ie=ve[H],Ue=Zt[H];for(var ot=H;ot<Ae;ot++)ve[ot]=ve[ot+1],Zt[ot]=Zt[ot+1];ve[Ae]=Ie,Zt[Ae]=Ue,this.setPage(Ae)}return this},g.deletePage=function(){return qo.apply(this,arguments),this},g.__private__.text=g.text=function(H,Ae,Ie,Ue,He){var ot,Et,jt,_,Y,re,ye,Oe,Ze,_t=(Ue=Ue||{}).scope||this;if(typeof H=="number"&&typeof Ae=="number"&&(typeof Ie=="string"||Array.isArray(Ie))){var dn=Ie;Ie=Ae,Ae=H,H=dn}if(arguments[3]instanceof Ht?(N("The transform parameter of text() with a Matrix value"),Ze=He):(jt=arguments[4],_=arguments[5],Lr(ye=arguments[3])==="object"&&ye!==null||(typeof jt=="string"&&(_=jt,jt=null),typeof ye=="string"&&(_=ye,ye=null),typeof ye=="number"&&(jt=ye,ye=null),Ue={flags:ye,angle:jt,align:_})),isNaN(Ae)||isNaN(Ie)||H==null)throw new Error("Invalid arguments passed to jsPDF.text");if(H.length===0)return _t;var qn="",_n=!1,xr=typeof Ue.lineHeightFactor=="number"?Ue.lineHeightFactor:Kn,Sr=_t.internal.scaleFactor;function eo(Hn){return Hn=Hn.split("	").join(Array(Ue.TabLen||9).join(" ")),ar(Hn,ye)}function ds(Hn){for(var Vn,Hr=Hn.concat(),fs=[],no=Hr.length;no--;)typeof(Vn=Hr.shift())=="string"?fs.push(Vn):Array.isArray(Hn)&&(Vn.length===1||Vn[1]===void 0&&Vn[2]===void 0)?fs.push(Vn[0]):fs.push([Vn[0],Vn[1],Vn[2]]);return fs}function li(Hn,Vn){var Hr;if(typeof Hn=="string")Hr=Vn(Hn)[0];else if(Array.isArray(Hn)){for(var fs,no,Uc=Hn.concat(),Lc=[],Ol=Uc.length;Ol--;)typeof(fs=Uc.shift())=="string"?Lc.push(Vn(fs)[0]):Array.isArray(fs)&&typeof fs[0]=="string"&&(no=Vn(fs[0],fs[1],fs[2]),Lc.push([no[0],no[1],no[2]]));Hr=Lc}return Hr}var nl=!1,Sc=!0;if(typeof H=="string")nl=!0;else if(Array.isArray(H)){var Tu=H.concat();Et=[];for(var TA,Ls=Tu.length;Ls--;)(typeof(TA=Tu.shift())!="string"||Array.isArray(TA)&&typeof TA[0]!="string")&&(Sc=!1);nl=Sc}if(nl===!1)throw new Error('Type of text must be string or Array. "'+H+'" is not recognized.');typeof H=="string"&&(H=H.match(/[\r?\n]/)?H.split(/\r\n|\r|\n/g):[H]);var Tc=mt/_t.internal.scaleFactor,BA=Tc*(xr-1);switch(Ue.baseline){case"bottom":Ie-=BA;break;case"top":Ie+=Tc-BA;break;case"hanging":Ie+=Tc-2*BA;break;case"middle":Ie+=Tc/2-BA}if((re=Ue.maxWidth||0)>0&&(typeof H=="string"?H=_t.splitTextToSize(H,re):Object.prototype.toString.call(H)==="[object Array]"&&(H=H.reduce(function(Hn,Vn){return Hn.concat(_t.splitTextToSize(Vn,re))},[]))),ot={text:H,x:Ae,y:Ie,options:Ue,mutex:{pdfEscape:ar,activeFontKey:kt,fonts:mn,activeFontSize:mt}},jn.publish("preProcessText",ot),H=ot.text,jt=(Ue=ot.options).angle,!(Ze instanceof Ht)&&jt&&typeof jt=="number"){jt*=Math.PI/180,Ue.rotationDirection===0&&(jt=-jt),k===I.ADVANCED&&(jt=-jt);var NA=Math.cos(jt),Bu=Math.sin(jt);Ze=new Ht(NA,Bu,-Bu,NA,0,0)}else jt&&jt instanceof Ht&&(Ze=jt);k!==I.ADVANCED||Ze||(Ze=Xn),(Y=Ue.charSpace||Rl)!==void 0&&(qn+=S(U(Y))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Oe=Ue.horizontalScale)!==void 0&&(qn+=S(100*Oe)+` Tz
`),Ue.lang;var ci=-1,Nm=Ue.renderingMode!==void 0?Ue.renderingMode:Ue.stroke,tf=_t.internal.getCurrentPageInfo().pageContext;switch(Nm){case 0:case!1:case"fill":ci=0;break;case 1:case!0:case"stroke":ci=1;break;case 2:case"fillThenStroke":ci=2;break;case 3:case"invisible":ci=3;break;case 4:case"fillAndAddForClipping":ci=4;break;case 5:case"strokeAndAddPathForClipping":ci=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ci=6;break;case 7:case"addToPathForClipping":ci=7}var yh=tf.usedRenderingMode!==void 0?tf.usedRenderingMode:-1;ci!==-1?qn+=ci+` Tr
`:yh!==-1&&(qn+=`0 Tr
`),ci!==-1&&(tf.usedRenderingMode=ci),_=Ue.align||"left";var to,ra=mt*xr,Bc=_t.internal.pageSize.getWidth(),nf=mn[kt];Y=Ue.charSpace||Rl,re=Ue.maxWidth||0,ye=Object.assign({autoencode:!0,noBOM:!0},Ue.flags);var Pl=[],Nc=function(Hn){return _t.getStringUnitWidth(Hn,{font:nf,charSpace:Y,fontSize:mt,doKerning:!1})*mt/Sr};if(Object.prototype.toString.call(H)==="[object Array]"){var Ga;Et=ds(H),_!=="left"&&(to=Et.map(Nc));var ya,kc=0;if(_==="right"){Ae-=to[0],H=[],Ls=Et.length;for(var Ai=0;Ai<Ls;Ai++)Ai===0?(ya=ka(Ae),Ga=_s(Ie)):(ya=U(kc-to[Ai]),Ga=-ra),H.push([Et[Ai],ya,Ga]),kc=to[Ai]}else if(_==="center"){Ae-=to[0]/2,H=[],Ls=Et.length;for(var _o=0;_o<Ls;_o++)_o===0?(ya=ka(Ae),Ga=_s(Ie)):(ya=U((kc-to[_o])/2),Ga=-ra),H.push([Et[_o],ya,Ga]),kc=to[_o]}else if(_==="left"){H=[],Ls=Et.length;for(var rl=0;rl<Ls;rl++)H.push(Et[rl])}else if(_==="justify"&&nf.encoding==="Identity-H"){H=[],Ls=Et.length,re=re!==0?re:Bc;for(var So=0,is=0;is<Ls;is++)if(Ga=is===0?_s(Ie):-ra,ya=is===0?ka(Ae):So,is<Ls-1){var To=U((re-to[is])/(Et[is].split(" ").length-1)),Ss=Et[is].split(" ");H.push([Ss[0]+" ",ya,Ga]),So=0;for(var ui=1;ui<Ss.length;ui++){var kA=(Nc(Ss[ui-1]+" "+Ss[ui])-Nc(Ss[ui]))*Sr+To;ui==Ss.length-1?H.push([Ss[ui],kA,0]):H.push([Ss[ui]+" ",kA,0]),So-=kA}}else H.push([Et[is],ya,Ga]);H.push(["",So,0])}else{if(_!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(H=[],Ls=Et.length,re=re!==0?re:Bc,is=0;is<Ls;is++)Ga=is===0?_s(Ie):-ra,ya=is===0?ka(Ae):0,is<Ls-1?Pl.push(S(U((re-to[is])/(Et[is].split(" ").length-1)))):Pl.push(0),H.push([Et[is],ya,Ga])}}var sl=typeof Ue.R2L=="boolean"?Ue.R2L:Nt;sl===!0&&(H=li(H,function(Hn,Vn,Hr){return[Hn.split("").reverse().join(""),Vn,Hr]})),ot={text:H,x:Ae,y:Ie,options:Ue,mutex:{pdfEscape:ar,activeFontKey:kt,fonts:mn,activeFontSize:mt}},jn.publish("postProcessText",ot),H=ot.text,_n=ot.mutex.isHex||!1;var Nu=mn[kt].encoding;Nu!=="WinAnsiEncoding"&&Nu!=="StandardEncoding"||(H=li(H,function(Hn,Vn,Hr){return[eo(Hn),Vn,Hr]})),Et=ds(H),H=[];for(var Ic,Fc,Rc,IA=0,ku=1,Dc=Array.isArray(Et[0])?ku:IA,jl="",FA=function(Hn,Vn,Hr){var fs="";return Hr instanceof Ht?(Hr=typeof Ue.angle=="number"?sr(Hr,new Ht(1,0,0,1,Hn,Vn)):sr(new Ht(1,0,0,1,Hn,Vn),Hr),k===I.ADVANCED&&(Hr=sr(new Ht(1,0,0,-1,0,0),Hr)),fs=Hr.join(" ")+` Tm
`):fs=S(Hn)+" "+S(Vn)+` Td
`,fs},os=0;os<Et.length;os++){switch(jl="",Dc){case ku:Rc=(_n?"<":"(")+Et[os][0]+(_n?">":")"),Ic=parseFloat(Et[os][1]),Fc=parseFloat(Et[os][2]);break;case IA:Rc=(_n?"<":"(")+Et[os]+(_n?">":")"),Ic=ka(Ae),Fc=_s(Ie)}Pl!==void 0&&Pl[os]!==void 0&&(jl=Pl[os]+` Tw
`),os===0?H.push(jl+FA(Ic,Fc,Ze)+Rc):Dc===IA?H.push(jl+Rc):Dc===ku&&H.push(jl+FA(Ic,Fc,Ze)+Rc)}H=Dc===IA?H.join(` Tj
T* `):H.join(` Tj
`),H+=` Tj
`;var Mi=`BT
/`;return Mi+=kt+" "+mt+` Tf
`,Mi+=S(mt*xr)+` TL
`,Mi+=Co+`
`,Mi+=qn,Mi+=H,Ee(Mi+="ET"),p[kt]=!0,_t};var Eu=g.__private__.clip=g.clip=function(H){return Ee(H==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Eu("evenodd")},g.__private__.discardPath=g.discardPath=function(){return Ee("n"),this};var Ba=g.__private__.isValidStyle=function(H){var Ae=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(H)!==-1&&(Ae=!0),Ae};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(H){return Ba(H)&&(A=H),this};var ai=g.__private__.getStyle=g.getStyle=function(H){var Ae=A;switch(H){case"D":case"S":Ae="S";break;case"F":Ae="f";break;case"FD":case"DF":Ae="B";break;case"f":case"f*":case"B":case"B*":Ae=H}return Ae},Va=g.close=function(){return Ee("h"),this};g.stroke=function(){return Ee("S"),this},g.fill=function(H){return Ji("f",H),this},g.fillEvenOdd=function(H){return Ji("f*",H),this},g.fillStroke=function(H){return Ji("B",H),this},g.fillStrokeEvenOdd=function(H){return Ji("B*",H),this};var Ji=function(H,Ae){Lr(Ae)==="object"?bo(Ae,H):Ee(H)},ii=function(H){H===null||k===I.ADVANCED&&H===void 0||(H=ai(H),Ee(H))};function $o(H,Ae,Ie,Ue,He){var ot=new _0(Ae||this.boundingBox,Ie||this.xStep,Ue||this.yStep,this.gState,He||this.matrix);ot.stream=this.stream;var Et=H+"$$"+this.cloneIndex+++"$$";return _r(Et,ot),ot}var bo=function(H,Ae){var Ie=Zs[H.key],Ue=Tn[Ie];if(Ue instanceof kf)Ee("q"),Ee(EA(Ae)),Ue.gState&&g.setGState(Ue.gState),Ee(H.matrix.toString()+" cm"),Ee("/"+Ie+" sh"),Ee("Q");else if(Ue instanceof _0){var He=new Ht(1,0,0,-1,0,Ia());H.matrix&&(He=He.multiply(H.matrix||Xn),Ie=$o.call(Ue,H.key,H.boundingBox,H.xStep,H.yStep,He).id),Ee("q"),Ee("/Pattern cs"),Ee("/"+Ie+" scn"),Ue.gState&&g.setGState(Ue.gState),Ee(Ae),Ee("Q")}},EA=function(H){switch(H){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},oi=g.moveTo=function(H,Ae){return Ee(S(U(H))+" "+S(G(Ae))+" m"),this},Na=g.lineTo=function(H,Ae){return Ee(S(U(H))+" "+S(G(Ae))+" l"),this},Xi=g.curveTo=function(H,Ae,Ie,Ue,He,ot){return Ee([S(U(H)),S(G(Ae)),S(U(Ie)),S(G(Ue)),S(U(He)),S(G(ot)),"c"].join(" ")),this};g.__private__.line=g.line=function(H,Ae,Ie,Ue,He){if(isNaN(H)||isNaN(Ae)||isNaN(Ie)||isNaN(Ue)||!Ba(He))throw new Error("Invalid arguments passed to jsPDF.line");return k===I.COMPAT?this.lines([[Ie-H,Ue-Ae]],H,Ae,[1,1],He||"S"):this.lines([[Ie-H,Ue-Ae]],H,Ae,[1,1]).stroke()},g.__private__.lines=g.lines=function(H,Ae,Ie,Ue,He,ot){var Et,jt,_,Y,re,ye,Oe,Ze,_t,dn,qn,_n;if(typeof H=="number"&&(_n=Ie,Ie=Ae,Ae=H,H=_n),Ue=Ue||[1,1],ot=ot||!1,isNaN(Ae)||isNaN(Ie)||!Array.isArray(H)||!Array.isArray(Ue)||!Ba(He)||typeof ot!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(oi(Ae,Ie),Et=Ue[0],jt=Ue[1],Y=H.length,dn=Ae,qn=Ie,_=0;_<Y;_++)(re=H[_]).length===2?(dn=re[0]*Et+dn,qn=re[1]*jt+qn,Na(dn,qn)):(ye=re[0]*Et+dn,Oe=re[1]*jt+qn,Ze=re[2]*Et+dn,_t=re[3]*jt+qn,dn=re[4]*Et+dn,qn=re[5]*jt+qn,Xi(ye,Oe,Ze,_t,dn,qn));return ot&&Va(),ii(He),this},g.path=function(H){for(var Ae=0;Ae<H.length;Ae++){var Ie=H[Ae],Ue=Ie.c;switch(Ie.op){case"m":oi(Ue[0],Ue[1]);break;case"l":Na(Ue[0],Ue[1]);break;case"c":Xi.apply(this,Ue);break;case"h":Va()}}return this},g.__private__.rect=g.rect=function(H,Ae,Ie,Ue,He){if(isNaN(H)||isNaN(Ae)||isNaN(Ie)||isNaN(Ue)||!Ba(He))throw new Error("Invalid arguments passed to jsPDF.rect");return k===I.COMPAT&&(Ue=-Ue),Ee([S(U(H)),S(G(Ae)),S(U(Ie)),S(U(Ue)),"re"].join(" ")),ii(He),this},g.__private__.triangle=g.triangle=function(H,Ae,Ie,Ue,He,ot,Et){if(isNaN(H)||isNaN(Ae)||isNaN(Ie)||isNaN(Ue)||isNaN(He)||isNaN(ot)||!Ba(Et))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ie-H,Ue-Ae],[He-Ie,ot-Ue],[H-He,Ae-ot]],H,Ae,[1,1],Et,!0),this},g.__private__.roundedRect=g.roundedRect=function(H,Ae,Ie,Ue,He,ot,Et){if(isNaN(H)||isNaN(Ae)||isNaN(Ie)||isNaN(Ue)||isNaN(He)||isNaN(ot)||!Ba(Et))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var jt=4/3*(Math.SQRT2-1);return He=Math.min(He,.5*Ie),ot=Math.min(ot,.5*Ue),this.lines([[Ie-2*He,0],[He*jt,0,He,ot-ot*jt,He,ot],[0,Ue-2*ot],[0,ot*jt,-He*jt,ot,-He,ot],[2*He-Ie,0],[-He*jt,0,-He,-ot*jt,-He,-ot],[0,2*ot-Ue],[0,-ot*jt,He*jt,-ot,He,-ot]],H+He,Ae,[1,1],Et,!0),this},g.__private__.ellipse=g.ellipse=function(H,Ae,Ie,Ue,He){if(isNaN(H)||isNaN(Ae)||isNaN(Ie)||isNaN(Ue)||!Ba(He))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ot=4/3*(Math.SQRT2-1)*Ie,Et=4/3*(Math.SQRT2-1)*Ue;return oi(H+Ie,Ae),Xi(H+Ie,Ae-Et,H+ot,Ae-Ue,H,Ae-Ue),Xi(H-ot,Ae-Ue,H-Ie,Ae-Et,H-Ie,Ae),Xi(H-Ie,Ae+Et,H-ot,Ae+Ue,H,Ae+Ue),Xi(H+ot,Ae+Ue,H+Ie,Ae+Et,H+Ie,Ae),ii(He),this},g.__private__.circle=g.circle=function(H,Ae,Ie,Ue){if(isNaN(H)||isNaN(Ae)||isNaN(Ie)||!Ba(Ue))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(H,Ae,Ie,Ie,Ue)},g.setFont=function(H,Ae,Ie){return Ie&&(Ae=P(Ae,Ie)),kt=Wo(H,Ae,{disableWarning:!1}),this};var Es=g.__private__.getFont=g.getFont=function(){return mn[Wo.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var H,Ae,Ie={};for(H in kn)if(kn.hasOwnProperty(H))for(Ae in Ie[H]=[],kn[H])kn[H].hasOwnProperty(Ae)&&Ie[H].push(Ae);return Ie},g.addFont=function(H,Ae,Ie,Ue,He){var ot=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ot.indexOf(arguments[3])!==-1?He=arguments[3]:arguments[3]&&ot.indexOf(arguments[3])==-1&&(Ie=P(Ie,Ue)),He=He||"Identity-H",zo.call(this,H,Ae,Ie,He)};var Kn,Yo=t.lineWidth||.200025,Zi=g.__private__.getLineWidth=g.getLineWidth=function(){return Yo},_A=g.__private__.setLineWidth=g.setLineWidth=function(H){return Yo=H,Ee(S(U(H))+" w"),this};g.__private__.setLineDash=sn.API.setLineDash=sn.API.setLineDashPattern=function(H,Ae){if(H=H||[],Ae=Ae||0,isNaN(Ae)||!Array.isArray(H))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return H=H.map(function(Ie){return S(U(Ie))}).join(" "),Ae=S(U(Ae)),Ee("["+H+"] "+Ae+" d"),this};var Il=g.__private__.getLineHeight=g.getLineHeight=function(){return mt*Kn};g.__private__.getLineHeight=g.getLineHeight=function(){return mt*Kn};var Fl=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(H){return typeof(H=H||1.15)=="number"&&(Kn=H),this},Li=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Kn};Fl(t.lineHeight);var ka=g.__private__.getHorizontalCoordinate=function(H){return U(H)},_s=g.__private__.getVerticalCoordinate=function(H){return k===I.ADVANCED?H:Zt[W].mediaBox.topRightY-Zt[W].mediaBox.bottomLeftY-U(H)},_u=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(H){return S(ka(H))},Jo=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(H){return S(_s(H))},va=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Se(va)},g.__private__.setStrokeColor=g.setDrawColor=function(H,Ae,Ie,Ue){return va=Ne({ch1:H,ch2:Ae,ch3:Ie,ch4:Ue,pdfColorType:"draw",precision:2}),Ee(va),this};var Xo=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Se(Xo)},g.__private__.setFillColor=g.setFillColor=function(H,Ae,Ie,Ue){return Xo=Ne({ch1:H,ch2:Ae,ch3:Ie,ch4:Ue,pdfColorType:"fill",precision:2}),Ee(Xo),this};var Co=t.textColor||"0 g",bc=g.__private__.getTextColor=g.getTextColor=function(){return Se(Co)};g.__private__.setTextColor=g.setTextColor=function(H,Ae,Ie,Ue){return Co=Ne({ch1:H,ch2:Ae,ch3:Ie,ch4:Ue,pdfColorType:"text",precision:3}),this};var Rl=t.charSpace,Cc=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Rl||0)};g.__private__.setCharSpace=g.setCharSpace=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Rl=H,this};var SA=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(H){var Ae=g.CapJoinStyles[H];if(Ae===void 0)throw new Error("Line cap style of '"+H+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return SA=Ae,Ee(Ae+" J"),this};var Dl=0;g.__private__.setLineJoin=g.setLineJoin=function(H){var Ae=g.CapJoinStyles[H];if(Ae===void 0)throw new Error("Line join style of '"+H+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Dl=Ae,Ee(Ae+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(H){if(H=H||0,isNaN(H))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ee(S(U(H))+" M"),this},g.GState=v2,g.setGState=function(H){(H=typeof H=="string"?Jn[qr[H]]:Zo(null,H)).equals(as)||(Ee("/"+H.id+" gs"),as=H)};var Zo=function(H,Ae){if(!H||!qr[H]){var Ie=!1;for(var Ue in Jn)if(Jn.hasOwnProperty(Ue)&&Jn[Ue].equals(Ae)){Ie=!0;break}if(Ie)Ae=Jn[Ue];else{var He="GS"+(Object.keys(Jn).length+1).toString(10);Jn[He]=Ae,Ae.id=He}return H&&(qr[H]=Ae.id),jn.publish("addGState",Ae),Ae}};g.addGState=function(H,Ae){return Zo(H,Ae),this},g.saveGraphicsState=function(){return Ee("q"),Er.push({key:kt,size:mt,color:Co}),this},g.restoreGraphicsState=function(){Ee("Q");var H=Er.pop();return kt=H.key,mt=H.size,Co=H.color,as=null,this},g.setCurrentTransformationMatrix=function(H){return Ee(H.toString()+" cm"),this},g.comment=function(H){return Ee("#"+H),this};var Ul=function(H,Ae){var Ie=H||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ie},set:function(ot){isNaN(ot)||(Ie=parseFloat(ot))}});var Ue=Ae||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ue},set:function(ot){isNaN(ot)||(Ue=parseFloat(ot))}});var He="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return He},set:function(ot){He=ot.toString()}}),this},Ec=function(H,Ae,Ie,Ue){Ul.call(this,H,Ae),this.type="rect";var He=Ie||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return He},set:function(Et){isNaN(Et)||(He=parseFloat(Et))}});var ot=Ue||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ot},set:function(Et){isNaN(Et)||(ot=parseFloat(Et))}}),this},Ll=function(){this.page=Rn,this.currentPage=W,this.pages=ve.slice(0),this.pagesContext=Zt.slice(0),this.x=xn,this.y=Wt,this.matrix=rr,this.width=tl(W),this.height=Ia(W),this.outputDestination=Re,this.id="",this.objectNumber=-1};Ll.prototype.restore=function(){Rn=this.page,W=this.currentPage,Zt=this.pagesContext,ve=this.pages,xn=this.x,Wt=this.y,rr=this.matrix,Ml(W,this.width),_c(W,this.height),Re=this.outputDestination};var el=function(H,Ae,Ie,Ue,He){ma.push(new Ll),Rn=W=0,ve=[],xn=H,Wt=Ae,rr=He,xa([Ie,Ue])},Su=function(H){if(us[H])ma.pop().restore();else{var Ae=new Ll,Ie="Xo"+(Object.keys(jr).length+1).toString(10);Ae.id=Ie,us[H]=Ie,jr[Ie]=Ae,jn.publish("addFormObject",Ae),ma.pop().restore()}};for(var Eo in g.beginFormObject=function(H,Ae,Ie,Ue,He){return el(H,Ae,Ie,Ue,He),this},g.endFormObject=function(H){return Su(H),this},g.doFormObject=function(H,Ae){var Ie=jr[us[H]];return Ee("q"),Ee(Ae.toString()+" cm"),Ee("/"+Ie.id+" Do"),Ee("Q"),this},g.getFormObject=function(H){var Ae=jr[us[H]];return{x:Ae.x,y:Ae.y,width:Ae.width,height:Ae.height,matrix:Ae.matrix}},g.save=function(H,Ae){return H=H||"generated.pdf",(Ae=Ae||{}).returnPromise=Ae.returnPromise||!1,Ae.returnPromise===!1?(Tf(wc(vo()),H),typeof Tf.unload=="function"&&yn.setTimeout&&setTimeout(Tf.unload,911),this):new Promise(function(Ie,Ue){try{var He=Tf(wc(vo()),H);typeof Tf.unload=="function"&&yn.setTimeout&&setTimeout(Tf.unload,911),Ie(He)}catch(ot){Ue(ot.message)}})},sn.API)sn.API.hasOwnProperty(Eo)&&(Eo==="events"&&sn.API.events.length?function(H,Ae){var Ie,Ue,He;for(He=Ae.length-1;He!==-1;He--)Ie=Ae[He][0],Ue=Ae[He][1],H.subscribe.apply(H,[Ie].concat(typeof Ue=="function"?[Ue]:Ue))}(jn,sn.API.events):g[Eo]=sn.API[Eo]);var tl=g.getPageWidth=function(H){return(Zt[H=H||W].mediaBox.topRightX-Zt[H].mediaBox.bottomLeftX)/gt},Ml=g.setPageWidth=function(H,Ae){Zt[H].mediaBox.topRightX=Ae*gt+Zt[H].mediaBox.bottomLeftX},Ia=g.getPageHeight=function(H){return(Zt[H=H||W].mediaBox.topRightY-Zt[H].mediaBox.bottomLeftY)/gt},_c=g.setPageHeight=function(H,Ae){Zt[H].mediaBox.topRightY=Ae*gt+Zt[H].mediaBox.bottomLeftY};return g.internal={pdfEscape:ar,getStyle:ai,getFont:Es,getFontSize:At,getCharSpace:Cc,getTextColor:bc,getLineHeight:Il,getLineHeightFactor:Li,getLineWidth:Zi,write:Ge,getHorizontalCoordinate:ka,getVerticalCoordinate:_s,getCoordinateString:_u,getVerticalCoordinateString:Jo,collections:{},newObject:Nr,newAdditionalObject:Be,newObjectDeferred:Or,newObjectDeferredBegin:fe,getFilters:Ke,putStream:nt,events:jn,scaleFactor:gt,pageSize:{getWidth:function(){return tl(W)},setWidth:function(H){Ml(W,H)},getHeight:function(){return Ia(W)},setHeight:function(H){_c(W,H)}},encryptionOptions:d,encryption:kr,getEncryptor:wo,output:yo,getNumberOfPages:gr,pages:ve,out:Ee,f2:V,f3:M,getPageInfo:$i,getPageInfoByObjId:un,getCurrentPageInfo:Yi,getPDFVersion:b,Point:Ul,Rectangle:Ec,Matrix:Ht,hasHotfix:Wi},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return tl(W)},set:function(H){Ml(W,H)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Ia(W)},set:function(H){_c(W,H)},enumerable:!0,configurable:!0}),wA.call(g,it),kt="F1",Ko(s,n),jn.publish("initialized"),g}x0.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},x0.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},x0.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},x0.prototype.processOwnerPassword=function(t,e){return $E(WE(e).substr(0,5),t)},x0.prototype.encryptor=function(t,e){var n=WE(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return $E(n,r)}},v2.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Lr(t)!==Lr(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},sn.API={events:[]},sn.version="2.5.2";var ks=sn.API,G5=1,fh=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$h=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Bn=function(t){return t.toFixed(2)},sd=function(t){return t.toFixed(5)};ks.__acroform__={};var go=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Nk=function(t){return t*G5},Xc=function(t){var e=new BL,n=Xt.internal.getHeight(t)||0,r=Xt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Bn(r)),Number(Bn(n))],e},Sre=ks.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Tre=ks.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Bre=ks.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},Ks=ks.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Bre(t,e-1)},qs=ks.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Sre(t,e-1)},Ws=ks.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Tre(t,e-1)},Nre=ks.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,s=t[0],a=t[1],i=t[2],o=t[3],l={};return l.lowerLeft_X=n(s)||0,l.lowerLeft_Y=r(a+o)||0,l.upperRight_X=n(s+i)||0,l.upperRight_Y=r(a)||0,[Number(Bn(l.lowerLeft_X)),Number(Bn(l.lowerLeft_Y)),Number(Bn(l.upperRight_X)),Number(Bn(l.upperRight_Y))]},kre=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=YE(t,n),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+Bn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Xc(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},YE=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(M){return M.split(`
`)}):s.map(function(M){return[M]});var a=n,i=Xt.internal.getHeight(t)||0;i=i<0?-i:i;var o=Xt.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(M,U,O){if(M+1<s.length){var G=U+" "+s[M+1][0];return D1(G,t,O).width<=o-4}return!1};a++;e:for(;a>0;){e="",a--;var A,d,h=D1("3",t,a).height,p=t.multiline?i-a:(i-h)/2,g=p+=2,w=0,b=0,E=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+D1(e,t,a=12).width+", FieldWidth:"+o+`
`;break}for(var B="",I=0,k=0;k<s.length;k++)if(s.hasOwnProperty(k)){var F=!1;if(s[k].length!==1&&E!==s[k].length-1){if((h+2)*(I+2)+2>i)continue e;B+=s[k][E],F=!0,b=k,k--}else{B=(B+=s[k][E]+" ").substr(B.length-1)==" "?B.substr(0,B.length-1):B;var D=parseInt(k),P=l(D,B,a),S=k>=s.length-1;if(P&&!S){B+=" ",E=0;continue}if(P||S){if(S)b=D;else if(t.multiline&&(h+2)*(I+2)+2>i)continue e}else{if(!t.multiline||(h+2)*(I+2)+2>i)continue e;b=D}}for(var N="",T=w;T<=b;T++){var V=s[T];if(t.multiline){if(T===b){N+=V[E]+" ",E=(E+1)%V.length;continue}if(T===w){N+=V[V.length-1]+" ";continue}}N+=V[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,d=D1(N,t,a).width,t.textAlign){case"right":A=o-d-2;break;case"center":A=(o-d)/2;break;case"left":default:A=2}e+=Bn(A)+" "+Bn(g)+` Td
`,e+="("+fh(N)+`) Tj
`,e+=-Bn(A)+` 0 Td
`,g=-(a+2),d=0,w=F?b:b+1,I++,B=""}break}return r.text=e,r.fontSize=a,r},D1=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},Ire={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Fre=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},Rre=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,s=t[n];e.internal.newObjectDeferredBegin(s.objId,!0),Lr(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[r]}},Dre=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(mc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Ire)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");G5=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new NL,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var a=r[s];a.objId=void 0,a.hasAnnotation&&Fre(a,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,s){var a=!r;for(var i in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(i)){var o=r[i],l=[],A=o.Rect;if(o.Rect&&(o.Rect=Nre(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Xt.createDefaultAppearanceStream(o),Lr(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=A,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=kre(o);l.push({key:"AP",value:"<</N "+d+">>"}),s.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var h="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var g=o.appearanceStreamContent[p];if(h+="/"+p+" ",h+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var i in g)if(g.hasOwnProperty(i)){var w=g[i];typeof w=="function"&&(w=w.call(s,o)),h+="/"+i+" "+w+" ",s.internal.acroformPlugin.xForms.indexOf(w)>=0||s.internal.acroformPlugin.xForms.push(w)}}else typeof(w=g)=="function"&&(w=w.call(s,o)),h+="/"+i+" "+w,s.internal.acroformPlugin.xForms.indexOf(w)>=0||s.internal.acroformPlugin.xForms.push(w);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:o.objId}),s.internal.out("endobj")}a&&Rre(s.internal.acroformPlugin.xForms,s)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},TL=ks.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(i){return i};if(Array.isArray(t)){for(var s="[",a=0;a<t.length;a++)switch(a!==0&&(s+=" "),Lr(t[a])){case"boolean":case"number":case"object":s+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),s+="("+fh(r(t[a].toString()))+")"):s+=t[a].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Kb=function(t,e,n){var r=function(s){return s};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+fh(r(t))+")"},aA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};aA.prototype.toString=function(){return this.objId+" 0 R"},aA.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},aA.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],s=this[r];s&&(Array.isArray(s)?t.push({key:r,value:TL(s,this.objId,this.scope)}):s instanceof aA?(s.scope=this.scope,t.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:r,value:s}))}return t};var BL=function(){aA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};go(BL,aA);var NL=function(){aA.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+fh(n(t))+")"}},set:function(n){t=n}})};go(NL,aA);var mc=function t(){aA.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(B){if(isNaN(B))throw new Error('Invalid value "'+B+'" for attribute F supplied.');e=B}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ks(e,3)},set:function(B){B?this.F=qs(e,3):this.F=Ws(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(B){if(isNaN(B))throw new Error('Invalid value "'+B+'" for attribute Ff supplied.');n=B}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(B){r=B!==void 0?B:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(B){r[0]=B}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(B){r[1]=B}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(B){r[2]=B}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(B){r[3]=B}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(B){switch(B){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=B;break;default:throw new Error('Invalid value "'+B+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof y2)return;a="FieldObject"+t.FieldNum++}var B=function(I){return I};return this.scope&&(B=this.scope.internal.getEncryptor(this.objId)),"("+fh(B(a))+")"},set:function(B){a=B.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(B){a=B}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(B){i=B}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(B){o=B}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(B){l=B}});var A=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return A===void 0?50/G5:A},set:function(B){A=B}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(B){d=B}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof y2||this instanceof Hf))return Kb(h,this.objId,this.scope)},set:function(B){B=B.toString(),h=B}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof ja?p:Kb(p,this.objId,this.scope)},set:function(B){B=B.toString(),p=this instanceof ja?B:B.substr(0,1)==="("?$h(B.substr(1,B.length-2)):$h(B)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ja?$h(p.substr(1,p.length-1)):p},set:function(B){B=B.toString(),p=this instanceof ja?"/"+B:B}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(B){this.V=B}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof ja?g:Kb(g,this.objId,this.scope)},set:function(B){B=B.toString(),g=this instanceof ja?B:B.substr(0,1)==="("?$h(B.substr(1,B.length-2)):$h(B)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ja?$h(g.substr(1,g.length-1)):g},set:function(B){B=B.toString(),g=this instanceof ja?"/"+B:B}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var w,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(B){B=!!B,b=B}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(w)return w},set:function(B){w=B}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,1)},set:function(B){B?this.Ff=qs(this.Ff,1):this.Ff=Ws(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,2)},set:function(B){B?this.Ff=qs(this.Ff,2):this.Ff=Ws(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,3)},set:function(B){B?this.Ff=qs(this.Ff,3):this.Ff=Ws(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(B){if([0,1,2].indexOf(B)===-1)throw new Error('Invalid value "'+B+'" for attribute Q supplied.');E=B}}),Object.defineProperty(this,"textAlign",{get:function(){var B;switch(E){case 0:default:B="left";break;case 1:B="center";break;case 2:B="right"}return B},configurable:!0,enumerable:!0,set:function(B){switch(B){case"right":case 2:E=2;break;case"center":case 1:E=1;break;case"left":case 0:default:E=0}}})};go(mc,aA);var M0=function(){mc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return TL(e,this.objId,this.scope)},set:function(n){var r,s;s=[],typeof(r=n)=="string"&&(s=function(a,i,o){o||(o=1);for(var l,A=[];l=i.exec(a);)A.push(l[o]);return A}(r,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,18)},set:function(n){n?this.Ff=qs(this.Ff,18):this.Ff=Ws(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=qs(this.Ff,19):this.Ff=Ws(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,20)},set:function(n){n?(this.Ff=qs(this.Ff,20),e.sort()):this.Ff=Ws(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,22)},set:function(n){n?this.Ff=qs(this.Ff,22):this.Ff=Ws(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,23)},set:function(n){n?this.Ff=qs(this.Ff,23):this.Ff=Ws(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,27)},set:function(n){n?this.Ff=qs(this.Ff,27):this.Ff=Ws(this.Ff,27)}}),this.hasAppearanceStream=!1};go(M0,mc);var P0=function(){M0.call(this),this.fontName="helvetica",this.combo=!1};go(P0,M0);var j0=function(){P0.call(this),this.combo=!0};go(j0,P0);var jv=function(){j0.call(this),this.edit=!0};go(jv,j0);var ja=function(){mc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,15)},set:function(n){n?this.Ff=qs(this.Ff,15):this.Ff=Ws(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,16)},set:function(n){n?this.Ff=qs(this.Ff,16):this.Ff=Ws(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,17)},set:function(n){n?this.Ff=qs(this.Ff,17):this.Ff=Ws(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,26)},set:function(n){n?this.Ff=qs(this.Ff,26):this.Ff=Ws(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,s=[];for(r in s.push("<<"),e)s.push("/"+r+" ("+fh(n(e[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(n){Lr(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};go(ja,mc);var Ov=function(){ja.call(this),this.pushButton=!0};go(Ov,ja);var O0=function(){ja.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};go(O0,ja);var y2=function(){var t,e;mc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var a,i=[];for(a in i.push("<<"),r)i.push("/"+a+" ("+fh(s(r[a]))+")");return i.push(">>"),i.join(`
`)},set:function(s){Lr(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(s){n="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Xt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};go(y2,mc),O0.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},O0.prototype.createOption=function(t){var e=new y2;return e.Parent=this,e.optionName=t,this.Kids.push(e),Ure.call(this.scope,e),e};var Qv=function(){ja.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Xt.CheckBox.createAppearanceStream()};go(Qv,ja);var Hf=function(){mc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,13)},set:function(e){e?this.Ff=qs(this.Ff,13):this.Ff=Ws(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,21)},set:function(e){e?this.Ff=qs(this.Ff,21):this.Ff=Ws(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,23)},set:function(e){e?this.Ff=qs(this.Ff,23):this.Ff=Ws(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,24)},set:function(e){e?this.Ff=qs(this.Ff,24):this.Ff=Ws(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,25)},set:function(e){e?this.Ff=qs(this.Ff,25):this.Ff=Ws(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,26)},set:function(e){e?this.Ff=qs(this.Ff,26):this.Ff=Ws(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};go(Hf,mc);var Hv=function(){Hf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,14)},set:function(t){t?this.Ff=qs(this.Ff,14):this.Ff=Ws(this.Ff,14)}}),this.password=!0};go(Hv,Hf);var Xt={CheckBox:{createAppearanceStream:function(){return{N:{On:Xt.CheckBox.YesNormal},D:{On:Xt.CheckBox.YesPushDown,Off:Xt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Xc(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),a=YE(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Bn(Xt.internal.getWidth(t))+" "+Bn(Xt.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Bn(a.fontSize)+" Tf "+s),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Xc(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),s=[],a=Xt.internal.getHeight(t),i=Xt.internal.getWidth(t),o=YE(t,t.caption);return s.push("1 g"),s.push("0 0 "+Bn(i)+" "+Bn(a)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Bn(i-1)+" "+Bn(a-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+Bn(o.fontSize)+" Tf "+r),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=Xc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Bn(Xt.internal.getWidth(t))+" "+Bn(Xt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Xt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Xt.RadioButton.Circle.YesNormal,e.D[t]=Xt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Xc(t);e.scope=t.scope;var n=[],r=Xt.internal.getWidth(t)<=Xt.internal.getHeight(t)?Xt.internal.getWidth(t)/4:Xt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Xt.internal.Bezier_C,a=Number((r*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+sd(Xt.internal.getWidth(t)/2)+" "+sd(Xt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Xc(t);e.scope=t.scope;var n=[],r=Xt.internal.getWidth(t)<=Xt.internal.getHeight(t)?Xt.internal.getWidth(t)/4:Xt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),a=Number((s*Xt.internal.Bezier_C).toFixed(5)),i=Number((r*Xt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+sd(Xt.internal.getWidth(t)/2)+" "+sd(Xt.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),n.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),n.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),n.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+sd(Xt.internal.getWidth(t)/2)+" "+sd(Xt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Xc(t);e.scope=t.scope;var n=[],r=Xt.internal.getWidth(t)<=Xt.internal.getHeight(t)?Xt.internal.getWidth(t)/4:Xt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),a=Number((s*Xt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+sd(Xt.internal.getWidth(t)/2)+" "+sd(Xt.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),n.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),n.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),n.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Xt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Xt.RadioButton.Cross.YesNormal,e.D[t]=Xt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Xc(t);e.scope=t.scope;var n=[],r=Xt.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Bn(Xt.internal.getWidth(t)-2)+" "+Bn(Xt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Bn(r.x1.x)+" "+Bn(r.x1.y)+" m"),n.push(Bn(r.x2.x)+" "+Bn(r.x2.y)+" l"),n.push(Bn(r.x4.x)+" "+Bn(r.x4.y)+" m"),n.push(Bn(r.x3.x)+" "+Bn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Xc(t);e.scope=t.scope;var n=Xt.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Bn(Xt.internal.getWidth(t))+" "+Bn(Xt.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Bn(Xt.internal.getWidth(t)-2)+" "+Bn(Xt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Bn(n.x1.x)+" "+Bn(n.x1.y)+" m"),r.push(Bn(n.x2.x)+" "+Bn(n.x2.y)+" l"),r.push(Bn(n.x4.x)+" "+Bn(n.x4.y)+" m"),r.push(Bn(n.x3.x)+" "+Bn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Xc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Bn(Xt.internal.getWidth(t))+" "+Bn(Xt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Xt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Xt.internal.getWidth(t),n=Xt.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Xt.internal.getWidth=function(t){var e=0;return Lr(t)==="object"&&(e=Nk(t.Rect[2])),e},Xt.internal.getHeight=function(t){var e=0;return Lr(t)==="object"&&(e=Nk(t.Rect[3])),e};var Ure=ks.addField=function(t){if(Dre(this,t),!(t instanceof mc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ks.AcroFormChoiceField=M0,ks.AcroFormListBox=P0,ks.AcroFormComboBox=j0,ks.AcroFormEditBox=jv,ks.AcroFormButton=ja,ks.AcroFormPushButton=Ov,ks.AcroFormRadioButton=O0,ks.AcroFormCheckBox=Qv,ks.AcroFormTextField=Hf,ks.AcroFormPasswordField=Hv,ks.AcroFormAppearance=Xt,ks.AcroForm={ChoiceField:M0,ListBox:P0,ComboBox:j0,EditBox:jv,Button:ja,PushButton:Ov,RadioButton:O0,CheckBox:Qv,TextField:Hf,PasswordField:Hv,Appearance:Xt},sn.AcroForm={ChoiceField:M0,ListBox:P0,ComboBox:j0,EditBox:jv,Button:ja,PushButton:Ov,RadioButton:O0,CheckBox:Qv,TextField:Hf,PasswordField:Hv,Appearance:Xt};sn.AcroForm;function kL(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(M,U){var O,G,ie,K,q,se=e;if((U=U||e)==="RGBA"||M.data!==void 0&&M.data instanceof Uint8ClampedArray&&"height"in M&&"width"in M)return"RGBA";if(P(M))for(q in n)for(ie=n[q],O=0;O<ie.length;O+=1){for(K=!0,G=0;G<ie[O].length;G+=1)if(ie[O][G]!==void 0&&ie[O][G]!==M[G]){K=!1;break}if(K===!0){se=q;break}}else for(q in n)for(ie=n[q],O=0;O<ie.length;O+=1){for(K=!0,G=0;G<ie[O].length;G+=1)if(ie[O][G]!==void 0&&ie[O][G]!==M.charCodeAt(G)){K=!1;break}if(K===!0){se=q;break}}return se===e&&U!==e&&(se=U),se},s=function M(U){for(var O=this.internal.write,G=this.internal.putStream,ie=(0,this.internal.getFilters)();ie.indexOf("FlateEncode")!==-1;)ie.splice(ie.indexOf("FlateEncode"),1);U.objectId=this.internal.newObject();var K=[];if(K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Image"}),K.push({key:"Width",value:U.width}),K.push({key:"Height",value:U.height}),U.colorSpace===E.INDEXED?K.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(U.palette.length/3-1)+" "+("sMask"in U&&U.sMask!==void 0?U.objectId+2:U.objectId+1)+" 0 R]"}):(K.push({key:"ColorSpace",value:"/"+U.colorSpace}),U.colorSpace===E.DEVICE_CMYK&&K.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),K.push({key:"BitsPerComponent",value:U.bitsPerComponent}),"decodeParameters"in U&&U.decodeParameters!==void 0&&K.push({key:"DecodeParms",value:"<<"+U.decodeParameters+">>"}),"transparency"in U&&Array.isArray(U.transparency)){for(var q="",se=0,Z=U.transparency.length;se<Z;se++)q+=U.transparency[se]+" "+U.transparency[se]+" ";K.push({key:"Mask",value:"["+q+"]"})}U.sMask!==void 0&&K.push({key:"SMask",value:U.objectId+1+" 0 R"});var X=U.filter!==void 0?["/"+U.filter]:void 0;if(G({data:U.data,additionalKeyValues:K,alreadyAppliedFilters:X,objectId:U.objectId}),O("endobj"),"sMask"in U&&U.sMask!==void 0){var de="/Predictor "+U.predictor+" /Colors 1 /BitsPerComponent "+U.bitsPerComponent+" /Columns "+U.width,j={width:U.width,height:U.height,colorSpace:"DeviceGray",bitsPerComponent:U.bitsPerComponent,decodeParameters:de,data:U.sMask};"filter"in U&&(j.filter=U.filter),M.call(this,j)}if(U.colorSpace===E.INDEXED){var W=this.internal.newObject();G({data:N(new Uint8Array(U.palette)),objectId:W}),O("endobj")}},a=function(){var M=this.internal.collections.addImage_images;for(var U in M)s.call(this,M[U])},i=function(){var M,U=this.internal.collections.addImage_images,O=this.internal.write;for(var G in U)O("/I"+(M=U[G]).index,M.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",i))},l=function(){var M=this.internal.collections.addImage_images;return o.call(this),M},A=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(M){return typeof t["process"+M.toUpperCase()]=="function"},h=function(M){return Lr(M)==="object"&&M.nodeType===1},p=function(M,U){if(M.nodeName==="IMG"&&M.hasAttribute("src")){var O=""+M.getAttribute("src");if(O.indexOf("data:image/")===0)return sg(unescape(O).split("base64,").pop());var G=t.loadFile(O,!0);if(G!==void 0)return G}if(M.nodeName==="CANVAS"){if(M.width===0||M.height===0)throw new Error("Given canvas must have data. Canvas width: "+M.width+", height: "+M.height);var ie;switch(U){case"PNG":ie="image/png";break;case"WEBP":ie="image/webp";break;case"JPEG":case"JPG":default:ie="image/jpeg"}return sg(M.toDataURL(ie,1).split("base64,").pop())}},g=function(M){var U=this.internal.collections.addImage_images;if(U){for(var O in U)if(M===U[O].alias)return U[O]}},w=function(M,U,O){return M||U||(M=-96,U=-96),M<0&&(M=-1*O.width*72/M/this.internal.scaleFactor),U<0&&(U=-1*O.height*72/U/this.internal.scaleFactor),M===0&&(M=U*O.width/O.height),U===0&&(U=M*O.height/O.width),[M,U]},b=function(M,U,O,G,ie,K){var q=w.call(this,O,G,ie),se=this.internal.getCoordinateString,Z=this.internal.getVerticalCoordinateString,X=l.call(this);if(O=q[0],G=q[1],X[ie.index]=ie,K){K*=Math.PI/180;var de=Math.cos(K),j=Math.sin(K),W=function(ne){return ne.toFixed(4)},J=[W(de),W(j),W(-1*j),W(de),0,0,"cm"]}this.internal.write("q"),K?(this.internal.write([1,"0","0",1,se(M),Z(U+G),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([se(O),"0","0",se(G),"0","0","cm"].join(" "))):this.internal.write([se(O),"0","0",se(G),se(M),Z(U+G),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ie.index+" Do"),this.internal.write("Q")},E=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var B=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},I=t.__addimage__.sHashCode=function(M){var U,O,G=0;if(typeof M=="string")for(O=M.length,U=0;U<O;U++)G=(G<<5)-G+M.charCodeAt(U),G|=0;else if(P(M))for(O=M.byteLength/2,U=0;U<O;U++)G=(G<<5)-G+M[U],G|=0;return G},k=t.__addimage__.validateStringAsBase64=function(M){(M=M||"").toString().trim();var U=!0;return M.length===0&&(U=!1),M.length%4!=0&&(U=!1),/^[A-Za-z0-9+/]+$/.test(M.substr(0,M.length-2))===!1&&(U=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(M.substr(-2))===!1&&(U=!1),U},F=t.__addimage__.extractImageFromDataUrl=function(M){var U=(M=M||"").split("base64,"),O=null;if(U.length===2){var G=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(U[0]);Array.isArray(G)&&(O={mimeType:G[1],charset:G[2],data:U[1]})}return O},D=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(M){return D()&&M instanceof ArrayBuffer};var P=t.__addimage__.isArrayBufferView=function(M){return D()&&typeof Uint32Array<"u"&&(M instanceof Int8Array||M instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&M instanceof Uint8ClampedArray||M instanceof Int16Array||M instanceof Uint16Array||M instanceof Int32Array||M instanceof Uint32Array||M instanceof Float32Array||M instanceof Float64Array)},S=t.__addimage__.binaryStringToUint8Array=function(M){for(var U=M.length,O=new Uint8Array(U),G=0;G<U;G++)O[G]=M.charCodeAt(G);return O},N=t.__addimage__.arrayBufferToBinaryString=function(M){for(var U="",O=P(M)?M:new Uint8Array(M),G=0;G<O.length;G+=8192)U+=String.fromCharCode.apply(null,O.subarray(G,G+8192));return U};t.addImage=function(){var M,U,O,G,ie,K,q,se,Z;if(typeof arguments[1]=="number"?(U=e,O=arguments[1],G=arguments[2],ie=arguments[3],K=arguments[4],q=arguments[5],se=arguments[6],Z=arguments[7]):(U=arguments[1],O=arguments[2],G=arguments[3],ie=arguments[4],K=arguments[5],q=arguments[6],se=arguments[7],Z=arguments[8]),Lr(M=arguments[0])==="object"&&!h(M)&&"imageData"in M){var X=M;M=X.imageData,U=X.format||U||e,O=X.x||O||0,G=X.y||G||0,ie=X.w||X.width||ie,K=X.h||X.height||K,q=X.alias||q,se=X.compression||se,Z=X.rotation||X.angle||Z}var de=this.internal.getFilters();if(se===void 0&&de.indexOf("FlateEncode")!==-1&&(se="SLOW"),isNaN(O)||isNaN(G))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var j=T.call(this,M,U,q,se);return b.call(this,O,G,ie,K,j,Z),this};var T=function(M,U,O,G){var ie,K,q;if(typeof M=="string"&&r(M)===e){M=unescape(M);var se=V(M,!1);(se!==""||(se=t.loadFile(M,!0))!==void 0)&&(M=se)}if(h(M)&&(M=p(M,U)),U=r(M,U),!d(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(((q=O)==null||q.length===0)&&(O=function(Z){return typeof Z=="string"||P(Z)?I(Z):P(Z.data)?I(Z.data):null}(M)),(ie=g.call(this,O))||(D()&&(M instanceof Uint8Array||U==="RGBA"||(K=M,M=S(M))),ie=this["process"+U.toUpperCase()](M,A.call(this),O,function(Z){return Z&&typeof Z=="string"&&(Z=Z.toUpperCase()),Z in t.image_compression?Z:B.NONE}(G),K)),!ie)throw new Error("An unknown error occurred whilst processing the image.");return ie},V=t.__addimage__.convertBase64ToBinaryString=function(M,U){var O;U=typeof U!="boolean"||U;var G,ie="";if(typeof M=="string"){G=(O=F(M))!==null?O.data:M;try{ie=sg(G)}catch(K){if(U)throw k(G)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+K.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ie};t.getImageProperties=function(M){var U,O,G="";if(h(M)&&(M=p(M)),typeof M=="string"&&r(M)===e&&((G=V(M,!1))===""&&(G=t.loadFile(M)||""),M=G),O=r(M),!d(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(!D()||M instanceof Uint8Array||(M=S(M)),!(U=this["process"+O.toUpperCase()](M)))throw new Error("An unknown error occurred whilst processing the image");return U.fileType=O,U}})(sn.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};sn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,s,a,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),A=n.pageContext.annotations,d=!1,h=0;h<A.length&&!d;h++)switch((r=A[h]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var p=0;p<A.length;p++){r=A[p];var g=this.internal.pdfEscape,w=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),B=this.internal.getEncryptor(b.objId),I=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(s="/Rect ["+i(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+g(B(r.contents))+")",a+=" /Popup "+E.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+g(B(I))+") >>",b.content=a;var k=b.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+i(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+k,r.open&&(a+=" /Open true"),a+=" >>",E.content=a,this.internal.write(b.objId,"0 R",E.objId,"0 R");break;case"freetext":s="/Rect ["+i(r.bounds.x)+" "+o(r.bounds.y)+" "+i(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var F=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+g(w(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+F+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var D=this.annotations._nameMap[r.options.name];r.options.pageNumber=D.page,r.options.top=D.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+g(w(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var P=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+P+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,s,a,i){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,A=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(n),y:A(r),w:l(n+s),h:A(r+a)},options:i,type:"link"})},t.textWithLink=function(n,r,s,a){var i,o,l=this.getTextWidth(n),A=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var d=this.splitTextToSize(n,o).length;i=Math.ceil(A*d)}else o=l,i=A;return this.text(n,r,s,a),s+=.2*A,a.align==="center"&&(r-=l/2),a.align==="right"&&(r-=l),this.link(r,s-A,o,i,a),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(sn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(b){return e[b.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},o=t.__arabicParser__.isArabicEndLetter=function(b){return i(b)&&a(b)&&e[b.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(b){return i(b)&&s.indexOf(b.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return i(b)&&a(b)&&e[b.charCodeAt(0)].length>=1};var A=t.__arabicParser__.arabicLetterHasFinalForm=function(b){return i(b)&&a(b)&&e[b.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(b){return i(b)&&a(b)&&e[b.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(b){return i(b)&&a(b)&&e[b.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(b){var E=0,B=n,I="",k=0;for(E=0;E<b.length;E+=1)B[b.charCodeAt(E)]!==void 0?(k++,typeof(B=B[b.charCodeAt(E)])=="number"&&(I+=String.fromCharCode(B),B=n,k=0),E===b.length-1&&(B=n,I+=b.charAt(E-(k-1)),E-=k-1,k=0)):(B=n,I+=b.charAt(E-k),E-=k,k=0);return I};t.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&r[b.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(b,E,B){return i(b)?a(b)===!1?-1:!A(b)||!i(E)&&!i(B)||!i(B)&&o(E)||o(b)&&!i(E)||o(b)&&l(E)||o(b)&&o(E)?0:d(b)&&i(E)&&!o(E)&&i(B)&&A(B)?3:o(b)||!i(B)?1:2:-1},g=function(b){var E=0,B=0,I=0,k="",F="",D="",P=(b=b||"").split("\\s+"),S=[];for(E=0;E<P.length;E+=1){for(S.push(""),B=0;B<P[E].length;B+=1)k=P[E][B],F=P[E][B-1],D=P[E][B+1],i(k)?(I=p(k,F,D),S[E]+=I!==-1?String.fromCharCode(e[k.charCodeAt(0)][I]):k):S[E]+=k;S[E]=h(S[E])}return S.join(" ")},w=t.__arabicParser__.processArabic=t.processArabic=function(){var b,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,B=[];if(Array.isArray(E)){var I=0;for(B=[],I=0;I<E.length;I+=1)Array.isArray(E[I])?B.push([g(E[I][0]),E[I][1],E[I][2]]):B.push([g(E[I])]);b=B}else b=g(E);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};t.events.push(["preProcessText",w])}(sn.API),sn.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var s;if((n=n||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(sn.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(b){l=b}});var A=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return A},set:function(b){A=b}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(b){d=b}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(b){h=b}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(b){p=b}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(b){g=b}});var w=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return w},set:function(b){w=b}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,A){r.call(this);var d=(A=A||{}).fontSize||this.getFontSize(),h=A.font||this.getFont(),p=A.scaleFactor||this.internal.scaleFactor,g=0,w=0,b=0,E=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var B=A.maxWidth;B>0?typeof l=="string"?l=this.splitTextToSize(l,B):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(k,F){return k.concat(E.splitTextToSize(F,B))},[])):l=Array.isArray(l)?l:[l];for(var I=0;I<l.length;I++)g<(b=this.getStringUnitWidth(l[I],{font:h})*d)&&(g=b);return g!==0&&(w=l.length),{w:g/=p,h:Math.max((w*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var A=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return A.lineNumber!==void 0&&(A.lineNumber===l.lineNumber?(l.x=(A.x||0)+(A.width||0),l.y=A.y||0):A.y+A.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,g&&p&&(this.printHeaderRow(l.lineNumber,!0),l.y+=p[0].height)):l.y=A.y+A.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,A,d,h,p){if(r.call(this),!d)throw new Error("No data for PDF table.");var g,w,b,E,B=[],I=[],k=[],F={},D={},P=[],S=[],N=(p=p||{}).autoSize||!1,T=p.printHeaders!==!1,V=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,M=p.margins||Object.assign({width:this.getPageWidth()},e),U=typeof p.padding=="number"?p.padding:3,O=p.headerBackgroundColor||"#c8c8c8",G=p.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=M,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=U,this.internal.__cell__.headerBackgroundColor=O,this.internal.__cell__.headerTextColor=G,this.setFontSize(V),h==null)I=B=Object.keys(d[0]),k=B.map(function(){return"left"});else if(Array.isArray(h)&&Lr(h[0])==="object")for(B=h.map(function(X){return X.name}),I=h.map(function(X){return X.prompt||X.name||""}),k=h.map(function(X){return X.align||"left"}),g=0;g<h.length;g+=1)D[h[g].name]=h[g].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(I=B=h,k=B.map(function(){return"left"}));if(N||Array.isArray(h)&&typeof h[0]=="string")for(g=0;g<B.length;g+=1){for(F[E=B[g]]=d.map(function(X){return X[E]}),this.setFont(void 0,"bold"),P.push(this.getTextDimensions(I[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),w=F[E],this.setFont(void 0,"normal"),b=0;b<w.length;b+=1)P.push(this.getTextDimensions(w[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);D[E]=Math.max.apply(null,P)+U+U,P=[]}if(T){var ie={};for(g=0;g<B.length;g+=1)ie[B[g]]={},ie[B[g]].text=I[g],ie[B[g]].align=k[g];var K=o.call(this,ie,D);S=B.map(function(X){return new a(l,A,D[X],K,ie[X].text,void 0,ie[X].align)}),this.setTableHeaderRow(S),this.printHeaderRow(1,!1)}var q=h.reduce(function(X,de){return X[de.name]=de.align,X},{});for(g=0;g<d.length;g+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:g,data:d[g]},this);var se=o.call(this,d[g],D);for(b=0;b<B.length;b+=1){var Z=d[g][B[b]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:g,col:b,data:Z},this),i.call(this,new a(l,A,D[B[b]],se,Z,g+2,q[B[b]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=A,this};var o=function(l,A){var d=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(l).map(function(g){var w=l[g];return this.splitTextToSize(w.hasOwnProperty("text")?w.text:w,A[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*h/p+d+d},this).reduce(function(g,w){return Math.max(g,w)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,A){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),A&&(d.y=this.internal.__cell__.margins.top||0,p.push(d)),d.lineNumber=l;var w=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(w)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),n=!1}}(sn.API);var IL={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},FL=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],JE=kL(FL),RL=[100,200,300,400,500,600,700,800,900],Lre=kL(RL);function XE(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return IL[a=a||"normal"]?a:"normal"}(t.style),r=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(a){return typeof JE[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,n,r].join(" ")}}}function kk(t,e,n,r){var s;for(s=n;s>=0&&s<e.length;s+=r)if(t[e[s]])return t[e[s]];for(s=n;s>=0&&s<e.length;s-=r)if(t[e[s]])return t[e[s]]}var Mre={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Ik={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Fk(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Pre(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",s=Object.assign({},Mre,n.genericFontFamilies||{}),a=null,i=null,o=0;o<e.length;++o)if(s[(a=XE(e[o])).family]&&(a.family=s[a.family]),t.hasOwnProperty(a.family)){i=t[a.family];break}if(!(i=i||t[r]))throw new Error("Could not find a font-family for the rule '"+Fk(a)+"' and default family '"+r+"'.");if(i=function(l,A){if(A[l])return A[l];var d=JE[l],h=d<=JE.normal?-1:1,p=kk(A,FL,d,h);if(!p)throw new Error("Could not find a matching font-stretch value for "+l);return p}(a.stretch,i),i=function(l,A){if(A[l])return A[l];for(var d=IL[l],h=0;h<d.length;++h)if(A[d[h]])return A[d[h]];throw new Error("Could not find a matching font-style for "+l)}(a.style,i),!(i=function(l,A){if(A[l])return A[l];if(l===400&&A[500])return A[500];if(l===500&&A[400])return A[400];var d=Lre[l],h=kk(A,RL,d,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(a.weight,i)))throw new Error("Failed to resolve a font for the rule '"+Fk(a)+"'.");return i}function Rk(t){return t.trimLeft()}function jre(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function Ore(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var U1,Dk,Uk,qb=["times"];(function(t){var e,n,r,s,a,i,o,l,A,d=function(j){return j=j||{},this.isStrokeTransparent=j.isStrokeTransparent||!1,this.strokeOpacity=j.strokeOpacity||1,this.strokeStyle=j.strokeStyle||"#000000",this.fillStyle=j.fillStyle||"#000000",this.isFillTransparent=j.isFillTransparent||!1,this.fillOpacity=j.fillOpacity||1,this.font=j.font||"10px sans-serif",this.textBaseline=j.textBaseline||"alphabetic",this.textAlign=j.textAlign||"left",this.lineWidth=j.lineWidth||1,this.lineJoin=j.lineJoin||"miter",this.lineCap=j.lineCap||"butt",this.path=j.path||[],this.transform=j.transform!==void 0?j.transform.clone():new l,this.globalCompositeOperation=j.globalCompositeOperation||"normal",this.globalAlpha=j.globalAlpha||1,this.clip_path=j.clip_path||[],this.currentPoint=j.currentPoint||new i,this.miterLimit=j.miterLimit||10,this.lastPoint=j.lastPoint||new i,this.lineDashOffset=j.lineDashOffset||0,this.lineDash=j.lineDash||[],this.margin=j.margin||[0,0,0,0],this.prevPageLastElemOffset=j.prevPageLastElemOffset||0,this.ignoreClearRect=typeof j.ignoreClearRect!="boolean"||j.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,A=new d}]);var h=function(j){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=j;Object.defineProperty(this,"pdf",{get:function(){return W}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(De){J=!!De}});var ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ne},set:function(De){ne=!!De}});var oe=0;Object.defineProperty(this,"posX",{get:function(){return oe},set:function(De){isNaN(De)||(oe=De)}});var ue=0;Object.defineProperty(this,"posY",{get:function(){return ue},set:function(De){isNaN(De)||(ue=De)}}),Object.defineProperty(this,"margin",{get:function(){return A.margin},set:function(De){var Ee;typeof De=="number"?Ee=[De,De,De,De]:((Ee=new Array(4))[0]=De[0],Ee[1]=De.length>=2?De[1]:Ee[0],Ee[2]=De.length>=3?De[2]:Ee[0],Ee[3]=De.length>=4?De[3]:Ee[1]),A.margin=Ee}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(De){me=De}});var ge=0;Object.defineProperty(this,"lastBreak",{get:function(){return ge},set:function(De){ge=De}});var ke=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ke},set:function(De){ke=De}}),Object.defineProperty(this,"ctx",{get:function(){return A},set:function(De){De instanceof d&&(A=De)}}),Object.defineProperty(this,"path",{get:function(){return A.path},set:function(De){A.path=De}});var ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return ve},set:function(De){ve=De}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(De){var Ee;Ee=p(De),this.ctx.fillStyle=Ee.style,this.ctx.isFillTransparent=Ee.a===0,this.ctx.fillOpacity=Ee.a,this.pdf.setFillColor(Ee.r,Ee.g,Ee.b,{a:Ee.a}),this.pdf.setTextColor(Ee.r,Ee.g,Ee.b,{a:Ee.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(De){var Ee=p(De);this.ctx.strokeStyle=Ee.style,this.ctx.isStrokeTransparent=Ee.a===0,this.ctx.strokeOpacity=Ee.a,Ee.a===0?this.pdf.setDrawColor(255,255,255):(Ee.a,this.pdf.setDrawColor(Ee.r,Ee.g,Ee.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(De){["butt","round","square"].indexOf(De)!==-1&&(this.ctx.lineCap=De,this.pdf.setLineCap(De))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(De){isNaN(De)||(this.ctx.lineWidth=De,this.pdf.setLineWidth(De))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(De){["bevel","round","miter"].indexOf(De)!==-1&&(this.ctx.lineJoin=De,this.pdf.setLineJoin(De))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(De){isNaN(De)||(this.ctx.miterLimit=De,this.pdf.setMiterLimit(De))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(De){this.ctx.textBaseline=De}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(De){["right","end","center","left","start"].indexOf(De)!==-1&&(this.ctx.textAlign=De)}});var ae=null;function Re(De,Ee){if(ae===null){var Ge=function(tt){var it=[];return Object.keys(tt).forEach(function(mt){tt[mt].forEach(function(Ct){var At=null;switch(Ct){case"bold":At={family:mt,weight:"bold"};break;case"italic":At={family:mt,style:"italic"};break;case"bolditalic":At={family:mt,weight:"bold",style:"italic"};break;case"":case"normal":At={family:mt}}At!==null&&(At.ref={name:mt,style:Ct},it.push(At))})}),it}(De.getFontList());ae=function(tt){for(var it={},mt=0;mt<tt.length;++mt){var Ct=XE(tt[mt]),At=Ct.family,Nt=Ct.stretch,It=Ct.style,qt=Ct.weight;it[At]=it[At]||{},it[At][Nt]=it[At][Nt]||{},it[At][Nt][It]=it[At][Nt][It]||{},it[At][Nt][It][qt]=Ct}return it}(Ge.concat(Ee))}return ae}var Je=null;Object.defineProperty(this,"fontFaces",{get:function(){return Je},set:function(De){ae=null,Je=De}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(De){var Ee;if(this.ctx.font=De,(Ee=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(De))!==null){var Ge=Ee[1],tt=(Ee[2],Ee[3]),it=Ee[4],mt=(Ee[5],Ee[6]),Ct=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(it)[2];it=Math.floor(Ct==="px"?parseFloat(it)*this.pdf.internal.scaleFactor:Ct==="em"?parseFloat(it)*this.pdf.getFontSize():parseFloat(it)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(it);var At=function(Mt){var kt,gt,xn=[],Wt=Mt.trim();if(Wt==="")return qb;if(Wt in Ik)return[Ik[Wt]];for(;Wt!=="";){switch(gt=null,kt=(Wt=Rk(Wt)).charAt(0)){case'"':case"'":gt=jre(Wt.substring(1),kt);break;default:gt=Ore(Wt)}if(gt===null||(xn.push(gt[0]),(Wt=Rk(gt[1]))!==""&&Wt.charAt(0)!==","))return qb;Wt=Wt.replace(/^,/,"")}return xn}(mt);if(this.fontFaces){var Nt=Pre(Re(this.pdf,this.fontFaces),At.map(function(Mt){return{family:Mt,stretch:"normal",weight:tt,style:Ge}}));this.pdf.setFont(Nt.ref.name,Nt.ref.style)}else{var It="";(tt==="bold"||parseInt(tt,10)>=700||Ge==="bold")&&(It="bold"),Ge==="italic"&&(It+="italic"),It.length===0&&(It="normal");for(var qt="",Lt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Vt=0;Vt<At.length;Vt++){if(this.pdf.internal.getFont(At[Vt],It,{noFallback:!0,disableWarning:!0})!==void 0){qt=At[Vt];break}if(It==="bolditalic"&&this.pdf.internal.getFont(At[Vt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)qt=At[Vt],It="bold";else if(this.pdf.internal.getFont(At[Vt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){qt=At[Vt],It="normal";break}}if(qt===""){for(var Yt=0;Yt<At.length;Yt++)if(Lt[At[Yt]]){qt=Lt[At[Yt]];break}}qt=qt===""?"Times":qt,this.pdf.setFont(qt,It)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(De){this.ctx.globalCompositeOperation=De}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(De){this.ctx.globalAlpha=De}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(De){this.ctx.lineDashOffset=De,de.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(De){this.ctx.lineDash=De,de.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(De){this.ctx.ignoreClearRect=!!De}})};h.prototype.setLineDash=function(j){this.lineDash=j},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){F.call(this,"fill",!1)},h.prototype.stroke=function(){F.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(j,W){if(isNaN(j)||isNaN(W))throw $r.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new i(j,W));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new i(j,W)},h.prototype.closePath=function(){var j=new i(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&Lr(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){j=new i(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(j.x,j.y)},h.prototype.lineTo=function(j,W){if(isNaN(j)||isNaN(W))throw $r.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new i(j,W));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new i(J.x,J.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),F.call(this,null,!0)},h.prototype.quadraticCurveTo=function(j,W,J,ne){if(isNaN(J)||isNaN(ne)||isNaN(j)||isNaN(W))throw $r.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var oe=this.ctx.transform.applyToPoint(new i(J,ne)),ue=this.ctx.transform.applyToPoint(new i(j,W));this.path.push({type:"qct",x1:ue.x,y1:ue.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new i(oe.x,oe.y)},h.prototype.bezierCurveTo=function(j,W,J,ne,oe,ue){if(isNaN(oe)||isNaN(ue)||isNaN(j)||isNaN(W)||isNaN(J)||isNaN(ne))throw $r.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new i(oe,ue)),ge=this.ctx.transform.applyToPoint(new i(j,W)),ke=this.ctx.transform.applyToPoint(new i(J,ne));this.path.push({type:"bct",x1:ge.x,y1:ge.y,x2:ke.x,y2:ke.y,x:me.x,y:me.y}),this.ctx.lastPoint=new i(me.x,me.y)},h.prototype.arc=function(j,W,J,ne,oe,ue){if(isNaN(j)||isNaN(W)||isNaN(J)||isNaN(ne)||isNaN(oe))throw $r.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ue=!!ue,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new i(j,W));j=me.x,W=me.y;var ge=this.ctx.transform.applyToPoint(new i(0,J)),ke=this.ctx.transform.applyToPoint(new i(0,0));J=Math.sqrt(Math.pow(ge.x-ke.x,2)+Math.pow(ge.y-ke.y,2))}Math.abs(oe-ne)>=2*Math.PI&&(ne=0,oe=2*Math.PI),this.path.push({type:"arc",x:j,y:W,radius:J,startAngle:ne,endAngle:oe,counterclockwise:ue})},h.prototype.arcTo=function(j,W,J,ne,oe){throw new Error("arcTo not implemented.")},h.prototype.rect=function(j,W,J,ne){if(isNaN(j)||isNaN(W)||isNaN(J)||isNaN(ne))throw $r.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(j,W),this.lineTo(j+J,W),this.lineTo(j+J,W+ne),this.lineTo(j,W+ne),this.lineTo(j,W),this.lineTo(j+J,W),this.lineTo(j,W)},h.prototype.fillRect=function(j,W,J,ne){if(isNaN(j)||isNaN(W)||isNaN(J)||isNaN(ne))throw $r.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var oe={};this.lineCap!=="butt"&&(oe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(oe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(j,W,J,ne),this.fill(),oe.hasOwnProperty("lineCap")&&(this.lineCap=oe.lineCap),oe.hasOwnProperty("lineJoin")&&(this.lineJoin=oe.lineJoin)}},h.prototype.strokeRect=function(j,W,J,ne){if(isNaN(j)||isNaN(W)||isNaN(J)||isNaN(ne))throw $r.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");w.call(this)||(this.beginPath(),this.rect(j,W,J,ne),this.stroke())},h.prototype.clearRect=function(j,W,J,ne){if(isNaN(j)||isNaN(W)||isNaN(J)||isNaN(ne))throw $r.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(j,W,J,ne))},h.prototype.save=function(j){j=typeof j!="boolean"||j;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),j){this.ctx.fontSize=this.pdf.internal.getFontSize();var ne=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ne}},h.prototype.restore=function(j){j=typeof j!="boolean"||j;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(W),j&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(j){var W,J,ne,oe;if(j.isCanvasGradient===!0&&(j=j.getColor()),!j)return{r:0,g:0,b:0,a:0,style:j};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(j))W=0,J=0,ne=0,oe=0;else{var ue=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(j);if(ue!==null)W=parseInt(ue[1]),J=parseInt(ue[2]),ne=parseInt(ue[3]),oe=1;else if((ue=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(j))!==null)W=parseInt(ue[1]),J=parseInt(ue[2]),ne=parseInt(ue[3]),oe=parseFloat(ue[4]);else{if(oe=1,typeof j=="string"&&j.charAt(0)!=="#"){var me=new EL(j);j=me.ok?me.toHex():"#000000"}j.length===4?(W=j.substring(1,2),W+=W,J=j.substring(2,3),J+=J,ne=j.substring(3,4),ne+=ne):(W=j.substring(1,3),J=j.substring(3,5),ne=j.substring(5,7)),W=parseInt(W,16),J=parseInt(J,16),ne=parseInt(ne,16)}}return{r:W,g:J,b:ne,a:oe,style:j}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},w=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(j,W,J,ne){if(isNaN(W)||isNaN(J)||typeof j!="string")throw $r.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ne=isNaN(ne)?void 0:ne,!g.call(this)){var oe=se(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;U.call(this,{text:j,x:W,y:J,scale:ue,angle:oe,align:this.textAlign,maxWidth:ne})}},h.prototype.strokeText=function(j,W,J,ne){if(isNaN(W)||isNaN(J)||typeof j!="string")throw $r.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!w.call(this)){ne=isNaN(ne)?void 0:ne;var oe=se(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;U.call(this,{text:j,x:W,y:J,scale:ue,renderingMode:"stroke",angle:oe,align:this.textAlign,maxWidth:ne})}},h.prototype.measureText=function(j){if(typeof j!="string")throw $r.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,J=this.pdf.internal.scaleFactor,ne=W.internal.getFontSize(),oe=W.getStringUnitWidth(j)*ne/W.internal.scaleFactor,ue=function(me){var ge=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ge}}),this};return new ue({width:oe*=Math.round(96*J/72*1e4)/1e4})},h.prototype.scale=function(j,W){if(isNaN(j)||isNaN(W))throw $r.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new l(j,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},h.prototype.rotate=function(j){if(isNaN(j))throw $r.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new l(Math.cos(j),Math.sin(j),-Math.sin(j),Math.cos(j),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},h.prototype.translate=function(j,W){if(isNaN(j)||isNaN(W))throw $r.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new l(1,0,0,1,j,W);this.ctx.transform=this.ctx.transform.multiply(J)},h.prototype.transform=function(j,W,J,ne,oe,ue){if(isNaN(j)||isNaN(W)||isNaN(J)||isNaN(ne)||isNaN(oe)||isNaN(ue))throw $r.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new l(j,W,J,ne,oe,ue);this.ctx.transform=this.ctx.transform.multiply(me)},h.prototype.setTransform=function(j,W,J,ne,oe,ue){j=isNaN(j)?1:j,W=isNaN(W)?0:W,J=isNaN(J)?0:J,ne=isNaN(ne)?1:ne,oe=isNaN(oe)?0:oe,ue=isNaN(ue)?0:ue,this.ctx.transform=new l(j,W,J,ne,oe,ue)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(j,W,J,ne,oe,ue,me,ge,ke){var ve=this.pdf.getImageProperties(j),ae=1,Re=1,Je=1,De=1;ne!==void 0&&ge!==void 0&&(Je=ge/ne,De=ke/oe,ae=ve.width/ne*ge/ne,Re=ve.height/oe*ke/oe),ue===void 0&&(ue=W,me=J,W=0,J=0),ne!==void 0&&ge===void 0&&(ge=ne,ke=oe),ne===void 0&&ge===void 0&&(ge=ve.width,ke=ve.height);for(var Ee,Ge=this.ctx.transform.decompose(),tt=se(Ge.rotate.shx),it=new l,mt=(it=(it=(it=it.multiply(Ge.translate)).multiply(Ge.skew)).multiply(Ge.scale)).applyToRectangle(new o(ue-W*Je,me-J*De,ne*ae,oe*Re)),Ct=E.call(this,mt),At=[],Nt=0;Nt<Ct.length;Nt+=1)At.indexOf(Ct[Nt])===-1&&At.push(Ct[Nt]);if(k(At),this.autoPaging)for(var It=At[0],qt=At[At.length-1],Lt=It;Lt<qt+1;Lt++){this.pdf.setPage(Lt);var Vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Yt=Lt===1?this.posY+this.margin[0]:this.margin[0],Mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],gt=Lt===1?0:Mt+(Lt-2)*kt;if(this.ctx.clip_path.length!==0){var xn=this.path;Ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(Ee,this.posX+this.margin[3],-gt+Yt+this.ctx.prevPageLastElemOffset),D.call(this,"fill",!0),this.path=xn}var Wt=JSON.parse(JSON.stringify(mt));Wt=I([Wt],this.posX+this.margin[3],-gt+Yt+this.ctx.prevPageLastElemOffset)[0];var rr=(Lt>It||Lt<qt)&&b.call(this);rr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Vt,kt,null).clip().discardPath()),this.pdf.addImage(j,"JPEG",Wt.x,Wt.y,Wt.w,Wt.h,null,null,tt),rr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(j,"JPEG",mt.x,mt.y,mt.w,mt.h,null,null,tt)};var E=function(j,W,J){var ne=[];W=W||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var oe=this.posY+this.ctx.prevPageLastElemOffset;switch(j.type){default:case"mt":case"lt":ne.push(Math.floor((j.y+oe)/J)+1);break;case"arc":ne.push(Math.floor((j.y+oe-j.radius)/J)+1),ne.push(Math.floor((j.y+oe+j.radius)/J)+1);break;case"qct":var ue=Z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x,j.y);ne.push(Math.floor((ue.y+oe)/J)+1),ne.push(Math.floor((ue.y+ue.h+oe)/J)+1);break;case"bct":var me=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x2,j.y2,j.x,j.y);ne.push(Math.floor((me.y+oe)/J)+1),ne.push(Math.floor((me.y+me.h+oe)/J)+1);break;case"rect":ne.push(Math.floor((j.y+oe)/J)+1),ne.push(Math.floor((j.y+j.h+oe)/J)+1)}for(var ge=0;ge<ne.length;ge+=1)for(;this.pdf.internal.getNumberOfPages()<ne[ge];)B.call(this);return ne},B=function(){var j=this.fillStyle,W=this.strokeStyle,J=this.font,ne=this.lineCap,oe=this.lineWidth,ue=this.lineJoin;this.pdf.addPage(),this.fillStyle=j,this.strokeStyle=W,this.font=J,this.lineCap=ne,this.lineWidth=oe,this.lineJoin=ue},I=function(j,W,J){for(var ne=0;ne<j.length;ne++)switch(j[ne].type){case"bct":j[ne].x2+=W,j[ne].y2+=J;case"qct":j[ne].x1+=W,j[ne].y1+=J;case"mt":case"lt":case"arc":default:j[ne].x+=W,j[ne].y+=J}return j},k=function(j){return j.sort(function(W,J){return W-J})},F=function(j,W){for(var J,ne,oe=this.fillStyle,ue=this.strokeStyle,me=this.lineCap,ge=this.lineWidth,ke=Math.abs(ge*this.ctx.transform.scaleX),ve=this.lineJoin,ae=JSON.parse(JSON.stringify(this.path)),Re=JSON.parse(JSON.stringify(this.path)),Je=[],De=0;De<Re.length;De++)if(Re[De].x!==void 0)for(var Ee=E.call(this,Re[De]),Ge=0;Ge<Ee.length;Ge+=1)Je.indexOf(Ee[Ge])===-1&&Je.push(Ee[Ge]);for(var tt=0;tt<Je.length;tt++)for(;this.pdf.internal.getNumberOfPages()<Je[tt];)B.call(this);if(k(Je),this.autoPaging)for(var it=Je[0],mt=Je[Je.length-1],Ct=it;Ct<mt+1;Ct++){this.pdf.setPage(Ct),this.fillStyle=oe,this.strokeStyle=ue,this.lineCap=me,this.lineWidth=ke,this.lineJoin=ve;var At=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nt=Ct===1?this.posY+this.margin[0]:this.margin[0],It=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Lt=Ct===1?0:It+(Ct-2)*qt;if(this.ctx.clip_path.length!==0){var Vt=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(J,this.posX+this.margin[3],-Lt+Nt+this.ctx.prevPageLastElemOffset),D.call(this,j,!0),this.path=Vt}if(ne=JSON.parse(JSON.stringify(ae)),this.path=I(ne,this.posX+this.margin[3],-Lt+Nt+this.ctx.prevPageLastElemOffset),W===!1||Ct===0){var Yt=(Ct>it||Ct<mt)&&b.call(this);Yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,qt,null).clip().discardPath()),D.call(this,j,W),Yt&&this.pdf.restoreGraphicsState()}this.lineWidth=ge}else this.lineWidth=ke,D.call(this,j,W),this.lineWidth=ge;this.path=ae},D=function(j,W){if((j!=="stroke"||W||!w.call(this))&&(j==="stroke"||W||!g.call(this))){for(var J,ne,oe=[],ue=this.path,me=0;me<ue.length;me++){var ge=ue[me];switch(ge.type){case"begin":oe.push({begin:!0});break;case"close":oe.push({close:!0});break;case"mt":oe.push({start:ge,deltas:[],abs:[]});break;case"lt":var ke=oe.length;if(ue[me-1]&&!isNaN(ue[me-1].x)&&(J=[ge.x-ue[me-1].x,ge.y-ue[me-1].y],ke>0)){for(;ke>=0;ke--)if(oe[ke-1].close!==!0&&oe[ke-1].begin!==!0){oe[ke-1].deltas.push(J),oe[ke-1].abs.push(ge);break}}break;case"bct":J=[ge.x1-ue[me-1].x,ge.y1-ue[me-1].y,ge.x2-ue[me-1].x,ge.y2-ue[me-1].y,ge.x-ue[me-1].x,ge.y-ue[me-1].y],oe[oe.length-1].deltas.push(J);break;case"qct":var ve=ue[me-1].x+2/3*(ge.x1-ue[me-1].x),ae=ue[me-1].y+2/3*(ge.y1-ue[me-1].y),Re=ge.x+2/3*(ge.x1-ge.x),Je=ge.y+2/3*(ge.y1-ge.y),De=ge.x,Ee=ge.y;J=[ve-ue[me-1].x,ae-ue[me-1].y,Re-ue[me-1].x,Je-ue[me-1].y,De-ue[me-1].x,Ee-ue[me-1].y],oe[oe.length-1].deltas.push(J);break;case"arc":oe.push({deltas:[],abs:[],arc:!0}),Array.isArray(oe[oe.length-1].abs)&&oe[oe.length-1].abs.push(ge)}}ne=W?null:j==="stroke"?"stroke":"fill";for(var Ge=!1,tt=0;tt<oe.length;tt++)if(oe[tt].arc)for(var it=oe[tt].abs,mt=0;mt<it.length;mt++){var Ct=it[mt];Ct.type==="arc"?N.call(this,Ct.x,Ct.y,Ct.radius,Ct.startAngle,Ct.endAngle,Ct.counterclockwise,void 0,W,!Ge):O.call(this,Ct.x,Ct.y),Ge=!0}else if(oe[tt].close===!0)this.pdf.internal.out("h"),Ge=!1;else if(oe[tt].begin!==!0){var At=oe[tt].start.x,Nt=oe[tt].start.y;G.call(this,oe[tt].deltas,At,Nt),Ge=!0}ne&&T.call(this,ne),W&&V.call(this)}},P=function(j){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return j-J;case"top":return j+W-J;case"hanging":return j+W-2*J;case"middle":return j+W/2-J;case"ideographic":return j;case"alphabetic":default:return j}},S=function(j){return j+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var j=function(){};return j.colorStops=[],j.addColorStop=function(W,J){this.colorStops.push([W,J])},j.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},j.isCanvasGradient=!0,j},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(j,W,J,ne,oe,ue,me,ge,ke){for(var ve=K.call(this,J,ne,oe,ue),ae=0;ae<ve.length;ae++){var Re=ve[ae];ae===0&&(ke?M.call(this,Re.x1+j,Re.y1+W):O.call(this,Re.x1+j,Re.y1+W)),ie.call(this,j,W,Re.x2,Re.y2,Re.x3,Re.y3,Re.x4,Re.y4)}ge?V.call(this):T.call(this,me)},T=function(j){switch(j){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},M=function(j,W){this.pdf.internal.out(n(j)+" "+r(W)+" m")},U=function(j){var W;switch(j.align){case"right":case"end":W="right";break;case"center":W="center";break;case"left":case"start":default:W="left"}var J=this.pdf.getTextDimensions(j.text),ne=P.call(this,j.y),oe=S.call(this,ne)-J.h,ue=this.ctx.transform.applyToPoint(new i(j.x,ne)),me=this.ctx.transform.decompose(),ge=new l;ge=(ge=(ge=ge.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var ke,ve,ae,Re=this.ctx.transform.applyToRectangle(new o(j.x,ne,J.w,J.h)),Je=ge.applyToRectangle(new o(j.x,oe,J.w,J.h)),De=E.call(this,Je),Ee=[],Ge=0;Ge<De.length;Ge+=1)Ee.indexOf(De[Ge])===-1&&Ee.push(De[Ge]);if(k(Ee),this.autoPaging)for(var tt=Ee[0],it=Ee[Ee.length-1],mt=tt;mt<it+1;mt++){this.pdf.setPage(mt);var Ct=mt===1?this.posY+this.margin[0]:this.margin[0],At=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[2],It=Nt-this.margin[0],qt=this.pdf.internal.pageSize.width-this.margin[1],Lt=qt-this.margin[3],Vt=mt===1?0:At+(mt-2)*It;if(this.ctx.clip_path.length!==0){var Yt=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(ke,this.posX+this.margin[3],-1*Vt+Ct),D.call(this,"fill",!0),this.path=Yt}var Mt=I([JSON.parse(JSON.stringify(Je))],this.posX+this.margin[3],-Vt+Ct+this.ctx.prevPageLastElemOffset)[0];j.scale>=.01&&(ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ve*j.scale),ae=this.lineWidth,this.lineWidth=ae*j.scale);var kt=this.autoPaging!=="text";if(kt||Mt.y+Mt.h<=Nt){if(kt||Mt.y>=Ct&&Mt.x<=qt){var gt=kt?j.text:this.pdf.splitTextToSize(j.text,j.maxWidth||qt-Mt.x)[0],xn=I([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-Vt+Ct+this.ctx.prevPageLastElemOffset)[0],Wt=kt&&(mt>tt||mt<it)&&b.call(this);Wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Lt,It,null).clip().discardPath()),this.pdf.text(gt,xn.x,xn.y,{angle:j.angle,align:W,renderingMode:j.renderingMode}),Wt&&this.pdf.restoreGraphicsState()}}else Mt.y<Nt&&(this.ctx.prevPageLastElemOffset+=Nt-Mt.y);j.scale>=.01&&(this.pdf.setFontSize(ve),this.lineWidth=ae)}else j.scale>=.01&&(ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ve*j.scale),ae=this.lineWidth,this.lineWidth=ae*j.scale),this.pdf.text(j.text,ue.x+this.posX,ue.y+this.posY,{angle:j.angle,align:W,renderingMode:j.renderingMode,maxWidth:j.maxWidth}),j.scale>=.01&&(this.pdf.setFontSize(ve),this.lineWidth=ae)},O=function(j,W,J,ne){J=J||0,ne=ne||0,this.pdf.internal.out(n(j+J)+" "+r(W+ne)+" l")},G=function(j,W,J){return this.pdf.lines(j,W,J,null,null)},ie=function(j,W,J,ne,oe,ue,me,ge){this.pdf.internal.out([e(s(J+j)),e(a(ne+W)),e(s(oe+j)),e(a(ue+W)),e(s(me+j)),e(a(ge+W)),"c"].join(" "))},K=function(j,W,J,ne){for(var oe=2*Math.PI,ue=Math.PI/2;W>J;)W-=oe;var me=Math.abs(J-W);me<oe&&ne&&(me=oe-me);for(var ge=[],ke=ne?-1:1,ve=W;me>1e-5;){var ae=ve+ke*Math.min(me,ue);ge.push(q.call(this,j,ve,ae)),me-=Math.abs(ae-ve),ve=ae}return ge},q=function(j,W,J){var ne=(J-W)/2,oe=j*Math.cos(ne),ue=j*Math.sin(ne),me=oe,ge=-ue,ke=me*me+ge*ge,ve=ke+me*oe+ge*ue,ae=4/3*(Math.sqrt(2*ke*ve)-ve)/(me*ue-ge*oe),Re=me-ae*ge,Je=ge+ae*me,De=Re,Ee=-Je,Ge=ne+W,tt=Math.cos(Ge),it=Math.sin(Ge);return{x1:j*Math.cos(W),y1:j*Math.sin(W),x2:Re*tt-Je*it,y2:Re*it+Je*tt,x3:De*tt-Ee*it,y3:De*it+Ee*tt,x4:j*Math.cos(J),y4:j*Math.sin(J)}},se=function(j){return 180*j/Math.PI},Z=function(j,W,J,ne,oe,ue){var me=j+.5*(J-j),ge=W+.5*(ne-W),ke=oe+.5*(J-oe),ve=ue+.5*(ne-ue),ae=Math.min(j,oe,me,ke),Re=Math.max(j,oe,me,ke),Je=Math.min(W,ue,ge,ve),De=Math.max(W,ue,ge,ve);return new o(ae,Je,Re-ae,De-Je)},X=function(j,W,J,ne,oe,ue,me,ge){var ke,ve,ae,Re,Je,De,Ee,Ge,tt,it,mt,Ct,At,Nt,It=J-j,qt=ne-W,Lt=oe-J,Vt=ue-ne,Yt=me-oe,Mt=ge-ue;for(ve=0;ve<41;ve++)tt=(Ee=(ae=j+(ke=ve/40)*It)+ke*((Je=J+ke*Lt)-ae))+ke*(Je+ke*(oe+ke*Yt-Je)-Ee),it=(Ge=(Re=W+ke*qt)+ke*((De=ne+ke*Vt)-Re))+ke*(De+ke*(ue+ke*Mt-De)-Ge),ve==0?(mt=tt,Ct=it,At=tt,Nt=it):(mt=Math.min(mt,tt),Ct=Math.min(Ct,it),At=Math.max(At,tt),Nt=Math.max(Nt,it));return new o(Math.round(mt),Math.round(Ct),Math.round(At-mt),Math.round(Nt-Ct))},de=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var j,W,J=(j=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:j,lineDashOffset:W}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(sn.API),function(t){var e=function(a){var i,o,l,A,d,h,p,g,w,b;for(o=[],l=0,A=(a+=i="\0\0\0\0".slice(a.length%4||4)).length;A>l;l+=4)(d=(a.charCodeAt(l)<<24)+(a.charCodeAt(l+1)<<16)+(a.charCodeAt(l+2)<<8)+a.charCodeAt(l+3))!==0?(h=(d=((d=((d=((d=(d-(b=d%85))/85)-(w=d%85))/85)-(g=d%85))/85)-(p=d%85))/85)%85,o.push(h+33,p+33,g+33,w+33,b+33)):o.push(122);return function(E,B){for(var I=B;I>0;I--)E.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},n=function(a){var i,o,l,A,d,h=String,p="length",g=255,w="charCodeAt",b="slice",E="replace";for(a[b](-2),a=a[b](0,-2)[E](/\s/g,"")[E]("z","!!!!!"),l=[],A=0,d=(a+=i="uuuuu"[b](a[p]%5||5))[p];d>A;A+=5)o=52200625*(a[w](A)-33)+614125*(a[w](A+1)-33)+7225*(a[w](A+2)-33)+85*(a[w](A+3)-33)+(a[w](A+4)-33),l.push(g&o>>24,g&o>>16,g&o>>8,g&o);return function(B,I){for(var k=I;k>0;k--)B.pop()}(l,i[p]),h.fromCharCode.apply(h,l)},r=function(a){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),i.test(a)===!1)return"";for(var o="",l=0;l<a.length;l+=2)o+=String.fromCharCode("0x"+(a[l]+a[l+1]));return o},s=function(a){for(var i=new Uint8Array(a.length),o=a.length;o--;)i[o]=a.charCodeAt(o);return a=(i=KE(i)).reduce(function(l,A){return l+String.fromCharCode(A)},"")};t.processDataByFilters=function(a,i){var o=0,l=a||"",A=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),A.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),A.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),A.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",A.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),A.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:A.reverse().join(" ")}}}(sn.API),function(t){t.loadFile=function(e,n,r){return function(s,a,i){a=a!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(l,A,d){var h=new XMLHttpRequest,p=0,g=function(w){var b=w.length,E=[],B=String.fromCharCode;for(p=0;p<b;p+=1)E.push(B(255&w.charCodeAt(p)));return E.join("")};if(h.open("GET",l,!A),h.overrideMimeType("text/plain; charset=x-user-defined"),A===!1&&(h.onload=function(){h.status===200?d(g(this.responseText)):d(void 0)}),h.send(null),A&&h.status===200)return g(h.responseText)}(s,a,i)}catch{}return o}(e,n,r)},t.loadImageFile=t.loadFile}(sn.API),function(t){function e(){return(yn.html2canvas?Promise.resolve(yn.html2canvas):QE(()=>Promise.resolve().then(()=>tye),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function n(){return(yn.DOMPurify?Promise.resolve(yn.DOMPurify):QE(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var r=function(i){var o=Lr(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},s=function(i,o){var l=document.createElement(i);for(var A in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[A]=o.style[A];return l},a=function i(o){var l=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),A=i.convert(Promise.resolve(),l);return A=(A=A.setProgress(1,i,1,[i])).set(o)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(i,o){return i.__proto__=o||a.prototype,i},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(n).then(function(l){return this.set({src:s("div",{innerHTML:i,dompurify:l})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},a.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(A,d){for(var h=A.nodeType===3?document.createTextNode(A.nodeValue):A.cloneNode(!1),p=A.firstChild;p;p=p.nextSibling)d!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||h.appendChild(l(p,d));return A.nodeType===1&&(A.nodeName==="CANVAS"?(h.width=A.width,h.height=A.height,h.getContext("2d").drawImage(A,0,0)):A.nodeName!=="TEXTAREA"&&A.nodeName!=="SELECT"||(h.value=A.value),h.addEventListener("load",function(){h.scrollTop=A.scrollTop,h.scrollLeft=A.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=this.opt.jsPDF,A=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=A,A)for(var p=0;p<A.length;++p){var g=A[p],w=g.src.find(function(b){return b.format==="truetype"});w&&l.addFont(w.url,g.ref.name,g.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),o(this.prop.container,h)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(i,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},a.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},a.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},a.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(i){if(r(i)!=="object")return this;var o=Object.keys(i||{}).map(function(l){if(l in a.template.prop)return function(){this.prop[l]=i[l]};switch(l){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[l]=i[l]}}},this);return this.then(function(){return this.thenList(o)})},a.prototype.get=function(i,o){return this.then(function(){var l=i in a.template.prop?this.prop[i]:this.opt[i];return o?o(l):l})},a.prototype.setMargin=function(i){return this.then(function(){switch(r(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},a.prototype.setPageSize=function(i){function o(l,A){return Math.floor(l*A/72*96)}return this.then(function(){(i=i||sn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},a.prototype.setProgress=function(i,o,l,A){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),A!=null&&(this.progress.stack=A),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(i,o,l,A){return this.setProgress(i?this.progress.val+i:null,o||null,l?this.progress.n+l:null,A?this.progress.stack.concat(A):null)},a.prototype.then=function(i,o){var l=this;return this.thenCore(i,o,function(A,d){return l.updateProgress(null,null,1,[A]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,A),h}).then(A,d).then(function(h){return l.updateProgress(1),h})})},a.prototype.thenCore=function(i,o,l){l=l||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var A=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),d=l.call(A,i,o);return a.convert(d,this.__proto__)},a.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},a.prototype.thenList=function(i){var o=this;return i.forEach(function(l){o=o.thenCore(l)}),o},a.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return a.convert(o,this)},a.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},a.prototype.error=function(i){return this.then(function(){throw new Error(i)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,sn.getPageSize=function(i,o,l){if(Lr(i)==="object"){var A=i;i=A.orientation,o=A.unit||o,l=A.format||l}o=o||"mm",l=l||"a4",i=(""+(i||"P")).toLowerCase();var d,h=(""+l).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var g,w=0,b=0;if(p.hasOwnProperty(h))w=p[h][1]/d,b=p[h][0]/d;else try{w=l[1],b=l[0]}catch{throw new Error("Invalid format: "+l)}if(i==="p"||i==="portrait")i="p",b>w&&(g=b,b=w,w=g);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",w>b&&(g=b,b=w,w=g)}return{width:b,height:w,unit:o,k:d,orientation:i}},t.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(XE):null;var l=new a(o);return o.worker?l:l.from(i).doCallback()}}(sn.API),sn.API.addJS=function(t){return Uk=t,this.internal.events.subscribe("postPutResources",function(){U1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(U1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Dk=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Uk+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){U1!==void 0&&Dk!==void 0&&this.internal.out("/Names <</JavaScript "+U1+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=n.outline.render().split(/\r\n/),a=0;a<s.length;a++){var i=s[a],o=r.exec(i);if(o!=null){var l=o[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(i)}if(this.outline.createNamedDestinations){var A=this.internal.pages.length,d=[];for(a=0;a<A;a++){var h=n.internal.newObject();d.push(h);var p=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<d.length;a++)n.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,s,a){var i={title:s,options:a,children:[]};return r==null&&(r=this.root),r.children.push(i),i},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var i=r.children[a];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var l=n.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var A=0;A<r.children.length;A++)this.renderItems(r.children[A])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,s){for(var a=0;a<s.children.length;a++)r.count++,this.count_r(r,s.children[a]);return r.count}}])}(sn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,s,a,i,o){var l,A=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=i||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(h){for(var p,g=256*h.charCodeAt(4)+h.charCodeAt(5),w=h.length,b={width:0,height:0,numcomponents:1},E=4;E<w;E+=2){if(E+=g,e.indexOf(h.charCodeAt(E+1))!==-1){p=256*h.charCodeAt(E+5)+h.charCodeAt(E+6),b={width:256*h.charCodeAt(E+7)+h.charCodeAt(E+8),height:p,numcomponents:h.charCodeAt(E+9)};break}g=256*h.charCodeAt(E+2)+h.charCodeAt(E+3)}return b}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:A,index:r,alias:s}}return d}}(sn.API);var Yh,L1,Lk,Mk,Pk,Qre=function(){var t,e,n;function r(a){var i,o,l,A,d,h,p,g,w,b,E,B,I,k;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(i=this.readUInt32(),w=(function(){var F,D;for(D=[],F=0;F<4;++F)D.push(String.fromCharCode(this.data[this.pos++]));return D}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),A=this.readUInt16()||100,h.delay=1e3*d/A,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(w==="fdAT"&&(this.pos+=4,i-=4),a=(h!=null?h.data:void 0)||this.imgData,B=0;0<=i?B<i:B>i;0<=i?++B:--B)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((b=l-this.transparency.indexed.length)>0)for(I=0;0<=b?I<b:I>b;0<=b?++I:--I)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":p=(E=this.read(i)).indexOf(0),g=String.fromCharCode.apply(String,E.slice(0,p)),this.text[g]=String.fromCharCode.apply(String,E.slice(p+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(k=this.colorType)===4||k===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(a){var i,o;for(o=[],i=0;0<=a?i<a:i>a;0<=a?++i:--i)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(a){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),l=0,A=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function d(h,p,g,w){var b,E,B,I,k,F,D,P,S,N,T,V,M,U,O,G,ie,K,q,se,Z,X=Math.ceil((A.width-h)/g),de=Math.ceil((A.height-p)/w),j=A.width==X&&A.height==de;for(U=i*X,V=j?o:new Uint8Array(U*de),F=a.length,M=0,E=0;M<de&&l<F;){switch(a[l++]){case 0:for(I=ie=0;ie<U;I=ie+=1)V[E++]=a[l++];break;case 1:for(I=K=0;K<U;I=K+=1)b=a[l++],k=I<i?0:V[E-i],V[E++]=(b+k)%256;break;case 2:for(I=q=0;q<U;I=q+=1)b=a[l++],B=(I-I%i)/i,O=M&&V[(M-1)*U+B*i+I%i],V[E++]=(O+b)%256;break;case 3:for(I=se=0;se<U;I=se+=1)b=a[l++],B=(I-I%i)/i,k=I<i?0:V[E-i],O=M&&V[(M-1)*U+B*i+I%i],V[E++]=(b+Math.floor((k+O)/2))%256;break;case 4:for(I=Z=0;Z<U;I=Z+=1)b=a[l++],B=(I-I%i)/i,k=I<i?0:V[E-i],M===0?O=G=0:(O=V[(M-1)*U+B*i+I%i],G=B&&V[(M-1)*U+(B-1)*i+I%i]),D=k+O-G,P=Math.abs(D-k),N=Math.abs(D-O),T=Math.abs(D-G),S=P<=N&&P<=T?k:N<=T?O:G,V[E++]=(b+S)%256;break;default:throw new Error("Invalid filter algorithm: "+a[l-1])}if(!j){var W=((p+M*w)*A.width+h)*i,J=M*U;for(I=0;I<X;I+=1){for(var ne=0;ne<i;ne+=1)o[W++]=V[J++];W+=(g-1)*i}}M++}}return a=vre(a),A.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},r.prototype.decodePalette=function(){var a,i,o,l,A,d,h,p,g;for(o=this.palette,d=this.transparency.indexed||[],A=new Uint8Array((d.length||0)+o.length),l=0,a=0,i=h=0,p=o.length;h<p;i=h+=3)A[l++]=o[i],A[l++]=o[i+1],A[l++]=o[i+2],A[l++]=(g=d[a++])!=null?g:255;return A},r.prototype.copyToImageData=function(a,i){var o,l,A,d,h,p,g,w,b,E,B;if(l=this.colors,b=null,o=this.hasAlphaChannel,this.palette.length&&(b=(B=this._decodedPalette)!=null?B:this._decodedPalette=this.decodePalette(),l=4,o=!0),w=(A=a.data||a).length,h=b||i,d=p=0,l===1)for(;d<w;)g=b?4*i[d/4]:p,E=h[g++],A[d++]=E,A[d++]=E,A[d++]=E,A[d++]=o?h[g++]:255,p=g;else for(;d<w;)g=b?4*i[d/4]:p,A[d++]=h[g++],A[d++]=h[g++],A[d++]=h[g++],A[d++]=o?h[g++]:255,p=g},r.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var s=function(){if(Object.prototype.toString.call(yn)==="[object Window]"){try{e=yn.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(a){var i;if(s()===!0)return n.width=a.width,n.height=a.height,n.clearRect(0,0,a.width,a.height),n.putImageData(a,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(a){var i,o,l,A,d,h,p,g;if(this.animation){for(g=[],o=d=0,h=(p=this.animation.frames).length;d<h;o=++d)i=p[o],l=a.createImageData(i.width,i.height),A=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(l,A),i.imageData=l,g.push(i.image=t(l));return g}},r.prototype.renderFrame=function(a,i){var o,l,A;return o=(l=this.animation.frames)[i],A=l[i-1],i===0&&a.clearRect(0,0,this.width,this.height),(A!=null?A.disposeOp:void 0)===1?a.clearRect(A.xOffset,A.yOffset,A.width,A.height):(A!=null?A.disposeOp:void 0)===2&&a.putImageData(A.imageData,A.xOffset,A.yOffset),o.blendOp===0&&a.clearRect(o.xOffset,o.yOffset,o.width,o.height),a.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(a){var i,o,l,A,d,h,p=this;return o=0,h=this.animation,A=h.numFrames,l=h.frames,d=h.numPlays,(i=function(){var g,w;if(g=o++%A,w=l[g],p.renderFrame(a,g),A>1&&o/A<d)return p.animation._timeout=setTimeout(i,w.delay)})()},r.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},r.prototype.render=function(a){var i,o;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,i=a.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Hre(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,s=t[e++],a=s>>7,i=1<<(7&s)+1;t[e++],t[e++];var o=null,l=null;a&&(o=e,l=i,e+=3*i);var A=!0,d=[],h=0,p=null,g=0,w=null;for(this.width=n,this.height=r;A&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,w=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((M=t[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var b=t[e++];h=t[e++]|t[e++]<<8,p=t[e++],(1&b)==0&&(p=null),g=b>>2&7,e++;break;case 254:for(;;){if(!((M=t[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var E=t[e++]|t[e++]<<8,B=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,F=t[e++],D=F>>6&1,P=1<<(7&F)+1,S=o,N=l,T=!1;F>>7&&(T=!0,S=e,N=P,e+=3*P);var V=e;for(e++;;){var M;if(!((M=t[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}d.push({x:E,y:B,width:I,height:k,has_local_palette:T,palette_offset:S,palette_size:N,data_offset:V,data_length:e-V,transparent_index:p,interlaced:!!D,delay:h,disposal:g});break;case 59:A=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return w},this.frameInfo=function(U){if(U<0||U>=d.length)throw new Error("Frame index out of range.");return d[U]},this.decodeAndBlitFrameBGRA=function(U,O){var G=this.frameInfo(U),ie=G.width*G.height,K=new Uint8Array(ie);jk(t,G.data_offset,K,ie);var q=G.palette_offset,se=G.transparent_index;se===null&&(se=256);var Z=G.width,X=n-Z,de=Z,j=4*(G.y*n+G.x),W=4*((G.y+G.height)*n+G.x),J=j,ne=4*X;G.interlaced===!0&&(ne+=4*n*7);for(var oe=8,ue=0,me=K.length;ue<me;++ue){var ge=K[ue];if(de===0&&(de=Z,(J+=ne)>=W&&(ne=4*X+4*n*(oe-1),J=j+(Z+X)*(oe<<1),oe>>=1)),ge===se)J+=4;else{var ke=t[q+3*ge],ve=t[q+3*ge+1],ae=t[q+3*ge+2];O[J++]=ae,O[J++]=ve,O[J++]=ke,O[J++]=255}--de}},this.decodeAndBlitFrameRGBA=function(U,O){var G=this.frameInfo(U),ie=G.width*G.height,K=new Uint8Array(ie);jk(t,G.data_offset,K,ie);var q=G.palette_offset,se=G.transparent_index;se===null&&(se=256);var Z=G.width,X=n-Z,de=Z,j=4*(G.y*n+G.x),W=4*((G.y+G.height)*n+G.x),J=j,ne=4*X;G.interlaced===!0&&(ne+=4*n*7);for(var oe=8,ue=0,me=K.length;ue<me;++ue){var ge=K[ue];if(de===0&&(de=Z,(J+=ne)>=W&&(ne=4*X+4*n*(oe-1),J=j+(Z+X)*(oe<<1),oe>>=1)),ge===se)J+=4;else{var ke=t[q+3*ge],ve=t[q+3*ge+1],ae=t[q+3*ge+2];O[J++]=ke,O[J++]=ve,O[J++]=ae,O[J++]=255}--de}}}function jk(t,e,n,r){for(var s=t[e++],a=1<<s,i=a+1,o=i+1,l=s+1,A=(1<<l)-1,d=0,h=0,p=0,g=t[e++],w=new Int32Array(4096),b=null;;){for(;d<16&&g!==0;)h|=t[e++]<<d,d+=8,g===1?g=t[e++]:--g;if(d<l)break;var E=h&A;if(h>>=l,d-=l,E!==a){if(E===i)break;for(var B=E<o?E:b,I=0,k=B;k>a;)k=w[k]>>8,++I;var F=k;if(p+I+(B!==E?1:0)>r)return void $r.log("Warning, gif stream longer than expected.");n[p++]=F;var D=p+=I;for(B!==E&&(n[p++]=F),k=B;I--;)k=w[k],n[--D]=255&k,k>>=8;b!==null&&o<4096&&(w[o++]=b<<8|F,o>=A+1&&l<12&&(++l,A=A<<1|1)),b=E}else o=i+1,A=(1<<(l=s+1))-1,b=null}return p!==r&&$r.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Wb(t){var e,n,r,s,a,i=Math.floor,o=new Array(64),l=new Array(64),A=new Array(64),d=new Array(64),h=new Array(65535),p=new Array(65535),g=new Array(64),w=new Array(64),b=[],E=0,B=7,I=new Array(64),k=new Array(64),F=new Array(64),D=new Array(256),P=new Array(2048),S=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],M=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],U=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ie=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function K(j,W){for(var J=0,ne=0,oe=new Array,ue=1;ue<=16;ue++){for(var me=1;me<=j[ue];me++)oe[W[ne]]=[],oe[W[ne]][0]=J,oe[W[ne]][1]=ue,ne++,J++;J*=2}return oe}function q(j){for(var W=j[0],J=j[1]-1;J>=0;)W&1<<J&&(E|=1<<B),J--,--B<0&&(E==255?(se(255),se(0)):se(E),B=7,E=0)}function se(j){b.push(j)}function Z(j){se(j>>8&255),se(255&j)}function X(j,W,J,ne,oe){for(var ue,me=oe[0],ge=oe[240],ke=function(it,mt){var Ct,At,Nt,It,qt,Lt,Vt,Yt,Mt,kt,gt=0;for(Mt=0;Mt<8;++Mt){Ct=it[gt],At=it[gt+1],Nt=it[gt+2],It=it[gt+3],qt=it[gt+4],Lt=it[gt+5],Vt=it[gt+6];var xn=Ct+(Yt=it[gt+7]),Wt=Ct-Yt,rr=At+Vt,mn=At-Vt,kn=Nt+Lt,Er=Nt-Lt,Tn=It+qt,Zs=It-qt,Jn=xn+Tn,qr=xn-Tn,as=rr+kn,Rn=rr-kn;it[gt]=Jn+as,it[gt+4]=Jn-as;var Zt=.707106781*(Rn+qr);it[gt+2]=qr+Zt,it[gt+6]=qr-Zt;var jn=.382683433*((Jn=Zs+Er)-(Rn=mn+Wt)),ea=.5411961*Jn+jn,jr=1.306562965*Rn+jn,us=.707106781*(as=Er+mn),ma=Wt+us,Ht=Wt-us;it[gt+5]=Ht+ea,it[gt+3]=Ht-ea,it[gt+1]=ma+jr,it[gt+7]=ma-jr,gt+=8}for(gt=0,Mt=0;Mt<8;++Mt){Ct=it[gt],At=it[gt+8],Nt=it[gt+16],It=it[gt+24],qt=it[gt+32],Lt=it[gt+40],Vt=it[gt+48];var sr=Ct+(Yt=it[gt+56]),Xn=Ct-Yt,_r=At+Vt,Nr=At-Vt,Or=Nt+Lt,fe=Nt-Lt,Be=It+qt,Ce=It-qt,_e=sr+Be,Se=sr-Be,Ne=_r+Or,Ke=_r-Or;it[gt]=_e+Ne,it[gt+32]=_e-Ne;var nt=.707106781*(Ke+Se);it[gt+16]=Se+nt,it[gt+48]=Se-nt;var Qe=.382683433*((_e=Ce+fe)-(Ke=Nr+Xn)),We=.5411961*_e+Qe,Xe=1.306562965*Ke+Qe,vt=.707106781*(Ne=fe+Nr),Bt=Xn+vt,Pt=Xn-vt;it[gt+40]=Pt+We,it[gt+24]=Pt-We,it[gt+8]=Bt+Xe,it[gt+56]=Bt-Xe,gt++}for(Mt=0;Mt<64;++Mt)kt=it[Mt]*mt[Mt],g[Mt]=kt>0?kt+.5|0:kt-.5|0;return g}(j,W),ve=0;ve<64;++ve)w[S[ve]]=ke[ve];var ae=w[0]-J;J=w[0],ae==0?q(ne[0]):(q(ne[p[ue=32767+ae]]),q(h[ue]));for(var Re=63;Re>0&&w[Re]==0;)Re--;if(Re==0)return q(me),J;for(var Je,De=1;De<=Re;){for(var Ee=De;w[De]==0&&De<=Re;)++De;var Ge=De-Ee;if(Ge>=16){Je=Ge>>4;for(var tt=1;tt<=Je;++tt)q(ge);Ge&=15}ue=32767+w[De],q(oe[(Ge<<4)+p[ue]]),q(h[ue]),De++}return Re!=63&&q(me),J}function de(j){j=Math.min(Math.max(j,1),100),a!=j&&(function(W){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var oe=i((J[ne]*W+50)/100);oe=Math.min(Math.max(oe,1),255),o[S[ne]]=oe}for(var ue=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var ge=i((ue[me]*W+50)/100);ge=Math.min(Math.max(ge,1),255),l[S[me]]=ge}for(var ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ve=0,ae=0;ae<8;ae++)for(var Re=0;Re<8;Re++)A[ve]=1/(o[S[ve]]*ke[ae]*ke[Re]*8),d[ve]=1/(l[S[ve]]*ke[ae]*ke[Re]*8),ve++}(j<50?Math.floor(5e3/j):Math.floor(200-2*j)),a=j)}this.encode=function(j,W){W&&de(W),b=new Array,E=0,B=7,Z(65496),Z(65504),Z(16),se(74),se(70),se(73),se(70),se(0),se(1),se(1),se(0),Z(1),Z(1),se(0),se(0),function(){Z(65499),Z(132),se(0);for(var At=0;At<64;At++)se(o[At]);se(1);for(var Nt=0;Nt<64;Nt++)se(l[Nt])}(),function(At,Nt){Z(65472),Z(17),se(8),Z(Nt),Z(At),se(3),se(1),se(17),se(0),se(2),se(17),se(1),se(3),se(17),se(1)}(j.width,j.height),function(){Z(65476),Z(418),se(0);for(var At=0;At<16;At++)se(N[At+1]);for(var Nt=0;Nt<=11;Nt++)se(T[Nt]);se(16);for(var It=0;It<16;It++)se(V[It+1]);for(var qt=0;qt<=161;qt++)se(M[qt]);se(1);for(var Lt=0;Lt<16;Lt++)se(U[Lt+1]);for(var Vt=0;Vt<=11;Vt++)se(O[Vt]);se(17);for(var Yt=0;Yt<16;Yt++)se(G[Yt+1]);for(var Mt=0;Mt<=161;Mt++)se(ie[Mt])}(),Z(65498),Z(12),se(3),se(1),se(0),se(2),se(17),se(3),se(17),se(0),se(63),se(0);var J=0,ne=0,oe=0;E=0,B=7,this.encode.displayName="_encode_";for(var ue,me,ge,ke,ve,ae,Re,Je,De,Ee=j.data,Ge=j.width,tt=j.height,it=4*Ge,mt=0;mt<tt;){for(ue=0;ue<it;){for(ve=it*mt+ue,Re=-1,Je=0,De=0;De<64;De++)ae=ve+(Je=De>>3)*it+(Re=4*(7&De)),mt+Je>=tt&&(ae-=it*(mt+1+Je-tt)),ue+Re>=it&&(ae-=ue+Re-it+4),me=Ee[ae++],ge=Ee[ae++],ke=Ee[ae++],I[De]=(P[me]+P[ge+256>>0]+P[ke+512>>0]>>16)-128,k[De]=(P[me+768>>0]+P[ge+1024>>0]+P[ke+1280>>0]>>16)-128,F[De]=(P[me+1280>>0]+P[ge+1536>>0]+P[ke+1792>>0]>>16)-128;J=X(I,A,J,e,r),ne=X(k,d,ne,n,s),oe=X(F,d,oe,n,s),ue+=32}mt+=8}if(B>=0){var Ct=[];Ct[1]=B+1,Ct[0]=(1<<B+1)-1,q(Ct)}return Z(65497),new Uint8Array(b)},t=t||50,function(){for(var j=String.fromCharCode,W=0;W<256;W++)D[W]=j(W)}(),e=K(N,T),n=K(U,O),r=K(V,M),s=K(G,ie),function(){for(var j=1,W=2,J=1;J<=15;J++){for(var ne=j;ne<W;ne++)p[32767+ne]=J,h[32767+ne]=[],h[32767+ne][1]=J,h[32767+ne][0]=ne;for(var oe=-(W-1);oe<=-j;oe++)p[32767+oe]=J,h[32767+oe]=[],h[32767+oe][1]=J,h[32767+oe][0]=W-1+oe;j<<=1,W<<=1}}(),function(){for(var j=0;j<256;j++)P[j]=19595*j,P[j+256>>0]=38470*j,P[j+512>>0]=7471*j+32768,P[j+768>>0]=-11059*j,P[j+1024>>0]=-21709*j,P[j+1280>>0]=32768*j+8421375,P[j+1536>>0]=-27439*j,P[j+1792>>0]=-5329*j}(),de(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function tc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ok(t){function e(N){if(!N)throw Error("assert :P")}function n(N,T,V){for(var M=0;4>M;M++)if(N[T+M]!=V.charCodeAt(M))return!0;return!1}function r(N,T,V,M,U){for(var O=0;O<U;O++)N[T+O]=V[M+O]}function s(N,T,V,M){for(var U=0;U<M;U++)N[T+U]=V}function a(N){return new Int32Array(N)}function i(N,T){for(var V=[],M=0;M<N;M++)V.push(new T);return V}function o(N,T){var V=[];return function M(U,O,G){for(var ie=G[O],K=0;K<ie&&(U.push(G.length>O+1?[]:new T),!(G.length<O+1));K++)M(U[K],O+1,G)}(V,0,N),V}var l=function(){var N=this;function T(C,L){for(var z=1<<L-1>>>0;C&z;)z>>>=1;return z?(C&z-1)+z:C}function V(C,L,z,te,ce){e(!(te%z));do C[L+(te-=z)]=ce;while(0<te)}function M(C,L,z,te,ce){if(e(2328>=ce),512>=ce)var he=a(512);else if((he=a(ce))==null)return 0;return function(pe,xe,be,Te,Le,Ye){var qe,Ve,pt=xe,at=1<<be,Me=a(16),je=a(16);for(e(Le!=0),e(Te!=null),e(pe!=null),e(0<be),Ve=0;Ve<Le;++Ve){if(15<Te[Ve])return 0;++Me[Te[Ve]]}if(Me[0]==Le)return 0;for(je[1]=0,qe=1;15>qe;++qe){if(Me[qe]>1<<qe)return 0;je[qe+1]=je[qe]+Me[qe]}for(Ve=0;Ve<Le;++Ve)qe=Te[Ve],0<Te[Ve]&&(Ye[je[qe]++]=Ve);if(je[15]==1)return(Te=new U).g=0,Te.value=Ye[0],V(pe,pt,1,at,Te),at;var ct,xt=-1,ft=at-1,Gt=0,Ut=1,en=1,Ot=1<<be;for(Ve=0,qe=1,Le=2;qe<=be;++qe,Le<<=1){if(Ut+=en<<=1,0>(en-=Me[qe]))return 0;for(;0<Me[qe];--Me[qe])(Te=new U).g=qe,Te.value=Ye[Ve++],V(pe,pt+Gt,Le,Ot,Te),Gt=T(Gt,qe)}for(qe=be+1,Le=2;15>=qe;++qe,Le<<=1){if(Ut+=en<<=1,0>(en-=Me[qe]))return 0;for(;0<Me[qe];--Me[qe]){if(Te=new U,(Gt&ft)!=xt){for(pt+=Ot,ct=1<<(xt=qe)-be;15>xt&&!(0>=(ct-=Me[xt]));)++xt,ct<<=1;at+=Ot=1<<(ct=xt-be),pe[xe+(xt=Gt&ft)].g=ct+be,pe[xe+xt].value=pt-xe-xt}Te.g=qe-be,Te.value=Ye[Ve++],V(pe,pt+(Gt>>be),Le,Ot,Te),Gt=T(Gt,qe)}}return Ut!=2*je[15]-1?0:at}(C,L,z,te,ce,he)}function U(){this.value=this.g=0}function O(){this.value=this.g=0}function G(){this.G=i(5,U),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Ls,O)}function ie(C,L,z,te){e(C!=null),e(L!=null),e(2147483648>te),C.Ca=254,C.I=0,C.b=-8,C.Ka=0,C.oa=L,C.pa=z,C.Jd=L,C.Yc=z+te,C.Zc=4<=te?z+te-4+1:z,ue(C)}function K(C,L){for(var z=0;0<L--;)z|=ge(C,128)<<L;return z}function q(C,L){var z=K(C,L);return me(C)?-z:z}function se(C,L,z,te){var ce,he=0;for(e(C!=null),e(L!=null),e(4294967288>te),C.Sb=te,C.Ra=0,C.u=0,C.h=0,4<te&&(te=4),ce=0;ce<te;++ce)he+=L[z+ce]<<8*ce;C.Ra=he,C.bb=te,C.oa=L,C.pa=z}function Z(C){for(;8<=C.u&&C.bb<C.Sb;)C.Ra>>>=8,C.Ra+=C.oa[C.pa+C.bb]<<NA-8>>>0,++C.bb,C.u-=8;J(C)&&(C.h=1,C.u=0)}function X(C,L){if(e(0<=L),!C.h&&L<=BA){var z=W(C)&Tc[L];return C.u+=L,Z(C),z}return C.h=1,C.u=0}function de(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function j(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(C){return C.Ra>>>(C.u&NA-1)>>>0}function J(C){return e(C.bb<=C.Sb),C.h||C.bb==C.Sb&&C.u>NA}function ne(C,L){C.u=L,C.h=J(C)}function oe(C){C.u>=Bu&&(e(C.u>=Bu),Z(C))}function ue(C){e(C!=null&&C.oa!=null),C.pa<C.Zc?(C.I=(C.oa[C.pa++]|C.I<<8)>>>0,C.b+=8):(e(C!=null&&C.oa!=null),C.pa<C.Yc?(C.b+=8,C.I=C.oa[C.pa++]|C.I<<8):C.Ka?C.b=0:(C.I<<=8,C.b+=8,C.Ka=1))}function me(C){return K(C,1)}function ge(C,L){var z=C.Ca;0>C.b&&ue(C);var te=C.b,ce=z*L>>>8,he=(C.I>>>te>ce)+0;for(he?(z-=ce,C.I-=ce+1<<te>>>0):z=ce+1,te=z,ce=0;256<=te;)ce+=8,te>>=8;return te=7^ce+ci[te],C.b-=te,C.Ca=(z<<te)-1,he}function ke(C,L,z){C[L+0]=z>>24&255,C[L+1]=z>>16&255,C[L+2]=z>>8&255,C[L+3]=z>>0&255}function ve(C,L){return C[L+0]<<0|C[L+1]<<8}function ae(C,L){return ve(C,L)|C[L+2]<<16}function Re(C,L){return ve(C,L)|ve(C,L+2)<<16}function Je(C,L){var z=1<<L;return e(C!=null),e(0<L),C.X=a(z),C.X==null?0:(C.Mb=32-L,C.Xa=L,1)}function De(C,L){e(C!=null),e(L!=null),e(C.Xa==L.Xa),r(L.X,0,C.X,0,1<<L.Xa)}function Ee(){this.X=[],this.Xa=this.Mb=0}function Ge(C,L,z,te){e(z!=null),e(te!=null);var ce=z[0],he=te[0];return ce==0&&(ce=(C*he+L/2)/L),he==0&&(he=(L*ce+C/2)/C),0>=ce||0>=he?0:(z[0]=ce,te[0]=he,1)}function tt(C,L){return C+(1<<L)-1>>>L}function it(C,L){return((4278255360&C)+(4278255360&L)>>>0&4278255360)+((16711935&C)+(16711935&L)>>>0&16711935)>>>0}function mt(C,L){N[L]=function(z,te,ce,he,pe,xe,be){var Te;for(Te=0;Te<pe;++Te){var Le=N[C](xe[be+Te-1],ce,he+Te);xe[be+Te]=it(z[te+Te],Le)}}}function Ct(){this.ud=this.hd=this.jd=0}function At(C,L){return((4278124286&(C^L))>>>1)+(C&L)>>>0}function Nt(C){return 0<=C&&256>C?C:0>C?0:255<C?255:void 0}function It(C,L){return Nt(C+(C-L+.5>>1))}function qt(C,L,z){return Math.abs(L-z)-Math.abs(C-z)}function Lt(C,L,z,te,ce,he,pe){for(te=he[pe-1],z=0;z<ce;++z)he[pe+z]=te=it(C[L+z],te)}function Vt(C,L,z,te,ce){var he;for(he=0;he<z;++he){var pe=C[L+he],xe=pe>>8&255,be=16711935&(be=(be=16711935&pe)+((xe<<16)+xe));te[ce+he]=(4278255360&pe)+be>>>0}}function Yt(C,L){L.jd=C>>0&255,L.hd=C>>8&255,L.ud=C>>16&255}function Mt(C,L,z,te,ce,he){var pe;for(pe=0;pe<te;++pe){var xe=L[z+pe],be=xe>>>8,Te=xe,Le=255&(Le=(Le=xe>>>16)+((C.jd<<24>>24)*(be<<24>>24)>>>5));Te=255&(Te=(Te=Te+((C.hd<<24>>24)*(be<<24>>24)>>>5))+((C.ud<<24>>24)*(Le<<24>>24)>>>5)),ce[he+pe]=(4278255360&xe)+(Le<<16)+Te}}function kt(C,L,z,te,ce){N[L]=function(he,pe,xe,be,Te,Le,Ye,qe,Ve){for(be=Ye;be<qe;++be)for(Ye=0;Ye<Ve;++Ye)Te[Le++]=ce(xe[te(he[pe++])])},N[C]=function(he,pe,xe,be,Te,Le,Ye){var qe=8>>he.b,Ve=he.Ea,pt=he.K[0],at=he.w;if(8>qe)for(he=(1<<he.b)-1,at=(1<<qe)-1;pe<xe;++pe){var Me,je=0;for(Me=0;Me<Ve;++Me)Me&he||(je=te(be[Te++])),Le[Ye++]=ce(pt[je&at]),je>>=qe}else N["VP8LMapColor"+z](be,Te,pt,at,Le,Ye,pe,xe,Ve)}}function gt(C,L,z,te,ce){for(z=L+z;L<z;){var he=C[L++];te[ce++]=he>>16&255,te[ce++]=he>>8&255,te[ce++]=he>>0&255}}function xn(C,L,z,te,ce){for(z=L+z;L<z;){var he=C[L++];te[ce++]=he>>16&255,te[ce++]=he>>8&255,te[ce++]=he>>0&255,te[ce++]=he>>24&255}}function Wt(C,L,z,te,ce){for(z=L+z;L<z;){var he=(pe=C[L++])>>16&240|pe>>12&15,pe=pe>>0&240|pe>>28&15;te[ce++]=he,te[ce++]=pe}}function rr(C,L,z,te,ce){for(z=L+z;L<z;){var he=(pe=C[L++])>>16&248|pe>>13&7,pe=pe>>5&224|pe>>3&31;te[ce++]=he,te[ce++]=pe}}function mn(C,L,z,te,ce){for(z=L+z;L<z;){var he=C[L++];te[ce++]=he>>0&255,te[ce++]=he>>8&255,te[ce++]=he>>16&255}}function kn(C,L,z,te,ce,he){if(he==0)for(z=L+z;L<z;)ke(te,((he=C[L++])[0]>>24|he[1]>>8&65280|he[2]<<8&16711680|he[3]<<24)>>>0),ce+=32;else r(te,ce,C,L,z)}function Er(C,L){N[L][0]=N[C+"0"],N[L][1]=N[C+"1"],N[L][2]=N[C+"2"],N[L][3]=N[C+"3"],N[L][4]=N[C+"4"],N[L][5]=N[C+"5"],N[L][6]=N[C+"6"],N[L][7]=N[C+"7"],N[L][8]=N[C+"8"],N[L][9]=N[C+"9"],N[L][10]=N[C+"10"],N[L][11]=N[C+"11"],N[L][12]=N[C+"12"],N[L][13]=N[C+"13"],N[L][14]=N[C+"0"],N[L][15]=N[C+"0"]}function Tn(C){return C==sf||C==Mc||C==Hl||C==Fu}function Zs(){this.eb=[],this.size=this.A=this.fb=0}function Jn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function qr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Zs,this.f.kb=new Jn,this.sd=null}function as(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Rn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Zt(C){return alert("todo:WebPSamplerProcessPlane"),C.T}function jn(C,L){var z=C.T,te=L.ba.f.RGBA,ce=te.eb,he=te.fb+C.ka*te.A,pe=aa[L.ba.S],xe=C.y,be=C.O,Te=C.f,Le=C.N,Ye=C.ea,qe=C.W,Ve=L.cc,pt=L.dc,at=L.Mc,Me=L.Nc,je=C.ka,ct=C.ka+C.T,xt=C.U,ft=xt+1>>1;for(je==0?pe(xe,be,null,null,Te,Le,Ye,qe,Te,Le,Ye,qe,ce,he,null,null,xt):(pe(L.ec,L.fc,xe,be,Ve,pt,at,Me,Te,Le,Ye,qe,ce,he-te.A,ce,he,xt),++z);je+2<ct;je+=2)Ve=Te,pt=Le,at=Ye,Me=qe,Le+=C.Rc,qe+=C.Rc,he+=2*te.A,pe(xe,(be+=2*C.fa)-C.fa,xe,be,Ve,pt,at,Me,Te,Le,Ye,qe,ce,he-te.A,ce,he,xt);return be+=C.fa,C.j+ct<C.o?(r(L.ec,L.fc,xe,be,xt),r(L.cc,L.dc,Te,Le,ft),r(L.Mc,L.Nc,Ye,qe,ft),z--):1&ct||pe(xe,be,null,null,Te,Le,Ye,qe,Te,Le,Ye,qe,ce,he+te.A,null,null,xt),z}function ea(C,L,z){var te=C.F,ce=[C.J];if(te!=null){var he=C.U,pe=L.ba.S,xe=pe==DA||pe==Hl;L=L.ba.f.RGBA;var be=[0],Te=C.ka;be[0]=C.T,C.Kb&&(Te==0?--be[0]:(--Te,ce[0]-=C.width),C.j+C.ka+C.T==C.o&&(be[0]=C.o-C.j-Te));var Le=L.eb;Te=L.fb+Te*L.A,C=Vn(te,ce[0],C.width,he,be,Le,Te+(xe?0:3),L.A),e(z==be),C&&Tn(pe)&&Mi(Le,Te,xe,he,be,L.A)}return 0}function jr(C){var L=C.ma,z=L.ba.S,te=11>z,ce=z==Iu||z==rf||z==DA||z==Ql||z==12||Tn(z);if(L.memory=null,L.Ib=null,L.Jb=null,L.Nd=null,!Sc(L.Oa,C,ce?11:12))return 0;if(ce&&Tn(z)&&Et(),C.da)alert("todo:use_scaling");else{if(te){if(L.Ib=Zt,C.Kb){if(z=C.U+1>>1,L.memory=a(C.U+2*z),L.memory==null)return 0;L.ec=L.memory,L.fc=0,L.cc=L.ec,L.dc=L.fc+C.U,L.Mc=L.cc,L.Nc=L.dc+z,L.Ib=jn,Et()}}else alert("todo:EmitYUV");ce&&(L.Jb=ea,te&&He())}if(te&&!Tx){for(C=0;256>C;++C)sw[C]=89858*(C-128)+Ps>>cl,lf[C]=-22014*(C-128)+Ps,Im[C]=-45773*(C-128),js[C]=113618*(C-128)+Ps>>cl;for(C=Oc;C<Th;++C)L=76283*(C-16)+Ps>>cl,cf[C-Oc]=xr(L,255),Fm[C-Oc]=xr(L+8>>4,15);Tx=1}return 1}function us(C){var L=C.ma,z=C.U,te=C.T;return e(!(1&C.ka)),0>=z||0>=te?0:(z=L.Ib(C,L),L.Jb!=null&&L.Jb(C,L,z),L.Dc+=z,1)}function ma(C){C.ma.memory=null}function Ht(C,L,z,te){return X(C,8)!=47?0:(L[0]=X(C,14)+1,z[0]=X(C,14)+1,te[0]=X(C,1),X(C,3)!=0?0:!C.h)}function sr(C,L){if(4>C)return C+1;var z=C-2>>1;return(2+(1&C)<<z)+X(L,z)+1}function Xn(C,L){return 120<L?L-120:1<=(z=((z=Gl[L-1])>>4)*C+(8-(15&z)))?z:1;var z}function _r(C,L,z){var te=W(z),ce=C[L+=255&te].g-8;return 0<ce&&(ne(z,z.u+8),te=W(z),L+=C[L].value,L+=te&(1<<ce)-1),ne(z,z.u+C[L].g),C[L].value}function Nr(C,L,z){return z.g+=C.g,z.value+=C.value<<L>>>0,e(8>=z.g),C.g}function Or(C,L,z){var te=C.xc;return e((L=te==0?0:C.vc[C.md*(z>>te)+(L>>te)])<C.Wb),C.Ya[L]}function fe(C,L,z,te){var ce=C.ab,he=C.c*L,pe=C.C;L=pe+L;var xe=z,be=te;for(te=C.Ta,z=C.Ua;0<ce--;){var Te=C.gc[ce],Le=pe,Ye=L,qe=xe,Ve=be,pt=(be=te,xe=z,Te.Ea);switch(e(Le<Ye),e(Ye<=Te.nc),Te.hc){case 2:yh(qe,Ve,(Ye-Le)*pt,be,xe);break;case 0:var at=Le,Me=Ye,je=be,ct=xe,xt=(Ot=Te).Ea;at==0&&(Nm(qe,Ve,null,null,1,je,ct),Lt(qe,Ve+1,0,0,xt-1,je,ct+1),Ve+=xt,ct+=xt,++at);for(var ft=1<<Ot.b,Gt=ft-1,Ut=tt(xt,Ot.b),en=Ot.K,Ot=Ot.w+(at>>Ot.b)*Ut;at<Me;){var lr=en,vr=Ot,Qn=1;for(tf(qe,Ve,je,ct-xt,1,je,ct);Qn<xt;){var Ln=(Qn&~Gt)+ft;Ln>xt&&(Ln=xt),(0,Pl[lr[vr++]>>8&15])(qe,Ve+ +Qn,je,ct+Qn-xt,Ln-Qn,je,ct+Qn),Qn=Ln}Ve+=xt,ct+=xt,++at&Gt||(Ot+=Ut)}Ye!=Te.nc&&r(be,xe-pt,be,xe+(Ye-Le-1)*pt,pt);break;case 1:for(pt=qe,Me=Ve,xt=(qe=Te.Ea)-(ct=qe&~(je=(Ve=1<<Te.b)-1)),at=tt(qe,Te.b),ft=Te.K,Te=Te.w+(Le>>Te.b)*at;Le<Ye;){for(Gt=ft,Ut=Te,en=new Ct,Ot=Me+ct,lr=Me+qe;Me<Ot;)Yt(Gt[Ut++],en),Nc(en,pt,Me,Ve,be,xe),Me+=Ve,xe+=Ve;Me<lr&&(Yt(Gt[Ut++],en),Nc(en,pt,Me,xt,be,xe),Me+=xt,xe+=xt),++Le&je||(Te+=at)}break;case 3:if(qe==be&&Ve==xe&&0<Te.b){for(Me=be,qe=pt=xe+(Ye-Le)*pt-(ct=(Ye-Le)*tt(Te.Ea,Te.b)),Ve=be,je=xe,at=[],ct=(xt=ct)-1;0<=ct;--ct)at[ct]=Ve[je+ct];for(ct=xt-1;0<=ct;--ct)Me[qe+ct]=at[ct];to(Te,Le,Ye,be,pt,be,xe)}else to(Te,Le,Ye,qe,Ve,be,xe)}xe=te,be=z}be!=z&&r(te,z,xe,be,he)}function Be(C,L){var z=C.V,te=C.Ba+C.c*C.C,ce=L-C.C;if(e(L<=C.l.o),e(16>=ce),0<ce){var he=C.l,pe=C.Ta,xe=C.Ua,be=he.width;if(fe(C,ce,z,te),ce=xe=[xe],e((z=C.C)<(te=L)),e(he.v<he.va),te>he.o&&(te=he.o),z<he.j){var Te=he.j-z;z=he.j,ce[0]+=Te*be}if(z>=te?z=0:(ce[0]+=4*he.v,he.ka=z-he.j,he.U=he.va-he.v,he.T=te-z,z=1),z){if(xe=xe[0],11>(z=C.ca).S){var Le=z.f.RGBA,Ye=(te=z.S,ce=he.U,he=he.T,Te=Le.eb,Le.A),qe=he;for(Le=Le.fb+C.Ma*Le.A;0<qe--;){var Ve=pe,pt=xe,at=ce,Me=Te,je=Le;switch(te){case Fa:Ga(Ve,pt,at,Me,je);break;case Iu:ya(Ve,pt,at,Me,je);break;case sf:ya(Ve,pt,at,Me,je),Mi(Me,je,0,at,1,0);break;case al:_o(Ve,pt,at,Me,je);break;case rf:kn(Ve,pt,at,Me,je,1);break;case Mc:kn(Ve,pt,at,Me,je,1),Mi(Me,je,0,at,1,0);break;case DA:kn(Ve,pt,at,Me,je,0);break;case Hl:kn(Ve,pt,at,Me,je,0),Mi(Me,je,1,at,1,0);break;case Ql:kc(Ve,pt,at,Me,je);break;case Fu:kc(Ve,pt,at,Me,je),Hn(Me,je,at,1,0);break;case bh:Ai(Ve,pt,at,Me,je);break;default:e(0)}xe+=be,Le+=Ye}C.Ma+=he}else alert("todo:EmitRescaledRowsYUVA");e(C.Ma<=z.height)}}C.C=L,e(C.C<=C.i)}function Ce(C){var L;if(0<C.ua)return 0;for(L=0;L<C.Wb;++L){var z=C.Ya[L].G,te=C.Ya[L].H;if(0<z[1][te[1]+0].g||0<z[2][te[2]+0].g||0<z[3][te[3]+0].g)return 0}return 1}function _e(C,L,z,te,ce,he){if(C.Z!=0){var pe=C.qd,xe=C.rd;for(e(ol[C.Z]!=null);L<z;++L)ol[C.Z](pe,xe,te,ce,te,ce,he),pe=te,xe=ce,ce+=he;C.qd=pe,C.rd=xe}}function Se(C,L){var z=C.l.ma,te=z.Z==0||z.Z==1?C.l.j:C.C;if(te=C.C<te?te:C.C,e(L<=C.l.o),L>te){var ce=C.l.width,he=z.ca,pe=z.tb+ce*te,xe=C.V,be=C.Ba+C.c*te,Te=C.gc;e(C.ab==1),e(Te[0].hc==3),Bc(Te[0],te,L,xe,be,he,pe),_e(z,te,L,he,pe,ce)}C.C=C.Ma=L}function Ne(C,L,z,te,ce,he,pe){var xe=C.$/te,be=C.$%te,Te=C.m,Le=C.s,Ye=z+C.$,qe=Ye;ce=z+te*ce;var Ve=z+te*he,pt=280+Le.ua,at=C.Pb?xe:16777216,Me=0<Le.ua?Le.Wa:null,je=Le.wc,ct=Ye<Ve?Or(Le,be,xe):null;e(C.C<he),e(Ve<=ce);var xt=!1;e:for(;;){for(;xt||Ye<Ve;){var ft=0;if(xe>=at){var Gt=Ye-z;e((at=C).Pb),at.wd=at.m,at.xd=Gt,0<at.s.ua&&De(at.s.Wa,at.s.vb),at=xe+Ex}if(be&je||(ct=Or(Le,be,xe)),e(ct!=null),ct.Qb&&(L[Ye]=ct.qb,xt=!0),!xt)if(oe(Te),ct.jc){ft=Te,Gt=L;var Ut=Ye,en=ct.pd[W(ft)&Ls-1];e(ct.jc),256>en.g?(ne(ft,ft.u+en.g),Gt[Ut]=en.value,ft=0):(ne(ft,ft.u+en.g-256),e(256<=en.value),ft=en.value),ft==0&&(xt=!0)}else ft=_r(ct.G[0],ct.H[0],Te);if(Te.h)break;if(xt||256>ft){if(!xt)if(ct.nd)L[Ye]=(ct.qb|ft<<8)>>>0;else{if(oe(Te),xt=_r(ct.G[1],ct.H[1],Te),oe(Te),Gt=_r(ct.G[2],ct.H[2],Te),Ut=_r(ct.G[3],ct.H[3],Te),Te.h)break;L[Ye]=(Ut<<24|xt<<16|ft<<8|Gt)>>>0}if(xt=!1,++Ye,++be>=te&&(be=0,++xe,pe!=null&&xe<=he&&!(xe%16)&&pe(C,xe),Me!=null))for(;qe<Ye;)ft=L[qe++],Me.X[(506832829*ft&4294967295)>>>Me.Mb]=ft}else if(280>ft){if(ft=sr(ft-256,Te),Gt=_r(ct.G[4],ct.H[4],Te),oe(Te),Gt=Xn(te,Gt=sr(Gt,Te)),Te.h)break;if(Ye-z<Gt||ce-Ye<ft)break e;for(Ut=0;Ut<ft;++Ut)L[Ye+Ut]=L[Ye+Ut-Gt];for(Ye+=ft,be+=ft;be>=te;)be-=te,++xe,pe!=null&&xe<=he&&!(xe%16)&&pe(C,xe);if(e(Ye<=ce),be&je&&(ct=Or(Le,be,xe)),Me!=null)for(;qe<Ye;)ft=L[qe++],Me.X[(506832829*ft&4294967295)>>>Me.Mb]=ft}else{if(!(ft<pt))break e;for(xt=ft-280,e(Me!=null);qe<Ye;)ft=L[qe++],Me.X[(506832829*ft&4294967295)>>>Me.Mb]=ft;ft=Ye,e(!(xt>>>(Gt=Me).Xa)),L[ft]=Gt.X[xt],xt=!0}xt||e(Te.h==J(Te))}if(C.Pb&&Te.h&&Ye<ce)e(C.m.h),C.a=5,C.m=C.wd,C.$=C.xd,0<C.s.ua&&De(C.s.vb,C.s.Wa);else{if(Te.h)break e;pe!=null&&pe(C,xe>he?he:xe),C.a=0,C.$=Ye-z}return 1}return C.a=3,0}function Ke(C){e(C!=null),C.vc=null,C.yc=null,C.Ya=null;var L=C.Wa;L!=null&&(L.X=null),C.vb=null,e(C!=null)}function nt(){var C=new Su;return C==null?null:(C.a=0,C.xb=Ru,Er("Predictor","VP8LPredictors"),Er("Predictor","VP8LPredictors_C"),Er("PredictorAdd","VP8LPredictorsAdd"),Er("PredictorAdd","VP8LPredictorsAdd_C"),yh=Vt,Nc=Mt,Ga=gt,ya=xn,kc=Wt,Ai=rr,_o=mn,N.VP8LMapColor32b=ra,N.VP8LMapColor8b=nf,C)}function Qe(C,L,z,te,ce){var he=1,pe=[C],xe=[L],be=te.m,Te=te.s,Le=null,Ye=0;e:for(;;){if(z)for(;he&&X(be,1);){var qe=pe,Ve=xe,pt=te,at=1,Me=pt.m,je=pt.gc[pt.ab],ct=X(Me,2);if(pt.Oc&1<<ct)he=0;else{switch(pt.Oc|=1<<ct,je.hc=ct,je.Ea=qe[0],je.nc=Ve[0],je.K=[null],++pt.ab,e(4>=pt.ab),ct){case 0:case 1:je.b=X(Me,3)+2,at=Qe(tt(je.Ea,je.b),tt(je.nc,je.b),0,pt,je.K),je.K=je.K[0];break;case 3:var xt,ft=X(Me,8)+1,Gt=16<ft?0:4<ft?1:2<ft?2:3;if(qe[0]=tt(je.Ea,Gt),je.b=Gt,xt=at=Qe(ft,1,0,pt,je.K)){var Ut,en=ft,Ot=je,lr=1<<(8>>Ot.b),vr=a(lr);if(vr==null)xt=0;else{var Qn=Ot.K[0],Ln=Ot.w;for(vr[0]=Ot.K[0][0],Ut=1;Ut<1*en;++Ut)vr[Ut]=it(Qn[Ln+Ut],vr[Ut-1]);for(;Ut<4*lr;++Ut)vr[Ut]=0;Ot.K[0]=null,Ot.K[0]=vr,xt=1}}at=xt;break;case 2:break;default:e(0)}he=at}}if(pe=pe[0],xe=xe[0],he&&X(be,1)&&!(he=1<=(Ye=X(be,4))&&11>=Ye)){te.a=3;break e}var Tr;if(Tr=he)t:{var yr,Sn,Ir,An=te,vn=pe,ir=xe,cr=Ye,ia=z,Os=An.m,hs=An.s,ms=[null],Ts=1,ao=0,wr=LA[cr];n:for(;;){if(ia&&X(Os,1)){var Bs=X(Os,3)+2,Bo=tt(vn,Bs),Qc=tt(ir,Bs),jA=Bo*Qc;if(!Qe(Bo,Qc,0,An,ms))break n;for(ms=ms[0],hs.xc=Bs,yr=0;yr<jA;++yr){var Hc=ms[yr]>>8&65535;ms[yr]=Hc,Hc>=Ts&&(Ts=Hc+1)}}if(Os.h)break n;for(Sn=0;5>Sn;++Sn){var Yr=Pi[Sn];!Sn&&0<cr&&(Yr+=1<<cr),ao<Yr&&(ao=Yr)}var Af=i(Ts*wr,U),Bh=Ts,Ka=i(Bh,G);if(Ka==null)var Zr=null;else e(65536>=Bh),Zr=Ka;var OA=a(ao);if(Zr==null||OA==null||Af==null){An.a=1;break n}var Vc=Af;for(yr=Ir=0;yr<Ts;++yr){var di=Zr[yr],Gc=di.G,fi=di.H,uf=0,Uu=1,Nh=0;for(Sn=0;5>Sn;++Sn){Yr=Pi[Sn],Gc[Sn]=Vc,fi[Sn]=Ir,!Sn&&0<cr&&(Yr+=1<<cr);s:{var df,kh=Yr,ff=An,Lu=OA,kx=Vc,Ix=Ir,hf=0,Wl=ff.m,iw=X(Wl,1);if(s(Lu,0,0,kh),iw){var Fx=X(Wl,1)+1,Rx=X(Wl,1),Rm=X(Wl,Rx==0?1:8);Lu[Rm]=1,Fx==2&&(Lu[Rm=X(Wl,8)]=1);var Mu=1}else{var Dm=a(19),Um=X(Wl,4)+4;if(19<Um){ff.a=3;var mf=0;break s}for(df=0;df<Um;++df)Dm[Vl[df]]=X(Wl,3);var Ih=void 0,Pu=void 0,Dx=ff,Ux=Dm,$l=kh,pf=Lu,Fh=0,No=Dx.m,ju=8,Lm=i(128,U);r:for(;M(Lm,0,7,Ux,19);){if(X(No,1)){var Lx=2+2*X(No,3);if((Ih=2+X(No,Lx))>$l)break r}else Ih=$l;for(Pu=0;Pu<$l&&Ih--;){oe(No);var Mm=Lm[0+(127&W(No))];ne(No,No.u+Mm.g);var QA=Mm.value;if(16>QA)pf[Pu++]=QA,QA!=0&&(ju=QA);else{var Mx=QA==16,Pm=QA-16,jm=so[Pm],Om=X(No,Ch[Pm])+jm;if(Pu+Om>$l)break r;for(var Px=Mx?ju:0;0<Om--;)pf[Pu++]=Px}}Fh=1;break r}Fh||(Dx.a=3),Mu=Fh}(Mu=Mu&&!Wl.h)&&(hf=M(kx,Ix,8,Lu,kh)),Mu&&hf!=0?mf=hf:(ff.a=3,mf=0)}if(mf==0)break n;if(Uu&&UA[Sn]==1&&(Uu=Vc[Ir].g==0),uf+=Vc[Ir].g,Ir+=mf,3>=Sn){var HA,Rh=OA[0];for(HA=1;HA<Yr;++HA)OA[HA]>Rh&&(Rh=OA[HA]);Nh+=Rh}}if(di.nd=Uu,di.Qb=0,Uu&&(di.qb=(Gc[3][fi[3]+0].value<<24|Gc[1][fi[1]+0].value<<16|Gc[2][fi[2]+0].value)>>>0,uf==0&&256>Gc[0][fi[0]+0].value&&(di.Qb=1,di.qb+=Gc[0][fi[0]+0].value<<8)),di.jc=!di.Qb&&6>Nh,di.jc){var gf,Yl=di;for(gf=0;gf<Ls;++gf){var Al=gf,Jl=Yl.pd[Al],xf=Yl.G[0][Yl.H[0]+Al];256<=xf.value?(Jl.g=xf.g+256,Jl.value=xf.value):(Jl.g=0,Jl.value=0,Al>>=Nr(xf,8,Jl),Al>>=Nr(Yl.G[1][Yl.H[1]+Al],16,Jl),Al>>=Nr(Yl.G[2][Yl.H[2]+Al],0,Jl),Nr(Yl.G[3][Yl.H[3]+Al],24,Jl))}}}hs.vc=ms,hs.Wb=Ts,hs.Ya=Zr,hs.yc=Af,Tr=1;break t}Tr=0}if(!(he=Tr)){te.a=3;break e}if(0<Ye){if(Te.ua=1<<Ye,!Je(Te.Wa,Ye)){te.a=1,he=0;break e}}else Te.ua=0;var vf=te,Qm=pe,jx=xe,Hm=vf.s,Vm=Hm.xc;if(vf.c=Qm,vf.i=jx,Hm.md=tt(Qm,Vm),Hm.wc=Vm==0?-1:(1<<Vm)-1,z){te.xb=Sx;break e}if((Le=a(pe*xe))==null){te.a=1,he=0;break e}he=(he=Ne(te,Le,0,pe,xe,xe,null))&&!be.h;break e}return he?(ce!=null?ce[0]=Le:(e(Le==null),e(z)),te.$=0,z||Ke(Te)):Ke(Te),he}function We(C,L){var z=C.c*C.i,te=z+L+16*L;return e(C.c<=L),C.V=a(te),C.V==null?(C.Ta=null,C.Ua=0,C.a=1,0):(C.Ta=C.V,C.Ua=C.Ba+z+L,1)}function Xe(C,L){var z=C.C,te=L-z,ce=C.V,he=C.Ba+C.c*z;for(e(L<=C.l.o);0<te;){var pe=16<te?16:te,xe=C.l.ma,be=C.l.width,Te=be*pe,Le=xe.ca,Ye=xe.tb+be*z,qe=C.Ta,Ve=C.Ua;fe(C,pe,ce,he),Hr(qe,Ve,Le,Ye,Te),_e(xe,z,z+pe,Le,Ye,be),te-=pe,ce+=pe*C.c,z+=pe}e(z==L),C.C=C.Ma=L}function vt(){this.ub=this.yd=this.td=this.Rb=0}function Bt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Pt(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function St(){this.Yb=function(){var C=[];return function L(z,te,ce){for(var he=ce[te],pe=0;pe<he&&(z.push(ce.length>te+1?[]:0),!(ce.length<te+1));pe++)L(z[pe],te+1,ce)}(C,0,[3,11]),C}()}function Ft(){this.jb=a(3),this.Wc=o([4,8],St),this.Xc=o([4,17],St)}function cn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Dn(){this.ld=this.La=this.dd=this.tc=0}function Un(){this.Na=this.la=0}function On(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function bs(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ri(){this.uc=this.M=this.Nb=0,this.wa=Array(new Dn),this.Y=0,this.ya=Array(new bs),this.aa=0,this.l=new Us}function Cs(){this.y=a(16),this.f=a(8),this.ea=a(8)}function ta(){this.cb=this.a=0,this.sc="",this.m=new de,this.Od=new vt,this.Kc=new Bt,this.ed=new cn,this.Qa=new Pt,this.Ic=this.$c=this.Aa=0,this.D=new ri,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,de),this.ia=0,this.pb=i(4,On),this.Pa=new Ft,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Cs),this.Hd=0,this.rb=Array(new Un),this.sb=0,this.wa=Array(new Dn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new bs),this.L=this.aa=0,this.gd=o([4,2],Dn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Us(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function pa(){var C=new ta;return C!=null&&(C.a=0,C.sc="OK",C.cb=0,C.Xb=0,Ms||(Ms=bu)),C}function Qr(C,L,z){return C.a==0&&(C.a=L,C.sc=z,C.cb=0),0}function na(C,L,z){return 3<=z&&C[L+0]==157&&C[L+1]==1&&C[L+2]==42}function vc(C,L){if(C==null)return 0;if(C.a=0,C.sc="OK",L==null)return Qr(C,2,"null VP8Io passed to VP8GetHeaders()");var z=L.data,te=L.w,ce=L.ha;if(4>ce)return Qr(C,7,"Truncated header.");var he=z[te+0]|z[te+1]<<8|z[te+2]<<16,pe=C.Od;if(pe.Rb=!(1&he),pe.td=he>>1&7,pe.yd=he>>4&1,pe.ub=he>>5,3<pe.td)return Qr(C,3,"Incorrect keyframe parameters.");if(!pe.yd)return Qr(C,4,"Frame not displayable.");te+=3,ce-=3;var xe=C.Kc;if(pe.Rb){if(7>ce)return Qr(C,7,"cannot parse picture header");if(!na(z,te,ce))return Qr(C,3,"Bad code word");xe.c=16383&(z[te+4]<<8|z[te+3]),xe.Td=z[te+4]>>6,xe.i=16383&(z[te+6]<<8|z[te+5]),xe.Ud=z[te+6]>>6,te+=7,ce-=7,C.za=xe.c+15>>4,C.Ub=xe.i+15>>4,L.width=xe.c,L.height=xe.i,L.Da=0,L.j=0,L.v=0,L.va=L.width,L.o=L.height,L.da=0,L.ib=L.width,L.hb=L.height,L.U=L.width,L.T=L.height,s((he=C.Pa).jb,0,255,he.jb.length),e((he=C.Qa)!=null),he.Cb=0,he.Bb=0,he.Fb=1,s(he.Zb,0,0,he.Zb.length),s(he.Lb,0,0,he.Lb)}if(pe.ub>ce)return Qr(C,7,"bad partition length");ie(he=C.m,z,te,pe.ub),te+=pe.ub,ce-=pe.ub,pe.Rb&&(xe.Ld=me(he),xe.Kd=me(he)),xe=C.Qa;var be,Te=C.Pa;if(e(he!=null),e(xe!=null),xe.Cb=me(he),xe.Cb){if(xe.Bb=me(he),me(he)){for(xe.Fb=me(he),be=0;4>be;++be)xe.Zb[be]=me(he)?q(he,7):0;for(be=0;4>be;++be)xe.Lb[be]=me(he)?q(he,6):0}if(xe.Bb)for(be=0;3>be;++be)Te.jb[be]=me(he)?K(he,8):255}else xe.Bb=0;if(he.Ka)return Qr(C,3,"cannot parse segment header");if((xe=C.ed).zd=me(he),xe.Tb=K(he,6),xe.wb=K(he,3),xe.Pc=me(he),xe.Pc&&me(he)){for(Te=0;4>Te;++Te)me(he)&&(xe.vd[Te]=q(he,6));for(Te=0;4>Te;++Te)me(he)&&(xe.od[Te]=q(he,6))}if(C.L=xe.Tb==0?0:xe.zd?1:2,he.Ka)return Qr(C,3,"cannot parse filter header");var Le=ce;if(ce=be=te,te=be+Le,xe=Le,C.Xb=(1<<K(C.m,2))-1,Le<3*(Te=C.Xb))z=7;else{for(be+=3*Te,xe-=3*Te,Le=0;Le<Te;++Le){var Ye=z[ce+0]|z[ce+1]<<8|z[ce+2]<<16;Ye>xe&&(Ye=xe),ie(C.Jc[+Le],z,be,Ye),be+=Ye,xe-=Ye,ce+=3}ie(C.Jc[+Te],z,be,xe),z=be<te?0:5}if(z!=0)return Qr(C,z,"cannot parse partitions");for(z=K(be=C.m,7),ce=me(be)?q(be,4):0,te=me(be)?q(be,4):0,xe=me(be)?q(be,4):0,Te=me(be)?q(be,4):0,be=me(be)?q(be,4):0,Le=C.Qa,Ye=0;4>Ye;++Ye){if(Le.Cb){var qe=Le.Zb[Ye];Le.Fb||(qe+=z)}else{if(0<Ye){C.pb[Ye]=C.pb[0];continue}qe=z}var Ve=C.pb[Ye];Ve.Sc[0]=af[xr(qe+ce,127)],Ve.Sc[1]=of[xr(qe+0,127)],Ve.Eb[0]=2*af[xr(qe+te,127)],Ve.Eb[1]=101581*of[xr(qe+xe,127)]>>16,8>Ve.Eb[1]&&(Ve.Eb[1]=8),Ve.Qc[0]=af[xr(qe+Te,117)],Ve.Qc[1]=of[xr(qe+be,127)],Ve.lc=qe+be}if(!pe.Rb)return Qr(C,4,"Not a key frame.");for(me(he),pe=C.Pa,z=0;4>z;++z){for(ce=0;8>ce;++ce)for(te=0;3>te;++te)for(xe=0;11>xe;++xe)Te=ge(he,MA[z][ce][te][xe])?K(he,8):il[z][ce][te][xe],pe.Wc[z][ce].Yb[te][xe]=Te;for(ce=0;17>ce;++ce)pe.Xc[z][ce]=pe.Wc[z][_x[ce]]}return C.kc=me(he),C.kc&&(C.Bd=K(he,8)),C.cb=1}function bu(C,L,z,te,ce,he,pe){var xe=L[ce].Yb[z];for(z=0;16>ce;++ce){if(!ge(C,xe[z+0]))return ce;for(;!ge(C,xe[z+1]);)if(xe=L[++ce].Yb[0],z=0,ce==16)return 16;var be=L[ce+1].Yb;if(ge(C,xe[z+2])){var Te=C,Le=0;if(ge(Te,(qe=xe)[(Ye=z)+3]))if(ge(Te,qe[Ye+6])){for(xe=0,Ye=2*(Le=ge(Te,qe[Ye+8]))+(qe=ge(Te,qe[Ye+9+Le])),Le=0,qe=ls[Ye];qe[xe];++xe)Le+=Le+ge(Te,qe[xe]);Le+=3+(8<<Ye)}else ge(Te,qe[Ye+7])?(Le=7+2*ge(Te,165),Le+=ge(Te,145)):Le=5+ge(Te,159);else Le=ge(Te,qe[Ye+4])?3+ge(Te,qe[Ye+5]):2;xe=be[2]}else Le=1,xe=be[1];be=pe+fr[ce],0>(Te=C).b&&ue(Te);var Ye,qe=Te.b,Ve=(Ye=Te.Ca>>1)-(Te.I>>qe)>>31;--Te.b,Te.Ca+=Ve,Te.Ca|=1,Te.I-=(Ye+1&Ve)<<qe,he[be]=((Le^Ve)-Ve)*te[(0<ce)+0]}return 16}function zo(C){var L=C.rb[C.sb-1];L.la=0,L.Na=0,s(C.zc,0,0,C.zc.length),C.ja=0}function wA(C,L){if(C==null)return 0;if(L==null)return Qr(C,2,"NULL VP8Io parameter in VP8Decode().");if(!C.cb&&!vc(C,L))return 0;if(e(C.cb),L.ac==null||L.ac(L)){L.ob&&(C.L=0);var z=ql[C.L];if(C.L==2?(C.yb=0,C.zb=0):(C.yb=L.v-z>>4,C.zb=L.j-z>>4,0>C.yb&&(C.yb=0),0>C.zb&&(C.zb=0)),C.Va=L.o+15+z>>4,C.Hb=L.va+15+z>>4,C.Hb>C.za&&(C.Hb=C.za),C.Va>C.Ub&&(C.Va=C.Ub),0<C.L){var te=C.ed;for(z=0;4>z;++z){var ce;if(C.Qa.Cb){var he=C.Qa.Lb[z];C.Qa.Fb||(he+=te.Tb)}else he=te.Tb;for(ce=0;1>=ce;++ce){var pe=C.gd[z][ce],xe=he;if(te.Pc&&(xe+=te.vd[0],ce&&(xe+=te.od[0])),0<(xe=0>xe?0:63<xe?63:xe)){var be=xe;0<te.wb&&(be=4<te.wb?be>>2:be>>1)>9-te.wb&&(be=9-te.wb),1>be&&(be=1),pe.dd=be,pe.tc=2*xe+be,pe.ld=40<=xe?2:15<=xe?1:0}else pe.tc=0;pe.La=ce}}}z=0}else Qr(C,6,"Frame setup failed"),z=C.a;if(z=z==0){if(z){C.$c=0,0<C.Aa||(C.Ic=Bx);e:{z=C.Ic,te=4*(be=C.za);var Te=32*be,Le=be+1,Ye=0<C.L?be*(0<C.Aa?2:1):0,qe=(C.Aa==2?2:1)*be;if((pe=te+832+(ce=3*(16*z+ql[C.L])/2*Te)+(he=C.Fa!=null&&0<C.Fa.length?C.Kc.c*C.Kc.i:0))!=pe)z=0;else{if(pe>C.Vb){if(C.Vb=0,C.Ec=a(pe),C.Fc=0,C.Ec==null){z=Qr(C,1,"no memory during frame initialization.");break e}C.Vb=pe}pe=C.Ec,xe=C.Fc,C.Ac=pe,C.Bc=xe,xe+=te,C.Gd=i(Te,Cs),C.Hd=0,C.rb=i(Le+1,Un),C.sb=1,C.wa=Ye?i(Ye,Dn):null,C.Y=0,C.D.Nb=0,C.D.wa=C.wa,C.D.Y=C.Y,0<C.Aa&&(C.D.Y+=be),e(!0),C.oc=pe,C.pc=xe,xe+=832,C.ya=i(qe,bs),C.aa=0,C.D.ya=C.ya,C.D.aa=C.aa,C.Aa==2&&(C.D.aa+=be),C.R=16*be,C.B=8*be,be=(Te=ql[C.L])*C.R,Te=Te/2*C.B,C.sa=pe,C.ta=xe+be,C.qa=C.sa,C.ra=C.ta+16*z*C.R+Te,C.Ha=C.qa,C.Ia=C.ra+8*z*C.B+Te,C.$c=0,xe+=ce,C.mb=he?pe:null,C.nb=he?xe:null,e(xe+he<=C.Fc+C.Vb),zo(C),s(C.Ac,C.Bc,0,te),z=1}}if(z){if(L.ka=0,L.y=C.sa,L.O=C.ta,L.f=C.qa,L.N=C.ra,L.ea=C.Ha,L.Vd=C.Ia,L.fa=C.R,L.Rc=C.B,L.F=null,L.J=0,!Ol){for(z=-255;255>=z;++z)fs[255+z]=0>z?-z:z;for(z=-1020;1020>=z;++z)no[1020+z]=-128>z?-128:127<z?127:z;for(z=-112;112>=z;++z)Uc[112+z]=-16>z?-16:15<z?15:z;for(z=-255;510>=z;++z)Lc[255+z]=0>z?0:255<z?255:z;Ol=1}rl=si,So=qo,To=qi,Ss=gr,ui=Wo,is=Ko,kA=Xo,sl=Co,Nu=Cc,Ic=SA,Fc=bc,Rc=Rl,IA=Dl,ku=Zo,Dc=Li,jl=ka,FA=_s,os=_u,za[0]=Ba,za[1]=Cu,za[2]=Yi,za[3]=Eu,za[4]=ai,za[5]=Ji,za[6]=Va,za[7]=ii,za[8]=bo,za[9]=$o,zl[0]=Wi,zl[1]=CA,zl[2]=vo,zl[3]=wc,zl[4]=kr,zl[5]=wo,zl[6]=$i,ji[0]=Xi,ji[1]=bA,ji[2]=EA,ji[3]=oi,ji[4]=Kn,ji[5]=Es,ji[6]=Yo,z=1}else z=0}z&&(z=function(Ve,pt){for(Ve.M=0;Ve.M<Ve.Va;++Ve.M){var at,Me=Ve.Jc[Ve.M&Ve.Xb],je=Ve.m,ct=Ve;for(at=0;at<ct.za;++at){var xt=je,ft=ct,Gt=ft.Ac,Ut=ft.Bc+4*at,en=ft.zc,Ot=ft.ya[ft.aa+at];if(ft.Qa.Bb?Ot.$b=ge(xt,ft.Pa.jb[0])?2+ge(xt,ft.Pa.jb[2]):ge(xt,ft.Pa.jb[1]):Ot.$b=0,ft.kc&&(Ot.Ad=ge(xt,ft.Bd)),Ot.Za=!ge(xt,145)+0,Ot.Za){var lr=Ot.Ob,vr=0;for(ft=0;4>ft;++ft){var Qn,Ln=en[0+ft];for(Qn=0;4>Qn;++Qn){Ln=km[Gt[Ut+Qn]][Ln];for(var Tr=Pc[ge(xt,Ln[0])];0<Tr;)Tr=Pc[2*Tr+ge(xt,Ln[Tr])];Ln=-Tr,Gt[Ut+Qn]=Ln}r(lr,vr,Gt,Ut,4),vr+=4,en[0+ft]=Ln}}else Ln=ge(xt,156)?ge(xt,128)?1:3:ge(xt,163)?2:0,Ot.Ob[0]=Ln,s(Gt,Ut,Ln,4),s(en,0,Ln,4);Ot.Dd=ge(xt,142)?ge(xt,114)?ge(xt,183)?1:3:2:0}if(ct.m.Ka)return Qr(Ve,7,"Premature end-of-partition0 encountered.");for(;Ve.ja<Ve.za;++Ve.ja){if(ct=Me,xt=(je=Ve).rb[je.sb-1],Gt=je.rb[je.sb+je.ja],at=je.ya[je.aa+je.ja],Ut=je.kc?at.Ad:0)xt.la=Gt.la=0,at.Za||(xt.Na=Gt.Na=0),at.Hc=0,at.Gc=0,at.ia=0;else{var yr,Sn;if(xt=Gt,Gt=ct,Ut=je.Pa.Xc,en=je.ya[je.aa+je.ja],Ot=je.pb[en.$b],ft=en.ad,lr=0,vr=je.rb[je.sb-1],Ln=Qn=0,s(ft,lr,0,384),en.Za)var Ir=0,An=Ut[3];else{Tr=a(16);var vn=xt.Na+vr.Na;if(vn=Ms(Gt,Ut[1],vn,Ot.Eb,0,Tr,0),xt.Na=vr.Na=(0<vn)+0,1<vn)rl(Tr,0,ft,lr);else{var ir=Tr[0]+3>>3;for(Tr=0;256>Tr;Tr+=16)ft[lr+Tr]=ir}Ir=1,An=Ut[0]}var cr=15&xt.la,ia=15&vr.la;for(Tr=0;4>Tr;++Tr){var Os=1&ia;for(ir=Sn=0;4>ir;++ir)cr=cr>>1|(Os=(vn=Ms(Gt,An,vn=Os+(1&cr),Ot.Sc,Ir,ft,lr))>Ir)<<7,Sn=Sn<<2|(3<vn?3:1<vn?2:ft[lr+0]!=0),lr+=16;cr>>=4,ia=ia>>1|Os<<7,Qn=(Qn<<8|Sn)>>>0}for(An=cr,Ir=ia>>4,yr=0;4>yr;yr+=2){for(Sn=0,cr=xt.la>>4+yr,ia=vr.la>>4+yr,Tr=0;2>Tr;++Tr){for(Os=1&ia,ir=0;2>ir;++ir)vn=Os+(1&cr),cr=cr>>1|(Os=0<(vn=Ms(Gt,Ut[2],vn,Ot.Qc,0,ft,lr)))<<3,Sn=Sn<<2|(3<vn?3:1<vn?2:ft[lr+0]!=0),lr+=16;cr>>=2,ia=ia>>1|Os<<5}Ln|=Sn<<4*yr,An|=cr<<4<<yr,Ir|=(240&ia)<<yr}xt.la=An,vr.la=Ir,en.Hc=Qn,en.Gc=Ln,en.ia=43690&Ln?0:Ot.ia,Ut=!(Qn|Ln)}if(0<je.L&&(je.wa[je.Y+je.ja]=je.gd[at.$b][at.Za],je.wa[je.Y+je.ja].La|=!Ut),ct.Ka)return Qr(Ve,7,"Premature end-of-file encountered.")}if(zo(Ve),je=pt,ct=1,at=(Me=Ve).D,xt=0<Me.L&&Me.M>=Me.zb&&Me.M<=Me.Va,Me.Aa==0)e:{if(at.M=Me.M,at.uc=xt,li(Me,at),ct=1,at=(Sn=Me.D).Nb,xt=(Ln=ql[Me.L])*Me.R,Gt=Ln/2*Me.B,Tr=16*at*Me.R,ir=8*at*Me.B,Ut=Me.sa,en=Me.ta-xt+Tr,Ot=Me.qa,ft=Me.ra-Gt+ir,lr=Me.Ha,vr=Me.Ia-Gt+ir,ia=(cr=Sn.M)==0,Qn=cr>=Me.Va-1,Me.Aa==2&&li(Me,Sn),Sn.uc)for(Os=(vn=Me).D.M,e(vn.D.uc),Sn=vn.yb;Sn<vn.Hb;++Sn){Ir=Sn,An=Os;var hs=(ms=(Yr=vn).D).Nb;yr=Yr.R;var ms=ms.wa[ms.Y+Ir],Ts=Yr.sa,ao=Yr.ta+16*hs*yr+16*Ir,wr=ms.dd,Bs=ms.tc;if(Bs!=0)if(e(3<=Bs),Yr.L==1)0<Ir&&jl(Ts,ao,yr,Bs+4),ms.La&&os(Ts,ao,yr,Bs),0<An&&Dc(Ts,ao,yr,Bs+4),ms.La&&FA(Ts,ao,yr,Bs);else{var Bo=Yr.B,Qc=Yr.qa,jA=Yr.ra+8*hs*Bo+8*Ir,Hc=Yr.Ha,Yr=Yr.Ia+8*hs*Bo+8*Ir;hs=ms.ld,0<Ir&&(sl(Ts,ao,yr,Bs+4,wr,hs),Ic(Qc,jA,Hc,Yr,Bo,Bs+4,wr,hs)),ms.La&&(Rc(Ts,ao,yr,Bs,wr,hs),ku(Qc,jA,Hc,Yr,Bo,Bs,wr,hs)),0<An&&(kA(Ts,ao,yr,Bs+4,wr,hs),Nu(Qc,jA,Hc,Yr,Bo,Bs+4,wr,hs)),ms.La&&(Fc(Ts,ao,yr,Bs,wr,hs),IA(Qc,jA,Hc,Yr,Bo,Bs,wr,hs))}}if(Me.ia&&alert("todo:DitherRow"),je.put!=null){if(Sn=16*cr,cr=16*(cr+1),ia?(je.y=Me.sa,je.O=Me.ta+Tr,je.f=Me.qa,je.N=Me.ra+ir,je.ea=Me.Ha,je.W=Me.Ia+ir):(Sn-=Ln,je.y=Ut,je.O=en,je.f=Ot,je.N=ft,je.ea=lr,je.W=vr),Qn||(cr-=Ln),cr>je.o&&(cr=je.o),je.F=null,je.J=null,Me.Fa!=null&&0<Me.Fa.length&&Sn<cr&&(je.J=_c(Me,je,Sn,cr-Sn),je.F=Me.mb,je.F==null&&je.F.length==0)){ct=Qr(Me,3,"Could not decode alpha data.");break e}Sn<je.j&&(Ln=je.j-Sn,Sn=je.j,e(!(1&Ln)),je.O+=Me.R*Ln,je.N+=Me.B*(Ln>>1),je.W+=Me.B*(Ln>>1),je.F!=null&&(je.J+=je.width*Ln)),Sn<cr&&(je.O+=je.v,je.N+=je.v>>1,je.W+=je.v>>1,je.F!=null&&(je.J+=je.v),je.ka=Sn-je.j,je.U=je.va-je.v,je.T=cr-Sn,ct=je.put(je))}at+1!=Me.Ic||Qn||(r(Me.sa,Me.ta-xt,Ut,en+16*Me.R,xt),r(Me.qa,Me.ra-Gt,Ot,ft+8*Me.B,Gt),r(Me.Ha,Me.Ia-Gt,lr,vr+8*Me.B,Gt))}if(!ct)return Qr(Ve,6,"Output aborted.")}return 1}(C,L)),L.bc!=null&&L.bc(L),z&=1}return z?(C.cb=0,z):0}function ga(C,L,z,te,ce){ce=C[L+z+32*te]+(ce>>3),C[L+z+32*te]=-256&ce?0>ce?0:255:ce}function yc(C,L,z,te,ce,he){ga(C,L,0,z,te+ce),ga(C,L,1,z,te+he),ga(C,L,2,z,te-he),ga(C,L,3,z,te-ce)}function ar(C){return(20091*C>>16)+C}function xa(C,L,z,te){var ce,he=0,pe=a(16);for(ce=0;4>ce;++ce){var xe=C[L+0]+C[L+8],be=C[L+0]-C[L+8],Te=(35468*C[L+4]>>16)-ar(C[L+12]),Le=ar(C[L+4])+(35468*C[L+12]>>16);pe[he+0]=xe+Le,pe[he+1]=be+Te,pe[he+2]=be-Te,pe[he+3]=xe-Le,he+=4,L++}for(ce=he=0;4>ce;++ce)xe=(C=pe[he+0]+4)+pe[he+8],be=C-pe[he+8],Te=(35468*pe[he+4]>>16)-ar(pe[he+12]),ga(z,te,0,0,xe+(Le=ar(pe[he+4])+(35468*pe[he+12]>>16))),ga(z,te,1,0,be+Te),ga(z,te,2,0,be-Te),ga(z,te,3,0,xe-Le),he++,te+=32}function Ko(C,L,z,te){var ce=C[L+0]+4,he=35468*C[L+4]>>16,pe=ar(C[L+4]),xe=35468*C[L+1]>>16;yc(z,te,0,ce+pe,C=ar(C[L+1]),xe),yc(z,te,1,ce+he,C,xe),yc(z,te,2,ce-he,C,xe),yc(z,te,3,ce-pe,C,xe)}function qo(C,L,z,te,ce){xa(C,L,z,te),ce&&xa(C,L+16,z,te+4)}function qi(C,L,z,te){So(C,L+0,z,te,1),So(C,L+32,z,te+128,1)}function gr(C,L,z,te){var ce;for(C=C[L+0]+4,ce=0;4>ce;++ce)for(L=0;4>L;++L)ga(z,te,L,ce,C)}function Wo(C,L,z,te){C[L+0]&&Ss(C,L+0,z,te),C[L+16]&&Ss(C,L+16,z,te+4),C[L+32]&&Ss(C,L+32,z,te+128),C[L+48]&&Ss(C,L+48,z,te+128+4)}function si(C,L,z,te){var ce,he=a(16);for(ce=0;4>ce;++ce){var pe=C[L+0+ce]+C[L+12+ce],xe=C[L+4+ce]+C[L+8+ce],be=C[L+4+ce]-C[L+8+ce],Te=C[L+0+ce]-C[L+12+ce];he[0+ce]=pe+xe,he[8+ce]=pe-xe,he[4+ce]=Te+be,he[12+ce]=Te-be}for(ce=0;4>ce;++ce)pe=(C=he[0+4*ce]+3)+he[3+4*ce],xe=he[1+4*ce]+he[2+4*ce],be=he[1+4*ce]-he[2+4*ce],Te=C-he[3+4*ce],z[te+0]=pe+xe>>3,z[te+16]=Te+be>>3,z[te+32]=pe-xe>>3,z[te+48]=Te-be>>3,te+=64}function xo(C,L,z){var te,ce=L-32,he=sa,pe=255-C[ce-1];for(te=0;te<z;++te){var xe,be=he,Te=pe+C[L-1];for(xe=0;xe<z;++xe)C[L+xe]=be[Te+C[ce+xe]];L+=32}}function Cu(C,L){xo(C,L,4)}function bA(C,L){xo(C,L,8)}function CA(C,L){xo(C,L,16)}function vo(C,L){var z;for(z=0;16>z;++z)r(C,L+32*z,C,L-32,16)}function wc(C,L){var z;for(z=16;0<z;--z)s(C,L,C[L-1],16),L+=32}function yo(C,L,z){var te;for(te=0;16>te;++te)s(L,z+32*te,C,16)}function Wi(C,L){var z,te=16;for(z=0;16>z;++z)te+=C[L-1+32*z]+C[L+z-32];yo(te>>5,C,L)}function kr(C,L){var z,te=8;for(z=0;16>z;++z)te+=C[L-1+32*z];yo(te>>4,C,L)}function wo(C,L){var z,te=8;for(z=0;16>z;++z)te+=C[L+z-32];yo(te>>4,C,L)}function $i(C,L){yo(128,C,L)}function un(C,L,z){return C+2*L+z+2>>2}function Yi(C,L){var z,te=L-32;for(te=new Uint8Array([un(C[te-1],C[te+0],C[te+1]),un(C[te+0],C[te+1],C[te+2]),un(C[te+1],C[te+2],C[te+3]),un(C[te+2],C[te+3],C[te+4])]),z=0;4>z;++z)r(C,L+32*z,te,0,te.length)}function Eu(C,L){var z=C[L-1],te=C[L-1+32],ce=C[L-1+64],he=C[L-1+96];ke(C,L+0,16843009*un(C[L-1-32],z,te)),ke(C,L+32,16843009*un(z,te,ce)),ke(C,L+64,16843009*un(te,ce,he)),ke(C,L+96,16843009*un(ce,he,he))}function Ba(C,L){var z,te=4;for(z=0;4>z;++z)te+=C[L+z-32]+C[L-1+32*z];for(te>>=3,z=0;4>z;++z)s(C,L+32*z,te,4)}function ai(C,L){var z=C[L-1+0],te=C[L-1+32],ce=C[L-1+64],he=C[L-1-32],pe=C[L+0-32],xe=C[L+1-32],be=C[L+2-32],Te=C[L+3-32];C[L+0+96]=un(te,ce,C[L-1+96]),C[L+1+96]=C[L+0+64]=un(z,te,ce),C[L+2+96]=C[L+1+64]=C[L+0+32]=un(he,z,te),C[L+3+96]=C[L+2+64]=C[L+1+32]=C[L+0+0]=un(pe,he,z),C[L+3+64]=C[L+2+32]=C[L+1+0]=un(xe,pe,he),C[L+3+32]=C[L+2+0]=un(be,xe,pe),C[L+3+0]=un(Te,be,xe)}function Va(C,L){var z=C[L+1-32],te=C[L+2-32],ce=C[L+3-32],he=C[L+4-32],pe=C[L+5-32],xe=C[L+6-32],be=C[L+7-32];C[L+0+0]=un(C[L+0-32],z,te),C[L+1+0]=C[L+0+32]=un(z,te,ce),C[L+2+0]=C[L+1+32]=C[L+0+64]=un(te,ce,he),C[L+3+0]=C[L+2+32]=C[L+1+64]=C[L+0+96]=un(ce,he,pe),C[L+3+32]=C[L+2+64]=C[L+1+96]=un(he,pe,xe),C[L+3+64]=C[L+2+96]=un(pe,xe,be),C[L+3+96]=un(xe,be,be)}function Ji(C,L){var z=C[L-1+0],te=C[L-1+32],ce=C[L-1+64],he=C[L-1-32],pe=C[L+0-32],xe=C[L+1-32],be=C[L+2-32],Te=C[L+3-32];C[L+0+0]=C[L+1+64]=he+pe+1>>1,C[L+1+0]=C[L+2+64]=pe+xe+1>>1,C[L+2+0]=C[L+3+64]=xe+be+1>>1,C[L+3+0]=be+Te+1>>1,C[L+0+96]=un(ce,te,z),C[L+0+64]=un(te,z,he),C[L+0+32]=C[L+1+96]=un(z,he,pe),C[L+1+32]=C[L+2+96]=un(he,pe,xe),C[L+2+32]=C[L+3+96]=un(pe,xe,be),C[L+3+32]=un(xe,be,Te)}function ii(C,L){var z=C[L+0-32],te=C[L+1-32],ce=C[L+2-32],he=C[L+3-32],pe=C[L+4-32],xe=C[L+5-32],be=C[L+6-32],Te=C[L+7-32];C[L+0+0]=z+te+1>>1,C[L+1+0]=C[L+0+64]=te+ce+1>>1,C[L+2+0]=C[L+1+64]=ce+he+1>>1,C[L+3+0]=C[L+2+64]=he+pe+1>>1,C[L+0+32]=un(z,te,ce),C[L+1+32]=C[L+0+96]=un(te,ce,he),C[L+2+32]=C[L+1+96]=un(ce,he,pe),C[L+3+32]=C[L+2+96]=un(he,pe,xe),C[L+3+64]=un(pe,xe,be),C[L+3+96]=un(xe,be,Te)}function $o(C,L){var z=C[L-1+0],te=C[L-1+32],ce=C[L-1+64],he=C[L-1+96];C[L+0+0]=z+te+1>>1,C[L+2+0]=C[L+0+32]=te+ce+1>>1,C[L+2+32]=C[L+0+64]=ce+he+1>>1,C[L+1+0]=un(z,te,ce),C[L+3+0]=C[L+1+32]=un(te,ce,he),C[L+3+32]=C[L+1+64]=un(ce,he,he),C[L+3+64]=C[L+2+64]=C[L+0+96]=C[L+1+96]=C[L+2+96]=C[L+3+96]=he}function bo(C,L){var z=C[L-1+0],te=C[L-1+32],ce=C[L-1+64],he=C[L-1+96],pe=C[L-1-32],xe=C[L+0-32],be=C[L+1-32],Te=C[L+2-32];C[L+0+0]=C[L+2+32]=z+pe+1>>1,C[L+0+32]=C[L+2+64]=te+z+1>>1,C[L+0+64]=C[L+2+96]=ce+te+1>>1,C[L+0+96]=he+ce+1>>1,C[L+3+0]=un(xe,be,Te),C[L+2+0]=un(pe,xe,be),C[L+1+0]=C[L+3+32]=un(z,pe,xe),C[L+1+32]=C[L+3+64]=un(te,z,pe),C[L+1+64]=C[L+3+96]=un(ce,te,z),C[L+1+96]=un(he,ce,te)}function EA(C,L){var z;for(z=0;8>z;++z)r(C,L+32*z,C,L-32,8)}function oi(C,L){var z;for(z=0;8>z;++z)s(C,L,C[L-1],8),L+=32}function Na(C,L,z){var te;for(te=0;8>te;++te)s(L,z+32*te,C,8)}function Xi(C,L){var z,te=8;for(z=0;8>z;++z)te+=C[L+z-32]+C[L-1+32*z];Na(te>>4,C,L)}function Es(C,L){var z,te=4;for(z=0;8>z;++z)te+=C[L+z-32];Na(te>>3,C,L)}function Kn(C,L){var z,te=4;for(z=0;8>z;++z)te+=C[L-1+32*z];Na(te>>3,C,L)}function Yo(C,L){Na(128,C,L)}function Zi(C,L,z){var te=C[L-z],ce=C[L+0],he=3*(ce-te)+wh[1020+C[L-2*z]-C[L+z]],pe=RA[112+(he+4>>3)];C[L-z]=sa[255+te+RA[112+(he+3>>3)]],C[L+0]=sa[255+ce-pe]}function _A(C,L,z,te){var ce=C[L+0],he=C[L+z];return ro[255+C[L-2*z]-C[L-z]]>te||ro[255+he-ce]>te}function Il(C,L,z,te){return 4*ro[255+C[L-z]-C[L+0]]+ro[255+C[L-2*z]-C[L+z]]<=te}function Fl(C,L,z,te,ce){var he=C[L-3*z],pe=C[L-2*z],xe=C[L-z],be=C[L+0],Te=C[L+z],Le=C[L+2*z],Ye=C[L+3*z];return 4*ro[255+xe-be]+ro[255+pe-Te]>te?0:ro[255+C[L-4*z]-he]<=ce&&ro[255+he-pe]<=ce&&ro[255+pe-xe]<=ce&&ro[255+Ye-Le]<=ce&&ro[255+Le-Te]<=ce&&ro[255+Te-be]<=ce}function Li(C,L,z,te){var ce=2*te+1;for(te=0;16>te;++te)Il(C,L+te,z,ce)&&Zi(C,L+te,z)}function ka(C,L,z,te){var ce=2*te+1;for(te=0;16>te;++te)Il(C,L+te*z,1,ce)&&Zi(C,L+te*z,1)}function _s(C,L,z,te){var ce;for(ce=3;0<ce;--ce)Li(C,L+=4*z,z,te)}function _u(C,L,z,te){var ce;for(ce=3;0<ce;--ce)ka(C,L+=4,z,te)}function Jo(C,L,z,te,ce,he,pe,xe){for(he=2*he+1;0<ce--;){if(Fl(C,L,z,he,pe))if(_A(C,L,z,xe))Zi(C,L,z);else{var be=C,Te=L,Le=z,Ye=be[Te-2*Le],qe=be[Te-Le],Ve=be[Te+0],pt=be[Te+Le],at=be[Te+2*Le],Me=27*(ct=wh[1020+3*(Ve-qe)+wh[1020+Ye-pt]])+63>>7,je=18*ct+63>>7,ct=9*ct+63>>7;be[Te-3*Le]=sa[255+be[Te-3*Le]+ct],be[Te-2*Le]=sa[255+Ye+je],be[Te-Le]=sa[255+qe+Me],be[Te+0]=sa[255+Ve-Me],be[Te+Le]=sa[255+pt-je],be[Te+2*Le]=sa[255+at-ct]}L+=te}}function va(C,L,z,te,ce,he,pe,xe){for(he=2*he+1;0<ce--;){if(Fl(C,L,z,he,pe))if(_A(C,L,z,xe))Zi(C,L,z);else{var be=C,Te=L,Le=z,Ye=be[Te-Le],qe=be[Te+0],Ve=be[Te+Le],pt=RA[112+((at=3*(qe-Ye))+4>>3)],at=RA[112+(at+3>>3)],Me=pt+1>>1;be[Te-2*Le]=sa[255+be[Te-2*Le]+Me],be[Te-Le]=sa[255+Ye+at],be[Te+0]=sa[255+qe-pt],be[Te+Le]=sa[255+Ve-Me]}L+=te}}function Xo(C,L,z,te,ce,he){Jo(C,L,z,1,16,te,ce,he)}function Co(C,L,z,te,ce,he){Jo(C,L,1,z,16,te,ce,he)}function bc(C,L,z,te,ce,he){var pe;for(pe=3;0<pe;--pe)va(C,L+=4*z,z,1,16,te,ce,he)}function Rl(C,L,z,te,ce,he){var pe;for(pe=3;0<pe;--pe)va(C,L+=4,1,z,16,te,ce,he)}function Cc(C,L,z,te,ce,he,pe,xe){Jo(C,L,ce,1,8,he,pe,xe),Jo(z,te,ce,1,8,he,pe,xe)}function SA(C,L,z,te,ce,he,pe,xe){Jo(C,L,1,ce,8,he,pe,xe),Jo(z,te,1,ce,8,he,pe,xe)}function Dl(C,L,z,te,ce,he,pe,xe){va(C,L+4*ce,ce,1,8,he,pe,xe),va(z,te+4*ce,ce,1,8,he,pe,xe)}function Zo(C,L,z,te,ce,he,pe,xe){va(C,L+4,1,ce,8,he,pe,xe),va(z,te+4,1,ce,8,he,pe,xe)}function Ul(){this.ba=new qr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Rn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ec(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ll(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function el(){this.ua=0,this.Wa=new Ee,this.vb=new Ee,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new G,this.yc=new U}function Su(){this.xb=this.a=0,this.l=new Us,this.ca=new qr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new j,this.Pb=0,this.wd=new j,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new el,this.ab=0,this.gc=i(4,Ll),this.Oc=0}function Eo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Us,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function tl(C,L,z,te,ce,he,pe){for(C=C==null?0:C[L+0],L=0;L<pe;++L)ce[he+L]=C+z[te+L]&255,C=ce[he+L]}function Ml(C,L,z,te,ce,he,pe){var xe;if(C==null)tl(null,null,z,te,ce,he,pe);else for(xe=0;xe<pe;++xe)ce[he+xe]=C[L+xe]+z[te+xe]&255}function Ia(C,L,z,te,ce,he,pe){if(C==null)tl(null,null,z,te,ce,he,pe);else{var xe,be=C[L+0],Te=be,Le=be;for(xe=0;xe<pe;++xe)Te=Le+(be=C[L+xe])-Te,Le=z[te+xe]+(-256&Te?0>Te?0:255:Te)&255,Te=be,ce[he+xe]=Le}}function _c(C,L,z,te){var ce=L.width,he=L.o;if(e(C!=null&&L!=null),0>z||0>=te||z+te>he)return null;if(!C.Cc){if(C.ga==null){var pe;if(C.ga=new Eo,(pe=C.ga==null)||(pe=L.width*L.o,e(C.Gb.length==0),C.Gb=a(pe),C.Uc=0,C.Gb==null?pe=0:(C.mb=C.Gb,C.nb=C.Uc,C.rc=null,pe=1),pe=!pe),!pe){pe=C.ga;var xe=C.Fa,be=C.P,Te=C.qc,Le=C.mb,Ye=C.nb,qe=be+1,Ve=Te-1,pt=pe.l;if(e(xe!=null&&Le!=null&&L!=null),ol[0]=null,ol[1]=tl,ol[2]=Ml,ol[3]=Ia,pe.ca=Le,pe.tb=Ye,pe.c=L.width,pe.i=L.height,e(0<pe.c&&0<pe.i),1>=Te)L=0;else if(pe.$a=xe[be+0]>>0&3,pe.Z=xe[be+0]>>2&3,pe.Lc=xe[be+0]>>4&3,be=xe[be+0]>>6&3,0>pe.$a||1<pe.$a||4<=pe.Z||1<pe.Lc||be)L=0;else if(pt.put=us,pt.ac=jr,pt.bc=ma,pt.ma=pe,pt.width=L.width,pt.height=L.height,pt.Da=L.Da,pt.v=L.v,pt.va=L.va,pt.j=L.j,pt.o=L.o,pe.$a)e:{e(pe.$a==1),L=nt();t:for(;;){if(L==null){L=0;break e}if(e(pe!=null),pe.mc=L,L.c=pe.c,L.i=pe.i,L.l=pe.l,L.l.ma=pe,L.l.width=pe.c,L.l.height=pe.i,L.a=0,se(L.m,xe,qe,Ve),!Qe(pe.c,pe.i,1,L,null)||(L.ab==1&&L.gc[0].hc==3&&Ce(L.s)?(pe.ic=1,xe=L.c*L.i,L.Ta=null,L.Ua=0,L.V=a(xe),L.Ba=0,L.V==null?(L.a=1,L=0):L=1):(pe.ic=0,L=We(L,pe.c)),!L))break t;L=1;break e}pe.mc=null,L=0}else L=Ve>=pe.c*pe.i;pe=!L}if(pe)return null;C.ga.Lc!=1?C.Ga=0:te=he-z}e(C.ga!=null),e(z+te<=he);e:{if(L=(xe=C.ga).c,he=xe.l.o,xe.$a==0){if(qe=C.rc,Ve=C.Vc,pt=C.Fa,be=C.P+1+z*L,Te=C.mb,Le=C.nb+z*L,e(be<=C.P+C.qc),xe.Z!=0)for(e(ol[xe.Z]!=null),pe=0;pe<te;++pe)ol[xe.Z](qe,Ve,pt,be,Te,Le,L),qe=Te,Ve=Le,Le+=L,be+=L;else for(pe=0;pe<te;++pe)r(Te,Le,pt,be,L),qe=Te,Ve=Le,Le+=L,be+=L;C.rc=qe,C.Vc=Ve}else{if(e(xe.mc!=null),L=z+te,e((pe=xe.mc)!=null),e(L<=pe.i),pe.C>=L)L=1;else if(xe.ic||He(),xe.ic){xe=pe.V,qe=pe.Ba,Ve=pe.c;var at=pe.i,Me=(pt=1,be=pe.$/Ve,Te=pe.$%Ve,Le=pe.m,Ye=pe.s,pe.$),je=Ve*at,ct=Ve*L,xt=Ye.wc,ft=Me<ct?Or(Ye,Te,be):null;e(Me<=je),e(L<=at),e(Ce(Ye));t:for(;;){for(;!Le.h&&Me<ct;){if(Te&xt||(ft=Or(Ye,Te,be)),e(ft!=null),oe(Le),256>(at=_r(ft.G[0],ft.H[0],Le)))xe[qe+Me]=at,++Me,++Te>=Ve&&(Te=0,++be<=L&&!(be%16)&&Se(pe,be));else{if(!(280>at)){pt=0;break t}at=sr(at-256,Le);var Gt,Ut=_r(ft.G[4],ft.H[4],Le);if(oe(Le),!(Me>=(Ut=Xn(Ve,Ut=sr(Ut,Le)))&&je-Me>=at)){pt=0;break t}for(Gt=0;Gt<at;++Gt)xe[qe+Me+Gt]=xe[qe+Me+Gt-Ut];for(Me+=at,Te+=at;Te>=Ve;)Te-=Ve,++be<=L&&!(be%16)&&Se(pe,be);Me<ct&&Te&xt&&(ft=Or(Ye,Te,be))}e(Le.h==J(Le))}Se(pe,be>L?L:be);break t}!pt||Le.h&&Me<je?(pt=0,pe.a=Le.h?5:3):pe.$=Me,L=pt}else L=Ne(pe,pe.V,pe.Ba,pe.c,pe.i,L,Xe);if(!L){te=0;break e}}z+te>=he&&(C.Cc=1),te=1}if(!te)return null;if(C.Cc&&((te=C.ga)!=null&&(te.mc=null),C.ga=null,0<C.Ga))return alert("todo:WebPDequantizeLevels"),null}return C.nb+z*ce}function H(C,L,z,te,ce,he){for(;0<ce--;){var pe,xe=C,be=L+(z?1:0),Te=C,Le=L+(z?0:3);for(pe=0;pe<te;++pe){var Ye=Te[Le+4*pe];Ye!=255&&(Ye*=32897,xe[be+4*pe+0]=xe[be+4*pe+0]*Ye>>23,xe[be+4*pe+1]=xe[be+4*pe+1]*Ye>>23,xe[be+4*pe+2]=xe[be+4*pe+2]*Ye>>23)}L+=he}}function Ae(C,L,z,te,ce){for(;0<te--;){var he;for(he=0;he<z;++he){var pe=C[L+2*he+0],xe=15&(Te=C[L+2*he+1]),be=4369*xe,Te=(240&Te|Te>>4)*be>>16;C[L+2*he+0]=(240&pe|pe>>4)*be>>16&240|(15&pe|pe<<4)*be>>16>>4&15,C[L+2*he+1]=240&Te|xe}L+=ce}}function Ie(C,L,z,te,ce,he,pe,xe){var be,Te,Le=255;for(Te=0;Te<ce;++Te){for(be=0;be<te;++be){var Ye=C[L+be];he[pe+4*be]=Ye,Le&=Ye}L+=z,pe+=xe}return Le!=255}function Ue(C,L,z,te,ce){var he;for(he=0;he<ce;++he)z[te+he]=C[L+he]>>8}function He(){Mi=H,Hn=Ae,Vn=Ie,Hr=Ue}function ot(C,L,z){N[C]=function(te,ce,he,pe,xe,be,Te,Le,Ye,qe,Ve,pt,at,Me,je,ct,xt){var ft,Gt=xt-1>>1,Ut=xe[be+0]|Te[Le+0]<<16,en=Ye[qe+0]|Ve[pt+0]<<16;e(te!=null);var Ot=3*Ut+en+131074>>2;for(L(te[ce+0],255&Ot,Ot>>16,at,Me),he!=null&&(Ot=3*en+Ut+131074>>2,L(he[pe+0],255&Ot,Ot>>16,je,ct)),ft=1;ft<=Gt;++ft){var lr=xe[be+ft]|Te[Le+ft]<<16,vr=Ye[qe+ft]|Ve[pt+ft]<<16,Qn=Ut+lr+en+vr+524296,Ln=Qn+2*(lr+en)>>3;Ot=Ln+Ut>>1,Ut=(Qn=Qn+2*(Ut+vr)>>3)+lr>>1,L(te[ce+2*ft-1],255&Ot,Ot>>16,at,Me+(2*ft-1)*z),L(te[ce+2*ft-0],255&Ut,Ut>>16,at,Me+(2*ft-0)*z),he!=null&&(Ot=Qn+en>>1,Ut=Ln+vr>>1,L(he[pe+2*ft-1],255&Ot,Ot>>16,je,ct+(2*ft-1)*z),L(he[pe+2*ft+0],255&Ut,Ut>>16,je,ct+(2*ft+0)*z)),Ut=lr,en=vr}1&xt||(Ot=3*Ut+en+131074>>2,L(te[ce+xt-1],255&Ot,Ot>>16,at,Me+(xt-1)*z),he!=null&&(Ot=3*en+Ut+131074>>2,L(he[pe+xt-1],255&Ot,Ot>>16,je,ct+(xt-1)*z)))}}function Et(){aa[Fa]=Kl,aa[Iu]=ll,aa[al]=jc,aa[rf]=Eh,aa[DA]=_h,aa[Ql]=Du,aa[bh]=Sh,aa[sf]=ll,aa[Mc]=Eh,aa[Hl]=_h,aa[Fu]=Du}function jt(C){return C&-16384?0>C?0:255:C>>rw}function _(C,L){return jt((19077*C>>8)+(26149*L>>8)-14234)}function Y(C,L,z){return jt((19077*C>>8)-(6419*L>>8)-(13320*z>>8)+8708)}function re(C,L){return jt((19077*C>>8)+(33050*L>>8)-17685)}function ye(C,L,z,te,ce){te[ce+0]=_(C,z),te[ce+1]=Y(C,L,z),te[ce+2]=re(C,L)}function Oe(C,L,z,te,ce){te[ce+0]=re(C,L),te[ce+1]=Y(C,L,z),te[ce+2]=_(C,z)}function Ze(C,L,z,te,ce){var he=Y(C,L,z);L=he<<3&224|re(C,L)>>3,te[ce+0]=248&_(C,z)|he>>5,te[ce+1]=L}function _t(C,L,z,te,ce){var he=240&re(C,L)|15;te[ce+0]=240&_(C,z)|Y(C,L,z)>>4,te[ce+1]=he}function dn(C,L,z,te,ce){te[ce+0]=255,ye(C,L,z,te,ce+1)}function qn(C,L,z,te,ce){Oe(C,L,z,te,ce),te[ce+3]=255}function _n(C,L,z,te,ce){ye(C,L,z,te,ce),te[ce+3]=255}function xr(C,L){return 0>C?0:C>L?L:C}function Sr(C,L,z){N[C]=function(te,ce,he,pe,xe,be,Te,Le,Ye){for(var qe=Le+(-2&Ye)*z;Le!=qe;)L(te[ce+0],he[pe+0],xe[be+0],Te,Le),L(te[ce+1],he[pe+0],xe[be+0],Te,Le+z),ce+=2,++pe,++be,Le+=2*z;1&Ye&&L(te[ce+0],he[pe+0],xe[be+0],Te,Le)}}function eo(C,L,z){return z==0?C==0?L==0?6:5:L==0?4:0:z}function ds(C,L,z,te,ce){switch(C>>>30){case 3:So(L,z,te,ce,0);break;case 2:is(L,z,te,ce);break;case 1:Ss(L,z,te,ce)}}function li(C,L){var z,te,ce=L.M,he=L.Nb,pe=C.oc,xe=C.pc+40,be=C.oc,Te=C.pc+584,Le=C.oc,Ye=C.pc+600;for(z=0;16>z;++z)pe[xe+32*z-1]=129;for(z=0;8>z;++z)be[Te+32*z-1]=129,Le[Ye+32*z-1]=129;for(0<ce?pe[xe-1-32]=be[Te-1-32]=Le[Ye-1-32]=129:(s(pe,xe-32-1,127,21),s(be,Te-32-1,127,9),s(Le,Ye-32-1,127,9)),te=0;te<C.za;++te){var qe=L.ya[L.aa+te];if(0<te){for(z=-1;16>z;++z)r(pe,xe+32*z-4,pe,xe+32*z+12,4);for(z=-1;8>z;++z)r(be,Te+32*z-4,be,Te+32*z+4,4),r(Le,Ye+32*z-4,Le,Ye+32*z+4,4)}var Ve=C.Gd,pt=C.Hd+te,at=qe.ad,Me=qe.Hc;if(0<ce&&(r(pe,xe-32,Ve[pt].y,0,16),r(be,Te-32,Ve[pt].f,0,8),r(Le,Ye-32,Ve[pt].ea,0,8)),qe.Za){var je=pe,ct=xe-32+16;for(0<ce&&(te>=C.za-1?s(je,ct,Ve[pt].y[15],4):r(je,ct,Ve[pt+1].y,0,4)),z=0;4>z;z++)je[ct+128+z]=je[ct+256+z]=je[ct+384+z]=je[ct+0+z];for(z=0;16>z;++z,Me<<=2)je=pe,ct=xe+PA[z],za[qe.Ob[z]](je,ct),ds(Me,at,16*+z,je,ct)}else if(je=eo(te,ce,qe.Ob[0]),zl[je](pe,xe),Me!=0)for(z=0;16>z;++z,Me<<=2)ds(Me,at,16*+z,pe,xe+PA[z]);for(z=qe.Gc,je=eo(te,ce,qe.Dd),ji[je](be,Te),ji[je](Le,Ye),Me=at,je=be,ct=Te,255&(qe=z>>0)&&(170&qe?To(Me,256,je,ct):ui(Me,256,je,ct)),qe=Le,Me=Ye,255&(z>>=8)&&(170&z?To(at,320,qe,Me):ui(at,320,qe,Me)),ce<C.Ub-1&&(r(Ve[pt].y,0,pe,xe+480,16),r(Ve[pt].f,0,be,Te+224,8),r(Ve[pt].ea,0,Le,Ye+224,8)),z=8*he*C.B,Ve=C.sa,pt=C.ta+16*te+16*he*C.R,at=C.qa,qe=C.ra+8*te+z,Me=C.Ha,je=C.Ia+8*te+z,z=0;16>z;++z)r(Ve,pt+z*C.R,pe,xe+32*z,16);for(z=0;8>z;++z)r(at,qe+z*C.B,be,Te+32*z,8),r(Me,je+z*C.B,Le,Ye+32*z,8)}}function nl(C,L,z,te,ce,he,pe,xe,be){var Te=[0],Le=[0],Ye=0,qe=be!=null?be.kd:0,Ve=be??new Ec;if(C==null||12>z)return 7;Ve.data=C,Ve.w=L,Ve.ha=z,L=[L],z=[z],Ve.gb=[Ve.gb];e:{var pt=L,at=z,Me=Ve.gb;if(e(C!=null),e(at!=null),e(Me!=null),Me[0]=0,12<=at[0]&&!n(C,pt[0],"RIFF")){if(n(C,pt[0]+8,"WEBP")){Me=3;break e}var je=Re(C,pt[0]+4);if(12>je||4294967286<je){Me=3;break e}if(qe&&je>at[0]-8){Me=7;break e}Me[0]=je,pt[0]+=12,at[0]-=12}Me=0}if(Me!=0)return Me;for(je=0<Ve.gb[0],z=z[0];;){e:{var ct=C;at=L,Me=z;var xt=Te,ft=Le,Gt=pt=[0];if((Ot=Ye=[Ye])[0]=0,8>Me[0])Me=7;else{if(!n(ct,at[0],"VP8X")){if(Re(ct,at[0]+4)!=10){Me=3;break e}if(18>Me[0]){Me=7;break e}var Ut=Re(ct,at[0]+8),en=1+ae(ct,at[0]+12);if(2147483648<=en*(ct=1+ae(ct,at[0]+15))){Me=3;break e}Gt!=null&&(Gt[0]=Ut),xt!=null&&(xt[0]=en),ft!=null&&(ft[0]=ct),at[0]+=18,Me[0]-=18,Ot[0]=1}Me=0}}if(Ye=Ye[0],pt=pt[0],Me!=0)return Me;if(at=!!(2&pt),!je&&Ye)return 3;if(he!=null&&(he[0]=!!(16&pt)),pe!=null&&(pe[0]=at),xe!=null&&(xe[0]=0),pe=Te[0],pt=Le[0],Ye&&at&&be==null){Me=0;break}if(4>z){Me=7;break}if(je&&Ye||!je&&!Ye&&!n(C,L[0],"ALPH")){z=[z],Ve.na=[Ve.na],Ve.P=[Ve.P],Ve.Sa=[Ve.Sa];e:{Ut=C,Me=L,je=z;var Ot=Ve.gb;xt=Ve.na,ft=Ve.P,Gt=Ve.Sa,en=22,e(Ut!=null),e(je!=null),ct=Me[0];var lr=je[0];for(e(xt!=null),e(Gt!=null),xt[0]=null,ft[0]=null,Gt[0]=0;;){if(Me[0]=ct,je[0]=lr,8>lr){Me=7;break e}var vr=Re(Ut,ct+4);if(4294967286<vr){Me=3;break e}var Qn=8+vr+1&-2;if(en+=Qn,0<Ot&&en>Ot){Me=3;break e}if(!n(Ut,ct,"VP8 ")||!n(Ut,ct,"VP8L")){Me=0;break e}if(lr[0]<Qn){Me=7;break e}n(Ut,ct,"ALPH")||(xt[0]=Ut,ft[0]=ct+8,Gt[0]=vr),ct+=Qn,lr-=Qn}}if(z=z[0],Ve.na=Ve.na[0],Ve.P=Ve.P[0],Ve.Sa=Ve.Sa[0],Me!=0)break}z=[z],Ve.Ja=[Ve.Ja],Ve.xa=[Ve.xa];e:if(Ot=C,Me=L,je=z,xt=Ve.gb[0],ft=Ve.Ja,Gt=Ve.xa,Ut=Me[0],ct=!n(Ot,Ut,"VP8 "),en=!n(Ot,Ut,"VP8L"),e(Ot!=null),e(je!=null),e(ft!=null),e(Gt!=null),8>je[0])Me=7;else{if(ct||en){if(Ot=Re(Ot,Ut+4),12<=xt&&Ot>xt-12){Me=3;break e}if(qe&&Ot>je[0]-8){Me=7;break e}ft[0]=Ot,Me[0]+=8,je[0]-=8,Gt[0]=en}else Gt[0]=5<=je[0]&&Ot[Ut+0]==47&&!(Ot[Ut+4]>>5),ft[0]=je[0];Me=0}if(z=z[0],Ve.Ja=Ve.Ja[0],Ve.xa=Ve.xa[0],L=L[0],Me!=0)break;if(4294967286<Ve.Ja)return 3;if(xe==null||at||(xe[0]=Ve.xa?2:1),pe=[pe],pt=[pt],Ve.xa){if(5>z){Me=7;break}xe=pe,qe=pt,at=he,C==null||5>z?C=0:5<=z&&C[L+0]==47&&!(C[L+4]>>5)?(je=[0],Ot=[0],xt=[0],se(ft=new j,C,L,z),Ht(ft,je,Ot,xt)?(xe!=null&&(xe[0]=je[0]),qe!=null&&(qe[0]=Ot[0]),at!=null&&(at[0]=xt[0]),C=1):C=0):C=0}else{if(10>z){Me=7;break}xe=pt,C==null||10>z||!na(C,L+3,z-3)?C=0:(qe=C[L+0]|C[L+1]<<8|C[L+2]<<16,at=16383&(C[L+7]<<8|C[L+6]),C=16383&(C[L+9]<<8|C[L+8]),1&qe||3<(qe>>1&7)||!(qe>>4&1)||qe>>5>=Ve.Ja||!at||!C?C=0:(pe&&(pe[0]=at),xe&&(xe[0]=C),C=1))}if(!C||(pe=pe[0],pt=pt[0],Ye&&(Te[0]!=pe||Le[0]!=pt)))return 3;be!=null&&(be[0]=Ve,be.offset=L-be.w,e(4294967286>L-be.w),e(be.offset==be.ha-z));break}return Me==0||Me==7&&Ye&&be==null?(he!=null&&(he[0]|=Ve.na!=null&&0<Ve.na.length),te!=null&&(te[0]=pe),ce!=null&&(ce[0]=pt),0):Me}function Sc(C,L,z){var te=L.width,ce=L.height,he=0,pe=0,xe=te,be=ce;if(L.Da=C!=null&&0<C.Da,L.Da&&(xe=C.cd,be=C.bd,he=C.v,pe=C.j,11>z||(he&=-2,pe&=-2),0>he||0>pe||0>=xe||0>=be||he+xe>te||pe+be>ce))return 0;if(L.v=he,L.j=pe,L.va=he+xe,L.o=pe+be,L.U=xe,L.T=be,L.da=C!=null&&0<C.da,L.da){if(!Ge(xe,be,z=[C.ib],he=[C.hb]))return 0;L.ib=z[0],L.hb=he[0]}return L.ob=C!=null&&C.ob,L.Kb=C==null||!C.Sd,L.da&&(L.ob=L.ib<3*te/4&&L.hb<3*ce/4,L.Kb=0),1}function Tu(C){if(C==null)return 2;if(11>C.S){var L=C.f.RGBA;L.fb+=(C.height-1)*L.A,L.A=-L.A}else L=C.f.kb,C=C.height,L.O+=(C-1)*L.fa,L.fa=-L.fa,L.N+=(C-1>>1)*L.Ab,L.Ab=-L.Ab,L.W+=(C-1>>1)*L.Db,L.Db=-L.Db,L.F!=null&&(L.J+=(C-1)*L.lb,L.lb=-L.lb);return 0}function TA(C,L,z,te){if(te==null||0>=C||0>=L)return 2;if(z!=null){if(z.Da){var ce=z.cd,he=z.bd,pe=-2&z.v,xe=-2&z.j;if(0>pe||0>xe||0>=ce||0>=he||pe+ce>C||xe+he>L)return 2;C=ce,L=he}if(z.da){if(!Ge(C,L,ce=[z.ib],he=[z.hb]))return 2;C=ce[0],L=he[0]}}te.width=C,te.height=L;e:{var be=te.width,Te=te.height;if(C=te.S,0>=be||0>=Te||!(C>=Fa&&13>C))C=2;else{if(0>=te.Rd&&te.sd==null){pe=he=ce=L=0;var Le=(xe=be*Nx[C])*Te;if(11>C||(he=(Te+1)/2*(L=(be+1)/2),C==12&&(pe=(ce=be)*Te)),(Te=a(Le+2*he+pe))==null){C=1;break e}te.sd=Te,11>C?((be=te.f.RGBA).eb=Te,be.fb=0,be.A=xe,be.size=Le):((be=te.f.kb).y=Te,be.O=0,be.fa=xe,be.Fd=Le,be.f=Te,be.N=0+Le,be.Ab=L,be.Cd=he,be.ea=Te,be.W=0+Le+he,be.Db=L,be.Ed=he,C==12&&(be.F=Te,be.J=0+Le+2*he),be.Tc=pe,be.lb=ce)}if(L=1,ce=te.S,he=te.width,pe=te.height,ce>=Fa&&13>ce)if(11>ce)C=te.f.RGBA,L&=(xe=Math.abs(C.A))*(pe-1)+he<=C.size,L&=xe>=he*Nx[ce],L&=C.eb!=null;else{C=te.f.kb,xe=(he+1)/2,Le=(pe+1)/2,be=Math.abs(C.fa),Te=Math.abs(C.Ab);var Ye=Math.abs(C.Db),qe=Math.abs(C.lb),Ve=qe*(pe-1)+he;L&=be*(pe-1)+he<=C.Fd,L&=Te*(Le-1)+xe<=C.Cd,L=(L&=Ye*(Le-1)+xe<=C.Ed)&be>=he&Te>=xe&Ye>=xe,L&=C.y!=null,L&=C.f!=null,L&=C.ea!=null,ce==12&&(L&=qe>=he,L&=Ve<=C.Tc,L&=C.F!=null)}else L=0;C=L?0:2}}return C!=0||z!=null&&z.fd&&(C=Tu(te)),C}var Ls=64,Tc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],BA=24,NA=32,Bu=8,ci=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];mt("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(C){return C},N.Predictor2=function(C,L,z){return L[z+0]},N.Predictor3=function(C,L,z){return L[z+1]},N.Predictor4=function(C,L,z){return L[z-1]},N.Predictor5=function(C,L,z){return At(At(C,L[z+1]),L[z+0])},N.Predictor6=function(C,L,z){return At(C,L[z-1])},N.Predictor7=function(C,L,z){return At(C,L[z+0])},N.Predictor8=function(C,L,z){return At(L[z-1],L[z+0])},N.Predictor9=function(C,L,z){return At(L[z+0],L[z+1])},N.Predictor10=function(C,L,z){return At(At(C,L[z-1]),At(L[z+0],L[z+1]))},N.Predictor11=function(C,L,z){var te=L[z+0];return 0>=qt(te>>24&255,C>>24&255,(L=L[z-1])>>24&255)+qt(te>>16&255,C>>16&255,L>>16&255)+qt(te>>8&255,C>>8&255,L>>8&255)+qt(255&te,255&C,255&L)?te:C},N.Predictor12=function(C,L,z){var te=L[z+0];return(Nt((C>>24&255)+(te>>24&255)-((L=L[z-1])>>24&255))<<24|Nt((C>>16&255)+(te>>16&255)-(L>>16&255))<<16|Nt((C>>8&255)+(te>>8&255)-(L>>8&255))<<8|Nt((255&C)+(255&te)-(255&L)))>>>0},N.Predictor13=function(C,L,z){var te=L[z-1];return(It((C=At(C,L[z+0]))>>24&255,te>>24&255)<<24|It(C>>16&255,te>>16&255)<<16|It(C>>8&255,te>>8&255)<<8|It(C>>0&255,te>>0&255))>>>0};var Nm=N.PredictorAdd0;N.PredictorAdd1=Lt,mt("Predictor2","PredictorAdd2"),mt("Predictor3","PredictorAdd3"),mt("Predictor4","PredictorAdd4"),mt("Predictor5","PredictorAdd5"),mt("Predictor6","PredictorAdd6"),mt("Predictor7","PredictorAdd7"),mt("Predictor8","PredictorAdd8"),mt("Predictor9","PredictorAdd9"),mt("Predictor10","PredictorAdd10"),mt("Predictor11","PredictorAdd11"),mt("Predictor12","PredictorAdd12"),mt("Predictor13","PredictorAdd13");var tf=N.PredictorAdd2;kt("ColorIndexInverseTransform","MapARGB","32b",function(C){return C>>8&255},function(C){return C}),kt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(C){return C},function(C){return C>>8&255});var yh,to=N.ColorIndexInverseTransform,ra=N.MapARGB,Bc=N.VP8LColorIndexInverseTransformAlpha,nf=N.MapAlpha,Pl=N.VP8LPredictorsAdd=[];Pl.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var Nc,Ga,ya,kc,Ai,_o,rl,So,is,To,Ss,ui,kA,sl,Nu,Ic,Fc,Rc,IA,ku,Dc,jl,FA,os,Mi,Hn,Vn,Hr,fs=a(511),no=a(2041),Uc=a(225),Lc=a(767),Ol=0,wh=no,RA=Uc,sa=Lc,ro=fs,Fa=0,Iu=1,al=2,rf=3,DA=4,Ql=5,bh=6,sf=7,Mc=8,Hl=9,Fu=10,Ch=[2,3,7],so=[3,3,11],Pi=[280,256,256,256,40],UA=[0,1,1,1,0],Vl=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Gl=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],LA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ex=8,af=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],of=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ms=null,ls=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],fr=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Pc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],il=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],km=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],MA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],_x=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],zl=[],za=[],ji=[],Sx=1,Ru=2,ol=[],aa=[];ot("UpsampleRgbLinePair",ye,3),ot("UpsampleBgrLinePair",Oe,3),ot("UpsampleRgbaLinePair",_n,4),ot("UpsampleBgraLinePair",qn,4),ot("UpsampleArgbLinePair",dn,4),ot("UpsampleRgba4444LinePair",_t,2),ot("UpsampleRgb565LinePair",Ze,2);var Kl=N.UpsampleRgbLinePair,jc=N.UpsampleBgrLinePair,ll=N.UpsampleRgbaLinePair,Eh=N.UpsampleBgraLinePair,_h=N.UpsampleArgbLinePair,Du=N.UpsampleRgba4444LinePair,Sh=N.UpsampleRgb565LinePair,cl=16,Ps=1<<cl-1,Oc=-227,Th=482,rw=6,Tx=0,sw=a(256),js=a(256),Im=a(256),lf=a(256),cf=a(Th-Oc),Fm=a(Th-Oc);Sr("YuvToRgbRow",ye,3),Sr("YuvToBgrRow",Oe,3),Sr("YuvToRgbaRow",_n,4),Sr("YuvToBgraRow",qn,4),Sr("YuvToArgbRow",dn,4),Sr("YuvToRgba4444Row",_t,2),Sr("YuvToRgb565Row",Ze,2);var PA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ql=[0,2,8],aw=[8,7,6,4,4,2,2,2,1,1,1,1],Bx=1;this.WebPDecodeRGBA=function(C,L,z,te,ce){var he=Iu,pe=new Ul,xe=new qr;pe.ba=xe,xe.S=he,xe.width=[xe.width],xe.height=[xe.height];var be=xe.width,Te=xe.height,Le=new as;if(Le==null||C==null)var Ye=2;else e(Le!=null),Ye=nl(C,L,z,Le.width,Le.height,Le.Pd,Le.Qd,Le.format,null);if(Ye!=0?be=0:(be!=null&&(be[0]=Le.width[0]),Te!=null&&(Te[0]=Le.height[0]),be=1),be){xe.width=xe.width[0],xe.height=xe.height[0],te!=null&&(te[0]=xe.width),ce!=null&&(ce[0]=xe.height);e:{if(te=new Us,(ce=new Ec).data=C,ce.w=L,ce.ha=z,ce.kd=1,L=[0],e(ce!=null),((C=nl(ce.data,ce.w,ce.ha,null,null,null,L,null,ce))==0||C==7)&&L[0]&&(C=4),(L=C)==0){if(e(pe!=null),te.data=ce.data,te.w=ce.w+ce.offset,te.ha=ce.ha-ce.offset,te.put=us,te.ac=jr,te.bc=ma,te.ma=pe,ce.xa){if((C=nt())==null){pe=1;break e}if(function(qe,Ve){var pt=[0],at=[0],Me=[0];t:for(;;){if(qe==null)return 0;if(Ve==null)return qe.a=2,0;if(qe.l=Ve,qe.a=0,se(qe.m,Ve.data,Ve.w,Ve.ha),!Ht(qe.m,pt,at,Me)){qe.a=3;break t}if(qe.xb=Ru,Ve.width=pt[0],Ve.height=at[0],!Qe(pt[0],at[0],1,qe,null))break t;return 1}return e(qe.a!=0),0}(C,te)){if(te=(L=TA(te.width,te.height,pe.Oa,pe.ba))==0){t:{te=C;n:for(;;){if(te==null){te=0;break t}if(e(te.s.yc!=null),e(te.s.Ya!=null),e(0<te.s.Wb),e((z=te.l)!=null),e((ce=z.ma)!=null),te.xb!=0){if(te.ca=ce.ba,te.tb=ce.tb,e(te.ca!=null),!Sc(ce.Oa,z,rf)){te.a=2;break n}if(!We(te,z.width)||z.da)break n;if((z.da||Tn(te.ca.S))&&He(),11>te.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),te.ca.f.kb.F!=null&&He()),te.Pb&&0<te.s.ua&&te.s.vb.X==null&&!Je(te.s.vb,te.s.Wa.Xa)){te.a=1;break n}te.xb=0}if(!Ne(te,te.V,te.Ba,te.c,te.i,z.o,Be))break n;ce.Dc=te.Ma,te=1;break t}e(te.a!=0),te=0}te=!te}te&&(L=C.a)}else L=C.a}else{if((C=new pa)==null){pe=1;break e}if(C.Fa=ce.na,C.P=ce.P,C.qc=ce.Sa,vc(C,te)){if((L=TA(te.width,te.height,pe.Oa,pe.ba))==0){if(C.Aa=0,z=pe.Oa,e((ce=C)!=null),z!=null){if(0<(be=0>(be=z.Md)?0:100<be?255:255*be/100)){for(Te=Le=0;4>Te;++Te)12>(Ye=ce.pb[Te]).lc&&(Ye.ia=be*aw[0>Ye.lc?0:Ye.lc]>>3),Le|=Ye.ia;Le&&(alert("todo:VP8InitRandom"),ce.ia=1)}ce.Ga=z.Id,100<ce.Ga?ce.Ga=100:0>ce.Ga&&(ce.Ga=0)}wA(C,te)||(L=C.a)}}else L=C.a}L==0&&pe.Oa!=null&&pe.Oa.fd&&(L=Tu(pe.ba))}pe=L}he=pe!=0?null:11>he?xe.f.RGBA.eb:xe.f.kb.y}else he=null;return he};var Nx=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function A(N,T){for(var V="",M=0;M<4;M++)V+=String.fromCharCode(N[T++]);return V}function d(N,T){return(N[T+0]<<0|N[T+1]<<8|N[T+2]<<16)>>>0}function h(N,T){return(N[T+0]<<0|N[T+1]<<8|N[T+2]<<16|N[T+3]<<24)>>>0}new l;var p=[0],g=[0],w=[],b=new l,E=t,B=function(N,T){var V={},M=0,U=!1,O=0,G=0;if(V.frames=[],!function(W,J,ne,oe){for(var ue=0;ue<oe;ue++)if(W[J+ue]!=ne.charCodeAt(ue))return!0;return!1}(N,T,"RIFF",4)){var ie,K;for(h(N,T+=4),T+=8;T<N.length;){var q=A(N,T),se=h(N,T+=4);T+=4;var Z=se+(1&se);switch(q){case"VP8 ":case"VP8L":V.frames[M]===void 0&&(V.frames[M]={}),(j=V.frames[M]).src_off=U?G:T-8,j.src_size=O+se+8,M++,U&&(U=!1,O=0,G=0);break;case"VP8X":(j=V.header={}).feature_flags=N[T];var X=T+4;j.canvas_width=1+d(N,X),X+=3,j.canvas_height=1+d(N,X),X+=3;break;case"ALPH":U=!0,O=Z+8,G=T-8;break;case"ANIM":(j=V.header).bgcolor=h(N,T),X=T+4,j.loop_count=(ie=N)[(K=X)+0]<<0|ie[K+1]<<8,X+=2;break;case"ANMF":var de,j;(j=V.frames[M]={}).offset_x=2*d(N,T),T+=3,j.offset_y=2*d(N,T),T+=3,j.width=1+d(N,T),T+=3,j.height=1+d(N,T),T+=3,j.duration=d(N,T),T+=3,de=N[T++],j.dispose=1&de,j.blend=de>>1&1}q!="ANMF"&&(T+=Z)}return V}}(E,0);B.response=E,B.rgbaoutput=!0,B.dataurl=!1;var I=B.header?B.header:null,k=B.frames?B.frames:null;if(I){I.loop_counter=I.loop_count,p=[I.canvas_height],g=[I.canvas_width];for(var F=0;F<k.length&&k[F].blend!=0;F++);}var D=k[0],P=b.WebPDecodeRGBA(E,D.src_off,D.src_size,g,p);D.rgba=P,D.imgwidth=g[0],D.imgheight=p[0];for(var S=0;S<g[0]*p[0]*4;S++)w[S]=P[S];return this.width=g,this.height=p,this.data=w,this}(function(t){var e=function(){return typeof KE=="function"},n=function(p,g,w,b){var E=4,B=i;switch(b){case t.image_compression.FAST:E=1,B=a;break;case t.image_compression.MEDIUM:E=6,B=o;break;case t.image_compression.SLOW:E=9,B=l}p=r(p,g,w,B);var I=KE(p,{level:E});return t.__addimage__.arrayBufferToBinaryString(I)},r=function(p,g,w,b){for(var E,B,I,k=p.length/g,F=new Uint8Array(p.length+k),D=d(),P=0;P<k;P+=1){if(I=P*g,E=p.subarray(I,I+g),b)F.set(b(E,w,B),I+P);else{for(var S,N=D.length,T=[];S<N;S+=1)T[S]=D[S](E,w,B);var V=h(T.concat());F.set(T[V],I+P)}B=E}return F},s=function(p){var g=Array.apply([],p);return g.unshift(0),g},a=function(p,g){var w,b=[],E=p.length;b[0]=1;for(var B=0;B<E;B+=1)w=p[B-g]||0,b[B+1]=p[B]-w+256&255;return b},i=function(p,g,w){var b,E=[],B=p.length;E[0]=2;for(var I=0;I<B;I+=1)b=w&&w[I]||0,E[I+1]=p[I]-b+256&255;return E},o=function(p,g,w){var b,E,B=[],I=p.length;B[0]=3;for(var k=0;k<I;k+=1)b=p[k-g]||0,E=w&&w[k]||0,B[k+1]=p[k]+256-(b+E>>>1)&255;return B},l=function(p,g,w){var b,E,B,I,k=[],F=p.length;k[0]=4;for(var D=0;D<F;D+=1)b=p[D-g]||0,E=w&&w[D]||0,B=w&&w[D-g]||0,I=A(b,E,B),k[D+1]=p[D]-I+256&255;return k},A=function(p,g,w){if(p===g&&g===w)return p;var b=Math.abs(g-w),E=Math.abs(p-w),B=Math.abs(p+g-w-w);return b<=E&&b<=B?p:E<=B?g:w},d=function(){return[s,a,i,o,l]},h=function(p){var g=p.map(function(w){return w.reduce(function(b,E){return b+Math.abs(E)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(p,g,w,b){var E,B,I,k,F,D,P,S,N,T,V,M,U,O,G,ie=this.decode.FLATE_DECODE,K="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(I=new Qre(p)).imgData,B=I.bits,E=I.colorSpace,F=I.colors,[4,6].indexOf(I.colorType)!==-1){if(I.bits===8){N=(S=I.pixelBitlength==32?new Uint32Array(I.decodePixels().buffer):I.pixelBitlength==16?new Uint16Array(I.decodePixels().buffer):new Uint8Array(I.decodePixels().buffer)).length,V=new Uint8Array(N*I.colors),T=new Uint8Array(N);var q,se=I.pixelBitlength-I.bits;for(O=0,G=0;O<N;O++){for(U=S[O],q=0;q<se;)V[G++]=U>>>q&255,q+=I.bits;T[O]=U>>>q&255}}if(I.bits===16){N=(S=new Uint32Array(I.decodePixels().buffer)).length,V=new Uint8Array(N*(32/I.pixelBitlength)*I.colors),T=new Uint8Array(N*(32/I.pixelBitlength)),M=I.colors>1,O=0,G=0;for(var Z=0;O<N;)U=S[O++],V[G++]=U>>>0&255,M&&(V[G++]=U>>>16&255,U=S[O++],V[G++]=U>>>0&255),T[Z++]=U>>>16&255;B=8}b!==t.image_compression.NONE&&e()?(p=n(V,I.width*I.colors,I.colors,b),P=n(T,I.width,1,b)):(p=V,P=T,ie=void 0)}if(I.colorType===3&&(E=this.color_spaces.INDEXED,D=I.palette,I.transparency.indexed)){var X=I.transparency.indexed,de=0;for(O=0,N=X.length;O<N;++O)de+=X[O];if((de/=255)===N-1&&X.indexOf(0)!==-1)k=[X.indexOf(0)];else if(de!==N){for(S=I.decodePixels(),T=new Uint8Array(S.length),O=0,N=S.length;O<N;O++)T[O]=X[S[O]];P=n(T,I.width,1)}}var j=function(W){var J;switch(W){case t.image_compression.FAST:J=11;break;case t.image_compression.MEDIUM:J=13;break;case t.image_compression.SLOW:J=14;break;default:J=12}return J}(b);return ie===this.decode.FLATE_DECODE&&(K="/Predictor "+j+" "),K+="/Colors "+F+" /BitsPerComponent "+B+" /Columns "+I.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(P&&this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),{alias:w,data:p,index:g,filter:ie,decodeParameters:K,transparency:k,palette:D,sMask:P,predictor:j,width:I.width,height:I.height,bitsPerComponent:B,colorSpace:E}}}})(sn.API),function(t){t.processGIF89A=function(e,n,r,s){var a=new Hre(e),i=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var A={data:l,width:i,height:o},d=new Wb(100).encode(A,100);return t.processJPEG.call(this,d,n,r,s)},t.processGIF87A=t.processGIF89A}(sn.API),tc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},tc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){$r.log("bit decode error:"+n)}},tc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}n!==0&&(this.pos+=4-n)}},tc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<t;s++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+2*s*4,o=a>>4,l=15&a,A=this.palette[o];if(this.data[i]=A.blue,this.data[i+1]=A.green,this.data[i+2]=A.red,this.data[i+3]=255,2*s+1>=this.width)break;A=this.palette[l],this.data[i+4]=A.blue,this.data[i+4+1]=A.green,this.data[i+4+2]=A.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},tc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(s<this.palette.length){var i=this.palette[s];this.data[a]=i.red,this.data[a+1]=i.green,this.data[a+2]=i.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},tc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(a&e)/e*255|0,o=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,A=a>>15?255:0,d=r*this.width*4+4*s;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=A}this.pos+=t}},tc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,l=(i>>5&n)/n*255|0,A=(i>>11)/e*255|0,d=s*this.width*4+4*a;this.data[d]=A,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},tc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*n;this.data[i]=a,this.data[i+1]=s,this.data[i+2]=r,this.data[i+3]=255}this.pos+=this.width%4}},tc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=a,this.data[o+1]=s,this.data[o+2]=r,this.data[o+3]=i}},tc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,s){var a=new tc(e,!1),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},A=new Wb(100).encode(l,100);return t.processJPEG.call(this,A,n,r,s)}}(sn.API),Ok.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,s){var a=new Ok(e),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},A=new Wb(100).encode(l,100);return t.processJPEG.call(this,A,n,r,s)}}(sn.API),sn.API.processRGBA=function(t,e,n){for(var r=t.data,s=r.length,a=new Uint8Array(s/4*3),i=new Uint8Array(s/4),o=0,l=0,A=0;A<s;A+=4){var d=r[A],h=r[A+1],p=r[A+2],g=r[A+3];a[o++]=d,a[o++]=h,a[o++]=p,i[l++]=g}var w=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:w,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},sn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Yh=sn.API,L1=Yh.getCharWidthsArray=function(t,e){var n,r,s=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,l=o.fof?o.fof:1,A=e.kerning?e.kerning:s.metadata.Unicode.kerning,d=A.fof?A.fof:1,h=e.doKerning!==!1,p=0,g=t.length,w=0,b=o[0]||l,E=[];for(n=0;n<g;n++)r=t.charCodeAt(n),typeof s.metadata.widthOfString=="function"?E.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+i*(1e3/a)||0)/1e3):(p=h&&Lr(A[r])==="object"&&!isNaN(parseInt(A[r][w],10))?A[r][w]/d:0,E.push((o[r]||b)/l+p)),w=r;return E},Lk=Yh.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Yh.processArabic&&(t=Yh.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,s)/n:L1.apply(this,arguments).reduce(function(a,i){return a+i},0)},Mk=function(t,e,n,r){for(var s=[],a=0,i=t.length,o=0;a!==i&&o+e[a]<n;)o+=e[a],a++;s.push(t.slice(0,a));var l=a;for(o=0;a!==i;)o+e[a]>r&&(s.push(t.slice(l,a)),o=0,l=a),o+=e[a],a++;return l!==a&&s.push(t.slice(l,a)),s},Pk=function(t,e,n){n||(n={});var r,s,a,i,o,l,A,d=[],h=[d],p=n.textIndent||0,g=0,w=0,b=t.split(" "),E=L1.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?b[0].length+2:n.lineIndent||0){var B=Array(l).join(" "),I=[];b.map(function(F){(F=F.split(/\s*\n/)).length>1?I=I.concat(F.map(function(D,P){return(P&&D.length?`
`:"")+D})):I.push(F[0])}),b=I,l=Lk.apply(this,[B,n])}for(a=0,i=b.length;a<i;a++){var k=0;if(r=b[a],l&&r[0]==`
`&&(r=r.substr(1),k=1),p+g+(w=(s=L1.apply(this,[r,n])).reduce(function(F,D){return F+D},0))>e||k){if(w>e){for(o=Mk.apply(this,[r,s,e-(p+g),e]),d.push(o.shift()),d=[o.pop()];o.length;)h.push([o.shift()]);w=s.slice(r.length-(d[0]?d[0].length:0)).reduce(function(F,D){return F+D},0)}else d=[r];h.push(d),p=w+l,g=E}else d.push(r),p+=g+w,g=E}return A=l?function(F,D){return(D?B:"")+F.join(" ")}:function(F){return F.join(" ")},h.map(A)},Yh.splitTextToSize=function(t,e,n){var r,s=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var h=this.internal.getFont(d.fontName,d.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/s;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,a.lineIndent=n.lineIndent;var o,l,A=[];for(o=0,l=r.length;o<l;o++)A=A.concat(Pk.apply(this,[r[o],i,a]));return A},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},s=0;s<e.length;s++)n[e[s]]="0123456789abcdef"[s],r["0123456789abcdef"[s]]=e[s];var a=function(h){return"0x"+parseInt(h,10).toString(16)},i=t.__fontmetrics__.compress=function(h){var p,g,w,b,E=["{"];for(var B in h){if(p=h[B],isNaN(parseInt(B,10))?g="'"+B+"'":(B=parseInt(B,10),g=(g=a(B).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof p=="number")p<0?(w=a(p).slice(3),b="-"):(w=a(p).slice(2),b=""),w=b+w.slice(0,-1)+r[w.slice(-1)];else{if(Lr(p)!=="object")throw new Error("Don't know what to do with value type "+Lr(p)+".");w=i(p)}E.push(g+w)}return E.push("}"),E.join("")},o=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,g,w,b,E={},B=1,I=E,k=[],F="",D="",P=h.length-1,S=1;S<P;S+=1)(b=h[S])=="'"?p?(w=p.join(""),p=void 0):p=[]:p?p.push(b):b=="{"?(k.push([I,w]),I={},w=void 0):b=="}"?((g=k.pop())[0][g[1]]=I,w=void 0,I=g[0]):b=="-"?B=-1:w===void 0?n.hasOwnProperty(b)?(F+=n[b],w=parseInt(F,16)*B,B=1,F=""):F+=b:n.hasOwnProperty(b)?(D+=n[b],I[w]=parseInt(D,16)*B,B=1,w=void 0,D=""):D+=b;return E},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},A={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var p=h.font,g=d.Unicode[p.postScriptName];g&&(p.metadata.Unicode={},p.metadata.Unicode.widths=g.widths,p.metadata.Unicode.kerning=g.kerning);var w=A.Unicode[p.postScriptName];w&&(p.metadata.Unicode.encoding=w,p.encoding=w.codePages[0])}])}(sn.API),function(t){var e=function(n){for(var r=n.length,s=new Uint8Array(r),a=0;a<r;a++)s[a]=n.charCodeAt(a);return s};t.API.events.push(["addFont",function(n){var r=void 0,s=n.font,a=n.instance;if(!s.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=a.existsFileInVFS(s.postScriptName)===!1?a.loadFile(s.postScriptName):a.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(sg(o)),i.metadata=t.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(s,r)}}])}(sn),function(t){function e(){return(yn.canvg?Promise.resolve(yn.canvg):QE(()=>import("./index.es-Jwy-TKAk.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}sn.API.addSvgAsImage=function(n,r,s,a,i,o,l,A){if(isNaN(r)||isNaN(s))throw $r.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(i))throw $r.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=a,d.height=i;var h=d.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,d.width,d.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(w){return w.fromString(h,n,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(w){return w.render(p)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),r,s,a,i,l,A)})}}(),sn.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(e,n);return this},sn.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,s,a,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],A=0,d=0,h=0;function p(w,b){var E,B=!1;for(E=0;E<w.length;E+=1)w[E]===b&&(B=!0);return B}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=o.length;for(h=0;h<g;h+=1)n[o[h]].value=n[o[h]].defaultValue,n[o[h]].explicitSet=!1}if(Lr(t)==="object"){for(s in t)if(a=t[s],p(o,s)&&a!==void 0){if(n[s].type==="boolean"&&typeof a=="boolean")n[s].value=a;else if(n[s].type==="name"&&p(n[s].valueSet,a))n[s].value=a;else if(n[s].type==="integer"&&Number.isInteger(a))n[s].value=a;else if(n[s].type==="array"){for(A=0;A<a.length;A+=1)if(r=!0,a[A].length===1&&typeof a[A][0]=="number")l.push(String(a[A]-1));else if(a[A].length>1){for(d=0;d<a[A].length;d+=1)typeof a[A][d]!="number"&&(r=!1);r===!0&&l.push([a[A][0]-1,a[A][1]-1].join(" "))}n[s].value="["+l.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var w,b=[];for(w in n)n[w].explicitSet===!0&&(n[w].type==="name"?b.push("/"+w+" /"+n[w].value):b.push("/"+w+" "+n[w].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),A=a.length+i.length+o.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+A+" >>"),this.internal.write("stream"),this.internal.write(s+a+i+o+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(sn.API),function(t){var e=t.API,n=e.pdfEscape16=function(a,i){for(var o,l=i.metadata.Unicode.widths,A=["","0","00","000","0000"],d=[""],h=0,p=a.length;h<p;++h){if(o=i.metadata.characterToGlyph(a.charCodeAt(h)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=a.charCodeAt(h),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(A[4-o.length],o)}return d.join("")},r=function(a){var i,o,l,A,d,h,p;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,p=(o=Object.keys(a).sort(function(g,w){return g-w})).length;h<p;h++)i=o[h],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[i]!==void 0&&a[i]!==null&&typeof a[i].toString=="function"&&(A=("0000"+a[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),l.push("<"+i+"><"+A+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(i){var o=i.font,l=i.out,A=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var h=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),g="",w=0;w<p.length;w++)g+=String.fromCharCode(p[w]);var b=A();d({data:g,addLength1:!0,objectId:b}),l("endobj");var E=A();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:E}),l("endobj");var B=A();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+v0(o.fontName)),l("/FontFile2 "+b+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var I=A();l("<<"),l("/Type /Font"),l("/BaseFont /"+v0(o.fontName)),l("/FontDescriptor "+B+" 0 R"),l("/W "+t.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=A(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+E+" 0 R"),l("/BaseFont /"+v0(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+I+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(i){var o=i.font,l=i.out,A=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var h=o.metadata.rawData,p="",g=0;g<h.length;g++)p+=String.fromCharCode(h[g]);var w=A();d({data:p,addLength1:!0,objectId:w}),l("endobj");var b=A();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var E=A();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+w+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+v0(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=A();for(var B=0;B<o.metadata.hmtx.widths.length;B++)o.metadata.hmtx.widths[B]=parseInt(o.metadata.hmtx.widths[B]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+v0(o.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var s=function(a){var i,o=a.text||"",l=a.x,A=a.y,d=a.options||{},h=a.mutex||{},p=h.pdfEscape,g=h.activeFontKey,w=h.fonts,b=g,E="",B=0,I="",k=w[b].encoding;if(w[b].encoding!=="Identity-H")return{text:o,x:l,y:A,options:d,mutex:h};for(I=o,b=g,Array.isArray(o)&&(I=o[0]),B=0;B<I.length;B+=1)w[b].metadata.hasOwnProperty("cmap")&&(i=w[b].metadata.cmap.unicode.codeMap[I[B].charCodeAt(0)]),i||I[B].charCodeAt(0)<256&&w[b].metadata.hasOwnProperty("Unicode")?E+=I[B]:E+="";var F="";return parseInt(b.slice(1))<14||k==="WinAnsiEncoding"?F=p(E,b).split("").map(function(D){return D.charCodeAt(0).toString(16)}).join(""):k==="Identity-H"&&(F=n(E,w[b])),h.isHex=!0,{text:F,x:l,y:A,options:d,mutex:h}};e.events.push(["postProcessText",function(a){var i=a.text||"",o=[],l={text:i,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(i)){var A=0;for(A=0;A<i.length;A+=1)Array.isArray(i[A])&&i[A].length===3?o.push([s(Object.assign({},l,{text:i[A][0]})).text,i[A][1],i[A][2]]):o.push(s(Object.assign({},l,{text:i[A]})).text);a.text=o}else a.text=s(Object.assign({},l,{text:i})).text}])}(sn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(sn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var s,a,i,o,l,A,d,h=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],w={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],B=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),I=!1,k=0;this.__bidiEngine__={};var F=function(M){var U=M.charCodeAt(),O=U>>8,G=b[O];return G!==void 0?h[256*G+(255&U)]:O===252||O===253?"AL":B.test(O)?"L":O===8?"R":"N"},D=function(M){for(var U,O=0;O<M.length;O++){if((U=F(M.charAt(O)))==="L")return!1;if(U==="R")return!0}return!1},P=function(M,U,O,G){var ie,K,q,se,Z=U[G];switch(Z){case"L":case"R":I=!1;break;case"N":case"AN":break;case"EN":I&&(Z="AN");break;case"AL":I=!0,Z="R";break;case"WS":Z="N";break;case"CS":G<1||G+1>=U.length||(ie=O[G-1])!=="EN"&&ie!=="AN"||(K=U[G+1])!=="EN"&&K!=="AN"?Z="N":I&&(K="AN"),Z=K===ie?K:"N";break;case"ES":Z=(ie=G>0?O[G-1]:"B")==="EN"&&G+1<U.length&&U[G+1]==="EN"?"EN":"N";break;case"ET":if(G>0&&O[G-1]==="EN"){Z="EN";break}if(I){Z="N";break}for(q=G+1,se=U.length;q<se&&U[q]==="ET";)q++;Z=q<se&&U[q]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(se=U.length,q=G+1;q<se&&U[q]==="NSM";)q++;if(q<se){var X=M[G],de=X>=1425&&X<=2303||X===64286;if(ie=U[q],de&&(ie==="R"||ie==="AL")){Z="R";break}}}Z=G<1||(ie=U[G-1])==="B"?"N":O[G-1];break;case"B":I=!1,s=!0,Z=k;break;case"S":a=!0,Z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":I=!1;break;case"BN":Z="N"}return Z},S=function(M,U,O){var G=M.split("");return O&&N(G,O,{hiLevel:k}),G.reverse(),U&&U.reverse(),G.join("")},N=function(M,U,O){var G,ie,K,q,se,Z=-1,X=M.length,de=0,j=[],W=k?g:p,J=[];for(I=!1,s=!1,a=!1,ie=0;ie<X;ie++)J[ie]=F(M[ie]);for(K=0;K<X;K++){if(se=de,j[K]=P(M,J,j,K),G=240&(de=W[se][w[j[K]]]),de&=15,U[K]=q=W[de][5],G>0)if(G===16){for(ie=Z;ie<K;ie++)U[ie]=1;Z=-1}else Z=-1;if(W[de][6])Z===-1&&(Z=K);else if(Z>-1){for(ie=Z;ie<K;ie++)U[ie]=q;Z=-1}J[K]==="B"&&(U[K]=0),O.hiLevel|=q}a&&function(ne,oe,ue){for(var me=0;me<ue;me++)if(ne[me]==="S"){oe[me]=k;for(var ge=me-1;ge>=0&&ne[ge]==="WS";ge--)oe[ge]=k}}(J,U,X)},T=function(M,U,O,G,ie){if(!(ie.hiLevel<M)){if(M===1&&k===1&&!s)return U.reverse(),void(O&&O.reverse());for(var K,q,se,Z,X=U.length,de=0;de<X;){if(G[de]>=M){for(se=de+1;se<X&&G[se]>=M;)se++;for(Z=de,q=se-1;Z<q;Z++,q--)K=U[Z],U[Z]=U[q],U[q]=K,O&&(K=O[Z],O[Z]=O[q],O[q]=K);de=se}de++}}},V=function(M,U,O){var G=M.split(""),ie={hiLevel:k};return O||(O=[]),N(G,O,ie),function(K,q,se){if(se.hiLevel!==0&&d)for(var Z,X=0;X<K.length;X++)q[X]===1&&(Z=E.indexOf(K[X]))>=0&&(K[X]=E[Z+1])}(G,O,ie),T(2,G,U,O,ie),T(1,G,U,O,ie),G.join("")};return this.__bidiEngine__.doBidiReorder=function(M,U,O){if(function(ie,K){if(K)for(var q=0;q<ie.length;q++)K[q]=q;o===void 0&&(o=D(ie)),A===void 0&&(A=D(ie))}(M,U),i||!l||A)if(i&&l&&o^A)k=o?1:0,M=S(M,U,O);else if(!i&&l&&A)k=o?1:0,M=V(M,U,O),M=S(M,U);else if(!i||o||l||A){if(i&&!l&&o^A)M=S(M,U),o?(k=0,M=V(M,U,O)):(k=1,M=V(M,U,O),M=S(M,U));else if(i&&o&&!l&&A)k=1,M=V(M,U,O),M=S(M,U);else if(!i&&!l&&o^A){var G=d;o?(k=1,M=V(M,U,O),k=0,d=!1,M=V(M,U,O),d=G):(k=0,M=V(M,U,O),M=S(M,U),k=1,d=!1,M=V(M,U,O),d=G,M=S(M,U))}}else k=0,M=V(M,U,O);else k=o?1:0,M=V(M,U,O);return M},this.__bidiEngine__.setOptions=function(M){M&&(i=M.isInputVisual,l=M.isOutputVisual,o=M.isInputRtl,A=M.isOutputRtl,d=M.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var s=r.text,a=(r.x,r.y,r.options||{}),i=(r.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(i=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?i.push([n.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):i.push([n.doBidiReorder(s[o])]);r.text=i}else r.text=n.doBidiReorder(s);n.setOptions({isInputVisual:!0})}])}(sn),sn.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new zd(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new rse(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Vre(this.contents),this.head=new zre(this),this.name=new Yre(this),this.cmap=new DL(this),this.toUnicode={},this.hhea=new Kre(this),this.maxp=new Jre(this),this.hmtx=new Xre(this),this.post=new Wre(this),this.os2=new qre(this),this.loca=new nse(this),this.glyf=new Zre(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,s,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,l,A;for(A=[],i=0,o=(l=this.bbox).length;i<o;i++)e=l[i],A.push(Math.round(e*this.scaleFactor));return A}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),(32768&(n=s>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var s,a,i,o;for(i=0,a=0,o=(e=""+e).length;0<=o?a<o:a>o;a=0<=o?++a:--a)s=e.charCodeAt(a),i+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/n)||0;return i*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var pc,zd=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,s;for(s=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)s.push(this.writeByte(e.charCodeAt(n)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,s,a,i,o,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^a)+65536*(255^i)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*s+16777216*a+65536*i+256*o+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,s,a;for(a=[],r=0,s=e.length;r<s;r++)n=e[r],a.push(this.writeByte(n));return a},t}(),Vre=function(){var t;function e(n){var r,s,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},s=0,a=this.tableCount;0<=a?s<a:s>a;s=0<=a?++s:--s)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,s,a,i,o,l,A,d,h,p,g,w,b;for(b in g=Object.keys(n).length,l=Math.log(2),h=16*Math.floor(Math.log(g)/l),i=Math.floor(h/l),d=16*g-h,(s=new zd).writeInt(this.scalarType),s.writeShort(g),s.writeShort(h),s.writeShort(i),s.writeShort(d),a=16*g,A=s.pos+a,o=null,w=[],n)for(p=n[b],s.writeString(b),s.writeInt(t(p)),s.writeInt(A),s.writeInt(p.length),w=w.concat(p),b==="head"&&(o=A),A+=p.length;A%4;)w.push(0),A++;return s.write(w),r=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(r),s.data},t=function(n){var r,s,a,i;for(n=UL.call(n);n.length%4;)n.push(0);for(a=new zd(n),s=0,r=0,i=n.length;r<i;r=r+=4)s+=a.readUInt32();return 4294967295&s},e}(),Gre={}.hasOwnProperty,mA=function(t,e){for(var n in e)Gre.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};pc=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var zre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mA(e,pc),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new zd).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),Qk=function(){function t(e,n){var r,s,a,i,o,l,A,d,h,p,g,w,b,E,B,I,k;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(g=e.readUInt16(),p=g/2,e.pos+=6,a=function(){var F,D;for(D=[],l=F=0;0<=p?F<p:F>p;l=0<=p?++F:--F)D.push(e.readUInt16());return D}(),e.pos+=2,b=function(){var F,D;for(D=[],l=F=0;0<=p?F<p:F>p;l=0<=p?++F:--F)D.push(e.readUInt16());return D}(),A=function(){var F,D;for(D=[],l=F=0;0<=p?F<p:F>p;l=0<=p?++F:--F)D.push(e.readUInt16());return D}(),d=function(){var F,D;for(D=[],l=F=0;0<=p?F<p:F>p;l=0<=p?++F:--F)D.push(e.readUInt16());return D}(),s=(this.length-e.pos+this.offset)/2,o=function(){var F,D;for(D=[],l=F=0;0<=s?F<s:F>s;l=0<=s?++F:--F)D.push(e.readUInt16());return D}(),l=B=0,k=a.length;B<k;l=++B)for(E=a[l],r=I=w=b[l];w<=E?I<=E:I>=E;r=w<=E?++I:--I)d[l]===0?i=r+A[l]:(i=o[d[l]/2+(r-w)-(p-l)]||0)!==0&&(i+=A[l]),this.codeMap[r]=65535&i}e.pos=h}return t.encode=function(e,n){var r,s,a,i,o,l,A,d,h,p,g,w,b,E,B,I,k,F,D,P,S,N,T,V,M,U,O,G,ie,K,q,se,Z,X,de,j,W,J,ne,oe,ue,me,ge,ke,ve,ae;switch(G=new zd,i=Object.keys(e).sort(function(Re,Je){return Re-Je}),n){case"macroman":for(b=0,E=function(){var Re=[];for(w=0;w<256;++w)Re.push(0);return Re}(),I={0:0},a={},ie=0,Z=i.length;ie<Z;ie++)I[ge=e[s=i[ie]]]==null&&(I[ge]=++b),a[s]={old:e[s],new:I[e[s]]},E[s]=I[e[s]];return G.writeUInt16(1),G.writeUInt16(0),G.writeUInt32(12),G.writeUInt16(0),G.writeUInt16(262),G.writeUInt16(0),G.write(E),{charMap:a,subtable:G.data,maxGlyphID:b+1};case"unicode":for(U=[],h=[],k=0,I={},r={},B=A=null,K=0,X=i.length;K<X;K++)I[D=e[s=i[K]]]==null&&(I[D]=++k),r[s]={old:D,new:I[D]},o=I[D]-s,B!=null&&o===A||(B&&h.push(B),U.push(s),A=o),B=s;for(B&&h.push(B),h.push(65535),U.push(65535),V=2*(T=U.length),N=2*Math.pow(Math.log(T)/Math.LN2,2),p=Math.log(N/2)/Math.LN2,S=2*T-N,l=[],P=[],g=[],w=q=0,de=U.length;q<de;w=++q){if(M=U[w],d=h[w],M===65535){l.push(0),P.push(0);break}if(M-(O=r[M].new)>=32768)for(l.push(0),P.push(2*(g.length+T-w)),s=se=M;M<=d?se<=d:se>=d;s=M<=d?++se:--se)g.push(r[s].new);else l.push(O-M),P.push(0)}for(G.writeUInt16(3),G.writeUInt16(1),G.writeUInt32(12),G.writeUInt16(4),G.writeUInt16(16+8*T+2*g.length),G.writeUInt16(0),G.writeUInt16(V),G.writeUInt16(N),G.writeUInt16(p),G.writeUInt16(S),ue=0,j=h.length;ue<j;ue++)s=h[ue],G.writeUInt16(s);for(G.writeUInt16(0),me=0,W=U.length;me<W;me++)s=U[me],G.writeUInt16(s);for(ke=0,J=l.length;ke<J;ke++)o=l[ke],G.writeUInt16(o);for(ve=0,ne=P.length;ve<ne;ve++)F=P[ve],G.writeUInt16(F);for(ae=0,oe=g.length;ae<oe;ae++)b=g[ae],G.writeUInt16(b);return{charMap:r,subtable:G.data,maxGlyphID:k+1}}},t}(),DL=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mA(e,pc),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,s,a;for(n.pos=this.offset,this.version=n.readUInt16(),a=n.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)r=new Qk(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var s,a;return r==null&&(r="macroman"),s=Qk.encode(n,r),(a=new zd).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},e}(),Kre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mA(e,pc),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),qre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mA(e,pc),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(n.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(n.readInt());return s}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(n.readInt());return s}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),Wre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mA(e,pc),e.prototype.tag="post",e.prototype.parse=function(n){var r,s,a;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var i;for(s=n.readUInt16(),this.glyphNameIndex=[],i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],a=[];n.pos<this.offset+this.length;)r=n.readByte(),a.push(this.names.push(n.readString(r)));return a;case 151552:return s=n.readUInt16(),this.offsets=n.read(s);case 196608:break;case 262144:return this.map=(function(){var o,l,A;for(A=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)A.push(n.readUInt32());return A}).call(this)}},e}(),$re=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Yre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mA(e,pc),e.prototype.tag="name",e.prototype.parse=function(n){var r,s,a,i,o,l,A,d,h,p,g;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),s=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)s.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(A={},i=h=0,p=s.length;h<p;i=++h)a=s[i],n.pos=a.offset,d=n.readString(a.length),o=new $re(d,a),A[g=a.nameID]==null&&(A[g]=[]),A[a.nameID].push(o);this.strings=A,this.copyright=A[0],this.fontFamily=A[1],this.fontSubfamily=A[2],this.uniqueSubfamily=A[3],this.fontName=A[4],this.version=A[5];try{this.postscriptName=A[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=A[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=A[7],this.manufacturer=A[8],this.designer=A[9],this.description=A[10],this.vendorUrl=A[11],this.designerUrl=A[12],this.license=A[13],this.licenseUrl=A[14],this.preferredFamily=A[15],this.preferredSubfamily=A[17],this.compatibleFull=A[18],this.sampleText=A[19]},e}(),Jre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mA(e,pc),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),Xre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mA(e,pc),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,s,a,i,o,l,A;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,h;for(h=[],r=d=0;0<=a?d<a:d>a;r=0<=a?++d:--d)h.push(n.readInt16());return h}(),this.widths=(function(){var d,h,p,g;for(g=[],d=0,h=(p=this.metrics).length;d<h;d++)i=p[d],g.push(i.advance);return g}).call(this),s=this.widths[this.widths.length-1],A=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)A.push(this.widths.push(s));return A},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),UL=[].slice,Zre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mA(e,pc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,s,a,i,o,l,A,d,h,p;return n in this.cache?this.cache[n]:(i=this.file.loca,r=this.file.contents,s=i.indexOf(n),(a=i.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+s,o=(l=new zd(r.read(a))).readShort(),d=l.readShort(),p=l.readShort(),A=l.readShort(),h=l.readShort(),this.cache[n]=o===-1?new tse(l,d,p,A,h):new ese(l,o,d,p,A,h),this.cache[n]))},e.prototype.encode=function(n,r,s){var a,i,o,l,A;for(o=[],i=[],l=0,A=r.length;l<A;l++)a=n[r[l]],i.push(o.length),a&&(o=o.concat(a.encode(s)));return i.push(o.length),{table:o,offsets:i}},e}(),ese=function(){function t(e,n,r,s,a,i){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=s,this.xMax=a,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),tse=function(){function t(e,n,r,s,a){var i,o;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new zd(UL.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),nse=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mA(e,pc),e.prototype.tag="loca",e.prototype.parse=function(n){var r,s;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=2)i.push(2*n.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=4)i.push(n.readUInt32());return i}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var s=new Uint32Array(this.offsets.length),a=0,i=0,o=0;o<s.length;++o)if(s[o]=a,i<r.length&&r[i]==o){++i,s[o]=a;var l=this.offsets[o],A=this.offsets[o+1]-l;A>0&&(a+=A)}for(var d=new Array(4*s.length),h=0;h<s.length;++h)d[4*h+3]=255&s[h],d[4*h+2]=(65280&s[h])>>8,d[4*h+1]=(16711680&s[h])>>16,d[4*h]=(4278190080&s[h])>>24;return d},e}(),rse=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,s,a;for(n in s=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[n],e[n]=s[r];return e},t.prototype.glyphsFor=function(e){var n,r,s,a,i,o,l;for(s={},i=0,o=e.length;i<o;i++)s[a=e[i]]=this.font.glyf.glyphFor(a);for(a in n=[],s)(r=s[a])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(a in l=this.glyphsFor(n))r=l[a],s[a]=r;return s},t.prototype.encode=function(e,n){var r,s,a,i,o,l,A,d,h,p,g,w,b,E,B;for(s in r=DL.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),g={0:0},B=r.charMap)g[(l=B[s]).old]=l.new;for(w in p=r.maxGlyphID,i)w in g||(g[w]=p++);return d=function(I){var k,F;for(k in F={},I)F[I[k]]=k;return F}(g),h=Object.keys(d).sort(function(I,k){return I-k}),b=function(){var I,k,F;for(F=[],I=0,k=h.length;I<k;I++)o=h[I],F.push(d[o]);return F}(),a=this.font.glyf.encode(i,b,g),A=this.font.loca.encode(a.offsets,b),E={cmap:this.font.cmap.raw(),glyf:a.table,loca:A,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},t}();sn.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,s,a,i;if(Array.isArray(n))return"["+function(){var o,l,A;for(A=[],o=0,l=n.length;o<l;o++)r=n[o],A.push(e.convert(r));return A}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(s in a=["<<"],n)i=n[s],a.push("/"+s+" "+e.convert(i));return a.push(">>"),a.join(`
`)}return""+n},e}();function LL(t,e,n,r,s){r=r||{};var a=1.15,i=s.internal.scaleFactor,o=s.internal.getFontSize()/i,l=s.getLineHeightFactor?s.getLineHeightFactor():a,A=o*l,d=/\r\n|\r|\n/g,h="",p=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(h=typeof t=="string"?t.split(d):t,p=h.length||1),n+=o*(2-a),r.valign==="middle"?n-=p/2*A:r.valign==="bottom"&&(n-=p*A),r.halign==="center"||r.halign==="right"){var g=o;if(r.halign==="center"&&(g*=.5),h&&p>=1){for(var w=0;w<h.length;w++)s.text(h[w],e-s.getStringUnitWidth(h[w])*g,n),n+=A;return s}e-=s.getStringUnitWidth(t)*g}return r.halign==="justify"?s.text(t,e,n,{maxWidth:r.maxWidth||100,align:"justify"}):s.text(t,e,n),s}var Hk={},Q0=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=e:Hk=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,n){var r,s,a;n===void 0&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,l=i.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var A=this.getFontList()[l];A&&A.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(A[0]),o=A[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var d=t.unifyColor(e.fillColor);d&&(r=this.jsPDFDocument).setFillColor.apply(r,d),d=t.unifyColor(e.textColor),d&&(s=this.jsPDFDocument).setTextColor.apply(s,d),d=t.unifyColor(e.lineColor),d&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,n,r){return this.jsPDFDocument.splitTextToSize(e,n,r)},t.prototype.rect=function(e,n,r,s,a){return this.jsPDFDocument.rect(e,n,r,s,a)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return Hk||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),ZE=function(t,e){return ZE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},ZE(t,e)};function ML(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ZE(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var PL=function(t){ML(e,t);function e(n){var r=t.call(this)||this;return r._element=n,r}return e}(Array);function sse(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function ase(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function w2(t,e,n){n.applyStyles(e,!0);var r=Array.isArray(t)?t:[t],s=r.map(function(a){return n.getTextWidth(a)}).reduce(function(a,i){return Math.max(a,i)},0);return s}function jL(t,e,n,r){var s=e.settings.tableLineWidth,a=e.settings.tableLineColor;t.applyStyles({lineWidth:s,lineColor:a});var i=OL(s,!1);i&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),r.y-n.y,i)}function OL(t,e){var n=t>0,r=e||e===0;return n&&r?"DF":n?"S":r?"F":null}function By(t,e){var n,r,s,a;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:e,top:(r=t.top)!==null&&r!==void 0?r:e,right:(s=t.right)!==null&&s!==void 0?s:e,bottom:(a=t.bottom)!==null&&a!==void 0?a:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function QL(t,e){var n=By(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function ise(t,e,n,r,s){var a={},i=1.3333333333333333,o=$b(e,function(k){return s.getComputedStyle(k).backgroundColor});o!=null&&(a.fillColor=o);var l=$b(e,function(k){return s.getComputedStyle(k).color});l!=null&&(a.textColor=l);var A=lse(r,n);A&&(a.cellPadding=A);var d="borderTopColor",h=i*n,p=r.borderTopWidth;if(r.borderBottomWidth===p&&r.borderRightWidth===p&&r.borderLeftWidth===p){var g=(parseFloat(p)||0)/h;g&&(a.lineWidth=g)}else a.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/h,right:(parseFloat(r.borderRightWidth)||0)/h,bottom:(parseFloat(r.borderBottomWidth)||0)/h,left:(parseFloat(r.borderLeftWidth)||0)/h},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var w=$b(e,function(k){return s.getComputedStyle(k)[d]});w!=null&&(a.lineColor=w);var b=["left","right","center","justify"];b.indexOf(r.textAlign)!==-1&&(a.halign=r.textAlign),b=["middle","bottom","top"],b.indexOf(r.verticalAlign)!==-1&&(a.valign=r.verticalAlign);var E=parseInt(r.fontSize||"");isNaN(E)||(a.fontSize=E/i);var B=ose(r);B&&(a.fontStyle=B);var I=(r.fontFamily||"").toLowerCase();return t.indexOf(I)!==-1&&(a.font=I),a}function ose(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function $b(t,e){var n=HL(t,e);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var s=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],a=parseInt(r[4]);return a===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function HL(t,e){var n=e(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:HL(t.parentElement,e):n}function lse(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/e),s=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,a=n.map(function(o){return parseInt(o||"0")/r}),i=By(a,0);return s>i.top&&(i.top=s),s>i.bottom&&(i.bottom=s),i}function VL(t,e,n,r,s){var a,i;r===void 0&&(r=!1),s===void 0&&(s=!1);var o;typeof e=="string"?o=n.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),A=t.scaleFactor(),d=[],h=[],p=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:h,foot:p};for(var g=0;g<o.rows.length;g++){var w=o.rows[g],b=(i=(a=w==null?void 0:w.parentElement)===null||a===void 0?void 0:a.tagName)===null||i===void 0?void 0:i.toLowerCase(),E=cse(l,A,n,w,r,s);E&&(b==="thead"?d.push(E):b==="tfoot"?p.push(E):h.push(E))}return{head:d,body:h,foot:p}}function cse(t,e,n,r,s,a){for(var i=new PL(r),o=0;o<r.cells.length;o++){var l=r.cells[o],A=n.getComputedStyle(l);if(s||A.display!=="none"){var d=void 0;a&&(d=ise(t,l,e,A,n)),i.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:Ase(l)})}}var h=n.getComputedStyle(r);if(i.length>0&&(s||h.display!=="none"))return i}function Ase(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),e.innerText||e.textContent||""}function use(t,e,n){for(var r=0,s=[t,e,n];r<s.length;r++){var a=s[r];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function nu(t,e,n,r,s){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a}function GL(t,e){var n=new Q0(t),r=n.getDocumentOptions(),s=n.getGlobalOptions();use(s,r,e);var a=nu({},s,r,e),i;typeof window<"u"&&(i=window);var o=dse(s,r,e),l=fse(s,r,e),A=hse(n,a),d=pse(n,a,i);return{id:e.tableId,content:d,hooks:l,styles:o,settings:A}}function dse(t,e,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(l){if(l==="columnStyles"){var A=t[l],d=e[l],h=n[l];r.columnStyles=nu({},A,d,h)}else{var p=[t,e,n],g=p.map(function(w){return w[l]||{}});r[l]=nu({},g[0],g[1],g[2])}},a=0,i=Object.keys(r);a<i.length;a++){var o=i[a];s(o)}return r}function fse(t,e,n){for(var r=[t,e,n],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,i=r;a<i.length;a++){var o=i[a];o.didParseCell&&s.didParseCell.push(o.didParseCell),o.willDrawCell&&s.willDrawCell.push(o.willDrawCell),o.didDrawCell&&s.didDrawCell.push(o.didDrawCell),o.willDrawPage&&s.willDrawPage.push(o.willDrawPage),o.didDrawPage&&s.didDrawPage.push(o.didDrawPage)}return s}function hse(t,e){var n,r,s,a,i,o,l,A,d,h,p,g,w=By(e.margin,40/t.scaleFactor()),b=(n=mse(t,e.startY))!==null&&n!==void 0?n:w.top,E;e.showFoot===!0?E="everyPage":e.showFoot===!1?E="never":E=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var B;e.showHead===!0?B="everyPage":e.showHead===!1?B="never":B=(s=e.showHead)!==null&&s!==void 0?s:"everyPage";var I=(a=e.useCss)!==null&&a!==void 0?a:!1,k=e.theme||(I?"plain":"striped"),F=!!e.horizontalPageBreak,D=(i=e.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:I,theme:k,startY:b,margin:w,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(A=e.rowPageBreak)!==null&&A!==void 0?A:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:B,showFoot:E,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(p=e.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:F,horizontalPageBreakRepeat:D,horizontalPageBreakBehaviour:(g=e.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function mse(t,e){var n=t.getLastAutoTable(),r=t.scaleFactor(),s=t.pageNumber(),a=!1;if(n&&n.startPageNumber){var i=n.startPageNumber+n.pageNumber-1;a=i===s}return typeof e=="number"?e:(e==null||e===!1)&&a&&(n==null?void 0:n.finalY)!=null?n.finalY+20/r:null}function pse(t,e,n){var r=e.head||[],s=e.body||[],a=e.foot||[];if(e.html){var i=e.includeHiddenHtml;if(n){var o=VL(t,e.html,n,i,e.useCss)||{};r=o.head||r,s=o.body||r,a=o.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||gse(r,s,a);return{columns:l,head:r,body:s,foot:a}}function gse(t,e,n){var r=t[0]||e[0]||n[0]||[],s=[];return Object.keys(r).filter(function(a){return a!=="_element"}).forEach(function(a){var i=1,o;Array.isArray(r)?o=r[parseInt(a)]:o=r[a],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var l=0;l<i;l++){var A=void 0;Array.isArray(r)?A=s.length:A=a+(l>0?"_".concat(l):"");var d={dataKey:A};s.push(d)}}),s}var e_=function(){function t(e,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=e.getDocument()}return t}(),xse=function(t){ML(e,t);function e(n,r,s,a,i,o){var l=t.call(this,n,r,o)||this;return l.cell=s,l.row=a,l.column=i,l.section=a.section,l}return e}(e_),vse=function(){function t(e,n){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,n,r,s,a,i){for(var o=0,l=n;o<l.length;o++){var A=l[o],d=new xse(e,this,r,s,a,i),h=A(d)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],h)return!1}return!0},t.prototype.callEndPageHooks=function(e,n){e.applyStyles(e.userStyles);for(var r=0,s=this.hooks.didDrawPage;r<s.length;r++){var a=s[r];a(new e_(e,this,n))}},t.prototype.callWillDrawPageHooks=function(e,n){for(var r=0,s=this.hooks.willDrawPage;r<s.length;r++){var a=s[r];a(new e_(e,this,n))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(s,a){return s+a.wrappedWidth},0);return n}else{var r=this.settings.margin;return e-r.left-r.right}},t}(),zL=function(){function t(e,n,r,s,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof PL&&(this.raw=e._element,this.element=e._element),this.index=n,this.section=r,this.cells=s,this.spansMultiplePages=a}return t.prototype.getMaxCellHeight=function(e){var n=this;return e.reduce(function(r,s){var a;return Math.max(r,((a=n.cells[s.index])===null||a===void 0?void 0:a.height)||0)},0)},t.prototype.hasRowSpan=function(e){var n=this;return e.filter(function(r){var s=n.cells[r.index];return s?s.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,n){return this.getMaxCellHeight(n)<=e},t.prototype.getMinimumRowHeight=function(e,n){var r=this;return e.reduce(function(s,a){var i=r.cells[a.index];if(!i)return 0;var o=n.getLineHeight(i.styles.fontSize),l=i.padding("vertical"),A=l+o;return A>s?A:s},0)},t}(),KL=function(){function t(e,n,r){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(s=e.content)!==null&&s!==void 0?s:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var i=a!=null?""+a:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");r=this.x+s/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},t.prototype.getContentHeight=function(e,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/e*n,a=r*s+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},t.prototype.padding=function(e){var n=By(this.styles.cellPadding,0);return e==="vertical"?n.top+n.bottom:e==="horizontal"?n.left+n.right:n[e]},t}(),yse=function(){function t(e,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(e){for(var n=0,r=0,s=e.allRows();r<s.length;r++){var a=s[r],i=a.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(n=Math.max(n,i.styles.cellWidth))}return n},t}();function wse(t,e){bse(t,e);var n=[],r=0;e.columns.forEach(function(a){var i=a.getMaxCustomCellWidth(e);i?a.width=i:(a.width=a.wrappedWidth,n.push(a)),r+=a.width});var s=e.getWidth(t.pageSize().width)-r;s&&(s=t_(n,s,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),s&&(s=t_(n,s,function(a){return a.minWidth})),s=Math.abs(s),!e.settings.horizontalPageBreak&&s>.1/t.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),Ese(e),_se(e,t),Cse(e)}function bse(t,e){var n=t.scaleFactor(),r=e.settings.horizontalPageBreak,s=QL(t,e);e.allRows().forEach(function(a){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],A=a.cells[l.index];if(A){var d=e.hooks.didParseCell;e.callCellHooks(t,d,A,a,l,null);var h=A.padding("horizontal");A.contentWidth=w2(A.text,A.styles,t)+h;var p=w2(A.text.join(" ").split(/[^\S\u00A0]+/),A.styles,t);if(A.minReadableWidth=p+A.padding("horizontal"),typeof A.styles.cellWidth=="number")A.minWidth=A.styles.cellWidth,A.wrappedWidth=A.styles.cellWidth;else if(A.styles.cellWidth==="wrap"||r===!0)A.contentWidth>s?(A.minWidth=s,A.wrappedWidth=s):(A.minWidth=A.contentWidth,A.wrappedWidth=A.contentWidth);else{var g=10/n;A.minWidth=A.styles.minCellWidth||g,A.wrappedWidth=A.contentWidth,A.minWidth>A.wrappedWidth&&(A.wrappedWidth=A.minWidth)}}}}),e.allRows().forEach(function(a){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],A=a.cells[l.index];if(A&&A.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,A.wrappedWidth),l.minWidth=Math.max(l.minWidth,A.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,A.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},h=d.cellWidth||d.minCellWidth;h&&typeof h=="number"&&(l.minWidth=h,l.wrappedWidth=h)}A&&(A.colSpan>1&&!l.minWidth&&(l.minWidth=A.minWidth),A.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=A.minWidth))}})}function t_(t,e,n){for(var r=e,s=t.reduce(function(g,w){return g+w.wrappedWidth},0),a=0;a<t.length;a++){var i=t[a],o=i.wrappedWidth/s,l=r*o,A=i.width+l,d=n(i),h=A<d?d:A;e-=h-i.width,i.width=h}if(e=Math.round(e*1e10)/1e10,e){var p=t.filter(function(g){return e<0?g.width>n(g):!0});p.length&&(e=t_(p,e,n))}return e}function Cse(t){for(var e={},n=1,r=t.allRows(),s=0;s<r.length;s++)for(var a=r[s],i=0,o=t.columns;i<o.length;i++){var l=o[i],A=e[l.index];if(n>1)n--,delete a.cells[l.index];else if(A)A.cell.height+=a.height,n=A.cell.colSpan,delete a.cells[l.index],A.left--,A.left<=1&&delete e[l.index];else{var d=a.cells[l.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var h=r.length-s,p=d.rowSpan>h?h:d.rowSpan;e[l.index]={cell:d,left:p,row:a}}}}}function Ese(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var r=e[n],s=null,a=0,i=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(i-=1,i>1&&t.columns[o+1])a+=l.width,delete r.cells[l.index];else if(s){var A=s;delete r.cells[l.index],s=null,A.width=l.width+a}else{var A=r.cells[l.index];if(!A)continue;if(i=A.colSpan,a=0,A.colSpan>1){s=A,a+=l.width;continue}A.width=l.width+a}}}function _se(t,e){for(var n={count:0,height:0},r=0,s=t.allRows();r<s.length;r++){for(var a=s[r],i=0,o=t.columns;i<o.length;i++){var l=o[i],A=a.cells[l.index];if(A){e.applyStyles(A.styles,!0);var d=A.width-A.padding("horizontal");if(A.styles.overflow==="linebreak")A.text=e.splitTextToSize(A.text,d+1/e.scaleFactor(),{fontSize:A.styles.fontSize});else if(A.styles.overflow==="ellipsize")A.text=Vk(A.text,d,A.styles,e,"...");else if(A.styles.overflow==="hidden")A.text=Vk(A.text,d,A.styles,e,"");else if(typeof A.styles.overflow=="function"){var h=A.styles.overflow(A.text,d);typeof h=="string"?A.text=[h]:A.text=h}A.contentHeight=A.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var p=A.contentHeight/A.rowSpan;A.rowSpan>1&&n.count*n.height<p*A.rowSpan?n={height:p,count:A.rowSpan}:n&&n.count>0&&n.height>p&&(p=n.height),p>a.height&&(a.height=p)}}n.count--}}function Vk(t,e,n,r,s){return t.map(function(a){return Sse(a,e,n,r,s)})}function Sse(t,e,n,r,s){var a=1e4*r.scaleFactor();if(e=Math.ceil(e*a)/a,e>=w2(t,n,r))return t;for(;e<w2(t+s,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+s}function qL(t,e){var n=new Q0(t),r=Tse(e,n.scaleFactor()),s=new vse(e,r);return wse(n,s),n.applyStyles(n.userStyles),s}function Tse(t,e){var n=t.content,r=Nse(n.columns);if(n.head.length===0){var s=Gk(r,"head");s&&n.head.push(s)}if(n.foot.length===0){var s=Gk(r,"foot");s&&n.foot.push(s)}var a=t.settings.theme,i=t.styles;return{columns:r,head:Yb("head",n.head,r,i,a,e),body:Yb("body",n.body,r,i,a,e),foot:Yb("foot",n.foot,r,i,a,e)}}function Yb(t,e,n,r,s,a){var i={},o=e.map(function(l,A){for(var d=0,h={},p=0,g=0,w=0,b=n;w<b.length;w++){var E=b[w];if(i[E.index]==null||i[E.index].left===0)if(g===0){var B=void 0;Array.isArray(l)?B=l[E.index-p-d]:B=l[E.dataKey];var I={};typeof B=="object"&&!Array.isArray(B)&&(I=(B==null?void 0:B.styles)||{});var k=kse(t,E,A,s,r,a,I),F=new KL(B,k,t);h[E.dataKey]=F,h[E.index]=F,g=F.colSpan-1,i[E.index]={left:F.rowSpan-1,times:g}}else g--,p++;else i[E.index].left--,g=i[E.index].times,d++}return new zL(l,A,t,h)});return o}function Gk(t,e){var n={};return t.forEach(function(r){if(r.raw!=null){var s=Bse(e,r.raw);s!=null&&(n[r.dataKey]=s)}}),Object.keys(n).length>0?n:null}function Bse(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function Nse(t){return t.map(function(e,n){var r,s;return typeof e=="object"?s=(r=e.dataKey)!==null&&r!==void 0?r:n:s=n,new yse(s,e,n)})}function kse(t,e,n,r,s,a,i){var o=ase(r),l;t==="head"?l=s.headStyles:t==="body"?l=s.bodyStyles:t==="foot"&&(l=s.footStyles);var A=nu({},o.table,o[t],s.styles,l),d=s.columnStyles[e.dataKey]||s.columnStyles[e.index]||{},h=t==="body"?d:{},p=t==="body"&&n%2===0?nu({},o.alternateRow,s.alternateRowStyles):{},g=sse(a),w=nu({},g,A,p,h);return nu(w,i)}function Ise(t,e,n){var r;n===void 0&&(n={});var s=QL(t,e),a=new Map,i=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(p){var g=e.columns.find(function(w){return w.dataKey===p||w.index===p});g&&!a.has(g.index)&&(a.set(g.index,!0),i.push(g.index),o.push(e.columns[g.index]),s-=g.wrappedWidth)});for(var A=!0,d=(r=n==null?void 0:n.start)!==null&&r!==void 0?r:0;d<e.columns.length;){if(a.has(d)){d++;continue}var h=e.columns[d].wrappedWidth;if(A||s>=h)A=!1,i.push(d),o.push(e.columns[d]),s-=h;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function Fse(t,e){for(var n=[],r=0;r<e.columns.length;r++){var s=Ise(t,e,{start:r});s.columns.length&&(n.push(s),r=s.lastIndex)}return n}function WL(t,e){var n=e.settings,r=n.startY,s=n.margin,a={x:s.left,y:r},i=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=r+s.bottom+i;if(n.pageBreak==="avoid"){var l=e.body,A=l.reduce(function(p,g){return p+g.height},0);o+=A}var d=new Q0(t);(n.pageBreak==="always"||n.startY!=null&&o>d.pageSize().height)&&(YL(d),a.y=s.top),e.callWillDrawPageHooks(d,a);var h=nu({},a);e.startPageNumber=d.pageNumber(),n.horizontalPageBreak?Rse(d,e,h,a):(d.applyStyles(d.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(p){return du(d,e,p,a,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(p,g){var w=g===e.body.length-1;b2(d,e,p,w,h,a,e.columns)}),d.applyStyles(d.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(p){return du(d,e,p,a,e.columns)})),jL(d,e,h,a),e.callEndPageHooks(d,a),e.finalY=a.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function Rse(t,e,n,r){var s=Fse(t,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(A,d){t.applyStyles(t.userStyles),d>0?ag(t,e,n,r,A.columns,!0):zk(t,e,r,A.columns),Dse(t,e,n,r,A.columns),Jb(t,e,r,A.columns)});else for(var i=-1,o=s[0],l=function(){var A=i;if(o){t.applyStyles(t.userStyles);var d=o.columns;i>=0?ag(t,e,n,r,d,!0):zk(t,e,r,d),A=Kk(t,e,i+1,r,d),Jb(t,e,r,d)}var h=A-i;s.slice(1).forEach(function(p){t.applyStyles(t.userStyles),ag(t,e,n,r,p.columns,!0),Kk(t,e,i+1,r,p.columns,h),Jb(t,e,r,p.columns)}),i=A};i<e.body.length-1;)l()}function zk(t,e,n,r){var s=e.settings;t.applyStyles(t.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&e.head.forEach(function(a){return du(t,e,a,n,r)})}function Dse(t,e,n,r,s){t.applyStyles(t.userStyles),e.body.forEach(function(a,i){var o=i===e.body.length-1;b2(t,e,a,o,n,r,s)})}function Kk(t,e,n,r,s,a){t.applyStyles(t.userStyles),a=a??e.body.length;var i=Math.min(n+a,e.body.length),o=-1;return e.body.slice(n,i).forEach(function(l,A){var d=n+A===e.body.length-1,h=$L(t,e,d,r);l.canEntireRowFit(h,s)&&(du(t,e,l,r,s),o=n+A)}),o}function Jb(t,e,n,r){var s=e.settings;t.applyStyles(t.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&e.foot.forEach(function(a){return du(t,e,a,n,r)})}function Use(t,e,n){var r=n.getLineHeight(t.styles.fontSize),s=t.padding("vertical"),a=Math.floor((e-s)/r);return Math.max(0,a)}function Lse(t,e,n,r){var s={};t.spansMultiplePages=!0,t.height=0;for(var a=0,i=0,o=n.columns;i<o.length;i++){var l=o[i],A=t.cells[l.index];if(A){Array.isArray(A.text)||(A.text=[A.text]);var d=new KL(A.raw,A.styles,A.section);d=nu(d,A),d.text=[];var h=Use(A,e,r);A.text.length>h&&(d.text=A.text.splice(h,A.text.length));var p=r.scaleFactor(),g=r.getLineHeightFactor();A.contentHeight=A.getContentHeight(p,g),A.contentHeight>=e&&(A.contentHeight=e,d.styles.minCellHeight-=e),A.contentHeight>t.height&&(t.height=A.contentHeight),d.contentHeight=d.getContentHeight(p,g),d.contentHeight>a&&(a=d.contentHeight),s[l.index]=d}}var w=new zL(t.raw,-1,t.section,s,!0);w.height=a;for(var b=0,E=n.columns;b<E.length;b++){var l=E[b],d=w.cells[l.index];d&&(d.height=w.height);var A=t.cells[l.index];A&&(A.height=t.height)}return w}function Mse(t,e,n,r){var s=t.pageSize().height,a=r.settings.margin,i=a.top+a.bottom,o=s-i;e.section==="body"&&(o-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,t),A=l<n;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!A)return!1;var d=e.hasRowSpan(r.columns),h=e.getMaxCellHeight(r.columns)>o;return h?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||r.settings.rowPageBreak==="avoid")}function b2(t,e,n,r,s,a,i){var o=$L(t,e,r,a);if(n.canEntireRowFit(o,i))du(t,e,n,a,i);else if(Mse(t,n,o,e)){var l=Lse(n,o,e,t);du(t,e,n,a,i),ag(t,e,s,a,i),b2(t,e,l,r,s,a,i)}else ag(t,e,s,a,i),b2(t,e,n,r,s,a,i)}function du(t,e,n,r,s){r.x=e.settings.margin.left;for(var a=0,i=s;a<i.length;a++){var o=i[a],l=n.cells[o.index];if(!l){r.x+=o.width;continue}t.applyStyles(l.styles),l.x=r.x,l.y=r.y;var A=e.callCellHooks(t,e.hooks.willDrawCell,l,n,o,r);if(A===!1){r.x+=o.width;continue}Pse(t,l,r);var d=l.getTextPos();LL(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,n,o,r),r.x+=o.width}r.y+=n.height}function Pse(t,e,n){var r=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var s=OL(r.lineWidth,r.fillColor);s&&t.rect(e.x,n.y,e.width,e.height,s)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),jse(t,e,n,r.lineWidth))}function jse(t,e,n,r){var s,a,i,o;r.top&&(s=n.x,a=n.y,i=n.x+e.width,o=n.y,r.right&&(i+=.5*r.right),r.left&&(s-=.5*r.left),l(r.top,s,a,i,o)),r.bottom&&(s=n.x,a=n.y+e.height,i=n.x+e.width,o=n.y+e.height,r.right&&(i+=.5*r.right),r.left&&(s-=.5*r.left),l(r.bottom,s,a,i,o)),r.left&&(s=n.x,a=n.y,i=n.x,o=n.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.left,s,a,i,o)),r.right&&(s=n.x+e.width,a=n.y,i=n.x+e.width,o=n.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.right,s,a,i,o));function l(A,d,h,p,g){t.getDocument().setLineWidth(A),t.getDocument().line(d,h,p,g,"S")}}function $L(t,e,n,r){var s=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&n)&&(s+=e.getFootHeight(e.columns)),t.pageSize().height-r.y-s}function ag(t,e,n,r,s,a){s===void 0&&(s=[]),a===void 0&&(a=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(o){return du(t,e,o,r,s)}),e.callEndPageHooks(t,r);var i=e.settings.margin;jL(t,e,n,r),YL(t),e.pageNumber++,r.x=i.left,r.y=i.top,n.y=i.top,e.callWillDrawPageHooks(t,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return du(t,e,o,r,s)}),t.applyStyles(t.userStyles))}function YL(t){var e=t.pageNumber();t.setPage(e+1);var n=t.pageNumber();return n===e?(t.addPage(),!0):!1}function Ose(t){t.API.autoTable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],s=GL(this,r),a=qL(this,s);return WL(this,a),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,n,r,s){LL(e,n,r,s,this)},t.API.autoTableSetDefaults=function(e){return Q0.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,n){Q0.setDefaults(e,n)},t.API.autoTableHtmlToJson=function(e,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new Q0(this),a=VL(s,e,window,n,!1),i=a.head,o=a.body,l=((r=i[0])===null||r===void 0?void 0:r.map(function(A){return A.content}))||[];return{columns:l,rows:o,data:o}}}var Xb;function Tl(t,e){var n=GL(t,e),r=qL(t,n);WL(t,r)}try{if(typeof window<"u"&&window){var qk=window,Wk=qk.jsPDF||((Xb=qk.jspdf)===null||Xb===void 0?void 0:Xb.jsPDF);Wk&&Ose(Wk)}}catch(t){console.error("Could not apply autoTable plugin",t)}const Qse="usuariosLiceo",$k="rubricasInteractivas",Yk="evaluacionesPruebas",Jk="rubricasEstaticas",Hse=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],Xk={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},Vv=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},Vse=({open:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):u.jsxs(u.Fragment,{children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),Gse=({item:t,index:e,showAnswers:n})=>{const r=ee.useMemo(()=>t.tipo==="Términos pareados"?[...t.pares.map(s=>s.definicion)].sort(()=>Math.random()-.5):[],[t]);return u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[e+1,". ",t.pregunta," (",t.puntaje," pts)"]}),t.habilidadBloom&&u.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:t.habilidadBloom})]}),t.tipo==="Selección múltiple"&&u.jsx("div",{className:"ml-4 mt-2 space-y-2",children:t.opciones.map((s,a)=>{const i=n&&a===t.respuestaCorrecta;return u.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[u.jsx("div",{className:"w-5 h-5 border rounded-full"}),u.jsxs("span",{children:[String.fromCharCode(65+a),") ",s]})]},a)})}),t.tipo==="Desarrollo"&&u.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),t.tipo==="Verdadero o Falso"&&u.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[u.jsx("span",{children:"V ___ F ___"}),n&&u.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",t.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),t.tipo==="Términos pareados"&&u.jsxs("div",{className:"mt-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),u.jsx("div",{className:"space-y-2",children:t.pares.map((s,a)=>u.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[a+1,". ",s.concepto]},a))})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),u.jsx("div",{className:"space-y-2",children:r.map((s,a)=>u.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:s},a))})]})]}),n&&u.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[u.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),u.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:t.pares.map((s,a)=>u.jsxs("li",{children:[u.jsx("strong",{children:s.concepto})," → ",s.definicion]},a))})]})]}),t.tipo==="Comprensión de lectura"&&u.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[u.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:t.texto}),t.preguntas.map((s,a)=>{if(s.tipo==="Selección múltiple"){const i=s;return u.jsxs("div",{className:"pt-2",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[a+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&u.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),u.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,l)=>{const A=n&&l===i.respuestaCorrecta;return u.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${A?"bg-green-100 dark:bg-green-900/50":""}`,children:[u.jsx("div",{className:"w-5 h-5 border rounded-full"}),u.jsxs("span",{children:[String.fromCharCode(65+l),") ",o]})]},l)})})]},s.id)}if(s.tipo==="Desarrollo"){const i=s;return u.jsxs("div",{className:"pt-2",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[a+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&u.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),u.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},s.id)}return null})]})]},t.id)},zse=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState(null),[s,a]=ee.useState(!1),[i,o]=ee.useState(!1),[l,A]=ee.useState(null),[d,h]=ee.useState(!1),p={nombre:"",asignatura:Ho[0],nivel:f2[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[g,w]=ee.useState(p);ee.useEffect(()=>{try{const N=localStorage.getItem(Yk);N&&e(JSON.parse(N))}catch(N){console.error("Error loading tests from localStorage",N)}},[]);const b=N=>{e(N),localStorage.setItem(Yk,JSON.stringify(N))},E=N=>{const{name:T,value:V}=N.target;w(M=>({...M,[T]:V}))},B=N=>{w(T=>{const V={...T.tiposActividad};return V[N]?delete V[N]:V[N]=Xk[N][0],{...T,tiposActividad:V}})},I=(N,T)=>{w(V=>({...V,tiposActividad:{...V.tiposActividad,[N]:T}}))},k=N=>{w(T=>{const V=T.selectedNee.includes(N)?T.selectedNee.filter(M=>M!==N):[...T.selectedNee,N];return{...T,selectedNee:V}})},F=async N=>{if(N.preventDefault(),!g.nombre.trim()||!g.contenido.trim()||Object.keys(g.tiposActividad).length===0){A("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}a(!0),A(null);const T=Object.entries(g.tiposActividad).map(([U,O])=>`- ${O} ítem(s) de tipo '${U}'`).join(`
`),V=g.isNee&&g.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${g.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",M=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${g.nombre}
            - Asignatura: ${g.asignatura}
            - Nivel: ${g.nivel}
            - Contenido a evaluar: "${g.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${T}
            - Nivel de Dificultad General: ${g.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${V}

            Tu respuesta DEBE ser un único objeto JSON que contenga:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
                - 'id': Un UUID.
                - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
                - 'instrucciones': Instrucciones para esa actividad específica.
                - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                    - 'id': Un UUID.
                    - 'tipo': El tipo de ítem.
                    - 'pregunta': El enunciado de la pregunta.
                    - 'puntaje': Un puntaje numérico.
                    - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                    - Campos adicionales según el tipo:
                        - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                        - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                        - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                        - Para 'Comprensión de lectura': 'texto' (string con el texto) y 'preguntas' (un array de sub-preguntas que pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener también 'habilidadBloom').
                        - Para 'Desarrollo': no necesita campos adicionales.
        `;try{mo("Evaluación - Pruebas");const O=await new Sa({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:M,config:{responseMimeType:"application/json"}}),G=JSON.parse(O.text);let ie=0;G.actividades.forEach(q=>{q.items.forEach(se=>{ie+=se.puntaje||0,se.tipo==="Comprensión de lectura"&&se.preguntas.forEach(Z=>{ie+=Z.puntaje||0})})});const K={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:g.nombre,asignatura:g.asignatura,nivel:g.nivel,contenidoOriginal:g.contenido,tiposActividadOriginal:g.tiposActividad,objetivo:G.objetivo,instruccionesGenerales:G.instruccionesGenerales,puntajeIdeal:ie,actividades:G.actividades,dificultad:g.dificultad,adaptacionNEE:g.isNee?g.selectedNee:void 0};r(K),h(!1)}catch(U){console.error(U),A("Error al generar la prueba con IA. Inténtelo de nuevo.")}finally{a(!1)}},D=()=>{n&&(b([n,...t.filter(N=>N.id!==n.id)]),alert("Prueba guardada con éxito."))},P=N=>{window.confirm("¿Eliminar esta prueba?")&&(b(t.filter(T=>T.id!==N)),(n==null?void 0:n.id)===N&&r(null))},S=async N=>{o(!0);const T=new sn("p","mm","a4"),V=20,M=T.internal.pageSize.getHeight(),U=T.internal.pageSize.getWidth(),O=U-V*2;let G=V;const ie=se=>{se.setFillColor(230,230,230),se.rect(0,0,U,25,"F"),se.setFontSize(9),se.setTextColor(0,0,0),se.text("LICEO INDUSTRIAL DE RECOLETA",V,15,{align:"left"}),se.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",U-V,15,{align:"right"})};ie(T),G=30,T.setTextColor(0,0,0),T.setFont("helvetica","bold"),T.setFontSize(16),T.text(N.nombre,U/2,G,{align:"center"}),G+=10,Tl(T,{startY:G,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},N.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},N.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},N.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:N.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:N.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:se=>{ie(T)}}),G=T.lastAutoTable.finalY+10;const K=se=>{G+se>M-V&&(T.addPage(),ie(T),G=V+15,T.setTextColor(0,0,0))},q=(se,Z)=>{T.setFont("helvetica",Z.isBold?"bold":"normal"),T.setFontSize(Z.fontSize);const X=Array.isArray(se)?se.join(`
`):se;return T.getTextDimensions(X,{maxWidth:Z.width}).h};for(const se of N.actividades){let Z=q(se.titulo,{fontSize:12,width:O,isBold:!0})+q(se.instrucciones,{fontSize:10,width:O})+12;K(Z),T.setFont("helvetica","bold"),T.setFontSize(12),T.setTextColor(0,0,0),T.text(se.titulo,V,G),G+=8,T.setFont("helvetica","normal"),T.setFontSize(10);const X=T.splitTextToSize(se.instrucciones,O);T.text(X,V,G),G+=X.length*(10*.35*1.15)+4;for(const[de,j]of se.items.entries()){let W=0;const J=`${de+1}. ${j.pregunta} (${j.puntaje} pts)`;switch(W+=q(J,{fontSize:10,width:O,isBold:!0}),j.tipo){case"Selección múltiple":j.opciones.forEach(ue=>{W+=q(ue,{fontSize:10,width:O-5})+3}),W+=7;break;case"Verdadero o Falso":W+=10;break;case"Desarrollo":W+=30;break;case"Términos pareados":W+=j.pares.length*12+20;break;case"Comprensión de lectura":const oe=j;W+=q(oe.texto,{fontSize:10,width:O-10})+10,oe.preguntas.forEach(ue=>{const me=`${ue.pregunta} (${ue.puntaje} pts)`;W+=q(me,{fontSize:10,width:O-5,isBold:!0}),ue.tipo==="Selección múltiple"?(ue.opciones.forEach(ge=>{W+=q(ge,{fontSize:10,width:O-10})+3}),W+=7):ue.tipo==="Desarrollo"&&(W+=30),W+=5}),W+=15;break}K(W),T.setFont("helvetica","bold"),T.setFontSize(10),T.setTextColor(0,0,0);const ne=T.splitTextToSize(J,O);if(T.text(ne,V,G),G+=ne.length*5+4,T.setFont("helvetica","normal"),j.tipo==="Selección múltiple")j.opciones.forEach((oe,ue)=>{T.text(`${String.fromCharCode(65+ue)}) ${oe}`,V+5,G),G+=7});else if(j.tipo==="Verdadero o Falso")T.text("V ______   F ______",V+5,G),G+=10;else if(j.tipo==="Desarrollo")T.setDrawColor(200,200,200),T.setFillColor(245,245,245),T.rect(V,G,O,25,"FD"),G+=30;else if(j.tipo==="Términos pareados"){const oe=[...j.pares.map(me=>me.definicion)].sort(()=>Math.random()-.5),ue=j.pares.map((me,ge)=>[`${ge+1}. ${me.concepto}`,`(   ) ${oe[ge]}`]);Tl(T,{startY:G,head:[["Columna A: Concepto","Columna B: Definición"]],body:ue,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:me=>ie(T)}),G=T.lastAutoTable.finalY+10}else if(j.tipo==="Comprensión de lectura"){const oe=j;T.setFillColor(240,240,240),T.setDrawColor(200,200,200);const ue=T.splitTextToSize(oe.texto,O-10),me=ue.length*(10*.35*1.15)+8;T.rect(V,G,O,me,"FD"),G+=4,T.setFont("helvetica","normal"),T.setFontSize(10),T.setTextColor(0,0,0),T.text(ue,V+5,G),G+=me;for(const[ge,ke]of oe.preguntas.entries()){const ve=`${ge+1}. ${ke.pregunta} (${ke.puntaje} pts)`;T.setFont("helvetica","bold");const ae=T.splitTextToSize(ve,O-5);T.text(ae,V+5,G),G+=ae.length*5+4,T.setFont("helvetica","normal"),ke.tipo==="Selección múltiple"?ke.opciones.forEach((Re,Je)=>{T.text(`${String.fromCharCode(65+Je)}) ${Re}`,V+10,G),G+=7}):ke.tipo==="Desarrollo"&&(T.setDrawColor(200,200,200),T.setFillColor(245,245,245),T.rect(V+5,G,O-5,25,"FD"),G+=30)}}G+=5}}T.save(`${N.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return n?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("button",{onClick:()=>r(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>h(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[u.jsx(Vse,{open:!d})," ",u.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),u.jsx("button",{onClick:D,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),u.jsxs("button",{onClick:()=>S(n),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":u.jsx(LU,{})," PDF"]})]})]}),u.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[u.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[u.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),u.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),u.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:n.nombre}),u.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Asignatura:"})," ",n.asignatura]}),u.jsxs("p",{className:"text-right",children:[u.jsx("strong",{children:"Puntaje Ideal:"})," ",n.puntajeIdeal]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Nivel:"})," ",n.nivel]})]}),u.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[u.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",n.dificultad||"Intermedio"]}),n.adaptacionNEE&&n.adaptacionNEE.length>0&&u.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",n.adaptacionNEE.join(", ")]})]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",n.objetivo]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Instrucciones Generales:"})," ",n.instruccionesGenerales]})]}),n.actividades.map(N=>u.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[u.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:N.titulo}),u.jsx("p",{className:"italic text-sm mb-4",children:N.instrucciones}),u.jsx("div",{className:"space-y-6",children:N.items.map((T,V)=>u.jsx(Gse,{item:T,index:V,showAnswers:d},T.id))})]},N.id))]})]}):u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),u.jsxs("form",{onSubmit:F,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",name:"nombre",value:g.nombre,onChange:E,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),u.jsx("div",{}),u.jsx("select",{name:"asignatura",value:g.asignatura,onChange:E,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Ho.map(N=>u.jsx("option",{children:N},N))}),u.jsx("select",{name:"nivel",value:g.nivel,onChange:E,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:f2.map(N=>u.jsx("option",{children:N},N))})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),u.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((N,T)=>u.jsx("button",{type:"button",onClick:()=>w(V=>({...V,dificultad:N})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${T===0?"rounded-l-lg":""} ${T===2?"rounded-r-lg":""}
                                            ${g.dificultad===N?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:N},N))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:g.isNee,onChange:N=>w(T=>({...T,isNee:N.target.checked,selectedNee:N.target.checked?T.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),u.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),g.isNee&&u.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:h2.map(N=>u.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:g.selectedNee.includes(N),onChange:()=>k(N),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),u.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:N})]},N))})]})]})]}),u.jsx("textarea",{name:"contenido",value:g.contenido,onChange:E,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("div",{className:"space-y-3",children:Hse.map(N=>u.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:!!g.tiposActividad[N],onChange:()=>B(N),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),u.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:N})]}),g.tiposActividad[N]&&u.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[u.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),Xk[N].map(T=>u.jsx("button",{type:"button",onClick:()=>I(N,T),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${g.tiposActividad[N]===T?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:T},T))]})]},N))}),l&&u.jsx("p",{className:"text-red-500 text-sm",children:l}),u.jsx("div",{className:"text-right",children:u.jsx("button",{type:"submit",disabled:s,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:s?"Generando...":"Generar Prueba"})})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),u.jsx("div",{className:"space-y-2",children:t.length>0?t.map(N=>u.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:N.nombre}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[N.asignatura," - ",N.nivel," (",new Date(N.fechaCreacion).toLocaleDateString(),")"]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>r(N),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),u.jsx("button",{onClick:()=>P(N.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},N.id)):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},Kse=({rubricas:t,onUpdate:e})=>{const[n,r]=ee.useState(null),[s,a]=ee.useState("list"),[i,o]=ee.useState(!1),[l,A]=ee.useState(""),d=async(F,D)=>{if(!F.trim()||!D.trim()){alert("El título y la descripción son obligatorios.");return}o(!0);const P=`Crea una rúbrica de evaluación detallada sobre "${F}" con el propósito de "${D}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado.`,S={type:Tt.ARRAY,items:{type:Tt.OBJECT,properties:{dimension:{type:Tt.STRING},insuficiente:{type:Tt.STRING},suficiente:{type:Tt.STRING},competente:{type:Tt.STRING},avanzado:{type:Tt.STRING}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{mo("Evaluación - Rúbricas");const T=await new Sa({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:P,config:{responseMimeType:"application/json",responseSchema:S}}),V=JSON.parse(T.text),M={id:crypto.randomUUID(),titulo:F,descripcion:D,fechaCreacion:new Date().toISOString(),dimensiones:V.map(U=>({id:crypto.randomUUID(),nombre:U.dimension,niveles:{insuficiente:U.insuficiente,suficiente:U.suficiente,competente:U.competente,avanzado:U.avanzado}}))};r(M)}catch(N){console.error(N),alert("Error al generar la rúbrica con IA.")}finally{o(!1)}},h=async()=>{if(!l.trim()||!n)return;const F=crypto.randomUUID(),D={id:F,nombre:l,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};r(N=>N?{...N,dimensiones:[...N.dimensiones,D]}:null),A("");const P=`Para una rúbrica sobre "${n.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${l}". Considera las dimensiones existentes como contexto: ${n.dimensiones.map(N=>N.nombre).join(", ")}.`,S={type:Tt.OBJECT,properties:{insuficiente:{type:Tt.STRING},suficiente:{type:Tt.STRING},competente:{type:Tt.STRING},avanzado:{type:Tt.STRING}},required:["insuficiente","suficiente","competente","avanzado"]};try{mo("Evaluación - Rúbricas (Añadir Dimensión)");const T=await new Sa({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:P,config:{responseMimeType:"application/json",responseSchema:S}}),V=JSON.parse(T.text);r(M=>M?{...M,dimensiones:M.dimensiones.map(U=>U.id===F?{...U,niveles:V,isLoading:!1}:U)}:null)}catch(N){console.error("Error generating dimension descriptors:",N),alert("No se pudieron generar los descriptores."),r(T=>T?{...T,dimensiones:T.dimensiones.filter(V=>V.id!==F)}:null)}},p=()=>{if(!n)return;const D=t.some(P=>P.id===n.id)?t.map(P=>P.id===n.id?n:P):[n,...t];e(D),a("list"),r(null)},g=F=>{r(F),a("form")},w=F=>{window.confirm("¿Eliminar esta rúbrica?")&&e(t.filter(D=>D.id!==F))},b=()=>{r({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),a("form")},E=(F,D,P)=>{n&&r(S=>S?{...S,dimensiones:S.dimensiones.map(N=>N.id!==F?N:D==="nombre"?{...N,nombre:P}:{...N,niveles:{...N.niveles,[D]:P}})}:null)},B=(F,D)=>{r(P=>P?{...P,[F]:D}:null)},I=F=>{n&&r(D=>D?{...D,dimensiones:D.dimensiones.filter(P=>P.id!==F)}:null)},k=()=>{if(!n)return null;const F="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",D=`${F} resize-none text-sm`;return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),u.jsx("button",{onClick:()=>a("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),u.jsx("input",{value:n.titulo,onChange:P=>B("titulo",P.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${F} mt-1`})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),u.jsx("textarea",{value:n.descripcion,onChange:P=>B("descripcion",P.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${F} mt-1`})]})]}),n.dimensiones.length===0&&u.jsx("div",{className:"text-center py-4",children:u.jsx("button",{onClick:()=>d(n.titulo,n.descripcion),disabled:i||!n.titulo||!n.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:i?"Generando...":"✨ Generar Rúbrica con IA"})}),n.dimensiones.length>0&&u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),u.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:u.jsxs("table",{className:"min-w-full text-sm",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:u.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(P=>u.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:P},P))})}),u.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:n.dimensiones.map(P=>u.jsxs("tr",{children:[u.jsx("td",{className:"p-2 w-1/5",children:u.jsx("textarea",{value:P.nombre,onChange:S=>E(P.id,"nombre",S.target.value),rows:4,className:D})}),Object.keys(P.niveles).map(S=>u.jsx("td",{className:"p-2 w-1/5",children:P.isLoading?u.jsx("div",{className:"flex justify-center items-center h-full",children:u.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):u.jsx("textarea",{value:P.niveles[S],onChange:N=>E(P.id,S,N.target.value),rows:4,className:D})},S)),u.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:u.jsx("button",{onClick:()=>I(P.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},P.id))})]})}),u.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[u.jsxs("div",{className:"flex-grow",children:[u.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),u.jsx("input",{value:l,onChange:P=>A(P.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${F} mt-1`})]}),u.jsx("button",{onClick:h,disabled:!l.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),u.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:u.jsx("button",{onClick:p,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return s==="list"?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),u.jsx("button",{onClick:b,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),t.length>0?t.map(F=>u.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:F.titulo}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:F.descripcion})]}),u.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[u.jsx("button",{onClick:()=>g(F),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),u.jsx("button",{onClick:()=>w(F.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},F.id)):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):k()},qse=({allUsers:t,rubricasEstaticas:e})=>{const[n,r]=ee.useState([]),[s,a]=ee.useState(null),[i,o]=ee.useState(null),[l,A]=ee.useState({rubricaEstaticaId:"",curso:""}),[d,h]=ee.useState(null);ee.useEffect(()=>{try{const k=localStorage.getItem($k);k&&r(JSON.parse(k))}catch(k){console.error("Error loading interactive rubrics",k)}},[]);const p=k=>{r(k),localStorage.setItem($k,JSON.stringify(k))},g=k=>{k.preventDefault();const F=e.find(P=>P.id===l.rubricaEstaticaId);if(!F||!l.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const D={id:crypto.randomUUID(),nombre:F.titulo,curso:l.curso,asignatura:"N/A",rubricaEstaticaId:F.id,resultados:{}};p([D,...n]),A({rubricaEstaticaId:"",curso:""})},w=k=>{a(k),o(JSON.parse(JSON.stringify(k)))},b=(k,F,D)=>{i&&o(P=>{if(!P)return null;const S=JSON.parse(JSON.stringify(P));return S.resultados[k]||(S.resultados[k]={puntajes:{},feedback:""}),S.resultados[k].puntajes[F]=D,S})},E=()=>{i&&(p(n.map(k=>k.id===i.id?i:k)),a(i),alert("Cambios guardados."))},B=ee.useCallback(k=>{const F=i,D=e.find(M=>M.id===(F==null?void 0:F.rubricaEstaticaId));if(!F||!D)return{score:0,maxScore:0,grade:"N/A"};const P=D.dimensiones.length*4,S=F.resultados[k];if(!S)return{score:0,maxScore:P,grade:"1.0"};const N=Object.values(S.puntajes).reduce((M,U)=>M+U,0),T=1+6*(N/P),V=P>0?T.toFixed(1):"1.0";return{score:N,maxScore:P,grade:V}},[i,e]),I=async k=>{if(!i)return;const F=e.find(N=>N.id===i.rubricaEstaticaId),D=i.resultados[k];if(!F||!D||Object.keys(D.puntajes).length===0)return;h(k);const S=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${F.dimensiones.map(N=>`${N.nombre}: ${D.puntajes[N.nombre]||"N/A"}/4`).join("; ")}. Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{mo("Evaluación - Rúbricas Interactivas (Feedback)");const T=await new Sa({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:S});o(V=>{if(!V)return null;const M=JSON.parse(JSON.stringify(V));return M.resultados[k].feedback=T.text.replace(/(\*\*|\*)/g,""),M})}catch(N){console.error(N),alert("Error al generar feedback.")}finally{h(null)}};if(s&&i){const k=e.find(D=>D.id===s.rubricaEstaticaId),F=t.filter(D=>D.profile===nn.ESTUDIANTE&&Vv(D.curso||"")===s.curso).map(D=>D.nombreCompleto).sort();return k?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:s.nombre}),u.jsx("p",{className:"text-slate-500",children:s.curso})]}),u.jsx("button",{onClick:()=>a(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full border-collapse",children:[u.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),k.dimensiones.map(D=>u.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:D.nombre},D.id)),u.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),u.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),u.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),u.jsx("tbody",{children:F.map(D=>{var T;const{score:P,maxScore:S,grade:N}=B(D);return u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[u.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:D}),k.dimensiones.map(V=>u.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:u.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(M=>{var U;return u.jsx("button",{onClick:()=>b(D,V.nombre,M),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((U=i.resultados[D])==null?void 0:U.puntajes[V.nombre])===M?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:M},M)})})},V.id)),u.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[P,"/",S]}),u.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:N}),u.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:u.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[u.jsx("p",{className:"text-xs w-full",children:((T=i.resultados[D])==null?void 0:T.feedback)||"Sin generar"}),u.jsx("button",{onClick:()=>I(D),disabled:d===D,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===D?"...":"Generar IA"})]})})]},D)})})]})}),u.jsx("div",{className:"mt-6 flex justify-end",children:u.jsx("button",{onClick:E,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):u.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",u.jsx("button",{onClick:()=>a(null),children:"Volver"})]})}return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),u.jsxs("form",{onSubmit:g,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[u.jsxs("select",{value:l.rubricaEstaticaId,onChange:k=>A({...l,rubricaEstaticaId:k.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[u.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),e.map(k=>u.jsx("option",{value:k.id,children:k.titulo},k.id))]}),u.jsxs("select",{value:l.curso,onChange:k=>A({...l,curso:k.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[u.jsx("option",{value:"",children:"Seleccione un Curso"}),$s.map(k=>u.jsx("option",{value:k,children:k},k))]}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),u.jsx("div",{className:"space-y-2",children:n.map(k=>u.jsxs("button",{onClick:()=>w(k),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[u.jsx("p",{className:"font-semibold",children:k.nombre}),u.jsx("p",{className:"text-sm text-slate-500",children:k.curso})]},k.id))})]})]})},Wse=({allUsers:t})=>{const[e,n]=ee.useState(""),r=ee.useMemo(()=>Array.from(new Set(t.filter(a=>a.profile===nn.ESTUDIANTE&&a.curso).map(a=>Vv(a.curso)))).sort(),[t]),s=ee.useMemo(()=>{const a=t.filter(i=>i.profile===nn.ESTUDIANTE);return e?a.filter(i=>Vv(i.curso||"")===e).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):a.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[t,e]);return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",u.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),u.jsxs("select",{id:"curso-filter",value:e,onChange:a=>n(a.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),r.map(a=>u.jsx("option",{value:a,children:a},a))]})]}),u.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:s.length>0?s.map(a=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:a.nombreCompleto}),u.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:Vv(a.curso||"")}),u.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:a.email})]},a.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},$se=()=>{const[t,e]=ee.useState("pruebas"),[n,r]=ee.useState([]),[s,a]=ee.useState([]);ee.useEffect(()=>{const l=()=>{try{const A=localStorage.getItem(Qse);A&&r(JSON.parse(A));const d=localStorage.getItem(Jk);d&&a(JSON.parse(d))}catch(A){console.error("Error loading data for evaluation module",A)}};return l(),window.addEventListener("storage",l),()=>window.removeEventListener("storage",l)},[]);const i=l=>{a(l),localStorage.setItem(Jk,JSON.stringify(l)),window.dispatchEvent(new Event("storage"))},o=({tabName:l,label:A})=>u.jsx("button",{onClick:()=>e(l),className:`${t===l?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:A});return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:u.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[u.jsx(o,{tabName:"pruebas",label:"Pruebas y Guías"}),u.jsx(o,{tabName:"rubricas",label:"Generador de Rúbricas"}),u.jsx(o,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),u.jsx(o,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),u.jsxs("div",{className:"mt-6",children:[t==="pruebas"&&u.jsx(zse,{}),t==="rubricas"&&u.jsx(Kse,{rubricas:s,onUpdate:i}),t==="rubricasInteractivas"&&u.jsx(qse,{allUsers:n,rubricasEstaticas:s}),t==="nominas"&&u.jsx(Wse,{allUsers:n})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var C2={};C2.version="0.18.5";var JL=1252,Yse=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],z5={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},K5=function(t){Yse.indexOf(t)!=-1&&(JL=z5[0]=t)};function Jse(){K5(1252)}var cc=function(t){K5(t)};function q5(){cc(1200),Jse()}function Zk(t){for(var e=[],n=0,r=t.length;n<r;++n)e[n]=t.charCodeAt(n);return e}function Xse(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t.charCodeAt(2*n)+(t.charCodeAt(2*n+1)<<8));return e.join("")}function XL(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t.charCodeAt(2*n+1)+(t.charCodeAt(2*n)<<8));return e.join("")}var Mp=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1);return e==255&&n==254?Xse(t.slice(2)):e==254&&n==255?XL(t.slice(2)):e==65279?t.slice(1):t},M1=function(e){return String.fromCharCode(e)},eI=function(e){return String.fromCharCode(e)},Bg,wd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Ng(t){for(var e="",n=0,r=0,s=0,a=0,i=0,o=0,l=0,A=0;A<t.length;)n=t.charCodeAt(A++),a=n>>2,r=t.charCodeAt(A++),i=(n&3)<<4|r>>4,s=t.charCodeAt(A++),o=(r&15)<<2|s>>6,l=s&63,isNaN(r)?o=l=64:isNaN(s)&&(l=64),e+=wd.charAt(a)+wd.charAt(i)+wd.charAt(o)+wd.charAt(l);return e}function Vo(t){var e="",n=0,r=0,s=0,a=0,i=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var A=0;A<t.length;)a=wd.indexOf(t.charAt(A++)),i=wd.indexOf(t.charAt(A++)),n=a<<2|i>>4,e+=String.fromCharCode(n),o=wd.indexOf(t.charAt(A++)),r=(i&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(r)),l=wd.indexOf(t.charAt(A++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var zn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),vu=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,n){return n?new Buffer(e,n):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Kd(t){return zn?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function tI(t){return zn?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var jo=function(e){return zn?vu(e,"binary"):e.split("").map(function(n){return n.charCodeAt(0)&255})};function Ny(t){if(typeof ArrayBuffer>"u")return jo(t);for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r!=t.length;++r)n[r]=t.charCodeAt(r)&255;return e}function Xd(t){if(Array.isArray(t))return t.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],n=0;n<t.length;++n)e[n]=String.fromCharCode(t[n]);return e.join("")}function Zse(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function W5(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return W5(new Uint8Array(t));for(var e=new Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e}var Oa=zn?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:vu(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,n=0;for(e=0;e<t.length;++e)n+=t[e].length;var r=new Uint8Array(n),s=0;for(e=0,n=0;e<t.length;n+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)r.set(t[e],n);else{if(typeof t[e]=="string")throw"wtf";r.set(new Uint8Array(t[e]),n)}return r}return[].concat.apply([],t.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function eae(t){for(var e=[],n=0,r=t.length+250,s=Kd(t.length+255),a=0;a<t.length;++a){var i=t.charCodeAt(a);if(i<128)s[n++]=i;else if(i<2048)s[n++]=192|i>>6&31,s[n++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=t.charCodeAt(++a)&1023;s[n++]=240|i>>8&7,s[n++]=128|i>>2&63,s[n++]=128|o>>6&15|(i&3)<<4,s[n++]=128|o&63}else s[n++]=224|i>>12&15,s[n++]=128|i>>6&63,s[n++]=128|i&63;n>r&&(e.push(s.slice(0,n)),n=0,s=Kd(65535),r=65530)}return e.push(s.slice(0,n)),Oa(e)}var zi=/\u0000/g,Pp=/[\u0001-\u0006]/g;function H0(t){for(var e="",n=t.length-1;n>=0;)e+=t.charAt(n--);return e}function Ac(t,e){var n=""+t;return n.length>=e?n:Is("0",e-n.length)+n}function $5(t,e){var n=""+t;return n.length>=e?n:Is(" ",e-n.length)+n}function E2(t,e){var n=""+t;return n.length>=e?n:n+Is(" ",e-n.length)}function tae(t,e){var n=""+Math.round(t);return n.length>=e?n:Is("0",e-n.length)+n}function nae(t,e){var n=""+t;return n.length>=e?n:Is("0",e-n.length)+n}var nI=Math.pow(2,32);function Jh(t,e){if(t>nI||t<-nI)return tae(t,e);var n=Math.round(t);return nae(n,e)}function _2(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var rI=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Zb=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function rae(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var gn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},sI={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},sae={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function S2(t,e,n){for(var r=t<0?-1:1,s=t*r,a=0,i=1,o=0,l=1,A=0,d=0,h=Math.floor(s);A<e&&(h=Math.floor(s),o=h*i+a,d=h*A+l,!(s-h<5e-8));)s=1/(s-h),a=i,i=o,l=A,A=d;if(d>e&&(A>e?(d=l,o=a):(d=A,o=i)),!n)return[0,r*o,d];var p=Math.floor(r*o/d);return[p,r*o-p*d,d]}function Df(t,e,n){if(t>2958465||t<0)return null;var r=t|0,s=Math.floor(86400*(t-r)),a=0,i=[],o={D:r,T:s,u:86400*(t-r)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++r,++o.D)),r===60)i=n?[1317,10,29]:[1900,2,29],a=3;else if(r===0)i=n?[1317,8,29]:[1900,1,0],a=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),r<60&&(a=(a+6)%7),n&&(a=Aae(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var ZL=new Date(1899,11,31,0,0,0),aae=ZL.getTime(),iae=new Date(1900,2,1,0,0,0);function e8(t,e){var n=t.getTime();return e?n-=1461*24*60*60*1e3:t>=iae&&(n+=1440*60*1e3),(n-(aae+(t.getTimezoneOffset()-ZL.getTimezoneOffset())*6e4))/(1440*60*1e3)}function Y5(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function oae(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function lae(t){var e=t<0?12:11,n=Y5(t.toFixed(12));return n.length<=e||(n=t.toPrecision(10),n.length<=e)?n:t.toExponential(5)}function cae(t){var e=Y5(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function kg(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),n;return e>=-4&&e<=-1?n=t.toPrecision(10+e):Math.abs(e)<=9?n=lae(t):e===10?n=t.toFixed(10).substr(0,12):n=cae(t),Y5(oae(n.toUpperCase()))}function th(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):kg(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Nl(14,e8(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function Aae(t,e){e[0]-=581;var n=t.getDay();return t<60&&(n=(n+6)%7),n}function uae(t,e,n,r){var s="",a=0,i=0,o=n.y,l,A=0;switch(t){case 98:o=n.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,A=2;break;default:l=o%1e4,A=4;break}break;case 109:switch(e.length){case 1:case 2:l=n.m,A=e.length;break;case 3:return Zb[n.m-1][1];case 5:return Zb[n.m-1][0];default:return Zb[n.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=n.d,A=e.length;break;case 3:return rI[n.q][0];default:return rI[n.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(n.H+11)%12,A=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=n.H,A=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=n.M,A=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return n.u===0&&(e=="s"||e=="ss")?Ac(n.S,e.length):(r>=2?i=r===3?1e3:100:i=r===1?10:1,a=Math.round(i*(n.S+n.u)),a>=60*i&&(a=0),e==="s"?a===0?"0":""+a/i:(s=Ac(a,2+r),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=n.D*24+n.H;break;case"[m]":case"[mm]":l=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":l=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+e}A=e.length===3?1:2;break;case 101:l=o,A=1;break}var d=A>0?Ac(l,A):"";return d}function bd(t){var e=3;if(t.length<=e)return t;for(var n=t.length%e,r=t.substr(0,n);n!=t.length;n+=e)r+=(r.length>0?",":"")+t.substr(n,e);return r}var t8=/%/g;function dae(t,e,n){var r=e.replace(t8,""),s=e.length-r.length;return au(t,r,n*Math.pow(10,2*s))+Is("%",s)}function fae(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return au(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function n8(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+n8(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),n=(e/Math.pow(10,a)).toPrecision(r+1+(s+a)%s),n.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+a):n+="E+"+(i-a);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,s)+"."+n.substr(2+s),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,A,d){return l+A+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var r8=/# (\?+)( ?)\/( ?)(\d+)/;function hae(t,e,n){var r=parseInt(t[4],10),s=Math.round(e*r),a=Math.floor(s/r),i=s-a*r,o=r;return n+(a===0?"":""+a)+" "+(i===0?Is(" ",t[1].length+1+t[4].length):$5(i,t[1].length)+t[2]+"/"+t[3]+Ac(o,t[4].length))}function mae(t,e,n){return n+(e===0?"":""+e)+Is(" ",t[1].length+2+t[4].length)}var s8=/^#*0*\.([0#]+)/,a8=/\).*[0#]/,i8=/\(###\) ###\\?-####/;function Qi(t){for(var e="",n,r=0;r!=t.length;++r)switch(n=t.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(n)}return e}function aI(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n}function iI(t,e){var n=t-Math.floor(t),r=Math.pow(10,e);return e<(""+Math.round(n*r)).length?0:Math.round(n*r)}function pae(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function gae(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function ml(t,e,n){if(t.charCodeAt(0)===40&&!e.match(a8)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?ml("n",r,n):"("+ml("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return fae(t,e,n);if(e.indexOf("%")!==-1)return dae(t,e,n);if(e.indexOf("E")!==-1)return n8(e,n);if(e.charCodeAt(0)===36)return"$"+ml(t,e.substr(e.charAt(1)==" "?2:1),n);var s,a,i,o,l=Math.abs(n),A=n<0?"-":"";if(e.match(/^00+$/))return A+Jh(l,e.length);if(e.match(/^[#?]+$/))return s=Jh(n,0),s==="0"&&(s=""),s.length>e.length?s:Qi(e.substr(0,e.length-s.length))+s;if(a=e.match(r8))return hae(a,l,A);if(e.match(/^#+0+$/))return A+Jh(l,e.length-e.indexOf("0"));if(a=e.match(s8))return s=aI(n,a[1].length).replace(/^([^\.]+)$/,"$1."+Qi(a[1])).replace(/\.$/,"."+Qi(a[1])).replace(/\.(\d*)$/,function(w,b){return"."+b+Is("0",Qi(a[1]).length-b.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return A+aI(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return A+bd(Jh(l,0));if(a=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+ml(t,e,-n):bd(""+(Math.floor(n)+pae(n,a[1].length)))+"."+Ac(iI(n,a[1].length),a[1].length);if(a=e.match(/^#,#*,#0/))return ml(t,e.replace(/^#,#*,/,""),n);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=H0(ml(t,e.replace(/[\\-]/g,""),n)),i=0,H0(H0(e.replace(/\\/g,"")).replace(/[0#]/g,function(w){return i<s.length?s.charAt(i++):w==="0"?"0":""}));if(e.match(i8))return s=ml(t,"##########",n),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=S2(l,Math.pow(10,i)-1,!1),s=""+A,d=au("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=E2(o[2],i),d.length<a[4].length&&(d=Qi(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=S2(l,Math.pow(10,i)-1,!0),A+(o[0]||(o[1]?"":"0"))+" "+(o[1]?$5(o[1],i)+a[2]+"/"+a[3]+E2(o[2],i):Is(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=Jh(n,0),e.length<=s.length?s:Qi(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var h=e.indexOf(".")-i,p=e.length-s.length-h;return Qi(e.substr(0,h)+s+e.substr(e.length-p))}if(a=e.match(/^00,000\.([#0]*0)$/))return i=iI(n,a[1].length),n<0?"-"+ml(t,e,-n):bd(gae(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?Ac(0,3-w.length):"")+w})+"."+Ac(i,a[1].length);switch(e){case"###,##0.00":return ml(t,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var g=bd(Jh(l,0));return g!=="0"?A+g:"";case"###,###.00":return ml(t,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return ml(t,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function xae(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return au(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function vae(t,e,n){var r=e.replace(t8,""),s=e.length-r.length;return au(t,r,n*Math.pow(10,2*s))+Is("%",s)}function o8(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+o8(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),n=(e/Math.pow(10,a)).toPrecision(r+1+(s+a)%s),!n.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+a):n+="E+"+(i-a),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,A,d){return l+A+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function Zc(t,e,n){if(t.charCodeAt(0)===40&&!e.match(a8)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Zc("n",r,n):"("+Zc("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return xae(t,e,n);if(e.indexOf("%")!==-1)return vae(t,e,n);if(e.indexOf("E")!==-1)return o8(e,n);if(e.charCodeAt(0)===36)return"$"+Zc(t,e.substr(e.charAt(1)==" "?2:1),n);var s,a,i,o,l=Math.abs(n),A=n<0?"-":"";if(e.match(/^00+$/))return A+Ac(l,e.length);if(e.match(/^[#?]+$/))return s=""+n,n===0&&(s=""),s.length>e.length?s:Qi(e.substr(0,e.length-s.length))+s;if(a=e.match(r8))return mae(a,l,A);if(e.match(/^#+0+$/))return A+Ac(l,e.length-e.indexOf("0"));if(a=e.match(s8))return s=(""+n).replace(/^([^\.]+)$/,"$1."+Qi(a[1])).replace(/\.$/,"."+Qi(a[1])),s=s.replace(/\.(\d*)$/,function(w,b){return"."+b+Is("0",Qi(a[1]).length-b.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return A+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return A+bd(""+l);if(a=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Zc(t,e,-n):bd(""+n)+"."+Is("0",a[1].length);if(a=e.match(/^#,#*,#0/))return Zc(t,e.replace(/^#,#*,/,""),n);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=H0(Zc(t,e.replace(/[\\-]/g,""),n)),i=0,H0(H0(e.replace(/\\/g,"")).replace(/[0#]/g,function(w){return i<s.length?s.charAt(i++):w==="0"?"0":""}));if(e.match(i8))return s=Zc(t,"##########",n),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=S2(l,Math.pow(10,i)-1,!1),s=""+A,d=au("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=E2(o[2],i),d.length<a[4].length&&(d=Qi(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=S2(l,Math.pow(10,i)-1,!0),A+(o[0]||(o[1]?"":"0"))+" "+(o[1]?$5(o[1],i)+a[2]+"/"+a[3]+E2(o[2],i):Is(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=""+n,e.length<=s.length?s:Qi(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var h=e.indexOf(".")-i,p=e.length-s.length-h;return Qi(e.substr(0,h)+s+e.substr(e.length-p))}if(a=e.match(/^00,000\.([#0]*0)$/))return n<0?"-"+Zc(t,e,-n):bd(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?Ac(0,3-w.length):"")+w})+"."+Ac(0,a[1].length);switch(e){case"###,###":case"##,###":case"#,###":var g=bd(""+l);return g!=="0"?A+g:"";default:if(e.match(/\.[0#?]*$/))return Zc(t,e.slice(0,e.lastIndexOf(".")),n)+Qi(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function au(t,e,n){return(n|0)===n?Zc(t,e,n):ml(t,e,n)}function yae(t){for(var e=[],n=!1,r=0,s=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=t.substr(s,r-s),s=r+1}if(e[e.length]=t.substr(s),n===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var l8=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Em(t){for(var e=0,n="",r="";e<t.length;)switch(n=t.charAt(e)){case"G":_2(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="上午/下午")return!0;++e;break;case"[":for(r=n;t.charAt(e++)!=="]"&&e<t.length;)r+=t.charAt(e);if(r.match(l8))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(n=t.charAt(++e))>-1||n=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===n;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function wae(t,e,n,r){for(var s=[],a="",i=0,o="",l="t",A,d,h,p="H";i<t.length;)switch(o=t.charAt(i)){case"G":if(!_2(t,i))throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"G",v:"General"},i+=7;break;case'"':for(a="";(h=t.charCodeAt(++i))!==34&&i<t.length;)a+=String.fromCharCode(h);s[s.length]={t:"t",v:a},++i;break;case"\\":var g=t.charAt(++i),w=g==="("||g===")"?g:"t";s[s.length]={t:w,v:g},++i;break;case"_":s[s.length]={t:"t",v:" "},i+=2;break;case"@":s[s.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(A==null&&(A=Df(e,n,t.charAt(i+1)==="2"),A==null))return"";s[s.length]={t:"X",v:t.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||A==null&&(A=Df(e,n),A==null))return"";for(a=o;++i<t.length&&t.charAt(i).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=p),s[s.length]={t:o,v:a},l=o;break;case"A":case"a":case"上":var b={t:o,v:o};if(A==null&&(A=Df(e,n)),t.substr(i,3).toUpperCase()==="A/P"?(A!=null&&(b.v=A.H>=12?"P":"A"),b.t="T",p="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(A!=null&&(b.v=A.H>=12?"PM":"AM"),b.t="T",i+=5,p="h"):t.substr(i,5).toUpperCase()==="上午/下午"?(A!=null&&(b.v=A.H>=12?"下午":"上午"),b.t="T",i+=5,p="h"):(b.t="t",++i),A==null&&b.t==="T")return"";s[s.length]=b,l=o;break;case"[":for(a=o;t.charAt(i++)!=="]"&&i<t.length;)a+=t.charAt(i);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(l8)){if(A==null&&(A=Df(e,n),A==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",Em(t)||(s[s.length]={t:"t",v:a}));break;case".":if(A!=null){for(a=o;++i<t.length&&(o=t.charAt(i))==="0";)a+=o;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++i<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(i))>-1;)a+=o;s[s.length]={t:"n",v:a};break;case"?":for(a=o;t.charAt(++i)===o;)a+=o;s[s.length]={t:o,v:a},l=o;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":s[s.length]={t:r===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)a+=t.charAt(i);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:o,v:o},++i;break;case"$":s[s.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"t",v:o},++i;break}var E=0,B=0,I;for(i=s.length-1,l="t";i>=0;--i)switch(s[i].t){case"h":case"H":s[i].t=p,l="h",E<1&&(E=1);break;case"s":(I=s[i].v.match(/\.0+$/))&&(B=Math.max(B,I[0].length-1)),E<3&&(E=3);case"d":case"y":case"M":case"e":l=s[i].t;break;case"m":l==="s"&&(s[i].t="M",E<2&&(E=2));break;case"X":break;case"Z":E<1&&s[i].v.match(/[Hh]/)&&(E=1),E<2&&s[i].v.match(/[Mm]/)&&(E=2),E<3&&s[i].v.match(/[Ss]/)&&(E=3)}switch(E){case 0:break;case 1:A.u>=.5&&(A.u=0,++A.S),A.S>=60&&(A.S=0,++A.M),A.M>=60&&(A.M=0,++A.H);break;case 2:A.u>=.5&&(A.u=0,++A.S),A.S>=60&&(A.S=0,++A.M);break}var k="",F;for(i=0;i<s.length;++i)switch(s[i].t){case"t":case"T":case" ":case"D":break;case"X":s[i].v="",s[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[i].v=uae(s[i].t.charCodeAt(0),s[i].v,A,B),s[i].t="t";break;case"n":case"?":for(F=i+1;s[F]!=null&&((o=s[F].t)==="?"||o==="D"||(o===" "||o==="t")&&s[F+1]!=null&&(s[F+1].t==="?"||s[F+1].t==="t"&&s[F+1].v==="/")||s[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[F].v==="/"||s[F].v===" "&&s[F+1]!=null&&s[F+1].t=="?"));)s[i].v+=s[F].v,s[F]={v:"",t:";"},++F;k+=s[i].v,i=F-1;break;case"G":s[i].t="t",s[i].v=th(e,n);break}var D="",P,S;if(k.length>0){k.charCodeAt(0)==40?(P=e<0&&k.charCodeAt(0)===45?-e:e,S=au("n",k,P)):(P=e<0&&r>1?-e:e,S=au("n",k,P),P<0&&s[0]&&s[0].t=="t"&&(S=S.substr(1),s[0].v="-"+s[0].v)),F=S.length-1;var N=s.length;for(i=0;i<s.length;++i)if(s[i]!=null&&s[i].t!="t"&&s[i].v.indexOf(".")>-1){N=i;break}var T=s.length;if(N===s.length&&S.indexOf("E")===-1){for(i=s.length-1;i>=0;--i)s[i]==null||"n?".indexOf(s[i].t)===-1||(F>=s[i].v.length-1?(F-=s[i].v.length,s[i].v=S.substr(F+1,s[i].v.length)):F<0?s[i].v="":(s[i].v=S.substr(0,F+1),F=-1),s[i].t="t",T=i);F>=0&&T<s.length&&(s[T].v=S.substr(0,F+1)+s[T].v)}else if(N!==s.length&&S.indexOf("E")===-1){for(F=S.indexOf(".")-1,i=N;i>=0;--i)if(!(s[i]==null||"n?".indexOf(s[i].t)===-1)){for(d=s[i].v.indexOf(".")>-1&&i===N?s[i].v.indexOf(".")-1:s[i].v.length-1,D=s[i].v.substr(d+1);d>=0;--d)F>=0&&(s[i].v.charAt(d)==="0"||s[i].v.charAt(d)==="#")&&(D=S.charAt(F--)+D);s[i].v=D,s[i].t="t",T=i}for(F>=0&&T<s.length&&(s[T].v=S.substr(0,F+1)+s[T].v),F=S.indexOf(".")+1,i=N;i<s.length;++i)if(!(s[i]==null||"n?(".indexOf(s[i].t)===-1&&i!==N)){for(d=s[i].v.indexOf(".")>-1&&i===N?s[i].v.indexOf(".")+1:0,D=s[i].v.substr(0,d);d<s[i].v.length;++d)F<S.length&&(D+=S.charAt(F++));s[i].v=D,s[i].t="t",T=i}}}for(i=0;i<s.length;++i)s[i]!=null&&"n?".indexOf(s[i].t)>-1&&(P=r>1&&e<0&&i>0&&s[i-1].v==="-"?-e:e,s[i].v=au(s[i].t,s[i].v,P),s[i].t="t");var V="";for(i=0;i!==s.length;++i)s[i]!=null&&(V+=s[i].v);return V}var oI=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function lI(t,e){if(e==null)return!1;var n=parseFloat(e[2]);switch(e[1]){case"=":if(t==n)return!0;break;case">":if(t>n)return!0;break;case"<":if(t<n)return!0;break;case"<>":if(t!=n)return!0;break;case">=":if(t>=n)return!0;break;case"<=":if(t<=n)return!0;break}return!1}function bae(t,e){var n=yae(t),r=n.length,s=n[r-1].indexOf("@");if(r<4&&s>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof e!="number")return[4,n.length===4||s>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=s>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=s>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=s>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var a=e>0?n[0]:e<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[r,a];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var i=n[0].match(oI),o=n[1].match(oI);return lI(e,i)?[r,n[0]]:lI(e,o)?[r,n[1]]:[r,n[i!=null&&o!=null?2:1]]}return[r,a]}function Nl(t,e,n){n==null&&(n={});var r="";switch(typeof t){case"string":t=="m/d/yy"&&n.dateNF?r=n.dateNF:r=t;break;case"number":t==14&&n.dateNF?r=n.dateNF:r=(n.table!=null?n.table:gn)[t],r==null&&(r=n.table&&n.table[sI[t]]||gn[sI[t]]),r==null&&(r=sae[t]||"General");break}if(_2(r,0))return th(e,n);e instanceof Date&&(e=e8(e,n.date1904));var s=bae(r,e);if(_2(s[1]))return th(e,n);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return wae(s[1],e,n,s[0])}function iu(t,e){if(typeof e!="number"){e=+e||-1;for(var n=0;n<392;++n){if(gn[n]==null){e<0&&(e=n);continue}if(gn[n]==t){e=n;break}}e<0&&(e=391)}return gn[e]=t,e}function ky(t){for(var e=0;e!=392;++e)t[e]!==void 0&&iu(t[e],e)}function _m(){gn=rae()}var Cae={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},c8=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Eae(t){var e=typeof t=="number"?gn[t]:t;return e=e.replace(c8,"(\\d+)"),new RegExp("^"+e+"$")}function _ae(t,e,n){var r=-1,s=-1,a=-1,i=-1,o=-1,l=-1;(e.match(c8)||[]).forEach(function(h,p){var g=parseInt(n[p+1],10);switch(h.toLowerCase().charAt(0)){case"y":r=g;break;case"d":a=g;break;case"h":i=g;break;case"s":l=g;break;case"m":i>=0?o=g:s=g;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var A=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);A.length==7&&(A="0"+A),A.length==8&&(A="20"+A);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?A:r==-1&&s==-1&&a==-1?d:A+"T"+d}var Sae=function(){var t={};t.version="1.2.0";function e(){for(var S=0,N=new Array(256),T=0;T!=256;++T)S=T,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,N[T]=S;return typeof Int32Array<"u"?new Int32Array(N):N}var n=e();function r(S){var N=0,T=0,V=0,M=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(V=0;V!=256;++V)M[V]=S[V];for(V=0;V!=256;++V)for(T=S[V],N=256+V;N<4096;N+=256)T=M[N]=T>>>8^S[T&255];var U=[];for(V=1;V!=16;++V)U[V-1]=typeof Int32Array<"u"?M.subarray(V*256,V*256+256):M.slice(V*256,V*256+256);return U}var s=r(n),a=s[0],i=s[1],o=s[2],l=s[3],A=s[4],d=s[5],h=s[6],p=s[7],g=s[8],w=s[9],b=s[10],E=s[11],B=s[12],I=s[13],k=s[14];function F(S,N){for(var T=N^-1,V=0,M=S.length;V<M;)T=T>>>8^n[(T^S.charCodeAt(V++))&255];return~T}function D(S,N){for(var T=N^-1,V=S.length-15,M=0;M<V;)T=k[S[M++]^T&255]^I[S[M++]^T>>8&255]^B[S[M++]^T>>16&255]^E[S[M++]^T>>>24]^b[S[M++]]^w[S[M++]]^g[S[M++]]^p[S[M++]]^h[S[M++]]^d[S[M++]]^A[S[M++]]^l[S[M++]]^o[S[M++]]^i[S[M++]]^a[S[M++]]^n[S[M++]];for(V+=15;M<V;)T=T>>>8^n[(T^S[M++])&255];return~T}function P(S,N){for(var T=N^-1,V=0,M=S.length,U=0,O=0;V<M;)U=S.charCodeAt(V++),U<128?T=T>>>8^n[(T^U)&255]:U<2048?(T=T>>>8^n[(T^(192|U>>6&31))&255],T=T>>>8^n[(T^(128|U&63))&255]):U>=55296&&U<57344?(U=(U&1023)+64,O=S.charCodeAt(V++)&1023,T=T>>>8^n[(T^(240|U>>8&7))&255],T=T>>>8^n[(T^(128|U>>2&63))&255],T=T>>>8^n[(T^(128|O>>6&15|(U&3)<<4))&255],T=T>>>8^n[(T^(128|O&63))&255]):(T=T>>>8^n[(T^(224|U>>12&15))&255],T=T>>>8^n[(T^(128|U>>6&63))&255],T=T>>>8^n[(T^(128|U&63))&255]);return~T}return t.table=n,t.bstr=F,t.buf=D,t.str=P,t}(),ln=function(){var e={};e.version="1.2.1";function n(fe,Be){for(var Ce=fe.split("/"),_e=Be.split("/"),Se=0,Ne=0,Ke=Math.min(Ce.length,_e.length);Se<Ke;++Se){if(Ne=Ce[Se].length-_e[Se].length)return Ne;if(Ce[Se]!=_e[Se])return Ce[Se]<_e[Se]?-1:1}return Ce.length-_e.length}function r(fe){if(fe.charAt(fe.length-1)=="/")return fe.slice(0,-1).indexOf("/")===-1?fe:r(fe.slice(0,-1));var Be=fe.lastIndexOf("/");return Be===-1?fe:fe.slice(0,Be+1)}function s(fe){if(fe.charAt(fe.length-1)=="/")return s(fe.slice(0,-1));var Be=fe.lastIndexOf("/");return Be===-1?fe:fe.slice(Be+1)}function a(fe,Be){typeof Be=="string"&&(Be=new Date(Be));var Ce=Be.getHours();Ce=Ce<<6|Be.getMinutes(),Ce=Ce<<5|Be.getSeconds()>>>1,fe.write_shift(2,Ce);var _e=Be.getFullYear()-1980;_e=_e<<4|Be.getMonth()+1,_e=_e<<5|Be.getDate(),fe.write_shift(2,_e)}function i(fe){var Be=fe.read_shift(2)&65535,Ce=fe.read_shift(2)&65535,_e=new Date,Se=Ce&31;Ce>>>=5;var Ne=Ce&15;Ce>>>=4,_e.setMilliseconds(0),_e.setFullYear(Ce+1980),_e.setMonth(Ne-1),_e.setDate(Se);var Ke=Be&31;Be>>>=5;var nt=Be&63;return Be>>>=6,_e.setHours(Be),_e.setMinutes(nt),_e.setSeconds(Ke<<1),_e}function o(fe){Za(fe,0);for(var Be={},Ce=0;fe.l<=fe.length-4;){var _e=fe.read_shift(2),Se=fe.read_shift(2),Ne=fe.l+Se,Ke={};switch(_e){case 21589:Ce=fe.read_shift(1),Ce&1&&(Ke.mtime=fe.read_shift(4)),Se>5&&(Ce&2&&(Ke.atime=fe.read_shift(4)),Ce&4&&(Ke.ctime=fe.read_shift(4))),Ke.mtime&&(Ke.mt=new Date(Ke.mtime*1e3));break}fe.l=Ne,Be[_e]=Ke}return Be}var l;function A(){return l||(l={})}function d(fe,Be){if(fe[0]==80&&fe[1]==75)return Jn(fe,Be);if((fe[0]|32)==109&&(fe[1]|32)==105)return ma(fe,Be);if(fe.length<512)throw new Error("CFB file size "+fe.length+" < 512");var Ce=3,_e=512,Se=0,Ne=0,Ke=0,nt=0,Qe=0,We=[],Xe=fe.slice(0,512);Za(Xe,0);var vt=h(Xe);switch(Ce=vt[0],Ce){case 3:_e=512;break;case 4:_e=4096;break;case 0:if(vt[1]==0)return Jn(fe,Be);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ce)}_e!==512&&(Xe=fe.slice(0,_e),Za(Xe,28));var Bt=fe.slice(0,_e);p(Xe,Ce);var Pt=Xe.read_shift(4,"i");if(Ce===3&&Pt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Pt);Xe.l+=4,Ke=Xe.read_shift(4,"i"),Xe.l+=4,Xe.chk("00100000","Mini Stream Cutoff Size: "),nt=Xe.read_shift(4,"i"),Se=Xe.read_shift(4,"i"),Qe=Xe.read_shift(4,"i"),Ne=Xe.read_shift(4,"i");for(var St=-1,Ft=0;Ft<109&&(St=Xe.read_shift(4,"i"),!(St<0));++Ft)We[Ft]=St;var cn=g(fe,_e);E(Qe,Ne,cn,_e,We);var Dn=I(cn,Ke,We,_e);Dn[Ke].name="!Directory",Se>0&&nt!==O&&(Dn[nt].name="!MiniFAT"),Dn[We[0]].name="!FAT",Dn.fat_addrs=We,Dn.ssz=_e;var Un={},On=[],bs=[],ri=[];k(Ke,Dn,cn,On,Se,Un,bs,nt),w(bs,ri,On),On.shift();var Cs={FileIndex:bs,FullPaths:ri};return Be&&Be.raw&&(Cs.raw={header:Bt,sectors:cn}),Cs}function h(fe){if(fe[fe.l]==80&&fe[fe.l+1]==75)return[0,0];fe.chk(G,"Header Signature: "),fe.l+=16;var Be=fe.read_shift(2,"u");return[fe.read_shift(2,"u"),Be]}function p(fe,Be){var Ce=9;switch(fe.l+=2,Ce=fe.read_shift(2)){case 9:if(Be!=3)throw new Error("Sector Shift: Expected 9 saw "+Ce);break;case 12:if(Be!=4)throw new Error("Sector Shift: Expected 12 saw "+Ce);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ce)}fe.chk("0600","Mini Sector Shift: "),fe.chk("000000000000","Reserved: ")}function g(fe,Be){for(var Ce=Math.ceil(fe.length/Be)-1,_e=[],Se=1;Se<Ce;++Se)_e[Se-1]=fe.slice(Se*Be,(Se+1)*Be);return _e[Ce-1]=fe.slice(Ce*Be),_e}function w(fe,Be,Ce){for(var _e=0,Se=0,Ne=0,Ke=0,nt=0,Qe=Ce.length,We=[],Xe=[];_e<Qe;++_e)We[_e]=Xe[_e]=_e,Be[_e]=Ce[_e];for(;nt<Xe.length;++nt)_e=Xe[nt],Se=fe[_e].L,Ne=fe[_e].R,Ke=fe[_e].C,We[_e]===_e&&(Se!==-1&&We[Se]!==Se&&(We[_e]=We[Se]),Ne!==-1&&We[Ne]!==Ne&&(We[_e]=We[Ne])),Ke!==-1&&(We[Ke]=_e),Se!==-1&&_e!=We[_e]&&(We[Se]=We[_e],Xe.lastIndexOf(Se)<nt&&Xe.push(Se)),Ne!==-1&&_e!=We[_e]&&(We[Ne]=We[_e],Xe.lastIndexOf(Ne)<nt&&Xe.push(Ne));for(_e=1;_e<Qe;++_e)We[_e]===_e&&(Ne!==-1&&We[Ne]!==Ne?We[_e]=We[Ne]:Se!==-1&&We[Se]!==Se&&(We[_e]=We[Se]));for(_e=1;_e<Qe;++_e)if(fe[_e].type!==0){if(nt=_e,nt!=We[nt])do nt=We[nt],Be[_e]=Be[nt]+"/"+Be[_e];while(nt!==0&&We[nt]!==-1&&nt!=We[nt]);We[_e]=-1}for(Be[0]+="/",_e=1;_e<Qe;++_e)fe[_e].type!==2&&(Be[_e]+="/")}function b(fe,Be,Ce){for(var _e=fe.start,Se=fe.size,Ne=[],Ke=_e;Ce&&Se>0&&Ke>=0;)Ne.push(Be.slice(Ke*U,Ke*U+U)),Se-=U,Ke=If(Ce,Ke*4);return Ne.length===0?lt(0):Oa(Ne).slice(0,fe.size)}function E(fe,Be,Ce,_e,Se){var Ne=O;if(fe===O){if(Be!==0)throw new Error("DIFAT chain shorter than expected")}else if(fe!==-1){var Ke=Ce[fe],nt=(_e>>>2)-1;if(!Ke)return;for(var Qe=0;Qe<nt&&(Ne=If(Ke,Qe*4))!==O;++Qe)Se.push(Ne);E(If(Ke,_e-4),Be-1,Ce,_e,Se)}}function B(fe,Be,Ce,_e,Se){var Ne=[],Ke=[];Se||(Se=[]);var nt=_e-1,Qe=0,We=0;for(Qe=Be;Qe>=0;){Se[Qe]=!0,Ne[Ne.length]=Qe,Ke.push(fe[Qe]);var Xe=Ce[Math.floor(Qe*4/_e)];if(We=Qe*4&nt,_e<4+We)throw new Error("FAT boundary crossed: "+Qe+" 4 "+_e);if(!fe[Xe])break;Qe=If(fe[Xe],We)}return{nodes:Ne,data:yI([Ke])}}function I(fe,Be,Ce,_e){var Se=fe.length,Ne=[],Ke=[],nt=[],Qe=[],We=_e-1,Xe=0,vt=0,Bt=0,Pt=0;for(Xe=0;Xe<Se;++Xe)if(nt=[],Bt=Xe+Be,Bt>=Se&&(Bt-=Se),!Ke[Bt]){Qe=[];var St=[];for(vt=Bt;vt>=0;){St[vt]=!0,Ke[vt]=!0,nt[nt.length]=vt,Qe.push(fe[vt]);var Ft=Ce[Math.floor(vt*4/_e)];if(Pt=vt*4&We,_e<4+Pt)throw new Error("FAT boundary crossed: "+vt+" 4 "+_e);if(!fe[Ft]||(vt=If(fe[Ft],Pt),St[vt]))break}Ne[Bt]={nodes:nt,data:yI([Qe])}}return Ne}function k(fe,Be,Ce,_e,Se,Ne,Ke,nt){for(var Qe=0,We=_e.length?2:0,Xe=Be[fe].data,vt=0,Bt=0,Pt;vt<Xe.length;vt+=128){var St=Xe.slice(vt,vt+128);Za(St,64),Bt=St.read_shift(2),Pt=rS(St,0,Bt-We),_e.push(Pt);var Ft={name:Pt,type:St.read_shift(1),color:St.read_shift(1),L:St.read_shift(4,"i"),R:St.read_shift(4,"i"),C:St.read_shift(4,"i"),clsid:St.read_shift(16),state:St.read_shift(4,"i"),start:0,size:0},cn=St.read_shift(2)+St.read_shift(2)+St.read_shift(2)+St.read_shift(2);cn!==0&&(Ft.ct=F(St,St.l-8));var Dn=St.read_shift(2)+St.read_shift(2)+St.read_shift(2)+St.read_shift(2);Dn!==0&&(Ft.mt=F(St,St.l-8)),Ft.start=St.read_shift(4,"i"),Ft.size=St.read_shift(4,"i"),Ft.size<0&&Ft.start<0&&(Ft.size=Ft.type=0,Ft.start=O,Ft.name=""),Ft.type===5?(Qe=Ft.start,Se>0&&Qe!==O&&(Be[Qe].name="!StreamData")):Ft.size>=4096?(Ft.storage="fat",Be[Ft.start]===void 0&&(Be[Ft.start]=B(Ce,Ft.start,Be.fat_addrs,Be.ssz)),Be[Ft.start].name=Ft.name,Ft.content=Be[Ft.start].data.slice(0,Ft.size)):(Ft.storage="minifat",Ft.size<0?Ft.size=0:Qe!==O&&Ft.start!==O&&Be[Qe]&&(Ft.content=b(Ft,Be[Qe].data,(Be[nt]||{}).data))),Ft.content&&Za(Ft.content,0),Ne[Pt]=Ft,Ke.push(Ft)}}function F(fe,Be){return new Date((Po(fe,Be+4)/1e7*Math.pow(2,32)+Po(fe,Be)/1e7-11644473600)*1e3)}function D(fe,Be){return A(),d(l.readFileSync(fe),Be)}function P(fe,Be){var Ce=Be&&Be.type;switch(Ce||zn&&Buffer.isBuffer(fe)&&(Ce="buffer"),Ce||"base64"){case"file":return D(fe,Be);case"base64":return d(jo(Vo(fe)),Be);case"binary":return d(jo(fe),Be)}return d(fe,Be)}function S(fe,Be){var Ce=Be||{},_e=Ce.root||"Root Entry";if(fe.FullPaths||(fe.FullPaths=[]),fe.FileIndex||(fe.FileIndex=[]),fe.FullPaths.length!==fe.FileIndex.length)throw new Error("inconsistent CFB structure");fe.FullPaths.length===0&&(fe.FullPaths[0]=_e+"/",fe.FileIndex[0]={name:_e,type:5}),Ce.CLSID&&(fe.FileIndex[0].clsid=Ce.CLSID),N(fe)}function N(fe){var Be="Sh33tJ5";if(!ln.find(fe,"/"+Be)){var Ce=lt(4);Ce[0]=55,Ce[1]=Ce[3]=50,Ce[2]=54,fe.FileIndex.push({name:Be,type:2,content:Ce,size:4,L:69,R:69,C:69}),fe.FullPaths.push(fe.FullPaths[0]+Be),T(fe)}}function T(fe,Be){S(fe);for(var Ce=!1,_e=!1,Se=fe.FullPaths.length-1;Se>=0;--Se){var Ne=fe.FileIndex[Se];switch(Ne.type){case 0:_e?Ce=!0:(fe.FileIndex.pop(),fe.FullPaths.pop());break;case 1:case 2:case 5:_e=!0,isNaN(Ne.R*Ne.L*Ne.C)&&(Ce=!0),Ne.R>-1&&Ne.L>-1&&Ne.R==Ne.L&&(Ce=!0);break;default:Ce=!0;break}}if(!(!Ce&&!Be)){var Ke=new Date(1987,1,19),nt=0,Qe=Object.create?Object.create(null):{},We=[];for(Se=0;Se<fe.FullPaths.length;++Se)Qe[fe.FullPaths[Se]]=!0,fe.FileIndex[Se].type!==0&&We.push([fe.FullPaths[Se],fe.FileIndex[Se]]);for(Se=0;Se<We.length;++Se){var Xe=r(We[Se][0]);_e=Qe[Xe],_e||(We.push([Xe,{name:s(Xe).replace("/",""),type:1,clsid:K,ct:Ke,mt:Ke,content:null}]),Qe[Xe]=!0)}for(We.sort(function(Pt,St){return n(Pt[0],St[0])}),fe.FullPaths=[],fe.FileIndex=[],Se=0;Se<We.length;++Se)fe.FullPaths[Se]=We[Se][0],fe.FileIndex[Se]=We[Se][1];for(Se=0;Se<We.length;++Se){var vt=fe.FileIndex[Se],Bt=fe.FullPaths[Se];if(vt.name=s(Bt).replace("/",""),vt.L=vt.R=vt.C=-(vt.color=1),vt.size=vt.content?vt.content.length:0,vt.start=0,vt.clsid=vt.clsid||K,Se===0)vt.C=We.length>1?1:-1,vt.size=0,vt.type=5;else if(Bt.slice(-1)=="/"){for(nt=Se+1;nt<We.length&&r(fe.FullPaths[nt])!=Bt;++nt);for(vt.C=nt>=We.length?-1:nt,nt=Se+1;nt<We.length&&r(fe.FullPaths[nt])!=r(Bt);++nt);vt.R=nt>=We.length?-1:nt,vt.type=1}else r(fe.FullPaths[Se+1]||"")==r(Bt)&&(vt.R=Se+1),vt.type=2}}}function V(fe,Be){var Ce=Be||{};if(Ce.fileType=="mad")return Ht(fe,Ce);switch(T(fe),Ce.fileType){case"zip":return as(fe,Ce)}var _e=function(Pt){for(var St=0,Ft=0,cn=0;cn<Pt.FileIndex.length;++cn){var Dn=Pt.FileIndex[cn];if(Dn.content){var Un=Dn.content.length;Un>0&&(Un<4096?St+=Un+63>>6:Ft+=Un+511>>9)}}for(var On=Pt.FullPaths.length+3>>2,bs=St+7>>3,ri=St+127>>7,Cs=bs+Ft+On+ri,ta=Cs+127>>7,Us=ta<=109?0:Math.ceil((ta-109)/127);Cs+ta+Us+127>>7>ta;)Us=++ta<=109?0:Math.ceil((ta-109)/127);var pa=[1,Us,ta,ri,On,Ft,St,0];return Pt.FileIndex[0].size=St<<6,pa[7]=(Pt.FileIndex[0].start=pa[0]+pa[1]+pa[2]+pa[3]+pa[4]+pa[5])+(pa[6]+7>>3),pa}(fe),Se=lt(_e[7]<<9),Ne=0,Ke=0;{for(Ne=0;Ne<8;++Ne)Se.write_shift(1,ie[Ne]);for(Ne=0;Ne<8;++Ne)Se.write_shift(2,0);for(Se.write_shift(2,62),Se.write_shift(2,3),Se.write_shift(2,65534),Se.write_shift(2,9),Se.write_shift(2,6),Ne=0;Ne<3;++Ne)Se.write_shift(2,0);for(Se.write_shift(4,0),Se.write_shift(4,_e[2]),Se.write_shift(4,_e[0]+_e[1]+_e[2]+_e[3]-1),Se.write_shift(4,0),Se.write_shift(4,4096),Se.write_shift(4,_e[3]?_e[0]+_e[1]+_e[2]-1:O),Se.write_shift(4,_e[3]),Se.write_shift(-4,_e[1]?_e[0]-1:O),Se.write_shift(4,_e[1]),Ne=0;Ne<109;++Ne)Se.write_shift(-4,Ne<_e[2]?_e[1]+Ne:-1)}if(_e[1])for(Ke=0;Ke<_e[1];++Ke){for(;Ne<236+Ke*127;++Ne)Se.write_shift(-4,Ne<_e[2]?_e[1]+Ne:-1);Se.write_shift(-4,Ke===_e[1]-1?O:Ke+1)}var nt=function(Pt){for(Ke+=Pt;Ne<Ke-1;++Ne)Se.write_shift(-4,Ne+1);Pt&&(++Ne,Se.write_shift(-4,O))};for(Ke=Ne=0,Ke+=_e[1];Ne<Ke;++Ne)Se.write_shift(-4,q.DIFSECT);for(Ke+=_e[2];Ne<Ke;++Ne)Se.write_shift(-4,q.FATSECT);nt(_e[3]),nt(_e[4]);for(var Qe=0,We=0,Xe=fe.FileIndex[0];Qe<fe.FileIndex.length;++Qe)Xe=fe.FileIndex[Qe],Xe.content&&(We=Xe.content.length,!(We<4096)&&(Xe.start=Ke,nt(We+511>>9)));for(nt(_e[6]+7>>3);Se.l&511;)Se.write_shift(-4,q.ENDOFCHAIN);for(Ke=Ne=0,Qe=0;Qe<fe.FileIndex.length;++Qe)Xe=fe.FileIndex[Qe],Xe.content&&(We=Xe.content.length,!(!We||We>=4096)&&(Xe.start=Ke,nt(We+63>>6)));for(;Se.l&511;)Se.write_shift(-4,q.ENDOFCHAIN);for(Ne=0;Ne<_e[4]<<2;++Ne){var vt=fe.FullPaths[Ne];if(!vt||vt.length===0){for(Qe=0;Qe<17;++Qe)Se.write_shift(4,0);for(Qe=0;Qe<3;++Qe)Se.write_shift(4,-1);for(Qe=0;Qe<12;++Qe)Se.write_shift(4,0);continue}Xe=fe.FileIndex[Ne],Ne===0&&(Xe.start=Xe.size?Xe.start-1:O);var Bt=Ne===0&&Ce.root||Xe.name;if(We=2*(Bt.length+1),Se.write_shift(64,Bt,"utf16le"),Se.write_shift(2,We),Se.write_shift(1,Xe.type),Se.write_shift(1,Xe.color),Se.write_shift(-4,Xe.L),Se.write_shift(-4,Xe.R),Se.write_shift(-4,Xe.C),Xe.clsid)Se.write_shift(16,Xe.clsid,"hex");else for(Qe=0;Qe<4;++Qe)Se.write_shift(4,0);Se.write_shift(4,Xe.state||0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,Xe.start),Se.write_shift(4,Xe.size),Se.write_shift(4,0)}for(Ne=1;Ne<fe.FileIndex.length;++Ne)if(Xe=fe.FileIndex[Ne],Xe.size>=4096)if(Se.l=Xe.start+1<<9,zn&&Buffer.isBuffer(Xe.content))Xe.content.copy(Se,Se.l,0,Xe.size),Se.l+=Xe.size+511&-512;else{for(Qe=0;Qe<Xe.size;++Qe)Se.write_shift(1,Xe.content[Qe]);for(;Qe&511;++Qe)Se.write_shift(1,0)}for(Ne=1;Ne<fe.FileIndex.length;++Ne)if(Xe=fe.FileIndex[Ne],Xe.size>0&&Xe.size<4096)if(zn&&Buffer.isBuffer(Xe.content))Xe.content.copy(Se,Se.l,0,Xe.size),Se.l+=Xe.size+63&-64;else{for(Qe=0;Qe<Xe.size;++Qe)Se.write_shift(1,Xe.content[Qe]);for(;Qe&63;++Qe)Se.write_shift(1,0)}if(zn)Se.l=Se.length;else for(;Se.l<Se.length;)Se.write_shift(1,0);return Se}function M(fe,Be){var Ce=fe.FullPaths.map(function(Qe){return Qe.toUpperCase()}),_e=Ce.map(function(Qe){var We=Qe.split("/");return We[We.length-(Qe.slice(-1)=="/"?2:1)]}),Se=!1;Be.charCodeAt(0)===47?(Se=!0,Be=Ce[0].slice(0,-1)+Be):Se=Be.indexOf("/")!==-1;var Ne=Be.toUpperCase(),Ke=Se===!0?Ce.indexOf(Ne):_e.indexOf(Ne);if(Ke!==-1)return fe.FileIndex[Ke];var nt=!Ne.match(Pp);for(Ne=Ne.replace(zi,""),nt&&(Ne=Ne.replace(Pp,"!")),Ke=0;Ke<Ce.length;++Ke)if((nt?Ce[Ke].replace(Pp,"!"):Ce[Ke]).replace(zi,"")==Ne||(nt?_e[Ke].replace(Pp,"!"):_e[Ke]).replace(zi,"")==Ne)return fe.FileIndex[Ke];return null}var U=64,O=-2,G="d0cf11e0a1b11ae1",ie=[208,207,17,224,161,177,26,225],K="00000000000000000000000000000000",q={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:O,FREESECT:-1,HEADER_SIGNATURE:G,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:K,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function se(fe,Be,Ce){A();var _e=V(fe,Ce);l.writeFileSync(Be,_e)}function Z(fe){for(var Be=new Array(fe.length),Ce=0;Ce<fe.length;++Ce)Be[Ce]=String.fromCharCode(fe[Ce]);return Be.join("")}function X(fe,Be){var Ce=V(fe,Be);switch(Be&&Be.type||"buffer"){case"file":return A(),l.writeFileSync(Be.filename,Ce),Ce;case"binary":return typeof Ce=="string"?Ce:Z(Ce);case"base64":return Ng(typeof Ce=="string"?Ce:Z(Ce));case"buffer":if(zn)return Buffer.isBuffer(Ce)?Ce:vu(Ce);case"array":return typeof Ce=="string"?jo(Ce):Ce}return Ce}var de;function j(fe){try{var Be=fe.InflateRaw,Ce=new Be;if(Ce._processChunk(new Uint8Array([3,0]),Ce._finishFlushFlag),Ce.bytesRead)de=fe;else throw new Error("zlib does not expose bytesRead")}catch(_e){console.error("cannot use native zlib: "+(_e.message||_e))}}function W(fe,Be){if(!de)return Tn(fe,Be);var Ce=de.InflateRaw,_e=new Ce,Se=_e._processChunk(fe.slice(fe.l),_e._finishFlushFlag);return fe.l+=_e.bytesRead,Se}function J(fe){return de?de.deflateRawSync(fe):kt(fe)}var ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],oe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ue=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function me(fe){var Be=(fe<<1|fe<<11)&139536|(fe<<5|fe<<15)&558144;return(Be>>16|Be>>8|Be)&255}for(var ge=typeof Uint8Array<"u",ke=ge?new Uint8Array(256):[],ve=0;ve<256;++ve)ke[ve]=me(ve);function ae(fe,Be){var Ce=ke[fe&255];return Be<=8?Ce>>>8-Be:(Ce=Ce<<8|ke[fe>>8&255],Be<=16?Ce>>>16-Be:(Ce=Ce<<8|ke[fe>>16&255],Ce>>>24-Be))}function Re(fe,Be){var Ce=Be&7,_e=Be>>>3;return(fe[_e]|(Ce<=6?0:fe[_e+1]<<8))>>>Ce&3}function Je(fe,Be){var Ce=Be&7,_e=Be>>>3;return(fe[_e]|(Ce<=5?0:fe[_e+1]<<8))>>>Ce&7}function De(fe,Be){var Ce=Be&7,_e=Be>>>3;return(fe[_e]|(Ce<=4?0:fe[_e+1]<<8))>>>Ce&15}function Ee(fe,Be){var Ce=Be&7,_e=Be>>>3;return(fe[_e]|(Ce<=3?0:fe[_e+1]<<8))>>>Ce&31}function Ge(fe,Be){var Ce=Be&7,_e=Be>>>3;return(fe[_e]|(Ce<=1?0:fe[_e+1]<<8))>>>Ce&127}function tt(fe,Be,Ce){var _e=Be&7,Se=Be>>>3,Ne=(1<<Ce)-1,Ke=fe[Se]>>>_e;return Ce<8-_e||(Ke|=fe[Se+1]<<8-_e,Ce<16-_e)||(Ke|=fe[Se+2]<<16-_e,Ce<24-_e)||(Ke|=fe[Se+3]<<24-_e),Ke&Ne}function it(fe,Be,Ce){var _e=Be&7,Se=Be>>>3;return _e<=5?fe[Se]|=(Ce&7)<<_e:(fe[Se]|=Ce<<_e&255,fe[Se+1]=(Ce&7)>>8-_e),Be+3}function mt(fe,Be,Ce){var _e=Be&7,Se=Be>>>3;return Ce=(Ce&1)<<_e,fe[Se]|=Ce,Be+1}function Ct(fe,Be,Ce){var _e=Be&7,Se=Be>>>3;return Ce<<=_e,fe[Se]|=Ce&255,Ce>>>=8,fe[Se+1]=Ce,Be+8}function At(fe,Be,Ce){var _e=Be&7,Se=Be>>>3;return Ce<<=_e,fe[Se]|=Ce&255,Ce>>>=8,fe[Se+1]=Ce&255,fe[Se+2]=Ce>>>8,Be+16}function Nt(fe,Be){var Ce=fe.length,_e=2*Ce>Be?2*Ce:Be+5,Se=0;if(Ce>=Be)return fe;if(zn){var Ne=tI(_e);if(fe.copy)fe.copy(Ne);else for(;Se<fe.length;++Se)Ne[Se]=fe[Se];return Ne}else if(ge){var Ke=new Uint8Array(_e);if(Ke.set)Ke.set(fe);else for(;Se<Ce;++Se)Ke[Se]=fe[Se];return Ke}return fe.length=_e,fe}function It(fe){for(var Be=new Array(fe),Ce=0;Ce<fe;++Ce)Be[Ce]=0;return Be}function qt(fe,Be,Ce){var _e=1,Se=0,Ne=0,Ke=0,nt=0,Qe=fe.length,We=ge?new Uint16Array(32):It(32);for(Ne=0;Ne<32;++Ne)We[Ne]=0;for(Ne=Qe;Ne<Ce;++Ne)fe[Ne]=0;Qe=fe.length;var Xe=ge?new Uint16Array(Qe):It(Qe);for(Ne=0;Ne<Qe;++Ne)We[Se=fe[Ne]]++,_e<Se&&(_e=Se),Xe[Ne]=0;for(We[0]=0,Ne=1;Ne<=_e;++Ne)We[Ne+16]=nt=nt+We[Ne-1]<<1;for(Ne=0;Ne<Qe;++Ne)nt=fe[Ne],nt!=0&&(Xe[Ne]=We[nt+16]++);var vt=0;for(Ne=0;Ne<Qe;++Ne)if(vt=fe[Ne],vt!=0)for(nt=ae(Xe[Ne],_e)>>_e-vt,Ke=(1<<_e+4-vt)-1;Ke>=0;--Ke)Be[nt|Ke<<vt]=vt&15|Ne<<4;return _e}var Lt=ge?new Uint16Array(512):It(512),Vt=ge?new Uint16Array(32):It(32);if(!ge){for(var Yt=0;Yt<512;++Yt)Lt[Yt]=0;for(Yt=0;Yt<32;++Yt)Vt[Yt]=0}(function(){for(var fe=[],Be=0;Be<32;Be++)fe.push(5);qt(fe,Vt,32);var Ce=[];for(Be=0;Be<=143;Be++)Ce.push(8);for(;Be<=255;Be++)Ce.push(9);for(;Be<=279;Be++)Ce.push(7);for(;Be<=287;Be++)Ce.push(8);qt(Ce,Lt,288)})();var Mt=function(){for(var Be=ge?new Uint8Array(32768):[],Ce=0,_e=0;Ce<ue.length-1;++Ce)for(;_e<ue[Ce+1];++_e)Be[_e]=Ce;for(;_e<32768;++_e)Be[_e]=29;var Se=ge?new Uint8Array(259):[];for(Ce=0,_e=0;Ce<oe.length-1;++Ce)for(;_e<oe[Ce+1];++_e)Se[_e]=Ce;function Ne(nt,Qe){for(var We=0;We<nt.length;){var Xe=Math.min(65535,nt.length-We),vt=We+Xe==nt.length;for(Qe.write_shift(1,+vt),Qe.write_shift(2,Xe),Qe.write_shift(2,~Xe&65535);Xe-- >0;)Qe[Qe.l++]=nt[We++]}return Qe.l}function Ke(nt,Qe){for(var We=0,Xe=0,vt=ge?new Uint16Array(32768):[];Xe<nt.length;){var Bt=Math.min(65535,nt.length-Xe);if(Bt<10){for(We=it(Qe,We,+(Xe+Bt==nt.length)),We&7&&(We+=8-(We&7)),Qe.l=We/8|0,Qe.write_shift(2,Bt),Qe.write_shift(2,~Bt&65535);Bt-- >0;)Qe[Qe.l++]=nt[Xe++];We=Qe.l*8;continue}We=it(Qe,We,+(Xe+Bt==nt.length)+2);for(var Pt=0;Bt-- >0;){var St=nt[Xe];Pt=(Pt<<5^St)&32767;var Ft=-1,cn=0;if((Ft=vt[Pt])&&(Ft|=Xe&-32768,Ft>Xe&&(Ft-=32768),Ft<Xe))for(;nt[Ft+cn]==nt[Xe+cn]&&cn<250;)++cn;if(cn>2){St=Se[cn],St<=22?We=Ct(Qe,We,ke[St+1]>>1)-1:(Ct(Qe,We,3),We+=5,Ct(Qe,We,ke[St-23]>>5),We+=3);var Dn=St<8?0:St-4>>2;Dn>0&&(At(Qe,We,cn-oe[St]),We+=Dn),St=Be[Xe-Ft],We=Ct(Qe,We,ke[St]>>3),We-=3;var Un=St<4?0:St-2>>1;Un>0&&(At(Qe,We,Xe-Ft-ue[St]),We+=Un);for(var On=0;On<cn;++On)vt[Pt]=Xe&32767,Pt=(Pt<<5^nt[Xe])&32767,++Xe;Bt-=cn-1}else St<=143?St=St+48:We=mt(Qe,We,1),We=Ct(Qe,We,ke[St]),vt[Pt]=Xe&32767,++Xe}We=Ct(Qe,We,0)-1}return Qe.l=(We+7)/8|0,Qe.l}return function(Qe,We){return Qe.length<8?Ne(Qe,We):Ke(Qe,We)}}();function kt(fe){var Be=lt(50+Math.floor(fe.length*1.1)),Ce=Mt(fe,Be);return Be.slice(0,Ce)}var gt=ge?new Uint16Array(32768):It(32768),xn=ge?new Uint16Array(32768):It(32768),Wt=ge?new Uint16Array(128):It(128),rr=1,mn=1;function kn(fe,Be){var Ce=Ee(fe,Be)+257;Be+=5;var _e=Ee(fe,Be)+1;Be+=5;var Se=De(fe,Be)+4;Be+=4;for(var Ne=0,Ke=ge?new Uint8Array(19):It(19),nt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Qe=1,We=ge?new Uint8Array(8):It(8),Xe=ge?new Uint8Array(8):It(8),vt=Ke.length,Bt=0;Bt<Se;++Bt)Ke[ne[Bt]]=Ne=Je(fe,Be),Qe<Ne&&(Qe=Ne),We[Ne]++,Be+=3;var Pt=0;for(We[0]=0,Bt=1;Bt<=Qe;++Bt)Xe[Bt]=Pt=Pt+We[Bt-1]<<1;for(Bt=0;Bt<vt;++Bt)(Pt=Ke[Bt])!=0&&(nt[Bt]=Xe[Pt]++);var St=0;for(Bt=0;Bt<vt;++Bt)if(St=Ke[Bt],St!=0){Pt=ke[nt[Bt]]>>8-St;for(var Ft=(1<<7-St)-1;Ft>=0;--Ft)Wt[Pt|Ft<<St]=St&7|Bt<<3}var cn=[];for(Qe=1;cn.length<Ce+_e;)switch(Pt=Wt[Ge(fe,Be)],Be+=Pt&7,Pt>>>=3){case 16:for(Ne=3+Re(fe,Be),Be+=2,Pt=cn[cn.length-1];Ne-- >0;)cn.push(Pt);break;case 17:for(Ne=3+Je(fe,Be),Be+=3;Ne-- >0;)cn.push(0);break;case 18:for(Ne=11+Ge(fe,Be),Be+=7;Ne-- >0;)cn.push(0);break;default:cn.push(Pt),Qe<Pt&&(Qe=Pt);break}var Dn=cn.slice(0,Ce),Un=cn.slice(Ce);for(Bt=Ce;Bt<286;++Bt)Dn[Bt]=0;for(Bt=_e;Bt<30;++Bt)Un[Bt]=0;return rr=qt(Dn,gt,286),mn=qt(Un,xn,30),Be}function Er(fe,Be){if(fe[0]==3&&!(fe[1]&3))return[Kd(Be),2];for(var Ce=0,_e=0,Se=tI(Be||1<<18),Ne=0,Ke=Se.length>>>0,nt=0,Qe=0;(_e&1)==0;){if(_e=Je(fe,Ce),Ce+=3,_e>>>1)_e>>1==1?(nt=9,Qe=5):(Ce=kn(fe,Ce),nt=rr,Qe=mn);else{Ce&7&&(Ce+=8-(Ce&7));var We=fe[Ce>>>3]|fe[(Ce>>>3)+1]<<8;if(Ce+=32,We>0)for(!Be&&Ke<Ne+We&&(Se=Nt(Se,Ne+We),Ke=Se.length);We-- >0;)Se[Ne++]=fe[Ce>>>3],Ce+=8;continue}for(;;){!Be&&Ke<Ne+32767&&(Se=Nt(Se,Ne+32767),Ke=Se.length);var Xe=tt(fe,Ce,nt),vt=_e>>>1==1?Lt[Xe]:gt[Xe];if(Ce+=vt&15,vt>>>=4,(vt>>>8&255)===0)Se[Ne++]=vt;else{if(vt==256)break;vt-=257;var Bt=vt<8?0:vt-4>>2;Bt>5&&(Bt=0);var Pt=Ne+oe[vt];Bt>0&&(Pt+=tt(fe,Ce,Bt),Ce+=Bt),Xe=tt(fe,Ce,Qe),vt=_e>>>1==1?Vt[Xe]:xn[Xe],Ce+=vt&15,vt>>>=4;var St=vt<4?0:vt-2>>1,Ft=ue[vt];for(St>0&&(Ft+=tt(fe,Ce,St),Ce+=St),!Be&&Ke<Pt&&(Se=Nt(Se,Pt+100),Ke=Se.length);Ne<Pt;)Se[Ne]=Se[Ne-Ft],++Ne}}}return Be?[Se,Ce+7>>>3]:[Se.slice(0,Ne),Ce+7>>>3]}function Tn(fe,Be){var Ce=fe.slice(fe.l||0),_e=Er(Ce,Be);return fe.l+=_e[1],_e[0]}function Zs(fe,Be){if(fe)typeof console<"u"&&console.error(Be);else throw new Error(Be)}function Jn(fe,Be){var Ce=fe;Za(Ce,0);var _e=[],Se=[],Ne={FileIndex:_e,FullPaths:Se};S(Ne,{root:Be.root});for(var Ke=Ce.length-4;(Ce[Ke]!=80||Ce[Ke+1]!=75||Ce[Ke+2]!=5||Ce[Ke+3]!=6)&&Ke>=0;)--Ke;Ce.l=Ke+4,Ce.l+=4;var nt=Ce.read_shift(2);Ce.l+=6;var Qe=Ce.read_shift(4);for(Ce.l=Qe,Ke=0;Ke<nt;++Ke){Ce.l+=20;var We=Ce.read_shift(4),Xe=Ce.read_shift(4),vt=Ce.read_shift(2),Bt=Ce.read_shift(2),Pt=Ce.read_shift(2);Ce.l+=8;var St=Ce.read_shift(4),Ft=o(Ce.slice(Ce.l+vt,Ce.l+vt+Bt));Ce.l+=vt+Bt+Pt;var cn=Ce.l;Ce.l=St+4,qr(Ce,We,Xe,Ne,Ft),Ce.l=cn}return Ne}function qr(fe,Be,Ce,_e,Se){fe.l+=2;var Ne=fe.read_shift(2),Ke=fe.read_shift(2),nt=i(fe);if(Ne&8257)throw new Error("Unsupported ZIP encryption");for(var Qe=fe.read_shift(4),We=fe.read_shift(4),Xe=fe.read_shift(4),vt=fe.read_shift(2),Bt=fe.read_shift(2),Pt="",St=0;St<vt;++St)Pt+=String.fromCharCode(fe[fe.l++]);if(Bt){var Ft=o(fe.slice(fe.l,fe.l+Bt));(Ft[21589]||{}).mt&&(nt=Ft[21589].mt),((Se||{})[21589]||{}).mt&&(nt=Se[21589].mt)}fe.l+=Bt;var cn=fe.slice(fe.l,fe.l+We);switch(Ke){case 8:cn=W(fe,Xe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ke)}var Dn=!1;Ne&8&&(Qe=fe.read_shift(4),Qe==134695760&&(Qe=fe.read_shift(4),Dn=!0),We=fe.read_shift(4),Xe=fe.read_shift(4)),We!=Be&&Zs(Dn,"Bad compressed size: "+Be+" != "+We),Xe!=Ce&&Zs(Dn,"Bad uncompressed size: "+Ce+" != "+Xe),Xn(_e,Pt,cn,{unsafe:!0,mt:nt})}function as(fe,Be){var Ce=Be||{},_e=[],Se=[],Ne=lt(1),Ke=Ce.compression?8:0,nt=0,Qe=0,We=0,Xe=0,vt=0,Bt=fe.FullPaths[0],Pt=Bt,St=fe.FileIndex[0],Ft=[],cn=0;for(Qe=1;Qe<fe.FullPaths.length;++Qe)if(Pt=fe.FullPaths[Qe].slice(Bt.length),St=fe.FileIndex[Qe],!(!St.size||!St.content||Pt=="Sh33tJ5")){var Dn=Xe,Un=lt(Pt.length);for(We=0;We<Pt.length;++We)Un.write_shift(1,Pt.charCodeAt(We)&127);Un=Un.slice(0,Un.l),Ft[vt]=Sae.buf(St.content,0);var On=St.content;Ke==8&&(On=J(On)),Ne=lt(30),Ne.write_shift(4,67324752),Ne.write_shift(2,20),Ne.write_shift(2,nt),Ne.write_shift(2,Ke),St.mt?a(Ne,St.mt):Ne.write_shift(4,0),Ne.write_shift(-4,Ft[vt]),Ne.write_shift(4,On.length),Ne.write_shift(4,St.content.length),Ne.write_shift(2,Un.length),Ne.write_shift(2,0),Xe+=Ne.length,_e.push(Ne),Xe+=Un.length,_e.push(Un),Xe+=On.length,_e.push(On),Ne=lt(46),Ne.write_shift(4,33639248),Ne.write_shift(2,0),Ne.write_shift(2,20),Ne.write_shift(2,nt),Ne.write_shift(2,Ke),Ne.write_shift(4,0),Ne.write_shift(-4,Ft[vt]),Ne.write_shift(4,On.length),Ne.write_shift(4,St.content.length),Ne.write_shift(2,Un.length),Ne.write_shift(2,0),Ne.write_shift(2,0),Ne.write_shift(2,0),Ne.write_shift(2,0),Ne.write_shift(4,0),Ne.write_shift(4,Dn),cn+=Ne.l,Se.push(Ne),cn+=Un.length,Se.push(Un),++vt}return Ne=lt(22),Ne.write_shift(4,101010256),Ne.write_shift(2,0),Ne.write_shift(2,0),Ne.write_shift(2,vt),Ne.write_shift(2,vt),Ne.write_shift(4,cn),Ne.write_shift(4,Xe),Ne.write_shift(2,0),Oa([Oa(_e),Oa(Se),Ne])}var Rn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Zt(fe,Be){if(fe.ctype)return fe.ctype;var Ce=fe.name||"",_e=Ce.match(/\.([^\.]+)$/);return _e&&Rn[_e[1]]||Be&&(_e=(Ce=Be).match(/[\.\\]([^\.\\])+$/),_e&&Rn[_e[1]])?Rn[_e[1]]:"application/octet-stream"}function jn(fe){for(var Be=Ng(fe),Ce=[],_e=0;_e<Be.length;_e+=76)Ce.push(Be.slice(_e,_e+76));return Ce.join(`\r
`)+`\r
`}function ea(fe){var Be=fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(We){var Xe=We.charCodeAt(0).toString(16).toUpperCase();return"="+(Xe.length==1?"0"+Xe:Xe)});Be=Be.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Be.charAt(0)==`
`&&(Be="=0D"+Be.slice(1)),Be=Be.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ce=[],_e=Be.split(`\r
`),Se=0;Se<_e.length;++Se){var Ne=_e[Se];if(Ne.length==0){Ce.push("");continue}for(var Ke=0;Ke<Ne.length;){var nt=76,Qe=Ne.slice(Ke,Ke+nt);Qe.charAt(nt-1)=="="?nt--:Qe.charAt(nt-2)=="="?nt-=2:Qe.charAt(nt-3)=="="&&(nt-=3),Qe=Ne.slice(Ke,Ke+nt),Ke+=nt,Ke<Ne.length&&(Qe+="="),Ce.push(Qe)}}return Ce.join(`\r
`)}function jr(fe){for(var Be=[],Ce=0;Ce<fe.length;++Ce){for(var _e=fe[Ce];Ce<=fe.length&&_e.charAt(_e.length-1)=="=";)_e=_e.slice(0,_e.length-1)+fe[++Ce];Be.push(_e)}for(var Se=0;Se<Be.length;++Se)Be[Se]=Be[Se].replace(/[=][0-9A-Fa-f]{2}/g,function(Ne){return String.fromCharCode(parseInt(Ne.slice(1),16))});return jo(Be.join(`\r
`))}function us(fe,Be,Ce){for(var _e="",Se="",Ne="",Ke,nt=0;nt<10;++nt){var Qe=Be[nt];if(!Qe||Qe.match(/^\s*$/))break;var We=Qe.match(/^(.*?):\s*([^\s].*)$/);if(We)switch(We[1].toLowerCase()){case"content-location":_e=We[2].trim();break;case"content-type":Ne=We[2].trim();break;case"content-transfer-encoding":Se=We[2].trim();break}}switch(++nt,Se.toLowerCase()){case"base64":Ke=jo(Vo(Be.slice(nt).join("")));break;case"quoted-printable":Ke=jr(Be.slice(nt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Se)}var Xe=Xn(fe,_e.slice(Ce.length),Ke,{unsafe:!0});Ne&&(Xe.ctype=Ne)}function ma(fe,Be){if(Z(fe.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ce=Be&&Be.root||"",_e=(zn&&Buffer.isBuffer(fe)?fe.toString("binary"):Z(fe)).split(`\r
`),Se=0,Ne="";for(Se=0;Se<_e.length;++Se)if(Ne=_e[Se],!!/^Content-Location:/i.test(Ne)&&(Ne=Ne.slice(Ne.indexOf("file")),Ce||(Ce=Ne.slice(0,Ne.lastIndexOf("/")+1)),Ne.slice(0,Ce.length)!=Ce))for(;Ce.length>0&&(Ce=Ce.slice(0,Ce.length-1),Ce=Ce.slice(0,Ce.lastIndexOf("/")+1),Ne.slice(0,Ce.length)!=Ce););var Ke=(_e[1]||"").match(/boundary="(.*?)"/);if(!Ke)throw new Error("MAD cannot find boundary");var nt="--"+(Ke[1]||""),Qe=[],We=[],Xe={FileIndex:Qe,FullPaths:We};S(Xe);var vt,Bt=0;for(Se=0;Se<_e.length;++Se){var Pt=_e[Se];Pt!==nt&&Pt!==nt+"--"||(Bt++&&us(Xe,_e.slice(vt,Se),Ce),vt=Se)}return Xe}function Ht(fe,Be){var Ce=Be||{},_e=Ce.boundary||"SheetJS";_e="------="+_e;for(var Se=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+_e.slice(2)+'"',"","",""],Ne=fe.FullPaths[0],Ke=Ne,nt=fe.FileIndex[0],Qe=1;Qe<fe.FullPaths.length;++Qe)if(Ke=fe.FullPaths[Qe].slice(Ne.length),nt=fe.FileIndex[Qe],!(!nt.size||!nt.content||Ke=="Sh33tJ5")){Ke=Ke.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(cn){return"_x"+cn.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(cn){return"_u"+cn.charCodeAt(0).toString(16)+"_"});for(var We=nt.content,Xe=zn&&Buffer.isBuffer(We)?We.toString("binary"):Z(We),vt=0,Bt=Math.min(1024,Xe.length),Pt=0,St=0;St<=Bt;++St)(Pt=Xe.charCodeAt(St))>=32&&Pt<128&&++vt;var Ft=vt>=Bt*4/5;Se.push(_e),Se.push("Content-Location: "+(Ce.root||"file:///C:/SheetJS/")+Ke),Se.push("Content-Transfer-Encoding: "+(Ft?"quoted-printable":"base64")),Se.push("Content-Type: "+Zt(nt,Ke)),Se.push(""),Se.push(Ft?ea(Xe):jn(Xe))}return Se.push(_e+`--\r
`),Se.join(`\r
`)}function sr(fe){var Be={};return S(Be,fe),Be}function Xn(fe,Be,Ce,_e){var Se=_e&&_e.unsafe;Se||S(fe);var Ne=!Se&&ln.find(fe,Be);if(!Ne){var Ke=fe.FullPaths[0];Be.slice(0,Ke.length)==Ke?Ke=Be:(Ke.slice(-1)!="/"&&(Ke+="/"),Ke=(Ke+Be).replace("//","/")),Ne={name:s(Be),type:2},fe.FileIndex.push(Ne),fe.FullPaths.push(Ke),Se||ln.utils.cfb_gc(fe)}return Ne.content=Ce,Ne.size=Ce?Ce.length:0,_e&&(_e.CLSID&&(Ne.clsid=_e.CLSID),_e.mt&&(Ne.mt=_e.mt),_e.ct&&(Ne.ct=_e.ct)),Ne}function _r(fe,Be){S(fe);var Ce=ln.find(fe,Be);if(Ce){for(var _e=0;_e<fe.FileIndex.length;++_e)if(fe.FileIndex[_e]==Ce)return fe.FileIndex.splice(_e,1),fe.FullPaths.splice(_e,1),!0}return!1}function Nr(fe,Be,Ce){S(fe);var _e=ln.find(fe,Be);if(_e){for(var Se=0;Se<fe.FileIndex.length;++Se)if(fe.FileIndex[Se]==_e)return fe.FileIndex[Se].name=s(Ce),fe.FullPaths[Se]=Ce,!0}return!1}function Or(fe){T(fe,!0)}return e.find=M,e.read=P,e.parse=d,e.write=X,e.writeFile=se,e.utils={cfb_new:sr,cfb_add:Xn,cfb_del:_r,cfb_mov:Nr,cfb_gc:Or,ReadShift:ig,CheckField:I8,prep_blob:Za,bconcat:Oa,use_zlib:j,_deflateRaw:kt,_inflateRaw:Tn,consts:q},e}();function Tae(t){return typeof t=="string"?Ny(t):Array.isArray(t)?Zse(t):t}function ux(t,e,n){if(typeof Deno<"u"){if(n&&typeof e=="string")switch(n){case"utf8":e=new TextEncoder(n).encode(e);break;case"binary":e=Ny(e);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(t,e)}var r=n=="utf8"?iA(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,t);if(typeof Blob<"u"){var s=new Blob([Tae(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,t);if(typeof saveAs<"u")return saveAs(s,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=Xd(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function Bae(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var n=e.read();return e.close(),n}catch(r){if(!r.message||!r.message.match(/onstruct/))throw r}throw new Error("Cannot access file "+t)}function Ds(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(t,e[r])&&n.push(e[r]);return n}function cI(t,e){for(var n=[],r=Ds(t),s=0;s!==r.length;++s)n[t[r[s]][e]]==null&&(n[t[r[s]][e]]=r[s]);return n}function Iy(t){for(var e=[],n=Ds(t),r=0;r!==n.length;++r)e[t[n[r]]]=n[r];return e}function Fy(t){for(var e=[],n=Ds(t),r=0;r!==n.length;++r)e[t[n[r]]]=parseInt(n[r],10);return e}function Nae(t){for(var e=[],n=Ds(t),r=0;r!==n.length;++r)e[t[n[r]]]==null&&(e[t[n[r]]]=[]),e[t[n[r]]].push(n[r]);return e}var T2=new Date(1899,11,30,0,0,0);function Ta(t,e){var n=t.getTime(),r=T2.getTime()+(t.getTimezoneOffset()-T2.getTimezoneOffset())*6e4;return(n-r)/(1440*60*1e3)}var A8=new Date,kae=T2.getTime()+(A8.getTimezoneOffset()-T2.getTimezoneOffset())*6e4,AI=A8.getTimezoneOffset();function Ry(t){var e=new Date;return e.setTime(t*24*60*60*1e3+kae),e.getTimezoneOffset()!==AI&&e.setTime(e.getTime()+(e.getTimezoneOffset()-AI)*6e4),e}function Iae(t){var e=0,n=0,r=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var a=1;a!=s.length;++a)if(s[a]){switch(n=1,a>3&&(r=!0),s[a].slice(s[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[a].slice(s[a].length-1));case"D":n*=24;case"H":n*=60;case"M":if(r)n*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=n*parseInt(s[a],10)}return e}var uI=new Date("2017-02-19T19:06:09.000Z"),u8=isNaN(uI.getFullYear())?new Date("2/19/17"):uI,Fae=u8.getFullYear()==2017;function rs(t,e){var n=new Date(t);if(Fae)return e>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):e<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(t instanceof Date)return t;if(u8.getFullYear()==1917&&!isNaN(n.getFullYear())){var r=n.getFullYear();return t.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function nh(t,e){if(zn&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return iA(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return iA(XL(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return iA(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return iA(new TextDecoder("utf-16be").decode(t.slice(2)))}var n={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(a){return n[a]||a})}catch{}for(var r=[],s=0;s!=t.length;++s)r.push(String.fromCharCode(t[s]));return r.join("")}function ss(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=ss(t[n]));return e}function Is(t,e){for(var n="";n.length<e;)n+=t;return n}function uc(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var n=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(s,a){return n=-n,a}),!isNaN(e=Number(r)))?e/n:e}var Rae=["january","february","march","april","may","june","july","august","september","october","november","december"];function im(t){var e=new Date(t),n=new Date(NaN),r=e.getYear(),s=e.getMonth(),a=e.getDate();if(isNaN(a))return n;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&Rae.indexOf(i)==-1)return n}else if(i.match(/[a-z]/))return n;return r<0||r>8099?n:(s>0||a>1)&&r!=101?e:t.match(/[^-0-9:,\/\\]/)?n:e}var Dae=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(n,r,s){if(t||typeof r=="string")return n.split(r);for(var a=n.split(r),i=[a[0]],o=1;o<a.length;++o)i.push(s),i.push(a[o]);return i}}();function d8(t){return t?t.content&&t.type?nh(t.content,!0):t.data?Mp(t.data):t.asNodeBuffer&&zn?Mp(t.asNodeBuffer().toString("binary")):t.asBinary?Mp(t.asBinary()):t._data&&t._data.getContent?Mp(nh(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function f8(t){if(!t)return null;if(t.data)return Zk(t.data);if(t.asNodeBuffer&&zn)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?Zk(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function Uae(t){return t&&t.name.slice(-4)===".bin"?f8(t):d8(t)}function xl(t,e){for(var n=t.FullPaths||Ds(t.files),r=e.toLowerCase().replace(/[\/]/g,"\\"),s=r.replace(/\\/g,"/"),a=0;a<n.length;++a){var i=n[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(r==i||s==i)return t.files?t.files[n[a]]:t.FileIndex[a]}return null}function J5(t,e){var n=xl(t,e);if(n==null)throw new Error("Cannot find file "+e+" in zip");return n}function ca(t,e,n){if(!n)return Uae(J5(t,e));if(!e)return null;try{return ca(t,e)}catch{return null}}function Oo(t,e,n){if(!n)return d8(J5(t,e));if(!e)return null;try{return Oo(t,e)}catch{return null}}function Lae(t,e,n){return f8(J5(t,e))}function dI(t){for(var e=t.FullPaths||Ds(t.files),n=[],r=0;r<e.length;++r)e[r].slice(-1)!="/"&&n.push(e[r].replace(/^Root Entry[\/]/,""));return n.sort()}function Pn(t,e,n){if(t.FullPaths){if(typeof n=="string"){var r;return zn?r=vu(n):r=eae(n),ln.utils.cfb_add(t,e,r)}ln.utils.cfb_add(t,e,n)}else t.file(e,n)}function X5(){return ln.utils.cfb_new()}function h8(t,e){switch(e.type){case"base64":return ln.read(t,{type:"base64"});case"binary":return ln.read(t,{type:"binary"});case"buffer":case"array":return ln.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function jp(t,e){if(t.charAt(0)=="/")return t.slice(1);var n=e.split("/");e.slice(-1)!="/"&&n.pop();for(var r=t.split("/");r.length!==0;){var s=r.shift();s===".."?n.pop():s!=="."&&n.push(s)}return n.join("/")}var Xs=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Mae=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,fI=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Pae=/<[^>]*>/g,Ui=Xs.match(fI)?fI:Pae,jae=/<\w*:/,Oae=/<(\/?)\w+:/;function En(t,e,n){for(var r={},s=0,a=0;s!==t.length&&!((a=t.charCodeAt(s))===32||a===10||a===13);++s);if(e||(r[0]=t.slice(0,s)),s===t.length)return r;var i=t.match(Mae),o=0,l="",A=0,d="",h="",p=1;if(i)for(A=0;A!=i.length;++A){for(h=i[A],a=0;a!=h.length&&h.charCodeAt(a)!==61;++a);for(d=h.slice(0,a).trim();h.charCodeAt(a+1)==32;)++a;for(p=(s=h.charCodeAt(a+1))==34||s==39?1:0,l=h.slice(a+1+p,h.length-p),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),r[d]=l,r[d.toLowerCase()]=l;else{var g=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(r[g]&&d.slice(o-3,o)=="ext")continue;r[g]=l,r[g.toLowerCase()]=l}}return r}function pA(t){return t.replace(Oae,"<$1")}var m8={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Z5=Iy(m8),mr=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function n(r){var s=r+"",a=s.indexOf("<![CDATA[");if(a==-1)return s.replace(t,function(o,l){return m8[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=s.indexOf("]]>");return n(s.slice(0,a))+s.slice(a+9,i)+n(s.slice(i+3))}}(),eS=/[&<>'"]/g,Qae=/[\u0000-\u0008\u000b-\u001f]/g;function Mr(t){var e=t+"";return e.replace(eS,function(n){return Z5[n]}).replace(Qae,function(n){return"_x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+"_"})}function hI(t){return Mr(t).replace(/ /g,"_x0020_")}var p8=/[\u0000-\u001f]/g;function tS(t){var e=t+"";return e.replace(eS,function(n){return Z5[n]}).replace(/\n/g,"<br/>").replace(p8,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}function Hae(t){var e=t+"";return e.replace(eS,function(n){return Z5[n]}).replace(p8,function(n){return"&#x"+n.charCodeAt(0).toString(16).toUpperCase()+";"})}var mI=function(){var t=/&#(\d+);/g;function e(n,r){return String.fromCharCode(parseInt(r,10))}return function(r){return r.replace(t,e)}}();function Vae(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function ts(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function eC(t){for(var e="",n=0,r=0,s=0,a=0,i=0,o=0;n<t.length;){if(r=t.charCodeAt(n++),r<128){e+=String.fromCharCode(r);continue}if(s=t.charCodeAt(n++),r>191&&r<224){i=(r&31)<<6,i|=s&63,e+=String.fromCharCode(i);continue}if(a=t.charCodeAt(n++),r<240){e+=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63);continue}i=t.charCodeAt(n++),o=((r&7)<<18|(s&63)<<12|(a&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function pI(t){var e=Kd(2*t.length),n,r,s=1,a=0,i=0,o;for(r=0;r<t.length;r+=s)s=1,(o=t.charCodeAt(r))<128?n=o:o<224?(n=(o&31)*64+(t.charCodeAt(r+1)&63),s=2):o<240?(n=(o&15)*4096+(t.charCodeAt(r+1)&63)*64+(t.charCodeAt(r+2)&63),s=3):(s=4,n=(o&7)*262144+(t.charCodeAt(r+1)&63)*4096+(t.charCodeAt(r+2)&63)*64+(t.charCodeAt(r+3)&63),n-=65536,i=55296+(n>>>10&1023),n=56320+(n&1023)),i!==0&&(e[a++]=i&255,e[a++]=i>>>8,i=0),e[a++]=n%256,e[a++]=n>>>8;return e.slice(0,a).toString("ucs2")}function gI(t){return vu(t,"binary").toString("utf8")}var P1="foo bar bazâð£",Kr=zn&&(gI(P1)==eC(P1)&&gI||pI(P1)==eC(P1)&&pI)||eC,iA=zn?function(t){return vu(t,"utf8").toString("binary")}:function(t){for(var e=[],n=0,r=0,s=0;n<t.length;)switch(r=t.charCodeAt(n++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,s=t.charCodeAt(n++)-56320+(r<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},Ig=function(){var t={};return function(n,r){var s=n+"|"+(r||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+n+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+n+">",r||"")}}(),g8=function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(n){for(var r=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)r=r.replace(t[s][0],t[s][1]);return r}}(),Gae=function(){var t={};return function(n){return t[n]!==void 0?t[n]:t[n]=new RegExp("<(?:vt:)?"+n+">([\\s\\S]*?)</(?:vt:)?"+n+">","g")}}(),zae=/<\/?(?:vt:)?variant>/g,Kae=/<(?:vt:)([^>]*)>([\s\S]*)</;function xI(t,e){var n=En(t),r=t.match(Gae(n.baseType))||[],s=[];if(r.length!=n.size){if(e.WTF)throw new Error("unexpected vector length "+r.length+" != "+n.size);return s}return r.forEach(function(a){var i=a.replace(zae,"").match(Kae);i&&s.push({v:Kr(i[2]),t:i[1]})}),s}var x8=/(^\s|\s$|\n)/;function ei(t,e){return"<"+t+(e.match(x8)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function Fg(t){return Ds(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Rt(t,e,n){return"<"+t+(n!=null?Fg(n):"")+(e!=null?(e.match(x8)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function n_(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(n){if(e)throw n}return""}function qae(t,e){switch(typeof t){case"string":var n=Rt("vt:lpwstr",Mr(t));return n=n.replace(/&quot;/g,"_x0022_"),n;case"number":return Rt((t|0)==t?"vt:i4":"vt:r8",Mr(String(t)));case"boolean":return Rt("vt:bool",t?"true":"false")}if(t instanceof Date)return Rt("vt:filetime",n_(t));throw new Error("Unable to serialize "+t)}function nS(t){if(zn&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Kr(Xd(W5(t)));throw new Error("Bad input format: expected Buffer or string")}var Rg=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ea={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},hh=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Mo={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Wae(t,e){for(var n=1-2*(t[e+7]>>>7),r=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,a=5;a>=0;--a)s=s*256+t[e+a];return r==2047?s==0?n*(1/0):NaN:(r==0?r=-1022:(r-=1023,s+=Math.pow(2,52)),n*Math.pow(2,r-52)*s)}function $ae(t,e,n){var r=(e<0||1/e==-1/0?1:0)<<7,s=0,a=0,i=r?-e:e;isFinite(i)?i==0?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(e)?26985:0);for(var o=0;o<=5;++o,a/=256)t[n+o]=a&255;t[n+6]=(s&15)<<4|a&15,t[n+7]=s>>4|r}var vI=function(t){for(var e=[],n=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var s=0,a=t[0][r].length;s<a;s+=n)e.push.apply(e,t[0][r].slice(s,s+n));return e},yI=zn?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:vu(e)})):vI(t)}:vI,wI=function(t,e,n){for(var r=[],s=e;s<n;s+=2)r.push(String.fromCharCode(ru(t,s)));return r.join("").replace(zi,"")},rS=zn?function(t,e,n){return Buffer.isBuffer(t)?t.toString("utf16le",e,n).replace(zi,""):wI(t,e,n)}:wI,bI=function(t,e,n){for(var r=[],s=e;s<e+n;++s)r.push(("0"+t[s].toString(16)).slice(-2));return r.join("")},v8=zn?function(t,e,n){return Buffer.isBuffer(t)?t.toString("hex",e,e+n):bI(t,e,n)}:bI,CI=function(t,e,n){for(var r=[],s=e;s<n;s++)r.push(String.fromCharCode(y0(t,s)));return r.join("")},dx=zn?function(e,n,r){return Buffer.isBuffer(e)?e.toString("utf8",n,r):CI(e,n,r)}:CI,y8=function(t,e){var n=Po(t,e);return n>0?dx(t,e+4,e+4+n-1):""},w8=y8,b8=function(t,e){var n=Po(t,e);return n>0?dx(t,e+4,e+4+n-1):""},C8=b8,E8=function(t,e){var n=2*Po(t,e);return n>0?dx(t,e+4,e+4+n-1):""},_8=E8,S8=function(e,n){var r=Po(e,n);return r>0?rS(e,n+4,n+4+r):""},T8=S8,B8=function(t,e){var n=Po(t,e);return n>0?dx(t,e+4,e+4+n):""},N8=B8,k8=function(t,e){return Wae(t,e)},B2=k8,sS=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};zn&&(w8=function(e,n){if(!Buffer.isBuffer(e))return y8(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},C8=function(e,n){if(!Buffer.isBuffer(e))return b8(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},_8=function(e,n){if(!Buffer.isBuffer(e))return E8(e,n);var r=2*e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r-1)},T8=function(e,n){if(!Buffer.isBuffer(e))return S8(e,n);var r=e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r)},N8=function(e,n){if(!Buffer.isBuffer(e))return B8(e,n);var r=e.readUInt32LE(n);return e.toString("utf8",n+4,n+4+r)},B2=function(e,n){return Buffer.isBuffer(e)?e.readDoubleLE(n):k8(e,n)},sS=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var y0=function(t,e){return t[e]},ru=function(t,e){return t[e+1]*256+t[e]},Yae=function(t,e){var n=t[e+1]*256+t[e];return n<32768?n:(65535-n+1)*-1},Po=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},If=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},Jae=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function ig(t,e){var n="",r,s,a=[],i,o,l,A;switch(e){case"dbcs":if(A=this.l,zn&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)n+=String.fromCharCode(ru(this,A)),A+=2;t*=2;break;case"utf8":n=dx(this,this.l,this.l+t);break;case"utf16le":t*=2,n=rS(this,this.l,this.l+t);break;case"wstr":return ig.call(this,t,"dbcs");case"lpstr-ansi":n=w8(this,this.l),t=4+Po(this,this.l);break;case"lpstr-cp":n=C8(this,this.l),t=4+Po(this,this.l);break;case"lpwstr":n=_8(this,this.l),t=4+2*Po(this,this.l);break;case"lpp4":t=4+Po(this,this.l),n=T8(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Po(this,this.l),n=N8(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,n="";(i=y0(this,this.l+t++))!==0;)a.push(M1(i));n=a.join("");break;case"_wstr":for(t=0,n="";(i=ru(this,this.l+t))!==0;)a.push(M1(i)),t+=2;t+=2,n=a.join("");break;case"dbcs-cont":for(n="",A=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(A)!==-1)return i=y0(this,A),this.l=A+1,o=ig.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(M1(ru(this,A))),A+=2}n=a.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(n="",A=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(A)!==-1)return i=y0(this,A),this.l=A+1,o=ig.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(M1(y0(this,A))),A+=1}n=a.join("");break;default:switch(t){case 1:return r=y0(this,this.l),this.l++,r;case 2:return r=(e==="i"?Yae:ru)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(t>0?If:Jae)(this,this.l),this.l+=4,r):(s=Po(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=B2(this,this.l):s=B2([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:n=v8(this,this.l,t);break}}return this.l+=t,n}var Xae=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24&255},Zae=function(t,e,n){t[n]=e&255,t[n+1]=e>>8&255,t[n+2]=e>>16&255,t[n+3]=e>>24&255},eie=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255};function tie(t,e,n){var r=0,s=0;if(n==="dbcs"){for(s=0;s!=e.length;++s)eie(this,e.charCodeAt(s),this.l+2*s);r=2*e.length}else if(n==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;r=e.length}else if(n==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(n==="utf16le"){var a=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var i=e.charCodeAt(s);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(t){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,Xae(this,e,this.l);break;case 8:if(r=8,n==="f"){$ae(this,e,this.l);break}case 16:break;case-4:r=4,Zae(this,e,this.l);break}return this.l+=r,this}function I8(t,e){var n=v8(this,this.l,t.length>>1);if(n!==t)throw new Error(e+"Expected "+t+" saw "+n);this.l+=t.length>>1}function Za(t,e){t.l=e,t.read_shift=ig,t.chk=I8,t.write_shift=tie}function Ri(t,e){t.l+=e}function lt(t){var e=Kd(t);return Za(e,0),e}function yu(t,e,n){if(t){var r,s,a;Za(t,t.l||0);for(var i=t.length,o=0,l=0;t.l<i;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var A=jg[o]||jg[65535];for(r=t.read_shift(1),a=r&127,s=1;s<4&&r&128;++s)a+=((r=t.read_shift(1))&127)<<7*s;l=t.l+a;var d=A.f&&A.f(t,a,n);if(t.l=l,e(d,A,o))return}}}function fo(){var t=[],e=zn?256:2048,n=function(A){var d=lt(A);return Za(d,0),d},r=n(e),s=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r),r=null)},a=function(A){return r&&A<r.length-r.l?r:(s(),r=n(Math.max(A+1,e)))},i=function(){return s(),Oa(t)},o=function(A){s(),r=A,r.l==null&&(r.l=r.length),a(e)};return{next:a,push:o,end:i,_bufs:t}}function bt(t,e,n,r){var s=+e,a;if(!isNaN(s)){r||(r=jg[s].p||(n||[]).length||0),a=1+(s>=128?1:0)+1,r>=128&&++a,r>=16384&&++a,r>=2097152&&++a;var i=t.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,(s&127)+128),i.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(r>=128)i.write_shift(1,(r&127)+128),r>>=7;else{i.write_shift(1,r);break}r>0&&sS(n)&&t.push(n)}}function og(t,e,n){var r=ss(t);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function EI(t,e,n){var r=ss(t);return r.s=og(r.s,e.s,n),r.e=og(r.e,e.s,n),r}function lg(t,e){if(t.cRel&&t.c<0)for(t=ss(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=ss(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var n=wn(t);return!t.cRel&&t.cRel!=null&&(n=sie(n)),!t.rRel&&t.rRel!=null&&(n=nie(n)),n}function tC(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+xs(t.s.c)+":"+(t.e.cRel?"":"$")+xs(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Ys(t.s.r)+":"+(t.e.rRel?"":"$")+Ys(t.e.r):lg(t.s,e.biff)+":"+lg(t.e,e.biff)}function aS(t){return parseInt(rie(t),10)-1}function Ys(t){return""+(t+1)}function nie(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function rie(t){return t.replace(/\$(\d+)$/,"$1")}function iS(t){for(var e=aie(t),n=0,r=0;r!==e.length;++r)n=26*n+e.charCodeAt(r)-64;return n-1}function xs(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function sie(t){return t.replace(/^([A-Z])/,"$$$1")}function aie(t){return t.replace(/^\$([A-Z])/,"$1")}function iie(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function vs(t){for(var e=0,n=0,r=0;r<t.length;++r){var s=t.charCodeAt(r);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(n=26*n+(s-64))}return{c:n-1,r:e-1}}function wn(t){for(var e=t.c+1,n="";e;e=(e-1)/26|0)n=String.fromCharCode((e-1)%26+65)+n;return n+(t.r+1)}function po(t){var e=t.indexOf(":");return e==-1?{s:vs(t),e:vs(t)}:{s:vs(t.slice(0,e)),e:vs(t.slice(e+1))}}function Fn(t,e){return typeof e>"u"||typeof e=="number"?Fn(t.s,t.e):(typeof t!="string"&&(t=wn(t)),typeof e!="string"&&(e=wn(e)),t==e?t:t+":"+e)}function pr(t){var e={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,s=0,a=t.length;for(n=0;r<a&&!((s=t.charCodeAt(r)-64)<1||s>26);++r)n=26*n+s;for(e.s.c=--n,n=0;r<a&&!((s=t.charCodeAt(r)-48)<0||s>9);++r)n=10*n+s;if(e.s.r=--n,r===a||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,n=0;r!=a&&!((s=t.charCodeAt(r)-64)<1||s>26);++r)n=26*n+s;for(e.e.c=--n,n=0;r!=a&&!((s=t.charCodeAt(r)-48)<0||s>9);++r)n=10*n+s;return e.e.r=--n,e}function _I(t,e){var n=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Nl(t.z,n?Ta(e):e)}catch{}try{return t.w=Nl((t.XF||{}).numFmtId||(n?14:0),n?Ta(e):e)}catch{return""+e}}function fu(t,e,n){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&n&&n.dateNF&&(t.z=n.dateNF),t.t=="e"?wu[t.v]||t.v:e==null?_I(t,t.v):_I(t,e))}function Zd(t,e){var n=e&&e.sheet?e.sheet:"Sheet1",r={};return r[n]=t,{SheetNames:[n],Sheets:r}}function F8(t,e,n){var r=n||{},s=t?Array.isArray(t):r.dense,a=t||(s?[]:{}),i=0,o=0;if(a&&r.origin!=null){if(typeof r.origin=="number")i=r.origin;else{var l=typeof r.origin=="string"?vs(r.origin):r.origin;i=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var A={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=pr(a["!ref"]);A.s.c=d.s.c,A.s.r=d.s.r,A.e.c=Math.max(A.e.c,d.e.c),A.e.r=Math.max(A.e.r,d.e.r),i==-1&&(A.e.r=i=d.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=e[h].length;++p)if(!(typeof e[h][p]>"u")){var g={v:e[h][p]},w=i+h,b=o+p;if(A.s.r>w&&(A.s.r=w),A.s.c>b&&(A.s.c=b),A.e.r<w&&(A.e.r=w),A.e.c<b&&(A.e.c=b),e[h][p]&&typeof e[h][p]=="object"&&!Array.isArray(e[h][p])&&!(e[h][p]instanceof Date))g=e[h][p];else if(Array.isArray(g.v)&&(g.f=e[h][p][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(r.nullError)g.t="e",g.v=0;else if(r.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=r.dateNF||gn[14],r.cellDates?(g.t="d",g.w=Nl(g.z,Ta(g.v))):(g.t="n",g.v=Ta(g.v),g.w=Nl(g.z,g.v))):g.t="s";if(s)a[w]||(a[w]=[]),a[w][b]&&a[w][b].z&&(g.z=a[w][b].z),a[w][b]=g;else{var E=wn({c:b,r:w});a[E]&&a[E].z&&(g.z=a[E].z),a[E]=g}}}return A.s.c<1e7&&(a["!ref"]=Fn(A)),a}function Sm(t,e){return F8(null,t,e)}function oie(t){return t.read_shift(4,"i")}function dc(t,e){return e||(e=lt(4)),e.write_shift(4,t),e}function Ii(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Qa(t,e){var n=!1;return e==null&&(n=!0,e=lt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}function lie(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function cie(t,e){return e||(e=lt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function oS(t,e){var n=t.l,r=t.read_shift(1),s=Ii(t),a=[],i={t:s,h:s};if((r&1)!==0){for(var o=t.read_shift(4),l=0;l!=o;++l)a.push(lie(t));i.r=a}else i.r=[{ich:0,ifnt:0}];return t.l=n+e,i}function Aie(t,e){var n=!1;return e==null&&(n=!0,e=lt(15+4*t.t.length)),e.write_shift(1,0),Qa(t.t,e),n?e.slice(0,e.l):e}var uie=oS;function die(t,e){var n=!1;return e==null&&(n=!0,e=lt(23+4*t.t.length)),e.write_shift(1,1),Qa(t.t,e),e.write_shift(4,1),cie({},e),n?e.slice(0,e.l):e}function kl(t){var e=t.read_shift(4),n=t.read_shift(2);return n+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:n}}function mh(t,e){return e==null&&(e=lt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function ph(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function gh(t,e){return e==null&&(e=lt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var fie=Ii,R8=Qa;function lS(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function N2(t,e){var n=!1;return e==null&&(n=!0,e=lt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}var hie=Ii,r_=lS,cS=N2;function AS(t){var e=t.slice(t.l,t.l+4),n=e[0]&1,r=e[0]&2;t.l+=4;var s=r===0?B2([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):If(e,0)>>2;return n?s/100:s}function D8(t,e){e==null&&(e=lt(4));var n=0,r=0,s=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?r=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(r=1,n=1),r)e.write_shift(-4,((n?s:t)<<2)+(n+2));else throw new Error("unsupported RkNumber "+t)}function U8(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function mie(t,e){return e||(e=lt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var xh=U8,Tm=mie;function Ni(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function rh(t,e){return(e||lt(8)).write_shift(8,t,"f")}function pie(t){var e={},n=t.read_shift(1),r=n>>>1,s=t.read_shift(1),a=t.read_shift(2,"i"),i=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,r){case 0:e.auto=1;break;case 1:e.index=s;var A=Vf[s];A&&(e.rgb=Ug(A));break;case 2:e.rgb=Ug([i,o,l]);break;case 3:e.theme=s;break}return a!=0&&(e.tint=a>0?a/32767:a/32768),e}function k2(t,e){if(e||(e=lt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var n=t.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),e.write_shift(2,n),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=t.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function gie(t){var e=t.read_shift(1);t.l++;var n={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return n}function xie(t,e){e||(e=lt(2));var n=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,n),e.write_shift(1,0),e}function L8(t,e){var n={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},r=t.read_shift(4);switch(r){case 0:return"";case 4294967295:case 4294967294:return n[t.read_shift(4)]||""}if(r>400)throw new Error("Unsupported Clipboard: "+r.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function vie(t){return L8(t,1)}function yie(t){return L8(t,2)}var uS=2,lo=3,j1=11,SI=12,I2=19,O1=64,wie=65,bie=71,Cie=4108,Eie=4126,Pa=80,M8=81,_ie=[Pa,M8],s_={1:{n:"CodePage",t:uS},2:{n:"Category",t:Pa},3:{n:"PresentationFormat",t:Pa},4:{n:"ByteCount",t:lo},5:{n:"LineCount",t:lo},6:{n:"ParagraphCount",t:lo},7:{n:"SlideCount",t:lo},8:{n:"NoteCount",t:lo},9:{n:"HiddenCount",t:lo},10:{n:"MultimediaClipCount",t:lo},11:{n:"ScaleCrop",t:j1},12:{n:"HeadingPairs",t:Cie},13:{n:"TitlesOfParts",t:Eie},14:{n:"Manager",t:Pa},15:{n:"Company",t:Pa},16:{n:"LinksUpToDate",t:j1},17:{n:"CharacterCount",t:lo},19:{n:"SharedDoc",t:j1},22:{n:"HyperlinksChanged",t:j1},23:{n:"AppVersion",t:lo,p:"version"},24:{n:"DigSig",t:wie},26:{n:"ContentType",t:Pa},27:{n:"ContentStatus",t:Pa},28:{n:"Language",t:Pa},29:{n:"Version",t:Pa},255:{},2147483648:{n:"Locale",t:I2},2147483651:{n:"Behavior",t:I2},1919054434:{}},a_={1:{n:"CodePage",t:uS},2:{n:"Title",t:Pa},3:{n:"Subject",t:Pa},4:{n:"Author",t:Pa},5:{n:"Keywords",t:Pa},6:{n:"Comments",t:Pa},7:{n:"Template",t:Pa},8:{n:"LastAuthor",t:Pa},9:{n:"RevNumber",t:Pa},10:{n:"EditTime",t:O1},11:{n:"LastPrinted",t:O1},12:{n:"CreatedDate",t:O1},13:{n:"ModifiedDate",t:O1},14:{n:"PageCount",t:lo},15:{n:"WordCount",t:lo},16:{n:"CharCount",t:lo},17:{n:"Thumbnail",t:bie},18:{n:"Application",t:Pa},19:{n:"DocSecurity",t:lo},255:{},2147483648:{n:"Locale",t:I2},2147483651:{n:"Behavior",t:I2},1919054434:{}},TI={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Sie=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Tie(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var Bie=Tie([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Vf=ss(Bie),wu={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},P8={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},i_={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Q1={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function dS(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Nie(t){var e=dS();if(!t||!t.match)return e;var n={};if((t.match(Ui)||[]).forEach(function(r){var s=En(r);switch(s[0].replace(jae,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":n[s.Extension]=s.ContentType;break;case"<Override":e[i_[s.ContentType]]!==void 0&&e[i_[s.ContentType]].push(s.PartName);break}}),e.xmlns!==Ea.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=n,delete e.calcchains,e}function j8(t,e){var n=Nae(i_),r=[],s;r[r.length]=Xs,r[r.length]=Rt("Types",null,{xmlns:Ea.CT,"xmlns:xsd":Ea.xsd,"xmlns:xsi":Ea.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Rt("Default",null,{Extension:l[0],ContentType:l[1]})}));var a=function(l){t[l]&&t[l].length>0&&(s=t[l][0],r[r.length]=Rt("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:Q1[l][e.bookType]||Q1[l].xlsx}))},i=function(l){(t[l]||[]).forEach(function(A){r[r.length]=Rt("Override",null,{PartName:(A[0]=="/"?"":"/")+A,ContentType:Q1[l][e.bookType]||Q1[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(A){r[r.length]=Rt("Override",null,{PartName:(A[0]=="/"?"":"/")+A,ContentType:n[l][0]})})};return a("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var Yn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Dg(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function cg(t,e){var n={"!id":{}};if(!t)return n;e.charAt(0)!=="/"&&(e="/"+e);var r={};return(t.match(Ui)||[]).forEach(function(s){var a=En(s);if(a[0]==="<Relationship"){var i={};i.Type=a.Type,i.Target=a.Target,i.Id=a.Id,a.TargetMode&&(i.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:jp(a.Target,e);n[o]=i,r[a.Id]=i}}),n["!id"]=r,n}function V0(t){var e=[Xs,Rt("Relationships",null,{xmlns:Ea.RELS})];return Ds(t["!id"]).forEach(function(n){e[e.length]=Rt("Relationship",null,t["!id"][n])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Ur(t,e,n,r,s,a){if(s||(s={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,s.Id="rId"+e,s.Type=r,s.Target=n,[Yn.HLINK,Yn.XPATH,Yn.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),t["!id"][s.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][s.Id]=s,t[("/"+s.Target).replace("//","/")]=s,e}var kie="application/vnd.oasis.opendocument.spreadsheet";function Iie(t,e){for(var n=nS(t),r,s;r=Rg.exec(n);)switch(r[3]){case"manifest":break;case"file-entry":if(s=En(r[0],!1),s.path=="/"&&s.type!==kie)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw r}}function Fie(t){var e=[Xs];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var n=0;n<t.length;++n)e.push('  <manifest:file-entry manifest:full-path="'+t[n][0]+'" manifest:media-type="'+t[n][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function BI(t,e,n){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function Rie(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function Die(t){var e=[Xs];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var n=0;n!=t.length;++n)e.push(BI(t[n][0],t[n][1])),e.push(Rie("",t[n][0]));return e.push(BI("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function O8(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+C2.version+"</meta:generator></office:meta></office:document-meta>"}var Bl=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Uie=function(){for(var t=new Array(Bl.length),e=0;e<Bl.length;++e){var n=Bl[e],r="(?:"+n[0].slice(0,n[0].indexOf(":"))+":)"+n[0].slice(n[0].indexOf(":")+1);t[e]=new RegExp("<"+r+"[^>]*>([\\s\\S]*?)</"+r+">")}return t}();function Q8(t){var e={};t=Kr(t);for(var n=0;n<Bl.length;++n){var r=Bl[n],s=t.match(Uie[n]);s!=null&&s.length>0&&(e[r[1]]=mr(s[1])),r[2]==="date"&&e[r[1]]&&(e[r[1]]=rs(e[r[1]]))}return e}function nC(t,e,n,r,s){s[t]!=null||e==null||e===""||(s[t]=e,e=Mr(e),r[r.length]=n?Rt(t,e,n):ei(t,e))}function H8(t,e){var n=e||{},r=[Xs,Rt("cp:coreProperties",null,{"xmlns:cp":Ea.CORE_PROPS,"xmlns:dc":Ea.dc,"xmlns:dcterms":Ea.dcterms,"xmlns:dcmitype":Ea.dcmitype,"xmlns:xsi":Ea.xsi})],s={};if(!t&&!n.Props)return r.join("");t&&(t.CreatedDate!=null&&nC("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:n_(t.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s),t.ModifiedDate!=null&&nC("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:n_(t.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s));for(var a=0;a!=Bl.length;++a){var i=Bl[a],o=n.Props&&n.Props[i[1]]!=null?n.Props[i[1]]:t?t[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&nC(i[0],o,null,r,s)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Gf=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],V8=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function G8(t,e,n,r){var s=[];if(typeof t=="string")s=xI(t,r);else for(var a=0;a<t.length;++a)s=s.concat(t[a].map(function(d){return{v:d}}));var i=typeof e=="string"?xI(e,r).map(function(d){return d.v}):e,o=0,l=0;if(i.length>0)for(var A=0;A!==s.length;A+=2){switch(l=+s[A+1].v,s[A].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":n.Worksheets=l,n.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":n.NamedRanges=l,n.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":n.Chartsheets=l,n.ChartNames=i.slice(o,o+l);break}o+=l}}function Lie(t,e,n){var r={};return e||(e={}),t=Kr(t),Gf.forEach(function(s){var a=(t.match(Ig(s[0]))||[])[1];switch(s[2]){case"string":a&&(e[s[1]]=mr(a));break;case"bool":e[s[1]]=a==="true";break;case"raw":var i=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));i&&i.length>0&&(r[s[1]]=i[1]);break}}),r.HeadingPairs&&r.TitlesOfParts&&G8(r.HeadingPairs,r.TitlesOfParts,e,n),e}function z8(t){var e=[],n=Rt;return t||(t={}),t.Application="SheetJS",e[e.length]=Xs,e[e.length]=Rt("Properties",null,{xmlns:Ea.EXT_PROPS,"xmlns:vt":Ea.vt}),Gf.forEach(function(r){if(t[r[1]]!==void 0){var s;switch(r[2]){case"string":s=Mr(String(t[r[1]]));break;case"bool":s=t[r[1]]?"true":"false";break}s!==void 0&&(e[e.length]=n(r[0],s))}}),e[e.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=n("TitlesOfParts",n("vt:vector",t.SheetNames.map(function(r){return"<vt:lpstr>"+Mr(r)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Mie=/<[^>]+>[^<]*/g;function Pie(t,e){var n={},r="",s=t.match(Mie);if(s)for(var a=0;a!=s.length;++a){var i=s[a],o=En(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":r=mr(o.name);break;case"</property>":r=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),A=l[0].slice(4),d=l[1];switch(A){case"lpstr":case"bstr":case"lpwstr":n[r]=mr(d);break;case"bool":n[r]=ts(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":n[r]=parseInt(d,10);break;case"r4":case"r8":case"decimal":n[r]=parseFloat(d);break;case"filetime":case"date":n[r]=rs(d);break;case"cy":case"error":n[r]=mr(d);break;default:if(A.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",i,A,l)}}else if(i.slice(0,2)!=="</"){if(e.WTF)throw new Error(i)}}}return n}function K8(t){var e=[Xs,Rt("Properties",null,{xmlns:Ea.CUST_PROPS,"xmlns:vt":Ea.vt})];if(!t)return e.join("");var n=1;return Ds(t).forEach(function(s){++n,e[e.length]=Rt("property",qae(t[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:Mr(s)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var o_={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},rC;function jie(t,e,n){rC||(rC=Iy(o_)),e=rC[e]||e,t[e]=n}function Oie(t,e){var n=[];return Ds(o_).map(function(r){for(var s=0;s<Bl.length;++s)if(Bl[s][1]==r)return Bl[s];for(s=0;s<Gf.length;++s)if(Gf[s][1]==r)return Gf[s];throw r}).forEach(function(r){if(t[r[1]]!=null){var s=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:t[r[1]];switch(r[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),n.push(ei(o_[r[1]]||r[1],s))}}),Rt("DocumentProperties",n.join(""),{xmlns:Mo.o})}function Qie(t,e){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",s=[];return t&&Ds(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)){for(var i=0;i<Bl.length;++i)if(a==Bl[i][1])return;for(i=0;i<Gf.length;++i)if(a==Gf[i][1])return;for(i=0;i<n.length;++i)if(a==n[i])return;var o=t[a],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),s.push(Rt(hI(a),o,{"dt:dt":l}))}}),e&&Ds(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)&&!(t&&Object.prototype.hasOwnProperty.call(t,a))){var i=e[a],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),s.push(Rt(hI(a),i,{"dt:dt":o}))}}),"<"+r+' xmlns="'+Mo.o+'">'+s.join("")+"</"+r+">"}function fS(t){var e=t.read_shift(4),n=t.read_shift(4);return new Date((n/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Hie(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,n=e.getTime()/1e3+11644473600,r=n%Math.pow(2,32),s=(n-r)/Math.pow(2,32);r*=1e7,s*=1e7;var a=r/Math.pow(2,32)|0;a>0&&(r=r%Math.pow(2,32),s+=a);var i=lt(8);return i.write_shift(4,r),i.write_shift(4,s),i}function q8(t,e,n){var r=t.l,s=t.read_shift(0,"lpstr-cp");if(n)for(;t.l-r&3;)++t.l;return s}function W8(t,e,n){var r=t.read_shift(0,"lpwstr");return r}function $8(t,e,n){return e===31?W8(t):q8(t,e,n)}function l_(t,e,n){return $8(t,e,n===!1?0:4)}function Vie(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return $8(t,e,0)}function Gie(t){for(var e=t.read_shift(4),n=[],r=0;r!=e;++r){var s=t.l;n[r]=t.read_shift(0,"lpwstr").replace(zi,""),t.l-s&2&&(t.l+=2)}return n}function zie(t){for(var e=t.read_shift(4),n=[],r=0;r!=e;++r)n[r]=t.read_shift(0,"lpstr-cp").replace(zi,"");return n}function Kie(t){var e=t.l,n=F2(t,M8);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var r=F2(t,lo);return[n,r]}function qie(t){for(var e=t.read_shift(4),n=[],r=0;r<e/2;++r)n.push(Kie(t));return n}function NI(t,e){for(var n=t.read_shift(4),r={},s=0;s!=n;++s){var a=t.read_shift(4),i=t.read_shift(4);r[a]=t.read_shift(i,e===1200?"utf16le":"utf8").replace(zi,"").replace(Pp,"!"),e===1200&&i%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),r}function Y8(t){var e=t.read_shift(4),n=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),n}function Wie(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function F2(t,e,n){var r=t.read_shift(2),s,a=n||{};if(t.l+=2,e!==SI&&r!==e&&_ie.indexOf(e)===-1&&!((e&65534)==4126&&(r&65534)==4126))throw new Error("Expected type "+e+" saw "+r);switch(e===SI?r:e){case 2:return s=t.read_shift(2,"i"),a.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return q8(t,r,4).replace(zi,"");case 31:return W8(t);case 64:return fS(t);case 65:return Y8(t);case 71:return Wie(t);case 80:return l_(t,r,!a.raw).replace(zi,"");case 81:return Vie(t,r).replace(zi,"");case 4108:return qie(t);case 4126:case 4127:return r==4127?Gie(t):zie(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+r)}}function kI(t,e){var n=lt(4),r=lt(4);switch(n.write_shift(4,t==80?31:t),t){case 3:r.write_shift(-4,e);break;case 5:r=lt(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=Hie(e);break;case 31:case 80:for(r=lt(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Oa([n,r])}function II(t,e){var n=t.l,r=t.read_shift(4),s=t.read_shift(4),a=[],i=0,o=0,l=-1,A={};for(i=0;i!=s;++i){var d=t.read_shift(4),h=t.read_shift(4);a[i]=[d,h+n]}a.sort(function(I,k){return I[1]-k[1]});var p={};for(i=0;i!=s;++i){if(t.l!==a[i][1]){var g=!0;if(i>0&&e)switch(e[a[i-1][0]].t){case 2:t.l+2===a[i][1]&&(t.l+=2,g=!1);break;case 80:t.l<=a[i][1]&&(t.l=a[i][1],g=!1);break;case 4108:t.l<=a[i][1]&&(t.l=a[i][1],g=!1);break}if((!e||i==0)&&t.l<=a[i][1]&&(g=!1,t.l=a[i][1]),g)throw new Error("Read Error: Expected address "+a[i][1]+" at "+t.l+" :"+i)}if(e){var w=e[a[i][0]];if(p[w.n]=F2(t,w.t,{raw:!0}),w.p==="version"&&(p[w.n]=String(p[w.n]>>16)+"."+("0000"+String(p[w.n]&65535)).slice(-4)),w.n=="CodePage")switch(p[w.n]){case 0:p[w.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:cc(o=p[w.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+p[w.n])}}else if(a[i][0]===1){if(o=p.CodePage=F2(t,uS),cc(o),l!==-1){var b=t.l;t.l=a[l][1],A=NI(t,o),t.l=b}}else if(a[i][0]===0){if(o===0){l=i,t.l=a[i+1][1];continue}A=NI(t,o)}else{var E=A[a[i][0]],B;switch(t[t.l]){case 65:t.l+=4,B=Y8(t);break;case 30:t.l+=4,B=l_(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,B=l_(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,B=t.read_shift(4,"i");break;case 19:t.l+=4,B=t.read_shift(4);break;case 5:t.l+=4,B=t.read_shift(8,"f");break;case 11:t.l+=4,B=Vs(t,4);break;case 64:t.l+=4,B=rs(fS(t));break;default:throw new Error("unparsed value: "+t[t.l])}p[E]=B}}return t.l=n+r,p}var J8=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function $ie(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function FI(t,e,n){var r=lt(8),s=[],a=[],i=8,o=0,l=lt(8),A=lt(8);if(l.write_shift(4,2),l.write_shift(4,1200),A.write_shift(4,1),a.push(l),s.push(A),i+=8+l.length,!e){A=lt(8),A.write_shift(4,0),s.unshift(A);var d=[lt(4)];for(d[0].write_shift(4,t.length),o=0;o<t.length;++o){var h=t[o][0];for(l=lt(8+2*(h.length+1)+(h.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,h.length+1),l.write_shift(0,h,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=Oa(d),a.unshift(l),i+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(J8.indexOf(t[o][0])>-1||V8.indexOf(t[o][0])>-1)&&t[o][1]!=null){var p=t[o][1],g=0;if(e){g=+e[t[o][0]];var w=n[g];if(w.p=="version"&&typeof p=="string"){var b=p.split(".");p=(+b[0]<<16)+(+b[1]||0)}l=kI(w.t,p)}else{var E=$ie(p);E==-1&&(E=31,p=String(p)),l=kI(E,p)}a.push(l),A=lt(8),A.write_shift(4,e?g:2+o),s.push(A),i+=8+l.length}var B=8*(a.length+1);for(o=0;o<a.length;++o)s[o].write_shift(4,B),B+=a[o].length;return r.write_shift(4,i),r.write_shift(4,a.length),Oa([r].concat(s).concat(a))}function RI(t,e,n){var r=t.content;if(!r)return{};Za(r,0);var s,a,i,o,l=0;r.chk("feff","Byte Order: "),r.read_shift(2);var A=r.read_shift(4),d=r.read_shift(16);if(d!==ln.utils.consts.HEADER_CLSID&&d!==n)throw new Error("Bad PropertySet CLSID "+d);if(s=r.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(a=r.read_shift(16),o=r.read_shift(4),s===1&&o!==r.l)throw new Error("Length mismatch: "+o+" !== "+r.l);s===2&&(i=r.read_shift(16),l=r.read_shift(4));var h=II(r,e),p={SystemIdentifier:A};for(var g in h)p[g]=h[g];if(p.FMTID=a,s===1)return p;if(l-r.l==2&&(r.l+=2),r.l!==l)throw new Error("Length mismatch 2: "+r.l+" !== "+l);var w;try{w=II(r,null)}catch{}for(g in w)p[g]=w[g];return p.FMTID=[a,i],p}function DI(t,e,n,r,s,a){var i=lt(s?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,ln.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,s?68:48);var l=FI(t,n,r);if(o.push(l),s){var A=FI(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+l.length),o.push(A)}return Oa(o)}function ad(t,e){return t.read_shift(e),null}function Yie(t,e){e||(e=lt(t));for(var n=0;n<t;++n)e.write_shift(1,0);return e}function Jie(t,e,n){for(var r=[],s=t.l+e;t.l<s;)r.push(n(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return r}function Vs(t,e){return t.read_shift(e)===1}function Hi(t,e){return e||(e=lt(2)),e.write_shift(2,+!!t),e}function Aa(t){return t.read_shift(2,"u")}function yl(t,e){return e||(e=lt(2)),e.write_shift(2,t),e}function X8(t,e){return Jie(t,e,Aa)}function Xie(t){var e=t.read_shift(1),n=t.read_shift(1);return n===1?e:e===1}function Z8(t,e,n){return n||(n=lt(2)),n.write_shift(1,e=="e"?+t:+!!t),n.write_shift(1,e=="e"?1:0),n}function fx(t,e,n){var r=t.read_shift(n&&n.biff>=12?2:1),s="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var a=t.read_shift(1);a&&(s="dbcs-cont")}else n.biff==12&&(s="wstr");n.biff>=2&&n.biff<=5&&(s="cpstr");var i=r?t.read_shift(r,s):"";return i}function Zie(t){var e=t.read_shift(2),n=t.read_shift(1),r=n&4,s=n&8,a=1+(n&1),i=0,o,l={};s&&(i=t.read_shift(2)),r&&(o=t.read_shift(4));var A=a==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,A);return s&&(t.l+=4*i),r&&(t.l+=o),l.t=d,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function eoe(t){var e=t.t||"",n=lt(3);n.write_shift(2,e.length),n.write_shift(1,1);var r=lt(2*e.length);r.write_shift(2*e.length,e,"utf16le");var s=[n,r];return Oa(s)}function sh(t,e,n){var r;if(n){if(n.biff>=2&&n.biff<=5)return t.read_shift(e,"cpstr");if(n.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?r=t.read_shift(e,"sbcs-cont"):r=t.read_shift(e,"dbcs-cont"),r}function hx(t,e,n){var r=t.read_shift(n&&n.biff==2?1:2);return r===0?(t.l++,""):sh(t,r,n)}function vh(t,e,n){if(n.biff>5)return hx(t,e,n);var r=t.read_shift(1);return r===0?(t.l++,""):t.read_shift(r,n.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function eM(t,e,n){return n||(n=lt(3+2*t.length)),n.write_shift(2,t.length),n.write_shift(1,1),n.write_shift(31,t,"utf16le"),n}function toe(t){var e=t.read_shift(1);t.l++;var n=t.read_shift(2);return t.l+=2,[e,n]}function noe(t){var e=t.read_shift(4),n=t.l,r=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(r=!0),t.l=n);var s=t.read_shift((r?e-24:e)>>1,"utf16le").replace(zi,"");return r&&(t.l+=24),s}function roe(t){for(var e=t.read_shift(2),n="";e-- >0;)n+="../";var r=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return n+r.replace(/\\/g,"/");var a=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=t.read_shift(a>>1,"utf16le").replace(zi,"");return n+i}function soe(t,e){var n=t.read_shift(16);switch(n){case"e0c9ea79f9bace118c8200aa004ba90b":return noe(t);case"0303000000000000c000000000000046":return roe(t);default:throw new Error("Unsupported Moniker "+n)}}function H1(t){var e=t.read_shift(4),n=e>0?t.read_shift(e,"utf16le").replace(zi,""):"";return n}function UI(t,e){e||(e=lt(6+t.length*2)),e.write_shift(4,1+t.length);for(var n=0;n<t.length;++n)e.write_shift(2,t.charCodeAt(n));return e.write_shift(2,0),e}function aoe(t,e){var n=t.l+e,r=t.read_shift(4);if(r!==2)throw new Error("Unrecognized streamVersion: "+r);var s=t.read_shift(2);t.l+=2;var a,i,o,l,A="",d,h;s&16&&(a=H1(t,n-t.l)),s&128&&(i=H1(t,n-t.l)),(s&257)===257&&(o=H1(t,n-t.l)),(s&257)===1&&(l=soe(t,n-t.l)),s&8&&(A=H1(t,n-t.l)),s&32&&(d=t.read_shift(16)),s&64&&(h=fS(t)),t.l=n;var p=i||o||l||"";p&&A&&(p+="#"+A),p||(p="#"+A),s&2&&p.charAt(0)=="/"&&p.charAt(1)!="/"&&(p="file://"+p);var g={Target:p};return d&&(g.guid=d),h&&(g.time=h),a&&(g.Tooltip=a),g}function ioe(t){var e=lt(512),n=0,r=t.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var s=r.indexOf("#"),a=s>-1?31:23;switch(r.charAt(0)){case"#":a=28;break;case".":a&=-3;break}e.write_shift(4,2),e.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(n=0;n<i.length;++n)e.write_shift(4,i[n]);if(a==28)r=r.slice(1),UI(r,e);else if(a&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<i.length;++n)e.write_shift(1,parseInt(i[n],16));var o=s>-1?r.slice(0,s):r;for(e.write_shift(4,2*(o.length+1)),n=0;n<o.length;++n)e.write_shift(2,o.charCodeAt(n));e.write_shift(2,0),a&8&&UI(s>-1?r.slice(s+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<i.length;++n)e.write_shift(1,parseInt(i[n],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)e.write_shift(1,r.charCodeAt(n+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),n=0;n<6;++n)e.write_shift(4,0)}return e.slice(0,e.l)}function tM(t){var e=t.read_shift(1),n=t.read_shift(1),r=t.read_shift(1),s=t.read_shift(1);return[e,n,r,s]}function nM(t,e){var n=tM(t);return n[3]=0,n}function gA(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2);return{r:e,c:n,ixfe:r}}function ah(t,e,n,r){return r||(r=lt(6)),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n||0),r}function ooe(t){var e=t.read_shift(2),n=t.read_shift(2);return t.l+=8,{type:e,flags:n}}function loe(t,e,n){return e===0?"":vh(t,e,n)}function coe(t,e,n){var r=n.biff>8?4:2,s=t.read_shift(r),a=t.read_shift(r,"i"),i=t.read_shift(r,"i");return[s,a,i]}function rM(t){var e=t.read_shift(2),n=AS(t);return[e,n]}function Aoe(t,e,n){t.l+=4,e-=4;var r=t.l+e,s=fx(t,e,n),a=t.read_shift(2);if(r-=t.l,a!==r)throw new Error("Malformed AddinUdf: padding = "+r+" != "+a);return t.l+=a,s}function Dy(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),s=t.read_shift(2);return{s:{c:r,r:e},e:{c:s,r:n}}}function sM(t,e){return e||(e=lt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function aM(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(1),s=t.read_shift(1);return{s:{c:r,r:e},e:{c:s,r:n}}}var uoe=aM;function iM(t){t.l+=4;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2);return t.l+=12,[n,e,r]}function doe(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function foe(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function yi(t){t.l+=2,t.l+=t.read_shift(2)}var hoe={0:yi,4:yi,5:yi,6:yi,7:foe,8:yi,9:yi,10:yi,11:yi,12:yi,13:doe,14:yi,15:yi,16:yi,17:yi,18:yi,19:yi,20:yi,21:iM};function moe(t,e){for(var n=t.l+e,r=[];t.l<n;){var s=t.read_shift(2);t.l-=2;try{r.push(hoe[s](t,n-t.l))}catch{return t.l=n,r}}return t.l!=n&&(t.l=n),r}function V1(t,e){var n={BIFFVer:0,dt:0};switch(n.BIFFVer=t.read_shift(2),e-=2,e>=2&&(n.dt=t.read_shift(2),t.l-=2),n.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+n.BIFFVer)}return t.read_shift(e),n}function hS(t,e,n){var r=1536,s=16;switch(n.bookType){case"biff8":break;case"biff5":r=1280,s=8;break;case"biff4":r=4,s=6;break;case"biff3":r=3,s=6;break;case"biff2":r=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=lt(s);return a.write_shift(2,r),a.write_shift(2,e),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function poe(t,e){return e===0||t.read_shift(2),1200}function goe(t,e,n){if(n.enc)return t.l+=e,"";var r=t.l,s=vh(t,0,n);return t.read_shift(e+r-t.l),s}function xoe(t,e){var n=!e||e.biff==8,r=lt(n?112:54);for(r.write_shift(e.biff==8?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}function voe(t,e,n){var r=n&&n.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:r&16,fBelow:r&64,fRight:r&128}}function yoe(t,e,n){var r=t.read_shift(4),s=t.read_shift(1)&3,a=t.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var i=fx(t,0,n);return i.length===0&&(i="Sheet1"),{pos:r,hs:s,dt:a,name:i}}function woe(t,e){var n=!e||e.biff>=8?2:1,r=lt(8+n*t.name.length);r.write_shift(4,t.pos),r.write_shift(1,t.hs||0),r.write_shift(1,t.dt),r.write_shift(1,t.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(n*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var s=r.slice(0,r.l);return s.l=r.l,s}function boe(t,e){for(var n=t.l+e,r=t.read_shift(4),s=t.read_shift(4),a=[],i=0;i!=s&&t.l<n;++i)a.push(Zie(t));return a.Count=r,a.Unique=s,a}function Coe(t,e){var n=lt(8);n.write_shift(4,t.Count),n.write_shift(4,t.Unique);for(var r=[],s=0;s<t.length;++s)r[s]=eoe(t[s]);var a=Oa([n].concat(r));return a.parts=[n.length].concat(r.map(function(i){return i.length})),a}function Eoe(t,e){var n={};return n.dsst=t.read_shift(2),t.l+=e-2,n}function _oe(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var n=t.read_shift(2);t.l+=4;var r=t.read_shift(1);return t.l+=3,r&7&&(e.level=r&7),r&32&&(e.hidden=!0),r&64&&(e.hpt=n/20),e}function Soe(t){var e=ooe(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var n=t.read_shift(4);return n!==0}function Toe(t){return t.read_shift(2),t.read_shift(4)}function LI(t,e,n){var r=0;n&&n.biff==2||(r=t.read_shift(2));var s=t.read_shift(2);n&&n.biff==2&&(r=1-(s>>15),s&=32767);var a={Unsynced:r&1,DyZero:(r&2)>>1,ExAsc:(r&4)>>2,ExDsc:(r&8)>>3};return[a,s]}function Boe(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),A=t.read_shift(2);return{Pos:[e,n],Dim:[r,s],Flags:a,CurTab:i,FirstTab:o,Selected:l,TabRatio:A}}function Noe(){var t=lt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function koe(t,e,n){if(n&&n.biff>=2&&n.biff<5)return{};var r=t.read_shift(2);return{RTL:r&64}}function Ioe(t){var e=lt(18),n=1718;return t&&t.RTL&&(n|=64),e.write_shift(2,n),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Foe(){}function Roe(t,e,n){var r={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(n&&n.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return r.name=fx(t,0,n),r}function Doe(t,e){var n=t.name||"Arial",r=e&&e.biff==5,s=r?15+n.length:16+2*n.length,a=lt(s);return a.write_shift(2,t.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,n.length),r||a.write_shift(1,1),a.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),a}function Uoe(t){var e=gA(t);return e.isst=t.read_shift(4),e}function Loe(t,e,n,r){var s=lt(10);return ah(t,e,r,s),s.write_shift(4,n),s}function Moe(t,e,n){n.biffguess&&n.biff==2&&(n.biff=5);var r=t.l+e,s=gA(t);n.biff==2&&t.l++;var a=hx(t,r-t.l,n);return s.val=a,s}function Poe(t,e,n,r,s){var a=!s||s.biff==8,i=lt(8+ +a+(1+a)*n.length);return ah(t,e,r,i),i.write_shift(2,n.length),a&&i.write_shift(1,1),i.write_shift((1+a)*n.length,n,a?"utf16le":"sbcs"),i}function joe(t,e,n){var r=t.read_shift(2),s=vh(t,0,n);return[r,s]}function Ooe(t,e,n,r){var s=n&&n.biff==5;r||(r=lt(s?3+e.length:5+2*e.length)),r.write_shift(2,t),r.write_shift(s?1:2,e.length),s||r.write_shift(1,1),r.write_shift((s?1:2)*e.length,e,s?"sbcs":"utf16le");var a=r.length>r.l?r.slice(0,r.l):r;return a.l==null&&(a.l=a.length),a}var Qoe=vh;function MI(t,e,n){var r=t.l+e,s=n.biff==8||!n.biff?4:2,a=t.read_shift(s),i=t.read_shift(s),o=t.read_shift(2),l=t.read_shift(2);return t.l=r,{s:{r:a,c:o},e:{r:i,c:l}}}function Hoe(t,e){var n=e.biff==8||!e.biff?4:2,r=lt(2*n+6);return r.write_shift(n,t.s.r),r.write_shift(n,t.e.r+1),r.write_shift(2,t.s.c),r.write_shift(2,t.e.c+1),r.write_shift(2,0),r}function Voe(t){var e=t.read_shift(2),n=t.read_shift(2),r=rM(t);return{r:e,c:n,ixfe:r[0],rknum:r[1]}}function Goe(t,e){for(var n=t.l+e-2,r=t.read_shift(2),s=t.read_shift(2),a=[];t.l<n;)a.push(rM(t));if(t.l!==n)throw new Error("MulRK read error");var i=t.read_shift(2);if(a.length!=i-s+1)throw new Error("MulRK length mismatch");return{r,c:s,C:i,rkrec:a}}function zoe(t,e){for(var n=t.l+e-2,r=t.read_shift(2),s=t.read_shift(2),a=[];t.l<n;)a.push(t.read_shift(2));if(t.l!==n)throw new Error("MulBlank read error");var i=t.read_shift(2);if(a.length!=i-s+1)throw new Error("MulBlank length mismatch");return{r,c:s,C:i,ixfe:a}}function Koe(t,e,n,r){var s={},a=t.read_shift(4),i=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return s.patternType=Sie[o>>26],r.cellStyles&&(s.alc=a&7,s.fWrap=a>>3&1,s.alcV=a>>4&7,s.fJustLast=a>>7&1,s.trot=a>>8&255,s.cIndent=a>>16&15,s.fShrinkToFit=a>>20&1,s.iReadOrder=a>>22&2,s.fAtrNum=a>>26&1,s.fAtrFnt=a>>27&1,s.fAtrAlc=a>>28&1,s.fAtrBdr=a>>29&1,s.fAtrPat=a>>30&1,s.fAtrProt=a>>31&1,s.dgLeft=i&15,s.dgRight=i>>4&15,s.dgTop=i>>8&15,s.dgBottom=i>>12&15,s.icvLeft=i>>16&127,s.icvRight=i>>23&127,s.grbitDiag=i>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function qoe(t,e,n){var r={};return r.ifnt=t.read_shift(2),r.numFmtId=t.read_shift(2),r.flags=t.read_shift(2),r.fStyle=r.flags>>2&1,e-=6,r.data=Koe(t,e,r.fStyle,n),r}function PI(t,e,n,r){var s=n&&n.biff==5;r||(r=lt(s?16:20)),r.write_shift(2,0),t.style?(r.write_shift(2,t.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,t.numFmtId||0),r.write_shift(2,e<<4));var a=0;return t.numFmtId>0&&s&&(a|=1024),r.write_shift(4,a),r.write_shift(4,0),s||r.write_shift(4,0),r.write_shift(2,0),r}function Woe(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function $oe(t){var e=lt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function jI(t,e,n){var r=gA(t);(n.biff==2||e==9)&&++t.l;var s=Xie(t);return r.val=s,r.t=s===!0||s===!1?"b":"e",r}function Yoe(t,e,n,r,s,a){var i=lt(8);return ah(t,e,r,i),Z8(n,a,i),i}function Joe(t,e,n){n.biffguess&&n.biff==2&&(n.biff=5);var r=gA(t),s=Ni(t);return r.val=s,r}function Xoe(t,e,n,r){var s=lt(14);return ah(t,e,r,s),rh(n,s),s}var OI=loe;function Zoe(t,e,n){var r=t.l+e,s=t.read_shift(2),a=t.read_shift(2);if(n.sbcch=a,a==1025||a==14849)return[a,s];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var i=sh(t,a),o=[];r>t.l;)o.push(hx(t));return[a,s,i,o]}function QI(t,e,n){var r=t.read_shift(2),s,a={fBuiltIn:r&1,fWantAdvise:r>>>1&1,fWantPict:r>>>2&1,fOle:r>>>3&1,fOleLink:r>>>4&1,cf:r>>>5&1023,fIcon:r>>>15&1};return n.sbcch===14849&&(s=Aoe(t,e-2,n)),a.body=s||t.read_shift(e-2),typeof s=="string"&&(a.Name=s),a}var ele=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function HI(t,e,n){var r=t.l+e,s=t.read_shift(2),a=t.read_shift(1),i=t.read_shift(1),o=t.read_shift(n&&n.biff==2?1:2),l=0;(!n||n.biff>=5)&&(n.biff!=5&&(t.l+=2),l=t.read_shift(2),n.biff==5&&(t.l+=2),t.l+=4);var A=sh(t,i,n);s&32&&(A=ele[A.charCodeAt(0)]);var d=r-t.l;n&&n.biff==2&&--d;var h=r==t.l||o===0||!(d>0)?[]:mde(t,d,n,o);return{chKey:a,Name:A,itab:l,rgce:h}}function oM(t,e,n){if(n.biff<8)return tle(t,e,n);for(var r=[],s=t.l+e,a=t.read_shift(n.biff>8?4:2);a--!==0;)r.push(coe(t,n.biff>8?12:6,n));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return r}function tle(t,e,n){t[t.l+1]==3&&t[t.l]++;var r=fx(t,e,n);return r.charCodeAt(0)==3?r.slice(1):r}function nle(t,e,n){if(n.biff<8){t.l+=e;return}var r=t.read_shift(2),s=t.read_shift(2),a=sh(t,r,n),i=sh(t,s,n);return[a,i]}function rle(t,e,n){var r=aM(t);t.l++;var s=t.read_shift(1);return e-=8,[pde(t,e,n),s,r]}function VI(t,e,n){var r=uoe(t);switch(n.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[r,fde(t,e,n)]}function sle(t){var e=t.read_shift(4)!==0,n=t.read_shift(4)!==0,r=t.read_shift(4);return[e,n,r]}function ale(t,e,n){if(!(n.biff<8)){var r=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),i=t.read_shift(2),o=vh(t,0,n);return n.biff<8&&t.read_shift(1),[{r,c:s},o,i,a]}}function ile(t,e,n){return ale(t,e,n)}function ole(t,e){for(var n=[],r=t.read_shift(2);r--;)n.push(Dy(t));return n}function lle(t){var e=lt(2+t.length*8);e.write_shift(2,t.length);for(var n=0;n<t.length;++n)sM(t[n],e);return e}function cle(t,e,n){if(n&&n.biff<8)return ule(t,e,n);var r=iM(t),s=moe(t,e-22,r[1]);return{cmo:r,ft:s}}var Ale={8:function(t,e){var n=t.l+e;t.l+=10;var r=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=n,{fmt:r}}};function ule(t,e,n){t.l+=4;var r=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var i=[];return i.push((Ale[r]||Ri)(t,e,n)),{cmo:[s,r,a],ft:i}}function dle(t,e,n){var r=t.l,s="";try{t.l+=4;var a=(n.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(a)==-1?t.l+=6:i=toe(t,6,n);var o=t.read_shift(2);t.read_shift(2),Aa(t,2);var l=t.read_shift(2);t.l+=l;for(var A=1;A<t.lens.length-1;++A){if(t.l-r!=t.lens[A])throw new Error("TxO: bad continue record");var d=t[t.l],h=sh(t,t.lens[A+1]-t.lens[A]-1);if(s+=h,s.length>=(d?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return t.l=r+e,{t:s}}catch{return t.l=r+e,{t:s}}}function fle(t,e){var n=Dy(t);t.l+=16;var r=aoe(t,e-24);return[n,r]}function hle(t){var e=lt(24),n=vs(t[0]);e.write_shift(2,n.r),e.write_shift(2,n.r),e.write_shift(2,n.c),e.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)e.write_shift(1,parseInt(r[s],16));return Oa([e,ioe(t[1])])}function mle(t,e){t.read_shift(2);var n=Dy(t),r=t.read_shift((e-10)/2,"dbcs-cont");return r=r.replace(zi,""),[n,r]}function ple(t){var e=t[1].Tooltip,n=lt(10+2*(e.length+1));n.write_shift(2,2048);var r=vs(t[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var s=0;s<e.length;++s)n.write_shift(2,e.charCodeAt(s));return n.write_shift(2,0),n}function gle(t){var e=[0,0],n;return n=t.read_shift(2),e[0]=TI[n]||n,n=t.read_shift(2),e[1]=TI[n]||n,e}function xle(t){return t||(t=lt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function vle(t){for(var e=t.read_shift(2),n=[];e-- >0;)n.push(nM(t));return n}function yle(t){for(var e=t.read_shift(2),n=[];e-- >0;)n.push(nM(t));return n}function wle(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function lM(t,e,n){if(!n.cellStyles)return Ri(t,e);var r=n&&n.biff>=12?4:2,s=t.read_shift(r),a=t.read_shift(r),i=t.read_shift(r),o=t.read_shift(r),l=t.read_shift(2);r==2&&(t.l+=2);var A={s,e:a,w:i,ixfe:o,flags:l};return(n.biff>=5||!n.biff)&&(A.level=l>>8&7),A}function ble(t,e){var n=lt(12);n.write_shift(2,e),n.write_shift(2,e),n.write_shift(2,t.width*256),n.write_shift(2,0);var r=0;return t.hidden&&(r|=1),n.write_shift(1,r),r=t.level||0,n.write_shift(1,r),n.write_shift(2,0),n}function Cle(t,e){var n={};return e<32||(t.l+=16,n.header=Ni(t),n.footer=Ni(t),t.l+=2),n}function Ele(t,e,n){var r={area:!1};if(n.biff!=5)return t.l+=e,r;var s=t.read_shift(1);return t.l+=3,s&16&&(r.area=!0),r}function _le(t){for(var e=lt(2*t),n=0;n<t;++n)e.write_shift(2,n+1);return e}var Sle=gA,Tle=X8,Ble=hx;function Nle(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),s={fmt:e,env:n,len:r,data:t.slice(t.l,t.l+r)};return t.l+=r,s}function kle(t,e,n){n.biffguess&&n.biff==5&&(n.biff=2);var r=gA(t);++t.l;var s=vh(t,e-7,n);return r.t="str",r.val=s,r}function Ile(t){var e=gA(t);++t.l;var n=Ni(t);return e.t="n",e.val=n,e}function Fle(t,e,n){var r=lt(15);return xx(r,t,e),r.write_shift(8,n,"f"),r}function Rle(t){var e=gA(t);++t.l;var n=t.read_shift(2);return e.t="n",e.val=n,e}function Dle(t,e,n){var r=lt(9);return xx(r,t,e),r.write_shift(2,n),r}function Ule(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function Lle(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function Mle(t,e,n){var r=t.l+e,s=gA(t),a=t.read_shift(2),i=sh(t,a,n);return t.l=r,s.t="str",s.val=i,s}var Ple=[2,3,48,49,131,139,140,245],c_=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Iy({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(o,l){var A=[],d=Kd(1);switch(l.type){case"base64":d=jo(Vo(o));break;case"binary":d=jo(o);break;case"buffer":case"array":d=o;break}Za(d,0);var h=d.read_shift(1),p=!!(h&136),g=!1,w=!1;switch(h){case 2:break;case 3:break;case 48:g=!0,p=!0;break;case 49:g=!0,p=!0;break;case 131:break;case 139:break;case 140:w=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var b=0,E=521;h==2&&(b=d.read_shift(2)),d.l+=3,h!=2&&(b=d.read_shift(4)),b>1048576&&(b=1e6),h!=2&&(E=d.read_shift(2));var B=d.read_shift(2),I=l.codepage||1252;h!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(I=t[d[d.l]]),d.l+=1,d.l+=2),w&&(d.l+=36);for(var k=[],F={},D=Math.min(d.length,h==2?521:E-10-(g?264:0)),P=w?32:11;d.l<D&&d[d.l]!=13;)switch(F={},F.name=Bg.utils.decode(I,d.slice(d.l,d.l+P)).replace(/[\u0000\r\n].*$/g,""),d.l+=P,F.type=String.fromCharCode(d.read_shift(1)),h!=2&&!w&&(F.offset=d.read_shift(4)),F.len=d.read_shift(1),h==2&&(F.offset=d.read_shift(2)),F.dec=d.read_shift(1),F.name.length&&k.push(F),h!=2&&(d.l+=w?13:14),F.type){case"B":(!g||F.len!=8)&&l.WTF&&console.log("Skipping "+F.name+":"+F.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+F.name+":"+F.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+F.type)}if(d[d.l]!==13&&(d.l=E-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=E;var S=0,N=0;for(A[0]=[],N=0;N!=k.length;++N)A[0][N]=k[N].name;for(;b-- >0;){if(d[d.l]===42){d.l+=B;continue}for(++d.l,A[++S]=[],N=0,N=0;N!=k.length;++N){var T=d.slice(d.l,d.l+k[N].len);d.l+=k[N].len,Za(T,0);var V=Bg.utils.decode(I,T);switch(k[N].type){case"C":V.trim().length&&(A[S][N]=V.replace(/\s+$/,""));break;case"D":V.length===8?A[S][N]=new Date(+V.slice(0,4),+V.slice(4,6)-1,+V.slice(6,8)):A[S][N]=V;break;case"F":A[S][N]=parseFloat(V.trim());break;case"+":case"I":A[S][N]=w?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(V.trim().toUpperCase()){case"Y":case"T":A[S][N]=!0;break;case"N":case"F":A[S][N]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+V+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));A[S][N]="##MEMO##"+(w?parseInt(V.trim(),10):T.read_shift(4));break;case"N":V=V.replace(/\u0000/g,"").trim(),V&&V!="."&&(A[S][N]=+V||0);break;case"@":A[S][N]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":A[S][N]=new Date((T.read_shift(4)-2440588)*864e5+T.read_shift(4));break;case"Y":A[S][N]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":A[S][N]=-T.read_shift(-8,"f");break;case"B":if(g&&k[N].len==8){A[S][N]=T.read_shift(8,"f");break}case"G":case"P":T.l+=k[N].len;break;case"0":if(k[N].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+k[N].type)}}}if(h!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(A=A.slice(0,l.sheetRows)),l.DBF=k,A}function r(o,l){var A=l||{};A.dateNF||(A.dateNF="yyyymmdd");var d=Sm(n(o,A),A);return d["!cols"]=A.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete A.DBF,d}function s(o,l){try{return Zd(r(o,l),l)}catch(A){if(l&&l.WTF)throw A}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var A=l||{};if(+A.codepage>=0&&cc(+A.codepage),A.type=="string")throw new Error("Cannot write DBF to JS string");var d=fo(),h=U2(o,{header:1,raw:!0,cellDates:!0}),p=h[0],g=h.slice(1),w=o["!cols"]||[],b=0,E=0,B=0,I=1;for(b=0;b<p.length;++b){if(((w[b]||{}).DBF||{}).name){p[b]=w[b].DBF.name,++B;continue}if(p[b]!=null){if(++B,typeof p[b]=="number"&&(p[b]=p[b].toString(10)),typeof p[b]!="string")throw new Error("DBF Invalid column name "+p[b]+" |"+typeof p[b]+"|");if(p.indexOf(p[b])!==b){for(E=0;E<1024;++E)if(p.indexOf(p[b]+"_"+E)==-1){p[b]+="_"+E;break}}}}var k=pr(o["!ref"]),F=[],D=[],P=[];for(b=0;b<=k.e.c-k.s.c;++b){var S="",N="",T=0,V=[];for(E=0;E<g.length;++E)g[E][b]!=null&&V.push(g[E][b]);if(V.length==0||p[b]==null){F[b]="?";continue}for(E=0;E<V.length;++E){switch(typeof V[E]){case"number":N="B";break;case"string":N="C";break;case"boolean":N="L";break;case"object":N=V[E]instanceof Date?"D":"C";break;default:N="C"}T=Math.max(T,String(V[E]).length),S=S&&S!=N?"C":N}T>250&&(T=250),N=((w[b]||{}).DBF||{}).type,N=="C"&&w[b].DBF.len>T&&(T=w[b].DBF.len),S=="B"&&N=="N"&&(S="N",P[b]=w[b].DBF.dec,T=w[b].DBF.len),D[b]=S=="C"||N=="N"?T:a[S]||0,I+=D[b],F[b]=S}var M=d.next(32);for(M.write_shift(4,318902576),M.write_shift(4,g.length),M.write_shift(2,296+32*B),M.write_shift(2,I),b=0;b<4;++b)M.write_shift(4,0);for(M.write_shift(4,0|(+e[JL]||3)<<8),b=0,E=0;b<p.length;++b)if(p[b]!=null){var U=d.next(32),O=(p[b].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);U.write_shift(1,O,"sbcs"),U.write_shift(1,F[b]=="?"?"C":F[b],"sbcs"),U.write_shift(4,E),U.write_shift(1,D[b]||a[F[b]]||0),U.write_shift(1,P[b]||0),U.write_shift(1,2),U.write_shift(4,0),U.write_shift(1,0),U.write_shift(4,0),U.write_shift(4,0),E+=D[b]||a[F[b]]||0}var G=d.next(264);for(G.write_shift(4,13),b=0;b<65;++b)G.write_shift(4,0);for(b=0;b<g.length;++b){var ie=d.next(I);for(ie.write_shift(1,0),E=0;E<p.length;++E)if(p[E]!=null)switch(F[E]){case"L":ie.write_shift(1,g[b][E]==null?63:g[b][E]?84:70);break;case"B":ie.write_shift(8,g[b][E]||0,"f");break;case"N":var K="0";for(typeof g[b][E]=="number"&&(K=g[b][E].toFixed(P[E]||0)),B=0;B<D[E]-K.length;++B)ie.write_shift(1,32);ie.write_shift(1,K,"sbcs");break;case"D":g[b][E]?(ie.write_shift(4,("0000"+g[b][E].getFullYear()).slice(-4),"sbcs"),ie.write_shift(2,("00"+(g[b][E].getMonth()+1)).slice(-2),"sbcs"),ie.write_shift(2,("00"+g[b][E].getDate()).slice(-2),"sbcs")):ie.write_shift(8,"00000000","sbcs");break;case"C":var q=String(g[b][E]!=null?g[b][E]:"").slice(0,D[E]);for(ie.write_shift(1,q,"sbcs"),B=0;B<D[E]-q.length;++B)ie.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:r,from_sheet:i}}(),cM=function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Ds(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(p,g){var w=t[g];return typeof w=="number"?eI(w):w},r=function(p,g,w){var b=g.charCodeAt(0)-32<<4|w.charCodeAt(0)-48;return b==59?p:eI(b)};t["|"]=254;function s(p,g){switch(g.type){case"base64":return a(Vo(p),g);case"binary":return a(p,g);case"buffer":return a(zn&&Buffer.isBuffer(p)?p.toString("binary"):Xd(p),g);case"array":return a(nh(p),g)}throw new Error("Unrecognized type "+g.type)}function a(p,g){var w=p.split(/[\n\r]+/),b=-1,E=-1,B=0,I=0,k=[],F=[],D=null,P={},S=[],N=[],T=[],V=0,M;for(+g.codepage>=0&&cc(+g.codepage);B!==w.length;++B){V=0;var U=w[B].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,n),O=U.replace(/;;/g,"\0").split(";").map(function(ne){return ne.replace(/\u0000/g,";")}),G=O[0],ie;if(U.length>0)switch(G){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":O[1].charAt(0)=="P"&&F.push(U.slice(3).replace(/;;/g,";"));break;case"C":var K=!1,q=!1,se=!1,Z=!1,X=-1,de=-1;for(I=1;I<O.length;++I)switch(O[I].charAt(0)){case"A":break;case"X":E=parseInt(O[I].slice(1))-1,q=!0;break;case"Y":for(b=parseInt(O[I].slice(1))-1,q||(E=0),M=k.length;M<=b;++M)k[M]=[];break;case"K":ie=O[I].slice(1),ie.charAt(0)==='"'?ie=ie.slice(1,ie.length-1):ie==="TRUE"?ie=!0:ie==="FALSE"?ie=!1:isNaN(uc(ie))?isNaN(im(ie).getDate())||(ie=rs(ie)):(ie=uc(ie),D!==null&&Em(D)&&(ie=Ry(ie))),K=!0;break;case"E":Z=!0;var j=G0(O[I].slice(1),{r:b,c:E});k[b][E]=[k[b][E],j];break;case"S":se=!0,k[b][E]=[k[b][E],"S5S"];break;case"G":break;case"R":X=parseInt(O[I].slice(1))-1;break;case"C":de=parseInt(O[I].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+U)}if(K&&(k[b][E]&&k[b][E].length==2?k[b][E][0]=ie:k[b][E]=ie,D=null),se){if(Z)throw new Error("SYLK shared formula cannot have own formula");var W=X>-1&&k[X][de];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");k[b][E][1]=TM(W[1],{r:b-X,c:E-de})}break;case"F":var J=0;for(I=1;I<O.length;++I)switch(O[I].charAt(0)){case"X":E=parseInt(O[I].slice(1))-1,++J;break;case"Y":for(b=parseInt(O[I].slice(1))-1,M=k.length;M<=b;++M)k[M]=[];break;case"M":V=parseInt(O[I].slice(1))/20;break;case"F":break;case"G":break;case"P":D=F[parseInt(O[I].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(T=O[I].slice(1).split(" "),M=parseInt(T[0],10);M<=parseInt(T[1],10);++M)V=parseInt(T[2],10),N[M-1]=V===0?{hidden:!0}:{wch:V},qd(N[M-1]);break;case"C":E=parseInt(O[I].slice(1))-1,N[E]||(N[E]={});break;case"R":b=parseInt(O[I].slice(1))-1,S[b]||(S[b]={}),V>0?(S[b].hpt=V,S[b].hpx=lm(V)):V===0&&(S[b].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+U)}J<1&&(D=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+U)}}return S.length>0&&(P["!rows"]=S),N.length>0&&(P["!cols"]=N),g&&g.sheetRows&&(k=k.slice(0,g.sheetRows)),[k,P]}function i(p,g){var w=s(p,g),b=w[0],E=w[1],B=Sm(b,g);return Ds(E).forEach(function(I){B[I]=E[I]}),B}function o(p,g){return Zd(i(p,g),g)}function l(p,g,w,b){var E="C;Y"+(w+1)+";X"+(b+1)+";K";switch(p.t){case"n":E+=p.v||0,p.f&&!p.F&&(E+=";E"+yS(p.f,{r:w,c:b}));break;case"b":E+=p.v?"TRUE":"FALSE";break;case"e":E+=p.w||p.v;break;case"d":E+='"'+(p.w||p.v)+'"';break;case"s":E+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return E}function A(p,g){g.forEach(function(w,b){var E="F;W"+(b+1)+" "+(b+1)+" ";w.hidden?E+="0":(typeof w.width=="number"&&!w.wpx&&(w.wpx=Lg(w.width)),typeof w.wpx=="number"&&!w.wch&&(w.wch=Mg(w.wpx)),typeof w.wch=="number"&&(E+=Math.round(w.wch))),E.charAt(E.length-1)!=" "&&p.push(E)})}function d(p,g){g.forEach(function(w,b){var E="F;";w.hidden?E+="M0;":w.hpt?E+="M"+20*w.hpt+";":w.hpx&&(E+="M"+20*Pg(w.hpx)+";"),E.length>2&&p.push(E+"R"+(b+1))})}function h(p,g){var w=["ID;PWXL;N;E"],b=[],E=pr(p["!ref"]),B,I=Array.isArray(p),k=`\r
`;w.push("P;PGeneral"),w.push("F;P0;DG0G8;M255"),p["!cols"]&&A(w,p["!cols"]),p["!rows"]&&d(w,p["!rows"]),w.push("B;Y"+(E.e.r-E.s.r+1)+";X"+(E.e.c-E.s.c+1)+";D"+[E.s.c,E.s.r,E.e.c,E.e.r].join(" "));for(var F=E.s.r;F<=E.e.r;++F)for(var D=E.s.c;D<=E.e.c;++D){var P=wn({r:F,c:D});B=I?(p[F]||[])[D]:p[P],!(!B||B.v==null&&(!B.f||B.F))&&b.push(l(B,p,F,D))}return w.join(k)+k+b.join(k)+k+"E"+k}return{to_workbook:o,to_sheet:i,from_sheet:h}}(),AM=function(){function t(a,i){switch(i.type){case"base64":return e(Vo(a),i);case"binary":return e(a,i);case"buffer":return e(zn&&Buffer.isBuffer(a)?a.toString("binary"):Xd(a),i);case"array":return e(nh(a),i)}throw new Error("Unrecognized type "+i.type)}function e(a,i){for(var o=a.split(`
`),l=-1,A=-1,d=0,h=[];d!==o.length;++d){if(o[d].trim()==="BOT"){h[++l]=[],A=0;continue}if(!(l<0)){var p=o[d].trim().split(","),g=p[0],w=p[1];++d;for(var b=o[d]||"";(b.match(/["]/g)||[]).length&1&&d<o.length-1;)b+=`
`+o[++d];switch(b=b.trim(),+g){case-1:if(b==="BOT"){h[++l]=[],A=0;continue}else if(b!=="EOD")throw new Error("Unrecognized DIF special command "+b);break;case 0:b==="TRUE"?h[l][A]=!0:b==="FALSE"?h[l][A]=!1:isNaN(uc(w))?isNaN(im(w).getDate())?h[l][A]=w:h[l][A]=rs(w):h[l][A]=uc(w),++A;break;case 1:b=b.slice(1,b.length-1),b=b.replace(/""/g,'"'),b&&b.match(/^=".*"$/)&&(b=b.slice(2,-1)),h[l][A++]=b!==""?b:null;break}if(b==="EOD")break}}return i&&i.sheetRows&&(h=h.slice(0,i.sheetRows)),h}function n(a,i){return Sm(t(a,i),i)}function r(a,i){return Zd(n(a,i),i)}var s=function(){var a=function(l,A,d,h,p){l.push(A),l.push(d+","+h),l.push('"'+p.replace(/"/g,'""')+'"')},i=function(l,A,d,h){l.push(A+","+d),l.push(A==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(l){var A=[],d=pr(l["!ref"]),h,p=Array.isArray(l);a(A,"TABLE",0,1,"sheetjs"),a(A,"VECTORS",0,d.e.r-d.s.r+1,""),a(A,"TUPLES",0,d.e.c-d.s.c+1,""),a(A,"DATA",0,0,"");for(var g=d.s.r;g<=d.e.r;++g){i(A,-1,0,"BOT");for(var w=d.s.c;w<=d.e.c;++w){var b=wn({r:g,c:w});if(h=p?(l[g]||[])[w]:l[b],!h){i(A,1,0,"");continue}switch(h.t){case"n":var E=h.w;!E&&h.v!=null&&(E=h.v),E==null?h.f&&!h.F?i(A,1,0,"="+h.f):i(A,1,0,""):i(A,0,E,"V");break;case"b":i(A,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":i(A,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=Nl(h.z||gn[14],Ta(rs(h.v)))),i(A,0,h.w,"V");break;default:i(A,1,0,"")}}}i(A,-1,0,"EOD");var B=`\r
`,I=A.join(B);return I}}();return{to_workbook:r,to_sheet:n,from_sheet:s}}(),uM=function(){function t(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(h,p){for(var g=h.split(`
`),w=-1,b=-1,E=0,B=[];E!==g.length;++E){var I=g[E].trim().split(":");if(I[0]==="cell"){var k=vs(I[1]);if(B.length<=k.r)for(w=B.length;w<=k.r;++w)B[w]||(B[w]=[]);switch(w=k.r,b=k.c,I[2]){case"t":B[w][b]=t(I[3]);break;case"v":B[w][b]=+I[3];break;case"vtf":var F=I[I.length-1];case"vtc":switch(I[3]){case"nl":B[w][b]=!!+I[4];break;default:B[w][b]=+I[4];break}I[2]=="vtf"&&(B[w][b]=[B[w][b],F])}}}return p&&p.sheetRows&&(B=B.slice(0,p.sheetRows)),B}function r(h,p){return Sm(n(h,p),p)}function s(h,p){return Zd(r(h,p),p)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function A(h){if(!h||!h["!ref"])return"";for(var p=[],g=[],w,b="",E=po(h["!ref"]),B=Array.isArray(h),I=E.s.r;I<=E.e.r;++I)for(var k=E.s.c;k<=E.e.c;++k)if(b=wn({r:I,c:k}),w=B?(h[I]||[])[k]:h[b],!(!w||w.v==null||w.t==="z")){switch(g=["cell",b,"t"],w.t){case"s":case"str":g.push(e(w.v));break;case"n":w.f?(g[2]="vtf",g[3]="n",g[4]=w.v,g[5]=e(w.f)):(g[2]="v",g[3]=w.v);break;case"b":g[2]="vt"+(w.f?"f":"c"),g[3]="nl",g[4]=w.v?"1":"0",g[5]=e(w.f||(w.v?"TRUE":"FALSE"));break;case"d":var F=Ta(rs(w.v));g[2]="vtc",g[3]="nd",g[4]=""+F,g[5]=w.w||Nl(w.z||gn[14],F);break;case"e":continue}p.push(g.join(":"))}return p.push("sheet:c:"+(E.e.c-E.s.c+1)+":r:"+(E.e.r-E.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function d(h){return[a,i,o,i,A(h),l].join(`
`)}return{to_workbook:s,to_sheet:r,from_sheet:d}}(),om=function(){function t(d,h,p,g,w){w.raw?h[p][g]=d:d===""||(d==="TRUE"?h[p][g]=!0:d==="FALSE"?h[p][g]=!1:isNaN(uc(d))?isNaN(im(d).getDate())?h[p][g]=d:h[p][g]=rs(d):h[p][g]=uc(d))}function e(d,h){var p=h||{},g=[];if(!d||d.length===0)return g;for(var w=d.split(/[\r\n]/),b=w.length-1;b>=0&&w[b].length===0;)--b;for(var E=10,B=0,I=0;I<=b;++I)B=w[I].indexOf(" "),B==-1?B=w[I].length:B++,E=Math.max(E,B);for(I=0;I<=b;++I){g[I]=[];var k=0;for(t(w[I].slice(0,E).trim(),g,I,k,p),k=1;k<=(w[I].length-E)/10+1;++k)t(w[I].slice(E+(k-1)*10,E+k*10).trim(),g,I,k,p)}return p.sheetRows&&(g=g.slice(0,p.sheetRows)),g}var n={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function s(d){for(var h={},p=!1,g=0,w=0;g<d.length;++g)(w=d.charCodeAt(g))==34?p=!p:!p&&w in n&&(h[w]=(h[w]||0)+1);w=[];for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&w.push([h[g],g]);if(!w.length){h=r;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&w.push([h[g],g])}return w.sort(function(b,E){return b[0]-E[0]||r[b[1]]-r[E[1]]}),n[w.pop()[1]]||44}function a(d,h){var p=h||{},g="",w=p.dense?[]:{},b={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(g=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(g=d.charAt(4),d=d.slice(6)):g=s(d.slice(0,1024)):p&&p.FS?g=p.FS:g=s(d.slice(0,1024));var E=0,B=0,I=0,k=0,F=0,D=g.charCodeAt(0),P=!1,S=0,N=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var T=p.dateNF!=null?Eae(p.dateNF):null;function V(){var M=d.slice(k,F),U={};if(M.charAt(0)=='"'&&M.charAt(M.length-1)=='"'&&(M=M.slice(1,-1).replace(/""/g,'"')),M.length===0)U.t="z";else if(p.raw)U.t="s",U.v=M;else if(M.trim().length===0)U.t="s",U.v=M;else if(M.charCodeAt(0)==61)M.charCodeAt(1)==34&&M.charCodeAt(M.length-1)==34?(U.t="s",U.v=M.slice(2,-1).replace(/""/g,'"')):ZAe(M)?(U.t="n",U.f=M.slice(1)):(U.t="s",U.v=M);else if(M=="TRUE")U.t="b",U.v=!0;else if(M=="FALSE")U.t="b",U.v=!1;else if(!isNaN(I=uc(M)))U.t="n",p.cellText!==!1&&(U.w=M),U.v=I;else if(!isNaN(im(M).getDate())||T&&M.match(T)){U.z=p.dateNF||gn[14];var O=0;T&&M.match(T)&&(M=_ae(M,p.dateNF,M.match(T)||[]),O=1),p.cellDates?(U.t="d",U.v=rs(M,O)):(U.t="n",U.v=Ta(rs(M,O))),p.cellText!==!1&&(U.w=Nl(U.z,U.v instanceof Date?Ta(U.v):U.v)),p.cellNF||delete U.z}else U.t="s",U.v=M;if(U.t=="z"||(p.dense?(w[E]||(w[E]=[]),w[E][B]=U):w[wn({c:B,r:E})]=U),k=F+1,N=d.charCodeAt(k),b.e.c<B&&(b.e.c=B),b.e.r<E&&(b.e.r=E),S==D)++B;else if(B=0,++E,p.sheetRows&&p.sheetRows<=E)return!0}e:for(;F<d.length;++F)switch(S=d.charCodeAt(F)){case 34:N===34&&(P=!P);break;case D:case 10:case 13:if(!P&&V())break e;break}return F-k>0&&V(),w["!ref"]=Fn(b),w}function i(d,h){return!(h&&h.PRN)||h.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,h):Sm(e(d,h),h)}function o(d,h){var p="",g=h.type=="string"?[0,0,0,0]:BS(d,h);switch(h.type){case"base64":p=Vo(d);break;case"binary":p=d;break;case"buffer":h.codepage==65001?p=d.toString("utf8"):h.codepage&&typeof Bg<"u"||(p=zn&&Buffer.isBuffer(d)?d.toString("binary"):Xd(d));break;case"array":p=nh(d);break;case"string":p=d;break;default:throw new Error("Unrecognized type "+h.type)}return g[0]==239&&g[1]==187&&g[2]==191?p=Kr(p.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?p=Kr(p):h.type=="binary"&&typeof Bg<"u",p.slice(0,19)=="socialcalc:version:"?uM.to_sheet(h.type=="string"?p:Kr(p),h):i(p,h)}function l(d,h){return Zd(o(d,h),h)}function A(d){for(var h=[],p=pr(d["!ref"]),g,w=Array.isArray(d),b=p.s.r;b<=p.e.r;++b){for(var E=[],B=p.s.c;B<=p.e.c;++B){var I=wn({r:b,c:B});if(g=w?(d[b]||[])[B]:d[I],!g||g.v==null){E.push("          ");continue}for(var k=(g.w||(fu(g),g.w)||"").slice(0,10);k.length<10;)k+=" ";E.push(k+(B===0?" ":""))}h.push(E.join(""))}return h.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:A}}();function jle(t,e){var n=e||{},r=!!n.WTF;n.WTF=!0;try{var s=cM.to_workbook(t,n);return n.WTF=r,s}catch(a){if(n.WTF=r,!a.message.match(/SYLK bad record ID/)&&r)throw a;return om.to_workbook(t,e)}}var zf=function(){function t(j,W,J){if(j){Za(j,j.l||0);for(var ne=J.Enum||X;j.l<j.length;){var oe=j.read_shift(2),ue=ne[oe]||ne[65535],me=j.read_shift(2),ge=j.l+me,ke=ue.f&&ue.f(j,me,J);if(j.l=ge,W(ke,ue,oe))return}}}function e(j,W){switch(W.type){case"base64":return n(jo(Vo(j)),W);case"binary":return n(jo(j),W);case"buffer":case"array":return n(j,W)}throw"Unsupported type "+W.type}function n(j,W){if(!j)return j;var J=W||{},ne=J.dense?[]:{},oe="Sheet1",ue="",me=0,ge={},ke=[],ve=[],ae={s:{r:0,c:0},e:{r:0,c:0}},Re=J.sheetRows||0;if(j[2]==0&&(j[3]==8||j[3]==9)&&j.length>=16&&j[14]==5&&j[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(j[2]==2)J.Enum=X,t(j,function(Ge,tt,it){switch(it){case 0:J.vers=Ge,Ge>=4096&&(J.qpro=!0);break;case 6:ae=Ge;break;case 204:Ge&&(ue=Ge);break;case 222:ue=Ge;break;case 15:case 51:J.qpro||(Ge[1].v=Ge[1].v.slice(1));case 13:case 14:case 16:it==14&&(Ge[2]&112)==112&&(Ge[2]&15)>1&&(Ge[2]&15)<15&&(Ge[1].z=J.dateNF||gn[14],J.cellDates&&(Ge[1].t="d",Ge[1].v=Ry(Ge[1].v))),J.qpro&&Ge[3]>me&&(ne["!ref"]=Fn(ae),ge[oe]=ne,ke.push(oe),ne=J.dense?[]:{},ae={s:{r:0,c:0},e:{r:0,c:0}},me=Ge[3],oe=ue||"Sheet"+(me+1),ue="");var mt=J.dense?(ne[Ge[0].r]||[])[Ge[0].c]:ne[wn(Ge[0])];if(mt){mt.t=Ge[1].t,mt.v=Ge[1].v,Ge[1].z!=null&&(mt.z=Ge[1].z),Ge[1].f!=null&&(mt.f=Ge[1].f);break}J.dense?(ne[Ge[0].r]||(ne[Ge[0].r]=[]),ne[Ge[0].r][Ge[0].c]=Ge[1]):ne[wn(Ge[0])]=Ge[1];break}},J);else if(j[2]==26||j[2]==14)J.Enum=de,j[2]==14&&(J.qpro=!0,j.l=0),t(j,function(Ge,tt,it){switch(it){case 204:oe=Ge;break;case 22:Ge[1].v=Ge[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ge[3]>me&&(ne["!ref"]=Fn(ae),ge[oe]=ne,ke.push(oe),ne=J.dense?[]:{},ae={s:{r:0,c:0},e:{r:0,c:0}},me=Ge[3],oe="Sheet"+(me+1)),Re>0&&Ge[0].r>=Re)break;J.dense?(ne[Ge[0].r]||(ne[Ge[0].r]=[]),ne[Ge[0].r][Ge[0].c]=Ge[1]):ne[wn(Ge[0])]=Ge[1],ae.e.c<Ge[0].c&&(ae.e.c=Ge[0].c),ae.e.r<Ge[0].r&&(ae.e.r=Ge[0].r);break;case 27:Ge[14e3]&&(ve[Ge[14e3][0]]=Ge[14e3][1]);break;case 1537:ve[Ge[0]]=Ge[1],Ge[0]==me&&(oe=Ge[1]);break}},J);else throw new Error("Unrecognized LOTUS BOF "+j[2]);if(ne["!ref"]=Fn(ae),ge[ue||oe]=ne,ke.push(ue||oe),!ve.length)return{SheetNames:ke,Sheets:ge};for(var Je={},De=[],Ee=0;Ee<ve.length;++Ee)ge[ke[Ee]]?(De.push(ve[Ee]||ke[Ee]),Je[ve[Ee]]=ge[ve[Ee]]||ge[ke[Ee]]):(De.push(ve[Ee]),Je[ve[Ee]]={"!ref":"A1"});return{SheetNames:De,Sheets:Je}}function r(j,W){var J=W||{};if(+J.codepage>=0&&cc(+J.codepage),J.type=="string")throw new Error("Cannot write WK1 to JS string");var ne=fo(),oe=pr(j["!ref"]),ue=Array.isArray(j),me=[];Dt(ne,0,a(1030)),Dt(ne,6,l(oe));for(var ge=Math.min(oe.e.r,8191),ke=oe.s.r;ke<=ge;++ke)for(var ve=Ys(ke),ae=oe.s.c;ae<=oe.e.c;++ae){ke===oe.s.r&&(me[ae]=xs(ae));var Re=me[ae]+ve,Je=ue?(j[ke]||[])[ae]:j[Re];if(!(!Je||Je.t=="z"))if(Je.t=="n")(Je.v|0)==Je.v&&Je.v>=-32768&&Je.v<=32767?Dt(ne,13,g(ke,ae,Je.v)):Dt(ne,14,b(ke,ae,Je.v));else{var De=fu(Je);Dt(ne,15,h(ke,ae,De.slice(0,239)))}}return Dt(ne,1),ne.end()}function s(j,W){var J=W||{};if(+J.codepage>=0&&cc(+J.codepage),J.type=="string")throw new Error("Cannot write WK3 to JS string");var ne=fo();Dt(ne,0,i(j));for(var oe=0,ue=0;oe<j.SheetNames.length;++oe)(j.Sheets[j.SheetNames[oe]]||{})["!ref"]&&Dt(ne,27,Z(j.SheetNames[oe],ue++));var me=0;for(oe=0;oe<j.SheetNames.length;++oe){var ge=j.Sheets[j.SheetNames[oe]];if(!(!ge||!ge["!ref"])){for(var ke=pr(ge["!ref"]),ve=Array.isArray(ge),ae=[],Re=Math.min(ke.e.r,8191),Je=ke.s.r;Je<=Re;++Je)for(var De=Ys(Je),Ee=ke.s.c;Ee<=ke.e.c;++Ee){Je===ke.s.r&&(ae[Ee]=xs(Ee));var Ge=ae[Ee]+De,tt=ve?(ge[Je]||[])[Ee]:ge[Ge];if(!(!tt||tt.t=="z"))if(tt.t=="n")Dt(ne,23,V(Je,Ee,me,tt.v));else{var it=fu(tt);Dt(ne,22,S(Je,Ee,me,it.slice(0,239)))}}++me}}return Dt(ne,1),ne.end()}function a(j){var W=lt(2);return W.write_shift(2,j),W}function i(j){var W=lt(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var J=0,ne=0,oe=0,ue=0;ue<j.SheetNames.length;++ue){var me=j.SheetNames[ue],ge=j.Sheets[me];if(!(!ge||!ge["!ref"])){++oe;var ke=po(ge["!ref"]);J<ke.e.r&&(J=ke.e.r),ne<ke.e.c&&(ne=ke.e.c)}}return J>8191&&(J=8191),W.write_shift(2,J),W.write_shift(1,oe),W.write_shift(1,ne),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function o(j,W,J){var ne={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&J.qpro?(ne.s.c=j.read_shift(1),j.l++,ne.s.r=j.read_shift(2),ne.e.c=j.read_shift(1),j.l++,ne.e.r=j.read_shift(2),ne):(ne.s.c=j.read_shift(2),ne.s.r=j.read_shift(2),W==12&&J.qpro&&(j.l+=2),ne.e.c=j.read_shift(2),ne.e.r=j.read_shift(2),W==12&&J.qpro&&(j.l+=2),ne.s.c==65535&&(ne.s.c=ne.e.c=ne.s.r=ne.e.r=0),ne)}function l(j){var W=lt(8);return W.write_shift(2,j.s.c),W.write_shift(2,j.s.r),W.write_shift(2,j.e.c),W.write_shift(2,j.e.r),W}function A(j,W,J){var ne=[{c:0,r:0},{t:"n",v:0},0,0];return J.qpro&&J.vers!=20768?(ne[0].c=j.read_shift(1),ne[3]=j.read_shift(1),ne[0].r=j.read_shift(2),j.l+=2):(ne[2]=j.read_shift(1),ne[0].c=j.read_shift(2),ne[0].r=j.read_shift(2)),ne}function d(j,W,J){var ne=j.l+W,oe=A(j,W,J);if(oe[1].t="s",J.vers==20768){j.l++;var ue=j.read_shift(1);return oe[1].v=j.read_shift(ue,"utf8"),oe}return J.qpro&&j.l++,oe[1].v=j.read_shift(ne-j.l,"cstr"),oe}function h(j,W,J){var ne=lt(7+J.length);ne.write_shift(1,255),ne.write_shift(2,W),ne.write_shift(2,j),ne.write_shift(1,39);for(var oe=0;oe<ne.length;++oe){var ue=J.charCodeAt(oe);ne.write_shift(1,ue>=128?95:ue)}return ne.write_shift(1,0),ne}function p(j,W,J){var ne=A(j,W,J);return ne[1].v=j.read_shift(2,"i"),ne}function g(j,W,J){var ne=lt(7);return ne.write_shift(1,255),ne.write_shift(2,W),ne.write_shift(2,j),ne.write_shift(2,J,"i"),ne}function w(j,W,J){var ne=A(j,W,J);return ne[1].v=j.read_shift(8,"f"),ne}function b(j,W,J){var ne=lt(13);return ne.write_shift(1,255),ne.write_shift(2,W),ne.write_shift(2,j),ne.write_shift(8,J,"f"),ne}function E(j,W,J){var ne=j.l+W,oe=A(j,W,J);if(oe[1].v=j.read_shift(8,"f"),J.qpro)j.l=ne;else{var ue=j.read_shift(2);F(j.slice(j.l,j.l+ue),oe),j.l+=ue}return oe}function B(j,W,J){var ne=W&32768;return W&=-32769,W=(ne?j:0)+(W>=8192?W-16384:W),(ne?"":"$")+(J?xs(W):Ys(W))}var I={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},k=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function F(j,W){Za(j,0);for(var J=[],ne=0,oe="",ue="",me="",ge="";j.l<j.length;){var ke=j[j.l++];switch(ke){case 0:J.push(j.read_shift(8,"f"));break;case 1:ue=B(W[0].c,j.read_shift(2),!0),oe=B(W[0].r,j.read_shift(2),!1),J.push(ue+oe);break;case 2:{var ve=B(W[0].c,j.read_shift(2),!0),ae=B(W[0].r,j.read_shift(2),!1);ue=B(W[0].c,j.read_shift(2),!0),oe=B(W[0].r,j.read_shift(2),!1),J.push(ve+ae+":"+ue+oe)}break;case 3:if(j.l<j.length){console.error("WK1 premature formula end");return}break;case 4:J.push("("+J.pop()+")");break;case 5:J.push(j.read_shift(2));break;case 6:{for(var Re="";ke=j[j.l++];)Re+=String.fromCharCode(ke);J.push('"'+Re.replace(/"/g,'""')+'"')}break;case 8:J.push("-"+J.pop());break;case 23:J.push("+"+J.pop());break;case 22:J.push("NOT("+J.pop()+")");break;case 20:case 21:ge=J.pop(),me=J.pop(),J.push(["AND","OR"][ke-20]+"("+me+","+ge+")");break;default:if(ke<32&&k[ke])ge=J.pop(),me=J.pop(),J.push(me+k[ke]+ge);else if(I[ke]){if(ne=I[ke][1],ne==69&&(ne=j[j.l++]),ne>J.length){console.error("WK1 bad formula parse 0x"+ke.toString(16)+":|"+J.join("|")+"|");return}var Je=J.slice(-ne);J.length-=ne,J.push(I[ke][0]+"("+Je.join(",")+")")}else return ke<=7?console.error("WK1 invalid opcode "+ke.toString(16)):ke<=24?console.error("WK1 unsupported op "+ke.toString(16)):ke<=30?console.error("WK1 invalid opcode "+ke.toString(16)):ke<=115?console.error("WK1 unsupported function opcode "+ke.toString(16)):console.error("WK1 unrecognized opcode "+ke.toString(16))}}J.length==1?W[1].f=""+J[0]:console.error("WK1 bad formula parse |"+J.join("|")+"|")}function D(j){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=j.read_shift(2),W[3]=j[j.l++],W[0].c=j[j.l++],W}function P(j,W){var J=D(j);return J[1].t="s",J[1].v=j.read_shift(W-4,"cstr"),J}function S(j,W,J,ne){var oe=lt(6+ne.length);oe.write_shift(2,j),oe.write_shift(1,J),oe.write_shift(1,W),oe.write_shift(1,39);for(var ue=0;ue<ne.length;++ue){var me=ne.charCodeAt(ue);oe.write_shift(1,me>=128?95:me)}return oe.write_shift(1,0),oe}function N(j,W){var J=D(j);J[1].v=j.read_shift(2);var ne=J[1].v>>1;if(J[1].v&1)switch(ne&7){case 0:ne=(ne>>3)*5e3;break;case 1:ne=(ne>>3)*500;break;case 2:ne=(ne>>3)/20;break;case 3:ne=(ne>>3)/200;break;case 4:ne=(ne>>3)/2e3;break;case 5:ne=(ne>>3)/2e4;break;case 6:ne=(ne>>3)/16;break;case 7:ne=(ne>>3)/64;break}return J[1].v=ne,J}function T(j,W){var J=D(j),ne=j.read_shift(4),oe=j.read_shift(4),ue=j.read_shift(2);if(ue==65535)return ne===0&&oe===3221225472?(J[1].t="e",J[1].v=15):ne===0&&oe===3489660928?(J[1].t="e",J[1].v=42):J[1].v=0,J;var me=ue&32768;return ue=(ue&32767)-16446,J[1].v=(1-me*2)*(oe*Math.pow(2,ue+32)+ne*Math.pow(2,ue)),J}function V(j,W,J,ne){var oe=lt(14);if(oe.write_shift(2,j),oe.write_shift(1,J),oe.write_shift(1,W),ne==0)return oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(2,65535),oe;var ue=0,me=0,ge=0,ke=0;return ne<0&&(ue=1,ne=-ne),me=Math.log2(ne)|0,ne/=Math.pow(2,me-31),ke=ne>>>0,(ke&2147483648)==0&&(ne/=2,++me,ke=ne>>>0),ne-=ke,ke|=2147483648,ke>>>=0,ne*=Math.pow(2,32),ge=ne>>>0,oe.write_shift(4,ge),oe.write_shift(4,ke),me+=16383+(ue?32768:0),oe.write_shift(2,me),oe}function M(j,W){var J=T(j);return j.l+=W-14,J}function U(j,W){var J=D(j),ne=j.read_shift(4);return J[1].v=ne>>6,J}function O(j,W){var J=D(j),ne=j.read_shift(8,"f");return J[1].v=ne,J}function G(j,W){var J=O(j);return j.l+=W-10,J}function ie(j,W){return j[j.l+W-1]==0?j.read_shift(W,"cstr"):""}function K(j,W){var J=j[j.l++];J>W-1&&(J=W-1);for(var ne="";ne.length<J;)ne+=String.fromCharCode(j[j.l++]);return ne}function q(j,W,J){if(!(!J.qpro||W<21)){var ne=j.read_shift(1);j.l+=17,j.l+=1,j.l+=2;var oe=j.read_shift(W-21,"cstr");return[ne,oe]}}function se(j,W){for(var J={},ne=j.l+W;j.l<ne;){var oe=j.read_shift(2);if(oe==14e3){for(J[oe]=[0,""],J[oe][0]=j.read_shift(2);j[j.l];)J[oe][1]+=String.fromCharCode(j[j.l]),j.l++;j.l++}}return J}function Z(j,W){var J=lt(5+j.length);J.write_shift(2,14e3),J.write_shift(2,W);for(var ne=0;ne<j.length;++ne){var oe=j.charCodeAt(ne);J[J.l++]=oe>127?95:oe}return J[J.l++]=0,J}var X={0:{n:"BOF",f:Aa},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:w},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:E},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ie},222:{n:"SHEETNAMELP",f:K},65535:{n:""}},de={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:P},23:{n:"NUMBER17",f:T},24:{n:"NUMBER18",f:N},25:{n:"FORMULA19",f:M},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:se},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:U},38:{n:"??"},39:{n:"NUMBER27",f:O},40:{n:"FORMULA28",f:G},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ie},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:q},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:s,to_workbook:e}}();function Ole(t){var e={},n=t.match(Ui),r=0,s=!1;if(n)for(;r!=n.length;++r){var a=En(n[r]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;e.cp=z5[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=a.val;break;case"<sz":e.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":a.rgb&&(e.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+a[0])}}return e}var Qle=function(){var t=Ig("t"),e=Ig("rPr");function n(a){var i=a.match(t);if(!i)return{t:"s",v:""};var o={t:"s",v:mr(i[1])},l=a.match(e);return l&&(o.s=Ole(l[1])),o}var r=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(i){return i.replace(r,"").split(s).map(n).filter(function(o){return o.v})}}(),Hle=function(){var e=/(\r\n|\n)/g;function n(s,a,i){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),s.b&&(a.push("<b>"),i.push("</b>")),s.i&&(a.push("<i>"),i.push("</i>")),s.strike&&(a.push("<s>"),i.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(a.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),s}function r(s){var a=[[],s.v,[]];return s.v?(s.s&&n(s.s,a[0],a[2]),a[0].join("")+a[1].replace(e,"<br/>")+a[2].join("")):""}return function(a){return a.map(r).join("")}}(),Vle=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Gle=/<(?:\w+:)?r>/,zle=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function mS(t,e){var n=e?e.cellHTML:!0,r={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(r.t=mr(Kr(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),r.r=Kr(t),n&&(r.h=tS(r.t))):t.match(Gle)&&(r.r=Kr(t),r.t=mr(Kr((t.replace(zle,"").match(Vle)||[]).join("").replace(Ui,""))),n&&(r.h=Hle(Qle(r.r)))),r):{t:""}}var Kle=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,qle=/<(?:\w+:)?(?:si|sstItem)>/g,Wle=/<\/(?:\w+:)?(?:si|sstItem)>/;function $le(t,e){var n=[],r="";if(!t)return n;var s=t.match(Kle);if(s){r=s[2].replace(qle,"").split(Wle);for(var a=0;a!=r.length;++a){var i=mS(r[a].trim(),e);i!=null&&(n[n.length]=i)}s=En(s[1]),n.Count=s.count,n.Unique=s.uniqueCount}return n}var Yle=/^\s|\s$|[\t\n\r]/;function dM(t,e){if(!e.bookSST)return"";var n=[Xs];n[n.length]=Rt("sst",null,{xmlns:hh[0],count:t.Count,uniqueCount:t.Unique});for(var r=0;r!=t.length;++r)if(t[r]!=null){var s=t[r],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(Yle)&&(a+=' xml:space="preserve"'),a+=">"+Mr(s.t)+"</t>"),a+="</si>",n[n.length]=a}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}function Jle(t){return[t.read_shift(4),t.read_shift(4)]}function Xle(t,e){var n=[],r=!1;return yu(t,function(a,i,o){switch(o){case 159:n.Count=a[0],n.Unique=a[1];break;case 19:n.push(a);break;case 160:return!0;case 35:r=!0;break;case 36:r=!1;break;default:if(i.T,!r||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function Zle(t,e){return e||(e=lt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var ece=Aie;function tce(t){var e=fo();bt(e,159,Zle(t));for(var n=0;n<t.length;++n)bt(e,19,ece(t[n]));return bt(e,160),e.end()}function fM(t){for(var e=[],n=t.split(""),r=0;r<n.length;++r)e[r]=n[r].charCodeAt(0);return e}function ou(t,e){var n={};return n.Major=t.read_shift(2),n.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),n}function nce(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=ou(t,4),e.U=ou(t,4),e.W=ou(t,4),e}function rce(t){for(var e=t.read_shift(4),n=t.l+e-4,r={},s=t.read_shift(4),a=[];s-- >0;)a.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(r.name=t.read_shift(0,"lpp4"),r.comps=a,t.l!=n)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+n);return r}function sce(t){var e=[];t.l+=4;for(var n=t.read_shift(4);n-- >0;)e.push(rce(t));return e}function ace(t){var e=[];t.l+=4;for(var n=t.read_shift(4);n-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function ice(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=ou(t,4),e.U=ou(t,4),e.W=ou(t,4),e}function oce(t){var e=ice(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function hM(t,e){var n=t.l+e,r={};r.Flags=t.read_shift(4)&63,t.l+=4,r.AlgID=t.read_shift(4);var s=!1;switch(r.AlgID){case 26126:case 26127:case 26128:s=r.Flags==36;break;case 26625:s=r.Flags==4;break;case 0:s=r.Flags==16||r.Flags==4||r.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+r.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return r.AlgIDHash=t.read_shift(4),r.KeySize=t.read_shift(4),r.ProviderType=t.read_shift(4),t.l+=8,r.CSPName=t.read_shift(n-t.l>>1,"utf16le"),t.l=n,r}function mM(t,e){var n={},r=t.l+e;return t.l+=4,n.Salt=t.slice(t.l,t.l+16),t.l+=16,n.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),n.VerifierHash=t.slice(t.l,r),t.l=r,n}function lce(t){var e=ou(t);switch(e.Minor){case 2:return[e.Minor,cce(t)];case 3:return[e.Minor,Ace()];case 4:return[e.Minor,uce(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function cce(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var n=t.read_shift(4),r=hM(t,n),s=mM(t,t.length-t.l);return{t:"Std",h:r,v:s}}function Ace(){throw new Error("File is password-protected: ECMA-376 Extensible")}function uce(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var n=t.read_shift(t.length-t.l,"utf8"),r={};return n.replace(Ui,function(a){var i=En(a);switch(pA(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){r[o]=i[o]});break;case"<dataIntegrity":r.encryptedHmacKey=i.encryptedHmacKey,r.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":r.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":r.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":r.encs.push(i);break;default:throw i[0]}}),r}function dce(t,e){var n={},r=n.EncryptionVersionInfo=ou(t,4);if(e-=4,r.Minor!=2)throw new Error("unrecognized minor version code: "+r.Minor);if(r.Major>4||r.Major<2)throw new Error("unrecognized major version code: "+r.Major);n.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,n.EncryptionHeader=hM(t,s),e-=s,n.EncryptionVerifier=mM(t,e),n}function fce(t){var e={},n=e.EncryptionVersionInfo=ou(t,4);if(n.Major!=1||n.Minor!=1)throw"unrecognized version code "+n.Major+" : "+n.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function pS(t){var e=0,n,r=fM(t),s=r.length+1,a,i,o,l,A;for(n=Kd(s),n[0]=r.length,a=1;a!=s;++a)n[a]=r[a-1];for(a=s-1;a>=0;--a)i=n[a],o=(e&16384)===0?0:1,l=e<<1&32767,A=o|l,e=A^i;return e^52811}var pM=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],n=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],r=function(i){return(i/2|i*128)&255},s=function(i,o){return r(i^o)},a=function(i){for(var o=e[i.length-1],l=104,A=i.length-1;A>=0;--A)for(var d=i[A],h=0;h!=7;++h)d&64&&(o^=n[l]),d*=2,--l;return o};return function(i){for(var o=fM(i),l=a(o),A=o.length,d=Kd(16),h=0;h!=16;++h)d[h]=0;var p,g,w;for((A&1)===1&&(p=l>>8,d[A]=s(t[0],p),--A,p=l&255,g=o[o.length-1],d[A]=s(g,p));A>0;)--A,p=l>>8,d[A]=s(o[A],p),--A,p=l&255,d[A]=s(o[A],p);for(A=15,w=15-o.length;w>0;)p=l>>8,d[A]=s(t[w],p),--A,--w,p=l&255,d[A]=s(o[A],p),--A,--w;return d}}(),hce=function(t,e,n,r,s){s||(s=e),r||(r=pM(t));var a,i;for(a=0;a!=e.length;++a)i=e[a],i^=r[n],i=(i>>5|i<<3)&255,s[a]=i,++n;return[s,n,r]},mce=function(t){var e=0,n=pM(t);return function(r){var s=hce("",r,e,n);return e=s[1],s[0]}};function pce(t,e,n,r){var s={key:Aa(t),verificationBytes:Aa(t)};return n.password&&(s.verifier=pS(n.password)),r.valid=s.verificationBytes===s.verifier,r.valid&&(r.insitu=mce(n.password)),s}function gce(t,e,n){var r=n||{};return r.Info=t.read_shift(2),t.l-=2,r.Info===1?r.Data=fce(t):r.Data=dce(t,e),r}function xce(t,e,n){var r={Type:n.biff>=8?t.read_shift(2):0};return r.Type?gce(t,e-2,r):pce(t,n.biff>=8?e:e-2,n,r),r}var gM=function(){function t(s,a){switch(a.type){case"base64":return e(Vo(s),a);case"binary":return e(s,a);case"buffer":return e(zn&&Buffer.isBuffer(s)?s.toString("binary"):Xd(s),a);case"array":return e(nh(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){var i=a||{},o=i.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var A={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,h){Array.isArray(o)&&(o[h]=[]);for(var p=/\\\w+\b/g,g=0,w,b=-1;w=p.exec(d);){switch(w[0]){case"\\cell":var E=d.slice(g,p.lastIndex-w[0].length);if(E[0]==" "&&(E=E.slice(1)),++b,E.length){var B={v:E,t:"s"};Array.isArray(o)?o[h][b]=B:o[wn({r:h,c:b})]=B}break}g=p.lastIndex}b>A.e.c&&(A.e.c=b)}),o["!ref"]=Fn(A),o}function n(s,a){return Zd(t(s,a),a)}function r(s){for(var a=["{\\rtf1\\ansi"],i=pr(s["!ref"]),o,l=Array.isArray(s),A=i.s.r;A<=i.e.r;++A){a.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var h=wn({r:A,c:d});o=l?(s[A]||[])[d]:s[h],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(fu(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:n,to_sheet:t,from_sheet:r}}();function vce(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function Ug(t){for(var e=0,n=1;e!=3;++e)n=n*256+(t[e]>255?255:t[e]<0?0:t[e]);return n.toString(16).toUpperCase().slice(1)}function yce(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255,s=Math.max(e,n,r),a=Math.min(e,n,r),i=s-a;if(i===0)return[0,0,e];var o=0,l=0,A=s+a;switch(l=i/(A>1?2-A:A),s){case e:o=((n-r)/i+6)%6;break;case n:o=(r-e)/i+2;break;case r:o=(e-n)/i+4;break}return[o/6,l,A/2]}function wce(t){var e=t[0],n=t[1],r=t[2],s=n*2*(r<.5?r:1-r),a=r-s/2,i=[a,a,a],o=6*e,l;if(n!==0)switch(o|0){case 0:case 6:l=s*o,i[0]+=s,i[1]+=l;break;case 1:l=s*(2-o),i[0]+=l,i[1]+=s;break;case 2:l=s*(o-2),i[1]+=s,i[2]+=l;break;case 3:l=s*(4-o),i[1]+=l,i[2]+=s;break;case 4:l=s*(o-4),i[2]+=s,i[0]+=l;break;case 5:l=s*(6-o),i[2]+=l,i[0]+=s;break}for(var A=0;A!=3;++A)i[A]=Math.round(i[A]*255);return i}function R2(t,e){if(e===0)return t;var n=yce(vce(t));return e<0?n[2]=n[2]*(1+e):n[2]=1-(1-n[2])*(1-e),Ug(wce(n))}var xM=6,bce=15,Cce=1,Ti=xM;function Lg(t){return Math.floor((t+Math.round(128/Ti)/256)*Ti)}function Mg(t){return Math.floor((t-5)/Ti*100+.5)/100}function D2(t){return Math.round((t*Ti+5)/Ti*256)/256}function sC(t){return D2(Mg(Lg(t)))}function gS(t){var e=Math.abs(t-sC(t)),n=Ti;if(e>.005)for(Ti=Cce;Ti<bce;++Ti)Math.abs(t-sC(t))<=e&&(e=Math.abs(t-sC(t)),n=Ti);Ti=n}function qd(t){t.width?(t.wpx=Lg(t.width),t.wch=Mg(t.wpx),t.MDW=Ti):t.wpx?(t.wch=Mg(t.wpx),t.width=D2(t.wch),t.MDW=Ti):typeof t.wch=="number"&&(t.width=D2(t.wch),t.wpx=Lg(t.width),t.MDW=Ti),t.customWidth&&delete t.customWidth}var Ece=96,vM=Ece;function Pg(t){return t*96/vM}function lm(t){return t*vM/96}var _ce={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Sce(t,e,n,r){e.Borders=[];var s={},a=!1;(t[0].match(Ui)||[]).forEach(function(i){var o=En(i);switch(pA(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=ts(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=ts(o.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function Tce(t,e,n,r){e.Fills=[];var s={},a=!1;(t[0].match(Ui)||[]).forEach(function(i){var o=En(i);switch(pA(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function Bce(t,e,n,r){e.Fonts=[];var s={},a=!1;(t[0].match(Ui)||[]).forEach(function(i){var o=En(i);switch(pA(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=Kr(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?ts(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?ts(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?ts(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?ts(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?ts(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?ts(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?ts(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=z5[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=ts(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=Vf[s.color.index];s.color.index==81&&(l=Vf[1]),l||(l=Vf[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&n.themeElements&&n.themeElements.clrScheme&&(s.color.rgb=R2(n.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function Nce(t,e,n){e.NumberFmt=[];for(var r=Ds(gn),s=0;s<r.length;++s)e.NumberFmt[r[s]]=gn[r[s]];var a=t[0].match(Ui);if(a)for(s=0;s<a.length;++s){var i=En(a[s]);switch(pA(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=mr(Kr(i.formatCode)),l=parseInt(i.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}iu(o,l)}}break;case"</numFmt>":break;default:if(n.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function kce(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)t[r]!=null&&(e[e.length]=Rt("numFmt",null,{numFmtId:r,formatCode:Mr(t[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Rt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var G1=["numFmtId","fillId","fontId","borderId","xfId"],z1=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Ice(t,e,n){e.CellXf=[];var r,s=!1;(t[0].match(Ui)||[]).forEach(function(a){var i=En(a),o=0;switch(pA(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(r=i,delete r[0],o=0;o<G1.length;++o)r[G1[o]]&&(r[G1[o]]=parseInt(r[G1[o]],10));for(o=0;o<z1.length;++o)r[z1[o]]&&(r[z1[o]]=ts(r[z1[o]]));if(e.NumberFmt&&r.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[r.numFmtId]==e.NumberFmt[o]){r.numFmtId=o;break}}e.CellXf.push(r);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=ts(i.wrapText)),r.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function Fce(t){var e=[];return e[e.length]=Rt("cellXfs",null),t.forEach(function(n){e[e.length]=Rt("xf",null,n)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Rt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var Rce=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,n=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,r=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,A){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=o.match(e))&&Nce(h,d,A),(h=o.match(s))&&Bce(h,d,l,A),(h=o.match(r))&&Tce(h,d,l,A),(h=o.match(a))&&Sce(h,d,l,A),(h=o.match(n))&&Ice(h,d,A),d}}();function yM(t,e){var n=[Xs,Rt("styleSheet",null,{xmlns:hh[0],"xmlns:vt":Ea.vt})],r;return t.SSF&&(r=kce(t.SSF))!=null&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=Fce(e.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function Dce(t,e){var n=t.read_shift(2),r=Ii(t);return[n,r]}function Uce(t,e,n){n||(n=lt(6+4*e.length)),n.write_shift(2,t),Qa(e,n);var r=n.length>n.l?n.slice(0,n.l):n;return n.l==null&&(n.l=n.length),r}function Lce(t,e,n){var r={};r.sz=t.read_shift(2)/20;var s=gie(t);s.fItalic&&(r.italic=1),s.fCondense&&(r.condense=1),s.fExtend&&(r.extend=1),s.fShadow&&(r.shadow=1),s.fOutline&&(r.outline=1),s.fStrikeout&&(r.strike=1);var a=t.read_shift(2);switch(a===700&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(r.underline=i);var o=t.read_shift(1);o>0&&(r.family=o);var l=t.read_shift(1);switch(l>0&&(r.charset=l),t.l++,r.color=pie(t),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=Ii(t),r}function Mce(t,e){e||(e=lt(153)),e.write_shift(2,t.sz*20),xie(t,e),e.write_shift(2,t.bold?700:400);var n=0;t.vertAlign=="superscript"?n=1:t.vertAlign=="subscript"&&(n=2),e.write_shift(2,n),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),k2(t.color,e);var r=0;return r=2,e.write_shift(1,r),Qa(t.name,e),e.length>e.l?e.slice(0,e.l):e}var Pce=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],aC,jce=Ri;function GI(t,e){e||(e=lt(84)),aC||(aC=Iy(Pce));var n=aC[t.patternType];n==null&&(n=40),e.write_shift(4,n);var r=0;if(n!=40)for(k2({auto:1},e),k2({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function Oce(t,e){var n=t.l+e,r=t.read_shift(2),s=t.read_shift(2);return t.l=n,{ixfe:r,numFmtId:s}}function wM(t,e,n){n||(n=lt(16)),n.write_shift(2,e||0),n.write_shift(2,t.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);var r=0;return n.write_shift(1,r),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function vp(t,e){return e||(e=lt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var Qce=Ri;function Hce(t,e){return e||(e=lt(51)),e.write_shift(1,0),vp(null,e),vp(null,e),vp(null,e),vp(null,e),vp(null,e),e.length>e.l?e.slice(0,e.l):e}function Vce(t,e){return e||(e=lt(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),N2(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function Gce(t,e,n){var r=lt(2052);return r.write_shift(4,t),N2(e,r),N2(n,r),r.length>r.l?r.slice(0,r.l):r}function zce(t,e,n){var r={};r.NumberFmt=[];for(var s in gn)r.NumberFmt[s]=gn[s];r.CellXf=[],r.Fonts=[];var a=[],i=!1;return yu(t,function(l,A,d){switch(d){case 44:r.NumberFmt[l[0]]=l[1],iu(l[1],l[0]);break;case 43:r.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=R2(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&r.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:a.push(d),i=!0;break;case 38:a.pop(),i=!1;break;default:if(A.T>0)a.push(d);else if(A.T<0)a.pop();else if(!i||n.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),r}function Kce(t,e){if(e){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&++n}),n!=0&&(bt(t,615,dc(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&bt(t,44,Uce(s,e[s]))}),bt(t,616))}}function qce(t){var e=1;bt(t,611,dc(e)),bt(t,43,Mce({sz:12,color:{theme:1},name:"Calibri",family:2})),bt(t,612)}function Wce(t){var e=2;bt(t,603,dc(e)),bt(t,45,GI({patternType:"none"})),bt(t,45,GI({patternType:"gray125"})),bt(t,604)}function $ce(t){var e=1;bt(t,613,dc(e)),bt(t,46,Hce()),bt(t,614)}function Yce(t){var e=1;bt(t,626,dc(e)),bt(t,47,wM({numFmtId:0},65535)),bt(t,627)}function Jce(t,e){bt(t,617,dc(e.length)),e.forEach(function(n){bt(t,47,wM(n,0))}),bt(t,618)}function Xce(t){var e=1;bt(t,619,dc(e)),bt(t,48,Vce({xfId:0,name:"Normal"})),bt(t,620)}function Zce(t){var e=0;bt(t,505,dc(e)),bt(t,506)}function eAe(t){var e=0;bt(t,508,Gce(e,"TableStyleMedium9","PivotStyleMedium4")),bt(t,509)}function tAe(t,e){var n=fo();return bt(n,278),Kce(n,t.SSF),qce(n),Wce(n),$ce(n),Yce(n),Jce(n,e.cellXfs),Xce(n),Zce(n),eAe(n),bt(n,279),n.end()}var nAe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function rAe(t,e,n){e.themeElements.clrScheme=[];var r={};(t[0].match(Ui)||[]).forEach(function(s){var a=En(s);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":r.rgb=a.val;break;case"<a:sysClr":r.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(e.themeElements.clrScheme[nAe.indexOf(a[0])]=r,r={}):r.name=a[0].slice(3,a[0].length-1);break;default:if(n&&n.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function sAe(){}function aAe(){}var iAe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,oAe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,lAe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function cAe(t,e,n){e.themeElements={};var r;[["clrScheme",iAe,rAe],["fontScheme",oAe,sAe],["fmtScheme",lAe,aAe]].forEach(function(s){if(!(r=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](r,e,n)})}var AAe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function bM(t,e){(!t||t.length===0)&&(t=xS());var n,r={};if(!(n=t.match(AAe)))throw new Error("themeElements not found in theme");return cAe(n[0],r,e),r.raw=t,r}function xS(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var n=[Xs];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function uAe(t,e,n){var r=t.l+e,s=t.read_shift(4);if(s!==124226){if(!n.cellStyles){t.l=r;return}var a=t.slice(t.l);t.l=r;var i;try{i=h8(a,{type:"array"})}catch{return}var o=Oo(i,"theme/theme/theme1.xml",!0);if(o)return bM(o,n)}}function dAe(t){return t.read_shift(4)}function fAe(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=hAe(t,4);break;case 2:e.xclrValue=tM(t);break;case 3:e.xclrValue=dAe(t);break;case 4:t.l+=4;break}return t.l+=8,e}function hAe(t,e){return Ri(t,e)}function mAe(t,e){return Ri(t,e)}function pAe(t){var e=t.read_shift(2),n=t.read_shift(2)-4,r=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:r[1]=fAe(t);break;case 6:r[1]=mAe(t,n);break;case 14:case 15:r[1]=t.read_shift(n===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+n)}return r}function gAe(t,e){var n=t.l+e;t.l+=2;var r=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),a=[];s-- >0;)a.push(pAe(t,n-t.l));return{ixfe:r,ext:a}}function xAe(t,e){e.forEach(function(n){n[0]})}function vAe(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Ii(t)}}function yAe(t){var e=lt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Qa(t.name,e),e.slice(0,e.l)}function wAe(t){for(var e=[],n=t.read_shift(4);n-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function bAe(t){var e=lt(4+8*t.length);e.write_shift(4,t.length);for(var n=0;n<t.length;++n)e.write_shift(4,t[n][0]),e.write_shift(4,t[n][1]);return e}function CAe(t,e){var n=lt(8+2*e.length);return n.write_shift(4,t),Qa(e,n),n.slice(0,n.l)}function EAe(t){return t.l+=4,t.read_shift(4)!=0}function _Ae(t,e){var n=lt(8);return n.write_shift(4,t),n.write_shift(4,1),n}function SAe(t,e,n){var r={Types:[],Cell:[],Value:[]},s=n||{},a=[],i=!1,o=2;return yu(t,function(l,A,d){switch(d){case 335:r.Types.push({name:l.name});break;case 51:l.forEach(function(h){o==1?r.Cell.push({type:r.Types[h[0]-1].name,index:h[1]}):o==0&&r.Value.push({type:r.Types[h[0]-1].name,index:h[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:a.push(d),i=!0;break;case 36:a.pop(),i=!1;break;default:if(!A.T){if(!i||s.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function TAe(){var t=fo();return bt(t,332),bt(t,334,dc(1)),bt(t,335,yAe({name:"XLDAPR",version:12e4,flags:3496657072})),bt(t,336),bt(t,339,CAe(1,"XLDAPR")),bt(t,52),bt(t,35,dc(514)),bt(t,4096,dc(0)),bt(t,4097,yl(1)),bt(t,36),bt(t,53),bt(t,340),bt(t,337,_Ae(1)),bt(t,51,bAe([[1,0]])),bt(t,338),bt(t,333),t.end()}function BAe(t,e,n){var r={Types:[],Cell:[],Value:[]};if(!t)return r;var s=!1,a=2,i;return t.replace(Ui,function(o){var l=En(o);switch(pA(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":r.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var A=0;A<r.Types.length;++A)r.Types[A].name==l.name&&(i=r.Types[A]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?r.Cell.push({type:r.Types[l.t-1].name,index:+l.v}):a==0&&r.Value.push({type:r.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!s&&n.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),r}function CM(){var t=[Xs];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function NAe(t){var e=[];if(!t)return e;var n=1;return(t.match(Ui)||[]).forEach(function(r){var s=En(r);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?n=s.i:s.i=n,e.push(s);break}}),e}function kAe(t){var e={};e.i=t.read_shift(4);var n={};n.r=t.read_shift(4),n.c=t.read_shift(4),e.r=wn(n);var r=t.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}function IAe(t,e,n){var r=[];return yu(t,function(a,i,o){switch(o){case 63:r.push(a);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function FAe(t,e,n,r){if(!t)return t;var s=r||{},a=!1;yu(t,function(o,l,A){switch(A){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!l.T){if(!a||s.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}},s)}function RAe(t,e){if(!t)return"??";var n=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][n].Target}var S0=1024;function EM(t,e){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),s=[Rt("xml",null,{"xmlns:v":Mo.v,"xmlns:o":Mo.o,"xmlns:x":Mo.x,"xmlns:mv":Mo.mv}).replace(/\/>/,">"),Rt("o:shapelayout",Rt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Rt("v:shapetype",[Rt("v:stroke",null,{joinstyle:"miter"}),Rt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];S0<t*1e3;)S0+=1e3;return e.forEach(function(a){var i=vs(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Rt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,A=Rt("v:fill",l,o),d={on:"t",obscured:"t"};++S0,s=s.concat(["<v:shape"+Fg({id:"_x0000_s"+S0,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",A,Rt("v:shadow",null,d),Rt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ei("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),ei("x:AutoFill","False"),ei("x:Row",String(i.r)),ei("x:Column",String(i.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function zI(t,e,n,r){var s=Array.isArray(t),a;e.forEach(function(i){var o=vs(i.ref);if(s?(t[o.r]||(t[o.r]=[]),a=t[o.r][o.c]):a=t[i.ref],!a){a={t:"z"},s?t[o.r][o.c]=a:t[i.ref]=a;var l=pr(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var A=Fn(l);A!==t["!ref"]&&(t["!ref"]=A)}a.c||(a.c=[]);var d={a:i.author,t:i.t,r:i.r,T:n};i.h&&(d.h=i.h);for(var h=a.c.length-1;h>=0;--h){if(!n&&a.c[h].T)return;n&&!a.c[h].T&&a.c.splice(h,1)}if(n&&r){for(h=0;h<r.length;++h)if(d.a==r[h].id){d.a=r[h].name||d.a;break}}a.c.push(d)})}function DAe(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var n=[],r=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&n.push(o[1])}});var a=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=En(o[0]),A={author:l.authorId&&n[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=vs(l.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var h=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),p=!!h&&!!h[1]&&mS(h[1])||{r:"",t:"",h:""};A.r=p.r,p.r=="<t></t>"&&(p.t=p.h=""),A.t=(p.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(A.h=p.h),r.push(A)}}}}),r}function _M(t){var e=[Xs,Rt("comments",null,{xmlns:hh[0]})],n=[];return e.push("<authors>"),t.forEach(function(r){r[1].forEach(function(s){var a=Mr(s.a);n.indexOf(a)==-1&&(n.push(a),e.push("<author>"+a+"</author>")),s.T&&s.ID&&n.indexOf("tc="+s.ID)==-1&&(n.push("tc="+s.ID),e.push("<author>tc="+s.ID+"</author>"))})}),n.length==0&&(n.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(r){var s=0,a=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?s=n.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(s=n.indexOf(Mr(l.a))),a.push(l.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+s+'"><text>'),a.length<=1)e.push(ei("t",Mr(a[0]||"")));else{for(var i=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)i+=`Reply:
    `+a[o]+`
`;e.push(ei("t",Mr(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function UAe(t,e){var n=[],r=!1,s={},a=0;return t.replace(Ui,function(o,l){var A=En(o);switch(pA(A[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:A.personId,guid:A.id,ref:A.ref,T:1};break;case"</threadedComment>":s.t!=null&&n.push(s);break;case"<text>":case"<text":a=l+o.length;break;case"</text>":s.t=t.slice(a,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":r=!0;break;case"</mentions>":r=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&e.WTF)throw new Error("unrecognized "+A[0]+" in threaded comments")}return o}),n}function LAe(t,e,n){var r=[Xs,Rt("ThreadedComments",null,{xmlns:Ea.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(s){var a="";(s[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var l={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};o==0?a=l.id:l.parentId=a,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),r.push(Rt("threadedComment",ei("text",i.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function MAe(t,e){var n=[],r=!1;return t.replace(Ui,function(a){var i=En(a);switch(pA(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":n.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return a}),n}function PAe(t){var e=[Xs,Rt("personList",null,{xmlns:Ea.TCMNT,"xmlns:x":hh[0]}).replace(/[\/]>/,">")];return t.forEach(function(n,r){e.push(Rt("person",null,{displayName:n,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:n,providerId:"None"}))}),e.push("</personList>"),e.join("")}function jAe(t){var e={};e.iauthor=t.read_shift(4);var n=xh(t);return e.rfx=n.s,e.ref=wn(n.s),t.l+=16,e}function OAe(t,e){return e==null&&(e=lt(36)),e.write_shift(4,t[1].iauthor),Tm(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var QAe=Ii;function HAe(t){return Qa(t.slice(0,54))}function VAe(t,e){var n=[],r=[],s={},a=!1;return yu(t,function(o,l,A){switch(A){case 632:r.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=r[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,n.push(s);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!a||e.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}}),n}function GAe(t){var e=fo(),n=[];return bt(e,628),bt(e,630),t.forEach(function(r){r[1].forEach(function(s){n.indexOf(s.a)>-1||(n.push(s.a.slice(0,54)),bt(e,632,HAe(s.a)))})}),bt(e,631),bt(e,633),t.forEach(function(r){r[1].forEach(function(s){s.iauthor=n.indexOf(s.a);var a={s:vs(r[0]),e:vs(r[0])};bt(e,635,OAe([a,s])),s.t&&s.t.length>0&&bt(e,637,die(s)),bt(e,636),delete s.iauthor})}),bt(e,634),bt(e,629),e.end()}var zAe="application/vnd.ms-office.vbaProject";function KAe(t){var e=ln.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(n,r){if(!(n.slice(-1)==="/"||!n.match(/_VBA_PROJECT_CUR/))){var s=n.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");ln.utils.cfb_add(e,s,t.FileIndex[r].content)}}),ln.write(e)}function qAe(t,e){e.FullPaths.forEach(function(n,r){if(r!=0){var s=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&ln.utils.cfb_add(t,s,e.FileIndex[r].content)}})}var SM=["xlsb","xlsm","xlam","biff8","xla"];function WAe(){return{"!type":"dialog"}}function $Ae(){return{"!type":"dialog"}}function YAe(){return{"!type":"macro"}}function JAe(){return{"!type":"macro"}}var G0=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function n(r,s,a,i){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var A=a.length>0?parseInt(a,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=e.c:--d,l?A+=e.r:--A,s+(o?"":"$")+xs(d)+(l?"":"$")+Ys(A)}return function(s,a){return e=a,s.replace(t,n)}}(),vS=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,yS=function(){return function(e,n){return e.replace(vS,function(r,s,a,i,o,l){var A=iS(i)-(a?0:n.c),d=aS(l)-(o?0:n.r),h=d==0?"":o?d+1:"["+d+"]",p=A==0?"":a?A+1:"["+A+"]";return s+"R"+h+"C"+p})}}();function TM(t,e){return t.replace(vS,function(n,r,s,a,i,o){return r+(s=="$"?s+a:xs(iS(a)+e.c))+(i=="$"?i+o:Ys(aS(o)+e.r))})}function XAe(t,e,n){var r=po(e),s=r.s,a=vs(n),i={r:a.r-s.r,c:a.c-s.c};return TM(t,i)}function ZAe(t){return t.length!=1}function KI(t){return t.replace(/_xlfn\./g,"")}function oa(t){t.l+=1}function Wd(t,e){var n=t.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function BM(t,e,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return NM(t);n.biff==12&&(r=4)}var s=t.read_shift(r),a=t.read_shift(r),i=Wd(t),o=Wd(t);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function NM(t){var e=Wd(t),n=Wd(t),r=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:n[0],c:s,cRel:n[1],rRel:n[2]}}}function eue(t,e,n){if(n.biff<8)return NM(t);var r=t.read_shift(n.biff==12?4:2),s=t.read_shift(n.biff==12?4:2),a=Wd(t),i=Wd(t);return{s:{r,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function kM(t,e,n){if(n&&n.biff>=2&&n.biff<=5)return tue(t);var r=t.read_shift(n&&n.biff==12?4:2),s=Wd(t);return{r,c:s[0],cRel:s[1],rRel:s[2]}}function tue(t){var e=Wd(t),n=t.read_shift(1);return{r:e[0],c:n,cRel:e[1],rRel:e[2]}}function nue(t){var e=t.read_shift(2),n=t.read_shift(2);return{r:e,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function rue(t,e,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return sue(t);var s=t.read_shift(r>=12?4:2),a=t.read_shift(2),i=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;s>524287;)s-=1048576;if(i==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:i,rRel:o}}function sue(t){var e=t.read_shift(2),n=t.read_shift(1),r=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),s==1&&n>=128&&(n=n-256),{r:e,c:n,cRel:s,rRel:r}}function aue(t,e,n){var r=(t[t.l++]&96)>>5,s=BM(t,n.biff>=2&&n.biff<=5?6:8,n);return[r,s]}function iue(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),a=8;if(n)switch(n.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}var i=BM(t,a,n);return[r,s,i]}function oue(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}function lue(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2),a=8;if(n)switch(n.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}return t.l+=a,[r,s]}function cue(t,e,n){var r=(t[t.l++]&96)>>5,s=eue(t,e-1,n);return[r,s]}function Aue(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n.biff==2?6:n.biff==12?14:7,[r]}function qI(t){var e=t[t.l+1]&1,n=1;return t.l+=4,[e,n]}function uue(t,e,n){t.l+=2;for(var r=t.read_shift(n&&n.biff==2?1:2),s=[],a=0;a<=r;++a)s.push(t.read_shift(n&&n.biff==2?1:2));return s}function due(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function fue(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function hue(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function mue(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=n&&n.biff==2?3:4,[r]}function IM(t){var e=t.read_shift(1),n=t.read_shift(1);return[e,n]}function pue(t){return t.read_shift(2),IM(t)}function gue(t){return t.read_shift(2),IM(t)}function xue(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=kM(t,0,n);return[r,s]}function vue(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=rue(t,0,n);return[r,s]}function yue(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);n&&n.biff==5&&(t.l+=12);var a=kM(t,0,n);return[r,s,a]}function wue(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(n&&n.biff<=3?1:2);return[Ede[s],DM[s],r]}function bue(t,e,n){var r=t[t.l++],s=t.read_shift(1),a=n&&n.biff<=3?[r==88?-1:0,t.read_shift(1)]:Cue(t);return[s,(a[0]===0?DM:Cde)[a[1]]]}function Cue(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Eue(t,e,n){t.l+=n&&n.biff==2?3:4}function _ue(t,e,n){if(t.l++,n&&n.biff==12)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function Sue(t){return t.l++,wu[t.read_shift(1)]}function Tue(t){return t.l++,t.read_shift(2)}function Bue(t){return t.l++,t.read_shift(1)!==0}function Nue(t){return t.l++,Ni(t)}function kue(t,e,n){return t.l++,fx(t,e-1,n)}function Iue(t,e){var n=[t.read_shift(1)];if(e==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=Vs(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:n[1]=wu[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:n[1]=Ni(t);break;case 2:n[1]=vh(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function Fue(t,e,n){for(var r=t.read_shift(n.biff==12?4:2),s=[],a=0;a!=r;++a)s.push((n.biff==12?xh:Dy)(t));return s}function Rue(t,e,n){var r=0,s=0;n.biff==12?(r=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),r=1+t.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,--s==0&&(s=256));for(var a=0,i=[];a!=r&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=Iue(t,n.biff);return i}function Due(t,e,n){var r=t.read_shift(1)>>>5&3,s=!n||n.biff>=8?4:2,a=t.read_shift(s);switch(n.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,a]}function Uue(t,e,n){if(n.biff==5)return Lue(t);var r=t.read_shift(1)>>>5&3,s=t.read_shift(2),a=t.read_shift(4);return[r,s,a]}function Lue(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[e,n,r]}function Mue(t,e,n){var r=t.read_shift(1)>>>5&3;t.l+=n&&n.biff==2?3:4;var s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function Pue(t,e,n){var r=t.read_shift(1)>>>5&3,s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function jue(t,e,n){var r=t.read_shift(1)>>>5&3;return t.l+=4,n.biff<8&&t.l--,n.biff==12&&(t.l+=2),[r]}function Oue(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2),a=4;if(n)switch(n.biff){case 5:a=15;break;case 12:a=6;break}return t.l+=a,[r,s]}var Que=Ri,Hue=Ri,Vue=Ri;function mx(t,e,n){return t.l+=2,[nue(t)]}function wS(t){return t.l+=6,[]}var Gue=mx,zue=wS,Kue=wS,que=mx;function FM(t){return t.l+=2,[Aa(t),t.read_shift(2)&1]}var Wue=mx,$ue=FM,Yue=wS,Jue=mx,Xue=mx,Zue=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function ede(t){t.l+=2;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),s=t.read_shift(2),a=t.read_shift(2),i=Zue[n>>2&31];return{ixti:e,coltype:n&3,rt:i,idx:r,c:s,C:a}}function tde(t){return t.l+=2,[t.read_shift(4)]}function nde(t,e,n){return t.l+=5,t.l+=2,t.l+=n.biff==2?1:4,["PTGSHEET"]}function rde(t,e,n){return t.l+=n.biff==2?4:5,["PTGENDSHEET"]}function sde(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function ade(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function ide(t){return t.l+=4,[0,0]}var WI={1:{n:"PtgExp",f:_ue},2:{n:"PtgTbl",f:Vue},3:{n:"PtgAdd",f:oa},4:{n:"PtgSub",f:oa},5:{n:"PtgMul",f:oa},6:{n:"PtgDiv",f:oa},7:{n:"PtgPower",f:oa},8:{n:"PtgConcat",f:oa},9:{n:"PtgLt",f:oa},10:{n:"PtgLe",f:oa},11:{n:"PtgEq",f:oa},12:{n:"PtgGe",f:oa},13:{n:"PtgGt",f:oa},14:{n:"PtgNe",f:oa},15:{n:"PtgIsect",f:oa},16:{n:"PtgUnion",f:oa},17:{n:"PtgRange",f:oa},18:{n:"PtgUplus",f:oa},19:{n:"PtgUminus",f:oa},20:{n:"PtgPercent",f:oa},21:{n:"PtgParen",f:oa},22:{n:"PtgMissArg",f:oa},23:{n:"PtgStr",f:kue},26:{n:"PtgSheet",f:nde},27:{n:"PtgEndSheet",f:rde},28:{n:"PtgErr",f:Sue},29:{n:"PtgBool",f:Bue},30:{n:"PtgInt",f:Tue},31:{n:"PtgNum",f:Nue},32:{n:"PtgArray",f:Aue},33:{n:"PtgFunc",f:wue},34:{n:"PtgFuncVar",f:bue},35:{n:"PtgName",f:Due},36:{n:"PtgRef",f:xue},37:{n:"PtgArea",f:aue},38:{n:"PtgMemArea",f:Mue},39:{n:"PtgMemErr",f:Que},40:{n:"PtgMemNoMem",f:Hue},41:{n:"PtgMemFunc",f:Pue},42:{n:"PtgRefErr",f:jue},43:{n:"PtgAreaErr",f:oue},44:{n:"PtgRefN",f:vue},45:{n:"PtgAreaN",f:cue},46:{n:"PtgMemAreaN",f:sde},47:{n:"PtgMemNoMemN",f:ade},57:{n:"PtgNameX",f:Uue},58:{n:"PtgRef3d",f:yue},59:{n:"PtgArea3d",f:iue},60:{n:"PtgRefErr3d",f:Oue},61:{n:"PtgAreaErr3d",f:lue},255:{}},ode={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},lde={1:{n:"PtgElfLel",f:FM},2:{n:"PtgElfRw",f:Jue},3:{n:"PtgElfCol",f:Gue},6:{n:"PtgElfRwV",f:Xue},7:{n:"PtgElfColV",f:que},10:{n:"PtgElfRadical",f:Wue},11:{n:"PtgElfRadicalS",f:Yue},13:{n:"PtgElfColS",f:zue},15:{n:"PtgElfColSV",f:Kue},16:{n:"PtgElfRadicalLel",f:$ue},25:{n:"PtgList",f:ede},29:{n:"PtgSxName",f:tde},255:{}},cde={0:{n:"PtgAttrNoop",f:ide},1:{n:"PtgAttrSemi",f:mue},2:{n:"PtgAttrIf",f:fue},4:{n:"PtgAttrChoose",f:uue},8:{n:"PtgAttrGoto",f:due},16:{n:"PtgAttrSum",f:Eue},32:{n:"PtgAttrBaxcel",f:qI},33:{n:"PtgAttrBaxcel",f:qI},64:{n:"PtgAttrSpace",f:pue},65:{n:"PtgAttrSpaceSemi",f:gue},128:{n:"PtgAttrIfError",f:hue},255:{}};function px(t,e,n,r){if(r.biff<8)return Ri(t,e);for(var s=t.l+e,a=[],i=0;i!==n.length;++i)switch(n[i][0]){case"PtgArray":n[i][1]=Rue(t,0,r),a.push(n[i][1]);break;case"PtgMemArea":n[i][2]=Fue(t,n[i][1],r),a.push(n[i][2]);break;case"PtgExp":r&&r.biff==12&&(n[i][1][1]=t.read_shift(4),a.push(n[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[i][0]}return e=s-t.l,e!==0&&a.push(Ri(t,e)),a}function gx(t,e,n){for(var r=t.l+e,s,a,i=[];r!=t.l;)e=r-t.l,a=t[t.l],s=WI[a]||WI[ode[a]],(a===24||a===25)&&(s=(a===24?lde:cde)[t[t.l+1]]),!s||!s.f?Ri(t,e):i.push([s.n,s.f(t,e,n)]);return i}function Ade(t){for(var e=[],n=0;n<t.length;++n){for(var r=t[n],s=[],a=0;a<r.length;++a){var i=r[a];if(i)switch(i[0]){case 2:s.push('"'+i[1].replace(/"/g,'""')+'"');break;default:s.push(i[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var ude={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function dde(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function RM(t,e,n){if(!t)return"SH33TJSERR0";if(n.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[e];if(n.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!r)return"SH33TJSERR1";var s="";if(n.biff>8)switch(t[r[0]][0]){case 357:return s=r[1]==-1?"#REF":t.SheetNames[r[1]],r[1]==r[2]?s:s+":"+t.SheetNames[r[2]];case 358:return n.SID!=null?t.SheetNames[n.SID]:"SH33TJSSAME"+t[r[0]][0];case 355:default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return s=r[1]==-1?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?s:s+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return t[r[0]][0][3]?(s=r[1]==-1?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?s:s+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function $I(t,e,n){var r=RM(t,e,n);return r=="#REF"?r:dde(r,n)}function Ei(t,e,n,r,s){var a=s&&s.biff||8,i={s:{c:0,r:0}},o=[],l,A,d,h=0,p=0,g,w="";if(!t[0]||!t[0][0])return"";for(var b=-1,E="",B=0,I=t[0].length;B<I;++B){var k=t[0][B];switch(k[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),A=o.pop(),b>=0){switch(t[0][b][1][0]){case 0:E=Is(" ",t[0][b][1][1]);break;case 1:E=Is("\r",t[0][b][1][1]);break;default:if(E="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][b][1][0])}A=A+E,b=-1}o.push(A+ude[k[0]]+l);break;case"PtgIsect":l=o.pop(),A=o.pop(),o.push(A+" "+l);break;case"PtgUnion":l=o.pop(),A=o.pop(),o.push(A+","+l);break;case"PtgRange":l=o.pop(),A=o.pop(),o.push(A+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=og(k[1][1],i,s),o.push(lg(d,a));break;case"PtgRefN":d=n?og(k[1][1],n,s):k[1][1],o.push(lg(d,a));break;case"PtgRef3d":h=k[1][1],d=og(k[1][2],i,s),w=$I(r,h,s),o.push(w+"!"+lg(d,a));break;case"PtgFunc":case"PtgFuncVar":var F=k[1][0],D=k[1][1];F||(F=0),F&=127;var P=F==0?[]:o.slice(-F);o.length-=F,D==="User"&&(D=P.shift()),o.push(D+"("+P.join(",")+")");break;case"PtgBool":o.push(k[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(k[1]);break;case"PtgNum":o.push(String(k[1]));break;case"PtgStr":o.push('"'+k[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(k[1]);break;case"PtgAreaN":g=EI(k[1][1],n?{s:n}:i,s),o.push(tC(g,s));break;case"PtgArea":g=EI(k[1][1],i,s),o.push(tC(g,s));break;case"PtgArea3d":h=k[1][1],g=k[1][2],w=$I(r,h,s),o.push(w+"!"+tC(g,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=k[1][2];var S=(r.names||[])[p-1]||(r[0]||[])[p],N=S?S.Name:"SH33TJSNAME"+String(p);N&&N.slice(0,6)=="_xlfn."&&!s.xlfn&&(N=N.slice(6)),o.push(N);break;case"PtgNameX":var T=k[1][1];p=k[1][2];var V;if(s.biff<=5)T<0&&(T=-T),r[T]&&(V=r[T][p]);else{var M="";if(((r[T]||[])[0]||[])[0]==14849||(((r[T]||[])[0]||[])[0]==1025?r[T][p]&&r[T][p].itab>0&&(M=r.SheetNames[r[T][p].itab-1]+"!"):M=r.SheetNames[p-1]+"!"),r[T]&&r[T][p])M+=r[T][p].Name;else if(r[0]&&r[0][p])M+=r[0][p].Name;else{var U=(RM(r,T,s)||"").split(";;");U[p-1]?M=U[p-1]:M+="SH33TJSERRX"}o.push(M);break}V||(V={Name:"SH33TJSERRY"}),o.push(V.Name);break;case"PtgParen":var O="(",G=")";if(b>=0){switch(E="",t[0][b][1][0]){case 2:O=Is(" ",t[0][b][1][1])+O;break;case 3:O=Is("\r",t[0][b][1][1])+O;break;case 4:G=Is(" ",t[0][b][1][1])+G;break;case 5:G=Is("\r",t[0][b][1][1])+G;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][b][1][0])}b=-1}o.push(O+o.pop()+G);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:k[1][1],r:k[1][0]};var ie={c:n.c,r:n.r};if(r.sharedf[wn(d)]){var K=r.sharedf[wn(d)];o.push(Ei(K,i,ie,r,s))}else{var q=!1;for(l=0;l!=r.arrayf.length;++l)if(A=r.arrayf[l],!(d.c<A[0].s.c||d.c>A[0].e.c)&&!(d.r<A[0].s.r||d.r>A[0].e.r)){o.push(Ei(A[1],i,ie,r,s)),q=!0;break}q||o.push(k[1])}break;case"PtgArray":o.push("{"+Ade(k[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":b=B;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+k[1].idx+"[#"+k[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(k));default:throw new Error("Unrecognized Formula Token: "+String(k))}var se=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&b>=0&&se.indexOf(t[0][B][0])==-1){k=t[0][b];var Z=!0;switch(k[1][0]){case 4:Z=!1;case 0:E=Is(" ",k[1][1]);break;case 5:Z=!1;case 1:E=Is("\r",k[1][1]);break;default:if(E="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+k[1][0])}o.push((Z?E:"")+o.pop()+(Z?"":E)),b=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function fde(t,e,n){var r=t.l+e,s=n.biff==2?1:2,a,i=t.read_shift(s);if(i==65535)return[[],Ri(t,e-2)];var o=gx(t,i,n);return e!==i+s&&(a=px(t,e-i-s,o,n)),t.l=r,[o,a]}function hde(t,e,n){var r=t.l+e,s=n.biff==2?1:2,a,i=t.read_shift(s);if(i==65535)return[[],Ri(t,e-2)];var o=gx(t,i,n);return e!==i+s&&(a=px(t,e-i-s,o,n)),t.l=r,[o,a]}function mde(t,e,n,r){var s=t.l+e,a=gx(t,r,n),i;return s!==t.l&&(i=px(t,s-t.l,a,n)),[a,i]}function pde(t,e,n){var r=t.l+e,s,a=t.read_shift(2),i=gx(t,a,n);return a==65535?[[],Ri(t,e-2)]:(e!==a+2&&(s=px(t,r-a-2,i,n)),[i,s])}function gde(t){var e;if(ru(t,t.l+6)!==65535)return[Ni(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function xde(t){if(t==null){var e=lt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return rh(t);return rh(0)}function iC(t,e,n){var r=t.l+e,s=gA(t);n.biff==2&&++t.l;var a=gde(t),i=t.read_shift(1);n.biff!=2&&(t.read_shift(1),n.biff>=5&&t.read_shift(4));var o=hde(t,r-t.l,n);return{cell:s,val:a[0],formula:o,shared:i>>3&1,tt:a[1]}}function vde(t,e,n,r,s){var a=ah(e,n,s),i=xde(t.v),o=lt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var A=lt(t.bf.length),d=0;d<t.bf.length;++d)A[d]=t.bf[d];var h=Oa([a,i,o,A]);return h}function Uy(t,e,n){var r=t.read_shift(4),s=gx(t,r,n),a=t.read_shift(4),i=a>0?px(t,a,s,n):null;return[s,i]}var yde=Uy,Ly=Uy,wde=Uy,bde=Uy,Cde={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},DM={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Ede={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function YI(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,n){return n.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function _de(t){var e="of:="+t.replace(vS,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function oC(t){var e=t.split(":"),n=e[0].split(".")[0];return[n,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function Sde(t){return t.replace(/\./,"!")}var Ag={},z0={},ug=typeof Map<"u";function bS(t,e,n){var r=0,s=t.length;if(n){if(ug?n.has(e):Object.prototype.hasOwnProperty.call(n,e)){for(var a=ug?n.get(e):n[e];r<a.length;++r)if(t[a[r]].t===e)return t.Count++,a[r]}}else for(;r<s;++r)if(t[r].t===e)return t.Count++,r;return t[s]={t:e},t.Count++,t.Unique++,n&&(ug?(n.has(e)||n.set(e,[]),n.get(e).push(s)):(Object.prototype.hasOwnProperty.call(n,e)||(n[e]=[]),n[e].push(s))),s}function My(t,e){var n={min:t+1,max:t+1},r=-1;return e.MDW&&(Ti=e.MDW),e.width!=null?n.customWidth=1:e.wpx!=null?r=Mg(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(n.width=D2(r),n.customWidth=1):e.width!=null&&(n.width=e.width),e.hidden&&(n.hidden=!0),e.level!=null&&(n.outlineLevel=n.level=e.level),n}function Kf(t,e){if(t){var n=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(n=[1,1,1,1,.5,.5]),t.left==null&&(t.left=n[0]),t.right==null&&(t.right=n[1]),t.top==null&&(t.top=n[2]),t.bottom==null&&(t.bottom=n[3]),t.header==null&&(t.header=n[4]),t.footer==null&&(t.footer=n[5])}}function ef(t,e,n){var r=n.revssf[e.z!=null?e.z:"General"],s=60,a=t.length;if(r==null&&n.ssf){for(;s<392;++s)if(n.ssf[s]==null){iu(e.z,s),n.ssf[s]=e.z,n.revssf[e.z]=r=s;break}}for(s=0;s!=a;++s)if(t[s].numFmtId===r)return s;return t[a]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function UM(t,e,n,r,s,a){try{r.cellNF&&(t.z=gn[e])}catch(o){if(r.WTF)throw o}if(!(t.t==="z"&&!r.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=rs(t.v)),(!r||r.cellText!==!1)&&t.t!=="z")try{if(gn[e]==null&&iu(Cae[e]||"General",e),t.t==="e")t.w=t.w||wu[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=kg(t.v);else if(t.t==="d"){var i=Ta(t.v);(i|0)===i?t.w=i.toString(10):t.w=kg(i)}else{if(t.v===void 0)return"";t.w=th(t.v,z0)}else t.t==="d"?t.w=Nl(e,Ta(t.v),z0):t.w=Nl(e,t.v,z0)}catch(o){if(r.WTF)throw o}if(r.cellStyles&&n!=null)try{t.s=a.Fills[n],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=R2(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),r.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=R2(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),r.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(r.WTF&&a.Fills)throw o}}}function Tde(t,e,n){if(t&&t["!ref"]){var r=pr(t["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+t["!ref"])}}function Bde(t,e){var n=pr(e);n.s.r<=n.e.r&&n.s.c<=n.e.c&&n.s.r>=0&&n.s.c>=0&&(t["!ref"]=Fn(n))}var Nde=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,kde=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Ide=/<(?:\w:)?hyperlink [^>]*>/mg,Fde=/"(\w*:\w*)"/,Rde=/<(?:\w:)?col\b[^>]*[\/]?>/g,Dde=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Ude=/<(?:\w:)?pageMargins[^>]*\/>/g,LM=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Lde=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Mde=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Pde(t,e,n,r,s,a,i){if(!t)return t;r||(r={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},A="",d="",h=t.match(kde);h?(A=t.slice(0,h.index),d=t.slice(h.index+h[0].length)):A=d=t;var p=A.match(LM);p?CS(p[0],o,s,n):(p=A.match(Lde))&&Ode(p[0],p[1]||"",o,s,n);var g=(A.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var w=A.slice(g,g+50).match(Fde);w&&Bde(o,w[1])}var b=A.match(Mde);b&&b[1]&&Zde(b[1],s);var E=[];if(e.cellStyles){var B=A.match(Rde);B&&Wde(E,B)}h&&nfe(h[1],o,e,l,a,i);var I=d.match(Dde);I&&(o["!autofilter"]=Yde(I[0]));var k=[],F=d.match(Nde);if(F)for(g=0;g!=F.length;++g)k[g]=pr(F[g].slice(F[g].indexOf('"')+1));var D=d.match(Ide);D&&zde(o,D,r);var P=d.match(Ude);if(P&&(o["!margins"]=Kde(En(P[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Fn(l)),e.sheetRows>0&&o["!ref"]){var S=pr(o["!ref"]);e.sheetRows<=+S.e.r&&(S.e.r=e.sheetRows-1,S.e.r>l.e.r&&(S.e.r=l.e.r),S.e.r<S.s.r&&(S.s.r=S.e.r),S.e.c>l.e.c&&(S.e.c=l.e.c),S.e.c<S.s.c&&(S.s.c=S.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Fn(S))}return E.length>0&&(o["!cols"]=E),k.length>0&&(o["!merges"]=k),o}function jde(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',n=0;n!=t.length;++n)e+='<mergeCell ref="'+Fn(t[n])+'"/>';return e+"</mergeCells>"}function CS(t,e,n,r){var s=En(t);n.Sheets[r]||(n.Sheets[r]={}),s.codeName&&(n.Sheets[r].CodeName=mr(Kr(s.codeName)))}function Ode(t,e,n,r,s){CS(t.slice(0,t.indexOf(">")),n,r,s)}function Qde(t,e,n,r,s){var a=!1,i={},o=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[n];try{e.Workbook&&(l=e.Workbook.Sheets[n].CodeName||l)}catch{}a=!0,i.codeName=iA(Mr(l))}if(t&&t["!outline"]){var A={summaryBelow:1,summaryRight:1};t["!outline"].above&&(A.summaryBelow=0),t["!outline"].left&&(A.summaryRight=0),o=(o||"")+Rt("outlinePr",null,A)}!a&&!o||(s[s.length]=Rt("sheetPr",o,i))}var Hde=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Vde=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Gde(t){var e={sheet:1};return Hde.forEach(function(n){t[n]!=null&&t[n]&&(e[n]="1")}),Vde.forEach(function(n){t[n]!=null&&!t[n]&&(e[n]="0")}),t.password&&(e.password=pS(t.password).toString(16).toUpperCase()),Rt("sheetProtection",null,e)}function zde(t,e,n){for(var r=Array.isArray(t),s=0;s!=e.length;++s){var a=En(Kr(e[s]),!0);if(!a.ref)return;var i=((n||{})["!id"]||[])[a.id];i?(a.Target=i.Target,a.location&&(a.Target+="#"+mr(a.location))):(a.Target="#"+mr(a.location),i={Target:a.Target,TargetMode:"Internal"}),a.Rel=i,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=pr(a.ref),l=o.s.r;l<=o.e.r;++l)for(var A=o.s.c;A<=o.e.c;++A){var d=wn({c:A,r:l});r?(t[l]||(t[l]=[]),t[l][A]||(t[l][A]={t:"z",v:void 0}),t[l][A].l=a):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=a)}}}function Kde(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(n){t[n]&&(e[n]=parseFloat(t[n]))}),e}function qde(t){return Kf(t),Rt("pageMargins",null,t)}function Wde(t,e){for(var n=!1,r=0;r!=e.length;++r){var s=En(e[r],!0);s.hidden&&(s.hidden=ts(s.hidden));var a=parseInt(s.min,10)-1,i=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!n&&s.width&&(n=!0,gS(s.width)),qd(s);a<=i;)t[a++]=ss(s)}}function $de(t,e){for(var n=["<cols>"],r,s=0;s!=e.length;++s)(r=e[s])&&(n[n.length]=Rt("col",null,My(s,r)));return n[n.length]="</cols>",n.join("")}function Yde(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function Jde(t,e,n,r){var s=typeof t.ref=="string"?t.ref:Fn(t.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var a=n.Workbook.Names,i=po(s);i.s.r==i.e.r&&(i.e.r=po(e["!ref"]).e.r,s=Fn(i));for(var o=0;o<a.length;++o){var l=a[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+s;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),Rt("autoFilter",null,{ref:s})}var Xde=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Zde(t,e){e.Views||(e.Views=[{}]),(t.match(Xde)||[]).forEach(function(n,r){var s=En(n);e.Views[r]||(e.Views[r]={}),+s.zoomScale&&(e.Views[r].zoom=+s.zoomScale),ts(s.rightToLeft)&&(e.Views[r].RTL=!0)})}function efe(t,e,n,r){var s={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),Rt("sheetViews",Rt("sheetView",null,s),{})}function tfe(t,e,n,r){if(t.c&&n["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var s="",a=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":s=t.v?"1":"0";break;case"n":s=""+t.v;break;case"e":s=wu[t.v];break;case"d":r&&r.cellDates?s=rs(t.v,-1).toISOString():(t=ss(t),t.t="n",s=""+(t.v=Ta(rs(t.v)))),typeof t.z>"u"&&(t.z=gn[14]);break;default:s=t.v;break}var o=ei("v",Mr(s)),l={r:e},A=ef(r.cellXfs,t,r);switch(A!==0&&(l.s=A),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=ei("v",""+bS(r.Strings,t.v,r.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=a&&(t.t=a,t.v=i),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Rt("f",Mr(t.f),d)+(t.v!=null?o:"")}return t.l&&n["!links"].push([e,t.l]),t.D&&(l.cm=1),Rt("c",o,l)}var nfe=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,n=/r=["']([^"']*)["']/,r=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,a=Ig("v"),i=Ig("f");return function(l,A,d,h,p,g){for(var w=0,b="",E=[],B=[],I=0,k=0,F=0,D="",P,S,N=0,T=0,V,M,U=0,O=0,G=Array.isArray(g.CellXf),ie,K=[],q=[],se=Array.isArray(A),Z=[],X={},de=!1,j=!!d.sheetStubs,W=l.split(e),J=0,ne=W.length;J!=ne;++J){b=W[J].trim();var oe=b.length;if(oe!==0){var ue=0;e:for(w=0;w<oe;++w)switch(b[w]){case">":if(b[w-1]!="/"){++w;break e}if(d&&d.cellStyles){if(S=En(b.slice(ue,w),!0),N=S.r!=null?parseInt(S.r,10):N+1,T=-1,d.sheetRows&&d.sheetRows<N)continue;X={},de=!1,S.ht&&(de=!0,X.hpt=parseFloat(S.ht),X.hpx=lm(X.hpt)),S.hidden=="1"&&(de=!0,X.hidden=!0),S.outlineLevel!=null&&(de=!0,X.level=+S.outlineLevel),de&&(Z[N-1]=X)}break;case"<":ue=w;break}if(ue>=w)break;if(S=En(b.slice(ue,w),!0),N=S.r!=null?parseInt(S.r,10):N+1,T=-1,!(d.sheetRows&&d.sheetRows<N)){h.s.r>N-1&&(h.s.r=N-1),h.e.r<N-1&&(h.e.r=N-1),d&&d.cellStyles&&(X={},de=!1,S.ht&&(de=!0,X.hpt=parseFloat(S.ht),X.hpx=lm(X.hpt)),S.hidden=="1"&&(de=!0,X.hidden=!0),S.outlineLevel!=null&&(de=!0,X.level=+S.outlineLevel),de&&(Z[N-1]=X)),E=b.slice(w).split(t);for(var me=0;me!=E.length&&E[me].trim().charAt(0)=="<";++me);for(E=E.slice(me),w=0;w!=E.length;++w)if(b=E[w].trim(),b.length!==0){if(B=b.match(n),I=w,k=0,F=0,b="<c "+(b.slice(0,1)=="<"?">":"")+b,B!=null&&B.length===2){for(I=0,D=B[1],k=0;k!=D.length&&!((F=D.charCodeAt(k)-64)<1||F>26);++k)I=26*I+F;--I,T=I}else++T;for(k=0;k!=b.length&&b.charCodeAt(k)!==62;++k);if(++k,S=En(b.slice(0,k),!0),S.r||(S.r=wn({r:N-1,c:T})),D=b.slice(k),P={t:""},(B=D.match(a))!=null&&B[1]!==""&&(P.v=mr(B[1])),d.cellFormula){if((B=D.match(i))!=null&&B[1]!==""){if(P.f=mr(Kr(B[1])).replace(/\r\n/g,`
`),d.xlfn||(P.f=KI(P.f)),B[0].indexOf('t="array"')>-1)P.F=(D.match(s)||[])[1],P.F.indexOf(":")>-1&&K.push([pr(P.F),P.F]);else if(B[0].indexOf('t="shared"')>-1){M=En(B[0]);var ge=mr(Kr(B[1]));d.xlfn||(ge=KI(ge)),q[parseInt(M.si,10)]=[M,ge,S.r]}}else(B=D.match(/<f[^>]*\/>/))&&(M=En(B[0]),q[M.si]&&(P.f=XAe(q[M.si][1],q[M.si][2],S.r)));var ke=vs(S.r);for(k=0;k<K.length;++k)ke.r>=K[k][0].s.r&&ke.r<=K[k][0].e.r&&ke.c>=K[k][0].s.c&&ke.c<=K[k][0].e.c&&(P.F=K[k][1])}if(S.t==null&&P.v===void 0)if(P.f||P.F)P.v=0,P.t="n";else if(j)P.t="z";else continue;else P.t=S.t||"n";switch(h.s.c>T&&(h.s.c=T),h.e.c<T&&(h.e.c=T),P.t){case"n":if(P.v==""||P.v==null){if(!j)continue;P.t="z"}else P.v=parseFloat(P.v);break;case"s":if(typeof P.v>"u"){if(!j)continue;P.t="z"}else V=Ag[parseInt(P.v,10)],P.v=V.t,P.r=V.r,d.cellHTML&&(P.h=V.h);break;case"str":P.t="s",P.v=P.v!=null?Kr(P.v):"",d.cellHTML&&(P.h=tS(P.v));break;case"inlineStr":B=D.match(r),P.t="s",B!=null&&(V=mS(B[1]))?(P.v=V.t,d.cellHTML&&(P.h=V.h)):P.v="";break;case"b":P.v=ts(P.v);break;case"d":d.cellDates?P.v=rs(P.v,1):(P.v=Ta(rs(P.v,1)),P.t="n");break;case"e":(!d||d.cellText!==!1)&&(P.w=P.v),P.v=P8[P.v];break}if(U=O=0,ie=null,G&&S.s!==void 0&&(ie=g.CellXf[S.s],ie!=null&&(ie.numFmtId!=null&&(U=ie.numFmtId),d.cellStyles&&ie.fillId!=null&&(O=ie.fillId))),UM(P,U,O,d,p,g),d.cellDates&&G&&P.t=="n"&&Em(gn[U])&&(P.t="d",P.v=Ry(P.v)),S.cm&&d.xlmeta){var ve=(d.xlmeta.Cell||[])[+S.cm-1];ve&&ve.type=="XLDAPR"&&(P.D=!0)}if(se){var ae=vs(S.r);A[ae.r]||(A[ae.r]=[]),A[ae.r][ae.c]=P}else A[S.r]=P}}}}Z.length>0&&(A["!rows"]=Z)}}();function rfe(t,e,n,r){var s=[],a=[],i=pr(t["!ref"]),o="",l,A="",d=[],h=0,p=0,g=t["!rows"],w=Array.isArray(t),b={r:A},E,B=-1;for(p=i.s.c;p<=i.e.c;++p)d[p]=xs(p);for(h=i.s.r;h<=i.e.r;++h){for(a=[],A=Ys(h),p=i.s.c;p<=i.e.c;++p){l=d[p]+A;var I=w?(t[h]||[])[p]:t[l];I!==void 0&&(o=tfe(I,l,t,e))!=null&&a.push(o)}(a.length>0||g&&g[h])&&(b={r:A},g&&g[h]&&(E=g[h],E.hidden&&(b.hidden=1),B=-1,E.hpx?B=Pg(E.hpx):E.hpt&&(B=E.hpt),B>-1&&(b.ht=B,b.customHeight=1),E.level&&(b.outlineLevel=E.level)),s[s.length]=Rt("row",a.join(""),b))}if(g)for(;h<g.length;++h)g&&g[h]&&(b={r:h+1},E=g[h],E.hidden&&(b.hidden=1),B=-1,E.hpx?B=Pg(E.hpx):E.hpt&&(B=E.hpt),B>-1&&(b.ht=B,b.customHeight=1),E.level&&(b.outlineLevel=E.level),s[s.length]=Rt("row","",b));return s.join("")}function MM(t,e,n,r){var s=[Xs,Rt("worksheet",null,{xmlns:hh[0],"xmlns:r":Ea.r})],a=n.SheetNames[t],i=0,o="",l=n.Sheets[a];l==null&&(l={});var A=l["!ref"]||"A1",d=pr(A);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+A+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),A=Fn(d)}r||(r={}),l["!comments"]=[];var h=[];Qde(l,n,t,e,s),s[s.length]=Rt("dimension",null,{ref:A}),s[s.length]=efe(l,e,t,n),e.sheetFormat&&(s[s.length]=Rt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(s[s.length]=$de(l,l["!cols"])),s[i=s.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=rfe(l,e),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),l["!protect"]&&(s[s.length]=Gde(l["!protect"])),l["!autofilter"]!=null&&(s[s.length]=Jde(l["!autofilter"],l,n,t)),l["!merges"]!=null&&l["!merges"].length>0&&(s[s.length]=jde(l["!merges"]));var p=-1,g,w=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(b){b[1].Target&&(g={ref:b[0]},b[1].Target.charAt(0)!="#"&&(w=Ur(r,-1,Mr(b[1].Target).replace(/#.*$/,""),Yn.HLINK),g["r:id"]="rId"+w),(p=b[1].Target.indexOf("#"))>-1&&(g.location=Mr(b[1].Target.slice(p+1))),b[1].Tooltip&&(g.tooltip=Mr(b[1].Tooltip)),s[s.length]=Rt("hyperlink",null,g))}),s[s.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(s[s.length]=qde(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(s[s.length]=ei("ignoredErrors",Rt("ignoredError",null,{numberStoredAsText:1,sqref:A}))),h.length>0&&(w=Ur(r,-1,"../drawings/drawing"+(t+1)+".xml",Yn.DRAW),s[s.length]=Rt("drawing",null,{"r:id":"rId"+w}),l["!drawing"]=h),l["!comments"].length>0&&(w=Ur(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Yn.VML),s[s.length]=Rt("legacyDrawing",null,{"r:id":"rId"+w}),l["!legacy"]=w),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function sfe(t,e){var n={},r=t.l+e;n.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var a=t.read_shift(1);return t.l=r,a&7&&(n.level=a&7),a&16&&(n.hidden=!0),a&32&&(n.hpt=s/20),n}function afe(t,e,n){var r=lt(145),s=(n["!rows"]||[])[t]||{};r.write_shift(4,t),r.write_shift(4,0);var a=320;s.hpx?a=Pg(s.hpx)*20:s.hpt&&(a=s.hpt*20),r.write_shift(2,a),r.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),r.write_shift(1,i),r.write_shift(1,0);var o=0,l=r.l;r.l+=4;for(var A={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var h=-1,p=-1,g=d<<10;g<d+1<<10;++g){A.c=g;var w=Array.isArray(n)?(n[A.r]||[])[A.c]:n[wn(A)];w&&(h<0&&(h=g),p=g)}h<0||(++o,r.write_shift(4,h),r.write_shift(4,p))}var b=r.l;return r.l=l,r.write_shift(4,o),r.l=b,r.length>r.l?r.slice(0,r.l):r}function ife(t,e,n,r){var s=afe(r,n,e);(s.length>17||(e["!rows"]||[])[r])&&bt(t,0,s)}var ofe=xh,lfe=Tm;function cfe(){}function Afe(t,e){var n={},r=t[t.l];return++t.l,n.above=!(r&64),n.left=!(r&128),t.l+=18,n.name=fie(t),n}function ufe(t,e,n){n==null&&(n=lt(84+4*t.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),n.write_shift(1,r);for(var s=1;s<3;++s)n.write_shift(1,0);return k2({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),R8(t,n),n.slice(0,n.l)}function dfe(t){var e=kl(t);return[e]}function ffe(t,e,n){return n==null&&(n=lt(8)),mh(e,n)}function hfe(t){var e=ph(t);return[e]}function mfe(t,e,n){return n==null&&(n=lt(4)),gh(e,n)}function pfe(t){var e=kl(t),n=t.read_shift(1);return[e,n,"b"]}function gfe(t,e,n){return n==null&&(n=lt(9)),mh(e,n),n.write_shift(1,t.v?1:0),n}function xfe(t){var e=ph(t),n=t.read_shift(1);return[e,n,"b"]}function vfe(t,e,n){return n==null&&(n=lt(5)),gh(e,n),n.write_shift(1,t.v?1:0),n}function yfe(t){var e=kl(t),n=t.read_shift(1);return[e,n,"e"]}function wfe(t,e,n){return n==null&&(n=lt(9)),mh(e,n),n.write_shift(1,t.v),n}function bfe(t){var e=ph(t),n=t.read_shift(1);return[e,n,"e"]}function Cfe(t,e,n){return n==null&&(n=lt(8)),gh(e,n),n.write_shift(1,t.v),n.write_shift(2,0),n.write_shift(1,0),n}function Efe(t){var e=kl(t),n=t.read_shift(4);return[e,n,"s"]}function _fe(t,e,n){return n==null&&(n=lt(12)),mh(e,n),n.write_shift(4,e.v),n}function Sfe(t){var e=ph(t),n=t.read_shift(4);return[e,n,"s"]}function Tfe(t,e,n){return n==null&&(n=lt(8)),gh(e,n),n.write_shift(4,e.v),n}function Bfe(t){var e=kl(t),n=Ni(t);return[e,n,"n"]}function Nfe(t,e,n){return n==null&&(n=lt(16)),mh(e,n),rh(t.v,n),n}function PM(t){var e=ph(t),n=Ni(t);return[e,n,"n"]}function kfe(t,e,n){return n==null&&(n=lt(12)),gh(e,n),rh(t.v,n),n}function Ife(t){var e=kl(t),n=AS(t);return[e,n,"n"]}function Ffe(t,e,n){return n==null&&(n=lt(12)),mh(e,n),D8(t.v,n),n}function Rfe(t){var e=ph(t),n=AS(t);return[e,n,"n"]}function Dfe(t,e,n){return n==null&&(n=lt(8)),gh(e,n),D8(t.v,n),n}function Ufe(t){var e=kl(t),n=oS(t);return[e,n,"is"]}function Lfe(t){var e=kl(t),n=Ii(t);return[e,n,"str"]}function Mfe(t,e,n){return n==null&&(n=lt(12+4*t.v.length)),mh(e,n),Qa(t.v,n),n.length>n.l?n.slice(0,n.l):n}function Pfe(t){var e=ph(t),n=Ii(t);return[e,n,"str"]}function jfe(t,e,n){return n==null&&(n=lt(8+4*t.v.length)),gh(e,n),Qa(t.v,n),n.length>n.l?n.slice(0,n.l):n}function Ofe(t,e,n){var r=t.l+e,s=kl(t);s.r=n["!row"];var a=t.read_shift(1),i=[s,a,"b"];if(n.cellFormula){t.l+=2;var o=Ly(t,r-t.l,n);i[3]=Ei(o,null,s,n.supbooks,n)}else t.l=r;return i}function Qfe(t,e,n){var r=t.l+e,s=kl(t);s.r=n["!row"];var a=t.read_shift(1),i=[s,a,"e"];if(n.cellFormula){t.l+=2;var o=Ly(t,r-t.l,n);i[3]=Ei(o,null,s,n.supbooks,n)}else t.l=r;return i}function Hfe(t,e,n){var r=t.l+e,s=kl(t);s.r=n["!row"];var a=Ni(t),i=[s,a,"n"];if(n.cellFormula){t.l+=2;var o=Ly(t,r-t.l,n);i[3]=Ei(o,null,s,n.supbooks,n)}else t.l=r;return i}function Vfe(t,e,n){var r=t.l+e,s=kl(t);s.r=n["!row"];var a=Ii(t),i=[s,a,"str"];if(n.cellFormula){t.l+=2;var o=Ly(t,r-t.l,n);i[3]=Ei(o,null,s,n.supbooks,n)}else t.l=r;return i}var Gfe=xh,zfe=Tm;function Kfe(t,e){return e==null&&(e=lt(4)),e.write_shift(4,t),e}function qfe(t,e){var n=t.l+e,r=xh(t),s=lS(t),a=Ii(t),i=Ii(t),o=Ii(t);t.l=n;var l={rfx:r,relId:s,loc:a,display:o};return i&&(l.Tooltip=i),l}function Wfe(t,e){var n=lt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Tm({s:vs(t[0]),e:vs(t[0])},n),cS("rId"+e,n);var r=t[1].Target.indexOf("#"),s=r==-1?"":t[1].Target.slice(r+1);return Qa(s||"",n),Qa(t[1].Tooltip||"",n),Qa("",n),n.slice(0,n.l)}function $fe(){}function Yfe(t,e,n){var r=t.l+e,s=U8(t),a=t.read_shift(1),i=[s];if(i[2]=a,n.cellFormula){var o=yde(t,r-t.l,n);i[1]=o}else t.l=r;return i}function Jfe(t,e,n){var r=t.l+e,s=xh(t),a=[s];if(n.cellFormula){var i=bde(t,r-t.l,n);a[1]=i,t.l=r}else t.l=r;return a}function Xfe(t,e,n){n==null&&(n=lt(18));var r=My(t,e);n.write_shift(-4,t),n.write_shift(-4,t),n.write_shift(4,(r.width||10)*256),n.write_shift(4,0);var s=0;return e.hidden&&(s|=1),typeof r.width=="number"&&(s|=2),e.level&&(s|=e.level<<8),n.write_shift(2,s),n}var jM=["left","right","top","bottom","header","footer"];function Zfe(t){var e={};return jM.forEach(function(n){e[n]=Ni(t)}),e}function ehe(t,e){return e==null&&(e=lt(48)),Kf(t),jM.forEach(function(n){rh(t[n],e)}),e}function the(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function nhe(t,e,n){n==null&&(n=lt(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}function rhe(t){var e=lt(24);return e.write_shift(4,4),e.write_shift(4,1),Tm(t,e),e}function she(t,e){return e==null&&(e=lt(66)),e.write_shift(2,t.password?pS(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?e.write_shift(4,t[n[0]]!=null&&!t[n[0]]?1:0):e.write_shift(4,t[n[0]]!=null&&t[n[0]]?0:1)}),e}function ahe(){}function ihe(){}function ohe(t,e,n,r,s,a,i){if(!t)return t;var o=e||{};r||(r={"!id":{}});var l=o.dense?[]:{},A,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,p=!1,g,w,b,E,B,I,k,F,D,P=[];o.biff=12,o["!row"]=0;var S=0,N=!1,T=[],V={},M=o.supbooks||s.supbooks||[[]];if(M.sharedf=V,M.arrayf=T,M.SheetNames=s.SheetNames||s.Sheets.map(function(se){return se.name}),!o.supbooks&&(o.supbooks=M,s.Names))for(var U=0;U<s.Names.length;++U)M[0][U+1]=s.Names[U];var O=[],G=[],ie=!1;jg[16]={n:"BrtShortReal",f:PM};var K;if(yu(t,function(Z,X,de){if(!p)switch(de){case 148:A=Z;break;case 0:g=Z,o.sheetRows&&o.sheetRows<=g.r&&(p=!0),F=Ys(E=g.r),o["!row"]=g.r,(Z.hidden||Z.hpt||Z.level!=null)&&(Z.hpt&&(Z.hpx=lm(Z.hpt)),G[Z.r]=Z);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(w={t:Z[2]},Z[2]){case"n":w.v=Z[1];break;case"s":k=Ag[Z[1]],w.v=k.t,w.r=k.r;break;case"b":w.v=!!Z[1];break;case"e":w.v=Z[1],o.cellText!==!1&&(w.w=wu[w.v]);break;case"str":w.t="s",w.v=Z[1];break;case"is":w.t="s",w.v=Z[1].t;break}if((b=i.CellXf[Z[0].iStyleRef])&&UM(w,b.numFmtId,null,o,a,i),B=Z[0].c==-1?B+1:Z[0].c,o.dense?(l[E]||(l[E]=[]),l[E][B]=w):l[xs(B)+F]=w,o.cellFormula){for(N=!1,S=0;S<T.length;++S){var j=T[S];g.r>=j[0].s.r&&g.r<=j[0].e.r&&B>=j[0].s.c&&B<=j[0].e.c&&(w.F=Fn(j[0]),N=!0)}!N&&Z.length>3&&(w.f=Z[3])}if(d.s.r>g.r&&(d.s.r=g.r),d.s.c>B&&(d.s.c=B),d.e.r<g.r&&(d.e.r=g.r),d.e.c<B&&(d.e.c=B),o.cellDates&&b&&w.t=="n"&&Em(gn[b.numFmtId])){var W=Df(w.v);W&&(w.t="d",w.v=new Date(W.y,W.m-1,W.d,W.H,W.M,W.S,W.u))}K&&(K.type=="XLDAPR"&&(w.D=!0),K=void 0);break;case 1:case 12:if(!o.sheetStubs||h)break;w={t:"z",v:void 0},B=Z[0].c==-1?B+1:Z[0].c,o.dense?(l[E]||(l[E]=[]),l[E][B]=w):l[xs(B)+F]=w,d.s.r>g.r&&(d.s.r=g.r),d.s.c>B&&(d.s.c=B),d.e.r<g.r&&(d.e.r=g.r),d.e.c<B&&(d.e.c=B),K&&(K.type=="XLDAPR"&&(w.D=!0),K=void 0);break;case 176:P.push(Z);break;case 49:K=((o.xlmeta||{}).Cell||[])[Z-1];break;case 494:var J=r["!id"][Z.relId];for(J?(Z.Target=J.Target,Z.loc&&(Z.Target+="#"+Z.loc),Z.Rel=J):Z.relId==""&&(Z.Target="#"+Z.loc),E=Z.rfx.s.r;E<=Z.rfx.e.r;++E)for(B=Z.rfx.s.c;B<=Z.rfx.e.c;++B)o.dense?(l[E]||(l[E]=[]),l[E][B]||(l[E][B]={t:"z",v:void 0}),l[E][B].l=Z):(I=wn({c:B,r:E}),l[I]||(l[I]={t:"z",v:void 0}),l[I].l=Z);break;case 426:if(!o.cellFormula)break;T.push(Z),D=o.dense?l[E][B]:l[xs(B)+F],D.f=Ei(Z[1],d,{r:g.r,c:B},M,o),D.F=Fn(Z[0]);break;case 427:if(!o.cellFormula)break;V[wn(Z[0].s)]=Z[1],D=o.dense?l[E][B]:l[xs(B)+F],D.f=Ei(Z[1],d,{r:g.r,c:B},M,o);break;case 60:if(!o.cellStyles)break;for(;Z.e>=Z.s;)O[Z.e--]={width:Z.w/256,hidden:!!(Z.flags&1),level:Z.level},ie||(ie=!0,gS(Z.w/256)),qd(O[Z.e+1]);break;case 161:l["!autofilter"]={ref:Fn(Z)};break;case 476:l["!margins"]=Z;break;case 147:s.Sheets[n]||(s.Sheets[n]={}),Z.name&&(s.Sheets[n].CodeName=Z.name),(Z.above||Z.left)&&(l["!outline"]={above:Z.above,left:Z.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),Z.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!X.T){if(!h||o.WTF)throw new Error("Unexpected record 0x"+de.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||A&&(A.e.r>0||A.e.c>0||A.s.r>0||A.s.c>0))&&(l["!ref"]=Fn(A||d)),o.sheetRows&&l["!ref"]){var q=pr(l["!ref"]);o.sheetRows<=+q.e.r&&(q.e.r=o.sheetRows-1,q.e.r>d.e.r&&(q.e.r=d.e.r),q.e.r<q.s.r&&(q.s.r=q.e.r),q.e.c>d.e.c&&(q.e.c=d.e.c),q.e.c<q.s.c&&(q.s.c=q.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Fn(q))}return P.length>0&&(l["!merges"]=P),O.length>0&&(l["!cols"]=O),G.length>0&&(l["!rows"]=G),l}function lhe(t,e,n,r,s,a,i){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=ss(e),e.z=e.z||gn[14],e.v=Ta(rs(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r:n,c:r};switch(l.s=ef(s.cellXfs,e,s),e.l&&a["!links"].push([wn(l),e.l]),e.c&&a["!comments"].push([wn(l),e.c]),e.t){case"s":case"str":return s.bookSST?(o=bS(s.Strings,e.v,s.revStrings),l.t="s",l.v=o,i?bt(t,18,Tfe(e,l)):bt(t,7,_fe(e,l))):(l.t="str",i?bt(t,17,jfe(e,l)):bt(t,6,Mfe(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?bt(t,13,Dfe(e,l)):bt(t,2,Ffe(e,l)):i?bt(t,16,kfe(e,l)):bt(t,5,Nfe(e,l)),!0;case"b":return l.t="b",i?bt(t,15,vfe(e,l)):bt(t,4,gfe(e,l)),!0;case"e":return l.t="e",i?bt(t,14,Cfe(e,l)):bt(t,3,wfe(e,l)),!0}return i?bt(t,12,mfe(e,l)):bt(t,1,ffe(e,l)),!0}function che(t,e,n,r){var s=pr(e["!ref"]||"A1"),a,i="",o=[];bt(t,145);var l=Array.isArray(e),A=s.e.r;e["!rows"]&&(A=Math.max(s.e.r,e["!rows"].length-1));for(var d=s.s.r;d<=A;++d){i=Ys(d),ife(t,e,s,d);var h=!1;if(d<=s.e.r)for(var p=s.s.c;p<=s.e.c;++p){d===s.s.r&&(o[p]=xs(p)),a=o[p]+i;var g=l?(e[d]||[])[p]:e[a];if(!g){h=!1;continue}h=lhe(t,g,d,p,r,e,h)}}bt(t,146)}function Ahe(t,e){!e||!e["!merges"]||(bt(t,177,Kfe(e["!merges"].length)),e["!merges"].forEach(function(n){bt(t,176,zfe(n))}),bt(t,178))}function uhe(t,e){!e||!e["!cols"]||(bt(t,390),e["!cols"].forEach(function(n,r){n&&bt(t,60,Xfe(r,n))}),bt(t,391))}function dhe(t,e){!e||!e["!ref"]||(bt(t,648),bt(t,649,rhe(pr(e["!ref"]))),bt(t,650))}function fhe(t,e,n){e["!links"].forEach(function(r){if(r[1].Target){var s=Ur(n,-1,r[1].Target.replace(/#.*$/,""),Yn.HLINK);bt(t,494,Wfe(r,s))}}),delete e["!links"]}function hhe(t,e,n,r){if(e["!comments"].length>0){var s=Ur(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",Yn.VML);bt(t,551,cS("rId"+s)),e["!legacy"]=s}}function mhe(t,e,n,r){if(e["!autofilter"]){var s=e["!autofilter"],a=typeof s.ref=="string"?s.ref:Fn(s.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var i=n.Workbook.Names,o=po(a);o.s.r==o.e.r&&(o.e.r=po(e["!ref"]).e.r,a=Fn(o));for(var l=0;l<i.length;++l){var A=i[l];if(A.Name=="_xlnm._FilterDatabase"&&A.Sheet==r){A.Ref="'"+n.SheetNames[r]+"'!"+a;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+a}),bt(t,161,Tm(pr(a))),bt(t,162)}}function phe(t,e,n){bt(t,133),bt(t,137,nhe(e,n)),bt(t,138),bt(t,134)}function ghe(t,e){e["!protect"]&&bt(t,535,she(e["!protect"]))}function xhe(t,e,n,r){var s=fo(),a=n.SheetNames[t],i=n.Sheets[a]||{},o=a;try{n&&n.Workbook&&(o=n.Workbook.Sheets[t].CodeName||o)}catch{}var l=pr(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],bt(s,129),(n.vbaraw||i["!outline"])&&bt(s,147,ufe(o,i["!outline"])),bt(s,148,lfe(l)),phe(s,i,n.Workbook),uhe(s,i),che(s,i,t,e),ghe(s,i),mhe(s,i,n,t),Ahe(s,i),fhe(s,i,r),i["!margins"]&&bt(s,476,ehe(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&dhe(s,i),hhe(s,i,t,r),bt(s,130),s.end()}function vhe(t){var e=[],n=t.match(/^<c:numCache>/),r;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var i=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(e[+i[1]]=n?+i[2]:i[2])});var s=mr((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){r=a.replace(/<.*?>/g,"")}),[e,s,r]}function yhe(t,e,n,r,s,a){var i=a||{"!type":"chart"};if(!t)return a;var o=0,l=0,A="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var p=vhe(h);d.s.r=d.s.c=0,d.e.c=o,A=xs(o),p[0].forEach(function(g,w){i[A+Ys(w)]={t:"n",v:g,z:p[1]},l=w}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=Fn(d)),i}function whe(t,e,n,r,s){if(!t)return t;r||(r={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i,o=t.match(LM);return o&&CS(o[0],a,s,n),(i=t.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=i[1]),r["!id"][a["!rel"]]&&(a["!drawel"]=r["!id"][a["!rel"]]),a}function bhe(t,e){t.l+=10;var n=Ii(t);return{name:n}}function Che(t,e,n,r,s){if(!t)return t;r||(r={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i=!1;return yu(t,function(l,A,d){switch(d){case 550:a["!rel"]=l;break;case 651:s.Sheets[n]||(s.Sheets[n]={}),l.name&&(s.Sheets[n].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(A.T>0)){if(!(A.T<0)){if(!i||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),r["!id"][a["!rel"]]&&(a["!drawel"]=r["!id"][a["!rel"]]),a}var ES=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Ehe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],_he=[],She=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function JI(t,e){for(var n=0;n!=t.length;++n)for(var r=t[n],s=0;s!=e.length;++s){var a=e[s];if(r[a[0]]==null)r[a[0]]=a[1];else switch(a[2]){case"bool":typeof r[a[0]]=="string"&&(r[a[0]]=ts(r[a[0]]));break;case"int":typeof r[a[0]]=="string"&&(r[a[0]]=parseInt(r[a[0]],10));break}}}function XI(t,e){for(var n=0;n!=e.length;++n){var r=e[n];if(t[r[0]]==null)t[r[0]]=r[1];else switch(r[2]){case"bool":typeof t[r[0]]=="string"&&(t[r[0]]=ts(t[r[0]]));break;case"int":typeof t[r[0]]=="string"&&(t[r[0]]=parseInt(t[r[0]],10));break}}}function OM(t){XI(t.WBProps,ES),XI(t.CalcPr,She),JI(t.WBView,Ehe),JI(t.Sheets,_he),z0.date1904=ts(t.WBProps.date1904)}function The(t){return!t.Workbook||!t.Workbook.WBProps?"false":ts(t.Workbook.WBProps.date1904)?"true":"false"}var Bhe="][*?/\\".split("");function QM(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return Bhe.forEach(function(r){if(t.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}function Nhe(t,e,n){t.forEach(function(r,s){QM(r);for(var a=0;a<s;++a)if(r==t[a])throw new Error("Duplicate Sheet Name: "+r);if(n){var i=e&&e[s]&&e[s].CodeName||r;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function khe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];Nhe(t.SheetNames,e,!!t.vbaraw);for(var n=0;n<t.SheetNames.length;++n)Tde(t.Sheets[t.SheetNames[n]],t.SheetNames[n],n)}var Ihe=/<\w+:workbook/;function Fhe(t,e){if(!t)throw new Error("Could not find file");var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},r=!1,s="xmlns",a={},i=0;if(t.replace(Ui,function(l,A){var d=En(l);switch(pA(d[0])){case"<?xml":break;case"<workbook":l.match(Ihe)&&(s="xmlns"+l.match(/<(\w+):/)[1]),n.xmlns=d[s];break;case"</workbook>":break;case"<fileVersion":delete d[0],n.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":ES.forEach(function(h){if(d[h[0]]!=null)switch(h[2]){case"bool":n.WBProps[h[0]]=ts(d[h[0]]);break;case"int":n.WBProps[h[0]]=parseInt(d[h[0]],10);break;default:n.WBProps[h[0]]=d[h[0]]}}),d.codeName&&(n.WBProps.CodeName=Kr(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],n.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=mr(Kr(d.name)),delete d[0],n.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":r=!0;break;case"</definedNames>":r=!1;break;case"<definedName":a={},a.Name=Kr(d.name),d.comment&&(a.Comment=d.comment),d.localSheetId&&(a.Sheet=+d.localSheetId),ts(d.hidden||"0")&&(a.Hidden=!0),i=A+l.length;break;case"</definedName>":a.Ref=mr(Kr(t.slice(i,A))),n.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete d[0],n.CalcPr=d;break;case"<calcPr/>":delete d[0],n.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":r=!0;break;case"</AlternateContent>":r=!1;break;case"<revisionPtr":break;default:if(!r&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),hh.indexOf(n.xmlns)===-1)throw new Error("Unknown Namespace: "+n.xmlns);return OM(n),n}function HM(t){var e=[Xs];e[e.length]=Rt("workbook",null,{xmlns:hh[0],"xmlns:r":Ea.r});var n=t.Workbook&&(t.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(ES.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(r[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(r.codeName=t.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=Rt("workbookPr",null,r);var s=t.Workbook&&t.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(e[e.length]="<bookViews>",a=0;a!=t.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==t.SheetNames.length&&(a=0),e[e.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",a=0;a!=t.SheetNames.length;++a){var i={name:Mr(t.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=Rt("sheet",null,i)}return e[e.length]="</sheets>",n&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Rt("definedName",Mr(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function Rhe(t,e){var n={};return n.Hidden=t.read_shift(4),n.iTabID=t.read_shift(4),n.strRelID=r_(t),n.name=Ii(t),n}function Dhe(t,e){return e||(e=lt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),cS(t.strRelID,e),Qa(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function Uhe(t,e){var n={},r=t.read_shift(4);n.defaultThemeVersion=t.read_shift(4);var s=e>8?Ii(t):"";return s.length>0&&(n.CodeName=s),n.autoCompressPictures=!!(r&65536),n.backupFile=!!(r&64),n.checkCompatibility=!!(r&4096),n.date1904=!!(r&1),n.filterPrivacy=!!(r&8),n.hidePivotFieldList=!!(r&1024),n.promptedSolutions=!!(r&16),n.publishItems=!!(r&2048),n.refreshAllConnections=!!(r&262144),n.saveExternalLinkValues=!!(r&128),n.showBorderUnselectedTables=!!(r&4),n.showInkAnnotation=!!(r&32),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(r&32768),n.updateLinks=["userSet","never","always"][r>>8&3],n}function Lhe(t,e){e||(e=lt(72));var n=0;return t&&t.filterPrivacy&&(n|=8),e.write_shift(4,n),e.write_shift(4,0),R8(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Mhe(t,e){var n={};return t.read_shift(4),n.ArchID=t.read_shift(4),t.l+=e-8,n}function Phe(t,e,n){var r=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),a=hie(t),i=wde(t,0,n),o=lS(t);t.l=r;var l={Name:a,Ptg:i};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function jhe(t,e){var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},r=[],s=!1;e||(e={}),e.biff=12;var a=[],i=[[]];return i.SheetNames=[],i.XTI=[],jg[16]={n:"BrtFRTArchID$",f:Mhe},yu(t,function(l,A,d){switch(d){case 156:i.SheetNames.push(l.name),n.Sheets.push(l);break;case 153:n.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=Ei(l.Ptg,null,null,i,e),delete e.SID,delete l.Ptg,a.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,l]):i[0]=[d,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:r.push(d),s=!0;break;case 36:r.pop(),s=!1;break;case 37:r.push(d),s=!0;break;case 38:r.pop(),s=!1;break;case 16:break;default:if(!A.T){if(!s||e.WTF&&r[r.length-1]!=37&&r[r.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),OM(n),n.Names=a,n.supbooks=i,n}function Ohe(t,e){bt(t,143);for(var n=0;n!=e.SheetNames.length;++n){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[n]&&e.Workbook.Sheets[n].Hidden||0,s={Hidden:r,iTabID:n+1,strRelID:"rId"+(n+1),name:e.SheetNames[n]};bt(t,156,Dhe(s))}bt(t,144)}function Qhe(t,e){e||(e=lt(127));for(var n=0;n!=4;++n)e.write_shift(4,0);return Qa("SheetJS",e),Qa(C2.version,e),Qa(C2.version,e),Qa("7262",e),e.length>e.l?e.slice(0,e.l):e}function Hhe(t,e){e||(e=lt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var n=120;return e.write_shift(1,n),e.length>e.l?e.slice(0,e.l):e}function Vhe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var n=e.Workbook.Sheets,r=0,s=-1,a=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&s==-1?s=r:n[r].Hidden==1&&a==-1&&(a=r);a>s||(bt(t,135),bt(t,158,Hhe(s)),bt(t,136))}}function Ghe(t,e){var n=fo();return bt(n,131),bt(n,128,Qhe()),bt(n,153,Lhe(t.Workbook&&t.Workbook.WBProps||null)),Vhe(n,t),Ohe(n,t),bt(n,132),n.end()}function zhe(t,e,n){return e.slice(-4)===".bin"?jhe(t,n):Fhe(t,n)}function Khe(t,e,n,r,s,a,i,o){return e.slice(-4)===".bin"?ohe(t,r,n,s,a,i,o):Pde(t,r,n,s,a,i,o)}function qhe(t,e,n,r,s,a,i,o){return e.slice(-4)===".bin"?Che(t,r,n,s,a):whe(t,r,n,s,a)}function Whe(t,e,n,r,s,a,i,o){return e.slice(-4)===".bin"?YAe():JAe()}function $he(t,e,n,r,s,a,i,o){return e.slice(-4)===".bin"?WAe():$Ae()}function Yhe(t,e,n,r){return e.slice(-4)===".bin"?zce(t,n,r):Rce(t,n,r)}function Jhe(t,e,n){return bM(t,n)}function Xhe(t,e,n){return e.slice(-4)===".bin"?Xle(t,n):$le(t,n)}function Zhe(t,e,n){return e.slice(-4)===".bin"?VAe(t,n):DAe(t,n)}function e0e(t,e,n){return e.slice(-4)===".bin"?IAe(t):NAe(t)}function t0e(t,e,n,r){return n.slice(-4)===".bin"?FAe(t,e,n,r):void 0}function n0e(t,e,n){return e.slice(-4)===".bin"?SAe(t,e,n):BAe(t,e,n)}function r0e(t,e,n){return(e.slice(-4)===".bin"?Ghe:HM)(t)}function s0e(t,e,n,r,s){return(e.slice(-4)===".bin"?xhe:MM)(t,n,r,s)}function a0e(t,e,n){return(e.slice(-4)===".bin"?tAe:yM)(t,n)}function i0e(t,e,n){return(e.slice(-4)===".bin"?tce:dM)(t,n)}function o0e(t,e,n){return(e.slice(-4)===".bin"?GAe:_M)(t)}function l0e(t){return(t.slice(-4)===".bin"?TAe:CM)()}var VM=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,GM=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function nc(t,e){var n=t.split(/\s+/),r=[];if(r[0]=n[0],n.length===1)return r;var s=t.match(VM),a,i,o,l;if(s)for(l=0;l!=s.length;++l)a=s[l].match(GM),(i=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),r[o]=a[2].slice(1,a[2].length-1));return r}function c0e(t){var e=t.split(/\s+/),n={};if(e.length===1)return n;var r=t.match(VM),s,a,i,o;if(r)for(o=0;o!=r.length;++o)s=r[o].match(GM),(a=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(a+1),n[i]=s[2].slice(1,s[2].length-1));return n}var dg;function A0e(t,e){var n=dg[t]||mr(t);return n==="General"?th(e):Nl(n,e)}function u0e(t,e,n,r){var s=r;switch((n[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=ts(r);break;case"i2":case"int":s=parseInt(r,10);break;case"r4":case"float":s=parseFloat(r);break;case"date":case"dateTime.tz":s=rs(r);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+n[0])}t[mr(e)]=s}function d0e(t,e,n){if(t.t!=="z"){if(!n||n.cellText!==!1)try{t.t==="e"?t.w=t.w||wu[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=kg(t.v):t.w=th(t.v):t.w=A0e(e||"General",t.v)}catch(a){if(n.WTF)throw a}try{var r=dg[e]||e||"General";if(n.cellNF&&(t.z=r),n.cellDates&&t.t=="n"&&Em(r)){var s=Df(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(a){if(n.WTF)throw a}}}function f0e(t,e,n){if(n.cellStyles&&e.Interior){var r=e.Interior;r.Pattern&&(r.patternType=_ce[r.Pattern]||r.Pattern)}t[e.ID]=e}function h0e(t,e,n,r,s,a,i,o,l,A){var d="General",h=r.StyleID,p={};A=A||{};var g=[],w=0;for(h===void 0&&o&&(h=o.StyleID),h===void 0&&i&&(h=i.StyleID);a[h]!==void 0&&(a[h].nf&&(d=a[h].nf),a[h].Interior&&g.push(a[h].Interior),!!a[h].Parent);)h=a[h].Parent;switch(n.Type){case"Boolean":r.t="b",r.v=ts(t);break;case"String":r.t="s",r.r=mI(mr(t)),r.v=t.indexOf("<")>-1?mr(e||t).replace(/<.*?>/g,""):r.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),r.v=(rs(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),r.v!==r.v?r.v=mr(t):r.v<60&&(r.v=r.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":r.v===void 0&&(r.v=+t),r.t||(r.t="n");break;case"Error":r.t="e",r.v=P8[t],A.cellText!==!1&&(r.w=t);break;default:t==""&&e==""?r.t="z":(r.t="s",r.v=mI(e||t));break}if(d0e(r,d,A),A.cellFormula!==!1)if(r.Formula){var b=mr(r.Formula);b.charCodeAt(0)==61&&(b=b.slice(1)),r.f=G0(b,s),delete r.Formula,r.ArrayRange=="RC"?r.F=G0("RC:RC",s):r.ArrayRange&&(r.F=G0(r.ArrayRange,s),l.push([pr(r.F),r.F]))}else for(w=0;w<l.length;++w)s.r>=l[w][0].s.r&&s.r<=l[w][0].e.r&&s.c>=l[w][0].s.c&&s.c<=l[w][0].e.c&&(r.F=l[w][1]);A.cellStyles&&(g.forEach(function(E){!p.patternType&&E.patternType&&(p.patternType=E.patternType)}),r.s=p),r.StyleID!==void 0&&(r.ixfe=r.StyleID)}function m0e(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function lC(t,e){var n=e||{};_m();var r=Mp(nS(t));(n.type=="binary"||n.type=="array"||n.type=="base64")&&(r=Kr(r));var s=r.slice(0,1024).toLowerCase(),a=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var i=ss(n);return i.type="string",om.to_workbook(r,i)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(tt){s.indexOf("<"+tt)>=0&&(a=!0)}),a)return eme(r,n);dg={"General Number":"General","General Date":gn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":gn[15],"Short Date":gn[14],"Long Time":gn[19],"Medium Time":gn[18],"Short Time":gn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:gn[2],Standard:gn[4],Percent:gn[10],Scientific:gn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],A,d={},h=[],p=n.dense?[]:{},g="",w={},b={},E=nc('<Data ss:Type="String">'),B=0,I=0,k=0,F={s:{r:2e6,c:2e6},e:{r:0,c:0}},D={},P={},S="",N=0,T=[],V={},M={},U=0,O=[],G=[],ie={},K=[],q,se=!1,Z=[],X=[],de={},j=0,W=0,J={Sheets:[],WBProps:{date1904:!1}},ne={};Rg.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"");for(var oe="";o=Rg.exec(r);)switch(o[3]=(oe=o[3]).toLowerCase()){case"data":if(oe=="data"){if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?h0e(r.slice(B,o.index),S,E,l[l.length-1][0]=="comment"?ie:w,{c:I,r:k},D,K[I],b,Z,n):(S="",E=nc(o[0]),B=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(G.length>0&&(w.c=G),(!n.sheetRows||n.sheetRows>k)&&w.v!==void 0&&(n.dense?(p[k]||(p[k]=[]),p[k][I]=w):p[xs(I)+Ys(k)]=w),w.HRef&&(w.l={Target:mr(w.HRef)},w.HRefScreenTip&&(w.l.Tooltip=w.HRefScreenTip),delete w.HRef,delete w.HRefScreenTip),(w.MergeAcross||w.MergeDown)&&(j=I+(parseInt(w.MergeAcross,10)|0),W=k+(parseInt(w.MergeDown,10)|0),T.push({s:{c:I,r:k},e:{c:j,r:W}})),!n.sheetStubs)w.MergeAcross?I=j+1:++I;else if(w.MergeAcross||w.MergeDown){for(var ue=I;ue<=j;++ue)for(var me=k;me<=W;++me)(ue>I||me>k)&&(n.dense?(p[me]||(p[me]=[]),p[me][ue]={t:"z"}):p[xs(ue)+Ys(me)]={t:"z"});I=j+1}else++I;else w=c0e(o[0]),w.Index&&(I=+w.Index-1),I<F.s.c&&(F.s.c=I),I>F.e.c&&(F.e.c=I),o[0].slice(-2)==="/>"&&++I,G=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(k<F.s.r&&(F.s.r=k),k>F.e.r&&(F.e.r=k),o[0].slice(-2)==="/>"&&(b=nc(o[0]),b.Index&&(k=+b.Index-1)),I=0,++k):(b=nc(o[0]),b.Index&&(k=+b.Index-1),de={},(b.AutoFitHeight=="0"||b.Height)&&(de.hpx=parseInt(b.Height,10),de.hpt=Pg(de.hpx),X[k]=de),b.Hidden=="1"&&(de.hidden=!0,X[k]=de));break;case"worksheet":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"));h.push(g),F.s.r<=F.e.r&&F.s.c<=F.e.c&&(p["!ref"]=Fn(F),n.sheetRows&&n.sheetRows<=F.e.r&&(p["!fullref"]=p["!ref"],F.e.r=n.sheetRows-1,p["!ref"]=Fn(F))),T.length&&(p["!merges"]=T),K.length>0&&(p["!cols"]=K),X.length>0&&(p["!rows"]=X),d[g]=p}else F={s:{r:2e6,c:2e6},e:{r:0,c:0}},k=I=0,l.push([o[3],!1]),A=nc(o[0]),g=mr(A.Name),p=n.dense?[]:{},T=[],Z=[],X=[],ne={name:g,Hidden:0},J.Sheets.push(ne);break;case"table":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),K=[],se=!1}break;case"style":o[1]==="/"?f0e(D,P,n):P=nc(o[0]);break;case"numberformat":P.nf=mr(nc(o[0]).Format||"General"),dg[P.nf]&&(P.nf=dg[P.nf]);for(var ge=0;ge!=392&&gn[ge]!=P.nf;++ge);if(ge==392){for(ge=57;ge!=392;++ge)if(gn[ge]==null){iu(P.nf,ge);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(q=nc(o[0]),q.Hidden&&(q.hidden=!0,delete q.Hidden),q.Width&&(q.wpx=parseInt(q.Width,10)),!se&&q.wpx>10){se=!0,Ti=xM;for(var ke=0;ke<K.length;++ke)K[ke]&&qd(K[ke])}se&&qd(q),K[q.Index-1||K.length]=q;for(var ve=0;ve<+q.Span;++ve)K[K.length]=ss(q);break;case"namedrange":if(o[1]==="/")break;J.Names||(J.Names=[]);var ae=En(o[0]),Re={Name:ae.Name,Ref:G0(ae.RefersTo.slice(1),{r:0,c:0})};J.Sheets.length>0&&(Re.Sheet=J.Sheets.length-1),J.Names.push(Re);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?S+=r.slice(N,o.index):N=o.index+o[0].length;break;case"interior":if(!n.cellStyles)break;P.Interior=nc(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?jie(V,oe,r.slice(U,o.index)):U=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"));m0e(ie),G.push(ie)}else l.push([o[3],!1]),A=nc(o[0]),ie={a:A.Author};break;case"autofilter":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Je=nc(o[0]);p["!autofilter"]={ref:G0(Je.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return rF(r,n);var De=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:De=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:De=!1}break;case"excelworkbook":switch(o[3]){case"date1904":J.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:De=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:De=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(r.slice(U,o.index)){case"SheetHidden":ne.Hidden=1;break;case"SheetVeryHidden":ne.Hidden=2;break}else U=o.index+o[0].length;break;case"header":p["!margins"]||Kf(p["!margins"]={},"xlml"),isNaN(+En(o[0]).Margin)||(p["!margins"].header=+En(o[0]).Margin);break;case"footer":p["!margins"]||Kf(p["!margins"]={},"xlml"),isNaN(+En(o[0]).Margin)||(p["!margins"].footer=+En(o[0]).Margin);break;case"pagemargins":var Ee=En(o[0]);p["!margins"]||Kf(p["!margins"]={},"xlml"),isNaN(+Ee.Top)||(p["!margins"].top=+Ee.Top),isNaN(+Ee.Left)||(p["!margins"].left=+Ee.Left),isNaN(+Ee.Right)||(p["!margins"].right=+Ee.Right),isNaN(+Ee.Bottom)||(p["!margins"].bottom=+Ee.Bottom);break;case"displayrighttoleft":J.Views||(J.Views=[]),J.Views[0]||(J.Views[0]={}),J.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:De=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:De=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:De=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:De=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:De=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:De=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:De=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:De=!1}break;case"smarttags":break;default:De=!1;break}if(De||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?u0e(M,oe,O,r.slice(U,o.index)):(O=o,U=o.index+o[0].length);break}if(n.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var Ge={};return!n.bookSheets&&!n.bookProps&&(Ge.Sheets=d),Ge.SheetNames=h,Ge.Workbook=J,Ge.SSF=ss(gn),Ge.Props=V,Ge.Custprops=M,Ge}function A_(t,e){switch(SS(e=e||{}),e.type||"base64"){case"base64":return lC(Vo(t),e);case"binary":case"buffer":case"file":return lC(t,e);case"array":return lC(Xd(t),e)}}function p0e(t,e){var n=[];return t.Props&&n.push(Oie(t.Props,e)),t.Custprops&&n.push(Qie(t.Props,t.Custprops)),n.join("")}function g0e(){return""}function x0e(t,e){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,s){var a=[];a.push(Rt("NumberFormat",null,{"ss:Format":Mr(gn[r.numFmtId])}));var i={"ss:ID":"s"+(21+s)};n.push(Rt("Style",a.join(""),i))}),Rt("Styles",n.join(""))}function zM(t){return Rt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+yS(t.Ref,{r:0,c:0})})}function v0e(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,n=[],r=0;r<e.length;++r){var s=e[r];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||n.push(zM(s)))}return Rt("Names",n.join(""))}function y0e(t,e,n,r){if(!t||!((r||{}).Workbook||{}).Names)return"";for(var s=r.Workbook.Names,a=[],i=0;i<s.length;++i){var o=s[i];o.Sheet==n&&(o.Name.match(/^_xlfn\./)||a.push(zM(o)))}return a.join("")}function w0e(t,e,n,r){if(!t)return"";var s=[];if(t["!margins"]&&(s.push("<PageSetup>"),t["!margins"].header&&s.push(Rt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&s.push(Rt("Footer",null,{"x:Margin":t["!margins"].footer})),s.push(Rt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),s.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)s.push(Rt("Visible",r.Workbook.Sheets[n].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<n&&!(r.Workbook.Sheets[a]&&!r.Workbook.Sheets[a].Hidden);++a);a==n&&s.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),t["!protect"]&&(s.push(ei("ProtectContents","True")),t["!protect"].objects&&s.push(ei("ProtectObjects","True")),t["!protect"].scenarios&&s.push(ei("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?s.push(ei("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&s.push(ei("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&s.push("<"+i[1]+"/>")})),s.length==0?"":Rt("WorksheetOptions",s.join(""),{xmlns:Mo.x})}function b0e(t){return t.map(function(e){var n=Vae(e.t||""),r=Rt("ss:Data",n,{xmlns:"http://www.w3.org/TR/REC-html40"});return Rt("Comment",r,{"ss:Author":e.a})}).join("")}function C0e(t,e,n,r,s,a,i){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+Mr(yS(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var l=vs(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=Mr(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=Mr(t.l.Tooltip))),n["!merges"])for(var A=n["!merges"],d=0;d!=A.length;++d)A[d].s.c!=i.c||A[d].s.r!=i.r||(A[d].e.c>A[d].s.c&&(o["ss:MergeAcross"]=A[d].e.c-A[d].s.c),A[d].e.r>A[d].s.r&&(o["ss:MergeDown"]=A[d].e.r-A[d].s.r));var h="",p="";switch(t.t){case"z":if(!r.sheetStubs)return"";break;case"n":h="Number",p=String(t.v);break;case"b":h="Boolean",p=t.v?"1":"0";break;case"e":h="Error",p=wu[t.v];break;case"d":h="DateTime",p=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||gn[14]);break;case"s":h="String",p=Hae(t.v||"");break}var g=ef(r.cellXfs,t,r);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=i.c+1;var w=t.v!=null?p:"",b=t.t=="z"?"":'<Data ss:Type="'+h+'">'+w+"</Data>";return(t.c||[]).length>0&&(b+=b0e(t.c)),Rt("Cell",b,o)}function E0e(t,e){var n='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=lm(e.hpt)),e.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(n+=' ss:Hidden="1"')),n+">"}function _0e(t,e,n,r){if(!t["!ref"])return"";var s=pr(t["!ref"]),a=t["!merges"]||[],i=0,o=[];t["!cols"]&&t["!cols"].forEach(function(E,B){qd(E);var I=!!E.width,k=My(B,E),F={"ss:Index":B+1};I&&(F["ss:Width"]=Lg(k.width)),E.hidden&&(F["ss:Hidden"]="1"),o.push(Rt("Column",null,F))});for(var l=Array.isArray(t),A=s.s.r;A<=s.e.r;++A){for(var d=[E0e(A,(t["!rows"]||[])[A])],h=s.s.c;h<=s.e.c;++h){var p=!1;for(i=0;i!=a.length;++i)if(!(a[i].s.c>h)&&!(a[i].s.r>A)&&!(a[i].e.c<h)&&!(a[i].e.r<A)){(a[i].s.c!=h||a[i].s.r!=A)&&(p=!0);break}if(!p){var g={r:A,c:h},w=wn(g),b=l?(t[A]||[])[h]:t[w];d.push(C0e(b,w,t,e,n,r,g))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function S0e(t,e,n){var r=[],s=n.SheetNames[t],a=n.Sheets[s],i=a?y0e(a,e,t,n):"";return i.length>0&&r.push("<Names>"+i+"</Names>"),i=a?_0e(a,e,t,n):"",i.length>0&&r.push("<Table>"+i+"</Table>"),r.push(w0e(a,e,t,n)),r.join("")}function T0e(t,e){e||(e={}),t.SSF||(t.SSF=ss(gn)),t.SSF&&(_m(),ky(t.SSF),e.revssf=Fy(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],ef(e.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(p0e(t,e)),n.push(g0e()),n.push(""),n.push("");for(var r=0;r<t.SheetNames.length;++r)n.push(Rt("Worksheet",S0e(r,e,t),{"ss:Name":Mr(t.SheetNames[r])}));return n[2]=x0e(t,e),n[3]=v0e(t),Xs+Rt("Workbook",n.join(""),{xmlns:Mo.ss,"xmlns:o":Mo.o,"xmlns:x":Mo.x,"xmlns:ss":Mo.ss,"xmlns:dt":Mo.dt,"xmlns:html":Mo.html})}function B0e(t){var e={},n=t.content;if(n.l=28,e.AnsiUserType=n.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=vie(n),n.length-n.l<=4)return e;var r=n.read_shift(4);if(r==0||r>40||(n.l-=4,e.Reserved1=n.read_shift(0,"lpstr-ansi"),n.length-n.l<=4)||(r=n.read_shift(4),r!==1907505652)||(e.UnicodeClipboardFormat=yie(n),r=n.read_shift(4),r==0||r>40))return e;n.l-=4,e.Reserved2=n.read_shift(0,"lpwstr")}var N0e=[60,1084,2066,2165,2175];function k0e(t,e,n,r,s){var a=r,i=[],o=n.slice(n.l,n.l+a);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}i.push(o),n.l+=a;for(var l=ru(n,n.l),A=u_[l],d=0;A!=null&&N0e.indexOf(l)>-1;)a=ru(n,n.l+2),d=n.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=n.slice(d,n.l+4+a),i.push(o),n.l+=4+a,A=u_[l=ru(n,n.l)];var h=Oa(i);Za(h,0);var p=0;h.lens=[];for(var g=0;g<i.length;++g)h.lens.push(p),p+=i[g].length;if(h.length<r)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+h.length+" < "+r;return e.f(h,h.length,s)}function Yc(t,e,n){if(t.t!=="z"&&t.XF){var r=0;try{r=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=gn[r])}catch(a){if(e.WTF)throw a}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||wu[t.v]:r===0||r=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=kg(t.v):t.w=th(t.v):t.w=Nl(r,t.v,{date1904:!!n,dateNF:e&&e.dateNF})}catch(a){if(e.WTF)throw a}if(e.cellDates&&r&&t.t=="n"&&Em(gn[r]||String(r))){var s=Df(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function K1(t,e,n){return{v:t,ixfe:e,t:n}}function I0e(t,e){var n={opts:{}},r={},s=e.dense?[]:{},a={},i={},o=null,l=[],A="",d={},h,p="",g,w,b,E,B={},I=[],k,F,D=[],P=[],S={Sheets:[],WBProps:{date1904:!1},Views:[{}]},N={},T=function(kt){return kt<8?Vf[kt]:kt<64&&P[kt-8]||Vf[kt]},V=function(kt,gt,xn){var Wt=gt.XF.data;if(!(!Wt||!Wt.patternType||!xn||!xn.cellStyles)){gt.s={},gt.s.patternType=Wt.patternType;var rr;(rr=Ug(T(Wt.icvFore)))&&(gt.s.fgColor={rgb:rr}),(rr=Ug(T(Wt.icvBack)))&&(gt.s.bgColor={rgb:rr})}},M=function(kt,gt,xn){if(!(de>1)&&!(xn.sheetRows&&kt.r>=xn.sheetRows)){if(xn.cellStyles&&gt.XF&&gt.XF.data&&V(kt,gt,xn),delete gt.ixfe,delete gt.XF,h=kt,p=wn(kt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),kt.r<i.s.r&&(i.s.r=kt.r),kt.c<i.s.c&&(i.s.c=kt.c),kt.r+1>i.e.r&&(i.e.r=kt.r+1),kt.c+1>i.e.c&&(i.e.c=kt.c+1),xn.cellFormula&&gt.f){for(var Wt=0;Wt<I.length;++Wt)if(!(I[Wt][0].s.c>kt.c||I[Wt][0].s.r>kt.r)&&!(I[Wt][0].e.c<kt.c||I[Wt][0].e.r<kt.r)){gt.F=Fn(I[Wt][0]),(I[Wt][0].s.c!=kt.c||I[Wt][0].s.r!=kt.r)&&delete gt.f,gt.f&&(gt.f=""+Ei(I[Wt][1],i,kt,Z,U));break}}xn.dense?(s[kt.r]||(s[kt.r]=[]),s[kt.r][kt.c]=gt):s[p]=gt}},U={enc:!1,sbcch:0,snames:[],sharedf:B,arrayf:I,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(U.password=e.password);var O,G=[],ie=[],K=[],q=[],se=!1,Z=[];Z.SheetNames=U.snames,Z.sharedf=U.sharedf,Z.arrayf=U.arrayf,Z.names=[],Z.XTI=[];var X=0,de=0,j=0,W=[],J=[],ne;U.codepage=1200,cc(1200);for(var oe=!1;t.l<t.length-1;){var ue=t.l,me=t.read_shift(2);if(me===0&&X===10)break;var ge=t.l===t.length?0:t.read_shift(2),ke=u_[me];if(ke&&ke.f){if(e.bookSheets&&X===133&&me!==133)break;if(X=me,ke.r===2||ke.r==12){var ve=t.read_shift(2);if(ge-=2,!U.enc&&ve!==me&&((ve&255)<<8|ve>>8)!==me)throw new Error("rt mismatch: "+ve+"!="+me);ke.r==12&&(t.l+=10,ge-=10)}var ae={};if(me===10?ae=ke.f(t,ge,U):ae=k0e(me,ke,t,ge,U),de==0&&[9,521,1033,2057].indexOf(X)===-1)continue;switch(me){case 34:n.opts.Date1904=S.WBProps.date1904=ae;break;case 134:n.opts.WriteProtect=!0;break;case 47:if(U.enc||(t.l=0),U.enc=ae,!e.password)throw new Error("File is password-protected");if(ae.valid==null)throw new Error("Encryption scheme unsupported");if(!ae.valid)throw new Error("Password is incorrect");break;case 92:U.lastuser=ae;break;case 66:var Re=Number(ae);switch(Re){case 21010:Re=1200;break;case 32768:Re=1e4;break;case 32769:Re=1252;break}cc(U.codepage=Re),oe=!0;break;case 317:U.rrtabid=ae;break;case 25:U.winlocked=ae;break;case 439:n.opts.RefreshAll=ae;break;case 12:n.opts.CalcCount=ae;break;case 16:n.opts.CalcDelta=ae;break;case 17:n.opts.CalcIter=ae;break;case 13:n.opts.CalcMode=ae;break;case 14:n.opts.CalcPrecision=ae;break;case 95:n.opts.CalcSaveRecalc=ae;break;case 15:U.CalcRefMode=ae;break;case 2211:n.opts.FullCalc=ae;break;case 129:ae.fDialog&&(s["!type"]="dialog"),ae.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),ae.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:D.push(ae);break;case 430:Z.push([ae]),Z[Z.length-1].XTI=[];break;case 35:case 547:Z[Z.length-1].push(ae);break;case 24:case 536:ne={Name:ae.Name,Ref:Ei(ae.rgce,i,null,Z,U)},ae.itab>0&&(ne.Sheet=ae.itab-1),Z.names.push(ne),Z[0]||(Z[0]=[],Z[0].XTI=[]),Z[Z.length-1].push(ae),ae.Name=="_xlnm._FilterDatabase"&&ae.itab>0&&ae.rgce&&ae.rgce[0]&&ae.rgce[0][0]&&ae.rgce[0][0][0]=="PtgArea3d"&&(J[ae.itab-1]={ref:Fn(ae.rgce[0][0][1][2])});break;case 22:U.ExternCount=ae;break;case 23:Z.length==0&&(Z[0]=[],Z[0].XTI=[]),Z[Z.length-1].XTI=Z[Z.length-1].XTI.concat(ae),Z.XTI=Z.XTI.concat(ae);break;case 2196:if(U.biff<8)break;ne!=null&&(ne.Comment=ae[1]);break;case 18:s["!protect"]=ae;break;case 19:ae!==0&&U.WTF&&console.error("Password verifier: "+ae);break;case 133:a[ae.pos]=ae,U.snames.push(ae.name);break;case 10:{if(--de)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,s["!ref"]=Fn(i),e.sheetRows&&e.sheetRows<=i.e.r){var Je=i.e.r;i.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=Fn(i),i.e.r=Je}i.e.r++,i.e.c++}G.length>0&&(s["!merges"]=G),ie.length>0&&(s["!objects"]=ie),K.length>0&&(s["!cols"]=K),q.length>0&&(s["!rows"]=q),S.Sheets.push(N)}A===""?d=s:r[A]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(U.biff===8&&(U.biff={9:2,521:3,1033:4}[me]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ae.BIFFVer]||8),U.biffguess=ae.BIFFVer==0,ae.BIFFVer==0&&ae.dt==4096&&(U.biff=5,oe=!0,cc(U.codepage=28591)),U.biff==8&&ae.BIFFVer==0&&ae.dt==16&&(U.biff=2),de++)break;if(s=e.dense?[]:{},U.biff<8&&!oe&&(oe=!0,cc(U.codepage=e.codepage||1252)),U.biff<5||ae.BIFFVer==0&&ae.dt==4096){A===""&&(A="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var De={pos:t.l-ge,name:A};a[De.pos]=De,U.snames.push(A)}else A=(a[ue]||{name:""}).name;ae.dt==32&&(s["!type"]="chart"),ae.dt==64&&(s["!type"]="macro"),G=[],ie=[],U.arrayf=I=[],K=[],q=[],se=!1,N={Hidden:(a[ue]||{hs:0}).hs,name:A}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[ae.r]||[])[ae.c]:s[wn({c:ae.c,r:ae.r})])&&++ae.c,k={ixfe:ae.ixfe,XF:D[ae.ixfe]||{},v:ae.val,t:"n"},j>0&&(k.z=W[k.ixfe>>8&63]),Yc(k,e,n.opts.Date1904),M({c:ae.c,r:ae.r},k,e);break;case 5:case 517:k={ixfe:ae.ixfe,XF:D[ae.ixfe],v:ae.val,t:ae.t},j>0&&(k.z=W[k.ixfe>>8&63]),Yc(k,e,n.opts.Date1904),M({c:ae.c,r:ae.r},k,e);break;case 638:k={ixfe:ae.ixfe,XF:D[ae.ixfe],v:ae.rknum,t:"n"},j>0&&(k.z=W[k.ixfe>>8&63]),Yc(k,e,n.opts.Date1904),M({c:ae.c,r:ae.r},k,e);break;case 189:for(var Ee=ae.c;Ee<=ae.C;++Ee){var Ge=ae.rkrec[Ee-ae.c][0];k={ixfe:Ge,XF:D[Ge],v:ae.rkrec[Ee-ae.c][1],t:"n"},j>0&&(k.z=W[k.ixfe>>8&63]),Yc(k,e,n.opts.Date1904),M({c:Ee,r:ae.r},k,e)}break;case 6:case 518:case 1030:{if(ae.val=="String"){o=ae;break}if(k=K1(ae.val,ae.cell.ixfe,ae.tt),k.XF=D[k.ixfe],e.cellFormula){var tt=ae.formula;if(tt&&tt[0]&&tt[0][0]&&tt[0][0][0]=="PtgExp"){var it=tt[0][0][1][0],mt=tt[0][0][1][1],Ct=wn({r:it,c:mt});B[Ct]?k.f=""+Ei(ae.formula,i,ae.cell,Z,U):k.F=((e.dense?(s[it]||[])[mt]:s[Ct])||{}).F}else k.f=""+Ei(ae.formula,i,ae.cell,Z,U)}j>0&&(k.z=W[k.ixfe>>8&63]),Yc(k,e,n.opts.Date1904),M(ae.cell,k,e),o=ae}break;case 7:case 519:if(o)o.val=ae,k=K1(ae,o.cell.ixfe,"s"),k.XF=D[k.ixfe],e.cellFormula&&(k.f=""+Ei(o.formula,i,o.cell,Z,U)),j>0&&(k.z=W[k.ixfe>>8&63]),Yc(k,e,n.opts.Date1904),M(o.cell,k,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{I.push(ae);var At=wn(ae[0].s);if(g=e.dense?(s[ae[0].s.r]||[])[ae[0].s.c]:s[At],e.cellFormula&&g){if(!o||!At||!g)break;g.f=""+Ei(ae[1],i,ae[0],Z,U),g.F=Fn(ae[0])}}break;case 1212:{if(!e.cellFormula)break;if(p){if(!o)break;B[wn(o.cell)]=ae[0],g=e.dense?(s[o.cell.r]||[])[o.cell.c]:s[wn(o.cell)],(g||{}).f=""+Ei(ae[0],i,h,Z,U)}}break;case 253:k=K1(l[ae.isst].t,ae.ixfe,"s"),l[ae.isst].h&&(k.h=l[ae.isst].h),k.XF=D[k.ixfe],j>0&&(k.z=W[k.ixfe>>8&63]),Yc(k,e,n.opts.Date1904),M({c:ae.c,r:ae.r},k,e);break;case 513:e.sheetStubs&&(k={ixfe:ae.ixfe,XF:D[ae.ixfe],t:"z"},j>0&&(k.z=W[k.ixfe>>8&63]),Yc(k,e,n.opts.Date1904),M({c:ae.c,r:ae.r},k,e));break;case 190:if(e.sheetStubs)for(var Nt=ae.c;Nt<=ae.C;++Nt){var It=ae.ixfe[Nt-ae.c];k={ixfe:It,XF:D[It],t:"z"},j>0&&(k.z=W[k.ixfe>>8&63]),Yc(k,e,n.opts.Date1904),M({c:Nt,r:ae.r},k,e)}break;case 214:case 516:case 4:k=K1(ae.val,ae.ixfe,"s"),k.XF=D[k.ixfe],j>0&&(k.z=W[k.ixfe>>8&63]),Yc(k,e,n.opts.Date1904),M({c:ae.c,r:ae.r},k,e);break;case 0:case 512:de===1&&(i=ae);break;case 252:l=ae;break;case 1054:if(U.biff==4){W[j++]=ae[1];for(var qt=0;qt<j+163&&gn[qt]!=ae[1];++qt);qt>=163&&iu(ae[1],j+163)}else iu(ae[1],ae[0]);break;case 30:{W[j++]=ae;for(var Lt=0;Lt<j+163&&gn[Lt]!=ae;++Lt);Lt>=163&&iu(ae,j+163)}break;case 229:G=G.concat(ae);break;case 93:ie[ae.cmo[0]]=U.lastobj=ae;break;case 438:U.lastobj.TxO=ae;break;case 127:U.lastobj.ImData=ae;break;case 440:for(E=ae[0].s.r;E<=ae[0].e.r;++E)for(b=ae[0].s.c;b<=ae[0].e.c;++b)g=e.dense?(s[E]||[])[b]:s[wn({c:b,r:E})],g&&(g.l=ae[1]);break;case 2048:for(E=ae[0].s.r;E<=ae[0].e.r;++E)for(b=ae[0].s.c;b<=ae[0].e.c;++b)g=e.dense?(s[E]||[])[b]:s[wn({c:b,r:E})],g&&g.l&&(g.l.Tooltip=ae[1]);break;case 28:{if(U.biff<=5&&U.biff>=2)break;g=e.dense?(s[ae[0].r]||[])[ae[0].c]:s[wn(ae[0])];var Vt=ie[ae[2]];g||(e.dense?(s[ae[0].r]||(s[ae[0].r]=[]),g=s[ae[0].r][ae[0].c]={t:"z"}):g=s[wn(ae[0])]={t:"z"},i.e.r=Math.max(i.e.r,ae[0].r),i.s.r=Math.min(i.s.r,ae[0].r),i.e.c=Math.max(i.e.c,ae[0].c),i.s.c=Math.min(i.s.c,ae[0].c)),g.c||(g.c=[]),w={a:ae[1],t:Vt.TxO.t},g.c.push(w)}break;case 2173:xAe(D[ae.ixfe],ae.ext);break;case 125:{if(!U.cellStyles)break;for(;ae.e>=ae.s;)K[ae.e--]={width:ae.w/256,level:ae.level||0,hidden:!!(ae.flags&1)},se||(se=!0,gS(ae.w/256)),qd(K[ae.e+1])}break;case 520:{var Yt={};ae.level!=null&&(q[ae.r]=Yt,Yt.level=ae.level),ae.hidden&&(q[ae.r]=Yt,Yt.hidden=!0),ae.hpt&&(q[ae.r]=Yt,Yt.hpt=ae.hpt,Yt.hpx=lm(ae.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Kf(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[me]]=ae;break;case 161:s["!margins"]||Kf(s["!margins"]={}),s["!margins"].header=ae.header,s["!margins"].footer=ae.footer;break;case 574:ae.RTL&&(S.Views[0].RTL=!0);break;case 146:P=ae;break;case 2198:O=ae;break;case 140:F=ae;break;case 442:A?N.CodeName=ae||N.name:S.WBProps.CodeName=ae||"ThisWorkbook";break}}else ke||console.error("Missing Info for XLS Record 0x"+me.toString(16)),t.l+=ge}return n.SheetNames=Ds(a).sort(function(Mt,kt){return Number(Mt)-Number(kt)}).map(function(Mt){return a[Mt].name}),e.bookSheets||(n.Sheets=r),!n.SheetNames.length&&d["!ref"]?(n.SheetNames.push("Sheet1"),n.Sheets&&(n.Sheets.Sheet1=d)):n.Preamble=d,n.Sheets&&J.forEach(function(Mt,kt){n.Sheets[n.SheetNames[kt]]["!autofilter"]=Mt}),n.Strings=l,n.SSF=ss(gn),U.enc&&(n.Encryption=U.enc),O&&(n.Themes=O),n.Metadata={},F!==void 0&&(n.Metadata.Country=F),Z.names.length>0&&(S.Names=Z.names),n.Workbook=S,n}var fg={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function F0e(t,e,n){var r=ln.find(t,"/!DocumentSummaryInformation");if(r&&r.size>0)try{var s=RI(r,s_,fg.DSI);for(var a in s)e[a]=s[a]}catch(A){if(n.WTF)throw A}var i=ln.find(t,"/!SummaryInformation");if(i&&i.size>0)try{var o=RI(i,a_,fg.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(A){if(n.WTF)throw A}e.HeadingPairs&&e.TitlesOfParts&&(G8(e.HeadingPairs,e.TitlesOfParts,e,n),delete e.HeadingPairs,delete e.TitlesOfParts)}function R0e(t,e){var n=[],r=[],s=[],a=0,i,o=cI(s_,"n"),l=cI(a_,"n");if(t.Props)for(i=Ds(t.Props),a=0;a<i.length;++a)(Object.prototype.hasOwnProperty.call(o,i[a])?n:Object.prototype.hasOwnProperty.call(l,i[a])?r:s).push([i[a],t.Props[i[a]]]);if(t.Custprops)for(i=Ds(t.Custprops),a=0;a<i.length;++a)Object.prototype.hasOwnProperty.call(t.Props||{},i[a])||(Object.prototype.hasOwnProperty.call(o,i[a])?n:Object.prototype.hasOwnProperty.call(l,i[a])?r:s).push([i[a],t.Custprops[i[a]]]);var A=[];for(a=0;a<s.length;++a)J8.indexOf(s[a][0])>-1||V8.indexOf(s[a][0])>-1||s[a][1]!=null&&A.push(s[a]);r.length&&ln.utils.cfb_add(e,"/SummaryInformation",DI(r,fg.SI,l,a_)),(n.length||A.length)&&ln.utils.cfb_add(e,"/DocumentSummaryInformation",DI(n,fg.DSI,o,s_,A.length?A:null,fg.UDI))}function KM(t,e){e||(e={}),SS(e),q5(),e.codepage&&K5(e.codepage);var n,r;if(t.FullPaths){if(ln.find(t,"/encryption"))throw new Error("File is password-protected");n=ln.find(t,"!CompObj"),r=ln.find(t,"/Workbook")||ln.find(t,"/Book")}else{switch(e.type){case"base64":t=jo(Vo(t));break;case"binary":t=jo(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}Za(t,0),r={content:t}}var s,a;if(n&&B0e(n),e.bookProps&&!e.bookSheets)s={};else{var i=zn?"buffer":"array";if(r&&r.content)s=I0e(r.content,e);else if((a=ln.find(t,"PerfectOffice_MAIN"))&&a.content)s=zf.to_workbook(a.content,(e.type=i,e));else if((a=ln.find(t,"NativeContent_MAIN"))&&a.content)s=zf.to_workbook(a.content,(e.type=i,e));else throw(a=ln.find(t,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&ln.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=KAe(t))}var o={};return t.FullPaths&&F0e(t,o,e),s.Props=s.Custprops=o,e.bookFiles&&(s.cfb=t),s}function D0e(t,e){var n=e||{},r=ln.utils.cfb_new({root:"R"}),s="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":s="/Workbook",n.biff=8;break;case"biff5":s="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return ln.utils.cfb_add(r,s,qM(t,n)),n.biff==8&&(t.Props||t.Custprops)&&R0e(t,r),n.biff==8&&t.vbaraw&&qAe(r,ln.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),r}var jg={0:{f:sfe},1:{f:dfe},2:{f:Ife},3:{f:yfe},4:{f:pfe},5:{f:Bfe},6:{f:Lfe},7:{f:Efe},8:{f:Vfe},9:{f:Hfe},10:{f:Ofe},11:{f:Qfe},12:{f:hfe},13:{f:Rfe},14:{f:bfe},15:{f:xfe},16:{f:PM},17:{f:Pfe},18:{f:Sfe},19:{f:oS},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Phe},40:{},42:{},43:{f:Lce},44:{f:Dce},45:{f:jce},46:{f:Qce},47:{f:Oce},48:{},49:{f:oie},50:{},51:{f:wAe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:lM},62:{f:Ufe},63:{f:kAe},64:{f:ahe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ri,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:the},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Afe},148:{f:ofe,p:16},151:{f:$fe},152:{},153:{f:Uhe},154:{},155:{},156:{f:Rhe},157:{},158:{},159:{T:1,f:Jle},160:{T:-1},161:{T:1,f:xh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Gfe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:vAe},336:{T:-1},337:{f:EAe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:r_},357:{},358:{},359:{},360:{T:1},361:{},362:{f:oM},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Yfe},427:{f:Jfe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Zfe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:cfe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:qfe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:r_},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:QAe},633:{T:1},634:{T:-1},635:{T:1,f:jAe},636:{T:-1},637:{f:uie},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:bhe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:ihe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},u_={6:{f:iC},10:{f:ad},12:{f:Aa},13:{f:Aa},14:{f:Vs},15:{f:Vs},16:{f:Ni},17:{f:Vs},18:{f:Vs},19:{f:Aa},20:{f:OI},21:{f:OI},23:{f:oM},24:{f:HI},25:{f:Vs},26:{},27:{},28:{f:ile},29:{},34:{f:Vs},35:{f:QI},38:{f:Ni},39:{f:Ni},40:{f:Ni},41:{f:Ni},42:{f:Vs},43:{f:Vs},47:{f:xce},49:{f:Roe},51:{f:Aa},60:{},61:{f:Boe},64:{f:Vs},65:{f:Foe},66:{f:Aa},77:{},80:{},81:{},82:{},85:{f:Aa},89:{},90:{},91:{},92:{f:goe},93:{f:cle},94:{},95:{f:Vs},96:{},97:{},99:{f:Vs},125:{f:lM},128:{f:Woe},129:{f:voe},130:{f:Aa},131:{f:Vs},132:{f:Vs},133:{f:yoe},134:{},140:{f:gle},141:{f:Aa},144:{},146:{f:yle},151:{},152:{},153:{},154:{},155:{},156:{f:Aa},157:{},158:{},160:{f:Tle},161:{f:Cle},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Goe},190:{f:zoe},193:{f:ad},197:{},198:{},199:{},200:{},201:{},202:{f:Vs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Aa},220:{},221:{f:Vs},222:{},224:{f:qoe},225:{f:poe},226:{f:ad},227:{},229:{f:ole},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:boe},253:{f:Uoe},255:{f:Eoe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:X8},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Vs},353:{f:ad},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Zoe},431:{f:Vs},432:{},433:{},434:{},437:{},438:{f:dle},439:{f:Vs},440:{f:fle},441:{},442:{f:hx},443:{},444:{f:Aa},445:{},446:{},448:{f:ad},449:{f:Toe,r:2},450:{f:ad},512:{f:MI},513:{f:Sle},515:{f:Joe},516:{f:Moe},517:{f:jI},519:{f:Ble},520:{f:_oe},523:{},545:{f:VI},549:{f:LI},566:{},574:{f:koe},638:{f:Voe},659:{},1048:{},1054:{f:joe},1084:{},1212:{f:rle},2048:{f:mle},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:V1},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:ad},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:wle,r:12},2173:{f:gAe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Vs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:nle,r:12},2197:{},2198:{f:uAe,r:12},2199:{},2200:{},2201:{},2202:{f:sle,r:12},2203:{f:ad},2204:{},2205:{},2206:{},2207:{},2211:{f:Soe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Aa},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Ele},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:vle},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:MI},1:{},2:{f:Rle},3:{f:Ile},4:{f:kle},5:{f:jI},7:{f:Ule},8:{},9:{f:V1},11:{},22:{f:Aa},30:{f:Qoe},31:{},32:{},33:{f:VI},36:{},37:{f:LI},50:{f:Lle},62:{},52:{},67:{},68:{f:Aa},69:{},86:{},126:{},127:{f:Nle},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Mle},223:{},234:{},354:{},421:{},518:{f:iC},521:{f:V1},536:{f:HI},547:{f:QI},561:{},579:{},1030:{f:iC},1033:{f:V1},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Dt(t,e,n,r){var s=e;if(!isNaN(s)){var a=r||(n||[]).length||0,i=t.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&sS(n)&&t.push(n)}}function U0e(t,e,n,r){var s=(n||[]).length||0;if(s<=8224)return Dt(t,e,n,s);var a=e;if(!isNaN(a)){for(var i=n.parts||[],o=0,l=0,A=0;A+(i[o]||8224)<=8224;)A+=i[o]||8224,o++;var d=t.next(4);for(d.write_shift(2,a),d.write_shift(2,A),t.push(n.slice(l,l+A)),l+=A;l<s;){for(d=t.next(4),d.write_shift(2,60),A=0;A+(i[o]||8224)<=8224;)A+=i[o]||8224,o++;d.write_shift(2,A),t.push(n.slice(l,l+A)),l+=A}}}function xx(t,e,n){return t||(t=lt(7)),t.write_shift(2,e),t.write_shift(2,n),t.write_shift(2,0),t.write_shift(1,0),t}function L0e(t,e,n,r){var s=lt(9);return xx(s,t,e),Z8(n,r||"b",s),s}function M0e(t,e,n){var r=lt(8+2*n.length);return xx(r,t,e),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function P0e(t,e,n,r){if(e.v!=null)switch(e.t){case"d":case"n":var s=e.t=="d"?Ta(rs(e.v)):e.v;s==(s|0)&&s>=0&&s<65536?Dt(t,2,Dle(n,r,s)):Dt(t,3,Fle(n,r,s));return;case"b":case"e":Dt(t,5,L0e(n,r,e.v,e.t));return;case"s":case"str":Dt(t,4,M0e(n,r,(e.v||"").slice(0,255)));return}Dt(t,1,xx(null,n,r))}function j0e(t,e,n,r){var s=Array.isArray(e),a=pr(e["!ref"]||"A1"),i,o="",l=[];if(a.e.c>255||a.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=Fn(a)}for(var A=a.s.r;A<=a.e.r;++A){o=Ys(A);for(var d=a.s.c;d<=a.e.c;++d){A===a.s.r&&(l[d]=xs(d)),i=l[d]+o;var h=s?(e[A]||[])[d]:e[i];h&&P0e(t,h,A,d)}}}function O0e(t,e){for(var n=e||{},r=fo(),s=0,a=0;a<t.SheetNames.length;++a)t.SheetNames[a]==n.sheet&&(s=a);if(s==0&&n.sheet&&t.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return Dt(r,n.biff==4?1033:n.biff==3?521:9,hS(t,16,n)),j0e(r,t.Sheets[t.SheetNames[s]],s,n),Dt(r,10),r.end()}function Q0e(t,e,n){Dt(t,49,Doe({sz:12,name:"Arial"},n))}function H0e(t,e,n){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&Dt(t,1054,Ooe(s,e[s],n))})}function V0e(t,e){var n=lt(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),Dt(t,2151,n),n=lt(39),n.write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),sM(pr(e["!ref"]||"A1"),n),n.write_shift(4,4),Dt(t,2152,n)}function G0e(t,e){for(var n=0;n<16;++n)Dt(t,224,PI({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){Dt(t,224,PI(r,0,e))})}function z0e(t,e){for(var n=0;n<e["!links"].length;++n){var r=e["!links"][n];Dt(t,440,hle(r)),r[1].Tooltip&&Dt(t,2048,ple(r))}delete e["!links"]}function K0e(t,e){if(e){var n=0;e.forEach(function(r,s){++n<=256&&r&&Dt(t,125,ble(My(s,r),s))})}}function q0e(t,e,n,r,s){var a=16+ef(s.cellXfs,e,s);if(e.v==null&&!e.bf){Dt(t,513,ah(n,r,a));return}if(e.bf)Dt(t,6,vde(e,n,r,s,a));else switch(e.t){case"d":case"n":var i=e.t=="d"?Ta(rs(e.v)):e.v;Dt(t,515,Xoe(n,r,i,a));break;case"b":case"e":Dt(t,517,Yoe(n,r,e.v,a,s,e.t));break;case"s":case"str":if(s.bookSST){var o=bS(s.Strings,e.v,s.revStrings);Dt(t,253,Loe(n,r,o,a))}else Dt(t,516,Poe(n,r,(e.v||"").slice(0,255),a,s));break;default:Dt(t,513,ah(n,r,a))}}function W0e(t,e,n){var r=fo(),s=n.SheetNames[t],a=n.Sheets[s]||{},i=(n||{}).Workbook||{},o=(i.Sheets||[])[t]||{},l=Array.isArray(a),A=e.biff==8,d,h="",p=[],g=pr(a["!ref"]||"A1"),w=A?65536:16384;if(g.e.c>255||g.e.r>=w){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,w-1)}Dt(r,2057,hS(n,16,e)),Dt(r,13,yl(1)),Dt(r,12,yl(100)),Dt(r,15,Hi(!0)),Dt(r,17,Hi(!1)),Dt(r,16,rh(.001)),Dt(r,95,Hi(!0)),Dt(r,42,Hi(!1)),Dt(r,43,Hi(!1)),Dt(r,130,yl(1)),Dt(r,128,$oe()),Dt(r,131,Hi(!1)),Dt(r,132,Hi(!1)),A&&K0e(r,a["!cols"]),Dt(r,512,Hoe(g,e)),A&&(a["!links"]=[]);for(var b=g.s.r;b<=g.e.r;++b){h=Ys(b);for(var E=g.s.c;E<=g.e.c;++E){b===g.s.r&&(p[E]=xs(E)),d=p[E]+h;var B=l?(a[b]||[])[E]:a[d];B&&(q0e(r,B,b,E,e),A&&B.l&&a["!links"].push([d,B.l]))}}var I=o.CodeName||o.name||s;return A&&Dt(r,574,Ioe((i.Views||[])[0])),A&&(a["!merges"]||[]).length&&Dt(r,229,lle(a["!merges"])),A&&z0e(r,a),Dt(r,442,eM(I)),A&&V0e(r,a),Dt(r,10),r.end()}function $0e(t,e,n){var r=fo(),s=(t||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},o=n.biff==8,l=n.biff==5;if(Dt(r,2057,hS(t,5,n)),n.bookType=="xla"&&Dt(r,135),Dt(r,225,o?yl(1200):null),Dt(r,193,Yie(2)),l&&Dt(r,191),l&&Dt(r,192),Dt(r,226),Dt(r,92,xoe("SheetJS",n)),Dt(r,66,yl(o?1200:1252)),o&&Dt(r,353,yl(0)),o&&Dt(r,448),Dt(r,317,_le(t.SheetNames.length)),o&&t.vbaraw&&Dt(r,211),o&&t.vbaraw){var A=i.CodeName||"ThisWorkbook";Dt(r,442,eM(A))}Dt(r,156,yl(17)),Dt(r,25,Hi(!1)),Dt(r,18,Hi(!1)),Dt(r,19,yl(0)),o&&Dt(r,431,Hi(!1)),o&&Dt(r,444,yl(0)),Dt(r,61,Noe()),Dt(r,64,Hi(!1)),Dt(r,141,yl(0)),Dt(r,34,Hi(The(t)=="true")),Dt(r,14,Hi(!0)),o&&Dt(r,439,Hi(!1)),Dt(r,218,yl(0)),Q0e(r,t,n),H0e(r,t.SSF,n),G0e(r,n),o&&Dt(r,352,Hi(!1));var d=r.end(),h=fo();o&&Dt(h,140,xle()),o&&n.Strings&&U0e(h,252,Coe(n.Strings)),Dt(h,10);var p=h.end(),g=fo(),w=0,b=0;for(b=0;b<t.SheetNames.length;++b)w+=(o?12:11)+(o?2:1)*t.SheetNames[b].length;var E=d.length+w+p.length;for(b=0;b<t.SheetNames.length;++b){var B=a[b]||{};Dt(g,133,woe({pos:E,hs:B.Hidden||0,dt:0,name:t.SheetNames[b]},n)),E+=e[b].length}var I=g.end();if(w!=I.length)throw new Error("BS8 "+w+" != "+I.length);var k=[];return d.length&&k.push(d),I.length&&k.push(I),p.length&&k.push(p),Oa(k)}function Y0e(t,e){var n=e||{},r=[];t&&!t.SSF&&(t.SSF=ss(gn)),t&&t.SSF&&(_m(),ky(t.SSF),n.revssf=Fy(t.SSF),n.revssf[t.SSF[65535]]=0,n.ssf=t.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,TS(n),n.cellXfs=[],ef(n.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var s=0;s<t.SheetNames.length;++s)r[r.length]=W0e(s,n,t);return r.unshift($0e(t,r,n)),Oa(r)}function qM(t,e){for(var n=0;n<=t.SheetNames.length;++n){var r=t.Sheets[t.SheetNames[n]];if(!(!r||!r["!ref"])){var s=po(r["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}}var a=e||{};switch(a.biff||2){case 8:case 5:return Y0e(t,e);case 4:case 3:case 2:return O0e(t,e)}throw new Error("invalid type "+a.bookType+" for BIFF")}function ZI(t,e){var n=e||{},r=n.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=t.match(/<\/table/i),i=s.index,o=a&&a.index||t.length,l=Dae(t.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),A=-1,d=0,h=0,p=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},w=[];for(i=0;i<l.length;++i){var b=l[i].trim(),E=b.slice(0,3).toLowerCase();if(E=="<tr"){if(++A,n.sheetRows&&n.sheetRows<=A){--A;break}d=0;continue}if(!(E!="<td"&&E!="<th")){var B=b.split(/<\/t[dh]>/i);for(o=0;o<B.length;++o){var I=B[o].trim();if(I.match(/<t[dh]/i)){for(var k=I,F=0;k.charAt(0)=="<"&&(F=k.indexOf(">"))>-1;)k=k.slice(F+1);for(var D=0;D<w.length;++D){var P=w[D];P.s.c==d&&P.s.r<A&&A<=P.e.r&&(d=P.e.c+1,D=-1)}var S=En(I.slice(0,I.indexOf(">")));p=S.colspan?+S.colspan:1,((h=+S.rowspan)>1||p>1)&&w.push({s:{r:A,c:d},e:{r:A+(h||1)-1,c:d+p-1}});var N=S.t||S["data-t"]||"";if(!k.length){d+=p;continue}if(k=g8(k),g.s.r>A&&(g.s.r=A),g.e.r<A&&(g.e.r=A),g.s.c>d&&(g.s.c=d),g.e.c<d&&(g.e.c=d),!k.length){d+=p;continue}var T={t:"s",v:k};n.raw||!k.trim().length||N=="s"||(k==="TRUE"?T={t:"b",v:!0}:k==="FALSE"?T={t:"b",v:!1}:isNaN(uc(k))?isNaN(im(k).getDate())||(T={t:"d",v:rs(k)},n.cellDates||(T={t:"n",v:Ta(T.v)}),T.z=n.dateNF||gn[14]):T={t:"n",v:uc(k)}),n.dense?(r[A]||(r[A]=[]),r[A][d]=T):r[wn({r:A,c:d})]=T,d+=p}}}}return r["!ref"]=Fn(g),w.length&&(r["!merges"]=w),r}function J0e(t,e,n,r){for(var s=t["!merges"]||[],a=[],i=e.s.c;i<=e.e.c;++i){for(var o=0,l=0,A=0;A<s.length;++A)if(!(s[A].s.r>n||s[A].s.c>i)&&!(s[A].e.r<n||s[A].e.c<i)){if(s[A].s.r<n||s[A].s.c<i){o=-1;break}o=s[A].e.r-s[A].s.r+1,l=s[A].e.c-s[A].s.c+1;break}if(!(o<0)){var d=wn({r:n,c:i}),h=r.dense?(t[n]||[])[i]:t[d],p=h&&h.v!=null&&(h.h||tS(h.w||(fu(h),h.w)||""))||"",g={};o>1&&(g.rowspan=o),l>1&&(g.colspan=l),r.editable?p='<span contenteditable="true">'+p+"</span>":h&&(g["data-t"]=h&&h.t||"z",h.v!=null&&(g["data-v"]=h.v),h.z!=null&&(g["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+h.l.Target+'">'+p+"</a>")),g.id=(r.id||"sjs")+"-"+d,a.push(Rt("td",p,g))}}var w="<tr>";return w+a.join("")+"</tr>"}var X0e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Z0e="</body></html>";function eme(t,e){var n=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!n||n.length==0)throw new Error("Invalid HTML: could not find <table>");if(n.length==1)return Zd(ZI(n[0],e),e);var r=IS();return n.forEach(function(s,a){FS(r,ZI(s,e),"Sheet"+(a+1))}),r}function tme(t,e,n){var r=[];return r.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function WM(t,e){var n=e||{},r=n.header!=null?n.header:X0e,s=n.footer!=null?n.footer:Z0e,a=[r],i=po(t["!ref"]);n.dense=Array.isArray(t),a.push(tme(t,i,n));for(var o=i.s.r;o<=i.e.r;++o)a.push(J0e(t,i,o,n));return a.push("</table>"+s),a.join("")}function $M(t,e,n){var r=n||{},s=0,a=0;if(r.origin!=null)if(typeof r.origin=="number")s=r.origin;else{var i=typeof r.origin=="string"?vs(r.origin):r.origin;s=i.r,a=i.c}var o=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),A={s:{r:0,c:0},e:{r:s,c:a}};if(t["!ref"]){var d=po(t["!ref"]);A.s.r=Math.min(A.s.r,d.s.r),A.s.c=Math.min(A.s.c,d.s.c),A.e.r=Math.max(A.e.r,d.e.r),A.e.c=Math.max(A.e.c,d.e.c),s==-1&&(A.e.r=s=d.e.r+1)}var h=[],p=0,g=t["!rows"]||(t["!rows"]=[]),w=0,b=0,E=0,B=0,I=0,k=0;for(t["!cols"]||(t["!cols"]=[]);w<o.length&&b<l;++w){var F=o[w];if(eF(F)){if(r.display)continue;g[b]={hidden:!0}}var D=F.children;for(E=B=0;E<D.length;++E){var P=D[E];if(!(r.display&&eF(P))){var S=P.hasAttribute("data-v")?P.getAttribute("data-v"):P.hasAttribute("v")?P.getAttribute("v"):g8(P.innerHTML),N=P.getAttribute("data-z")||P.getAttribute("z");for(p=0;p<h.length;++p){var T=h[p];T.s.c==B+a&&T.s.r<b+s&&b+s<=T.e.r&&(B=T.e.c+1-a,p=-1)}k=+P.getAttribute("colspan")||1,((I=+P.getAttribute("rowspan")||1)>1||k>1)&&h.push({s:{r:b+s,c:B+a},e:{r:b+s+(I||1)-1,c:B+a+(k||1)-1}});var V={t:"s",v:S},M=P.getAttribute("data-t")||P.getAttribute("t")||"";S!=null&&(S.length==0?V.t=M||"z":r.raw||S.trim().length==0||M=="s"||(S==="TRUE"?V={t:"b",v:!0}:S==="FALSE"?V={t:"b",v:!1}:isNaN(uc(S))?isNaN(im(S).getDate())||(V={t:"d",v:rs(S)},r.cellDates||(V={t:"n",v:Ta(V.v)}),V.z=r.dateNF||gn[14]):V={t:"n",v:uc(S)})),V.z===void 0&&N!=null&&(V.z=N);var U="",O=P.getElementsByTagName("A");if(O&&O.length)for(var G=0;G<O.length&&!(O[G].hasAttribute("href")&&(U=O[G].getAttribute("href"),U.charAt(0)!="#"));++G);U&&U.charAt(0)!="#"&&(V.l={Target:U}),r.dense?(t[b+s]||(t[b+s]=[]),t[b+s][B+a]=V):t[wn({c:B+a,r:b+s})]=V,A.e.c<B+a&&(A.e.c=B+a),B+=k}}++b}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),A.e.r=Math.max(A.e.r,b-1+s),t["!ref"]=Fn(A),b>=l&&(t["!fullref"]=Fn((A.e.r=o.length-w+b-1+s,A))),t}function YM(t,e){var n=e||{},r=n.dense?[]:{};return $M(r,t,e)}function nme(t,e){return Zd(YM(t,e),e)}function eF(t){var e="",n=rme(t);return n&&(e=n(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function rme(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function sme(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(r,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),n=mr(e.replace(/<[^>]*>/g,""));return[n]}var tF={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function JM(t,e){var n=e||{},r=nS(t),s=[],a,i,o={name:""},l="",A=0,d,h,p={},g=[],w=n.dense?[]:{},b,E,B={value:""},I="",k=0,F=[],D=-1,P=-1,S={s:{r:1e6,c:1e7},e:{r:0,c:0}},N=0,T={},V=[],M={},U=0,O=0,G=[],ie=1,K=1,q=[],se={Names:[]},Z={},X=["",""],de=[],j={},W="",J=0,ne=!1,oe=!1,ue=0;for(Rg.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");b=Rg.exec(r);)switch(b[3]=b[3].replace(/_.*$/,"")){case"table":case"工作表":b[1]==="/"?(S.e.c>=S.s.c&&S.e.r>=S.s.r?w["!ref"]=Fn(S):w["!ref"]="A1:A1",n.sheetRows>0&&n.sheetRows<=S.e.r&&(w["!fullref"]=w["!ref"],S.e.r=n.sheetRows-1,w["!ref"]=Fn(S)),V.length&&(w["!merges"]=V),G.length&&(w["!rows"]=G),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),g.push(d.name),p[d.name]=w,oe=!1):b[0].charAt(b[0].length-2)!=="/"&&(d=En(b[0],!1),D=P=-1,S.s.r=S.s.c=1e7,S.e.r=S.e.c=0,w=n.dense?[]:{},V=[],G=[],oe=!0);break;case"table-row-group":b[1]==="/"?--N:++N;break;case"table-row":case"行":if(b[1]==="/"){D+=ie,ie=1;break}if(h=En(b[0],!1),h.行号?D=h.行号-1:D==-1&&(D=0),ie=+h["number-rows-repeated"]||1,ie<10)for(ue=0;ue<ie;++ue)N>0&&(G[D+ue]={level:N});P=-1;break;case"covered-table-cell":b[1]!=="/"&&++P,n.sheetStubs&&(n.dense?(w[D]||(w[D]=[]),w[D][P]={t:"z"}):w[wn({r:D,c:P})]={t:"z"}),I="",F=[];break;case"table-cell":case"数据":if(b[0].charAt(b[0].length-2)==="/")++P,B=En(b[0],!1),K=parseInt(B["number-columns-repeated"]||"1",10),E={t:"z",v:null},B.formula&&n.cellFormula!=!1&&(E.f=YI(mr(B.formula))),(B.数据类型||B["value-type"])=="string"&&(E.t="s",E.v=mr(B["string-value"]||""),n.dense?(w[D]||(w[D]=[]),w[D][P]=E):w[wn({r:D,c:P})]=E),P+=K-1;else if(b[1]!=="/"){++P,I="",k=0,F=[],K=1;var me=ie?D+ie-1:D;if(P>S.e.c&&(S.e.c=P),P<S.s.c&&(S.s.c=P),D<S.s.r&&(S.s.r=D),me>S.e.r&&(S.e.r=me),B=En(b[0],!1),de=[],j={},E={t:B.数据类型||B["value-type"],v:null},n.cellFormula)if(B.formula&&(B.formula=mr(B.formula)),B["number-matrix-columns-spanned"]&&B["number-matrix-rows-spanned"]&&(U=parseInt(B["number-matrix-rows-spanned"],10)||0,O=parseInt(B["number-matrix-columns-spanned"],10)||0,M={s:{r:D,c:P},e:{r:D+U-1,c:P+O-1}},E.F=Fn(M),q.push([M,E.F])),B.formula)E.f=YI(B.formula);else for(ue=0;ue<q.length;++ue)D>=q[ue][0].s.r&&D<=q[ue][0].e.r&&P>=q[ue][0].s.c&&P<=q[ue][0].e.c&&(E.F=q[ue][1]);switch((B["number-columns-spanned"]||B["number-rows-spanned"])&&(U=parseInt(B["number-rows-spanned"],10)||0,O=parseInt(B["number-columns-spanned"],10)||0,M={s:{r:D,c:P},e:{r:D+U-1,c:P+O-1}},V.push(M)),B["number-columns-repeated"]&&(K=parseInt(B["number-columns-repeated"],10)),E.t){case"boolean":E.t="b",E.v=ts(B["boolean-value"]);break;case"float":E.t="n",E.v=parseFloat(B.value);break;case"percentage":E.t="n",E.v=parseFloat(B.value);break;case"currency":E.t="n",E.v=parseFloat(B.value);break;case"date":E.t="d",E.v=rs(B["date-value"]),n.cellDates||(E.t="n",E.v=Ta(E.v)),E.z="m/d/yy";break;case"time":E.t="n",E.v=Iae(B["time-value"])/86400,n.cellDates&&(E.t="d",E.v=Ry(E.v)),E.z="HH:MM:SS";break;case"number":E.t="n",E.v=parseFloat(B.数据数值);break;default:if(E.t==="string"||E.t==="text"||!E.t)E.t="s",B["string-value"]!=null&&(I=mr(B["string-value"]),F=[]);else throw new Error("Unsupported value type "+E.t)}}else{if(ne=!1,E.t==="s"&&(E.v=I||"",F.length&&(E.R=F),ne=k==0),Z.Target&&(E.l=Z),de.length>0&&(E.c=de,de=[]),I&&n.cellText!==!1&&(E.w=I),ne&&(E.t="z",delete E.v),(!ne||n.sheetStubs)&&!(n.sheetRows&&n.sheetRows<=D))for(var ge=0;ge<ie;++ge){if(K=parseInt(B["number-columns-repeated"]||"1",10),n.dense)for(w[D+ge]||(w[D+ge]=[]),w[D+ge][P]=ge==0?E:ss(E);--K>0;)w[D+ge][P+K]=ss(E);else for(w[wn({r:D+ge,c:P})]=E;--K>0;)w[wn({r:D+ge,c:P+K})]=ss(E);S.e.c<=P&&(S.e.c=P)}K=parseInt(B["number-columns-repeated"]||"1",10),P+=K-1,K=0,E={},I="",F=[]}Z={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(b[1]==="/"){if((a=s.pop())[0]!==b[3])throw"Bad state: "+a}else b[0].charAt(b[0].length-2)!=="/"&&s.push([b[3],!0]);break;case"annotation":if(b[1]==="/"){if((a=s.pop())[0]!==b[3])throw"Bad state: "+a;j.t=I,F.length&&(j.R=F),j.a=W,de.push(j)}else b[0].charAt(b[0].length-2)!=="/"&&s.push([b[3],!1]);W="",J=0,I="",k=0,F=[];break;case"creator":b[1]==="/"?W=r.slice(J,b.index):J=b.index+b[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(b[1]==="/"){if((a=s.pop())[0]!==b[3])throw"Bad state: "+a}else b[0].charAt(b[0].length-2)!=="/"&&s.push([b[3],!1]);I="",k=0,F=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(b[1]==="/"){if(T[o.name]=l,(a=s.pop())[0]!==b[3])throw"Bad state: "+a}else b[0].charAt(b[0].length-2)!=="/"&&(l="",o=En(b[0],!1),s.push([b[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":i=En(b[0],!1),l+=tF[b[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":i=En(b[0],!1),l+=tF[b[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(b[0].slice(-2)==="/>")break;if(b[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=r.slice(A,b.index);break}else A=b.index+b[0].length;break;case"named-range":i=En(b[0],!1),X=oC(i["cell-range-address"]);var ke={Name:i.name,Ref:X[0]+"!"+X[1]};oe&&(ke.Sheet=g.length),se.Names.push(ke);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(b[1]==="/"&&(!B||!B["string-value"])){var ve=sme(r.slice(k,b.index));I=(I.length>0?I+`
`:"")+ve[0]}else En(b[0],!1),k=b.index+b[0].length;break;case"s":break;case"database-range":if(b[1]==="/")break;try{X=oC(En(b[0])["target-range-address"]),p[X[0]]["!autofilter"]={ref:X[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(b[1]!=="/"){if(Z=En(b[0],!1),!Z.href)break;Z.Target=mr(Z.href),delete Z.href,Z.Target.charAt(0)=="#"&&Z.Target.indexOf(".")>-1?(X=oC(Z.Target.slice(1)),Z.Target="#"+X[0]+"!"+X[1]):Z.Target.match(/^\.\.[\\\/]/)&&(Z.Target=Z.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(b[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(n.WTF)throw new Error(b)}}var ae={Sheets:p,SheetNames:g,Workbook:se};return n.bookSheets&&delete ae.Sheets,ae}function nF(t,e){e=e||{},xl(t,"META-INF/manifest.xml")&&Iie(ca(t,"META-INF/manifest.xml"),e);var n=Oo(t,"content.xml");if(!n)throw new Error("Missing content.xml in ODS / UOF file");var r=JM(Kr(n),e);return xl(t,"meta.xml")&&(r.Props=Q8(ca(t,"meta.xml"))),r}function rF(t,e){return JM(t,e)}var ame=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Fg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Xs+e}}(),sF=function(){var t=function(a){return Mr(a).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,n=`          <table:covered-table-cell/>
`,r=function(a,i,o){var l=[];l.push('      <table:table table:name="'+Mr(i.SheetNames[o])+`" table:style-name="ta1">
`);var A=0,d=0,h=po(a["!ref"]||"A1"),p=a["!merges"]||[],g=0,w=Array.isArray(a);if(a["!cols"])for(d=0;d<=h.e.c;++d)l.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var b="",E=a["!rows"]||[];for(A=0;A<h.s.r;++A)b=E[A]?' table:style-name="ro'+E[A].ods+'"':"",l.push("        <table:table-row"+b+`></table:table-row>
`);for(;A<=h.e.r;++A){for(b=E[A]?' table:style-name="ro'+E[A].ods+'"':"",l.push("        <table:table-row"+b+`>
`),d=0;d<h.s.c;++d)l.push(e);for(;d<=h.e.c;++d){var B=!1,I={},k="";for(g=0;g!=p.length;++g)if(!(p[g].s.c>d)&&!(p[g].s.r>A)&&!(p[g].e.c<d)&&!(p[g].e.r<A)){(p[g].s.c!=d||p[g].s.r!=A)&&(B=!0),I["table:number-columns-spanned"]=p[g].e.c-p[g].s.c+1,I["table:number-rows-spanned"]=p[g].e.r-p[g].s.r+1;break}if(B){l.push(n);continue}var F=wn({r:A,c:d}),D=w?(a[A]||[])[d]:a[F];if(D&&D.f&&(I["table:formula"]=Mr(_de(D.f)),D.F&&D.F.slice(0,F.length)==F)){var P=po(D.F);I["table:number-matrix-columns-spanned"]=P.e.c-P.s.c+1,I["table:number-matrix-rows-spanned"]=P.e.r-P.s.r+1}if(!D){l.push(e);continue}switch(D.t){case"b":k=D.v?"TRUE":"FALSE",I["office:value-type"]="boolean",I["office:boolean-value"]=D.v?"true":"false";break;case"n":k=D.w||String(D.v||0),I["office:value-type"]="float",I["office:value"]=D.v||0;break;case"s":case"str":k=D.v==null?"":D.v,I["office:value-type"]="string";break;case"d":k=D.w||rs(D.v).toISOString(),I["office:value-type"]="date",I["office:date-value"]=rs(D.v).toISOString(),I["table:style-name"]="ce1";break;default:l.push(e);continue}var S=t(k);if(D.l&&D.l.Target){var N=D.l.Target;N=N.charAt(0)=="#"?"#"+Sde(N.slice(1)):N,N.charAt(0)!="#"&&!N.match(/^\w+:/)&&(N="../"+N),S=Rt("text:a",S,{"xlink:href":N.replace(/&/g,"&amp;")})}l.push("          "+Rt("table:table-cell",Rt("text:p",S,{}),I)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},s=function(a,i){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(A){return i.Sheets[A]}).forEach(function(A){if(A&&A["!cols"]){for(var d=0;d<A["!cols"].length;++d)if(A["!cols"][d]){var h=A["!cols"][d];if(h.width==null&&h.wpx==null&&h.wch==null)continue;qd(h),h.ods=o;var p=A["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),a.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(A){return i.Sheets[A]}).forEach(function(A){if(A&&A["!rows"]){for(var d=0;d<A["!rows"].length;++d)if(A["!rows"][d]){A["!rows"][d].ods=l;var h=A["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),a.push(`  </style:style>
`),++l}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(i,o){var l=[Xs],A=Fg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Fg({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+A+d+`>
`),l.push(O8().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+A+`>
`),s(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var h=0;h!=i.SheetNames.length;++h)l.push(r(i.Sheets[i.SheetNames[h]],i,h));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function XM(t,e){if(e.bookType=="fods")return sF(t,e);var n=X5(),r="",s=[],a=[];return r="mimetype",Pn(n,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",Pn(n,r,sF(t,e)),s.push([r,"text/xml"]),a.push([r,"ContentFile"]),r="styles.xml",Pn(n,r,ame(t,e)),s.push([r,"text/xml"]),a.push([r,"StylesFile"]),r="meta.xml",Pn(n,r,Xs+O8()),s.push([r,"text/xml"]),a.push([r,"MetadataFile"]),r="manifest.rdf",Pn(n,r,Die(a)),s.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",Pn(n,r,Fie(s)),n}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function ih(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function d_(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Kr(Xd(t))}function ime(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):jo(iA(t))}function ome(t,e){e:for(var n=0;n<=t.length-e.length;++n){for(var r=0;r<e.length;++r)if(t[n+r]!=e[r])continue e;return!0}return!1}function $d(t){var e=t.reduce(function(s,a){return s+a.length},0),n=new Uint8Array(e),r=0;return t.forEach(function(s){n.set(s,r),r+=s.length}),n}function aF(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function lme(t,e){for(var n=(t[e+15]&127)<<7|t[e+14]>>1,r=t[e+14]&1,s=e+13;s>=e;--s)r=r*256+t[s];return(t[e+15]&128?-r:r)*Math.pow(10,n-6176)}function cme(t,e,n){var r=Math.floor(n==0?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,s=n/Math.pow(10,r-6176);t[e+15]|=r>>7,t[e+14]|=(r&127)<<1;for(var a=0;s>=1;++a,s/=256)t[e+a]=s&255;t[e+15]|=n>=0?0:128}function Og(t,e){var n=e?e[0]:0,r=t[n]&127;e:if(t[n++]>=128&&(r|=(t[n]&127)<<7,t[n++]<128||(r|=(t[n]&127)<<14,t[n++]<128)||(r|=(t[n]&127)<<21,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,28),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,35),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,42),++n,t[n++]<128)))break e;return e&&(e[0]=n),r}function Dr(t){var e=new Uint8Array(7);e[0]=t&127;var n=1;e:if(t>127){if(e[n-1]|=128,e[n]=t>>7&127,++n,t<=16383||(e[n-1]|=128,e[n]=t>>14&127,++n,t<=2097151)||(e[n-1]|=128,e[n]=t>>21&127,++n,t<=268435455)||(e[n-1]|=128,e[n]=t/256>>>21&127,++n,t<=34359738367)||(e[n-1]|=128,e[n]=t/65536>>>21&127,++n,t<=4398046511103))break e;e[n-1]|=128,e[n]=t/16777216>>>21&127,++n}return e.slice(0,n)}function Rs(t){var e=0,n=t[e]&127;e:if(t[e++]>=128){if(n|=(t[e]&127)<<7,t[e++]<128||(n|=(t[e]&127)<<14,t[e++]<128)||(n|=(t[e]&127)<<21,t[e++]<128))break e;n|=(t[e]&127)<<28}return n}function Cr(t){for(var e=[],n=[0];n[0]<t.length;){var r=n[0],s=Og(t,n),a=s&7;s=Math.floor(s/8);var i=0,o;if(s==0)break;switch(a){case 0:{for(var l=n[0];t[n[0]++]>=128;);o=t.slice(l,n[0])}break;case 5:i=4,o=t.slice(n[0],n[0]+i),n[0]+=i;break;case 1:i=8,o=t.slice(n[0],n[0]+i),n[0]+=i;break;case 2:i=Og(t,n),o=t.slice(n[0],n[0]+i),n[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(r))}var A={data:o,type:a};e[s]==null?e[s]=[A]:e[s].push(A)}return e}function Ya(t){var e=[];return t.forEach(function(n,r){n.forEach(function(s){s.data&&(e.push(Dr(r*8+s.type)),s.type==2&&e.push(Dr(s.data.length)),e.push(s.data))})}),$d(e)}function _S(t,e){return(t==null?void 0:t.map(function(n){return e(n.data)}))||[]}function pl(t){for(var e,n=[],r=[0];r[0]<t.length;){var s=Og(t,r),a=Cr(t.slice(r[0],r[0]+s));r[0]+=s;var i={id:Rs(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=Cr(o.data),A=Rs(l[3][0].data);i.messages.push({meta:l,data:t.slice(r[0],r[0]+A)}),r[0]+=A}),(e=a[3])!=null&&e[0]&&(i.merge=Rs(a[3][0].data)>>>0>0),n.push(i)}return n}function Xh(t){var e=[];return t.forEach(function(n){var r=[];r[1]=[{data:Dr(n.id),type:0}],r[2]=[],n.merge!=null&&(r[3]=[{data:Dr(+!!n.merge),type:0}]);var s=[];n.messages.forEach(function(i){s.push(i.data),i.meta[3]=[{type:0,data:Dr(i.data.length)}],r[2].push({data:Ya(i.meta),type:2})});var a=Ya(r);e.push(Dr(a.length)),e.push(a),s.forEach(function(i){return e.push(i)})}),$d(e)}function Ame(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var n=[0],r=Og(e,n),s=[];n[0]<e.length;){var a=e[n[0]]&3;if(a==0){var i=e[n[0]++]>>2;if(i<60)++i;else{var o=i-59;i=e[n[0]],o>1&&(i|=e[n[0]+1]<<8),o>2&&(i|=e[n[0]+2]<<16),o>3&&(i|=e[n[0]+3]<<24),i>>>=0,i++,n[0]+=o}s.push(e.slice(n[0],n[0]+i)),n[0]+=i;continue}else{var l=0,A=0;if(a==1?(A=(e[n[0]]>>2&7)+4,l=(e[n[0]++]&224)<<3,l|=e[n[0]++]):(A=(e[n[0]++]>>2)+1,a==2?(l=e[n[0]]|e[n[0]+1]<<8,n[0]+=2):(l=(e[n[0]]|e[n[0]+1]<<8|e[n[0]+2]<<16|e[n[0]+3]<<24)>>>0,n[0]+=4)),s=[$d(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(A>=l)for(s.push(s[0].slice(-l)),A-=l;A>=s[s.length-1].length;)s.push(s[s.length-1]),A-=s[s.length-1].length;s.push(s[0].slice(-l,-l+A))}}var d=$d(s);if(d.length!=r)throw new Error("Unexpected length: ".concat(d.length," != ").concat(r));return d}function gl(t){for(var e=[],n=0;n<t.length;){var r=t[n++],s=t[n]|t[n+1]<<8|t[n+2]<<16;n+=3,e.push(Ame(r,t.slice(n,n+s))),n+=s}if(n!==t.length)throw new Error("data is not a valid framed stream!");return $d(e)}function Zh(t){for(var e=[],n=0;n<t.length;){var r=Math.min(t.length-n,268435455),s=new Uint8Array(4);e.push(s);var a=Dr(r),i=a.length;e.push(a),r<=60?(i++,e.push(new Uint8Array([r-1<<2]))):r<=256?(i+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(i+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(i+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(i+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(t.slice(n,n+r)),i+=r,s[0]=0,s[1]=i&255,s[2]=i>>8&255,s[3]=i>>16&255,n+=r}return $d(e)}function ume(t,e,n,r){var s=ih(t),a=s.getUint32(4,!0),i=(r>1?12:8)+aF(a&(r>1?3470:398))*4,o=-1,l=-1,A=NaN,d=new Date(2001,0,1);a&512&&(o=s.getUint32(i,!0),i+=4),i+=aF(a&(r>1?12288:4096))*4,a&16&&(l=s.getUint32(i,!0),i+=4),a&32&&(A=s.getFloat64(i,!0),i+=8),a&64&&(d.setTime(d.getTime()+s.getFloat64(i,!0)*1e3),i+=8);var h;switch(t[2]){case 0:break;case 2:h={t:"n",v:A};break;case 3:h={t:"s",v:e[l]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:A>0};break;case 7:h={t:"n",v:A/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:n[o]};else if(l>-1)h={t:"s",v:e[l]};else if(!isNaN(A))h={t:"n",v:A};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return h}function dme(t,e,n){var r=ih(t),s=r.getUint32(8,!0),a=12,i=-1,o=-1,l=NaN,A=NaN,d=new Date(2001,0,1);s&1&&(l=lme(t,a),a+=16),s&2&&(A=r.getFloat64(a,!0),a+=8),s&4&&(d.setTime(d.getTime()+r.getFloat64(a,!0)*1e3),a+=8),s&8&&(o=r.getUint32(a,!0),a+=4),s&16&&(i=r.getUint32(a,!0),a+=4);var h;switch(t[1]){case 0:break;case 2:h={t:"n",v:l};break;case 3:h={t:"s",v:e[o]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:A>0};break;case 7:h={t:"n",v:A/86400};break;case 8:h={t:"e",v:0};break;case 9:if(i>-1)h={t:"s",v:n[i]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:h={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return h}function cC(t,e){var n=new Uint8Array(32),r=ih(n),s=12,a=0;switch(n[0]=5,t.t){case"n":n[1]=2,cme(n,s,t.v),a|=1,s+=16;break;case"b":n[1]=6,r.setFloat64(s,t.v?1:0,!0),a|=2,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[1]=3,r.setUint32(s,e.indexOf(t.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(8,a,!0),n.slice(0,s)}function AC(t,e){var n=new Uint8Array(32),r=ih(n),s=12,a=0;switch(n[0]=3,t.t){case"n":n[2]=2,r.setFloat64(s,t.v,!0),a|=32,s+=8;break;case"b":n[2]=6,r.setFloat64(s,t.v?1:0,!0),a|=32,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[2]=3,r.setUint32(s,e.indexOf(t.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(4,a,!0),n.slice(0,s)}function fme(t,e,n){switch(t[0]){case 0:case 1:case 2:case 3:return ume(t,e,n,t[0]);case 5:return dme(t,e,n);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Ci(t){var e=Cr(t);return Og(e[1][0].data)}function iF(t,e){var n=Cr(e.data),r=Rs(n[1][0].data),s=n[3],a=[];return(s||[]).forEach(function(i){var o=Cr(i.data),l=Rs(o[1][0].data)>>>0;switch(r){case 1:a[l]=d_(o[3][0].data);break;case 8:{var A=t[Ci(o[9][0].data)][0],d=Cr(A.data),h=t[Ci(d[1][0].data)][0],p=Rs(h.meta[1][0].data);if(p!=2001)throw new Error("2000 unexpected reference to ".concat(p));var g=Cr(h.data);a[l]=g[3].map(function(w){return d_(w.data)}).join("")}break}}),a}function hme(t,e){var n,r,s,a,i,o,l,A,d,h,p,g,w,b,E=Cr(t),B=Rs(E[1][0].data)>>>0,I=Rs(E[2][0].data)>>>0,k=((r=(n=E[8])==null?void 0:n[0])==null?void 0:r.data)&&Rs(E[8][0].data)>0||!1,F,D;if((a=(s=E[7])==null?void 0:s[0])!=null&&a.data&&e!=0)F=(o=(i=E[7])==null?void 0:i[0])==null?void 0:o.data,D=(A=(l=E[6])==null?void 0:l[0])==null?void 0:A.data;else if((h=(d=E[4])==null?void 0:d[0])!=null&&h.data&&e!=1)F=(g=(p=E[4])==null?void 0:p[0])==null?void 0:g.data,D=(b=(w=E[3])==null?void 0:w[0])==null?void 0:b.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var P=k?4:1,S=ih(F),N=[],T=0;T<F.length/2;++T){var V=S.getUint16(T*2,!0);V<65535&&N.push([T,V])}if(N.length!=I)throw"Expected ".concat(I," cells, found ").concat(N.length);var M=[];for(T=0;T<N.length-1;++T)M[N[T][0]]=D.subarray(N[T][1]*P,N[T+1][1]*P);return N.length>=1&&(M[N[N.length-1][0]]=D.subarray(N[N.length-1][1]*P)),{R:B,cells:M}}function mme(t,e){var n,r=Cr(e.data),s=(n=r==null?void 0:r[7])!=null&&n[0]?Rs(r[7][0].data)>>>0>0?1:0:-1,a=_S(r[5],function(i){return hme(i,s)});return{nrows:Rs(r[4][0].data)>>>0,data:a.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,A){if(i[o.R][A])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(A));i[o.R][A]=l}),i},[])}}function pme(t,e,n){var r,s=Cr(e.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(Rs(s[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(a.e.c=(Rs(s[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));n["!ref"]=Fn(a);var i=Cr(s[4][0].data),o=iF(t,t[Ci(i[4][0].data)][0]),l=(r=i[17])!=null&&r[0]?iF(t,t[Ci(i[17][0].data)][0]):[],A=Cr(i[3][0].data),d=0;A[1].forEach(function(h){var p=Cr(h.data),g=t[Ci(p[2][0].data)][0],w=Rs(g.meta[1][0].data);if(w!=6002)throw new Error("6001 unexpected reference to ".concat(w));var b=mme(t,g);b.data.forEach(function(E,B){E.forEach(function(I,k){var F=wn({r:d+B,c:k}),D=fme(I,o,l);D&&(n[F]=D)})}),d+=b.nrows})}function gme(t,e){var n=Cr(e.data),r={"!ref":"A1"},s=t[Ci(n[2][0].data)],a=Rs(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return pme(t,s[0],r),r}function xme(t,e){var n,r=Cr(e.data),s={name:(n=r[1])!=null&&n[0]?d_(r[1][0].data):"",sheets:[]},a=_S(r[2],Ci);return a.forEach(function(i){t[i].forEach(function(o){var l=Rs(o.meta[1][0].data);l==6e3&&s.sheets.push(gme(t,o))})}),s}function vme(t,e){var n=IS(),r=Cr(e.data),s=_S(r[1],Ci);if(s.forEach(function(a){t[a].forEach(function(i){var o=Rs(i.meta[1][0].data);if(o==2){var l=xme(t,i);l.sheets.forEach(function(A,d){FS(n,A,d==0?l.name:l.name+"_"+d,!0)})}})}),n.SheetNames.length==0)throw new Error("Empty NUMBERS file");return n}function uC(t){var e,n,r,s,a={},i=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var A;try{A=gl(l.content)}catch(h){return console.log("?? "+l.content.length+" "+(h.message||h))}var d;try{d=pl(A)}catch(h){return console.log("## "+(h.message||h))}d.forEach(function(h){a[h.id]=h.messages,i.push(h.id)})}}),!i.length)throw new Error("File has no messages");var o=((s=(r=(n=(e=a==null?void 0:a[1])==null?void 0:e[0])==null?void 0:n.meta)==null?void 0:r[1])==null?void 0:s[0].data)&&Rs(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||i.forEach(function(l){a[l].forEach(function(A){var d=Rs(A.meta[1][0].data)>>>0;if(d==1)if(!o)o=A;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return vme(a,o)}function yme(t,e,n){var r,s,a,i;if(!((r=t[6])!=null&&r[0])||!((s=t[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(a=t[8])==null?void 0:a[0])==null?void 0:i.data)&&Rs(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,A=ih(t[7][0].data),d=0,h=[],p=ih(t[4][0].data),g=0,w=[],b=0;b<e.length;++b){if(e[b]==null){A.setUint16(b*2,65535,!0),p.setUint16(b*2,65535);continue}A.setUint16(b*2,d,!0),p.setUint16(b*2,g,!0);var E,B;switch(typeof e[b]){case"string":E=cC({t:"s",v:e[b]},n),B=AC({t:"s",v:e[b]},n);break;case"number":E=cC({t:"n",v:e[b]},n),B=AC({t:"n",v:e[b]},n);break;case"boolean":E=cC({t:"b",v:e[b]},n),B=AC({t:"b",v:e[b]},n);break;default:throw new Error("Unsupported value "+e[b])}h.push(E),d+=E.length,w.push(B),g+=B.length,++l}for(t[2][0].data=Dr(l);b<t[7][0].data.length/2;++b)A.setUint16(b*2,65535,!0),p.setUint16(b*2,65535,!0);return t[6][0].data=$d(h),t[3][0].data=$d(w),l}function wme(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=po(n["!ref"]);r.s.r=r.s.c=0;var s=!1;r.e.c>9&&(s=!0,r.e.c=9),r.e.r>49&&(s=!0,r.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(Fn(r)));var a=U2(n,{range:r,header:1}),i=["~Sh33tJ5~"];a.forEach(function(W){return W.forEach(function(J){typeof J=="string"&&i.push(J)})});var o={},l=[],A=ln.read(e.numbers,{type:"base64"});A.FileIndex.map(function(W,J){return[W,A.FullPaths[J]]}).forEach(function(W){var J=W[0],ne=W[1];if(J.type==2&&J.name.match(/\.iwa/)){var oe=J.content,ue=gl(oe),me=pl(ue);me.forEach(function(ge){l.push(ge.id),o[ge.id]={deps:[],location:ne,type:Rs(ge.messages[0].meta[1][0].data)}})}}),l.sort(function(W,J){return W-J});var d=l.filter(function(W){return W>1}).map(function(W){return[W,Dr(W)]});A.FileIndex.map(function(W,J){return[W,A.FullPaths[J]]}).forEach(function(W){var J=W[0];if(W[1],!!J.name.match(/\.iwa/)){var ne=pl(gl(J.content));ne.forEach(function(oe){oe.messages.forEach(function(ue){d.forEach(function(me){oe.messages.some(function(ge){return Rs(ge.meta[1][0].data)!=11006&&ome(ge.data,me[1])})&&o[me[0]].deps.push(oe.id)})})})}});for(var h=ln.find(A,o[1].location),p=pl(gl(h.content)),g,w=0;w<p.length;++w){var b=p[w];b.id==1&&(g=b)}var E=Ci(Cr(g.messages[0].data)[1][0].data);for(h=ln.find(A,o[E].location),p=pl(gl(h.content)),w=0;w<p.length;++w)b=p[w],b.id==E&&(g=b);for(E=Ci(Cr(g.messages[0].data)[2][0].data),h=ln.find(A,o[E].location),p=pl(gl(h.content)),w=0;w<p.length;++w)b=p[w],b.id==E&&(g=b);for(E=Ci(Cr(g.messages[0].data)[2][0].data),h=ln.find(A,o[E].location),p=pl(gl(h.content)),w=0;w<p.length;++w)b=p[w],b.id==E&&(g=b);var B=Cr(g.messages[0].data);{B[6][0].data=Dr(r.e.r+1),B[7][0].data=Dr(r.e.c+1);var I=Ci(B[46][0].data),k=ln.find(A,o[I].location),F=pl(gl(k.content));{for(var D=0;D<F.length&&F[D].id!=I;++D);if(F[D].id!=I)throw"Bad ColumnRowUIDMapArchive";var P=Cr(F[D].messages[0].data);P[1]=[],P[2]=[],P[3]=[];for(var S=0;S<=r.e.c;++S){var N=[];N[1]=N[2]=[{type:0,data:Dr(S+420690)}],P[1].push({type:2,data:Ya(N)}),P[2].push({type:0,data:Dr(S)}),P[3].push({type:0,data:Dr(S)})}P[4]=[],P[5]=[],P[6]=[];for(var T=0;T<=r.e.r;++T)N=[],N[1]=N[2]=[{type:0,data:Dr(T+726270)}],P[4].push({type:2,data:Ya(N)}),P[5].push({type:0,data:Dr(T)}),P[6].push({type:0,data:Dr(T)});F[D].messages[0].data=Ya(P)}k.content=Zh(Xh(F)),k.size=k.content.length,delete B[46];var V=Cr(B[4][0].data);{V[7][0].data=Dr(r.e.r+1);var M=Cr(V[1][0].data),U=Ci(M[2][0].data);k=ln.find(A,o[U].location),F=pl(gl(k.content));{if(F[0].id!=U)throw"Bad HeaderStorageBucket";var O=Cr(F[0].messages[0].data);for(T=0;T<a.length;++T){var G=Cr(O[2][0].data);G[1][0].data=Dr(T),G[4][0].data=Dr(a[T].length),O[2][T]={type:O[2][0].type,data:Ya(G)}}F[0].messages[0].data=Ya(O)}k.content=Zh(Xh(F)),k.size=k.content.length;var ie=Ci(V[2][0].data);k=ln.find(A,o[ie].location),F=pl(gl(k.content));{if(F[0].id!=ie)throw"Bad HeaderStorageBucket";for(O=Cr(F[0].messages[0].data),S=0;S<=r.e.c;++S)G=Cr(O[2][0].data),G[1][0].data=Dr(S),G[4][0].data=Dr(r.e.r+1),O[2][S]={type:O[2][0].type,data:Ya(G)};F[0].messages[0].data=Ya(O)}k.content=Zh(Xh(F)),k.size=k.content.length;var K=Ci(V[4][0].data);(function(){for(var W=ln.find(A,o[K].location),J=pl(gl(W.content)),ne,oe=0;oe<J.length;++oe){var ue=J[oe];ue.id==K&&(ne=ue)}var me=Cr(ne.messages[0].data);{me[3]=[];var ge=[];i.forEach(function(ae,Re){ge[1]=[{type:0,data:Dr(Re)}],ge[2]=[{type:0,data:Dr(1)}],ge[3]=[{type:2,data:ime(ae)}],me[3].push({type:2,data:Ya(ge)})})}ne.messages[0].data=Ya(me);var ke=Xh(J),ve=Zh(ke);W.content=ve,W.size=W.content.length})();var q=Cr(V[3][0].data);{var se=q[1][0];delete q[2];var Z=Cr(se.data);{var X=Ci(Z[2][0].data);(function(){for(var W=ln.find(A,o[X].location),J=pl(gl(W.content)),ne,oe=0;oe<J.length;++oe){var ue=J[oe];ue.id==X&&(ne=ue)}var me=Cr(ne.messages[0].data);{delete me[6],delete q[7];var ge=new Uint8Array(me[5][0].data);me[5]=[];for(var ke=0,ve=0;ve<=r.e.r;++ve){var ae=Cr(ge);ke+=yme(ae,a[ve],i),ae[1][0].data=Dr(ve),me[5].push({data:Ya(ae),type:2})}me[1]=[{type:0,data:Dr(r.e.c+1)}],me[2]=[{type:0,data:Dr(r.e.r+1)}],me[3]=[{type:0,data:Dr(ke)}],me[4]=[{type:0,data:Dr(r.e.r+1)}]}ne.messages[0].data=Ya(me);var Re=Xh(J),Je=Zh(Re);W.content=Je,W.size=W.content.length})()}se.data=Ya(Z)}V[3][0].data=Ya(q)}B[4][0].data=Ya(V)}g.messages[0].data=Ya(B);var de=Xh(p),j=Zh(de);return h.content=j,h.size=h.content.length,A}function ZM(t){return function(n){for(var r=0;r!=t.length;++r){var s=t[r];n[s[0]]===void 0&&(n[s[0]]=s[1]),s[2]==="n"&&(n[s[0]]=Number(n[s[0]]))}}}function SS(t){ZM([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function TS(t){ZM([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function bme(t){return Yn.WS.indexOf(t)>-1?"sheet":t==Yn.CS?"chart":t==Yn.DS?"dialog":t==Yn.MS?"macro":t&&t.length?t:"sheet"}function Cme(t,e){if(!t)return 0;try{t=e.map(function(r){return r.id||(r.id=r.strRelID),[r.name,t["!id"][r.id].Target,bme(t["!id"][r.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function Eme(t,e,n,r,s,a,i,o,l,A,d,h){try{a[r]=cg(Oo(t,n,!0),e);var p=ca(t,e),g;switch(o){case"sheet":g=Khe(p,e,s,l,a[r],A,d,h);break;case"chart":if(g=qhe(p,e,s,l,a[r],A,d,h),!g||!g["!drawel"])break;var w=jp(g["!drawel"].Target,e),b=Dg(w),E=RAe(Oo(t,w,!0),cg(Oo(t,b,!0),w)),B=jp(E,w),I=Dg(B);g=yhe(Oo(t,B,!0),B,l,cg(Oo(t,I,!0),B),A,g);break;case"macro":g=Whe(p,e,s,l,a[r],A,d,h);break;case"dialog":g=$he(p,e,s,l,a[r],A,d,h);break;default:throw new Error("Unrecognized sheet type "+o)}i[r]=g;var k=[];a&&a[r]&&Ds(a[r]).forEach(function(F){var D="";if(a[r][F].Type==Yn.CMNT){D=jp(a[r][F].Target,e);var P=Zhe(ca(t,D,!0),D,l);if(!P||!P.length)return;zI(g,P,!1)}a[r][F].Type==Yn.TCMNT&&(D=jp(a[r][F].Target,e),k=k.concat(UAe(ca(t,D,!0),l)))}),k&&k.length&&zI(g,k,!0,l.people||[])}catch(F){if(l.WTF)throw F}}function hl(t){return t.charAt(0)=="/"?t.slice(1):t}function _me(t,e){if(_m(),e=e||{},SS(e),xl(t,"META-INF/manifest.xml")||xl(t,"objectdata.xml"))return nF(t,e);if(xl(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof uC<"u"){if(t.FileIndex)return uC(t);var n=ln.utils.cfb_new();return dI(t).forEach(function(G){Pn(n,G,Lae(t,G))}),uC(n)}throw new Error("Unsupported NUMBERS file")}if(!xl(t,"[Content_Types].xml"))throw xl(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):xl(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var r=dI(t),s=Nie(Oo(t,"[Content_Types].xml")),a=!1,i,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",ca(t,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!ca(t,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},A={};if(!e.bookSheets&&!e.bookProps){if(Ag=[],s.sst)try{Ag=Xhe(ca(t,hl(s.sst)),s.sst,e)}catch(G){if(e.WTF)throw G}e.cellStyles&&s.themes.length&&(l=Jhe(Oo(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(A=Yhe(ca(t,hl(s.style)),s.style,l,e))}s.links.map(function(G){try{var ie=cg(Oo(t,Dg(hl(G))),G);return t0e(ca(t,hl(G)),ie,G,e)}catch{}});var d=zhe(ca(t,hl(s.workbooks[0])),s.workbooks[0],e),h={},p="";s.coreprops.length&&(p=ca(t,hl(s.coreprops[0]),!0),p&&(h=Q8(p)),s.extprops.length!==0&&(p=ca(t,hl(s.extprops[0]),!0),p&&Lie(p,h,e)));var g={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(p=Oo(t,hl(s.custprops[0]),!0),p&&(g=Pie(p,e)));var w={};if((e.bookSheets||e.bookProps)&&(d.Sheets?i=d.Sheets.map(function(ie){return ie.name}):h.Worksheets&&h.SheetNames.length>0&&(i=h.SheetNames),e.bookProps&&(w.Props=h,w.Custprops=g),e.bookSheets&&typeof i<"u"&&(w.SheetNames=i),e.bookSheets?w.SheetNames:e.bookProps))return w;i={};var b={};e.bookDeps&&s.calcchain&&(b=e0e(ca(t,hl(s.calcchain)),s.calcchain));var E=0,B={},I,k;{var F=d.Sheets;h.Worksheets=F.length,h.SheetNames=[];for(var D=0;D!=F.length;++D)h.SheetNames[D]=F[D].name}var P=a?"bin":"xml",S=s.workbooks[0].lastIndexOf("/"),N=(s.workbooks[0].slice(0,S+1)+"_rels/"+s.workbooks[0].slice(S+1)+".rels").replace(/^\//,"");xl(t,N)||(N="xl/_rels/workbook."+P+".rels");var T=cg(Oo(t,N,!0),N.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=n0e(ca(t,hl(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=MAe(ca(t,hl(s.people[0])),e)),T&&(T=Cme(T,d.Sheets));var V=ca(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(E=0;E!=h.Worksheets;++E){var M="sheet";if(T&&T[E]?(I="xl/"+T[E][1].replace(/[\/]?xl\//,""),xl(t,I)||(I=T[E][1]),xl(t,I)||(I=N.replace(/_rels\/.*$/,"")+T[E][1]),M=T[E][2]):(I="xl/worksheets/sheet"+(E+1-V)+"."+P,I=I.replace(/sheet0\./,"sheet.")),k=I.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(E!=e.sheets)continue e;break;case"string":if(h.SheetNames[E].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var U=!1,O=0;O!=e.sheets.length;++O)typeof e.sheets[O]=="number"&&e.sheets[O]==E&&(U=1),typeof e.sheets[O]=="string"&&e.sheets[O].toLowerCase()==h.SheetNames[E].toLowerCase()&&(U=1);if(!U)continue e}}Eme(t,I,k,h.SheetNames[E],E,B,i,M,e,d,l,A)}return w={Directory:s,Workbook:d,Props:h,Custprops:g,Deps:b,Sheets:i,SheetNames:h.SheetNames,Strings:Ag,Styles:A,Themes:l,SSF:ss(gn)},e&&e.bookFiles&&(t.files?(w.keys=r,w.files=t.files):(w.keys=[],w.files={},t.FullPaths.forEach(function(G,ie){G=G.replace(/^Root Entry[\/]/,""),w.keys.push(G),w.files[G]=t.FileIndex[ie]}))),e&&e.bookVBA&&(s.vba.length>0?w.vbaraw=ca(t,hl(s.vba[0]),!0):s.defaults&&s.defaults.bin===zAe&&(w.vbaraw=ca(t,"xl/vbaProject.bin",!0))),w}function Sme(t,e){var n=e||{},r="Workbook",s=ln.find(t,r);try{if(r="/!DataSpaces/Version",s=ln.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(nce(s.content),r="/!DataSpaces/DataSpaceMap",s=ln.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);var a=sce(s.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=ln.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);var i=ace(s.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=ln.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);oce(s.content)}catch{}if(r="/EncryptionInfo",s=ln.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);var o=lce(s.content);if(r="/EncryptedPackage",s=ln.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,n.password||"",n);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,n.password||"",n);throw new Error("File is password-protected")}function Tme(t,e){return e.bookType=="ods"?XM(t,e):e.bookType=="numbers"?wme(t,e):e.bookType=="xlsb"?Bme(t,e):Nme(t,e)}function Bme(t,e){S0=1024,t&&!t.SSF&&(t.SSF=ss(gn)),t&&t.SSF&&(_m(),ky(t.SSF),e.revssf=Fy(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,ug?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n=e.bookType=="xlsb"?"bin":"xml",r=SM.indexOf(e.bookType)>-1,s=dS();TS(e=e||{});var a=X5(),i="",o=0;if(e.cellXfs=[],ef(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",Pn(a,i,H8(t.Props,e)),s.coreprops.push(i),Ur(e.rels,2,i,Yn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],A=0;A<t.SheetNames.length;++A)(t.Workbook.Sheets[A]||{}).Hidden!=2&&l.push(t.SheetNames[A]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,Pn(a,i,z8(t.Props)),s.extprops.push(i),Ur(e.rels,3,i,Yn.EXT_PROPS),t.Custprops!==t.Props&&Ds(t.Custprops||{}).length>0&&(i="docProps/custom.xml",Pn(a,i,K8(t.Custprops)),s.custprops.push(i),Ur(e.rels,4,i,Yn.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},h=t.Sheets[t.SheetNames[o-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+n,Pn(a,i,s0e(o-1,i,e,t,d)),s.sheets.push(i),Ur(e.wbrels,-1,"worksheets/sheet"+o+"."+n,Yn.WS[0])}if(h){var g=h["!comments"],w=!1,b="";g&&g.length>0&&(b="xl/comments"+o+"."+n,Pn(a,b,o0e(g,b)),s.comments.push(b),Ur(d,-1,"../comments"+o+"."+n,Yn.CMNT),w=!0),h["!legacy"]&&w&&Pn(a,"xl/drawings/vmlDrawing"+o+".vml",EM(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&Pn(a,Dg(i),V0(d))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+n,Pn(a,i,i0e(e.Strings,i,e)),s.strs.push(i),Ur(e.wbrels,-1,"sharedStrings."+n,Yn.SST)),i="xl/workbook."+n,Pn(a,i,r0e(t,i)),s.workbooks.push(i),Ur(e.rels,1,i,Yn.WB),i="xl/theme/theme1.xml",Pn(a,i,xS(t.Themes,e)),s.themes.push(i),Ur(e.wbrels,-1,"theme/theme1.xml",Yn.THEME),i="xl/styles."+n,Pn(a,i,a0e(t,i,e)),s.styles.push(i),Ur(e.wbrels,-1,"styles."+n,Yn.STY),t.vbaraw&&r&&(i="xl/vbaProject.bin",Pn(a,i,t.vbaraw),s.vba.push(i),Ur(e.wbrels,-1,"vbaProject.bin",Yn.VBA)),i="xl/metadata."+n,Pn(a,i,l0e(i)),s.metadata.push(i),Ur(e.wbrels,-1,"metadata."+n,Yn.XLMETA),Pn(a,"[Content_Types].xml",j8(s,e)),Pn(a,"_rels/.rels",V0(e.rels)),Pn(a,"xl/_rels/workbook."+n+".rels",V0(e.wbrels)),delete e.revssf,delete e.ssf,a}function Nme(t,e){S0=1024,t&&!t.SSF&&(t.SSF=ss(gn)),t&&t.SSF&&(_m(),ky(t.SSF),e.revssf=Fy(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,ug?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n="xml",r=SM.indexOf(e.bookType)>-1,s=dS();TS(e=e||{});var a=X5(),i="",o=0;if(e.cellXfs=[],ef(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",Pn(a,i,H8(t.Props,e)),s.coreprops.push(i),Ur(e.rels,2,i,Yn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],A=0;A<t.SheetNames.length;++A)(t.Workbook.Sheets[A]||{}).Hidden!=2&&l.push(t.SheetNames[A]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,Pn(a,i,z8(t.Props)),s.extprops.push(i),Ur(e.rels,3,i,Yn.EXT_PROPS),t.Custprops!==t.Props&&Ds(t.Custprops||{}).length>0&&(i="docProps/custom.xml",Pn(a,i,K8(t.Custprops)),s.custprops.push(i),Ur(e.rels,4,i,Yn.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var h={"!id":{}},p=t.Sheets[t.SheetNames[o-1]],g=(p||{})["!type"]||"sheet";switch(g){case"chart":default:i="xl/worksheets/sheet"+o+"."+n,Pn(a,i,MM(o-1,e,t,h)),s.sheets.push(i),Ur(e.wbrels,-1,"worksheets/sheet"+o+"."+n,Yn.WS[0])}if(p){var w=p["!comments"],b=!1,E="";if(w&&w.length>0){var B=!1;w.forEach(function(I){I[1].forEach(function(k){k.T==!0&&(B=!0)})}),B&&(E="xl/threadedComments/threadedComment"+o+"."+n,Pn(a,E,LAe(w,d,e)),s.threadedcomments.push(E),Ur(h,-1,"../threadedComments/threadedComment"+o+"."+n,Yn.TCMNT)),E="xl/comments"+o+"."+n,Pn(a,E,_M(w)),s.comments.push(E),Ur(h,-1,"../comments"+o+"."+n,Yn.CMNT),b=!0}p["!legacy"]&&b&&Pn(a,"xl/drawings/vmlDrawing"+o+".vml",EM(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}h["!id"].rId1&&Pn(a,Dg(i),V0(h))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+n,Pn(a,i,dM(e.Strings,e)),s.strs.push(i),Ur(e.wbrels,-1,"sharedStrings."+n,Yn.SST)),i="xl/workbook."+n,Pn(a,i,HM(t)),s.workbooks.push(i),Ur(e.rels,1,i,Yn.WB),i="xl/theme/theme1.xml",Pn(a,i,xS(t.Themes,e)),s.themes.push(i),Ur(e.wbrels,-1,"theme/theme1.xml",Yn.THEME),i="xl/styles."+n,Pn(a,i,yM(t,e)),s.styles.push(i),Ur(e.wbrels,-1,"styles."+n,Yn.STY),t.vbaraw&&r&&(i="xl/vbaProject.bin",Pn(a,i,t.vbaraw),s.vba.push(i),Ur(e.wbrels,-1,"vbaProject.bin",Yn.VBA)),i="xl/metadata."+n,Pn(a,i,CM()),s.metadata.push(i),Ur(e.wbrels,-1,"metadata."+n,Yn.XLMETA),d.length>1&&(i="xl/persons/person.xml",Pn(a,i,PAe(d)),s.people.push(i),Ur(e.wbrels,-1,"persons/person.xml",Yn.PEOPLE)),Pn(a,"[Content_Types].xml",j8(s,e)),Pn(a,"_rels/.rels",V0(e.rels)),Pn(a,"xl/_rels/workbook."+n+".rels",V0(e.wbrels)),delete e.revssf,delete e.ssf,a}function BS(t,e){var n="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":n=Vo(t.slice(0,12));break;case"binary":n=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function kme(t,e){return ln.find(t,"EncryptedPackage")?Sme(t,e):KM(t,e)}function Ime(t,e){var n,r=t,s=e||{};return s.type||(s.type=zn&&Buffer.isBuffer(t)?"buffer":"base64"),n=h8(r,s),_me(n,s)}function eP(t,e){var n=0;e:for(;n<t.length;)switch(t.charCodeAt(n)){case 10:case 13:case 32:++n;break;case 60:return A_(t.slice(n),e);default:break e}return om.to_workbook(t,e)}function Fme(t,e){var n="",r=BS(t,e);switch(e.type){case"base64":n=Vo(t);break;case"binary":n=t;break;case"buffer":n=t.toString("binary");break;case"array":n=nh(t);break;default:throw new Error("Unrecognized type "+e.type)}return r[0]==239&&r[1]==187&&r[2]==191&&(n=Kr(n)),e.type="binary",eP(n,e)}function Rme(t,e){var n=t;return e.type=="base64"&&(n=Vo(n)),n=Bg.utils.decode(1200,n.slice(2),"str"),e.type="binary",eP(n,e)}function Dme(t){return t.match(/[^\x00-\x7F]/)?iA(t):t}function dC(t,e,n,r){return r?(n.type="string",om.to_workbook(t,n)):om.to_workbook(e,n)}function Qg(t,e){q5();var n=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return Qg(new Uint8Array(t),(n=ss(n),n.type="array",n));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!n.type&&(n.type=typeof Deno<"u"?"buffer":"array");var r=t,s=[0,0,0,0],a=!1;if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),z0={},n.dateNF&&(z0.dateNF=n.dateNF),n.type||(n.type=zn&&Buffer.isBuffer(t)?"buffer":"base64"),n.type=="file"&&(n.type=zn?"buffer":"binary",r=Bae(t),typeof Uint8Array<"u"&&!zn&&(n.type="array")),n.type=="string"&&(a=!0,n.type="binary",n.codepage=65001,r=Dme(t)),n.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return n=ss(n),n.type="array",Qg(W5(r),n)}switch((s=BS(r,n))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return kme(ln.read(r,n),n);break;case 9:if(s[1]<=8)return KM(r,n);break;case 60:return A_(r,n);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return jle(r,n);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return AM.to_workbook(r,n);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Ime(r,n):dC(t,r,n,a);case 239:return s[3]===60?A_(r,n):dC(t,r,n,a);case 255:if(s[1]===254)return Rme(r,n);if(s[1]===0&&s[2]===2&&s[3]===0)return zf.to_workbook(r,n);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return zf.to_workbook(r,n);break;case 3:case 131:case 139:case 140:return c_.to_workbook(r,n);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return gM.to_workbook(r,n);break;case 10:case 13:case 32:return Fme(r,n);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Ple.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?c_.to_workbook(r,n):dC(t,r,n,a)}function tP(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return ux(e.file,ln.write(t,{type:zn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return ln.write(t,e)}function Ume(t,e){var n=ss(e||{}),r=Tme(t,n);return Lme(r,n)}function Lme(t,e){var n={},r=zn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(n.compression="DEFLATE"),e.password)n.type=r;else switch(e.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var s=t.FullPaths?ln.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!e.compression}):t.generate(n);if(typeof Deno<"u"&&typeof s=="string"){if(e.type=="binary"||e.type=="base64")return s;s=new Uint8Array(Ny(s))}return e.password&&typeof encrypt_agile<"u"?tP(encrypt_agile(s,e.password),e):e.type==="file"?ux(e.file,s):e.type=="string"?Kr(s):s}function Mme(t,e){var n=e||{},r=D0e(t,n);return tP(r,n)}function eA(t,e,n){n||(n="");var r=n+t;switch(e.type){case"base64":return Ng(iA(r));case"binary":return iA(r);case"string":return t;case"file":return ux(e.file,r,"utf8");case"buffer":return zn?vu(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):eA(r,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Pme(t,e){switch(e.type){case"base64":return Ng(t);case"binary":return t;case"string":return t;case"file":return ux(e.file,t,"binary");case"buffer":return zn?vu(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function q1(t,e){switch(e.type){case"string":case"base64":case"binary":for(var n="",r=0;r<t.length;++r)n+=String.fromCharCode(t[r]);return e.type=="base64"?Ng(n):e.type=="string"?Kr(n):n;case"file":return ux(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function nP(t,e){q5(),khe(t);var n=ss(e||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),n.type=="array"){n.type="binary";var r=nP(t,n);return n.type="array",Ny(r)}var s=0;if(n.sheet&&(typeof n.sheet=="number"?s=n.sheet:s=t.SheetNames.indexOf(n.sheet),!t.SheetNames[s]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return eA(T0e(t,n),n);case"slk":case"sylk":return eA(cM.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"htm":case"html":return eA(WM(t.Sheets[t.SheetNames[s]],n),n);case"txt":return Pme(rP(t.Sheets[t.SheetNames[s]],n),n);case"csv":return eA(kS(t.Sheets[t.SheetNames[s]],n),n,"\uFEFF");case"dif":return eA(AM.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"dbf":return q1(c_.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"prn":return eA(om.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"rtf":return eA(gM.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"eth":return eA(uM.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"fods":return eA(XM(t,n),n);case"wk1":return q1(zf.sheet_to_wk1(t.Sheets[t.SheetNames[s]],n),n);case"wk3":return q1(zf.book_to_wk3(t,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),q1(qM(t,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),Mme(t,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Ume(t,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function jme(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},n=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();n.match(/^\.[a-z]+$/)&&(t.bookType=n.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function NS(t,e,n){var r={};return r.type="file",r.file=e,jme(r),nP(t,r)}function Ome(t,e,n,r,s,a,i,o){var l=Ys(n),A=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),h=!0,p=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:n,enumerable:!1})}catch{p.__rowNum__=n}else p.__rowNum__=n;if(!i||t[n])for(var g=e.s.c;g<=e.e.c;++g){var w=i?t[n][g]:t[r[g]+l];if(w===void 0||w.t===void 0){if(A===void 0)continue;a[g]!=null&&(p[a[g]]=A);continue}var b=w.v;switch(w.t){case"z":if(b==null)break;continue;case"e":b=b==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+w.t)}if(a[g]!=null){if(b==null)if(w.t=="e"&&b===null)p[a[g]]=null;else if(A!==void 0)p[a[g]]=A;else if(d&&b===null)p[a[g]]=null;else continue;else p[a[g]]=d&&(w.t!=="n"||w.t==="n"&&o.rawNumbers!==!1)?b:fu(w,b,o);b!=null&&(h=!1)}}return{row:p,isempty:h}}function U2(t,e){if(t==null||t["!ref"]==null)return[];var n={t:"n",v:0},r=0,s=1,a=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},A=e||{},d=A.range!=null?A.range:t["!ref"];switch(A.header===1?r=1:A.header==="A"?r=2:Array.isArray(A.header)?r=3:A.header==null&&(r=0),typeof d){case"string":l=pr(d);break;case"number":l=pr(t["!ref"]),l.s.r=d;break;default:l=d}r>0&&(s=0);var h=Ys(l.s.r),p=[],g=[],w=0,b=0,E=Array.isArray(t),B=l.s.r,I=0,k={};E&&!t[B]&&(t[B]=[]);var F=A.skipHidden&&t["!cols"]||[],D=A.skipHidden&&t["!rows"]||[];for(I=l.s.c;I<=l.e.c;++I)if(!(F[I]||{}).hidden)switch(p[I]=xs(I),n=E?t[B][I]:t[p[I]+h],r){case 1:a[I]=I-l.s.c;break;case 2:a[I]=p[I];break;case 3:a[I]=A.header[I-l.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),o=i=fu(n,null,A),b=k[i]||0,!b)k[i]=1;else{do o=i+"_"+b++;while(k[o]);k[i]=b,k[o]=1}a[I]=o}for(B=l.s.r+s;B<=l.e.r;++B)if(!(D[B]||{}).hidden){var P=Ome(t,l,B,p,r,a,E,A);(P.isempty===!1||(r===1?A.blankrows!==!1:A.blankrows))&&(g[w++]=P.row)}return g.length=w,g}var oF=/"/g;function Qme(t,e,n,r,s,a,i,o){for(var l=!0,A=[],d="",h=Ys(n),p=e.s.c;p<=e.e.c;++p)if(r[p]){var g=o.dense?(t[n]||[])[p]:t[r[p]+h];if(g==null)d="";else if(g.v!=null){l=!1,d=""+(o.rawNumbers&&g.t=="n"?g.v:fu(g,null,o));for(var w=0,b=0;w!==d.length;++w)if((b=d.charCodeAt(w))===s||b===a||b===34||o.forceQuotes){d='"'+d.replace(oF,'""')+'"';break}d=="ID"&&(d='"ID"')}else g.f!=null&&!g.F?(l=!1,d="="+g.f,d.indexOf(",")>=0&&(d='"'+d.replace(oF,'""')+'"')):d="";A.push(d)}return o.blankrows===!1&&l?null:A.join(i)}function kS(t,e){var n=[],r=e??{};if(t==null||t["!ref"]==null)return"";var s=pr(t["!ref"]),a=r.FS!==void 0?r.FS:",",i=a.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,l=o.charCodeAt(0),A=new RegExp((a=="|"?"\\|":a)+"+$"),d="",h=[];r.dense=Array.isArray(t);for(var p=r.skipHidden&&t["!cols"]||[],g=r.skipHidden&&t["!rows"]||[],w=s.s.c;w<=s.e.c;++w)(p[w]||{}).hidden||(h[w]=xs(w));for(var b=0,E=s.s.r;E<=s.e.r;++E)(g[E]||{}).hidden||(d=Qme(t,s,E,h,i,l,a,r),d!=null&&(r.strip&&(d=d.replace(A,"")),(d||r.blankrows!==!1)&&n.push((b++?o:"")+d)));return delete r.dense,n.join("")}function rP(t,e){e||(e={}),e.FS="	",e.RS=`
`;var n=kS(t,e);return n}function Hme(t){var e="",n,r="";if(t==null||t["!ref"]==null)return[];var s=pr(t["!ref"]),a="",i=[],o,l=[],A=Array.isArray(t);for(o=s.s.c;o<=s.e.c;++o)i[o]=xs(o);for(var d=s.s.r;d<=s.e.r;++d)for(a=Ys(d),o=s.s.c;o<=s.e.c;++o)if(e=i[o]+a,n=A?(t[d]||[])[o]:t[e],r="",n!==void 0){if(n.F!=null){if(e=n.F,!n.f)continue;r=n.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(n.f!=null)r=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)r=""+n.v;else if(n.t=="b")r=n.v?"TRUE":"FALSE";else if(n.w!==void 0)r="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?r="'"+n.v:r=""+n.v}}l[l.length]=e+"="+r}return l}function sP(t,e,n){var r=n||{},s=+!r.skipHeader,a=t||{},i=0,o=0;if(a&&r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var l=typeof r.origin=="string"?vs(r.origin):r.origin;i=l.r,o=l.c}var A,d={s:{c:0,r:0},e:{c:o,r:i+e.length-1+s}};if(a["!ref"]){var h=pr(a["!ref"]);d.e.c=Math.max(d.e.c,h.e.c),d.e.r=Math.max(d.e.r,h.e.r),i==-1&&(i=h.e.r+1,d.e.r=i+e.length-1+s)}else i==-1&&(i=0,d.e.r=e.length-1+s);var p=r.header||[],g=0;e.forEach(function(b,E){Ds(b).forEach(function(B){(g=p.indexOf(B))==-1&&(p[g=p.length]=B);var I=b[B],k="z",F="",D=wn({c:o+g,r:i+E+s});A=Hg(a,D),I&&typeof I=="object"&&!(I instanceof Date)?a[D]=I:(typeof I=="number"?k="n":typeof I=="boolean"?k="b":typeof I=="string"?k="s":I instanceof Date?(k="d",r.cellDates||(k="n",I=Ta(I)),F=r.dateNF||gn[14]):I===null&&r.nullError&&(k="e",I=0),A?(A.t=k,A.v=I,delete A.w,delete A.R,F&&(A.z=F)):a[D]=A={t:k,v:I},F&&(A.z=F))})}),d.e.c=Math.max(d.e.c,o+p.length-1);var w=Ys(i);if(s)for(g=0;g<p.length;++g)a[xs(g+o)+w]={t:"s",v:p[g]};return a["!ref"]=Fn(d),a}function Vme(t,e){return sP(null,t,e)}function Hg(t,e,n){if(typeof e=="string"){if(Array.isArray(t)){var r=vs(e);return t[r.r]||(t[r.r]=[]),t[r.r][r.c]||(t[r.r][r.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?Hg(t,wn(e)):Hg(t,wn({r:e,c:n||0}))}function Gme(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var n=t.SheetNames.indexOf(e);if(n>-1)return n;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function IS(){return{SheetNames:[],Sheets:{}}}function FS(t,e,n,r){var s=1;if(!n)for(;s<=65535&&t.SheetNames.indexOf(n="Sheet"+s)!=-1;++s,n=void 0);if(!n||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(n)>=0){var a=n.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||n;for(++s;s<=65535&&t.SheetNames.indexOf(n=i+s)!=-1;++s);}if(QM(n),t.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return t.SheetNames.push(n),t.Sheets[n]=e,n}function zme(t,e,n){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=Gme(t,e);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}t.Workbook.Sheets[r].Hidden=n}function Kme(t,e){return t.z=e,t}function aP(t,e,n){return e?(t.l={Target:e},n&&(t.l.Tooltip=n)):delete t.l,t}function qme(t,e,n){return aP(t,"#"+e,n)}function Wme(t,e,n){t.c||(t.c=[]),t.c.push({t:e,a:n||"SheetJS"})}function $me(t,e,n,r){for(var s=typeof e!="string"?e:pr(e),a=typeof e=="string"?e:Fn(e),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var l=Hg(t,i,o);l.t="n",l.F=a,delete l.v,i==s.s.r&&o==s.s.c&&(l.f=n,r&&(l.D=!0))}return t}var bl={encode_col:xs,encode_row:Ys,encode_cell:wn,encode_range:Fn,decode_col:iS,decode_row:aS,split_cell:iie,decode_cell:vs,decode_range:po,format_cell:fu,sheet_add_aoa:F8,sheet_add_json:sP,sheet_add_dom:$M,aoa_to_sheet:Sm,json_to_sheet:Vme,table_to_sheet:YM,table_to_book:nme,sheet_to_csv:kS,sheet_to_txt:rP,sheet_to_json:U2,sheet_to_html:WM,sheet_to_formulae:Hme,sheet_to_row_object_array:U2,sheet_get_cell:Hg,book_new:IS,book_append_sheet:FS,book_set_sheet_visibility:zme,cell_set_number_format:Kme,cell_set_hyperlink:aP,cell_set_internal_link:qme,cell_add_comment:Wme,sheet_set_array_formula:$me,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Yme="apiCallLogs",lF=500,e0=({title:t,value:e,description:n,alert:r})=>u.jsxs("div",{className:`p-5 rounded-xl border ${r?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),u.jsx("p",{className:`text-3xl font-bold mt-2 ${r?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:e}),n&&u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:n})]}),fC=({title:t,data:e,colorClass:n})=>{const r=ee.useMemo(()=>Math.max(...e.map(s=>s.value),1),[e]);return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),u.jsx("div",{className:"space-y-4",children:e.length>0?e.map(s=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[u.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:s.label}),u.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:s.value})]}),u.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:u.jsx("div",{className:`${n} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${s.value/r*100}%`}})})]},s.label)):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},Jme=()=>{const[t,e]=ee.useState([]),n=ee.useCallback(()=>{try{const i=localStorage.getItem(Yme);i&&e(JSON.parse(i))}catch(i){console.error("Error al cargar logs de la API:",i)}},[]);ee.useEffect(()=>(n(),window.addEventListener("storage",n),()=>{window.removeEventListener("storage",n)}),[n]);const{stats:r,userStats:s,moduleStats:a}=ee.useMemo(()=>{const i=new Date,o=new Date(i.getFullYear(),i.getMonth(),i.getDate()).getTime(),l=o-i.getDay()*24*60*60*1e3,A=new Date(i.getFullYear(),i.getMonth(),1).getTime(),d={today:0,week:0,month:0},h={},p={};t.forEach(b=>{const E=new Date(b.timestamp).getTime();E>=o&&d.today++,E>=l&&d.week++,E>=A&&d.month++,h[b.userId]||(h[b.userId]={email:b.userEmail,today:0,month:0,total:0}),h[b.userId].total++,E>=o&&h[b.userId].today++,E>=A&&h[b.userId].month++,p[b.module]=(p[b.module]||0)+1});const g=Object.values(h).sort((b,E)=>E.total-b.total),w=Object.entries(p).map(([b,E])=>({label:b,value:E})).sort((b,E)=>E.value-b.value);return{stats:d,userStats:g,moduleStats:w}},[t]);return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsx(e0,{title:"Llamadas Hoy",value:r.today,description:`Límite recomendado: ${lF}`,alert:r.today>lF}),u.jsx(e0,{title:"Llamadas esta Semana",value:r.week}),u.jsx(e0,{title:"Llamadas este Mes",value:r.month})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[u.jsx(fC,{title:"Uso por Módulo",data:a,colorClass:"bg-sky-500"}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),u.jsx("div",{className:"overflow-x-auto max-h-96",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),u.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),u.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),u.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:s.length>0?s.map(i=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:i.email}),u.jsx("td",{className:"px-4 py-2 text-center text-sm",children:i.today}),u.jsx("td",{className:"px-4 py-2 text-center text-sm",children:i.month}),u.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:i.total})]},i.email)):u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:"No hay registros."})})})]})})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Esta sección se conectará a Firebase en una futura actualización."}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 opacity-50",children:[u.jsx(e0,{title:"Documentos Creados (Hoy)",value:"--"}),u.jsx(e0,{title:"Lecturas de Firestore (Hoy)",value:"--"}),u.jsx(e0,{title:"Espacio en Storage",value:"-- GB"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8 opacity-50",children:[u.jsx(fC,{title:"Actividad de Firestore (Últimos 7 días)",data:[],colorClass:"bg-green-500"}),u.jsx(fC,{title:"Uso de Storage por tipo de archivo",data:[],colorClass:"bg-purple-500"})]})]})]})},cF="usuariosLiceo",AF=Object.values(nn),Xme=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.629 5.629l-2.371 2.37-1.414-1.414 2.371-2.371A6 6 0 0115 7zm-3.707 5.293L6 17.586V20h2.414l5.293-5.293a1 1 0 00-1.414-1.414z"})}),uF=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},Zme=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState("Usuarios"),[s,a]=ee.useState({nombreCompleto:"",email:"",rut:"",profile:nn.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[i,o]=ee.useState(null),[l,A]=ee.useState(""),[d,h]=ee.useState(""),[p,g]=ee.useState(""),[w,b]=ee.useState(null),[E,B]=ee.useState(null),[I,k]=ee.useState(null);ee.useEffect(()=>{try{const q=localStorage.getItem(cF);q&&e(JSON.parse(q))}catch(q){console.error("Error al cargar datos de localStorage",q),b("No se pudieron cargar los datos guardados.")}},[]);const F=q=>{e(q),localStorage.setItem(cF,JSON.stringify(q))},D=ee.useCallback(q=>{const{name:se,value:Z}=q.target;a(X=>({...X,[se]:Z,curso:se==="profile"&&Z!==nn.ESTUDIANTE?"":X.curso}))},[]),P=ee.useCallback((q,se)=>{a(Z=>{const X=Z[q]||[],de=X.includes(se)?X.filter(j=>j!==se):[...X,se];return{...Z,[q]:de}})},[]),S=ee.useCallback(()=>{a({nombreCompleto:"",email:"",rut:"",profile:nn.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),o(null),b(null)},[]),N=ee.useCallback(q=>{var me;q.preventDefault();const{nombreCompleto:se,email:Z,profile:X,curso:de,cursos:j,asignaturas:W}=s;if(!se.trim()||!Z.trim()){b("Nombre Completo y Email son obligatorios.");return}if(X===nn.ESTUDIANTE&&!de){b('El campo "Curso" es obligatorio para el perfil de Estudiante.');return}const J=X===nn.ESTUDIANTE?uF(de||""):void 0,ne=X===nn.PROFESORADO?j:void 0,oe=X===nn.PROFESORADO?W:void 0,ue=(me=s.password)!=null&&me.trim()?s.password.trim():void 0;if(i){const ge=t.find(ae=>ae.id===i),ke={...ge,...s,password:ue||(ge==null?void 0:ge.password),curso:J,cursos:ne,asignaturas:oe},ve=t.map(ae=>ae.id===i?ke:ae);F(ve)}else{const ge={id:crypto.randomUUID(),...s,password:ue,curso:J,cursos:ne,asignaturas:oe};F([ge,...t])}S()},[s,i,t,S]),T=ee.useCallback(q=>{window.scrollTo({top:0,behavior:"smooth"}),o(q.id),a({nombreCompleto:q.nombreCompleto,email:q.email,rut:q.rut,profile:q.profile,password:"",curso:q.curso,cursos:q.cursos||[],asignaturas:q.asignaturas||[]})},[]),V=ee.useCallback(q=>{window.confirm("¿Está seguro de que desea eliminar este usuario?")&&F(t.filter(se=>se.id!==q))},[t]),M=()=>{if(window.confirm(`ADVERTENCIA: Esta acción es irreversible.

¿Está seguro de que desea restablecer las contraseñas de TODOS los usuarios a la contraseña por defecto ('recoleta')?

Cualquier contraseña personalizada será eliminada.`)){const se=t.map(Z=>{const{password:X,...de}=Z;return de});F(se),alert("Todas las contraseñas han sido restablecidas exitosamente a 'recoleta'.")}},U=ee.useMemo(()=>Array.from(new Set(t.filter(q=>q.profile===nn.ESTUDIANTE&&q.curso).map(q=>q.curso))).sort(),[t]),O=ee.useMemo(()=>t.filter(q=>(l===""||q.nombreCompleto.toLowerCase().includes(l.toLowerCase())||q.email.toLowerCase().includes(l.toLowerCase()))&&(d===""||q.profile===d)&&(p===""||q.curso===p)),[t,l,d,p]),G=q=>{var X;const se=(X=q.target.files)==null?void 0:X[0];if(!se)return;B({message:"Procesando archivo de estudiantes...",isError:!1});const Z=new FileReader;Z.onload=de=>{var j;try{const W=new Uint8Array((j=de.target)==null?void 0:j.result),J=Qg(W,{type:"array"}),ne=J.SheetNames[0],oe=J.Sheets[ne],ue=bl.sheet_to_json(oe);if(ue.length===0)throw new Error("El archivo Excel está vacío.");const me=Object.keys(ue[0]).map(ve=>ve.trim().toLowerCase());if(!me.includes("nombre")||!me.includes("correo")||!me.includes("curso"))throw new Error("El archivo debe tener las columnas: 'Nombre', 'Correo', y 'Curso'.");const ge={};Object.keys(ue[0]).forEach(ve=>{ge[ve.trim().toLowerCase()]=ve});const ke=ue.map(ve=>{const ae=ve[ge.nombre],Re=ve[ge.correo],Je=ve[ge.curso];return!ae||!Re||!Je?null:{id:crypto.randomUUID(),nombreCompleto:String(ae).trim(),email:String(Re).trim(),profile:nn.ESTUDIANTE,curso:uF(String(Je).trim())}}).filter(ve=>ve!==null&&!t.some(ae=>ae.email.toLowerCase()===ve.email.toLowerCase()));ke.length>0&&F([...ke,...t]),B({message:`Carga completada. Se agregaron ${ke.length} nuevos estudiantes.`,isError:!1})}catch(W){B({message:`Error: ${W.message}`,isError:!0})}finally{q.target&&(q.target.value="")}},Z.readAsArrayBuffer(se)},ie=q=>{var X;const se=(X=q.target.files)==null?void 0:X[0];if(!se)return;k({message:"Procesando archivo de personal...",isError:!1});const Z=new FileReader;Z.onload=de=>{var j;try{const W=new Uint8Array((j=de.target)==null?void 0:j.result),J=Qg(W,{type:"array"}),ne=J.SheetNames[0],oe=J.Sheets[ne],ue=bl.sheet_to_json(oe);if(ue.length===0)throw new Error("El archivo Excel está vacío.");const me=Object.keys(ue[0]).map(Je=>Je.trim().toLowerCase());if(!me.includes("nombre")||!me.includes("correo")||!me.includes("perfil"))throw new Error("El archivo debe tener las columnas: 'Nombre', 'Correo' y 'Perfil'.");const ge={};Object.keys(ue[0]).forEach(Je=>{ge[Je.trim().toLowerCase()]=Je});const ke=me.includes("curso");let ve=0;const ae=ue.map(Je=>{const De=Je[ge.nombre],Ee=Je[ge.correo],Ge=Je[ge.perfil];if(!De||!Ee||!Ge)return null;const tt=String(Ge).trim();return tt===nn.ESTUDIANTE||!Object.values(nn).includes(tt)?(console.warn(`Perfil inválido o de estudiante omitido: ${tt}`),null):ke&&Je[ge.curso]?(console.warn(`Fila omitida: El perfil '${tt}' es para personal, pero se encontró una columna 'Curso' con datos. Use la carga de Estudiantes para este tipo de archivo.`),ve++,null):{id:crypto.randomUUID(),nombreCompleto:String(De).trim(),email:String(Ee).trim(),profile:tt}}).filter(Je=>Je!==null&&!t.some(De=>De.email.toLowerCase()===Je.email.toLowerCase()));ae.length>0&&F([...ae,...t]);let Re=`Carga completada. Se agregaron ${ae.length} nuevos miembros del personal.`;ve>0&&(Re+=` Se omitieron ${ve} filas porque parecían ser de estudiantes (contenían una columna 'Curso'). Por favor, use la opción 'Cargar Estudiantes' para ellas.`),k({message:Re,isError:!1})}catch(W){k({message:`Error: ${W.message}`,isError:!0})}finally{q.target&&(q.target.value="")}},Z.readAsArrayBuffer(se)},K="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:u.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[u.jsx("button",{onClick:()=>r("Usuarios"),className:`${n==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),u.jsx("button",{onClick:()=>r("Monitor de Uso"),className:`${n==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),n==="Usuarios"&&u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:i?"Editando usuario":"Agregar nuevo usuario"}),u.jsxs("form",{onSubmit:N,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),u.jsx("input",{type:"text",name:"nombreCompleto",value:s.nombreCompleto,onChange:D,className:K,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),u.jsx("input",{type:"email",name:"email",value:s.email,onChange:D,className:K,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),u.jsx("input",{type:"password",name:"password",value:s.password||"",onChange:D,placeholder:"Dejar en blanco para no cambiar",className:K})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),u.jsx("input",{type:"text",name:"rut",value:s.rut||"",onChange:D,placeholder:"12.345.678-9",className:K})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),u.jsx("select",{name:"profile",value:s.profile,onChange:D,className:K,required:!0,children:AF.map(q=>u.jsx("option",{value:q,children:q},q))})]}),s.profile===nn.ESTUDIANTE&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),u.jsxs("select",{name:"curso",value:s.curso,onChange:D,className:K,required:!0,children:[u.jsx("option",{value:"",children:"Seleccione un curso"}),$s.map(q=>u.jsx("option",{value:q,children:q},q))]})]})]}),s.profile===nn.PROFESORADO&&u.jsxs("div",{className:"lg:col-span-3 mt-6 pt-6 border-t dark:border-slate-700",children:[u.jsx("h3",{className:"text-lg font-semibold mb-3 text-slate-800 dark:text-slate-200",children:"Asignaciones de Profesor"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("fieldset",{className:"p-4 border rounded-lg dark:border-slate-600",children:[u.jsx("legend",{className:"font-semibold px-2 text-slate-700 dark:text-slate-300",children:"Cursos Asignados"}),u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-2 max-h-48 overflow-y-auto mt-2",children:$s.map(q=>u.jsxs("label",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",checked:(s.cursos||[]).includes(q),onChange:()=>P("cursos",q),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300"}),u.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:q})]},q))})]}),u.jsxs("fieldset",{className:"p-4 border rounded-lg dark:border-slate-600",children:[u.jsx("legend",{className:"font-semibold px-2 text-slate-700 dark:text-slate-300",children:"Asignaturas Asignadas"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2 max-h-48 overflow-y-auto mt-2",children:Ho.map(q=>u.jsxs("label",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",checked:(s.asignaturas||[]).includes(q),onChange:()=>P("asignaturas",q),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300"}),u.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 truncate",title:q,children:q})]},q))})]})]})]}),u.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center col-span-full pt-2",children:['Nota: La contraseña por defecto para todos los usuarios es "',u.jsx("strong",{children:"recoleta"}),'".']}),w&&u.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:w}),u.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[i&&u.jsx("button",{type:"button",onClick:S,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:i?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cargas Masivas desde Excel"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[u.jsx("h3",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:"Cargar Estudiantes"}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:["El archivo debe tener las columnas: ",u.jsx("strong",{children:"Nombre"}),", ",u.jsx("strong",{children:"Correo"}),", ",u.jsx("strong",{children:"Curso"}),"."]}),u.jsx("input",{type:"file",onChange:G,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-sky-50 file:text-sky-700 hover:file:bg-sky-100"}),E&&u.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${E.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:E.message})]}),u.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[u.jsx("h3",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:"Cargar Personal (Profesores, etc.)"}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:["El archivo debe tener las columnas: ",u.jsx("strong",{children:"Nombre"}),", ",u.jsx("strong",{children:"Correo"}),", ",u.jsx("strong",{children:"Perfil"}),"."]}),u.jsx("input",{type:"file",onChange:ie,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100"}),I&&u.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${I.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:I.message})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[u.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:l,onChange:q=>A(q.target.value),className:K}),u.jsxs("select",{value:d,onChange:q=>h(q.target.value),className:K,children:[u.jsx("option",{value:"",children:"Filtrar por Perfil"}),AF.map(q=>u.jsx("option",{value:q,children:q},q))]}),u.jsxs("select",{value:p,onChange:q=>g(q.target.value),className:K,children:[u.jsx("option",{value:"",children:"Filtrar por Curso"}),U.map(q=>u.jsx("option",{value:q,children:q},q))]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Nombre Completo"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Email"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Perfil / Curso"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:O.map(q=>u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:q.nombreCompleto}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:q.email}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:u.jsxs("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-sky-100 text-sky-800 dark:bg-sky-900/50 dark:text-sky-300",children:[q.profile," ",q.curso&&`(${q.curso})`]})}),u.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[u.jsx("button",{onClick:()=>T(q),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),u.jsx("button",{onClick:()=>V(q.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},q.id))})]})})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Gestión de Contraseñas Masivas"}),u.jsx("div",{className:"p-4 border-l-4 border-red-500 bg-red-50 dark:bg-red-900/20",children:u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:u.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),u.jsx("div",{className:"ml-3",children:u.jsx("p",{className:"text-sm text-red-700 dark:text-red-200",children:"Esta acción restablecerá las contraseñas de TODOS los usuarios a la contraseña por defecto ('recoleta'). Úselo con precaución."})})]})}),u.jsx("div",{className:"mt-4",children:u.jsxs("button",{onClick:M,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 flex items-center gap-2",children:[u.jsx(Xme,{}),"Restablecer Todas las Contraseñas"]})})]})]}),n==="Monitor de Uso"&&u.jsx(Jme,{})]})},dF="seguimientoDualRecords",epe={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},tpe=({record:t,onSave:e,onClose:n})=>{const[r,s]=ee.useState(t),a="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=l=>{const{name:A,value:d,type:h,checked:p}=l.target;s(g=>({...g,[A]:h==="checkbox"?p:d}))},o=()=>{e(r)};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:n,children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[u.jsxs("div",{className:"p-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:t.nombreEstudiante}),u.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[u.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[u.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{htmlFor:`f1s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),u.jsx("input",{id:`f1s1-${t.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:r.fecha1raSupervision1erSemestre||"",onChange:i,className:a})]}),u.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[u.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!r.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),u.jsx("span",{children:"Realizada"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{htmlFor:`f2s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),u.jsx("input",{id:`f2s1-${t.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:r.fecha2daSupervision1erSemestre||"",onChange:i,className:a})]}),u.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[u.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!r.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),u.jsx("span",{children:"Realizada"})]})]})]}),u.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[u.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{htmlFor:`f1s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),u.jsx("input",{id:`f1s2-${t.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:r.fecha1raSupervision2doSemestre||"",onChange:i,className:a})]}),u.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[u.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!r.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),u.jsx("span",{children:"Realizada"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{htmlFor:`f2s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),u.jsx("input",{id:`f2s2-${t.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:r.fecha2daSupervision2doSemestre||"",onChange:i,className:a})]}),u.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[u.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!r.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),u.jsx("span",{children:"Realizada"})]})]})]}),u.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[u.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{htmlFor:`fex-${t.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),u.jsx("input",{id:`fex-${t.id}`,type:"date",name:"fechaSupervisionExcepcional",value:r.fechaSupervisionExcepcional||"",onChange:i,className:a})]}),u.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[u.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!r.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),u.jsx("span",{children:"Realizada"})]})]})]}),u.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[u.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:`mg-nombre-${t.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),u.jsx("input",{id:`mg-nombre-${t.id}`,type:"text",name:"nombreMaestroGuia",value:r.nombreMaestroGuia||"",onChange:i,className:a+" mt-1"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:`mg-contacto-${t.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),u.jsx("input",{id:`mg-contacto-${t.id}`,type:"text",name:"contactoMaestroGuia",value:r.contactoMaestroGuia||"",onChange:i,className:a+" mt-1"})]})]})]})]})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[u.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),u.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},npe=()=>{const[t,e]=ee.useState([]),n=ee.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:Qf[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:Fb[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[r,s]=ee.useState(n),[a,i]=ee.useState(null),[o,l]=ee.useState(""),[A,d]=ee.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[h,p]=ee.useState(null),[g,w]=ee.useState(null),[b,E]=ee.useState(!1),[B,I]=ee.useState(null);ee.useEffect(()=>{try{const q=localStorage.getItem(dF);q&&e(JSON.parse(q))}catch(q){console.error("Error al cargar datos de localStorage",q)}},[]);const k=ee.useCallback(q=>{e(q),localStorage.setItem(dF,JSON.stringify(q))},[]),F=ee.useCallback(q=>{const{name:se,value:Z}=q.target;s(X=>({...X,[se]:Z}))},[]),D=ee.useCallback(q=>{const{name:se,value:Z}=q.target;d(X=>({...X,[se]:Z}))},[]),P=ee.useCallback(()=>{s(n),i(null),p(null)},[n]),S=ee.useCallback(q=>{q.preventDefault();const Z=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(de=>!r[de].trim());if(Z){p(`El campo '${Z}' es obligatorio.`);return}const X=a?t.map(de=>de.id===a?{...de,...r}:de):[{...r,id:crypto.randomUUID()},...t];k(X),P()},[r,a,t,k,P]),N=ee.useCallback(q=>{window.scrollTo({top:0,behavior:"smooth"}),i(q.id),s(q)},[]),T=ee.useCallback(q=>{window.confirm("¿Está seguro de que desea eliminar este registro?")&&k(t.filter(se=>se.id!==q))},[t,k]),V=q=>{I(q),E(!0)},M=()=>{I(null),E(!1)},U=q=>{const se=t.map(Z=>Z.id===q.id?q:Z);k(se),M()},O=()=>{const q=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],se=bl.aoa_to_sheet([q]),Z=bl.book_new();bl.book_append_sheet(Z,se,"Plantilla"),NS(Z,"Plantilla_Seguimiento_Dual.xlsx")},G=q=>{var X;const se=(X=q.target.files)==null?void 0:X[0];if(!se)return;w({message:"Procesando archivo...",isError:!1});const Z=new FileReader;Z.onload=de=>{var j;try{const W=new Uint8Array((j=de.target)==null?void 0:j.result),J=Qg(W,{type:"array",cellDates:!0}),ne=J.SheetNames[0],oe=J.Sheets[ne],ue=bl.sheet_to_json(oe);if(ue.length===0)throw new Error("El archivo está vacío.");const me={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},ge=Object.keys(ue[0]).map(Re=>Re.trim().toLowerCase()),ve=["nombre","rut","curso 2025","empresa","estado"].find(Re=>!ge.includes(Re));if(ve)throw new Error(`Falta la columna requerida: '${ve}'`);const ae=ue.map(Re=>{const Je={id:crypto.randomUUID()};for(const De in Re){const Ee=me[De.trim().toLowerCase()];if(Ee){let Ge=Re[De];Ge instanceof Date&&(Ge=Ge.toISOString().split("T")[0]),typeof Ge=="boolean"||typeof Ge=="string"&&(Ge.toLowerCase()==="true"||Ge.toLowerCase()==="false")?Je[Ee]=String(Ge).toLowerCase()==="true":Je[Ee]=Ge}}return!Je.nombreEstudiante||!Je.rutEstudiante?null:Je}).filter(Boolean);ae.length>0?(k([...ae,...t]),w({message:`Carga exitosa. Se agregaron ${ae.length} nuevos registros.`,isError:!1})):w({message:"No se encontraron nuevos registros válidos para agregar.",isError:!1})}catch(W){console.error(W),w({message:`Error al procesar el archivo: ${W.message}`,isError:!0})}},Z.readAsArrayBuffer(se)},ie="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",K=ee.useMemo(()=>t.filter(q=>(o===""||q.nombreEstudiante.toLowerCase().includes(o.toLowerCase())||q.nombreEmpresa.toLowerCase().includes(o.toLowerCase())||q.rutEstudiante.includes(o))&&(A.curso===""||q.curso===A.curso)&&(A.empresa===""||q.nombreEmpresa===A.empresa)&&(A.estado===""||q.estado===A.estado)&&(A.comuna===""||q.comuna===A.comuna)&&(A.profesor===""||q.profesorTutorEmpresa===A.profesor)).sort((q,se)=>q.nombreEstudiante.localeCompare(se.nombreEstudiante)),[t,o,A]);return ee.useMemo(()=>{const q=new Set,se=new Set;return t.forEach(Z=>{Z.nombreEmpresa&&q.add(Z.nombreEmpresa),Z.comuna&&se.add(Z.comuna)}),{empresas:Array.from(q).sort(),comunas:Array.from(se).sort()}},[t]),u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Práctica Dual"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:a?"Editando registro existente.":"Registre un nuevo estudiante en práctica."}),u.jsxs("form",{onSubmit:S,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),u.jsx("input",{type:"text",name:"nombreEstudiante",value:r.nombreEstudiante,onChange:F,className:ie,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),u.jsx("input",{type:"text",name:"rutEstudiante",value:r.rutEstudiante,onChange:F,className:ie,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),u.jsx("select",{name:"curso",value:r.curso,onChange:F,className:ie,required:!0,children:Qf.map(q=>u.jsx("option",{value:q,children:q},q))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),u.jsxs("select",{name:"profesorTutorEmpresa",value:r.profesorTutorEmpresa,onChange:F,className:ie,children:[u.jsx("option",{value:"",children:"Seleccione un profesor"}),TE.map(q=>u.jsx("option",{value:q,children:q},q))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),u.jsx("input",{type:"text",name:"nombreEmpresa",value:r.nombreEmpresa,onChange:F,className:ie,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),u.jsx("input",{type:"text",name:"rutEmpresa",value:r.rutEmpresa,onChange:F,className:ie})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),u.jsx("input",{type:"text",name:"direccionEmpresa",value:r.direccionEmpresa,onChange:F,className:ie})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),u.jsx("input",{type:"text",name:"comuna",value:r.comuna,onChange:F,className:ie})]}),u.jsxs("div",{className:"lg:col-span-4",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),u.jsx("select",{name:"estado",value:r.estado,onChange:F,className:ie,children:Fb.map(q=>u.jsx("option",{value:q,children:q},q))})]})]}),r.estado==="Desvinculado"&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),u.jsx("input",{type:"date",name:"fechaDesvinculacion",value:r.fechaDesvinculacion||"",onChange:F,className:`${ie} border-red-300`})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),u.jsx("input",{type:"text",name:"motivoDesvinculacion",value:r.motivoDesvinculacion||"",onChange:F,className:`${ie} border-red-300`})]})]}),h&&u.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:h}),u.jsxs("div",{className:"flex justify-end items-center gap-4",children:[a&&u.jsx("button",{type:"button",onClick:P,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:a?"Actualizar":"Agregar"})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[u.jsx("button",{onClick:O,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),u.jsx("input",{type:"file",onChange:G,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),g&&u.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${g.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:g.message})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Registros de Estudiantes"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[u.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:o,onChange:q=>l(q.target.value),className:`${ie} md:col-span-2 lg:col-span-1`}),u.jsxs("select",{name:"curso",value:A.curso,onChange:D,className:ie,children:[u.jsx("option",{value:"",children:"Todos los Cursos"}),Qf.map(q=>u.jsx("option",{children:q},q))]}),u.jsxs("select",{name:"estado",value:A.estado,onChange:D,className:ie,children:[u.jsx("option",{value:"",children:"Todos los Estados"}),Fb.map(q=>u.jsx("option",{children:q},q))]}),u.jsxs("select",{name:"profesor",value:A.profesor,onChange:D,className:ie,children:[u.jsx("option",{value:"",children:"Todos los Profesores"}),TE.map(q=>u.jsx("option",{children:q},q))]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:K.map(q=>u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[u.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[u.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:q.nombreEstudiante}),u.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:q.curso})]}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:q.nombreEmpresa}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:q.profesorTutorEmpresa}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${epe[q.estado]}`,children:q.estado})}),u.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[u.jsx("button",{onClick:()=>V(q),className:"text-blue-600 hover:underline",children:"Supervisión"}),u.jsx("button",{onClick:()=>N(q),className:"text-yellow-600 hover:underline",children:"Editar"}),u.jsx("button",{onClick:()=>T(q.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},q.id))})]})})]}),b&&B&&u.jsx(tpe,{record:B,onClose:M,onSave:U})]})},fF="actividadesRemotas",rpe="respuestasActividades",spe="usuariosLiceo",hC={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3]},ape=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result),r.onerror=s=>n(s)}),ipe=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState([]),[s,a]=ee.useState([]),[i,o]=ee.useState(null),[l,A]=ee.useState(!1),[d,h]=ee.useState(!1),[p,g]=ee.useState(null),[w,b]=ee.useState(""),[E,B]=ee.useState(null),[I,k]=ee.useState([]),F={asignatura:Ho[0],nivel:f2[0],contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[D,P]=ee.useState(F);ee.useEffect(()=>{try{const oe=localStorage.getItem(fF);oe&&e(JSON.parse(oe));const ue=localStorage.getItem(rpe);ue&&r(JSON.parse(ue));const me=localStorage.getItem(spe);me&&a(JSON.parse(me))}catch(oe){console.error("Error al cargar datos desde localStorage",oe)}},[]);const S=oe=>{P(ue=>({...ue,[oe.target.name]:oe.target.value}))},N=oe=>{P(ue=>({...ue,recursos:{...ue.recursos,[oe.target.name]:oe.target.value}}))},T=oe=>{oe.target.files&&k(Array.from(oe.target.files))},V=oe=>{P(ue=>{const me=ue.tipos.includes(oe)?ue.tipos.filter(ke=>ke!==oe):[...ue.tipos,oe],ge={...ue.cantidadPreguntas};return me.includes(oe)?ge[oe]||(ge[oe]=hC[oe][0]):delete ge[oe],{...ue,tipos:me,cantidadPreguntas:ge}})},M=(oe,ue)=>{P(me=>({...me,cantidadPreguntas:{...me.cantidadPreguntas,[oe]:ue}}))},U=oe=>{P(ue=>{var ge;const me=(ge=ue.cursosDestino)!=null&&ge.includes(oe)?ue.cursosDestino.filter(ke=>ke!==oe):[...ue.cursosDestino||[],oe];return{...ue,cursosDestino:me}})},O=oe=>{P(ue=>{var ge;const me=(ge=ue.estudiantesDestino)!=null&&ge.includes(oe)?ue.estudiantesDestino.filter(ke=>ke!==oe):[...ue.estudiantesDestino||[],oe];return{...ue,estudiantesDestino:me}})},G=oe=>{const ue={Quiz:{type:Tt.ARRAY,items:{type:Tt.OBJECT,properties:{pregunta:{type:Tt.STRING},opciones:{type:Tt.ARRAY,items:{type:Tt.STRING}},respuestaCorrecta:{type:Tt.STRING}}}},"Comprensión de Lectura":{type:Tt.OBJECT,properties:{texto:{type:Tt.STRING},preguntas:{type:Tt.ARRAY,items:{type:Tt.OBJECT,properties:{pregunta:{type:Tt.STRING},opciones:{type:Tt.ARRAY,items:{type:Tt.STRING}},respuestaCorrecta:{type:Tt.STRING}}}}}},"Términos Pareados":{type:Tt.ARRAY,items:{type:Tt.OBJECT,properties:{id:{type:Tt.STRING},concepto:{type:Tt.STRING},definicion:{type:Tt.STRING}}}},Desarrollo:{type:Tt.ARRAY,items:{type:Tt.OBJECT,properties:{pregunta:{type:Tt.STRING},rubrica:{type:Tt.STRING}}}}},me={};return oe.forEach(ge=>{me[ge]=ue[ge]}),{type:Tt.OBJECT,properties:{introduccion:{type:Tt.STRING,description:"Una breve introducción motivadora para el estudiante sobre el tema."},actividades:{type:Tt.OBJECT,properties:me,required:oe}},required:["introduccion","actividades"]}},ie=()=>{const{tipos:oe,contenido:ue,asignatura:me,nivel:ge,cantidadPreguntas:ke}=D;let ve=`Eres un experto diseñador de actividades pedagógicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${ue}"
Asignatura: ${me}
Nivel: ${ge}

Genera los siguientes elementos:
- **introduccion**: Una breve introducción motivadora para el estudiante sobre el tema: "${ue}".
- **actividades**: Un objeto que contiene las actividades. Cada actividad es una propiedad con su nombre como clave:
`;return oe.forEach(ae=>{const Re=ke[ae]||hC[ae][0];switch(ae){case"Quiz":ve+=`- **Quiz**: Genera un quiz de ${Re} preguntas de selección múltiple sobre el contenido. Cada una con 4 opciones.
`;break;case"Comprensión de Lectura":ve+=`- **Comprensión de Lectura**: Genera ${Re} actividad(es) de comprensión. Cada una con un texto de 150-200 palabras y 4 preguntas de selección múltiple.
`;break;case"Términos Pareados":ve+=`- **Términos Pareados**: Genera ${Re} pares de términos pareados (concepto y definición).
`;break;case"Desarrollo":ve+=`- **Desarrollo**: Genera ${Re} pregunta(s) de desarrollo con una rúbrica simple en texto.
`;break}}),ve},K=async oe=>{if(oe.preventDefault(),!D.contenido.trim()||D.tipos.length===0){g("Contenido y al menos un tipo de actividad son obligatorios.");return}h(!0),g(null);try{const ue=await Promise.all(I.map(async Je=>({nombre:Je.name,url:await ape(Je)})));mo("Actividades Remotas");const me=new Sa({apiKey:void 0}),ge=ie(),ke=G(D.tipos),ve=await me.models.generateContent({model:"gemini-2.5-flash",contents:ge,config:{responseMimeType:"application/json",responseSchema:ke}}),ae=JSON.parse(ve.text),Re={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),...D,recursos:{...D.recursos,archivos:ue},introduccion:ae.introduccion,generatedContent:ae.actividades};B(Re)}catch(ue){console.error("Error al generar actividad con IA",ue),g("Error al generar la actividad. Por favor, revise el contenido e inténtelo de nuevo.")}finally{h(!1)}},q=()=>{if(!E)return;const oe=[E,...t];e(oe),localStorage.setItem(fF,JSON.stringify(oe)),P(F),k([]),A(!1),B(null),o(E)},se=ee.useMemo(()=>{var me,ge;if(!i||!s)return[];const oe=s.filter(ke=>{var ve;return ke.profile===nn.ESTUDIANTE&&((ve=i.cursosDestino)==null?void 0:ve.includes(ke.curso||""))}).map(ke=>ke.nombreCompleto),ue=i.estudiantesDestino||[];if(!((me=i.cursosDestino)!=null&&me.length)&&!((ge=i.estudiantesDestino)!=null&&ge.length)){const ke=i.nivel.charAt(0);return s.filter(ve=>{var ae;return ve.profile===nn.ESTUDIANTE&&((ae=ve.curso)==null?void 0:ae.startsWith(ke))}).map(ve=>ve.nombreCompleto).sort()}return Array.from(new Set([...oe,...ue])).sort()},[i,s]),Z=ee.useMemo(()=>n.filter(oe=>oe.actividadId===(i==null?void 0:i.id)),[n,i]),X=ee.useMemo(()=>s.filter(oe=>oe.profile===nn.ESTUDIANTE).sort((oe,ue)=>oe.nombreCompleto.localeCompare(ue.nombreCompleto)),[s]),de=ee.useMemo(()=>w.trim()?X.filter(oe=>oe.nombreCompleto.toLowerCase().includes(w.toLowerCase())):X,[X,w]),j=()=>u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:[i==null?void 0:i.asignatura," - ",i==null?void 0:i.tipos.join(", ")]}),u.jsxs("p",{className:"text-slate-500",children:["Nivel: ",i==null?void 0:i.nivel," | Plazo: ",i==null?void 0:i.plazoEntrega]})]}),u.jsx("button",{onClick:()=>o(null),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),u.jsxs("div",{className:"mt-6 border-t pt-6",children:[u.jsx("h3",{className:"text-xl font-bold text-slate-700 mb-4",children:"Resultados de Estudiantes"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[u.jsx("thead",{className:"bg-slate-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:se.map(oe=>{const ue=Z.find(me=>me.estudianteId===oe);return u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800",children:oe}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:ue?u.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):u.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:ue?`${ue.puntaje}/${ue.puntajeMaximo}`:"-"}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:ue?new Date(ue.fechaCompletado).toLocaleString("es-CL"):"-"})]},oe)})})]})})]})]}),W=()=>{var oe,ue;return u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Nueva Actividad Remota"}),u.jsx("button",{onClick:()=>A(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),u.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad interactiva para sus estudiantes."}),u.jsxs("form",{onSubmit:K,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),u.jsx("select",{name:"asignatura",value:D.asignatura,onChange:S,className:"w-full border-slate-300 rounded-md shadow-sm",children:Ho.map(me=>u.jsx("option",{value:me,children:me},me))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),u.jsx("select",{name:"nivel",value:D.nivel,onChange:S,className:"w-full border-slate-300 rounded-md shadow-sm",children:f2.map(me=>u.jsx("option",{value:me,children:me},me))})]}),u.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50",children:[u.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Recursos de Aprendizaje (Opcional)"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones de estudio"}),u.jsx("textarea",{name:"instrucciones",value:(oe=D.recursos)==null?void 0:oe.instrucciones,onChange:N,placeholder:"Ej: Lee el siguiente texto y luego responde...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces (videos, documentos, etc.)"}),u.jsx("textarea",{name:"enlaces",value:(ue=D.recursos)==null?void 0:ue.enlaces,onChange:N,placeholder:"Pega un enlace por línea...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos (PDF, imágenes, etc.)"}),u.jsx("input",{type:"file",multiple:!0,onChange:T,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),u.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50",children:[u.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Destinatarios"}),u.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione cursos o estudiantes. Si no selecciona ninguno, la actividad será visible para todo el nivel."}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:$s.map(me=>{var ge;return u.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:(ge=D.cursosDestino)==null?void 0:ge.includes(me),onChange:()=>U(me),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),u.jsx("span",{className:"text-sm font-medium text-slate-700",children:me})]},me)})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),u.jsx("input",{type:"text",placeholder:"Buscar...",value:w,onChange:me=>b(me.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:de.map(me=>{var ge;return u.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:(ge=D.estudiantesDestino)==null?void 0:ge.includes(me.nombreCompleto),onChange:()=>O(me.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),u.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:me.nombreCompleto,children:me.nombreCompleto})]},me.id)})})]})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),u.jsx("div",{className:"space-y-3",children:Tq.map(me=>u.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:D.tipos.includes(me),onChange:()=>V(me),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),u.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:me})]}),D.tipos.includes(me)&&u.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[u.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),hC[me].map(ge=>u.jsx("button",{type:"button",onClick:()=>M(me,ge),className:`px-3 py-1 rounded-full font-semibold text-xs ${D.cantidadPreguntas[me]===ge?"bg-amber-500 text-white":"bg-slate-200"}`,children:ge},ge))]})]},me))})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("textarea",{name:"contenido",value:D.contenido,onChange:S,required:!0,rows:4,placeholder:"Ingrese los temas, conceptos clave o el texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),u.jsx("input",{type:"date",name:"plazoEntrega",value:D.plazoEntrega,onChange:S,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),p&&u.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:p}),u.jsx("div",{className:"pt-4 text-right",children:u.jsx("button",{type:"submit",disabled:d,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:d?u.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Generar y Previsualizar"})})]})]})},J=()=>{var oe;return u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),u.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar la actividad."}),u.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[u.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[u.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),u.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:E==null?void 0:E.introduccion})]}),(E==null?void 0:E.recursos)&&(E.recursos.instrucciones||E.recursos.enlaces||((oe=E.recursos.archivos)==null?void 0:oe.length))&&u.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[u.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),u.jsxs("div",{className:"space-y-3",children:[E.recursos.instrucciones&&u.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:E.recursos.instrucciones}),E.recursos.enlaces&&u.jsx("div",{children:E.recursos.enlaces.split(`
`).map((ue,me)=>ue.trim()&&u.jsx("a",{href:ue,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:ue},me))}),E.recursos.archivos&&E.recursos.archivos.length>0&&u.jsx("ul",{className:"list-disc list-inside",children:E.recursos.archivos.map(ue=>u.jsx("li",{className:"text-slate-700",children:ue.nombre},ue.nombre))})]})]}),E==null?void 0:E.tipos.map(ue=>{const me=E.generatedContent[ue];return me?u.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[u.jsx("h3",{className:"text-xl font-bold mb-4",children:ue}),u.jsxs("div",{className:"space-y-4 text-sm",children:[ue==="Quiz"&&me.map((ge,ke)=>u.jsxs("div",{children:[u.jsxs("p",{className:"font-semibold",children:[ke+1,". ",ge.pregunta]}),u.jsx("ul",{className:"list-disc pl-5 mt-1",children:ge.opciones.map(ve=>u.jsx("li",{children:ve},ve))}),u.jsxs("p",{className:"text-xs text-green-600",children:["R: ",ge.respuestaCorrecta]})]},ke)),ue==="Comprensión de Lectura"&&u.jsxs("div",{children:[u.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-2 rounded",children:me.texto}),me.preguntas.map((ge,ke)=>u.jsxs("div",{className:"mt-2",children:[u.jsxs("p",{className:"font-semibold",children:[ke+1,". ",ge.pregunta]}),u.jsx("ul",{className:"list-disc pl-5 mt-1",children:ge.opciones.map(ve=>u.jsx("li",{children:ve},ve))}),u.jsxs("p",{className:"text-xs text-green-600",children:["R: ",ge.respuestaCorrecta]})]},ke))]}),ue==="Términos Pareados"&&u.jsx("ul",{className:"list-disc pl-5",children:me.map(ge=>u.jsxs("li",{children:[u.jsxs("strong",{children:[ge.concepto,":"]})," ",ge.definicion]},ge.id))}),ue==="Desarrollo"&&me.map((ge,ke)=>u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold",children:ge.pregunta}),u.jsxs("p",{className:"text-xs italic mt-1",children:["Rúbrica: ",ge.rubrica]})]},ke))]})]},ue):null})]}),u.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[u.jsx("button",{onClick:()=>B(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),u.jsx("button",{onClick:q,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700",children:"Confirmar y Asignar"})]})]})},ne=()=>u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),u.jsx("button",{onClick:()=>A(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),u.jsx("div",{className:"space-y-4",children:t.length>0?t.map(oe=>{var ge,ke;const ue=[];(ge=oe.cursosDestino)!=null&&ge.length&&ue.push(`Cursos: ${oe.cursosDestino.join(", ")}`),(ke=oe.estudiantesDestino)!=null&&ke.length&&ue.push(`Estudiantes: ${oe.estudiantesDestino.length}`);const me=ue.length?ue.join(" | "):`Todo ${oe.nivel}`;return u.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-bold text-slate-800",children:[oe.asignatura," - ",oe.tipos.join(", ")]}),u.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",me," | Creado: ",new Date(oe.fechaCreacion).toLocaleDateString("es-CL")]})]}),u.jsx("button",{onClick:()=>o(oe),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},oe.id)}):u.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Haga clic en "Crear Nueva" para comenzar.'})})]});return u.jsx("div",{className:"animate-fade-in",children:E?J():i?j():l?W():ne()})},ope="actividadesRemotas",mC="respuestasActividades",lpe=t=>[...t].sort(()=>Math.random()-.5),cpe=(t,e)=>{if(e===0)return"1.0";const r=e*.6;let s;return t>=r?s=4+(t-r)*3/(e-r):s=1+t*3/(r||1),s=Math.max(1,Math.min(7,s)),s.toFixed(1)},hF=()=>u.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Ape=({actividad:t,onComplete:e,currentUser:n})=>{var I,k,F,D;const[r,s]=ee.useState({}),[a,i]=ee.useState(!1),[o,l]=ee.useState(!1),[A,d]=ee.useState(!1),[h,p]=ee.useState({}),g=`progress-${n.id}-${t.id}`;ee.useEffect(()=>{const P={};t.tipos.forEach(S=>{if(S==="Términos Pareados"){const N=t.generatedContent[S];N&&(P[S]=lpe(N.map(T=>T.definicion)))}}),p(P);try{const S=localStorage.getItem(g);S&&s(JSON.parse(S))}catch(S){console.error("Could not load saved progress",S)}},[t,g]);const w=(P,S)=>{s(N=>({...N,[P]:S}))},b=()=>{l(!0),d(!1),setTimeout(()=>{try{localStorage.setItem(g,JSON.stringify(r)),d(!0),setTimeout(()=>d(!1),2e3)}catch(P){console.error("Could not save progress",P),alert("Error al guardar el progreso.")}finally{l(!1)}},500)},E=async()=>{i(!0);let P=0,S=0;const N=[],T={};for(const M of t.tipos){const U=t.generatedContent[M],O=r[M];if(M==="Quiz"||M==="Comprensión de Lectura"){const G=M==="Quiz"?U:U.preguntas,ie=O||{};let K=0,q=0;G.forEach((se,Z)=>{q+=1,ie[Z]===se.respuestaCorrecta&&(K+=1)}),P+=K,S+=q,N.push(`${M}: ${K}/${q} correctas.`),T[M]={puntaje:K,puntajeMaximo:q}}else if(M==="Términos Pareados"){const G=U,ie=O||{};let K=0,q=0;G.forEach(se=>{q+=2,ie[se.id]===se.definicion&&(K+=2)}),P+=K,S+=q,N.push(`${M}: ${K/2}/${G.length} correctas.`),T[M]={puntaje:K,puntajeMaximo:q}}else if(M==="Desarrollo"){const G=U,ie=O||{};let K=0,q=0;for(let se=0;se<G.length;se++){const Z=G[se];q+=3;try{mo("Autoaprendizaje - Evaluar Desarrollo");const X=new Sa({apiKey:void 0}),de=`Evalúa la siguiente respuesta de un estudiante a la pregunta de desarrollo, basándote en la rúbrica proporcionada. Asigna un puntaje de 0 a 3. Pregunta: "${Z.pregunta}". Rúbrica: "${Z.rubrica}". Respuesta: "${ie[se]||""}". Proporciona también una frase corta de feedback.`,j={type:Tt.OBJECT,properties:{puntaje:{type:Tt.INTEGER,description:"Un puntaje de 0 a 3."},feedback:{type:Tt.STRING}},required:["puntaje","feedback"]},W=await X.models.generateContent({model:"gemini-2.5-flash",contents:de,config:{responseMimeType:"application/json",responseSchema:j}}),J=JSON.parse(W.text),ne=Math.max(0,Math.min(3,J.puntaje||0));K+=ne,N.push(`${M} #${se+1}: Puntaje ${ne}/3. (${J.feedback})`)}catch(X){console.error(X),N.push(`${M} #${se+1}: No se pudo evaluar automáticamente.`)}}P+=K,S+=q,T[M]={puntaje:K,puntajeMaximo:q}}}let V=`¡Buen trabajo! Tu puntaje total es ${P} de ${S}.`;e({respuestas:r,puntaje:P,puntajeMaximo:S,retroalimentacion:V,calificacion:cpe(P,S),puntajesPorSeccion:T}),localStorage.removeItem(g),i(!1)},B=t.recursos&&(t.recursos.instrucciones||t.recursos.enlaces||((I=t.recursos.archivos)==null?void 0:I.length));return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"p-4 bg-sky-50 dark:bg-sky-900/30 border-l-4 border-sky-400 rounded-r-lg",children:[u.jsx("h2",{className:"text-xl font-bold text-sky-800 dark:text-sky-200 mb-2",children:"¡Hola!"}),u.jsx("p",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:t.introduccion})]}),B&&u.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/30 border-l-4 border-indigo-400 rounded-r-lg",children:[u.jsx("h2",{className:"text-xl font-bold text-indigo-800 dark:text-indigo-200 mb-3",children:"Material de Estudio"}),u.jsxs("div",{className:"space-y-4",children:[((k=t.recursos)==null?void 0:k.instrucciones)&&u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Instrucciones:"}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:t.recursos.instrucciones})]}),((F=t.recursos)==null?void 0:F.enlaces)&&u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Enlaces:"}),t.recursos.enlaces.split(`
`).map((P,S)=>P.trim()&&u.jsx("a",{href:P,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-500 hover:underline truncate",children:P},S))]}),((D=t.recursos)==null?void 0:D.archivos)&&t.recursos.archivos.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Archivos:"}),u.jsx("ul",{className:"list-disc list-inside",children:t.recursos.archivos.map((P,S)=>u.jsx("li",{children:u.jsx("a",{href:P.url,download:P.nombre,className:"text-blue-500 hover:underline",children:P.nombre})},S))})]})]})]}),t.tipos.map(P=>{const S=t.generatedContent[P];if(!S)return null;switch(P){case"Quiz":case"Comprensión de Lectura":{const N=P==="Quiz",T=S,V=N?T:T.preguntas;return u.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[u.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:P}),!N&&u.jsx("div",{className:"mb-4 whitespace-pre-wrap bg-slate-50 dark:bg-slate-700/50 p-3 rounded text-slate-700 dark:text-slate-300",children:T.texto}),u.jsx("div",{className:"space-y-6",children:V.map((M,U)=>u.jsxs("div",{children:[u.jsxs("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:[U+1,". ",M.pregunta]}),u.jsx("div",{className:"mt-2 space-y-2",children:M.opciones.map((O,G)=>{var ie;return u.jsxs("label",{className:"flex items-center gap-3 p-3 rounded hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer text-slate-600 dark:text-slate-300",children:[u.jsx("input",{type:"radio",name:`q-${P}-${U}-${t.id}`,value:O,checked:((ie=r[P])==null?void 0:ie[U])===O,onChange:()=>w(P,{...r[P]||{},[U]:O}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400"}),u.jsx("span",{children:O})]},G)})})]},`${P}-${U}`))})]},P)}case"Términos Pareados":{const N=S,T=h[P]||[];return u.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[u.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:P}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Concepto"}),N.map(V=>u.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-700 rounded h-14 flex items-center justify-center text-center font-medium text-slate-700 dark:text-slate-300",children:V.concepto},V.id))]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Definición"}),N.map(V=>{var M;return u.jsx("div",{className:"h-14 flex items-center",children:u.jsxs("select",{value:((M=r[P])==null?void 0:M[V.id])||"",onChange:U=>w(P,{...r[P]||{},[V.id]:U.target.value}),className:"w-full h-full border-slate-300 rounded-md shadow-sm text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300",children:[u.jsx("option",{value:"",children:"Seleccionar definición..."}),T.map((U,O)=>u.jsx("option",{value:U,children:U},O))]})},V.id)})]})]})]},P)}case"Desarrollo":{const N=S;return u.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[u.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:P}),N.map((T,V)=>{var M;return u.jsxs("div",{className:"mb-6",children:[u.jsx("p",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:T.pregunta}),u.jsxs("p",{className:"text-sm italic text-slate-500 dark:text-slate-400 mb-4",children:[u.jsx("strong",{children:"Rúbrica:"})," ",T.rubrica]}),u.jsx("textarea",{value:((M=r[P])==null?void 0:M[V])||"",onChange:U=>w(P,{...r[P]||{},[V]:U.target.value}),rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300"})]},V)})]},P)}default:return null}}),u.jsxs("div",{className:"text-right mt-8 flex justify-end gap-4",children:[u.jsx("button",{onClick:b,disabled:a||o||A,className:"bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-700 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center min-w-[200px] transition-colors duration-200",children:o?u.jsxs(u.Fragment,{children:[u.jsx(hF,{})," Guardando..."]}):A?"✓ Guardado":"Guardar Progreso"}),u.jsx("button",{onClick:E,disabled:a||o,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:a?u.jsxs(u.Fragment,{children:[u.jsx(hF,{})," Evaluando..."]}):"Entregar Actividad"})]})]})},upe=({currentUser:t})=>{const[e,n]=ee.useState([]),[r,s]=ee.useState([]),[a,i]=ee.useState(null),[o,l]=ee.useState("list"),[A,d]=ee.useState(null),[h,p]=ee.useState(null);ee.useEffect(()=>{try{const E=localStorage.getItem(ope);if(E){const I=JSON.parse(E),k=t.curso||"",F=t.nombreCompleto,D=I.filter(P=>{var V,M,U,O;const S=!((V=P.cursosDestino)!=null&&V.length)&&!((M=P.estudiantesDestino)!=null&&M.length),N=((U=P.cursosDestino)==null?void 0:U.includes(k))??!1,T=((O=P.estudiantesDestino)==null?void 0:O.includes(F))??!1;if(N||T)return!0;if(S&&k){const G=P.nivel.charAt(0),ie=k.charAt(0);return G===ie}return!1});n(D)}const B=localStorage.getItem(mC);if(B){const I=JSON.parse(B).filter(k=>k.estudianteId===t.nombreCompleto);s(I)}}catch(E){console.error("Error loading data",E)}},[t]);const g=E=>{p(E)},w=()=>{h&&(i(h),l("activity"),p(null))},b=ee.useCallback(async E=>{if(!a)return;let B;const I=`
            Un estudiante ha completado una actividad sobre "${a.contenido}".
            Su puntaje total fue ${E.puntaje} de ${E.puntajeMaximo}.
            Detalle por sección: ${JSON.stringify(E.puntajesPorSeccion||{})}
            Respuestas de desarrollo: ${JSON.stringify(E.respuestas.Desarrollo||{})}
            
            Genera una retroalimentación detallada y constructiva en español. La respuesta DEBE ser un objeto JSON con la siguiente estructura:
            - "resumenGeneral": Un párrafo breve y motivador sobre el desempeño general.
            - "areasDeFortaleza": Un array de 2 o 3 strings destacando lo que hizo bien.
            - "areasDeMejora": Un array de 2 o 3 strings con áreas a mejorar.
            - "planDeMejora": Un array de 3 objetos, cada uno con "paso" (string, ej: "Repasar conceptos clave") y "detalle" (string, una sugerencia concreta).
            - "feedbackPorSeccion": Un objeto donde cada clave es el tipo de actividad (ej: "Quiz") y el valor es un string con feedback específico para esa sección.
        `;try{mo("Autoaprendizaje - Retroalimentación Detallada");const S=await new Sa({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:I,config:{responseMimeType:"application/json"}});B=JSON.parse(S.text.trim().replace(/(\*\*|\*)/g,""))}catch(P){console.error("Error generating detailed feedback:",P)}const k={id:crypto.randomUUID(),actividadId:a.id,estudianteId:t.nombreCompleto,fechaCompletado:new Date().toISOString(),...E,retroalimentacionDetallada:B},F=JSON.parse(localStorage.getItem(mC)||"[]"),D=[k,...F.filter(P=>!(P.actividadId===k.actividadId&&P.estudianteId===k.estudianteId))];localStorage.setItem(mC,JSON.stringify(D)),s(P=>[k,...P.filter(S=>S.actividadId!==k.actividadId)]),d(k),l("result")},[a,t.nombreCompleto]);if(o==="activity"&&a)return u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("h1",{className:"text-3xl font-bold text-slate-800",children:[a.asignatura,": ",a.tipos.join(", ")]}),u.jsxs("p",{className:"text-slate-500 mb-6",children:["Plazo: ",a.plazoEntrega]}),u.jsx(Ape,{actividad:a,onComplete:b,currentUser:t})]});if(o==="result"&&A){const E=A.retroalimentacionDetallada,B=A.puntajesPorSeccion||{},I=(k,F)=>{const D=F>0?k/F:0;return D<.4?"bg-red-100 text-red-800":D<.7?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"};return u.jsxs("div",{className:"space-y-6",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Retroalimentación de la Actividad"}),E?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Retroalimentación General"}),u.jsx("p",{className:"text-slate-600 mb-6",children:E.resumenGeneral}),u.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-4 rounded-lg mb-6",children:[u.jsx("span",{className:"text-lg font-bold",children:"Puntaje Total:"}),u.jsxs("span",{className:`px-4 py-2 text-xl font-bold rounded-full ${I(A.puntaje,A.puntajeMaximo)}`,children:[A.puntaje," / ",A.puntajeMaximo]})]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-green-600 mb-2",children:"✓ Áreas de Fortaleza"}),u.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:E.areasDeFortaleza.map((k,F)=>u.jsx("li",{children:k},F))})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-red-600 mb-2",children:"✗ Áreas de Mejora"}),u.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:E.areasDeMejora.map((k,F)=>u.jsx("li",{children:k},F))})]})]})]}),u.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Object.entries(B).map(([k,{puntaje:F,puntajeMaximo:D}])=>{var P;return u.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("h3",{className:"text-xl font-bold",children:k}),u.jsxs("span",{className:`px-3 py-1 text-sm font-bold rounded-full ${I(F,D)}`,children:[F," / ",D]})]}),u.jsx("p",{className:"text-slate-500 text-sm",children:(P=E.feedbackPorSeccion)==null?void 0:P[k]})]},k)})}),u.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Plan de Mejora Sugerido"}),u.jsx("div",{className:"space-y-4",children:E.planDeMejora.map((k,F)=>u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"bg-blue-500 text-white rounded-full h-8 w-8 flex-shrink-0 flex items-center justify-center font-bold mt-1",children:"✓"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:k.paso}),u.jsx("p",{className:"text-slate-600 text-sm",children:k.detalle})]})]},F))})]})]}):u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md text-center",children:[u.jsx("h2",{className:"text-3xl font-bold text-green-600 mb-4",children:"¡Actividad Completada!"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-sm mx-auto my-8",children:[u.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[u.jsx("p",{className:"text-sm text-slate-500",children:"Puntaje"}),u.jsxs("p",{className:"text-2xl font-bold",children:[A.puntaje," / ",A.puntajeMaximo]})]}),u.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[u.jsx("p",{className:"text-sm text-slate-500",children:"Calificación"}),u.jsx("p",{className:"text-2xl font-bold",children:A.calificacion})]})]}),u.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg text-left",children:[u.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Retroalimentación"}),u.jsx("p",{className:"text-blue-700 whitespace-pre-wrap",children:A.retroalimentacion})]})]}),u.jsx("button",{onClick:()=>{l("list"),d(null)},className:"w-full mt-4 bg-slate-800 text-white font-bold py-3 px-6 rounded-lg hover:bg-slate-700",children:"Volver a Actividades"})]})}return u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[h&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full animate-fade-in-up",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Confirmar inicio de actividad"}),u.jsxs("p",{className:"mt-4 text-slate-600",children:["¿Estás seguro de que deseas comenzar esta actividad? ",u.jsx("strong",{children:"Tendrás solo una oportunidad para responder."})]}),u.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Sin embargo, puedes guardar tu progreso antes de enviarlo. Una vez enviado, no habrá una segunda oportunidad."}),u.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[u.jsx("button",{onClick:()=>p(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),u.jsx("button",{onClick:w,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Sí, comenzar"})]})]})}),u.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Auto-aprendizaje"}),u.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades remotas asignadas por tus profesores."}),u.jsx("div",{className:"space-y-4",children:e.length>0?e.map(E=>{const B=r.find(k=>k.actividadId===E.id),I=!!B;return u.jsx("div",{className:`p-4 border rounded-lg ${I?"bg-green-50":"bg-slate-50"}`,children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-bold text-slate-800",children:[E.asignatura," - ",E.tipos.join(", ")]}),u.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",E.plazoEntrega]})]}),I?u.jsxs("div",{className:"text-right",children:[u.jsx("button",{onClick:()=>{d(B),l("result")},className:"font-semibold text-blue-700 hover:underline",children:"Ver Resultados"}),u.jsxs("p",{className:"text-sm text-slate-600",children:["Puntaje: ",B.puntaje,"/",B.puntajeMaximo]})]}):u.jsx("button",{onClick:()=>g(E),className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Comenzar"})]})},E.id)}):u.jsx("p",{className:"text-center text-slate-500 py-10",children:"No hay actividades disponibles en este momento."})})]})},mF="estudiantesInclusion",dpe="usuariosLiceo",fpe=({student:t,onClose:e,onSave:n,profesores:r})=>{const[s,a]=ee.useState("intervenciones"),[i,o]=ee.useState(t),[l,A]=ee.useState(null),d={responsable:"",accion:"",observaciones:""},[h,p]=ee.useState(d),[g,w]=ee.useState({trimestre:"T1",meta:""}),[b,E]=ee.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[B,I]=ee.useState(null),[k,F]=ee.useState(!1),D={motivo:"",acuerdos:"",asistentes:""},[P,S]=ee.useState(D),N=()=>{n(i)},T=()=>{if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let ve;l?ve=(i.intervenciones||[]).map(Re=>Re.id===l.id?{...Re,...h}:Re):ve=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...i.intervenciones||[]];const ae=ve.sort((Re,Je)=>new Date(Je.fecha).getTime()-new Date(Re.fecha).getTime());o(Re=>({...Re,intervenciones:ae})),p(d),A(null)},V=ve=>{A(ve),p({responsable:ve.responsable,accion:ve.accion,observaciones:ve.observaciones})},M=ve=>{window.confirm("¿Eliminar esta intervención?")&&o(ae=>({...ae,intervenciones:(ae.intervenciones||[]).filter(Re=>Re.id!==ve)}))},U=ve=>{const{name:ae,value:Re}=ve.target;o(Je=>({...Je,[ae]:Re,fechaActualizacionApoyos:new Date().toISOString()}))},O=()=>{if(!g.meta.trim())return;const ve={...g,id:crypto.randomUUID(),cumplida:!1};o(ae=>({...ae,metasProgreso:[...ae.metasProgreso||[],ve]})),w({trimestre:"T1",meta:""})},G=ve=>{o(ae=>({...ae,metasProgreso:(ae.metasProgreso||[]).map(Re=>Re.id===ve?{...Re,cumplida:!Re.cumplida}:Re)}))},ie=ve=>{o(ae=>({...ae,metasProgreso:(ae.metasProgreso||[]).filter(Re=>Re.id!==ve)}))},K=ee.useMemo(()=>{const ve=i.metasProgreso||[];if(ve.length===0)return{percent:0,color:"bg-slate-300"};const ae=ve.filter(De=>De.cumplida).length,Re=Math.round(ae/ve.length*100),Je=Re<40?"bg-red-500":Re<75?"bg-yellow-500":"bg-green-500";return{percent:Re,color:Je}},[i.metasProgreso]),q=ee.useMemo(()=>{if(!i.fechaActualizacionApoyos)return!0;const ve=new Date(i.fechaActualizacionApoyos),ae=new Date;return ae.setMonth(ae.getMonth()-3),ve<ae},[i.fechaActualizacionApoyos]),se=()=>{if(!b.titulo.trim()||!b.fecha)return;const ve={...b,id:crypto.randomUUID(),resuelta:!1};o(ae=>({...ae,alertas:[...ae.alertas||[],ve].sort((Re,Je)=>new Date(Re.fecha).getTime()-new Date(Je.fecha).getTime())})),E({titulo:"",fecha:new Date().toISOString().split("T")[0]})},Z=ve=>{o(ae=>({...ae,alertas:(ae.alertas||[]).map(Re=>Re.id===ve?{...Re,resuelta:!Re.resuelta}:Re)}))},X=ve=>{o(ae=>({...ae,alertas:(ae.alertas||[]).filter(Re=>Re.id!==ve)}))},de=ve=>{ve.target.files&&ve.target.files[0]&&I(ve.target.files[0])},j=()=>{if(!B)return;F(!0);const ve=new FileReader;ve.readAsDataURL(B),ve.onloadend=()=>{const ae={id:crypto.randomUUID(),nombre:B.name,url:ve.result,fechaSubida:new Date().toISOString()};o(Re=>({...Re,archivos:[ae,...Re.archivos||[]]})),I(null),F(!1)},ve.onerror=()=>{alert("Error al leer el archivo."),F(!1)}},W=ve=>{window.confirm("¿Eliminar este archivo?")&&o(ae=>({...ae,archivos:(ae.archivos||[]).filter(Re=>Re.id!==ve)}))},J=()=>{if(!P.motivo.trim()||!P.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const ve={...P,id:crypto.randomUUID(),fecha:new Date().toISOString()};o(ae=>({...ae,reuniones:[ve,...ae.reuniones||[]].sort((Re,Je)=>new Date(Je.fecha).getTime()-new Date(Re.fecha).getTime())})),S(D)},ne=ve=>{window.confirm("¿Eliminar este registro de reunión?")&&o(ae=>({...ae,reuniones:(ae.reuniones||[]).filter(Re=>Re.id!==ve)}))},oe=()=>{var it,mt,Ct;const ve=new sn("p","mm","a4"),ae=20,Re=ve.internal.pageSize.getWidth(),Je=ve.internal.pageSize.getHeight();let De=ae;const Ee=At=>{At.setFontSize(10),At.setTextColor(100),At.text("Ficha de Seguimiento - Módulo Inclusión",ae,15)};Ee(ve),ve.setFontSize(18),ve.setFont("helvetica","bold"),ve.setTextColor(40),ve.text(i.nombre,ae,De+10),De+=15,ve.setFontSize(11),ve.setFont("helvetica","normal"),ve.setTextColor(80),ve.text(`Curso: ${i.curso}`,ae,De),ve.text(`Dificultad: ${i.dificultad}`,ae,De+6),De+=15;const Ge=At=>{De+At>Je-ae&&(ve.addPage(),Ee(ve),De=ae)},tt=At=>{Ge(15),ve.setFontSize(14),ve.setFont("helvetica","bold"),ve.text(At,ae,De),De+=10};if((it=i.intervenciones)!=null&&it.length&&(tt("Historial de Intervenciones"),Tl(ve,{startY:De,head:[["Fecha","Responsable","Acción","Observaciones"]],body:i.intervenciones.map(At=>[new Date(At.fecha).toLocaleDateString("es-CL"),At.responsable,At.accion,At.observaciones]),theme:"grid",didDrawPage:At=>Ee(ve)}),De=ve.lastAutoTable.finalY+10),i.adaptacionesCurriculares||i.apoyosRecibidos){Ge(30),tt("Seguimiento y Apoyos"),ve.setFontSize(11),ve.setFont("helvetica","normal");const At=`Adaptaciones: ${i.adaptacionesCurriculares||"No registradas."}
Apoyos: ${i.apoyosRecibidos||"No registrados."}`,Nt=ve.splitTextToSize(At,Re-ae*2);ve.text(Nt,ae,De),De+=Nt.length*5+10}(mt=i.metasProgreso)!=null&&mt.length&&(Ge(30),tt("Metas de Progreso"),Tl(ve,{startY:De,head:[["Trimestre","Meta","Estado"]],body:i.metasProgreso.map(At=>[At.trimestre,At.meta,At.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:At=>Ee(ve)}),De=ve.lastAutoTable.finalY+10),(Ct=i.reuniones)!=null&&Ct.length&&(tt("Reuniones con Apoderados"),Tl(ve,{startY:De,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:i.reuniones.map(At=>[new Date(At.fecha).toLocaleDateString("es-CL"),At.motivo,At.acuerdos,At.asistentes]),theme:"grid",didDrawPage:At=>Ee(ve)})),ve.save(`Ficha_Inclusion_${i.nombre.replace(/\s/g,"_")}.pdf`)},ue=()=>u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[u.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:l?"Editando Intervención":"Registrar Nueva Intervención"}),u.jsxs("select",{value:h.responsable,onChange:ve=>p(ae=>({...ae,responsable:ve.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Seleccione Responsable..."}),r.map(ve=>u.jsx("option",{value:ve,children:ve},ve))]}),u.jsx("textarea",{value:h.accion,onChange:ve=>p(ae=>({...ae,accion:ve.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("textarea",{value:h.observaciones,onChange:ve=>p(ae=>({...ae,observaciones:ve.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsxs("div",{className:"flex justify-end gap-2",children:[l&&u.jsx("button",{onClick:()=>{A(null),p(d)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md",children:"Cancelar Edición"}),u.jsx("button",{onClick:T,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:l?"Actualizar":"Guardar"})]})]}),u.jsx("div",{className:"space-y-3",children:(i.intervenciones||[]).map(ve=>u.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ve.accion}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:ve.observaciones}),u.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(ve.fecha).toLocaleString("es-CL")," - ",ve.responsable]})]}),u.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[u.jsx("button",{onClick:()=>V(ve),className:"text-blue-500",children:"✏️"}),u.jsx("button",{onClick:()=>M(ve.id),className:"text-red-500",children:"🗑️"})]})]})},ve.id))})]}),me=()=>u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),q&&u.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl",children:"⚠️"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),u.jsx("textarea",{name:"adaptacionesCurriculares",value:i.adaptacionesCurriculares||"",onChange:U,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),u.jsx("textarea",{name:"apoyosRecibidos",value:i.apoyosRecibidos||"",onChange:U,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),u.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[u.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",K.percent,"%"]}),u.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:u.jsx("div",{className:`${K.color} h-4 rounded-full transition-all duration-500`,style:{width:`${K.percent}%`}})})]}),u.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[u.jsxs("select",{value:g.trimestre,onChange:ve=>w(ae=>({...ae,trimestre:ve.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"T1",children:"T1"}),u.jsx("option",{value:"T2",children:"T2"}),u.jsx("option",{value:"T3",children:"T3"})]}),u.jsx("input",{value:g.meta,onChange:ve=>w(ae=>({...ae,meta:ve.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("button",{onClick:O,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm",children:"Agregar"})]}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(i.metasProgreso||[]).map(ve=>u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[u.jsx("input",{type:"checkbox",checked:ve.cumplida,onChange:()=>G(ve.id),className:"h-5 w-5 rounded text-amber-500"}),u.jsxs("span",{className:`flex-grow text-sm ${ve.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[u.jsxs("strong",{children:[ve.trimestre,":"]})," ",ve.meta]}),u.jsx("button",{onClick:()=>ie(ve.id),className:"text-red-500 text-sm",children:"🗑️"})]},ve.id))})]})]}),ge=()=>u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[u.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),u.jsx("input",{type:"text",value:b.titulo,onChange:ve=>E(ae=>({...ae,titulo:ve.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),u.jsx("input",{type:"date",value:b.fecha,onChange:ve=>E(ae=>({...ae,fecha:ve.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),u.jsx("button",{onClick:se,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md",children:"Agendar"})]}),u.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.alertas||[]).map(ve=>u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[u.jsx("input",{type:"checkbox",checked:ve.resuelta,onChange:()=>Z(ve.id),className:"h-5 w-5 rounded text-amber-500"}),u.jsxs("span",{className:`flex-grow text-sm ${ve.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[ve.titulo," (",new Date(ve.fecha+"T12:00:00").toLocaleDateString(),")"]}),u.jsx("button",{onClick:()=>X(ve.id),className:"text-red-500 text-sm",children:"🗑️"})]},ve.id))})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[u.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),u.jsx("input",{type:"file",onChange:de,className:"w-full text-sm"}),u.jsx("button",{onClick:j,disabled:!B||k,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400",children:k?"Subiendo...":"Subir"})]}),u.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.archivos||[]).map(ve=>u.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[u.jsx("a",{href:ve.url,download:ve.nombre,className:"text-sm text-blue-600 hover:underline truncate",children:ve.nombre}),u.jsx("button",{onClick:()=>W(ve.id),className:"text-red-500 text-sm ml-2",children:"🗑️"})]},ve.id))})]})]}),ke=()=>u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[u.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),u.jsx("input",{value:P.motivo,onChange:ve=>S(ae=>({...ae,motivo:ve.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("textarea",{value:P.acuerdos,onChange:ve=>S(ae=>({...ae,acuerdos:ve.target.value})),placeholder:"Acuerdos...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("input",{value:P.asistentes,onChange:ve=>S(ae=>({...ae,asistentes:ve.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("div",{className:"text-right",children:u.jsx("button",{onClick:J,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:"Guardar Reunión"})})]}),u.jsx("div",{className:"space-y-3",children:(i.reuniones||[]).map(ve=>u.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ve.motivo}),u.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[u.jsx("strong",{children:"Acuerdos:"})," ",ve.acuerdos]}),u.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(ve.fecha).toLocaleString("es-CL")," - Asistentes: ",ve.asistentes]})]}),u.jsx("button",{onClick:()=>ne(ve.id),className:"text-red-500 flex-shrink-0 ml-4",children:"🗑️"})]})},ve.id))})]});return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:ve=>ve.stopPropagation(),children:[u.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",t.nombre]}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.curso," - ",t.dificultad]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:oe,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200",children:"Exportar PDF"}),u.jsx("button",{onClick:e,className:"text-2xl text-slate-500 hover:text-slate-800",children:"×"})]})]}),u.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:u.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(ve=>u.jsx("button",{onClick:()=>a(ve),className:`${s===ve?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize`,children:ve==="alertas"?"Alertas y Archivos":ve==="seguimiento"?"Seguimiento y Metas":ve},ve))})}),u.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&ue(),s==="seguimiento"&&me(),s==="reuniones"&&ke(),s==="alertas"&&ge()]}),u.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[u.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cerrar"}),u.jsx("button",{onClick:N,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},hpe=({student:t,onClose:e,onConfirm:n})=>{const[r,s]=ee.useState(h2[0]),a=()=>{n(t,r)};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[u.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",t.nombreCompleto," al PIE"]}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),u.jsx("select",{id:"dificultad",value:r,onChange:i=>s(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:h2.map(i=>u.jsx("option",{value:i,children:i},i))})]}),u.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[u.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),u.jsx("button",{type:"button",onClick:a,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Confirmar e Ingresar"})]})]})})},pF=({currentUser:t})=>{const[e,n]=ee.useState([]),[r,s]=ee.useState([]),[a,i]=ee.useState(null),[o,l]=ee.useState(null),[A,d]=ee.useState(""),[h,p]=ee.useState(""),[g,w]=ee.useState("");ee.useEffect(()=>{try{const S=localStorage.getItem(mF);S&&n(JSON.parse(S));const N=localStorage.getItem(dpe);N&&s(JSON.parse(N))}catch(S){console.error("Error al cargar datos de Inclusión desde localStorage",S)}},[]);const b=ee.useCallback(S=>{n(S),localStorage.setItem(mF,JSON.stringify(S))},[]),E=(S,N)=>{if(e.some(V=>V.nombre===S.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const T={id:crypto.randomUUID(),nombre:S.nombreCompleto,curso:S.curso||"",dificultad:N,intervenciones:[],archivos:[],reuniones:[]};b([T,...e]),i(T)},B=S=>{b(e.map(N=>N.id===S.id?S:N)),i(S)},I=S=>{window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión?")&&(b(e.filter(N=>N.id!==S)),(a==null?void 0:a.id)===S&&i(null))},k=S=>{const N=D.map(T=>({Nombre:T.nombre,Curso:T.curso,Dificultad:T.dificultad,"N° Intervenciones":T.intervenciones.length,"Alertas Pendientes":(T.alertas||[]).filter(V=>!V.resuelta).length}));if(S==="xlsx"){const T=bl.json_to_sheet(N),V=bl.book_new();bl.book_append_sheet(V,T,"Estudiantes_Inclusion"),NS(V,"Estudiantes_Inclusion.xlsx")}else{const T=new sn;T.text("Listado de Estudiantes - Programa de Inclusión",14,15),Tl(T,{startY:20,head:[Object.keys(N[0])],body:N.map(Object.values)}),T.save("Estudiantes_Inclusion.pdf")}},F=ee.useMemo(()=>r.filter(S=>{var N;return S.profile===nn.ESTUDIANTE&&(((N=t.cursos)==null?void 0:N.includes(S.curso||""))||t.profile===nn.SUBDIRECCION)}).filter(S=>!e.some(N=>N.nombre===S.nombreCompleto)),[r,e,t]),D=ee.useMemo(()=>e.filter(S=>S.nombre.toLowerCase().includes(A.toLowerCase())&&(h===""||S.curso===h)&&(g===""||S.dificultad===g)).sort((S,N)=>S.nombre.localeCompare(N.nombre)),[e,A,h,g]),P=ee.useMemo(()=>r.filter(S=>S.profile===nn.PROFESORADO).map(S=>S.nombreCompleto).sort(),[r]);return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Estudiantes en PIE"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>k("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),u.jsx("button",{onClick:()=>k("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[u.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:A,onChange:S=>d(S.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsxs("select",{value:h,onChange:S=>p(S.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Todos los Cursos"}),$s.map(S=>u.jsx("option",{children:S},S))]}),u.jsxs("select",{value:g,onChange:S=>w(S.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Todas las Dificultades"}),h2.map(S=>u.jsx("option",{children:S},S))]})]}),u.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:D.map(S=>u.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:S.nombre}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[S.curso," - ",S.dificultad]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>i(S),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Ficha"}),u.jsx("button",{onClick:()=>I(S.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full text-lg",children:"🗑️"})]})]},S.id))})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante desde Nómina"}),u.jsx("ul",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:F.map(S=>u.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-sm text-slate-800 dark:text-slate-200",children:S.nombreCompleto}),u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:S.curso})]}),u.jsx("button",{onClick:()=>l(S),className:"text-2xl text-green-500 hover:text-green-700",children:"+"})]},S.id))})]})]}),o&&u.jsx(hpe,{student:o,onClose:()=>l(null),onConfirm:(S,N)=>{E(S,N),l(null)}}),a&&u.jsx(fpe,{student:a,onClose:()=>i(null),onSave:B,profesores:P})]})},gF="asistenciaDualRecords",mpe=({currentUser:t})=>{const[e,n]=ee.useState(t.curso||""),[r,s]=ee.useState([]),[a,i]=ee.useState(!1),[o,l]=ee.useState(null),A=`asistenciaPersonalDual-${t.id}`;ee.useEffect(()=>{try{const p=localStorage.getItem(A);p&&s(JSON.parse(p))}catch(p){console.error("Error al cargar historial de asistencia",p),l({text:"No se pudo cargar el historial local.",type:"error"})}},[A]);const d=p=>{const g=[p,...r];s(g),localStorage.setItem(A,JSON.stringify(g));try{const w=localStorage.getItem(gF),b=w?JSON.parse(w):[],E=[p,...b];localStorage.setItem(gF,JSON.stringify(E))}catch(w){console.error("Error al guardar en el historial compartido",w),l({text:"Se registró su asistencia, pero hubo un problema al notificar a coordinación.",type:"error"})}},h=p=>{if(!e){l({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),l(null),navigator.geolocation.getCurrentPosition(g=>{const w={id:crypto.randomUUID(),nombreEstudiante:t.nombreCompleto,emailEstudiante:t.email,curso:e,tipo:p,fechaHora:new Date().toISOString(),ubicacion:{latitud:g.coords.latitude,longitud:g.coords.longitude}};d(w),i(!1),l({text:`¡Marca de ${p} registrada con éxito!`,type:"success"})},g=>{console.error("Geolocation error:",g);let w="No se pudo obtener la ubicación.";switch(g.code){case g.PERMISSION_DENIED:w="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case g.POSITION_UNAVAILABLE:w="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case g.TIMEOUT:w="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:w=`Ocurrió un error desconocido al obtener la ubicación (código: ${g.code}).`;break}l({text:w,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Asistencia a Empresa"}),u.jsx("p",{className:"text-slate-500 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),u.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 mb-1",children:"Seleccione su curso"}),u.jsxs("select",{id:"curso",value:e,onChange:p=>n(p.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2",children:[u.jsx("option",{value:"",children:"-- Mi curso --"}),Qf.map(p=>u.jsx("option",{value:p,children:p},p))]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[u.jsx("button",{onClick:()=>h("Entrada"),disabled:a||!e,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),u.jsx("button",{onClick:()=>h("Salida"),disabled:a||!e,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),a&&u.jsxs("div",{className:"text-center text-slate-600 pt-4 flex items-center justify-center gap-2",children:[u.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),u.jsx("span",{children:"Obteniendo ubicación..."})]}),o&&u.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${o.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.text})]})]}),u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mi Historial de Asistencia"}),u.jsx("div",{className:"overflow-x-auto max-h-96",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[u.jsx("thead",{className:"bg-slate-50 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Fecha y Hora"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Tipo"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Curso"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:r.length>0?r.map(p=>u.jsxs("tr",{className:"hover:bg-slate-50",children:[u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:new Date(p.fechaHora).toLocaleString("es-CL")}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:u.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${p.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.tipo})}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:p.curso})]},p.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},ppe="asistenciaDualRecords",gpe="usuariosLiceo",W1=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},xpe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),vpe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd",transform:"rotate(180 10 10)"})}),ype=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState([]),[s,a]=ee.useState(new Date),[i,o]=ee.useState("todos"),[l,A]=ee.useState("");ee.useEffect(()=>{const B=()=>{const I=localStorage.getItem(ppe);I&&e(JSON.parse(I));const k=localStorage.getItem(gpe);k&&r(JSON.parse(k))};return B(),window.addEventListener("storage",B),()=>window.removeEventListener("storage",B)},[]);const{monthDays:d,monthName:h,year:p}=ee.useMemo(()=>{const B=s.getFullYear(),I=s.getMonth();return{monthDays:new Date(B,I+1,0).getDate(),monthName:s.toLocaleString("es-CL",{month:"long"}),year:B}},[s]),g=ee.useMemo(()=>{let B=n.filter(I=>I.profile===nn.ESTUDIANTE&&I.curso&&Qf.includes(W1(I.curso)));return i!=="todos"&&(B=B.filter(I=>W1(I.curso||"")===i)),l&&(B=B.filter(I=>I.nombreCompleto.toLowerCase().includes(l.toLowerCase()))),B.sort((I,k)=>I.nombreCompleto.localeCompare(k.nombreCompleto))},[n,i,l]),w=ee.useMemo(()=>{const B=new Map,I=s.getMonth(),k=s.getFullYear();return t.filter(D=>{const P=new Date(D.fechaHora);return P.getMonth()!==I||P.getFullYear()!==k?!1:i==="todos"?Qf.includes(W1(D.curso||"")):W1(D.curso||"")===i}).forEach(D=>{const P=new Date(D.fechaHora).getDate();B.has(D.nombreEstudiante)||B.set(D.nombreEstudiante,new Map);const S=B.get(D.nombreEstudiante);S.has(P)||S.set(P,{});const N=S.get(P);D.tipo==="Entrada"?(!N.entrada||new Date(D.fechaHora)<new Date(N.entrada.fechaHora))&&(N.entrada=D):D.tipo==="Salida"&&(!N.salida||new Date(D.fechaHora)>new Date(N.salida.fechaHora))&&(N.salida=D)}),B},[t,s,i]),b=B=>{a(I=>{const k=new Date(I);return k.setMonth(k.getMonth()+B),k})},E=["D","L","M","M","J","V","S"];return u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[u.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[u.jsx("button",{onClick:()=>b(-1),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600",children:"<"}),u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${h} ${p}`}),u.jsx("button",{onClick:()=>b(1),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600",children:">"})]}),u.jsxs("select",{value:i,onChange:B=>o(B.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"todos",children:"Todos los Cursos"}),Qf.map(B=>u.jsx("option",{value:B,children:B},B))]}),u.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:l,onChange:B=>A(B.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:d},(B,I)=>{const F=new Date(p,s.getMonth(),I+1).getDay(),D=F===0||F===6;return u.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${D?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[u.jsx("div",{className:"font-semibold",children:E[F]}),u.jsx("div",{children:I+1})]},I)})]})}),u.jsx("tbody",{children:g.length>0?g.map(B=>u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[u.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:B.nombreCompleto}),Array.from({length:d},(I,k)=>{var N;const F=k+1,D=(N=w.get(B.nombreCompleto))==null?void 0:N.get(F),P=new Date(p,s.getMonth(),k+1),S=P.getDay()===0||P.getDay()===6;return u.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${S?"bg-slate-100 dark:bg-slate-700/50":""}`,children:u.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(D==null?void 0:D.entrada)&&u.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var T,V;return window.open(`https://www.google.com/maps?q=${(T=D.entrada)==null?void 0:T.ubicacion.latitud},${(V=D.entrada)==null?void 0:V.ubicacion.longitud}`,"_blank")},children:[u.jsx(xpe,{}),u.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(D.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(D==null?void 0:D.salida)&&u.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var T,V;return window.open(`https://www.google.com/maps?q=${(T=D.salida)==null?void 0:T.ubicacion.latitud},${(V=D.salida)==null?void 0:V.ubicacion.longitud}`,"_blank")},children:[u.jsx(vpe,{}),u.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(D.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},F)})]},B.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:d+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},xF="evaluacionesFormativas",vF="calificacionesFormativas",yF="trabajosGrupalesFormativos",wpe="usuariosLiceo",iP=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},L2={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},oP=t=>t.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:t.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:t.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:t.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},bpe=({cursos:t,onSelect:e})=>u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),t.length>0?u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:t.map(n=>{const r=oP(n);return u.jsxs("div",{className:"space-y-2 text-center",children:[u.jsxs("button",{onClick:()=>e(n),className:`relative w-full h-48 rounded-md shadow-lg ${r.bg} ${r.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[u.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${r.spine} rounded-l-md`}),u.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${r.text}`,children:[u.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:n.slice(0,2)}),u.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:n.slice(2)})]})]}),u.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:n})]},n)})}):u.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[u.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),u.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),Cpe=({curso:t,asignaturas:e,onSelect:n,onBack:r})=>{const s=oP(t);return u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[u.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),u.jsxs("div",{className:`p-2 rounded-md ${s.bg} ${s.text} font-bold`,children:["Libro de Clases: ",t]})]}),u.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),e.length>0?u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:e.map(a=>u.jsxs("button",{onClick:()=>n(a),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[u.jsx("span",{className:"text-2xl",children:L2[a]||L2.Default}),u.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:a})]},a))}):u.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[u.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),u.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},Epe=({curso:t,asignatura:e,allUsers:n,onBack:r})=>{const[s,a]=ee.useState([]),[i,o]=ee.useState({}),[l,A]=ee.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,h]=ee.useState(null),[p,g]=ee.useState(null);ee.useEffect(()=>{try{const T=localStorage.getItem(xF);T&&a(JSON.parse(T));const V=localStorage.getItem(vF);V&&o(JSON.parse(V))}catch(T){console.error("Error al cargar datos",T)}},[]);const w=T=>{a(T),localStorage.setItem(xF,JSON.stringify(T))},b=T=>{o(T),localStorage.setItem(vF,JSON.stringify(T))},E=ee.useMemo(()=>n.filter(T=>T.profile===nn.ESTUDIANTE&&iP(T.curso||"")===t).map(T=>T.nombreCompleto).sort((T,V)=>T.localeCompare(V)),[n,t]),B=ee.useMemo(()=>s.filter(T=>T.curso===t&&T.asignatura===e).sort((T,V)=>new Date(T.fecha).getTime()-new Date(V.fecha).getTime()),[s,t,e]),I=T=>{const{name:V,value:M}=T.target;d?h(U=>U?{...U,[V]:M}:null):A(U=>({...U,[V]:M}))},k=T=>{if(T.preventDefault(),!l.nombreActividad.trim()){g("El nombre de la actividad es obligatorio.");return}const V={id:crypto.randomUUID(),asignatura:e,curso:t,...l};w([...s,V]);const M=E.reduce((U,O)=>(U[O]="trabajado",U),{});b({...i,[V.id]:M}),A({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),g(null)},F=(T,V)=>{var O;const U=(((O=i[T])==null?void 0:O[V])||"trabajado")==="trabajado"?"no trabajado":"trabajado";b({...i,[T]:{...i[T]||{},[V]:U}})},D=T=>h(T),P=()=>{d&&(w(s.map(T=>T.id===d.id?d:T)),h(null))},S=T=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?")){w(s.filter(M=>M.id!==T));const V={...i};delete V[T],b(V)}},N=ee.useCallback(T=>{if(B.length===0)return"-";let V=0,M=0;return B.forEach(U=>{var G;const O=(G=i[U.id])==null?void 0:G[T];O==="trabajado"?(V+=7,M++):O==="no trabajado"&&(V+=2,M++)}),M===0?"-":(V/M).toFixed(1)},[i,B]);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),u.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),u.jsxs("form",{onSubmit:k,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[u.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),u.jsxs("div",{className:"w-full",children:[u.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),u.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:l.nombreActividad,onChange:I,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),u.jsxs("div",{className:"w-full",children:[u.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),u.jsx("input",{id:"fecha",type:"date",name:"fecha",value:l.fecha,onChange:I,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),u.jsx("div",{className:"w-full",children:u.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),p&&u.jsx("p",{className:"text-red-500 text-sm col-span-full",children:p})]}),u.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),B.map(T=>u.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===T.id?u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:I,className:"text-xs p-1 w-full dark:bg-slate-600"}),u.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:I,className:"text-xs p-1 w-full dark:bg-slate-600"}),u.jsx("button",{onClick:P,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("span",{className:"font-semibold",children:T.nombreActividad}),u.jsx("span",{className:"font-normal text-slate-500",children:T.fecha}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx("button",{onClick:()=>D(T),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),u.jsx("button",{onClick:()=>S(T.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},T.id)),u.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:E.map(T=>u.jsxs("tr",{children:[u.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:T}),B.map(V=>{var O;const U=((O=i[V.id])==null?void 0:O[T])==="trabajado";return u.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:u.jsx("button",{onClick:()=>F(V.id,T),className:`text-3xl transition-opacity duration-200 ${U?"opacity-100":"opacity-20"}`,children:L2[e]||L2.Default})},V.id)}),u.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:N(T)})]},T))})]})})]})},_pe=({curso:t,asignatura:e,allUsers:n,onBack:r})=>{const[s,a]=ee.useState([]),[i,o]=ee.useState(null),[l,A]=ee.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,h]=ee.useState({}),[p,g]=ee.useState(2);ee.useEffect(()=>{try{const D=localStorage.getItem(yF);D&&a(JSON.parse(D))}catch(D){console.error("Error al cargar trabajos grupales",D)}},[]);const w=D=>{a(D),localStorage.setItem(yF,JSON.stringify(D))},b=ee.useMemo(()=>n.filter(D=>D.profile===nn.ESTUDIANTE&&iP(D.curso||"")===t).sort((D,P)=>D.nombreCompleto.localeCompare(P.nombreCompleto)),[n,t]);ee.useEffect(()=>{if(i){const D={};i.grupos.forEach(P=>{P.integrantes.forEach(S=>{D[S.nombre]={groupNumber:String(P.numero),role:S.rol||""}})}),h(D)}else h({})},[i]);const E=D=>{if(D.preventDefault(),!l.nombre.trim())return;const P={id:crypto.randomUUID(),curso:t,asignatura:e,nombreActividad:l.nombre,fechaPresentacion:l.fecha,grupos:[]};w([P,...s]),A({nombre:"",fecha:new Date().toISOString().split("T")[0]})},B=()=>{if(!i)return;const D=new Map;for(const N of b){const T=d[N.nombreCompleto];if(T&&T.groupNumber){const V=parseInt(T.groupNumber,10);isNaN(V)||(D.has(V)||D.set(V,[]),D.get(V).push({nombre:N.nombreCompleto,rol:T.role||void 0}))}}const P=Array.from(D.entries()).map(([N,T])=>({numero:N,integrantes:T})).sort((N,T)=>N.numero-T.numero),S={...i,grupos:P};w(s.map(N=>N.id===S.id?S:N)),o(S),alert("Grupos guardados con éxito.")},I=()=>{if(p<2){alert("Debe haber al menos 2 grupos.");return}const D=[...b].sort(()=>Math.random()-.5),P={};D.forEach((S,N)=>{var T;P[S.nombreCompleto]={groupNumber:String(N%p+1),role:((T=d[S.nombreCompleto])==null?void 0:T.role)||""}}),h(P)},k=(D,P,S)=>{h(N=>({...N,[D]:{...N[D],[P]:S}}))},F=ee.useMemo(()=>{const D=new Map;return Object.entries(d).forEach(([P,S])=>{S.groupNumber&&(D.has(S.groupNumber)||D.set(S.groupNumber,[]),D.get(S.groupNumber).push({nombre:P,rol:S.role}))}),Array.from(D.entries()).sort((P,S)=>parseInt(P[0])-parseInt(S[0]))},[d]);return i?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),u.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),u.jsx("button",{onClick:B,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"md:col-span-1 space-y-4",children:[u.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[u.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"number",value:p,onChange:D=>g(parseInt(D.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),u.jsx("button",{onClick:I,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),u.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[u.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),u.jsx("table",{className:"w-full text-sm",children:u.jsx("tbody",{children:b.map(D=>{var P;return u.jsxs("tr",{children:[u.jsx("td",{className:"py-1 pr-2",children:D.nombreCompleto}),u.jsx("td",{className:"py-1",children:u.jsx("input",{type:"number",value:((P=d[D.nombreCompleto])==null?void 0:P.groupNumber)||"",onChange:S=>k(D.nombreCompleto,"groupNumber",S.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},D.id)})})})]})]}),u.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[u.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),u.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:F.map(([D,P])=>u.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[u.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",D]}),u.jsx("ul",{className:"space-y-2",children:P.map(S=>u.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"flex-1 truncate",children:S.nombre}),u.jsxs("select",{value:S.rol||"",onChange:N=>k(S.nombre,"role",N.target.value),className:"p-1 border rounded text-xs w-32",children:[u.jsx("option",{value:"",children:"-- Asignar Rol --"}),MU.map(N=>u.jsx("option",{value:N,children:N},N))]})]},S.nombre))})]},D))})]})]})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),u.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),u.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[u.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),u.jsxs("form",{onSubmit:E,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[u.jsx("input",{value:l.nombre,onChange:D=>A({...l,nombre:D.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),u.jsx("input",{type:"date",value:l.fecha,onChange:D=>A({...l,fecha:D.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),s.filter(D=>D.curso===t&&D.asignatura===e).map(D=>u.jsxs("button",{onClick:()=>o(D),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[u.jsx("p",{className:"font-bold",children:D.nombreActividad}),u.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",D.fechaPresentacion]})]},D.id))]})]})},Spe=({currentUser:t})=>{const[e,n]=ee.useState("calificaciones"),[r,s]=ee.useState(null),[a,i]=ee.useState(null),[o,l]=ee.useState([]);ee.useEffect(()=>{try{const g=localStorage.getItem(wpe);g&&l(JSON.parse(g))}catch(g){console.error("Error al cargar usuarios",g)}},[]);const A=ee.useMemo(()=>t.cursos||[],[t.cursos]),d=ee.useMemo(()=>t.asignaturas||[],[t.asignaturas]),h=({tab:g,label:w})=>u.jsx("button",{onClick:()=>n(g),className:`${e===g?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:w}),p=()=>{if(!r)return u.jsx(bpe,{cursos:A,onSelect:s});if(!a)return u.jsx(Cpe,{curso:r,asignaturas:d,onSelect:i,onBack:()=>s(null)});if(e==="calificaciones")return u.jsx(Epe,{curso:r,asignatura:a,allUsers:o,onBack:()=>i(null)});if(e==="grupos")return u.jsx(_pe,{curso:r,asignatura:a,allUsers:o,onBack:()=>i(null)})};return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:u.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[u.jsx(h,{tab:"calificaciones",label:"Calificaciones"}),u.jsx(h,{tab:"grupos",label:"Trabajos Grupales"})]})}),u.jsx("div",{className:"mt-6",children:p()})]})},wF="acompanamientoDocenteRecords",Tpe="usuariosLiceo",Bpe=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState([]),[s,a]=ee.useState("list"),[i,o]=ee.useState(null),[l,A]=ee.useState(!1),[d,h]=ee.useState(!1),p=m2,g=ee.useMemo(()=>({fecha:new Date().toISOString(),docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[w,b]=ee.useState(g);ee.useEffect(()=>{try{const M=localStorage.getItem(wF);M&&e(JSON.parse(M));const U=localStorage.getItem(Tpe);if(U){const G=JSON.parse(U).filter(ie=>ie.profile===nn.PROFESORADO).map(ie=>ie.nombreCompleto).sort();r(G)}}catch(M){console.error("Error al cargar datos de localStorage",M)}},[]);const E=M=>{e(M),localStorage.setItem(wF,JSON.stringify(M)),window.dispatchEvent(new Event("storage"))},B=M=>{b(U=>({...U,[M.target.name]:M.target.value}))},I=(M,U)=>{b(O=>({...O,rubricaResultados:{...O.rubricaResultados,[M]:U}}))},k=async()=>{A(!0);const{rubricaResultados:M,observacionesGenerales:U}=w;let O=`Resultados de la Rúbrica:
`;p.forEach(ie=>{ie.criteria.forEach(K=>{const q=M[K.name];if(q&&K.levels[q-1]){const se=K.levels[q-1];O+=`- Criterio: "${K.name}" | Nivel: ${q} (${se})
`}})}),O+=`
Observaciones Generales del Evaluador:
${U||"No se proveyeron observaciones adicionales."}`;const G=`
            Eres un asesor pedagógico experto. Tu tarea es generar una retroalimentación formal, técnica y constructiva para un docente, basada en una observación de clase.
            La retroalimentación debe ser estructurada y usar un lenguaje pedagógico preciso.

            A continuación, los datos de la observación:
            ${O}

            Genera una retroalimentación que incluya obligatoriamente los siguientes puntos en formato Markdown:
            - ## Fortalezas Observadas: Destaca 2 o 3 puntos positivos clave, conectándolos con los criterios de la rúbrica.
            - ## Áreas de Mejora: Identifica 2 o 3 aspectos donde el docente puede mejorar, explicando el porqué con base en la evidencia.
            - ## Sugerencias y Pasos a Seguir: Ofrece recomendaciones concretas, prácticas y accionables que el docente pueda implementar.
        `;try{mo("Acompañamiento - Consolidar Feedback");const q=(await new Sa({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:G})).text.replace(/(\*\*|\*)/g,"");b(se=>({...se,retroalimentacionConsolidada:q}))}catch(ie){console.error("Error al generar retroalimentación con IA",ie),alert("No se pudo generar la retroalimentación. Inténtelo de nuevo.")}finally{A(!1)}},F=async()=>{const M=i;if(!M)return;h(!0);const U=t.find(W=>W.id===M);if(!U){h(!1);return}const O=new sn({orientation:"p",unit:"mm",format:"a4"}),G=20,ie=O.internal.pageSize.getWidth(),K=O.internal.pageSize.getHeight(),q=ie-G*2;let se=G;const Z=W=>{W.setFont("helvetica","bold"),W.setFontSize(10),W.setTextColor(100),W.text("LICEO INDUSTRIAL DE RECOLETA",ie/2,15,{align:"center"})};Z(O),O.setFont("helvetica","bold"),O.setFontSize(18),O.setTextColor(40),O.text("Informe de Acompañamiento Docente",ie/2,se+10,{align:"center"}),se+=25,Tl(O,{startY:se,body:[[{content:"Docente:",styles:{fontStyle:"bold"}},U.docente],[{content:"Fecha:",styles:{fontStyle:"bold"}},new Date(U.fecha).toLocaleDateString("es-CL")],[{content:"Asignatura:",styles:{fontStyle:"bold"}},U.asignatura],[{content:"Curso:",styles:{fontStyle:"bold"}},U.curso]],theme:"plain",styles:{fontSize:11,cellPadding:2,textColor:[50,50,50]},columnStyles:{0:{cellWidth:35}}}),se=O.lastAutoTable.finalY+10;const X=[],de=["Débil","Incipiente","Satisfactorio","Avanzado"];p.forEach(W=>{X.push([{content:W.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40],halign:"left"}}]),W.criteria.forEach(J=>{const ne=U.rubricaResultados[J.name],oe=ne?de[ne-1]:"No evaluado";X.push([J.name,oe])})}),Tl(O,{startY:se,head:[["Indicador","Nivel de Logro"]],body:X,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},didDrawPage:W=>{W.pageNumber>1&&Z(O)}}),se=O.lastAutoTable.finalY+15;const j=(W,J)=>{se>K-G-10&&(O.addPage(),Z(O),se=G),O.setFont("helvetica",J.style),O.setFontSize(J.size);const ne=O.splitTextToSize(W,q),oe=ne.length*(J.size*.352778*1.15);se+oe>K-G&&(O.addPage(),Z(O),se=G),O.text(ne,G,se,{align:"left"}),se+=oe+(J.isTitle?5:8)};U.retroalimentacionConsolidada?U.retroalimentacionConsolidada.split(/(?=## )/).forEach(J=>{if(J.trim()){const ne=J.trim().split(`
`),oe=ne[0].replace("## ",""),ue=ne.slice(1).join(`
`).trim();j(oe,{size:14,style:"bold",isTitle:!0}),j(ue,{size:11,style:"normal",isTitle:!1})}}):(j("Retroalimentación Consolidada",{size:14,style:"bold",isTitle:!0}),j("No se ha generado retroalimentación.",{size:11,style:"normal",isTitle:!1})),O.save(`Acompanamiento_${U.docente.replace(/\s/g,"_")}_${new Date(U.fecha).toLocaleDateString("es-CL")}.pdf`),h(!1)},D=M=>{if(M.preventDefault(),!w.docente||!w.curso||!w.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}let U=i;if(i){const O=t.map(G=>G.id===i?{...w,id:i}:G);E(O)}else{const O={...w,id:crypto.randomUUID()};E([O,...t]),o(O.id),b(O),U=O.id}U&&alert("¡Guardado correctamente!")},P=()=>{b(g),o(null),a("form")},S=M=>{b(M),o(M.id),a("form")},N=M=>{window.confirm("¿Está seguro de que desea eliminar este registro de acompañamiento?")&&E(t.filter(U=>U.id!==M))},T=()=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Acompañamiento"}),u.jsx("button",{onClick:P,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),u.jsx("div",{className:"space-y-4",children:t.length>0?t.map(M=>u.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:M.docente}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[M.curso," - ",M.asignatura]}),u.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(M.fecha).toLocaleDateString("es-CL")]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>S(M),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver y Editar"}),u.jsx("button",{onClick:()=>N(M.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},M.id)):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:'No hay registros de acompañamiento. Haga clic en "Crear Nuevo" para comenzar.'})})]}),V=()=>u.jsx("div",{className:"animate-fade-in",children:u.jsxs("form",{onSubmit:D,className:"space-y-8",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:i?"Editando Acompañamiento":"Nuevo Acompañamiento Docente"}),u.jsx("button",{type:"button",onClick:()=>a("list"),className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold",children:"← Volver al listado"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),u.jsxs("select",{name:"docente",value:w.docente,onChange:B,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Seleccione"}),n.map(M=>u.jsx("option",{value:M,children:M},M))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),u.jsxs("select",{name:"curso",value:w.curso,onChange:B,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Seleccione"}),$s.map(M=>u.jsx("option",{value:M,children:M},M))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),u.jsxs("select",{name:"asignatura",value:w.asignatura,onChange:B,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Seleccione"}),Ho.map(M=>u.jsx("option",{value:M,children:M},M))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),u.jsx("input",{type:"text",name:"bloques",value:w.bloques,onChange:B,placeholder:"Ej: 3-4",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),u.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:p.map(M=>u.jsx(ut.Fragment,{children:M.criteria.map((U,O)=>u.jsxs("tr",{children:[O===0&&u.jsx("td",{rowSpan:M.criteria.length,className:"px-3 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600",children:M.domain}),u.jsx("td",{className:"px-3 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:U.name}),U.levels.map((G,ie)=>{const K=ie+1,q=w.rubricaResultados[U.name]===K;return u.jsx("td",{onClick:()=>I(U.name,K),className:`px-3 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${q?"bg-amber-100 dark:bg-amber-900/30":"hover:bg-amber-50 dark:hover:bg-slate-700"}`,children:G},K)})]},U.name))},M.domain))})]})}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones Generales"}),u.jsx("textarea",{name:"observacionesGenerales",value:w.observacionesGenerales,onChange:B,rows:5,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{htmlFor:"retroalimentacionConsolidada",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Retroalimentación Consolidada"}),u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("textarea",{name:"retroalimentacionConsolidada",value:w.retroalimentacionConsolidada,onChange:B,rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Haga clic en 'Consolidar' para generar la retroalimentación aquí..."}),u.jsx("button",{type:"button",onClick:k,disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:bg-slate-400",children:l?"...":"Consolidar"})]})]}),u.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-slate-700",children:[u.jsx("button",{type:"button",onClick:F,disabled:!i||d,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400",children:d?"...":"Exportar PDF"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Acompañamiento"})]})]})});return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Acompañamiento Docente"}),u.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:s==="list"?T():V()})]})},pC="mensajesInternos",Npe="usuariosLiceo",bF="lir-read-status",kpe=({currentUser:t,refreshUnreadCount:e})=>{const[n,r]=ee.useState("inbox"),[s,a]=ee.useState([]),[i,o]=ee.useState([]),[l,A]=ee.useState(null),[d,h]=ee.useState({announcements:[],messages:[]}),p={para:"",asunto:"",cuerpo:""},[g,w]=ee.useState(p);ee.useEffect(()=>{try{const S=localStorage.getItem(pC);S&&a(JSON.parse(S));const N=localStorage.getItem(Npe);N&&o(JSON.parse(N));const T=localStorage.getItem(`${bF}-${t.id}`);T&&h(JSON.parse(T))}catch(S){console.error("Error loading messaging data",S)}},[t.id]);const b=S=>{a(S),localStorage.setItem(pC,JSON.stringify(S))},E=S=>{h(S),localStorage.setItem(`${bF}-${t.id}`,JSON.stringify(S)),e()},B=S=>{if(A(S),n==="inbox"&&!d.messages.includes(S.id)){const N={...d,messages:[...d.messages,S.id]};E(N)}},I=S=>{if(S.preventDefault(),!g.para||!g.asunto.trim()||!g.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const N={id:crypto.randomUUID(),de:t.email,para:g.para,asunto:g.asunto,cuerpo:g.cuerpo,fecha:new Date().toISOString()},T=localStorage.getItem(pC),V=T?JSON.parse(T):[],M=[N,...V];b(M),w(p),r("sent")},k=S=>{window.confirm("¿Está seguro de que desea eliminar este mensaje?")&&(b(s.filter(N=>N.id!==S)),A(null))},F=S=>{w({para:S.de,asunto:`Re: ${S.asunto}`,cuerpo:`

--- Mensaje Original ---
${S.cuerpo}`}),r("compose")},D=ee.useMemo(()=>s.filter(S=>S.para===t.email).sort((S,N)=>new Date(N.fecha).getTime()-new Date(S.fecha).getTime()),[s,t.email]),P=ee.useMemo(()=>s.filter(S=>S.de===t.email).sort((S,N)=>new Date(N.fecha).getTime()-new Date(S.fecha).getTime()),[s,t.email]);return u.jsxs("div",{className:"bg-white rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[u.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 flex flex-col",children:[u.jsx("div",{className:"p-4 border-b",children:u.jsx("button",{onClick:()=>{r("compose"),A(null)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700",children:"Redactar"})}),u.jsxs("nav",{className:"p-2 space-y-1",children:[u.jsx("button",{onClick:()=>{r("inbox"),A(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${n==="inbox"?"bg-amber-100 text-amber-800":"hover:bg-slate-200"}`,children:"Recibidos"}),u.jsx("button",{onClick:()=>{r("sent"),A(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${n==="sent"?"bg-amber-100 text-amber-800":"hover:bg-slate-200"}`,children:"Enviados"})]})]}),n!=="compose"&&u.jsx("div",{className:"w-1/3 md:w-2/5 border-r overflow-y-auto",children:(n==="inbox"?D:P).map(S=>{const N=n==="inbox"&&!d.messages.includes(S.id);return u.jsxs("div",{onClick:()=>B(S),className:`p-4 border-b cursor-pointer ${(l==null?void 0:l.id)===S.id?"bg-amber-50":"hover:bg-slate-50"}`,children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("p",{className:`font-bold truncate ${N?"text-slate-800":"text-slate-600"}`,children:n==="inbox"?S.de:`Para: ${S.para}`}),N&&u.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),u.jsx("p",{className:`truncate text-sm ${N?"text-slate-700 font-semibold":"text-slate-500"}`,children:S.asunto}),u.jsx("p",{className:"text-xs text-slate-400 mt-1",children:new Date(S.fecha).toLocaleString("es-CL")})]},S.id)})}),u.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:n==="compose"?u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6",children:"Nuevo Mensaje"}),u.jsxs("form",{onSubmit:I,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 mb-1",children:"Para:"}),u.jsxs("select",{id:"para",value:g.para,onChange:S=>w({...g,para:S.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm",children:[u.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(S=>S.email!==t.email).map(S=>u.jsxs("option",{value:S.email,children:[S.nombreCompleto," (",S.email,")"]},S.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 mb-1",children:"Asunto:"}),u.jsx("input",{type:"text",id:"asunto",value:g.asunto,onChange:S=>w({...g,asunto:S.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 mb-1",children:"Cuerpo del Mensaje:"}),u.jsx("textarea",{id:"cuerpo",value:g.cuerpo,onChange:S=>w({...g,cuerpo:S.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),u.jsx("div",{className:"text-right",children:u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700",children:"Enviar Mensaje"})})]})]}):l?u.jsxs("div",{children:[u.jsxs("div",{className:"border-b pb-4 mb-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:l.asunto}),u.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:[u.jsx("strong",{children:"De:"})," ",l.de," ",u.jsx("br",{}),u.jsx("strong",{children:"Para:"})," ",l.para," ",u.jsx("br",{}),u.jsx("strong",{children:"Fecha:"})," ",new Date(l.fecha).toLocaleString("es-CL")]})]}),u.jsx("div",{className:"whitespace-pre-wrap text-slate-700",children:l.cuerpo}),u.jsxs("div",{className:"mt-8 pt-4 border-t flex gap-2",children:[n==="inbox"&&u.jsx("button",{onClick:()=>F(l),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Responder"}),u.jsx("button",{onClick:()=>k(l.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200",children:"Eliminar"})]})]}):u.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500",children:u.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var f_=function(t,e){return f_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},f_(t,e)};function gc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f_(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var h_=function(){return h_=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},h_.apply(this,arguments)};function Oi(t,e,n,r){function s(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function o(d){try{A(r.next(d))}catch(h){i(h)}}function l(d){try{A(r.throw(d))}catch(h){i(h)}}function A(d){d.done?a(d.value):s(d.value).then(o,l)}A((r=r.apply(t,[])).next())})}function wi(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(A){return function(d){return l([A,d])}}function l(A){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(a=A[0]&2?s.return:A[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,A[1])).done)return a;switch(s=0,a&&(A=[A[0]&2,a.value]),A[0]){case 0:case 1:a=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,s=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!a||A[1]>a[0]&&A[1]<a[3])){n.label=A[1];break}if(A[0]===6&&n.label<a[1]){n.label=a[1],a=A;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(A);break}a[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(t,n)}catch(d){A=[6,d],s=0}finally{r=a=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}function $1(t,e,n){if(arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||e)}var hu=function(){function t(e,n,r,s){this.left=e,this.top=n,this.width=r,this.height=s}return t.prototype.add=function(e,n,r,s){return new t(this.left+e,this.top+n,this.width+r,this.height+s)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(s){return s.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Py=function(t,e){return hu.fromClientRect(t,e.getBoundingClientRect())},Ipe=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),s=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new hu(0,0,r,s)},jy=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var a=t.charCodeAt(n++);(a&64512)===56320?e.push(((s&1023)<<10)+(a&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},Gs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,a="";++s<n;){var i=t[s];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(s+1===n||r.length>16384)&&(a+=String.fromCharCode.apply(String,r),r.length=0)}return a},CF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fpe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Y1=0;Y1<CF.length;Y1++)Fpe[CF.charCodeAt(Y1)]=Y1;var EF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Op=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var J1=0;J1<EF.length;J1++)Op[EF.charCodeAt(J1)]=J1;var Rpe=function(t){var e=t.length*.75,n=t.length,r,s=0,a,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(A)?A:new Uint8Array(A);for(r=0;r<n;r+=4)a=Op[t.charCodeAt(r)],i=Op[t.charCodeAt(r+1)],o=Op[t.charCodeAt(r+2)],l=Op[t.charCodeAt(r+3)],d[s++]=a<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|l&63;return A},Dpe=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},Upe=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},qf=5,RS=11,gC=2,Lpe=RS-qf,lP=65536>>qf,Mpe=1<<qf,xC=Mpe-1,Ppe=1024>>qf,jpe=lP+Ppe,Ope=jpe,Qpe=32,Hpe=Ope+Qpe,Vpe=65536>>RS,Gpe=1<<Lpe,zpe=Gpe-1,_F=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},Kpe=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},qpe=function(t,e){var n=Rpe(t),r=Array.isArray(n)?Upe(n):new Uint32Array(n),s=Array.isArray(n)?Dpe(n):new Uint16Array(n),a=24,i=_F(s,a/2,r[4]/2),o=r[5]===2?_F(s,(a+r[4])/2):Kpe(r,Math.ceil((a+r[4])/4));return new Wpe(r[0],r[1],r[2],r[3],i,o)},Wpe=function(){function t(e,n,r,s,a,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=a,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>qf],n=(n<<gC)+(e&xC),this.data[n];if(e<=65535)return n=this.index[lP+(e-55296>>qf)],n=(n<<gC)+(e&xC),this.data[n];if(e<this.highStart)return n=Hpe-Vpe+(e>>RS),n=this.index[n],n+=e>>qf&zpe,n=this.index[n],n=(n<<gC)+(e&xC),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),SF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$pe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var X1=0;X1<SF.length;X1++)$pe[SF.charCodeAt(X1)]=X1;var Ype="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",TF=50,Jpe=1,cP=2,AP=3,Xpe=4,Zpe=5,BF=7,uP=8,NF=9,Cd=10,m_=11,kF=12,p_=13,ege=14,Qp=15,g_=16,Z1=17,yp=18,tge=19,IF=20,x_=21,wp=22,vC=23,t0=24,Lo=25,Hp=26,Vp=27,n0=28,nge=29,Ff=30,rge=31,ev=32,tv=33,v_=34,y_=35,w_=36,Vg=37,b_=38,Gv=39,zv=40,yC=41,dP=42,sge=43,age=[9001,65288],fP="!",tr="×",nv="÷",C_=qpe(Ype),JA=[Ff,w_],E_=[Jpe,cP,AP,Zpe],hP=[Cd,uP],FF=[Vp,Hp],ige=E_.concat(hP),RF=[b_,Gv,zv,v_,y_],oge=[Qp,p_],lge=function(t,e){e===void 0&&(e="strict");var n=[],r=[],s=[];return t.forEach(function(a,i){var o=C_.get(a);if(o>TF?(s.push(!0),o-=TF):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return r.push(i),n.push(g_);if(o===Xpe||o===m_){if(i===0)return r.push(i),n.push(Ff);var l=n[i-1];return ige.indexOf(l)===-1?(r.push(r[i-1]),n.push(l)):(r.push(i),n.push(Ff))}if(r.push(i),o===rge)return n.push(e==="strict"?x_:Vg);if(o===dP||o===nge)return n.push(Ff);if(o===sge)return a>=131072&&a<=196605||a>=196608&&a<=262141?n.push(Vg):n.push(Ff);n.push(o)}),[r,n,s]},wC=function(t,e,n,r){var s=r[n];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var a=n;a<=r.length;){a++;var i=r[a];if(i===e)return!0;if(i!==Cd)break}if(s===Cd)for(var a=n;a>0;){a--;var o=r[a];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=n;l<=r.length;){l++;var i=r[l];if(i===e)return!0;if(i!==Cd)break}if(o!==Cd)break}return!1},DF=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===Cd)n--;else return r}return 0},cge=function(t,e,n,r,s){if(n[r]===0)return tr;var a=r-1;if(Array.isArray(s)&&s[a]===!0)return tr;var i=a-1,o=a+1,l=e[a],A=i>=0?e[i]:0,d=e[o];if(l===cP&&d===AP)return tr;if(E_.indexOf(l)!==-1)return fP;if(E_.indexOf(d)!==-1||hP.indexOf(d)!==-1)return tr;if(DF(a,e)===uP)return nv;if(C_.get(t[a])===m_||(l===ev||l===tv)&&C_.get(t[o])===m_||l===BF||d===BF||l===NF||[Cd,p_,Qp].indexOf(l)===-1&&d===NF||[Z1,yp,tge,t0,n0].indexOf(d)!==-1||DF(a,e)===wp||wC(vC,wp,a,e)||wC([Z1,yp],x_,a,e)||wC(kF,kF,a,e))return tr;if(l===Cd)return nv;if(l===vC||d===vC)return tr;if(d===g_||l===g_)return nv;if([p_,Qp,x_].indexOf(d)!==-1||l===ege||A===w_&&oge.indexOf(l)!==-1||l===n0&&d===w_||d===IF||JA.indexOf(d)!==-1&&l===Lo||JA.indexOf(l)!==-1&&d===Lo||l===Vp&&[Vg,ev,tv].indexOf(d)!==-1||[Vg,ev,tv].indexOf(l)!==-1&&d===Hp||JA.indexOf(l)!==-1&&FF.indexOf(d)!==-1||FF.indexOf(l)!==-1&&JA.indexOf(d)!==-1||[Vp,Hp].indexOf(l)!==-1&&(d===Lo||[wp,Qp].indexOf(d)!==-1&&e[o+1]===Lo)||[wp,Qp].indexOf(l)!==-1&&d===Lo||l===Lo&&[Lo,n0,t0].indexOf(d)!==-1)return tr;if([Lo,n0,t0,Z1,yp].indexOf(d)!==-1)for(var h=a;h>=0;){var p=e[h];if(p===Lo)return tr;if([n0,t0].indexOf(p)!==-1)h--;else break}if([Vp,Hp].indexOf(d)!==-1)for(var h=[Z1,yp].indexOf(l)!==-1?i:a;h>=0;){var p=e[h];if(p===Lo)return tr;if([n0,t0].indexOf(p)!==-1)h--;else break}if(b_===l&&[b_,Gv,v_,y_].indexOf(d)!==-1||[Gv,v_].indexOf(l)!==-1&&[Gv,zv].indexOf(d)!==-1||[zv,y_].indexOf(l)!==-1&&d===zv||RF.indexOf(l)!==-1&&[IF,Hp].indexOf(d)!==-1||RF.indexOf(d)!==-1&&l===Vp||JA.indexOf(l)!==-1&&JA.indexOf(d)!==-1||l===t0&&JA.indexOf(d)!==-1||JA.concat(Lo).indexOf(l)!==-1&&d===wp&&age.indexOf(t[o])===-1||JA.concat(Lo).indexOf(d)!==-1&&l===yp)return tr;if(l===yC&&d===yC){for(var g=n[a],w=1;g>0&&(g--,e[g]===yC);)w++;if(w%2!==0)return tr}return l===ev&&d===tv?tr:nv},Age=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=lge(t,e.lineBreak),r=n[0],s=n[1],a=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[Lo,Ff,dP].indexOf(o)!==-1?Vg:o}));var i=e.wordBreak==="keep-all"?a.map(function(o,l){return o&&t[l]>=19968&&t[l]<=40959}):void 0;return[r,s,i]},uge=function(){function t(e,n,r,s){this.codePoints=e,this.required=n===fP,this.start=r,this.end=s}return t.prototype.slice=function(){return Gs.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),dge=function(t,e){var n=jy(t),r=Age(n,e),s=r[0],a=r[1],i=r[2],o=n.length,l=0,A=0;return{next:function(){if(A>=o)return{done:!0,value:null};for(var d=tr;A<o&&(d=cge(n,a,s,++A,i))===tr;);if(d!==tr||A===o){var h=new uge(n,d,l,A);return l=A,{value:h,done:!1}}return{done:!0,value:null}}}},fge=1,hge=2,vx=4,UF=8,M2=10,LF=47,hg=92,mge=9,pge=32,rv=34,bp=61,gge=35,xge=36,vge=37,sv=39,av=40,Cp=41,yge=95,Ao=45,wge=33,bge=60,Cge=62,Ege=64,_ge=91,Sge=93,Tge=61,Bge=123,iv=63,Nge=125,MF=124,kge=126,Ige=128,PF=65533,bC=42,Uf=43,Fge=44,Rge=58,Dge=59,Gg=46,Uge=0,Lge=8,Mge=11,Pge=14,jge=31,Oge=127,Jc=-1,mP=48,pP=97,gP=101,Qge=102,Hge=117,Vge=122,xP=65,vP=69,yP=70,Gge=85,zge=90,_i=function(t){return t>=mP&&t<=57},Kge=function(t){return t>=55296&&t<=57343},r0=function(t){return _i(t)||t>=xP&&t<=yP||t>=pP&&t<=Qge},qge=function(t){return t>=pP&&t<=Vge},Wge=function(t){return t>=xP&&t<=zge},$ge=function(t){return qge(t)||Wge(t)},Yge=function(t){return t>=Ige},ov=function(t){return t===M2||t===mge||t===pge},P2=function(t){return $ge(t)||Yge(t)||t===yge},jF=function(t){return P2(t)||_i(t)||t===Ao},Jge=function(t){return t>=Uge&&t<=Lge||t===Mge||t>=Pge&&t<=jge||t===Oge},Ad=function(t,e){return t!==hg?!1:e!==M2},lv=function(t,e,n){return t===Ao?P2(e)||Ad(e,n):P2(t)?!0:!!(t===hg&&Ad(t,e))},CC=function(t,e,n){return t===Uf||t===Ao?_i(e)?!0:e===Gg&&_i(n):_i(t===Gg?e:t)},Xge=function(t){var e=0,n=1;(t[e]===Uf||t[e]===Ao)&&(t[e]===Ao&&(n=-1),e++);for(var r=[];_i(t[e]);)r.push(t[e++]);var s=r.length?parseInt(Gs.apply(void 0,r),10):0;t[e]===Gg&&e++;for(var a=[];_i(t[e]);)a.push(t[e++]);var i=a.length,o=i?parseInt(Gs.apply(void 0,a),10):0;(t[e]===vP||t[e]===gP)&&e++;var l=1;(t[e]===Uf||t[e]===Ao)&&(t[e]===Ao&&(l=-1),e++);for(var A=[];_i(t[e]);)A.push(t[e++]);var d=A.length?parseInt(Gs.apply(void 0,A),10):0;return n*(s+o*Math.pow(10,-i))*Math.pow(10,l*d)},Zge={type:2},exe={type:3},txe={type:4},nxe={type:13},rxe={type:8},sxe={type:21},axe={type:9},ixe={type:10},oxe={type:11},lxe={type:12},cxe={type:14},cv={type:23},Axe={type:1},uxe={type:25},dxe={type:24},fxe={type:26},hxe={type:27},mxe={type:28},pxe={type:29},gxe={type:31},__={type:32},wP=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(jy(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==__;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case rv:return this.consumeStringToken(rv);case gge:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),s=this.peekCodePoint(2);if(jF(n)||Ad(r,s)){var a=lv(n,r,s)?hge:fge,i=this.consumeName();return{type:5,value:i,flags:a}}break;case xge:if(this.peekCodePoint(0)===bp)return this.consumeCodePoint(),nxe;break;case sv:return this.consumeStringToken(sv);case av:return Zge;case Cp:return exe;case bC:if(this.peekCodePoint(0)===bp)return this.consumeCodePoint(),cxe;break;case Uf:if(CC(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Fge:return txe;case Ao:var o=e,l=this.peekCodePoint(0),A=this.peekCodePoint(1);if(CC(o,l,A))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(lv(o,l,A))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===Ao&&A===Cge)return this.consumeCodePoint(),this.consumeCodePoint(),dxe;break;case Gg:if(CC(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case LF:if(this.peekCodePoint(0)===bC)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===bC&&(d=this.consumeCodePoint(),d===LF))return this.consumeToken();if(d===Jc)return this.consumeToken()}break;case Rge:return fxe;case Dge:return hxe;case bge:if(this.peekCodePoint(0)===wge&&this.peekCodePoint(1)===Ao&&this.peekCodePoint(2)===Ao)return this.consumeCodePoint(),this.consumeCodePoint(),uxe;break;case Ege:var h=this.peekCodePoint(0),p=this.peekCodePoint(1),g=this.peekCodePoint(2);if(lv(h,p,g)){var i=this.consumeName();return{type:7,value:i}}break;case _ge:return mxe;case hg:if(Ad(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Sge:return pxe;case Tge:if(this.peekCodePoint(0)===bp)return this.consumeCodePoint(),rxe;break;case Bge:return oxe;case Nge:return lxe;case Hge:case Gge:var w=this.peekCodePoint(0),b=this.peekCodePoint(1);return w===Uf&&(r0(b)||b===iv)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case MF:if(this.peekCodePoint(0)===bp)return this.consumeCodePoint(),axe;if(this.peekCodePoint(0)===MF)return this.consumeCodePoint(),sxe;break;case kge:if(this.peekCodePoint(0)===bp)return this.consumeCodePoint(),ixe;break;case Jc:return __}return ov(e)?(this.consumeWhiteSpace(),gxe):_i(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):P2(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Gs(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();r0(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===iv&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var s=parseInt(Gs.apply(void 0,e.map(function(l){return l===iv?mP:l})),16),a=parseInt(Gs.apply(void 0,e.map(function(l){return l===iv?yP:l})),16);return{type:30,start:s,end:a}}var i=parseInt(Gs.apply(void 0,e),16);if(this.peekCodePoint(0)===Ao&&r0(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var o=[];r0(n)&&o.length<6;)o.push(n),n=this.consumeCodePoint();var a=parseInt(Gs.apply(void 0,o),16);return{type:30,start:i,end:a}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===av?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===av?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Jc)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===sv||n===rv){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Jc||this.peekCodePoint(0)===Cp)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),cv)}for(;;){var s=this.consumeCodePoint();if(s===Jc||s===Cp)return{type:22,value:Gs.apply(void 0,e)};if(ov(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Jc||this.peekCodePoint(0)===Cp?(this.consumeCodePoint(),{type:22,value:Gs.apply(void 0,e)}):(this.consumeBadUrlRemnants(),cv);if(s===rv||s===sv||s===av||Jge(s))return this.consumeBadUrlRemnants(),cv;if(s===hg)if(Ad(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),cv;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;ov(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Cp||e===Jc)return;Ad(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var s=Math.min(n,e);r+=Gs.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var s=this._value[r];if(s===Jc||s===void 0||s===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(s===M2)return this._value.splice(0,r),Axe;if(s===hg){var a=this._value[r+1];a!==Jc&&a!==void 0&&(a===M2?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):Ad(s,a)&&(n+=this.consumeStringSlice(r),n+=Gs(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=vx,r=this.peekCodePoint(0);for((r===Uf||r===Ao)&&e.push(this.consumeCodePoint());_i(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(r===Gg&&_i(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=UF;_i(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),s=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((r===vP||r===gP)&&((s===Uf||s===Ao)&&_i(a)||_i(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=UF;_i(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Xge(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],s=this.peekCodePoint(0),a=this.peekCodePoint(1),i=this.peekCodePoint(2);if(lv(s,a,i)){var o=this.consumeName();return{type:15,number:n,flags:r,unit:o}}return s===vge?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(r0(e)){for(var n=Gs(e);r0(this.peekCodePoint(0))&&n.length<6;)n+=Gs(this.consumeCodePoint());ov(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||Kge(r)||r>1114111?PF:r}return e===Jc?PF:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(jF(n))e+=Gs(n);else if(Ad(n,this.peekCodePoint(0)))e+=Gs(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),bP=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new wP;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||vxe(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?__:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),yx=function(t){return t.type===15},Bm=function(t){return t.type===17},zr=function(t){return t.type===20},xxe=function(t){return t.type===0},S_=function(t,e){return zr(t)&&t.value===e},CP=function(t){return t.type!==31},cm=function(t){return t.type!==31&&t.type!==4},xA=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},vxe=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Yd=function(t){return t.type===17||t.type===15},da=function(t){return t.type===16||Yd(t)},EP=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},ti={type:17,number:0,flags:vx},DS={type:16,number:50,flags:vx},Ed={type:16,number:100,flags:vx},Gp=function(t,e,n){var r=t[0],s=t[1];return[Xr(r,e),Xr(typeof s<"u"?s:r,n)]},Xr=function(t,e){if(t.type===16)return t.number/100*e;if(yx(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},_P="deg",SP="grad",TP="rad",BP="turn",Oy={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case _P:return Math.PI*e.number/180;case SP:return Math.PI/200*e.number;case TP:return e.number;case BP:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},NP=function(t){return t.type===15&&(t.unit===_P||t.unit===SP||t.unit===TP||t.unit===BP)},kP=function(t){var e=t.filter(zr).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ti,ti];case"to top":case"bottom":return Cl(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ti,Ed];case"to right":case"left":return Cl(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ed,Ed];case"to bottom":case"top":return Cl(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ed,ti];case"to left":case"right":return Cl(270)}return 0},Cl=function(t){return Math.PI*t/180},Rd={name:"color",parse:function(t,e){if(e.type===18){var n=yxe[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),s=e.value.substring(1,2),a=e.value.substring(2,3);return _d(parseInt(r+r,16),parseInt(s+s,16),parseInt(a+a,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),s=e.value.substring(1,2),a=e.value.substring(2,3),i=e.value.substring(3,4);return _d(parseInt(r+r,16),parseInt(s+s,16),parseInt(a+a,16),parseInt(i+i,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),s=e.value.substring(2,4),a=e.value.substring(4,6);return _d(parseInt(r,16),parseInt(s,16),parseInt(a,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),s=e.value.substring(2,4),a=e.value.substring(4,6),i=e.value.substring(6,8);return _d(parseInt(r,16),parseInt(s,16),parseInt(a,16),parseInt(i,16)/255)}}if(e.type===20){var o=lu[e.value.toUpperCase()];if(typeof o<"u")return o}return lu.TRANSPARENT}},Dd=function(t){return(255&t)===0},La=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+r+","+n+","+e/255+")":"rgb("+s+","+r+","+n+")"},_d=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},OF=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},QF=function(t,e){var n=e.filter(cm);if(n.length===3){var r=n.map(OF),s=r[0],a=r[1],i=r[2];return _d(s,a,i,1)}if(n.length===4){var o=n.map(OF),s=o[0],a=o[1],i=o[2],l=o[3];return _d(s,a,i,l)}return 0};function EC(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var HF=function(t,e){var n=e.filter(cm),r=n[0],s=n[1],a=n[2],i=n[3],o=(r.type===17?Cl(r.number):Oy.parse(t,r))/(Math.PI*2),l=da(s)?s.number/100:0,A=da(a)?a.number/100:0,d=typeof i<"u"&&da(i)?Xr(i,1):1;if(l===0)return _d(A*255,A*255,A*255,1);var h=A<=.5?A*(l+1):A+l-A*l,p=A*2-h,g=EC(p,h,o+1/3),w=EC(p,h,o),b=EC(p,h,o-1/3);return _d(g*255,w*255,b*255,d)},yxe={hsl:HF,hsla:HF,rgb:QF,rgba:QF},mg=function(t,e){return Rd.parse(t,bP.create(e).parseComponentValue())},lu={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},wxe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(zr(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},bxe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Qy=function(t,e){var n=Rd.parse(t,e[0]),r=e[1];return r&&da(r)?{color:n,stop:r}:{color:n,stop:null}},VF=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=ti),r.stop===null&&(r.stop=Ed);for(var s=[],a=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var l=Xr(o,e);l>a?s.push(l):s.push(a),a=l}else s.push(null)}for(var A=null,i=0;i<s.length;i++){var d=s[i];if(d===null)A===null&&(A=i);else if(A!==null){for(var h=i-A,p=s[A-1],g=(d-p)/(h+1),w=1;w<=h;w++)s[A+w-1]=g*w;A=null}}return t.map(function(b,E){var B=b.color;return{color:B,stop:Math.max(Math.min(1,s[E]/e),0)}})},Cxe=function(t,e,n){var r=e/2,s=n/2,a=Xr(t[0],e)-r,i=s-Xr(t[1],n);return(Math.atan2(i,a)+Math.PI*2)%(Math.PI*2)},Exe=function(t,e,n){var r=typeof t=="number"?t:Cxe(t,e,n),s=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),a=e/2,i=n/2,o=s/2,l=Math.sin(r-Math.PI/2)*o,A=Math.cos(r-Math.PI/2)*o;return[s,a-A,a+A,i-l,i+l]},rc=function(t,e){return Math.sqrt(t*t+e*e)},GF=function(t,e,n,r,s){var a=[[0,0],[0,e],[t,0],[t,e]];return a.reduce(function(i,o){var l=o[0],A=o[1],d=rc(n-l,r-A);return(s?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},_xe=function(t,e,n,r,s){var a=0,i=0;switch(t.size){case 0:t.shape===0?a=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(a=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(t.shape===0)a=i=Math.min(rc(e,n),rc(e,n-s),rc(e-r,n),rc(e-r,n-s));else if(t.shape===1){var o=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(e),Math.abs(e-r)),l=GF(r,s,e,n,!0),A=l[0],d=l[1];a=rc(A-e,(d-n)/o),i=o*a}break;case 1:t.shape===0?a=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(a=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(t.shape===0)a=i=Math.max(rc(e,n),rc(e,n-s),rc(e-r,n),rc(e-r,n-s));else if(t.shape===1){var o=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(e),Math.abs(e-r)),h=GF(r,s,e,n,!1),A=h[0],d=h[1];a=rc(A-e,(d-n)/o),i=o*a}break}return Array.isArray(t.size)&&(a=Xr(t.size[0],r),i=t.size.length===2?Xr(t.size[1],s):a),[a,i]},Sxe=function(t,e){var n=Cl(180),r=[];return xA(e).forEach(function(s,a){if(a===0){var i=s[0];if(i.type===20&&i.value==="to"){n=kP(s);return}else if(NP(i)){n=Oy.parse(t,i);return}}var o=Qy(t,s);r.push(o)}),{angle:n,stops:r,type:1}},Av=function(t,e){var n=Cl(180),r=[];return xA(e).forEach(function(s,a){if(a===0){var i=s[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){n=kP(s);return}else if(NP(i)){n=(Oy.parse(t,i)+Cl(270))%Cl(360);return}}var o=Qy(t,s);r.push(o)}),{angle:n,stops:r,type:1}},Txe=function(t,e){var n=Cl(180),r=[],s=1,a=0,i=3,o=[];return xA(e).forEach(function(l,A){var d=l[0];if(A===0){if(zr(d)&&d.value==="linear"){s=1;return}else if(zr(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var h=Rd.parse(t,d.values[0]);r.push({stop:ti,color:h})}else if(d.name==="to"){var h=Rd.parse(t,d.values[0]);r.push({stop:Ed,color:h})}else if(d.name==="color-stop"){var p=d.values.filter(cm);if(p.length===2){var h=Rd.parse(t,p[1]),g=p[0];Bm(g)&&r.push({stop:{type:16,number:g.number*100,flags:g.flags},color:h})}}}}),s===1?{angle:(n+Cl(180))%Cl(360),stops:r,type:s}:{size:i,shape:a,stops:r,position:o,type:s}},IP="closest-side",FP="farthest-side",RP="closest-corner",DP="farthest-corner",UP="circle",LP="ellipse",MP="cover",PP="contain",Bxe=function(t,e){var n=0,r=3,s=[],a=[];return xA(e).forEach(function(i,o){var l=!0;if(o===0){var A=!1;l=i.reduce(function(h,p){if(A)if(zr(p))switch(p.value){case"center":return a.push(DS),h;case"top":case"left":return a.push(ti),h;case"right":case"bottom":return a.push(Ed),h}else(da(p)||Yd(p))&&a.push(p);else if(zr(p))switch(p.value){case UP:return n=0,!1;case LP:return n=1,!1;case"at":return A=!0,!1;case IP:return r=0,!1;case MP:case FP:return r=1,!1;case PP:case RP:return r=2,!1;case DP:return r=3,!1}else if(Yd(p)||da(p))return Array.isArray(r)||(r=[]),r.push(p),!1;return h},l)}if(l){var d=Qy(t,i);s.push(d)}}),{size:r,shape:n,stops:s,position:a,type:2}},uv=function(t,e){var n=0,r=3,s=[],a=[];return xA(e).forEach(function(i,o){var l=!0;if(o===0?l=i.reduce(function(d,h){if(zr(h))switch(h.value){case"center":return a.push(DS),!1;case"top":case"left":return a.push(ti),!1;case"right":case"bottom":return a.push(Ed),!1}else if(da(h)||Yd(h))return a.push(h),!1;return d},l):o===1&&(l=i.reduce(function(d,h){if(zr(h))switch(h.value){case UP:return n=0,!1;case LP:return n=1,!1;case PP:case IP:return r=0,!1;case FP:return r=1,!1;case RP:return r=2,!1;case MP:case DP:return r=3,!1}else if(Yd(h)||da(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return d},l)),l){var A=Qy(t,i);s.push(A)}}),{size:r,shape:n,stops:s,position:a,type:2}},Nxe=function(t){return t.type===1},kxe=function(t){return t.type===2},US={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=jP[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function Ixe(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!jP[t.name])}var jP={"linear-gradient":Sxe,"-moz-linear-gradient":Av,"-ms-linear-gradient":Av,"-o-linear-gradient":Av,"-webkit-linear-gradient":Av,"radial-gradient":Bxe,"-moz-radial-gradient":uv,"-ms-radial-gradient":uv,"-o-radial-gradient":uv,"-webkit-radial-gradient":uv,"-webkit-gradient":Txe},Fxe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return cm(r)&&Ixe(r)}).map(function(r){return US.parse(t,r)})}},Rxe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(zr(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Dxe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return xA(e).map(function(n){return n.filter(da)}).map(EP)}},Uxe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return xA(e).map(function(n){return n.filter(zr).map(function(r){return r.value}).join(" ")}).map(Lxe)}},Lxe=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},K0;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(K0||(K0={}));var Mxe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return xA(e).map(function(n){return n.filter(Pxe)})}},Pxe=function(t){return zr(t)||da(t)},Hy=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},jxe=Hy("top"),Oxe=Hy("right"),Qxe=Hy("bottom"),Hxe=Hy("left"),Vy=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return EP(n.filter(da))}}},Vxe=Vy("top-left"),Gxe=Vy("top-right"),zxe=Vy("bottom-right"),Kxe=Vy("bottom-left"),Gy=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},qxe=Gy("top"),Wxe=Gy("right"),$xe=Gy("bottom"),Yxe=Gy("left"),zy=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return yx(n)?n.number:0}}},Jxe=zy("top"),Xxe=zy("right"),Zxe=zy("bottom"),e1e=zy("left"),t1e={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},n1e={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},r1e={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(zr).reduce(function(n,r){return n|s1e(r.value)},0)}},s1e=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},a1e={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},i1e={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},j2;(function(t){t.NORMAL="normal",t.STRICT="strict"})(j2||(j2={}));var o1e={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return j2.STRICT;case"normal":default:return j2.NORMAL}}},l1e={name:"line-height",initialValue:"normal",prefix:!1,type:4},zF=function(t,e){return zr(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:da(t)?Xr(t,e):e},c1e={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:US.parse(t,e)}},A1e={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},T_={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Ky=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},u1e=Ky("top"),d1e=Ky("right"),f1e=Ky("bottom"),h1e=Ky("left"),m1e={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(zr).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},p1e={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},qy=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},g1e=qy("top"),x1e=qy("right"),v1e=qy("bottom"),y1e=qy("left"),w1e={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},b1e={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},C1e={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&S_(e[0],"none")?[]:xA(e).map(function(n){for(var r={color:lu.TRANSPARENT,offsetX:ti,offsetY:ti,blur:ti},s=0,a=0;a<n.length;a++){var i=n[a];Yd(i)?(s===0?r.offsetX=i:s===1?r.offsetY=i:r.blur=i,s++):r.color=Rd.parse(t,i)}return r})}},E1e={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},_1e={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=B1e[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},S1e=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},T1e=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),n=e[0],r=e[1];e[2],e[3];var s=e[4],a=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[n,r,s,a,i,o]:null},B1e={matrix:S1e,matrix3d:T1e},KF={type:16,number:50,flags:vx},N1e=[KF,KF],k1e={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(da);return n.length!==2?N1e:[n[0],n[1]]}},I1e={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},pg;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(pg||(pg={}));var F1e={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return pg.BREAK_ALL;case"keep-all":return pg.KEEP_ALL;case"normal":default:return pg.NORMAL}}},R1e={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Bm(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},OP={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},D1e={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Bm(e)?e.number:1}},U1e={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},L1e={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(zr).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},M1e={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(s){switch(s.type){case 20:case 0:n.push(s.value);break;case 17:n.push(s.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},P1e={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},j1e={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Bm(e))return e.number;if(zr(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},O1e={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(zr).map(function(n){return n.value})}},Q1e={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ba=function(t,e){return(t&e)!==0},H1e={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},V1e={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],s=e.filter(CP),a=0;a<s.length;a++){var i=s[a],o=s[a+1];if(i.type===20){var l=o&&Bm(o)?o.number:1;r.push({counter:i.value,increment:l})}}return r}},G1e={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(CP),s=0;s<r.length;s++){var a=r[s],i=r[s+1];if(zr(a)&&a.value!=="none"){var o=i&&Bm(i)?i.number:0;n.push({counter:a.value,reset:o})}}return n}},z1e={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(yx).map(function(n){return OP.parse(t,n)})}},K1e={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],s=e.filter(xxe);if(s.length%2!==0)return null;for(var a=0;a<s.length;a+=2){var i=s[a].value,o=s[a+1].value;r.push({open:i,close:o})}return r}},qF=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},q1e={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&S_(e[0],"none")?[]:xA(e).map(function(n){for(var r={color:255,offsetX:ti,offsetY:ti,blur:ti,spread:ti,inset:!1},s=0,a=0;a<n.length;a++){var i=n[a];S_(i,"inset")?r.inset=!0:Yd(i)?(s===0?r.offsetX=i:s===1?r.offsetY=i:s===2?r.blur=i:r.spread=i,s++):r.color=Rd.parse(t,i)}return r})}},W1e={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(zr).forEach(function(s){switch(s.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(s){r.indexOf(s)===-1&&r.push(s)}),r}},$1e={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Y1e={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return yx(e)?e.number:0}},J1e=function(){function t(e,n){var r,s;this.animationDuration=Kt(e,z1e,n.animationDuration),this.backgroundClip=Kt(e,wxe,n.backgroundClip),this.backgroundColor=Kt(e,bxe,n.backgroundColor),this.backgroundImage=Kt(e,Fxe,n.backgroundImage),this.backgroundOrigin=Kt(e,Rxe,n.backgroundOrigin),this.backgroundPosition=Kt(e,Dxe,n.backgroundPosition),this.backgroundRepeat=Kt(e,Uxe,n.backgroundRepeat),this.backgroundSize=Kt(e,Mxe,n.backgroundSize),this.borderTopColor=Kt(e,jxe,n.borderTopColor),this.borderRightColor=Kt(e,Oxe,n.borderRightColor),this.borderBottomColor=Kt(e,Qxe,n.borderBottomColor),this.borderLeftColor=Kt(e,Hxe,n.borderLeftColor),this.borderTopLeftRadius=Kt(e,Vxe,n.borderTopLeftRadius),this.borderTopRightRadius=Kt(e,Gxe,n.borderTopRightRadius),this.borderBottomRightRadius=Kt(e,zxe,n.borderBottomRightRadius),this.borderBottomLeftRadius=Kt(e,Kxe,n.borderBottomLeftRadius),this.borderTopStyle=Kt(e,qxe,n.borderTopStyle),this.borderRightStyle=Kt(e,Wxe,n.borderRightStyle),this.borderBottomStyle=Kt(e,$xe,n.borderBottomStyle),this.borderLeftStyle=Kt(e,Yxe,n.borderLeftStyle),this.borderTopWidth=Kt(e,Jxe,n.borderTopWidth),this.borderRightWidth=Kt(e,Xxe,n.borderRightWidth),this.borderBottomWidth=Kt(e,Zxe,n.borderBottomWidth),this.borderLeftWidth=Kt(e,e1e,n.borderLeftWidth),this.boxShadow=Kt(e,q1e,n.boxShadow),this.color=Kt(e,t1e,n.color),this.direction=Kt(e,n1e,n.direction),this.display=Kt(e,r1e,n.display),this.float=Kt(e,a1e,n.cssFloat),this.fontFamily=Kt(e,M1e,n.fontFamily),this.fontSize=Kt(e,P1e,n.fontSize),this.fontStyle=Kt(e,Q1e,n.fontStyle),this.fontVariant=Kt(e,O1e,n.fontVariant),this.fontWeight=Kt(e,j1e,n.fontWeight),this.letterSpacing=Kt(e,i1e,n.letterSpacing),this.lineBreak=Kt(e,o1e,n.lineBreak),this.lineHeight=Kt(e,l1e,n.lineHeight),this.listStyleImage=Kt(e,c1e,n.listStyleImage),this.listStylePosition=Kt(e,A1e,n.listStylePosition),this.listStyleType=Kt(e,T_,n.listStyleType),this.marginTop=Kt(e,u1e,n.marginTop),this.marginRight=Kt(e,d1e,n.marginRight),this.marginBottom=Kt(e,f1e,n.marginBottom),this.marginLeft=Kt(e,h1e,n.marginLeft),this.opacity=Kt(e,D1e,n.opacity);var a=Kt(e,m1e,n.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=Kt(e,p1e,n.overflowWrap),this.paddingTop=Kt(e,g1e,n.paddingTop),this.paddingRight=Kt(e,x1e,n.paddingRight),this.paddingBottom=Kt(e,v1e,n.paddingBottom),this.paddingLeft=Kt(e,y1e,n.paddingLeft),this.paintOrder=Kt(e,W1e,n.paintOrder),this.position=Kt(e,b1e,n.position),this.textAlign=Kt(e,w1e,n.textAlign),this.textDecorationColor=Kt(e,U1e,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=Kt(e,L1e,(s=n.textDecorationLine)!==null&&s!==void 0?s:n.textDecoration),this.textShadow=Kt(e,C1e,n.textShadow),this.textTransform=Kt(e,E1e,n.textTransform),this.transform=Kt(e,_1e,n.transform),this.transformOrigin=Kt(e,k1e,n.transformOrigin),this.visibility=Kt(e,I1e,n.visibility),this.webkitTextStrokeColor=Kt(e,$1e,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=Kt(e,Y1e,n.webkitTextStrokeWidth),this.wordBreak=Kt(e,F1e,n.wordBreak),this.zIndex=Kt(e,R1e,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Dd(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return ba(this.display,4)||ba(this.display,33554432)||ba(this.display,268435456)||ba(this.display,536870912)||ba(this.display,67108864)||ba(this.display,134217728)},t}(),X1e=function(){function t(e,n){this.content=Kt(e,H1e,n.content),this.quotes=Kt(e,K1e,n.quotes)}return t}(),WF=function(){function t(e,n){this.counterIncrement=Kt(e,V1e,n.counterIncrement),this.counterReset=Kt(e,G1e,n.counterReset)}return t}(),Kt=function(t,e,n){var r=new wP,s=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(s);var a=new bP(r.read());switch(e.type){case 2:var i=a.parseComponentValue();return e.parse(t,zr(i)?i.value:e.initialValue);case 0:return e.parse(t,a.parseComponentValue());case 1:return e.parse(t,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(e.format){case"angle":return Oy.parse(t,a.parseComponentValue());case"color":return Rd.parse(t,a.parseComponentValue());case"image":return US.parse(t,a.parseComponentValue());case"length":var o=a.parseComponentValue();return Yd(o)?o:ti;case"length-percentage":var l=a.parseComponentValue();return da(l)?l:ti;case"time":return OP.parse(t,a.parseComponentValue())}break}},Z1e="data-html2canvas-debug",eve=function(t){var e=t.getAttribute(Z1e);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},B_=function(t,e){var n=eve(t);return n===1||e===n},vA=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,B_(n,3))debugger;this.styles=new J1e(e,window.getComputedStyle(n,null)),I_(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=Py(this.context,n),B_(n,4)&&(this.flags|=16)}return t}(),tve="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",$F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var dv=0;dv<$F.length;dv++)zp[$F.charCodeAt(dv)]=dv;var nve=function(t){var e=t.length*.75,n=t.length,r,s=0,a,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(A)?A:new Uint8Array(A);for(r=0;r<n;r+=4)a=zp[t.charCodeAt(r)],i=zp[t.charCodeAt(r+1)],o=zp[t.charCodeAt(r+2)],l=zp[t.charCodeAt(r+3)],d[s++]=a<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|l&63;return A},rve=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},sve=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Wf=5,LS=11,_C=2,ave=LS-Wf,QP=65536>>Wf,ive=1<<Wf,SC=ive-1,ove=1024>>Wf,lve=QP+ove,cve=lve,Ave=32,uve=cve+Ave,dve=65536>>LS,fve=1<<ave,hve=fve-1,YF=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},mve=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},pve=function(t,e){var n=nve(t),r=Array.isArray(n)?sve(n):new Uint32Array(n),s=Array.isArray(n)?rve(n):new Uint16Array(n),a=24,i=YF(s,a/2,r[4]/2),o=r[5]===2?YF(s,(a+r[4])/2):mve(r,Math.ceil((a+r[4])/4));return new gve(r[0],r[1],r[2],r[3],i,o)},gve=function(){function t(e,n,r,s,a,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=a,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Wf],n=(n<<_C)+(e&SC),this.data[n];if(e<=65535)return n=this.index[QP+(e-55296>>Wf)],n=(n<<_C)+(e&SC),this.data[n];if(e<this.highStart)return n=uve-dve+(e>>LS),n=this.index[n],n+=e>>Wf&hve,n=this.index[n],n=(n<<_C)+(e&SC),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),JF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xve=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var fv=0;fv<JF.length;fv++)xve[JF.charCodeAt(fv)]=fv;var vve=1,TC=2,BC=3,XF=4,ZF=5,yve=7,e6=8,NC=9,kC=10,t6=11,n6=12,r6=13,s6=14,IC=15,wve=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var a=t.charCodeAt(n++);(a&64512)===56320?e.push(((s&1023)<<10)+(a&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},bve=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,a="";++s<n;){var i=t[s];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(s+1===n||r.length>16384)&&(a+=String.fromCharCode.apply(String,r),r.length=0)}return a},Cve=pve(tve),vl="×",FC="÷",Eve=function(t){return Cve.get(t)},_ve=function(t,e,n){var r=n-2,s=e[r],a=e[n-1],i=e[n];if(a===TC&&i===BC)return vl;if(a===TC||a===BC||a===XF||i===TC||i===BC||i===XF)return FC;if(a===e6&&[e6,NC,t6,n6].indexOf(i)!==-1||(a===t6||a===NC)&&(i===NC||i===kC)||(a===n6||a===kC)&&i===kC||i===r6||i===ZF||i===yve||a===vve)return vl;if(a===r6&&i===s6){for(;s===ZF;)s=e[--r];if(s===s6)return vl}if(a===IC&&i===IC){for(var o=0;s===IC;)o++,s=e[--r];if(o%2===0)return vl}return FC},Sve=function(t){var e=wve(t),n=e.length,r=0,s=0,a=e.map(Eve);return{next:function(){if(r>=n)return{done:!0,value:null};for(var i=vl;r<n&&(i=_ve(e,a,++r))===vl;);if(i!==vl||r===n){var o=bve.apply(null,e.slice(s,r));return s=r,{value:o,done:!1}}return{done:!0,value:null}}}},Tve=function(t){for(var e=Sve(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},Bve=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),a=Math.round(s.height);if(t.body.removeChild(r),a===e)return!0}}return!1},Nve=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,s=jy(r.data).map(function(l){return Gs(l)}),a=0,i={},o=s.every(function(l,A){n.setStart(r,a),n.setEnd(r,a+l.length);var d=n.getBoundingClientRect();a+=l.length;var h=d.x>i.x||d.y>i.y;return i=d,A===0?!0:h});return t.body.removeChild(e),o},kve=function(){return typeof new Image().crossOrigin<"u"},Ive=function(){return typeof new XMLHttpRequest().responseType=="string"},Fve=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},a6=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},Rve=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,a=e.toDataURL();s.src=a;var i=N_(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),i6(i).then(function(o){r.drawImage(o,0,0);var l=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var A=t.createElement("div");return A.style.backgroundImage="url("+a+")",A.style.height=n+"px",a6(l)?i6(N_(n,n,0,0,A)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),a6(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},N_=function(t,e,n,r,s){var a="http://www.w3.org/2000/svg",i=document.createElementNS(a,"svg"),o=document.createElementNS(a,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(s),i},i6=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Ja={get SUPPORT_RANGE_BOUNDS(){var t=Bve(document);return Object.defineProperty(Ja,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Ja.SUPPORT_RANGE_BOUNDS&&Nve(document);return Object.defineProperty(Ja,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Fve(document);return Object.defineProperty(Ja,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?Rve(document):Promise.resolve(!1);return Object.defineProperty(Ja,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=kve();return Object.defineProperty(Ja,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Ive();return Object.defineProperty(Ja,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ja,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ja,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},gg=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),Dve=function(t,e,n,r){var s=Mve(e,n),a=[],i=0;return s.forEach(function(o){if(n.textDecorationLine.length||o.trim().length>0)if(Ja.SUPPORT_RANGE_BOUNDS){var l=o6(r,i,o.length).getClientRects();if(l.length>1){var A=MS(o),d=0;A.forEach(function(p){a.push(new gg(p,hu.fromDOMRectList(t,o6(r,d+i,p.length).getClientRects()))),d+=p.length})}else a.push(new gg(o,hu.fromDOMRectList(t,l)))}else{var h=r.splitText(o.length);a.push(new gg(o,Uve(t,r))),r=h}else Ja.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));i+=o.length}),a},Uve=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(r,e);var a=Py(t,r);return r.firstChild&&s.replaceChild(r.firstChild,r),a}}return hu.EMPTY},o6=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(t,e),s.setEnd(t,e+n),s},MS=function(t){if(Ja.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return Tve(t)},Lve=function(t,e){if(Ja.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return jve(t,e)},Mve=function(t,e){return e.letterSpacing!==0?MS(t):Lve(t,e)},Pve=[32,160,4961,65792,65793,4153,4241],jve=function(t,e){for(var n=dge(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],s,a=function(){if(s.value){var i=s.value.slice(),o=jy(i),l="";o.forEach(function(A){Pve.indexOf(A)===-1?l+=Gs(A):(l.length&&r.push(l),r.push(Gs(A)),l="")}),l.length&&r.push(l)}};!(s=n.next()).done;)a();return r},Ove=function(){function t(e,n,r){this.text=Qve(n.data,r.textTransform),this.textBounds=Dve(e,this.text,r,n)}return t}(),Qve=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Hve,Vve);case 2:return t.toUpperCase();default:return t}},Hve=/(^|\s|:|-|\(|\))([a-z])/g,Vve=function(t,e,n){return t.length>0?e+n.toUpperCase():t},HP=function(t){gc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.src=r.currentSrc||r.src,s.intrinsicWidth=r.naturalWidth,s.intrinsicHeight=r.naturalHeight,s.context.cache.addImage(s.src),s}return e}(vA),VP=function(t){gc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r,s.intrinsicWidth=r.width,s.intrinsicHeight=r.height,s}return e}(vA),GP=function(t){gc(e,t);function e(n,r){var s=t.call(this,n,r)||this,a=new XMLSerializer,i=Py(n,r);return r.setAttribute("width",i.width+"px"),r.setAttribute("height",i.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(r)),s.intrinsicWidth=r.width.baseVal.value,s.intrinsicHeight=r.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(vA),zP=function(t){gc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(vA),k_=function(t){gc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.start=r.start,s.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,s}return e}(vA),Gve=[{type:15,flags:0,unit:"px",number:3}],zve=[{type:16,flags:0,number:50}],Kve=function(t){return t.width>t.height?new hu(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new hu(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},qve=function(t){var e=t.type===Wve?new Array(t.value.length+1).join("•"):t.value;return e.length===0?t.placeholder||"":e},O2="checkbox",Q2="radio",Wve="password",l6=707406591,PS=function(t){gc(e,t);function e(n,r){var s=t.call(this,n,r)||this;switch(s.type=r.type.toLowerCase(),s.checked=r.checked,s.value=qve(r),(s.type===O2||s.type===Q2)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=Kve(s.bounds)),s.type){case O2:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=Gve;break;case Q2:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=zve;break}return s}return e}(vA),KP=function(t){gc(e,t);function e(n,r){var s=t.call(this,n,r)||this,a=r.options[r.selectedIndex||0];return s.value=a&&a.text||"",s}return e}(vA),qP=function(t){gc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(vA),WP=function(t){gc(e,t);function e(n,r){var s=t.call(this,n,r)||this;s.src=r.src,s.width=parseInt(r.width,10)||0,s.height=parseInt(r.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){s.tree=YP(n,r.contentWindow.document.documentElement);var a=r.contentWindow.document.documentElement?mg(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):lu.TRANSPARENT,i=r.contentWindow.document.body?mg(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):lu.TRANSPARENT;s.backgroundColor=Dd(a)?Dd(i)?s.styles.backgroundColor:i:a}}catch{}return s}return e}(vA),$ve=["OL","UL","MENU"],Kv=function(t,e,n,r){for(var s=e.firstChild,a=void 0;s;s=a)if(a=s.nextSibling,JP(s)&&s.data.trim().length>0)n.textNodes.push(new Ove(t,s,n.styles));else if(T0(s))if(t7(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return Kv(t,o,n,r)});else{var i=$P(t,s);i.styles.isVisible()&&(Yve(s,i,r)?i.flags|=4:Jve(i.styles)&&(i.flags|=2),$ve.indexOf(s.tagName)!==-1&&(i.flags|=8),n.elements.push(i),s.slot,s.shadowRoot?Kv(t,s.shadowRoot,i,r):!H2(s)&&!XP(s)&&!V2(s)&&Kv(t,s,i,r))}},$P=function(t,e){return F_(e)?new HP(t,e):ZP(e)?new VP(t,e):XP(e)?new GP(t,e):Xve(e)?new zP(t,e):Zve(e)?new k_(t,e):e2e(e)?new PS(t,e):V2(e)?new KP(t,e):H2(e)?new qP(t,e):e7(e)?new WP(t,e):new vA(t,e)},YP=function(t,e){var n=$P(t,e);return n.flags|=4,Kv(t,e,n,n),n},Yve=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||jS(t)&&n.styles.isTransparent()},Jve=function(t){return t.isPositioned()||t.isFloating()},JP=function(t){return t.nodeType===Node.TEXT_NODE},T0=function(t){return t.nodeType===Node.ELEMENT_NODE},I_=function(t){return T0(t)&&typeof t.style<"u"&&!qv(t)},qv=function(t){return typeof t.className=="object"},Xve=function(t){return t.tagName==="LI"},Zve=function(t){return t.tagName==="OL"},e2e=function(t){return t.tagName==="INPUT"},t2e=function(t){return t.tagName==="HTML"},XP=function(t){return t.tagName==="svg"},jS=function(t){return t.tagName==="BODY"},ZP=function(t){return t.tagName==="CANVAS"},c6=function(t){return t.tagName==="VIDEO"},F_=function(t){return t.tagName==="IMG"},e7=function(t){return t.tagName==="IFRAME"},A6=function(t){return t.tagName==="STYLE"},n2e=function(t){return t.tagName==="SCRIPT"},H2=function(t){return t.tagName==="TEXTAREA"},V2=function(t){return t.tagName==="SELECT"},t7=function(t){return t.tagName==="SLOT"},u6=function(t){return t.tagName.indexOf("-")>0},r2e=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,s=e.counterReset,a=!0;r!==null&&r.forEach(function(o){var l=n.counters[o.counter];l&&o.increment!==0&&(a=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var i=[];return a&&s.forEach(function(o){var l=n.counters[o.counter];i.push(o.counter),l||(l=n.counters[o.counter]=[]),l.push(o.reset)}),i},t}(),d6={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},f6={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},s2e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},a2e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},s0=function(t,e,n,r,s,a){return t<e||t>n?zg(t,s,a.length>0):r.integers.reduce(function(i,o,l){for(;t>=o;)t-=o,i+=r.values[l];return i},"")+a},n7=function(t,e,n,r){var s="";do n||t--,s=r(t)+s,t/=e;while(t*e>=e);return s},Hs=function(t,e,n,r,s){var a=n-e+1;return(t<0?"-":"")+(n7(Math.abs(t),a,r,function(i){return Gs(Math.floor(i%a)+e)})+s)},_f=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return n7(Math.abs(t),r,!1,function(s){return e[Math.floor(s%r)]})+n},w0=1,ld=2,cd=4,Kp=8,XA=function(t,e,n,r,s,a){if(t<-9999||t>9999)return zg(t,4,s.length>0);var i=Math.abs(t),o=s;if(i===0)return e[0]+o;for(var l=0;i>0&&l<=4;l++){var A=i%10;A===0&&ba(a,w0)&&o!==""?o=e[A]+o:A>1||A===1&&l===0||A===1&&l===1&&ba(a,ld)||A===1&&l===1&&ba(a,cd)&&t>100||A===1&&l>1&&ba(a,Kp)?o=e[A]+(l>0?n[l-1]:"")+o:A===1&&l>0&&(o=n[l-1]+o),i=Math.floor(i/10)}return(t<0?r:"")+o},h6="十百千萬",m6="拾佰仟萬",p6="マイナス",RC="마이너스",zg=function(t,e,n){var r=n?". ":"",s=n?"、":"",a=n?", ":"",i=n?" ":"";switch(e){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=Hs(t,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return _f(t,"〇一二三四五六七八九",s);case 6:return s0(t,1,3999,d6,3,r).toLowerCase();case 7:return s0(t,1,3999,d6,3,r);case 8:return Hs(t,945,969,!1,r);case 9:return Hs(t,97,122,!1,r);case 10:return Hs(t,65,90,!1,r);case 11:return Hs(t,1632,1641,!0,r);case 12:case 49:return s0(t,1,9999,f6,3,r);case 35:return s0(t,1,9999,f6,3,r).toLowerCase();case 13:return Hs(t,2534,2543,!0,r);case 14:case 30:return Hs(t,6112,6121,!0,r);case 15:return _f(t,"子丑寅卯辰巳午未申酉戌亥",s);case 16:return _f(t,"甲乙丙丁戊己庚辛壬癸",s);case 17:case 48:return XA(t,"零一二三四五六七八九",h6,"負",s,ld|cd|Kp);case 47:return XA(t,"零壹貳參肆伍陸柒捌玖",m6,"負",s,w0|ld|cd|Kp);case 42:return XA(t,"零一二三四五六七八九",h6,"负",s,ld|cd|Kp);case 41:return XA(t,"零壹贰叁肆伍陆柒捌玖",m6,"负",s,w0|ld|cd|Kp);case 26:return XA(t,"〇一二三四五六七八九","十百千万",p6,s,0);case 25:return XA(t,"零壱弐参四伍六七八九","拾百千万",p6,s,w0|ld|cd);case 31:return XA(t,"영일이삼사오육칠팔구","십백천만",RC,a,w0|ld|cd);case 33:return XA(t,"零一二三四五六七八九","十百千萬",RC,a,0);case 32:return XA(t,"零壹貳參四五六七八九","拾百千",RC,a,w0|ld|cd);case 18:return Hs(t,2406,2415,!0,r);case 20:return s0(t,1,19999,a2e,3,r);case 21:return Hs(t,2790,2799,!0,r);case 22:return Hs(t,2662,2671,!0,r);case 22:return s0(t,1,10999,s2e,3,r);case 23:return _f(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return _f(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Hs(t,3302,3311,!0,r);case 28:return _f(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",s);case 29:return _f(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",s);case 34:return Hs(t,3792,3801,!0,r);case 37:return Hs(t,6160,6169,!0,r);case 38:return Hs(t,4160,4169,!0,r);case 39:return Hs(t,2918,2927,!0,r);case 40:return Hs(t,1776,1785,!0,r);case 43:return Hs(t,3046,3055,!0,r);case 44:return Hs(t,3174,3183,!0,r);case 45:return Hs(t,3664,3673,!0,r);case 46:return Hs(t,3872,3881,!0,r);case 3:default:return Hs(t,48,57,!0,r)}},r7="data-html2canvas-ignore",g6=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new r2e,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,s=i2e(e,n);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var a=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=s.contentWindow,l=o.document,A=c2e(s).then(function(){return Oi(r,void 0,void 0,function(){var d,h;return wi(this,function(p){switch(p.label){case 0:return this.scrolledElements.forEach(f2e),o&&(o.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==n.top||o.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-n.left,o.scrollY-n.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:p.sent(),p.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,l2e(l)]:[3,4];case 3:p.sent(),p.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(l,h)}).then(function(){return s})]:[2,s]}})})});return l.open(),l.write(u2e(document.doctype)+"<html></html>"),d2e(this.referenceElement.ownerDocument,a,i),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),A},t.prototype.createElementClone=function(e){if(B_(e,2))debugger;if(ZP(e))return this.createCanvasClone(e);if(c6(e))return this.createVideoClone(e);if(A6(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return F_(n)&&(F_(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),u6(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return DC(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(a,i){return i&&typeof i.cssText=="string"?a+i.cssText:a},""),s=e.cloneNode(!1);return s.textContent=r,s}}catch(a){if(this.context.logger.error("Unable to access cssRules property",a),a.name!=="SecurityError")throw a}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var a=e.getContext("2d"),i=s.getContext("2d");if(i)if(!this.options.allowTaint&&a)i.putImageData(a.getImageData(0,0,e.width,e.height),0,0);else{var o=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,n,r){(!T0(n)||!n2e(n)&&!n.hasAttribute(r7)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!T0(n)||!A6(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var s=this,a=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;a;a=a.nextSibling)if(T0(a)&&t7(a)&&typeof a.assignedNodes=="function"){var i=a.assignedNodes();i.length&&i.forEach(function(o){return s.appendChildNode(n,o,r)})}else this.appendChildNode(n,a,r)},t.prototype.cloneNode=function(e,n){if(JP(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&T0(e)&&(I_(e)||qv(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var a=r.getComputedStyle(e),i=r.getComputedStyle(e,":before"),o=r.getComputedStyle(e,":after");this.referenceElement===e&&I_(s)&&(this.clonedReferenceElement=s),jS(s)&&p2e(s);var l=this.counters.parse(new WF(this.context,a)),A=this.resolvePseudoContent(e,s,i,xg.BEFORE);u6(e)&&(n=!0),c6(e)||this.cloneChildNodes(e,s,n),A&&s.insertBefore(A,s.firstChild);var d=this.resolvePseudoContent(e,s,o,xg.AFTER);return d&&s.appendChild(d),this.counters.pop(l),(a&&(this.options.copyStyles||qv(e))&&!e7(e)||n)&&DC(a,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(H2(e)||V2(e))&&(H2(s)||V2(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,s){var a=this;if(r){var i=r.content,o=n.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||r.display==="none")){this.counters.parse(new WF(this.context,r));var l=new X1e(this.context,r),A=o.createElement("html2canvaspseudoelement");DC(r,A),l.content.forEach(function(h){if(h.type===0)A.appendChild(o.createTextNode(h.value));else if(h.type===22){var p=o.createElement("img");p.src=h.value,p.style.opacity="1",A.appendChild(p)}else if(h.type===18){if(h.name==="attr"){var g=h.values.filter(zr);g.length&&A.appendChild(o.createTextNode(e.getAttribute(g[0].value)||""))}else if(h.name==="counter"){var w=h.values.filter(cm),b=w[0],E=w[1];if(b&&zr(b)){var B=a.counters.getCounterValue(b.value),I=E&&zr(E)?T_.parse(a.context,E.value):3;A.appendChild(o.createTextNode(zg(B,I,!1)))}}else if(h.name==="counters"){var k=h.values.filter(cm),b=k[0],F=k[1],E=k[2];if(b&&zr(b)){var D=a.counters.getCounterValues(b.value),P=E&&zr(E)?T_.parse(a.context,E.value):3,S=F&&F.type===0?F.value:"",N=D.map(function(M){return zg(M,P,!1)}).join(S);A.appendChild(o.createTextNode(N))}}}else if(h.type===20)switch(h.value){case"open-quote":A.appendChild(o.createTextNode(qF(l.quotes,a.quoteDepth++,!0)));break;case"close-quote":A.appendChild(o.createTextNode(qF(l.quotes,--a.quoteDepth,!1)));break;default:A.appendChild(o.createTextNode(h.value))}}),A.className=R_+" "+D_;var d=s===xg.BEFORE?" "+R_:" "+D_;return qv(n)?n.className.baseValue+=d:n.className+=d,A}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),xg;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(xg||(xg={}));var i2e=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(r7,"true"),t.body.appendChild(n),n},o2e=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},l2e=function(t){return Promise.all([].slice.call(t.images,0).map(o2e))},c2e=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var a=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(a),e(t))},50)}})},A2e=["all","d","content"],DC=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);A2e.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},u2e=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},d2e=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},f2e=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},h2e=":before",m2e=":after",R_="___html2canvas___pseudoelement_before",D_="___html2canvas___pseudoelement_after",x6=`{
    content: "" !important;
    display: none !important;
}`,p2e=function(t){g2e(t,"."+R_+h2e+x6+`
         .`+D_+m2e+x6)},g2e=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},s7=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),x2e=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(LC(e)||b2e(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Oi(this,void 0,void 0,function(){var n,r,s,a,i=this;return wi(this,function(o){switch(o.label){case 0:return n=s7.isSameOrigin(e),r=!UC(e)&&this._options.useCORS===!0&&Ja.SUPPORT_CORS_IMAGES&&!n,s=!UC(e)&&!n&&!LC(e)&&typeof this._options.proxy=="string"&&Ja.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!UC(e)&&!LC(e)&&!s&&!r?[2]:(a=e,s?[4,this.proxy(a)]:[3,2]);case 1:a=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,A){var d=new Image;d.onload=function(){return l(d)},d.onerror=A,(C2e(a)||r)&&(d.crossOrigin="anonymous"),d.src=a,d.complete===!0&&setTimeout(function(){return l(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return A("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(a,i){var o=Ja.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")a(l.response);else{var h=new FileReader;h.addEventListener("load",function(){return a(h.result)},!1),h.addEventListener("error",function(p){return i(p)},!1),h.readAsDataURL(l.response)}else i("Failed to proxy resource "+s+" with status code "+l.status)},l.onerror=i;var A=r.indexOf("?")>-1?"&":"?";if(l.open("GET",""+r+A+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),n._options.imageTimeout){var d=n._options.imageTimeout;l.timeout=d,l.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+s)}}l.send()})},t}(),v2e=/^data:image\/svg\+xml/i,y2e=/^data:image\/.*;base64,/i,w2e=/^data:image\/.*/i,b2e=function(t){return Ja.SUPPORT_SVG_DRAWING||!E2e(t)},UC=function(t){return w2e.test(t)},C2e=function(t){return y2e.test(t)},LC=function(t){return t.substr(0,4)==="blob"},E2e=function(t){return t.substr(-3).toLowerCase()==="svg"||v2e.test(t)},zt=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),a0=function(t,e,n){return new zt(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},hv=function(){function t(e,n,r,s){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=s}return t.prototype.subdivide=function(e,n){var r=a0(this.start,this.startControl,e),s=a0(this.startControl,this.endControl,e),a=a0(this.endControl,this.end,e),i=a0(r,s,e),o=a0(s,a,e),l=a0(i,o,e);return n?new t(this.start,r,i,l):new t(l,o,a,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),wl=function(t){return t.type===1},_2e=function(){function t(e){var n=e.styles,r=e.bounds,s=Gp(n.borderTopLeftRadius,r.width,r.height),a=s[0],i=s[1],o=Gp(n.borderTopRightRadius,r.width,r.height),l=o[0],A=o[1],d=Gp(n.borderBottomRightRadius,r.width,r.height),h=d[0],p=d[1],g=Gp(n.borderBottomLeftRadius,r.width,r.height),w=g[0],b=g[1],E=[];E.push((a+l)/r.width),E.push((w+h)/r.width),E.push((i+b)/r.height),E.push((A+p)/r.height);var B=Math.max.apply(Math,E);B>1&&(a/=B,i/=B,l/=B,A/=B,h/=B,p/=B,w/=B,b/=B);var I=r.width-l,k=r.height-p,F=r.width-h,D=r.height-b,P=n.borderTopWidth,S=n.borderRightWidth,N=n.borderBottomWidth,T=n.borderLeftWidth,V=Xr(n.paddingTop,e.bounds.width),M=Xr(n.paddingRight,e.bounds.width),U=Xr(n.paddingBottom,e.bounds.width),O=Xr(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||i>0?As(r.left+T/3,r.top+P/3,a-T/3,i-P/3,Br.TOP_LEFT):new zt(r.left+T/3,r.top+P/3),this.topRightBorderDoubleOuterBox=a>0||i>0?As(r.left+I,r.top+P/3,l-S/3,A-P/3,Br.TOP_RIGHT):new zt(r.left+r.width-S/3,r.top+P/3),this.bottomRightBorderDoubleOuterBox=h>0||p>0?As(r.left+F,r.top+k,h-S/3,p-N/3,Br.BOTTOM_RIGHT):new zt(r.left+r.width-S/3,r.top+r.height-N/3),this.bottomLeftBorderDoubleOuterBox=w>0||b>0?As(r.left+T/3,r.top+D,w-T/3,b-N/3,Br.BOTTOM_LEFT):new zt(r.left+T/3,r.top+r.height-N/3),this.topLeftBorderDoubleInnerBox=a>0||i>0?As(r.left+T*2/3,r.top+P*2/3,a-T*2/3,i-P*2/3,Br.TOP_LEFT):new zt(r.left+T*2/3,r.top+P*2/3),this.topRightBorderDoubleInnerBox=a>0||i>0?As(r.left+I,r.top+P*2/3,l-S*2/3,A-P*2/3,Br.TOP_RIGHT):new zt(r.left+r.width-S*2/3,r.top+P*2/3),this.bottomRightBorderDoubleInnerBox=h>0||p>0?As(r.left+F,r.top+k,h-S*2/3,p-N*2/3,Br.BOTTOM_RIGHT):new zt(r.left+r.width-S*2/3,r.top+r.height-N*2/3),this.bottomLeftBorderDoubleInnerBox=w>0||b>0?As(r.left+T*2/3,r.top+D,w-T*2/3,b-N*2/3,Br.BOTTOM_LEFT):new zt(r.left+T*2/3,r.top+r.height-N*2/3),this.topLeftBorderStroke=a>0||i>0?As(r.left+T/2,r.top+P/2,a-T/2,i-P/2,Br.TOP_LEFT):new zt(r.left+T/2,r.top+P/2),this.topRightBorderStroke=a>0||i>0?As(r.left+I,r.top+P/2,l-S/2,A-P/2,Br.TOP_RIGHT):new zt(r.left+r.width-S/2,r.top+P/2),this.bottomRightBorderStroke=h>0||p>0?As(r.left+F,r.top+k,h-S/2,p-N/2,Br.BOTTOM_RIGHT):new zt(r.left+r.width-S/2,r.top+r.height-N/2),this.bottomLeftBorderStroke=w>0||b>0?As(r.left+T/2,r.top+D,w-T/2,b-N/2,Br.BOTTOM_LEFT):new zt(r.left+T/2,r.top+r.height-N/2),this.topLeftBorderBox=a>0||i>0?As(r.left,r.top,a,i,Br.TOP_LEFT):new zt(r.left,r.top),this.topRightBorderBox=l>0||A>0?As(r.left+I,r.top,l,A,Br.TOP_RIGHT):new zt(r.left+r.width,r.top),this.bottomRightBorderBox=h>0||p>0?As(r.left+F,r.top+k,h,p,Br.BOTTOM_RIGHT):new zt(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=w>0||b>0?As(r.left,r.top+D,w,b,Br.BOTTOM_LEFT):new zt(r.left,r.top+r.height),this.topLeftPaddingBox=a>0||i>0?As(r.left+T,r.top+P,Math.max(0,a-T),Math.max(0,i-P),Br.TOP_LEFT):new zt(r.left+T,r.top+P),this.topRightPaddingBox=l>0||A>0?As(r.left+Math.min(I,r.width-S),r.top+P,I>r.width+S?0:Math.max(0,l-S),Math.max(0,A-P),Br.TOP_RIGHT):new zt(r.left+r.width-S,r.top+P),this.bottomRightPaddingBox=h>0||p>0?As(r.left+Math.min(F,r.width-T),r.top+Math.min(k,r.height-N),Math.max(0,h-S),Math.max(0,p-N),Br.BOTTOM_RIGHT):new zt(r.left+r.width-S,r.top+r.height-N),this.bottomLeftPaddingBox=w>0||b>0?As(r.left+T,r.top+Math.min(D,r.height-N),Math.max(0,w-T),Math.max(0,b-N),Br.BOTTOM_LEFT):new zt(r.left+T,r.top+r.height-N),this.topLeftContentBox=a>0||i>0?As(r.left+T+O,r.top+P+V,Math.max(0,a-(T+O)),Math.max(0,i-(P+V)),Br.TOP_LEFT):new zt(r.left+T+O,r.top+P+V),this.topRightContentBox=l>0||A>0?As(r.left+Math.min(I,r.width+T+O),r.top+P+V,I>r.width+T+O?0:l-T+O,A-(P+V),Br.TOP_RIGHT):new zt(r.left+r.width-(S+M),r.top+P+V),this.bottomRightContentBox=h>0||p>0?As(r.left+Math.min(F,r.width-(T+O)),r.top+Math.min(k,r.height+P+V),Math.max(0,h-(S+M)),p-(N+U),Br.BOTTOM_RIGHT):new zt(r.left+r.width-(S+M),r.top+r.height-(N+U)),this.bottomLeftContentBox=w>0||b>0?As(r.left+T+O,r.top+D,Math.max(0,w-(T+O)),b-(N+U),Br.BOTTOM_LEFT):new zt(r.left+T+O,r.top+r.height-(N+U))}return t}(),Br;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Br||(Br={}));var As=function(t,e,n,r,s){var a=4*((Math.sqrt(2)-1)/3),i=n*a,o=r*a,l=t+n,A=e+r;switch(s){case Br.TOP_LEFT:return new hv(new zt(t,A),new zt(t,A-o),new zt(l-i,e),new zt(l,e));case Br.TOP_RIGHT:return new hv(new zt(t,e),new zt(t+i,e),new zt(l,A-o),new zt(l,A));case Br.BOTTOM_RIGHT:return new hv(new zt(l,e),new zt(l,e+o),new zt(t+i,A),new zt(t,A));case Br.BOTTOM_LEFT:default:return new hv(new zt(l,A),new zt(l-i,A),new zt(t,e+o),new zt(t,e))}},G2=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},S2e=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},z2=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},T2e=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),mv=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),B2e=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),N2e=function(t){return t.type===0},a7=function(t){return t.type===1},k2e=function(t){return t.type===2},v6=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},I2e=function(t,e,n,r,s){return t.map(function(a,i){switch(i){case 0:return a.add(e,n);case 1:return a.add(e+r,n);case 2:return a.add(e+r,n+s);case 3:return a.add(e,n+s)}return a})},i7=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),o7=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new _2e(this.container),this.container.styles.opacity<1&&this.effects.push(new B2e(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new T2e(r,s,a))}if(this.container.styles.overflowX!==0){var i=G2(this.curves),o=z2(this.curves);v6(i,o)?this.effects.push(new mv(i,6)):(this.effects.push(new mv(i,2)),this.effects.push(new mv(o,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,s=this.effects.slice(0);r;){var a=r.effects.filter(function(l){return!a7(l)});if(n||r.container.styles.position!==0||!r.parent){if(s.unshift.apply(s,a),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=G2(r.curves),o=z2(r.curves);v6(i,o)||s.unshift(new mv(o,6))}}else s.unshift.apply(s,a);r=r.parent}return s.filter(function(l){return ba(l.target,e)})},t}(),U_=function(t,e,n,r){t.container.elements.forEach(function(s){var a=ba(s.flags,4),i=ba(s.flags,2),o=new o7(s,t);ba(s.styles.display,2048)&&r.push(o);var l=ba(s.flags,8)?[]:r;if(a||i){var A=a||s.styles.isPositioned()?n:e,d=new i7(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var p=0;A.negativeZIndex.some(function(w,b){return h>w.element.container.styles.zIndex.order?(p=b,!1):p>0}),A.negativeZIndex.splice(p,0,d)}else if(h>0){var g=0;A.positiveZIndex.some(function(w,b){return h>=w.element.container.styles.zIndex.order?(g=b+1,!1):g>0}),A.positiveZIndex.splice(g,0,d)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?A.nonPositionedFloats.push(d):A.nonPositionedInlineLevel.push(d);U_(o,d,a?d:n,l)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),U_(o,e,n,l);ba(s.flags,8)&&l7(s,l)})},l7=function(t,e){for(var n=t instanceof k_?t.start:1,r=t instanceof k_?t.reversed:!1,s=0;s<e.length;s++){var a=e[s];a.container instanceof zP&&typeof a.container.value=="number"&&a.container.value!==0&&(n=a.container.value),a.listValue=zg(n,a.container.styles.listStyleType,!0),n+=r?-1:1}},F2e=function(t){var e=new o7(t,null),n=new i7(e),r=[];return U_(e,n,n,r),l7(e.container,r),n},y6=function(t,e){switch(e){case 0:return El(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return El(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return El(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return El(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},R2e=function(t,e){switch(e){case 0:return El(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return El(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return El(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return El(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},D2e=function(t,e){switch(e){case 0:return El(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return El(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return El(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return El(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},U2e=function(t,e){switch(e){case 0:return pv(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return pv(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return pv(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return pv(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},pv=function(t,e){var n=[];return wl(t)?n.push(t.subdivide(.5,!1)):n.push(t),wl(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},El=function(t,e,n,r){var s=[];return wl(t)?s.push(t.subdivide(.5,!1)):s.push(t),wl(n)?s.push(n.subdivide(.5,!0)):s.push(n),wl(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),wl(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},c7=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},K2=function(t){var e=t.styles,n=t.bounds,r=Xr(e.paddingLeft,n.width),s=Xr(e.paddingRight,n.width),a=Xr(e.paddingTop,n.width),i=Xr(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,a+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+s),-(e.borderTopWidth+e.borderBottomWidth+a+i))},L2e=function(t,e){return t===0?e.bounds:t===2?K2(e):c7(e)},M2e=function(t,e){return t===0?e.bounds:t===2?K2(e):c7(e)},MC=function(t,e,n){var r=L2e(b0(t.styles.backgroundOrigin,e),t),s=M2e(b0(t.styles.backgroundClip,e),t),a=P2e(b0(t.styles.backgroundSize,e),n,r),i=a[0],o=a[1],l=Gp(b0(t.styles.backgroundPosition,e),r.width-i,r.height-o),A=j2e(b0(t.styles.backgroundRepeat,e),l,a,r,s),d=Math.round(r.left+l[0]),h=Math.round(r.top+l[1]);return[A,d,h,i,o]},i0=function(t){return zr(t)&&t.value===K0.AUTO},gv=function(t){return typeof t=="number"},P2e=function(t,e,n){var r=e[0],s=e[1],a=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(da(i)&&o&&da(o))return[Xr(i,n.width),Xr(o,n.height)];var l=gv(a);if(zr(i)&&(i.value===K0.CONTAIN||i.value===K0.COVER)){if(gv(a)){var A=n.width/n.height;return A<a!=(i.value===K0.COVER)?[n.width,n.width/a]:[n.height*a,n.height]}return[n.width,n.height]}var d=gv(r),h=gv(s),p=d||h;if(i0(i)&&(!o||i0(o))){if(d&&h)return[r,s];if(!l&&!p)return[n.width,n.height];if(p&&l){var g=d?r:s*a,w=h?s:r/a;return[g,w]}var b=d?r:n.width,E=h?s:n.height;return[b,E]}if(l){var B=0,I=0;return da(i)?B=Xr(i,n.width):da(o)&&(I=Xr(o,n.height)),i0(i)?B=I*a:(!o||i0(o))&&(I=B/a),[B,I]}var k=null,F=null;if(da(i)?k=Xr(i,n.width):o&&da(o)&&(F=Xr(o,n.height)),k!==null&&(!o||i0(o))&&(F=d&&h?k/r*s:n.height),F!==null&&i0(i)&&(k=d&&h?F/s*r:n.width),k!==null&&F!==null)return[k,F];throw new Error("Unable to calculate background-size for element")},b0=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},j2e=function(t,e,n,r,s){var a=e[0],i=e[1],o=n[0],l=n[1];switch(t){case 2:return[new zt(Math.round(r.left),Math.round(r.top+i)),new zt(Math.round(r.left+r.width),Math.round(r.top+i)),new zt(Math.round(r.left+r.width),Math.round(l+r.top+i)),new zt(Math.round(r.left),Math.round(l+r.top+i))];case 3:return[new zt(Math.round(r.left+a),Math.round(r.top)),new zt(Math.round(r.left+a+o),Math.round(r.top)),new zt(Math.round(r.left+a+o),Math.round(r.height+r.top)),new zt(Math.round(r.left+a),Math.round(r.height+r.top))];case 1:return[new zt(Math.round(r.left+a),Math.round(r.top+i)),new zt(Math.round(r.left+a+o),Math.round(r.top+i)),new zt(Math.round(r.left+a+o),Math.round(r.top+i+l)),new zt(Math.round(r.left+a),Math.round(r.top+i+l))];default:return[new zt(Math.round(s.left),Math.round(s.top)),new zt(Math.round(s.left+s.width),Math.round(s.top)),new zt(Math.round(s.left+s.width),Math.round(s.height+s.top)),new zt(Math.round(s.left),Math.round(s.height+s.top))]}},O2e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",w6="Hidden Text",Q2e=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),s=this._document.createElement("img"),a=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),s.src=O2e,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=n,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(w6)),r.appendChild(a),r.appendChild(s);var o=s.offsetTop-a.offsetTop+2;r.removeChild(a),r.appendChild(this._document.createTextNode(w6)),r.style.lineHeight="normal",s.style.verticalAlign="super";var l=s.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:o,middle:l}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),A7=function(){function t(e,n){this.context=e,this.options=n}return t}(),H2e=1e4,V2e=function(t){gc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s._activeEffects=[],s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),r.canvas||(s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px"),s.fontMetrics=new Q2e(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),s}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(s){return r.applyEffect(s)})},e.prototype.applyEffect=function(n){this.ctx.save(),k2e(n)&&(this.ctx.globalAlpha=n.opacity),N2e(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),a7(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return Oi(this,void 0,void 0,function(){var r;return wi(this,function(s){switch(s.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return Oi(this,void 0,void 0,function(){return wi(this,function(r){switch(r.label){case 0:if(ba(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,s){var a=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+s);else{var i=MS(n.text);i.reduce(function(o,l){return a.ctx.fillText(l,o,n.bounds.top+s),o+a.ctx.measureText(l).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),s=W2e(n.fontFamily).join(", "),a=yx(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,a,s].join(" "),s,a]},e.prototype.renderTextNode=function(n,r){return Oi(this,void 0,void 0,function(){var s,a,i,o,l,A,d,h,p=this;return wi(this,function(g){return s=this.createFontStyle(r),a=s[0],i=s[1],o=s[2],this.ctx.font=a,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(i,o),A=l.baseline,d=l.middle,h=r.paintOrder,n.textBounds.forEach(function(w){h.forEach(function(b){switch(b){case 0:p.ctx.fillStyle=La(r.color),p.renderTextWithLetterSpacing(w,r.letterSpacing,A);var E=r.textShadow;E.length&&w.text.trim().length&&(E.slice(0).reverse().forEach(function(B){p.ctx.shadowColor=La(B.color),p.ctx.shadowOffsetX=B.offsetX.number*p.options.scale,p.ctx.shadowOffsetY=B.offsetY.number*p.options.scale,p.ctx.shadowBlur=B.blur.number,p.renderTextWithLetterSpacing(w,r.letterSpacing,A)}),p.ctx.shadowColor="",p.ctx.shadowOffsetX=0,p.ctx.shadowOffsetY=0,p.ctx.shadowBlur=0),r.textDecorationLine.length&&(p.ctx.fillStyle=La(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(B){switch(B){case 1:p.ctx.fillRect(w.bounds.left,Math.round(w.bounds.top+A),w.bounds.width,1);break;case 2:p.ctx.fillRect(w.bounds.left,Math.round(w.bounds.top),w.bounds.width,1);break;case 3:p.ctx.fillRect(w.bounds.left,Math.ceil(w.bounds.top+d),w.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&w.text.trim().length&&(p.ctx.strokeStyle=La(r.webkitTextStrokeColor),p.ctx.lineWidth=r.webkitTextStrokeWidth,p.ctx.lineJoin=window.chrome?"miter":"round",p.ctx.strokeText(w.text,w.bounds.left,w.bounds.top+A)),p.ctx.strokeStyle="",p.ctx.lineWidth=0,p.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,s){if(s&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var a=K2(n),i=z2(r);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,n.intrinsicWidth,n.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return Oi(this,void 0,void 0,function(){var r,s,a,i,o,l,I,I,A,d,h,p,F,g,w,D,b,E,B,I,k,F,D;return wi(this,function(P){switch(P.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,s=n.curves,a=r.styles,i=0,o=r.textNodes,P.label=1;case 1:return i<o.length?(l=o[i],[4,this.renderTextNode(l,a)]):[3,4];case 2:P.sent(),P.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof HP))return[3,8];P.label=5;case 5:return P.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return I=P.sent(),this.renderReplacedElement(r,s,I),[3,8];case 7:return P.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof VP&&this.renderReplacedElement(r,s,r.canvas),!(r instanceof GP))return[3,12];P.label=9;case 9:return P.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return I=P.sent(),this.renderReplacedElement(r,s,I),[3,12];case 11:return P.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof WP&&r.tree?(A=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,A.render(r.tree)]):[3,14];case 13:d=P.sent(),r.width&&r.height&&this.ctx.drawImage(d,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),P.label=14;case 14:if(r instanceof PS&&(h=Math.min(r.bounds.width,r.bounds.height),r.type===O2?r.checked&&(this.ctx.save(),this.path([new zt(r.bounds.left+h*.39363,r.bounds.top+h*.79),new zt(r.bounds.left+h*.16,r.bounds.top+h*.5549),new zt(r.bounds.left+h*.27347,r.bounds.top+h*.44071),new zt(r.bounds.left+h*.39694,r.bounds.top+h*.5649),new zt(r.bounds.left+h*.72983,r.bounds.top+h*.23),new zt(r.bounds.left+h*.84,r.bounds.top+h*.34085),new zt(r.bounds.left+h*.39363,r.bounds.top+h*.79)]),this.ctx.fillStyle=La(l6),this.ctx.fill(),this.ctx.restore()):r.type===Q2&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+h/2,r.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=La(l6),this.ctx.fill(),this.ctx.restore())),G2e(r)&&r.value.length){switch(p=this.createFontStyle(a),F=p[0],g=p[1],w=this.fontMetrics.getMetrics(F,g).baseline,this.ctx.font=F,this.ctx.fillStyle=La(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=K2e(r.styles.textAlign),D=K2(r),b=0,r.styles.textAlign){case 1:b+=D.width/2;break;case 2:b+=D.width;break}E=D.add(b,0,0,-D.height/2+1),this.ctx.save(),this.path([new zt(D.left,D.top),new zt(D.left+D.width,D.top),new zt(D.left+D.width,D.top+D.height),new zt(D.left,D.top+D.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new gg(r.value,E),a.letterSpacing,w),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ba(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(B=r.styles.listStyleImage,B.type!==0)return[3,18];I=void 0,k=B.url,P.label=15;case 15:return P.trys.push([15,17,,18]),[4,this.context.cache.match(k)];case 16:return I=P.sent(),this.ctx.drawImage(I,r.bounds.left-(I.width+10),r.bounds.top),[3,18];case 17:return P.sent(),this.context.logger.error("Error loading list-style-image "+k),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(F=this.createFontStyle(a)[0],this.ctx.font=F,this.ctx.fillStyle=La(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",D=new hu(r.bounds.left,r.bounds.top+Xr(r.styles.paddingTop,r.bounds.width),r.bounds.width,zF(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new gg(n.listValue,D),a.letterSpacing,zF(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),P.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return Oi(this,void 0,void 0,function(){var r,s,B,a,i,B,o,l,B,A,d,B,h,p,B,g,w,B,b,E,B;return wi(this,function(I){switch(I.label){case 0:if(ba(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:I.sent(),r=0,s=n.negativeZIndex,I.label=2;case 2:return r<s.length?(B=s[r],[4,this.renderStack(B)]):[3,5];case 3:I.sent(),I.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:I.sent(),a=0,i=n.nonInlineLevel,I.label=7;case 7:return a<i.length?(B=i[a],[4,this.renderNode(B)]):[3,10];case 8:I.sent(),I.label=9;case 9:return a++,[3,7];case 10:o=0,l=n.nonPositionedFloats,I.label=11;case 11:return o<l.length?(B=l[o],[4,this.renderStack(B)]):[3,14];case 12:I.sent(),I.label=13;case 13:return o++,[3,11];case 14:A=0,d=n.nonPositionedInlineLevel,I.label=15;case 15:return A<d.length?(B=d[A],[4,this.renderStack(B)]):[3,18];case 16:I.sent(),I.label=17;case 17:return A++,[3,15];case 18:h=0,p=n.inlineLevel,I.label=19;case 19:return h<p.length?(B=p[h],[4,this.renderNode(B)]):[3,22];case 20:I.sent(),I.label=21;case 21:return h++,[3,19];case 22:g=0,w=n.zeroOrAutoZIndexOrTransformedOrOpacity,I.label=23;case 23:return g<w.length?(B=w[g],[4,this.renderStack(B)]):[3,26];case 24:I.sent(),I.label=25;case 25:return g++,[3,23];case 26:b=0,E=n.positiveZIndex,I.label=27;case 27:return b<E.length?(B=E[b],[4,this.renderStack(B)]):[3,30];case 28:I.sent(),I.label=29;case 29:return b++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(s,a){var i=wl(s)?s.start:s;a===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),wl(s)&&r.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(n,r,s,a){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(s,a),this.ctx.fill(),this.ctx.translate(-s,-a)},e.prototype.resizeImage=function(n,r,s){var a;if(n.width===r&&n.height===s)return n;var i=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,o=i.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,s);var l=o.getContext("2d");return l.drawImage(n,0,0,n.width,n.height,0,0,r,s),o},e.prototype.renderBackgroundImage=function(n){return Oi(this,void 0,void 0,function(){var r,s,a,i,o,l;return wi(this,function(A){switch(A.label){case 0:r=n.styles.backgroundImage.length-1,s=function(d){var h,p,g,V,K,q,O,G,N,w,V,K,q,O,G,b,E,B,I,k,F,D,P,S,N,T,V,M,U,O,G,ie,K,q,se,Z,X,de,j,W,J,ne;return wi(this,function(oe){switch(oe.label){case 0:if(d.type!==0)return[3,5];h=void 0,p=d.url,oe.label=1;case 1:return oe.trys.push([1,3,,4]),[4,a.context.cache.match(p)];case 2:return h=oe.sent(),[3,4];case 3:return oe.sent(),a.context.logger.error("Error loading background-image "+p),[3,4];case 4:return h&&(g=MC(n,r,[h.width,h.height,h.width/h.height]),V=g[0],K=g[1],q=g[2],O=g[3],G=g[4],N=a.ctx.createPattern(a.resizeImage(h,O,G),"repeat"),a.renderRepeat(V,N,K,q)),[3,6];case 5:Nxe(d)?(w=MC(n,r,[null,null,null]),V=w[0],K=w[1],q=w[2],O=w[3],G=w[4],b=Exe(d.angle,O,G),E=b[0],B=b[1],I=b[2],k=b[3],F=b[4],D=document.createElement("canvas"),D.width=O,D.height=G,P=D.getContext("2d"),S=P.createLinearGradient(B,k,I,F),VF(d.stops,E).forEach(function(ue){return S.addColorStop(ue.stop,La(ue.color))}),P.fillStyle=S,P.fillRect(0,0,O,G),O>0&&G>0&&(N=a.ctx.createPattern(D,"repeat"),a.renderRepeat(V,N,K,q))):kxe(d)&&(T=MC(n,r,[null,null,null]),V=T[0],M=T[1],U=T[2],O=T[3],G=T[4],ie=d.position.length===0?[DS]:d.position,K=Xr(ie[0],O),q=Xr(ie[ie.length-1],G),se=_xe(d,K,q,O,G),Z=se[0],X=se[1],Z>0&&X>0&&(de=a.ctx.createRadialGradient(M+K,U+q,0,M+K,U+q,Z),VF(d.stops,Z*2).forEach(function(ue){return de.addColorStop(ue.stop,La(ue.color))}),a.path(V),a.ctx.fillStyle=de,Z!==X?(j=n.bounds.left+.5*n.bounds.width,W=n.bounds.top+.5*n.bounds.height,J=X/Z,ne=1/J,a.ctx.save(),a.ctx.translate(j,W),a.ctx.transform(1,0,0,J,0,0),a.ctx.translate(-j,-W),a.ctx.fillRect(M,ne*(U-W)+W,O,G*ne),a.ctx.restore()):a.ctx.fill())),oe.label=6;case 6:return r--,[2]}})},a=this,i=0,o=n.styles.backgroundImage.slice(0).reverse(),A.label=1;case 1:return i<o.length?(l=o[i],[5,s(l)]):[3,4];case 2:A.sent(),A.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,s){return Oi(this,void 0,void 0,function(){return wi(this,function(a){return this.path(y6(s,r)),this.ctx.fillStyle=La(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,s,a){return Oi(this,void 0,void 0,function(){var i,o;return wi(this,function(l){switch(l.label){case 0:return r<3?[4,this.renderSolidBorder(n,s,a)]:[3,2];case 1:return l.sent(),[2];case 2:return i=R2e(a,s),this.path(i),this.ctx.fillStyle=La(n),this.ctx.fill(),o=D2e(a,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return Oi(this,void 0,void 0,function(){var r,s,a,i,o,l,A,d,h=this;return wi(this,function(p){switch(p.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,s=!Dd(r.backgroundColor)||r.backgroundImage.length,a=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=z2e(b0(r.backgroundClip,0),n.curves),s||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Dd(r.backgroundColor)||(this.ctx.fillStyle=La(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:p.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(g){h.ctx.save();var w=G2(n.curves),b=g.inset?0:H2e,E=I2e(w,-b+(g.inset?1:-1)*g.spread.number,(g.inset?1:-1)*g.spread.number,g.spread.number*(g.inset?-2:2),g.spread.number*(g.inset?-2:2));g.inset?(h.path(w),h.ctx.clip(),h.mask(E)):(h.mask(w),h.ctx.clip(),h.path(E)),h.ctx.shadowOffsetX=g.offsetX.number+b,h.ctx.shadowOffsetY=g.offsetY.number,h.ctx.shadowColor=La(g.color),h.ctx.shadowBlur=g.blur.number,h.ctx.fillStyle=g.inset?La(g.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),p.label=2;case 2:o=0,l=0,A=a,p.label=3;case 3:return l<A.length?(d=A[l],d.style!==0&&!Dd(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,2)]:[3,11]):[3,13];case 4:return p.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,3)];case 6:return p.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,n.curves)];case 8:return p.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,n.curves)];case 10:p.sent(),p.label=11;case 11:o++,p.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,s,a,i){return Oi(this,void 0,void 0,function(){var o,l,A,d,h,p,g,w,b,E,B,I,k,F,D,P,D,P;return wi(this,function(S){return this.ctx.save(),o=U2e(a,s),l=y6(a,s),i===2&&(this.path(l),this.ctx.clip()),wl(l[0])?(A=l[0].start.x,d=l[0].start.y):(A=l[0].x,d=l[0].y),wl(l[1])?(h=l[1].end.x,p=l[1].end.y):(h=l[1].x,p=l[1].y),s===0||s===2?g=Math.abs(A-h):g=Math.abs(d-p),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(l.slice(0,2)),w=r<3?r*3:r*2,b=r<3?r*2:r,i===3&&(w=r,b=r),E=!0,g<=w*2?E=!1:g<=w*2+b?(B=g/(2*w+b),w*=B,b*=B):(I=Math.floor((g+b)/(w+b)),k=(g-I*w)/(I-1),F=(g-(I+1)*w)/I,b=F<=0||Math.abs(b-k)<Math.abs(b-F)?k:F),E&&(i===3?this.ctx.setLineDash([0,w+b]):this.ctx.setLineDash([w,b])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=La(n),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(wl(l[0])&&(D=l[3],P=l[0],this.ctx.beginPath(),this.formatPath([new zt(D.end.x,D.end.y),new zt(P.start.x,P.start.y)]),this.ctx.stroke()),wl(l[1])&&(D=l[1],P=l[2],this.ctx.beginPath(),this.formatPath([new zt(D.end.x,D.end.y),new zt(P.start.x,P.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return Oi(this,void 0,void 0,function(){var r;return wi(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=La(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=F2e(n),[4,this.renderStack(r)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(A7),G2e=function(t){return t instanceof qP||t instanceof KP?!0:t instanceof PS&&t.type!==Q2&&t.type!==O2},z2e=function(t,e){switch(t){case 0:return G2(e);case 2:return S2e(e);case 1:default:return z2(e)}},K2e=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},q2e=["-apple-system","system-ui"],W2e=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return q2e.indexOf(e)===-1}):t},$2e=function(t){gc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=r,s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),s}return e.prototype.render=function(n){return Oi(this,void 0,void 0,function(){var r,s;return wi(this,function(a){switch(a.label){case 0:return r=N_(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,Y2e(r)];case 1:return s=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=La(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(A7),Y2e=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},J2e=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,$1([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,$1([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,$1([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,$1([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),X2e=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new J2e({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new x2e(this,e)}return t.instanceCount=1,t}(),u7=function(t,e){return e===void 0&&(e={}),Z2e(t,e)};typeof window<"u"&&s7.setContext(window);var Z2e=function(t,e){return Oi(void 0,void 0,void 0,function(){var n,r,s,a,i,o,l,A,d,h,p,g,w,b,E,B,I,k,F,D,S,P,S,N,T,V,M,U,O,G,ie,K,q,se,Z,X,de,j,W,J;return wi(this,function(ne){switch(ne.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return s={allowTaint:(N=e.allowTaint)!==null&&N!==void 0?N:!1,imageTimeout:(T=e.imageTimeout)!==null&&T!==void 0?T:15e3,proxy:e.proxy,useCORS:(V=e.useCORS)!==null&&V!==void 0?V:!1},a=h_({logging:(M=e.logging)!==null&&M!==void 0?M:!0,cache:e.cache},s),i={windowWidth:(U=e.windowWidth)!==null&&U!==void 0?U:r.innerWidth,windowHeight:(O=e.windowHeight)!==null&&O!==void 0?O:r.innerHeight,scrollX:(G=e.scrollX)!==null&&G!==void 0?G:r.pageXOffset,scrollY:(ie=e.scrollY)!==null&&ie!==void 0?ie:r.pageYOffset},o=new hu(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),l=new X2e(a,o),A=(K=e.foreignObjectRendering)!==null&&K!==void 0?K:!1,d={allowTaint:(q=e.allowTaint)!==null&&q!==void 0?q:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:A,copyStyles:A},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new g6(l,t,d),p=h.clonedReferenceElement,p?[4,h.toIFrame(n,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return g=ne.sent(),w=jS(p)||t2e(p)?Ipe(p.ownerDocument):Py(l,p),b=w.width,E=w.height,B=w.left,I=w.top,k=eye(l,p,e.backgroundColor),F={canvas:e.canvas,backgroundColor:k,scale:(Z=(se=e.scale)!==null&&se!==void 0?se:r.devicePixelRatio)!==null&&Z!==void 0?Z:1,x:((X=e.x)!==null&&X!==void 0?X:0)+B,y:((de=e.y)!==null&&de!==void 0?de:0)+I,width:(j=e.width)!==null&&j!==void 0?j:Math.ceil(b),height:(W=e.height)!==null&&W!==void 0?W:Math.ceil(E)},A?(l.logger.debug("Document cloned, using foreign object rendering"),S=new $2e(l,F),[4,S.render(p)]):[3,3];case 2:return D=ne.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+B+","+I+" with size "+b+"x"+E+" using computed rendering"),l.logger.debug("Starting DOM parsing"),P=YP(l,p),k===P.styles.backgroundColor&&(P.styles.backgroundColor=lu.TRANSPARENT),l.logger.debug("Starting renderer for element at "+F.x+","+F.y+" with size "+F.width+"x"+F.height),S=new V2e(l,F),[4,S.render(P)];case 4:D=ne.sent(),ne.label=5;case 5:return(!((J=e.removeContainer)!==null&&J!==void 0)||J)&&(g6.destroy(g)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,D]}})})},eye=function(t,e,n){var r=e.ownerDocument,s=r.documentElement?mg(t,getComputedStyle(r.documentElement).backgroundColor):lu.TRANSPARENT,a=r.body?mg(t,getComputedStyle(r.body).backgroundColor):lu.TRANSPARENT,i=typeof n=="string"?mg(t,n):n===null?lu.TRANSPARENT:4294967295;return e===r.documentElement?Dd(s)?Dd(a)?i:a:s:i};const tye=Object.freeze(Object.defineProperty({__proto__:null,default:u7},Symbol.toStringTag,{value:"Module"})),b6="planificacionesInterdisciplinarias",C6="entregasTareasInterdisciplinarias",nye="usuariosLiceo",rye=({planificaciones:t,onActivityUpdate:e})=>{const[n,r]=ee.useState(null),s=ee.useMemo(()=>{const l=[];return t.forEach(A=>{A.actividades.forEach(d=>l.push({...d,planId:A.id,type:"activity"})),A.fechasClave.forEach(d=>l.push({id:d.id,planId:A.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:A.docentesResponsables,asignaturaPrincipal:"Milestone"}))}),l.sort((A,d)=>new Date(A.fechaInicio).getTime()-new Date(d.fechaInicio).getTime())},[t]),a=ee.useCallback(l=>{if(l.type==="keyDate")return{text:"Fecha Clave",color:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-300"};const A=new Date;A.setHours(0,0,0,0);const d=new Date(`${l.fechaInicio}T00:00:00`),h=new Date(`${l.fechaFin}T00:00:00`);return h<A?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=A&&h>=A?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}},[]),i=({name:l})=>{const A=(l||"").split(" ").map(g=>g[0]).join("").toUpperCase(),d=g=>{let w=0;for(let b=0;b<g.length;b++)w=g.charCodeAt(b)+((w<<5)-w);return w},h=["bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300","bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300","bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300","bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300","bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300","bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"],p=Math.abs(d(l))%h.length;return u.jsx("div",{className:`w-9 h-9 rounded-full ${h[p]} flex items-center justify-center font-bold text-sm ring-2 ring-white dark:ring-slate-800`,children:A.slice(0,2)})},o=({data:l,onClose:A,onSave:d})=>{const[h,p]=ee.useState(l.activity),g=b=>{p({...h,[b.target.name]:b.target.value})},w=()=>{d(l.planId,h),A()};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 animate-fade-in-up",children:[u.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Editar Actividad"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Nombre"}),u.jsx("input",{name:"nombre",value:h.nombre,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Responsables"}),u.jsx("input",{name:"responsables",value:h.responsables,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Inicio"}),u.jsx("input",{type:"date",name:"fechaInicio",value:h.fechaInicio,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Fin"}),u.jsx("input",{type:"date",name:"fechaFin",value:h.fechaFin,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),u.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[u.jsx("button",{onClick:A,className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 rounded-md font-semibold",children:"Cancelar"}),u.jsx("button",{onClick:w,className:"px-4 py-2 bg-amber-500 text-white rounded-md font-semibold",children:"Guardar"})]})]})})};return s.length===0?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cronograma del Proyecto"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),u.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades para mostrar. Cree una planificación primero."})]}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[u.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-200",children:"Cronograma del Proyecto"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[u.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Tarea"}),u.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),u.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Inicio"}),u.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Fin"}),u.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Asignado"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:s.map(l=>{const A=a(l),d=l.type==="activity";return u.jsxs("tr",{className:`${d?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>d&&r({planId:l.planId,activity:l}),children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base font-medium text-slate-900 dark:text-slate-200",children:l.nombre}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${A.color}`,children:A.text})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaInicio}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaFin}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx(i,{name:l.responsables||"N/A"})})]},l.id)})})]})}),n&&u.jsx(o,{data:n,onClose:()=>r(null),onSave:e})]})},sye=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),aye=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21a6 6 0 006-5.197M15 12a4 4 0 110-8 4 4 0 010 8z"})}),iye=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[u.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),u.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0v6"})]}),oye=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),lye=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),cye=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),Aye=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),uye=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),E6=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),id=({icon:t,label:e,children:n,aiButton:r})=>u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border dark:border-slate-700",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400 font-medium",children:[t,u.jsx("span",{children:e})]}),r]}),n]}),dye=({initialPlan:t,onSave:e})=>{const[n,r]=ee.useState(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[s,a]=ee.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""}),[i,o]=ee.useState({nombre:"",fecha:""}),[l,A]=ee.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[d,h]=ee.useState(!1),[p,g]=ee.useState(!1);ee.useEffect(()=>{r(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[t]);const w=async F=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}F==="objetivos"?h(!0):g(!0);let D="";F==="objetivos"?D=`Basado en la siguiente descripción de un proyecto escolar interdisciplinario, genera 3 a 5 objetivos de aprendizaje claros, medibles y concisos. La respuesta debe ser solo el texto de los objetivos, formateado en una lista.
            Descripción del Proyecto: "${n.descripcionProyecto}"`:D=`Basado en la siguiente descripción y objetivos de un proyecto escolar interdisciplinario, genera una lista de 5 a 7 indicadores de logro concretos y observables que permitan evaluar el cumplimiento de los objetivos. La respuesta debe ser solo el texto de los indicadores, formateado en una lista.
            Descripción del Proyecto: "${n.descripcionProyecto}"
            Objetivos (si existen): "${n.objetivos||"Aún no definidos, genéralos a partir de la descripción."}"`;try{const S=await new Sa({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:D});r(N=>({...N,[F]:S.text.replace(/(\*\*|\*)/g,"")}))}catch(P){console.error(`Error al generar ${F}`,P),alert(`Hubo un error al generar los ${F}. Inténtelo de nuevo.`)}finally{F==="objetivos"?h(!1):g(!1)}},b=F=>{r(D=>({...D,[F.target.name]:F.target.value}))},E=(F,D)=>{r(P=>{const S=P[F],N=S.includes(D)?S.filter(T=>T!==D):[...S,D];return{...P,[F]:N}})},B=()=>{if(!s.nombre||!s.fechaInicio||!s.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}r(F=>({...F,actividades:[...F.actividades,{...s,id:crypto.randomUUID()}]})),a({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""})},I=()=>{!i.nombre||!i.fecha||(r(F=>({...F,fechasClave:[...F.fechasClave,{...i,id:crypto.randomUUID()}]})),o({nombre:"",fecha:""}))},k=()=>{var D;if(!l.instrucciones||!l.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}const F={id:crypto.randomUUID(),numero:(((D=n.tareas)==null?void 0:D.length)||0)+1,...l};r(P=>({...P,tareas:[...P.tareas||[],F]})),A({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return u.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[u.jsx("div",{className:"text-center mb-12",children:u.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-800 dark:text-slate-200",children:"Proyecto Interdisciplinario en Liceo Industrial Recoleta"})}),u.jsxs("div",{className:"space-y-6",children:[u.jsx(id,{icon:u.jsx(sye,{}),label:"Nombre del Proyecto",children:u.jsx("input",{name:"nombreProyecto",value:n.nombreProyecto,onChange:b,placeholder:"Ingrese el nombre del proyecto...",className:"w-full mt-1 bg-transparent text-lg font-semibold focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),u.jsx(id,{icon:u.jsx(aye,{}),label:"Profesores",children:u.jsx("input",{name:"docentesResponsables",value:n.docentesResponsables,onChange:b,placeholder:"Ingrese nombres separados por comas...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),u.jsx(id,{icon:u.jsx(iye,{}),label:"Cursos",children:u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mt-2",children:$s.map(F=>u.jsx("button",{type:"button",onClick:()=>E("cursos",F),className:`w-full text-center p-2 rounded-md text-sm transition-colors ${n.cursos.includes(F)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:F},F))})}),u.jsx(id,{icon:u.jsx(oye,{}),label:"Asignaturas",children:u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-2",children:Ho.map(F=>u.jsx("button",{type:"button",onClick:()=>E("asignaturas",F),className:`w-full text-left p-2 rounded-md text-sm transition-colors ${n.asignaturas.includes(F)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:F},F))})}),u.jsx(id,{icon:u.jsx(lye,{}),label:"Descripción del Proyecto",children:u.jsx("textarea",{name:"descripcionProyecto",value:n.descripcionProyecto,onChange:b,placeholder:"Detalle aquí la metodología, el producto final esperado y el propósito del proyecto. Esta información es clave para la IA.",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[100px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),u.jsx(id,{icon:u.jsx(cye,{}),label:"Objetivos",aiButton:u.jsx("button",{type:"button",onClick:()=>w("objetivos"),disabled:!n.descripcionProyecto.trim()||d,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:u.jsx(E6,{})}),children:d?u.jsx("div",{className:"p-4 text-center",children:"Generando..."}):u.jsx("textarea",{name:"objetivos",value:n.objetivos,onChange:b,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),u.jsx(id,{icon:u.jsx(Aye,{}),label:"Indicadores de Éxito",aiButton:u.jsx("button",{type:"button",onClick:()=>w("indicadoresLogro"),disabled:!n.descripcionProyecto.trim()||p,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:u.jsx(E6,{})}),children:p?u.jsx("div",{className:"p-4 text-center",children:"Generando..."}):u.jsx("textarea",{name:"indicadoresLogro",value:n.indicadoresLogro,onChange:b,placeholder:"Liste los indicadores de logro o evaluación...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),u.jsx(id,{icon:u.jsx(uye,{}),label:"Carta Gantt",children:u.jsxs("div",{className:"space-y-4 mt-2",children:[u.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[u.jsx("h4",{className:"text-sm font-semibold",children:"Actividades"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-end",children:[u.jsx("input",{value:s.nombre,onChange:F=>a({...s,nombre:F.target.value}),placeholder:"Nombre",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),u.jsx("input",{type:"date",value:s.fechaInicio,onChange:F=>a({...s,fechaInicio:F.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),u.jsx("input",{type:"date",value:s.fechaFin,onChange:F=>a({...s,fechaFin:F.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),u.jsx("button",{onClick:B,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),u.jsx("ul",{className:"text-xs",children:n.actividades.map(F=>u.jsx("li",{children:F.nombre},F.id))})]}),u.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[u.jsx("h4",{className:"text-sm font-semibold",children:"Fechas Clave (Hitos)"}),u.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[u.jsx("input",{value:i.nombre,onChange:F=>o({...i,nombre:F.target.value}),placeholder:"Hito",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 col-span-1"}),u.jsx("input",{type:"date",value:i.fecha,onChange:F=>o({...i,fecha:F.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),u.jsx("button",{onClick:I,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),u.jsx("ul",{className:"text-xs",children:n.fechasClave.map(F=>u.jsxs("li",{children:[F.nombre," (",F.fecha,")"]},F.id))})]}),u.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[u.jsx("h4",{className:"text-sm font-semibold",children:"Tareas para Estudiantes"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[u.jsx("input",{value:l.instrucciones,onChange:F=>A({...l,instrucciones:F.target.value}),placeholder:"Instrucciones",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),u.jsx("input",{type:"date",value:l.fechaEntrega,onChange:F=>A({...l,fechaEntrega:F.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),u.jsx("button",{type:"button",onClick:k,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),u.jsx("ul",{className:"text-xs",children:(n.tareas||[]).map(F=>u.jsxs("li",{children:[F.numero,". ",F.instrucciones]},F.id))})]})]})}),u.jsx("div",{className:"flex justify-end pt-6",children:u.jsx("button",{onClick:()=>e(n),className:"px-8 py-3 bg-slate-800 text-white rounded-lg font-semibold hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:t?"Guardar Cambios":"Guardar Proyecto"})})]})]})},_6=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState("list"),[s,a]=ee.useState(null),[i,o]=ee.useState(null),[l,A]=ee.useState(null);ee.useEffect(()=>{try{const I=localStorage.getItem(b6);I&&e(JSON.parse(I))}catch(I){console.error("Error al cargar planificaciones interdisciplinarias",I)}},[]);const d=I=>{e(I),localStorage.setItem(b6,JSON.stringify(I))},h=ee.useCallback((I,k)=>{const F=t.map(D=>D.id===I?{...D,actividades:D.actividades.map(P=>P.id===k.id?k:P)}:D);d(F)},[t]),p=I=>{d(s?t.map(k=>k.id===s.id?I:k):[{...I,id:crypto.randomUUID()},...t]),r("list"),a(null)},g=I=>{a(I),r("form")},w=I=>{window.confirm("¿Está seguro de eliminar esta planificación?")&&d(t.filter(k=>k.id!==I))},b=()=>{a(null),r("form")},E=async I=>{o(I.id);const k=new sn("p","mm","a4"),F=15,D=k.internal.pageSize.getWidth(),P=k.internal.pageSize.getHeight(),S=D-F*2;let N=F;const T=22,V=14,M=11,U=()=>{k.setFont("helvetica","normal"),k.setFontSize(9),k.setTextColor(150),k.text("Proyecto Interdisciplinario",F,12),k.text("Liceo Industrial de Recoleta",D-F,12,{align:"right"}),k.setDrawColor(220),k.line(F,15,D-F,15)},O=se=>{N+se>P-F&&(k.addPage(),U(),N=F+15)},G=(se,Z)=>{if(!Z||Array.isArray(Z)&&Z.length===0||typeof Z=="string"&&!Z.trim())return;const X=10;k.setFontSize(M);const de=Array.isArray(Z)?Z.join(", "):String(Z),j=k.splitTextToSize(de,S),W=j.length*(M*.35*1.15);O(X+W+12),k.setFont("helvetica","bold"),k.setFontSize(V),k.setTextColor(40),k.text(se,F,N),N+=6,k.setDrawColor(200),k.line(F,N,F+30,N),N+=8,k.setFont("helvetica","normal"),k.setFontSize(M),k.setTextColor(80),k.text(j,F,N),N+=W+12};U(),N=F+20,k.setFont("helvetica","bold"),k.setFontSize(T),k.setTextColor(0);const ie=k.splitTextToSize(I.nombreProyecto,S);if(k.text(ie,F,N),N+=ie.length*(T*.4)+10,Tl(k,{startY:N,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},I.docentesResponsables],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},I.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},I.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:M,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),N=k.lastAutoTable.finalY+15,G("Descripción del Proyecto",I.descripcionProyecto),G("Objetivos de Aprendizaje",I.objetivos),G("Indicadores de Logro",I.indicadoresLogro),I.tareas&&I.tareas.length>0){const se=I.tareas.map(X=>[X.numero.toString(),X.instrucciones,X.fechaEntrega]),Z=(se.length+1)*10+15;O(Z+15),k.setFont("helvetica","bold"),k.setFontSize(V),k.setTextColor(40),k.text("Tareas para Estudiantes",F,N),N+=10,Tl(k,{startY:N,head:[["#","Instrucciones","Fecha de Entrega"]],body:se,theme:"striped",headStyles:{fillColor:[52,73,94]}}),N=k.lastAutoTable.finalY+15}const K=document.getElementById("gantt-container-vertical");if(K)try{const Z=(await u7(K,{scale:2,backgroundColor:"#ffffff"})).toDataURL("image/png");k.addPage(),U(),N=F+15,k.setFont("helvetica","bold"),k.setFontSize(V),k.setTextColor(40),k.text("Cronograma del Proyecto",F,N),N+=10;const X=k.getImageProperties(Z),de=S,j=X.height*de/X.width;k.addImage(Z,"PNG",F,N,de,j)}catch(se){console.error("Error generating timeline image:",se)}const q=k.internal.pages.length-1;for(let se=1;se<=q;se++)k.setPage(se),k.setFont("helvetica","normal"),k.setFontSize(9),k.setTextColor(150),k.text(`Página ${se} de ${q}`,D-F,k.internal.pageSize.getHeight()-10,{align:"right"});k.save(`Proyecto_${I.nombreProyecto.replace(/\s/g,"_")}.pdf`),o(null)},B=({plan:I,onBack:k})=>{var U,O;const[F,D]=ee.useState([]),[P,S]=ee.useState([]),[N,T]=ee.useState(((U=I.tareas)==null?void 0:U[0])||null);ee.useEffect(()=>{try{const G=localStorage.getItem(nye);G&&D(JSON.parse(G));const ie=localStorage.getItem(C6);ie&&S(JSON.parse(ie))}catch(G){console.error(G)}},[]);const V=ee.useMemo(()=>F.filter(G=>G.profile===nn.ESTUDIANTE&&I.cursos.includes(G.curso||"")).sort((G,ie)=>G.nombreCompleto.localeCompare(ie.nombreCompleto)),[F,I.cursos]),M=(G,ie)=>{const K=P.map(q=>q.id===G?{...q,feedbackProfesor:ie,fechaFeedback:new Date().toISOString()}:q);S(K),localStorage.setItem(C6,JSON.stringify(K))};return N?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Entregas de Tareas"}),u.jsx("button",{onClick:k,className:"font-semibold",children:"← Volver"})]}),u.jsx("select",{value:N.id,onChange:G=>{var ie;return T(((ie=I.tareas)==null?void 0:ie.find(K=>K.id===G.target.value))||null)},className:"mb-4 p-2 border rounded",children:(O=I.tareas)==null?void 0:O.map(G=>u.jsxs("option",{value:G.id,children:["Tarea ",G.numero,": ",G.instrucciones]},G.id))}),u.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:V.map(G=>{const ie=P.find(K=>K.planificacionId===I.id&&K.tareaId===N.id&&K.estudianteId===G.id);return u.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[u.jsxs("p",{className:"font-bold",children:[G.nombreCompleto," - ",ie!=null&&ie.completada?u.jsx("span",{className:"text-green-600",children:"Entregado"}):u.jsx("span",{className:"text-red-600",children:"Pendiente"})]}),ie&&u.jsxs("div",{className:"text-sm mt-2 space-y-2",children:[ie.observacionesEstudiante&&u.jsxs("p",{children:[u.jsx("strong",{children:"Comentario:"})," ",ie.observacionesEstudiante]}),ie.enlaceUrl&&u.jsxs("p",{children:[u.jsx("strong",{children:"Enlace:"})," ",u.jsx("a",{href:ie.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:ie.enlaceUrl})]}),ie.archivoAdjunto&&u.jsxs("p",{children:[u.jsx("strong",{children:"Archivo:"})," ",u.jsx("a",{href:ie.archivoAdjunto.url,download:ie.archivoAdjunto.nombre,className:"text-blue-500 hover:underline",children:ie.archivoAdjunto.nombre})]}),u.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:ie.feedbackProfesor||"",onBlur:K=>M(ie.id,K.target.value),rows:2,className:"w-full mt-2 p-1 border rounded"})]})]},G.id)})})]}):u.jsx("div",{className:"text-center p-8",children:"Este proyecto no tiene tareas asignadas."})};return l?u.jsx(B,{plan:l,onBack:()=>A(null)}):u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[n==="list"?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Proyectos Interdisciplinarios"}),u.jsx("button",{onClick:b,className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),u.jsx("div",{className:"space-y-4",children:t.map(I=>u.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:I.nombreProyecto}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Cursos: ",I.cursos.join(", ")]})]}),u.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[u.jsx("button",{onClick:()=>A(I),className:"text-green-600 hover:text-green-800 dark:text-green-400 font-semibold text-sm",children:"Ver Entregas"}),u.jsx("button",{onClick:()=>E(I),disabled:i===I.id,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm disabled:opacity-50",children:i===I.id?"Exportando...":"Exportar PDF"}),u.jsx("button",{onClick:()=>g(I),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Editar"}),u.jsx("button",{onClick:()=>w(I.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]})},I.id))})]}):u.jsx(dye,{initialPlan:s,onSave:p}),t.length>0&&u.jsx("div",{id:"gantt-container-vertical",children:u.jsx(rye,{planificaciones:t,onActivityUpdate:h})})]})},PC="pañolMaquinas",S6="pañolRegistros",fye=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState([]),s={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[a,i]=ee.useState(s),[o,l]=ee.useState(null),A={nombre:"",especialidad:"Industrial"},[d,h]=ee.useState(A),[p,g]=ee.useState(null),[w,b]=ee.useState({maquinaId:"",curso:"",profesor:"",fecha:""});ee.useEffect(()=>{try{const U=localStorage.getItem(PC);if(U&&JSON.parse(U).length>0)e(JSON.parse(U));else{const G=[{id:crypto.randomUUID(),nombre:"Torno",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Fresadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora MIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora TIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Torno CNC",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Elevador",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Compresor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta de motor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta hidráulica",especialidad:"Automotriz"}];e(G),localStorage.setItem(PC,JSON.stringify(G))}const O=localStorage.getItem(S6);O&&r(JSON.parse(O))}catch(U){console.error("Error al cargar datos de Pañol desde localStorage",U)}},[]);const E=ee.useCallback(U=>{e(U),localStorage.setItem(PC,JSON.stringify(U))},[]),B=ee.useCallback(U=>{r(U),localStorage.setItem(S6,JSON.stringify(U))},[]),I=U=>{U.preventDefault(),d.nombre.trim()&&(E(p?t.map(O=>O.id===p.id?{...p,...d}:O):[{...d,id:crypto.randomUUID()},...t]),h(A),g(null))},k=ee.useCallback(U=>{if(n.some(O=>O.maquinaId===U)){alert("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");return}window.confirm("¿Eliminar esta máquina?")&&E(t.filter(O=>O.id!==U))},[t,n,E]),F=U=>{U.preventDefault();const O=o||a;if(!O.curso||!O.profesorResponsable.trim()||!O.maquinaId||O.totalHoras<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}B(o?n.map(G=>G.id===o.id?o:G):[{...a,id:crypto.randomUUID()},...n]),i(s),l(null)},D=ee.useCallback(U=>{window.confirm("¿Eliminar este registro de uso?")&&B(n.filter(O=>O.id!==U))},[n,B]),P=ee.useMemo(()=>n.filter(U=>(w.maquinaId===""||U.maquinaId===w.maquinaId)&&(w.curso===""||U.curso===w.curso)&&(w.profesor===""||U.profesorResponsable.toLowerCase().includes(w.profesor.toLowerCase()))&&(w.fecha===""||U.fecha===w.fecha)).sort((U,O)=>new Date(O.fecha).getTime()-new Date(U.fecha).getTime()),[n,w]),S=ee.useMemo(()=>new Map(t.map(U=>[U.id,U])),[t]),N=()=>{const U=P.map(ie=>{var K,q;return{Fecha:ie.fecha,Curso:ie.curso,Profesor:ie.profesorResponsable,Máquina:((K=S.get(ie.maquinaId))==null?void 0:K.nombre)||"N/A",Especialidad:((q=S.get(ie.maquinaId))==null?void 0:q.especialidad)||"N/A","Total Horas":ie.totalHoras,Observaciones:ie.observaciones}}),O=bl.json_to_sheet(U),G=bl.book_new();bl.book_append_sheet(G,O,"RegistrosPañol"),NS(G,"Registros_Pañol.xlsx")},T=()=>{const U=new sn;Tl(U,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:P.map(O=>{var G,ie;return[O.fecha,O.curso,O.profesorResponsable,((G=S.get(O.maquinaId))==null?void 0:G.nombre)||"N/A",((ie=S.get(O.maquinaId))==null?void 0:ie.especialidad)||"N/A",O.totalHoras,O.observaciones]}),margin:{top:20,right:10,bottom:20,left:10},didDrawPage:O=>{U.setFontSize(10),U.setFont("helvetica","bold"),U.text("LICEO INDUSTRIAL DE RECOLETA",O.settings.margin.left,15)}}),U.save("Registros_Pañol.pdf")},V="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",M=()=>{const U=o||a,O=o?l:i;return u.jsxs("form",{onSubmit:F,className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),u.jsx("input",{name:"fecha",type:"date",value:U.fecha,onChange:G=>O({...U,fecha:G.target.value}),className:V,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium",children:"Curso"}),u.jsxs("select",{name:"curso",value:U.curso,onChange:G=>O({...U,curso:G.target.value}),className:V,required:!0,children:[u.jsx("option",{value:"",children:"Curso"}),$s.map(G=>u.jsx("option",{children:G},G))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium",children:"Profesor"}),u.jsxs("select",{name:"profesorResponsable",value:U.profesorResponsable,onChange:G=>O({...U,profesorResponsable:G.target.value}),className:V,required:!0,children:[u.jsx("option",{value:"",children:"Profesor Responsable"}),TE.map(G=>u.jsx("option",{value:G,children:G},G))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium",children:"Máquina"}),u.jsxs("select",{name:"maquinaId",value:U.maquinaId,onChange:G=>O({...U,maquinaId:G.target.value}),className:V,required:!0,children:[u.jsx("option",{value:"",children:"Máquina"}),t.map(G=>u.jsx("option",{value:G.id,children:G.nombre},G.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium",children:"Total de Horas"}),u.jsx("input",{name:"totalHoras",type:"number",value:U.totalHoras,onChange:G=>O({...U,totalHoras:Number(G.target.value)}),className:V,required:!0,min:"0.5",step:"0.5"})]}),u.jsxs("div",{className:"lg:col-span-3",children:[u.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),u.jsx("textarea",{name:"observaciones",value:U.observaciones,onChange:G=>O({...U,observaciones:G.target.value}),placeholder:"Observaciones...",className:`${V}`,rows:1})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&u.jsx("button",{type:"button",onClick:()=>l(null),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:o?"Actualizar":"Registrar"})]})]})};return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Pañol: Registro de Uso de Máquinas"}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:o?`Editando Registro #${o.id.substring(0,4)}`:"Nuevo Registro de Uso"}),M()]}),u.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Administrar Máquinas"}),u.jsxs("form",{onSubmit:I,className:"flex gap-2 mb-4",children:[u.jsx("input",{value:d.nombre,onChange:U=>h({...d,nombre:U.target.value}),placeholder:"Nombre máquina",className:V}),u.jsxs("select",{value:d.especialidad,onChange:U=>h({...d,especialidad:U.target.value}),className:V,children:[u.jsx("option",{value:"Industrial",children:"Industrial"}),u.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),u.jsx("button",{type:"submit",className:"bg-slate-200 p-2 rounded-lg font-bold",children:p?"✓":"+"})]}),u.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.map(U=>u.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[u.jsxs("span",{children:[U.nombre," ",u.jsxs("span",{className:"text-xs text-slate-500",children:["(",U.especialidad,")"]})]}),u.jsxs("div",{className:"space-x-2",children:[u.jsx("button",{onClick:()=>{g(U),h(U)},className:"text-blue-500",children:"✏️"}),u.jsx("button",{onClick:()=>k(U.id),className:"text-red-500",children:"🗑️"})]})]},U.id))})]}),u.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Historial de Uso"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:N,className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),u.jsx("button",{onClick:T,className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[u.jsx("input",{type:"date",value:w.fecha,onChange:U=>b({...w,fecha:U.target.value}),className:V}),u.jsxs("select",{value:w.curso,onChange:U=>b({...w,curso:U.target.value}),className:V,children:[u.jsx("option",{value:"",children:"Todos los Cursos"}),$s.map(U=>u.jsx("option",{children:U},U))]}),u.jsxs("select",{value:w.maquinaId,onChange:U=>b({...w,maquinaId:U.target.value}),className:V,children:[u.jsx("option",{value:"",children:"Todas las Máquinas"}),t.map(U=>u.jsx("option",{value:U.id,children:U.nombre},U.id))]}),u.jsx("input",{value:w.profesor,onChange:U=>b({...w,profesor:U.target.value}),placeholder:"Buscar profesor...",className:V})]}),u.jsx("div",{className:"max-h-96 overflow-y-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Máquina"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Profesor"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Total Horas"}),u.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-500 uppercase",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:P.map(U=>{var O;return u.jsxs("tr",{children:[u.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:U.fecha}),u.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((O=S.get(U.maquinaId))==null?void 0:O.nombre)||"N/A"}),u.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[U.profesorResponsable," (",U.curso,")"]}),u.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:U.totalHoras}),u.jsxs("td",{className:"px-3 py-2 text-center",children:[u.jsx("button",{onClick:()=>l(U),className:"text-blue-500",children:"✏️"}),u.jsx("button",{onClick:()=>D(U.id),className:"text-red-500 ml-2",children:"🗑️"})]})]},U.id)})})]})})]})]})]})};function Ki(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Ki(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var jC={exports:{}},OC={},QC={exports:{}},HC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T6;function hye(){if(T6)return HC;T6=1;var t=Zg();function e(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,a=t.useLayoutEffect,i=t.useDebugValue;function o(h,p){var g=p(),w=r({inst:{value:g,getSnapshot:p}}),b=w[0].inst,E=w[1];return a(function(){b.value=g,b.getSnapshot=p,l(b)&&E({inst:b})},[h,g,p]),s(function(){return l(b)&&E({inst:b}),h(function(){l(b)&&E({inst:b})})},[h]),i(g),g}function l(h){var p=h.getSnapshot;h=h.value;try{var g=p();return!n(h,g)}catch{return!0}}function A(h,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?A:o;return HC.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,HC}var B6;function mye(){return B6||(B6=1,QC.exports=hye()),QC.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N6;function pye(){if(N6)return OC;N6=1;var t=Zg(),e=mye();function n(A,d){return A===d&&(A!==0||1/A===1/d)||A!==A&&d!==d}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,a=t.useRef,i=t.useEffect,o=t.useMemo,l=t.useDebugValue;return OC.useSyncExternalStoreWithSelector=function(A,d,h,p,g){var w=a(null);if(w.current===null){var b={hasValue:!1,value:null};w.current=b}else b=w.current;w=o(function(){function B(P){if(!I){if(I=!0,k=P,P=p(P),g!==void 0&&b.hasValue){var S=b.value;if(g(S,P))return F=S}return F=P}if(S=F,r(k,P))return S;var N=p(P);return g!==void 0&&g(S,N)?(k=P,S):(k=P,F=N)}var I=!1,k,F,D=h===void 0?null:h;return[function(){return B(d())},D===null?void 0:function(){return B(D())}]},[d,h,p,g]);var E=s(A,w[0],w[1]);return i(function(){b.hasValue=!0,b.value=E},[E]),l(E),E},OC}var k6;function gye(){return k6||(k6=1,jC.exports=pye()),jC.exports}var xye=gye();const vye=t5(xye),yye={},I6=t=>{let e;const n=new Set,r=(d,h)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const g=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(w=>w(e,g))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>A,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(yye?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},A=e=t(r,s,l);return l},wye=t=>t?I6(t):I6,{useDebugValue:bye}=ut,{useSyncExternalStoreWithSelector:Cye}=vye,Eye=t=>t;function d7(t,e=Eye,n){const r=Cye(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return bye(r),r}const F6=(t,e)=>{const n=wye(t),r=(s,a=e)=>d7(n,s,a);return Object.assign(r,n),r},_ye=(t,e)=>t?F6(t,e):F6;function Di(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var Sye={value:()=>{}};function Wy(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Wv(n)}function Wv(t){this._=t}function Tye(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Wv.prototype=Wy.prototype={constructor:Wv,on:function(t,e){var n=this._,r=Tye(t+"",n),s,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((s=(t=r[a]).type)&&(s=Bye(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<i;)if(s=(t=r[a]).type)n[s]=R6(n[s],t.name,e);else if(e==null)for(s in n)n[s]=R6(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Wv(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,a;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,s=a.length;r<s;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,a=r.length;s<a;++s)r[s].value.apply(e,n)}};function Bye(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function R6(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=Sye,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var L_="http://www.w3.org/1999/xhtml";const D6={svg:"http://www.w3.org/2000/svg",xhtml:L_,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $y(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),D6.hasOwnProperty(e)?{space:D6[e],local:t}:t}function Nye(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===L_&&e.documentElement.namespaceURI===L_?e.createElement(t):e.createElementNS(n,t)}}function kye(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function f7(t){var e=$y(t);return(e.local?kye:Nye)(e)}function Iye(){}function OS(t){return t==null?Iye:function(){return this.querySelector(t)}}function Fye(t){typeof t!="function"&&(t=OS(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],i=a.length,o=r[s]=new Array(i),l,A,d=0;d<i;++d)(l=a[d])&&(A=t.call(l,l.__data__,d,a))&&("__data__"in l&&(A.__data__=l.__data__),o[d]=A);return new Go(r,this._parents)}function Rye(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Dye(){return[]}function h7(t){return t==null?Dye:function(){return this.querySelectorAll(t)}}function Uye(t){return function(){return Rye(t.apply(this,arguments))}}function Lye(t){typeof t=="function"?t=Uye(t):t=h7(t);for(var e=this._groups,n=e.length,r=[],s=[],a=0;a<n;++a)for(var i=e[a],o=i.length,l,A=0;A<o;++A)(l=i[A])&&(r.push(t.call(l,l.__data__,A,i)),s.push(l));return new Go(r,s)}function m7(t){return function(){return this.matches(t)}}function p7(t){return function(e){return e.matches(t)}}var Mye=Array.prototype.find;function Pye(t){return function(){return Mye.call(this.children,t)}}function jye(){return this.firstElementChild}function Oye(t){return this.select(t==null?jye:Pye(typeof t=="function"?t:p7(t)))}var Qye=Array.prototype.filter;function Hye(){return Array.from(this.children)}function Vye(t){return function(){return Qye.call(this.children,t)}}function Gye(t){return this.selectAll(t==null?Hye:Vye(typeof t=="function"?t:p7(t)))}function zye(t){typeof t!="function"&&(t=m7(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],i=a.length,o=r[s]=[],l,A=0;A<i;++A)(l=a[A])&&t.call(l,l.__data__,A,a)&&o.push(l);return new Go(r,this._parents)}function g7(t){return new Array(t.length)}function Kye(){return new Go(this._enter||this._groups.map(g7),this._parents)}function q2(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}q2.prototype={constructor:q2,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function qye(t){return function(){return t}}function Wye(t,e,n,r,s,a){for(var i=0,o,l=e.length,A=a.length;i<A;++i)(o=e[i])?(o.__data__=a[i],r[i]=o):n[i]=new q2(t,a[i]);for(;i<l;++i)(o=e[i])&&(s[i]=o)}function $ye(t,e,n,r,s,a,i){var o,l,A=new Map,d=e.length,h=a.length,p=new Array(d),g;for(o=0;o<d;++o)(l=e[o])&&(p[o]=g=i.call(l,l.__data__,o,e)+"",A.has(g)?s[o]=l:A.set(g,l));for(o=0;o<h;++o)g=i.call(t,a[o],o,a)+"",(l=A.get(g))?(r[o]=l,l.__data__=a[o],A.delete(g)):n[o]=new q2(t,a[o]);for(o=0;o<d;++o)(l=e[o])&&A.get(p[o])===l&&(s[o]=l)}function Yye(t){return t.__data__}function Jye(t,e){if(!arguments.length)return Array.from(this,Yye);var n=e?$ye:Wye,r=this._parents,s=this._groups;typeof t!="function"&&(t=qye(t));for(var a=s.length,i=new Array(a),o=new Array(a),l=new Array(a),A=0;A<a;++A){var d=r[A],h=s[A],p=h.length,g=Xye(t.call(d,d&&d.__data__,A,r)),w=g.length,b=o[A]=new Array(w),E=i[A]=new Array(w),B=l[A]=new Array(p);n(d,h,b,E,B,g,e);for(var I=0,k=0,F,D;I<w;++I)if(F=b[I]){for(I>=k&&(k=I+1);!(D=E[k])&&++k<w;);F._next=D||null}}return i=new Go(i,r),i._enter=o,i._exit=l,i}function Xye(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Zye(){return new Go(this._exit||this._groups.map(g7),this._parents)}function ewe(t,e,n){var r=this.enter(),s=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?a.remove():n(a),r&&s?r.merge(s).order():s}function twe(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,a=r.length,i=Math.min(s,a),o=new Array(s),l=0;l<i;++l)for(var A=n[l],d=r[l],h=A.length,p=o[l]=new Array(h),g,w=0;w<h;++w)(g=A[w]||d[w])&&(p[w]=g);for(;l<s;++l)o[l]=n[l];return new Go(o,this._parents)}function nwe(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,a=r[s],i;--s>=0;)(i=r[s])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function rwe(t){t||(t=swe);function e(h,p){return h&&p?t(h.__data__,p.__data__):!h-!p}for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a){for(var i=n[a],o=i.length,l=s[a]=new Array(o),A,d=0;d<o;++d)(A=i[d])&&(l[d]=A);l.sort(e)}return new Go(s,this._parents).order()}function swe(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function awe(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function iwe(){return Array.from(this)}function owe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,a=r.length;s<a;++s){var i=r[s];if(i)return i}return null}function lwe(){let t=0;for(const e of this)++t;return t}function cwe(){return!this.node()}function Awe(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],a=0,i=s.length,o;a<i;++a)(o=s[a])&&t.call(o,o.__data__,a,s);return this}function uwe(t){return function(){this.removeAttribute(t)}}function dwe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fwe(t,e){return function(){this.setAttribute(t,e)}}function hwe(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function mwe(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function pwe(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function gwe(t,e){var n=$y(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?dwe:uwe:typeof e=="function"?n.local?pwe:mwe:n.local?hwe:fwe)(n,e))}function x7(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function xwe(t){return function(){this.style.removeProperty(t)}}function vwe(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ywe(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function wwe(t,e,n){return arguments.length>1?this.each((e==null?xwe:typeof e=="function"?ywe:vwe)(t,e,n??"")):Am(this.node(),t)}function Am(t,e){return t.style.getPropertyValue(e)||x7(t).getComputedStyle(t,null).getPropertyValue(e)}function bwe(t){return function(){delete this[t]}}function Cwe(t,e){return function(){this[t]=e}}function Ewe(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function _we(t,e){return arguments.length>1?this.each((e==null?bwe:typeof e=="function"?Ewe:Cwe)(t,e)):this.node()[t]}function v7(t){return t.trim().split(/^|\s+/)}function QS(t){return t.classList||new y7(t)}function y7(t){this._node=t,this._names=v7(t.getAttribute("class")||"")}y7.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function w7(t,e){for(var n=QS(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function b7(t,e){for(var n=QS(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function Swe(t){return function(){w7(this,t)}}function Twe(t){return function(){b7(this,t)}}function Bwe(t,e){return function(){(e.apply(this,arguments)?w7:b7)(this,t)}}function Nwe(t,e){var n=v7(t+"");if(arguments.length<2){for(var r=QS(this.node()),s=-1,a=n.length;++s<a;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?Bwe:e?Swe:Twe)(n,e))}function kwe(){this.textContent=""}function Iwe(t){return function(){this.textContent=t}}function Fwe(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Rwe(t){return arguments.length?this.each(t==null?kwe:(typeof t=="function"?Fwe:Iwe)(t)):this.node().textContent}function Dwe(){this.innerHTML=""}function Uwe(t){return function(){this.innerHTML=t}}function Lwe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Mwe(t){return arguments.length?this.each(t==null?Dwe:(typeof t=="function"?Lwe:Uwe)(t)):this.node().innerHTML}function Pwe(){this.nextSibling&&this.parentNode.appendChild(this)}function jwe(){return this.each(Pwe)}function Owe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qwe(){return this.each(Owe)}function Hwe(t){var e=typeof t=="function"?t:f7(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Vwe(){return null}function Gwe(t,e){var n=typeof t=="function"?t:f7(t),r=e==null?Vwe:typeof e=="function"?e:OS(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function zwe(){var t=this.parentNode;t&&t.removeChild(this)}function Kwe(){return this.each(zwe)}function qwe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Wwe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function $we(t){return this.select(t?Wwe:qwe)}function Ywe(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Jwe(t){return function(e){t.call(this,e,this.__data__)}}function Xwe(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Zwe(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,a;n<s;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function ebe(t,e,n){return function(){var r=this.__on,s,a=Jwe(e);if(r){for(var i=0,o=r.length;i<o;++i)if((s=r[i]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=e;return}}this.addEventListener(t.type,a,n),s={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(s):this.__on=[s]}}function tbe(t,e,n){var r=Xwe(t+""),s,a=r.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,A=o.length,d;l<A;++l)for(s=0,d=o[l];s<a;++s)if((i=r[s]).type===d.type&&i.name===d.name)return d.value}return}for(o=e?ebe:Zwe,s=0;s<a;++s)this.each(o(r[s],e,n));return this}function C7(t,e,n){var r=x7(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function nbe(t,e){return function(){return C7(this,t,e)}}function rbe(t,e){return function(){return C7(this,t,e.apply(this,arguments))}}function sbe(t,e){return this.each((typeof e=="function"?rbe:nbe)(t,e))}function*abe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,a=r.length,i;s<a;++s)(i=r[s])&&(yield i)}var E7=[null];function Go(t,e){this._groups=t,this._parents=e}function wx(){return new Go([[document.documentElement]],E7)}function ibe(){return this}Go.prototype=wx.prototype={constructor:Go,select:Fye,selectAll:Lye,selectChild:Oye,selectChildren:Gye,filter:zye,data:Jye,enter:Kye,exit:Zye,join:ewe,merge:twe,selection:ibe,order:nwe,sort:rwe,call:awe,nodes:iwe,node:owe,size:lwe,empty:cwe,each:Awe,attr:gwe,style:wwe,property:_we,classed:Nwe,text:Rwe,html:Mwe,raise:jwe,lower:Qwe,append:Hwe,insert:Gwe,remove:Kwe,clone:$we,datum:Ywe,on:tbe,dispatch:sbe,[Symbol.iterator]:abe};function ic(t){return typeof t=="string"?new Go([[document.querySelector(t)]],[document.documentElement]):new Go([[t]],E7)}function obe(t){let e;for(;e=t.sourceEvent;)t=e;return t}function nA(t,e){if(t=obe(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const lbe={passive:!1},Kg={capture:!0,passive:!1};function VC(t){t.stopImmediatePropagation()}function q0(t){t.preventDefault(),t.stopImmediatePropagation()}function _7(t){var e=t.document.documentElement,n=ic(t).on("dragstart.drag",q0,Kg);"onselectstart"in e?n.on("selectstart.drag",q0,Kg):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function S7(t,e){var n=t.document.documentElement,r=ic(t).on("dragstart.drag",null);e&&(r.on("click.drag",q0,Kg),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const xv=t=>()=>t;function M_(t,{sourceEvent:e,subject:n,target:r,identifier:s,active:a,x:i,y:o,dx:l,dy:A,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:A,enumerable:!0,configurable:!0},_:{value:d}})}M_.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function cbe(t){return!t.ctrlKey&&!t.button}function Abe(){return this.parentNode}function ube(t,e){return e??{x:t.x,y:t.y}}function dbe(){return navigator.maxTouchPoints||"ontouchstart"in this}function fbe(){var t=cbe,e=Abe,n=ube,r=dbe,s={},a=Wy("start","drag","end"),i=0,o,l,A,d,h=0;function p(F){F.on("mousedown.drag",g).filter(r).on("touchstart.drag",E).on("touchmove.drag",B,lbe).on("touchend.drag touchcancel.drag",I).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(F,D){if(!(d||!t.call(this,F,D))){var P=k(this,e.call(this,F,D),F,D,"mouse");P&&(ic(F.view).on("mousemove.drag",w,Kg).on("mouseup.drag",b,Kg),_7(F.view),VC(F),A=!1,o=F.clientX,l=F.clientY,P("start",F))}}function w(F){if(q0(F),!A){var D=F.clientX-o,P=F.clientY-l;A=D*D+P*P>h}s.mouse("drag",F)}function b(F){ic(F.view).on("mousemove.drag mouseup.drag",null),S7(F.view,A),q0(F),s.mouse("end",F)}function E(F,D){if(t.call(this,F,D)){var P=F.changedTouches,S=e.call(this,F,D),N=P.length,T,V;for(T=0;T<N;++T)(V=k(this,S,F,D,P[T].identifier,P[T]))&&(VC(F),V("start",F,P[T]))}}function B(F){var D=F.changedTouches,P=D.length,S,N;for(S=0;S<P;++S)(N=s[D[S].identifier])&&(q0(F),N("drag",F,D[S]))}function I(F){var D=F.changedTouches,P=D.length,S,N;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),S=0;S<P;++S)(N=s[D[S].identifier])&&(VC(F),N("end",F,D[S]))}function k(F,D,P,S,N,T){var V=a.copy(),M=nA(T||P,D),U,O,G;if((G=n.call(F,new M_("beforestart",{sourceEvent:P,target:p,identifier:N,active:i,x:M[0],y:M[1],dx:0,dy:0,dispatch:V}),S))!=null)return U=G.x-M[0]||0,O=G.y-M[1]||0,function ie(K,q,se){var Z=M,X;switch(K){case"start":s[N]=ie,X=i++;break;case"end":delete s[N],--i;case"drag":M=nA(se||q,D),X=i;break}V.call(K,F,new M_(K,{sourceEvent:q,subject:G,target:p,identifier:N,active:X,x:M[0]+U,y:M[1]+O,dx:M[0]-Z[0],dy:M[1]-Z[1],dispatch:V}),S)}}return p.filter=function(F){return arguments.length?(t=typeof F=="function"?F:xv(!!F),p):t},p.container=function(F){return arguments.length?(e=typeof F=="function"?F:xv(F),p):e},p.subject=function(F){return arguments.length?(n=typeof F=="function"?F:xv(F),p):n},p.touchable=function(F){return arguments.length?(r=typeof F=="function"?F:xv(!!F),p):r},p.on=function(){var F=a.on.apply(a,arguments);return F===a?p:F},p.clickDistance=function(F){return arguments.length?(h=(F=+F)*F,p):Math.sqrt(h)},p}function HS(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function T7(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function bx(){}var qg=.7,W2=1/qg,W0="\\s*([+-]?\\d+)\\s*",Wg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",uA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hbe=/^#([0-9a-f]{3,8})$/,mbe=new RegExp(`^rgb\\(${W0},${W0},${W0}\\)$`),pbe=new RegExp(`^rgb\\(${uA},${uA},${uA}\\)$`),gbe=new RegExp(`^rgba\\(${W0},${W0},${W0},${Wg}\\)$`),xbe=new RegExp(`^rgba\\(${uA},${uA},${uA},${Wg}\\)$`),vbe=new RegExp(`^hsl\\(${Wg},${uA},${uA}\\)$`),ybe=new RegExp(`^hsla\\(${Wg},${uA},${uA},${Wg}\\)$`),U6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};HS(bx,$g,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:L6,formatHex:L6,formatHex8:wbe,formatHsl:bbe,formatRgb:M6,toString:M6});function L6(){return this.rgb().formatHex()}function wbe(){return this.rgb().formatHex8()}function bbe(){return B7(this).formatHsl()}function M6(){return this.rgb().formatRgb()}function $g(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=hbe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?P6(e):n===3?new uo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?vv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?vv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=mbe.exec(t))?new uo(e[1],e[2],e[3],1):(e=pbe.exec(t))?new uo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=gbe.exec(t))?vv(e[1],e[2],e[3],e[4]):(e=xbe.exec(t))?vv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=vbe.exec(t))?Q6(e[1],e[2]/100,e[3]/100,1):(e=ybe.exec(t))?Q6(e[1],e[2]/100,e[3]/100,e[4]):U6.hasOwnProperty(t)?P6(U6[t]):t==="transparent"?new uo(NaN,NaN,NaN,0):null}function P6(t){return new uo(t>>16&255,t>>8&255,t&255,1)}function vv(t,e,n,r){return r<=0&&(t=e=n=NaN),new uo(t,e,n,r)}function Cbe(t){return t instanceof bx||(t=$g(t)),t?(t=t.rgb(),new uo(t.r,t.g,t.b,t.opacity)):new uo}function P_(t,e,n,r){return arguments.length===1?Cbe(t):new uo(t,e,n,r??1)}function uo(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}HS(uo,P_,T7(bx,{brighter(t){return t=t==null?W2:Math.pow(W2,t),new uo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?qg:Math.pow(qg,t),new uo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new uo($f(this.r),$f(this.g),$f(this.b),$2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:j6,formatHex:j6,formatHex8:Ebe,formatRgb:O6,toString:O6}));function j6(){return`#${Lf(this.r)}${Lf(this.g)}${Lf(this.b)}`}function Ebe(){return`#${Lf(this.r)}${Lf(this.g)}${Lf(this.b)}${Lf((isNaN(this.opacity)?1:this.opacity)*255)}`}function O6(){const t=$2(this.opacity);return`${t===1?"rgb(":"rgba("}${$f(this.r)}, ${$f(this.g)}, ${$f(this.b)}${t===1?")":`, ${t})`}`}function $2(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function $f(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Lf(t){return t=$f(t),(t<16?"0":"")+t.toString(16)}function Q6(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new oc(t,e,n,r)}function B7(t){if(t instanceof oc)return new oc(t.h,t.s,t.l,t.opacity);if(t instanceof bx||(t=$g(t)),!t)return new oc;if(t instanceof oc)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),a=Math.max(e,n,r),i=NaN,o=a-s,l=(a+s)/2;return o?(e===a?i=(n-r)/o+(n<r)*6:n===a?i=(r-e)/o+2:i=(e-n)/o+4,o/=l<.5?a+s:2-a-s,i*=60):o=l>0&&l<1?0:i,new oc(i,o,l,t.opacity)}function _be(t,e,n,r){return arguments.length===1?B7(t):new oc(t,e,n,r??1)}function oc(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}HS(oc,_be,T7(bx,{brighter(t){return t=t==null?W2:Math.pow(W2,t),new oc(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?qg:Math.pow(qg,t),new oc(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new uo(GC(t>=240?t-240:t+120,s,r),GC(t,s,r),GC(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new oc(H6(this.h),yv(this.s),yv(this.l),$2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=$2(this.opacity);return`${t===1?"hsl(":"hsla("}${H6(this.h)}, ${yv(this.s)*100}%, ${yv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function H6(t){return t=(t||0)%360,t<0?t+360:t}function yv(t){return Math.max(0,Math.min(1,t||0))}function GC(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const N7=t=>()=>t;function Sbe(t,e){return function(n){return t+n*e}}function Tbe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Bbe(t){return(t=+t)==1?k7:function(e,n){return n-e?Tbe(e,n,t):N7(isNaN(e)?n:e)}}function k7(t,e){var n=e-t;return n?Sbe(t,n):N7(isNaN(t)?e:t)}const V6=function t(e){var n=Bbe(e);function r(s,a){var i=n((s=P_(s)).r,(a=P_(a)).r),o=n(s.g,a.g),l=n(s.b,a.b),A=k7(s.opacity,a.opacity);return function(d){return s.r=i(d),s.g=o(d),s.b=l(d),s.opacity=A(d),s+""}}return r.gamma=t,r}(1);function ud(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var j_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zC=new RegExp(j_.source,"g");function Nbe(t){return function(){return t}}function kbe(t){return function(e){return t(e)+""}}function Ibe(t,e){var n=j_.lastIndex=zC.lastIndex=0,r,s,a,i=-1,o=[],l=[];for(t=t+"",e=e+"";(r=j_.exec(t))&&(s=zC.exec(e));)(a=s.index)>n&&(a=e.slice(n,a),o[i]?o[i]+=a:o[++i]=a),(r=r[0])===(s=s[0])?o[i]?o[i]+=s:o[++i]=s:(o[++i]=null,l.push({i,x:ud(r,s)})),n=zC.lastIndex;return n<e.length&&(a=e.slice(n),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?kbe(l[0].x):Nbe(e):(e=l.length,function(A){for(var d=0,h;d<e;++d)o[(h=l[d]).i]=h.x(A);return o.join("")})}var G6=180/Math.PI,O_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function I7(t,e,n,r,s,a){var i,o,l;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,i=-i),{translateX:s,translateY:a,rotate:Math.atan2(e,t)*G6,skewX:Math.atan(l)*G6,scaleX:i,scaleY:o}}var wv;function Fbe(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?O_:I7(e.a,e.b,e.c,e.d,e.e,e.f)}function Rbe(t){return t==null||(wv||(wv=document.createElementNS("http://www.w3.org/2000/svg","g")),wv.setAttribute("transform",t),!(t=wv.transform.baseVal.consolidate()))?O_:(t=t.matrix,I7(t.a,t.b,t.c,t.d,t.e,t.f))}function F7(t,e,n,r){function s(A){return A.length?A.pop()+" ":""}function a(A,d,h,p,g,w){if(A!==h||d!==p){var b=g.push("translate(",null,e,null,n);w.push({i:b-4,x:ud(A,h)},{i:b-2,x:ud(d,p)})}else(h||p)&&g.push("translate("+h+e+p+n)}function i(A,d,h,p){A!==d?(A-d>180?d+=360:d-A>180&&(A+=360),p.push({i:h.push(s(h)+"rotate(",null,r)-2,x:ud(A,d)})):d&&h.push(s(h)+"rotate("+d+r)}function o(A,d,h,p){A!==d?p.push({i:h.push(s(h)+"skewX(",null,r)-2,x:ud(A,d)}):d&&h.push(s(h)+"skewX("+d+r)}function l(A,d,h,p,g,w){if(A!==h||d!==p){var b=g.push(s(g)+"scale(",null,",",null,")");w.push({i:b-4,x:ud(A,h)},{i:b-2,x:ud(d,p)})}else(h!==1||p!==1)&&g.push(s(g)+"scale("+h+","+p+")")}return function(A,d){var h=[],p=[];return A=t(A),d=t(d),a(A.translateX,A.translateY,d.translateX,d.translateY,h,p),i(A.rotate,d.rotate,h,p),o(A.skewX,d.skewX,h,p),l(A.scaleX,A.scaleY,d.scaleX,d.scaleY,h,p),A=d=null,function(g){for(var w=-1,b=p.length,E;++w<b;)h[(E=p[w]).i]=E.x(g);return h.join("")}}}var Dbe=F7(Fbe,"px, ","px)","deg)"),Ube=F7(Rbe,", ",")",")"),Lbe=1e-12;function z6(t){return((t=Math.exp(t))+1/t)/2}function Mbe(t){return((t=Math.exp(t))-1/t)/2}function Pbe(t){return((t=Math.exp(2*t))-1)/(t+1)}const jbe=function t(e,n,r){function s(a,i){var o=a[0],l=a[1],A=a[2],d=i[0],h=i[1],p=i[2],g=d-o,w=h-l,b=g*g+w*w,E,B;if(b<Lbe)B=Math.log(p/A)/e,E=function(S){return[o+S*g,l+S*w,A*Math.exp(e*S*B)]};else{var I=Math.sqrt(b),k=(p*p-A*A+r*b)/(2*A*n*I),F=(p*p-A*A-r*b)/(2*p*n*I),D=Math.log(Math.sqrt(k*k+1)-k),P=Math.log(Math.sqrt(F*F+1)-F);B=(P-D)/e,E=function(S){var N=S*B,T=z6(D),V=A/(n*I)*(T*Pbe(e*N+D)-Mbe(D));return[o+V*g,l+V*w,A*T/z6(e*N+D)]}}return E.duration=B*1e3*e/Math.SQRT2,E}return s.rho=function(a){var i=Math.max(.001,+a),o=i*i,l=o*o;return t(i,o,l)},s}(Math.SQRT2,2,4);var um=0,qp=0,Ep=0,R7=1e3,Y2,Wp,J2=0,oh=0,Yy=0,Yg=typeof performance=="object"&&performance.now?performance:Date,D7=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function VS(){return oh||(D7(Obe),oh=Yg.now()+Yy)}function Obe(){oh=0}function X2(){this._call=this._time=this._next=null}X2.prototype=U7.prototype={constructor:X2,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?VS():+n)+(e==null?0:+e),!this._next&&Wp!==this&&(Wp?Wp._next=this:Y2=this,Wp=this),this._call=t,this._time=n,Q_()},stop:function(){this._call&&(this._call=null,this._time=1/0,Q_())}};function U7(t,e,n){var r=new X2;return r.restart(t,e,n),r}function Qbe(){VS(),++um;for(var t=Y2,e;t;)(e=oh-t._time)>=0&&t._call.call(void 0,e),t=t._next;--um}function K6(){oh=(J2=Yg.now())+Yy,um=qp=0;try{Qbe()}finally{um=0,Vbe(),oh=0}}function Hbe(){var t=Yg.now(),e=t-J2;e>R7&&(Yy-=e,J2=t)}function Vbe(){for(var t,e=Y2,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Y2=n);Wp=t,Q_(r)}function Q_(t){if(!um){qp&&(qp=clearTimeout(qp));var e=t-oh;e>24?(t<1/0&&(qp=setTimeout(K6,t-Yg.now()-Yy)),Ep&&(Ep=clearInterval(Ep))):(Ep||(J2=Yg.now(),Ep=setInterval(Hbe,R7)),um=1,D7(K6))}}function q6(t,e,n){var r=new X2;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var Gbe=Wy("start","end","cancel","interrupt"),zbe=[],L7=0,W6=1,H_=2,$v=3,$6=4,V_=5,Yv=6;function Jy(t,e,n,r,s,a){var i=t.__transition;if(!i)t.__transition={};else if(n in i)return;Kbe(t,n,{name:e,index:r,group:s,on:Gbe,tween:zbe,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:L7})}function GS(t,e){var n=xc(t,e);if(n.state>L7)throw new Error("too late; already scheduled");return n}function yA(t,e){var n=xc(t,e);if(n.state>$v)throw new Error("too late; already running");return n}function xc(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Kbe(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=U7(a,0,n.time);function a(A){n.state=W6,n.timer.restart(i,n.delay,n.time),n.delay<=A&&i(A-n.delay)}function i(A){var d,h,p,g;if(n.state!==W6)return l();for(d in r)if(g=r[d],g.name===n.name){if(g.state===$v)return q6(i);g.state===$6?(g.state=Yv,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[d]):+d<e&&(g.state=Yv,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[d])}if(q6(function(){n.state===$v&&(n.state=$6,n.timer.restart(o,n.delay,n.time),o(A))}),n.state=H_,n.on.call("start",t,t.__data__,n.index,n.group),n.state===H_){for(n.state=$v,s=new Array(p=n.tween.length),d=0,h=-1;d<p;++d)(g=n.tween[d].value.call(t,t.__data__,n.index,n.group))&&(s[++h]=g);s.length=h+1}}function o(A){for(var d=A<n.duration?n.ease.call(null,A/n.duration):(n.timer.restart(l),n.state=V_,1),h=-1,p=s.length;++h<p;)s[h].call(t,d);n.state===V_&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Yv,n.timer.stop(),delete r[e];for(var A in r)return;delete t.__transition}}function Jv(t,e){var n=t.__transition,r,s,a=!0,i;if(n){e=e==null?null:e+"";for(i in n){if((r=n[i]).name!==e){a=!1;continue}s=r.state>H_&&r.state<V_,r.state=Yv,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[i]}a&&delete t.__transition}}function qbe(t){return this.each(function(){Jv(this,t)})}function Wbe(t,e){var n,r;return function(){var s=yA(this,t),a=s.tween;if(a!==n){r=n=a;for(var i=0,o=r.length;i<o;++i)if(r[i].name===e){r=r.slice(),r.splice(i,1);break}}s.tween=r}}function $be(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var a=yA(this,t),i=a.tween;if(i!==r){s=(r=i).slice();for(var o={name:e,value:n},l=0,A=s.length;l<A;++l)if(s[l].name===e){s[l]=o;break}l===A&&s.push(o)}a.tween=s}}function Ybe(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=xc(this.node(),n).tween,s=0,a=r.length,i;s<a;++s)if((i=r[s]).name===t)return i.value;return null}return this.each((e==null?Wbe:$be)(n,t,e))}function zS(t,e,n){var r=t._id;return t.each(function(){var s=yA(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return xc(s,r).value[e]}}function M7(t,e){var n;return(typeof e=="number"?ud:e instanceof $g?V6:(n=$g(e))?(e=n,V6):Ibe)(t,e)}function Jbe(t){return function(){this.removeAttribute(t)}}function Xbe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Zbe(t,e,n){var r,s=n+"",a;return function(){var i=this.getAttribute(t);return i===s?null:i===r?a:a=e(r=i,n)}}function eCe(t,e,n){var r,s=n+"",a;return function(){var i=this.getAttributeNS(t.space,t.local);return i===s?null:i===r?a:a=e(r=i,n)}}function tCe(t,e,n){var r,s,a;return function(){var i,o=n(this),l;return o==null?void this.removeAttribute(t):(i=this.getAttribute(t),l=o+"",i===l?null:i===r&&l===s?a:(s=l,a=e(r=i,o)))}}function nCe(t,e,n){var r,s,a;return function(){var i,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(i=this.getAttributeNS(t.space,t.local),l=o+"",i===l?null:i===r&&l===s?a:(s=l,a=e(r=i,o)))}}function rCe(t,e){var n=$y(t),r=n==="transform"?Ube:M7;return this.attrTween(t,typeof e=="function"?(n.local?nCe:tCe)(n,r,zS(this,"attr."+t,e)):e==null?(n.local?Xbe:Jbe)(n):(n.local?eCe:Zbe)(n,r,e))}function sCe(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function aCe(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function iCe(t,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&aCe(t,a)),n}return s._value=e,s}function oCe(t,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&sCe(t,a)),n}return s._value=e,s}function lCe(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=$y(t);return this.tween(n,(r.local?iCe:oCe)(r,e))}function cCe(t,e){return function(){GS(this,t).delay=+e.apply(this,arguments)}}function ACe(t,e){return e=+e,function(){GS(this,t).delay=e}}function uCe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?cCe:ACe)(e,t)):xc(this.node(),e).delay}function dCe(t,e){return function(){yA(this,t).duration=+e.apply(this,arguments)}}function fCe(t,e){return e=+e,function(){yA(this,t).duration=e}}function hCe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?dCe:fCe)(e,t)):xc(this.node(),e).duration}function mCe(t,e){if(typeof e!="function")throw new Error;return function(){yA(this,t).ease=e}}function pCe(t){var e=this._id;return arguments.length?this.each(mCe(e,t)):xc(this.node(),e).ease}function gCe(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;yA(this,t).ease=n}}function xCe(t){if(typeof t!="function")throw new Error;return this.each(gCe(this._id,t))}function vCe(t){typeof t!="function"&&(t=m7(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],i=a.length,o=r[s]=[],l,A=0;A<i;++A)(l=a[A])&&t.call(l,l.__data__,A,a)&&o.push(l);return new mu(r,this._parents,this._name,this._id)}function yCe(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,a=Math.min(r,s),i=new Array(r),o=0;o<a;++o)for(var l=e[o],A=n[o],d=l.length,h=i[o]=new Array(d),p,g=0;g<d;++g)(p=l[g]||A[g])&&(h[g]=p);for(;o<r;++o)i[o]=e[o];return new mu(i,this._parents,this._name,this._id)}function wCe(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function bCe(t,e,n){var r,s,a=wCe(e)?GS:yA;return function(){var i=a(this,t),o=i.on;o!==r&&(s=(r=o).copy()).on(e,n),i.on=s}}function CCe(t,e){var n=this._id;return arguments.length<2?xc(this.node(),n).on.on(t):this.each(bCe(n,t,e))}function ECe(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function _Ce(){return this.on("end.remove",ECe(this._id))}function SCe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=OS(t));for(var r=this._groups,s=r.length,a=new Array(s),i=0;i<s;++i)for(var o=r[i],l=o.length,A=a[i]=new Array(l),d,h,p=0;p<l;++p)(d=o[p])&&(h=t.call(d,d.__data__,p,o))&&("__data__"in d&&(h.__data__=d.__data__),A[p]=h,Jy(A[p],e,n,p,A,xc(d,n)));return new mu(a,this._parents,e,n)}function TCe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=h7(t));for(var r=this._groups,s=r.length,a=[],i=[],o=0;o<s;++o)for(var l=r[o],A=l.length,d,h=0;h<A;++h)if(d=l[h]){for(var p=t.call(d,d.__data__,h,l),g,w=xc(d,n),b=0,E=p.length;b<E;++b)(g=p[b])&&Jy(g,e,n,b,p,w);a.push(p),i.push(d)}return new mu(a,i,e,n)}var BCe=wx.prototype.constructor;function NCe(){return new BCe(this._groups,this._parents)}function kCe(t,e){var n,r,s;return function(){var a=Am(this,t),i=(this.style.removeProperty(t),Am(this,t));return a===i?null:a===n&&i===r?s:s=e(n=a,r=i)}}function P7(t){return function(){this.style.removeProperty(t)}}function ICe(t,e,n){var r,s=n+"",a;return function(){var i=Am(this,t);return i===s?null:i===r?a:a=e(r=i,n)}}function FCe(t,e,n){var r,s,a;return function(){var i=Am(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),Am(this,t))),i===l?null:i===r&&l===s?a:(s=l,a=e(r=i,o))}}function RCe(t,e){var n,r,s,a="style."+e,i="end."+a,o;return function(){var l=yA(this,t),A=l.on,d=l.value[a]==null?o||(o=P7(e)):void 0;(A!==n||s!==d)&&(r=(n=A).copy()).on(i,s=d),l.on=r}}function DCe(t,e,n){var r=(t+="")=="transform"?Dbe:M7;return e==null?this.styleTween(t,kCe(t,r)).on("end.style."+t,P7(t)):typeof e=="function"?this.styleTween(t,FCe(t,r,zS(this,"style."+t,e))).each(RCe(this._id,t)):this.styleTween(t,ICe(t,r,e),n).on("end.style."+t,null)}function UCe(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function LCe(t,e,n){var r,s;function a(){var i=e.apply(this,arguments);return i!==s&&(r=(s=i)&&UCe(t,i,n)),r}return a._value=e,a}function MCe(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,LCe(t,e,n??""))}function PCe(t){return function(){this.textContent=t}}function jCe(t){return function(){var e=t(this);this.textContent=e??""}}function OCe(t){return this.tween("text",typeof t=="function"?jCe(zS(this,"text",t)):PCe(t==null?"":t+""))}function QCe(t){return function(e){this.textContent=t.call(this,e)}}function HCe(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&QCe(s)),e}return r._value=t,r}function VCe(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,HCe(t))}function GCe(){for(var t=this._name,e=this._id,n=j7(),r=this._groups,s=r.length,a=0;a<s;++a)for(var i=r[a],o=i.length,l,A=0;A<o;++A)if(l=i[A]){var d=xc(l,e);Jy(l,t,n,A,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new mu(r,this._parents,t,n)}function zCe(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(a,i){var o={value:i},l={value:function(){--s===0&&a()}};n.each(function(){var A=yA(this,r),d=A.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),A.on=e}),s===0&&a()})}var KCe=0;function mu(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function j7(){return++KCe}var ZA=wx.prototype;mu.prototype={constructor:mu,select:SCe,selectAll:TCe,selectChild:ZA.selectChild,selectChildren:ZA.selectChildren,filter:vCe,merge:yCe,selection:NCe,transition:GCe,call:ZA.call,nodes:ZA.nodes,node:ZA.node,size:ZA.size,empty:ZA.empty,each:ZA.each,on:CCe,attr:rCe,attrTween:lCe,style:DCe,styleTween:MCe,text:OCe,textTween:VCe,remove:_Ce,tween:Ybe,delay:uCe,duration:hCe,ease:pCe,easeVarying:xCe,end:zCe,[Symbol.iterator]:ZA[Symbol.iterator]};function qCe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var WCe={time:null,delay:0,duration:250,ease:qCe};function $Ce(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function YCe(t){var e,n;t instanceof mu?(e=t._id,t=t._name):(e=j7(),(n=WCe).time=VS(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,a=0;a<s;++a)for(var i=r[a],o=i.length,l,A=0;A<o;++A)(l=i[A])&&Jy(l,t,e,A,i,n||$Ce(l,e));return new mu(r,this._parents,t,e)}wx.prototype.interrupt=qbe;wx.prototype.transition=YCe;const bv=t=>()=>t;function JCe(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function su(t,e,n){this.k=t,this.x=e,this.y=n}su.prototype={constructor:su,scale:function(t){return t===1?this:new su(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new su(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ud=new su(1,0,0);su.prototype;function KC(t){t.stopImmediatePropagation()}function _p(t){t.preventDefault(),t.stopImmediatePropagation()}function XCe(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function ZCe(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Y6(){return this.__zoom||Ud}function eEe(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function tEe(){return navigator.maxTouchPoints||"ontouchstart"in this}function nEe(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],i=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function rEe(){var t=XCe,e=ZCe,n=nEe,r=eEe,s=tEe,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,l=jbe,A=Wy("start","zoom","end"),d,h,p,g=500,w=150,b=0,E=10;function B(G){G.property("__zoom",Y6).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",V).filter(s).on("touchstart.zoom",M).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}B.transform=function(G,ie,K,q){var se=G.selection?G.selection():G;se.property("__zoom",Y6),G!==se?D(G,ie,K,q):se.interrupt().each(function(){P(this,arguments).event(q).start().zoom(null,typeof ie=="function"?ie.apply(this,arguments):ie).end()})},B.scaleBy=function(G,ie,K,q){B.scaleTo(G,function(){var se=this.__zoom.k,Z=typeof ie=="function"?ie.apply(this,arguments):ie;return se*Z},K,q)},B.scaleTo=function(G,ie,K,q){B.transform(G,function(){var se=e.apply(this,arguments),Z=this.__zoom,X=K==null?F(se):typeof K=="function"?K.apply(this,arguments):K,de=Z.invert(X),j=typeof ie=="function"?ie.apply(this,arguments):ie;return n(k(I(Z,j),X,de),se,i)},K,q)},B.translateBy=function(G,ie,K,q){B.transform(G,function(){return n(this.__zoom.translate(typeof ie=="function"?ie.apply(this,arguments):ie,typeof K=="function"?K.apply(this,arguments):K),e.apply(this,arguments),i)},null,q)},B.translateTo=function(G,ie,K,q,se){B.transform(G,function(){var Z=e.apply(this,arguments),X=this.__zoom,de=q==null?F(Z):typeof q=="function"?q.apply(this,arguments):q;return n(Ud.translate(de[0],de[1]).scale(X.k).translate(typeof ie=="function"?-ie.apply(this,arguments):-ie,typeof K=="function"?-K.apply(this,arguments):-K),Z,i)},q,se)};function I(G,ie){return ie=Math.max(a[0],Math.min(a[1],ie)),ie===G.k?G:new su(ie,G.x,G.y)}function k(G,ie,K){var q=ie[0]-K[0]*G.k,se=ie[1]-K[1]*G.k;return q===G.x&&se===G.y?G:new su(G.k,q,se)}function F(G){return[(+G[0][0]+ +G[1][0])/2,(+G[0][1]+ +G[1][1])/2]}function D(G,ie,K,q){G.on("start.zoom",function(){P(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event(q).end()}).tween("zoom",function(){var se=this,Z=arguments,X=P(se,Z).event(q),de=e.apply(se,Z),j=K==null?F(de):typeof K=="function"?K.apply(se,Z):K,W=Math.max(de[1][0]-de[0][0],de[1][1]-de[0][1]),J=se.__zoom,ne=typeof ie=="function"?ie.apply(se,Z):ie,oe=l(J.invert(j).concat(W/J.k),ne.invert(j).concat(W/ne.k));return function(ue){if(ue===1)ue=ne;else{var me=oe(ue),ge=W/me[2];ue=new su(ge,j[0]-me[0]*ge,j[1]-me[1]*ge)}X.zoom(null,ue)}})}function P(G,ie,K){return!K&&G.__zooming||new S(G,ie)}function S(G,ie){this.that=G,this.args=ie,this.active=0,this.sourceEvent=null,this.extent=e.apply(G,ie),this.taps=0}S.prototype={event:function(G){return G&&(this.sourceEvent=G),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(G,ie){return this.mouse&&G!=="mouse"&&(this.mouse[1]=ie.invert(this.mouse[0])),this.touch0&&G!=="touch"&&(this.touch0[1]=ie.invert(this.touch0[0])),this.touch1&&G!=="touch"&&(this.touch1[1]=ie.invert(this.touch1[0])),this.that.__zoom=ie,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(G){var ie=ic(this.that).datum();A.call(G,this.that,new JCe(G,{sourceEvent:this.sourceEvent,target:B,transform:this.that.__zoom,dispatch:A}),ie)}};function N(G,...ie){if(!t.apply(this,arguments))return;var K=P(this,ie).event(G),q=this.__zoom,se=Math.max(a[0],Math.min(a[1],q.k*Math.pow(2,r.apply(this,arguments)))),Z=nA(G);if(K.wheel)(K.mouse[0][0]!==Z[0]||K.mouse[0][1]!==Z[1])&&(K.mouse[1]=q.invert(K.mouse[0]=Z)),clearTimeout(K.wheel);else{if(q.k===se)return;K.mouse=[Z,q.invert(Z)],Jv(this),K.start()}_p(G),K.wheel=setTimeout(X,w),K.zoom("mouse",n(k(I(q,se),K.mouse[0],K.mouse[1]),K.extent,i));function X(){K.wheel=null,K.end()}}function T(G,...ie){if(p||!t.apply(this,arguments))return;var K=G.currentTarget,q=P(this,ie,!0).event(G),se=ic(G.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",W,!0),Z=nA(G,K),X=G.clientX,de=G.clientY;_7(G.view),KC(G),q.mouse=[Z,this.__zoom.invert(Z)],Jv(this),q.start();function j(J){if(_p(J),!q.moved){var ne=J.clientX-X,oe=J.clientY-de;q.moved=ne*ne+oe*oe>b}q.event(J).zoom("mouse",n(k(q.that.__zoom,q.mouse[0]=nA(J,K),q.mouse[1]),q.extent,i))}function W(J){se.on("mousemove.zoom mouseup.zoom",null),S7(J.view,q.moved),_p(J),q.event(J).end()}}function V(G,...ie){if(t.apply(this,arguments)){var K=this.__zoom,q=nA(G.changedTouches?G.changedTouches[0]:G,this),se=K.invert(q),Z=K.k*(G.shiftKey?.5:2),X=n(k(I(K,Z),q,se),e.apply(this,ie),i);_p(G),o>0?ic(this).transition().duration(o).call(D,X,q,G):ic(this).call(B.transform,X,q,G)}}function M(G,...ie){if(t.apply(this,arguments)){var K=G.touches,q=K.length,se=P(this,ie,G.changedTouches.length===q).event(G),Z,X,de,j;for(KC(G),X=0;X<q;++X)de=K[X],j=nA(de,this),j=[j,this.__zoom.invert(j),de.identifier],se.touch0?!se.touch1&&se.touch0[2]!==j[2]&&(se.touch1=j,se.taps=0):(se.touch0=j,Z=!0,se.taps=1+!!d);d&&(d=clearTimeout(d)),Z&&(se.taps<2&&(h=j[0],d=setTimeout(function(){d=null},g)),Jv(this),se.start())}}function U(G,...ie){if(this.__zooming){var K=P(this,ie).event(G),q=G.changedTouches,se=q.length,Z,X,de,j;for(_p(G),Z=0;Z<se;++Z)X=q[Z],de=nA(X,this),K.touch0&&K.touch0[2]===X.identifier?K.touch0[0]=de:K.touch1&&K.touch1[2]===X.identifier&&(K.touch1[0]=de);if(X=K.that.__zoom,K.touch1){var W=K.touch0[0],J=K.touch0[1],ne=K.touch1[0],oe=K.touch1[1],ue=(ue=ne[0]-W[0])*ue+(ue=ne[1]-W[1])*ue,me=(me=oe[0]-J[0])*me+(me=oe[1]-J[1])*me;X=I(X,Math.sqrt(ue/me)),de=[(W[0]+ne[0])/2,(W[1]+ne[1])/2],j=[(J[0]+oe[0])/2,(J[1]+oe[1])/2]}else if(K.touch0)de=K.touch0[0],j=K.touch0[1];else return;K.zoom("touch",n(k(X,de,j),K.extent,i))}}function O(G,...ie){if(this.__zooming){var K=P(this,ie).event(G),q=G.changedTouches,se=q.length,Z,X;for(KC(G),p&&clearTimeout(p),p=setTimeout(function(){p=null},g),Z=0;Z<se;++Z)X=q[Z],K.touch0&&K.touch0[2]===X.identifier?delete K.touch0:K.touch1&&K.touch1[2]===X.identifier&&delete K.touch1;if(K.touch1&&!K.touch0&&(K.touch0=K.touch1,delete K.touch1),K.touch0)K.touch0[1]=this.__zoom.invert(K.touch0[0]);else if(K.end(),K.taps===2&&(X=nA(X,this),Math.hypot(h[0]-X[0],h[1]-X[1])<E)){var de=ic(this).on("dblclick.zoom");de&&de.apply(this,arguments)}}}return B.wheelDelta=function(G){return arguments.length?(r=typeof G=="function"?G:bv(+G),B):r},B.filter=function(G){return arguments.length?(t=typeof G=="function"?G:bv(!!G),B):t},B.touchable=function(G){return arguments.length?(s=typeof G=="function"?G:bv(!!G),B):s},B.extent=function(G){return arguments.length?(e=typeof G=="function"?G:bv([[+G[0][0],+G[0][1]],[+G[1][0],+G[1][1]]]),B):e},B.scaleExtent=function(G){return arguments.length?(a[0]=+G[0],a[1]=+G[1],B):[a[0],a[1]]},B.translateExtent=function(G){return arguments.length?(i[0][0]=+G[0][0],i[1][0]=+G[1][0],i[0][1]=+G[0][1],i[1][1]=+G[1][1],B):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},B.constrain=function(G){return arguments.length?(n=G,B):n},B.duration=function(G){return arguments.length?(o=+G,B):o},B.interpolate=function(G){return arguments.length?(l=G,B):l},B.on=function(){var G=A.on.apply(A,arguments);return G===A?B:G},B.clickDistance=function(G){return arguments.length?(b=(G=+G)*G,B):Math.sqrt(b)},B.tapDistance=function(G){return arguments.length?(E=+G,B):E},B}DR();const Xy=ee.createContext(null),sEe=Xy.Provider,pu={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},O7=pu.error001();function ws(t,e){const n=ee.useContext(Xy);if(n===null)throw new Error(O7);return d7(n,t,e)}const Ha=()=>{const t=ee.useContext(Xy);if(t===null)throw new Error(O7);return ee.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},aEe=t=>t.userSelectionActive?"none":"all";function Q7({position:t,children:e,className:n,style:r,...s}){const a=ws(aEe),i=`${t}`.split("-");return ut.createElement("div",{className:Ki(["react-flow__panel",n,...i]),style:{...r,pointerEvents:a},...s},e)}function iEe({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:ut.createElement(Q7,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ut.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const oEe=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:l,className:A,...d})=>{const h=ee.useRef(null),[p,g]=ee.useState({x:0,y:0,width:0,height:0}),w=Ki(["react-flow__edge-textwrapper",A]);return ee.useEffect(()=>{if(h.current){const b=h.current.getBBox();g({x:b.x,y:b.y,width:b.width,height:b.height})}},[n]),typeof n>"u"||!n?null:ut.createElement("g",{transform:`translate(${t-p.width/2} ${e-p.height/2})`,className:w,visibility:p.width?"visible":"hidden",...d},s&&ut.createElement("rect",{width:p.width+2*i[0],x:-i[0],y:-i[1],height:p.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:o,ry:o}),ut.createElement("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:h,style:r},n),l)};var lEe=ee.memo(oEe);const KS=t=>({width:t.offsetWidth,height:t.offsetHeight}),dm=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),qS=(t={x:0,y:0},e)=>({x:dm(t.x,e[0][0],e[1][0]),y:dm(t.y,e[0][1],e[1][1])}),J6=(t,e,n)=>t<e?dm(Math.abs(t-e),1,50)/50:t>n?-dm(Math.abs(t-n),1,50)/50:0,H7=(t,e)=>{const n=J6(t.x,35,e.width-35)*20,r=J6(t.y,35,e.height-35)*20;return[n,r]},V7=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},cEe=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),WS=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),AEe=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),X6=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),G_=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},uEe=t=>_l(t.width)&&_l(t.height)&&_l(t.x)&&_l(t.y),_l=t=>!isNaN(t)&&isFinite(t),Fs=Symbol.for("internals"),G7=["Enter"," ","Escape"],dEe=(t,e)=>{},fEe=t=>"nativeEvent"in t;function z_(t){var s,a;const e=fEe(t)?t.nativeEvent:t,n=((a=(s=e.composedPath)==null?void 0:s.call(e))==null?void 0:a[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const z7=t=>"clientX"in t,Ld=(t,e)=>{var a,i;const n=z7(t),r=n?t.clientX:(a=t.touches)==null?void 0:a[0].clientX,s=n?t.clientY:(i=t.touches)==null?void 0:i[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:s-((e==null?void 0:e.top)??0)}},Z2=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},Cx=({id:t,path:e,labelX:n,labelY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:A,style:d,markerEnd:h,markerStart:p,interactionWidth:g=20})=>ut.createElement(ut.Fragment,null,ut.createElement("path",{id:t,style:d,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:p}),g&&ut.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),s&&_l(n)&&_l(r)?ut.createElement(lEe,{x:n,y:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:A}):null);Cx.displayName="BaseEdge";function Sp(t,e,n){return n===void 0?n:r=>{const s=e().edges.find(a=>a.id===t);s&&n(r,{...s})}}function K7({sourceX:t,sourceY:e,targetX:n,targetY:r}){const s=Math.abs(n-t)/2,a=n<t?n+s:n-s,i=Math.abs(r-e)/2,o=r<e?r+i:r-i;return[a,o,s,i]}function q7({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:i,targetControlY:o}){const l=t*.125+s*.375+i*.375+n*.125,A=e*.125+a*.375+o*.375+r*.125,d=Math.abs(l-t),h=Math.abs(A-e);return[l,A,d,h]}var lh;(function(t){t.Strict="strict",t.Loose="loose"})(lh||(lh={}));var Mf;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Mf||(Mf={}));var Jg;(function(t){t.Partial="partial",t.Full="full"})(Jg||(Jg={}));var gd;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(gd||(gd={}));var ey;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(ey||(ey={}));var an;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(an||(an={}));function Z6({pos:t,x1:e,y1:n,x2:r,y2:s}){return t===an.Left||t===an.Right?[.5*(e+r),n]:[e,.5*(n+s)]}function W7({sourceX:t,sourceY:e,sourcePosition:n=an.Bottom,targetX:r,targetY:s,targetPosition:a=an.Top}){const[i,o]=Z6({pos:n,x1:t,y1:e,x2:r,y2:s}),[l,A]=Z6({pos:a,x1:r,y1:s,x2:t,y2:e}),[d,h,p,g]=q7({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:i,sourceControlY:o,targetControlX:l,targetControlY:A});return[`M${t},${e} C${i},${o} ${l},${A} ${r},${s}`,d,h,p,g]}const $S=ee.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=an.Bottom,targetPosition:a=an.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:A,labelBgPadding:d,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:w,interactionWidth:b})=>{const[E,B,I]=W7({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:a});return ut.createElement(Cx,{path:E,labelX:B,labelY:I,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:A,labelBgPadding:d,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:w,interactionWidth:b})});$S.displayName="SimpleBezierEdge";const eR={[an.Left]:{x:-1,y:0},[an.Right]:{x:1,y:0},[an.Top]:{x:0,y:-1},[an.Bottom]:{x:0,y:1}},hEe=({source:t,sourcePosition:e=an.Bottom,target:n})=>e===an.Left||e===an.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},tR=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function mEe({source:t,sourcePosition:e=an.Bottom,target:n,targetPosition:r=an.Top,center:s,offset:a}){const i=eR[e],o=eR[r],l={x:t.x+i.x*a,y:t.y+i.y*a},A={x:n.x+o.x*a,y:n.y+o.y*a},d=hEe({source:l,sourcePosition:e,target:A}),h=d.x!==0?"x":"y",p=d[h];let g=[],w,b;const E={x:0,y:0},B={x:0,y:0},[I,k,F,D]=K7({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(i[h]*o[h]===-1){w=s.x??I,b=s.y??k;const S=[{x:w,y:l.y},{x:w,y:A.y}],N=[{x:l.x,y:b},{x:A.x,y:b}];i[h]===p?g=h==="x"?S:N:g=h==="x"?N:S}else{const S=[{x:l.x,y:A.y}],N=[{x:A.x,y:l.y}];if(h==="x"?g=i.x===p?N:S:g=i.y===p?S:N,e===r){const O=Math.abs(t[h]-n[h]);if(O<=a){const G=Math.min(a-1,a-O);i[h]===p?E[h]=(l[h]>t[h]?-1:1)*G:B[h]=(A[h]>n[h]?-1:1)*G}}if(e!==r){const O=h==="x"?"y":"x",G=i[h]===o[O],ie=l[O]>A[O],K=l[O]<A[O];(i[h]===1&&(!G&&ie||G&&K)||i[h]!==1&&(!G&&K||G&&ie))&&(g=h==="x"?S:N)}const T={x:l.x+E.x,y:l.y+E.y},V={x:A.x+B.x,y:A.y+B.y},M=Math.max(Math.abs(T.x-g[0].x),Math.abs(V.x-g[0].x)),U=Math.max(Math.abs(T.y-g[0].y),Math.abs(V.y-g[0].y));M>=U?(w=(T.x+V.x)/2,b=g[0].y):(w=g[0].x,b=(T.y+V.y)/2)}return[[t,{x:l.x+E.x,y:l.y+E.y},...g,{x:A.x+B.x,y:A.y+B.y},n],w,b,F,D]}function pEe(t,e,n,r){const s=Math.min(tR(t,e)/2,tR(e,n)/2,r),{x:a,y:i}=e;if(t.x===a&&a===n.x||t.y===i&&i===n.y)return`L${a} ${i}`;if(t.y===i){const A=t.x<n.x?-1:1,d=t.y<n.y?1:-1;return`L ${a+s*A},${i}Q ${a},${i} ${a},${i+s*d}`}const o=t.x<n.x?1:-1,l=t.y<n.y?-1:1;return`L ${a},${i+s*l}Q ${a},${i} ${a+s*o},${i}`}function K_({sourceX:t,sourceY:e,sourcePosition:n=an.Bottom,targetX:r,targetY:s,targetPosition:a=an.Top,borderRadius:i=5,centerX:o,centerY:l,offset:A=20}){const[d,h,p,g,w]=mEe({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:s},targetPosition:a,center:{x:o,y:l},offset:A});return[d.reduce((E,B,I)=>{let k="";return I>0&&I<d.length-1?k=pEe(d[I-1],B,d[I+1],i):k=`${I===0?"M":"L"}${B.x} ${B.y}`,E+=k,E},""),h,p,g,w]}const Zy=ee.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:A,style:d,sourcePosition:h=an.Bottom,targetPosition:p=an.Top,markerEnd:g,markerStart:w,pathOptions:b,interactionWidth:E})=>{const[B,I,k]=K_({sourceX:t,sourceY:e,sourcePosition:h,targetX:n,targetY:r,targetPosition:p,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset});return ut.createElement(Cx,{path:B,labelX:I,labelY:k,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:A,style:d,markerEnd:g,markerStart:w,interactionWidth:E})});Zy.displayName="SmoothStepEdge";const YS=ee.memo(t=>{var e;return ut.createElement(Zy,{...t,pathOptions:ee.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});YS.displayName="StepEdge";function gEe({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[s,a,i,o]=K7({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,s,a,i,o]}const JS=ee.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:A,style:d,markerEnd:h,markerStart:p,interactionWidth:g})=>{const[w,b,E]=gEe({sourceX:t,sourceY:e,targetX:n,targetY:r});return ut.createElement(Cx,{path:w,labelX:b,labelY:E,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:A,style:d,markerEnd:h,markerStart:p,interactionWidth:g})});JS.displayName="StraightEdge";function Cv(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function nR({pos:t,x1:e,y1:n,x2:r,y2:s,c:a}){switch(t){case an.Left:return[e-Cv(e-r,a),n];case an.Right:return[e+Cv(r-e,a),n];case an.Top:return[e,n-Cv(n-s,a)];case an.Bottom:return[e,n+Cv(s-n,a)]}}function $7({sourceX:t,sourceY:e,sourcePosition:n=an.Bottom,targetX:r,targetY:s,targetPosition:a=an.Top,curvature:i=.25}){const[o,l]=nR({pos:n,x1:t,y1:e,x2:r,y2:s,c:i}),[A,d]=nR({pos:a,x1:r,y1:s,x2:t,y2:e,c:i}),[h,p,g,w]=q7({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:o,sourceControlY:l,targetControlX:A,targetControlY:d});return[`M${t},${e} C${o},${l} ${A},${d} ${r},${s}`,h,p,g,w]}const ty=ee.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=an.Bottom,targetPosition:a=an.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:A,labelBgPadding:d,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:w,pathOptions:b,interactionWidth:E})=>{const[B,I,k]=$7({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:a,curvature:b==null?void 0:b.curvature});return ut.createElement(Cx,{path:B,labelX:I,labelY:k,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:A,labelBgPadding:d,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:w,interactionWidth:E})});ty.displayName="BezierEdge";const XS=ee.createContext(null),xEe=XS.Provider;XS.Consumer;const vEe=()=>ee.useContext(XS),yEe=t=>"id"in t&&"source"in t&&"target"in t,wEe=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,q_=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,bEe=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),CEe=(t,e)=>{if(!t.source||!t.target)return e;let n;return yEe(t)?n={...t}:n={...t,id:wEe(t)},bEe(n,e)?e:e.concat(n)},W_=({x:t,y:e},[n,r,s],a,[i,o])=>{const l={x:(t-n)/s,y:(e-r)/s};return a?{x:i*Math.round(l.x/i),y:o*Math.round(l.y/o)}:l},Y7=({x:t,y:e},[n,r,s])=>({x:t*s+n,y:e*s+r}),$0=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],s={x:t.position.x-n,y:t.position.y-r};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:s}},ZS=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,s)=>{const{x:a,y:i}=$0(s,e).positionAbsolute;return cEe(r,WS({x:a,y:i,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return AEe(n)},J7=(t,e,[n,r,s]=[0,0,1],a=!1,i=!1,o=[0,0])=>{const l={x:(e.x-n)/s,y:(e.y-r)/s,width:e.width/s,height:e.height/s},A=[];return t.forEach(d=>{const{width:h,height:p,selectable:g=!0,hidden:w=!1}=d;if(i&&!g||w)return!1;const{positionAbsolute:b}=$0(d,o),E={x:b.x,y:b.y,width:h||0,height:p||0},B=G_(l,E),I=typeof h>"u"||typeof p>"u"||h===null||p===null,k=a&&B>0,F=(h||0)*(p||0);(I||k||B>=F||d.dragging)&&A.push(d)}),A},X7=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},Z7=(t,e,n,r,s,a=.1)=>{const i=e/(t.width*(1+a)),o=n/(t.height*(1+a)),l=Math.min(i,o),A=dm(l,r,s),d=t.x+t.width/2,h=t.y+t.height/2,p=e/2-d*A,g=n/2-h*A;return{x:p,y:g,zoom:A}},Bf=(t,e=0)=>t.transition().duration(e);function rR(t,e,n,r){return(e[n]||[]).reduce((s,a)=>{var i,o;return`${t.id}-${a.id}-${n}`!==r&&s.push({id:a.id||null,type:n,nodeId:t.id,x:(((i=t.positionAbsolute)==null?void 0:i.x)??0)+a.x+a.width/2,y:(((o=t.positionAbsolute)==null?void 0:o.y)??0)+a.y+a.height/2}),s},[])}function EEe(t,e,n,r,s,a){const{x:i,y:o}=Ld(t),A=e.elementsFromPoint(i,o).find(w=>w.classList.contains("react-flow__handle"));if(A){const w=A.getAttribute("data-nodeid");if(w){const b=e4(void 0,A),E=A.getAttribute("data-handleid"),B=a({nodeId:w,id:E,type:b});if(B){const I=s.find(k=>k.nodeId===w&&k.type===b&&k.id===E);return{handle:{id:E,type:b,nodeId:w,x:(I==null?void 0:I.x)||n.x,y:(I==null?void 0:I.y)||n.y},validHandleResult:B}}}}let d=[],h=1/0;if(s.forEach(w=>{const b=Math.sqrt((w.x-n.x)**2+(w.y-n.y)**2);if(b<=r){const E=a(w);b<=h&&(b<h?d=[{handle:w,validHandleResult:E}]:b===h&&d.push({handle:w,validHandleResult:E}),h=b)}}),!d.length)return{handle:null,validHandleResult:ej()};if(d.length===1)return d[0];const p=d.some(({validHandleResult:w})=>w.isValid),g=d.some(({handle:w})=>w.type==="target");return d.find(({handle:w,validHandleResult:b})=>g?w.type==="target":p?b.isValid:!0)||d[0]}const _Ee={source:null,target:null,sourceHandle:null,targetHandle:null},ej=()=>({handleDomNode:null,isValid:!1,connection:_Ee,endHandle:null});function tj(t,e,n,r,s,a,i){const o=s==="target",l=i.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),A={...ej(),handleDomNode:l};if(l){const d=e4(void 0,l),h=l.getAttribute("data-nodeid"),p=l.getAttribute("data-handleid"),g=l.classList.contains("connectable"),w=l.classList.contains("connectableend"),b={source:o?h:n,sourceHandle:o?p:r,target:o?n:h,targetHandle:o?r:p};A.connection=b,g&&w&&(e===lh.Strict?o&&d==="source"||!o&&d==="target":h!==n||p!==r)&&(A.endHandle={nodeId:h,handleId:p,type:d},A.isValid=a(b))}return A}function SEe({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((s,a)=>{if(a[Fs]){const{handleBounds:i}=a[Fs];let o=[],l=[];i&&(o=rR(a,i,"source",`${e}-${n}-${r}`),l=rR(a,i,"target",`${e}-${n}-${r}`)),s.push(...o,...l)}return s},[])}function e4(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function qC(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function TEe(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function nj({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:s,getState:a,setState:i,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:A}){const d=V7(t.target),{connectionMode:h,domNode:p,autoPanOnConnect:g,connectionRadius:w,onConnectStart:b,panBy:E,getNodes:B,cancelConnection:I}=a();let k=0,F;const{x:D,y:P}=Ld(t),S=d==null?void 0:d.elementFromPoint(D,P),N=e4(l,S),T=p==null?void 0:p.getBoundingClientRect();if(!T||!N)return;let V,M=Ld(t,T),U=!1,O=null,G=!1,ie=null;const K=SEe({nodes:B(),nodeId:n,handleId:e,handleType:N}),q=()=>{if(!g)return;const[X,de]=H7(M,T);E({x:X,y:de}),k=requestAnimationFrame(q)};i({connectionPosition:M,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:N,connectionStartHandle:{nodeId:n,handleId:e,type:N},connectionEndHandle:null}),b==null||b(t,{nodeId:n,handleId:e,handleType:N});function se(X){const{transform:de}=a();M=Ld(X,T);const{handle:j,validHandleResult:W}=EEe(X,d,W_(M,de,!1,[1,1]),w,K,J=>tj(J,h,n,e,s?"target":"source",o,d));if(F=j,U||(q(),U=!0),ie=W.handleDomNode,O=W.connection,G=W.isValid,i({connectionPosition:F&&G?Y7({x:F.x,y:F.y},de):M,connectionStatus:TEe(!!F,G),connectionEndHandle:W.endHandle}),!F&&!G&&!ie)return qC(V);O.source!==O.target&&ie&&(qC(V),V=ie,ie.classList.add("connecting","react-flow__handle-connecting"),ie.classList.toggle("valid",G),ie.classList.toggle("react-flow__handle-valid",G))}function Z(X){var de,j;(F||ie)&&O&&G&&(r==null||r(O)),(j=(de=a()).onConnectEnd)==null||j.call(de,X),l&&(A==null||A(X)),qC(V),I(),cancelAnimationFrame(k),U=!1,G=!1,O=null,ie=null,d.removeEventListener("mousemove",se),d.removeEventListener("mouseup",Z),d.removeEventListener("touchmove",se),d.removeEventListener("touchend",Z)}d.addEventListener("mousemove",se),d.addEventListener("mouseup",Z),d.addEventListener("touchmove",se),d.addEventListener("touchend",Z)}const sR=()=>!0,BEe=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),NEe=(t,e,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:a,connectionClickStartHandle:i}=r;return{connecting:(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===n||(a==null?void 0:a.nodeId)===t&&(a==null?void 0:a.handleId)===e&&(a==null?void 0:a.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===n}},rj=ee.forwardRef(({type:t="source",position:e=an.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:i,onConnect:o,children:l,className:A,onMouseDown:d,onTouchStart:h,...p},g)=>{var T,V;const w=i||null,b=t==="target",E=Ha(),B=vEe(),{connectOnClick:I,noPanClassName:k}=ws(BEe,Di),{connecting:F,clickConnecting:D}=ws(NEe(B,w,t),Di);B||(V=(T=E.getState()).onError)==null||V.call(T,"010",pu.error010());const P=M=>{const{defaultEdgeOptions:U,onConnect:O,hasDefaultEdges:G}=E.getState(),ie={...U,...M};if(G){const{edges:K,setEdges:q}=E.getState();q(CEe(ie,K))}O==null||O(ie),o==null||o(ie)},S=M=>{if(!B)return;const U=z7(M);s&&(U&&M.button===0||!U)&&nj({event:M,handleId:w,nodeId:B,onConnect:P,isTarget:b,getState:E.getState,setState:E.setState,isValidConnection:n||E.getState().isValidConnection||sR}),U?d==null||d(M):h==null||h(M)},N=M=>{const{onClickConnectStart:U,onClickConnectEnd:O,connectionClickStartHandle:G,connectionMode:ie,isValidConnection:K}=E.getState();if(!B||!G&&!s)return;if(!G){U==null||U(M,{nodeId:B,handleId:w,handleType:t}),E.setState({connectionClickStartHandle:{nodeId:B,type:t,handleId:w}});return}const q=V7(M.target),se=n||K||sR,{connection:Z,isValid:X}=tj({nodeId:B,id:w,type:t},ie,G.nodeId,G.handleId||null,G.type,se,q);X&&P(Z),O==null||O(M),E.setState({connectionClickStartHandle:null})};return ut.createElement("div",{"data-handleid":w,"data-nodeid":B,"data-handlepos":e,"data-id":`${B}-${w}-${t}`,className:Ki(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",k,A,{source:!b,target:b,connectable:r,connectablestart:s,connectableend:a,connecting:D,connectionindicator:r&&(s&&!F||a&&F)}]),onMouseDown:S,onTouchStart:S,onClick:I?N:void 0,ref:g,...p},l)});rj.displayName="Handle";var ny=ee.memo(rj);const sj=({data:t,isConnectable:e,targetPosition:n=an.Top,sourcePosition:r=an.Bottom})=>ut.createElement(ut.Fragment,null,ut.createElement(ny,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,ut.createElement(ny,{type:"source",position:r,isConnectable:e}));sj.displayName="DefaultNode";var $_=ee.memo(sj);const aj=({data:t,isConnectable:e,sourcePosition:n=an.Bottom})=>ut.createElement(ut.Fragment,null,t==null?void 0:t.label,ut.createElement(ny,{type:"source",position:n,isConnectable:e}));aj.displayName="InputNode";var ij=ee.memo(aj);const oj=({data:t,isConnectable:e,targetPosition:n=an.Top})=>ut.createElement(ut.Fragment,null,ut.createElement(ny,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);oj.displayName="OutputNode";var lj=ee.memo(oj);const t4=()=>null;t4.displayName="GroupNode";const kEe=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),Ev=t=>t.id;function IEe(t,e){return Di(t.selectedNodes.map(Ev),e.selectedNodes.map(Ev))&&Di(t.selectedEdges.map(Ev),e.selectedEdges.map(Ev))}const cj=ee.memo(({onSelectionChange:t})=>{const e=Ha(),{selectedNodes:n,selectedEdges:r}=ws(kEe,IEe);return ee.useEffect(()=>{const s={nodes:n,edges:r};t==null||t(s),e.getState().onSelectionChange.forEach(a=>a(s))},[n,r,t]),null});cj.displayName="SelectionListener";const FEe=t=>!!t.onSelectionChange;function REe({onSelectionChange:t}){const e=ws(FEe);return t||e?ut.createElement(cj,{onSelectionChange:t}):null}const DEe=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function o0(t,e){ee.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function $n(t,e,n){ee.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const UEe=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:a,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:A,nodesConnectable:d,nodesFocusable:h,edgesFocusable:p,edgesUpdatable:g,elevateNodesOnSelect:w,minZoom:b,maxZoom:E,nodeExtent:B,onNodesChange:I,onEdgesChange:k,elementsSelectable:F,connectionMode:D,snapGrid:P,snapToGrid:S,translateExtent:N,connectOnClick:T,defaultEdgeOptions:V,fitView:M,fitViewOptions:U,onNodesDelete:O,onEdgesDelete:G,onNodeDrag:ie,onNodeDragStart:K,onNodeDragStop:q,onSelectionDrag:se,onSelectionDragStart:Z,onSelectionDragStop:X,noPanClassName:de,nodeOrigin:j,rfId:W,autoPanOnConnect:J,autoPanOnNodeDrag:ne,onError:oe,connectionRadius:ue,isValidConnection:me,nodeDragThreshold:ge})=>{const{setNodes:ke,setEdges:ve,setDefaultNodesAndEdges:ae,setMinZoom:Re,setMaxZoom:Je,setTranslateExtent:De,setNodeExtent:Ee,reset:Ge}=ws(DEe,Di),tt=Ha();return ee.useEffect(()=>{const it=r==null?void 0:r.map(mt=>({...mt,...V}));return ae(n,it),()=>{Ge()}},[]),$n("defaultEdgeOptions",V,tt.setState),$n("connectionMode",D,tt.setState),$n("onConnect",s,tt.setState),$n("onConnectStart",a,tt.setState),$n("onConnectEnd",i,tt.setState),$n("onClickConnectStart",o,tt.setState),$n("onClickConnectEnd",l,tt.setState),$n("nodesDraggable",A,tt.setState),$n("nodesConnectable",d,tt.setState),$n("nodesFocusable",h,tt.setState),$n("edgesFocusable",p,tt.setState),$n("edgesUpdatable",g,tt.setState),$n("elementsSelectable",F,tt.setState),$n("elevateNodesOnSelect",w,tt.setState),$n("snapToGrid",S,tt.setState),$n("snapGrid",P,tt.setState),$n("onNodesChange",I,tt.setState),$n("onEdgesChange",k,tt.setState),$n("connectOnClick",T,tt.setState),$n("fitViewOnInit",M,tt.setState),$n("fitViewOnInitOptions",U,tt.setState),$n("onNodesDelete",O,tt.setState),$n("onEdgesDelete",G,tt.setState),$n("onNodeDrag",ie,tt.setState),$n("onNodeDragStart",K,tt.setState),$n("onNodeDragStop",q,tt.setState),$n("onSelectionDrag",se,tt.setState),$n("onSelectionDragStart",Z,tt.setState),$n("onSelectionDragStop",X,tt.setState),$n("noPanClassName",de,tt.setState),$n("nodeOrigin",j,tt.setState),$n("rfId",W,tt.setState),$n("autoPanOnConnect",J,tt.setState),$n("autoPanOnNodeDrag",ne,tt.setState),$n("onError",oe,tt.setState),$n("connectionRadius",ue,tt.setState),$n("isValidConnection",me,tt.setState),$n("nodeDragThreshold",ge,tt.setState),o0(t,ke),o0(e,ve),o0(b,Re),o0(E,Je),o0(N,De),o0(B,Ee),null},aR={display:"none"},LEe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Aj="react-flow__node-desc",uj="react-flow__edge-desc",MEe="react-flow__aria-live",PEe=t=>t.ariaLiveMessage;function jEe({rfId:t}){const e=ws(PEe);return ut.createElement("div",{id:`${MEe}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:LEe},e)}function OEe({rfId:t,disableKeyboardA11y:e}){return ut.createElement(ut.Fragment,null,ut.createElement("div",{id:`${Aj}-${t}`,style:aR},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ut.createElement("div",{id:`${uj}-${t}`,style:aR},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&ut.createElement(jEe,{rfId:t}))}var Xg=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=ee.useState(!1),s=ee.useRef(!1),a=ee.useRef(new Set([])),[i,o]=ee.useMemo(()=>{if(t!==null){const A=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.split("+")),d=A.reduce((h,p)=>h.concat(...p),[]);return[A,d]}return[[],[]]},[t]);return ee.useEffect(()=>{const l=typeof document<"u"?document:null,A=(e==null?void 0:e.target)||l;if(t!==null){const d=g=>{if(s.current=g.ctrlKey||g.metaKey||g.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&z_(g))return!1;const b=oR(g.code,o);a.current.add(g[b]),iR(i,a.current,!1)&&(g.preventDefault(),r(!0))},h=g=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&z_(g))return!1;const b=oR(g.code,o);iR(i,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(g[b]),g.key==="Meta"&&a.current.clear(),s.current=!1},p=()=>{a.current.clear(),r(!1)};return A==null||A.addEventListener("keydown",d),A==null||A.addEventListener("keyup",h),window.addEventListener("blur",p),()=>{A==null||A.removeEventListener("keydown",d),A==null||A.removeEventListener("keyup",h),window.removeEventListener("blur",p)}}},[t,r]),n};function iR(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(s=>e.has(s)))}function oR(t,e){return e.includes(t)?"code":"key"}function dj(t,e,n,r){var o,l;const s=t.parentNode||t.parentId;if(!s)return n;const a=e.get(s),i=$0(a,r);return dj(a,e,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((o=a[Fs])==null?void 0:o.z)??0)>(n.z??0)?((l=a[Fs])==null?void 0:l.z)??0:n.z??0},r)}function fj(t,e,n){t.forEach(r=>{var a;const s=r.parentNode||r.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n!=null&&n[r.id]){const{x:i,y:o,z:l}=dj(r,t,{...r.position,z:((a=r[Fs])==null?void 0:a.z)??0},e);r.positionAbsolute={x:i,y:o},r[Fs].z=l,n!=null&&n[r.id]&&(r[Fs].isParent=!0)}})}function WC(t,e,n,r){const s=new Map,a={},i=r?1e3:0;return t.forEach(o=>{var g;const l=(_l(o.zIndex)?o.zIndex:0)+(o.selected?i:0),A=e.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},h=o.parentNode||o.parentId;h&&(a[h]=!0);const p=(A==null?void 0:A.type)&&(A==null?void 0:A.type)!==o.type;Object.defineProperty(d,Fs,{enumerable:!1,value:{handleBounds:p||(g=A==null?void 0:A[Fs])==null?void 0:g.handleBounds,z:l}}),s.set(o.id,d)}),fj(s,n,a),s}function hj(t,e={}){const{getNodes:n,width:r,height:s,minZoom:a,maxZoom:i,d3Zoom:o,d3Selection:l,fitViewOnInitDone:A,fitViewOnInit:d,nodeOrigin:h}=t(),p=e.initial&&!A&&d;if(o&&l&&(p||!e.initial)){const w=n().filter(E=>{var I;const B=e.includeHiddenNodes?E.width&&E.height:!E.hidden;return(I=e.nodes)!=null&&I.length?B&&e.nodes.some(k=>k.id===E.id):B}),b=w.every(E=>E.width&&E.height);if(w.length>0&&b){const E=ZS(w,h),{x:B,y:I,zoom:k}=Z7(E,r,s,e.minZoom??a,e.maxZoom??i,e.padding??.1),F=Ud.translate(B,I).scale(k);return typeof e.duration=="number"&&e.duration>0?o.transform(Bf(l,e.duration),F):o.transform(l,F),!0}}return!1}function QEe(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[Fs]:r[Fs],selected:n.selected})}),new Map(e)}function HEe(t,e){return e.map(n=>{const r=t.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function _v({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:s,edges:a,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:A}=n();t!=null&&t.length&&(l&&r({nodeInternals:QEe(t,s)}),i==null||i(t)),e!=null&&e.length&&(A&&r({edges:HEe(e,a)}),o==null||o(e))}const l0=()=>{},VEe={zoomIn:l0,zoomOut:l0,zoomTo:l0,getZoom:()=>1,setViewport:l0,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:l0,fitBounds:l0,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},GEe=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),zEe=()=>{const t=Ha(),{d3Zoom:e,d3Selection:n}=ws(GEe,Di);return ee.useMemo(()=>n&&e?{zoomIn:s=>e.scaleBy(Bf(n,s==null?void 0:s.duration),1.2),zoomOut:s=>e.scaleBy(Bf(n,s==null?void 0:s.duration),1/1.2),zoomTo:(s,a)=>e.scaleTo(Bf(n,a==null?void 0:a.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,a)=>{const[i,o,l]=t.getState().transform,A=Ud.translate(s.x??i,s.y??o).scale(s.zoom??l);e.transform(Bf(n,a==null?void 0:a.duration),A)},getViewport:()=>{const[s,a,i]=t.getState().transform;return{x:s,y:a,zoom:i}},fitView:s=>hj(t.getState,s),setCenter:(s,a,i)=>{const{width:o,height:l,maxZoom:A}=t.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:A,h=o/2-s*d,p=l/2-a*d,g=Ud.translate(h,p).scale(d);e.transform(Bf(n,i==null?void 0:i.duration),g)},fitBounds:(s,a)=>{const{width:i,height:o,minZoom:l,maxZoom:A}=t.getState(),{x:d,y:h,zoom:p}=Z7(s,i,o,l,A,(a==null?void 0:a.padding)??.1),g=Ud.translate(d,h).scale(p);e.transform(Bf(n,a==null?void 0:a.duration),g)},project:s=>{const{transform:a,snapToGrid:i,snapGrid:o}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),W_(s,a,i,o)},screenToFlowPosition:s=>{const{transform:a,snapToGrid:i,snapGrid:o,domNode:l}=t.getState();if(!l)return s;const{x:A,y:d}=l.getBoundingClientRect(),h={x:s.x-A,y:s.y-d};return W_(h,a,i,o)},flowToScreenPosition:s=>{const{transform:a,domNode:i}=t.getState();if(!i)return s;const{x:o,y:l}=i.getBoundingClientRect(),A=Y7(s,a);return{x:A.x+o,y:A.y+l}},viewportInitialized:!0}:VEe,[e,n])};function ew(){const t=zEe(),e=Ha(),n=ee.useCallback(()=>e.getState().getNodes().map(b=>({...b})),[]),r=ee.useCallback(b=>e.getState().nodeInternals.get(b),[]),s=ee.useCallback(()=>{const{edges:b=[]}=e.getState();return b.map(E=>({...E}))},[]),a=ee.useCallback(b=>{const{edges:E=[]}=e.getState();return E.find(B=>B.id===b)},[]),i=ee.useCallback(b=>{const{getNodes:E,setNodes:B,hasDefaultNodes:I,onNodesChange:k}=e.getState(),F=E(),D=typeof b=="function"?b(F):b;if(I)B(D);else if(k){const P=D.length===0?F.map(S=>({type:"remove",id:S.id})):D.map(S=>({item:S,type:"reset"}));k(P)}},[]),o=ee.useCallback(b=>{const{edges:E=[],setEdges:B,hasDefaultEdges:I,onEdgesChange:k}=e.getState(),F=typeof b=="function"?b(E):b;if(I)B(F);else if(k){const D=F.length===0?E.map(P=>({type:"remove",id:P.id})):F.map(P=>({item:P,type:"reset"}));k(D)}},[]),l=ee.useCallback(b=>{const E=Array.isArray(b)?b:[b],{getNodes:B,setNodes:I,hasDefaultNodes:k,onNodesChange:F}=e.getState();if(k){const P=[...B(),...E];I(P)}else if(F){const D=E.map(P=>({item:P,type:"add"}));F(D)}},[]),A=ee.useCallback(b=>{const E=Array.isArray(b)?b:[b],{edges:B=[],setEdges:I,hasDefaultEdges:k,onEdgesChange:F}=e.getState();if(k)I([...B,...E]);else if(F){const D=E.map(P=>({item:P,type:"add"}));F(D)}},[]),d=ee.useCallback(()=>{const{getNodes:b,edges:E=[],transform:B}=e.getState(),[I,k,F]=B;return{nodes:b().map(D=>({...D})),edges:E.map(D=>({...D})),viewport:{x:I,y:k,zoom:F}}},[]),h=ee.useCallback(({nodes:b,edges:E})=>{const{nodeInternals:B,getNodes:I,edges:k,hasDefaultNodes:F,hasDefaultEdges:D,onNodesDelete:P,onEdgesDelete:S,onNodesChange:N,onEdgesChange:T}=e.getState(),V=(b||[]).map(ie=>ie.id),M=(E||[]).map(ie=>ie.id),U=I().reduce((ie,K)=>{const q=K.parentNode||K.parentId,se=!V.includes(K.id)&&q&&ie.find(X=>X.id===q);return(typeof K.deletable=="boolean"?K.deletable:!0)&&(V.includes(K.id)||se)&&ie.push(K),ie},[]),O=k.filter(ie=>typeof ie.deletable=="boolean"?ie.deletable:!0),G=O.filter(ie=>M.includes(ie.id));if(U||G){const ie=X7(U,O),K=[...G,...ie],q=K.reduce((se,Z)=>(se.includes(Z.id)||se.push(Z.id),se),[]);if((D||F)&&(D&&e.setState({edges:k.filter(se=>!q.includes(se.id))}),F&&(U.forEach(se=>{B.delete(se.id)}),e.setState({nodeInternals:new Map(B)}))),q.length>0&&(S==null||S(K),T&&T(q.map(se=>({id:se,type:"remove"})))),U.length>0&&(P==null||P(U),N)){const se=U.map(Z=>({id:Z.id,type:"remove"}));N(se)}}},[]),p=ee.useCallback(b=>{const E=uEe(b),B=E?null:e.getState().nodeInternals.get(b.id);return!E&&!B?[null,null,E]:[E?b:X6(B),B,E]},[]),g=ee.useCallback((b,E=!0,B)=>{const[I,k,F]=p(b);return I?(B||e.getState().getNodes()).filter(D=>{if(!F&&(D.id===k.id||!D.positionAbsolute))return!1;const P=X6(D),S=G_(P,I);return E&&S>0||S>=I.width*I.height}):[]},[]),w=ee.useCallback((b,E,B=!0)=>{const[I]=p(b);if(!I)return!1;const k=G_(I,E);return B&&k>0||k>=I.width*I.height},[]);return ee.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:s,getEdge:a,setNodes:i,setEdges:o,addNodes:l,addEdges:A,toObject:d,deleteElements:h,getIntersectingNodes:g,isNodeIntersecting:w}),[t,n,r,s,a,i,o,l,A,d,h,g,w])}const KEe={actInsideInputWithModifier:!1};var qEe=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=Ha(),{deleteElements:r}=ew(),s=Xg(t,KEe),a=Xg(e);ee.useEffect(()=>{if(s){const{edges:i,getNodes:o}=n.getState(),l=o().filter(d=>d.selected),A=i.filter(d=>d.selected);r({nodes:l,edges:A}),n.setState({nodesSelectionActive:!1})}},[s]),ee.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])};function WEe(t){const e=Ha();ee.useEffect(()=>{let n;const r=()=>{var a,i;if(!t.current)return;const s=KS(t.current);(s.height===0||s.width===0)&&((i=(a=e.getState()).onError)==null||i.call(a,"004",pu.error004())),e.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const n4={position:"absolute",width:"100%",height:"100%",top:0,left:0},$Ee=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Sv=t=>({x:t.x,y:t.y,zoom:t.k}),c0=(t,e)=>t.target.closest(`.${e}`),lR=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),cR=t=>{const e=t.ctrlKey&&Z2()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},YEe=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),JEe=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:a=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=Mf.Free,zoomOnDoubleClick:A=!0,elementsSelectable:d,panOnDrag:h=!0,defaultViewport:p,translateExtent:g,minZoom:w,maxZoom:b,zoomActivationKeyCode:E,preventScrolling:B=!0,children:I,noWheelClassName:k,noPanClassName:F})=>{const D=ee.useRef(),P=Ha(),S=ee.useRef(!1),N=ee.useRef(!1),T=ee.useRef(null),V=ee.useRef({x:0,y:0,zoom:0}),{d3Zoom:M,d3Selection:U,d3ZoomHandler:O,userSelectionActive:G}=ws(YEe,Di),ie=Xg(E),K=ee.useRef(0),q=ee.useRef(!1),se=ee.useRef();return WEe(T),ee.useEffect(()=>{if(T.current){const Z=T.current.getBoundingClientRect(),X=rEe().scaleExtent([w,b]).translateExtent(g),de=ic(T.current).call(X),j=Ud.translate(p.x,p.y).scale(dm(p.zoom,w,b)),W=[[0,0],[Z.width,Z.height]],J=X.constrain()(j,W,g);X.transform(de,J),X.wheelDelta(cR),P.setState({d3Zoom:X,d3Selection:de,d3ZoomHandler:de.on("wheel.zoom"),transform:[J.x,J.y,J.k],domNode:T.current.closest(".react-flow")})}},[]),ee.useEffect(()=>{U&&M&&(i&&!ie&&!G?U.on("wheel.zoom",Z=>{if(c0(Z,k))return!1;Z.preventDefault(),Z.stopImmediatePropagation();const X=U.property("__zoom").k||1;if(Z.ctrlKey&&a){const me=nA(Z),ge=cR(Z),ke=X*Math.pow(2,ge);M.scaleTo(U,ke,me,Z);return}const de=Z.deltaMode===1?20:1;let j=l===Mf.Vertical?0:Z.deltaX*de,W=l===Mf.Horizontal?0:Z.deltaY*de;!Z2()&&Z.shiftKey&&l!==Mf.Vertical&&(j=Z.deltaY*de,W=0),M.translateBy(U,-(j/X)*o,-(W/X)*o,{internal:!0});const J=Sv(U.property("__zoom")),{onViewportChangeStart:ne,onViewportChange:oe,onViewportChangeEnd:ue}=P.getState();clearTimeout(se.current),q.current||(q.current=!0,e==null||e(Z,J),ne==null||ne(J)),q.current&&(t==null||t(Z,J),oe==null||oe(J),se.current=setTimeout(()=>{n==null||n(Z,J),ue==null||ue(J),q.current=!1},150))},{passive:!1}):typeof O<"u"&&U.on("wheel.zoom",function(Z,X){if(!B&&Z.type==="wheel"&&!Z.ctrlKey||c0(Z,k))return null;Z.preventDefault(),O.call(this,Z,X)},{passive:!1}))},[G,i,l,U,M,O,ie,a,B,k,e,t,n]),ee.useEffect(()=>{M&&M.on("start",Z=>{var j,W;if(!Z.sourceEvent||Z.sourceEvent.internal)return null;K.current=(j=Z.sourceEvent)==null?void 0:j.button;const{onViewportChangeStart:X}=P.getState(),de=Sv(Z.transform);S.current=!0,V.current=de,((W=Z.sourceEvent)==null?void 0:W.type)==="mousedown"&&P.setState({paneDragging:!0}),X==null||X(de),e==null||e(Z.sourceEvent,de)})},[M,e]),ee.useEffect(()=>{M&&(G&&!S.current?M.on("zoom",null):G||M.on("zoom",Z=>{var de;const{onViewportChange:X}=P.getState();if(P.setState({transform:[Z.transform.x,Z.transform.y,Z.transform.k]}),N.current=!!(r&&lR(h,K.current??0)),(t||X)&&!((de=Z.sourceEvent)!=null&&de.internal)){const j=Sv(Z.transform);X==null||X(j),t==null||t(Z.sourceEvent,j)}}))},[G,M,t,h,r]),ee.useEffect(()=>{M&&M.on("end",Z=>{if(!Z.sourceEvent||Z.sourceEvent.internal)return null;const{onViewportChangeEnd:X}=P.getState();if(S.current=!1,P.setState({paneDragging:!1}),r&&lR(h,K.current??0)&&!N.current&&r(Z.sourceEvent),N.current=!1,(n||X)&&$Ee(V.current,Z.transform)){const de=Sv(Z.transform);V.current=de,clearTimeout(D.current),D.current=setTimeout(()=>{X==null||X(de),n==null||n(Z.sourceEvent,de)},i?150:0)}})},[M,i,h,n,r]),ee.useEffect(()=>{M&&M.filter(Z=>{const X=ie||s,de=a&&Z.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&Z.button===1&&Z.type==="mousedown"&&(c0(Z,"react-flow__node")||c0(Z,"react-flow__edge")))return!0;if(!h&&!X&&!i&&!A&&!a||G||!A&&Z.type==="dblclick"||c0(Z,k)&&Z.type==="wheel"||c0(Z,F)&&(Z.type!=="wheel"||i&&Z.type==="wheel"&&!ie)||!a&&Z.ctrlKey&&Z.type==="wheel"||!X&&!i&&!de&&Z.type==="wheel"||!h&&(Z.type==="mousedown"||Z.type==="touchstart")||Array.isArray(h)&&!h.includes(Z.button)&&Z.type==="mousedown")return!1;const j=Array.isArray(h)&&h.includes(Z.button)||!Z.button||Z.button<=1;return(!Z.ctrlKey||Z.type==="wheel")&&j})},[G,M,s,a,i,A,h,d,ie]),ut.createElement("div",{className:"react-flow__renderer",ref:T,style:n4},I)},XEe=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function ZEe(){const{userSelectionActive:t,userSelectionRect:e}=ws(XEe,Di);return t&&e?ut.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function AR(t,e){const n=e.parentNode||e.parentId,r=t.find(s=>s.id===n);if(r){const s=e.position.x+e.width-r.width,a=e.position.y+e.height-r.height;if(s>0||a>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),a>0&&(r.style.height+=a),e.position.x<0){const i=Math.abs(e.position.x);r.position.x=r.position.x-i,r.style.width+=i,e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);r.position.y=r.position.y-i,r.style.height+=i,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function mj(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,s)=>{const a=t.filter(o=>o.id===s.id);if(a.length===0)return r.push(s),r;const i={...s};for(const o of a)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&AR(r,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&AR(r,i);break}case"remove":return r}return r.push(i),r},n)}function pj(t,e){return mj(t,e)}function e_e(t,e){return mj(t,e)}const dd=(t,e)=>({id:t,type:"select",selected:e});function B0(t,e){return t.reduce((n,r)=>{const s=e.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(dd(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(dd(r.id,!1))),n},[])}const $C=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},t_e=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),gj=ee.memo(({isSelecting:t,selectionMode:e=Jg.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:A,onPaneMouseLeave:d,children:h})=>{const p=ee.useRef(null),g=Ha(),w=ee.useRef(0),b=ee.useRef(0),E=ee.useRef(),{userSelectionActive:B,elementsSelectable:I,dragging:k}=ws(t_e,Di),F=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),w.current=0,b.current=0},D=O=>{a==null||a(O),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},P=O=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){O.preventDefault();return}i==null||i(O)},S=o?O=>o(O):void 0,N=O=>{const{resetSelectedElements:G,domNode:ie}=g.getState();if(E.current=ie==null?void 0:ie.getBoundingClientRect(),!I||!t||O.button!==0||O.target!==p.current||!E.current)return;const{x:K,y:q}=Ld(O,E.current);G(),g.setState({userSelectionRect:{width:0,height:0,startX:K,startY:q,x:K,y:q}}),r==null||r(O)},T=O=>{const{userSelectionRect:G,nodeInternals:ie,edges:K,transform:q,onNodesChange:se,onEdgesChange:Z,nodeOrigin:X,getNodes:de}=g.getState();if(!t||!E.current||!G)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const j=Ld(O,E.current),W=G.startX??0,J=G.startY??0,ne={...G,x:j.x<W?j.x:W,y:j.y<J?j.y:J,width:Math.abs(j.x-W),height:Math.abs(j.y-J)},oe=de(),ue=J7(ie,ne,q,e===Jg.Partial,!0,X),me=X7(ue,K).map(ke=>ke.id),ge=ue.map(ke=>ke.id);if(w.current!==ge.length){w.current=ge.length;const ke=B0(oe,ge);ke.length&&(se==null||se(ke))}if(b.current!==me.length){b.current=me.length;const ke=B0(K,me);ke.length&&(Z==null||Z(ke))}g.setState({userSelectionRect:ne})},V=O=>{if(O.button!==0)return;const{userSelectionRect:G}=g.getState();!B&&G&&O.target===p.current&&(D==null||D(O)),g.setState({nodesSelectionActive:w.current>0}),F(),s==null||s(O)},M=O=>{B&&(g.setState({nodesSelectionActive:w.current>0}),s==null||s(O)),F()},U=I&&(t||B);return ut.createElement("div",{className:Ki(["react-flow__pane",{dragging:k,selection:t}]),onClick:U?void 0:$C(D,p),onContextMenu:$C(P,p),onWheel:$C(S,p),onMouseEnter:U?void 0:l,onMouseDown:U?N:void 0,onMouseMove:U?T:A,onMouseUp:U?V:void 0,onMouseLeave:U?M:d,ref:p,style:n4},h,ut.createElement(ZEe,null))});gj.displayName="Pane";function xj(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:xj(r,e):!1}function uR(t,e,n){let r=t;do{if(r!=null&&r.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function n_e(t,e,n,r){return Array.from(t.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!xj(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>{var a,i;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((a=s.positionAbsolute)==null?void 0:a.x)??0),y:n.y-(((i=s.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function r_e(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function vj(t,e,n,r,s=[0,0],a){const i=r_e(t,t.extent||r);let o=i;const l=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(l&&t.width&&t.height){const h=n.get(l),{x:p,y:g}=$0(h,s).positionAbsolute;o=h&&_l(p)&&_l(g)&&_l(h.width)&&_l(h.height)?[[p+t.width*s[0],g+t.height*s[1]],[p+h.width-t.width+t.width*s[0],g+h.height-t.height+t.height*s[1]]]:o}else a==null||a("005",pu.error005()),o=i;else if(t.extent&&l&&t.extent!=="parent"){const h=n.get(l),{x:p,y:g}=$0(h,s).positionAbsolute;o=[[t.extent[0][0]+p,t.extent[0][1]+g],[t.extent[1][0]+p,t.extent[1][1]+g]]}let A={x:0,y:0};if(l){const h=n.get(l);A=$0(h,s).positionAbsolute}const d=o&&o!=="parent"?qS(e,o):e;return{position:{x:d.x-A.x,y:d.y-A.y},positionAbsolute:d}}function YC({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?r.find(s=>s.id===t):r[0],r]}const dR=(t,e,n,r)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const a=Array.from(s),i=e.getBoundingClientRect(),o={x:i.width*r[0],y:i.height*r[1]};return a.map(l=>{const A=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(A.left-i.left-o.x)/n,y:(A.top-i.top-o.y)/n,...KS(l)}})};function Tp(t,e,n){return n===void 0?n:r=>{const s=e().nodeInternals.get(t);s&&n(r,{...s})}}function Y_({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:a,multiSelectionActive:i,nodeInternals:o,onError:l}=e.getState(),A=o.get(t);if(!A){l==null||l("012",pu.error012(t));return}e.setState({nodesSelectionActive:!1}),A.selected?(n||A.selected&&i)&&(a({nodes:[A],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):s([t])}function s_e(){const t=Ha();return ee.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:a}=t.getState(),i=n.touches?n.touches[0].clientX:n.clientX,o=n.touches?n.touches[0].clientY:n.clientY,l={x:(i-r[0])/r[2],y:(o-r[1])/r[2]};return{xSnapped:a?s[0]*Math.round(l.x/s[0]):l.x,ySnapped:a?s[1]*Math.round(l.y/s[1]):l.y,...l}},[])}function JC(t){return(e,n,r)=>t==null?void 0:t(e,r)}function yj({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:a,selectNodesOnDrag:i}){const o=Ha(),[l,A]=ee.useState(!1),d=ee.useRef([]),h=ee.useRef({x:null,y:null}),p=ee.useRef(0),g=ee.useRef(null),w=ee.useRef({x:0,y:0}),b=ee.useRef(null),E=ee.useRef(!1),B=ee.useRef(!1),I=ee.useRef(!1),k=s_e();return ee.useEffect(()=>{if(t!=null&&t.current){const F=ic(t.current),D=({x:N,y:T})=>{const{nodeInternals:V,onNodeDrag:M,onSelectionDrag:U,updateNodePositions:O,nodeExtent:G,snapGrid:ie,snapToGrid:K,nodeOrigin:q,onError:se}=o.getState();h.current={x:N,y:T};let Z=!1,X={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&G){const j=ZS(d.current,q);X=WS(j)}if(d.current=d.current.map(j=>{const W={x:N-j.distance.x,y:T-j.distance.y};K&&(W.x=ie[0]*Math.round(W.x/ie[0]),W.y=ie[1]*Math.round(W.y/ie[1]));const J=[[G[0][0],G[0][1]],[G[1][0],G[1][1]]];d.current.length>1&&G&&!j.extent&&(J[0][0]=j.positionAbsolute.x-X.x+G[0][0],J[1][0]=j.positionAbsolute.x+(j.width??0)-X.x2+G[1][0],J[0][1]=j.positionAbsolute.y-X.y+G[0][1],J[1][1]=j.positionAbsolute.y+(j.height??0)-X.y2+G[1][1]);const ne=vj(j,W,V,J,q,se);return Z=Z||j.position.x!==ne.position.x||j.position.y!==ne.position.y,j.position=ne.position,j.positionAbsolute=ne.positionAbsolute,j}),!Z)return;O(d.current,!0,!0),A(!0);const de=s?M:JC(U);if(de&&b.current){const[j,W]=YC({nodeId:s,dragItems:d.current,nodeInternals:V});de(b.current,j,W)}},P=()=>{if(!g.current)return;const[N,T]=H7(w.current,g.current);if(N!==0||T!==0){const{transform:V,panBy:M}=o.getState();h.current.x=(h.current.x??0)-N/V[2],h.current.y=(h.current.y??0)-T/V[2],M({x:N,y:T})&&D(h.current)}p.current=requestAnimationFrame(P)},S=N=>{var q;const{nodeInternals:T,multiSelectionActive:V,nodesDraggable:M,unselectNodesAndEdges:U,onNodeDragStart:O,onSelectionDragStart:G}=o.getState();B.current=!0;const ie=s?O:JC(G);(!i||!a)&&!V&&s&&((q=T.get(s))!=null&&q.selected||U()),s&&a&&i&&Y_({id:s,store:o,nodeRef:t});const K=k(N);if(h.current=K,d.current=n_e(T,M,K,s),ie&&d.current){const[se,Z]=YC({nodeId:s,dragItems:d.current,nodeInternals:T});ie(N.sourceEvent,se,Z)}};if(e)F.on(".drag",null);else{const N=fbe().on("start",T=>{const{domNode:V,nodeDragThreshold:M}=o.getState();M===0&&S(T),I.current=!1;const U=k(T);h.current=U,g.current=(V==null?void 0:V.getBoundingClientRect())||null,w.current=Ld(T.sourceEvent,g.current)}).on("drag",T=>{var O,G;const V=k(T),{autoPanOnNodeDrag:M,nodeDragThreshold:U}=o.getState();if(T.sourceEvent.type==="touchmove"&&T.sourceEvent.touches.length>1&&(I.current=!0),!I.current){if(!E.current&&B.current&&M&&(E.current=!0,P()),!B.current){const ie=V.xSnapped-(((O=h==null?void 0:h.current)==null?void 0:O.x)??0),K=V.ySnapped-(((G=h==null?void 0:h.current)==null?void 0:G.y)??0);Math.sqrt(ie*ie+K*K)>U&&S(T)}(h.current.x!==V.xSnapped||h.current.y!==V.ySnapped)&&d.current&&B.current&&(b.current=T.sourceEvent,w.current=Ld(T.sourceEvent,g.current),D(V))}}).on("end",T=>{if(!(!B.current||I.current)&&(A(!1),E.current=!1,B.current=!1,cancelAnimationFrame(p.current),d.current)){const{updateNodePositions:V,nodeInternals:M,onNodeDragStop:U,onSelectionDragStop:O}=o.getState(),G=s?U:JC(O);if(V(d.current,!1,!1),G){const[ie,K]=YC({nodeId:s,dragItems:d.current,nodeInternals:M});G(T.sourceEvent,ie,K)}}}).filter(T=>{const V=T.target;return!T.button&&(!n||!uR(V,`.${n}`,t))&&(!r||uR(V,r,t))});return F.call(N),()=>{F.on(".drag",null)}}}},[t,e,n,r,a,o,s,i,k]),l}function wj(){const t=Ha();return ee.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:a,getNodes:i,snapToGrid:o,snapGrid:l,onError:A,nodesDraggable:d}=t.getState(),h=i().filter(I=>I.selected&&(I.draggable||d&&typeof I.draggable>"u")),p=o?l[0]:5,g=o?l[1]:5,w=n.isShiftPressed?4:1,b=n.x*p*w,E=n.y*g*w,B=h.map(I=>{if(I.positionAbsolute){const k={x:I.positionAbsolute.x+b,y:I.positionAbsolute.y+E};o&&(k.x=l[0]*Math.round(k.x/l[0]),k.y=l[1]*Math.round(k.y/l[1]));const{positionAbsolute:F,position:D}=vj(I,k,r,s,void 0,A);I.position=D,I.positionAbsolute=F}return I});a(B,!0,!1)},[])}const Y0={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Bp=t=>{const e=({id:n,type:r,data:s,xPos:a,yPos:i,xPosOrigin:o,yPosOrigin:l,selected:A,onClick:d,onMouseEnter:h,onMouseMove:p,onMouseLeave:g,onContextMenu:w,onDoubleClick:b,style:E,className:B,isDraggable:I,isSelectable:k,isConnectable:F,isFocusable:D,selectNodesOnDrag:P,sourcePosition:S,targetPosition:N,hidden:T,resizeObserver:V,dragHandle:M,zIndex:U,isParent:O,noDragClassName:G,noPanClassName:ie,initialized:K,disableKeyboardA11y:q,ariaLabel:se,rfId:Z,hasHandleBounds:X})=>{const de=Ha(),j=ee.useRef(null),W=ee.useRef(null),J=ee.useRef(S),ne=ee.useRef(N),oe=ee.useRef(r),ue=k||I||d||h||p||g,me=wj(),ge=Tp(n,de.getState,h),ke=Tp(n,de.getState,p),ve=Tp(n,de.getState,g),ae=Tp(n,de.getState,w),Re=Tp(n,de.getState,b),Je=Ge=>{const{nodeDragThreshold:tt}=de.getState();if(k&&(!P||!I||tt>0)&&Y_({id:n,store:de,nodeRef:j}),d){const it=de.getState().nodeInternals.get(n);it&&d(Ge,{...it})}},De=Ge=>{if(!z_(Ge)&&!q)if(G7.includes(Ge.key)&&k){const tt=Ge.key==="Escape";Y_({id:n,store:de,unselect:tt,nodeRef:j})}else I&&A&&Object.prototype.hasOwnProperty.call(Y0,Ge.key)&&(de.setState({ariaLiveMessage:`Moved selected node ${Ge.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~i}`}),me({x:Y0[Ge.key].x,y:Y0[Ge.key].y,isShiftPressed:Ge.shiftKey}))};ee.useEffect(()=>()=>{W.current&&(V==null||V.unobserve(W.current),W.current=null)},[]),ee.useEffect(()=>{if(j.current&&!T){const Ge=j.current;(!K||!X||W.current!==Ge)&&(W.current&&(V==null||V.unobserve(W.current)),V==null||V.observe(Ge),W.current=Ge)}},[T,K,X]),ee.useEffect(()=>{const Ge=oe.current!==r,tt=J.current!==S,it=ne.current!==N;j.current&&(Ge||tt||it)&&(Ge&&(oe.current=r),tt&&(J.current=S),it&&(ne.current=N),de.getState().updateNodeDimensions([{id:n,nodeElement:j.current,forceUpdate:!0}]))},[n,r,S,N]);const Ee=yj({nodeRef:j,disabled:T||!I,noDragClassName:G,handleSelector:M,nodeId:n,isSelectable:k,selectNodesOnDrag:P});return T?null:ut.createElement("div",{className:Ki(["react-flow__node",`react-flow__node-${r}`,{[ie]:I},B,{selected:A,selectable:k,parent:O,dragging:Ee}]),ref:j,style:{zIndex:U,transform:`translate(${o}px,${l}px)`,pointerEvents:ue?"all":"none",visibility:K?"visible":"hidden",...E},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ge,onMouseMove:ke,onMouseLeave:ve,onContextMenu:ae,onClick:Je,onDoubleClick:Re,onKeyDown:D?De:void 0,tabIndex:D?0:void 0,role:D?"button":void 0,"aria-describedby":q?void 0:`${Aj}-${Z}`,"aria-label":se},ut.createElement(xEe,{value:n},ut.createElement(t,{id:n,data:s,type:r,xPos:a,yPos:i,selected:A,isConnectable:F,sourcePosition:S,targetPosition:N,dragging:Ee,dragHandle:M,zIndex:U})))};return e.displayName="NodeWrapper",ee.memo(e)};const a_e=t=>{const e=t.getNodes().filter(n=>n.selected);return{...ZS(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function i_e({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=Ha(),{width:s,height:a,x:i,y:o,transformString:l,userSelectionActive:A}=ws(a_e,Di),d=wj(),h=ee.useRef(null);if(ee.useEffect(()=>{var w;n||(w=h.current)==null||w.focus({preventScroll:!0})},[n]),yj({nodeRef:h}),A||!s||!a)return null;const p=t?w=>{const b=r.getState().getNodes().filter(E=>E.selected);t(w,b)}:void 0,g=w=>{Object.prototype.hasOwnProperty.call(Y0,w.key)&&d({x:Y0[w.key].x,y:Y0[w.key].y,isShiftPressed:w.shiftKey})};return ut.createElement("div",{className:Ki(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},ut.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:g,style:{width:s,height:a,top:o,left:i}}))}var o_e=ee.memo(i_e);const l_e=t=>t.nodesSelectionActive,bj=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,deleteKeyCode:o,onMove:l,onMoveStart:A,onMoveEnd:d,selectionKeyCode:h,selectionOnDrag:p,selectionMode:g,onSelectionStart:w,onSelectionEnd:b,multiSelectionKeyCode:E,panActivationKeyCode:B,zoomActivationKeyCode:I,elementsSelectable:k,zoomOnScroll:F,zoomOnPinch:D,panOnScroll:P,panOnScrollSpeed:S,panOnScrollMode:N,zoomOnDoubleClick:T,panOnDrag:V,defaultViewport:M,translateExtent:U,minZoom:O,maxZoom:G,preventScrolling:ie,onSelectionContextMenu:K,noWheelClassName:q,noPanClassName:se,disableKeyboardA11y:Z})=>{const X=ws(l_e),de=Xg(h),j=Xg(B),W=j||V,J=j||P,ne=de||p&&W!==!0;return qEe({deleteKeyCode:o,multiSelectionKeyCode:E}),ut.createElement(JEe,{onMove:l,onMoveStart:A,onMoveEnd:d,onPaneContextMenu:a,elementsSelectable:k,zoomOnScroll:F,zoomOnPinch:D,panOnScroll:J,panOnScrollSpeed:S,panOnScrollMode:N,zoomOnDoubleClick:T,panOnDrag:!de&&W,defaultViewport:M,translateExtent:U,minZoom:O,maxZoom:G,zoomActivationKeyCode:I,preventScrolling:ie,noWheelClassName:q,noPanClassName:se},ut.createElement(gj,{onSelectionStart:w,onSelectionEnd:b,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:W,isSelecting:!!ne,selectionMode:g},t,X&&ut.createElement(o_e,{onSelectionContextMenu:K,noPanClassName:se,disableKeyboardA11y:Z})))};bj.displayName="FlowRenderer";var c_e=ee.memo(bj);function A_e(t){return ws(ee.useCallback(n=>t?J7(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function u_e(t){const e={input:Bp(t.input||ij),default:Bp(t.default||$_),output:Bp(t.output||lj),group:Bp(t.group||t4)},n={},r=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,a)=>(s[a]=Bp(t[a]||$_),s),n);return{...e,...r}}const d_e=({x:t,y:e,width:n,height:r,origin:s})=>!n||!r?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-n*s[0],y:e-r*s[1]},f_e=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),Cj=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:a,onError:i}=ws(f_e,Di),o=A_e(t.onlyRenderVisibleElements),l=ee.useRef(),A=ee.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(h=>{const p=h.map(g=>({id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}));a(p)});return l.current=d,d},[]);return ee.useEffect(()=>()=>{var d;(d=l==null?void 0:l.current)==null||d.disconnect()},[]),ut.createElement("div",{className:"react-flow__nodes",style:n4},o.map(d=>{var D,P,S;let h=d.type||"default";t.nodeTypes[h]||(i==null||i("003",pu.error003(h)),h="default");const p=t.nodeTypes[h]||t.nodeTypes.default,g=!!(d.draggable||e&&typeof d.draggable>"u"),w=!!(d.selectable||s&&typeof d.selectable>"u"),b=!!(d.connectable||n&&typeof d.connectable>"u"),E=!!(d.focusable||r&&typeof d.focusable>"u"),B=t.nodeExtent?qS(d.positionAbsolute,t.nodeExtent):d.positionAbsolute,I=(B==null?void 0:B.x)??0,k=(B==null?void 0:B.y)??0,F=d_e({x:I,y:k,width:d.width??0,height:d.height??0,origin:t.nodeOrigin});return ut.createElement(p,{key:d.id,id:d.id,className:d.className,style:d.style,type:h,data:d.data,sourcePosition:d.sourcePosition||an.Bottom,targetPosition:d.targetPosition||an.Top,hidden:d.hidden,xPos:I,yPos:k,xPosOrigin:F.x,yPosOrigin:F.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!d.selected,isDraggable:g,isSelectable:w,isConnectable:b,isFocusable:E,resizeObserver:A,dragHandle:d.dragHandle,zIndex:((D=d[Fs])==null?void 0:D.z)??0,isParent:!!((P=d[Fs])!=null&&P.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!d.width&&!!d.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((S=d[Fs])!=null&&S.handleBounds)})}))};Cj.displayName="NodeRenderer";var h_e=ee.memo(Cj);const m_e=(t,e,n)=>n===an.Left?t-e:n===an.Right?t+e:t,p_e=(t,e,n)=>n===an.Top?t-e:n===an.Bottom?t+e:t,fR="react-flow__edgeupdater",hR=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:a,onMouseOut:i,type:o})=>ut.createElement("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:i,className:Ki([fR,`${fR}-${o}`]),cx:m_e(e,r,t),cy:p_e(n,r,t),r,stroke:"transparent",fill:"transparent"}),g_e=()=>!0;var A0=t=>{const e=({id:n,className:r,type:s,data:a,onClick:i,onEdgeDoubleClick:o,selected:l,animated:A,label:d,labelStyle:h,labelShowBg:p,labelBgStyle:g,labelBgPadding:w,labelBgBorderRadius:b,style:E,source:B,target:I,sourceX:k,sourceY:F,targetX:D,targetY:P,sourcePosition:S,targetPosition:N,elementsSelectable:T,hidden:V,sourceHandleId:M,targetHandleId:U,onContextMenu:O,onMouseEnter:G,onMouseMove:ie,onMouseLeave:K,reconnectRadius:q,onReconnect:se,onReconnectStart:Z,onReconnectEnd:X,markerEnd:de,markerStart:j,rfId:W,ariaLabel:J,isFocusable:ne,isReconnectable:oe,pathOptions:ue,interactionWidth:me,disableKeyboardA11y:ge})=>{const ke=ee.useRef(null),[ve,ae]=ee.useState(!1),[Re,Je]=ee.useState(!1),De=Ha(),Ee=ee.useMemo(()=>`url('#${q_(j,W)}')`,[j,W]),Ge=ee.useMemo(()=>`url('#${q_(de,W)}')`,[de,W]);if(V)return null;const tt=gt=>{var Er;const{edges:xn,addSelectedEdges:Wt,unselectNodesAndEdges:rr,multiSelectionActive:mn}=De.getState(),kn=xn.find(Tn=>Tn.id===n);kn&&(T&&(De.setState({nodesSelectionActive:!1}),kn.selected&&mn?(rr({nodes:[],edges:[kn]}),(Er=ke.current)==null||Er.blur()):Wt([n])),i&&i(gt,kn))},it=Sp(n,De.getState,o),mt=Sp(n,De.getState,O),Ct=Sp(n,De.getState,G),At=Sp(n,De.getState,ie),Nt=Sp(n,De.getState,K),It=(gt,xn)=>{if(gt.button!==0)return;const{edges:Wt,isValidConnection:rr}=De.getState(),mn=xn?I:B,kn=(xn?U:M)||null,Er=xn?"target":"source",Tn=rr||g_e,Zs=xn,Jn=Wt.find(Rn=>Rn.id===n);Je(!0),Z==null||Z(gt,Jn,Er);const qr=Rn=>{Je(!1),X==null||X(Rn,Jn,Er)};nj({event:gt,handleId:kn,nodeId:mn,onConnect:Rn=>se==null?void 0:se(Jn,Rn),isTarget:Zs,getState:De.getState,setState:De.setState,isValidConnection:Tn,edgeUpdaterType:Er,onReconnectEnd:qr})},qt=gt=>It(gt,!0),Lt=gt=>It(gt,!1),Vt=()=>ae(!0),Yt=()=>ae(!1),Mt=!T&&!i,kt=gt=>{var xn;if(!ge&&G7.includes(gt.key)&&T){const{unselectNodesAndEdges:Wt,addSelectedEdges:rr,edges:mn}=De.getState();gt.key==="Escape"?((xn=ke.current)==null||xn.blur(),Wt({edges:[mn.find(Er=>Er.id===n)]})):rr([n])}};return ut.createElement("g",{className:Ki(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:l,animated:A,inactive:Mt,updating:ve}]),onClick:tt,onDoubleClick:it,onContextMenu:mt,onMouseEnter:Ct,onMouseMove:At,onMouseLeave:Nt,onKeyDown:ne?kt:void 0,tabIndex:ne?0:void 0,role:ne?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":J===null?void 0:J||`Edge from ${B} to ${I}`,"aria-describedby":ne?`${uj}-${W}`:void 0,ref:ke},!Re&&ut.createElement(t,{id:n,source:B,target:I,selected:l,animated:A,label:d,labelStyle:h,labelShowBg:p,labelBgStyle:g,labelBgPadding:w,labelBgBorderRadius:b,data:a,style:E,sourceX:k,sourceY:F,targetX:D,targetY:P,sourcePosition:S,targetPosition:N,sourceHandleId:M,targetHandleId:U,markerStart:Ee,markerEnd:Ge,pathOptions:ue,interactionWidth:me}),oe&&ut.createElement(ut.Fragment,null,(oe==="source"||oe===!0)&&ut.createElement(hR,{position:S,centerX:k,centerY:F,radius:q,onMouseDown:qt,onMouseEnter:Vt,onMouseOut:Yt,type:"source"}),(oe==="target"||oe===!0)&&ut.createElement(hR,{position:N,centerX:D,centerY:P,radius:q,onMouseDown:Lt,onMouseEnter:Vt,onMouseOut:Yt,type:"target"})))};return e.displayName="EdgeWrapper",ee.memo(e)};function x_e(t){const e={default:A0(t.default||ty),straight:A0(t.bezier||JS),step:A0(t.step||YS),smoothstep:A0(t.step||Zy),simplebezier:A0(t.simplebezier||$S)},n={},r=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,a)=>(s[a]=A0(t[a]||ty),s),n);return{...e,...r}}function mR(t,e,n=null){const r=((n==null?void 0:n.x)||0)+e.x,s=((n==null?void 0:n.y)||0)+e.y,a=(n==null?void 0:n.width)||e.width,i=(n==null?void 0:n.height)||e.height;switch(t){case an.Top:return{x:r+a/2,y:s};case an.Right:return{x:r+a,y:s+i/2};case an.Bottom:return{x:r+a/2,y:s+i};case an.Left:return{x:r,y:s+i/2}}}function pR(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const v_e=(t,e,n,r,s,a)=>{const i=mR(n,t,e),o=mR(a,r,s);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function y_e({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:a,width:i,height:o,transform:l}){const A={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+s),y2:Math.max(t.y+r,e.y+a)};A.x===A.x2&&(A.x2+=1),A.y===A.y2&&(A.y2+=1);const d=WS({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:o/l[2]}),h=Math.max(0,Math.min(d.x2,A.x2)-Math.max(d.x,A.x)),p=Math.max(0,Math.min(d.y2,A.y2)-Math.max(d.y,A.y));return Math.ceil(h*p)>0}function gR(t){var r,s,a,i,o;const e=((r=t==null?void 0:t[Fs])==null?void 0:r.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)<"u";return[{x:((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)||0,y:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const w_e=[{level:0,isMaxLevel:!0,edges:[]}];function b_e(t,e,n=!1){let r=-1;const s=t.reduce((i,o)=>{var d,h;const l=_l(o.zIndex);let A=l?o.zIndex:0;if(n){const p=e.get(o.target),g=e.get(o.source),w=o.selected||(p==null?void 0:p.selected)||(g==null?void 0:g.selected),b=Math.max(((d=g==null?void 0:g[Fs])==null?void 0:d.z)||0,((h=p==null?void 0:p[Fs])==null?void 0:h.z)||0,1e3);A=(l?o.zIndex:0)+(w?b:0)}return i[A]?i[A].push(o):i[A]=[o],r=A>r?A:r,i},{}),a=Object.entries(s).map(([i,o])=>{const l=+i;return{edges:o,level:l,isMaxLevel:l===r}});return a.length===0?w_e:a}function C_e(t,e,n){const r=ws(ee.useCallback(s=>t?s.edges.filter(a=>{const i=e.get(a.source),o=e.get(a.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&y_e({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return b_e(r,e,n)}const E_e=({color:t="none",strokeWidth:e=1})=>ut.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),__e=({color:t="none",strokeWidth:e=1})=>ut.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),xR={[ey.Arrow]:E_e,[ey.ArrowClosed]:__e};function S_e(t){const e=Ha();return ee.useMemo(()=>{var s,a;return Object.prototype.hasOwnProperty.call(xR,t)?xR[t]:((a=(s=e.getState()).onError)==null||a.call(s,"009",pu.error009(t)),null)},[t])}const T_e=({id:t,type:e,color:n,width:r=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const l=S_e(e);return l?ut.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:o,refX:"0",refY:"0"},ut.createElement(l,{color:n,strokeWidth:i})):null},B_e=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((s,a)=>([a.markerStart,a.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=q_(i,e);r.includes(o)||(s.push({id:o,color:i.color||t,...i}),r.push(o))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))},Ej=({defaultColor:t,rfId:e})=>{const n=ws(ee.useCallback(B_e({defaultColor:t,rfId:e}),[t,e]),(r,s)=>!(r.length!==s.length||r.some((a,i)=>a.id!==s[i].id)));return ut.createElement("defs",null,n.map(r=>ut.createElement(T_e,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Ej.displayName="MarkerDefinitions";var N_e=ee.memo(Ej);const k_e=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),_j=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:a,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:A,onEdgeClick:d,onEdgeDoubleClick:h,onReconnect:p,onReconnectStart:g,onReconnectEnd:w,reconnectRadius:b,children:E,disableKeyboardA11y:B})=>{const{edgesFocusable:I,edgesUpdatable:k,elementsSelectable:F,width:D,height:P,connectionMode:S,nodeInternals:N,onError:T}=ws(k_e,Di),V=C_e(e,N,n);return D?ut.createElement(ut.Fragment,null,V.map(({level:M,edges:U,isMaxLevel:O})=>ut.createElement("svg",{key:M,style:{zIndex:M},width:D,height:P,className:"react-flow__edges react-flow__container"},O&&ut.createElement(N_e,{defaultColor:t,rfId:r}),ut.createElement("g",null,U.map(G=>{const[ie,K,q]=gR(N.get(G.source)),[se,Z,X]=gR(N.get(G.target));if(!q||!X)return null;let de=G.type||"default";s[de]||(T==null||T("011",pu.error011(de)),de="default");const j=s[de]||s.default,W=S===lh.Strict?Z.target:(Z.target??[]).concat(Z.source??[]),J=pR(K.source,G.sourceHandle),ne=pR(W,G.targetHandle),oe=(J==null?void 0:J.position)||an.Bottom,ue=(ne==null?void 0:ne.position)||an.Top,me=!!(G.focusable||I&&typeof G.focusable>"u"),ge=G.reconnectable||G.updatable,ke=typeof p<"u"&&(ge||k&&typeof ge>"u");if(!J||!ne)return T==null||T("008",pu.error008(J,G)),null;const{sourceX:ve,sourceY:ae,targetX:Re,targetY:Je}=v_e(ie,J,oe,se,ne,ue);return ut.createElement(j,{key:G.id,id:G.id,className:Ki([G.className,a]),type:de,data:G.data,selected:!!G.selected,animated:!!G.animated,hidden:!!G.hidden,label:G.label,labelStyle:G.labelStyle,labelShowBg:G.labelShowBg,labelBgStyle:G.labelBgStyle,labelBgPadding:G.labelBgPadding,labelBgBorderRadius:G.labelBgBorderRadius,style:G.style,source:G.source,target:G.target,sourceHandleId:G.sourceHandle,targetHandleId:G.targetHandle,markerEnd:G.markerEnd,markerStart:G.markerStart,sourceX:ve,sourceY:ae,targetX:Re,targetY:Je,sourcePosition:oe,targetPosition:ue,elementsSelectable:F,onContextMenu:i,onMouseEnter:o,onMouseMove:l,onMouseLeave:A,onClick:d,onEdgeDoubleClick:h,onReconnect:p,onReconnectStart:g,onReconnectEnd:w,reconnectRadius:b,rfId:r,ariaLabel:G.ariaLabel,isFocusable:me,isReconnectable:ke,pathOptions:"pathOptions"in G?G.pathOptions:void 0,interactionWidth:G.interactionWidth,disableKeyboardA11y:B})})))),E):null};_j.displayName="EdgeRenderer";var I_e=ee.memo(_j);const F_e=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function R_e({children:t}){const e=ws(F_e);return ut.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function D_e(t){const e=ew(),n=ee.useRef(!1);ee.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const U_e={[an.Left]:an.Right,[an.Right]:an.Left,[an.Top]:an.Bottom,[an.Bottom]:an.Top},Sj=({nodeId:t,handleType:e,style:n,type:r=gd.Bezier,CustomComponent:s,connectionStatus:a})=>{var P,S,N;const{fromNode:i,handleId:o,toX:l,toY:A,connectionMode:d}=ws(ee.useCallback(T=>({fromNode:T.nodeInternals.get(t),handleId:T.connectionHandleId,toX:(T.connectionPosition.x-T.transform[0])/T.transform[2],toY:(T.connectionPosition.y-T.transform[1])/T.transform[2],connectionMode:T.connectionMode}),[t]),Di),h=(P=i==null?void 0:i[Fs])==null?void 0:P.handleBounds;let p=h==null?void 0:h[e];if(d===lh.Loose&&(p=p||(h==null?void 0:h[e==="source"?"target":"source"])),!i||!p)return null;const g=o?p.find(T=>T.id===o):p[0],w=g?g.x+g.width/2:(i.width??0)/2,b=g?g.y+g.height/2:i.height??0,E=(((S=i.positionAbsolute)==null?void 0:S.x)??0)+w,B=(((N=i.positionAbsolute)==null?void 0:N.y)??0)+b,I=g==null?void 0:g.position,k=I?U_e[I]:null;if(!I||!k)return null;if(s)return ut.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:g,fromX:E,fromY:B,toX:l,toY:A,fromPosition:I,toPosition:k,connectionStatus:a});let F="";const D={sourceX:E,sourceY:B,sourcePosition:I,targetX:l,targetY:A,targetPosition:k};return r===gd.Bezier?[F]=$7(D):r===gd.Step?[F]=K_({...D,borderRadius:0}):r===gd.SmoothStep?[F]=K_(D):r===gd.SimpleBezier?[F]=W7(D):F=`M${E},${B} ${l},${A}`,ut.createElement("path",{d:F,fill:"none",className:"react-flow__connection-path",style:n})};Sj.displayName="ConnectionLine";const L_e=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function M_e({containerStyle:t,style:e,type:n,component:r}){const{nodeId:s,handleType:a,nodesConnectable:i,width:o,height:l,connectionStatus:A}=ws(L_e,Di);return!(s&&a&&o&&i)?null:ut.createElement("svg",{style:t,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},ut.createElement("g",{className:Ki(["react-flow__connection",A])},ut.createElement(Sj,{nodeId:s,handleType:a,style:e,type:n,CustomComponent:r,connectionStatus:A})))}function vR(t,e){return ee.useRef(null),Ha(),ee.useMemo(()=>e(t),[t])}const Tj=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:a,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:A,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:p,onNodeContextMenu:g,onSelectionContextMenu:w,onSelectionStart:b,onSelectionEnd:E,connectionLineType:B,connectionLineStyle:I,connectionLineComponent:k,connectionLineContainerStyle:F,selectionKeyCode:D,selectionOnDrag:P,selectionMode:S,multiSelectionKeyCode:N,panActivationKeyCode:T,zoomActivationKeyCode:V,deleteKeyCode:M,onlyRenderVisibleElements:U,elementsSelectable:O,selectNodesOnDrag:G,defaultViewport:ie,translateExtent:K,minZoom:q,maxZoom:se,preventScrolling:Z,defaultMarkerColor:X,zoomOnScroll:de,zoomOnPinch:j,panOnScroll:W,panOnScrollSpeed:J,panOnScrollMode:ne,zoomOnDoubleClick:oe,panOnDrag:ue,onPaneClick:me,onPaneMouseEnter:ge,onPaneMouseMove:ke,onPaneMouseLeave:ve,onPaneScroll:ae,onPaneContextMenu:Re,onEdgeContextMenu:Je,onEdgeMouseEnter:De,onEdgeMouseMove:Ee,onEdgeMouseLeave:Ge,onReconnect:tt,onReconnectStart:it,onReconnectEnd:mt,reconnectRadius:Ct,noDragClassName:At,noWheelClassName:Nt,noPanClassName:It,elevateEdgesOnSelect:qt,disableKeyboardA11y:Lt,nodeOrigin:Vt,nodeExtent:Yt,rfId:Mt})=>{const kt=vR(t,u_e),gt=vR(e,x_e);return D_e(a),ut.createElement(c_e,{onPaneClick:me,onPaneMouseEnter:ge,onPaneMouseMove:ke,onPaneMouseLeave:ve,onPaneContextMenu:Re,onPaneScroll:ae,deleteKeyCode:M,selectionKeyCode:D,selectionOnDrag:P,selectionMode:S,onSelectionStart:b,onSelectionEnd:E,multiSelectionKeyCode:N,panActivationKeyCode:T,zoomActivationKeyCode:V,elementsSelectable:O,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:de,zoomOnPinch:j,zoomOnDoubleClick:oe,panOnScroll:W,panOnScrollSpeed:J,panOnScrollMode:ne,panOnDrag:ue,defaultViewport:ie,translateExtent:K,minZoom:q,maxZoom:se,onSelectionContextMenu:w,preventScrolling:Z,noDragClassName:At,noWheelClassName:Nt,noPanClassName:It,disableKeyboardA11y:Lt},ut.createElement(R_e,null,ut.createElement(I_e,{edgeTypes:gt,onEdgeClick:o,onEdgeDoubleClick:A,onlyRenderVisibleElements:U,onEdgeContextMenu:Je,onEdgeMouseEnter:De,onEdgeMouseMove:Ee,onEdgeMouseLeave:Ge,onReconnect:tt,onReconnectStart:it,onReconnectEnd:mt,reconnectRadius:Ct,defaultMarkerColor:X,noPanClassName:It,elevateEdgesOnSelect:!!qt,disableKeyboardA11y:Lt,rfId:Mt},ut.createElement(M_e,{style:I,type:B,component:k,containerStyle:F})),ut.createElement("div",{className:"react-flow__edgelabel-renderer"}),ut.createElement(h_e,{nodeTypes:kt,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:p,onNodeContextMenu:g,selectNodesOnDrag:G,onlyRenderVisibleElements:U,noPanClassName:It,noDragClassName:At,disableKeyboardA11y:Lt,nodeOrigin:Vt,nodeExtent:Yt,rfId:Mt})))};Tj.displayName="GraphView";var P_e=ee.memo(Tj);const J_=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],od={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:J_,nodeExtent:J_,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:lh.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:dEe,isValidConnection:void 0},j_e=()=>_ye((t,e)=>({...od,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:a}=e();t({nodeInternals:WC(n,r,s,a)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",a=typeof r<"u",i=s?WC(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:i,edges:a?r:[],hasDefaultNodes:s,hasDefaultEdges:a})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:a,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:l,nodeOrigin:A}=e(),d=l==null?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const h=window.getComputedStyle(d),{m22:p}=new window.DOMMatrixReadOnly(h.transform),g=n.reduce((b,E)=>{const B=s.get(E.id);if(B!=null&&B.hidden)s.set(B.id,{...B,[Fs]:{...B[Fs],handleBounds:void 0}});else if(B){const I=KS(E.nodeElement);!!(I.width&&I.height&&(B.width!==I.width||B.height!==I.height||E.forceUpdate))&&(s.set(B.id,{...B,[Fs]:{...B[Fs],handleBounds:{source:dR(".source",E.nodeElement,p,A),target:dR(".target",E.nodeElement,p,A)}},...I}),b.push({id:B.id,type:"dimensions",dimensions:I}))}return b},[]);fj(s,A);const w=i||a&&!i&&hj(e,{initial:!0,...o});t({nodeInternals:new Map(s),fitViewOnInitDone:w}),(g==null?void 0:g.length)>0&&(r==null||r(g))},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:a}=e(),i=n.map(o=>{const l={id:o.id,type:"position",dragging:s};return r&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});a(i)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:a,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:l}=e();if(n!=null&&n.length){if(a){const A=pj(n,o()),d=WC(A,s,i,l);t({nodeInternals:d})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:a}=e();let i,o=null;r?i=n.map(l=>dd(l,!0)):(i=B0(a(),n),o=B0(s,[])),_v({changedNodes:i,changedEdges:o,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:a}=e();let i,o=null;r?i=n.map(l=>dd(l,!0)):(i=B0(s,n),o=B0(a(),[])),_v({changedNodes:o,changedEdges:i,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:a}=e(),i=n||a(),o=r||s,l=i.map(d=>(d.selected=!1,dd(d.id,!1))),A=o.map(d=>dd(d.id,!1));_v({changedNodes:l,changedEdges:A,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=e();r==null||r.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=e();r==null||r.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{var r;(r=e().d3Zoom)==null||r.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),a=r().filter(o=>o.selected).map(o=>dd(o.id,!1)),i=n.filter(o=>o.selected).map(o=>dd(o.id,!1));_v({changedNodes:a,changedEdges:i,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(s=>{s.positionAbsolute=qS(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:a,d3Zoom:i,d3Selection:o,translateExtent:l}=e();if(!i||!o||!n.x&&!n.y)return!1;const A=Ud.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),d=[[0,0],[s,a]],h=i==null?void 0:i.constrain()(A,d,l);return i.transform(o,h),r[0]!==h.x||r[1]!==h.y||r[2]!==h.k},cancelConnection:()=>t({connectionNodeId:od.connectionNodeId,connectionHandleId:od.connectionHandleId,connectionHandleType:od.connectionHandleType,connectionStatus:od.connectionStatus,connectionStartHandle:od.connectionStartHandle,connectionEndHandle:od.connectionEndHandle}),reset:()=>t({...od})}),Object.is),r4=({children:t})=>{const e=ee.useRef(null);return e.current||(e.current=j_e()),ut.createElement(sEe,{value:e.current},t)};r4.displayName="ReactFlowProvider";const Bj=({children:t})=>ee.useContext(Xy)?ut.createElement(ut.Fragment,null,t):ut.createElement(r4,null,t);Bj.displayName="ReactFlowWrapper";const O_e={input:ij,default:$_,output:lj,group:t4},Q_e={default:ty,straight:JS,step:YS,smoothstep:Zy,simplebezier:$S},H_e=[0,0],V_e=[15,15],G_e={x:0,y:0,zoom:1},z_e={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Nj=ee.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:a=O_e,edgeTypes:i=Q_e,onNodeClick:o,onEdgeClick:l,onInit:A,onMove:d,onMoveStart:h,onMoveEnd:p,onConnect:g,onConnectStart:w,onConnectEnd:b,onClickConnectStart:E,onClickConnectEnd:B,onNodeMouseEnter:I,onNodeMouseMove:k,onNodeMouseLeave:F,onNodeContextMenu:D,onNodeDoubleClick:P,onNodeDragStart:S,onNodeDrag:N,onNodeDragStop:T,onNodesDelete:V,onEdgesDelete:M,onSelectionChange:U,onSelectionDragStart:O,onSelectionDrag:G,onSelectionDragStop:ie,onSelectionContextMenu:K,onSelectionStart:q,onSelectionEnd:se,connectionMode:Z=lh.Strict,connectionLineType:X=gd.Bezier,connectionLineStyle:de,connectionLineComponent:j,connectionLineContainerStyle:W,deleteKeyCode:J="Backspace",selectionKeyCode:ne="Shift",selectionOnDrag:oe=!1,selectionMode:ue=Jg.Full,panActivationKeyCode:me="Space",multiSelectionKeyCode:ge=Z2()?"Meta":"Control",zoomActivationKeyCode:ke=Z2()?"Meta":"Control",snapToGrid:ve=!1,snapGrid:ae=V_e,onlyRenderVisibleElements:Re=!1,selectNodesOnDrag:Je=!0,nodesDraggable:De,nodesConnectable:Ee,nodesFocusable:Ge,nodeOrigin:tt=H_e,edgesFocusable:it,edgesUpdatable:mt,elementsSelectable:Ct,defaultViewport:At=G_e,minZoom:Nt=.5,maxZoom:It=2,translateExtent:qt=J_,preventScrolling:Lt=!0,nodeExtent:Vt,defaultMarkerColor:Yt="#b1b1b7",zoomOnScroll:Mt=!0,zoomOnPinch:kt=!0,panOnScroll:gt=!1,panOnScrollSpeed:xn=.5,panOnScrollMode:Wt=Mf.Free,zoomOnDoubleClick:rr=!0,panOnDrag:mn=!0,onPaneClick:kn,onPaneMouseEnter:Er,onPaneMouseMove:Tn,onPaneMouseLeave:Zs,onPaneScroll:Jn,onPaneContextMenu:qr,children:as,onEdgeContextMenu:Rn,onEdgeDoubleClick:Zt,onEdgeMouseEnter:jn,onEdgeMouseMove:ea,onEdgeMouseLeave:jr,onEdgeUpdate:us,onEdgeUpdateStart:ma,onEdgeUpdateEnd:Ht,onReconnect:sr,onReconnectStart:Xn,onReconnectEnd:_r,reconnectRadius:Nr=10,edgeUpdaterRadius:Or=10,onNodesChange:fe,onEdgesChange:Be,noDragClassName:Ce="nodrag",noWheelClassName:_e="nowheel",noPanClassName:Se="nopan",fitView:Ne=!1,fitViewOptions:Ke,connectOnClick:nt=!0,attributionPosition:Qe,proOptions:We,defaultEdgeOptions:Xe,elevateNodesOnSelect:vt=!0,elevateEdgesOnSelect:Bt=!1,disableKeyboardA11y:Pt=!1,autoPanOnConnect:St=!0,autoPanOnNodeDrag:Ft=!0,connectionRadius:cn=20,isValidConnection:Dn,onError:Un,style:On,id:bs,nodeDragThreshold:ri,...Cs},ta)=>{const Us=bs||"1";return ut.createElement("div",{...Cs,style:{...On,...z_e},ref:ta,className:Ki(["react-flow",s]),"data-testid":"rf__wrapper",id:bs},ut.createElement(Bj,null,ut.createElement(P_e,{onInit:A,onMove:d,onMoveStart:h,onMoveEnd:p,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:I,onNodeMouseMove:k,onNodeMouseLeave:F,onNodeContextMenu:D,onNodeDoubleClick:P,nodeTypes:a,edgeTypes:i,connectionLineType:X,connectionLineStyle:de,connectionLineComponent:j,connectionLineContainerStyle:W,selectionKeyCode:ne,selectionOnDrag:oe,selectionMode:ue,deleteKeyCode:J,multiSelectionKeyCode:ge,panActivationKeyCode:me,zoomActivationKeyCode:ke,onlyRenderVisibleElements:Re,selectNodesOnDrag:Je,defaultViewport:At,translateExtent:qt,minZoom:Nt,maxZoom:It,preventScrolling:Lt,zoomOnScroll:Mt,zoomOnPinch:kt,zoomOnDoubleClick:rr,panOnScroll:gt,panOnScrollSpeed:xn,panOnScrollMode:Wt,panOnDrag:mn,onPaneClick:kn,onPaneMouseEnter:Er,onPaneMouseMove:Tn,onPaneMouseLeave:Zs,onPaneScroll:Jn,onPaneContextMenu:qr,onSelectionContextMenu:K,onSelectionStart:q,onSelectionEnd:se,onEdgeContextMenu:Rn,onEdgeDoubleClick:Zt,onEdgeMouseEnter:jn,onEdgeMouseMove:ea,onEdgeMouseLeave:jr,onReconnect:sr??us,onReconnectStart:Xn??ma,onReconnectEnd:_r??Ht,reconnectRadius:Nr??Or,defaultMarkerColor:Yt,noDragClassName:Ce,noWheelClassName:_e,noPanClassName:Se,elevateEdgesOnSelect:Bt,rfId:Us,disableKeyboardA11y:Pt,nodeOrigin:tt,nodeExtent:Vt}),ut.createElement(UEe,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:g,onConnectStart:w,onConnectEnd:b,onClickConnectStart:E,onClickConnectEnd:B,nodesDraggable:De,nodesConnectable:Ee,nodesFocusable:Ge,edgesFocusable:it,edgesUpdatable:mt,elementsSelectable:Ct,elevateNodesOnSelect:vt,minZoom:Nt,maxZoom:It,nodeExtent:Vt,onNodesChange:fe,onEdgesChange:Be,snapToGrid:ve,snapGrid:ae,connectionMode:Z,translateExtent:qt,connectOnClick:nt,defaultEdgeOptions:Xe,fitView:Ne,fitViewOptions:Ke,onNodesDelete:V,onEdgesDelete:M,onNodeDragStart:S,onNodeDrag:N,onNodeDragStop:T,onSelectionDrag:G,onSelectionDragStart:O,onSelectionDragStop:ie,noPanClassName:Se,nodeOrigin:tt,rfId:Us,autoPanOnConnect:St,autoPanOnNodeDrag:Ft,onError:Un,connectionRadius:cn,isValidConnection:Dn,nodeDragThreshold:ri}),ut.createElement(REe,{onSelectionChange:U}),as,ut.createElement(iEe,{proOptions:We,position:Qe}),ut.createElement(OEe,{rfId:Us,disableKeyboardA11y:Pt})))});Nj.displayName="ReactFlow";function kj(t){return e=>{const[n,r]=ee.useState(e),s=ee.useCallback(a=>r(i=>t(a,i)),[]);return[n,r,s]}}const K_e=kj(pj),q_e=kj(e_e);function W_e(){return ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ut.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function $_e(){return ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ut.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Y_e(){return ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ut.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function J_e(){return ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ut.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function X_e(){return ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ut.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const $p=({children:t,className:e,...n})=>ut.createElement("button",{type:"button",className:Ki(["react-flow__controls-button",e]),...n},t);$p.displayName="ControlButton";const Z_e=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),Ij=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:a,onZoomOut:i,onFitView:o,onInteractiveChange:l,className:A,children:d,position:h="bottom-left"})=>{const p=Ha(),[g,w]=ee.useState(!1),{isInteractive:b,minZoomReached:E,maxZoomReached:B}=ws(Z_e,Di),{zoomIn:I,zoomOut:k,fitView:F}=ew();if(ee.useEffect(()=>{w(!0)},[]),!g)return null;const D=()=>{I(),a==null||a()},P=()=>{k(),i==null||i()},S=()=>{F(s),o==null||o()},N=()=>{p.setState({nodesDraggable:!b,nodesConnectable:!b,elementsSelectable:!b}),l==null||l(!b)};return ut.createElement(Q7,{className:Ki(["react-flow__controls",A]),position:h,style:t,"data-testid":"rf__controls"},e&&ut.createElement(ut.Fragment,null,ut.createElement($p,{onClick:D,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:B},ut.createElement(W_e,null)),ut.createElement($p,{onClick:P,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:E},ut.createElement($_e,null))),n&&ut.createElement($p,{className:"react-flow__controls-fitview",onClick:S,title:"fit view","aria-label":"fit view"},ut.createElement(Y_e,null)),r&&ut.createElement($p,{className:"react-flow__controls-interactive",onClick:N,title:"toggle interactivity","aria-label":"toggle interactivity"},b?ut.createElement(X_e,null):ut.createElement(J_e,null)),d)};Ij.displayName="Controls";var e5e=ee.memo(Ij),fc;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(fc||(fc={}));function t5e({color:t,dimensions:e,lineWidth:n}){return ut.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function n5e({color:t,radius:e}){return ut.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const r5e={[fc.Dots]:"#91919a",[fc.Lines]:"#eee",[fc.Cross]:"#e2e2e2"},s5e={[fc.Dots]:1,[fc.Lines]:1,[fc.Cross]:6},a5e=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function Fj({id:t,variant:e=fc.Dots,gap:n=20,size:r,lineWidth:s=1,offset:a=2,color:i,style:o,className:l}){const A=ee.useRef(null),{transform:d,patternId:h}=ws(a5e,Di),p=i||r5e[e],g=r||s5e[e],w=e===fc.Dots,b=e===fc.Cross,E=Array.isArray(n)?n:[n,n],B=[E[0]*d[2]||1,E[1]*d[2]||1],I=g*d[2],k=b?[I,I]:B,F=w?[I/a,I/a]:[k[0]/a,k[1]/a];return ut.createElement("svg",{className:Ki(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:A,"data-testid":"rf__background"},ut.createElement("pattern",{id:h+t,x:d[0]%B[0],y:d[1]%B[1],width:B[0],height:B[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${F[0]},-${F[1]})`},w?ut.createElement(n5e,{color:p,radius:I/a}):ut.createElement(t5e,{dimensions:k,color:p,lineWidth:s})),ut.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+t})`}))}Fj.displayName="Background";var i5e=ee.memo(Fj);function o5e(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),s=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(s),e&&(r.href=e),s.href=t,s.href}const l5e=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function Md(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let u0=null;function Rj(t={}){return u0||(t.includeStyleProperties?(u0=t.includeStyleProperties,u0):(u0=Md(window.getComputedStyle(document.documentElement)),u0))}function ry(t,e){const r=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function c5e(t){const e=ry(t,"border-left-width"),n=ry(t,"border-right-width");return t.clientWidth+e+n}function A5e(t){const e=ry(t,"border-top-width"),n=ry(t,"border-bottom-width");return t.clientHeight+e+n}function Dj(t,e={}){const n=e.width||c5e(t),r=e.height||A5e(t);return{width:n,height:r}}function u5e(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const Uo=16384;function d5e(t){(t.width>Uo||t.height>Uo)&&(t.width>Uo&&t.height>Uo?t.width>t.height?(t.height*=Uo/t.width,t.width=Uo):(t.width*=Uo/t.height,t.height=Uo):t.width>Uo?(t.height*=Uo/t.width,t.width=Uo):(t.width*=Uo/t.height,t.height=Uo))}function sy(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function f5e(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function h5e(t,e,n){const r="http://www.w3.org/2000/svg",s=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return s.setAttribute("width",`${e}`),s.setAttribute("height",`${n}`),s.setAttribute("viewBox",`0 0 ${e} ${n}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),s.appendChild(a),a.appendChild(t),f5e(s)}const ho=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||ho(n,e)};function m5e(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function p5e(t,e){return Rj(e).map(n=>{const r=t.getPropertyValue(n),s=t.getPropertyPriority(n);return`${n}: ${r}${s?" !important":""};`}).join(" ")}function g5e(t,e,n,r){const s=`.${t}:${e}`,a=n.cssText?m5e(n):p5e(n,r);return document.createTextNode(`${s}{${a}}`)}function yR(t,e,n,r){const s=window.getComputedStyle(t,n),a=s.getPropertyValue("content");if(a===""||a==="none")return;const i=l5e();try{e.className=`${e.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(g5e(i,n,s,r)),e.appendChild(o)}function x5e(t,e,n){yR(t,e,":before",n),yR(t,e,":after",n)}const wR="application/font-woff",bR="image/jpeg",v5e={woff:wR,woff2:wR,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:bR,jpeg:bR,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function y5e(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function s4(t){const e=y5e(t).toLowerCase();return v5e[e]||""}function w5e(t){return t.split(/,/)[1]}function X_(t){return t.search(/^(data:)/)!==-1}function b5e(t,e){return`data:${e};base64,${t}`}async function Uj(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const s=await r.blob();return new Promise((a,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{a(n({res:r,result:o.result}))}catch(l){i(l)}},o.readAsDataURL(s)})}const XC={};function C5e(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function a4(t,e,n){const r=C5e(t,e,n.includeQueryParams);if(XC[r]!=null)return XC[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let s;try{const a=await Uj(t,n.fetchRequestInit,({res:i,result:o})=>(e||(e=i.headers.get("Content-Type")||""),w5e(o)));s=b5e(a,e)}catch(a){s=n.imagePlaceholder||"";let i=`Failed to fetch resource: ${t}`;a&&(i=typeof a=="string"?a:a.message),i&&console.warn(i)}return XC[r]=s,s}async function E5e(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):sy(e)}async function _5e(t,e){if(t.currentSrc){const a=document.createElement("canvas"),i=a.getContext("2d");a.width=t.clientWidth,a.height=t.clientHeight,i==null||i.drawImage(t,0,0,a.width,a.height);const o=a.toDataURL();return sy(o)}const n=t.poster,r=s4(n),s=await a4(n,r,e);return sy(s)}async function S5e(t,e){var n;try{if(!((n=t==null?void 0:t.contentDocument)===null||n===void 0)&&n.body)return await tw(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function T5e(t,e){return ho(t,HTMLCanvasElement)?E5e(t):ho(t,HTMLVideoElement)?_5e(t,e):ho(t,HTMLIFrameElement)?S5e(t,e):t.cloneNode(Lj(t))}const B5e=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",Lj=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function N5e(t,e,n){var r,s;if(Lj(e))return e;let a=[];return B5e(t)&&t.assignedNodes?a=Md(t.assignedNodes()):ho(t,HTMLIFrameElement)&&(!((r=t.contentDocument)===null||r===void 0)&&r.body)?a=Md(t.contentDocument.body.childNodes):a=Md(((s=t.shadowRoot)!==null&&s!==void 0?s:t).childNodes),a.length===0||ho(t,HTMLVideoElement)||await a.reduce((i,o)=>i.then(()=>tw(o,n)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function k5e(t,e,n){const r=e.style;if(!r)return;const s=window.getComputedStyle(t);s.cssText?(r.cssText=s.cssText,r.transformOrigin=s.transformOrigin):Rj(n).forEach(a=>{let i=s.getPropertyValue(a);a==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),ho(t,HTMLIFrameElement)&&a==="display"&&i==="inline"&&(i="block"),a==="d"&&e.getAttribute("d")&&(i=`path(${e.getAttribute("d")})`),r.setProperty(a,i,s.getPropertyPriority(a))})}function I5e(t,e){ho(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),ho(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function F5e(t,e){if(ho(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(s=>t.value===s.getAttribute("value"));r&&r.setAttribute("selected","")}}function R5e(t,e,n){return ho(e,Element)&&(k5e(t,e,n),x5e(t,e,n),I5e(t,e),F5e(t,e)),e}async function D5e(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let a=0;a<n.length;a++){const o=n[a].getAttribute("xlink:href");if(o){const l=t.querySelector(o),A=document.querySelector(o);!l&&A&&!r[o]&&(r[o]=await tw(A,e,!0))}}const s=Object.values(r);if(s.length){const a="http://www.w3.org/1999/xhtml",i=document.createElementNS(a,"svg");i.setAttribute("xmlns",a),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(a,"defs");i.appendChild(o);for(let l=0;l<s.length;l++)o.appendChild(s[l]);t.appendChild(i)}return t}async function tw(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>T5e(r,e)).then(r=>N5e(t,r,e)).then(r=>R5e(t,r,e)).then(r=>D5e(r,e))}const Mj=/url\((['"]?)([^'"]+?)\1\)/g,U5e=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,L5e=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function M5e(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function P5e(t){const e=[];return t.replace(Mj,(n,r,s)=>(e.push(s),n)),e.filter(n=>!X_(n))}async function j5e(t,e,n,r,s){try{const a=n?o5e(e,n):e,i=s4(e);let o;return s||(o=await a4(a,i,r)),t.replace(M5e(e),`$1${o}$3`)}catch{}return t}function O5e(t,{preferredFontFormat:e}){return e?t.replace(L5e,n=>{for(;;){const[r,,s]=U5e.exec(n)||[];if(!s)return"";if(s===e)return`src: ${r};`}}):t}function Pj(t){return t.search(Mj)!==-1}async function jj(t,e,n){if(!Pj(t))return t;const r=O5e(t,n);return P5e(r).reduce((a,i)=>a.then(o=>j5e(o,i,e,n)),Promise.resolve(r))}async function d0(t,e,n){var r;const s=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(s){const a=await jj(s,null,n);return e.style.setProperty(t,a,e.style.getPropertyPriority(t)),!0}return!1}async function Q5e(t,e){await d0("background",t,e)||await d0("background-image",t,e),await d0("mask",t,e)||await d0("-webkit-mask",t,e)||await d0("mask-image",t,e)||await d0("-webkit-mask-image",t,e)}async function H5e(t,e){const n=ho(t,HTMLImageElement);if(!(n&&!X_(t.src))&&!(ho(t,SVGImageElement)&&!X_(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,s=await a4(r,s4(r),e);await new Promise((a,i)=>{t.onload=a,t.onerror=e.onImageErrorHandler?(...l)=>{try{a(e.onImageErrorHandler(...l))}catch(A){i(A)}}:i;const o=t;o.decode&&(o.decode=a),o.loading==="lazy"&&(o.loading="eager"),n?(t.srcset="",t.src=s):t.href.baseVal=s})}async function V5e(t,e){const r=Md(t.childNodes).map(s=>Oj(s,e));await Promise.all(r).then(()=>t)}async function Oj(t,e){ho(t,Element)&&(await Q5e(t,e),await H5e(t,e),await V5e(t,e))}function G5e(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(s=>{n[s]=r[s]}),t}const CR={};async function ER(t){let e=CR[t];if(e!=null)return e;const r=await(await fetch(t)).text();return e={url:t,cssText:r},CR[t]=e,e}async function _R(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,a=(n.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(r,"$1");return o.startsWith("https://")||(o=new URL(o,t.url).href),Uj(o,e.fetchRequestInit,({result:l})=>(n=n.replace(i,`url(${l})`),[i,l]))});return Promise.all(a).then(()=>n)}function SR(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const s=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=s.exec(r);if(l===null)break;e.push(l[0])}r=r.replace(s,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let l=a.exec(r);if(l===null){if(l=o.exec(r),l===null)break;a.lastIndex=o.lastIndex}else o.lastIndex=a.lastIndex;e.push(l[0])}return e}async function z5e(t,e){const n=[],r=[];return t.forEach(s=>{if("cssRules"in s)try{Md(s.cssRules||[]).forEach((a,i)=>{if(a.type===CSSRule.IMPORT_RULE){let o=i+1;const l=a.href,A=ER(l).then(d=>_R(d,e)).then(d=>SR(d).forEach(h=>{try{s.insertRule(h,h.startsWith("@import")?o+=1:s.cssRules.length)}catch(p){console.error("Error inserting rule from remote css",{rule:h,error:p})}})).catch(d=>{console.error("Error loading remote css",d.toString())});r.push(A)}})}catch(a){const i=t.find(o=>o.href==null)||document.styleSheets[0];s.href!=null&&r.push(ER(s.href).then(o=>_R(o,e)).then(o=>SR(o).forEach(l=>{i.insertRule(l,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",a)}}),Promise.all(r).then(()=>(t.forEach(s=>{if("cssRules"in s)try{Md(s.cssRules||[]).forEach(a=>{n.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${s.href}`,a)}}),n))}function K5e(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>Pj(e.style.getPropertyValue("src")))}async function q5e(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=Md(t.ownerDocument.styleSheets),r=await z5e(n,e);return K5e(r)}function Qj(t){return t.trim().replace(/["']/g,"")}function W5e(t){const e=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(a=>{e.add(Qj(a))}),Array.from(r.children).forEach(a=>{a instanceof HTMLElement&&n(a)})}return n(t),e}async function $5e(t,e){const n=await q5e(t,e),r=W5e(t);return(await Promise.all(n.filter(a=>r.has(Qj(a.style.fontFamily))).map(a=>{const i=a.parentStyleSheet?a.parentStyleSheet.href:null;return jj(a.cssText,i,e)}))).join(`
`)}async function Y5e(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await $5e(t,e);if(n){const r=document.createElement("style"),s=document.createTextNode(n);r.appendChild(s),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function J5e(t,e={}){const{width:n,height:r}=Dj(t,e),s=await tw(t,e,!0);return await Y5e(s,e),await Oj(s,e),G5e(s,e),await h5e(s,n,r)}async function X5e(t,e={}){const{width:n,height:r}=Dj(t,e),s=await J5e(t,e),a=await sy(s),i=document.createElement("canvas"),o=i.getContext("2d"),l=e.pixelRatio||u5e(),A=e.canvasWidth||n,d=e.canvasHeight||r;return i.width=A*l,i.height=d*l,e.skipAutoScale||d5e(i),i.style.width=`${A}`,i.style.height=`${d}`,e.backgroundColor&&(o.fillStyle=e.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(a,0,0,i.width,i.height),i}async function nw(t,e={}){return(await X5e(t,e)).toDataURL()}const TR="recursosAprendizaje_mindMaps_v2",Z5e=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1v4m0 0h-4m4-4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 0h-4m4 4l-5-5"})}),eSe=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),tSe=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),nSe=()=>u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Z_=(t,e)=>t.children.length===0?e:t.children.reduce((n,r)=>n+Z_(r,e),0),e5=(t,e="tree")=>{const n=[],r=[];if(e==="tree"){const i=(o,l,A,d)=>{const h=l*250;n.push({id:o.id,position:{x:h,y:A},data:{label:o.label},type:l===0?"input":"default",sourcePosition:an.Right,targetPosition:an.Left});const p=Z_(o,80);let g=A-p/2;o.children.forEach(w=>{const b=Z_(w,80),E=g+b/2;r.push({id:`e-${o.id}-${w.id}`,source:o.id,target:w.id,type:"smoothstep",animated:!0}),i(w,l+1,E),g+=b})};i(t,0,0)}else{n.push({id:t.id,position:{x:0,y:0},data:{label:t.label},type:"input"});const i=250,o=450;t.children.forEach((l,A)=>{const d=A/t.children.length*2*Math.PI,h=i*Math.cos(d),p=i*Math.sin(d);n.push({id:l.id,position:{x:h,y:p},data:{label:l.label}}),r.push({id:`e-${t.id}-${l.id}`,source:t.id,target:l.id,type:"smoothstep"}),l.children.forEach((g,w)=>{const b=d+(w-(l.children.length-1)/2)*.2,E=h+o*.5*Math.cos(b),B=p+o*.5*Math.sin(b);n.push({id:g.id,position:{x:E,y:B},data:{label:g.label}}),r.push({id:`e-${l.id}-${g.id}`,source:l.id,target:g.id,type:"smoothstep"})})})}return{nodes:n,edges:r}},Hj=({node:t,onUpdate:e,onAddChild:n,onDelete:r,level:s=0})=>{const a=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return u.jsxs("div",{className:`pl-4 ${s>0?"border-l "+i[s-1%i.length]:""}`,children:[u.jsx("div",{className:`p-2 rounded-lg my-1 ${a[s%a.length]}`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"text",value:t.label,onChange:o=>e(t.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),u.jsx("button",{onClick:()=>n(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),s>0&&u.jsx("button",{onClick:()=>r(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),t.children.map(o=>u.jsx(Hj,{node:o,onUpdate:e,onAddChild:n,onDelete:r,level:s+1},o.id))]})},rSe=({mapData:t,onBack:e,onSave:n})=>{const[r,s]=ee.useState(t.treeData),[a,i]=ee.useState("tree"),[o,l]=ee.useState(!1),[A,d,h]=K_e([]),[p,g,w]=q_e([]),{fitView:b}=ew();ee.useEffect(()=>{const{nodes:D,edges:P}=e5(r,a);d(D),g(P),setTimeout(()=>b({duration:300}),50)},[r,a,d,g,b]);const E=(D,P)=>{const S=JSON.parse(JSON.stringify(r)),N=T=>T.id===D?(T.label=P,!0):T.children.some(N);N(S),s(S)},B=D=>{const P=JSON.parse(JSON.stringify(r)),S=N=>N.id===D?(N.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):N.children.some(S);S(P),s(P)},I=D=>{const P=JSON.parse(JSON.stringify(r)),S=N=>{const T=N.children.findIndex(V=>V.id===D);return T!==-1?(N.children.splice(T,1),!0):N.children.some(S)};S(P),s(P)},k=()=>{l(!0);const{nodes:D,edges:P}=e5(r,a);n({...t,treeData:r,nodes:D,edges:P}),setTimeout(()=>l(!1),1e3)},F=async D=>{const P=document.querySelector(".react-flow");P&&nw(P,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(S=>{{const N=document.createElement("a");N.download=`${t.tema}.png`,N.href=S,N.click()}}).catch(S=>console.error("oops, something went wrong!",S))};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:t.tema}),u.jsx("button",{onClick:e,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:[u.jsxs(Nj,{nodes:A,edges:p,onNodesChange:h,onEdgesChange:w,fitView:!0,children:[u.jsx(e5e,{}),u.jsx(i5e,{})]}),u.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:u.jsxs("button",{onClick:()=>{},className:"bg-white/80 backdrop-blur-sm dark:bg-slate-800/80 p-2 rounded-lg shadow border dark:border-slate-700 flex items-center gap-2 text-sm",children:[u.jsx(Z5e,{})," Pantalla completa"]})})]}),u.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),u.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[u.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${a==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[u.jsx(eSe,{})," Vista en árbol"]}),u.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${a==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[u.jsx(tSe,{})," Vista con tema central"]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:u.jsx(Hj,{node:r,onUpdate:E,onAddChild:B,onDelete:I})}),u.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[u.jsx("button",{onClick:()=>F(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),u.jsx("button",{onClick:k,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},sSe=({onBack:t})=>{const[e,n]=ee.useState("list"),[r,s]=ee.useState([]),[a,i]=ee.useState(null),[o,l]=ee.useState(!1),[A,d]=ee.useState(""),[h,p]=ee.useState(""),[g,w]=ee.useState("");ee.useEffect(()=>{try{const D=localStorage.getItem(TR);D&&s(JSON.parse(D))}catch(D){console.error("Error loading mind maps",D)}},[]);const b=D=>{s(D),localStorage.setItem(TR,JSON.stringify(D))},E=async D=>{if(D.preventDefault(),!A.trim()){alert("El tema es obligatorio.");return}l(!0);const P=`Basado en el tema central "${A}", y considerando el contenido adicional "${g}", genera una estructura jerárquica detallada para un mapa mental con al menos 3 niveles de profundidad. La estructura debe ser un desglose lógico del tema en subtemas.

La respuesta DEBE ser un único objeto JSON válido. Cada nodo en el JSON debe tener las propiedades "id" (un string único generado con crypto.randomUUID()), "label" (el texto del nodo), y "children" (un array de nodos hijos con la misma estructura).`;try{const N=await new Sa({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:P,config:{responseMimeType:"application/json"}}),T=JSON.parse(N.text.trim()),{nodes:V,edges:M}=e5(T),U={id:crypto.randomUUID(),tema:A,nivel:h,treeData:T,nodes:V,edges:M,createdAt:new Date().toISOString()};i(U),n("editor")}catch(S){console.error("AI Generation Error:",S),alert("Hubo un error al generar el mapa mental con la IA. Inténtelo de nuevo.")}finally{l(!1)}},B=D=>{const S=r.findIndex(N=>N.id===D.id)>-1?r.map(N=>N.id===D.id?D:N):[D,...r];b(S)},I=D=>{i(D),n("editor")},k=D=>{window.confirm("¿Eliminar este mapa mental?")&&b(r.filter(P=>P.id!==D))},F=()=>{switch(e){case"editor":return a?u.jsx(r4,{children:u.jsx(rSe,{mapData:a,onBack:()=>n("list"),onSave:B})}):null;case"config":return u.jsxs("div",{className:"max-w-2xl mx-auto",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),u.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),u.jsxs("form",{onSubmit:E,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",id:"tema",value:A,onChange:D=>d(D.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),u.jsx("textarea",{id:"contenido",value:g,onChange:D=>w(D.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),u.jsx("div",{className:"flex justify-end pt-4",children:u.jsx("button",{type:"submit",disabled:o,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:o?u.jsx(nSe,{}):"Generar Mapa con IA"})})]})]});case"list":default:return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),u.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.length>0?r.map(D=>u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[u.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:D.tema}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(D.createdAt).toLocaleDateString("es-CL")]}),u.jsxs("div",{className:"mt-4 flex gap-2",children:[u.jsx("button",{onClick:()=>I(D),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),u.jsx("button",{onClick:()=>k(D.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},D.id)):u.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsx("span",{className:"text-4xl",children:"🧠"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),u.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),F()]})},aSe=()=>u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),iSe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),oSe=({onBack:t})=>{const[e,n]=ee.useState("Media"),[r,s]=ee.useState(10),[a,i]=ee.useState(!1),[o,l]=ee.useState(Array(10).fill("")),[A,d]=ee.useState(""),[h,p]=ee.useState(null),[g,w]=ee.useState({ai:!1,puzzle:!1}),b=ee.useRef(null);ee.useEffect(()=>{l(P=>{const S=Array(r).fill("");for(let N=0;N<Math.min(P.length,r);N++)S[N]=P[N];return S})},[r]);const E=(P,S)=>{const N=[...o];N[P]=S,l(N)},B=async()=>{if(A.trim()){w(P=>({...P,ai:!0}));try{const P=new Sa({apiKey:void 0}),S=`Genera una lista de ${r} palabras clave, en español, relacionadas con el tema "${A}". Las palabras no deben contener espacios ni caracteres especiales.`,N={type:Tt.OBJECT,properties:{palabras:{type:Tt.ARRAY,items:{type:Tt.STRING}}},required:["palabras"]},T=await P.models.generateContent({model:"gemini-2.5-flash",contents:S,config:{responseMimeType:"application/json",responseSchema:N}}),U=[...JSON.parse(T.text).palabras.map(O=>O.toUpperCase().replace(/\s/g,"")).slice(0,r)];for(;U.length<r;)U.push("");l(U)}catch(P){console.error("Error generating words with AI:",P),alert("No se pudieron generar las palabras. Inténtelo de nuevo.")}finally{w(P=>({...P,ai:!1}))}}},I=(P,S,N,T,V,M)=>{for(let U=0;U<P.length;U++){const O=N+U*V.y,G=T+U*V.x;if(O<0||O>=M||G<0||G>=M||S[O][G]&&S[O][G]!==P[U])return!1}return!0},k=(P,S,N,T,V)=>{for(let M=0;M<P.length;M++)S[N+M*V.y][T+M*V.x]=P[M]},F=()=>{w(P=>({...P,puzzle:!0})),p(null),setTimeout(()=>{const P=o.map(U=>U.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(P.length===0){alert("Por favor, ingrese al menos una palabra válida."),w(U=>({...U,puzzle:!1}));return}const S=Math.max(...P.map(U=>U.length));let N=Math.max(S,P.length)+2;e==="Media"&&(N+=3),e==="Difícil"&&(N+=5),N=Math.min(Math.max(N,10),25);const T=Array(N).fill(null).map(()=>Array(N).fill(null)),V=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];e!=="Fácil"&&V.push({x:1,y:-1}),e==="Difícil"&&V.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const U of P.sort((O,G)=>G.length-O.length)){let O=!1;for(let G=0;G<100;G++){const ie=V[Math.floor(Math.random()*V.length)],K=Math.floor(Math.random()*N),q=Math.floor(Math.random()*N);if(I(U,T,K,q,ie,N)){k(U,T,K,q,ie),O=!0;break}}O||console.warn(`No se pudo colocar la palabra: ${U}`)}const M=T.map(U=>U.map(O=>O||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)]));p({grid:M,words:P.sort()}),w(U=>({...U,puzzle:!1}))},100)},D=()=>{b.current&&nw(b.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(P=>{const S=document.createElement("a");S.download="sopa-de-letras.png",S.href=P,S.click()}).catch(P=>{console.error("oops, something went wrong!",P),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("span",{className:"text-4xl",children:"🅰️"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),u.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!h&&u.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),u.jsxs("select",{value:e,onChange:P=>n(P.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{children:"Fácil"}),u.jsx("option",{children:"Media"}),u.jsx("option",{children:"Difícil"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(P=>u.jsx("button",{onClick:()=>{s(P),i(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!a&&r===P?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:P},P)),u.jsx("button",{onClick:()=>i(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${a?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),a&&u.jsx("input",{type:"number",value:r,onChange:P=>s(parseInt(P.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{id:"ai-theme",type:"text",value:A,onChange:P=>d(P.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("button",{onClick:B,disabled:g.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:g.ai?u.jsx(aSe,{}):u.jsxs(u.Fragment,{children:[u.jsx(iSe,{}),u.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:o.map((P,S)=>u.jsx("input",{type:"text",value:P,onChange:N=>E(S,N.target.value),placeholder:`Palabra ${S+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},S))})]}),u.jsx("div",{className:"text-right pt-4",children:u.jsx("button",{onClick:F,disabled:g.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:g.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),h&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{ref:b,className:"p-6 bg-white",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[u.jsx("div",{className:"md:col-span-2",children:u.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${h.grid.length}, minmax(0, 1fr))`},children:h.grid.flat().map((P,S)=>u.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:P},S))})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),u.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:h.words.map(P=>u.jsx("li",{children:P},P))})]})]})}),u.jsxs("div",{className:"flex justify-end gap-4",children:[u.jsx("button",{onClick:()=>p(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),u.jsx("button",{onClick:D,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]})},BR="recursosAprendizaje_timelines",lSe=()=>u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),cSe=({timeline:t,onSave:e,onBack:n})=>{const[r,s]=ee.useState(t),a=ee.useRef(null),i=(d,h,p)=>{s(g=>({...g,events:g.events.map(w=>w.id===d?{...w,[h]:p}:w)}))},o=()=>{const d={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},h=[...r.events,d].sort((p,g)=>parseInt(p.date)-parseInt(g.date));s(p=>({...p,events:h}))},l=d=>{s(h=>({...h,events:h.events.filter(p=>p.id!==d)}))},A=()=>{a.current&&nw(a.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(d=>{const h=document.createElement("a");h.download=`linea-tiempo-${r.tema.replace(/\s+/g,"_")}.png`,h.href=d,h.click()}).catch(d=>{console.error("Error al generar la imagen:",d),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:r.tema}),u.jsx("button",{onClick:n,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:u.jsxs("div",{ref:a,className:"relative p-10",children:[u.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),u.jsx("div",{className:"relative",children:r.events.sort((d,h)=>parseInt(d.date)-parseInt(h.date)).map((d,h)=>{const p=h%2===0;return u.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[u.jsx("div",{className:"w-1/2",children:p&&u.jsx("div",{className:"text-right pr-8",children:u.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[u.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:d.icon}),u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:d.date}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:d.description})]})})}),u.jsx("div",{className:"z-10 flex-shrink-0",children:u.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),u.jsx("div",{className:"w-1/2",children:!p&&u.jsx("div",{className:"text-left pl-8",children:u.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[u.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:d.icon}),u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:d.date}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:d.description})]})})})]},d.id)})})]})}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),u.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:r.events.map(d=>u.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[u.jsx("input",{type:"text",value:d.date,onChange:h=>i(d.id,"date",h.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),u.jsx("textarea",{value:d.description,onChange:h=>i(d.id,"description",h.target.value),placeholder:"Descripción",rows:2,className:"w-full bg-transparent text-sm dark:text-slate-300"}),u.jsx("button",{onClick:()=>l(d.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},d.id))}),u.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[u.jsx("button",{onClick:o,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:A,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),u.jsx("button",{onClick:()=>e(r),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},ASe=({onBack:t})=>{const[e,n]=ee.useState("list"),[r,s]=ee.useState([]),[a,i]=ee.useState(null),[o,l]=ee.useState(!1),[A,d]=ee.useState(""),[h,p]=ee.useState(""),[g,w]=ee.useState("");ee.useEffect(()=>{try{const k=localStorage.getItem(BR);k&&s(JSON.parse(k))}catch(k){console.error("Error al cargar líneas de tiempo",k)}},[]);const b=k=>{s(k),localStorage.setItem(BR,JSON.stringify(k))},E=async k=>{if(k.preventDefault(),!A.trim()){alert("El tema es obligatorio.");return}l(!0);const F=h&&g?`entre ${h} y ${g}`:h?`a partir de ${h}`:g?`hasta ${g}`:"",D=`Genera una línea de tiempo sobre el tema "${A}" ${F}. Crea entre 5 y 10 hitos clave ordenados cronológicamente. Para cada hito, proporciona una fecha o año, una descripción breve y un emoji representativo.`,P={type:Tt.OBJECT,properties:{events:{type:Tt.ARRAY,items:{type:Tt.OBJECT,properties:{date:{type:Tt.STRING},description:{type:Tt.STRING},icon:{type:Tt.STRING}},required:["date","description"]}}},required:["events"]};try{const N=await new Sa({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:D,config:{responseMimeType:"application/json",responseSchema:P}}),T=JSON.parse(N.text),V={id:crypto.randomUUID(),tema:A,fechaInicio:h,fechaFin:g,createdAt:new Date().toISOString(),events:T.events.map(M=>({...M,id:crypto.randomUUID()}))};i(V),n("editor")}catch(S){console.error("AI Generation Error:",S),alert("Hubo un error al generar la línea de tiempo. Inténtelo de nuevo.")}finally{l(!1)}},B=k=>{r.findIndex(D=>D.id===k.id)>-1?b(r.map(D=>D.id===k.id?k:D)):b([k,...r]),n("list"),i(null)},I=k=>{window.confirm("¿Eliminar esta línea de tiempo?")&&b(r.filter(F=>F.id!==k))};return e==="editor"&&a?u.jsx(cSe,{timeline:a,onSave:B,onBack:()=>n("list")}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("span",{className:"text-4xl",children:"🕒"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),u.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),u.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),u.jsxs("form",{onSubmit:E,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",id:"tema",value:A,onChange:k=>d(k.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),u.jsx("input",{type:"text",id:"fechaInicio",value:h,onChange:k=>p(k.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),u.jsx("input",{type:"text",id:"fechaFin",value:g,onChange:k=>w(k.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),u.jsx("div",{className:"text-right",children:u.jsx("button",{type:"submit",disabled:o,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:o?u.jsx(lSe,{}):"Generar con IA"})})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),r.length>0?r.map(k=>u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:k.tema}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(k.createdAt).toLocaleDateString("es-CL")]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>{i(k),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),u.jsx("button",{onClick:()=>I(k.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},k.id)):u.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},uSe=()=>u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),dSe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),fSe=({onBack:t})=>{const[e,n]=ee.useState(10),[r,s]=ee.useState(!1),[a,i]=ee.useState(Array(10).fill("")),[o,l]=ee.useState(Array(10).fill("")),[A,d]=ee.useState(""),[h,p]=ee.useState(null),[g,w]=ee.useState(!1),[b,E]=ee.useState({ai:!1,puzzle:!1}),B=ee.useRef(null);ee.useEffect(()=>{const T=e;i(V=>Array.from({length:T},(M,U)=>V[U]||"")),l(V=>Array.from({length:T},(M,U)=>V[U]||""))},[e]);const I=(T,V)=>{const M=[...a];M[T]=V,i(M)},k=(T,V)=>{const M=[...o];M[T]=V,l(M)},F=async()=>{if(A.trim()){E(T=>({...T,ai:!0}));try{const T=new Sa({apiKey:void 0}),V=`Genera una lista de ${e} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${A}". Las palabras no deben contener espacios.`,M={type:Tt.OBJECT,properties:{items:{type:Tt.ARRAY,items:{type:Tt.OBJECT,properties:{word:{type:Tt.STRING},clue:{type:Tt.STRING}},required:["word","clue"]}}},required:["items"]},U=await T.models.generateContent({model:"gemini-2.5-flash",contents:V,config:{responseMimeType:"application/json",responseSchema:M}}),O=JSON.parse(U.text),G=O.items.map(K=>K.word.toUpperCase().replace(/\s/g,"")),ie=O.items.map(K=>K.clue);i(Array.from({length:e},(K,q)=>G[q]||"")),l(Array.from({length:e},(K,q)=>ie[q]||""))}catch(T){console.error("Error generating words/clues with AI:",T),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{E(T=>({...T,ai:!1}))}}},D=ee.useCallback(()=>{try{const T=a.map((ae,Re)=>({word:ae.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:o[Re]})).filter(ae=>ae.word.length>0);if(T.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;T.sort((ae,Re)=>Re.word.length-ae.word.length);const V=T[0].word.length,M=Math.max(V,T.length)*2;let U=Array.from({length:M},()=>Array(M).fill(null));const O=[],G=T.shift(),ie=Math.floor(M/2),K=Math.floor((M-G.word.length)/2);for(let ae=0;ae<G.word.length;ae++)U[ie][K+ae]=G.word[ae];O.push({word:G.word,clue:G.clue,direction:"across",row:ie,col:K});for(const ae of T){let Re={score:-1,row:-1,col:-1,direction:"across"};for(const Je of O)for(let De=0;De<Je.word.length;De++)for(let Ee=0;Ee<ae.word.length;Ee++)if(Je.word[De]===ae.word[Ee]){let Ge=0,tt,it,mt;Je.direction==="across"?(mt="down",tt=Je.row-Ee,it=Je.col+De):(mt="across",tt=Je.row+De,it=Je.col-Ee);let Ct=!0;for(let At=0;At<ae.word.length;At++){const Nt=tt+(mt==="down"?At:0),It=it+(mt==="across"?At:0);if(Nt<0||Nt>=M||It<0||It>=M){Ct=!1;break}const qt=U[Nt][It],Lt=Nt===Je.row+(Je.direction==="down"?De:0)&&It===Je.col+(Je.direction==="across"?De:0);if(qt&&!Lt){Ct=!1;break}if(qt&&Lt&&qt!==ae.word[Ee]){Ct=!1;break}if(!Lt){if(mt==="across"&&(Nt>0&&U[Nt-1][It]||Nt<M-1&&U[Nt+1][It])){Ct=!1;break}if(mt==="down"&&(It>0&&U[Nt][It-1]||It<M-1&&U[Nt][It+1])){Ct=!1;break}}qt&&Ge++}Ct&&Ge>Re.score&&(Re={score:Ge,row:tt,col:it,direction:mt})}if(Re.score>-1){for(let Je=0;Je<ae.word.length;Je++){const De=Re.row+(Re.direction==="down"?Je:0),Ee=Re.col+(Re.direction==="across"?Je:0);U[De][Ee]=ae.word[Je]}O.push({word:ae.word,clue:ae.clue,direction:Re.direction,row:Re.row,col:Re.col})}}let q=M,se=-1,Z=M,X=-1;O.forEach(ae=>{q=Math.min(q,ae.row),se=Math.max(se,ae.row+(ae.direction==="down"?ae.word.length-1:0)),Z=Math.min(Z,ae.col),X=Math.max(X,ae.col+(ae.direction==="across"?ae.word.length-1:0))}),se===-1&&(q=O[0].row,se=O[0].row,Z=O[0].col,X=O[0].col+O[0].word.length-1);const de=1,j=Math.max(0,q-de),W=Math.min(M,se+1+de),J=Math.max(0,Z-de),ne=Math.min(M,X+1+de),oe=U.slice(j,W).map(ae=>ae.slice(J,ne)),ue=O.map(ae=>({...ae,row:ae.row-j,col:ae.col-J})).sort((ae,Re)=>ae.row-Re.row||ae.col-Re.col);let me=1;const ge=[],ke=new Map;ue.forEach(ae=>{const Re=`${ae.row},${ae.col}`;ke.has(Re)||ke.set(Re,me++),ge.push({...ae,number:ke.get(Re)})});const ve=oe.map(ae=>ae.map(Re=>({char:Re,number:null})));return ge.forEach(ae=>{const Re=`${ae.row},${ae.col}`;ve[ae.row]&&ve[ae.row][ae.col]!==void 0&&(ve[ae.row][ae.col].number=ke.get(Re))}),{grid:ve,clues:{across:ge.filter(ae=>ae.direction==="across").sort((ae,Re)=>ae.number-Re.number),down:ge.filter(ae=>ae.direction==="down").sort((ae,Re)=>ae.number-Re.number)}}}catch(T){return console.error("Error generating crossword grid:",T),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[a,o]),P=()=>{E(T=>({...T,puzzle:!0})),p(null),setTimeout(()=>{const T=D();T&&p(T),E(V=>({...V,puzzle:!1}))},100)},S=()=>{B.current&&(w(!1),setTimeout(()=>{nw(B.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(T=>{const V=document.createElement("a");V.download="crucigrama.png",V.href=T,V.click()}).catch(T=>console.error("Error generating image",T))},100))},N=()=>h?u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{ref:B,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsx("div",{children:u.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${h.grid[0].length}, 2rem)`},children:h.grid.flat().map((T,V)=>u.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:T.char?"white":"black"},children:[T.number&&u.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:T.number}),g&&T.char&&u.jsx("span",{children:T.char})]},V))})}),u.jsxs("div",{className:"text-sm",children:[u.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),u.jsx("ul",{className:"space-y-1",children:h.clues.across.map(T=>u.jsxs("li",{children:[u.jsxs("strong",{children:[T.number,"."]})," ",T.clue]},`${T.word}-${T.clue}`))}),u.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),u.jsx("ul",{className:"space-y-1",children:h.clues.down.map(T=>u.jsxs("li",{children:[u.jsxs("strong",{children:[T.number,"."]})," ",T.clue]},`${T.word}-${T.clue}`))})]})]})}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",checked:g,onChange:()=>w(!g),className:"h-5 w-5 rounded"}),u.jsx("span",{children:"Mostrar Solución"})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:()=>p(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),u.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):null;return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("span",{className:"text-4xl",children:"✏️"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),u.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),h?N():u.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(T=>u.jsx("button",{onClick:()=>{n(T),s(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!r&&e===T?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:T},T)),u.jsx("button",{onClick:()=>s(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${r?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),r&&u.jsx("input",{type:"number",value:e,onChange:T=>n(parseInt(T.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{id:"ai-theme",type:"text",value:A,onChange:T=>d(T.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("button",{onClick:F,disabled:b.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:b.ai?u.jsx(uSe,{}):u.jsxs(u.Fragment,{children:[u.jsx(dSe,{}),u.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),u.jsx("div",{className:"space-y-3",children:Array.from({length:e}).map((T,V)=>u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[u.jsx("input",{type:"text",value:a[V],onChange:M=>I(V,M.target.value),placeholder:`Palabra ${V+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("textarea",{value:o[V],onChange:M=>k(V,M.target.value),placeholder:`Pista ${V+1}`,rows:1,className:"md:col-span-2 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]},V))}),u.jsx("div",{className:"text-right pt-4",children:u.jsx("button",{onClick:P,disabled:b.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:b.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},hSe=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],mSe=({recurso:t,onClick:e})=>u.jsxs("button",{onClick:e,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[u.jsx("div",{className:"text-6xl mb-4",children:t.icon}),u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:t.nombre}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:t.descripcion})]}),pSe=()=>{const[t,e]=ee.useState("menu"),n=()=>t==="mapasMentales"?u.jsx(sSe,{onBack:()=>e("menu")}):t==="sopaDeLetras"?u.jsx(oSe,{onBack:()=>e("menu")}):t==="lineasDeTiempo"?u.jsx(ASe,{onBack:()=>e("menu")}):t==="crucigramas"?u.jsx(fSe,{onBack:()=>e("menu")}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:hSe.map(r=>u.jsx(mSe,{recurso:r,onClick:()=>e(r.id)},r.id))})]});return u.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},gSe="evaluacionesFormativas",xSe="calificacionesFormativas",ZC="trabajosGrupalesFormativos",vSe=({currentUser:t})=>{const[e,n]=ee.useState([]),[r,s]=ee.useState({}),[a,i]=ee.useState([]),[o,l]=ee.useState(null),[A,d]=ee.useState(!1),[h,p]=ee.useState(null),g=ee.useRef(null);ee.useEffect(()=>{try{const I=localStorage.getItem(gSe);I&&n(JSON.parse(I));const k=localStorage.getItem(xSe);k&&s(JSON.parse(k));const F=localStorage.getItem(ZC);F&&i(JSON.parse(F))}catch(I){console.error("Error al cargar datos desde localStorage",I)}},[]);const w=ee.useMemo(()=>{if(!t.curso)return[];const k=e.filter(F=>F.curso===t.curso).reduce((F,D)=>((F[D.asignatura]=F[D.asignatura]||[]).push(D),F),{});return Object.entries(k).map(([F,D])=>{let P=0,S=0;const N=D.map(V=>{var O;const M=(O=r[V.id])==null?void 0:O[t.nombreCompleto];let U="No Trabajado";return M==="trabajado"?(P+=7,S++,U="Trabajado"):M==="no trabajado"&&(P+=2,S++,U="No Trabajado"),{id:V.id,nombreActividad:V.nombreActividad,fecha:V.fecha,estado:U}}).filter(V=>{var M;return(M=r[V.id])==null?void 0:M[t.nombreCompleto]}),T=S>0?(P/S).toFixed(1):"N/A";return{asignatura:F,promedio:T,actividades:N.sort((V,M)=>new Date(M.fecha).getTime()-new Date(V.fecha).getTime())}}).filter(F=>F.actividades.length>0).sort((F,D)=>F.asignatura.localeCompare(D.asignatura))},[e,r,t]);ee.useEffect(()=>{if(w.reduce((S,N)=>S+N.actividades.length,0)===0){l(null);return}const k=w.reduce((S,N)=>{const T=parseFloat(N.promedio);return isNaN(T)?S:S+T},0),F=w.length>0?k/w.length:0,D=N1.find(S=>F>=S.promedioMin&&F<=S.promedioMax)||null,P=N1.filter(S=>F>=S.promedioMin);if(l({puntajeTotal:0,promedio:F,rangoActual:D,insigniasGanadas:P}),g.current!==null){const S=N1.find(N=>g.current>=N.promedioMin&&g.current<=N.promedioMax)||null;D&&(!S||D.nombre!==S.nombre)&&p(D)}g.current=F},[w]);const b=ee.useMemo(()=>t.curso?a.filter(I=>I.curso===t.curso).map(I=>{const k=I.grupos.find(F=>F.integrantes.some(D=>D.nombre===t.nombreCompleto));return k?{...I,miGrupo:k}:null}).filter(I=>I!==null).sort((I,k)=>new Date(k.fechaPresentacion).getTime()-new Date(I.fechaPresentacion).getTime()):[],[a,t]),E=(I,k)=>{const F=localStorage.getItem(ZC),P=(F?JSON.parse(F):[]).map(S=>{if(S.id===I){const N=S.grupos.map(T=>{if(T.integrantes.some(M=>M.nombre===t.nombreCompleto)){const M=T.integrantes.map(U=>U.nombre===t.nombreCompleto?{...U,rol:k||void 0}:U);return{...T,integrantes:M}}return T});return{...S,grupos:N}}return S});localStorage.setItem(ZC,JSON.stringify(P)),i(P)},B=I=>{const k=parseFloat(I);return isNaN(k)?"bg-slate-400":k<4?"bg-red-500":k<5.5?"bg-yellow-500":"bg-green-500"};return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[h&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>p(null),children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:I=>I.stopPropagation(),children:[u.jsx("div",{className:"text-8xl animate-bounce",children:h.emoji}),u.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),u.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:h.nombre}),u.jsx("p",{className:"text-slate-600 mt-4",children:h.mensaje}),u.jsx("button",{onClick:()=>p(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),A&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>d(!1),children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:I=>I.stopPropagation(),children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),u.jsx("div",{className:"overflow-y-auto space-y-3",children:N1.map(I=>{const k=o==null?void 0:o.insigniasGanadas.some(F=>F.nombre===I.nombre);return u.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${k?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[u.jsx("div",{className:"text-5xl",children:I.emoji}),u.jsxs("div",{children:[u.jsx("h3",{className:`font-bold ${k?"text-amber-700":"text-slate-600"}`,children:I.nombre}),u.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",I.promedioMin," y ",I.promedioMax]})]})]},I.nombre)})})]})}),u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),u.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),o&&o.rangoActual&&u.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),u.jsx("h2",{className:"text-3xl font-bold",children:o.rangoActual.nombre}),u.jsx("button",{onClick:()=>d(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-7xl",children:o.rangoActual.emoji}),u.jsx("p",{className:"font-bold text-2xl mt-2",children:o.promedio.toFixed(1)}),u.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),w.length>0?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(I=>u.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800",children:I.asignatura}),u.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),u.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${B(I.promedio)}`,children:I.promedio})]}),u.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),I.actividades.map(k=>u.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-slate-700",children:k.nombreActividad}),u.jsx("p",{className:"text-xs text-slate-500",children:new Date(k.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),u.jsx("span",{className:`font-semibold ${k.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:k.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},k.id))]})]},I.asignatura))}):u.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[u.jsx("span",{className:"text-5xl",children:"📊"}),u.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),u.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),b.length>0&&u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),u.jsx("div",{className:"space-y-4",children:b.map(I=>{const k=I.miGrupo.integrantes.filter(D=>D.nombre!==t.nombreCompleto&&D.rol).map(D=>D.rol),F=MU.filter(D=>!k.includes(D));return u.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[u.jsx("h3",{className:"font-bold text-slate-800",children:I.nombreActividad}),u.jsxs("p",{className:"text-sm text-slate-500",children:[I.asignatura," - Presentación: ",new Date(I.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),u.jsxs("div",{className:"mt-3 pt-3 border-t",children:[u.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",I.miGrupo.numero]}),u.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:I.miGrupo.integrantes.map(D=>u.jsxs("li",{className:"grid grid-cols-2 items-center",children:[u.jsx("span",{className:D.nombre===t.nombreCompleto?"font-bold":"",children:D.nombre}),D.nombre===t.nombreCompleto?u.jsxs("select",{value:D.rol||"",onChange:P=>E(I.id,P.target.value),className:"text-sm p-1 border rounded w-full",children:[u.jsx("option",{value:"",children:"-- Seleccionar rol --"}),D.rol&&!F.includes(D.rol)&&u.jsx("option",{value:D.rol,children:D.rol}),F.map(P=>u.jsx("option",{value:P,children:P},P))]}):u.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:D.rol||"Sin rol"})]},D.nombre))})]})]},I.id)})})]})]})},ySe="planificacionesInterdisciplinarias",NR="entregasTareasInterdisciplinarias",wSe=({currentUser:t})=>{const[e,n]=ee.useState([]),[r,s]=ee.useState([]),[a,i]=ee.useState(null);ee.useEffect(()=>{const p=()=>{try{const g=localStorage.getItem(ySe);g&&n(JSON.parse(g));const w=localStorage.getItem(NR);w&&s(JSON.parse(w))}catch(g){console.error("Error al cargar datos desde localStorage",g)}};return p(),window.addEventListener("storage",p),()=>window.removeEventListener("storage",p)},[]);const o=ee.useMemo(()=>e.filter(p=>p.cursos.includes(t.curso||"")),[e,t.curso]),l=p=>{s(p),localStorage.setItem(NR,JSON.stringify(p)),window.dispatchEvent(new Event("storage"))},A=(p,g)=>{let w=r.find(b=>b.planificacionId===p&&b.tareaId===g&&b.estudianteId===t.id);return w||(w={id:crypto.randomUUID(),planificacionId:p,tareaId:g,estudianteId:t.id,estudianteNombre:t.nombreCompleto,completada:!1}),w},d=p=>{const g=r.findIndex(b=>b.id===p.id);let w;g>-1?w=r.map(b=>b.id===p.id?p:b):w=[...r,p],l(w)},h=({plan:p,tarea:g})=>{const w=ee.useMemo(()=>A(p.id,g.id),[p.id,g.id,r]),[b,E]=ee.useState(!1),[B,I]=ee.useState({observaciones:w.observacionesEstudiante||"",enlace:w.enlaceUrl||""}),k=P=>{var N;const S=(N=P.target.files)==null?void 0:N[0];if(S){const T=new FileReader;T.onloadend=()=>{d({...w,archivoAdjunto:{nombre:S.name,url:T.result},fechaCompletado:new Date().toISOString()})},T.readAsDataURL(S)}},F=()=>{d({...w,observacionesEstudiante:B.observaciones,enlaceUrl:B.enlace,fechaCompletado:new Date().toISOString()})},D=()=>{d({...w,completada:!w.completada,fechaCompletado:new Date().toISOString()})};return u.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("input",{type:"checkbox",checked:w.completada,onChange:D,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("p",{className:`font-semibold ${w.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",g.numero,": ",g.instrucciones]}),u.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",g.fechaEntrega]}),g.recursoUrl&&u.jsx("a",{href:g.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),u.jsx("button",{onClick:()=>E(!b),className:"text-sm font-semibold",children:b?"Ocultar":"Entregar"})]}),b&&u.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[u.jsx("textarea",{value:B.observaciones,onChange:P=>I({...B,observaciones:P.target.value}),onBlur:F,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),u.jsx("input",{type:"url",value:B.enlace,onChange:P=>I({...B,enlace:P.target.value}),onBlur:F,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),u.jsx("input",{type:"file",onChange:k,className:"text-sm"}),w.archivoAdjunto&&u.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",w.archivoAdjunto.nombre]})]}),w.feedbackProfesor&&u.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[u.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),u.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:w.feedbackProfesor})]})]})};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),o.length>0?o.map(p=>{const g=p.tareas||[],b=r.filter(B=>B.planificacionId===p.id&&B.estudianteId===t.id).filter(B=>B.completada).length,E=g.length>0?b/g.length*100:0;return u.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[u.jsxs("button",{onClick:()=>i(a===p.id?null:p.id),className:"w-full text-left",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:p.nombreProyecto}),u.jsxs("div",{className:"mt-2 space-y-1",children:[u.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[u.jsx("span",{children:"Progreso"}),u.jsxs("span",{children:[Math.round(E),"%"]})]}),u.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:u.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${E}%`}})})]})]}),a===p.id&&u.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:g.length>0?g.map(B=>u.jsx(h,{plan:p,tarea:B},B.id)):u.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},p.id)}):u.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[u.jsx("span",{className:"text-5xl",children:"🎉"}),u.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),u.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},bSe="acompanamientoDocenteRecords",CSe="acompanamientoDocenteCustomRubrica",ESe=({data:t})=>u.jsx("div",{className:"space-y-4",children:t.map((n,r)=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[u.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:n.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),u.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[n.value.toFixed(2)," / 4.00"]})]}),u.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:u.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${n.value/4*100}%`}})})]},n.label+r))}),_Se=({currentUser:t})=>{const[e,n]=ee.useState([]),[r,s]=ee.useState(null),[a,i]=ee.useState(m2);ee.useEffect(()=>{try{const A=localStorage.getItem(bSe);if(A){const p=JSON.parse(A).filter(g=>g.docente===t.nombreCompleto).sort((g,w)=>new Date(w.fecha).getTime()-new Date(g.fecha).getTime());n(p)}const d=localStorage.getItem(CSe);d&&i(JSON.parse(d))}catch(A){console.error("Error al cargar datos de acompañamiento",A)}},[t.nombreCompleto]);const o=ee.useMemo(()=>{if(!r)return[];const A={};return a.forEach(d=>{A[d.domain]={total:0,count:0},d.criteria.forEach(h=>{const p=r.rubricaResultados[h.name];p&&(A[d.domain].total+=p,A[d.domain].count++)})}),Object.entries(A).map(([d,h])=>({label:d,value:h.count>0?h.total/h.count:0}))},[r,a]),l=A=>{const d=new sn;d.setFont("helvetica","bold"),d.setFontSize(16),d.text("Informe de Acompañamiento Docente",105,20,{align:"center"}),d.setFontSize(12),d.setFont("helvetica","normal"),Tl(d,{startY:30,body:[["Docente:",A.docente],["Fecha:",new Date(A.fecha).toLocaleDateString("es-CL")],["Asignatura:",A.asignatura],["Curso:",A.curso]],theme:"plain"});let h=d.lastAutoTable.finalY+10;const p=(g,w)=>{if(!w)return;h>250&&(d.addPage(),h=20),d.setFont("helvetica","bold"),d.setFontSize(14),d.text(g,14,h),h+=8,d.setFont("helvetica","normal"),d.setFontSize(11);const b=d.splitTextToSize(w.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);d.text(b,14,h),h+=b.length*5+10};p("Observaciones Generales",A.observacionesGenerales),p("Retroalimentación Consolidada",A.retroalimentacionConsolidada),d.save(`Acompanamiento_${t.nombreCompleto.replace(/\s/g,"_")}.pdf`)};return r?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("div",{children:[u.jsx("button",{onClick:()=>s(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(r.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",r.curso," - ",r.asignatura]})]}),u.jsxs("button",{onClick:()=>l(r),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[u.jsx(LU,{})," Exportar PDF"]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx("div",{className:"lg:col-span-2 space-y-6",children:u.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[u.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),u.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:u.jsx("p",{className:"whitespace-pre-wrap",children:r.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),u.jsx("h3",{children:"Observaciones Generales"}),u.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:u.jsx("p",{className:"whitespace-pre-wrap",children:r.observacionesGenerales||"Sin observaciones."})})]})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),u.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:u.jsx(ESe,{data:o})})]})]})]}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),u.jsx("div",{className:"space-y-4",children:e.length>0?e.map(A=>u.jsx("button",{onClick:()=>s(A),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[A.curso," - ",A.asignatura]}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(A.fecha).toLocaleDateString("es-CL")]})]}),u.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},A.id)):u.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[u.jsx("span",{className:"text-5xl",children:"👍"}),u.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},SSe="planificacionesDocente",TSe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),BSe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),NSe=({plan:t,onClose:e})=>{const n=s=>u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",s.objetivosAprendizaje]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Indicadores de Evaluación:"})," ",s.indicadoresEvaluacion]}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[u.jsx("strong",{children:"Contenidos Clave:"})," ",s.contenidos]})]}),u.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",s.cantidadClases,")"]}),u.jsx("div",{className:"space-y-3 max-h-[40vh] overflow-y-auto pr-2",children:s.detallesLeccion.map((a,i)=>u.jsxs("div",{className:"p-3 border dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",children:[u.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",i+1,": ",a.actividades]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[u.jsxs("span",{children:[u.jsx("strong",{children:"Objetivo:"})," ",a.objetivosAprendizaje]}),u.jsxs("span",{children:[u.jsx("strong",{children:"Contenidos:"})," ",a.contenidosConceptuales]}),u.jsxs("span",{children:[u.jsx("strong",{children:"Habilidad (Bloom):"})," ",a.habilidadesBloom]}),u.jsxs("span",{children:[u.jsx("strong",{children:"Perfil de Egreso:"})," ",a.perfilEgreso]}),u.jsxs("span",{className:"md:col-span-2",children:[u.jsx("strong",{children:"Interdisciplinariedad:"})," ",a.asignaturasInterdisciplinariedad]})]})]},i))})]}),r=s=>u.jsxs("div",{className:"space-y-4",children:[u.jsxs("p",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[u.jsx("strong",{children:"Contenidos:"})," ",s.contenidos]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Inicio"}),u.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:s.momentosClase.inicio})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Desarrollo"}),u.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:s.momentosClase.desarrollo})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Cierre"}),u.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:s.momentosClase.cierre})]})]})]});return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:e,children:u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:s=>s.stopPropagation(),children:[u.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:t.tipo==="Unidad"?t.nombreUnidad:t.nombreClase}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.asignatura," | ",t.nivel," | Autor: ",t.autor||"N/A"]})]}),u.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:u.jsx(BSe,{})})]}),u.jsx("main",{className:"p-4 flex-1 overflow-y-auto",children:t.tipo==="Unidad"?n(t):r(t)})]})})},kSe=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState("1º"),[s,a]=ee.useState(null),[i,o]=ee.useState(null),l=ee.useCallback(()=>{try{const p=localStorage.getItem(SSe);p&&e(JSON.parse(p))}catch(p){console.error("Error al leer planificaciones de localStorage",p)}},[]);ee.useEffect(()=>(l(),window.addEventListener("storage",l),()=>{window.removeEventListener("storage",l)}),[l]);const A=ee.useMemo(()=>{const g={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"}[n];return t.filter(w=>w.nivel===g)},[t,n]),d=p=>{a(g=>g===p?null:p)},h=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Seguimiento Curricular"}),u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:u.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:h.map(p=>u.jsx("button",{onClick:()=>r(p.key),className:`${n===p.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg transition-colors focus:outline-none`,children:p.label},p.key))})}),u.jsx("div",{className:"space-y-4",children:Ho.map(p=>{const g=A.filter(b=>b.asignatura===p);if(g.length===0)return null;const w=s===p;return u.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[u.jsxs("button",{onClick:()=>d(p),className:"w-full flex justify-between items-center p-4 text-left",children:[u.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:p}),u.jsx("span",{className:`transform transition-transform duration-200 ${w?"rotate-180":""}`,children:u.jsx(TSe,{})})]}),w&&u.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 animate-fade-in-up",children:u.jsx("ul",{className:"space-y-3",children:g.length>0?g.map(b=>u.jsx("li",{children:u.jsxs("button",{onClick:()=>o(b),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[u.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:b.tipo==="Unidad"?b.nombreUnidad:b.nombreClase}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Autor: ",b.autor||"No especificado"," - Creado: ",new Date(b.fechaCreacion).toLocaleDateString("es-CL")]})]})},b.id)):u.jsx("li",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No hay planificaciones para esta asignatura."})})})]},p)})})]}),i&&u.jsx(NSe,{plan:i,onClose:()=>o(null)})]})},kR="analisisTaxonomicos",IR=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],FR={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},ISe=()=>u.jsxs("svg",{className:"animate-spin h-5 w-5 text-slate-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),RR=({currentUser:t})=>{const[e,n]=ee.useState([]),[r,s]=ee.useState(null),[a,i]=ee.useState(""),[o,l]=ee.useState(!1),[A,d]=ee.useState(null),[h,p]=ee.useState(null),[g,w]=ee.useState(null);ee.useEffect(()=>{try{const F=localStorage.getItem(kR);if(F){const D=JSON.parse(F);n(D)}}catch(F){console.error("Error al cargar historial de análisis",F)}},[]);const b=F=>{n(F),localStorage.setItem(kR,JSON.stringify(F))},E=async F=>{var P;const D=(P=F.target.files)==null?void 0:P[0];if(D){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(D.type)){d("Por favor, suba un archivo PDF o DOCX válido."),p(null),w(null),i("");return}p(D),i(D.name),d(null);const N=new FileReader;N.onloadend=()=>{const T=N.result.split(",")[1];if(!T){d("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),w(null);return}w({mimeType:D.type,data:T})},N.onerror=()=>{d("Error al leer el archivo."),w(null)},N.readAsDataURL(D)}},B=async()=>{if(!a.trim()||!g){d("Debe subir un documento PDF o DOCX y asignarle un nombre para analizar.");return}l(!0),d(null);const F=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados.
        `,D={type:Tt.OBJECT,properties:{analysisResults:{type:Tt.ARRAY,description:"Un array con cada pregunta identificada y su clasificación de Bloom.",items:{type:Tt.OBJECT,properties:{question:{type:Tt.STRING,description:"El texto exacto de la pregunta."},habilidadBloom:{type:Tt.STRING,description:"El nivel de Bloom correspondiente.",enum:IR}},required:["question","habilidadBloom"]}},summary:{type:Tt.OBJECT,description:"Un resumen con el conteo de preguntas por cada nivel de Bloom.",properties:{Recordar:{type:Tt.INTEGER},Comprender:{type:Tt.INTEGER},Aplicar:{type:Tt.INTEGER},Analizar:{type:Tt.INTEGER},Evaluar:{type:Tt.INTEGER},Crear:{type:Tt.INTEGER}}}},required:["analysisResults","summary"]};try{mo("Análisis Taxonómico");const P=new Sa({apiKey:void 0}),S={inlineData:{mimeType:g.mimeType,data:g.data}},N=await P.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:F},S]},config:{responseMimeType:"application/json",responseSchema:D}}),T=JSON.parse(N.text),V={id:crypto.randomUUID(),documentName:a,uploadDate:new Date().toISOString(),userId:t.id,analysisResults:T.analysisResults,summary:T.summary},M=[V,...e];b(M),s(V),i(""),p(null),w(null)}catch(P){console.error(P),d("Hubo un error al analizar el documento. Asegúrese de que el archivo no esté protegido o vacío. Inténtelo de nuevo.")}finally{l(!1)}},I=F=>{if(window.confirm("¿Está seguro de eliminar este análisis?")){const D=e.filter(P=>P.id!==F);b(D),(r==null?void 0:r.id)===F&&s(null)}},k=ee.useMemo(()=>r?Object.values(r.summary).reduce((F,D)=>F+(D||0),0):0,[r]);return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonómico de Evaluaciones"}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),u.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:u.jsxs("div",{className:"space-y-1 text-center",children:[u.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:u.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),u.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[u.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500 focus-within:outline-none",children:[u.jsx("span",{children:"Cargue un archivo"}),u.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:E,accept:".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"})]}),u.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:h?h.name:"PDF, DOCX hasta 10MB"})]})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento/Prueba"}),u.jsx("input",{type:"text",id:"documentName",value:a,onChange:F=>i(F.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),A&&u.jsx("p",{className:"text-sm text-red-600 bg-red-100 p-3 rounded-md",children:A}),u.jsx("button",{onClick:B,disabled:o||!g,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:o?u.jsx(ISe,{}):"Analizar con IA"})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),u.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:e.length>0?e.map(F=>u.jsxs("button",{onClick:()=>s(F),className:`w-full text-left p-3 rounded-md border ${(r==null?void 0:r.id)===F.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/30 dark:border-amber-700":"bg-slate-50 hover:bg-slate-100 dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[u.jsx("p",{className:"font-semibold truncate",children:F.documentName}),u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(F.uploadDate).toLocaleString("es-CL")})]},F.id)):u.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"No hay análisis guardados."})})]})]}),u.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:r?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:r.documentName}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(r.uploadDate).toLocaleString("es-CL")]})]}),u.jsx("button",{onClick:()=>I(r.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado Taxonómico (",k," preguntas)"]}),u.jsx("div",{className:"space-y-3",children:IR.map(F=>{const D=r.summary[F]||0,P=k>0?D/k*100:0;return u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[u.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:F}),u.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[D," (",P.toFixed(0),"%)"]})]}),u.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:u.jsx("div",{className:`${FR[F]} h-4 rounded-full`,style:{width:`${P}%`}})})]},F)})})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),u.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:r.analysisResults.map((F,D)=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:F.question}),u.jsx("td",{className:"px-4 py-3 text-sm",children:u.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${FR[F.habilidadBloom]}`,children:F.habilidadBloom})})]},D))})]})})]})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[u.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📊"}),u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})},FSe=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},RSe=({currentUser:t,onLogout:e,onUserUpdate:n,onChangeProfile:r,unreadMessagesCount:s,refreshUnreadCount:a})=>{const i=t.profile,o=ee.useMemo(()=>{const E=Eq[i]??[];return i!==nn.ESTUDIANTE?E:E.filter(B=>{if(B.name==="Asistencia a Empresa"){const I=FSe(t.curso||"");return I.startsWith("3º")||I.startsWith("4º")}return!0})},[i,t.curso]),[l,A]=ee.useState(null),[d,h]=ee.useState(!1);ee.useEffect(()=>{o.length>0?A(o[0]):A(null)},[o]);const p=ee.useCallback(E=>{A(E),window.innerWidth<768&&h(!1)},[]),g=ee.useCallback(E=>{const B=o.find(I=>I.name===E);B&&p(B)},[o,p]),w=()=>u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-slate-700 px-4 flex-shrink-0",children:[u.jsx(cq,{}),u.jsx("span",{className:"ml-3 text-white font-bold text-xl whitespace-nowrap",children:"Gestión LIR"})]}),u.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto sidebar-scroll",children:o.map(E=>u.jsxs("button",{onClick:()=>p(E),className:`w-full flex items-center py-3 px-4 rounded-lg transition-colors duration-200 text-left ${(l==null?void 0:l.name)===E.name?"bg-slate-900 text-amber-400 font-semibold":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[E.icon,u.jsx("span",{className:"ml-4",children:E.name})]},E.name))})]}),b=()=>{if(!l)return u.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex items-center justify-center",children:u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl",children:"Seleccione un módulo del menú para comenzar."})});if(l.name==="Calendario Académico")return u.jsx(tre,{profile:i});if(l.name==="Muro de Anuncios")return u.jsx(nre,{currentUser:t});if(l.name==="Mensajería Interna")return u.jsx(kpe,{currentUser:t,refreshUnreadCount:a});if(l.name==="Generador de Actas")return u.jsx(sre,{});if(i===nn.SUBDIRECCION){if(l.name==="Dashboard")return u.jsx(Oq,{});if(l.name==="Administración")return u.jsx(Zme,{});if(l.name==="Seguimiento Curricular")return u.jsx(kSe,{});if(l.name==="Acompañamiento docente")return u.jsx(Bpe,{});if(l.name==="Análisis Taxonómico")return u.jsx(RR,{currentUser:t});if(l.name==="Interdisciplinario")return u.jsx(_6,{});if(l.name==="Registro de inasistencias y reemplazos docentes")return u.jsx(Lq,{});if(l.name==="Crear horarios")return u.jsx(Gne,{});if(l.name==="Seguimiento de acciones pedagógicas")return u.jsx(Kne,{});if(l.name==="Inclusión")return u.jsx(pF,{currentUser:t})}if(i===nn.PROFESORADO){if(l.name==="Planificación")return u.jsx(Jne,{currentUser:t});if(l.name==="Mis Acompañamientos")return u.jsx(_Se,{currentUser:t});if(l.name==="Recursos de Aprendizaje")return u.jsx(pSe,{});if(l.name==="Análisis Taxonómico")return u.jsx(RR,{currentUser:t});if(l.name==="Interdisciplinario")return u.jsx(_6,{});if(l.name==="Inclusión")return u.jsx(pF,{currentUser:t});if(l.name==="Actividades Remotas")return u.jsx(ipe,{});if(l.name==="Evaluación de Aprendizajes")return u.jsx($se,{});if(l.name==="Evaluaciones Formativas")return u.jsx(Spe,{currentUser:t})}if(i===nn.COORDINACION_TP){if(l.name==="Seguimiento Dual")return u.jsx(npe,{});if(l.name==="Asistencia Dual")return u.jsx(ype,{});if(l.name==="Pañol")return u.jsx(fye,{})}if(i===nn.ESTUDIANTE){if(l.name==="Auto-aprendizaje")return u.jsx(upe,{currentUser:t});if(l.name==="Evaluación Formativa")return u.jsx(vSe,{currentUser:t});if(l.name==="Tareas Interdisciplinarias")return u.jsx(wSe,{currentUser:t});if(l.name==="Asistencia a Empresa")return u.jsx(mpe,{currentUser:t})}return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:l.name}),u.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:u.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",u.jsx("span",{className:"font-semibold",children:l.name}),"."]})})]})};return u.jsxs("div",{className:"h-screen flex flex-col bg-slate-100",children:[u.jsx(Fq,{currentUser:t,onLogout:e,onNavigate:g,onUserUpdate:n,onChangeProfile:r,toggleSidebar:()=>h(!d),unreadMessagesCount:s,refreshUnreadCount:a}),u.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[d&&u.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black opacity-50 z-20 md:hidden"}),u.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 w-72 bg-slate-800 text-white flex flex-col transform md:translate-x-0 ${d?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:u.jsx(w,{})}),u.jsx("main",{className:"flex-1 overflow-y-auto",children:u.jsx("div",{className:"p-6 md:p-8",children:b()})})]})]})},DSe=()=>{const[t,e]=ee.useState(null),[n,r]=ee.useState(null),[s,a]=ee.useState(null);ee.useEffect(()=>{const A=jH(Tb,async d=>{if(e(d),r(null),d&&d.email){const h=await tq(KK(oq,"usuarios",d.email));h.exists()?r(h.data()):a("Usuario no registrado en base de datos interna.")}});return()=>A()},[]);const i=async(A,d)=>{a(null);try{await LH(Tb,A,d)}catch{a("Credenciales incorrectas o usuario no registrado.")}},o=async()=>{await OH(Tb),e(null),r(null)},l=()=>t?n?u.jsx(RSe,{currentUser:n,onLogout:o}):u.jsx("div",{className:"p-12 text-center text-lg",children:"Cargando usuario..."}):u.jsx(Bq,{onLoginAttempt:i,error:s});return u.jsx("div",{className:"min-h-screen bg-slate-100 font-sans",children:l()})},Vj=document.getElementById("root");if(!Vj)throw new Error("Could not find root element to mount to");const USe=tQ.createRoot(Vj);USe.render(u.jsx(ut.StrictMode,{children:u.jsx(DSe,{})}));export{Lr as _,LSe as c,t5 as g};
