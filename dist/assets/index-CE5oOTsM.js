(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var m3e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Vz(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var zC={exports:{}},wg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RT;function zz(){if(RT)return wg;RT=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var i=null;if(s!==void 0&&(i=""+s),a.key!==void 0&&(i=""+a.key),"key"in a){s={};for(var o in a)o!=="key"&&(s[o]=a[o])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:i,ref:a!==void 0?a:null,props:s}}return wg.Fragment=t,wg.jsx=r,wg.jsxs=r,wg}var LT;function Gz(){return LT||(LT=1,zC.exports=zz()),zC.exports}var l=Gz(),GC={exports:{}},Kr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OT;function Kz(){if(OT)return Kr;OT=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function m(z){return z===null||typeof z!="object"?null:(z=h&&z[h]||z["@@iterator"],typeof z=="function"?z:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function E(z,Z,R){this.props=z,this.context=Z,this.refs=x,this.updater=R||p}E.prototype.isReactComponent={},E.prototype.setState=function(z,Z){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Z,"setState")},E.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function _(){}_.prototype=E.prototype;function B(z,Z,R){this.props=z,this.context=Z,this.refs=x,this.updater=R||p}var T=B.prototype=new _;T.constructor=B,v(T,E.prototype),T.isPureReactComponent=!0;var I=Array.isArray,L={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function w(z,Z,R,K,X,re){return R=re.ref,{$$typeof:e,type:z,key:Z,ref:R!==void 0?R:null,props:re}}function y(z,Z){return w(z.type,Z,void 0,void 0,void 0,z.props)}function N(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function U(z){var Z={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(R){return Z[R]})}var j=/\/+/g;function F(z,Z){return typeof z=="object"&&z!==null&&z.key!=null?U(""+z.key):Z.toString(36)}function P(){}function M(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(P,P):(z.status="pending",z.then(function(Z){z.status==="pending"&&(z.status="fulfilled",z.value=Z)},function(Z){z.status==="pending"&&(z.status="rejected",z.reason=Z)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function ee(z,Z,R,K,X){var re=typeof z;(re==="undefined"||re==="boolean")&&(z=null);var ne=!1;if(z===null)ne=!0;else switch(re){case"bigint":case"string":case"number":ne=!0;break;case"object":switch(z.$$typeof){case e:case t:ne=!0;break;case d:return ne=z._init,ee(ne(z._payload),Z,R,K,X)}}if(ne)return X=X(z),ne=K===""?"."+F(z,0):K,I(X)?(R="",ne!=null&&(R=ne.replace(j,"$&/")+"/"),ee(X,Z,R,"",function(be){return be})):X!=null&&(N(X)&&(X=y(X,R+(X.key==null||z&&z.key===X.key?"":(""+X.key).replace(j,"$&/")+"/")+ne)),Z.push(X)),1;ne=0;var ue=K===""?".":K+":";if(I(z))for(var fe=0;fe<z.length;fe++)K=z[fe],re=ue+F(K,fe),ne+=ee(K,Z,R,re,X);else if(fe=m(z),typeof fe=="function")for(z=fe.call(z),fe=0;!(K=z.next()).done;)K=K.value,re=ue+F(K,fe++),ne+=ee(K,Z,R,re,X);else if(re==="object"){if(typeof z.then=="function")return ee(M(z),Z,R,K,X);throw Z=String(z),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return ne}function W(z,Z,R){if(z==null)return z;var K=[],X=0;return ee(z,K,"","",function(re){return Z.call(R,re,X++)}),K}function te(z){if(z._status===-1){var Z=z._result;Z=Z(),Z.then(function(R){(z._status===0||z._status===-1)&&(z._status=1,z._result=R)},function(R){(z._status===0||z._status===-1)&&(z._status=2,z._result=R)}),z._status===-1&&(z._status=0,z._result=Z)}if(z._status===1)return z._result.default;throw z._result}var G=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function q(){}return Kr.Children={map:W,forEach:function(z,Z,R){W(z,function(){Z.apply(this,arguments)},R)},count:function(z){var Z=0;return W(z,function(){Z++}),Z},toArray:function(z){return W(z,function(Z){return Z})||[]},only:function(z){if(!N(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Kr.Component=E,Kr.Fragment=r,Kr.Profiler=a,Kr.PureComponent=B,Kr.StrictMode=n,Kr.Suspense=c,Kr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Kr.__COMPILER_RUNTIME={__proto__:null,c:function(z){return L.H.useMemoCache(z)}},Kr.cache=function(z){return function(){return z.apply(null,arguments)}},Kr.cloneElement=function(z,Z,R){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var K=v({},z.props),X=z.key,re=void 0;if(Z!=null)for(ne in Z.ref!==void 0&&(re=void 0),Z.key!==void 0&&(X=""+Z.key),Z)!k.call(Z,ne)||ne==="key"||ne==="__self"||ne==="__source"||ne==="ref"&&Z.ref===void 0||(K[ne]=Z[ne]);var ne=arguments.length-2;if(ne===1)K.children=R;else if(1<ne){for(var ue=Array(ne),fe=0;fe<ne;fe++)ue[fe]=arguments[fe+2];K.children=ue}return w(z.type,X,void 0,void 0,re,K)},Kr.createContext=function(z){return z={$$typeof:i,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:s,_context:z},z},Kr.createElement=function(z,Z,R){var K,X={},re=null;if(Z!=null)for(K in Z.key!==void 0&&(re=""+Z.key),Z)k.call(Z,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(X[K]=Z[K]);var ne=arguments.length-2;if(ne===1)X.children=R;else if(1<ne){for(var ue=Array(ne),fe=0;fe<ne;fe++)ue[fe]=arguments[fe+2];X.children=ue}if(z&&z.defaultProps)for(K in ne=z.defaultProps,ne)X[K]===void 0&&(X[K]=ne[K]);return w(z,re,void 0,void 0,null,X)},Kr.createRef=function(){return{current:null}},Kr.forwardRef=function(z){return{$$typeof:o,render:z}},Kr.isValidElement=N,Kr.lazy=function(z){return{$$typeof:d,_payload:{_status:-1,_result:z},_init:te}},Kr.memo=function(z,Z){return{$$typeof:A,type:z,compare:Z===void 0?null:Z}},Kr.startTransition=function(z){var Z=L.T,R={};L.T=R;try{var K=z(),X=L.S;X!==null&&X(R,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(q,G)}catch(re){G(re)}finally{L.T=Z}},Kr.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Kr.use=function(z){return L.H.use(z)},Kr.useActionState=function(z,Z,R){return L.H.useActionState(z,Z,R)},Kr.useCallback=function(z,Z){return L.H.useCallback(z,Z)},Kr.useContext=function(z){return L.H.useContext(z)},Kr.useDebugValue=function(){},Kr.useDeferredValue=function(z,Z){return L.H.useDeferredValue(z,Z)},Kr.useEffect=function(z,Z,R){var K=L.H;if(typeof R=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(z,Z)},Kr.useId=function(){return L.H.useId()},Kr.useImperativeHandle=function(z,Z,R){return L.H.useImperativeHandle(z,Z,R)},Kr.useInsertionEffect=function(z,Z){return L.H.useInsertionEffect(z,Z)},Kr.useLayoutEffect=function(z,Z){return L.H.useLayoutEffect(z,Z)},Kr.useMemo=function(z,Z){return L.H.useMemo(z,Z)},Kr.useOptimistic=function(z,Z){return L.H.useOptimistic(z,Z)},Kr.useReducer=function(z,Z,R){return L.H.useReducer(z,Z,R)},Kr.useRef=function(z){return L.H.useRef(z)},Kr.useState=function(z){return L.H.useState(z)},Kr.useSyncExternalStore=function(z,Z,R){return L.H.useSyncExternalStore(z,Z,R)},Kr.useTransition=function(){return L.H.useTransition()},Kr.version="19.1.1",Kr}var UT;function g1(){return UT||(UT=1,GC.exports=Kz()),GC.exports}var Q=g1();const mt=fy(Q);var KC={exports:{}},yg={},qC={exports:{}},$C={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PT;function qz(){return PT||(PT=1,function(e){function t(W,te){var G=W.length;W.push(te);e:for(;0<G;){var q=G-1>>>1,z=W[q];if(0<a(z,te))W[q]=te,W[G]=z,G=q;else break e}}function r(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var te=W[0],G=W.pop();if(G!==te){W[0]=G;e:for(var q=0,z=W.length,Z=z>>>1;q<Z;){var R=2*(q+1)-1,K=W[R],X=R+1,re=W[X];if(0>a(K,G))X<z&&0>a(re,K)?(W[q]=re,W[X]=G,q=X):(W[q]=K,W[R]=G,q=R);else if(X<z&&0>a(re,G))W[q]=re,W[X]=G,q=X;else break e}}return te}function a(W,te){var G=W.sortIndex-te.sortIndex;return G!==0?G:W.id-te.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],A=[],d=1,h=null,m=3,p=!1,v=!1,x=!1,E=!1,_=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function I(W){for(var te=r(A);te!==null;){if(te.callback===null)n(A);else if(te.startTime<=W)n(A),te.sortIndex=te.expirationTime,t(c,te);else break;te=r(A)}}function L(W){if(x=!1,I(W),!v)if(r(c)!==null)v=!0,k||(k=!0,F());else{var te=r(A);te!==null&&ee(L,te.startTime-W)}}var k=!1,w=-1,y=5,N=-1;function U(){return E?!0:!(e.unstable_now()-N<y)}function j(){if(E=!1,k){var W=e.unstable_now();N=W;var te=!0;try{e:{v=!1,x&&(x=!1,B(w),w=-1),p=!0;var G=m;try{t:{for(I(W),h=r(c);h!==null&&!(h.expirationTime>W&&U());){var q=h.callback;if(typeof q=="function"){h.callback=null,m=h.priorityLevel;var z=q(h.expirationTime<=W);if(W=e.unstable_now(),typeof z=="function"){h.callback=z,I(W),te=!0;break t}h===r(c)&&n(c),I(W)}else n(c);h=r(c)}if(h!==null)te=!0;else{var Z=r(A);Z!==null&&ee(L,Z.startTime-W),te=!1}}break e}finally{h=null,m=G,p=!1}te=void 0}}finally{te?F():k=!1}}}var F;if(typeof T=="function")F=function(){T(j)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,M=P.port2;P.port1.onmessage=j,F=function(){M.postMessage(null)}}else F=function(){_(j,0)};function ee(W,te){w=_(function(){W(e.unstable_now())},te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(W){switch(m){case 1:case 2:case 3:var te=3;break;default:te=m}var G=m;m=te;try{return W()}finally{m=G}},e.unstable_requestPaint=function(){E=!0},e.unstable_runWithPriority=function(W,te){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var G=m;m=W;try{return te()}finally{m=G}},e.unstable_scheduleCallback=function(W,te,G){var q=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?q+G:q):G=q,W){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=G+z,W={id:d++,callback:te,priorityLevel:W,startTime:G,expirationTime:z,sortIndex:-1},G>q?(W.sortIndex=G,t(A,W),r(c)===null&&W===r(A)&&(x?(B(w),w=-1):x=!0,ee(L,G-q))):(W.sortIndex=z,t(c,W),v||p||(v=!0,k||(k=!0,F()))),W},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(W){var te=m;return function(){var G=m;m=te;try{return W.apply(this,arguments)}finally{m=G}}}}($C)),$C}var MT;function $z(){return MT||(MT=1,qC.exports=qz()),qC.exports}var WC={exports:{}},Li={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QT;function Wz(){if(QT)return Li;QT=1;var e=g1();function t(c){var A="https://react.dev/errors/"+c;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)A+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(c,A,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:c,containerInfo:A,implementation:d}}var i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,A){if(c==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}return Li.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Li.createPortal=function(c,A){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error(t(299));return s(c,A,null,d)},Li.flushSync=function(c){var A=i.T,d=n.p;try{if(i.T=null,n.p=2,c)return c()}finally{i.T=A,n.p=d,n.d.f()}},Li.preconnect=function(c,A){typeof c=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,n.d.C(c,A))},Li.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},Li.preinit=function(c,A){if(typeof c=="string"&&A&&typeof A.as=="string"){var d=A.as,h=o(d,A.crossOrigin),m=typeof A.integrity=="string"?A.integrity:void 0,p=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;d==="style"?n.d.S(c,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:p}):d==="script"&&n.d.X(c,{crossOrigin:h,integrity:m,fetchPriority:p,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},Li.preinitModule=function(c,A){if(typeof c=="string")if(typeof A=="object"&&A!==null){if(A.as==null||A.as==="script"){var d=o(A.as,A.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})}}else A==null&&n.d.M(c)},Li.preload=function(c,A){if(typeof c=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){var d=A.as,h=o(d,A.crossOrigin);n.d.L(c,d,{crossOrigin:h,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},Li.preloadModule=function(c,A){if(typeof c=="string")if(A){var d=o(A.as,A.crossOrigin);n.d.m(c,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:d,integrity:typeof A.integrity=="string"?A.integrity:void 0})}else n.d.m(c)},Li.requestFormReset=function(c){n.d.r(c)},Li.unstable_batchedUpdates=function(c,A){return c(A)},Li.useFormState=function(c,A,d){return i.H.useFormState(c,A,d)},Li.useFormStatus=function(){return i.H.useHostTransitionStatus()},Li.version="19.1.1",Li}var HT;function aL(){if(HT)return WC.exports;HT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),WC.exports=Wz(),WC.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT;function Xz(){if(VT)return yg;VT=1;var e=$z(),t=g1(),r=aL();function n(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function s(u){var f=u,g=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(g=f.return),u=f.return;while(u)}return f.tag===3?g:null}function i(u){if(u.tag===13){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function o(u){if(s(u)!==u)throw Error(n(188))}function c(u){var f=u.alternate;if(!f){if(f=s(u),f===null)throw Error(n(188));return f!==u?null:u}for(var g=u,b=f;;){var D=g.return;if(D===null)break;var H=D.alternate;if(H===null){if(b=D.return,b!==null){g=b;continue}break}if(D.child===H.child){for(H=D.child;H;){if(H===g)return o(D),u;if(H===b)return o(D),f;H=H.sibling}throw Error(n(188))}if(g.return!==b.return)g=D,b=H;else{for(var ie=!1,xe=D.child;xe;){if(xe===g){ie=!0,g=D,b=H;break}if(xe===b){ie=!0,b=D,g=H;break}xe=xe.sibling}if(!ie){for(xe=H.child;xe;){if(xe===g){ie=!0,g=H,b=D;break}if(xe===b){ie=!0,b=H,g=D;break}xe=xe.sibling}if(!ie)throw Error(n(189))}}if(g.alternate!==b)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?u:f}function A(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(f=A(u),f!==null)return f;u=u.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function F(u){return u===null||typeof u!="object"?null:(u=j&&u[j]||u["@@iterator"],typeof u=="function"?u:null)}var P=Symbol.for("react.client.reference");function M(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===P?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case v:return"Fragment";case E:return"Profiler";case x:return"StrictMode";case L:return"Suspense";case k:return"SuspenseList";case N:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case p:return"Portal";case T:return(u.displayName||"Context")+".Provider";case B:return(u._context.displayName||"Context")+".Consumer";case I:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case w:return f=u.displayName||null,f!==null?f:M(u.type)||"Memo";case y:f=u._payload,u=u._init;try{return M(u(f))}catch{}}return null}var ee=Array.isArray,W=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},q=[],z=-1;function Z(u){return{current:u}}function R(u){0>z||(u.current=q[z],q[z]=null,z--)}function K(u,f){z++,q[z]=u.current,u.current=f}var X=Z(null),re=Z(null),ne=Z(null),ue=Z(null);function fe(u,f){switch(K(ne,f),K(re,u),K(X,null),f.nodeType){case 9:case 11:u=(u=f.documentElement)&&(u=u.namespaceURI)?cT(u):0;break;default:if(u=f.tagName,f=f.namespaceURI)f=cT(f),u=uT(f,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}R(X),K(X,u)}function be(){R(X),R(re),R(ne)}function Ce(u){u.memoizedState!==null&&K(ue,u);var f=X.current,g=uT(f,u.type);f!==g&&(K(re,u),K(X,g))}function me(u){re.current===u&&(R(X),R(re)),ue.current===u&&(R(ue),pg._currentValue=G)}var oe=Object.prototype.hasOwnProperty,Le=e.unstable_scheduleCallback,Ye=e.unstable_cancelCallback,Te=e.unstable_shouldYield,we=e.unstable_requestPaint,Fe=e.unstable_now,He=e.unstable_getCurrentPriorityLevel,Xe=e.unstable_ImmediatePriority,ut=e.unstable_UserBlockingPriority,Et=e.unstable_NormalPriority,At=e.unstable_LowPriority,jt=e.unstable_IdlePriority,Dt=e.log,Yt=e.unstable_setDisableYieldValue,Rt=null,Ut=null;function qt(u){if(typeof Dt=="function"&&Yt(u),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(Rt,u)}catch{}}var De=Math.clz32?Math.clz32:We,Oe=Math.log,ke=Math.LN2;function We(u){return u>>>=0,u===0?32:31-(Oe(u)/ke|0)|0}var ft=256,$t=4194304;function zt(u){var f=u&42;if(f!==0)return f;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function tr(u,f,g){var b=u.pendingLanes;if(b===0)return 0;var D=0,H=u.suspendedLanes,ie=u.pingedLanes;u=u.warmLanes;var xe=b&134217727;return xe!==0?(b=xe&~H,b!==0?D=zt(b):(ie&=xe,ie!==0?D=zt(ie):g||(g=xe&~u,g!==0&&(D=zt(g))))):(xe=b&~H,xe!==0?D=zt(xe):ie!==0?D=zt(ie):g||(g=b&~u,g!==0&&(D=zt(g)))),D===0?0:f!==0&&f!==D&&(f&H)===0&&(H=D&-D,g=f&-f,H>=g||H===32&&(g&4194048)!==0)?f:D}function Hr(u,f){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&f)===0}function or(u,f){switch(u){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mn(){var u=ft;return ft<<=1,(ft&4194048)===0&&(ft=256),u}function Lr(){var u=$t;return $t<<=1,($t&62914560)===0&&($t=4194304),u}function En(u){for(var f=[],g=0;31>g;g++)f.push(u);return f}function Vn(u,f){u.pendingLanes|=f,f!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function ar(u,f,g,b,D,H){var ie=u.pendingLanes;u.pendingLanes=g,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=g,u.entangledLanes&=g,u.errorRecoveryDisabledLanes&=g,u.shellSuspendCounter=0;var xe=u.entanglements,je=u.expirationTimes,at=u.hiddenUpdates;for(g=ie&~g;0<g;){var pt=31-De(g),Ct=1<<pt;xe[pt]=0,je[pt]=-1;var it=at[pt];if(it!==null)for(at[pt]=null,pt=0;pt<it.length;pt++){var ot=it[pt];ot!==null&&(ot.lane&=-536870913)}g&=~Ct}b!==0&&Jt(u,b,0),H!==0&&D===0&&u.tag!==0&&(u.suspendedLanes|=H&~(ie&~f))}function Jt(u,f,g){u.pendingLanes|=f,u.suspendedLanes&=~f;var b=31-De(f);u.entangledLanes|=f,u.entanglements[b]=u.entanglements[b]|1073741824|g&4194090}function Mr(u,f){var g=u.entangledLanes|=f;for(u=u.entanglements;g;){var b=31-De(g),D=1<<b;D&f|u[b]&f&&(u[b]|=f),g&=~D}}function ms(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function Zn(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function _a(){var u=te.p;return u!==0?u:(u=window.event,u===void 0?32:kT(u.type))}function js(u,f){var g=te.p;try{return te.p=u,f()}finally{te.p=g}}var Kt=Math.random().toString(36).slice(2),pn="__reactFiber$"+Kt,on="__reactProps$"+Kt,Dn="__reactContainer$"+Kt,zn="__reactEvents$"+Kt,ea="__reactListeners$"+Kt,Ae="__reactHandles$"+Kt,Ne="__reactResources$"+Kt,ye="__reactMarker$"+Kt;function Ee(u){delete u[pn],delete u[on],delete u[zn],delete u[ea],delete u[Ae]}function _e(u){var f=u[pn];if(f)return f;for(var g=u.parentNode;g;){if(f=g[Dn]||g[pn]){if(g=f.alternate,f.child!==null||g!==null&&g.child!==null)for(u=hT(u);u!==null;){if(g=u[pn])return g;u=hT(u)}return f}u=g,g=u.parentNode}return null}function Be(u){if(u=u[pn]||u[Dn]){var f=u.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return u}return null}function $e(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u.stateNode;throw Error(n(33))}function st(u){var f=u[Ne];return f||(f=u[Ne]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function ze(u){u[ye]=!0}var Ze=new Set,rt={};function yt(u,f){It(u,f),It(u+"Capture",f)}function It(u,f){for(rt[u]=f,u=0;u<f.length;u++)Ze.add(f[u])}var Qt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Tt={},Lt={};function pr(u){return oe.call(Lt,u)?!0:oe.call(Tt,u)?!1:Qt.test(u)?Lt[u]=!0:(Tt[u]=!0,!1)}function Vr(u,f,g){if(pr(f))if(g===null)u.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":u.removeAttribute(f);return;case"boolean":var b=f.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){u.removeAttribute(f);return}}u.setAttribute(f,""+g)}}function zr(u,f,g){if(g===null)u.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(f);return}u.setAttribute(f,""+g)}}function Wr(u,f,g,b){if(b===null)u.removeAttribute(g);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(g);return}u.setAttributeNS(f,g,""+b)}}var Ra,_i;function La(u){if(Ra===void 0)try{throw Error()}catch(g){var f=g.stack.trim().match(/\n( *(at )?)/);Ra=f&&f[1]||"",_i=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ra+u+_i}var ps=!1;function Za(u,f){if(!u||ps)return"";ps=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(f){var Ct=function(){throw Error()};if(Object.defineProperty(Ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ct,[])}catch(ot){var it=ot}Reflect.construct(u,[],Ct)}else{try{Ct.call()}catch(ot){it=ot}u.call(Ct.prototype)}}else{try{throw Error()}catch(ot){it=ot}(Ct=u())&&typeof Ct.catch=="function"&&Ct.catch(function(){})}}catch(ot){if(ot&&it&&typeof ot.stack=="string")return[ot.stack,it.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var D=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");D&&D.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var H=b.DetermineComponentFrameRoot(),ie=H[0],xe=H[1];if(ie&&xe){var je=ie.split(`
`),at=xe.split(`
`);for(D=b=0;b<je.length&&!je[b].includes("DetermineComponentFrameRoot");)b++;for(;D<at.length&&!at[D].includes("DetermineComponentFrameRoot");)D++;if(b===je.length||D===at.length)for(b=je.length-1,D=at.length-1;1<=b&&0<=D&&je[b]!==at[D];)D--;for(;1<=b&&0<=D;b--,D--)if(je[b]!==at[D]){if(b!==1||D!==1)do if(b--,D--,0>D||je[b]!==at[D]){var pt=`
`+je[b].replace(" at new "," at ");return u.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",u.displayName)),pt}while(1<=b&&0<=D);break}}}finally{ps=!1,Error.prepareStackTrace=g}return(g=u?u.displayName||u.name:"")?La(g):""}function Ds(u){switch(u.tag){case 26:case 27:case 5:return La(u.type);case 16:return La("Lazy");case 13:return La("Suspense");case 19:return La("SuspenseList");case 0:case 15:return Za(u.type,!1);case 11:return Za(u.type.render,!1);case 1:return Za(u.type,!0);case 31:return La("Activity");default:return""}}function ta(u){try{var f="";do f+=Ds(u),u=u.return;while(u);return f}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function gs(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Jc(u){var f=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function dd(u){var f=Jc(u)?"checked":"value",g=Object.getOwnPropertyDescriptor(u.constructor.prototype,f),b=""+u[f];if(!u.hasOwnProperty(f)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var D=g.get,H=g.set;return Object.defineProperty(u,f,{configurable:!0,get:function(){return D.call(this)},set:function(ie){b=""+ie,H.call(this,ie)}}),Object.defineProperty(u,f,{enumerable:g.enumerable}),{getValue:function(){return b},setValue:function(ie){b=""+ie},stopTracking:function(){u._valueTracker=null,delete u[f]}}}}function wl(u){u._valueTracker||(u._valueTracker=dd(u))}function sA(u){if(!u)return!1;var f=u._valueTracker;if(!f)return!0;var g=f.getValue(),b="";return u&&(b=Jc(u)?u.checked?"true":"false":u.value),u=b,u!==g?(f.setValue(u),!0):!1}function Rs(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var Zc=/[\n"\\]/g;function gn(u){return u.replace(Zc,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Ls(u,f,g,b,D,H,ie,xe){u.name="",ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?u.type=ie:u.removeAttribute("type"),f!=null?ie==="number"?(f===0&&u.value===""||u.value!=f)&&(u.value=""+gs(f)):u.value!==""+gs(f)&&(u.value=""+gs(f)):ie!=="submit"&&ie!=="reset"||u.removeAttribute("value"),f!=null?El(u,ie,gs(f)):g!=null?El(u,ie,gs(g)):b!=null&&u.removeAttribute("value"),D==null&&H!=null&&(u.defaultChecked=!!H),D!=null&&(u.checked=D&&typeof D!="function"&&typeof D!="symbol"),xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"?u.name=""+gs(xe):u.removeAttribute("name")}function yl(u,f,g,b,D,H,ie,xe){if(H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(u.type=H),f!=null||g!=null){if(!(H!=="submit"&&H!=="reset"||f!=null))return;g=g!=null?""+gs(g):"",f=f!=null?""+gs(f):g,xe||f===u.value||(u.value=f),u.defaultValue=f}b=b??D,b=typeof b!="function"&&typeof b!="symbol"&&!!b,u.checked=xe?u.checked:!!b,u.defaultChecked=!!b,ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"&&(u.name=ie)}function El(u,f,g){f==="number"&&Rs(u.ownerDocument)===u||u.defaultValue===""+g||(u.defaultValue=""+g)}function xo(u,f,g,b){if(u=u.options,f){f={};for(var D=0;D<g.length;D++)f["$"+g[D]]=!0;for(g=0;g<u.length;g++)D=f.hasOwnProperty("$"+u[g].value),u[g].selected!==D&&(u[g].selected=D),D&&b&&(u[g].defaultSelected=!0)}else{for(g=""+gs(g),f=null,D=0;D<u.length;D++){if(u[D].value===g){u[D].selected=!0,b&&(u[D].defaultSelected=!0);return}f!==null||u[D].disabled||(f=u[D])}f!==null&&(f.selected=!0)}}function Nn(u,f,g){if(f!=null&&(f=""+gs(f),f!==u.value&&(u.value=f),g==null)){u.defaultValue!==f&&(u.defaultValue=f);return}u.defaultValue=g!=null?""+gs(g):""}function Cl(u,f,g,b){if(f==null){if(b!=null){if(g!=null)throw Error(n(92));if(ee(b)){if(1<b.length)throw Error(n(93));b=b[0]}g=b}g==null&&(g=""),f=g}g=gs(f),u.defaultValue=g,b=u.textContent,b===g&&b!==""&&b!==null&&(u.value=b)}function Si(u,f){if(f){var g=u.firstChild;if(g&&g===u.lastChild&&g.nodeType===3){g.nodeValue=f;return}}u.textContent=f}var zo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fd(u,f,g){var b=f.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?b?u.setProperty(f,""):f==="float"?u.cssFloat="":u[f]="":b?u.setProperty(f,g):typeof g!="number"||g===0||zo.has(f)?f==="float"?u.cssFloat=g:u[f]=(""+g).trim():u[f]=g+"px"}function iA(u,f,g){if(f!=null&&typeof f!="object")throw Error(n(62));if(u=u.style,g!=null){for(var b in g)!g.hasOwnProperty(b)||f!=null&&f.hasOwnProperty(b)||(b.indexOf("--")===0?u.setProperty(b,""):b==="float"?u.cssFloat="":u[b]="");for(var D in f)b=f[D],f.hasOwnProperty(D)&&g[D]!==b&&fd(u,D,b)}else for(var H in f)f.hasOwnProperty(H)&&fd(u,H,f[H])}function oA(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Go=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),eu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ko(u){return eu.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var vo=null;function Gn(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var qo=null,bo=null;function wr(u){var f=Be(u);if(f&&(u=f.stateNode)){var g=u[on]||null;e:switch(u=f.stateNode,f.type){case"input":if(Ls(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),f=g.name,g.type==="radio"&&f!=null){for(g=u;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+gn(""+f)+'"][type="radio"]'),f=0;f<g.length;f++){var b=g[f];if(b!==u&&b.form===u.form){var D=b[on]||null;if(!D)throw Error(n(90));Ls(b,D.value,D.defaultValue,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name)}}for(f=0;f<g.length;f++)b=g[f],b.form===u.form&&sA(b)}break e;case"textarea":Nn(u,g.value,g.defaultValue);break e;case"select":f=g.value,f!=null&&xo(u,!!g.multiple,f,!1)}}}var wo=!1;function hd(u,f,g){if(wo)return u(f,g);wo=!0;try{var b=u(f);return b}finally{if(wo=!1,(qo!==null||bo!==null)&&(kv(),qo&&(f=qo,u=bo,bo=qo=null,wr(f),u)))for(f=0;f<u.length;f++)wr(u[f])}}function Gs(u,f){var g=u.stateNode;if(g===null)return null;var b=g[on]||null;if(b===null)return null;g=b[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(u=u.type,b=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!b;break e;default:u=!1}if(u)return null;if(g&&typeof g!="function")throw Error(n(231,f,typeof g));return g}var Ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),li=!1;if(Ni)try{var yo={};Object.defineProperty(yo,"passive",{get:function(){li=!0}}),window.addEventListener("test",yo,yo),window.removeEventListener("test",yo,yo)}catch{li=!1}var Bi=null,_l=null,$o=null;function lA(){if($o)return $o;var u,f=_l,g=f.length,b,D="value"in Bi?Bi.value:Bi.textContent,H=D.length;for(u=0;u<g&&f[u]===D[u];u++);var ie=g-u;for(b=1;b<=ie&&f[g-b]===D[H-b];b++);return $o=D.slice(u,1<b?1-b:void 0)}function ki(u){var f=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&f===13&&(u=13)):u=f,u===10&&(u=13),32<=u||u===13?u:0}function Ks(){return!0}function Eo(){return!1}function Oa(u){function f(g,b,D,H,ie){this._reactName=g,this._targetInst=D,this.type=b,this.nativeEvent=H,this.target=ie,this.currentTarget=null;for(var xe in u)u.hasOwnProperty(xe)&&(g=u[xe],this[xe]=g?g(H):H[xe]);return this.isDefaultPrevented=(H.defaultPrevented!=null?H.defaultPrevented:H.returnValue===!1)?Ks:Eo,this.isPropagationStopped=Eo,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Ks)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Ks)},persist:function(){},isPersistent:Ks}),f}var tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sl=Oa(tn),Co=d({},tn,{view:0,detail:0}),cA=Oa(Co),uc,Ac,so,qs=d({},Co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tl,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==so&&(so&&u.type==="mousemove"?(uc=u.screenX-so.screenX,Ac=u.screenY-so.screenY):Ac=uc=0,so=u),uc)},movementY:function(u){return"movementY"in u?u.movementY:Ac}}),Ua=Oa(qs),md=d({},qs,{dataTransfer:0}),Nl=Oa(md),Os=d({},Co,{relatedTarget:0}),Bl=Oa(Os),Wo=d({},tn,{animationName:0,elapsedTime:0,pseudoElement:0}),tu=Oa(Wo),dc=d({},tn,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),ru=Oa(dc),uA=d({},tn,{data:0}),fc=Oa(uA),kl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mc(u){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(u):(u=nu[u])?!!f[u]:!1}function Tl(){return mc}var pd=d({},Co,{key:function(u){if(u.key){var f=kl[u.key]||u.key;if(f!=="Unidentified")return f}return u.type==="keypress"?(u=ki(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?hc[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tl,charCode:function(u){return u.type==="keypress"?ki(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?ki(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),Xo=Oa(pd),Il=d({},qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pc=Oa(Il),$s=d({},Co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tl}),au=Oa($s),V=d({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ce=Oa(V),Ie=d({},qs,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),Re=Oa(Ie),Ge=d({},tn,{newState:0,oldState:0}),ct=Oa(Ge),Nt=[9,13,27,32],Ht=Ni&&"CompositionEvent"in window,S=null;Ni&&"documentMode"in document&&(S=document.documentMode);var J=Ni&&"TextEvent"in window&&!S,se=Ni&&(!Ht||S&&8<S&&11>=S),ge=" ",Ve=!1;function nt(u,f){switch(u){case"keyup":return Nt.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bt(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var yr=!1;function rn(u,f){switch(u){case"compositionend":return Bt(f);case"keypress":return f.which!==32?null:(Ve=!0,ge);case"textInput":return u=f.data,u===ge&&Ve?null:u;default:return null}}function Dr(u,f){if(yr)return u==="compositionend"||!Ht&&nt(u,f)?(u=lA(),$o=_l=Bi=null,yr=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return se&&f.locale!=="ko"?null:f.data;default:return null}}var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f==="input"?!!Bn[u.type]:f==="textarea"}function _o(u,f,g,b){qo?bo?bo.push(b):bo=[b]:qo=b,f=Rv(f,"onChange"),0<f.length&&(g=new Sl("onChange","change",null,g,b),u.push({event:g,listeners:f}))}var Sa=null,Ti=null;function Fl(u){aT(u,0)}function su(u){var f=$e(u);if(sA(f))return u}function gd(u,f){if(u==="change")return f}var AA=!1;if(Ni){var es;if(Ni){var iu="oninput"in document;if(!iu){var dA=document.createElement("div");dA.setAttribute("oninput","return;"),iu=typeof dA.oninput=="function"}es=iu}else es=!1;AA=es&&(!document.documentMode||9<document.documentMode)}function fA(){Sa&&(Sa.detachEvent("onpropertychange",xd),Ti=Sa=null)}function xd(u){if(u.propertyName==="value"&&su(Ti)){var f=[];_o(f,Ti,u,Gn(u)),hd(Fl,f)}}function Ii(u,f,g){u==="focusin"?(fA(),Sa=f,Ti=g,Sa.attachEvent("onpropertychange",xd)):u==="focusout"&&fA()}function Op(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return su(Ti)}function Zf(u,f){if(u==="click")return su(f)}function E0(u,f){if(u==="input"||u==="change")return su(f)}function So(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var xs=typeof Object.is=="function"?Object.is:So;function ou(u,f){if(xs(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var g=Object.keys(u),b=Object.keys(f);if(g.length!==b.length)return!1;for(b=0;b<g.length;b++){var D=g[b];if(!oe.call(f,D)||!xs(u[D],f[D]))return!1}return!0}function eh(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function gc(u,f){var g=eh(u);u=0;for(var b;g;){if(g.nodeType===3){if(b=u+g.textContent.length,u<=f&&b>=f)return{node:g,offset:f-u};u=b}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=eh(g)}}function lu(u,f){return u&&f?u===f?!0:u&&u.nodeType===3?!1:f&&f.nodeType===3?lu(u,f.parentNode):"contains"in u?u.contains(f):u.compareDocumentPosition?!!(u.compareDocumentPosition(f)&16):!1:!1}function ci(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var f=Rs(u.document);f instanceof u.HTMLIFrameElement;){try{var g=typeof f.contentWindow.location.href=="string"}catch{g=!1}if(g)u=f.contentWindow;else break;f=Rs(u.document)}return f}function Us(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f&&(f==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||f==="textarea"||u.contentEditable==="true")}var cu=Ni&&"documentMode"in document&&11>=document.documentMode,Fi=null,Yo=null,jl=null,Jo=!1;function ba(u,f,g){var b=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Jo||Fi==null||Fi!==Rs(b)||(b=Fi,"selectionStart"in b&&Us(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),jl&&ou(jl,b)||(jl=b,b=Rv(Yo,"onSelect"),0<b.length&&(f=new Sl("onSelect","select",null,f,g),u.push({event:f,listeners:b}),f.target=Fi)))}function Zo(u,f){var g={};return g[u.toLowerCase()]=f.toLowerCase(),g["Webkit"+u]="webkit"+f,g["Moz"+u]="moz"+f,g}var Pa={animationend:Zo("Animation","AnimationEnd"),animationiteration:Zo("Animation","AnimationIteration"),animationstart:Zo("Animation","AnimationStart"),transitionrun:Zo("Transition","TransitionRun"),transitionstart:Zo("Transition","TransitionStart"),transitioncancel:Zo("Transition","TransitionCancel"),transitionend:Zo("Transition","TransitionEnd")},ji={},hA={};Ni&&(hA=document.createElement("div").style,"AnimationEvent"in window||(delete Pa.animationend.animation,delete Pa.animationiteration.animation,delete Pa.animationstart.animation),"TransitionEvent"in window||delete Pa.transitionend.transition);function Dl(u){if(ji[u])return ji[u];if(!Pa[u])return u;var f=Pa[u],g;for(g in f)if(f.hasOwnProperty(g)&&g in hA)return ji[u]=f[g];return u}var vd=Dl("animationend"),uu=Dl("animationiteration"),Au=Dl("animationstart"),du=Dl("transitionrun"),mA=Dl("transitionstart"),bd=Dl("transitioncancel"),fu=Dl("transitionend"),xc=new Map,pA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pA.push("scrollEnd");function wa(u,f){xc.set(u,f),yt(f,[u])}var io=new WeakMap;function Yr(u,f){if(typeof u=="object"&&u!==null){var g=io.get(u);return g!==void 0?g:(f={value:u,source:f,stack:ta(f)},io.set(u,f),f)}return{value:u,source:f,stack:ta(f)}}var Jr=[],ra=0,Na=0;function No(){for(var u=ra,f=Na=ra=0;f<u;){var g=Jr[f];Jr[f++]=null;var b=Jr[f];Jr[f++]=null;var D=Jr[f];Jr[f++]=null;var H=Jr[f];if(Jr[f++]=null,b!==null&&D!==null){var ie=b.pending;ie===null?D.next=D:(D.next=ie.next,ie.next=D),b.pending=D}H!==0&&C0(g,D,H)}}function hu(u,f,g,b){Jr[ra++]=u,Jr[ra++]=f,Jr[ra++]=g,Jr[ra++]=b,Na|=b,u.lanes|=b,u=u.alternate,u!==null&&(u.lanes|=b)}function mu(u,f,g,b){return hu(u,f,g,b),gA(u)}function vc(u,f){return hu(u,null,null,f),gA(u)}function C0(u,f,g){u.lanes|=g;var b=u.alternate;b!==null&&(b.lanes|=g);for(var D=!1,H=u.return;H!==null;)H.childLanes|=g,b=H.alternate,b!==null&&(b.childLanes|=g),H.tag===22&&(u=H.stateNode,u===null||u._visibility&1||(D=!0)),u=H,H=H.return;return u.tag===3?(H=u.stateNode,D&&f!==null&&(D=31-De(g),u=H.hiddenUpdates,b=u[D],b===null?u[D]=[f]:b.push(f),f.lane=g|536870912),H):null}function gA(u){if(50<lg)throw lg=0,hC=null,Error(n(185));for(var f=u.return;f!==null;)u=f,f=u.return;return u.tag===3?u.stateNode:null}var vs={};function Bo(u,f,g,b){this.tag=u,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ws(u,f,g,b){return new Bo(u,f,g,b)}function wd(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Rl(u,f){var g=u.alternate;return g===null?(g=Ws(u.tag,f,u.key,u.mode),g.elementType=u.elementType,g.type=u.type,g.stateNode=u.stateNode,g.alternate=u,u.alternate=g):(g.pendingProps=f,g.type=u.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=u.flags&65011712,g.childLanes=u.childLanes,g.lanes=u.lanes,g.child=u.child,g.memoizedProps=u.memoizedProps,g.memoizedState=u.memoizedState,g.updateQueue=u.updateQueue,f=u.dependencies,g.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},g.sibling=u.sibling,g.index=u.index,g.ref=u.ref,g.refCleanup=u.refCleanup,g}function th(u,f){u.flags&=65011714;var g=u.alternate;return g===null?(u.childLanes=0,u.lanes=f,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=g.childLanes,u.lanes=g.lanes,u.child=g.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=g.memoizedProps,u.memoizedState=g.memoizedState,u.updateQueue=g.updateQueue,u.type=g.type,f=g.dependencies,u.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),u}function xA(u,f,g,b,D,H){var ie=0;if(b=u,typeof u=="function")wd(u)&&(ie=1);else if(typeof u=="string")ie=Tz(u,g,X.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case N:return u=Ws(31,g,f,D),u.elementType=N,u.lanes=H,u;case v:return bc(g.children,D,H,f);case x:ie=8,D|=24;break;case E:return u=Ws(12,g,f,D|2),u.elementType=E,u.lanes=H,u;case L:return u=Ws(13,g,f,D),u.elementType=L,u.lanes=H,u;case k:return u=Ws(19,g,f,D),u.elementType=k,u.lanes=H,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case _:case T:ie=10;break e;case B:ie=9;break e;case I:ie=11;break e;case w:ie=14;break e;case y:ie=16,b=null;break e}ie=29,g=Error(n(130,u===null?"null":typeof u,"")),b=null}return f=Ws(ie,g,f,D),f.elementType=u,f.type=b,f.lanes=H,f}function bc(u,f,g,b){return u=Ws(7,u,b,f),u.lanes=g,u}function _0(u,f,g){return u=Ws(6,u,null,f),u.lanes=g,u}function rh(u,f,g){return f=Ws(4,u.children!==null?u.children:[],u.key,f),f.lanes=g,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}var pu=[],wc=0,yd=null,S0=0,ko=[],oo=0,vA=null,yc=1,Ec="";function bA(u,f){pu[wc++]=S0,pu[wc++]=yd,yd=u,S0=f}function Z1(u,f,g){ko[oo++]=yc,ko[oo++]=Ec,ko[oo++]=vA,vA=u;var b=yc;u=Ec;var D=32-De(b)-1;b&=~(1<<D),g+=1;var H=32-De(f)+D;if(30<H){var ie=D-D%5;H=(b&(1<<ie)-1).toString(32),b>>=ie,D-=ie,yc=1<<32-De(f)+D|g<<D|b,Ec=H+u}else yc=1<<H|g<<D|b,Ec=u}function nh(u){u.return!==null&&(bA(u,1),Z1(u,1,0))}function ah(u){for(;u===yd;)yd=pu[--wc],pu[wc]=null,S0=pu[--wc],pu[wc]=null;for(;u===vA;)vA=ko[--oo],ko[oo]=null,Ec=ko[--oo],ko[oo]=null,yc=ko[--oo],ko[oo]=null}var ts=null,ya=null,Cn=!1,gu=null,Ll=!1,Up=Error(n(519));function wA(u){var f=Error(n(418,""));throw Ed(Yr(f,u)),Up}function ev(u){var f=u.stateNode,g=u.type,b=u.memoizedProps;switch(f[pn]=u,f[on]=b,g){case"dialog":cn("cancel",f),cn("close",f);break;case"iframe":case"object":case"embed":cn("load",f);break;case"video":case"audio":for(g=0;g<ug.length;g++)cn(ug[g],f);break;case"source":cn("error",f);break;case"img":case"image":case"link":cn("error",f),cn("load",f);break;case"details":cn("toggle",f);break;case"input":cn("invalid",f),yl(f,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0),wl(f);break;case"select":cn("invalid",f);break;case"textarea":cn("invalid",f),Cl(f,b.value,b.defaultValue,b.children),wl(f)}g=b.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||f.textContent===""+g||b.suppressHydrationWarning===!0||lT(f.textContent,g)?(b.popover!=null&&(cn("beforetoggle",f),cn("toggle",f)),b.onScroll!=null&&cn("scroll",f),b.onScrollEnd!=null&&cn("scrollend",f),b.onClick!=null&&(f.onclick=Lv),f=!0):f=!1,f||wA(u)}function Cc(u){for(ts=u.return;ts;)switch(ts.tag){case 5:case 13:Ll=!1;return;case 27:case 3:Ll=!0;return;default:ts=ts.return}}function ui(u){if(u!==ts)return!1;if(!Cn)return Cc(u),Cn=!0,!1;var f=u.tag,g;if((g=f!==3&&f!==27)&&((g=f===5)&&(g=u.type,g=!(g!=="form"&&g!=="button")||TC(u.type,u.memoizedProps)),g=!g),g&&ya&&wA(u),Cc(u),f===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));e:{for(u=u.nextSibling,f=0;u;){if(u.nodeType===8)if(g=u.data,g==="/$"){if(f===0){ya=Fc(u.nextSibling);break e}f--}else g!=="$"&&g!=="$!"&&g!=="$?"||f++;u=u.nextSibling}ya=null}}else f===27?(f=ya,Md(u.type)?(u=DC,DC=null,ya=u):ya=f):ya=ts?Fc(u.stateNode.nextSibling):null;return!0}function lo(){ya=ts=null,Cn=!1}function tv(){var u=gu;return u!==null&&(Fo===null?Fo=u:Fo.push.apply(Fo,u),gu=null),u}function Ed(u){gu===null?gu=[u]:gu.push(u)}var Ol=Z(null),bs=null,_c=null;function xu(u,f,g){K(Ol,f._currentValue),f._currentValue=g}function Ul(u){u._currentValue=Ol.current,R(Ol)}function N0(u,f,g){for(;u!==null;){var b=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,b!==null&&(b.childLanes|=f)):b!==null&&(b.childLanes&f)!==f&&(b.childLanes|=f),u===g)break;u=u.return}}function B0(u,f,g,b){var D=u.child;for(D!==null&&(D.return=u);D!==null;){var H=D.dependencies;if(H!==null){var ie=D.child;H=H.firstContext;e:for(;H!==null;){var xe=H;H=D;for(var je=0;je<f.length;je++)if(xe.context===f[je]){H.lanes|=g,xe=H.alternate,xe!==null&&(xe.lanes|=g),N0(H.return,g,u),b||(ie=null);break e}H=xe.next}}else if(D.tag===18){if(ie=D.return,ie===null)throw Error(n(341));ie.lanes|=g,H=ie.alternate,H!==null&&(H.lanes|=g),N0(ie,g,u),ie=null}else ie=D.child;if(ie!==null)ie.return=D;else for(ie=D;ie!==null;){if(ie===u){ie=null;break}if(D=ie.sibling,D!==null){D.return=ie.return,ie=D;break}ie=ie.return}D=ie}}function Cd(u,f,g,b){u=null;for(var D=f,H=!1;D!==null;){if(!H){if((D.flags&524288)!==0)H=!0;else if((D.flags&262144)!==0)break}if(D.tag===10){var ie=D.alternate;if(ie===null)throw Error(n(387));if(ie=ie.memoizedProps,ie!==null){var xe=D.type;xs(D.pendingProps.value,ie.value)||(u!==null?u.push(xe):u=[xe])}}else if(D===ue.current){if(ie=D.alternate,ie===null)throw Error(n(387));ie.memoizedState.memoizedState!==D.memoizedState.memoizedState&&(u!==null?u.push(pg):u=[pg])}D=D.return}u!==null&&B0(f,u,g,b),f.flags|=262144}function k0(u){for(u=u.firstContext;u!==null;){if(!xs(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Pl(u){bs=u,_c=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function rs(u){return T0(bs,u)}function vu(u,f){return bs===null&&Pl(u),T0(u,f)}function T0(u,f){var g=f._currentValue;if(f={context:f,memoizedValue:g,next:null},_c===null){if(u===null)throw Error(n(308));_c=f,u.dependencies={lanes:0,firstContext:f},u.flags|=524288}else _c=_c.next=f;return g}var PE=typeof AbortController<"u"?AbortController:function(){var u=[],f=this.signal={aborted:!1,addEventListener:function(g,b){u.push(b)}};this.abort=function(){f.aborted=!0,u.forEach(function(g){return g()})}},rv=e.unstable_scheduleCallback,ME=e.unstable_NormalPriority,ns={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pp(){return{controller:new PE,data:new Map,refCount:0}}function sh(u){u.refCount--,u.refCount===0&&rv(ME,function(){u.controller.abort()})}var ih=null,Mp=0,yA=0,Sc=null;function QE(u,f){if(ih===null){var g=ih=[];Mp=0,yA=wC(),Sc={status:"pending",value:void 0,then:function(b){g.push(b)}}}return Mp++,f.then(nv,nv),f}function nv(){if(--Mp===0&&ih!==null){Sc!==null&&(Sc.status="fulfilled");var u=ih;ih=null,yA=0,Sc=null;for(var f=0;f<u.length;f++)(0,u[f])()}}function av(u,f){var g=[],b={status:"pending",value:null,reason:null,then:function(D){g.push(D)}};return u.then(function(){b.status="fulfilled",b.value=f;for(var D=0;D<g.length;D++)(0,g[D])(f)},function(D){for(b.status="rejected",b.reason=D,D=0;D<g.length;D++)(0,g[D])(void 0)}),b}var C=W.S;W.S=function(u,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&QE(u,f),C!==null&&C(u,f)};var O=Z(null);function Y(){var u=O.current;return u!==null?u:Aa.pooledCache}function ae(u,f){f===null?K(O,O.current):K(O,f.pool)}function le(){var u=Y();return u===null?null:{parent:ns._currentValue,pool:u}}var de=Error(n(460)),he=Error(n(474)),pe=Error(n(542)),ve={then:function(){}};function Se(u){return u=u.status,u==="fulfilled"||u==="rejected"}function Ue(){}function tt(u,f,g){switch(g=u[g],g===void 0?u.push(f):g!==f&&(f.then(Ue,Ue),f=g),f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,bt(u),u;default:if(typeof f.status=="string")f.then(Ue,Ue);else{if(u=Aa,u!==null&&100<u.shellSuspendCounter)throw Error(n(482));u=f,u.status="pending",u.then(function(b){if(f.status==="pending"){var D=f;D.status="fulfilled",D.value=b}},function(b){if(f.status==="pending"){var D=f;D.status="rejected",D.reason=b}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,bt(u),u}throw Je=f,de}}var Je=null;function Ke(){if(Je===null)throw Error(n(459));var u=Je;return Je=null,u}function bt(u){if(u===de||u===pe)throw Error(n(483))}var lt=!1;function Pe(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qe(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function ht(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function wt(u,f,g){var b=u.updateQueue;if(b===null)return null;if(b=b.shared,(qn&2)!==0){var D=b.pending;return D===null?f.next=f:(f.next=D.next,D.next=f),b.pending=f,f=gA(u),C0(u,null,g),f}return hu(u,b,f,g),gA(u)}function gt(u,f,g){if(f=f.updateQueue,f!==null&&(f=f.shared,(g&4194048)!==0)){var b=f.lanes;b&=u.pendingLanes,g|=b,f.lanes=g,Mr(u,g)}}function Xt(u,f){var g=u.updateQueue,b=u.alternate;if(b!==null&&(b=b.updateQueue,g===b)){var D=null,H=null;if(g=g.firstBaseUpdate,g!==null){do{var ie={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};H===null?D=H=ie:H=H.next=ie,g=g.next}while(g!==null);H===null?D=H=f:H=H.next=f}else D=H=f;g={baseState:b.baseState,firstBaseUpdate:D,lastBaseUpdate:H,shared:b.shared,callbacks:b.callbacks},u.updateQueue=g;return}u=g.lastBaseUpdate,u===null?g.firstBaseUpdate=f:u.next=f,g.lastBaseUpdate=f}var Mt=!1;function lr(){if(Mt){var u=Sc;if(u!==null)throw u}}function Vt(u,f,g,b){Mt=!1;var D=u.updateQueue;lt=!1;var H=D.firstBaseUpdate,ie=D.lastBaseUpdate,xe=D.shared.pending;if(xe!==null){D.shared.pending=null;var je=xe,at=je.next;je.next=null,ie===null?H=at:ie.next=at,ie=je;var pt=u.alternate;pt!==null&&(pt=pt.updateQueue,xe=pt.lastBaseUpdate,xe!==ie&&(xe===null?pt.firstBaseUpdate=at:xe.next=at,pt.lastBaseUpdate=je))}if(H!==null){var Ct=D.baseState;ie=0,pt=at=je=null,xe=H;do{var it=xe.lane&-536870913,ot=it!==xe.lane;if(ot?(wn&it)===it:(b&it)===it){it!==0&&it===yA&&(Mt=!0),pt!==null&&(pt=pt.next={lane:0,tag:xe.tag,payload:xe.payload,callback:null,next:null});e:{var Fr=u,Er=xe;it=f;var aa=g;switch(Er.tag){case 1:if(Fr=Er.payload,typeof Fr=="function"){Ct=Fr.call(aa,Ct,it);break e}Ct=Fr;break e;case 3:Fr.flags=Fr.flags&-65537|128;case 0:if(Fr=Er.payload,it=typeof Fr=="function"?Fr.call(aa,Ct,it):Fr,it==null)break e;Ct=d({},Ct,it);break e;case 2:lt=!0}}it=xe.callback,it!==null&&(u.flags|=64,ot&&(u.flags|=8192),ot=D.callbacks,ot===null?D.callbacks=[it]:ot.push(it))}else ot={lane:it,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},pt===null?(at=pt=ot,je=Ct):pt=pt.next=ot,ie|=it;if(xe=xe.next,xe===null){if(xe=D.shared.pending,xe===null)break;ot=xe,xe=ot.next,ot.next=null,D.lastBaseUpdate=ot,D.shared.pending=null}}while(!0);pt===null&&(je=Ct),D.baseState=je,D.firstBaseUpdate=at,D.lastBaseUpdate=pt,H===null&&(D.shared.lanes=0),Ld|=ie,u.lanes=ie,u.memoizedState=Ct}}function vn(u,f){if(typeof u!="function")throw Error(n(191,u));u.call(f)}function kn(u,f){var g=u.callbacks;if(g!==null)for(u.callbacks=null,u=0;u<g.length;u++)vn(g[u],f)}var Xr=Z(null),Gr=Z(0);function On(u,f){u=FA,K(Gr,u),K(Xr,f),FA=u|f.baseLanes}function Tn(){K(Gr,FA),K(Xr,Xr.current)}function Rr(){FA=Gr.current,R(Xr),R(Gr)}var Kn=0,gr=null,Nr=null,xn=null,bn=!1,ws=!1,as=!1,Ba=0,ka=0,Ma=null,To=0;function In(){throw Error(n(321))}function Qa(u,f){if(f===null)return!1;for(var g=0;g<f.length&&g<u.length;g++)if(!xs(u[g],f[g]))return!1;return!0}function el(u,f,g,b,D,H){return Kn=H,gr=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,W.H=u===null||u.memoizedState===null?H3:V3,as=!1,H=g(b,D),as=!1,ws&&(H=EA(f,g,b,D)),bu(u),H}function bu(u){W.H=pv;var f=Nr!==null&&Nr.next!==null;if(Kn=0,xn=Nr=gr=null,bn=!1,ka=0,Ma=null,f)throw Error(n(300));u===null||Xs||(u=u.dependencies,u!==null&&k0(u)&&(Xs=!0))}function EA(u,f,g,b){gr=u;var D=0;do{if(ws&&(Ma=null),ka=0,ws=!1,25<=D)throw Error(n(301));if(D+=1,xn=Nr=null,u.updateQueue!=null){var H=u.updateQueue;H.lastEffect=null,H.events=null,H.stores=null,H.memoCache!=null&&(H.memoCache.index=0)}W.H=QV,H=f(g,b)}while(ws);return H}function wu(){var u=W.H,f=u.useState()[0];return f=typeof f.then=="function"?yu(f):f,u=u.useState()[0],(Nr!==null?Nr.memoizedState:null)!==u&&(gr.flags|=1024),f}function ua(){var u=Ba!==0;return Ba=0,u}function oh(u,f,g){f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~g}function I0(u){if(bn){for(u=u.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}bn=!1}Kn=0,xn=Nr=gr=null,ws=!1,ka=Ba=0,Ma=null}function Ai(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?gr.memoizedState=xn=u:xn=xn.next=u,xn}function ma(){if(Nr===null){var u=gr.alternate;u=u!==null?u.memoizedState:null}else u=Nr.next;var f=xn===null?gr.memoizedState:xn.next;if(f!==null)xn=f,Nr=u;else{if(u===null)throw gr.alternate===null?Error(n(467)):Error(n(310));Nr=u,u={memoizedState:Nr.memoizedState,baseState:Nr.baseState,baseQueue:Nr.baseQueue,queue:Nr.queue,next:null},xn===null?gr.memoizedState=xn=u:xn=xn.next=u}return xn}function CA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yu(u){var f=ka;return ka+=1,Ma===null&&(Ma=[]),u=tt(Ma,u,f),f=gr,(xn===null?f.memoizedState:xn.next)===null&&(f=f.alternate,W.H=f===null||f.memoizedState===null?H3:V3),u}function Di(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return yu(u);if(u.$$typeof===T)return rs(u)}throw Error(n(438,String(u)))}function Eu(u){var f=null,g=gr.updateQueue;if(g!==null&&(f=g.memoCache),f==null){var b=gr.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(f={data:b.data.map(function(D){return D.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),g===null&&(g=CA(),gr.updateQueue=g),g.memoCache=f,g=f.data[f.index],g===void 0)for(g=f.data[f.index]=Array(u),b=0;b<u;b++)g[b]=U;return f.index++,g}function Ri(u,f){return typeof f=="function"?f(u):f}function lh(u){var f=ma();return _d(f,Nr,u)}function _d(u,f,g){var b=u.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=g;var D=u.baseQueue,H=b.pending;if(H!==null){if(D!==null){var ie=D.next;D.next=H.next,H.next=ie}f.baseQueue=D=H,b.pending=null}if(H=u.baseState,D===null)u.memoizedState=H;else{f=D.next;var xe=ie=null,je=null,at=f,pt=!1;do{var Ct=at.lane&-536870913;if(Ct!==at.lane?(wn&Ct)===Ct:(Kn&Ct)===Ct){var it=at.revertLane;if(it===0)je!==null&&(je=je.next={lane:0,revertLane:0,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null}),Ct===yA&&(pt=!0);else if((Kn&it)===it){at=at.next,it===yA&&(pt=!0);continue}else Ct={lane:0,revertLane:at.revertLane,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null},je===null?(xe=je=Ct,ie=H):je=je.next=Ct,gr.lanes|=it,Ld|=it;Ct=at.action,as&&g(H,Ct),H=at.hasEagerState?at.eagerState:g(H,Ct)}else it={lane:Ct,revertLane:at.revertLane,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null},je===null?(xe=je=it,ie=H):je=je.next=it,gr.lanes|=Ct,Ld|=Ct;at=at.next}while(at!==null&&at!==f);if(je===null?ie=H:je.next=xe,!xs(H,u.memoizedState)&&(Xs=!0,pt&&(g=Sc,g!==null)))throw g;u.memoizedState=H,u.baseState=ie,u.baseQueue=je,b.lastRenderedState=H}return D===null&&(b.lanes=0),[u.memoizedState,b.dispatch]}function F0(u){var f=ma(),g=f.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=u;var b=g.dispatch,D=g.pending,H=f.memoizedState;if(D!==null){g.pending=null;var ie=D=D.next;do H=u(H,ie.action),ie=ie.next;while(ie!==D);xs(H,f.memoizedState)||(Xs=!0),f.memoizedState=H,f.baseQueue===null&&(f.baseState=H),g.lastRenderedState=H}return[H,b]}function ch(u,f,g){var b=gr,D=ma(),H=Cn;if(H){if(g===void 0)throw Error(n(407));g=g()}else g=f();var ie=!xs((Nr||D).memoizedState,g);ie&&(D.memoizedState=g,Xs=!0),D=D.queue;var xe=Sd.bind(null,b,D,u);if(kd(2048,8,xe,[u]),D.getSnapshot!==f||ie||xn!==null&&xn.memoizedState.tag&1){if(b.flags|=2048,Bc(9,fh(),uh.bind(null,b,D,g,f),null),Aa===null)throw Error(n(349));H||(Kn&124)!==0||j0(b,f,g)}return g}function j0(u,f,g){u.flags|=16384,u={getSnapshot:f,value:g},f=gr.updateQueue,f===null?(f=CA(),gr.updateQueue=f,f.stores=[u]):(g=f.stores,g===null?f.stores=[u]:g.push(u))}function uh(u,f,g,b){f.value=g,f.getSnapshot=b,sv(f)&&iv(u)}function Sd(u,f,g){return g(function(){sv(f)&&iv(u)})}function sv(u){var f=u.getSnapshot;u=u.value;try{var g=f();return!xs(u,g)}catch{return!0}}function iv(u){var f=vc(u,2);f!==null&&il(f,u,2)}function Ah(u){var f=Ai();if(typeof u=="function"){var g=u;if(u=g(),as){qt(!0);try{g()}finally{qt(!1)}}}return f.memoizedState=f.baseState=u,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:u},f}function Nc(u,f,g,b){return u.baseState=g,_d(u,Nr,typeof b=="function"?b:Ri)}function HE(u,f,g,b,D){if(mv(u))throw Error(n(485));if(u=f.action,u!==null){var H={payload:D,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ie){H.listeners.push(ie)}};W.T!==null?g(!0):H.isTransition=!1,b(H),g=f.pending,g===null?(H.next=f.pending=H,ov(f,H)):(H.next=g.next,f.pending=g.next=H)}}function ov(u,f){var g=f.action,b=f.payload,D=u.state;if(f.isTransition){var H=W.T,ie={};W.T=ie;try{var xe=g(D,b),je=W.S;je!==null&&je(ie,xe),lv(u,f,xe)}catch(at){Nd(u,f,at)}finally{W.T=H}}else try{H=g(D,b),lv(u,f,H)}catch(at){Nd(u,f,at)}}function lv(u,f,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(b){Qp(u,f,b)},function(b){return Nd(u,f,b)}):Qp(u,f,g)}function Qp(u,f,g){f.status="fulfilled",f.value=g,Hp(f),u.state=g,f=u.pending,f!==null&&(g=f.next,g===f?u.pending=null:(g=g.next,f.next=g,ov(u,g)))}function Nd(u,f,g){var b=u.pending;if(u.pending=null,b!==null){b=b.next;do f.status="rejected",f.reason=g,Hp(f),f=f.next;while(f!==b)}u.action=null}function Hp(u){u=u.listeners;for(var f=0;f<u.length;f++)(0,u[f])()}function Vp(u,f){return f}function dh(u,f){if(Cn){var g=Aa.formState;if(g!==null){e:{var b=gr;if(Cn){if(ya){t:{for(var D=ya,H=Ll;D.nodeType!==8;){if(!H){D=null;break t}if(D=Fc(D.nextSibling),D===null){D=null;break t}}H=D.data,D=H==="F!"||H==="F"?D:null}if(D){ya=Fc(D.nextSibling),b=D.data==="F!";break e}}wA(b)}b=!1}b&&(f=g[0])}}return g=Ai(),g.memoizedState=g.baseState=f,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vp,lastRenderedState:f},g.queue=b,g=P3.bind(null,gr,b),b.dispatch=g,b=Ah(!1),H=VE.bind(null,gr,!1,b.queue),b=Ai(),D={state:f,dispatch:null,action:u,pending:null},b.queue=D,g=HE.bind(null,gr,D,H,g),D.dispatch=g,b.memoizedState=u,[f,g,!1]}function D0(u){var f=ma();return Bd(f,Nr,u)}function Bd(u,f,g){if(f=_d(u,f,Vp)[0],u=lh(Ri)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var b=yu(f)}catch(ie){throw ie===de?pe:ie}else b=f;f=ma();var D=f.queue,H=D.dispatch;return g!==f.memoizedState&&(gr.flags|=2048,Bc(9,fh(),cv.bind(null,D,g),null)),[b,H,u]}function cv(u,f){u.action=f}function uv(u){var f=ma(),g=Nr;if(g!==null)return Bd(f,g,u);ma(),f=f.memoizedState,g=ma();var b=g.queue.dispatch;return g.memoizedState=u,[f,b,!1]}function Bc(u,f,g,b){return u={tag:u,create:g,deps:b,inst:f,next:null},f=gr.updateQueue,f===null&&(f=CA(),gr.updateQueue=f),g=f.lastEffect,g===null?f.lastEffect=u.next=u:(b=g.next,g.next=u,u.next=b,f.lastEffect=u),u}function fh(){return{destroy:void 0,resource:void 0}}function R0(){return ma().memoizedState}function tl(u,f,g,b){var D=Ai();b=b===void 0?null:b,gr.flags|=u,D.memoizedState=Bc(1|f,fh(),g,b)}function kd(u,f,g,b){var D=ma();b=b===void 0?null:b;var H=D.memoizedState.inst;Nr!==null&&b!==null&&Qa(b,Nr.memoizedState.deps)?D.memoizedState=Bc(f,H,g,b):(gr.flags|=u,D.memoizedState=Bc(1|f,H,g,b))}function zp(u,f){tl(8390656,8,u,f)}function Av(u,f){kd(2048,8,u,f)}function Gp(u,f){return kd(4,2,u,f)}function _A(u,f){return kd(4,4,u,f)}function dv(u,f){if(typeof f=="function"){u=u();var g=f(u);return function(){typeof g=="function"?g():f(null)}}if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function Kp(u,f,g){g=g!=null?g.concat([u]):null,kd(4,4,dv.bind(null,f,u),g)}function qp(){}function $p(u,f){var g=ma();f=f===void 0?null:f;var b=g.memoizedState;return f!==null&&Qa(f,b[1])?b[0]:(g.memoizedState=[u,f],u)}function fv(u,f){var g=ma();f=f===void 0?null:f;var b=g.memoizedState;if(f!==null&&Qa(f,b[1]))return b[0];if(b=u(),as){qt(!0);try{u()}finally{qt(!1)}}return g.memoizedState=[b,f],b}function SA(u,f,g){return g===void 0||(Kn&1073741824)!==0?u.memoizedState=f:(u.memoizedState=g,u=Rk(),gr.lanes|=u,Ld|=u,g)}function L0(u,f,g,b){return xs(g,f)?g:Xr.current!==null?(u=SA(u,g,b),xs(u,f)||(Xs=!0),u):(Kn&42)===0?(Xs=!0,u.memoizedState=g):(u=Rk(),gr.lanes|=u,Ld|=u,f)}function hh(u,f,g,b,D){var H=te.p;te.p=H!==0&&8>H?H:8;var ie=W.T,xe={};W.T=xe,VE(u,!1,f,g);try{var je=D(),at=W.S;if(at!==null&&at(xe,je),je!==null&&typeof je=="object"&&typeof je.then=="function"){var pt=av(je,b);Jp(u,f,pt,sl(u))}else Jp(u,f,b,sl(u))}catch(Ct){Jp(u,f,{then:function(){},status:"rejected",reason:Ct},sl())}finally{te.p=H,W.T=ie}}function kc(){}function Ml(u,f,g,b){if(u.tag!==5)throw Error(n(476));var D=Tc(u).queue;hh(u,D,f,G,g===null?kc:function(){return mh(u),g(b)})}function Tc(u){var f=u.memoizedState;if(f!==null)return f;f={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:G},next:null};var g={};return f.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:g},next:null},u.memoizedState=f,u=u.alternate,u!==null&&(u.memoizedState=f),f}function mh(u){var f=Tc(u).next.queue;Jp(u,f,{},sl())}function ph(){return rs(pg)}function Wp(){return ma().memoizedState}function hv(){return ma().memoizedState}function Xp(u){for(var f=u.return;f!==null;){switch(f.tag){case 24:case 3:var g=sl();u=ht(g);var b=wt(f,u,g);b!==null&&(il(b,f,g),gt(b,f,g)),f={cache:Pp()},u.payload=f;return}f=f.return}}function Yp(u,f,g){var b=sl();g={lane:b,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},mv(u)?M3(f,g):(g=mu(u,f,g,b),g!==null&&(il(g,u,b),Q3(g,f,b)))}function P3(u,f,g){var b=sl();Jp(u,f,g,b)}function Jp(u,f,g,b){var D={lane:b,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(mv(u))M3(f,D);else{var H=u.alternate;if(u.lanes===0&&(H===null||H.lanes===0)&&(H=f.lastRenderedReducer,H!==null))try{var ie=f.lastRenderedState,xe=H(ie,g);if(D.hasEagerState=!0,D.eagerState=xe,xs(xe,ie))return hu(u,f,D,0),Aa===null&&No(),!1}catch{}finally{}if(g=mu(u,f,D,b),g!==null)return il(g,u,b),Q3(g,f,b),!0}return!1}function VE(u,f,g,b){if(b={lane:2,revertLane:wC(),action:b,hasEagerState:!1,eagerState:null,next:null},mv(u)){if(f)throw Error(n(479))}else f=mu(u,g,b,2),f!==null&&il(f,u,2)}function mv(u){var f=u.alternate;return u===gr||f!==null&&f===gr}function M3(u,f){ws=bn=!0;var g=u.pending;g===null?f.next=f:(f.next=g.next,g.next=f),u.pending=f}function Q3(u,f,g){if((g&4194048)!==0){var b=f.lanes;b&=u.pendingLanes,g|=b,f.lanes=g,Mr(u,g)}}var pv={readContext:rs,use:Di,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useLayoutEffect:In,useInsertionEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useSyncExternalStore:In,useId:In,useHostTransitionStatus:In,useFormState:In,useActionState:In,useOptimistic:In,useMemoCache:In,useCacheRefresh:In},H3={readContext:rs,use:Di,useCallback:function(u,f){return Ai().memoizedState=[u,f===void 0?null:f],u},useContext:rs,useEffect:zp,useImperativeHandle:function(u,f,g){g=g!=null?g.concat([u]):null,tl(4194308,4,dv.bind(null,f,u),g)},useLayoutEffect:function(u,f){return tl(4194308,4,u,f)},useInsertionEffect:function(u,f){tl(4,2,u,f)},useMemo:function(u,f){var g=Ai();f=f===void 0?null:f;var b=u();if(as){qt(!0);try{u()}finally{qt(!1)}}return g.memoizedState=[b,f],b},useReducer:function(u,f,g){var b=Ai();if(g!==void 0){var D=g(f);if(as){qt(!0);try{g(f)}finally{qt(!1)}}}else D=f;return b.memoizedState=b.baseState=D,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:D},b.queue=u,u=u.dispatch=Yp.bind(null,gr,u),[b.memoizedState,u]},useRef:function(u){var f=Ai();return u={current:u},f.memoizedState=u},useState:function(u){u=Ah(u);var f=u.queue,g=P3.bind(null,gr,f);return f.dispatch=g,[u.memoizedState,g]},useDebugValue:qp,useDeferredValue:function(u,f){var g=Ai();return SA(g,u,f)},useTransition:function(){var u=Ah(!1);return u=hh.bind(null,gr,u.queue,!0,!1),Ai().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,f,g){var b=gr,D=Ai();if(Cn){if(g===void 0)throw Error(n(407));g=g()}else{if(g=f(),Aa===null)throw Error(n(349));(wn&124)!==0||j0(b,f,g)}D.memoizedState=g;var H={value:g,getSnapshot:f};return D.queue=H,zp(Sd.bind(null,b,H,u),[u]),b.flags|=2048,Bc(9,fh(),uh.bind(null,b,H,g,f),null),g},useId:function(){var u=Ai(),f=Aa.identifierPrefix;if(Cn){var g=Ec,b=yc;g=(b&~(1<<32-De(b)-1)).toString(32)+g,f="«"+f+"R"+g,g=Ba++,0<g&&(f+="H"+g.toString(32)),f+="»"}else g=To++,f="«"+f+"r"+g.toString(32)+"»";return u.memoizedState=f},useHostTransitionStatus:ph,useFormState:dh,useActionState:dh,useOptimistic:function(u){var f=Ai();f.memoizedState=f.baseState=u;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=g,f=VE.bind(null,gr,!0,g),g.dispatch=f,[u,f]},useMemoCache:Eu,useCacheRefresh:function(){return Ai().memoizedState=Xp.bind(null,gr)}},V3={readContext:rs,use:Di,useCallback:$p,useContext:rs,useEffect:Av,useImperativeHandle:Kp,useInsertionEffect:Gp,useLayoutEffect:_A,useMemo:fv,useReducer:lh,useRef:R0,useState:function(){return lh(Ri)},useDebugValue:qp,useDeferredValue:function(u,f){var g=ma();return L0(g,Nr.memoizedState,u,f)},useTransition:function(){var u=lh(Ri)[0],f=ma().memoizedState;return[typeof u=="boolean"?u:yu(u),f]},useSyncExternalStore:ch,useId:Wp,useHostTransitionStatus:ph,useFormState:D0,useActionState:D0,useOptimistic:function(u,f){var g=ma();return Nc(g,Nr,u,f)},useMemoCache:Eu,useCacheRefresh:hv},QV={readContext:rs,use:Di,useCallback:$p,useContext:rs,useEffect:Av,useImperativeHandle:Kp,useInsertionEffect:Gp,useLayoutEffect:_A,useMemo:fv,useReducer:F0,useRef:R0,useState:function(){return F0(Ri)},useDebugValue:qp,useDeferredValue:function(u,f){var g=ma();return Nr===null?SA(g,u,f):L0(g,Nr.memoizedState,u,f)},useTransition:function(){var u=F0(Ri)[0],f=ma().memoizedState;return[typeof u=="boolean"?u:yu(u),f]},useSyncExternalStore:ch,useId:Wp,useHostTransitionStatus:ph,useFormState:uv,useActionState:uv,useOptimistic:function(u,f){var g=ma();return Nr!==null?Nc(g,Nr,u,f):(g.baseState=u,[u,g.queue.dispatch])},useMemoCache:Eu,useCacheRefresh:hv},O0=null,Zp=0;function gv(u){var f=Zp;return Zp+=1,O0===null&&(O0=[]),tt(O0,u,f)}function eg(u,f){f=f.props.ref,u.ref=f!==void 0?f:null}function xv(u,f){throw f.$$typeof===h?Error(n(525)):(u=Object.prototype.toString.call(f),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u)))}function z3(u){var f=u._init;return f(u._payload)}function G3(u){function f(qe,Me){if(u){var et=qe.deletions;et===null?(qe.deletions=[Me],qe.flags|=16):et.push(Me)}}function g(qe,Me){if(!u)return null;for(;Me!==null;)f(qe,Me),Me=Me.sibling;return null}function b(qe){for(var Me=new Map;qe!==null;)qe.key!==null?Me.set(qe.key,qe):Me.set(qe.index,qe),qe=qe.sibling;return Me}function D(qe,Me){return qe=Rl(qe,Me),qe.index=0,qe.sibling=null,qe}function H(qe,Me,et){return qe.index=et,u?(et=qe.alternate,et!==null?(et=et.index,et<Me?(qe.flags|=67108866,Me):et):(qe.flags|=67108866,Me)):(qe.flags|=1048576,Me)}function ie(qe){return u&&qe.alternate===null&&(qe.flags|=67108866),qe}function xe(qe,Me,et,vt){return Me===null||Me.tag!==6?(Me=_0(et,qe.mode,vt),Me.return=qe,Me):(Me=D(Me,et),Me.return=qe,Me)}function je(qe,Me,et,vt){var sr=et.type;return sr===v?pt(qe,Me,et.props.children,vt,et.key):Me!==null&&(Me.elementType===sr||typeof sr=="object"&&sr!==null&&sr.$$typeof===y&&z3(sr)===Me.type)?(Me=D(Me,et.props),eg(Me,et),Me.return=qe,Me):(Me=xA(et.type,et.key,et.props,null,qe.mode,vt),eg(Me,et),Me.return=qe,Me)}function at(qe,Me,et,vt){return Me===null||Me.tag!==4||Me.stateNode.containerInfo!==et.containerInfo||Me.stateNode.implementation!==et.implementation?(Me=rh(et,qe.mode,vt),Me.return=qe,Me):(Me=D(Me,et.children||[]),Me.return=qe,Me)}function pt(qe,Me,et,vt,sr){return Me===null||Me.tag!==7?(Me=bc(et,qe.mode,vt,sr),Me.return=qe,Me):(Me=D(Me,et),Me.return=qe,Me)}function Ct(qe,Me,et){if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return Me=_0(""+Me,qe.mode,et),Me.return=qe,Me;if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case m:return et=xA(Me.type,Me.key,Me.props,null,qe.mode,et),eg(et,Me),et.return=qe,et;case p:return Me=rh(Me,qe.mode,et),Me.return=qe,Me;case y:var vt=Me._init;return Me=vt(Me._payload),Ct(qe,Me,et)}if(ee(Me)||F(Me))return Me=bc(Me,qe.mode,et,null),Me.return=qe,Me;if(typeof Me.then=="function")return Ct(qe,gv(Me),et);if(Me.$$typeof===T)return Ct(qe,vu(qe,Me),et);xv(qe,Me)}return null}function it(qe,Me,et,vt){var sr=Me!==null?Me.key:null;if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return sr!==null?null:xe(qe,Me,""+et,vt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case m:return et.key===sr?je(qe,Me,et,vt):null;case p:return et.key===sr?at(qe,Me,et,vt):null;case y:return sr=et._init,et=sr(et._payload),it(qe,Me,et,vt)}if(ee(et)||F(et))return sr!==null?null:pt(qe,Me,et,vt,null);if(typeof et.then=="function")return it(qe,Me,gv(et),vt);if(et.$$typeof===T)return it(qe,Me,vu(qe,et),vt);xv(qe,et)}return null}function ot(qe,Me,et,vt,sr){if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return qe=qe.get(et)||null,xe(Me,qe,""+vt,sr);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case m:return qe=qe.get(vt.key===null?et:vt.key)||null,je(Me,qe,vt,sr);case p:return qe=qe.get(vt.key===null?et:vt.key)||null,at(Me,qe,vt,sr);case y:var nn=vt._init;return vt=nn(vt._payload),ot(qe,Me,et,vt,sr)}if(ee(vt)||F(vt))return qe=qe.get(et)||null,pt(Me,qe,vt,sr,null);if(typeof vt.then=="function")return ot(qe,Me,et,gv(vt),sr);if(vt.$$typeof===T)return ot(qe,Me,et,vu(Me,vt),sr);xv(Me,vt)}return null}function Fr(qe,Me,et,vt){for(var sr=null,nn=null,cr=Me,Cr=Me=0,Js=null;cr!==null&&Cr<et.length;Cr++){cr.index>Cr?(Js=cr,cr=null):Js=cr.sibling;var Fn=it(qe,cr,et[Cr],vt);if(Fn===null){cr===null&&(cr=Js);break}u&&cr&&Fn.alternate===null&&f(qe,cr),Me=H(Fn,Me,Cr),nn===null?sr=Fn:nn.sibling=Fn,nn=Fn,cr=Js}if(Cr===et.length)return g(qe,cr),Cn&&bA(qe,Cr),sr;if(cr===null){for(;Cr<et.length;Cr++)cr=Ct(qe,et[Cr],vt),cr!==null&&(Me=H(cr,Me,Cr),nn===null?sr=cr:nn.sibling=cr,nn=cr);return Cn&&bA(qe,Cr),sr}for(cr=b(cr);Cr<et.length;Cr++)Js=ot(cr,qe,Cr,et[Cr],vt),Js!==null&&(u&&Js.alternate!==null&&cr.delete(Js.key===null?Cr:Js.key),Me=H(Js,Me,Cr),nn===null?sr=Js:nn.sibling=Js,nn=Js);return u&&cr.forEach(function(Gd){return f(qe,Gd)}),Cn&&bA(qe,Cr),sr}function Er(qe,Me,et,vt){if(et==null)throw Error(n(151));for(var sr=null,nn=null,cr=Me,Cr=Me=0,Js=null,Fn=et.next();cr!==null&&!Fn.done;Cr++,Fn=et.next()){cr.index>Cr?(Js=cr,cr=null):Js=cr.sibling;var Gd=it(qe,cr,Fn.value,vt);if(Gd===null){cr===null&&(cr=Js);break}u&&cr&&Gd.alternate===null&&f(qe,cr),Me=H(Gd,Me,Cr),nn===null?sr=Gd:nn.sibling=Gd,nn=Gd,cr=Js}if(Fn.done)return g(qe,cr),Cn&&bA(qe,Cr),sr;if(cr===null){for(;!Fn.done;Cr++,Fn=et.next())Fn=Ct(qe,Fn.value,vt),Fn!==null&&(Me=H(Fn,Me,Cr),nn===null?sr=Fn:nn.sibling=Fn,nn=Fn);return Cn&&bA(qe,Cr),sr}for(cr=b(cr);!Fn.done;Cr++,Fn=et.next())Fn=ot(cr,qe,Cr,Fn.value,vt),Fn!==null&&(u&&Fn.alternate!==null&&cr.delete(Fn.key===null?Cr:Fn.key),Me=H(Fn,Me,Cr),nn===null?sr=Fn:nn.sibling=Fn,nn=Fn);return u&&cr.forEach(function(Hz){return f(qe,Hz)}),Cn&&bA(qe,Cr),sr}function aa(qe,Me,et,vt){if(typeof et=="object"&&et!==null&&et.type===v&&et.key===null&&(et=et.props.children),typeof et=="object"&&et!==null){switch(et.$$typeof){case m:e:{for(var sr=et.key;Me!==null;){if(Me.key===sr){if(sr=et.type,sr===v){if(Me.tag===7){g(qe,Me.sibling),vt=D(Me,et.props.children),vt.return=qe,qe=vt;break e}}else if(Me.elementType===sr||typeof sr=="object"&&sr!==null&&sr.$$typeof===y&&z3(sr)===Me.type){g(qe,Me.sibling),vt=D(Me,et.props),eg(vt,et),vt.return=qe,qe=vt;break e}g(qe,Me);break}else f(qe,Me);Me=Me.sibling}et.type===v?(vt=bc(et.props.children,qe.mode,vt,et.key),vt.return=qe,qe=vt):(vt=xA(et.type,et.key,et.props,null,qe.mode,vt),eg(vt,et),vt.return=qe,qe=vt)}return ie(qe);case p:e:{for(sr=et.key;Me!==null;){if(Me.key===sr)if(Me.tag===4&&Me.stateNode.containerInfo===et.containerInfo&&Me.stateNode.implementation===et.implementation){g(qe,Me.sibling),vt=D(Me,et.children||[]),vt.return=qe,qe=vt;break e}else{g(qe,Me);break}else f(qe,Me);Me=Me.sibling}vt=rh(et,qe.mode,vt),vt.return=qe,qe=vt}return ie(qe);case y:return sr=et._init,et=sr(et._payload),aa(qe,Me,et,vt)}if(ee(et))return Fr(qe,Me,et,vt);if(F(et)){if(sr=F(et),typeof sr!="function")throw Error(n(150));return et=sr.call(et),Er(qe,Me,et,vt)}if(typeof et.then=="function")return aa(qe,Me,gv(et),vt);if(et.$$typeof===T)return aa(qe,Me,vu(qe,et),vt);xv(qe,et)}return typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint"?(et=""+et,Me!==null&&Me.tag===6?(g(qe,Me.sibling),vt=D(Me,et),vt.return=qe,qe=vt):(g(qe,Me),vt=_0(et,qe.mode,vt),vt.return=qe,qe=vt),ie(qe)):g(qe,Me)}return function(qe,Me,et,vt){try{Zp=0;var sr=aa(qe,Me,et,vt);return O0=null,sr}catch(cr){if(cr===de||cr===pe)throw cr;var nn=Ws(29,cr,null,qe.mode);return nn.lanes=vt,nn.return=qe,nn}finally{}}}var U0=G3(!0),K3=G3(!1),Ql=Z(null),Cu=null;function Td(u){var f=u.alternate;K(Ps,Ps.current&1),K(Ql,u),Cu===null&&(f===null||Xr.current!==null||f.memoizedState!==null)&&(Cu=u)}function q3(u){if(u.tag===22){if(K(Ps,Ps.current),K(Ql,u),Cu===null){var f=u.alternate;f!==null&&f.memoizedState!==null&&(Cu=u)}}else Id()}function Id(){K(Ps,Ps.current),K(Ql,Ql.current)}function NA(u){R(Ql),Cu===u&&(Cu=null),R(Ps)}var Ps=Z(0);function vv(u){for(var f=u;f!==null;){if(f.tag===13){var g=f.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||jC(g)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function zE(u,f,g,b){f=u.memoizedState,g=g(b,f),g=g==null?f:d({},f,g),u.memoizedState=g,u.lanes===0&&(u.updateQueue.baseState=g)}var GE={enqueueSetState:function(u,f,g){u=u._reactInternals;var b=sl(),D=ht(b);D.payload=f,g!=null&&(D.callback=g),f=wt(u,D,b),f!==null&&(il(f,u,b),gt(f,u,b))},enqueueReplaceState:function(u,f,g){u=u._reactInternals;var b=sl(),D=ht(b);D.tag=1,D.payload=f,g!=null&&(D.callback=g),f=wt(u,D,b),f!==null&&(il(f,u,b),gt(f,u,b))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var g=sl(),b=ht(g);b.tag=2,f!=null&&(b.callback=f),f=wt(u,b,g),f!==null&&(il(f,u,g),gt(f,u,g))}};function $3(u,f,g,b,D,H,ie){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(b,H,ie):f.prototype&&f.prototype.isPureReactComponent?!ou(g,b)||!ou(D,H):!0}function W3(u,f,g,b){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(g,b),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(g,b),f.state!==u&&GE.enqueueReplaceState(f,f.state,null)}function gh(u,f){var g=f;if("ref"in f){g={};for(var b in f)b!=="ref"&&(g[b]=f[b])}if(u=u.defaultProps){g===f&&(g=d({},g));for(var D in u)g[D]===void 0&&(g[D]=u[D])}return g}var bv=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function X3(u){bv(u)}function Y3(u){console.error(u)}function J3(u){bv(u)}function wv(u,f){try{var g=u.onUncaughtError;g(f.value,{componentStack:f.stack})}catch(b){setTimeout(function(){throw b})}}function Z3(u,f,g){try{var b=u.onCaughtError;b(g.value,{componentStack:g.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(D){setTimeout(function(){throw D})}}function KE(u,f,g){return g=ht(g),g.tag=3,g.payload={element:null},g.callback=function(){wv(u,f)},g}function ek(u){return u=ht(u),u.tag=3,u}function tk(u,f,g,b){var D=g.type.getDerivedStateFromError;if(typeof D=="function"){var H=b.value;u.payload=function(){return D(H)},u.callback=function(){Z3(f,g,b)}}var ie=g.stateNode;ie!==null&&typeof ie.componentDidCatch=="function"&&(u.callback=function(){Z3(f,g,b),typeof D!="function"&&(Od===null?Od=new Set([this]):Od.add(this));var xe=b.stack;this.componentDidCatch(b.value,{componentStack:xe!==null?xe:""})})}function HV(u,f,g,b,D){if(g.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(f=g.alternate,f!==null&&Cd(f,g,D,!0),g=Ql.current,g!==null){switch(g.tag){case 13:return Cu===null?pC():g.alternate===null&&Ha===0&&(Ha=3),g.flags&=-257,g.flags|=65536,g.lanes=D,b===ve?g.flags|=16384:(f=g.updateQueue,f===null?g.updateQueue=new Set([b]):f.add(b),xC(u,b,D)),!1;case 22:return g.flags|=65536,b===ve?g.flags|=16384:(f=g.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([b])},g.updateQueue=f):(g=f.retryQueue,g===null?f.retryQueue=new Set([b]):g.add(b)),xC(u,b,D)),!1}throw Error(n(435,g.tag))}return xC(u,b,D),pC(),!1}if(Cn)return f=Ql.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=D,b!==Up&&(u=Error(n(422),{cause:b}),Ed(Yr(u,g)))):(b!==Up&&(f=Error(n(423),{cause:b}),Ed(Yr(f,g))),u=u.current.alternate,u.flags|=65536,D&=-D,u.lanes|=D,b=Yr(b,g),D=KE(u.stateNode,b,D),Xt(u,D),Ha!==4&&(Ha=2)),!1;var H=Error(n(520),{cause:b});if(H=Yr(H,g),og===null?og=[H]:og.push(H),Ha!==4&&(Ha=2),f===null)return!0;b=Yr(b,g),g=f;do{switch(g.tag){case 3:return g.flags|=65536,u=D&-D,g.lanes|=u,u=KE(g.stateNode,b,u),Xt(g,u),!1;case 1:if(f=g.type,H=g.stateNode,(g.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Od===null||!Od.has(H))))return g.flags|=65536,D&=-D,g.lanes|=D,D=ek(D),tk(D,u,g,b),Xt(g,D),!1}g=g.return}while(g!==null);return!1}var rk=Error(n(461)),Xs=!1;function di(u,f,g,b){f.child=u===null?K3(f,null,g,b):U0(f,u.child,g,b)}function nk(u,f,g,b,D){g=g.render;var H=f.ref;if("ref"in b){var ie={};for(var xe in b)xe!=="ref"&&(ie[xe]=b[xe])}else ie=b;return Pl(f),b=el(u,f,g,ie,H,D),xe=ua(),u!==null&&!Xs?(oh(u,f,D),BA(u,f,D)):(Cn&&xe&&nh(f),f.flags|=1,di(u,f,b,D),f.child)}function ak(u,f,g,b,D){if(u===null){var H=g.type;return typeof H=="function"&&!wd(H)&&H.defaultProps===void 0&&g.compare===null?(f.tag=15,f.type=H,sk(u,f,H,b,D)):(u=xA(g.type,null,b,f,f.mode,D),u.ref=f.ref,u.return=f,f.child=u)}if(H=u.child,!eC(u,D)){var ie=H.memoizedProps;if(g=g.compare,g=g!==null?g:ou,g(ie,b)&&u.ref===f.ref)return BA(u,f,D)}return f.flags|=1,u=Rl(H,b),u.ref=f.ref,u.return=f,f.child=u}function sk(u,f,g,b,D){if(u!==null){var H=u.memoizedProps;if(ou(H,b)&&u.ref===f.ref)if(Xs=!1,f.pendingProps=b=H,eC(u,D))(u.flags&131072)!==0&&(Xs=!0);else return f.lanes=u.lanes,BA(u,f,D)}return qE(u,f,g,b,D)}function ik(u,f,g){var b=f.pendingProps,D=b.children,H=u!==null?u.memoizedState:null;if(b.mode==="hidden"){if((f.flags&128)!==0){if(b=H!==null?H.baseLanes|g:g,u!==null){for(D=f.child=u.child,H=0;D!==null;)H=H|D.lanes|D.childLanes,D=D.sibling;f.childLanes=H&~b}else f.childLanes=0,f.child=null;return ok(u,f,b,g)}if((g&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},u!==null&&ae(f,H!==null?H.cachePool:null),H!==null?On(f,H):Tn(),q3(f);else return f.lanes=f.childLanes=536870912,ok(u,f,H!==null?H.baseLanes|g:g,g)}else H!==null?(ae(f,H.cachePool),On(f,H),Id(),f.memoizedState=null):(u!==null&&ae(f,null),Tn(),Id());return di(u,f,D,g),f.child}function ok(u,f,g,b){var D=Y();return D=D===null?null:{parent:ns._currentValue,pool:D},f.memoizedState={baseLanes:g,cachePool:D},u!==null&&ae(f,null),Tn(),q3(f),u!==null&&Cd(u,f,b,!0),null}function yv(u,f){var g=f.ref;if(g===null)u!==null&&u.ref!==null&&(f.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(n(284));(u===null||u.ref!==g)&&(f.flags|=4194816)}}function qE(u,f,g,b,D){return Pl(f),g=el(u,f,g,b,void 0,D),b=ua(),u!==null&&!Xs?(oh(u,f,D),BA(u,f,D)):(Cn&&b&&nh(f),f.flags|=1,di(u,f,g,D),f.child)}function lk(u,f,g,b,D,H){return Pl(f),f.updateQueue=null,g=EA(f,b,g,D),bu(u),b=ua(),u!==null&&!Xs?(oh(u,f,H),BA(u,f,H)):(Cn&&b&&nh(f),f.flags|=1,di(u,f,g,H),f.child)}function ck(u,f,g,b,D){if(Pl(f),f.stateNode===null){var H=vs,ie=g.contextType;typeof ie=="object"&&ie!==null&&(H=rs(ie)),H=new g(b,H),f.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,H.updater=GE,f.stateNode=H,H._reactInternals=f,H=f.stateNode,H.props=b,H.state=f.memoizedState,H.refs={},Pe(f),ie=g.contextType,H.context=typeof ie=="object"&&ie!==null?rs(ie):vs,H.state=f.memoizedState,ie=g.getDerivedStateFromProps,typeof ie=="function"&&(zE(f,g,ie,b),H.state=f.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(ie=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),ie!==H.state&&GE.enqueueReplaceState(H,H.state,null),Vt(f,b,H,D),lr(),H.state=f.memoizedState),typeof H.componentDidMount=="function"&&(f.flags|=4194308),b=!0}else if(u===null){H=f.stateNode;var xe=f.memoizedProps,je=gh(g,xe);H.props=je;var at=H.context,pt=g.contextType;ie=vs,typeof pt=="object"&&pt!==null&&(ie=rs(pt));var Ct=g.getDerivedStateFromProps;pt=typeof Ct=="function"||typeof H.getSnapshotBeforeUpdate=="function",xe=f.pendingProps!==xe,pt||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(xe||at!==ie)&&W3(f,H,b,ie),lt=!1;var it=f.memoizedState;H.state=it,Vt(f,b,H,D),lr(),at=f.memoizedState,xe||it!==at||lt?(typeof Ct=="function"&&(zE(f,g,Ct,b),at=f.memoizedState),(je=lt||$3(f,g,je,b,it,at,ie))?(pt||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(f.flags|=4194308)):(typeof H.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=b,f.memoizedState=at),H.props=b,H.state=at,H.context=ie,b=je):(typeof H.componentDidMount=="function"&&(f.flags|=4194308),b=!1)}else{H=f.stateNode,Qe(u,f),ie=f.memoizedProps,pt=gh(g,ie),H.props=pt,Ct=f.pendingProps,it=H.context,at=g.contextType,je=vs,typeof at=="object"&&at!==null&&(je=rs(at)),xe=g.getDerivedStateFromProps,(at=typeof xe=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(ie!==Ct||it!==je)&&W3(f,H,b,je),lt=!1,it=f.memoizedState,H.state=it,Vt(f,b,H,D),lr();var ot=f.memoizedState;ie!==Ct||it!==ot||lt||u!==null&&u.dependencies!==null&&k0(u.dependencies)?(typeof xe=="function"&&(zE(f,g,xe,b),ot=f.memoizedState),(pt=lt||$3(f,g,pt,b,it,ot,je)||u!==null&&u.dependencies!==null&&k0(u.dependencies))?(at||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(b,ot,je),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(b,ot,je)),typeof H.componentDidUpdate=="function"&&(f.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof H.componentDidUpdate!="function"||ie===u.memoizedProps&&it===u.memoizedState||(f.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||ie===u.memoizedProps&&it===u.memoizedState||(f.flags|=1024),f.memoizedProps=b,f.memoizedState=ot),H.props=b,H.state=ot,H.context=je,b=pt):(typeof H.componentDidUpdate!="function"||ie===u.memoizedProps&&it===u.memoizedState||(f.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||ie===u.memoizedProps&&it===u.memoizedState||(f.flags|=1024),b=!1)}return H=b,yv(u,f),b=(f.flags&128)!==0,H||b?(H=f.stateNode,g=b&&typeof g.getDerivedStateFromError!="function"?null:H.render(),f.flags|=1,u!==null&&b?(f.child=U0(f,u.child,null,D),f.child=U0(f,null,g,D)):di(u,f,g,D),f.memoizedState=H.state,u=f.child):u=BA(u,f,D),u}function uk(u,f,g,b){return lo(),f.flags|=256,di(u,f,g,b),f.child}var $E={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function WE(u){return{baseLanes:u,cachePool:le()}}function XE(u,f,g){return u=u!==null?u.childLanes&~g:0,f&&(u|=Hl),u}function Ak(u,f,g){var b=f.pendingProps,D=!1,H=(f.flags&128)!==0,ie;if((ie=H)||(ie=u!==null&&u.memoizedState===null?!1:(Ps.current&2)!==0),ie&&(D=!0,f.flags&=-129),ie=(f.flags&32)!==0,f.flags&=-33,u===null){if(Cn){if(D?Td(f):Id(),Cn){var xe=ya,je;if(je=xe){e:{for(je=xe,xe=Ll;je.nodeType!==8;){if(!xe){xe=null;break e}if(je=Fc(je.nextSibling),je===null){xe=null;break e}}xe=je}xe!==null?(f.memoizedState={dehydrated:xe,treeContext:vA!==null?{id:yc,overflow:Ec}:null,retryLane:536870912,hydrationErrors:null},je=Ws(18,null,null,0),je.stateNode=xe,je.return=f,f.child=je,ts=f,ya=null,je=!0):je=!1}je||wA(f)}if(xe=f.memoizedState,xe!==null&&(xe=xe.dehydrated,xe!==null))return jC(xe)?f.lanes=32:f.lanes=536870912,null;NA(f)}return xe=b.children,b=b.fallback,D?(Id(),D=f.mode,xe=Ev({mode:"hidden",children:xe},D),b=bc(b,D,g,null),xe.return=f,b.return=f,xe.sibling=b,f.child=xe,D=f.child,D.memoizedState=WE(g),D.childLanes=XE(u,ie,g),f.memoizedState=$E,b):(Td(f),YE(f,xe))}if(je=u.memoizedState,je!==null&&(xe=je.dehydrated,xe!==null)){if(H)f.flags&256?(Td(f),f.flags&=-257,f=JE(u,f,g)):f.memoizedState!==null?(Id(),f.child=u.child,f.flags|=128,f=null):(Id(),D=b.fallback,xe=f.mode,b=Ev({mode:"visible",children:b.children},xe),D=bc(D,xe,g,null),D.flags|=2,b.return=f,D.return=f,b.sibling=D,f.child=b,U0(f,u.child,null,g),b=f.child,b.memoizedState=WE(g),b.childLanes=XE(u,ie,g),f.memoizedState=$E,f=D);else if(Td(f),jC(xe)){if(ie=xe.nextSibling&&xe.nextSibling.dataset,ie)var at=ie.dgst;ie=at,b=Error(n(419)),b.stack="",b.digest=ie,Ed({value:b,source:null,stack:null}),f=JE(u,f,g)}else if(Xs||Cd(u,f,g,!1),ie=(g&u.childLanes)!==0,Xs||ie){if(ie=Aa,ie!==null&&(b=g&-g,b=(b&42)!==0?1:ms(b),b=(b&(ie.suspendedLanes|g))!==0?0:b,b!==0&&b!==je.retryLane))throw je.retryLane=b,vc(u,b),il(ie,u,b),rk;xe.data==="$?"||pC(),f=JE(u,f,g)}else xe.data==="$?"?(f.flags|=192,f.child=u.child,f=null):(u=je.treeContext,ya=Fc(xe.nextSibling),ts=f,Cn=!0,gu=null,Ll=!1,u!==null&&(ko[oo++]=yc,ko[oo++]=Ec,ko[oo++]=vA,yc=u.id,Ec=u.overflow,vA=f),f=YE(f,b.children),f.flags|=4096);return f}return D?(Id(),D=b.fallback,xe=f.mode,je=u.child,at=je.sibling,b=Rl(je,{mode:"hidden",children:b.children}),b.subtreeFlags=je.subtreeFlags&65011712,at!==null?D=Rl(at,D):(D=bc(D,xe,g,null),D.flags|=2),D.return=f,b.return=f,b.sibling=D,f.child=b,b=D,D=f.child,xe=u.child.memoizedState,xe===null?xe=WE(g):(je=xe.cachePool,je!==null?(at=ns._currentValue,je=je.parent!==at?{parent:at,pool:at}:je):je=le(),xe={baseLanes:xe.baseLanes|g,cachePool:je}),D.memoizedState=xe,D.childLanes=XE(u,ie,g),f.memoizedState=$E,b):(Td(f),g=u.child,u=g.sibling,g=Rl(g,{mode:"visible",children:b.children}),g.return=f,g.sibling=null,u!==null&&(ie=f.deletions,ie===null?(f.deletions=[u],f.flags|=16):ie.push(u)),f.child=g,f.memoizedState=null,g)}function YE(u,f){return f=Ev({mode:"visible",children:f},u.mode),f.return=u,u.child=f}function Ev(u,f){return u=Ws(22,u,null,f),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function JE(u,f,g){return U0(f,u.child,null,g),u=YE(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function dk(u,f,g){u.lanes|=f;var b=u.alternate;b!==null&&(b.lanes|=f),N0(u.return,f,g)}function ZE(u,f,g,b,D){var H=u.memoizedState;H===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:b,tail:g,tailMode:D}:(H.isBackwards=f,H.rendering=null,H.renderingStartTime=0,H.last=b,H.tail=g,H.tailMode=D)}function fk(u,f,g){var b=f.pendingProps,D=b.revealOrder,H=b.tail;if(di(u,f,b.children,g),b=Ps.current,(b&2)!==0)b=b&1|2,f.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&dk(u,g,f);else if(u.tag===19)dk(u,g,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}b&=1}switch(K(Ps,b),D){case"forwards":for(g=f.child,D=null;g!==null;)u=g.alternate,u!==null&&vv(u)===null&&(D=g),g=g.sibling;g=D,g===null?(D=f.child,f.child=null):(D=g.sibling,g.sibling=null),ZE(f,!1,D,g,H);break;case"backwards":for(g=null,D=f.child,f.child=null;D!==null;){if(u=D.alternate,u!==null&&vv(u)===null){f.child=D;break}u=D.sibling,D.sibling=g,g=D,D=u}ZE(f,!0,g,null,H);break;case"together":ZE(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function BA(u,f,g){if(u!==null&&(f.dependencies=u.dependencies),Ld|=f.lanes,(g&f.childLanes)===0)if(u!==null){if(Cd(u,f,g,!1),(g&f.childLanes)===0)return null}else return null;if(u!==null&&f.child!==u.child)throw Error(n(153));if(f.child!==null){for(u=f.child,g=Rl(u,u.pendingProps),f.child=g,g.return=f;u.sibling!==null;)u=u.sibling,g=g.sibling=Rl(u,u.pendingProps),g.return=f;g.sibling=null}return f.child}function eC(u,f){return(u.lanes&f)!==0?!0:(u=u.dependencies,!!(u!==null&&k0(u)))}function VV(u,f,g){switch(f.tag){case 3:fe(f,f.stateNode.containerInfo),xu(f,ns,u.memoizedState.cache),lo();break;case 27:case 5:Ce(f);break;case 4:fe(f,f.stateNode.containerInfo);break;case 10:xu(f,f.type,f.memoizedProps.value);break;case 13:var b=f.memoizedState;if(b!==null)return b.dehydrated!==null?(Td(f),f.flags|=128,null):(g&f.child.childLanes)!==0?Ak(u,f,g):(Td(f),u=BA(u,f,g),u!==null?u.sibling:null);Td(f);break;case 19:var D=(u.flags&128)!==0;if(b=(g&f.childLanes)!==0,b||(Cd(u,f,g,!1),b=(g&f.childLanes)!==0),D){if(b)return fk(u,f,g);f.flags|=128}if(D=f.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),K(Ps,Ps.current),b)break;return null;case 22:case 23:return f.lanes=0,ik(u,f,g);case 24:xu(f,ns,u.memoizedState.cache)}return BA(u,f,g)}function hk(u,f,g){if(u!==null)if(u.memoizedProps!==f.pendingProps)Xs=!0;else{if(!eC(u,g)&&(f.flags&128)===0)return Xs=!1,VV(u,f,g);Xs=(u.flags&131072)!==0}else Xs=!1,Cn&&(f.flags&1048576)!==0&&Z1(f,S0,f.index);switch(f.lanes=0,f.tag){case 16:e:{u=f.pendingProps;var b=f.elementType,D=b._init;if(b=D(b._payload),f.type=b,typeof b=="function")wd(b)?(u=gh(b,u),f.tag=1,f=ck(null,f,b,u,g)):(f.tag=0,f=qE(null,f,b,u,g));else{if(b!=null){if(D=b.$$typeof,D===I){f.tag=11,f=nk(null,f,b,u,g);break e}else if(D===w){f.tag=14,f=ak(null,f,b,u,g);break e}}throw f=M(b)||b,Error(n(306,f,""))}}return f;case 0:return qE(u,f,f.type,f.pendingProps,g);case 1:return b=f.type,D=gh(b,f.pendingProps),ck(u,f,b,D,g);case 3:e:{if(fe(f,f.stateNode.containerInfo),u===null)throw Error(n(387));b=f.pendingProps;var H=f.memoizedState;D=H.element,Qe(u,f),Vt(f,b,null,g);var ie=f.memoizedState;if(b=ie.cache,xu(f,ns,b),b!==H.cache&&B0(f,[ns],g,!0),lr(),b=ie.element,H.isDehydrated)if(H={element:b,isDehydrated:!1,cache:ie.cache},f.updateQueue.baseState=H,f.memoizedState=H,f.flags&256){f=uk(u,f,b,g);break e}else if(b!==D){D=Yr(Error(n(424)),f),Ed(D),f=uk(u,f,b,g);break e}else{switch(u=f.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(ya=Fc(u.firstChild),ts=f,Cn=!0,gu=null,Ll=!0,g=K3(f,null,b,g),f.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(lo(),b===D){f=BA(u,f,g);break e}di(u,f,b,g)}f=f.child}return f;case 26:return yv(u,f),u===null?(g=xT(f.type,null,f.pendingProps,null))?f.memoizedState=g:Cn||(g=f.type,u=f.pendingProps,b=Ov(ne.current).createElement(g),b[pn]=f,b[on]=u,hi(b,g,u),ze(b),f.stateNode=b):f.memoizedState=xT(f.type,u.memoizedProps,f.pendingProps,u.memoizedState),null;case 27:return Ce(f),u===null&&Cn&&(b=f.stateNode=mT(f.type,f.pendingProps,ne.current),ts=f,Ll=!0,D=ya,Md(f.type)?(DC=D,ya=Fc(b.firstChild)):ya=D),di(u,f,f.pendingProps.children,g),yv(u,f),u===null&&(f.flags|=4194304),f.child;case 5:return u===null&&Cn&&((D=b=ya)&&(b=gz(b,f.type,f.pendingProps,Ll),b!==null?(f.stateNode=b,ts=f,ya=Fc(b.firstChild),Ll=!1,D=!0):D=!1),D||wA(f)),Ce(f),D=f.type,H=f.pendingProps,ie=u!==null?u.memoizedProps:null,b=H.children,TC(D,H)?b=null:ie!==null&&TC(D,ie)&&(f.flags|=32),f.memoizedState!==null&&(D=el(u,f,wu,null,null,g),pg._currentValue=D),yv(u,f),di(u,f,b,g),f.child;case 6:return u===null&&Cn&&((u=g=ya)&&(g=xz(g,f.pendingProps,Ll),g!==null?(f.stateNode=g,ts=f,ya=null,u=!0):u=!1),u||wA(f)),null;case 13:return Ak(u,f,g);case 4:return fe(f,f.stateNode.containerInfo),b=f.pendingProps,u===null?f.child=U0(f,null,b,g):di(u,f,b,g),f.child;case 11:return nk(u,f,f.type,f.pendingProps,g);case 7:return di(u,f,f.pendingProps,g),f.child;case 8:return di(u,f,f.pendingProps.children,g),f.child;case 12:return di(u,f,f.pendingProps.children,g),f.child;case 10:return b=f.pendingProps,xu(f,f.type,b.value),di(u,f,b.children,g),f.child;case 9:return D=f.type._context,b=f.pendingProps.children,Pl(f),D=rs(D),b=b(D),f.flags|=1,di(u,f,b,g),f.child;case 14:return ak(u,f,f.type,f.pendingProps,g);case 15:return sk(u,f,f.type,f.pendingProps,g);case 19:return fk(u,f,g);case 31:return b=f.pendingProps,g=f.mode,b={mode:b.mode,children:b.children},u===null?(g=Ev(b,g),g.ref=f.ref,f.child=g,g.return=f,f=g):(g=Rl(u.child,b),g.ref=f.ref,f.child=g,g.return=f,f=g),f;case 22:return ik(u,f,g);case 24:return Pl(f),b=rs(ns),u===null?(D=Y(),D===null&&(D=Aa,H=Pp(),D.pooledCache=H,H.refCount++,H!==null&&(D.pooledCacheLanes|=g),D=H),f.memoizedState={parent:b,cache:D},Pe(f),xu(f,ns,D)):((u.lanes&g)!==0&&(Qe(u,f),Vt(f,null,null,g),lr()),D=u.memoizedState,H=f.memoizedState,D.parent!==b?(D={parent:b,cache:b},f.memoizedState=D,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=D),xu(f,ns,b)):(b=H.cache,xu(f,ns,b),b!==D.cache&&B0(f,[ns],g,!0))),di(u,f,f.pendingProps.children,g),f.child;case 29:throw f.pendingProps}throw Error(n(156,f.tag))}function kA(u){u.flags|=4}function mk(u,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!ET(f)){if(f=Ql.current,f!==null&&((wn&4194048)===wn?Cu!==null:(wn&62914560)!==wn&&(wn&536870912)===0||f!==Cu))throw Je=ve,he;u.flags|=8192}}function Cv(u,f){f!==null&&(u.flags|=4),u.flags&16384&&(f=u.tag!==22?Lr():536870912,u.lanes|=f,H0|=f)}function tg(u,f){if(!Cn)switch(u.tailMode){case"hidden":f=u.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u.tail=null:g.sibling=null;break;case"collapsed":g=u.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:b.sibling=null}}function Ta(u){var f=u.alternate!==null&&u.alternate.child===u.child,g=0,b=0;if(f)for(var D=u.child;D!==null;)g|=D.lanes|D.childLanes,b|=D.subtreeFlags&65011712,b|=D.flags&65011712,D.return=u,D=D.sibling;else for(D=u.child;D!==null;)g|=D.lanes|D.childLanes,b|=D.subtreeFlags,b|=D.flags,D.return=u,D=D.sibling;return u.subtreeFlags|=b,u.childLanes=g,f}function zV(u,f,g){var b=f.pendingProps;switch(ah(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ta(f),null;case 1:return Ta(f),null;case 3:return g=f.stateNode,b=null,u!==null&&(b=u.memoizedState.cache),f.memoizedState.cache!==b&&(f.flags|=2048),Ul(ns),be(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(u===null||u.child===null)&&(ui(f)?kA(f):u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,tv())),Ta(f),null;case 26:return g=f.memoizedState,u===null?(kA(f),g!==null?(Ta(f),mk(f,g)):(Ta(f),f.flags&=-16777217)):g?g!==u.memoizedState?(kA(f),Ta(f),mk(f,g)):(Ta(f),f.flags&=-16777217):(u.memoizedProps!==b&&kA(f),Ta(f),f.flags&=-16777217),null;case 27:me(f),g=ne.current;var D=f.type;if(u!==null&&f.stateNode!=null)u.memoizedProps!==b&&kA(f);else{if(!b){if(f.stateNode===null)throw Error(n(166));return Ta(f),null}u=X.current,ui(f)?ev(f):(u=mT(D,b,g),f.stateNode=u,kA(f))}return Ta(f),null;case 5:if(me(f),g=f.type,u!==null&&f.stateNode!=null)u.memoizedProps!==b&&kA(f);else{if(!b){if(f.stateNode===null)throw Error(n(166));return Ta(f),null}if(u=X.current,ui(f))ev(f);else{switch(D=Ov(ne.current),u){case 1:u=D.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:u=D.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":u=D.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":u=D.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":u=D.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof b.is=="string"?D.createElement("select",{is:b.is}):D.createElement("select"),b.multiple?u.multiple=!0:b.size&&(u.size=b.size);break;default:u=typeof b.is=="string"?D.createElement(g,{is:b.is}):D.createElement(g)}}u[pn]=f,u[on]=b;e:for(D=f.child;D!==null;){if(D.tag===5||D.tag===6)u.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===f)break e;for(;D.sibling===null;){if(D.return===null||D.return===f)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}f.stateNode=u;e:switch(hi(u,g,b),g){case"button":case"input":case"select":case"textarea":u=!!b.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&kA(f)}}return Ta(f),f.flags&=-16777217,null;case 6:if(u&&f.stateNode!=null)u.memoizedProps!==b&&kA(f);else{if(typeof b!="string"&&f.stateNode===null)throw Error(n(166));if(u=ne.current,ui(f)){if(u=f.stateNode,g=f.memoizedProps,b=null,D=ts,D!==null)switch(D.tag){case 27:case 5:b=D.memoizedProps}u[pn]=f,u=!!(u.nodeValue===g||b!==null&&b.suppressHydrationWarning===!0||lT(u.nodeValue,g)),u||wA(f)}else u=Ov(u).createTextNode(b),u[pn]=f,f.stateNode=u}return Ta(f),null;case 13:if(b=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(D=ui(f),b!==null&&b.dehydrated!==null){if(u===null){if(!D)throw Error(n(318));if(D=f.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(n(317));D[pn]=f}else lo(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Ta(f),D=!1}else D=tv(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=D),D=!0;if(!D)return f.flags&256?(NA(f),f):(NA(f),null)}if(NA(f),(f.flags&128)!==0)return f.lanes=g,f;if(g=b!==null,u=u!==null&&u.memoizedState!==null,g){b=f.child,D=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(D=b.alternate.memoizedState.cachePool.pool);var H=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(H=b.memoizedState.cachePool.pool),H!==D&&(b.flags|=2048)}return g!==u&&g&&(f.child.flags|=8192),Cv(f,f.updateQueue),Ta(f),null;case 4:return be(),u===null&&_C(f.stateNode.containerInfo),Ta(f),null;case 10:return Ul(f.type),Ta(f),null;case 19:if(R(Ps),D=f.memoizedState,D===null)return Ta(f),null;if(b=(f.flags&128)!==0,H=D.rendering,H===null)if(b)tg(D,!1);else{if(Ha!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(H=vv(u),H!==null){for(f.flags|=128,tg(D,!1),u=H.updateQueue,f.updateQueue=u,Cv(f,u),f.subtreeFlags=0,u=g,g=f.child;g!==null;)th(g,u),g=g.sibling;return K(Ps,Ps.current&1|2),f.child}u=u.sibling}D.tail!==null&&Fe()>Nv&&(f.flags|=128,b=!0,tg(D,!1),f.lanes=4194304)}else{if(!b)if(u=vv(H),u!==null){if(f.flags|=128,b=!0,u=u.updateQueue,f.updateQueue=u,Cv(f,u),tg(D,!0),D.tail===null&&D.tailMode==="hidden"&&!H.alternate&&!Cn)return Ta(f),null}else 2*Fe()-D.renderingStartTime>Nv&&g!==536870912&&(f.flags|=128,b=!0,tg(D,!1),f.lanes=4194304);D.isBackwards?(H.sibling=f.child,f.child=H):(u=D.last,u!==null?u.sibling=H:f.child=H,D.last=H)}return D.tail!==null?(f=D.tail,D.rendering=f,D.tail=f.sibling,D.renderingStartTime=Fe(),f.sibling=null,u=Ps.current,K(Ps,b?u&1|2:u&1),f):(Ta(f),null);case 22:case 23:return NA(f),Rr(),b=f.memoizedState!==null,u!==null?u.memoizedState!==null!==b&&(f.flags|=8192):b&&(f.flags|=8192),b?(g&536870912)!==0&&(f.flags&128)===0&&(Ta(f),f.subtreeFlags&6&&(f.flags|=8192)):Ta(f),g=f.updateQueue,g!==null&&Cv(f,g.retryQueue),g=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==g&&(f.flags|=2048),u!==null&&R(O),null;case 24:return g=null,u!==null&&(g=u.memoizedState.cache),f.memoizedState.cache!==g&&(f.flags|=2048),Ul(ns),Ta(f),null;case 25:return null;case 30:return null}throw Error(n(156,f.tag))}function GV(u,f){switch(ah(f),f.tag){case 1:return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return Ul(ns),be(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 26:case 27:case 5:return me(f),null;case 13:if(NA(f),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(n(340));lo()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return R(Ps),null;case 4:return be(),null;case 10:return Ul(f.type),null;case 22:case 23:return NA(f),Rr(),u!==null&&R(O),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 24:return Ul(ns),null;case 25:return null;default:return null}}function pk(u,f){switch(ah(f),f.tag){case 3:Ul(ns),be();break;case 26:case 27:case 5:me(f);break;case 4:be();break;case 13:NA(f);break;case 19:R(Ps);break;case 10:Ul(f.type);break;case 22:case 23:NA(f),Rr(),u!==null&&R(O);break;case 24:Ul(ns)}}function rg(u,f){try{var g=f.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var D=b.next;g=D;do{if((g.tag&u)===u){b=void 0;var H=g.create,ie=g.inst;b=H(),ie.destroy=b}g=g.next}while(g!==D)}}catch(xe){la(f,f.return,xe)}}function Fd(u,f,g){try{var b=f.updateQueue,D=b!==null?b.lastEffect:null;if(D!==null){var H=D.next;b=H;do{if((b.tag&u)===u){var ie=b.inst,xe=ie.destroy;if(xe!==void 0){ie.destroy=void 0,D=f;var je=g,at=xe;try{at()}catch(pt){la(D,je,pt)}}}b=b.next}while(b!==H)}}catch(pt){la(f,f.return,pt)}}function gk(u){var f=u.updateQueue;if(f!==null){var g=u.stateNode;try{kn(f,g)}catch(b){la(u,u.return,b)}}}function xk(u,f,g){g.props=gh(u.type,u.memoizedProps),g.state=u.memoizedState;try{g.componentWillUnmount()}catch(b){la(u,f,b)}}function ng(u,f){try{var g=u.ref;if(g!==null){switch(u.tag){case 26:case 27:case 5:var b=u.stateNode;break;case 30:b=u.stateNode;break;default:b=u.stateNode}typeof g=="function"?u.refCleanup=g(b):g.current=b}}catch(D){la(u,f,D)}}function _u(u,f){var g=u.ref,b=u.refCleanup;if(g!==null)if(typeof b=="function")try{b()}catch(D){la(u,f,D)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(D){la(u,f,D)}else g.current=null}function vk(u){var f=u.type,g=u.memoizedProps,b=u.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":g.autoFocus&&b.focus();break e;case"img":g.src?b.src=g.src:g.srcSet&&(b.srcset=g.srcSet)}}catch(D){la(u,u.return,D)}}function tC(u,f,g){try{var b=u.stateNode;dz(b,u.type,g,f),b[on]=f}catch(D){la(u,u.return,D)}}function bk(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Md(u.type)||u.tag===4}function rC(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||bk(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Md(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function nC(u,f,g){var b=u.tag;if(b===5||b===6)u=u.stateNode,f?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(u,f):(f=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,f.appendChild(u),g=g._reactRootContainer,g!=null||f.onclick!==null||(f.onclick=Lv));else if(b!==4&&(b===27&&Md(u.type)&&(g=u.stateNode,f=null),u=u.child,u!==null))for(nC(u,f,g),u=u.sibling;u!==null;)nC(u,f,g),u=u.sibling}function _v(u,f,g){var b=u.tag;if(b===5||b===6)u=u.stateNode,f?g.insertBefore(u,f):g.appendChild(u);else if(b!==4&&(b===27&&Md(u.type)&&(g=u.stateNode),u=u.child,u!==null))for(_v(u,f,g),u=u.sibling;u!==null;)_v(u,f,g),u=u.sibling}function wk(u){var f=u.stateNode,g=u.memoizedProps;try{for(var b=u.type,D=f.attributes;D.length;)f.removeAttributeNode(D[0]);hi(f,b,g),f[pn]=u,f[on]=g}catch(H){la(u,u.return,H)}}var TA=!1,ss=!1,aC=!1,yk=typeof WeakSet=="function"?WeakSet:Set,Ys=null;function KV(u,f){if(u=u.containerInfo,BC=Vv,u=ci(u),Us(u)){if("selectionStart"in u)var g={start:u.selectionStart,end:u.selectionEnd};else e:{g=(g=u.ownerDocument)&&g.defaultView||window;var b=g.getSelection&&g.getSelection();if(b&&b.rangeCount!==0){g=b.anchorNode;var D=b.anchorOffset,H=b.focusNode;b=b.focusOffset;try{g.nodeType,H.nodeType}catch{g=null;break e}var ie=0,xe=-1,je=-1,at=0,pt=0,Ct=u,it=null;t:for(;;){for(var ot;Ct!==g||D!==0&&Ct.nodeType!==3||(xe=ie+D),Ct!==H||b!==0&&Ct.nodeType!==3||(je=ie+b),Ct.nodeType===3&&(ie+=Ct.nodeValue.length),(ot=Ct.firstChild)!==null;)it=Ct,Ct=ot;for(;;){if(Ct===u)break t;if(it===g&&++at===D&&(xe=ie),it===H&&++pt===b&&(je=ie),(ot=Ct.nextSibling)!==null)break;Ct=it,it=Ct.parentNode}Ct=ot}g=xe===-1||je===-1?null:{start:xe,end:je}}else g=null}g=g||{start:0,end:0}}else g=null;for(kC={focusedElem:u,selectionRange:g},Vv=!1,Ys=f;Ys!==null;)if(f=Ys,u=f.child,(f.subtreeFlags&1024)!==0&&u!==null)u.return=f,Ys=u;else for(;Ys!==null;){switch(f=Ys,H=f.alternate,u=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&H!==null){u=void 0,g=f,D=H.memoizedProps,H=H.memoizedState,b=g.stateNode;try{var Fr=gh(g.type,D,g.elementType===g.type);u=b.getSnapshotBeforeUpdate(Fr,H),b.__reactInternalSnapshotBeforeUpdate=u}catch(Er){la(g,g.return,Er)}}break;case 3:if((u&1024)!==0){if(u=f.stateNode.containerInfo,g=u.nodeType,g===9)FC(u);else if(g===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":FC(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(n(163))}if(u=f.sibling,u!==null){u.return=f.return,Ys=u;break}Ys=f.return}}function Ek(u,f,g){var b=g.flags;switch(g.tag){case 0:case 11:case 15:jd(u,g),b&4&&rg(5,g);break;case 1:if(jd(u,g),b&4)if(u=g.stateNode,f===null)try{u.componentDidMount()}catch(ie){la(g,g.return,ie)}else{var D=gh(g.type,f.memoizedProps);f=f.memoizedState;try{u.componentDidUpdate(D,f,u.__reactInternalSnapshotBeforeUpdate)}catch(ie){la(g,g.return,ie)}}b&64&&gk(g),b&512&&ng(g,g.return);break;case 3:if(jd(u,g),b&64&&(u=g.updateQueue,u!==null)){if(f=null,g.child!==null)switch(g.child.tag){case 27:case 5:f=g.child.stateNode;break;case 1:f=g.child.stateNode}try{kn(u,f)}catch(ie){la(g,g.return,ie)}}break;case 27:f===null&&b&4&&wk(g);case 26:case 5:jd(u,g),f===null&&b&4&&vk(g),b&512&&ng(g,g.return);break;case 12:jd(u,g);break;case 13:jd(u,g),b&4&&Sk(u,g),b&64&&(u=g.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(g=tz.bind(null,g),vz(u,g))));break;case 22:if(b=g.memoizedState!==null||TA,!b){f=f!==null&&f.memoizedState!==null||ss,D=TA;var H=ss;TA=b,(ss=f)&&!H?Dd(u,g,(g.subtreeFlags&8772)!==0):jd(u,g),TA=D,ss=H}break;case 30:break;default:jd(u,g)}}function Ck(u){var f=u.alternate;f!==null&&(u.alternate=null,Ck(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&Ee(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Ea=null,Io=!1;function IA(u,f,g){for(g=g.child;g!==null;)_k(u,f,g),g=g.sibling}function _k(u,f,g){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(Rt,g)}catch{}switch(g.tag){case 26:ss||_u(g,f),IA(u,f,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:ss||_u(g,f);var b=Ea,D=Io;Md(g.type)&&(Ea=g.stateNode,Io=!1),IA(u,f,g),dg(g.stateNode),Ea=b,Io=D;break;case 5:ss||_u(g,f);case 6:if(b=Ea,D=Io,Ea=null,IA(u,f,g),Ea=b,Io=D,Ea!==null)if(Io)try{(Ea.nodeType===9?Ea.body:Ea.nodeName==="HTML"?Ea.ownerDocument.body:Ea).removeChild(g.stateNode)}catch(H){la(g,f,H)}else try{Ea.removeChild(g.stateNode)}catch(H){la(g,f,H)}break;case 18:Ea!==null&&(Io?(u=Ea,fT(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,g.stateNode),bg(u)):fT(Ea,g.stateNode));break;case 4:b=Ea,D=Io,Ea=g.stateNode.containerInfo,Io=!0,IA(u,f,g),Ea=b,Io=D;break;case 0:case 11:case 14:case 15:ss||Fd(2,g,f),ss||Fd(4,g,f),IA(u,f,g);break;case 1:ss||(_u(g,f),b=g.stateNode,typeof b.componentWillUnmount=="function"&&xk(g,f,b)),IA(u,f,g);break;case 21:IA(u,f,g);break;case 22:ss=(b=ss)||g.memoizedState!==null,IA(u,f,g),ss=b;break;default:IA(u,f,g)}}function Sk(u,f){if(f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{bg(u)}catch(g){la(f,f.return,g)}}function qV(u){switch(u.tag){case 13:case 19:var f=u.stateNode;return f===null&&(f=u.stateNode=new yk),f;case 22:return u=u.stateNode,f=u._retryCache,f===null&&(f=u._retryCache=new yk),f;default:throw Error(n(435,u.tag))}}function sC(u,f){var g=qV(u);f.forEach(function(b){var D=rz.bind(null,u,b);g.has(b)||(g.add(b),b.then(D,D))})}function rl(u,f){var g=f.deletions;if(g!==null)for(var b=0;b<g.length;b++){var D=g[b],H=u,ie=f,xe=ie;e:for(;xe!==null;){switch(xe.tag){case 27:if(Md(xe.type)){Ea=xe.stateNode,Io=!1;break e}break;case 5:Ea=xe.stateNode,Io=!1;break e;case 3:case 4:Ea=xe.stateNode.containerInfo,Io=!0;break e}xe=xe.return}if(Ea===null)throw Error(n(160));_k(H,ie,D),Ea=null,Io=!1,H=D.alternate,H!==null&&(H.return=null),D.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)Nk(f,u),f=f.sibling}var Ic=null;function Nk(u,f){var g=u.alternate,b=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:rl(f,u),nl(u),b&4&&(Fd(3,u,u.return),rg(3,u),Fd(5,u,u.return));break;case 1:rl(f,u),nl(u),b&512&&(ss||g===null||_u(g,g.return)),b&64&&TA&&(u=u.updateQueue,u!==null&&(b=u.callbacks,b!==null&&(g=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=g===null?b:g.concat(b))));break;case 26:var D=Ic;if(rl(f,u),nl(u),b&512&&(ss||g===null||_u(g,g.return)),b&4){var H=g!==null?g.memoizedState:null;if(b=u.memoizedState,g===null)if(b===null)if(u.stateNode===null){e:{b=u.type,g=u.memoizedProps,D=D.ownerDocument||D;t:switch(b){case"title":H=D.getElementsByTagName("title")[0],(!H||H[ye]||H[pn]||H.namespaceURI==="http://www.w3.org/2000/svg"||H.hasAttribute("itemprop"))&&(H=D.createElement(b),D.head.insertBefore(H,D.querySelector("head > title"))),hi(H,b,g),H[pn]=u,ze(H),b=H;break e;case"link":var ie=wT("link","href",D).get(b+(g.href||""));if(ie){for(var xe=0;xe<ie.length;xe++)if(H=ie[xe],H.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&H.getAttribute("rel")===(g.rel==null?null:g.rel)&&H.getAttribute("title")===(g.title==null?null:g.title)&&H.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){ie.splice(xe,1);break t}}H=D.createElement(b),hi(H,b,g),D.head.appendChild(H);break;case"meta":if(ie=wT("meta","content",D).get(b+(g.content||""))){for(xe=0;xe<ie.length;xe++)if(H=ie[xe],H.getAttribute("content")===(g.content==null?null:""+g.content)&&H.getAttribute("name")===(g.name==null?null:g.name)&&H.getAttribute("property")===(g.property==null?null:g.property)&&H.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&H.getAttribute("charset")===(g.charSet==null?null:g.charSet)){ie.splice(xe,1);break t}}H=D.createElement(b),hi(H,b,g),D.head.appendChild(H);break;default:throw Error(n(468,b))}H[pn]=u,ze(H),b=H}u.stateNode=b}else yT(D,u.type,u.stateNode);else u.stateNode=bT(D,b,u.memoizedProps);else H!==b?(H===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):H.count--,b===null?yT(D,u.type,u.stateNode):bT(D,b,u.memoizedProps)):b===null&&u.stateNode!==null&&tC(u,u.memoizedProps,g.memoizedProps)}break;case 27:rl(f,u),nl(u),b&512&&(ss||g===null||_u(g,g.return)),g!==null&&b&4&&tC(u,u.memoizedProps,g.memoizedProps);break;case 5:if(rl(f,u),nl(u),b&512&&(ss||g===null||_u(g,g.return)),u.flags&32){D=u.stateNode;try{Si(D,"")}catch(ot){la(u,u.return,ot)}}b&4&&u.stateNode!=null&&(D=u.memoizedProps,tC(u,D,g!==null?g.memoizedProps:D)),b&1024&&(aC=!0);break;case 6:if(rl(f,u),nl(u),b&4){if(u.stateNode===null)throw Error(n(162));b=u.memoizedProps,g=u.stateNode;try{g.nodeValue=b}catch(ot){la(u,u.return,ot)}}break;case 3:if(Mv=null,D=Ic,Ic=Uv(f.containerInfo),rl(f,u),Ic=D,nl(u),b&4&&g!==null&&g.memoizedState.isDehydrated)try{bg(f.containerInfo)}catch(ot){la(u,u.return,ot)}aC&&(aC=!1,Bk(u));break;case 4:b=Ic,Ic=Uv(u.stateNode.containerInfo),rl(f,u),nl(u),Ic=b;break;case 12:rl(f,u),nl(u);break;case 13:rl(f,u),nl(u),u.child.flags&8192&&u.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(AC=Fe()),b&4&&(b=u.updateQueue,b!==null&&(u.updateQueue=null,sC(u,b)));break;case 22:D=u.memoizedState!==null;var je=g!==null&&g.memoizedState!==null,at=TA,pt=ss;if(TA=at||D,ss=pt||je,rl(f,u),ss=pt,TA=at,nl(u),b&8192)e:for(f=u.stateNode,f._visibility=D?f._visibility&-2:f._visibility|1,D&&(g===null||je||TA||ss||xh(u)),g=null,f=u;;){if(f.tag===5||f.tag===26){if(g===null){je=g=f;try{if(H=je.stateNode,D)ie=H.style,typeof ie.setProperty=="function"?ie.setProperty("display","none","important"):ie.display="none";else{xe=je.stateNode;var Ct=je.memoizedProps.style,it=Ct!=null&&Ct.hasOwnProperty("display")?Ct.display:null;xe.style.display=it==null||typeof it=="boolean"?"":(""+it).trim()}}catch(ot){la(je,je.return,ot)}}}else if(f.tag===6){if(g===null){je=f;try{je.stateNode.nodeValue=D?"":je.memoizedProps}catch(ot){la(je,je.return,ot)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===u)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break e;for(;f.sibling===null;){if(f.return===null||f.return===u)break e;g===f&&(g=null),f=f.return}g===f&&(g=null),f.sibling.return=f.return,f=f.sibling}b&4&&(b=u.updateQueue,b!==null&&(g=b.retryQueue,g!==null&&(b.retryQueue=null,sC(u,g))));break;case 19:rl(f,u),nl(u),b&4&&(b=u.updateQueue,b!==null&&(u.updateQueue=null,sC(u,b)));break;case 30:break;case 21:break;default:rl(f,u),nl(u)}}function nl(u){var f=u.flags;if(f&2){try{for(var g,b=u.return;b!==null;){if(bk(b)){g=b;break}b=b.return}if(g==null)throw Error(n(160));switch(g.tag){case 27:var D=g.stateNode,H=rC(u);_v(u,H,D);break;case 5:var ie=g.stateNode;g.flags&32&&(Si(ie,""),g.flags&=-33);var xe=rC(u);_v(u,xe,ie);break;case 3:case 4:var je=g.stateNode.containerInfo,at=rC(u);nC(u,at,je);break;default:throw Error(n(161))}}catch(pt){la(u,u.return,pt)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function Bk(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var f=u;Bk(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),u=u.sibling}}function jd(u,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)Ek(u,f.alternate,f),f=f.sibling}function xh(u){for(u=u.child;u!==null;){var f=u;switch(f.tag){case 0:case 11:case 14:case 15:Fd(4,f,f.return),xh(f);break;case 1:_u(f,f.return);var g=f.stateNode;typeof g.componentWillUnmount=="function"&&xk(f,f.return,g),xh(f);break;case 27:dg(f.stateNode);case 26:case 5:_u(f,f.return),xh(f);break;case 22:f.memoizedState===null&&xh(f);break;case 30:xh(f);break;default:xh(f)}u=u.sibling}}function Dd(u,f,g){for(g=g&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var b=f.alternate,D=u,H=f,ie=H.flags;switch(H.tag){case 0:case 11:case 15:Dd(D,H,g),rg(4,H);break;case 1:if(Dd(D,H,g),b=H,D=b.stateNode,typeof D.componentDidMount=="function")try{D.componentDidMount()}catch(at){la(b,b.return,at)}if(b=H,D=b.updateQueue,D!==null){var xe=b.stateNode;try{var je=D.shared.hiddenCallbacks;if(je!==null)for(D.shared.hiddenCallbacks=null,D=0;D<je.length;D++)vn(je[D],xe)}catch(at){la(b,b.return,at)}}g&&ie&64&&gk(H),ng(H,H.return);break;case 27:wk(H);case 26:case 5:Dd(D,H,g),g&&b===null&&ie&4&&vk(H),ng(H,H.return);break;case 12:Dd(D,H,g);break;case 13:Dd(D,H,g),g&&ie&4&&Sk(D,H);break;case 22:H.memoizedState===null&&Dd(D,H,g),ng(H,H.return);break;case 30:break;default:Dd(D,H,g)}f=f.sibling}}function iC(u,f){var g=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),u=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(u=f.memoizedState.cachePool.pool),u!==g&&(u!=null&&u.refCount++,g!=null&&sh(g))}function oC(u,f){u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&sh(u))}function Su(u,f,g,b){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)kk(u,f,g,b),f=f.sibling}function kk(u,f,g,b){var D=f.flags;switch(f.tag){case 0:case 11:case 15:Su(u,f,g,b),D&2048&&rg(9,f);break;case 1:Su(u,f,g,b);break;case 3:Su(u,f,g,b),D&2048&&(u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&sh(u)));break;case 12:if(D&2048){Su(u,f,g,b),u=f.stateNode;try{var H=f.memoizedProps,ie=H.id,xe=H.onPostCommit;typeof xe=="function"&&xe(ie,f.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(je){la(f,f.return,je)}}else Su(u,f,g,b);break;case 13:Su(u,f,g,b);break;case 23:break;case 22:H=f.stateNode,ie=f.alternate,f.memoizedState!==null?H._visibility&2?Su(u,f,g,b):ag(u,f):H._visibility&2?Su(u,f,g,b):(H._visibility|=2,P0(u,f,g,b,(f.subtreeFlags&10256)!==0)),D&2048&&iC(ie,f);break;case 24:Su(u,f,g,b),D&2048&&oC(f.alternate,f);break;default:Su(u,f,g,b)}}function P0(u,f,g,b,D){for(D=D&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var H=u,ie=f,xe=g,je=b,at=ie.flags;switch(ie.tag){case 0:case 11:case 15:P0(H,ie,xe,je,D),rg(8,ie);break;case 23:break;case 22:var pt=ie.stateNode;ie.memoizedState!==null?pt._visibility&2?P0(H,ie,xe,je,D):ag(H,ie):(pt._visibility|=2,P0(H,ie,xe,je,D)),D&&at&2048&&iC(ie.alternate,ie);break;case 24:P0(H,ie,xe,je,D),D&&at&2048&&oC(ie.alternate,ie);break;default:P0(H,ie,xe,je,D)}f=f.sibling}}function ag(u,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var g=u,b=f,D=b.flags;switch(b.tag){case 22:ag(g,b),D&2048&&iC(b.alternate,b);break;case 24:ag(g,b),D&2048&&oC(b.alternate,b);break;default:ag(g,b)}f=f.sibling}}var sg=8192;function M0(u){if(u.subtreeFlags&sg)for(u=u.child;u!==null;)Tk(u),u=u.sibling}function Tk(u){switch(u.tag){case 26:M0(u),u.flags&sg&&u.memoizedState!==null&&Fz(Ic,u.memoizedState,u.memoizedProps);break;case 5:M0(u);break;case 3:case 4:var f=Ic;Ic=Uv(u.stateNode.containerInfo),M0(u),Ic=f;break;case 22:u.memoizedState===null&&(f=u.alternate,f!==null&&f.memoizedState!==null?(f=sg,sg=16777216,M0(u),sg=f):M0(u));break;default:M0(u)}}function Ik(u){var f=u.alternate;if(f!==null&&(u=f.child,u!==null)){f.child=null;do f=u.sibling,u.sibling=null,u=f;while(u!==null)}}function ig(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var b=f[g];Ys=b,jk(b,u)}Ik(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Fk(u),u=u.sibling}function Fk(u){switch(u.tag){case 0:case 11:case 15:ig(u),u.flags&2048&&Fd(9,u,u.return);break;case 3:ig(u);break;case 12:ig(u);break;case 22:var f=u.stateNode;u.memoizedState!==null&&f._visibility&2&&(u.return===null||u.return.tag!==13)?(f._visibility&=-3,Sv(u)):ig(u);break;default:ig(u)}}function Sv(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var b=f[g];Ys=b,jk(b,u)}Ik(u)}for(u=u.child;u!==null;){switch(f=u,f.tag){case 0:case 11:case 15:Fd(8,f,f.return),Sv(f);break;case 22:g=f.stateNode,g._visibility&2&&(g._visibility&=-3,Sv(f));break;default:Sv(f)}u=u.sibling}}function jk(u,f){for(;Ys!==null;){var g=Ys;switch(g.tag){case 0:case 11:case 15:Fd(8,g,f);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var b=g.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:sh(g.memoizedState.cache)}if(b=g.child,b!==null)b.return=g,Ys=b;else e:for(g=u;Ys!==null;){b=Ys;var D=b.sibling,H=b.return;if(Ck(b),b===g){Ys=null;break e}if(D!==null){D.return=H,Ys=D;break e}Ys=H}}}var $V={getCacheForType:function(u){var f=rs(ns),g=f.data.get(u);return g===void 0&&(g=u(),f.data.set(u,g)),g}},WV=typeof WeakMap=="function"?WeakMap:Map,qn=0,Aa=null,ln=null,wn=0,$n=0,al=null,Rd=!1,Q0=!1,lC=!1,FA=0,Ha=0,Ld=0,vh=0,cC=0,Hl=0,H0=0,og=null,Fo=null,uC=!1,AC=0,Nv=1/0,Bv=null,Od=null,fi=0,Ud=null,V0=null,z0=0,dC=0,fC=null,Dk=null,lg=0,hC=null;function sl(){if((qn&2)!==0&&wn!==0)return wn&-wn;if(W.T!==null){var u=yA;return u!==0?u:wC()}return _a()}function Rk(){Hl===0&&(Hl=(wn&536870912)===0||Cn?mn():536870912);var u=Ql.current;return u!==null&&(u.flags|=32),Hl}function il(u,f,g){(u===Aa&&($n===2||$n===9)||u.cancelPendingCommit!==null)&&(G0(u,0),Pd(u,wn,Hl,!1)),Vn(u,g),((qn&2)===0||u!==Aa)&&(u===Aa&&((qn&2)===0&&(vh|=g),Ha===4&&Pd(u,wn,Hl,!1)),Nu(u))}function Lk(u,f,g){if((qn&6)!==0)throw Error(n(327));var b=!g&&(f&124)===0&&(f&u.expiredLanes)===0||Hr(u,f),D=b?JV(u,f):gC(u,f,!0),H=b;do{if(D===0){Q0&&!b&&Pd(u,f,0,!1);break}else{if(g=u.current.alternate,H&&!XV(g)){D=gC(u,f,!1),H=!1;continue}if(D===2){if(H=f,u.errorRecoveryDisabledLanes&H)var ie=0;else ie=u.pendingLanes&-536870913,ie=ie!==0?ie:ie&536870912?536870912:0;if(ie!==0){f=ie;e:{var xe=u;D=og;var je=xe.current.memoizedState.isDehydrated;if(je&&(G0(xe,ie).flags|=256),ie=gC(xe,ie,!1),ie!==2){if(lC&&!je){xe.errorRecoveryDisabledLanes|=H,vh|=H,D=4;break e}H=Fo,Fo=D,H!==null&&(Fo===null?Fo=H:Fo.push.apply(Fo,H))}D=ie}if(H=!1,D!==2)continue}}if(D===1){G0(u,0),Pd(u,f,0,!0);break}e:{switch(b=u,H=D,H){case 0:case 1:throw Error(n(345));case 4:if((f&4194048)!==f)break;case 6:Pd(b,f,Hl,!Rd);break e;case 2:Fo=null;break;case 3:case 5:break;default:throw Error(n(329))}if((f&62914560)===f&&(D=AC+300-Fe(),10<D)){if(Pd(b,f,Hl,!Rd),tr(b,0,!0)!==0)break e;b.timeoutHandle=AT(Ok.bind(null,b,g,Fo,Bv,uC,f,Hl,vh,H0,Rd,H,2,-0,0),D);break e}Ok(b,g,Fo,Bv,uC,f,Hl,vh,H0,Rd,H,0,-0,0)}}break}while(!0);Nu(u)}function Ok(u,f,g,b,D,H,ie,xe,je,at,pt,Ct,it,ot){if(u.timeoutHandle=-1,Ct=f.subtreeFlags,(Ct&8192||(Ct&16785408)===16785408)&&(mg={stylesheets:null,count:0,unsuspend:Iz},Tk(f),Ct=jz(),Ct!==null)){u.cancelPendingCommit=Ct(zk.bind(null,u,f,H,g,b,D,ie,xe,je,pt,1,it,ot)),Pd(u,H,ie,!at);return}zk(u,f,H,g,b,D,ie,xe,je)}function XV(u){for(var f=u;;){var g=f.tag;if((g===0||g===11||g===15)&&f.flags&16384&&(g=f.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var b=0;b<g.length;b++){var D=g[b],H=D.getSnapshot;D=D.value;try{if(!xs(H(),D))return!1}catch{return!1}}if(g=f.child,f.subtreeFlags&16384&&g!==null)g.return=f,f=g;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Pd(u,f,g,b){f&=~cC,f&=~vh,u.suspendedLanes|=f,u.pingedLanes&=~f,b&&(u.warmLanes|=f),b=u.expirationTimes;for(var D=f;0<D;){var H=31-De(D),ie=1<<H;b[H]=-1,D&=~ie}g!==0&&Jt(u,g,f)}function kv(){return(qn&6)===0?(cg(0),!1):!0}function mC(){if(ln!==null){if($n===0)var u=ln.return;else u=ln,_c=bs=null,I0(u),O0=null,Zp=0,u=ln;for(;u!==null;)pk(u.alternate,u),u=u.return;ln=null}}function G0(u,f){var g=u.timeoutHandle;g!==-1&&(u.timeoutHandle=-1,hz(g)),g=u.cancelPendingCommit,g!==null&&(u.cancelPendingCommit=null,g()),mC(),Aa=u,ln=g=Rl(u.current,null),wn=f,$n=0,al=null,Rd=!1,Q0=Hr(u,f),lC=!1,H0=Hl=cC=vh=Ld=Ha=0,Fo=og=null,uC=!1,(f&8)!==0&&(f|=f&32);var b=u.entangledLanes;if(b!==0)for(u=u.entanglements,b&=f;0<b;){var D=31-De(b),H=1<<D;f|=u[D],b&=~H}return FA=f,No(),g}function Uk(u,f){gr=null,W.H=pv,f===de||f===pe?(f=Ke(),$n=3):f===he?(f=Ke(),$n=4):$n=f===rk?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,al=f,ln===null&&(Ha=1,wv(u,Yr(f,u.current)))}function Pk(){var u=W.H;return W.H=pv,u===null?pv:u}function Mk(){var u=W.A;return W.A=$V,u}function pC(){Ha=4,Rd||(wn&4194048)!==wn&&Ql.current!==null||(Q0=!0),(Ld&134217727)===0&&(vh&134217727)===0||Aa===null||Pd(Aa,wn,Hl,!1)}function gC(u,f,g){var b=qn;qn|=2;var D=Pk(),H=Mk();(Aa!==u||wn!==f)&&(Bv=null,G0(u,f)),f=!1;var ie=Ha;e:do try{if($n!==0&&ln!==null){var xe=ln,je=al;switch($n){case 8:mC(),ie=6;break e;case 3:case 2:case 9:case 6:Ql.current===null&&(f=!0);var at=$n;if($n=0,al=null,K0(u,xe,je,at),g&&Q0){ie=0;break e}break;default:at=$n,$n=0,al=null,K0(u,xe,je,at)}}YV(),ie=Ha;break}catch(pt){Uk(u,pt)}while(!0);return f&&u.shellSuspendCounter++,_c=bs=null,qn=b,W.H=D,W.A=H,ln===null&&(Aa=null,wn=0,No()),ie}function YV(){for(;ln!==null;)Qk(ln)}function JV(u,f){var g=qn;qn|=2;var b=Pk(),D=Mk();Aa!==u||wn!==f?(Bv=null,Nv=Fe()+500,G0(u,f)):Q0=Hr(u,f);e:do try{if($n!==0&&ln!==null){f=ln;var H=al;t:switch($n){case 1:$n=0,al=null,K0(u,f,H,1);break;case 2:case 9:if(Se(H)){$n=0,al=null,Hk(f);break}f=function(){$n!==2&&$n!==9||Aa!==u||($n=7),Nu(u)},H.then(f,f);break e;case 3:$n=7;break e;case 4:$n=5;break e;case 7:Se(H)?($n=0,al=null,Hk(f)):($n=0,al=null,K0(u,f,H,7));break;case 5:var ie=null;switch(ln.tag){case 26:ie=ln.memoizedState;case 5:case 27:var xe=ln;if(!ie||ET(ie)){$n=0,al=null;var je=xe.sibling;if(je!==null)ln=je;else{var at=xe.return;at!==null?(ln=at,Tv(at)):ln=null}break t}}$n=0,al=null,K0(u,f,H,5);break;case 6:$n=0,al=null,K0(u,f,H,6);break;case 8:mC(),Ha=6;break e;default:throw Error(n(462))}}ZV();break}catch(pt){Uk(u,pt)}while(!0);return _c=bs=null,W.H=b,W.A=D,qn=g,ln!==null?0:(Aa=null,wn=0,No(),Ha)}function ZV(){for(;ln!==null&&!Te();)Qk(ln)}function Qk(u){var f=hk(u.alternate,u,FA);u.memoizedProps=u.pendingProps,f===null?Tv(u):ln=f}function Hk(u){var f=u,g=f.alternate;switch(f.tag){case 15:case 0:f=lk(g,f,f.pendingProps,f.type,void 0,wn);break;case 11:f=lk(g,f,f.pendingProps,f.type.render,f.ref,wn);break;case 5:I0(f);default:pk(g,f),f=ln=th(f,FA),f=hk(g,f,FA)}u.memoizedProps=u.pendingProps,f===null?Tv(u):ln=f}function K0(u,f,g,b){_c=bs=null,I0(f),O0=null,Zp=0;var D=f.return;try{if(HV(u,D,f,g,wn)){Ha=1,wv(u,Yr(g,u.current)),ln=null;return}}catch(H){if(D!==null)throw ln=D,H;Ha=1,wv(u,Yr(g,u.current)),ln=null;return}f.flags&32768?(Cn||b===1?u=!0:Q0||(wn&536870912)!==0?u=!1:(Rd=u=!0,(b===2||b===9||b===3||b===6)&&(b=Ql.current,b!==null&&b.tag===13&&(b.flags|=16384))),Vk(f,u)):Tv(f)}function Tv(u){var f=u;do{if((f.flags&32768)!==0){Vk(f,Rd);return}u=f.return;var g=zV(f.alternate,f,FA);if(g!==null){ln=g;return}if(f=f.sibling,f!==null){ln=f;return}ln=f=u}while(f!==null);Ha===0&&(Ha=5)}function Vk(u,f){do{var g=GV(u.alternate,u);if(g!==null){g.flags&=32767,ln=g;return}if(g=u.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!f&&(u=u.sibling,u!==null)){ln=u;return}ln=u=g}while(u!==null);Ha=6,ln=null}function zk(u,f,g,b,D,H,ie,xe,je){u.cancelPendingCommit=null;do Iv();while(fi!==0);if((qn&6)!==0)throw Error(n(327));if(f!==null){if(f===u.current)throw Error(n(177));if(H=f.lanes|f.childLanes,H|=Na,ar(u,g,H,ie,xe,je),u===Aa&&(ln=Aa=null,wn=0),V0=f,Ud=u,z0=g,dC=H,fC=D,Dk=b,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,nz(Et,function(){return Wk(),null})):(u.callbackNode=null,u.callbackPriority=0),b=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||b){b=W.T,W.T=null,D=te.p,te.p=2,ie=qn,qn|=4;try{KV(u,f,g)}finally{qn=ie,te.p=D,W.T=b}}fi=1,Gk(),Kk(),qk()}}function Gk(){if(fi===1){fi=0;var u=Ud,f=V0,g=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||g){g=W.T,W.T=null;var b=te.p;te.p=2;var D=qn;qn|=4;try{Nk(f,u);var H=kC,ie=ci(u.containerInfo),xe=H.focusedElem,je=H.selectionRange;if(ie!==xe&&xe&&xe.ownerDocument&&lu(xe.ownerDocument.documentElement,xe)){if(je!==null&&Us(xe)){var at=je.start,pt=je.end;if(pt===void 0&&(pt=at),"selectionStart"in xe)xe.selectionStart=at,xe.selectionEnd=Math.min(pt,xe.value.length);else{var Ct=xe.ownerDocument||document,it=Ct&&Ct.defaultView||window;if(it.getSelection){var ot=it.getSelection(),Fr=xe.textContent.length,Er=Math.min(je.start,Fr),aa=je.end===void 0?Er:Math.min(je.end,Fr);!ot.extend&&Er>aa&&(ie=aa,aa=Er,Er=ie);var qe=gc(xe,Er),Me=gc(xe,aa);if(qe&&Me&&(ot.rangeCount!==1||ot.anchorNode!==qe.node||ot.anchorOffset!==qe.offset||ot.focusNode!==Me.node||ot.focusOffset!==Me.offset)){var et=Ct.createRange();et.setStart(qe.node,qe.offset),ot.removeAllRanges(),Er>aa?(ot.addRange(et),ot.extend(Me.node,Me.offset)):(et.setEnd(Me.node,Me.offset),ot.addRange(et))}}}}for(Ct=[],ot=xe;ot=ot.parentNode;)ot.nodeType===1&&Ct.push({element:ot,left:ot.scrollLeft,top:ot.scrollTop});for(typeof xe.focus=="function"&&xe.focus(),xe=0;xe<Ct.length;xe++){var vt=Ct[xe];vt.element.scrollLeft=vt.left,vt.element.scrollTop=vt.top}}Vv=!!BC,kC=BC=null}finally{qn=D,te.p=b,W.T=g}}u.current=f,fi=2}}function Kk(){if(fi===2){fi=0;var u=Ud,f=V0,g=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||g){g=W.T,W.T=null;var b=te.p;te.p=2;var D=qn;qn|=4;try{Ek(u,f.alternate,f)}finally{qn=D,te.p=b,W.T=g}}fi=3}}function qk(){if(fi===4||fi===3){fi=0,we();var u=Ud,f=V0,g=z0,b=Dk;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?fi=5:(fi=0,V0=Ud=null,$k(u,u.pendingLanes));var D=u.pendingLanes;if(D===0&&(Od=null),Zn(g),f=f.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(Rt,f,void 0,(f.current.flags&128)===128)}catch{}if(b!==null){f=W.T,D=te.p,te.p=2,W.T=null;try{for(var H=u.onRecoverableError,ie=0;ie<b.length;ie++){var xe=b[ie];H(xe.value,{componentStack:xe.stack})}}finally{W.T=f,te.p=D}}(z0&3)!==0&&Iv(),Nu(u),D=u.pendingLanes,(g&4194090)!==0&&(D&42)!==0?u===hC?lg++:(lg=0,hC=u):lg=0,cg(0)}}function $k(u,f){(u.pooledCacheLanes&=f)===0&&(f=u.pooledCache,f!=null&&(u.pooledCache=null,sh(f)))}function Iv(u){return Gk(),Kk(),qk(),Wk()}function Wk(){if(fi!==5)return!1;var u=Ud,f=dC;dC=0;var g=Zn(z0),b=W.T,D=te.p;try{te.p=32>g?32:g,W.T=null,g=fC,fC=null;var H=Ud,ie=z0;if(fi=0,V0=Ud=null,z0=0,(qn&6)!==0)throw Error(n(331));var xe=qn;if(qn|=4,Fk(H.current),kk(H,H.current,ie,g),qn=xe,cg(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(Rt,H)}catch{}return!0}finally{te.p=D,W.T=b,$k(u,f)}}function Xk(u,f,g){f=Yr(g,f),f=KE(u.stateNode,f,2),u=wt(u,f,2),u!==null&&(Vn(u,2),Nu(u))}function la(u,f,g){if(u.tag===3)Xk(u,u,g);else for(;f!==null;){if(f.tag===3){Xk(f,u,g);break}else if(f.tag===1){var b=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Od===null||!Od.has(b))){u=Yr(g,u),g=ek(2),b=wt(f,g,2),b!==null&&(tk(g,b,f,u),Vn(b,2),Nu(b));break}}f=f.return}}function xC(u,f,g){var b=u.pingCache;if(b===null){b=u.pingCache=new WV;var D=new Set;b.set(f,D)}else D=b.get(f),D===void 0&&(D=new Set,b.set(f,D));D.has(g)||(lC=!0,D.add(g),u=ez.bind(null,u,f,g),f.then(u,u))}function ez(u,f,g){var b=u.pingCache;b!==null&&b.delete(f),u.pingedLanes|=u.suspendedLanes&g,u.warmLanes&=~g,Aa===u&&(wn&g)===g&&(Ha===4||Ha===3&&(wn&62914560)===wn&&300>Fe()-AC?(qn&2)===0&&G0(u,0):cC|=g,H0===wn&&(H0=0)),Nu(u)}function Yk(u,f){f===0&&(f=Lr()),u=vc(u,f),u!==null&&(Vn(u,f),Nu(u))}function tz(u){var f=u.memoizedState,g=0;f!==null&&(g=f.retryLane),Yk(u,g)}function rz(u,f){var g=0;switch(u.tag){case 13:var b=u.stateNode,D=u.memoizedState;D!==null&&(g=D.retryLane);break;case 19:b=u.stateNode;break;case 22:b=u.stateNode._retryCache;break;default:throw Error(n(314))}b!==null&&b.delete(f),Yk(u,g)}function nz(u,f){return Le(u,f)}var Fv=null,q0=null,vC=!1,jv=!1,bC=!1,bh=0;function Nu(u){u!==q0&&u.next===null&&(q0===null?Fv=q0=u:q0=q0.next=u),jv=!0,vC||(vC=!0,sz())}function cg(u,f){if(!bC&&jv){bC=!0;do for(var g=!1,b=Fv;b!==null;){if(u!==0){var D=b.pendingLanes;if(D===0)var H=0;else{var ie=b.suspendedLanes,xe=b.pingedLanes;H=(1<<31-De(42|u)+1)-1,H&=D&~(ie&~xe),H=H&201326741?H&201326741|1:H?H|2:0}H!==0&&(g=!0,tT(b,H))}else H=wn,H=tr(b,b===Aa?H:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(H&3)===0||Hr(b,H)||(g=!0,tT(b,H));b=b.next}while(g);bC=!1}}function az(){Jk()}function Jk(){jv=vC=!1;var u=0;bh!==0&&(fz()&&(u=bh),bh=0);for(var f=Fe(),g=null,b=Fv;b!==null;){var D=b.next,H=Zk(b,f);H===0?(b.next=null,g===null?Fv=D:g.next=D,D===null&&(q0=g)):(g=b,(u!==0||(H&3)!==0)&&(jv=!0)),b=D}cg(u)}function Zk(u,f){for(var g=u.suspendedLanes,b=u.pingedLanes,D=u.expirationTimes,H=u.pendingLanes&-62914561;0<H;){var ie=31-De(H),xe=1<<ie,je=D[ie];je===-1?((xe&g)===0||(xe&b)!==0)&&(D[ie]=or(xe,f)):je<=f&&(u.expiredLanes|=xe),H&=~xe}if(f=Aa,g=wn,g=tr(u,u===f?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),b=u.callbackNode,g===0||u===f&&($n===2||$n===9)||u.cancelPendingCommit!==null)return b!==null&&b!==null&&Ye(b),u.callbackNode=null,u.callbackPriority=0;if((g&3)===0||Hr(u,g)){if(f=g&-g,f===u.callbackPriority)return f;switch(b!==null&&Ye(b),Zn(g)){case 2:case 8:g=ut;break;case 32:g=Et;break;case 268435456:g=jt;break;default:g=Et}return b=eT.bind(null,u),g=Le(g,b),u.callbackPriority=f,u.callbackNode=g,f}return b!==null&&b!==null&&Ye(b),u.callbackPriority=2,u.callbackNode=null,2}function eT(u,f){if(fi!==0&&fi!==5)return u.callbackNode=null,u.callbackPriority=0,null;var g=u.callbackNode;if(Iv()&&u.callbackNode!==g)return null;var b=wn;return b=tr(u,u===Aa?b:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),b===0?null:(Lk(u,b,f),Zk(u,Fe()),u.callbackNode!=null&&u.callbackNode===g?eT.bind(null,u):null)}function tT(u,f){if(Iv())return null;Lk(u,f,!0)}function sz(){mz(function(){(qn&6)!==0?Le(Xe,az):Jk()})}function wC(){return bh===0&&(bh=mn()),bh}function rT(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Ko(""+u)}function nT(u,f){var g=f.ownerDocument.createElement("input");return g.name=f.name,g.value=f.value,u.id&&g.setAttribute("form",u.id),f.parentNode.insertBefore(g,f),u=new FormData(u),g.parentNode.removeChild(g),u}function iz(u,f,g,b,D){if(f==="submit"&&g&&g.stateNode===D){var H=rT((D[on]||null).action),ie=b.submitter;ie&&(f=(f=ie[on]||null)?rT(f.formAction):ie.getAttribute("formAction"),f!==null&&(H=f,ie=null));var xe=new Sl("action","action",null,b,D);u.push({event:xe,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(bh!==0){var je=ie?nT(D,ie):new FormData(D);Ml(g,{pending:!0,data:je,method:D.method,action:H},null,je)}}else typeof H=="function"&&(xe.preventDefault(),je=ie?nT(D,ie):new FormData(D),Ml(g,{pending:!0,data:je,method:D.method,action:H},H,je))},currentTarget:D}]})}}for(var yC=0;yC<pA.length;yC++){var EC=pA[yC],oz=EC.toLowerCase(),lz=EC[0].toUpperCase()+EC.slice(1);wa(oz,"on"+lz)}wa(vd,"onAnimationEnd"),wa(uu,"onAnimationIteration"),wa(Au,"onAnimationStart"),wa("dblclick","onDoubleClick"),wa("focusin","onFocus"),wa("focusout","onBlur"),wa(du,"onTransitionRun"),wa(mA,"onTransitionStart"),wa(bd,"onTransitionCancel"),wa(fu,"onTransitionEnd"),It("onMouseEnter",["mouseout","mouseover"]),It("onMouseLeave",["mouseout","mouseover"]),It("onPointerEnter",["pointerout","pointerover"]),It("onPointerLeave",["pointerout","pointerover"]),yt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yt("onBeforeInput",["compositionend","keypress","textInput","paste"]),yt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ug="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cz=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ug));function aT(u,f){f=(f&4)!==0;for(var g=0;g<u.length;g++){var b=u[g],D=b.event;b=b.listeners;e:{var H=void 0;if(f)for(var ie=b.length-1;0<=ie;ie--){var xe=b[ie],je=xe.instance,at=xe.currentTarget;if(xe=xe.listener,je!==H&&D.isPropagationStopped())break e;H=xe,D.currentTarget=at;try{H(D)}catch(pt){bv(pt)}D.currentTarget=null,H=je}else for(ie=0;ie<b.length;ie++){if(xe=b[ie],je=xe.instance,at=xe.currentTarget,xe=xe.listener,je!==H&&D.isPropagationStopped())break e;H=xe,D.currentTarget=at;try{H(D)}catch(pt){bv(pt)}D.currentTarget=null,H=je}}}}function cn(u,f){var g=f[zn];g===void 0&&(g=f[zn]=new Set);var b=u+"__bubble";g.has(b)||(sT(f,u,2,!1),g.add(b))}function CC(u,f,g){var b=0;f&&(b|=4),sT(g,u,b,f)}var Dv="_reactListening"+Math.random().toString(36).slice(2);function _C(u){if(!u[Dv]){u[Dv]=!0,Ze.forEach(function(g){g!=="selectionchange"&&(cz.has(g)||CC(g,!1,u),CC(g,!0,u))});var f=u.nodeType===9?u:u.ownerDocument;f===null||f[Dv]||(f[Dv]=!0,CC("selectionchange",!1,f))}}function sT(u,f,g,b){switch(kT(f)){case 2:var D=Lz;break;case 8:D=Oz;break;default:D=PC}g=D.bind(null,f,g,u),D=void 0,!li||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(D=!0),b?D!==void 0?u.addEventListener(f,g,{capture:!0,passive:D}):u.addEventListener(f,g,!0):D!==void 0?u.addEventListener(f,g,{passive:D}):u.addEventListener(f,g,!1)}function SC(u,f,g,b,D){var H=b;if((f&1)===0&&(f&2)===0&&b!==null)e:for(;;){if(b===null)return;var ie=b.tag;if(ie===3||ie===4){var xe=b.stateNode.containerInfo;if(xe===D)break;if(ie===4)for(ie=b.return;ie!==null;){var je=ie.tag;if((je===3||je===4)&&ie.stateNode.containerInfo===D)return;ie=ie.return}for(;xe!==null;){if(ie=_e(xe),ie===null)return;if(je=ie.tag,je===5||je===6||je===26||je===27){b=H=ie;continue e}xe=xe.parentNode}}b=b.return}hd(function(){var at=H,pt=Gn(g),Ct=[];e:{var it=xc.get(u);if(it!==void 0){var ot=Sl,Fr=u;switch(u){case"keypress":if(ki(g)===0)break e;case"keydown":case"keyup":ot=Xo;break;case"focusin":Fr="focus",ot=Bl;break;case"focusout":Fr="blur",ot=Bl;break;case"beforeblur":case"afterblur":ot=Bl;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=Ua;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=Nl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=au;break;case vd:case uu:case Au:ot=tu;break;case fu:ot=ce;break;case"scroll":case"scrollend":ot=cA;break;case"wheel":ot=Re;break;case"copy":case"cut":case"paste":ot=ru;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=pc;break;case"toggle":case"beforetoggle":ot=ct}var Er=(f&4)!==0,aa=!Er&&(u==="scroll"||u==="scrollend"),qe=Er?it!==null?it+"Capture":null:it;Er=[];for(var Me=at,et;Me!==null;){var vt=Me;if(et=vt.stateNode,vt=vt.tag,vt!==5&&vt!==26&&vt!==27||et===null||qe===null||(vt=Gs(Me,qe),vt!=null&&Er.push(Ag(Me,vt,et))),aa)break;Me=Me.return}0<Er.length&&(it=new ot(it,Fr,null,g,pt),Ct.push({event:it,listeners:Er}))}}if((f&7)===0){e:{if(it=u==="mouseover"||u==="pointerover",ot=u==="mouseout"||u==="pointerout",it&&g!==vo&&(Fr=g.relatedTarget||g.fromElement)&&(_e(Fr)||Fr[Dn]))break e;if((ot||it)&&(it=pt.window===pt?pt:(it=pt.ownerDocument)?it.defaultView||it.parentWindow:window,ot?(Fr=g.relatedTarget||g.toElement,ot=at,Fr=Fr?_e(Fr):null,Fr!==null&&(aa=s(Fr),Er=Fr.tag,Fr!==aa||Er!==5&&Er!==27&&Er!==6)&&(Fr=null)):(ot=null,Fr=at),ot!==Fr)){if(Er=Ua,vt="onMouseLeave",qe="onMouseEnter",Me="mouse",(u==="pointerout"||u==="pointerover")&&(Er=pc,vt="onPointerLeave",qe="onPointerEnter",Me="pointer"),aa=ot==null?it:$e(ot),et=Fr==null?it:$e(Fr),it=new Er(vt,Me+"leave",ot,g,pt),it.target=aa,it.relatedTarget=et,vt=null,_e(pt)===at&&(Er=new Er(qe,Me+"enter",Fr,g,pt),Er.target=et,Er.relatedTarget=aa,vt=Er),aa=vt,ot&&Fr)t:{for(Er=ot,qe=Fr,Me=0,et=Er;et;et=$0(et))Me++;for(et=0,vt=qe;vt;vt=$0(vt))et++;for(;0<Me-et;)Er=$0(Er),Me--;for(;0<et-Me;)qe=$0(qe),et--;for(;Me--;){if(Er===qe||qe!==null&&Er===qe.alternate)break t;Er=$0(Er),qe=$0(qe)}Er=null}else Er=null;ot!==null&&iT(Ct,it,ot,Er,!1),Fr!==null&&aa!==null&&iT(Ct,aa,Fr,Er,!0)}}e:{if(it=at?$e(at):window,ot=it.nodeName&&it.nodeName.toLowerCase(),ot==="select"||ot==="input"&&it.type==="file")var sr=gd;else if(Ln(it))if(AA)sr=E0;else{sr=Op;var nn=Ii}else ot=it.nodeName,!ot||ot.toLowerCase()!=="input"||it.type!=="checkbox"&&it.type!=="radio"?at&&oA(at.elementType)&&(sr=gd):sr=Zf;if(sr&&(sr=sr(u,at))){_o(Ct,sr,g,pt);break e}nn&&nn(u,it,at),u==="focusout"&&at&&it.type==="number"&&at.memoizedProps.value!=null&&El(it,"number",it.value)}switch(nn=at?$e(at):window,u){case"focusin":(Ln(nn)||nn.contentEditable==="true")&&(Fi=nn,Yo=at,jl=null);break;case"focusout":jl=Yo=Fi=null;break;case"mousedown":Jo=!0;break;case"contextmenu":case"mouseup":case"dragend":Jo=!1,ba(Ct,g,pt);break;case"selectionchange":if(cu)break;case"keydown":case"keyup":ba(Ct,g,pt)}var cr;if(Ht)e:{switch(u){case"compositionstart":var Cr="onCompositionStart";break e;case"compositionend":Cr="onCompositionEnd";break e;case"compositionupdate":Cr="onCompositionUpdate";break e}Cr=void 0}else yr?nt(u,g)&&(Cr="onCompositionEnd"):u==="keydown"&&g.keyCode===229&&(Cr="onCompositionStart");Cr&&(se&&g.locale!=="ko"&&(yr||Cr!=="onCompositionStart"?Cr==="onCompositionEnd"&&yr&&(cr=lA()):(Bi=pt,_l="value"in Bi?Bi.value:Bi.textContent,yr=!0)),nn=Rv(at,Cr),0<nn.length&&(Cr=new fc(Cr,u,null,g,pt),Ct.push({event:Cr,listeners:nn}),cr?Cr.data=cr:(cr=Bt(g),cr!==null&&(Cr.data=cr)))),(cr=J?rn(u,g):Dr(u,g))&&(Cr=Rv(at,"onBeforeInput"),0<Cr.length&&(nn=new fc("onBeforeInput","beforeinput",null,g,pt),Ct.push({event:nn,listeners:Cr}),nn.data=cr)),iz(Ct,u,at,g,pt)}aT(Ct,f)})}function Ag(u,f,g){return{instance:u,listener:f,currentTarget:g}}function Rv(u,f){for(var g=f+"Capture",b=[];u!==null;){var D=u,H=D.stateNode;if(D=D.tag,D!==5&&D!==26&&D!==27||H===null||(D=Gs(u,g),D!=null&&b.unshift(Ag(u,D,H)),D=Gs(u,f),D!=null&&b.push(Ag(u,D,H))),u.tag===3)return b;u=u.return}return[]}function $0(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function iT(u,f,g,b,D){for(var H=f._reactName,ie=[];g!==null&&g!==b;){var xe=g,je=xe.alternate,at=xe.stateNode;if(xe=xe.tag,je!==null&&je===b)break;xe!==5&&xe!==26&&xe!==27||at===null||(je=at,D?(at=Gs(g,H),at!=null&&ie.unshift(Ag(g,at,je))):D||(at=Gs(g,H),at!=null&&ie.push(Ag(g,at,je)))),g=g.return}ie.length!==0&&u.push({event:f,listeners:ie})}var uz=/\r\n?/g,Az=/\u0000|\uFFFD/g;function oT(u){return(typeof u=="string"?u:""+u).replace(uz,`
`).replace(Az,"")}function lT(u,f){return f=oT(f),oT(u)===f}function Lv(){}function na(u,f,g,b,D,H){switch(g){case"children":typeof b=="string"?f==="body"||f==="textarea"&&b===""||Si(u,b):(typeof b=="number"||typeof b=="bigint")&&f!=="body"&&Si(u,""+b);break;case"className":zr(u,"class",b);break;case"tabIndex":zr(u,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":zr(u,g,b);break;case"style":iA(u,b,H);break;case"data":if(f!=="object"){zr(u,"data",b);break}case"src":case"href":if(b===""&&(f!=="a"||g!=="href")){u.removeAttribute(g);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){u.removeAttribute(g);break}b=Ko(""+b),u.setAttribute(g,b);break;case"action":case"formAction":if(typeof b=="function"){u.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof H=="function"&&(g==="formAction"?(f!=="input"&&na(u,f,"name",D.name,D,null),na(u,f,"formEncType",D.formEncType,D,null),na(u,f,"formMethod",D.formMethod,D,null),na(u,f,"formTarget",D.formTarget,D,null)):(na(u,f,"encType",D.encType,D,null),na(u,f,"method",D.method,D,null),na(u,f,"target",D.target,D,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){u.removeAttribute(g);break}b=Ko(""+b),u.setAttribute(g,b);break;case"onClick":b!=null&&(u.onclick=Lv);break;case"onScroll":b!=null&&cn("scroll",u);break;case"onScrollEnd":b!=null&&cn("scrollend",u);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(n(61));if(g=b.__html,g!=null){if(D.children!=null)throw Error(n(60));u.innerHTML=g}}break;case"multiple":u.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":u.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){u.removeAttribute("xlink:href");break}g=Ko(""+b),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?u.setAttribute(g,""+b):u.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?u.setAttribute(g,""):u.removeAttribute(g);break;case"capture":case"download":b===!0?u.setAttribute(g,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?u.setAttribute(g,b):u.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?u.setAttribute(g,b):u.removeAttribute(g);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?u.removeAttribute(g):u.setAttribute(g,b);break;case"popover":cn("beforetoggle",u),cn("toggle",u),Vr(u,"popover",b);break;case"xlinkActuate":Wr(u,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":Wr(u,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":Wr(u,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":Wr(u,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":Wr(u,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":Wr(u,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":Wr(u,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":Wr(u,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":Wr(u,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":Vr(u,"is",b);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=Go.get(g)||g,Vr(u,g,b))}}function NC(u,f,g,b,D,H){switch(g){case"style":iA(u,b,H);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(n(61));if(g=b.__html,g!=null){if(D.children!=null)throw Error(n(60));u.innerHTML=g}}break;case"children":typeof b=="string"?Si(u,b):(typeof b=="number"||typeof b=="bigint")&&Si(u,""+b);break;case"onScroll":b!=null&&cn("scroll",u);break;case"onScrollEnd":b!=null&&cn("scrollend",u);break;case"onClick":b!=null&&(u.onclick=Lv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rt.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(D=g.endsWith("Capture"),f=g.slice(2,D?g.length-7:void 0),H=u[on]||null,H=H!=null?H[g]:null,typeof H=="function"&&u.removeEventListener(f,H,D),typeof b=="function")){typeof H!="function"&&H!==null&&(g in u?u[g]=null:u.hasAttribute(g)&&u.removeAttribute(g)),u.addEventListener(f,b,D);break e}g in u?u[g]=b:b===!0?u.setAttribute(g,""):Vr(u,g,b)}}}function hi(u,f,g){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":cn("error",u),cn("load",u);var b=!1,D=!1,H;for(H in g)if(g.hasOwnProperty(H)){var ie=g[H];if(ie!=null)switch(H){case"src":b=!0;break;case"srcSet":D=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:na(u,f,H,ie,g,null)}}D&&na(u,f,"srcSet",g.srcSet,g,null),b&&na(u,f,"src",g.src,g,null);return;case"input":cn("invalid",u);var xe=H=ie=D=null,je=null,at=null;for(b in g)if(g.hasOwnProperty(b)){var pt=g[b];if(pt!=null)switch(b){case"name":D=pt;break;case"type":ie=pt;break;case"checked":je=pt;break;case"defaultChecked":at=pt;break;case"value":H=pt;break;case"defaultValue":xe=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(n(137,f));break;default:na(u,f,b,pt,g,null)}}yl(u,H,xe,je,at,ie,D,!1),wl(u);return;case"select":cn("invalid",u),b=ie=H=null;for(D in g)if(g.hasOwnProperty(D)&&(xe=g[D],xe!=null))switch(D){case"value":H=xe;break;case"defaultValue":ie=xe;break;case"multiple":b=xe;default:na(u,f,D,xe,g,null)}f=H,g=ie,u.multiple=!!b,f!=null?xo(u,!!b,f,!1):g!=null&&xo(u,!!b,g,!0);return;case"textarea":cn("invalid",u),H=D=b=null;for(ie in g)if(g.hasOwnProperty(ie)&&(xe=g[ie],xe!=null))switch(ie){case"value":b=xe;break;case"defaultValue":D=xe;break;case"children":H=xe;break;case"dangerouslySetInnerHTML":if(xe!=null)throw Error(n(91));break;default:na(u,f,ie,xe,g,null)}Cl(u,b,D,H),wl(u);return;case"option":for(je in g)if(g.hasOwnProperty(je)&&(b=g[je],b!=null))switch(je){case"selected":u.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:na(u,f,je,b,g,null)}return;case"dialog":cn("beforetoggle",u),cn("toggle",u),cn("cancel",u),cn("close",u);break;case"iframe":case"object":cn("load",u);break;case"video":case"audio":for(b=0;b<ug.length;b++)cn(ug[b],u);break;case"image":cn("error",u),cn("load",u);break;case"details":cn("toggle",u);break;case"embed":case"source":case"link":cn("error",u),cn("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(at in g)if(g.hasOwnProperty(at)&&(b=g[at],b!=null))switch(at){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:na(u,f,at,b,g,null)}return;default:if(oA(f)){for(pt in g)g.hasOwnProperty(pt)&&(b=g[pt],b!==void 0&&NC(u,f,pt,b,g,void 0));return}}for(xe in g)g.hasOwnProperty(xe)&&(b=g[xe],b!=null&&na(u,f,xe,b,g,null))}function dz(u,f,g,b){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var D=null,H=null,ie=null,xe=null,je=null,at=null,pt=null;for(ot in g){var Ct=g[ot];if(g.hasOwnProperty(ot)&&Ct!=null)switch(ot){case"checked":break;case"value":break;case"defaultValue":je=Ct;default:b.hasOwnProperty(ot)||na(u,f,ot,null,b,Ct)}}for(var it in b){var ot=b[it];if(Ct=g[it],b.hasOwnProperty(it)&&(ot!=null||Ct!=null))switch(it){case"type":H=ot;break;case"name":D=ot;break;case"checked":at=ot;break;case"defaultChecked":pt=ot;break;case"value":ie=ot;break;case"defaultValue":xe=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(n(137,f));break;default:ot!==Ct&&na(u,f,it,ot,b,Ct)}}Ls(u,ie,xe,je,at,pt,H,D);return;case"select":ot=ie=xe=it=null;for(H in g)if(je=g[H],g.hasOwnProperty(H)&&je!=null)switch(H){case"value":break;case"multiple":ot=je;default:b.hasOwnProperty(H)||na(u,f,H,null,b,je)}for(D in b)if(H=b[D],je=g[D],b.hasOwnProperty(D)&&(H!=null||je!=null))switch(D){case"value":it=H;break;case"defaultValue":xe=H;break;case"multiple":ie=H;default:H!==je&&na(u,f,D,H,b,je)}f=xe,g=ie,b=ot,it!=null?xo(u,!!g,it,!1):!!b!=!!g&&(f!=null?xo(u,!!g,f,!0):xo(u,!!g,g?[]:"",!1));return;case"textarea":ot=it=null;for(xe in g)if(D=g[xe],g.hasOwnProperty(xe)&&D!=null&&!b.hasOwnProperty(xe))switch(xe){case"value":break;case"children":break;default:na(u,f,xe,null,b,D)}for(ie in b)if(D=b[ie],H=g[ie],b.hasOwnProperty(ie)&&(D!=null||H!=null))switch(ie){case"value":it=D;break;case"defaultValue":ot=D;break;case"children":break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(n(91));break;default:D!==H&&na(u,f,ie,D,b,H)}Nn(u,it,ot);return;case"option":for(var Fr in g)if(it=g[Fr],g.hasOwnProperty(Fr)&&it!=null&&!b.hasOwnProperty(Fr))switch(Fr){case"selected":u.selected=!1;break;default:na(u,f,Fr,null,b,it)}for(je in b)if(it=b[je],ot=g[je],b.hasOwnProperty(je)&&it!==ot&&(it!=null||ot!=null))switch(je){case"selected":u.selected=it&&typeof it!="function"&&typeof it!="symbol";break;default:na(u,f,je,it,b,ot)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Er in g)it=g[Er],g.hasOwnProperty(Er)&&it!=null&&!b.hasOwnProperty(Er)&&na(u,f,Er,null,b,it);for(at in b)if(it=b[at],ot=g[at],b.hasOwnProperty(at)&&it!==ot&&(it!=null||ot!=null))switch(at){case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(n(137,f));break;default:na(u,f,at,it,b,ot)}return;default:if(oA(f)){for(var aa in g)it=g[aa],g.hasOwnProperty(aa)&&it!==void 0&&!b.hasOwnProperty(aa)&&NC(u,f,aa,void 0,b,it);for(pt in b)it=b[pt],ot=g[pt],!b.hasOwnProperty(pt)||it===ot||it===void 0&&ot===void 0||NC(u,f,pt,it,b,ot);return}}for(var qe in g)it=g[qe],g.hasOwnProperty(qe)&&it!=null&&!b.hasOwnProperty(qe)&&na(u,f,qe,null,b,it);for(Ct in b)it=b[Ct],ot=g[Ct],!b.hasOwnProperty(Ct)||it===ot||it==null&&ot==null||na(u,f,Ct,it,b,ot)}var BC=null,kC=null;function Ov(u){return u.nodeType===9?u:u.ownerDocument}function cT(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uT(u,f){if(u===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&f==="foreignObject"?0:u}function TC(u,f){return u==="textarea"||u==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var IC=null;function fz(){var u=window.event;return u&&u.type==="popstate"?u===IC?!1:(IC=u,!0):(IC=null,!1)}var AT=typeof setTimeout=="function"?setTimeout:void 0,hz=typeof clearTimeout=="function"?clearTimeout:void 0,dT=typeof Promise=="function"?Promise:void 0,mz=typeof queueMicrotask=="function"?queueMicrotask:typeof dT<"u"?function(u){return dT.resolve(null).then(u).catch(pz)}:AT;function pz(u){setTimeout(function(){throw u})}function Md(u){return u==="head"}function fT(u,f){var g=f,b=0,D=0;do{var H=g.nextSibling;if(u.removeChild(g),H&&H.nodeType===8)if(g=H.data,g==="/$"){if(0<b&&8>b){g=b;var ie=u.ownerDocument;if(g&1&&dg(ie.documentElement),g&2&&dg(ie.body),g&4)for(g=ie.head,dg(g),ie=g.firstChild;ie;){var xe=ie.nextSibling,je=ie.nodeName;ie[ye]||je==="SCRIPT"||je==="STYLE"||je==="LINK"&&ie.rel.toLowerCase()==="stylesheet"||g.removeChild(ie),ie=xe}}if(D===0){u.removeChild(H),bg(f);return}D--}else g==="$"||g==="$?"||g==="$!"?D++:b=g.charCodeAt(0)-48;else b=0;g=H}while(g);bg(f)}function FC(u){var f=u.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var g=f;switch(f=f.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":FC(g),Ee(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}u.removeChild(g)}}function gz(u,f,g,b){for(;u.nodeType===1;){var D=g;if(u.nodeName.toLowerCase()!==f.toLowerCase()){if(!b&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(b){if(!u[ye])switch(f){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(H=u.getAttribute("rel"),H==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(H!==D.rel||u.getAttribute("href")!==(D.href==null||D.href===""?null:D.href)||u.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin)||u.getAttribute("title")!==(D.title==null?null:D.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(H=u.getAttribute("src"),(H!==(D.src==null?null:D.src)||u.getAttribute("type")!==(D.type==null?null:D.type)||u.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin))&&H&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(f==="input"&&u.type==="hidden"){var H=D.name==null?null:""+D.name;if(D.type==="hidden"&&u.getAttribute("name")===H)return u}else return u;if(u=Fc(u.nextSibling),u===null)break}return null}function xz(u,f,g){if(f==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!g||(u=Fc(u.nextSibling),u===null))return null;return u}function jC(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function vz(u,f){var g=u.ownerDocument;if(u.data!=="$?"||g.readyState==="complete")f();else{var b=function(){f(),g.removeEventListener("DOMContentLoaded",b)};g.addEventListener("DOMContentLoaded",b),u._reactRetry=b}}function Fc(u){for(;u!=null;u=u.nextSibling){var f=u.nodeType;if(f===1||f===3)break;if(f===8){if(f=u.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return u}var DC=null;function hT(u){u=u.previousSibling;for(var f=0;u;){if(u.nodeType===8){var g=u.data;if(g==="$"||g==="$!"||g==="$?"){if(f===0)return u;f--}else g==="/$"&&f++}u=u.previousSibling}return null}function mT(u,f,g){switch(f=Ov(g),u){case"html":if(u=f.documentElement,!u)throw Error(n(452));return u;case"head":if(u=f.head,!u)throw Error(n(453));return u;case"body":if(u=f.body,!u)throw Error(n(454));return u;default:throw Error(n(451))}}function dg(u){for(var f=u.attributes;f.length;)u.removeAttributeNode(f[0]);Ee(u)}var Vl=new Map,pT=new Set;function Uv(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var jA=te.d;te.d={f:bz,r:wz,D:yz,C:Ez,L:Cz,m:_z,X:Nz,S:Sz,M:Bz};function bz(){var u=jA.f(),f=kv();return u||f}function wz(u){var f=Be(u);f!==null&&f.tag===5&&f.type==="form"?mh(f):jA.r(u)}var W0=typeof document>"u"?null:document;function gT(u,f,g){var b=W0;if(b&&typeof f=="string"&&f){var D=gn(f);D='link[rel="'+u+'"][href="'+D+'"]',typeof g=="string"&&(D+='[crossorigin="'+g+'"]'),pT.has(D)||(pT.add(D),u={rel:u,crossOrigin:g,href:f},b.querySelector(D)===null&&(f=b.createElement("link"),hi(f,"link",u),ze(f),b.head.appendChild(f)))}}function yz(u){jA.D(u),gT("dns-prefetch",u,null)}function Ez(u,f){jA.C(u,f),gT("preconnect",u,f)}function Cz(u,f,g){jA.L(u,f,g);var b=W0;if(b&&u&&f){var D='link[rel="preload"][as="'+gn(f)+'"]';f==="image"&&g&&g.imageSrcSet?(D+='[imagesrcset="'+gn(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(D+='[imagesizes="'+gn(g.imageSizes)+'"]')):D+='[href="'+gn(u)+'"]';var H=D;switch(f){case"style":H=X0(u);break;case"script":H=Y0(u)}Vl.has(H)||(u=d({rel:"preload",href:f==="image"&&g&&g.imageSrcSet?void 0:u,as:f},g),Vl.set(H,u),b.querySelector(D)!==null||f==="style"&&b.querySelector(fg(H))||f==="script"&&b.querySelector(hg(H))||(f=b.createElement("link"),hi(f,"link",u),ze(f),b.head.appendChild(f)))}}function _z(u,f){jA.m(u,f);var g=W0;if(g&&u){var b=f&&typeof f.as=="string"?f.as:"script",D='link[rel="modulepreload"][as="'+gn(b)+'"][href="'+gn(u)+'"]',H=D;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":H=Y0(u)}if(!Vl.has(H)&&(u=d({rel:"modulepreload",href:u},f),Vl.set(H,u),g.querySelector(D)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(hg(H)))return}b=g.createElement("link"),hi(b,"link",u),ze(b),g.head.appendChild(b)}}}function Sz(u,f,g){jA.S(u,f,g);var b=W0;if(b&&u){var D=st(b).hoistableStyles,H=X0(u);f=f||"default";var ie=D.get(H);if(!ie){var xe={loading:0,preload:null};if(ie=b.querySelector(fg(H)))xe.loading=5;else{u=d({rel:"stylesheet",href:u,"data-precedence":f},g),(g=Vl.get(H))&&RC(u,g);var je=ie=b.createElement("link");ze(je),hi(je,"link",u),je._p=new Promise(function(at,pt){je.onload=at,je.onerror=pt}),je.addEventListener("load",function(){xe.loading|=1}),je.addEventListener("error",function(){xe.loading|=2}),xe.loading|=4,Pv(ie,f,b)}ie={type:"stylesheet",instance:ie,count:1,state:xe},D.set(H,ie)}}}function Nz(u,f){jA.X(u,f);var g=W0;if(g&&u){var b=st(g).hoistableScripts,D=Y0(u),H=b.get(D);H||(H=g.querySelector(hg(D)),H||(u=d({src:u,async:!0},f),(f=Vl.get(D))&&LC(u,f),H=g.createElement("script"),ze(H),hi(H,"link",u),g.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},b.set(D,H))}}function Bz(u,f){jA.M(u,f);var g=W0;if(g&&u){var b=st(g).hoistableScripts,D=Y0(u),H=b.get(D);H||(H=g.querySelector(hg(D)),H||(u=d({src:u,async:!0,type:"module"},f),(f=Vl.get(D))&&LC(u,f),H=g.createElement("script"),ze(H),hi(H,"link",u),g.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},b.set(D,H))}}function xT(u,f,g,b){var D=(D=ne.current)?Uv(D):null;if(!D)throw Error(n(446));switch(u){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(f=X0(g.href),g=st(D).hoistableStyles,b=g.get(f),b||(b={type:"style",instance:null,count:0,state:null},g.set(f,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){u=X0(g.href);var H=st(D).hoistableStyles,ie=H.get(u);if(ie||(D=D.ownerDocument||D,ie={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},H.set(u,ie),(H=D.querySelector(fg(u)))&&!H._p&&(ie.instance=H,ie.state.loading=5),Vl.has(u)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Vl.set(u,g),H||kz(D,u,g,ie.state))),f&&b===null)throw Error(n(528,""));return ie}if(f&&b!==null)throw Error(n(529,""));return null;case"script":return f=g.async,g=g.src,typeof g=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Y0(g),g=st(D).hoistableScripts,b=g.get(f),b||(b={type:"script",instance:null,count:0,state:null},g.set(f,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,u))}}function X0(u){return'href="'+gn(u)+'"'}function fg(u){return'link[rel="stylesheet"]['+u+"]"}function vT(u){return d({},u,{"data-precedence":u.precedence,precedence:null})}function kz(u,f,g,b){u.querySelector('link[rel="preload"][as="style"]['+f+"]")?b.loading=1:(f=u.createElement("link"),b.preload=f,f.addEventListener("load",function(){return b.loading|=1}),f.addEventListener("error",function(){return b.loading|=2}),hi(f,"link",g),ze(f),u.head.appendChild(f))}function Y0(u){return'[src="'+gn(u)+'"]'}function hg(u){return"script[async]"+u}function bT(u,f,g){if(f.count++,f.instance===null)switch(f.type){case"style":var b=u.querySelector('style[data-href~="'+gn(g.href)+'"]');if(b)return f.instance=b,ze(b),b;var D=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return b=(u.ownerDocument||u).createElement("style"),ze(b),hi(b,"style",D),Pv(b,g.precedence,u),f.instance=b;case"stylesheet":D=X0(g.href);var H=u.querySelector(fg(D));if(H)return f.state.loading|=4,f.instance=H,ze(H),H;b=vT(g),(D=Vl.get(D))&&RC(b,D),H=(u.ownerDocument||u).createElement("link"),ze(H);var ie=H;return ie._p=new Promise(function(xe,je){ie.onload=xe,ie.onerror=je}),hi(H,"link",b),f.state.loading|=4,Pv(H,g.precedence,u),f.instance=H;case"script":return H=Y0(g.src),(D=u.querySelector(hg(H)))?(f.instance=D,ze(D),D):(b=g,(D=Vl.get(H))&&(b=d({},g),LC(b,D)),u=u.ownerDocument||u,D=u.createElement("script"),ze(D),hi(D,"link",b),u.head.appendChild(D),f.instance=D);case"void":return null;default:throw Error(n(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(b=f.instance,f.state.loading|=4,Pv(b,g.precedence,u));return f.instance}function Pv(u,f,g){for(var b=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),D=b.length?b[b.length-1]:null,H=D,ie=0;ie<b.length;ie++){var xe=b[ie];if(xe.dataset.precedence===f)H=xe;else if(H!==D)break}H?H.parentNode.insertBefore(u,H.nextSibling):(f=g.nodeType===9?g.head:g,f.insertBefore(u,f.firstChild))}function RC(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.title==null&&(u.title=f.title)}function LC(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.integrity==null&&(u.integrity=f.integrity)}var Mv=null;function wT(u,f,g){if(Mv===null){var b=new Map,D=Mv=new Map;D.set(g,b)}else D=Mv,b=D.get(g),b||(b=new Map,D.set(g,b));if(b.has(u))return b;for(b.set(u,null),g=g.getElementsByTagName(u),D=0;D<g.length;D++){var H=g[D];if(!(H[ye]||H[pn]||u==="link"&&H.getAttribute("rel")==="stylesheet")&&H.namespaceURI!=="http://www.w3.org/2000/svg"){var ie=H.getAttribute(f)||"";ie=u+ie;var xe=b.get(ie);xe?xe.push(H):b.set(ie,[H])}}return b}function yT(u,f,g){u=u.ownerDocument||u,u.head.insertBefore(g,f==="title"?u.querySelector("head > title"):null)}function Tz(u,f,g){if(g===1||f.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return u=f.disabled,typeof f.precedence=="string"&&u==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function ET(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var mg=null;function Iz(){}function Fz(u,f,g){if(mg===null)throw Error(n(475));var b=mg;if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var D=X0(g.href),H=u.querySelector(fg(D));if(H){u=H._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(b.count++,b=Qv.bind(b),u.then(b,b)),f.state.loading|=4,f.instance=H,ze(H);return}H=u.ownerDocument||u,g=vT(g),(D=Vl.get(D))&&RC(g,D),H=H.createElement("link"),ze(H);var ie=H;ie._p=new Promise(function(xe,je){ie.onload=xe,ie.onerror=je}),hi(H,"link",g),f.instance=H}b.stylesheets===null&&(b.stylesheets=new Map),b.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(b.count++,f=Qv.bind(b),u.addEventListener("load",f),u.addEventListener("error",f))}}function jz(){if(mg===null)throw Error(n(475));var u=mg;return u.stylesheets&&u.count===0&&OC(u,u.stylesheets),0<u.count?function(f){var g=setTimeout(function(){if(u.stylesheets&&OC(u,u.stylesheets),u.unsuspend){var b=u.unsuspend;u.unsuspend=null,b()}},6e4);return u.unsuspend=f,function(){u.unsuspend=null,clearTimeout(g)}}:null}function Qv(){if(this.count--,this.count===0){if(this.stylesheets)OC(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var Hv=null;function OC(u,f){u.stylesheets=null,u.unsuspend!==null&&(u.count++,Hv=new Map,f.forEach(Dz,u),Hv=null,Qv.call(u))}function Dz(u,f){if(!(f.state.loading&4)){var g=Hv.get(u);if(g)var b=g.get(null);else{g=new Map,Hv.set(u,g);for(var D=u.querySelectorAll("link[data-precedence],style[data-precedence]"),H=0;H<D.length;H++){var ie=D[H];(ie.nodeName==="LINK"||ie.getAttribute("media")!=="not all")&&(g.set(ie.dataset.precedence,ie),b=ie)}b&&g.set(null,b)}D=f.instance,ie=D.getAttribute("data-precedence"),H=g.get(ie)||b,H===b&&g.set(null,D),g.set(ie,D),this.count++,b=Qv.bind(this),D.addEventListener("load",b),D.addEventListener("error",b),H?H.parentNode.insertBefore(D,H.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(D,u.firstChild)),f.state.loading|=4}}var pg={$$typeof:T,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function Rz(u,f,g,b,D,H,ie,xe){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=En(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=En(0),this.hiddenUpdates=En(null),this.identifierPrefix=b,this.onUncaughtError=D,this.onCaughtError=H,this.onRecoverableError=ie,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=xe,this.incompleteTransitions=new Map}function CT(u,f,g,b,D,H,ie,xe,je,at,pt,Ct){return u=new Rz(u,f,g,ie,xe,je,at,Ct),f=1,H===!0&&(f|=24),H=Ws(3,null,null,f),u.current=H,H.stateNode=u,f=Pp(),f.refCount++,u.pooledCache=f,f.refCount++,H.memoizedState={element:b,isDehydrated:g,cache:f},Pe(H),u}function _T(u){return u?(u=vs,u):vs}function ST(u,f,g,b,D,H){D=_T(D),b.context===null?b.context=D:b.pendingContext=D,b=ht(f),b.payload={element:g},H=H===void 0?null:H,H!==null&&(b.callback=H),g=wt(u,b,f),g!==null&&(il(g,u,f),gt(g,u,f))}function NT(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var g=u.retryLane;u.retryLane=g!==0&&g<f?g:f}}function UC(u,f){NT(u,f),(u=u.alternate)&&NT(u,f)}function BT(u){if(u.tag===13){var f=vc(u,67108864);f!==null&&il(f,u,67108864),UC(u,67108864)}}var Vv=!0;function Lz(u,f,g,b){var D=W.T;W.T=null;var H=te.p;try{te.p=2,PC(u,f,g,b)}finally{te.p=H,W.T=D}}function Oz(u,f,g,b){var D=W.T;W.T=null;var H=te.p;try{te.p=8,PC(u,f,g,b)}finally{te.p=H,W.T=D}}function PC(u,f,g,b){if(Vv){var D=MC(b);if(D===null)SC(u,f,b,zv,g),TT(u,b);else if(Pz(D,u,f,g,b))b.stopPropagation();else if(TT(u,b),f&4&&-1<Uz.indexOf(u)){for(;D!==null;){var H=Be(D);if(H!==null)switch(H.tag){case 3:if(H=H.stateNode,H.current.memoizedState.isDehydrated){var ie=zt(H.pendingLanes);if(ie!==0){var xe=H;for(xe.pendingLanes|=2,xe.entangledLanes|=2;ie;){var je=1<<31-De(ie);xe.entanglements[1]|=je,ie&=~je}Nu(H),(qn&6)===0&&(Nv=Fe()+500,cg(0))}}break;case 13:xe=vc(H,2),xe!==null&&il(xe,H,2),kv(),UC(H,2)}if(H=MC(b),H===null&&SC(u,f,b,zv,g),H===D)break;D=H}D!==null&&b.stopPropagation()}else SC(u,f,b,null,g)}}function MC(u){return u=Gn(u),QC(u)}var zv=null;function QC(u){if(zv=null,u=_e(u),u!==null){var f=s(u);if(f===null)u=null;else{var g=f.tag;if(g===13){if(u=i(f),u!==null)return u;u=null}else if(g===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;u=null}else f!==u&&(u=null)}}return zv=u,null}function kT(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(He()){case Xe:return 2;case ut:return 8;case Et:case At:return 32;case jt:return 268435456;default:return 32}default:return 32}}var HC=!1,Qd=null,Hd=null,Vd=null,gg=new Map,xg=new Map,zd=[],Uz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function TT(u,f){switch(u){case"focusin":case"focusout":Qd=null;break;case"dragenter":case"dragleave":Hd=null;break;case"mouseover":case"mouseout":Vd=null;break;case"pointerover":case"pointerout":gg.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":xg.delete(f.pointerId)}}function vg(u,f,g,b,D,H){return u===null||u.nativeEvent!==H?(u={blockedOn:f,domEventName:g,eventSystemFlags:b,nativeEvent:H,targetContainers:[D]},f!==null&&(f=Be(f),f!==null&&BT(f)),u):(u.eventSystemFlags|=b,f=u.targetContainers,D!==null&&f.indexOf(D)===-1&&f.push(D),u)}function Pz(u,f,g,b,D){switch(f){case"focusin":return Qd=vg(Qd,u,f,g,b,D),!0;case"dragenter":return Hd=vg(Hd,u,f,g,b,D),!0;case"mouseover":return Vd=vg(Vd,u,f,g,b,D),!0;case"pointerover":var H=D.pointerId;return gg.set(H,vg(gg.get(H)||null,u,f,g,b,D)),!0;case"gotpointercapture":return H=D.pointerId,xg.set(H,vg(xg.get(H)||null,u,f,g,b,D)),!0}return!1}function IT(u){var f=_e(u.target);if(f!==null){var g=s(f);if(g!==null){if(f=g.tag,f===13){if(f=i(g),f!==null){u.blockedOn=f,js(u.priority,function(){if(g.tag===13){var b=sl();b=ms(b);var D=vc(g,b);D!==null&&il(D,g,b),UC(g,b)}});return}}else if(f===3&&g.stateNode.current.memoizedState.isDehydrated){u.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Gv(u){if(u.blockedOn!==null)return!1;for(var f=u.targetContainers;0<f.length;){var g=MC(u.nativeEvent);if(g===null){g=u.nativeEvent;var b=new g.constructor(g.type,g);vo=b,g.target.dispatchEvent(b),vo=null}else return f=Be(g),f!==null&&BT(f),u.blockedOn=g,!1;f.shift()}return!0}function FT(u,f,g){Gv(u)&&g.delete(f)}function Mz(){HC=!1,Qd!==null&&Gv(Qd)&&(Qd=null),Hd!==null&&Gv(Hd)&&(Hd=null),Vd!==null&&Gv(Vd)&&(Vd=null),gg.forEach(FT),xg.forEach(FT)}function Kv(u,f){u.blockedOn===f&&(u.blockedOn=null,HC||(HC=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Mz)))}var qv=null;function jT(u){qv!==u&&(qv=u,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){qv===u&&(qv=null);for(var f=0;f<u.length;f+=3){var g=u[f],b=u[f+1],D=u[f+2];if(typeof b!="function"){if(QC(b||g)===null)continue;break}var H=Be(g);H!==null&&(u.splice(f,3),f-=3,Ml(H,{pending:!0,data:D,method:g.method,action:b},b,D))}}))}function bg(u){function f(je){return Kv(je,u)}Qd!==null&&Kv(Qd,u),Hd!==null&&Kv(Hd,u),Vd!==null&&Kv(Vd,u),gg.forEach(f),xg.forEach(f);for(var g=0;g<zd.length;g++){var b=zd[g];b.blockedOn===u&&(b.blockedOn=null)}for(;0<zd.length&&(g=zd[0],g.blockedOn===null);)IT(g),g.blockedOn===null&&zd.shift();if(g=(u.ownerDocument||u).$$reactFormReplay,g!=null)for(b=0;b<g.length;b+=3){var D=g[b],H=g[b+1],ie=D[on]||null;if(typeof H=="function")ie||jT(g);else if(ie){var xe=null;if(H&&H.hasAttribute("formAction")){if(D=H,ie=H[on]||null)xe=ie.formAction;else if(QC(D)!==null)continue}else xe=ie.action;typeof xe=="function"?g[b+1]=xe:(g.splice(b,3),b-=3),jT(g)}}}function VC(u){this._internalRoot=u}$v.prototype.render=VC.prototype.render=function(u){var f=this._internalRoot;if(f===null)throw Error(n(409));var g=f.current,b=sl();ST(g,b,u,f,null,null)},$v.prototype.unmount=VC.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var f=u.containerInfo;ST(u.current,2,null,u,null,null),kv(),f[Dn]=null}};function $v(u){this._internalRoot=u}$v.prototype.unstable_scheduleHydration=function(u){if(u){var f=_a();u={blockedOn:null,target:u,priority:f};for(var g=0;g<zd.length&&f!==0&&f<zd[g].priority;g++);zd.splice(g,0,u),g===0&&IT(u)}};var DT=t.version;if(DT!=="19.1.1")throw Error(n(527,DT,"19.1.1"));te.findDOMNode=function(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=c(f),u=u!==null?A(u):null,u=u===null?null:u.stateNode,u};var Qz={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wv.isDisabled&&Wv.supportsFiber)try{Rt=Wv.inject(Qz),Ut=Wv}catch{}}return yg.createRoot=function(u,f){if(!a(u))throw Error(n(299));var g=!1,b="",D=X3,H=Y3,ie=J3,xe=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(D=f.onUncaughtError),f.onCaughtError!==void 0&&(H=f.onCaughtError),f.onRecoverableError!==void 0&&(ie=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(xe=f.unstable_transitionCallbacks)),f=CT(u,1,!1,null,null,g,b,D,H,ie,xe,null),u[Dn]=f.current,_C(u),new VC(f)},yg.hydrateRoot=function(u,f,g){if(!a(u))throw Error(n(299));var b=!1,D="",H=X3,ie=Y3,xe=J3,je=null,at=null;return g!=null&&(g.unstable_strictMode===!0&&(b=!0),g.identifierPrefix!==void 0&&(D=g.identifierPrefix),g.onUncaughtError!==void 0&&(H=g.onUncaughtError),g.onCaughtError!==void 0&&(ie=g.onCaughtError),g.onRecoverableError!==void 0&&(xe=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(je=g.unstable_transitionCallbacks),g.formState!==void 0&&(at=g.formState)),f=CT(u,1,!0,f,g??null,b,D,H,ie,xe,je,at),f.context=_T(null),g=f.current,b=sl(),b=ms(b),D=ht(b),D.callback=null,wt(g,D,b),g=b,f.current.lanes=g,Vn(f,g),Nu(f),u[Dn]=f.current,_C(u),new $v(f)},yg.version="19.1.1",yg}var zT;function Yz(){if(zT)return KC.exports;zT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),KC.exports=Xz(),KC.exports}var Jz=Yz();const Zz=fy(Jz),eG=()=>{};var GT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},tG=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[r++];t[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=e[r++],i=e[r++],o=e[r++],c=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const s=e[r++],i=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return t.join("")},iL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const s=e[a],i=a+1<e.length,o=i?e[a+1]:0,c=a+2<e.length,A=c?e[a+2]:0,d=s>>2,h=(s&3)<<4|o>>4;let m=(o&15)<<2|A>>6,p=A&63;c||(p=64,i||(m=64)),n.push(r[d],r[h],r[m],r[p])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(sL(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):tG(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const s=r[e.charAt(a++)],o=a<e.length?r[e.charAt(a)]:0;++a;const A=a<e.length?r[e.charAt(a)]:64;++a;const h=a<e.length?r[e.charAt(a)]:64;if(++a,s==null||o==null||A==null||h==null)throw new rG;const m=s<<2|o>>4;if(n.push(m),A!==64){const p=o<<4&240|A>>2;if(n.push(p),h!==64){const v=A<<6&192|h;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class rG extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nG=function(e){const t=sL(e);return iL.encodeByteArray(t,!0)},J2=function(e){return nG(e).replace(/\./g,"")},oL=function(e){try{return iL.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aG(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sG=()=>aG().__FIREBASE_DEFAULTS__,iG=()=>{if(typeof process>"u"||typeof GT>"u")return;const e=GT.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},oG=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&oL(e[1]);return t&&JSON.parse(t)},hy=()=>{try{return eG()||sG()||iG()||oG()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},lL=e=>{var t,r;return(r=(t=hy())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},KS=e=>{const t=lL(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},cL=()=>{var e;return(e=hy())==null?void 0:e.config},uL=e=>{var t;return(t=hy())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lG{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function my(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",a=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[J2(JSON.stringify(r)),J2(JSON.stringify(i)),""].join(".")}const sx={};function cG(){const e={prod:[],emulator:[]};for(const t of Object.keys(sx))sx[t]?e.emulator.push(t):e.prod.push(t);return e}function uG(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let KT=!1;function py(e,t){if(typeof window>"u"||typeof document>"u"||!id(window.location.host)||sx[e]===t||sx[e]||KT)return;sx[e]=t;function r(m){return`__firebase__banner__${m}`}const n="__firebase__banner",s=cG().prod.length>0;function i(){const m=document.getElementById(n);m&&m.remove()}function o(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,p){m.setAttribute("width","24"),m.setAttribute("id",p),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function A(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{KT=!0,i()},m}function d(m,p){m.setAttribute("id",p),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function h(){const m=uG(n),p=r("text"),v=document.getElementById(p)||document.createElement("span"),x=r("learnmore"),E=document.getElementById(x)||document.createElement("a"),_=r("preprendIcon"),B=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const T=m.element;o(T),d(E,x);const I=A();c(B,_),T.append(B,v,E,I),document.body.appendChild(T)}s?(v.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AG(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(eo())}function dG(){var t;const e=(t=hy())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fG(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hG(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function mG(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pG(){const e=eo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function gG(){return!dG()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xG(){try{return typeof indexedDB=="object"}catch{return!1}}function vG(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;t(((s=a.error)==null?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bG="FirebaseError";class qc extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=bG,Object.setPrototypeOf(this,qc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,x1.prototype.create)}}class x1{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,s=this.errors[t],i=s?wG(s,n):"Error",o=`${this.serviceName}: ${i} (${a}).`;return new qc(a,o,n)}}function wG(e,t){return e.replace(yG,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const yG=/\{\$([^}]+)}/g;function EG(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ff(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const s=e[a],i=t[a];if(qT(s)&&qT(i)){if(!Ff(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function qT(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function Ug(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(s)}}),t}function Pg(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function CG(e,t){const r=new _G(e,t);return r.subscribe.bind(r)}class _G{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");SG(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=XC),a.error===void 0&&(a.error=XC),a.complete===void 0&&(a.complete=XC);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SG(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function XC(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(e){return e&&e._delegate?e._delegate:e}class XA{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NG=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new lG;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(kG(t))try{this.getOrInitializeService({instanceIdentifier:Ch})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(t=Ch){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ch){return this.instances.has(t)}getOptions(t=Ch){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&i.resolve(a)}return a}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&t(s,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:BG(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Ch){return this.component?this.component.multipleInstances?t:Ch:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function BG(e){return e===Ch?void 0:e}function kG(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TG{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new NG(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(dn||(dn={}));const IG={debug:dn.DEBUG,verbose:dn.VERBOSE,info:dn.INFO,warn:dn.WARN,error:dn.ERROR,silent:dn.SILENT},FG=dn.INFO,jG={[dn.DEBUG]:"log",[dn.VERBOSE]:"log",[dn.INFO]:"info",[dn.WARN]:"warn",[dn.ERROR]:"error"},DG=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=jG[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let qS=class{constructor(t){this.name=t,this._logLevel=FG,this._logHandler=DG,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in dn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?IG[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,dn.DEBUG,...t),this._logHandler(this,dn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,dn.VERBOSE,...t),this._logHandler(this,dn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,dn.INFO,...t),this._logHandler(this,dn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,dn.WARN,...t),this._logHandler(this,dn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,dn.ERROR,...t),this._logHandler(this,dn.ERROR,...t)}};const RG=(e,t)=>t.some(r=>e instanceof r);let $T,WT;function LG(){return $T||($T=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OG(){return WT||(WT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dL=new WeakMap,H_=new WeakMap,fL=new WeakMap,YC=new WeakMap,$S=new WeakMap;function UG(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{r(bf(e.result)),a()},i=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(r=>{r instanceof IDBCursor&&dL.set(r,e)}).catch(()=>{}),$S.set(t,e),t}function PG(e){if(H_.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});H_.set(e,t)}let V_={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return H_.get(e);if(t==="objectStoreNames")return e.objectStoreNames||fL.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return bf(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function MG(e){V_=e(V_)}function QG(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(JC(this),t,...r);return fL.set(n,t.sort?t.sort():[t]),bf(n)}:OG().includes(e)?function(...t){return e.apply(JC(this),t),bf(dL.get(this))}:function(...t){return bf(e.apply(JC(this),t))}}function HG(e){return typeof e=="function"?QG(e):(e instanceof IDBTransaction&&PG(e),RG(e,LG())?new Proxy(e,V_):e)}function bf(e){if(e instanceof IDBRequest)return UG(e);if(YC.has(e))return YC.get(e);const t=HG(e);return t!==e&&(YC.set(e,t),$S.set(t,e)),t}const JC=e=>$S.get(e);function VG(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(e,t),o=bf(i);return n&&i.addEventListener("upgradeneeded",c=>{n(bf(i.result),c.oldVersion,c.newVersion,bf(i.transaction),c)}),r&&i.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",A=>a(A.oldVersion,A.newVersion,A))}).catch(()=>{}),o}const zG=["get","getKey","getAll","getAllKeys","count"],GG=["put","add","delete","clear"],ZC=new Map;function XT(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ZC.get(t))return ZC.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=GG.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||zG.includes(r)))return;const s=async function(i,...o){const c=this.transaction(i,a?"readwrite":"readonly");let A=c.store;return n&&(A=A.index(o.shift())),(await Promise.all([A[r](...o),a&&c.done]))[0]};return ZC.set(t,s),s}MG(e=>({...e,get:(t,r,n)=>XT(t,r)||e.get(t,r,n),has:(t,r)=>!!XT(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KG{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(qG(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function qG(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const z_="@firebase/app",YT="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=new qS("@firebase/app"),$G="@firebase/app-compat",WG="@firebase/analytics-compat",XG="@firebase/analytics",YG="@firebase/app-check-compat",JG="@firebase/app-check",ZG="@firebase/auth",eK="@firebase/auth-compat",tK="@firebase/database",rK="@firebase/data-connect",nK="@firebase/database-compat",aK="@firebase/functions",sK="@firebase/functions-compat",iK="@firebase/installations",oK="@firebase/installations-compat",lK="@firebase/messaging",cK="@firebase/messaging-compat",uK="@firebase/performance",AK="@firebase/performance-compat",dK="@firebase/remote-config",fK="@firebase/remote-config-compat",hK="@firebase/storage",mK="@firebase/storage-compat",pK="@firebase/firestore",gK="@firebase/ai",xK="@firebase/firestore-compat",vK="firebase",bK="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="[DEFAULT]",wK={[z_]:"fire-core",[$G]:"fire-core-compat",[XG]:"fire-analytics",[WG]:"fire-analytics-compat",[JG]:"fire-app-check",[YG]:"fire-app-check-compat",[ZG]:"fire-auth",[eK]:"fire-auth-compat",[tK]:"fire-rtdb",[rK]:"fire-data-connect",[nK]:"fire-rtdb-compat",[aK]:"fire-fn",[sK]:"fire-fn-compat",[iK]:"fire-iid",[oK]:"fire-iid-compat",[lK]:"fire-fcm",[cK]:"fire-fcm-compat",[uK]:"fire-perf",[AK]:"fire-perf-compat",[dK]:"fire-rc",[fK]:"fire-rc-compat",[hK]:"fire-gcs",[mK]:"fire-gcs-compat",[pK]:"fire-fst",[xK]:"fire-fst-compat",[gK]:"fire-vertex","fire-js":"fire-js",[vK]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=new Map,yK=new Map,K_=new Map;function JT(e,t){try{e.container.addComponent(t)}catch(r){YA.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function jf(e){const t=e.name;if(K_.has(t))return YA.debug(`There were multiple attempts to register component ${t}.`),!1;K_.set(t,e);for(const r of Tx.values())JT(r,e);for(const r of yK.values())JT(r,e);return!0}function b1(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function dl(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wf=new x1("app","Firebase",EK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CK{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new XA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw wf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=bK;function WS(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:G_,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw wf.create("bad-app-name",{appName:String(a)});if(r||(r=cL()),!r)throw wf.create("no-options");const s=Tx.get(a);if(s){if(Ff(r,s.options)&&Ff(n,s.config))return s;throw wf.create("duplicate-app",{appName:a})}const i=new TG(a);for(const c of K_.values())i.addComponent(c);const o=new CK(r,n,i);return Tx.set(a,o),o}function gy(e=G_){const t=Tx.get(e);if(!t&&e===G_&&cL())return WS();if(!t)throw wf.create("no-app",{appName:e});return t}function ZT(){return Array.from(Tx.values())}function sc(e,t,r){let n=wK[e]??e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const i=[`Unable to register library "${n}" with version "${t}":`];a&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&i.push("and"),s&&i.push(`version name "${t}" contains illegal characters (whitespace or "/")`),YA.warn(i.join(" "));return}jf(new XA(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _K="firebase-heartbeat-database",SK=1,Ix="firebase-heartbeat-store";let e5=null;function hL(){return e5||(e5=VG(_K,SK,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ix)}catch(r){console.warn(r)}}}}).catch(e=>{throw wf.create("idb-open",{originalErrorMessage:e.message})})),e5}async function NK(e){try{const r=(await hL()).transaction(Ix),n=await r.objectStore(Ix).get(mL(e));return await r.done,n}catch(t){if(t instanceof qc)YA.warn(t.message);else{const r=wf.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});YA.warn(r.message)}}}async function eI(e,t){try{const n=(await hL()).transaction(Ix,"readwrite");await n.objectStore(Ix).put(t,mL(e)),await n.done}catch(r){if(r instanceof qc)YA.warn(r.message);else{const n=wf.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});YA.warn(n.message)}}}function mL(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BK=1024,kK=30;class TK{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new FK(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=tI();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>kK){const i=jK(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){YA.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=tI(),{heartbeatsToSend:n,unsentEntries:a}=IK(this._heartbeatsCache.heartbeats),s=J2(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return YA.warn(r),""}}}function tI(){return new Date().toISOString().substring(0,10)}function IK(e,t=BK){const r=[];let n=e.slice();for(const a of e){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),rI(r)>t){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),rI(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class FK{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xG()?vG().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await NK(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return eI(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return eI(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function rI(e){return J2(JSON.stringify({version:2,heartbeats:e})).length}function jK(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DK(e){jf(new XA("platform-logger",t=>new KG(t),"PRIVATE")),jf(new XA("heartbeat",t=>new TK(t),"PRIVATE")),sc(z_,YT,e),sc(z_,YT,"esm2020"),sc("fire-js","")}DK("");function pL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RK=pL,gL=new x1("auth","Firebase",pL());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=new qS("@firebase/auth");function LK(e,...t){Z2.logLevel<=dn.WARN&&Z2.warn(`Auth (${d0}): ${e}`,...t)}function A2(e,...t){Z2.logLevel<=dn.ERROR&&Z2.error(`Auth (${d0}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(e,...t){throw XS(e,...t)}function Hu(e,...t){return XS(e,...t)}function xL(e,t,r){const n={...RK(),[t]:r};return new x1("auth","Firebase",n).create(t,{appName:e.name})}function yf(e){return xL(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function XS(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return gL.create(e,...t)}function Tr(e,t,...r){if(!e)throw XS(t,...r)}function PA(e){const t="INTERNAL ASSERTION FAILED: "+e;throw A2(t),new Error(t)}function JA(e,t){e||PA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function OK(){return nI()==="http:"||nI()==="https:"}function nI(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UK(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OK()||hG()||"connection"in navigator)?navigator.onLine:!0}function PK(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(t,r){this.shortDelay=t,this.longDelay=r,JA(r>t,"Short delay should be less than long delay!"),this.isMobile=AG()||mG()}get(){return UK()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(e,t){JA(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;PA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;PA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;PA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MK={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QK=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HK=new w1(3e4,6e4);function qf(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function od(e,t,r,n,a={}){return bL(e,a,async()=>{let s={},i={};n&&(t==="GET"?i=n:s={body:JSON.stringify(n)});const o=v1({key:e.config.apiKey,...i}).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const A={method:t,headers:c,...s};return fG()||(A.referrerPolicy="no-referrer"),e.emulatorConfig&&id(e.emulatorConfig.host)&&(A.credentials="include"),vL.fetch()(await wL(e,e.config.apiHost,r,o),A)})}async function bL(e,t,r){e._canInitEmulator=!1;const n={...MK,...t};try{const a=new zK(e),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Xv(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[c,A]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xv(e,"credential-already-in-use",i);if(c==="EMAIL_EXISTS")throw Xv(e,"email-already-in-use",i);if(c==="USER_DISABLED")throw Xv(e,"user-disabled",i);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(A)throw xL(e,d,A);Gc(e,d)}}catch(a){if(a instanceof qc)throw a;Gc(e,"network-request-failed",{message:String(a)})}}async function xy(e,t,r,n,a={}){const s=await od(e,t,r,n,a);return"mfaPendingCredential"in s&&Gc(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function wL(e,t,r,n){const a=`${t}${r}?${n}`,s=e,i=s.config.emulator?YS(e.config,a):`${e.config.apiScheme}://${a}`;return QK.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(i).toString():i}function VK(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zK{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Hu(this.auth,"network-request-failed")),HK.get())})}}function Xv(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Hu(e,t,n);return a.customData._tokenResponse=r,a}function aI(e){return e!==void 0&&e.enterprise!==void 0}class GK{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return VK(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function KK(e,t){return od(e,"GET","/v2/recaptchaConfig",qf(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qK(e,t){return od(e,"POST","/v1/accounts:delete",t)}async function ew(e,t){return od(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function $K(e,t=!1){const r=oa(e),n=await r.getIdToken(t),a=JS(n);Tr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:ix(t5(a.auth_time)),issuedAtTime:ix(t5(a.iat)),expirationTime:ix(t5(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function t5(e){return Number(e)*1e3}function JS(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return A2("JWT malformed, contained fewer than 3 sections"),null;try{const a=oL(r);return a?JSON.parse(a):(A2("Failed to decode base64 JWT payload"),null)}catch(a){return A2("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function sI(e){const t=JS(e);return Tr(t,"internal-error"),Tr(typeof t.exp<"u","internal-error"),Tr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fx(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof qc&&WK(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function WK({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XK{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=ix(this.lastLoginAt),this.creationTime=ix(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tw(e){var h;const t=e.auth,r=await e.getIdToken(),n=await Fx(e,ew(t,{idToken:r}));Tr(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const s=(h=a.providerUserInfo)!=null&&h.length?yL(a.providerUserInfo):[],i=JK(e.providerData,s),o=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(i!=null&&i.length),A=o?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new $_(a.createdAt,a.lastLoginAt),isAnonymous:A};Object.assign(e,d)}async function YK(e){const t=oa(e);await tw(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function JK(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function yL(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZK(e,t){const r=await bL(e,{},async()=>{const n=v1({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:s}=e.config,i=await wL(e,a,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:n};return e.emulatorConfig&&id(e.emulatorConfig.host)&&(c.credentials="include"),vL.fetch()(i,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function eq(e,t){return od(e,"POST","/v2/accounts:revokeToken",qf(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Tr(t.idToken,"internal-error"),Tr(typeof t.idToken<"u","internal-error"),Tr(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):sI(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Tr(t.length!==0,"internal-error");const r=sI(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Tr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await ZK(t,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new Om;return n&&(Tr(typeof n=="string","internal-error",{appName:t}),i.refreshToken=n),a&&(Tr(typeof a=="string","internal-error",{appName:t}),i.accessToken=a),s&&(Tr(typeof s=="number","internal-error",{appName:t}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Om,this.toJSON())}_performRefresh(){return PA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(e,t){Tr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Pc{constructor({uid:t,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new XK(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new $_(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await Fx(this,this.stsTokenManager.getToken(this.auth,t));return Tr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return $K(this,t)}reload(){return YK(this)}_assign(t){this!==t&&(Tr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new Pc({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Tr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await tw(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dl(this.auth.app))return Promise.reject(yf(this.auth));const t=await this.getIdToken();return await Fx(this,qK(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,i=r.photoURL??void 0,o=r.tenantId??void 0,c=r._redirectEventId??void 0,A=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:h,emailVerified:m,isAnonymous:p,providerData:v,stsTokenManager:x}=r;Tr(h&&x,t,"internal-error");const E=Om.fromJSON(this.name,x);Tr(typeof h=="string",t,"internal-error"),Kd(n,t.name),Kd(a,t.name),Tr(typeof m=="boolean",t,"internal-error"),Tr(typeof p=="boolean",t,"internal-error"),Kd(s,t.name),Kd(i,t.name),Kd(o,t.name),Kd(c,t.name),Kd(A,t.name),Kd(d,t.name);const _=new Pc({uid:h,auth:t,email:a,emailVerified:m,displayName:n,isAnonymous:p,photoURL:i,phoneNumber:s,tenantId:o,stsTokenManager:E,createdAt:A,lastLoginAt:d});return v&&Array.isArray(v)&&(_.providerData=v.map(B=>({...B}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(t,r,n=!1){const a=new Om;a.updateFromServerResponse(r);const s=new Pc({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await tw(s),s}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];Tr(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?yL(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),o=new Om;o.updateFromIdToken(n);const c=new Pc({uid:a.localId,auth:t,stsTokenManager:o,isAnonymous:i}),A={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new $_(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,A),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=new Map;function MA(e){JA(e instanceof Function,"Expected a class definition");let t=iI.get(e);return t?(JA(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,iI.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}EL.type="NONE";const oI=EL;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(e,t,r){return`firebase:${e}:${t}:${r}`}class Um{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=d2(this.userKey,a.apiKey,s),this.fullPersistenceKey=d2("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await ew(this.auth,{idToken:t}).catch(()=>{});return r?Pc._fromGetAccountInfoResponse(this.auth,r,t):null}return Pc._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new Um(MA(oI),t,n);const a=(await Promise.all(r.map(async A=>{if(await A._isAvailable())return A}))).filter(A=>A);let s=a[0]||MA(oI);const i=d2(n,t.config.apiKey,t.name);let o=null;for(const A of r)try{const d=await A._get(i);if(d){let h;if(typeof d=="string"){const m=await ew(t,{idToken:d}).catch(()=>{});if(!m)break;h=await Pc._fromGetAccountInfoResponse(t,m,d)}else h=Pc._fromJSON(t,d);A!==s&&(o=h),s=A;break}}catch{}const c=a.filter(A=>A._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Um(s,t,n):(s=c[0],o&&await s._set(i,o.toJSON()),await Promise.all(r.map(async A=>{if(A!==s)try{await A._remove(i)}catch{}})),new Um(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(NL(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(CL(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(kL(t))return"Blackberry";if(TL(t))return"Webos";if(_L(t))return"Safari";if((t.includes("chrome/")||SL(t))&&!t.includes("edge/"))return"Chrome";if(BL(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function CL(e=eo()){return/firefox\//i.test(e)}function _L(e=eo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function SL(e=eo()){return/crios\//i.test(e)}function NL(e=eo()){return/iemobile/i.test(e)}function BL(e=eo()){return/android/i.test(e)}function kL(e=eo()){return/blackberry/i.test(e)}function TL(e=eo()){return/webos/i.test(e)}function ZS(e=eo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function tq(e=eo()){var t;return ZS(e)&&!!((t=window.navigator)!=null&&t.standalone)}function rq(){return pG()&&document.documentMode===10}function IL(e=eo()){return ZS(e)||BL(e)||TL(e)||kL(e)||/windows phone/i.test(e)||NL(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(e,t=[]){let r;switch(e){case"Browser":r=lI(eo());break;case"Worker":r=`${lI(eo())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${d0}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nq{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=s=>new Promise((i,o)=>{try{const c=t(s);i(c)}catch(c){o(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aq(e,t={}){return od(e,"GET","/v2/passwordPolicy",qf(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sq=6;class iq{constructor(t){var n;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??sq,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oq{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cI(this),this.idTokenSubscription=new cI(this),this.beforeStateQueue=new nq(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=MA(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await Um.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await ew(this,{idToken:t}),n=await Pc._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(dl(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(t);(!i||i===o)&&(c!=null&&c.user)&&(n=c.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Tr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await tw(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=PK()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(dl(this.app))return Promise.reject(yf(this));const r=t?oa(t):null;return r&&Tr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Tr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return dl(this.app)?Promise.reject(yf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return dl(this.app)?Promise.reject(yf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(MA(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await aq(this),r=new iq(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new x1("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await eq(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&MA(t)||this._popupRedirectResolver;Tr(r,this,"argument-error"),this.redirectPersistenceManager=await Um.create(this,[MA(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tr(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const c=t.addObserver(r,n,a);return()=>{i=!0,c()}}else{const c=t.addObserver(r);return()=>{i=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Tr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=FL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var r;if(dl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&LK(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function f0(e){return oa(e)}class cI{constructor(t){this.auth=t,this.observer=null,this.addObserver=CG(r=>this.observer=r)}get next(){return Tr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lq(e){vy=e}function jL(e){return vy.loadJS(e)}function cq(){return vy.recaptchaEnterpriseScript}function uq(){return vy.gapiScript}function Aq(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class dq{constructor(){this.enterprise=new fq}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class fq{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const hq="recaptcha-enterprise",DL="NO_RECAPTCHA";class mq{constructor(t){this.type=hq,this.auth=f0(t)}async verify(t="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{KK(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const A=new GK(c);return s.tenantId==null?s._agentRecaptchaConfig=A:s._tenantRecaptchaConfigs[s.tenantId]=A,i(A.siteKey)}}).catch(c=>{o(c)})})}function a(s,i,o){const c=window.grecaptcha;aI(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:t}).then(A=>{i(A)}).catch(()=>{i(DL)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new dq().execute("siteKey",{action:"verify"}):new Promise((s,i)=>{n(this.auth).then(o=>{if(!r&&aI(window.grecaptcha))a(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let c=cq();c.length!==0&&(c+=o),jL(c).then(()=>{a(o,s,i)}).catch(A=>{i(A)})}}).catch(o=>{i(o)})})}}async function uI(e,t,r,n=!1,a=!1){const s=new mq(e);let i;if(a)i=DL;else try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const o={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,A=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:A,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function W_(e,t,r,n,a){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await uI(e,t,r,r==="getOobCode");return n(e,i)}else return n(e,t).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await uI(e,t,r,r==="getOobCode");return n(e,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pq(e,t){const r=b1(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(Ff(s,t??{}))return a;Gc(a,"already-initialized")}return r.initialize({options:t})}function gq(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(MA);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function xq(e,t,r){const n=f0(e);Tr(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,s=RL(t),{host:i,port:o}=vq(t),c=o===null?"":`:${o}`,A={url:`${s}//${i}${c}/`},d=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Tr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Tr(Ff(A,n.config.emulator)&&Ff(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=A,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,id(i)?(my(`${s}//${i}${c}`),py("Auth",!0)):bq()}function RL(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function vq(e){const t=RL(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:AI(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:AI(i)}}}function AI(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function bq(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return PA("not implemented")}_getIdTokenResponse(t){return PA("not implemented")}_linkToIdToken(t,r){return PA("not implemented")}_getReauthenticationResolver(t){return PA("not implemented")}}async function wq(e,t){return od(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yq(e,t){return xy(e,"POST","/v1/accounts:signInWithPassword",qf(e,t))}async function Eq(e,t){return od(e,"POST","/v1/accounts:sendOobCode",qf(e,t))}async function Cq(e,t){return Eq(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _q(e,t){return xy(e,"POST","/v1/accounts:signInWithEmailLink",qf(e,t))}async function Sq(e,t){return xy(e,"POST","/v1/accounts:signInWithEmailLink",qf(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx extends eN{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new jx(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new jx(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return W_(t,r,"signInWithPassword",yq);case"emailLink":return _q(t,{email:this._email,oobCode:this._password});default:Gc(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return W_(t,n,"signUpPassword",wq);case"emailLink":return Sq(t,{idToken:r,email:this._email,oobCode:this._password});default:Gc(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pm(e,t){return xy(e,"POST","/v1/accounts:signInWithIdp",qf(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nq="http://localhost";class Zh extends eN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Zh(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):Gc("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const i=new Zh(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(t){const r=this.buildRequest();return Pm(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,Pm(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Pm(t,r)}buildRequest(){const t={requestUri:Nq,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=v1(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bq(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kq(e){const t=Ug(Pg(e)).link,r=t?Ug(Pg(t)).deep_link_id:null,n=Ug(Pg(e)).deep_link_id;return(n?Ug(Pg(n)).link:null)||n||r||t||e}class tN{constructor(t){const r=Ug(Pg(t)),n=r.apiKey??null,a=r.oobCode??null,s=Bq(r.mode??null);Tr(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=kq(t);try{return new tN(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(){this.providerId=yp.PROVIDER_ID}static credential(t,r){return jx._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=tN.parseLink(r);return Tr(n,"argument-error"),jx._fromEmailAndCode(t,n.code,n.tenantId)}}yp.PROVIDER_ID="password";yp.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yp.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1 extends LL{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf extends y1{constructor(){super("facebook.com")}static credential(t){return Zh._fromParams({providerId:sf.PROVIDER_ID,signInMethod:sf.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return sf.credentialFromTaggedObject(t)}static credentialFromError(t){return sf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return sf.credential(t.oauthAccessToken)}catch{return null}}}sf.FACEBOOK_SIGN_IN_METHOD="facebook.com";sf.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of extends y1{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Zh._fromParams({providerId:of.PROVIDER_ID,signInMethod:of.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return of.credentialFromTaggedObject(t)}static credentialFromError(t){return of.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return of.credential(r,n)}catch{return null}}}of.GOOGLE_SIGN_IN_METHOD="google.com";of.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf extends y1{constructor(){super("github.com")}static credential(t){return Zh._fromParams({providerId:lf.PROVIDER_ID,signInMethod:lf.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return lf.credentialFromTaggedObject(t)}static credentialFromError(t){return lf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return lf.credential(t.oauthAccessToken)}catch{return null}}}lf.GITHUB_SIGN_IN_METHOD="github.com";lf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf extends y1{constructor(){super("twitter.com")}static credential(t,r){return Zh._fromParams({providerId:cf.PROVIDER_ID,signInMethod:cf.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return cf.credentialFromTaggedObject(t)}static credentialFromError(t){return cf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return cf.credential(r,n)}catch{return null}}}cf.TWITTER_SIGN_IN_METHOD="twitter.com";cf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const s=await Pc._fromIdTokenResponse(t,n,a),i=dI(n);return new rp({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=dI(n);return new rp({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function dI(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw extends qc{constructor(t,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,rw.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new rw(t,r,n,a)}}function OL(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?rw._fromErrorAndOperation(e,s,t,n):s})}async function Tq(e,t,r=!1){const n=await Fx(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return rp._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iq(e,t,r=!1){const{auth:n}=e;if(dl(n.app))return Promise.reject(yf(n));const a="reauthenticate";try{const s=await Fx(e,OL(n,a,t,e),r);Tr(s.idToken,n,"internal-error");const i=JS(s.idToken);Tr(i,n,"internal-error");const{sub:o}=i;return Tr(e.uid===o,n,"user-mismatch"),rp._forOperation(e,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Gc(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UL(e,t,r=!1){if(dl(e.app))return Promise.reject(yf(e));const n="signIn",a=await OL(e,n,t),s=await rp._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(s.user),s}async function Fq(e,t){return UL(f0(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jq(e){const t=f0(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Dq(e,t,r){const n=f0(e);await W_(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Cq)}function Rq(e,t,r){return dl(e.app)?Promise.reject(yf(e)):Fq(oa(e),yp.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&jq(e),n})}function Lq(e,t,r,n){return oa(e).onIdTokenChanged(t,r,n)}function Oq(e,t,r){return oa(e).beforeAuthStateChanged(t,r)}function PL(e,t,r,n){return oa(e).onAuthStateChanged(t,r,n)}function Uq(e){return oa(e).signOut()}const nw="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(nw,"1"),this.storage.removeItem(nw),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pq=1e3,Mq=10;class QL extends ML{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IL(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((i,o,c)=>{this.notifyListeners(i,c)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);rq()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,Mq):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},Pq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}QL.type="LOCAL";const Qq=QL;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL extends ML{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}HL.type="SESSION";const VL=HL;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hq(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new by(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const o=Array.from(i).map(async A=>A(r.origin,s)),c=await Hq(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}by.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((o,c)=>{const A=rN("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(h){const m=h;if(m.data.eventId===A)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(m.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:t,eventId:A,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(){return window}function zq(e){Vu().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(){return typeof Vu().WorkerGlobalScope<"u"&&typeof Vu().importScripts=="function"}async function Gq(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Kq(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function qq(){return zL()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL="firebaseLocalStorageDb",$q=1,aw="firebaseLocalStorage",KL="fbase_key";class E1{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function wy(e,t){return e.transaction([aw],t?"readwrite":"readonly").objectStore(aw)}function Wq(){const e=indexedDB.deleteDatabase(GL);return new E1(e).toPromise()}function X_(){const e=indexedDB.open(GL,$q);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(aw,{keyPath:KL})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(aw)?t(n):(n.close(),await Wq(),t(await X_()))})})}async function fI(e,t,r){const n=wy(e,!0).put({[KL]:t,value:r});return new E1(n).toPromise()}async function Xq(e,t){const r=wy(e,!1).get(t),n=await new E1(r).toPromise();return n===void 0?null:n.value}function hI(e,t){const r=wy(e,!0).delete(t);return new E1(r).toPromise()}const Yq=800,Jq=3;class qL{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await X_(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>Jq)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zL()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=by._getInstance(qq()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await Gq(),!this.activeServiceWorker)return;this.sender=new Vq(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Kq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await X_();return await fI(t,nw,"1"),await hI(t,nw),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>fI(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>Xq(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>hI(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const s=wy(a,!1).getAll();return new E1(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:s}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Yq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qL.type="LOCAL";const Zq=qL;new w1(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e$(e,t){return t?MA(t):(Tr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN extends eN{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Pm(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Pm(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Pm(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function t$(e){return UL(e.auth,new nN(e),e.bypassAuthState)}function r$(e){const{auth:t,user:r}=e;return Tr(r,t,"internal-error"),Iq(r,new nN(e),e.bypassAuthState)}async function n$(e){const{auth:t,user:r}=e;return Tr(r,t,"internal-error"),Tq(r,new nN(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(t,r,n,a,s=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:o}=t;if(i){this.reject(i);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(A){this.reject(A)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return t$;case"linkViaPopup":case"linkViaRedirect":return n$;case"reauthViaPopup":case"reauthViaRedirect":return r$;default:Gc(this.auth,"internal-error")}}resolve(t){JA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){JA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a$=new w1(2e3,1e4);class Bm extends $L{constructor(t,r,n,a,s){super(t,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,Bm.currentPopupAction&&Bm.currentPopupAction.cancel(),Bm.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Tr(t,this.auth,"internal-error"),t}async onExecution(){JA(this.filter.length===1,"Popup operations only handle one event");const t=rN();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Hu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Hu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bm.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,a$.get())};t()}}Bm.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s$="pendingRedirect",f2=new Map;class i$ extends $L{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=f2.get(this.auth._key());if(!t){try{const n=await o$(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}f2.set(this.auth._key(),t)}return this.bypassAuthState||f2.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function o$(e,t){const r=u$(t),n=c$(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function l$(e,t){f2.set(e._key(),t)}function c$(e){return MA(e._redirectPersistence)}function u$(e){return d2(s$,e.config.apiKey,e.name)}async function A$(e,t,r=!1){if(dl(e.app))return Promise.reject(yf(e));const n=f0(e),a=e$(n,t),i=await new i$(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,t)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d$=600*1e3;class f${constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!h$(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!WL(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(Hu(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=d$&&this.cachedEventUids.clear(),this.cachedEventUids.has(mI(t))}saveEventToCache(t){this.cachedEventUids.add(mI(t)),this.lastProcessedEventTime=Date.now()}}function mI(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function WL({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function h$(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WL(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m$(e,t={}){return od(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,g$=/^https?/;async function x$(e){if(e.config.emulator)return;const{authorizedDomains:t}=await m$(e);for(const r of t)try{if(v$(r))return}catch{}Gc(e,"unauthorized-domain")}function v$(e){const t=q_(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return i.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!g$.test(r))return!1;if(p$.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$=new w1(3e4,6e4);function pI(){const e=Vu().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function w$(e){return new Promise((t,r)=>{var a,s,i;function n(){pI(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{pI(),r(Hu(e,"network-request-failed"))},timeout:b$.get()})}if((s=(a=Vu().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((i=Vu().gapi)!=null&&i.load)n();else{const o=Aq("iframefcb");return Vu()[o]=()=>{gapi.load?n():r(Hu(e,"network-request-failed"))},jL(`${uq()}?onload=${o}`).catch(c=>r(c))}}).catch(t=>{throw h2=null,t})}let h2=null;function y$(e){return h2=h2||w$(e),h2}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E$=new w1(5e3,15e3),C$="__/auth/iframe",_$="emulator/auth/iframe",S$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},N$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function B$(e){const t=e.config;Tr(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?YS(t,_$):`https://${e.config.authDomain}/${C$}`,n={apiKey:t.apiKey,appName:e.name,v:d0},a=N$.get(e.config.apiHost);a&&(n.eid=a);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${v1(n).slice(1)}`}async function k$(e){const t=await y$(e),r=Vu().gapi;return Tr(r,e,"internal-error"),t.open({where:document.body,url:B$(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:S$,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=Hu(e,"network-request-failed"),o=Vu().setTimeout(()=>{s(i)},E$.get());function c(){Vu().clearTimeout(o),a(n)}n.ping(c).then(c,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},I$=500,F$=600,j$="_blank",D$="http://localhost";class gI{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function R$(e,t,r,n=I$,a=F$){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const c={...T$,width:n.toString(),height:a.toString(),top:s,left:i},A=eo().toLowerCase();r&&(o=SL(A)?j$:r),CL(A)&&(t=t||D$,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[p,v])=>`${m}${p}=${v},`,"");if(tq(A)&&o!=="_self")return L$(t||"",o),new gI(null);const h=window.open(t||"",o,d);Tr(h,e,"popup-blocked");try{h.focus()}catch{}return new gI(h)}function L$(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$="__/auth/handler",U$="emulator/auth/handler",P$=encodeURIComponent("fac");async function xI(e,t,r,n,a,s){Tr(e.config.authDomain,e,"auth-domain-config-required"),Tr(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:d0,eventId:a};if(t instanceof LL){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",EG(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(t instanceof y1){const d=t.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const c=await e._getAppCheckToken(),A=c?`#${P$}=${encodeURIComponent(c)}`:"";return`${M$(e)}?${v1(o).slice(1)}${A}`}function M$({config:e}){return e.emulator?YS(e,U$):`https://${e.authDomain}/${O$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5="webStorageSupport";class Q${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VL,this._completeRedirectFn=A$,this._overrideRedirectResult=l$}async _openPopup(t,r,n,a){var i;JA((i=this.eventManagers[t._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await xI(t,r,n,q_(),a);return R$(t,s,rN())}async _openRedirect(t,r,n,a){await this._originValidation(t);const s=await xI(t,r,n,q_(),a);return zq(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(JA(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await k$(t),n=new f$(t);return r.register("authEvent",a=>(Tr(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(r5,{type:r5},a=>{var i;const s=(i=a==null?void 0:a[0])==null?void 0:i[r5];s!==void 0&&r(!!s),Gc(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=x$(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return IL()||_L()||ZS()}}const H$=Q$;var vI="@firebase/auth",bI="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Tr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z$(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function G$(e){jf(new XA("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;Tr(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:i,authDomain:o,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FL(e)},A=new oq(n,a,s,c);return gq(A,r),A},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),jf(new XA("auth-internal",t=>{const r=f0(t.getProvider("auth").getImmediate());return(n=>new V$(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),sc(vI,bI,z$(e)),sc(vI,bI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K$=300,q$=uL("authIdTokenMaxAge")||K$;let wI=null;const $$=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>q$)return;const a=r==null?void 0:r.token;wI!==a&&(wI=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function XL(e=gy()){const t=b1(e,"auth");if(t.isInitialized())return t.getImmediate();const r=pq(e,{popupRedirectResolver:H$,persistence:[Zq,Qq,VL]}),n=uL("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=$$(s.toString());Oq(r,i,()=>i(r.currentUser)),Lq(r,o=>i(o))}}const a=lL("auth");return a&&xq(r,`http://${a}`),r}function W$(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}lq({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const s=Hu("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",W$().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});G$("Browser");var X$="firebase",Y$="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sc(X$,Y$,"app");var yI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ef,YL;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,y){function N(){}N.prototype=y.prototype,w.D=y.prototype,w.prototype=new N,w.prototype.constructor=w,w.C=function(U,j,F){for(var P=Array(arguments.length-2),M=2;M<arguments.length;M++)P[M-2]=arguments[M];return y.prototype[j].apply(U,P)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(w,y,N){N||(N=0);var U=Array(16);if(typeof y=="string")for(var j=0;16>j;++j)U[j]=y.charCodeAt(N++)|y.charCodeAt(N++)<<8|y.charCodeAt(N++)<<16|y.charCodeAt(N++)<<24;else for(j=0;16>j;++j)U[j]=y[N++]|y[N++]<<8|y[N++]<<16|y[N++]<<24;y=w.g[0],N=w.g[1],j=w.g[2];var F=w.g[3],P=y+(F^N&(j^F))+U[0]+3614090360&4294967295;y=N+(P<<7&4294967295|P>>>25),P=F+(j^y&(N^j))+U[1]+3905402710&4294967295,F=y+(P<<12&4294967295|P>>>20),P=j+(N^F&(y^N))+U[2]+606105819&4294967295,j=F+(P<<17&4294967295|P>>>15),P=N+(y^j&(F^y))+U[3]+3250441966&4294967295,N=j+(P<<22&4294967295|P>>>10),P=y+(F^N&(j^F))+U[4]+4118548399&4294967295,y=N+(P<<7&4294967295|P>>>25),P=F+(j^y&(N^j))+U[5]+1200080426&4294967295,F=y+(P<<12&4294967295|P>>>20),P=j+(N^F&(y^N))+U[6]+2821735955&4294967295,j=F+(P<<17&4294967295|P>>>15),P=N+(y^j&(F^y))+U[7]+4249261313&4294967295,N=j+(P<<22&4294967295|P>>>10),P=y+(F^N&(j^F))+U[8]+1770035416&4294967295,y=N+(P<<7&4294967295|P>>>25),P=F+(j^y&(N^j))+U[9]+2336552879&4294967295,F=y+(P<<12&4294967295|P>>>20),P=j+(N^F&(y^N))+U[10]+4294925233&4294967295,j=F+(P<<17&4294967295|P>>>15),P=N+(y^j&(F^y))+U[11]+2304563134&4294967295,N=j+(P<<22&4294967295|P>>>10),P=y+(F^N&(j^F))+U[12]+1804603682&4294967295,y=N+(P<<7&4294967295|P>>>25),P=F+(j^y&(N^j))+U[13]+4254626195&4294967295,F=y+(P<<12&4294967295|P>>>20),P=j+(N^F&(y^N))+U[14]+2792965006&4294967295,j=F+(P<<17&4294967295|P>>>15),P=N+(y^j&(F^y))+U[15]+1236535329&4294967295,N=j+(P<<22&4294967295|P>>>10),P=y+(j^F&(N^j))+U[1]+4129170786&4294967295,y=N+(P<<5&4294967295|P>>>27),P=F+(N^j&(y^N))+U[6]+3225465664&4294967295,F=y+(P<<9&4294967295|P>>>23),P=j+(y^N&(F^y))+U[11]+643717713&4294967295,j=F+(P<<14&4294967295|P>>>18),P=N+(F^y&(j^F))+U[0]+3921069994&4294967295,N=j+(P<<20&4294967295|P>>>12),P=y+(j^F&(N^j))+U[5]+3593408605&4294967295,y=N+(P<<5&4294967295|P>>>27),P=F+(N^j&(y^N))+U[10]+38016083&4294967295,F=y+(P<<9&4294967295|P>>>23),P=j+(y^N&(F^y))+U[15]+3634488961&4294967295,j=F+(P<<14&4294967295|P>>>18),P=N+(F^y&(j^F))+U[4]+3889429448&4294967295,N=j+(P<<20&4294967295|P>>>12),P=y+(j^F&(N^j))+U[9]+568446438&4294967295,y=N+(P<<5&4294967295|P>>>27),P=F+(N^j&(y^N))+U[14]+3275163606&4294967295,F=y+(P<<9&4294967295|P>>>23),P=j+(y^N&(F^y))+U[3]+4107603335&4294967295,j=F+(P<<14&4294967295|P>>>18),P=N+(F^y&(j^F))+U[8]+1163531501&4294967295,N=j+(P<<20&4294967295|P>>>12),P=y+(j^F&(N^j))+U[13]+2850285829&4294967295,y=N+(P<<5&4294967295|P>>>27),P=F+(N^j&(y^N))+U[2]+4243563512&4294967295,F=y+(P<<9&4294967295|P>>>23),P=j+(y^N&(F^y))+U[7]+1735328473&4294967295,j=F+(P<<14&4294967295|P>>>18),P=N+(F^y&(j^F))+U[12]+2368359562&4294967295,N=j+(P<<20&4294967295|P>>>12),P=y+(N^j^F)+U[5]+4294588738&4294967295,y=N+(P<<4&4294967295|P>>>28),P=F+(y^N^j)+U[8]+2272392833&4294967295,F=y+(P<<11&4294967295|P>>>21),P=j+(F^y^N)+U[11]+1839030562&4294967295,j=F+(P<<16&4294967295|P>>>16),P=N+(j^F^y)+U[14]+4259657740&4294967295,N=j+(P<<23&4294967295|P>>>9),P=y+(N^j^F)+U[1]+2763975236&4294967295,y=N+(P<<4&4294967295|P>>>28),P=F+(y^N^j)+U[4]+1272893353&4294967295,F=y+(P<<11&4294967295|P>>>21),P=j+(F^y^N)+U[7]+4139469664&4294967295,j=F+(P<<16&4294967295|P>>>16),P=N+(j^F^y)+U[10]+3200236656&4294967295,N=j+(P<<23&4294967295|P>>>9),P=y+(N^j^F)+U[13]+681279174&4294967295,y=N+(P<<4&4294967295|P>>>28),P=F+(y^N^j)+U[0]+3936430074&4294967295,F=y+(P<<11&4294967295|P>>>21),P=j+(F^y^N)+U[3]+3572445317&4294967295,j=F+(P<<16&4294967295|P>>>16),P=N+(j^F^y)+U[6]+76029189&4294967295,N=j+(P<<23&4294967295|P>>>9),P=y+(N^j^F)+U[9]+3654602809&4294967295,y=N+(P<<4&4294967295|P>>>28),P=F+(y^N^j)+U[12]+3873151461&4294967295,F=y+(P<<11&4294967295|P>>>21),P=j+(F^y^N)+U[15]+530742520&4294967295,j=F+(P<<16&4294967295|P>>>16),P=N+(j^F^y)+U[2]+3299628645&4294967295,N=j+(P<<23&4294967295|P>>>9),P=y+(j^(N|~F))+U[0]+4096336452&4294967295,y=N+(P<<6&4294967295|P>>>26),P=F+(N^(y|~j))+U[7]+1126891415&4294967295,F=y+(P<<10&4294967295|P>>>22),P=j+(y^(F|~N))+U[14]+2878612391&4294967295,j=F+(P<<15&4294967295|P>>>17),P=N+(F^(j|~y))+U[5]+4237533241&4294967295,N=j+(P<<21&4294967295|P>>>11),P=y+(j^(N|~F))+U[12]+1700485571&4294967295,y=N+(P<<6&4294967295|P>>>26),P=F+(N^(y|~j))+U[3]+2399980690&4294967295,F=y+(P<<10&4294967295|P>>>22),P=j+(y^(F|~N))+U[10]+4293915773&4294967295,j=F+(P<<15&4294967295|P>>>17),P=N+(F^(j|~y))+U[1]+2240044497&4294967295,N=j+(P<<21&4294967295|P>>>11),P=y+(j^(N|~F))+U[8]+1873313359&4294967295,y=N+(P<<6&4294967295|P>>>26),P=F+(N^(y|~j))+U[15]+4264355552&4294967295,F=y+(P<<10&4294967295|P>>>22),P=j+(y^(F|~N))+U[6]+2734768916&4294967295,j=F+(P<<15&4294967295|P>>>17),P=N+(F^(j|~y))+U[13]+1309151649&4294967295,N=j+(P<<21&4294967295|P>>>11),P=y+(j^(N|~F))+U[4]+4149444226&4294967295,y=N+(P<<6&4294967295|P>>>26),P=F+(N^(y|~j))+U[11]+3174756917&4294967295,F=y+(P<<10&4294967295|P>>>22),P=j+(y^(F|~N))+U[2]+718787259&4294967295,j=F+(P<<15&4294967295|P>>>17),P=N+(F^(j|~y))+U[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(j+(P<<21&4294967295|P>>>11))&4294967295,w.g[2]=w.g[2]+j&4294967295,w.g[3]=w.g[3]+F&4294967295}n.prototype.u=function(w,y){y===void 0&&(y=w.length);for(var N=y-this.blockSize,U=this.B,j=this.h,F=0;F<y;){if(j==0)for(;F<=N;)a(this,w,F),F+=this.blockSize;if(typeof w=="string"){for(;F<y;)if(U[j++]=w.charCodeAt(F++),j==this.blockSize){a(this,U),j=0;break}}else for(;F<y;)if(U[j++]=w[F++],j==this.blockSize){a(this,U),j=0;break}}this.h=j,this.o+=y},n.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;var N=8*this.o;for(y=w.length-8;y<w.length;++y)w[y]=N&255,N/=256;for(this.u(w),w=Array(16),y=N=0;4>y;++y)for(var U=0;32>U;U+=8)w[N++]=this.g[y]>>>U&255;return w};function s(w,y){var N=o;return Object.prototype.hasOwnProperty.call(N,w)?N[w]:N[w]=y(w)}function i(w,y){this.h=y;for(var N=[],U=!0,j=w.length-1;0<=j;j--){var F=w[j]|0;U&&F==y||(N[j]=F,U=!1)}this.g=N}var o={};function c(w){return-128<=w&&128>w?s(w,function(y){return new i([y|0],0>y?-1:0)}):new i([w|0],0>w?-1:0)}function A(w){if(isNaN(w)||!isFinite(w))return h;if(0>w)return E(A(-w));for(var y=[],N=1,U=0;w>=N;U++)y[U]=w/N|0,N*=4294967296;return new i(y,0)}function d(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return E(d(w.substring(1),y));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=A(Math.pow(y,8)),U=h,j=0;j<w.length;j+=8){var F=Math.min(8,w.length-j),P=parseInt(w.substring(j,j+F),y);8>F?(F=A(Math.pow(y,F)),U=U.j(F).add(A(P))):(U=U.j(N),U=U.add(A(P)))}return U}var h=c(0),m=c(1),p=c(16777216);e=i.prototype,e.m=function(){if(x(this))return-E(this).m();for(var w=0,y=1,N=0;N<this.g.length;N++){var U=this.i(N);w+=(0<=U?U:4294967296+U)*y,y*=4294967296}return w},e.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(v(this))return"0";if(x(this))return"-"+E(this).toString(w);for(var y=A(Math.pow(w,6)),N=this,U="";;){var j=I(N,y).g;N=_(N,j.j(y));var F=((0<N.g.length?N.g[0]:N.h)>>>0).toString(w);if(N=j,v(N))return F+U;for(;6>F.length;)F="0"+F;U=F+U}},e.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function v(w){if(w.h!=0)return!1;for(var y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function x(w){return w.h==-1}e.l=function(w){return w=_(this,w),x(w)?-1:v(w)?0:1};function E(w){for(var y=w.g.length,N=[],U=0;U<y;U++)N[U]=~w.g[U];return new i(N,~w.h).add(m)}e.abs=function(){return x(this)?E(this):this},e.add=function(w){for(var y=Math.max(this.g.length,w.g.length),N=[],U=0,j=0;j<=y;j++){var F=U+(this.i(j)&65535)+(w.i(j)&65535),P=(F>>>16)+(this.i(j)>>>16)+(w.i(j)>>>16);U=P>>>16,F&=65535,P&=65535,N[j]=P<<16|F}return new i(N,N[N.length-1]&-2147483648?-1:0)};function _(w,y){return w.add(E(y))}e.j=function(w){if(v(this)||v(w))return h;if(x(this))return x(w)?E(this).j(E(w)):E(E(this).j(w));if(x(w))return E(this.j(E(w)));if(0>this.l(p)&&0>w.l(p))return A(this.m()*w.m());for(var y=this.g.length+w.g.length,N=[],U=0;U<2*y;U++)N[U]=0;for(U=0;U<this.g.length;U++)for(var j=0;j<w.g.length;j++){var F=this.i(U)>>>16,P=this.i(U)&65535,M=w.i(j)>>>16,ee=w.i(j)&65535;N[2*U+2*j]+=P*ee,B(N,2*U+2*j),N[2*U+2*j+1]+=F*ee,B(N,2*U+2*j+1),N[2*U+2*j+1]+=P*M,B(N,2*U+2*j+1),N[2*U+2*j+2]+=F*M,B(N,2*U+2*j+2)}for(U=0;U<y;U++)N[U]=N[2*U+1]<<16|N[2*U];for(U=y;U<2*y;U++)N[U]=0;return new i(N,0)};function B(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function T(w,y){this.g=w,this.h=y}function I(w,y){if(v(y))throw Error("division by zero");if(v(w))return new T(h,h);if(x(w))return y=I(E(w),y),new T(E(y.g),E(y.h));if(x(y))return y=I(w,E(y)),new T(E(y.g),y.h);if(30<w.g.length){if(x(w)||x(y))throw Error("slowDivide_ only works with positive integers.");for(var N=m,U=y;0>=U.l(w);)N=L(N),U=L(U);var j=k(N,1),F=k(U,1);for(U=k(U,2),N=k(N,2);!v(U);){var P=F.add(U);0>=P.l(w)&&(j=j.add(N),F=P),U=k(U,1),N=k(N,1)}return y=_(w,j.j(y)),new T(j,y)}for(j=h;0<=w.l(y);){for(N=Math.max(1,Math.floor(w.m()/y.m())),U=Math.ceil(Math.log(N)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),F=A(N),P=F.j(y);x(P)||0<P.l(w);)N-=U,F=A(N),P=F.j(y);v(F)&&(F=m),j=j.add(F),w=_(w,P)}return new T(j,w)}e.A=function(w){return I(this,w).h},e.and=function(w){for(var y=Math.max(this.g.length,w.g.length),N=[],U=0;U<y;U++)N[U]=this.i(U)&w.i(U);return new i(N,this.h&w.h)},e.or=function(w){for(var y=Math.max(this.g.length,w.g.length),N=[],U=0;U<y;U++)N[U]=this.i(U)|w.i(U);return new i(N,this.h|w.h)},e.xor=function(w){for(var y=Math.max(this.g.length,w.g.length),N=[],U=0;U<y;U++)N[U]=this.i(U)^w.i(U);return new i(N,this.h^w.h)};function L(w){for(var y=w.g.length+1,N=[],U=0;U<y;U++)N[U]=w.i(U)<<1|w.i(U-1)>>>31;return new i(N,w.h)}function k(w,y){var N=y>>5;y%=32;for(var U=w.g.length-N,j=[],F=0;F<U;F++)j[F]=0<y?w.i(F+N)>>>y|w.i(F+N+1)<<32-y:w.i(F+N);return new i(j,w.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,YL=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=A,i.fromString=d,Ef=i}).apply(typeof yI<"u"?yI:typeof self<"u"?self:typeof window<"u"?window:{});var Yv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var JL,Mg,ZL,m2,Y_,eO,tO,rO;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(S,J,se){return S==Array.prototype||S==Object.prototype||(S[J]=se.value),S};function r(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yv=="object"&&Yv];for(var J=0;J<S.length;++J){var se=S[J];if(se&&se.Math==Math)return se}throw Error("Cannot find global object")}var n=r(this);function a(S,J){if(J)e:{var se=n;S=S.split(".");for(var ge=0;ge<S.length-1;ge++){var Ve=S[ge];if(!(Ve in se))break e;se=se[Ve]}S=S[S.length-1],ge=se[S],J=J(ge),J!=ge&&J!=null&&t(se,S,{configurable:!0,writable:!0,value:J})}}function s(S,J){S instanceof String&&(S+="");var se=0,ge=!1,Ve={next:function(){if(!ge&&se<S.length){var nt=se++;return{value:J(nt,S[nt]),done:!1}}return ge=!0,{done:!0,value:void 0}}};return Ve[Symbol.iterator]=function(){return Ve},Ve}a("Array.prototype.values",function(S){return S||function(){return s(this,function(J,se){return se})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(S){var J=typeof S;return J=J!="object"?J:S?Array.isArray(S)?"array":J:"null",J=="array"||J=="object"&&typeof S.length=="number"}function A(S){var J=typeof S;return J=="object"&&S!=null||J=="function"}function d(S,J,se){return S.call.apply(S.bind,arguments)}function h(S,J,se){if(!S)throw Error();if(2<arguments.length){var ge=Array.prototype.slice.call(arguments,2);return function(){var Ve=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ve,ge),S.apply(J,Ve)}}return function(){return S.apply(J,arguments)}}function m(S,J,se){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function p(S,J){var se=Array.prototype.slice.call(arguments,1);return function(){var ge=se.slice();return ge.push.apply(ge,arguments),S.apply(this,ge)}}function v(S,J){function se(){}se.prototype=J.prototype,S.aa=J.prototype,S.prototype=new se,S.prototype.constructor=S,S.Qb=function(ge,Ve,nt){for(var Bt=Array(arguments.length-2),yr=2;yr<arguments.length;yr++)Bt[yr-2]=arguments[yr];return J.prototype[Ve].apply(ge,Bt)}}function x(S){const J=S.length;if(0<J){const se=Array(J);for(let ge=0;ge<J;ge++)se[ge]=S[ge];return se}return[]}function E(S,J){for(let se=1;se<arguments.length;se++){const ge=arguments[se];if(c(ge)){const Ve=S.length||0,nt=ge.length||0;S.length=Ve+nt;for(let Bt=0;Bt<nt;Bt++)S[Ve+Bt]=ge[Bt]}else S.push(ge)}}class _{constructor(J,se){this.i=J,this.j=se,this.h=0,this.g=null}get(){let J;return 0<this.h?(this.h--,J=this.g,this.g=J.next,J.next=null):J=this.i(),J}}function B(S){return/^[\s\xa0]*$/.test(S)}function T(){var S=o.navigator;return S&&(S=S.userAgent)?S:""}function I(S){return I[" "](S),S}I[" "]=function(){};var L=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function k(S,J,se){for(const ge in S)J.call(se,S[ge],ge,S)}function w(S,J){for(const se in S)J.call(void 0,S[se],se,S)}function y(S){const J={};for(const se in S)J[se]=S[se];return J}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(S,J){let se,ge;for(let Ve=1;Ve<arguments.length;Ve++){ge=arguments[Ve];for(se in ge)S[se]=ge[se];for(let nt=0;nt<N.length;nt++)se=N[nt],Object.prototype.hasOwnProperty.call(ge,se)&&(S[se]=ge[se])}}function j(S){var J=1;S=S.split(":");const se=[];for(;0<J&&S.length;)se.push(S.shift()),J--;return S.length&&se.push(S.join(":")),se}function F(S){o.setTimeout(()=>{throw S},0)}function P(){var S=q;let J=null;return S.g&&(J=S.g,S.g=S.g.next,S.g||(S.h=null),J.next=null),J}class M{constructor(){this.h=this.g=null}add(J,se){const ge=ee.get();ge.set(J,se),this.h?this.h.next=ge:this.g=ge,this.h=ge}}var ee=new _(()=>new W,S=>S.reset());class W{constructor(){this.next=this.g=this.h=null}set(J,se){this.h=J,this.g=se,this.next=null}reset(){this.next=this.g=this.h=null}}let te,G=!1,q=new M,z=()=>{const S=o.Promise.resolve(void 0);te=()=>{S.then(Z)}};var Z=()=>{for(var S;S=P();){try{S.h.call(S.g)}catch(se){F(se)}var J=ee;J.j(S),100>J.h&&(J.h++,S.next=J.g,J.g=S)}G=!1};function R(){this.s=this.s,this.C=this.C}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(S,J){this.type=S,this.g=this.target=J,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var X=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var S=!1,J=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const se=()=>{};o.addEventListener("test",se,J),o.removeEventListener("test",se,J)}catch{}return S}();function re(S,J){if(K.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S){var se=this.type=S.type,ge=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;if(this.target=S.target||S.srcElement,this.g=J,J=S.relatedTarget){if(L){e:{try{I(J.nodeName);var Ve=!0;break e}catch{}Ve=!1}Ve||(J=null)}}else se=="mouseover"?J=S.fromElement:se=="mouseout"&&(J=S.toElement);this.relatedTarget=J,ge?(this.clientX=ge.clientX!==void 0?ge.clientX:ge.pageX,this.clientY=ge.clientY!==void 0?ge.clientY:ge.pageY,this.screenX=ge.screenX||0,this.screenY=ge.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=typeof S.pointerType=="string"?S.pointerType:ne[S.pointerType]||"",this.state=S.state,this.i=S,S.defaultPrevented&&re.aa.h.call(this)}}v(re,K);var ne={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),fe=0;function be(S,J,se,ge,Ve){this.listener=S,this.proxy=null,this.src=J,this.type=se,this.capture=!!ge,this.ha=Ve,this.key=++fe,this.da=this.fa=!1}function Ce(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function me(S){this.src=S,this.g={},this.h=0}me.prototype.add=function(S,J,se,ge,Ve){var nt=S.toString();S=this.g[nt],S||(S=this.g[nt]=[],this.h++);var Bt=Le(S,J,ge,Ve);return-1<Bt?(J=S[Bt],se||(J.fa=!1)):(J=new be(J,this.src,nt,!!ge,Ve),J.fa=se,S.push(J)),J};function oe(S,J){var se=J.type;if(se in S.g){var ge=S.g[se],Ve=Array.prototype.indexOf.call(ge,J,void 0),nt;(nt=0<=Ve)&&Array.prototype.splice.call(ge,Ve,1),nt&&(Ce(J),S.g[se].length==0&&(delete S.g[se],S.h--))}}function Le(S,J,se,ge){for(var Ve=0;Ve<S.length;++Ve){var nt=S[Ve];if(!nt.da&&nt.listener==J&&nt.capture==!!se&&nt.ha==ge)return Ve}return-1}var Ye="closure_lm_"+(1e6*Math.random()|0),Te={};function we(S,J,se,ge,Ve){if(Array.isArray(J)){for(var nt=0;nt<J.length;nt++)we(S,J[nt],se,ge,Ve);return null}return se=Yt(se),S&&S[ue]?S.K(J,se,A(ge)?!!ge.capture:!1,Ve):Fe(S,J,se,!1,ge,Ve)}function Fe(S,J,se,ge,Ve,nt){if(!J)throw Error("Invalid event type");var Bt=A(Ve)?!!Ve.capture:!!Ve,yr=jt(S);if(yr||(S[Ye]=yr=new me(S)),se=yr.add(J,se,ge,Bt,nt),se.proxy)return se;if(ge=He(),se.proxy=ge,ge.src=S,ge.listener=se,S.addEventListener)X||(Ve=Bt),Ve===void 0&&(Ve=!1),S.addEventListener(J.toString(),ge,Ve);else if(S.attachEvent)S.attachEvent(Et(J.toString()),ge);else if(S.addListener&&S.removeListener)S.addListener(ge);else throw Error("addEventListener and attachEvent are unavailable.");return se}function He(){function S(se){return J.call(S.src,S.listener,se)}const J=At;return S}function Xe(S,J,se,ge,Ve){if(Array.isArray(J))for(var nt=0;nt<J.length;nt++)Xe(S,J[nt],se,ge,Ve);else ge=A(ge)?!!ge.capture:!!ge,se=Yt(se),S&&S[ue]?(S=S.i,J=String(J).toString(),J in S.g&&(nt=S.g[J],se=Le(nt,se,ge,Ve),-1<se&&(Ce(nt[se]),Array.prototype.splice.call(nt,se,1),nt.length==0&&(delete S.g[J],S.h--)))):S&&(S=jt(S))&&(J=S.g[J.toString()],S=-1,J&&(S=Le(J,se,ge,Ve)),(se=-1<S?J[S]:null)&&ut(se))}function ut(S){if(typeof S!="number"&&S&&!S.da){var J=S.src;if(J&&J[ue])oe(J.i,S);else{var se=S.type,ge=S.proxy;J.removeEventListener?J.removeEventListener(se,ge,S.capture):J.detachEvent?J.detachEvent(Et(se),ge):J.addListener&&J.removeListener&&J.removeListener(ge),(se=jt(J))?(oe(se,S),se.h==0&&(se.src=null,J[Ye]=null)):Ce(S)}}}function Et(S){return S in Te?Te[S]:Te[S]="on"+S}function At(S,J){if(S.da)S=!0;else{J=new re(J,this);var se=S.listener,ge=S.ha||S.src;S.fa&&ut(S),S=se.call(ge,J)}return S}function jt(S){return S=S[Ye],S instanceof me?S:null}var Dt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yt(S){return typeof S=="function"?S:(S[Dt]||(S[Dt]=function(J){return S.handleEvent(J)}),S[Dt])}function Rt(){R.call(this),this.i=new me(this),this.M=this,this.F=null}v(Rt,R),Rt.prototype[ue]=!0,Rt.prototype.removeEventListener=function(S,J,se,ge){Xe(this,S,J,se,ge)};function Ut(S,J){var se,ge=S.F;if(ge)for(se=[];ge;ge=ge.F)se.push(ge);if(S=S.M,ge=J.type||J,typeof J=="string")J=new K(J,S);else if(J instanceof K)J.target=J.target||S;else{var Ve=J;J=new K(ge,S),U(J,Ve)}if(Ve=!0,se)for(var nt=se.length-1;0<=nt;nt--){var Bt=J.g=se[nt];Ve=qt(Bt,ge,!0,J)&&Ve}if(Bt=J.g=S,Ve=qt(Bt,ge,!0,J)&&Ve,Ve=qt(Bt,ge,!1,J)&&Ve,se)for(nt=0;nt<se.length;nt++)Bt=J.g=se[nt],Ve=qt(Bt,ge,!1,J)&&Ve}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var S=this.i,J;for(J in S.g){for(var se=S.g[J],ge=0;ge<se.length;ge++)Ce(se[ge]);delete S.g[J],S.h--}}this.F=null},Rt.prototype.K=function(S,J,se,ge){return this.i.add(String(S),J,!1,se,ge)},Rt.prototype.L=function(S,J,se,ge){return this.i.add(String(S),J,!0,se,ge)};function qt(S,J,se,ge){if(J=S.i.g[String(J)],!J)return!0;J=J.concat();for(var Ve=!0,nt=0;nt<J.length;++nt){var Bt=J[nt];if(Bt&&!Bt.da&&Bt.capture==se){var yr=Bt.listener,rn=Bt.ha||Bt.src;Bt.fa&&oe(S.i,Bt),Ve=yr.call(rn,ge)!==!1&&Ve}}return Ve&&!ge.defaultPrevented}function De(S,J,se){if(typeof S=="function")se&&(S=m(S,se));else if(S&&typeof S.handleEvent=="function")S=m(S.handleEvent,S);else throw Error("Invalid listener argument");return 2147483647<Number(J)?-1:o.setTimeout(S,J||0)}function Oe(S){S.g=De(()=>{S.g=null,S.i&&(S.i=!1,Oe(S))},S.l);const J=S.h;S.h=null,S.m.apply(null,J)}class ke extends R{constructor(J,se){super(),this.m=J,this.l=se,this.h=null,this.i=!1,this.g=null}j(J){this.h=arguments,this.g?this.i=!0:Oe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function We(S){R.call(this),this.h=S,this.g={}}v(We,R);var ft=[];function $t(S){k(S.g,function(J,se){this.g.hasOwnProperty(se)&&ut(J)},S),S.g={}}We.prototype.N=function(){We.aa.N.call(this),$t(this)},We.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zt=o.JSON.stringify,tr=o.JSON.parse,Hr=class{stringify(S){return o.JSON.stringify(S,void 0)}parse(S){return o.JSON.parse(S,void 0)}};function or(){}or.prototype.h=null;function mn(S){return S.h||(S.h=S.i())}function Lr(){}var En={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vn(){K.call(this,"d")}v(Vn,K);function ar(){K.call(this,"c")}v(ar,K);var Jt={},Mr=null;function ms(){return Mr=Mr||new Rt}Jt.La="serverreachability";function Zn(S){K.call(this,Jt.La,S)}v(Zn,K);function _a(S){const J=ms();Ut(J,new Zn(J))}Jt.STAT_EVENT="statevent";function js(S,J){K.call(this,Jt.STAT_EVENT,S),this.stat=J}v(js,K);function Kt(S){const J=ms();Ut(J,new js(J,S))}Jt.Ma="timingevent";function pn(S,J){K.call(this,Jt.Ma,S),this.size=J}v(pn,K);function on(S,J){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){S()},J)}function Dn(){this.g=!0}Dn.prototype.xa=function(){this.g=!1};function zn(S,J,se,ge,Ve,nt){S.info(function(){if(S.g)if(nt)for(var Bt="",yr=nt.split("&"),rn=0;rn<yr.length;rn++){var Dr=yr[rn].split("=");if(1<Dr.length){var Bn=Dr[0];Dr=Dr[1];var Ln=Bn.split("_");Bt=2<=Ln.length&&Ln[1]=="type"?Bt+(Bn+"="+Dr+"&"):Bt+(Bn+"=redacted&")}}else Bt=null;else Bt=nt;return"XMLHTTP REQ ("+ge+") [attempt "+Ve+"]: "+J+`
`+se+`
`+Bt})}function ea(S,J,se,ge,Ve,nt,Bt){S.info(function(){return"XMLHTTP RESP ("+ge+") [ attempt "+Ve+"]: "+J+`
`+se+`
`+nt+" "+Bt})}function Ae(S,J,se,ge){S.info(function(){return"XMLHTTP TEXT ("+J+"): "+ye(S,se)+(ge?" "+ge:"")})}function Ne(S,J){S.info(function(){return"TIMEOUT: "+J})}Dn.prototype.info=function(){};function ye(S,J){if(!S.g)return J;if(!J)return null;try{var se=JSON.parse(J);if(se){for(S=0;S<se.length;S++)if(Array.isArray(se[S])){var ge=se[S];if(!(2>ge.length)){var Ve=ge[1];if(Array.isArray(Ve)&&!(1>Ve.length)){var nt=Ve[0];if(nt!="noop"&&nt!="stop"&&nt!="close")for(var Bt=1;Bt<Ve.length;Bt++)Ve[Bt]=""}}}}return zt(se)}catch{return J}}var Ee={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_e={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Be;function $e(){}v($e,or),$e.prototype.g=function(){return new XMLHttpRequest},$e.prototype.i=function(){return{}},Be=new $e;function st(S,J,se,ge){this.j=S,this.i=J,this.l=se,this.R=ge||1,this.U=new We(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ze}function ze(){this.i=null,this.g="",this.h=!1}var Ze={},rt={};function yt(S,J,se){S.L=1,S.v=Cl(Ls(J)),S.m=se,S.P=!0,It(S,null)}function It(S,J){S.F=Date.now(),Lt(S),S.A=Ls(S.v);var se=S.A,ge=S.R;Array.isArray(ge)||(ge=[String(ge)]),wr(se.i,"t",ge),S.C=0,se=S.j.J,S.h=new ze,S.g=ce(S.j,se?J:null,!S.m),0<S.O&&(S.M=new ke(m(S.Y,S,S.g),S.O)),J=S.U,se=S.g,ge=S.ca;var Ve="readystatechange";Array.isArray(Ve)||(Ve&&(ft[0]=Ve.toString()),Ve=ft);for(var nt=0;nt<Ve.length;nt++){var Bt=we(se,Ve[nt],ge||J.handleEvent,!1,J.h||J);if(!Bt)break;J.g[Bt.key]=Bt}J=S.H?y(S.H):{},S.m?(S.u||(S.u="POST"),J["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.A,S.u,S.m,J)):(S.u="GET",S.g.ea(S.A,S.u,null,J)),_a(),zn(S.i,S.u,S.A,S.l,S.R,S.m)}st.prototype.ca=function(S){S=S.target;const J=this.M;J&&Ua(S)==3?J.j():this.Y(S)},st.prototype.Y=function(S){try{if(S==this.g)e:{const Ln=Ua(this.g);var J=this.g.Ba();const _o=this.g.Z();if(!(3>Ln)&&(Ln!=3||this.g&&(this.h.h||this.g.oa()||md(this.g)))){this.J||Ln!=4||J==7||(J==8||0>=_o?_a(3):_a(2)),Vr(this);var se=this.g.Z();this.X=se;t:if(Qt(this)){var ge=md(this.g);S="";var Ve=ge.length,nt=Ua(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wr(this),zr(this);var Bt="";break t}this.h.i=new o.TextDecoder}for(J=0;J<Ve;J++)this.h.h=!0,S+=this.h.i.decode(ge[J],{stream:!(nt&&J==Ve-1)});ge.length=0,this.h.g+=S,this.C=0,Bt=this.h.g}else Bt=this.g.oa();if(this.o=se==200,ea(this.i,this.u,this.A,this.l,this.R,Ln,se),this.o){if(this.T&&!this.K){t:{if(this.g){var yr,rn=this.g;if((yr=rn.g?rn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(yr)){var Dr=yr;break t}}Dr=null}if(se=Dr)Ae(this.i,this.l,se,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ra(this,se);else{this.o=!1,this.s=3,Kt(12),Wr(this),zr(this);break e}}if(this.P){se=!0;let Sa;for(;!this.J&&this.C<Bt.length;)if(Sa=Tt(this,Bt),Sa==rt){Ln==4&&(this.s=4,Kt(14),se=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}else if(Sa==Ze){this.s=4,Kt(15),Ae(this.i,this.l,Bt,"[Invalid Chunk]"),se=!1;break}else Ae(this.i,this.l,Sa,null),Ra(this,Sa);if(Qt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ln!=4||Bt.length!=0||this.h.h||(this.s=1,Kt(16),se=!1),this.o=this.o&&se,!se)Ae(this.i,this.l,Bt,"[Invalid Chunked Response]"),Wr(this),zr(this);else if(0<Bt.length&&!this.W){this.W=!0;var Bn=this.j;Bn.g==this&&Bn.ba&&!Bn.M&&(Bn.j.info("Great, no buffering proxy detected. Bytes received: "+Bt.length),Tl(Bn),Bn.M=!0,Kt(11))}}else Ae(this.i,this.l,Bt,null),Ra(this,Bt);Ln==4&&Wr(this),this.o&&!this.J&&(Ln==4?Il(this.j,this):(this.o=!1,Lt(this)))}else Nl(this.g),se==400&&0<Bt.indexOf("Unknown SID")?(this.s=3,Kt(12)):(this.s=0,Kt(13)),Wr(this),zr(this)}}}catch{}finally{}};function Qt(S){return S.g?S.u=="GET"&&S.L!=2&&S.j.Ca:!1}function Tt(S,J){var se=S.C,ge=J.indexOf(`
`,se);return ge==-1?rt:(se=Number(J.substring(se,ge)),isNaN(se)?Ze:(ge+=1,ge+se>J.length?rt:(J=J.slice(ge,ge+se),S.C=ge+se,J)))}st.prototype.cancel=function(){this.J=!0,Wr(this)};function Lt(S){S.S=Date.now()+S.I,pr(S,S.I)}function pr(S,J){if(S.B!=null)throw Error("WatchDog timer not null");S.B=on(m(S.ba,S),J)}function Vr(S){S.B&&(o.clearTimeout(S.B),S.B=null)}st.prototype.ba=function(){this.B=null;const S=Date.now();0<=S-this.S?(Ne(this.i,this.A),this.L!=2&&(_a(),Kt(17)),Wr(this),this.s=2,zr(this)):pr(this,this.S-S)};function zr(S){S.j.G==0||S.J||Il(S.j,S)}function Wr(S){Vr(S);var J=S.M;J&&typeof J.ma=="function"&&J.ma(),S.M=null,$t(S.U),S.g&&(J=S.g,S.g=null,J.abort(),J.ma())}function Ra(S,J){try{var se=S.j;if(se.G!=0&&(se.g==S||Ds(se.h,S))){if(!S.K&&Ds(se.h,S)&&se.G==3){try{var ge=se.Da.g.parse(J)}catch{ge=null}if(Array.isArray(ge)&&ge.length==3){var Ve=ge;if(Ve[0]==0){e:if(!se.u){if(se.g)if(se.g.F+3e3<S.F)Xo(se),tu(se);else break e;mc(se),Kt(18)}}else se.za=Ve[1],0<se.za-se.T&&37500>Ve[2]&&se.F&&se.v==0&&!se.C&&(se.C=on(m(se.Za,se),6e3));if(1>=Za(se.h)&&se.ca){try{se.ca()}catch{}se.ca=void 0}}else $s(se,11)}else if((S.K||se.g==S)&&Xo(se),!B(J))for(Ve=se.Da.g.parse(J),J=0;J<Ve.length;J++){let Dr=Ve[J];if(se.T=Dr[0],Dr=Dr[1],se.G==2)if(Dr[0]=="c"){se.K=Dr[1],se.ia=Dr[2];const Bn=Dr[3];Bn!=null&&(se.la=Bn,se.j.info("VER="+se.la));const Ln=Dr[4];Ln!=null&&(se.Aa=Ln,se.j.info("SVER="+se.Aa));const _o=Dr[5];_o!=null&&typeof _o=="number"&&0<_o&&(ge=1.5*_o,se.L=ge,se.j.info("backChannelRequestTimeoutMs_="+ge)),ge=se;const Sa=S.g;if(Sa){const Ti=Sa.g?Sa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ti){var nt=ge.h;nt.g||Ti.indexOf("spdy")==-1&&Ti.indexOf("quic")==-1&&Ti.indexOf("h2")==-1||(nt.j=nt.l,nt.g=new Set,nt.h&&(ta(nt,nt.h),nt.h=null))}if(ge.D){const Fl=Sa.g?Sa.g.getResponseHeader("X-HTTP-Session-Id"):null;Fl&&(ge.ya=Fl,Nn(ge.I,ge.D,Fl))}}se.G=3,se.l&&se.l.ua(),se.ba&&(se.R=Date.now()-S.F,se.j.info("Handshake RTT: "+se.R+"ms")),ge=se;var Bt=S;if(ge.qa=V(ge,ge.J?ge.ia:null,ge.W),Bt.K){gs(ge.h,Bt);var yr=Bt,rn=ge.L;rn&&(yr.I=rn),yr.B&&(Vr(yr),Lt(yr)),ge.g=Bt}else nu(ge);0<se.i.length&&ru(se)}else Dr[0]!="stop"&&Dr[0]!="close"||$s(se,7);else se.G==3&&(Dr[0]=="stop"||Dr[0]=="close"?Dr[0]=="stop"?$s(se,7):Wo(se):Dr[0]!="noop"&&se.l&&se.l.ta(Dr),se.v=0)}}_a(4)}catch{}}var _i=class{constructor(S,J){this.g=S,this.map=J}};function La(S){this.l=S||10,o.PerformanceNavigationTiming?(S=o.performance.getEntriesByType("navigation"),S=0<S.length&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ps(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function Za(S){return S.h?1:S.g?S.g.size:0}function Ds(S,J){return S.h?S.h==J:S.g?S.g.has(J):!1}function ta(S,J){S.g?S.g.add(J):S.h=J}function gs(S,J){S.h&&S.h==J?S.h=null:S.g&&S.g.has(J)&&S.g.delete(J)}La.prototype.cancel=function(){if(this.i=Jc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function Jc(S){if(S.h!=null)return S.i.concat(S.h.D);if(S.g!=null&&S.g.size!==0){let J=S.i;for(const se of S.g.values())J=J.concat(se.D);return J}return x(S.i)}function dd(S){if(S.V&&typeof S.V=="function")return S.V();if(typeof Map<"u"&&S instanceof Map||typeof Set<"u"&&S instanceof Set)return Array.from(S.values());if(typeof S=="string")return S.split("");if(c(S)){for(var J=[],se=S.length,ge=0;ge<se;ge++)J.push(S[ge]);return J}J=[],se=0;for(ge in S)J[se++]=S[ge];return J}function wl(S){if(S.na&&typeof S.na=="function")return S.na();if(!S.V||typeof S.V!="function"){if(typeof Map<"u"&&S instanceof Map)return Array.from(S.keys());if(!(typeof Set<"u"&&S instanceof Set)){if(c(S)||typeof S=="string"){var J=[];S=S.length;for(var se=0;se<S;se++)J.push(se);return J}J=[],se=0;for(const ge in S)J[se++]=ge;return J}}}function sA(S,J){if(S.forEach&&typeof S.forEach=="function")S.forEach(J,void 0);else if(c(S)||typeof S=="string")Array.prototype.forEach.call(S,J,void 0);else for(var se=wl(S),ge=dd(S),Ve=ge.length,nt=0;nt<Ve;nt++)J.call(void 0,ge[nt],se&&se[nt],S)}var Rs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zc(S,J){if(S){S=S.split("&");for(var se=0;se<S.length;se++){var ge=S[se].indexOf("="),Ve=null;if(0<=ge){var nt=S[se].substring(0,ge);Ve=S[se].substring(ge+1)}else nt=S[se];J(nt,Ve?decodeURIComponent(Ve.replace(/\+/g," ")):"")}}}function gn(S){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,S instanceof gn){this.h=S.h,yl(this,S.j),this.o=S.o,this.g=S.g,El(this,S.s),this.l=S.l;var J=S.i,se=new vo;se.i=J.i,J.g&&(se.g=new Map(J.g),se.h=J.h),xo(this,se),this.m=S.m}else S&&(J=String(S).match(Rs))?(this.h=!1,yl(this,J[1]||"",!0),this.o=Si(J[2]||""),this.g=Si(J[3]||"",!0),El(this,J[4]),this.l=Si(J[5]||"",!0),xo(this,J[6]||"",!0),this.m=Si(J[7]||"")):(this.h=!1,this.i=new vo(null,this.h))}gn.prototype.toString=function(){var S=[],J=this.j;J&&S.push(zo(J,iA,!0),":");var se=this.g;return(se||J=="file")&&(S.push("//"),(J=this.o)&&S.push(zo(J,iA,!0),"@"),S.push(encodeURIComponent(String(se)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),se=this.s,se!=null&&S.push(":",String(se))),(se=this.l)&&(this.g&&se.charAt(0)!="/"&&S.push("/"),S.push(zo(se,se.charAt(0)=="/"?Go:oA,!0))),(se=this.i.toString())&&S.push("?",se),(se=this.m)&&S.push("#",zo(se,Ko)),S.join("")};function Ls(S){return new gn(S)}function yl(S,J,se){S.j=se?Si(J,!0):J,S.j&&(S.j=S.j.replace(/:$/,""))}function El(S,J){if(J){if(J=Number(J),isNaN(J)||0>J)throw Error("Bad port number "+J);S.s=J}else S.s=null}function xo(S,J,se){J instanceof vo?(S.i=J,hd(S.i,S.h)):(se||(J=zo(J,eu)),S.i=new vo(J,S.h))}function Nn(S,J,se){S.i.set(J,se)}function Cl(S){return Nn(S,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),S}function Si(S,J){return S?J?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function zo(S,J,se){return typeof S=="string"?(S=encodeURI(S).replace(J,fd),se&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function fd(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var iA=/[#\/\?@]/g,oA=/[#\?:]/g,Go=/[#\?]/g,eu=/[#\?@]/g,Ko=/#/g;function vo(S,J){this.h=this.g=null,this.i=S||null,this.j=!!J}function Gn(S){S.g||(S.g=new Map,S.h=0,S.i&&Zc(S.i,function(J,se){S.add(decodeURIComponent(J.replace(/\+/g," ")),se)}))}e=vo.prototype,e.add=function(S,J){Gn(this),this.i=null,S=wo(this,S);var se=this.g.get(S);return se||this.g.set(S,se=[]),se.push(J),this.h+=1,this};function qo(S,J){Gn(S),J=wo(S,J),S.g.has(J)&&(S.i=null,S.h-=S.g.get(J).length,S.g.delete(J))}function bo(S,J){return Gn(S),J=wo(S,J),S.g.has(J)}e.forEach=function(S,J){Gn(this),this.g.forEach(function(se,ge){se.forEach(function(Ve){S.call(J,Ve,ge,this)},this)},this)},e.na=function(){Gn(this);const S=Array.from(this.g.values()),J=Array.from(this.g.keys()),se=[];for(let ge=0;ge<J.length;ge++){const Ve=S[ge];for(let nt=0;nt<Ve.length;nt++)se.push(J[ge])}return se},e.V=function(S){Gn(this);let J=[];if(typeof S=="string")bo(this,S)&&(J=J.concat(this.g.get(wo(this,S))));else{S=Array.from(this.g.values());for(let se=0;se<S.length;se++)J=J.concat(S[se])}return J},e.set=function(S,J){return Gn(this),this.i=null,S=wo(this,S),bo(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[J]),this.h+=1,this},e.get=function(S,J){return S?(S=this.V(S),0<S.length?String(S[0]):J):J};function wr(S,J,se){qo(S,J),0<se.length&&(S.i=null,S.g.set(wo(S,J),x(se)),S.h+=se.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],J=Array.from(this.g.keys());for(var se=0;se<J.length;se++){var ge=J[se];const nt=encodeURIComponent(String(ge)),Bt=this.V(ge);for(ge=0;ge<Bt.length;ge++){var Ve=nt;Bt[ge]!==""&&(Ve+="="+encodeURIComponent(String(Bt[ge]))),S.push(Ve)}}return this.i=S.join("&")};function wo(S,J){return J=String(J),S.j&&(J=J.toLowerCase()),J}function hd(S,J){J&&!S.j&&(Gn(S),S.i=null,S.g.forEach(function(se,ge){var Ve=ge.toLowerCase();ge!=Ve&&(qo(this,ge),wr(this,Ve,se))},S)),S.j=J}function Gs(S,J){const se=new Dn;if(o.Image){const ge=new Image;ge.onload=p(li,se,"TestLoadImage: loaded",!0,J,ge),ge.onerror=p(li,se,"TestLoadImage: error",!1,J,ge),ge.onabort=p(li,se,"TestLoadImage: abort",!1,J,ge),ge.ontimeout=p(li,se,"TestLoadImage: timeout",!1,J,ge),o.setTimeout(function(){ge.ontimeout&&ge.ontimeout()},1e4),ge.src=S}else J(!1)}function Ni(S,J){const se=new Dn,ge=new AbortController,Ve=setTimeout(()=>{ge.abort(),li(se,"TestPingServer: timeout",!1,J)},1e4);fetch(S,{signal:ge.signal}).then(nt=>{clearTimeout(Ve),nt.ok?li(se,"TestPingServer: ok",!0,J):li(se,"TestPingServer: server error",!1,J)}).catch(()=>{clearTimeout(Ve),li(se,"TestPingServer: error",!1,J)})}function li(S,J,se,ge,Ve){try{Ve&&(Ve.onload=null,Ve.onerror=null,Ve.onabort=null,Ve.ontimeout=null),ge(se)}catch{}}function yo(){this.g=new Hr}function Bi(S,J,se){const ge=se||"";try{sA(S,function(Ve,nt){let Bt=Ve;A(Ve)&&(Bt=zt(Ve)),J.push(ge+nt+"="+encodeURIComponent(Bt))})}catch(Ve){throw J.push(ge+"type="+encodeURIComponent("_badmap")),Ve}}function _l(S){this.l=S.Ub||null,this.j=S.eb||!1}v(_l,or),_l.prototype.g=function(){return new $o(this.l,this.j)},_l.prototype.i=function(S){return function(){return S}}({});function $o(S,J){Rt.call(this),this.D=S,this.o=J,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v($o,Rt),e=$o.prototype,e.open=function(S,J){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=S,this.A=J,this.readyState=1,Ks(this)},e.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const J={headers:this.u,method:this.B,credentials:this.m,cache:void 0};S&&(J.body=S),(this.D||o).fetch(new Request(this.A,J)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ki(this)),this.readyState=0},e.Sa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,Ks(this)),this.g&&(this.readyState=3,Ks(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lA(this)}else S.text().then(this.Ra.bind(this),this.ga.bind(this))};function lA(S){S.j.read().then(S.Pa.bind(S)).catch(S.ga.bind(S))}e.Pa=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var J=S.value?S.value:new Uint8Array(0);(J=this.v.decode(J,{stream:!S.done}))&&(this.response=this.responseText+=J)}S.done?ki(this):Ks(this),this.readyState==3&&lA(this)}},e.Ra=function(S){this.g&&(this.response=this.responseText=S,ki(this))},e.Qa=function(S){this.g&&(this.response=S,ki(this))},e.ga=function(){this.g&&ki(this)};function ki(S){S.readyState=4,S.l=null,S.j=null,S.v=null,Ks(S)}e.setRequestHeader=function(S,J){this.u.append(S,J)},e.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],J=this.h.entries();for(var se=J.next();!se.done;)se=se.value,S.push(se[0]+": "+se[1]),se=J.next();return S.join(`\r
`)};function Ks(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty($o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function Eo(S){let J="";return k(S,function(se,ge){J+=ge,J+=":",J+=se,J+=`\r
`}),J}function Oa(S,J,se){e:{for(ge in se){var ge=!1;break e}ge=!0}ge||(se=Eo(se),typeof S=="string"?se!=null&&encodeURIComponent(String(se)):Nn(S,J,se))}function tn(S){Rt.call(this),this.headers=new Map,this.o=S||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(tn,Rt);var Sl=/^https?$/i,Co=["POST","PUT"];e=tn.prototype,e.Ha=function(S){this.J=S},e.ea=function(S,J,se,ge){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);J=J?J.toUpperCase():"GET",this.D=S,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Be.g(),this.v=this.o?mn(this.o):mn(Be),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(J,String(S),!0),this.B=!1}catch(nt){cA(this,nt);return}if(S=se||"",se=new Map(this.headers),ge)if(Object.getPrototypeOf(ge)===Object.prototype)for(var Ve in ge)se.set(Ve,ge[Ve]);else if(typeof ge.keys=="function"&&typeof ge.get=="function")for(const nt of ge.keys())se.set(nt,ge.get(nt));else throw Error("Unknown input type for opt_headers: "+String(ge));ge=Array.from(se.keys()).find(nt=>nt.toLowerCase()=="content-type"),Ve=o.FormData&&S instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Co,J,void 0))||ge||Ve||se.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[nt,Bt]of se)this.g.setRequestHeader(nt,Bt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qs(this),this.u=!0,this.g.send(S),this.u=!1}catch(nt){cA(this,nt)}};function cA(S,J){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=J,S.m=5,uc(S),so(S)}function uc(S){S.A||(S.A=!0,Ut(S,"complete"),Ut(S,"error"))}e.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=S||7,Ut(this,"complete"),Ut(this,"abort"),so(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),so(this,!0)),tn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ac(this):this.bb())},e.bb=function(){Ac(this)};function Ac(S){if(S.h&&typeof i<"u"&&(!S.v[1]||Ua(S)!=4||S.Z()!=2)){if(S.u&&Ua(S)==4)De(S.Ea,0,S);else if(Ut(S,"readystatechange"),Ua(S)==4){S.h=!1;try{const Bt=S.Z();e:switch(Bt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var J=!0;break e;default:J=!1}var se;if(!(se=J)){var ge;if(ge=Bt===0){var Ve=String(S.D).match(Rs)[1]||null;!Ve&&o.self&&o.self.location&&(Ve=o.self.location.protocol.slice(0,-1)),ge=!Sl.test(Ve?Ve.toLowerCase():"")}se=ge}if(se)Ut(S,"complete"),Ut(S,"success");else{S.m=6;try{var nt=2<Ua(S)?S.g.statusText:""}catch{nt=""}S.l=nt+" ["+S.Z()+"]",uc(S)}}finally{so(S)}}}}function so(S,J){if(S.g){qs(S);const se=S.g,ge=S.v[0]?()=>{}:null;S.g=null,S.v=null,J||Ut(S,"ready");try{se.onreadystatechange=ge}catch{}}}function qs(S){S.I&&(o.clearTimeout(S.I),S.I=null)}e.isActive=function(){return!!this.g};function Ua(S){return S.g?S.g.readyState:0}e.Z=function(){try{return 2<Ua(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(S){if(this.g){var J=this.g.responseText;return S&&J.indexOf(S)==0&&(J=J.substring(S.length)),tr(J)}};function md(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.H){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function Nl(S){const J={};S=(S.g&&2<=Ua(S)&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let ge=0;ge<S.length;ge++){if(B(S[ge]))continue;var se=j(S[ge]);const Ve=se[0];if(se=se[1],typeof se!="string")continue;se=se.trim();const nt=J[Ve]||[];J[Ve]=nt,nt.push(se)}w(J,function(ge){return ge.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(S,J,se){return se&&se.internalChannelParams&&se.internalChannelParams[S]||J}function Bl(S){this.Aa=0,this.i=[],this.j=new Dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Os("failFast",!1,S),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Os("baseRetryDelayMs",5e3,S),this.cb=Os("retryDelaySeedMs",1e4,S),this.Wa=Os("forwardChannelMaxRetries",2,S),this.wa=Os("forwardChannelRequestTimeoutMs",2e4,S),this.pa=S&&S.xmlHttpFactory||void 0,this.Xa=S&&S.Tb||void 0,this.Ca=S&&S.useFetchStreams||!1,this.L=void 0,this.J=S&&S.supportsCrossDomainXhr||!1,this.K="",this.h=new La(S&&S.concurrentRequestLimit),this.Da=new yo,this.P=S&&S.fastHandshake||!1,this.O=S&&S.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=S&&S.Rb||!1,S&&S.xa&&this.j.xa(),S&&S.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&S&&S.detectBufferingProxy||!1,this.ja=void 0,S&&S.longPollingTimeout&&0<S.longPollingTimeout&&(this.ja=S.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Bl.prototype,e.la=8,e.G=1,e.connect=function(S,J,se,ge){Kt(0),this.W=S,this.H=J||{},se&&ge!==void 0&&(this.H.OSID=se,this.H.OAID=ge),this.F=this.X,this.I=V(this,null,this.W),ru(this)};function Wo(S){if(dc(S),S.G==3){var J=S.U++,se=Ls(S.I);if(Nn(se,"SID",S.K),Nn(se,"RID",J),Nn(se,"TYPE","terminate"),kl(S,se),J=new st(S,S.j,J),J.L=2,J.v=Cl(Ls(se)),se=!1,o.navigator&&o.navigator.sendBeacon)try{se=o.navigator.sendBeacon(J.v.toString(),"")}catch{}!se&&o.Image&&(new Image().src=J.v,se=!0),se||(J.g=ce(J.j,null),J.g.ea(J.v)),J.F=Date.now(),Lt(J)}au(S)}function tu(S){S.g&&(Tl(S),S.g.cancel(),S.g=null)}function dc(S){tu(S),S.u&&(o.clearTimeout(S.u),S.u=null),Xo(S),S.h.cancel(),S.s&&(typeof S.s=="number"&&o.clearTimeout(S.s),S.s=null)}function ru(S){if(!ps(S.h)&&!S.s){S.s=!0;var J=S.Ga;te||z(),G||(te(),G=!0),q.add(J,S),S.B=0}}function uA(S,J){return Za(S.h)>=S.h.j-(S.s?1:0)?!1:S.s?(S.i=J.D.concat(S.i),!0):S.G==1||S.G==2||S.B>=(S.Va?0:S.Wa)?!1:(S.s=on(m(S.Ga,S,J),pc(S,S.B)),S.B++,!0)}e.Ga=function(S){if(this.s)if(this.s=null,this.G==1){if(!S){this.U=Math.floor(1e5*Math.random()),S=this.U++;const Ve=new st(this,this.j,S);let nt=this.o;if(this.S&&(nt?(nt=y(nt),U(nt,this.S)):nt=this.S),this.m!==null||this.O||(Ve.H=nt,nt=null),this.P)e:{for(var J=0,se=0;se<this.i.length;se++){t:{var ge=this.i[se];if("__data__"in ge.map&&(ge=ge.map.__data__,typeof ge=="string")){ge=ge.length;break t}ge=void 0}if(ge===void 0)break;if(J+=ge,4096<J){J=se;break e}if(J===4096||se===this.i.length-1){J=se+1;break e}}J=1e3}else J=1e3;J=hc(this,Ve,J),se=Ls(this.I),Nn(se,"RID",S),Nn(se,"CVER",22),this.D&&Nn(se,"X-HTTP-Session-Id",this.D),kl(this,se),nt&&(this.O?J="headers="+encodeURIComponent(String(Eo(nt)))+"&"+J:this.m&&Oa(se,this.m,nt)),ta(this.h,Ve),this.Ua&&Nn(se,"TYPE","init"),this.P?(Nn(se,"$req",J),Nn(se,"SID","null"),Ve.T=!0,yt(Ve,se,null)):yt(Ve,se,J),this.G=2}}else this.G==3&&(S?fc(this,S):this.i.length==0||ps(this.h)||fc(this))};function fc(S,J){var se;J?se=J.l:se=S.U++;const ge=Ls(S.I);Nn(ge,"SID",S.K),Nn(ge,"RID",se),Nn(ge,"AID",S.T),kl(S,ge),S.m&&S.o&&Oa(ge,S.m,S.o),se=new st(S,S.j,se,S.B+1),S.m===null&&(se.H=S.o),J&&(S.i=J.D.concat(S.i)),J=hc(S,se,1e3),se.I=Math.round(.5*S.wa)+Math.round(.5*S.wa*Math.random()),ta(S.h,se),yt(se,ge,J)}function kl(S,J){S.H&&k(S.H,function(se,ge){Nn(J,ge,se)}),S.l&&sA({},function(se,ge){Nn(J,ge,se)})}function hc(S,J,se){se=Math.min(S.i.length,se);var ge=S.l?m(S.l.Na,S.l,S):null;e:{var Ve=S.i;let nt=-1;for(;;){const Bt=["count="+se];nt==-1?0<se?(nt=Ve[0].g,Bt.push("ofs="+nt)):nt=0:Bt.push("ofs="+nt);let yr=!0;for(let rn=0;rn<se;rn++){let Dr=Ve[rn].g;const Bn=Ve[rn].map;if(Dr-=nt,0>Dr)nt=Math.max(0,Ve[rn].g-100),yr=!1;else try{Bi(Bn,Bt,"req"+Dr+"_")}catch{ge&&ge(Bn)}}if(yr){ge=Bt.join("&");break e}}}return S=S.i.splice(0,se),J.D=S,ge}function nu(S){if(!S.g&&!S.u){S.Y=1;var J=S.Fa;te||z(),G||(te(),G=!0),q.add(J,S),S.v=0}}function mc(S){return S.g||S.u||3<=S.v?!1:(S.Y++,S.u=on(m(S.Fa,S),pc(S,S.v)),S.v++,!0)}e.Fa=function(){if(this.u=null,pd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var S=2*this.R;this.j.info("BP detection timer enabled: "+S),this.A=on(m(this.ab,this),S)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kt(10),tu(this),pd(this))};function Tl(S){S.A!=null&&(o.clearTimeout(S.A),S.A=null)}function pd(S){S.g=new st(S,S.j,"rpc",S.Y),S.m===null&&(S.g.H=S.o),S.g.O=0;var J=Ls(S.qa);Nn(J,"RID","rpc"),Nn(J,"SID",S.K),Nn(J,"AID",S.T),Nn(J,"CI",S.F?"0":"1"),!S.F&&S.ja&&Nn(J,"TO",S.ja),Nn(J,"TYPE","xmlhttp"),kl(S,J),S.m&&S.o&&Oa(J,S.m,S.o),S.L&&(S.g.I=S.L);var se=S.g;S=S.ia,se.L=1,se.v=Cl(Ls(J)),se.m=null,se.P=!0,It(se,S)}e.Za=function(){this.C!=null&&(this.C=null,tu(this),mc(this),Kt(19))};function Xo(S){S.C!=null&&(o.clearTimeout(S.C),S.C=null)}function Il(S,J){var se=null;if(S.g==J){Xo(S),Tl(S),S.g=null;var ge=2}else if(Ds(S.h,J))se=J.D,gs(S.h,J),ge=1;else return;if(S.G!=0){if(J.o)if(ge==1){se=J.m?J.m.length:0,J=Date.now()-J.F;var Ve=S.B;ge=ms(),Ut(ge,new pn(ge,se)),ru(S)}else nu(S);else if(Ve=J.s,Ve==3||Ve==0&&0<J.X||!(ge==1&&uA(S,J)||ge==2&&mc(S)))switch(se&&0<se.length&&(J=S.h,J.i=J.i.concat(se)),Ve){case 1:$s(S,5);break;case 4:$s(S,10);break;case 3:$s(S,6);break;default:$s(S,2)}}}function pc(S,J){let se=S.Ta+Math.floor(Math.random()*S.cb);return S.isActive()||(se*=2),se*J}function $s(S,J){if(S.j.info("Error code "+J),J==2){var se=m(S.fb,S),ge=S.Xa;const Ve=!ge;ge=new gn(ge||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||yl(ge,"https"),Cl(ge),Ve?Gs(ge.toString(),se):Ni(ge.toString(),se)}else Kt(2);S.G=0,S.l&&S.l.sa(J),au(S),dc(S)}e.fb=function(S){S?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function au(S){if(S.G=0,S.ka=[],S.l){const J=Jc(S.h);(J.length!=0||S.i.length!=0)&&(E(S.ka,J),E(S.ka,S.i),S.h.i.length=0,x(S.i),S.i.length=0),S.l.ra()}}function V(S,J,se){var ge=se instanceof gn?Ls(se):new gn(se);if(ge.g!="")J&&(ge.g=J+"."+ge.g),El(ge,ge.s);else{var Ve=o.location;ge=Ve.protocol,J=J?J+"."+Ve.hostname:Ve.hostname,Ve=+Ve.port;var nt=new gn(null);ge&&yl(nt,ge),J&&(nt.g=J),Ve&&El(nt,Ve),se&&(nt.l=se),ge=nt}return se=S.D,J=S.ya,se&&J&&Nn(ge,se,J),Nn(ge,"VER",S.la),kl(S,ge),ge}function ce(S,J,se){if(J&&!S.J)throw Error("Can't create secondary domain capable XhrIo object.");return J=S.Ca&&!S.pa?new tn(new _l({eb:se})):new tn(S.pa),J.Ha(S.J),J}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ie(){}e=Ie.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Re(){}Re.prototype.g=function(S,J){return new Ge(S,J)};function Ge(S,J){Rt.call(this),this.g=new Bl(J),this.l=S,this.h=J&&J.messageUrlParams||null,S=J&&J.messageHeaders||null,J&&J.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=J&&J.initMessageHeaders||null,J&&J.messageContentType&&(S?S["X-WebChannel-Content-Type"]=J.messageContentType:S={"X-WebChannel-Content-Type":J.messageContentType}),J&&J.va&&(S?S["X-WebChannel-Client-Profile"]=J.va:S={"X-WebChannel-Client-Profile":J.va}),this.g.S=S,(S=J&&J.Sb)&&!B(S)&&(this.g.m=S),this.v=J&&J.supportsCrossDomainXhr||!1,this.u=J&&J.sendRawJson||!1,(J=J&&J.httpSessionIdParam)&&!B(J)&&(this.g.D=J,S=this.h,S!==null&&J in S&&(S=this.h,J in S&&delete S[J])),this.j=new Ht(this)}v(Ge,Rt),Ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ge.prototype.close=function(){Wo(this.g)},Ge.prototype.o=function(S){var J=this.g;if(typeof S=="string"){var se={};se.__data__=S,S=se}else this.u&&(se={},se.__data__=zt(S),S=se);J.i.push(new _i(J.Ya++,S)),J.G==3&&ru(J)},Ge.prototype.N=function(){this.g.l=null,delete this.j,Wo(this.g),delete this.g,Ge.aa.N.call(this)};function ct(S){Vn.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var J=S.__sm__;if(J){e:{for(const se in J){S=se;break e}S=void 0}(this.i=S)&&(S=this.i,J=J!==null&&S in J?J[S]:void 0),this.data=J}else this.data=S}v(ct,Vn);function Nt(){ar.call(this),this.status=1}v(Nt,ar);function Ht(S){this.g=S}v(Ht,Ie),Ht.prototype.ua=function(){Ut(this.g,"a")},Ht.prototype.ta=function(S){Ut(this.g,new ct(S))},Ht.prototype.sa=function(S){Ut(this.g,new Nt)},Ht.prototype.ra=function(){Ut(this.g,"b")},Re.prototype.createWebChannel=Re.prototype.g,Ge.prototype.send=Ge.prototype.o,Ge.prototype.open=Ge.prototype.m,Ge.prototype.close=Ge.prototype.close,rO=function(){return new Re},tO=function(){return ms()},eO=Jt,Y_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ee.NO_ERROR=0,Ee.TIMEOUT=8,Ee.HTTP_ERROR=6,m2=Ee,_e.COMPLETE="complete",ZL=_e,Lr.EventType=En,En.OPEN="a",En.CLOSE="b",En.ERROR="c",En.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,Mg=Lr,tn.prototype.listenOnce=tn.prototype.L,tn.prototype.getLastError=tn.prototype.Ka,tn.prototype.getLastErrorCode=tn.prototype.Ba,tn.prototype.getStatus=tn.prototype.Z,tn.prototype.getResponseJson=tn.prototype.Oa,tn.prototype.getResponseText=tn.prototype.oa,tn.prototype.send=tn.prototype.ea,tn.prototype.setWithCredentials=tn.prototype.Ha,JL=tn}).apply(typeof Yv<"u"?Yv:typeof self<"u"?self:typeof window<"u"?window:{});const EI="@firebase/firestore",CI="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}zi.UNAUTHENTICATED=new zi(null),zi.GOOGLE_CREDENTIALS=new zi("google-credentials-uid"),zi.FIRST_PARTY=new zi("first-party-uid"),zi.MOCK_USER=new zi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ep="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=new qS("@firebase/firestore");function vm(){return e0.logLevel}function rr(e,...t){if(e0.logLevel<=dn.DEBUG){const r=t.map(aN);e0.debug(`Firestore (${Ep}): ${e}`,...r)}}function ZA(e,...t){if(e0.logLevel<=dn.ERROR){const r=t.map(aN);e0.error(`Firestore (${Ep}): ${e}`,...r)}}function np(e,...t){if(e0.logLevel<=dn.WARN){const r=t.map(aN);e0.warn(`Firestore (${Ep}): ${e}`,...r)}}function aN(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(e,t,r){let n="Unexpected state";typeof t=="string"?n=t:r=t,nO(e,n,r)}function nO(e,t,r){let n=`FIRESTORE (${Ep}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw ZA(n),new Error(n)}function Qn(e,t,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,e||nO(t,a,n)}function Pr(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wt extends qc{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class J${getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(zi.UNAUTHENTICATED))}shutdown(){}}class Z${constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class eW{constructor(t){this.t=t,this.currentUser=zi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){Qn(this.o===void 0,42304);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new zA;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new zA,t.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const c=s;t.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},o=c=>{rr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(rr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new zA)}},0),i()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(rr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Qn(typeof n.accessToken=="string",31837,{l:n}),new aO(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Qn(t===null||typeof t=="string",2055,{h:t}),new zi(t)}}class tW{constructor(t,r,n){this.P=t,this.T=r,this.I=n,this.type="FirstParty",this.user=zi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class rW{constructor(t,r,n){this.P=t,this.T=r,this.I=n}getToken(){return Promise.resolve(new tW(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(zi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _I{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nW{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dl(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){Qn(this.o===void 0,3512);const n=s=>{s.error!=null&&rr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.m;return this.m=s.token,rr("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const a=s=>{rr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):rr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new _I(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(Qn(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new _I(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aW(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=aW(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=t.charAt(a[s]%62))}return n}}function fn(e,t){return e<t?-1:e>t?1:0}function J_(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const a=e.charAt(n),s=t.charAt(n);if(a!==s)return n5(a)===n5(s)?fn(a,s):n5(a)?1:-1}return fn(e.length,t.length)}const sW=55296,iW=57343;function n5(e){const t=e.charCodeAt(0);return t>=sW&&t<=iW}function ap(e,t,r){return e.length===t.length&&e.every((n,a)=>r(n,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="__name__";class Du{constructor(t,r,n){r===void 0?r=0:r>t.length&&Ir(637,{offset:r,range:t.length}),n===void 0?n=t.length-r:n>t.length-r&&Ir(1746,{length:n,range:t.length-r}),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return Du.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Du?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let a=0;a<n;a++){const s=Du.compareSegments(t.get(a),r.get(a));if(s!==0)return s}return fn(t.length,r.length)}static compareSegments(t,r){const n=Du.isNumericId(t),a=Du.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?Du.extractNumericId(t).compare(Du.extractNumericId(r)):J_(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ef.fromString(t.substring(4,t.length-2))}}class da extends Du{construct(t,r,n){return new da(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new Wt(xt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new da(r)}static emptyPath(){return new da([])}}const oW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bi extends Du{construct(t,r,n){return new bi(t,r,n)}static isValidIdentifier(t){return oW.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===SI}static keyField(){return new bi([SI])}static fromServerFormat(t){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Wt(xt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<t.length;){const o=t[a];if(o==="\\"){if(a+1===t.length)throw new Wt(xt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Wt(xt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,a+=2}else o==="`"?(i=!i,a++):o!=="."||i?(n+=o,a++):(s(),a++)}if(s(),i)throw new Wt(xt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new bi(r)}static emptyPath(){return new bi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(t){this.path=t}static fromPath(t){return new mr(da.fromString(t))}static fromName(t){return new mr(da.fromString(t).popFirst(5))}static empty(){return new mr(da.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&da.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return da.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new mr(new da(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(e,t,r){if(!r)throw new Wt(xt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function lW(e,t,r,n){if(t===!0&&n===!0)throw new Wt(xt.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function NI(e){if(!mr.isDocumentKey(e))throw new Wt(xt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function BI(e){if(mr.isDocumentKey(e))throw new Wt(xt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function iO(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function yy(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Ir(12329,{type:typeof e})}function ho(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Wt(xt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=yy(e);throw new Wt(xt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function cW(e,t){if(t<=0)throw new Wt(xt.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(e,t){const r={typeString:e};return t&&(r.value=t),r}function C1(e,t){if(!iO(e))throw new Wt(xt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const a=t[n].typeString,s="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const i=e[n];if(a&&typeof i!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&i!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new Wt(xt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=-62135596800,TI=1e6;class Ar{static now(){return Ar.fromMillis(Date.now())}static fromDate(t){return Ar.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor((t-1e3*r)*TI);return new Ar(r,n)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Wt(xt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Wt(xt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<kI)throw new Wt(xt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Wt(xt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/TI}_compareTo(t){return this.seconds===t.seconds?fn(this.nanoseconds,t.nanoseconds):fn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ar._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(C1(t,Ar._jsonSchema))return new Ar(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-kI;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ar._jsonSchemaVersion="firestore/timestamp/1.0",Ar._jsonSchema={type:ks("string",Ar._jsonSchemaVersion),seconds:ks("number"),nanoseconds:ks("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{static fromTimestamp(t){return new Or(t)}static min(){return new Or(new Ar(0,0))}static max(){return new Or(new Ar(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=-1;function uW(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,a=Or.fromTimestamp(n===1e9?new Ar(r+1,0):new Ar(r,n));return new Df(a,mr.empty(),t)}function AW(e){return new Df(e.readTime,e.key,Dx)}class Df{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new Df(Or.min(),mr.empty(),Dx)}static max(){return new Df(Or.max(),mr.empty(),Dx)}}function dW(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=mr.comparator(e.documentKey,t.documentKey),r!==0?r:fn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hW{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cp(e){if(e.code!==xt.FAILED_PRECONDITION||e.message!==fW)throw e;rr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Ir(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new _t((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof _t?r:_t.resolve(r)}catch(r){return _t.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):_t.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):_t.reject(r)}static resolve(t){return new _t((r,n)=>{r(t)})}static reject(t){return new _t((r,n)=>{n(t)})}static waitFor(t){return new _t((r,n)=>{let a=0,s=0,i=!1;t.forEach(o=>{++a,o.next(()=>{++s,i&&s===a&&r()},c=>n(c))}),i=!0,s===a&&r()})}static or(t){let r=_t.resolve(!1);for(const n of t)r=r.next(a=>a?_t.resolve(a):n());return r}static forEach(t,r){const n=[];return t.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(t,r){return new _t((n,a)=>{const s=t.length,i=new Array(s);let o=0;for(let c=0;c<s;c++){const A=c;r(t[A]).next(d=>{i[A]=d,++o,o===s&&n(i)},d=>a(d))}})}static doWhile(t,r){return new _t((n,a)=>{const s=()=>{t()===!0?r().next(()=>{s()},a):n()};s()})}}function mW(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function _p(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Ey.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=-1;function Cy(e){return e==null}function sw(e){return e===0&&1/e==-1/0}function pW(e){return typeof e=="number"&&Number.isInteger(e)&&!sw(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO="";function gW(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=II(t)),t=xW(e.get(r),t);return II(t)}function xW(e,t){let r=t;const n=e.length;for(let a=0;a<n;a++){const s=e.charAt(a);switch(s){case"\0":r+="";break;case oO:r+="";break;default:r+=s}}return r}function II(e){return e+oO+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function $f(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function lO(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(t,r){this.comparator=t,this.root=r||xi.EMPTY}insert(t,r){return new ja(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,xi.BLACK,null,null))}remove(t){return new ja(this.comparator,this.root.remove(t,this.comparator).copy(null,null,xi.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Jv(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Jv(this.root,t,this.comparator,!1)}getReverseIterator(){return new Jv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Jv(this.root,t,this.comparator,!0)}}class Jv{constructor(t,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?n(t.key,r):1,r&&a&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class xi{constructor(t,r,n,a,s){this.key=t,this.value=r,this.color=n??xi.RED,this.left=a??xi.EMPTY,this.right=s??xi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,a,s){return new xi(t??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let a=this;const s=n(t,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(t,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return xi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,a=this;if(r(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(t,a.key)===0){if(a.right.isEmpty())return xi.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,xi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,xi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ir(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ir(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ir(27949);return t+(this.isRed()?0:1)}}xi.EMPTY=null,xi.RED=!0,xi.BLACK=!1;xi.EMPTY=new class{constructor(){this.size=0}get key(){throw Ir(57766)}get value(){throw Ir(16141)}get color(){throw Ir(16727)}get left(){throw Ir(29726)}get right(){throw Ir(36894)}copy(t,r,n,a,s){return this}insert(t,r,n){return new xi(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(t){this.comparator=t,this.data=new ja(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;r(a.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new jI(this.data.getIterator())}getIteratorFrom(t){return new jI(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof Hs)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Hs(this.comparator);return r.data=t,r}}class jI{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(t){this.fields=t,t.sort(bi.comparator)}static empty(){return new ml([])}unionWith(t){let r=new Hs(bi.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new ml(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return ap(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new cO("Invalid base64 string: "+s):s}}(t);return new Ci(r)}static fromUint8Array(t){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(t);return new Ci(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return fn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ci.EMPTY_BYTE_STRING=new Ci("");const vW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rf(e){if(Qn(!!e,39018),typeof e=="string"){let t=0;const r=vW.exec(e);if(Qn(!!r,46558,{timestamp:e}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:cs(e.seconds),nanos:cs(e.nanos)}}function cs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Lf(e){return typeof e=="string"?Ci.fromBase64String(e):Ci.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO="server_timestamp",AO="__type__",dO="__previous_value__",fO="__local_write_time__";function oN(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[AO])==null?void 0:n.stringValue)===uO}function _y(e){const t=e.mapValue.fields[dO];return oN(t)?_y(t):t}function Rx(e){const t=Rf(e.mapValue.fields[fO].timestampValue);return new Ar(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bW{constructor(t,r,n,a,s,i,o,c,A,d){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=A,this.isUsingEmulator=d}}const iw="(default)";class Lx{constructor(t,r){this.projectId=t,this.database=r||iw}static empty(){return new Lx("","")}get isDefaultDatabase(){return this.database===iw}isEqual(t){return t instanceof Lx&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="__type__",wW="__max__",Zv={mapValue:{}},mO="__vector__",ow="value";function Of(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?oN(e)?4:EW(e)?9007199254740991:yW(e)?10:11:Ir(28295,{value:e})}function Yu(e,t){if(e===t)return!0;const r=Of(e);if(r!==Of(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Rx(e).isEqual(Rx(t));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=Rf(a.timestampValue),o=Rf(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,s){return Lf(a.bytesValue).isEqual(Lf(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,s){return cs(a.geoPointValue.latitude)===cs(s.geoPointValue.latitude)&&cs(a.geoPointValue.longitude)===cs(s.geoPointValue.longitude)}(e,t);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return cs(a.integerValue)===cs(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=cs(a.doubleValue),o=cs(s.doubleValue);return i===o?sw(i)===sw(o):isNaN(i)&&isNaN(o)}return!1}(e,t);case 9:return ap(e.arrayValue.values||[],t.arrayValue.values||[],Yu);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},o=s.mapValue.fields||{};if(FI(i)!==FI(o))return!1;for(const c in i)if(i.hasOwnProperty(c)&&(o[c]===void 0||!Yu(i[c],o[c])))return!1;return!0}(e,t);default:return Ir(52216,{left:e})}}function Ox(e,t){return(e.values||[]).find(r=>Yu(r,t))!==void 0}function sp(e,t){if(e===t)return 0;const r=Of(e),n=Of(t);if(r!==n)return fn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return fn(e.booleanValue,t.booleanValue);case 2:return function(s,i){const o=cs(s.integerValue||s.doubleValue),c=cs(i.integerValue||i.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(e,t);case 3:return DI(e.timestampValue,t.timestampValue);case 4:return DI(Rx(e),Rx(t));case 5:return J_(e.stringValue,t.stringValue);case 6:return function(s,i){const o=Lf(s),c=Lf(i);return o.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,i){const o=s.split("/"),c=i.split("/");for(let A=0;A<o.length&&A<c.length;A++){const d=fn(o[A],c[A]);if(d!==0)return d}return fn(o.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,i){const o=fn(cs(s.latitude),cs(i.latitude));return o!==0?o:fn(cs(s.longitude),cs(i.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return RI(e.arrayValue,t.arrayValue);case 10:return function(s,i){var m,p,v,x;const o=s.fields||{},c=i.fields||{},A=(m=o[ow])==null?void 0:m.arrayValue,d=(p=c[ow])==null?void 0:p.arrayValue,h=fn(((v=A==null?void 0:A.values)==null?void 0:v.length)||0,((x=d==null?void 0:d.values)==null?void 0:x.length)||0);return h!==0?h:RI(A,d)}(e.mapValue,t.mapValue);case 11:return function(s,i){if(s===Zv.mapValue&&i===Zv.mapValue)return 0;if(s===Zv.mapValue)return 1;if(i===Zv.mapValue)return-1;const o=s.fields||{},c=Object.keys(o),A=i.fields||{},d=Object.keys(A);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const m=J_(c[h],d[h]);if(m!==0)return m;const p=sp(o[c[h]],A[d[h]]);if(p!==0)return p}return fn(c.length,d.length)}(e.mapValue,t.mapValue);default:throw Ir(23264,{he:r})}}function DI(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return fn(e,t);const r=Rf(e),n=Rf(t),a=fn(r.seconds,n.seconds);return a!==0?a:fn(r.nanos,n.nanos)}function RI(e,t){const r=e.values||[],n=t.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=sp(r[a],n[a]);if(s)return s}return fn(r.length,n.length)}function ip(e){return Z_(e)}function Z_(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=Rf(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return Lf(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return mr.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=Z_(s);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${Z_(r.fields[i])}`;return a+"}"}(e.mapValue):Ir(61005,{value:e})}function p2(e){switch(Of(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=_y(e);return t?16+p2(t):16;case 5:return 2*e.stringValue.length;case 6:return Lf(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+p2(s),0)}(e.arrayValue);case 10:case 11:return function(n){let a=0;return $f(n.fields,(s,i)=>{a+=s.length+p2(i)}),a}(e.mapValue);default:throw Ir(13486,{value:e})}}function LI(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function e4(e){return!!e&&"integerValue"in e}function lN(e){return!!e&&"arrayValue"in e}function OI(e){return!!e&&"nullValue"in e}function UI(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function g2(e){return!!e&&"mapValue"in e}function yW(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[hO])==null?void 0:n.stringValue)===mO}function ox(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return $f(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=ox(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=ox(e.arrayValue.values[r]);return t}return{...e}}function EW(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===wW}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(t){this.value=t}static empty(){return new Lo({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!g2(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=ox(r)}setAll(t){let r=bi.emptyPath(),n={},a=[];t.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=o.popLast()}i?n[o.lastSegment()]=ox(i):a.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(t){const r=this.field(t.popLast());g2(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return Yu(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=r.mapValue.fields[t.get(n)];g2(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(t,r,n){$f(r,(a,s)=>t[a]=s);for(const a of n)delete t[a]}clone(){return new Lo(ox(this.value))}}function pO(e){const t=[];return $f(e.fields,(r,n)=>{const a=new bi([r]);if(g2(n)){const s=pO(n.mapValue).fields;if(s.length===0)t.push(a);else for(const i of s)t.push(a.child(i))}else t.push(a)}),new ml(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(t,r,n,a,s,i,o){this.key=t,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(t){return new $i(t,0,Or.min(),Or.min(),Or.min(),Lo.empty(),0)}static newFoundDocument(t,r,n,a){return new $i(t,1,r,Or.min(),n,a,0)}static newNoDocument(t,r){return new $i(t,2,r,Or.min(),Or.min(),Lo.empty(),0)}static newUnknownDocument(t,r){return new $i(t,3,r,Or.min(),Or.min(),Lo.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Or.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Lo.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Lo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Or.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof $i&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new $i(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(t,r){this.position=t,this.inclusive=r}}function PI(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){const s=t[a],i=e.position[a];if(s.field.isKeyField()?n=mr.comparator(mr.fromName(i.referenceValue),r.key):n=sp(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function MI(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!Yu(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(t,r="asc"){this.field=t,this.dir=r}}function CW(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{}class Bs extends gO{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new SW(t,r,n):r==="array-contains"?new kW(t,n):r==="in"?new TW(t,n):r==="not-in"?new IW(t,n):r==="array-contains-any"?new FW(t,n):new Bs(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new NW(t,n):new BW(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(sp(r,this.value)):r!==null&&Of(this.value)===Of(r)&&this.matchesComparison(sp(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ir(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kc extends gO{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new Kc(t,r)}matches(t){return xO(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xO(e){return e.op==="and"}function vO(e){return _W(e)&&xO(e)}function _W(e){for(const t of e.filters)if(t instanceof Kc)return!1;return!0}function t4(e){if(e instanceof Bs)return e.field.canonicalString()+e.op.toString()+ip(e.value);if(vO(e))return e.filters.map(t=>t4(t)).join(",");{const t=e.filters.map(r=>t4(r)).join(",");return`${e.op}(${t})`}}function bO(e,t){return e instanceof Bs?function(n,a){return a instanceof Bs&&n.op===a.op&&n.field.isEqual(a.field)&&Yu(n.value,a.value)}(e,t):e instanceof Kc?function(n,a){return a instanceof Kc&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,o)=>s&&bO(i,a.filters[o]),!0):!1}(e,t):void Ir(19439)}function wO(e){return e instanceof Bs?function(r){return`${r.field.canonicalString()} ${r.op} ${ip(r.value)}`}(e):e instanceof Kc?function(r){return r.op.toString()+" {"+r.getFilters().map(wO).join(" ,")+"}"}(e):"Filter"}class SW extends Bs{constructor(t,r,n){super(t,r,n),this.key=mr.fromName(n.referenceValue)}matches(t){const r=mr.comparator(t.key,this.key);return this.matchesComparison(r)}}class NW extends Bs{constructor(t,r){super(t,"in",r),this.keys=yO("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class BW extends Bs{constructor(t,r){super(t,"not-in",r),this.keys=yO("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function yO(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(n=>mr.fromName(n.referenceValue))}class kW extends Bs{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return lN(r)&&Ox(r.arrayValue,this.value)}}class TW extends Bs{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Ox(this.value.arrayValue,r)}}class IW extends Bs{constructor(t,r){super(t,"not-in",r)}matches(t){if(Ox(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Ox(this.value.arrayValue,r)}}class FW extends Bs{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!lN(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Ox(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jW{constructor(t,r=null,n=[],a=[],s=null,i=null,o=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=o,this.Te=null}}function QI(e,t=null,r=[],n=[],a=null,s=null,i=null){return new jW(e,t,r,n,a,s,i)}function cN(e){const t=Pr(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>t4(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),Cy(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>ip(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>ip(n)).join(",")),t.Te=r}return t.Te}function uN(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!CW(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!bO(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!MI(e.startAt,t.startAt)&&MI(e.endAt,t.endAt)}function r4(e){return mr.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(t,r=null,n=[],a=[],s=null,i="F",o=null,c=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function DW(e,t,r,n,a,s,i,o){return new Sp(e,t,r,n,a,s,i,o)}function Sy(e){return new Sp(e)}function HI(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function EO(e){return e.collectionGroup!==null}function lx(e){const t=Pr(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),r.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new Hs(bi.comparator);return i.filters.forEach(c=>{c.getFlattenedFilters().forEach(A=>{A.isInequality()&&(o=o.add(A.field))})}),o})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Ux(s,n))}),r.has(bi.keyField().canonicalString())||t.Ie.push(new Ux(bi.keyField(),n))}return t.Ie}function zu(e){const t=Pr(e);return t.Ee||(t.Ee=RW(t,lx(e))),t.Ee}function RW(e,t){if(e.limitType==="F")return QI(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new Ux(a.field,s)});const r=e.endAt?new lw(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new lw(e.startAt.position,e.startAt.inclusive):null;return QI(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function n4(e,t){const r=e.filters.concat([t]);return new Sp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function cw(e,t,r){return new Sp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function Ny(e,t){return uN(zu(e),zu(t))&&e.limitType===t.limitType}function CO(e){return`${cN(zu(e))}|lt:${e.limitType}`}function bm(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>wO(a)).join(", ")}]`),Cy(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>ip(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>ip(a)).join(",")),`Target(${n})`}(zu(e))}; limitType=${e.limitType})`}function By(e,t){return t.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):mr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(e,t)&&function(n,a){for(const s of lx(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(e,t)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(e,t)&&function(n,a){return!(n.startAt&&!function(i,o,c){const A=PI(i,o,c);return i.inclusive?A<=0:A<0}(n.startAt,lx(n),a)||n.endAt&&!function(i,o,c){const A=PI(i,o,c);return i.inclusive?A>=0:A>0}(n.endAt,lx(n),a))}(e,t)}function LW(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function _O(e){return(t,r)=>{let n=!1;for(const a of lx(e)){const s=OW(a,t,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function OW(e,t,r){const n=e.field.isKeyField()?mr.comparator(t.key,r.key):function(s,i,o){const c=i.data.field(s),A=o.data.field(s);return c!==null&&A!==null?sp(c,A):Ir(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return Ir(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],t))return void(a[s]=[t,r]);a.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){$f(this.inner,(r,n)=>{for(const[a,s]of n)t(a,s)})}isEmpty(){return lO(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UW=new ja(mr.comparator);function ed(){return UW}const SO=new ja(mr.comparator);function Qg(...e){let t=SO;for(const r of e)t=t.insert(r.key,r);return t}function NO(e){let t=SO;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function jh(){return cx()}function BO(){return cx()}function cx(){return new h0(e=>e.toString(),(e,t)=>e.isEqual(t))}const PW=new ja(mr.comparator),MW=new Hs(mr.comparator);function hn(...e){let t=MW;for(const r of e)t=t.add(r);return t}const QW=new Hs(fn);function HW(){return QW}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sw(t)?"-0":t}}function kO(e){return{integerValue:""+e}}function VW(e,t){return pW(t)?kO(t):AN(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(){this._=void 0}}function zW(e,t,r){return e instanceof Px?function(a,s){const i={fields:{[AO]:{stringValue:uO},[fO]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&oN(s)&&(s=_y(s)),s&&(i.fields[dO]=s),{mapValue:i}}(r,t):e instanceof op?IO(e,t):e instanceof Mx?FO(e,t):function(a,s){const i=TO(a,s),o=VI(i)+VI(a.Ae);return e4(i)&&e4(a.Ae)?kO(o):AN(a.serializer,o)}(e,t)}function GW(e,t,r){return e instanceof op?IO(e,t):e instanceof Mx?FO(e,t):r}function TO(e,t){return e instanceof uw?function(n){return e4(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class Px extends ky{}class op extends ky{constructor(t){super(),this.elements=t}}function IO(e,t){const r=jO(t);for(const n of e.elements)r.some(a=>Yu(a,n))||r.push(n);return{arrayValue:{values:r}}}class Mx extends ky{constructor(t){super(),this.elements=t}}function FO(e,t){let r=jO(t);for(const n of e.elements)r=r.filter(a=>!Yu(a,n));return{arrayValue:{values:r}}}class uw extends ky{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function VI(e){return cs(e.integerValue||e.doubleValue)}function jO(e){return lN(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(t,r){this.field=t,this.transform=r}}function KW(e,t){return e.field.isEqual(t.field)&&function(n,a){return n instanceof op&&a instanceof op||n instanceof Mx&&a instanceof Mx?ap(n.elements,a.elements,Yu):n instanceof uw&&a instanceof uw?Yu(n.Ae,a.Ae):n instanceof Px&&a instanceof Px}(e.transform,t.transform)}class qW{constructor(t,r){this.version=t,this.transformResults=r}}class mo{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new mo}static exists(t){return new mo(void 0,t)}static updateTime(t){return new mo(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function x2(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Ty{}function RO(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Iy(e.key,mo.none()):new _1(e.key,e.data,mo.none());{const r=e.data,n=Lo.empty();let a=new Hs(bi.comparator);for(let s of t.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new Wf(e.key,n,new ml(a.toArray()),mo.none())}}function $W(e,t,r){e instanceof _1?function(a,s,i){const o=a.value.clone(),c=GI(a.fieldTransforms,s,i.transformResults);o.setAll(c),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(e,t,r):e instanceof Wf?function(a,s,i){if(!x2(a.precondition,s))return void s.convertToUnknownDocument(i.version);const o=GI(a.fieldTransforms,s,i.transformResults),c=s.data;c.setAll(LO(a)),c.setAll(o),s.convertToFoundDocument(i.version,c).setHasCommittedMutations()}(e,t,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,t,r)}function ux(e,t,r,n){return e instanceof _1?function(s,i,o,c){if(!x2(s.precondition,i))return o;const A=s.value.clone(),d=KI(s.fieldTransforms,c,i);return A.setAll(d),i.convertToFoundDocument(i.version,A).setHasLocalMutations(),null}(e,t,r,n):e instanceof Wf?function(s,i,o,c){if(!x2(s.precondition,i))return o;const A=KI(s.fieldTransforms,c,i),d=i.data;return d.setAll(LO(s)),d.setAll(A),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(e,t,r,n):function(s,i,o){return x2(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(e,t,r)}function WW(e,t){let r=null;for(const n of e.fieldTransforms){const a=t.data.field(n.field),s=TO(n.transform,a||null);s!=null&&(r===null&&(r=Lo.empty()),r.set(n.field,s))}return r||null}function zI(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&ap(n,a,(s,i)=>KW(s,i))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class _1 extends Ty{constructor(t,r,n,a=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Wf extends Ty{constructor(t,r,n,a,s=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function LO(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function GI(e,t,r){const n=new Map;Qn(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let a=0;a<r.length;a++){const s=e[a],i=s.transform,o=t.data.field(s.field);n.set(s.field,GW(i,o,r[a]))}return n}function KI(e,t,r){const n=new Map;for(const a of e){const s=a.transform,i=r.data.field(a.field);n.set(a.field,zW(s,i,t))}return n}class Iy extends Ty{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XW extends Ty{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YW{constructor(t,r,n,a){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(t.key)&&$W(s,t,n[a])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=ux(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=ux(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=BO();return this.mutations.forEach(a=>{const s=t.get(a.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=r.has(a.key)?null:o;const c=RO(i,o);c!==null&&n.set(a.key,c),i.isValidDocument()||i.convertToNoDocument(Or.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),hn())}isEqual(t){return this.batchId===t.batchId&&ap(this.mutations,t.mutations,(r,n)=>zI(r,n))&&ap(this.baseMutations,t.baseMutations,(r,n)=>zI(r,n))}}class dN{constructor(t,r,n,a){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(t,r,n){Qn(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let a=function(){return PW}();const s=t.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new dN(t,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JW{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZW{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Es,yn;function eX(e){switch(e){case xt.OK:return Ir(64938);case xt.CANCELLED:case xt.UNKNOWN:case xt.DEADLINE_EXCEEDED:case xt.RESOURCE_EXHAUSTED:case xt.INTERNAL:case xt.UNAVAILABLE:case xt.UNAUTHENTICATED:return!1;case xt.INVALID_ARGUMENT:case xt.NOT_FOUND:case xt.ALREADY_EXISTS:case xt.PERMISSION_DENIED:case xt.FAILED_PRECONDITION:case xt.ABORTED:case xt.OUT_OF_RANGE:case xt.UNIMPLEMENTED:case xt.DATA_LOSS:return!0;default:return Ir(15467,{code:e})}}function OO(e){if(e===void 0)return ZA("GRPC error has no .code"),xt.UNKNOWN;switch(e){case Es.OK:return xt.OK;case Es.CANCELLED:return xt.CANCELLED;case Es.UNKNOWN:return xt.UNKNOWN;case Es.DEADLINE_EXCEEDED:return xt.DEADLINE_EXCEEDED;case Es.RESOURCE_EXHAUSTED:return xt.RESOURCE_EXHAUSTED;case Es.INTERNAL:return xt.INTERNAL;case Es.UNAVAILABLE:return xt.UNAVAILABLE;case Es.UNAUTHENTICATED:return xt.UNAUTHENTICATED;case Es.INVALID_ARGUMENT:return xt.INVALID_ARGUMENT;case Es.NOT_FOUND:return xt.NOT_FOUND;case Es.ALREADY_EXISTS:return xt.ALREADY_EXISTS;case Es.PERMISSION_DENIED:return xt.PERMISSION_DENIED;case Es.FAILED_PRECONDITION:return xt.FAILED_PRECONDITION;case Es.ABORTED:return xt.ABORTED;case Es.OUT_OF_RANGE:return xt.OUT_OF_RANGE;case Es.UNIMPLEMENTED:return xt.UNIMPLEMENTED;case Es.DATA_LOSS:return xt.DATA_LOSS;default:return Ir(39323,{code:e})}}(yn=Es||(Es={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tX(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rX=new Ef([4294967295,4294967295],0);function qI(e){const t=tX().encode(e),r=new YL;return r.update(t),new Uint8Array(r.digest())}function $I(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ef([r,n],0),new Ef([a,s],0)]}class fN{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Hg(`Invalid padding: ${r}`);if(n<0)throw new Hg(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Hg(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new Hg(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=Ef.fromNumber(this.ge)}ye(t,r,n){let a=t.add(r.multiply(Ef.fromNumber(n)));return a.compare(rX)===1&&(a=new Ef([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=qI(t),[n,a]=$I(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);if(!this.we(i))return!1}return!0}static create(t,r,n){const a=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),i=new fN(s,a,r);return n.forEach(o=>i.insert(o)),i}insert(t){if(this.ge===0)return;const r=qI(t),[n,a]=$I(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);this.Se(i)}}Se(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class Hg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(t,r,n,a,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const a=new Map;return a.set(t,S1.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new Fy(Or.min(),a,new ja(fn),ed(),hn())}}class S1{constructor(t,r,n,a,s){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new S1(n,r,hn(),hn(),hn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(t,r,n,a){this.be=t,this.removedTargetIds=r,this.key=n,this.De=a}}class UO{constructor(t,r){this.targetId=t,this.Ce=r}}class PO{constructor(t,r,n=Ci.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=a}}class WI{constructor(){this.ve=0,this.Fe=XI(),this.Me=Ci.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=hn(),r=hn(),n=hn();return this.Fe.forEach((a,s)=>{switch(s){case 0:t=t.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Ir(38017,{changeType:s})}}),new S1(this.Me,this.xe,t,r,n)}qe(){this.Oe=!1,this.Fe=XI()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class nX{constructor(t){this.Ge=t,this.ze=new Map,this.je=ed(),this.Je=eb(),this.He=eb(),this.Ye=new ja(fn)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const n=this.nt(r);switch(t.state){case 0:this.rt(r)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(t.resumeToken));break;default:Ir(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(t){const r=t.targetId,n=t.Ce.count,a=this.ot(r);if(a){const s=a.target;if(r4(s))if(n===0){const i=new mr(s.path);this.et(r,i,$i.newNoDocument(i,Or.min()))}else Qn(n===1,20013,{expectedCount:n});else{const i=this._t(r);if(i!==n){const o=this.ut(t),c=o?this.ct(o,t,i):1;if(c!==0){this.it(r);const A=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,A)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,o;try{i=Lf(n).toUint8Array()}catch(c){if(c instanceof cO)return np("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new fN(i,a,s)}catch(c){return np(c instanceof Hg?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(t,r,n){return r.Ce.count===n-this.Pt(t,r.targetId)?0:2}Pt(t,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;t.mightContain(o)||(this.et(r,s,null),a++)}),a}Tt(t){const r=new Map;this.ze.forEach((s,i)=>{const o=this.ot(i);if(o){if(s.current&&r4(o.target)){const c=new mr(o.target.path);this.It(c).has(i)||this.Et(i,c)||this.et(i,c,$i.newNoDocument(c,t))}s.Be&&(r.set(i,s.ke()),s.qe())}});let n=hn();this.He.forEach((s,i)=>{let o=!0;i.forEachWhile(c=>{const A=this.ot(c);return!A||A.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,i)=>i.setReadTime(t));const a=new Fy(t,r,this.Ye,this.je,n);return this.je=ed(),this.Je=eb(),this.He=eb(),this.Ye=new ja(fn),a}Xe(t,r){if(!this.rt(t))return;const n=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,n){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),n&&(this.je=this.je.insert(r,n))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new WI,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new Hs(fn),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new Hs(fn),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||rr("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new WI),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function eb(){return new ja(mr.comparator)}function XI(){return new ja(mr.comparator)}const aX={asc:"ASCENDING",desc:"DESCENDING"},sX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iX={and:"AND",or:"OR"};class oX{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function a4(e,t){return e.useProto3Json||Cy(t)?t:{value:t}}function Aw(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function MO(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function lX(e,t){return Aw(e,t.toTimestamp())}function Gu(e){return Qn(!!e,49232),Or.fromTimestamp(function(r){const n=Rf(r);return new Ar(n.seconds,n.nanos)}(e))}function hN(e,t){return s4(e,t).canonicalString()}function s4(e,t){const r=function(a){return new da(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?r:r.child(t)}function QO(e){const t=da.fromString(e);return Qn(KO(t),10190,{key:t.toString()}),t}function i4(e,t){return hN(e.databaseId,t.path)}function a5(e,t){const r=QO(t);if(r.get(1)!==e.databaseId.projectId)throw new Wt(xt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new Wt(xt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new mr(VO(r))}function HO(e,t){return hN(e.databaseId,t)}function cX(e){const t=QO(e);return t.length===4?da.emptyPath():VO(t)}function o4(e){return new da(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function VO(e){return Qn(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function YI(e,t,r){return{name:i4(e,t),fields:r.value.mapValue.fields}}function uX(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(A){return A==="NO_CHANGE"?0:A==="ADD"?1:A==="REMOVE"?2:A==="CURRENT"?3:A==="RESET"?4:Ir(39313,{state:A})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(A,d){return A.useProto3Json?(Qn(d===void 0||typeof d=="string",58123),Ci.fromBase64String(d||"")):(Qn(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Ci.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&function(A){const d=A.code===void 0?xt.UNKNOWN:OO(A.code);return new Wt(d,A.message||"")}(i);r=new PO(n,a,s,o||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=a5(e,n.document.name),s=Gu(n.document.updateTime),i=n.document.createTime?Gu(n.document.createTime):Or.min(),o=new Lo({mapValue:{fields:n.document.fields}}),c=$i.newFoundDocument(a,s,i,o),A=n.targetIds||[],d=n.removedTargetIds||[];r=new v2(A,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=a5(e,n.document),s=n.readTime?Gu(n.readTime):Or.min(),i=$i.newNoDocument(a,s),o=n.removedTargetIds||[];r=new v2([],o,i.key,i)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=a5(e,n.document),s=n.removedTargetIds||[];r=new v2([],s,a,null)}else{if(!("filter"in t))return Ir(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new ZW(a,s),o=n.targetId;r=new UO(o,i)}}return r}function AX(e,t){let r;if(t instanceof _1)r={update:YI(e,t.key,t.value)};else if(t instanceof Iy)r={delete:i4(e,t.key)};else if(t instanceof Wf)r={update:YI(e,t.key,t.data),updateMask:bX(t.fieldMask)};else{if(!(t instanceof XW))return Ir(16599,{Vt:t.type});r={verify:i4(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(s,i){const o=i.transform;if(o instanceof Px)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof op)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Mx)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof uw)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Ir(20930,{transform:i.transform})}(0,n))),t.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:lX(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ir(27497)}(e,t.precondition)),r}function dX(e,t){return e&&e.length>0?(Qn(t!==void 0,14353),e.map(r=>function(a,s){let i=a.updateTime?Gu(a.updateTime):Gu(s);return i.isEqual(Or.min())&&(i=Gu(s)),new qW(i,a.transformResults||[])}(r,t))):[]}function fX(e,t){return{documents:[HO(e,t.path)]}}function hX(e,t){const r={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=HO(e,a);const s=function(A){if(A.length!==0)return GO(Kc.create(A,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const i=function(A){if(A.length!==0)return A.map(d=>function(m){return{field:wm(m.field),direction:gX(m.dir)}}(d))}(t.orderBy);i&&(r.structuredQuery.orderBy=i);const o=a4(e,t.limit);return o!==null&&(r.structuredQuery.limit=o),t.startAt&&(r.structuredQuery.startAt=function(A){return{before:A.inclusive,values:A.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(A){return{before:!A.inclusive,values:A.position}}(t.endAt)),{ft:r,parent:a}}function mX(e){let t=cX(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Qn(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:t=t.child(d.collectionId)}let s=[];r.where&&(s=function(h){const m=zO(h);return m instanceof Kc&&vO(m)?m.getFilters():[m]}(r.where));let i=[];r.orderBy&&(i=function(h){return h.map(m=>function(v){return new Ux(ym(v.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m))}(r.orderBy));let o=null;r.limit&&(o=function(h){let m;return m=typeof h=="object"?h.value:h,Cy(m)?null:m}(r.limit));let c=null;r.startAt&&(c=function(h){const m=!!h.before,p=h.values||[];return new lw(p,m)}(r.startAt));let A=null;return r.endAt&&(A=function(h){const m=!h.before,p=h.values||[];return new lw(p,m)}(r.endAt)),DW(t,a,i,s,o,"F",c,A)}function pX(e,t){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ir(28987,{purpose:a})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function zO(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=ym(r.unaryFilter.field);return Bs.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=ym(r.unaryFilter.field);return Bs.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ym(r.unaryFilter.field);return Bs.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ym(r.unaryFilter.field);return Bs.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ir(61313);default:return Ir(60726)}}(e):e.fieldFilter!==void 0?function(r){return Bs.create(ym(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ir(58110);default:return Ir(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return Kc.create(r.compositeFilter.filters.map(n=>zO(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ir(1026)}}(r.compositeFilter.op))}(e):Ir(30097,{filter:e})}function gX(e){return aX[e]}function xX(e){return sX[e]}function vX(e){return iX[e]}function wm(e){return{fieldPath:e.canonicalString()}}function ym(e){return bi.fromServerFormat(e.fieldPath)}function GO(e){return e instanceof Bs?function(r){if(r.op==="=="){if(UI(r.value))return{unaryFilter:{field:wm(r.field),op:"IS_NAN"}};if(OI(r.value))return{unaryFilter:{field:wm(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(UI(r.value))return{unaryFilter:{field:wm(r.field),op:"IS_NOT_NAN"}};if(OI(r.value))return{unaryFilter:{field:wm(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wm(r.field),op:xX(r.op),value:r.value}}}(e):e instanceof Kc?function(r){const n=r.getFilters().map(a=>GO(a));return n.length===1?n[0]:{compositeFilter:{op:vX(r.op),filters:n}}}(e):Ir(54877,{filter:e})}function bX(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function KO(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(t,r,n,a,s=Or.min(),i=Or.min(),o=Ci.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(t){return new ff(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new ff(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ff(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ff(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wX{constructor(t){this.yt=t}}function yX(e){const t=mX({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?cw(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EX{constructor(){this.Cn=new CX}addToCollectionParentIndex(t,r){return this.Cn.add(r),_t.resolve()}getCollectionParents(t,r){return _t.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return _t.resolve()}deleteFieldIndex(t,r){return _t.resolve()}deleteAllFieldIndexes(t){return _t.resolve()}createTargetIndexes(t,r){return _t.resolve()}getDocumentsMatchingTarget(t,r){return _t.resolve(null)}getIndexType(t,r){return _t.resolve(0)}getFieldIndexes(t,r){return _t.resolve([])}getNextCollectionGroupToUpdate(t){return _t.resolve(null)}getMinOffset(t,r){return _t.resolve(Df.min())}getMinOffsetFromCollectionGroup(t,r){return _t.resolve(Df.min())}updateCollectionGroup(t,r,n){return _t.resolve()}updateIndexEntries(t,r){return _t.resolve()}}class CX{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r]||new Hs(da.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(t){return(this.index[t]||new Hs(da.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qO=41943040;class Do{static withCacheSize(t){return new Do(t,Do.DEFAULT_COLLECTION_PERCENTILE,Do.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Do.DEFAULT_COLLECTION_PERCENTILE=10,Do.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Do.DEFAULT=new Do(qO,Do.DEFAULT_COLLECTION_PERCENTILE,Do.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Do.DISABLED=new Do(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new lp(0)}static cr(){return new lp(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="LruGarbageCollector",_X=1048576;function eF([e,t],[r,n]){const a=fn(e,r);return a===0?fn(t,n):a}class SX{constructor(t){this.Ir=t,this.buffer=new Hs(eF),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();eF(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class NX{constructor(t,r,n){this.garbageCollector=t,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){rr(ZI,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){_p(r)?rr(ZI,"Ignoring IndexedDB error during garbage collection: ",r):await Cp(r)}await this.Vr(3e5)})}}class BX{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(n=>Math.floor(r/100*n))}nthSequenceNumber(t,r){if(r===0)return _t.resolve(Ey.ce);const n=new SX(r);return this.mr.forEachTarget(t,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(t,r,n){return this.mr.removeTargets(t,r,n)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(rr("LruGarbageCollector","Garbage collection skipped; disabled"),_t.resolve(JI)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(rr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JI):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let n,a,s,i,o,c,A;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(rr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),a=this.params.maximumSequenceNumbersToCollect):a=h,i=Date.now(),this.nthSequenceNumber(t,a))).next(h=>(n=h,o=Date.now(),this.removeTargets(t,n,r))).next(h=>(s=h,c=Date.now(),this.removeOrphanedDocuments(t,n))).next(h=>(A=Date.now(),vm()<=dn.DEBUG&&rr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(o-i)+`ms
	Removed ${s} targets in `+(c-o)+`ms
	Removed ${h} documents in `+(A-c)+`ms
Total Duration: ${A-d}ms`),_t.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:h})))}}function kX(e,t){return new BX(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TX{constructor(){this.changes=new h0(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,$i.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?_t.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IX{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FX{constructor(t,r,n,a){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(t,r))).next(a=>(n!==null&&ux(n.mutation,a,ml.empty(),Ar.now()),a))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,hn()).next(()=>n))}getLocalViewOfDocuments(t,r,n=hn()){const a=jh();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,n).next(s=>{let i=Qg();return s.forEach((o,c)=>{i=i.insert(o,c.overlayedDocument)}),i}))}getOverlayedDocuments(t,r){const n=jh();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,hn()))}populateOverlays(t,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(t,a).next(s=>{s.forEach((i,o)=>{r.set(i,o)})})}computeViews(t,r,n,a){let s=ed();const i=cx(),o=function(){return cx()}();return r.forEach((c,A)=>{const d=n.get(A.key);a.has(A.key)&&(d===void 0||d.mutation instanceof Wf)?s=s.insert(A.key,A):d!==void 0?(i.set(A.key,d.mutation.getFieldMask()),ux(d.mutation,A,d.mutation.getFieldMask(),Ar.now())):i.set(A.key,ml.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((A,d)=>i.set(A,d)),r.forEach((A,d)=>o.set(A,new IX(d,i.get(A)??null))),o))}recalculateAndSaveOverlays(t,r){const n=cx();let a=new ja((i,o)=>i-o),s=hn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(i=>{for(const o of i)o.keys().forEach(c=>{const A=r.get(c);if(A===null)return;let d=n.get(c)||ml.empty();d=o.applyToLocalView(A,d),n.set(c,d);const h=(a.get(o.batchId)||hn()).add(c);a=a.insert(o.batchId,h)})}).next(()=>{const i=[],o=a.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),A=c.key,d=c.value,h=BO();d.forEach(m=>{if(!s.has(m)){const p=RO(r.get(m),n.get(m));p!==null&&h.set(m,p),s=s.add(m)}}),i.push(this.documentOverlayCache.saveOverlays(t,A,h))}return _t.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,a){return function(i){return mr.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):EO(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,a):this.getDocumentsMatchingCollectionQuery(t,r,n,a)}getNextDocuments(t,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,a-s.size):_t.resolve(jh());let o=Dx,c=s;return i.next(A=>_t.forEach(A,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(d)?_t.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(t,A,s)).next(()=>this.computeViews(t,c,A,hn())).next(d=>({batchId:o,changes:NO(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new mr(r)).next(n=>{let a=Qg();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(t,r,n,a){const s=r.collectionGroup;let i=Qg();return this.indexManager.getCollectionParents(t,s).next(o=>_t.forEach(o,c=>{const A=function(h,m){return new Sp(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,A,n,a).next(d=>{d.forEach((h,m)=>{i=i.insert(h,m)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(t,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,s,a))).next(i=>{s.forEach((c,A)=>{const d=A.getKey();i.get(d)===null&&(i=i.insert(d,$i.newInvalidDocument(d)))});let o=Qg();return i.forEach((c,A)=>{const d=s.get(c);d!==void 0&&ux(d.mutation,A,ml.empty(),Ar.now()),By(r,A)&&(o=o.insert(c,A))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jX{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return _t.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:Gu(a.createTime)}}(r)),_t.resolve()}getNamedQuery(t,r){return _t.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(a){return{name:a.name,query:yX(a.bundledQuery),readTime:Gu(a.readTime)}}(r)),_t.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DX{constructor(){this.overlays=new ja(mr.comparator),this.qr=new Map}getOverlay(t,r){return _t.resolve(this.overlays.get(r))}getOverlays(t,r){const n=jh();return _t.forEach(r,a=>this.getOverlay(t,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((a,s)=>{this.St(t,r,s)}),_t.resolve()}removeOverlaysForBatchId(t,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),_t.resolve()}getOverlaysForCollection(t,r,n){const a=jh(),s=r.length+1,i=new mr(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const c=o.getNext().value,A=c.getKey();if(!r.isPrefixOf(A.path))break;A.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return _t.resolve(a)}getOverlaysForCollectionGroup(t,r,n,a){let s=new ja((A,d)=>A-d);const i=this.overlays.getIterator();for(;i.hasNext();){const A=i.getNext().value;if(A.getKey().getCollectionGroup()===r&&A.largestBatchId>n){let d=s.get(A.largestBatchId);d===null&&(d=jh(),s=s.insert(A.largestBatchId,d)),d.set(A.getKey(),A)}}const o=jh(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((A,d)=>o.set(A,d)),!(o.size()>=a)););return _t.resolve(o)}St(t,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new JW(r,n));let s=this.qr.get(r);s===void 0&&(s=hn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RX{constructor(){this.sessionToken=Ci.EMPTY_BYTE_STRING}getSessionToken(t){return _t.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,_t.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(){this.Qr=new Hs(ti.$r),this.Ur=new Hs(ti.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const n=new ti(t,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Gr(new ti(t,r))}zr(t,r){t.forEach(n=>this.removeReference(n,r))}jr(t){const r=new mr(new da([])),n=new ti(r,t),a=new ti(r,t+1),s=[];return this.Ur.forEachInRange([n,a],i=>{this.Gr(i),s.push(i.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new mr(new da([])),n=new ti(r,t),a=new ti(r,t+1);let s=hn();return this.Ur.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(t){const r=new ti(t,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class ti{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return mr.comparator(t.key,r.key)||fn(t.Yr,r.Yr)}static Kr(t,r){return fn(t.Yr,r.Yr)||mr.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LX{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Hs(ti.$r)}checkEmpty(t){return _t.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new YW(s,r,n,a);this.mutationQueue.push(i);for(const o of a)this.Zr=this.Zr.add(new ti(o.key,s)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return _t.resolve(i)}lookupMutationBatch(t,r){return _t.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return _t.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return _t.resolve(this.mutationQueue.length===0?iN:this.tr-1)}getAllMutationBatches(t){return _t.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new ti(r,0),a=new ti(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],i=>{const o=this.Xr(i.Yr);s.push(o)}),_t.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new Hs(fn);return r.forEach(a=>{const s=new ti(a,0),i=new ti(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,i],o=>{n=n.add(o.Yr)})}),_t.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1;let s=n;mr.isDocumentKey(s)||(s=s.child(""));const i=new ti(new mr(s),0);let o=new Hs(fn);return this.Zr.forEachWhile(c=>{const A=c.key.path;return!!n.isPrefixOf(A)&&(A.length===a&&(o=o.add(c.Yr)),!0)},i),_t.resolve(this.ti(o))}ti(t){const r=[];return t.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(t,r){Qn(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return _t.forEach(r.mutations,a=>{const s=new ti(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,r){const n=new ti(r,0),a=this.Zr.firstAfterOrEqual(n);return _t.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,_t.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OX{constructor(t){this.ri=t,this.docs=function(){return new ja(mr.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return _t.resolve(n?n.document.mutableCopy():$i.newInvalidDocument(r))}getEntries(t,r){let n=ed();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():$i.newInvalidDocument(a))}),_t.resolve(n)}getDocumentsMatchingQuery(t,r,n,a){let s=ed();const i=r.path,o=new mr(i.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:A,value:{document:d}}=c.getNext();if(!i.isPrefixOf(A.path))break;A.path.length>i.length+1||dW(AW(d),n)<=0||(a.has(d.key)||By(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return _t.resolve(s)}getAllFromCollectionGroup(t,r,n,a){Ir(9500)}ii(t,r){return _t.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new UX(this)}getSize(t){return _t.resolve(this.size)}}class UX extends TX{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(n)}),_t.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PX{constructor(t){this.persistence=t,this.si=new h0(r=>cN(r),uN),this.lastRemoteSnapshotVersion=Or.min(),this.highestTargetId=0,this.oi=0,this._i=new mN,this.targetCount=0,this.ai=lp.ur()}forEachTarget(t,r){return this.si.forEach((n,a)=>r(a)),_t.resolve()}getLastRemoteSnapshotVersion(t){return _t.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return _t.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),_t.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),_t.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new lp(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,_t.resolve()}updateTargetData(t,r){return this.Pr(r),_t.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,_t.resolve()}removeTargets(t,r,n){let a=0;const s=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),a++)}),_t.waitFor(s).next(()=>a)}getTargetCount(t){return _t.resolve(this.targetCount)}getTargetData(t,r){const n=this.si.get(r)||null;return _t.resolve(n)}addMatchingKeys(t,r,n){return this._i.Wr(r,n),_t.resolve()}removeMatchingKeys(t,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(t,i))}),_t.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),_t.resolve()}getMatchingKeysForTargetId(t,r){const n=this._i.Hr(r);return _t.resolve(n)}containsKey(t,r){return _t.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(t,r){this.ui={},this.overlays={},this.ci=new Ey(0),this.li=!1,this.li=!0,this.hi=new RX,this.referenceDelegate=t(this),this.Pi=new PX(this),this.indexManager=new EX,this.remoteDocumentCache=function(a){return new OX(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new wX(r),this.Ii=new jX(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new DX,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.ui[t.toKey()];return n||(n=new LX(r,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,n){rr("MemoryPersistence","Starting transaction:",t);const a=new MX(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(t,r){return _t.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,r)))}}class MX extends hW{constructor(t){super(),this.currentSequenceNumber=t}}class pN{constructor(t){this.persistence=t,this.Ri=new mN,this.Vi=null}static mi(t){return new pN(t)}get fi(){if(this.Vi)return this.Vi;throw Ir(60996)}addReference(t,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),_t.resolve()}removeReference(t,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),_t.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),_t.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _t.forEach(this.fi,n=>{const a=mr.fromPath(n);return this.gi(t,a).next(s=>{s||r.removeEntry(a,Or.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return _t.or([()=>_t.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class dw{constructor(t,r){this.persistence=t,this.pi=new h0(n=>gW(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=kX(this,r)}static mi(t,r){return new dw(t,r)}Ei(){}di(t){return _t.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(n=>r.next(a=>n+a))}wr(t){let r=0;return this.pr(t,n=>{r++}).next(()=>r)}pr(t,r){return _t.forEach(this.pi,(n,a)=>this.br(t,n,a).next(s=>s?_t.resolve():r(a)))}removeTargets(t,r,n){return this.persistence.getTargetCache().removeTargets(t,r,n)}removeOrphanedDocuments(t,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(t,i=>this.br(t,i,r).next(o=>{o||(n++,s.removeEntry(i,Or.min()))})).next(()=>s.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),_t.resolve()}removeTarget(t,r){const n=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),_t.resolve()}removeReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),_t.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),_t.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=p2(t.data.value)),r}br(t,r,n){return _t.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const a=this.pi.get(r);return _t.resolve(a!==void 0&&a>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(t,r,n,a){this.targetId=t,this.fromCache=r,this.Es=n,this.ds=a}static As(t,r){let n=hn(),a=hn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new gN(t,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QX{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HX{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return gG()?8:mW(eo())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,n,a){const s={result:null};return this.ys(t,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ws(t,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new QX;return this.Ss(t,r,i).next(o=>{if(s.result=o,this.Vs)return this.bs(t,r,i,o.size)})}).next(()=>s.result)}bs(t,r,n,a){return n.documentReadCount<this.fs?(vm()<=dn.DEBUG&&rr("QueryEngine","SDK will not create cache indexes for query:",bm(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),_t.resolve()):(vm()<=dn.DEBUG&&rr("QueryEngine","Query:",bm(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(vm()<=dn.DEBUG&&rr("QueryEngine","The SDK decides to create cache indexes for query:",bm(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,zu(r))):_t.resolve())}ys(t,r){if(HI(r))return _t.resolve(null);let n=zu(r);return this.indexManager.getIndexType(t,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=cw(r,null,"F"),n=zu(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const i=hn(...s);return this.ps.getDocuments(t,i).next(o=>this.indexManager.getMinOffset(t,n).next(c=>{const A=this.Ds(r,o);return this.Cs(r,A,i,c.readTime)?this.ys(t,cw(r,null,"F")):this.vs(t,A,r,c)}))})))}ws(t,r,n,a){return HI(r)||a.isEqual(Or.min())?_t.resolve(null):this.ps.getDocuments(t,n).next(s=>{const i=this.Ds(r,s);return this.Cs(r,i,n,a)?_t.resolve(null):(vm()<=dn.DEBUG&&rr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),bm(r)),this.vs(t,i,r,uW(a,Dx)).next(o=>o))})}Ds(t,r){let n=new Hs(_O(t));return r.forEach((a,s)=>{By(t,s)&&(n=n.add(s))}),n}Cs(t,r,n,a){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(t,r,n){return vm()<=dn.DEBUG&&rr("QueryEngine","Using full collection scan to execute query:",bm(r)),this.ps.getDocumentsMatchingQuery(t,r,Df.min(),n)}vs(t,r,n,a){return this.ps.getDocumentsMatchingQuery(t,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="LocalStore",VX=3e8;class zX{constructor(t,r,n,a){this.persistence=t,this.Fs=r,this.serializer=a,this.Ms=new ja(fn),this.xs=new h0(s=>cN(s),uN),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new FX(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function GX(e,t,r,n){return new zX(e,t,r,n)}async function WO(e,t){const r=Pr(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(t),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],o=[];let c=hn();for(const A of a){i.push(A.batchId);for(const d of A.mutations)c=c.add(d.key)}for(const A of s){o.push(A.batchId);for(const d of A.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(A=>({Ls:A,removedBatchIds:i,addedBatchIds:o}))})})}function KX(e,t){const r=Pr(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=t.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,c,A,d){const h=A.batch,m=h.keys();let p=_t.resolve();return m.forEach(v=>{p=p.next(()=>d.getEntry(c,v)).next(x=>{const E=A.docVersions.get(v);Qn(E!==null,48541),x.version.compareTo(E)<0&&(h.applyToRemoteDocument(x,A),x.isValidDocument()&&(x.setReadTime(A.commitVersion),d.addEntry(x)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(c,h))}(r,n,t,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let c=hn();for(let A=0;A<o.mutationResults.length;++A)o.mutationResults[A].transformResults.length>0&&(c=c.add(o.batch.mutations[A].key));return c}(t))).next(()=>r.localDocuments.getDocuments(n,a))})}function XO(e){const t=Pr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function qX(e,t){const r=Pr(e),n=t.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const o=[];t.targetChanges.forEach((d,h)=>{const m=a.get(h);if(!m)return;o.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,h).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,h)));let p=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(h)!==null?p=p.withResumeToken(Ci.EMPTY_BYTE_STRING,Or.min()).withLastLimboFreeSnapshotVersion(Or.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,n)),a=a.insert(h,p),function(x,E,_){return x.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=VX?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,p,d)&&o.push(r.Pi.updateTargetData(s,p))});let c=ed(),A=hn();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push($X(s,i,t.documentUpdates).next(d=>{c=d.ks,A=d.qs})),!n.isEqual(Or.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(h=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(d)}return _t.waitFor(o).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,A)).next(()=>c)}).then(s=>(r.Ms=a,s))}function $X(e,t,r){let n=hn(),a=hn();return r.forEach(s=>n=n.add(s)),t.getEntries(e,n).next(s=>{let i=ed();return r.forEach((o,c)=>{const A=s.get(o);c.isFoundDocument()!==A.isFoundDocument()&&(a=a.add(o)),c.isNoDocument()&&c.version.isEqual(Or.min())?(t.removeEntry(o,c.readTime),i=i.insert(o,c)):!A.isValidDocument()||c.version.compareTo(A.version)>0||c.version.compareTo(A.version)===0&&A.hasPendingWrites?(t.addEntry(c),i=i.insert(o,c)):rr(xN,"Ignoring outdated watch update for ",o,". Current version:",A.version," Watch version:",c.version)}),{ks:i,qs:a}})}function WX(e,t){const r=Pr(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=iN),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function XX(e,t){const r=Pr(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,t).next(s=>s?(a=s,_t.resolve(a)):r.Pi.allocateTargetId(n).next(i=>(a=new ff(t,i,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(t,n.targetId)),n})}async function l4(e,t,r){const n=Pr(e),a=n.Ms.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!_p(i))throw i;rr(xN,`Failed to update sequence numbers for target ${t}: ${i}`)}n.Ms=n.Ms.remove(t),n.xs.delete(a.target)}function tF(e,t,r){const n=Pr(e);let a=Or.min(),s=hn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(c,A,d){const h=Pr(c),m=h.xs.get(d);return m!==void 0?_t.resolve(h.Ms.get(m)):h.Pi.getTargetData(A,d)}(n,i,zu(t)).next(o=>{if(o)return a=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(i,o.targetId).next(c=>{s=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(i,t,r?a:Or.min(),r?s:hn())).next(o=>(YX(n,LW(t),o),{documents:o,Qs:s})))}function YX(e,t,r){let n=e.Os.get(t)||Or.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),e.Os.set(t,n)}class rF{constructor(){this.activeTargetIds=HW()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class JX{constructor(){this.Mo=new rF,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,n){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new rF,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZX{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF="ConnectivityMonitor";class aF{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){rr(nF,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){rr(nF,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tb=null;function c4(){return tb===null?tb=function(){return 268435456+Math.round(2147483648*Math.random())}():tb++,"0x"+tb.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5="RestConnection",eY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tY{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===iw?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(t,r,n,a,s){const i=c4(),o=this.zo(t,r.toUriEncodedString());rr(s5,`Sending RPC '${t}' ${i}:`,o,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,a,s);const{host:A}=new URL(o),d=id(A);return this.Jo(t,o,c,n,d).then(h=>(rr(s5,`Received RPC '${t}' ${i}: `,h),h),h=>{throw np(s5,`RPC '${t}' ${i} failed with error: `,h,"url: ",o,"request:",n),h})}Ho(t,r,n,a,s,i){return this.Go(t,r,n,a,s)}jo(t,r,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ep}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>t[s]=a),n&&n.headers.forEach((a,s)=>t[s]=a)}zo(t,r){const n=eY[t];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rY{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="WebChannelConnection";class nY extends tY{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,n,a,s){const i=c4();return new Promise((o,c)=>{const A=new JL;A.setWithCredentials(!0),A.listenOnce(ZL.COMPLETE,()=>{try{switch(A.getLastErrorCode()){case m2.NO_ERROR:const h=A.getResponseJson();rr(Oi,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(h)),o(h);break;case m2.TIMEOUT:rr(Oi,`RPC '${t}' ${i} timed out`),c(new Wt(xt.DEADLINE_EXCEEDED,"Request time out"));break;case m2.HTTP_ERROR:const m=A.getStatus();if(rr(Oi,`RPC '${t}' ${i} failed with status:`,m,"response text:",A.getResponseText()),m>0){let p=A.getResponseJson();Array.isArray(p)&&(p=p[0]);const v=p==null?void 0:p.error;if(v&&v.status&&v.message){const x=function(_){const B=_.toLowerCase().replace(/_/g,"-");return Object.values(xt).indexOf(B)>=0?B:xt.UNKNOWN}(v.status);c(new Wt(x,v.message))}else c(new Wt(xt.UNKNOWN,"Server responded with status "+A.getStatus()))}else c(new Wt(xt.UNAVAILABLE,"Connection failed."));break;default:Ir(9055,{l_:t,streamId:i,h_:A.getLastErrorCode(),P_:A.getLastError()})}}finally{rr(Oi,`RPC '${t}' ${i} completed.`)}});const d=JSON.stringify(a);rr(Oi,`RPC '${t}' ${i} sending request:`,a),A.send(r,"POST",d,n,15)})}T_(t,r,n){const a=c4(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=rO(),o=tO(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},A=this.longPollingOptions.timeoutSeconds;A!==void 0&&(c.longPollingTimeout=Math.round(1e3*A)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");rr(Oi,`Creating RPC '${t}' stream ${a}: ${d}`,c);const h=i.createWebChannel(d,c);this.I_(h);let m=!1,p=!1;const v=new rY({Yo:E=>{p?rr(Oi,`Not sending because RPC '${t}' stream ${a} is closed:`,E):(m||(rr(Oi,`Opening RPC '${t}' stream ${a} transport.`),h.open(),m=!0),rr(Oi,`RPC '${t}' stream ${a} sending:`,E),h.send(E))},Zo:()=>h.close()}),x=(E,_,B)=>{E.listen(_,T=>{try{B(T)}catch(I){setTimeout(()=>{throw I},0)}})};return x(h,Mg.EventType.OPEN,()=>{p||(rr(Oi,`RPC '${t}' stream ${a} transport opened.`),v.o_())}),x(h,Mg.EventType.CLOSE,()=>{p||(p=!0,rr(Oi,`RPC '${t}' stream ${a} transport closed`),v.a_(),this.E_(h))}),x(h,Mg.EventType.ERROR,E=>{p||(p=!0,np(Oi,`RPC '${t}' stream ${a} transport errored. Name:`,E.name,"Message:",E.message),v.a_(new Wt(xt.UNAVAILABLE,"The operation could not be completed")))}),x(h,Mg.EventType.MESSAGE,E=>{var _;if(!p){const B=E.data[0];Qn(!!B,16349);const T=B,I=(T==null?void 0:T.error)||((_=T[0])==null?void 0:_.error);if(I){rr(Oi,`RPC '${t}' stream ${a} received error:`,I);const L=I.status;let k=function(N){const U=Es[N];if(U!==void 0)return OO(U)}(L),w=I.message;k===void 0&&(k=xt.INTERNAL,w="Unknown error status: "+L+" with message "+I.message),p=!0,v.a_(new Wt(k,w)),h.close()}else rr(Oi,`RPC '${t}' stream ${a} received:`,B),v.u_(B)}}),x(o,eO.STAT_EVENT,E=>{E.stat===Y_.PROXY?rr(Oi,`RPC '${t}' stream ${a} detected buffering proxy`):E.stat===Y_.NOPROXY&&rr(Oi,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{v.__()},0),v}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function i5(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(e){return new oX(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(t,r,n=1e3,a=1.5,s=6e4){this.Mi=t,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&rr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF="PersistentStream";class JO{constructor(t,r,n,a,s,i,o,c){this.Mi=t,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new YO(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===xt.RESOURCE_EXHAUSTED?(ZA(r.toString()),ZA("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===xt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{t(()=>{const a=new Wt(xt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(t,r){const n=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return rr(sF,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(rr(sF,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aY extends JO{constructor(t,r,n,a,s,i){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=uX(this.serializer,t),n=function(s){if(!("targetChange"in s))return Or.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Or.min():i.readTime?Gu(i.readTime):Or.min()}(t);return this.listener.H_(r,n)}Y_(t){const r={};r.database=o4(this.serializer),r.addTarget=function(s,i){let o;const c=i.target;if(o=r4(c)?{documents:fX(s,c)}:{query:hX(s,c).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=MO(s,i.resumeToken);const A=a4(s,i.expectedCount);A!==null&&(o.expectedCount=A)}else if(i.snapshotVersion.compareTo(Or.min())>0){o.readTime=Aw(s,i.snapshotVersion.toTimestamp());const A=a4(s,i.expectedCount);A!==null&&(o.expectedCount=A)}return o}(this.serializer,t);const n=pX(this.serializer,t);n&&(r.labels=n),this.q_(r)}Z_(t){const r={};r.database=o4(this.serializer),r.removeTarget=t,this.q_(r)}}class sY extends JO{constructor(t,r,n,a,s,i){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return Qn(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Qn(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Qn(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=dX(t.writeResults,t.commitTime),n=Gu(t.commitTime);return this.listener.na(n,r)}ra(){const t={};t.database=o4(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>AX(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iY{}class oY extends iY{constructor(t,r,n,a){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Wt(xt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Go(t,s4(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===xt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Wt(xt.UNKNOWN,s.toString())})}Ho(t,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(t,s4(r,n),a,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===xt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Wt(xt.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class lY{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ZA(r),this.aa=!1):rr("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="RemoteStore";class cY{constructor(t,r,n,a,s){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(i=>{n.enqueueAndForget(async()=>{m0(this)&&(rr(t0,"Restarting streams for network reachability change."),await async function(c){const A=Pr(c);A.Ea.add(4),await N1(A),A.Ra.set("Unknown"),A.Ea.delete(4),await Dy(A)}(this))})}),this.Ra=new lY(n,a)}}async function Dy(e){if(m0(e))for(const t of e.da)await t(!0)}async function N1(e){for(const t of e.da)await t(!1)}function ZO(e,t){const r=Pr(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),yN(r)?wN(r):Np(r).O_()&&bN(r,t))}function vN(e,t){const r=Pr(e),n=Np(r);r.Ia.delete(t),n.O_()&&eU(r,t),r.Ia.size===0&&(n.O_()?n.L_():m0(r)&&r.Ra.set("Unknown"))}function bN(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Or.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Np(e).Y_(t)}function eU(e,t){e.Va.Ue(t),Np(e).Z_(t)}function wN(e){e.Va=new nX({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Np(e).start(),e.Ra.ua()}function yN(e){return m0(e)&&!Np(e).x_()&&e.Ia.size>0}function m0(e){return Pr(e).Ea.size===0}function tU(e){e.Va=void 0}async function uY(e){e.Ra.set("Online")}async function AY(e){e.Ia.forEach((t,r)=>{bN(e,t)})}async function dY(e,t){tU(e),yN(e)?(e.Ra.ha(t),wN(e)):e.Ra.set("Unknown")}async function fY(e,t,r){if(e.Ra.set("Online"),t instanceof PO&&t.state===2&&t.cause)try{await async function(a,s){const i=s.cause;for(const o of s.targetIds)a.Ia.has(o)&&(await a.remoteSyncer.rejectListen(o,i),a.Ia.delete(o),a.Va.removeTarget(o))}(e,t)}catch(n){rr(t0,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await fw(e,n)}else if(t instanceof v2?e.Va.Ze(t):t instanceof UO?e.Va.st(t):e.Va.tt(t),!r.isEqual(Or.min()))try{const n=await XO(e.localStore);r.compareTo(n)>=0&&await function(s,i){const o=s.Va.Tt(i);return o.targetChanges.forEach((c,A)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(A);d&&s.Ia.set(A,d.withResumeToken(c.resumeToken,i))}}),o.targetMismatches.forEach((c,A)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(Ci.EMPTY_BYTE_STRING,d.snapshotVersion)),eU(s,c);const h=new ff(d.target,c,A,d.sequenceNumber);bN(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(e,r)}catch(n){rr(t0,"Failed to raise snapshot:",n),await fw(e,n)}}async function fw(e,t,r){if(!_p(t))throw t;e.Ea.add(1),await N1(e),e.Ra.set("Offline"),r||(r=()=>XO(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{rr(t0,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await Dy(e)})}function rU(e,t){return t().catch(r=>fw(e,r,t))}async function Ry(e){const t=Pr(e),r=Uf(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:iN;for(;hY(t);)try{const a=await WX(t.localStore,n);if(a===null){t.Ta.length===0&&r.L_();break}n=a.batchId,mY(t,a)}catch(a){await fw(t,a)}nU(t)&&aU(t)}function hY(e){return m0(e)&&e.Ta.length<10}function mY(e,t){e.Ta.push(t);const r=Uf(e);r.O_()&&r.X_&&r.ea(t.mutations)}function nU(e){return m0(e)&&!Uf(e).x_()&&e.Ta.length>0}function aU(e){Uf(e).start()}async function pY(e){Uf(e).ra()}async function gY(e){const t=Uf(e);for(const r of e.Ta)t.ea(r.mutations)}async function xY(e,t,r){const n=e.Ta.shift(),a=dN.from(n,t,r);await rU(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await Ry(e)}async function vY(e,t){t&&Uf(e).X_&&await async function(n,a){if(function(i){return eX(i)&&i!==xt.ABORTED}(a.code)){const s=n.Ta.shift();Uf(n).B_(),await rU(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await Ry(n)}}(e,t),nU(e)&&aU(e)}async function iF(e,t){const r=Pr(e);r.asyncQueue.verifyOperationInProgress(),rr(t0,"RemoteStore received new credentials");const n=m0(r);r.Ea.add(3),await N1(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await Dy(r)}async function bY(e,t){const r=Pr(e);t?(r.Ea.delete(2),await Dy(r)):t||(r.Ea.add(2),await N1(r),r.Ra.set("Unknown"))}function Np(e){return e.ma||(e.ma=function(r,n,a){const s=Pr(r);return s.sa(),new aY(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:uY.bind(null,e),t_:AY.bind(null,e),r_:dY.bind(null,e),H_:fY.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),yN(e)?wN(e):e.Ra.set("Unknown")):(await e.ma.stop(),tU(e))})),e.ma}function Uf(e){return e.fa||(e.fa=function(r,n,a){const s=Pr(r);return s.sa(),new sY(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:pY.bind(null,e),r_:vY.bind(null,e),ta:gY.bind(null,e),na:xY.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Ry(e)):(await e.fa.stop(),e.Ta.length>0&&(rr(t0,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(t,r,n,a,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new zA,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,a,s){const i=Date.now()+n,o=new EN(t,r,i,a,s);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Wt(xt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function CN(e,t){if(ZA("AsyncQueue",`${t}: ${e}`),_p(e))return new Wt(xt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{static emptySet(t){return new Mm(t.comparator)}constructor(t){this.comparator=t?(r,n)=>t(r,n)||mr.comparator(r.key,n.key):(r,n)=>mr.comparator(r.key,n.key),this.keyedMap=Qg(),this.sortedSet=new ja(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Mm)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new Mm;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(){this.ga=new ja(mr.comparator)}track(t){const r=t.doc.key,n=this.ga.get(r);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(r,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(r):t.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):Ir(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,n)=>{t.push(n)}),t}}class cp{constructor(t,r,n,a,s,i,o,c,A){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=A}static fromInitialDocuments(t,r,n,a,s){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new cp(t,r,Mm.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ny(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wY{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class yY{constructor(){this.queries=lF(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=Pr(r),s=a.queries;a.queries=lF(),s.forEach((i,o)=>{for(const c of o.Sa)c.onError(n)})})(this,new Wt(xt.ABORTED,"Firestore shutting down"))}}function lF(){return new h0(e=>CO(e),Ny)}async function _N(e,t){const r=Pr(e);let n=3;const a=t.query;let s=r.queries.get(a);s?!s.ba()&&t.Da()&&(n=2):(s=new wY,n=t.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const o=CN(i,`Initialization of query '${bm(t.query)}' failed`);return void t.onError(o)}r.queries.set(a,s),s.Sa.push(t),t.va(r.onlineState),s.wa&&t.Fa(s.wa)&&NN(r)}async function SN(e,t){const r=Pr(e),n=t.query;let a=3;const s=r.queries.get(n);if(s){const i=s.Sa.indexOf(t);i>=0&&(s.Sa.splice(i,1),s.Sa.length===0?a=t.Da()?0:1:!s.ba()&&t.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function EY(e,t){const r=Pr(e);let n=!1;for(const a of t){const s=a.query,i=r.queries.get(s);if(i){for(const o of i.Sa)o.Fa(a)&&(n=!0);i.wa=a}}n&&NN(r)}function CY(e,t,r){const n=Pr(e),a=n.queries.get(t);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(t)}function NN(e){e.Ca.forEach(t=>{t.next()})}var u4,cF;(cF=u4||(u4={})).Ma="default",cF.Cache="cache";class BN{constructor(t,r,n){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new cp(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=cp.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==u4.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(t){this.key=t}}class iU{constructor(t){this.key=t}}class _Y{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=hn(),this.mutatedKeys=hn(),this.eu=_O(t),this.tu=new Mm(this.eu)}get nu(){return this.Ya}ru(t,r){const n=r?r.iu:new oF,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,o=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,A=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((d,h)=>{const m=a.get(d),p=By(this.query,h)?h:null,v=!!m&&this.mutatedKeys.has(m.key),x=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let E=!1;m&&p?m.data.isEqual(p.data)?v!==x&&(n.track({type:3,doc:p}),E=!0):this.su(m,p)||(n.track({type:2,doc:p}),E=!0,(c&&this.eu(p,c)>0||A&&this.eu(p,A)<0)&&(o=!0)):!m&&p?(n.track({type:0,doc:p}),E=!0):m&&!p&&(n.track({type:1,doc:m}),E=!0,(c||A)&&(o=!0)),E&&(p?(i=i.add(p),s=x?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:i,iu:n,Cs:o,mutatedKeys:s}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,a){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const i=t.iu.ya();i.sort((d,h)=>function(p,v){const x=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ir(20277,{Rt:E})}};return x(p)-x(v)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(n),a=a??!1;const o=r&&!a?this._u():[],c=this.Xa.size===0&&this.current&&!a?1:0,A=c!==this.Za;return this.Za=c,i.length!==0||A?{snapshot:new cp(this.query,t.tu,s,i,t.mutatedKeys,c===0,A,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new oF,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=hn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return t.forEach(n=>{this.Xa.has(n)||r.push(new iU(n))}),this.Xa.forEach(n=>{t.has(n)||r.push(new sU(n))}),r}cu(t){this.Ya=t.Qs,this.Xa=hn();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return cp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const kN="SyncEngine";class SY{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class NY{constructor(t){this.key=t,this.hu=!1}}class BY{constructor(t,r,n,a,s,i){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new h0(o=>CO(o),Ny),this.Iu=new Map,this.Eu=new Set,this.du=new ja(mr.comparator),this.Au=new Map,this.Ru=new mN,this.Vu={},this.mu=new Map,this.fu=lp.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kY(e,t,r=!0){const n=dU(e);let a;const s=n.Tu.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await oU(n,t,r,!0),a}async function TY(e,t){const r=dU(e);await oU(r,t,!0,!1)}async function oU(e,t,r,n){const a=await XX(e.localStore,zu(t)),s=a.targetId,i=e.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await IY(e,t,s,i==="current",a.resumeToken)),e.isPrimaryClient&&r&&ZO(e.remoteStore,a),o}async function IY(e,t,r,n,a){e.pu=(h,m,p)=>async function(x,E,_,B){let T=E.view.ru(_);T.Cs&&(T=await tF(x.localStore,E.query,!1).then(({documents:w})=>E.view.ru(w,T)));const I=B&&B.targetChanges.get(E.targetId),L=B&&B.targetMismatches.get(E.targetId)!=null,k=E.view.applyChanges(T,x.isPrimaryClient,I,L);return AF(x,E.targetId,k.au),k.snapshot}(e,h,m,p);const s=await tF(e.localStore,t,!0),i=new _Y(t,s.Qs),o=i.ru(s.documents),c=S1.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",a),A=i.applyChanges(o,e.isPrimaryClient,c);AF(e,r,A.au);const d=new SY(t,r,i);return e.Tu.set(t,d),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),A.snapshot}async function FY(e,t,r){const n=Pr(e),a=n.Tu.get(t),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(i=>!Ny(i,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await l4(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&vN(n.remoteStore,a.targetId),A4(n,a.targetId)}).catch(Cp)):(A4(n,a.targetId),await l4(n.localStore,a.targetId,!0))}async function jY(e,t){const r=Pr(e),n=r.Tu.get(t),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),vN(r.remoteStore,n.targetId))}async function DY(e,t,r){const n=QY(e);try{const a=await function(i,o){const c=Pr(i),A=Ar.now(),d=o.reduce((p,v)=>p.add(v.key),hn());let h,m;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let v=ed(),x=hn();return c.Ns.getEntries(p,d).next(E=>{v=E,v.forEach((_,B)=>{B.isValidDocument()||(x=x.add(_))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,v)).next(E=>{h=E;const _=[];for(const B of o){const T=WW(B,h.get(B.key).overlayedDocument);T!=null&&_.push(new Wf(B.key,T,pO(T.value.mapValue),mo.exists(!0)))}return c.mutationQueue.addMutationBatch(p,A,_,o)}).next(E=>{m=E;const _=E.applyToLocalDocumentSet(h,x);return c.documentOverlayCache.saveOverlays(p,E.batchId,_)})}).then(()=>({batchId:m.batchId,changes:NO(h)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),function(i,o,c){let A=i.Vu[i.currentUser.toKey()];A||(A=new ja(fn)),A=A.insert(o,c),i.Vu[i.currentUser.toKey()]=A}(n,a.batchId,r),await B1(n,a.changes),await Ry(n.remoteStore)}catch(a){const s=CN(a,"Failed to persist write");r.reject(s)}}async function lU(e,t){const r=Pr(e);try{const n=await qX(r.localStore,t);t.targetChanges.forEach((a,s)=>{const i=r.Au.get(s);i&&(Qn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?i.hu=!0:a.modifiedDocuments.size>0?Qn(i.hu,14607):a.removedDocuments.size>0&&(Qn(i.hu,42227),i.hu=!1))}),await B1(r,n,t)}catch(n){await Cp(n)}}function uF(e,t,r){const n=Pr(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,i)=>{const o=i.view.va(t);o.snapshot&&a.push(o.snapshot)}),function(i,o){const c=Pr(i);c.onlineState=o;let A=!1;c.queries.forEach((d,h)=>{for(const m of h.Sa)m.va(o)&&(A=!0)}),A&&NN(c)}(n.eventManager,t),a.length&&n.Pu.H_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function RY(e,t,r){const n=Pr(e);n.sharedClientState.updateQueryState(t,"rejected",r);const a=n.Au.get(t),s=a&&a.key;if(s){let i=new ja(mr.comparator);i=i.insert(s,$i.newNoDocument(s,Or.min()));const o=hn().add(s),c=new Fy(Or.min(),new Map,new ja(fn),i,o);await lU(n,c),n.du=n.du.remove(s),n.Au.delete(t),TN(n)}else await l4(n.localStore,t,!1).then(()=>A4(n,t,r)).catch(Cp)}async function LY(e,t){const r=Pr(e),n=t.batch.batchId;try{const a=await KX(r.localStore,t);uU(r,n,null),cU(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await B1(r,a)}catch(a){await Cp(a)}}async function OY(e,t,r){const n=Pr(e);try{const a=await function(i,o){const c=Pr(i);return c.persistence.runTransaction("Reject batch","readwrite-primary",A=>{let d;return c.mutationQueue.lookupMutationBatch(A,o).next(h=>(Qn(h!==null,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(A,h))).next(()=>c.mutationQueue.performConsistencyCheck(A)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(A,d,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(A,d)).next(()=>c.localDocuments.getDocuments(A,d))})}(n.localStore,t);uU(n,t,r),cU(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await B1(n,a)}catch(a){await Cp(a)}}function cU(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function uU(e,t,r){const n=Pr(e);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(t);s&&(r?s.reject(r):s.resolve(),a=a.remove(t)),n.Vu[n.currentUser.toKey()]=a}}function A4(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(n=>{e.Ru.containsKey(n)||AU(e,n)})}function AU(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(vN(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),TN(e))}function AF(e,t,r){for(const n of r)n instanceof sU?(e.Ru.addReference(n.key,t),UY(e,n)):n instanceof iU?(rr(kN,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||AU(e,n.key)):Ir(19791,{wu:n})}function UY(e,t){const r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Eu.has(n)||(rr(kN,"New document in limbo: "+r),e.Eu.add(n),TN(e))}function TN(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new mr(da.fromString(t)),n=e.fu.next();e.Au.set(n,new NY(r)),e.du=e.du.insert(r,n),ZO(e.remoteStore,new ff(zu(Sy(r.path)),n,"TargetPurposeLimboResolution",Ey.ce))}}async function B1(e,t,r){const n=Pr(e),a=[],s=[],i=[];n.Tu.isEmpty()||(n.Tu.forEach((o,c)=>{i.push(n.pu(c,t,r).then(A=>{var d;if((A||r)&&n.isPrimaryClient){const h=A?!A.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(A){a.push(A);const h=gN.As(c.targetId,A);s.push(h)}}))}),await Promise.all(i),n.Pu.H_(a),await async function(c,A){const d=Pr(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>_t.forEach(A,m=>_t.forEach(m.Es,p=>d.persistence.referenceDelegate.addReference(h,m.targetId,p)).next(()=>_t.forEach(m.ds,p=>d.persistence.referenceDelegate.removeReference(h,m.targetId,p)))))}catch(h){if(!_p(h))throw h;rr(xN,"Failed to update sequence numbers: "+h)}for(const h of A){const m=h.targetId;if(!h.fromCache){const p=d.Ms.get(m),v=p.snapshotVersion,x=p.withLastLimboFreeSnapshotVersion(v);d.Ms=d.Ms.insert(m,x)}}}(n.localStore,s))}async function PY(e,t){const r=Pr(e);if(!r.currentUser.isEqual(t)){rr(kN,"User change. New user:",t.toKey());const n=await WO(r.localStore,t);r.currentUser=t,function(s,i){s.mu.forEach(o=>{o.forEach(c=>{c.reject(new Wt(xt.CANCELLED,i))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await B1(r,n.Ls)}}function MY(e,t){const r=Pr(e),n=r.Au.get(t);if(n&&n.hu)return hn().add(n.key);{let a=hn();const s=r.Iu.get(t);if(!s)return a;for(const i of s){const o=r.Tu.get(i);a=a.unionWith(o.view.nu)}return a}}function dU(e){const t=Pr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=lU.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=MY.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=RY.bind(null,t),t.Pu.H_=EY.bind(null,t.eventManager),t.Pu.yu=CY.bind(null,t.eventManager),t}function QY(e){const t=Pr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=LY.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=OY.bind(null,t),t}class hw{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=jy(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return GX(this.persistence,new HX,t.initialUser,this.serializer)}Cu(t){return new $O(pN.mi,this.serializer)}Du(t){return new JX}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hw.provider={build:()=>new hw};class HY extends hw{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){Qn(this.persistence.referenceDelegate instanceof dw,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new NX(n,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?Do.withCacheSize(this.cacheSizeBytes):Do.DEFAULT;return new $O(n=>dw.mi(n,r),this.serializer)}}class d4{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>uF(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=PY.bind(null,this.syncEngine),await bY(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new yY}()}createDatastore(t){const r=jy(t.databaseInfo.databaseId),n=function(s){return new nY(s)}(t.databaseInfo);return function(s,i,o,c){return new oY(s,i,o,c)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,a,s,i,o){return new cY(n,a,s,i,o)}(this.localStore,this.datastore,t.asyncQueue,r=>uF(this.syncEngine,r,0),function(){return aF.v()?new aF:new ZX}())}createSyncEngine(t,r){return function(a,s,i,o,c,A,d){const h=new BY(a,s,i,o,c,A);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(a){const s=Pr(a);rr(t0,"RemoteStore shutting down."),s.Ea.add(5),await N1(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}d4.provider={build:()=>new d4};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):ZA("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="FirestoreClient";class VY{constructor(t,r,n,a,s){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=zi.UNAUTHENTICATED,this.clientId=sN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{rr(Pf,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(rr(Pf,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new zA;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=CN(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function o5(e,t){e.asyncQueue.verifyOperationInProgress(),rr(Pf,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async a=>{n.isEqual(a)||(await WO(t.localStore,a),n=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function dF(e,t){e.asyncQueue.verifyOperationInProgress();const r=await zY(e);rr(Pf,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>iF(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,a)=>iF(t.remoteStore,a)),e._onlineComponents=t}async function zY(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){rr(Pf,"Using user provided OfflineComponentProvider");try{await o5(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(a){return a.name==="FirebaseError"?a.code===xt.FAILED_PRECONDITION||a.code===xt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;np("Error using user provided cache. Falling back to memory cache: "+r),await o5(e,new hw)}}else rr(Pf,"Using default OfflineComponentProvider"),await o5(e,new HY(void 0));return e._offlineComponents}async function fU(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(rr(Pf,"Using user provided OnlineComponentProvider"),await dF(e,e._uninitializedComponentsProvider._online)):(rr(Pf,"Using default OnlineComponentProvider"),await dF(e,new d4))),e._onlineComponents}function GY(e){return fU(e).then(t=>t.syncEngine)}async function mw(e){const t=await fU(e),r=t.eventManager;return r.onListen=kY.bind(null,t.syncEngine),r.onUnlisten=FY.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=TY.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=jY.bind(null,t.syncEngine),r}function KY(e,t,r={}){const n=new zA;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,c,A){const d=new IN({next:m=>{d.Nu(),i.enqueueAndForget(()=>SN(s,h));const p=m.docs.has(o);!p&&m.fromCache?A.reject(new Wt(xt.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&c&&c.source==="server"?A.reject(new Wt(xt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):A.resolve(m)},error:m=>A.reject(m)}),h=new BN(Sy(o.path),d,{includeMetadataChanges:!0,qa:!0});return _N(s,h)}(await mw(e),e.asyncQueue,t,r,n)),n.promise}function qY(e,t,r={}){const n=new zA;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,c,A){const d=new IN({next:m=>{d.Nu(),i.enqueueAndForget(()=>SN(s,h)),m.fromCache&&c.source==="server"?A.reject(new Wt(xt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):A.resolve(m)},error:m=>A.reject(m)}),h=new BN(o,d,{includeMetadataChanges:!0,qa:!0});return _N(s,h)}(await mw(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hU(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU="firestore.googleapis.com",hF=!0;class mF{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Wt(xt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mU,this.ssl=hF}else this.host=t.host,this.ssl=t.ssl??hF;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=qO;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<_X)throw new Wt(xt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}lW("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hU(t.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Wt(xt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Wt(xt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Wt(xt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ly{constructor(t,r,n,a){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mF({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Wt(xt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Wt(xt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mF(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new J$;switch(n.type){case"firstParty":return new rW(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Wt(xt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=fF.get(r);n&&(rr("ComponentProvider","Removing Datastore"),fF.delete(r),n.terminate())}(this),Promise.resolve()}}function $Y(e,t,r,n={}){var A;e=ho(e,Ly);const a=id(t),s=e._getSettings(),i={...s,emulatorOptions:e._getEmulatorOptions()},o=`${t}:${r}`;a&&(my(`https://${o}`),py("Firestore",!0)),s.host!==mU&&s.host!==o&&np("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:o,ssl:a,emulatorOptions:n};if(!Ff(c,i)&&(e._setSettings(c),n.mockUserToken)){let d,h;if(typeof n.mockUserToken=="string")d=n.mockUserToken,h=zi.MOCK_USER;else{d=AL(n.mockUserToken,(A=e._app)==null?void 0:A.options.projectId);const m=n.mockUserToken.sub||n.mockUserToken.user_id;if(!m)throw new Wt(xt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new zi(m)}e._authCredentials=new Z$(new aO(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new ld(this.firestore,t,this._query)}}class Ka{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cf(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ka(this.firestore,t,this._key)}toJSON(){return{type:Ka._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,n){if(C1(r,Ka._jsonSchema))return new Ka(t,n||null,new mr(da.fromString(r.referencePath)))}}Ka._jsonSchemaVersion="firestore/documentReference/1.0",Ka._jsonSchema={type:ks("string",Ka._jsonSchemaVersion),referencePath:ks("string")};class Cf extends ld{constructor(t,r,n){super(t,r,Sy(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ka(this.firestore,null,new mr(t))}withConverter(t){return new Cf(this.firestore,t,this._path)}}function Ft(e,t,...r){if(e=oa(e),sO("collection","path",t),e instanceof Ly){const n=da.fromString(t,...r);return BI(n),new Cf(e,null,n)}{if(!(e instanceof Ka||e instanceof Cf))throw new Wt(xt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(da.fromString(t,...r));return BI(n),new Cf(e.firestore,null,n)}}function vr(e,t,...r){if(e=oa(e),arguments.length===1&&(t=sN.newId()),sO("doc","path",t),e instanceof Ly){const n=da.fromString(t,...r);return NI(n),new Ka(e,null,new mr(n))}{if(!(e instanceof Ka||e instanceof Cf))throw new Wt(xt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(da.fromString(t,...r));return NI(n),new Ka(e.firestore,e instanceof Cf?e.converter:null,new mr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF="AsyncQueue";class gF{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new YO(this,"async_queue_retry"),this._c=()=>{const n=i5();n&&rr(pF,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const r=i5();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=i5();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new zA;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!_p(t))throw t;rr(pF,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(n=>{throw this.nc=n,this.rc=!1,ZA("INTERNAL UNHANDLED ERROR: ",xF(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(t,r,n){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const a=EN.createAndSchedule(this,t,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&Ir(47125,{Pc:xF(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function xF(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vF(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(e,["next","error","complete"])}class Ju extends Ly{constructor(t,r,n,a){super(t,r,n,a),this.type="firestore",this._queue=new gF,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new gF(t),this._firestoreClient=void 0,await t}}}function pU(e,t){const r=typeof e=="object"?e:gy(),n=typeof e=="string"?e:iw,a=b1(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=KS("firestore");s&&$Y(a,...s)}return a}function k1(e){if(e._terminated)throw new Wt(xt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||WY(e),e._firestoreClient}function WY(e){var n,a,s;const t=e._freezeSettings(),r=function(o,c,A,d){return new bW(o,c,A,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,hU(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((n=e._app)==null?void 0:n.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(a=t.localCache)!=null&&a._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new VY(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Zl(Ci.fromBase64String(t))}catch(r){throw new Wt(xt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Zl(Ci.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Zl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(C1(t,Zl._jsonSchema))return Zl.fromBase64String(t.bytes)}}Zl._jsonSchemaVersion="firestore/bytes/1.0",Zl._jsonSchema={type:ks("string",Zl._jsonSchemaVersion),bytes:ks("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Wt(xt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Wt(xt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Wt(xt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return fn(this._lat,t._lat)||fn(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ku._jsonSchemaVersion}}static fromJSON(t){if(C1(t,Ku._jsonSchema))return new Ku(t.latitude,t.longitude)}}Ku._jsonSchemaVersion="firestore/geoPoint/1.0",Ku._jsonSchema={type:ks("string",Ku._jsonSchemaVersion),latitude:ks("number"),longitude:ks("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:qu._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(C1(t,qu._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new qu(t.vectorValues);throw new Wt(xt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qu._jsonSchemaVersion="firestore/vectorValue/1.0",qu._jsonSchema={type:ks("string",qu._jsonSchemaVersion),vectorValues:ks("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XY=/^__.*__$/;class YY{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new Wf(t,this.data,this.fieldMask,r,this.fieldTransforms):new _1(t,this.data,r,this.fieldTransforms)}}class gU{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new Wf(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function xU(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ir(40011,{Ac:e})}}class Oy{constructor(t,r,n,a,s,i){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Oy({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.gc(t),n}yc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return pw(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(xU(this.Ac)&&XY.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class JY{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||jy(t)}Cc(t,r,n,a=!1){return new Oy({Ac:t,methodName:r,Dc:n,path:bi.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function F1(e){const t=e._freezeSettings(),r=jy(e._databaseId);return new JY(e._databaseId,!!t.ignoreUndefinedProperties,r)}function FN(e,t,r,n,a,s={}){const i=e.Cc(s.merge||s.mergeFields?2:0,t,r,a);RN("Data must be an object, but it was:",i,n);const o=wU(n,i);let c,A;if(s.merge)c=new ml(i.fieldMask),A=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const m=f4(t,h,r);if(!i.contains(m))throw new Wt(xt.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);EU(d,m)||d.push(m)}c=new ml(d),A=i.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,A=i.fieldTransforms;return new YY(new Lo(o),c,A)}class Uy extends I1{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Uy}}function ZY(e,t,r){return new Oy({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class jN extends I1{_toFieldTransform(t){return new DO(t.path,new Px)}isEqual(t){return t instanceof jN}}class DN extends I1{constructor(t,r){super(t),this.vc=r}_toFieldTransform(t){const r=ZY(this,t,!0),n=this.vc.map(s=>Bp(s,r)),a=new op(n);return new DO(t.path,a)}isEqual(t){return t instanceof DN&&Ff(this.vc,t.vc)}}function vU(e,t,r,n){const a=e.Cc(1,t,r);RN("Data must be an object, but it was:",a,n);const s=[],i=Lo.empty();$f(n,(c,A)=>{const d=LN(t,c,r);A=oa(A);const h=a.yc(d);if(A instanceof Uy)s.push(d);else{const m=Bp(A,h);m!=null&&(s.push(d),i.set(d,m))}});const o=new ml(s);return new gU(i,o,a.fieldTransforms)}function bU(e,t,r,n,a,s){const i=e.Cc(1,t,r),o=[f4(t,n,r)],c=[a];if(s.length%2!=0)throw new Wt(xt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)o.push(f4(t,s[m])),c.push(s[m+1]);const A=[],d=Lo.empty();for(let m=o.length-1;m>=0;--m)if(!EU(A,o[m])){const p=o[m];let v=c[m];v=oa(v);const x=i.yc(p);if(v instanceof Uy)A.push(p);else{const E=Bp(v,x);E!=null&&(A.push(p),d.set(p,E))}}const h=new ml(A);return new gU(d,h,i.fieldTransforms)}function eJ(e,t,r,n=!1){return Bp(r,e.Cc(n?4:3,t))}function Bp(e,t){if(yU(e=oa(e)))return RN("Unsupported field value:",t,e),wU(e,t);if(e instanceof I1)return function(n,a){if(!xU(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const o of n){let c=Bp(o,a.wc(i));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),i++}return{arrayValue:{values:s}}}(e,t)}return function(n,a){if((n=oa(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return VW(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Ar.fromDate(n);return{timestampValue:Aw(a.serializer,s)}}if(n instanceof Ar){const s=new Ar(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Aw(a.serializer,s)}}if(n instanceof Ku)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Zl)return{bytesValue:MO(a.serializer,n._byteString)};if(n instanceof Ka){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:hN(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof qu)return function(i,o){return{mapValue:{fields:{[hO]:{stringValue:mO},[ow]:{arrayValue:{values:i.toArray().map(A=>{if(typeof A!="number")throw o.Sc("VectorValues must only contain numeric values.");return AN(o.serializer,A)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${yy(n)}`)}(e,t)}function wU(e,t){const r={};return lO(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$f(e,(n,a)=>{const s=Bp(a,t.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function yU(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ar||e instanceof Ku||e instanceof Zl||e instanceof Ka||e instanceof I1||e instanceof qu)}function RN(e,t,r){if(!yU(r)||!iO(r)){const n=yy(r);throw n==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function f4(e,t,r){if((t=oa(t))instanceof T1)return t._internalPath;if(typeof t=="string")return LN(e,t);throw pw("Field path arguments must be of type string or ",e,!1,void 0,r)}const tJ=new RegExp("[~\\*/\\[\\]]");function LN(e,t,r){if(t.search(tJ)>=0)throw pw(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new T1(...t.split("."))._internalPath}catch{throw pw(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function pw(e,t,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||i)&&(c+=" (found",s&&(c+=` in field ${n}`),i&&(c+=` in document ${a}`),c+=")"),new Wt(xt.INVALID_ARGUMENT,o+e+c)}function EU(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(t,r,n,a,s){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ka(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new rJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(Py("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class rJ extends CU{data(){return super.data()}}function Py(e,t){return typeof t=="string"?LN(e,t):t instanceof T1?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _U(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Wt(xt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ON{}class UN extends ON{}function nr(e,t,...r){let n=[];t instanceof ON&&n.push(t),n=n.concat(r),function(s){const i=s.filter(c=>c instanceof PN).length,o=s.filter(c=>c instanceof My).length;if(i>1||i>0&&o>0)throw new Wt(xt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class My extends UN{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new My(t,r,n)}_apply(t){const r=this._parse(t);return SU(t._query,r),new ld(t.firestore,t.converter,n4(t._query,r))}_parse(t){const r=F1(t.firestore);return function(s,i,o,c,A,d,h){let m;if(A.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Wt(xt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){wF(h,d);const v=[];for(const x of h)v.push(bF(c,s,x));m={arrayValue:{values:v}}}else m=bF(c,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||wF(h,d),m=eJ(o,i,h,d==="in"||d==="not-in");return Bs.create(A,d,m)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function Mn(e,t,r){const n=t,a=Py("where",e);return My._create(a,n,r)}class PN extends ON{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new PN(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Kc.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(a,s){let i=a;const o=s.getFlattenedFilters();for(const c of o)SU(i,c),i=n4(i,c)}(t._query,r),new ld(t.firestore,t.converter,n4(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class MN extends UN{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new MN(t,r)}_apply(t){const r=function(a,s,i){if(a.startAt!==null)throw new Wt(xt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Wt(xt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ux(s,i)}(t._query,this._field,this._direction);return new ld(t.firestore,t.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new Sp(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}function en(e,t="asc"){const r=t,n=Py("orderBy",e);return MN._create(n,r)}class QN extends UN{constructor(t,r,n){super(),this.type=t,this._limit=r,this._limitType=n}static _create(t,r,n){return new QN(t,r,n)}_apply(t){return new ld(t.firestore,t.converter,cw(t._query,this._limit,this._limitType))}}function _f(e){return cW("limit",e),QN._create("limit",e,"F")}function bF(e,t,r){if(typeof(r=oa(r))=="string"){if(r==="")throw new Wt(xt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!EO(t)&&r.indexOf("/")!==-1)throw new Wt(xt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(da.fromString(r));if(!mr.isDocumentKey(n))throw new Wt(xt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return LI(e,new mr(n))}if(r instanceof Ka)return LI(e,r._key);throw new Wt(xt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yy(r)}.`)}function wF(e,t){if(!Array.isArray(e)||e.length===0)throw new Wt(xt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function SU(e,t){const r=function(a,s){for(const i of a)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Wt(xt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Wt(xt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class nJ{convertValue(t,r="none"){switch(Of(t)){case 0:return null;case 1:return t.booleanValue;case 2:return cs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Lf(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw Ir(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return $f(t,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(t){var n,a,s;const r=(s=(a=(n=t.fields)==null?void 0:n[ow].arrayValue)==null?void 0:a.values)==null?void 0:s.map(i=>cs(i.doubleValue));return new qu(r)}convertGeoPoint(t){return new Ku(cs(t.latitude),cs(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=_y(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Rx(t));default:return null}}convertTimestamp(t){const r=Rf(t);return new Ar(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=da.fromString(t);Qn(KO(n),9688,{name:t});const a=new Lx(n.get(1),n.get(3)),s=new mr(n.popFirst(5));return a.isEqual(r)||ZA(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class Vg{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Uh extends CU{constructor(t,r,n,a,s,i){super(t,r,n,a,i),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new b2(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(Py("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Wt(xt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=Uh._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Uh._jsonSchemaVersion="firestore/documentSnapshot/1.0",Uh._jsonSchema={type:ks("string",Uh._jsonSchemaVersion),bundleSource:ks("string","DocumentSnapshot"),bundleName:ks("string"),bundle:ks("string")};class b2 extends Uh{data(t={}){return super.data(t)}}class Ph{constructor(t,r,n,a){this._firestore=t,this._userDataWriter=r,this._snapshot=a,this.metadata=new Vg(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new b2(this._firestore,this._userDataWriter,n.key,n,new Vg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Wt(xt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(o=>{const c=new b2(a._firestore,a._userDataWriter,o.doc.key,o.doc,new Vg(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const c=new b2(a._firestore,a._userDataWriter,o.doc.key,o.doc,new Vg(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);let A=-1,d=-1;return o.type!==0&&(A=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:aJ(o.type),doc:c,oldIndex:A,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Wt(xt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ph._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=sN.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function aJ(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ir(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(e){e=ho(e,Ka);const t=ho(e.firestore,Ju);return KY(k1(t),e._key).then(r=>NU(t,e,r))}Ph._jsonSchemaVersion="firestore/querySnapshot/1.0",Ph._jsonSchema={type:ks("string",Ph._jsonSchemaVersion),bundleSource:ks("string","QuerySnapshot"),bundleName:ks("string"),bundle:ks("string")};class VN extends nJ{constructor(t){super(),this.firestore=t}convertBytes(t){return new Zl(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Ka(this.firestore,null,r)}}function Ts(e){e=ho(e,ld);const t=ho(e.firestore,Ju),r=k1(t),n=new VN(t);return _U(e._query),qY(r,e._query).then(a=>new Ph(t,n,e,a))}function no(e,t,r){e=ho(e,Ka);const n=ho(e.firestore,Ju),a=HN(e.converter,t,r);return R1(n,[FN(F1(n),"setDoc",e._key,a,e.converter!==null,r).toMutation(e._key,mo.none())])}function D1(e,t,r,...n){e=ho(e,Ka);const a=ho(e.firestore,Ju),s=F1(a);let i;return i=typeof(t=oa(t))=="string"||t instanceof T1?bU(s,"updateDoc",e._key,t,r,n):vU(s,"updateDoc",e._key,t),R1(a,[i.toMutation(e._key,mo.exists(!0))])}function zs(e){return R1(ho(e.firestore,Ju),[new Iy(e._key,mo.none())])}function ha(e,t){const r=ho(e.firestore,Ju),n=vr(e),a=HN(e.converter,t);return R1(r,[FN(F1(e.firestore),"addDoc",n._key,a,e.converter!==null,{}).toMutation(n._key,mo.exists(!1))]).then(()=>n)}function br(e,...t){var c,A,d;e=oa(e);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||vF(t[n])||(r=t[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(vF(t[n])){const h=t[n];t[n]=(c=h.next)==null?void 0:c.bind(h),t[n+1]=(A=h.error)==null?void 0:A.bind(h),t[n+2]=(d=h.complete)==null?void 0:d.bind(h)}let s,i,o;if(e instanceof Ka)i=ho(e.firestore,Ju),o=Sy(e._key.path),s={next:h=>{t[n]&&t[n](NU(i,e,h))},error:t[n+1],complete:t[n+2]};else{const h=ho(e,ld);i=ho(h.firestore,Ju),o=h._query;const m=new VN(i);s={next:p=>{t[n]&&t[n](new Ph(i,m,h,p))},error:t[n+1],complete:t[n+2]},_U(e._query)}return function(m,p,v,x){const E=new IN(x),_=new BN(p,E,v);return m.asyncQueue.enqueueAndForget(async()=>_N(await mw(m),_)),()=>{E.Nu(),m.asyncQueue.enqueueAndForget(async()=>SN(await mw(m),_))}}(k1(i),o,a,s)}function R1(e,t){return function(n,a){const s=new zA;return n.asyncQueue.enqueueAndForget(async()=>DY(await GY(n),a,s)),s.promise}(k1(e),t)}function NU(e,t,r){const n=r.docs.get(t._key),a=new VN(e);return new Uh(e,a,t._key,n,new Vg(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sJ{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=F1(t)}set(t,r,n){this._verifyNotCommitted();const a=l5(t,this._firestore),s=HN(a.converter,r,n),i=FN(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,mo.none())),this}update(t,r,n,...a){this._verifyNotCommitted();const s=l5(t,this._firestore);let i;return i=typeof(r=oa(r))=="string"||r instanceof T1?bU(this._dataReader,"WriteBatch.update",s._key,r,n,a):vU(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,mo.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=l5(t,this._firestore);return this._mutations=this._mutations.concat(new Iy(r._key,mo.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Wt(xt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function l5(e,t){if((e=oa(e)).firestore!==t)throw new Wt(xt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function iJ(){return new jN("serverTimestamp")}function oJ(...e){return new DN("arrayUnion",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(e){return k1(e=ho(e,Ju)),new sJ(e,t=>R1(e,t))}(function(t,r=!0){(function(a){Ep=a})(d0),jf(new XA("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new Ju(new eW(n.getProvider("auth-internal")),new nW(i,n.getProvider("app-check-internal")),function(A,d){if(!Object.prototype.hasOwnProperty.apply(A.options,["projectId"]))throw new Wt(xt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lx(A.options.projectId,d)}(i,a),i);return s={useFetchStreams:r,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),sc(EI,CI,t),sc(EI,CI,"esm2020")})();const lJ={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},BU=WS(lJ),L1=XL(BU),$r=pU(BU),cJ=Object.freeze(Object.defineProperty({__proto__:null,auth:L1,db:$r},Symbol.toStringTag,{value:"Module"})),uJ=async(e,t)=>{try{return(await Rq(L1,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},c5=async()=>{try{await Uq(L1)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},AJ=async e=>{try{await Dq(L1,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},kU=async e=>{try{const t=vr($r,"usuarios",e),r=await j1(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontró perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};var Gt=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(Gt||{}),un=(e=>(e.EVALUACION="Evaluación",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedagógica",e))(un||{}),Nh=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Guía de Aprendizaje",e.RUBRICA="Rúbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(Nh||{});const dJ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),Fs="w-6 h-6",Qy="w-24 h-24",GN=()=>l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo Gestión Pedagógica LIR",className:"w-32 h-32 object-contain"}),fJ=()=>l.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M9 18h6"}),l.jsx("path",{d:"M10 22h4"}),l.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),hJ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),mJ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Fs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),zg=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Fs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),Gg=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Fs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),TU=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),pJ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Qy,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),gJ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Qy,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),xJ=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Qy,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),vJ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Qy,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),bJ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Fs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),yF=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Fs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),rb=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Fs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),u5=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Fs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),nb=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Fs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),A5=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Fs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),EF=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Fs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),wJ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Fs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),yJ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Fs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),EJ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Fs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),CJ=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Fs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),CF=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Fs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),_J=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Fs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),d5=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Fs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),SJ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Fs,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),NJ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Fs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),_F=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Fs,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),BJ=[{id:Gt.SUBDIRECCION,label:"Subdirección Pedagógica",icon:l.jsx(pJ,{})},{id:Gt.PROFESORADO,label:"Profesorado",icon:l.jsx(gJ,{})},{id:Gt.COORDINACION_TP,label:"Coordinación TP",icon:l.jsx(xJ,{})},{id:Gt.ESTUDIANTE,label:"Estudiantes",icon:l.jsx(vJ,{})}],kJ={[Gt.SUBDIRECCION]:[{name:"Dashboard",icon:l.jsx(bJ,{})},{name:"Administración",icon:l.jsx(CJ,{})},{name:"Seguimiento Curricular",icon:l.jsx(NJ,{})},{name:"Acompañamiento docente",icon:l.jsx(EJ,{})},{name:"Análisis Taxonómico",icon:l.jsx(_F,{})},{name:"Interdisciplinario",icon:l.jsx(d5,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:l.jsx(yF,{})},{name:"Crear horarios",icon:l.jsx(u5,{})},{name:"Seguimiento de acciones pedagógicas",icon:l.jsx(nb,{})},{name:"Inclusión",icon:l.jsx(CF,{})},{name:"Calendario Académico",icon:l.jsx(rb,{})},{name:"Muro de Anuncios",icon:l.jsx(zg,{})},{name:"Mensajería Interna",icon:l.jsx(Gg,{})},{name:"Generador de Actas",icon:l.jsx(A5,{})}],[Gt.PROFESORADO]:[{name:"Planificación",icon:l.jsx(EF,{})},{name:"Mis Acompañamientos",icon:l.jsx(_J,{})},{name:"Recursos de Aprendizaje",icon:l.jsx(wJ,{})},{name:"Análisis Taxonómico",icon:l.jsx(_F,{})},{name:"Interdisciplinario",icon:l.jsx(d5,{})},{name:"Inclusión",icon:l.jsx(CF,{})},{name:"Actividades Remotas",icon:l.jsx(yJ,{})},{name:"Evaluación de Aprendizajes",icon:l.jsx(A5,{})},{name:"Evaluaciones Formativas",icon:l.jsx(nb,{})},{name:"Calendario Académico",icon:l.jsx(rb,{})},{name:"Muro de Anuncios",icon:l.jsx(zg,{})},{name:"Mensajería Interna",icon:l.jsx(Gg,{})},{name:"Generador de Actas",icon:l.jsx(yF,{})}],[Gt.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:l.jsx(nb,{})},{name:"Asistencia Dual",icon:l.jsx(u5,{})},{name:"Pañol",icon:l.jsx(SJ,{})},{name:"Gestión de Empresas",icon:l.jsx(dJ,{})},{name:"Calendario Académico",icon:l.jsx(rb,{})},{name:"Muro de Anuncios",icon:l.jsx(zg,{})},{name:"Mensajería Interna",icon:l.jsx(Gg,{})},{name:"Generador de Actas",icon:l.jsx(A5,{})}],[Gt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:l.jsx(EF,{})},{name:"Evaluación Formativa",icon:l.jsx(nb,{})},{name:"Tareas Interdisciplinarias",icon:l.jsx(d5,{})},{name:"Asistencia a Empresa",icon:l.jsx(u5,{})},{name:"Calendario Académico",icon:l.jsx(rb,{})},{name:"Muro de Anuncios",icon:l.jsx(zg,{})},{name:"Mensajería Interna",icon:l.jsx(Gg,{})}]},SF=["Currículum y Evaluación","Convivencia Escolar","Orientación","Gestión Pedagógica General"],ab=["Pendiente","En Proceso","Cumplida"],km=["1º Medio","2º Medio","3º Medio","4º Medio"],yi=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],qa=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],h4=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],w2=["Lunes","Martes","Miércoles","Jueves","Viernes"],m4=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],TJ={"1º y 2º medio":{"Lengua y Literatura":6,Matemática:6,Inglés:3,"Historia y Geografía":4,"Educación Física":2,Ciencias:4,"Artes/Música":2,Tecnología:2,Orientación:1},"3º y 4º medio (Humanista-Científico)":{"Lengua y Literatura":4,Matemática:4,Inglés:2,"Historia y Geografía":3,"Educación Ciudadana":2,Filosofía:3,"Ciencias para la Ciudadanía":2,"Educación Física":2},"3º y 4º medio (Técnico-Profesional)":{"Lengua y Literatura":2,Matemática:2,Inglés:2,"Historia y Geografía":2,Filosofía:2,"Educación Física":2,"Módulo TP":18}},uf={[un.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[un.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[un.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[un.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},IJ=Object.values(Nh),f5=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],h5=["Vinculado","Desvinculado","En proceso","Empresa"],Mh=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],FJ=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],gw=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],Ax=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],IU=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],sb=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],jJ=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[n,a]=Q.useState(""),[s,i]=Q.useState(""),[o,c]=Q.useState("login"),A=m=>{m.preventDefault(),e(n,s)},d=m=>{m.preventDefault(),t(n),c("forgot_sent")},h=()=>o==="forgot"?l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:m=>a(m.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),l.jsx("div",{className:"text-sm text-center",children:l.jsx("button",{type:"button",onClick:()=>c("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):o==="forgot_sent"?l.jsxs("div",{className:"text-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),l.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",l.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contraseña."]}),l.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),l.jsx("button",{type:"button",onClick:()=>{c("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):l.jsxs("form",{onSubmit:A,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:m=>a(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:m=>i(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:l.jsx("p",{children:r})}),l.jsx("div",{className:"text-sm text-center",children:l.jsx("button",{type:"button",onClick:()=>c("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(GN,{})}),l.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),l.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:h()}),l.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},m5=({trigger:e,children:t,onOpen:r})=>{const[n,a]=Q.useState(!1),s=Q.useRef(null),i=()=>{const c=!n;a(c),c&&r&&r()},o=c=>{s.current&&!s.current.contains(c.target)&&a(!1)};return Q.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),l.jsxs("div",{className:"relative",ref:s,children:[l.jsx("div",{onClick:i,children:e}),n&&l.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:t})]})},NF="usuariosLiceo",DJ=({user:e,onClose:t,onSave:r})=>{const[n,a]=Q.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),s=o=>{a({...n,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const c={...e,...n};try{const A=localStorage.getItem(NF);let d=A?JSON.parse(A):[];const h=d.findIndex(m=>m.id===e.id);h>-1?d[h]=c:d.push(c),localStorage.setItem(NF,JSON.stringify(d)),r(c),t()}catch(A){console.error("Failed to save user profile:",A),alert("No se pudo guardar el perfil.")}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:l.jsxs("form",{onSubmit:i,children:[l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),l.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),l.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),l.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),l.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},BF="usuariosLiceo",RJ=({user:e,onClose:t,onSave:r})=>{const[n,a]=Q.useState(""),[s,i]=Q.useState(""),[o,c]=Q.useState(null),A=d=>{if(d.preventDefault(),c(null),!n){c("La contraseña no puede estar en blanco.");return}if(n!==s){c("Las contraseñas no coinciden.");return}const h={...e,password:n};try{const m=localStorage.getItem(BF);let p=m?JSON.parse(m):[];const v=p.findIndex(x=>x.id===e.id);v>-1?p[v]=h:p.push(h),localStorage.setItem(BF,JSON.stringify(p)),r(h),t()}catch(m){console.error("Failed to save new password:",m),c("No se pudo guardar la nueva contraseña.")}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:l.jsxs("form",{onSubmit:A,children:[l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),l.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:l.jsx("p",{children:o})})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})},kF="anunciosMuro",TF="mensajesInternos",IF="lir-read-status",LJ=({user:e})=>{if(e.fotoUrl)return l.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return l.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},OJ=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:s,toggleSidebar:i,unreadMessagesCount:o,refreshUnreadCount:c})=>{const[A,d]=Q.useState([]),[h,m]=Q.useState([]),[p,v]=Q.useState(!1),[x,E]=Q.useState(!1),_=Q.useCallback(()=>{try{const L=localStorage.getItem(`${IF}-${e.id}`);return L?JSON.parse(L):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),B=Q.useCallback(L=>{try{localStorage.setItem(`${IF}-${e.id}`,JSON.stringify(L))}catch(k){console.error("Failed to set read status:",k)}},[e.id]);Q.useEffect(()=>{const L=JSON.parse(localStorage.getItem(kF)||"[]"),k=_();d(L.filter(y=>!k.announcements.includes(y.id)));const w=JSON.parse(localStorage.getItem(TF)||"[]");m(w.filter(y=>y.para===e.email).sort((y,N)=>new Date(N.fecha).getTime()-new Date(y.fecha).getTime()).slice(0,5))},[e.id,_,o]);const T=()=>{const L=_(),k=JSON.parse(localStorage.getItem(kF)||"[]").map(w=>w.id);L.announcements=k,B(L),d([])},I=()=>{const L=_(),w=JSON.parse(localStorage.getItem(TF)||"[]").filter(y=>y.para===e.email).map(y=>y.id);L.messages=[...new Set([...L.messages,...w])],B(L),c()};return l.jsxs(l.Fragment,{children:[l.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:l.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:l.jsx(hJ,{})}),l.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[l.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),l.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),l.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),l.jsx("div",{className:"flex-1 flex justify-center",children:l.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:l.jsx(mJ,{})})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"flex items-center gap-3",children:l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"h-10 w-10 object-contain"})}),l.jsx(m5,{onOpen:T,trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Notificaciones",children:[l.jsx(zg,{}),A.length>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:A.length})]}),children:l.jsxs("div",{className:"p-2",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),l.jsxs("ul",{className:"mt-1",children:[A.slice(0,3).map(L=>l.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[l.jsx("p",{className:"font-bold dark:text-slate-200",children:L.titulo}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:L.mensaje})]},L.id)),A.length===0&&l.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),l.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),l.jsx(m5,{onOpen:I,trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[l.jsx(Gg,{}),o>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o})]}),children:l.jsxs("div",{className:"p-2",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),l.jsxs("ul",{className:"mt-1",children:[h.slice(0,3).map(L=>l.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[l.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",L.de]}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:L.asunto})]},L.id)),h.length===0&&l.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),l.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),l.jsx(m5,{trigger:l.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:l.jsx(LJ,{user:e})}),children:l.jsxs("div",{className:"p-2",children:[l.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),l.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[l.jsx("li",{children:l.jsx("button",{onClick:()=>v(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),l.jsx("li",{children:l.jsx("button",{onClick:()=>E(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),s&&l.jsx("li",{children:l.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),l.jsx("li",{children:l.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),p&&l.jsx(DJ,{user:e,onClose:()=>v(!1),onSave:n}),x&&l.jsx(RJ,{user:e,onClose:()=>E(!1),onSave:n})]})};var wh={};const UJ={apiKey:wh.NEXT_PUBLIC_FIREBASE_API_KEY||"tu-api-key",authDomain:wh.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"tu-proyecto.firebaseapp.com",projectId:wh.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"tu-proyecto-id",storageBucket:wh.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"tu-proyecto.appspot.com",messagingSenderId:wh.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"123456789",appId:wh.NEXT_PUBLIC_FIREBASE_APP_ID||"1:123456789:web:abcdef",measurementId:wh.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-XXXXXXXXXX"},FU=ZT().length===0?WS(UJ):ZT()[0],kt=pU(FU),PJ=XL(FU),O1="reemplazos_docentes",MJ="usuarios",KN=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((s=(a=t.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaActualizacion}},QJ=e=>{const t=e.data();return{id:e.id,...t}},HJ=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:Ar.fromDate(new Date),fechaActualizacion:Ar.fromDate(new Date)};return(await ha(Ft(kt,O1),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},VJ=async(e,t)=>{try{const r=vr(kt,O1,e),n=await j1(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await zs(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},zJ=(e,t,r=50)=>{try{const n=nr(Ft(kt,O1),Mn("userId","==",e),en("diaAusencia","desc"),_f(r));return br(n,a=>{const s=a.docs.map(KN);t(s)},a=>{console.error("Error en suscripción a reemplazos:",a),t([])})}catch(n){return console.error("Error al crear la suscripción de reemplazos:",n),()=>{}}},GJ=e=>{try{const t=nr(Ft(kt,MJ),Mn("profile","==",Gt.PROFESORADO));return br(t,n=>{const a=n.docs.map(QJ);e(a)},n=>{console.error("Error al obtener la lista de profesores:",n),e([])})}catch(t){return console.error("Error al crear la suscripción de profesores:",t),()=>{}}},KJ=async e=>{try{const t=nr(Ft(kt,O1),Mn("userId","==",e)),n=(await Ts(t)).docs.map(KN),a=n.length,s=n.filter(o=>o.resultado==="Hora realizada").length,i=n.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:i,porcentajeRealizadas:a>0?s/a*100:0}}catch(t){throw console.error("Error al obtener estadísticas:",t),new Error("No se pudieron obtener las estadísticas")}},qJ=async(e,t)=>{try{if(!t.trim())return[];const r=nr(Ft(kt,O1),Mn("userId","==",e),en("diaAusencia","desc"),_f(100)),a=(await Ts(r)).docs.map(KN),s=t.toLowerCase();return a.filter(i=>i.docenteAusente.toLowerCase().includes(s)||i.docenteReemplazante.toLowerCase().includes(s)||i.curso.toLowerCase().includes(s)||i.diaAusencia.includes(s)||i.asignaturaAusente.toLowerCase().includes(s)||i.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}},$J=Array.from({length:12},(e,t)=>t+1),FF={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},WJ=e=>{const[t,r]=Q.useState([]),[n,a]=Q.useState(!0),[s,i]=Q.useState(null);Q.useEffect(()=>e?zJ(e,h=>{r(h),a(!1)}):void 0,[e]);const o=Q.useCallback(async d=>{try{return i(null),await HJ(d,e)}catch(h){throw i(h instanceof Error?h.message:"Error al guardar"),h}},[e]),c=Q.useCallback(async d=>{try{i(null),await VJ(d,e)}catch(h){throw i(h instanceof Error?h.message:"Error al eliminar"),h}},[e]),A=Q.useCallback(async d=>{try{return i(null),d.trim()?await qJ(e,d):t}catch(h){return i(h instanceof Error?h.message:"Error en la búsqueda"),[]}},[e,t]);return{reemplazos:t,loading:n,error:s,save:o,remove:c,search:A}},XJ=()=>{const[e,t]=Q.useState([]),[r,n]=Q.useState(!0);Q.useEffect(()=>GJ(i=>{t(i),n(!1)}),[]);const a=Q.useMemo(()=>e.map(s=>s.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:a,loading:r}},YJ=({selectedBlocks:e,onChange:t,legend:r,disabled:n=!1})=>l.jsxs("fieldset",{children:[l.jsx("legend",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:r}),l.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:$J.map(a=>l.jsxs("label",{className:`flex items-center space-x-2 p-2 border rounded-lg transition-colors ${n?"opacity-50 cursor-not-allowed":"hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-700"}`,children:[l.jsx("input",{type:"checkbox",value:a,checked:e.includes(a),onChange:t,disabled:n,className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500 disabled:opacity-50"}),l.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:a})]},a))})]}),JJ=({userId:e})=>{const[t,r]=Q.useState(null),[n,a]=Q.useState(!1),s=Q.useCallback(async()=>{try{a(!0);const i=new Date,o=(i.getMonth()+1).toString(),c=i.getFullYear().toString(),A=await KJ(e);r(A)}catch(i){console.error("Error al cargar estadísticas:",i)}finally{a(!1)}},[e]);return Q.useEffect(()=>{e&&s()},[e,s]),n?l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx("div",{className:"animate-pulse flex justify-center",children:l.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):t?l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[l.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Estadísticas del Mes"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:t.totalReemplazos}),l.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Total"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t.horasRealizadas}),l.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Realizadas"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:t.horasCubiertas}),l.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Cubiertas"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[t.porcentajeRealizadas.toFixed(1),"%"]}),l.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Efectividad"})]})]})]}):null},ZJ=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:i,error:o}=WJ(t),{profesorNames:c,loading:A}=XJ(),[d,h]=Q.useState(FF),[m,p]=Q.useState(""),[v,x]=Q.useState([]),[E,_]=Q.useState(null),[B,T]=Q.useState(!1),[I,L]=Q.useState(!1);Q.useEffect(()=>{(async()=>{if(!m.trim()){x(r);return}L(!0);try{const F=await s(m);x(F)}catch(F){console.error("Error en búsqueda:",F),x(r)}finally{L(!1)}})()},[r,m,s]);const k=Q.useCallback(j=>{const{name:F,value:P}=j.target;h(M=>({...M,[F]:P}))},[]),w=Q.useCallback(j=>{const F=parseInt(j.target.value,10);h(P=>{const M=P.bloquesAfectados,ee=M.includes(F)?M.filter(W=>W!==F):[...M,F].sort((W,te)=>W-te);return{...P,bloquesAfectados:ee}})},[]),y=Q.useCallback(async j=>{j.preventDefault(),_(null),T(!0);const{docenteAusente:F,asignaturaAusente:P,curso:M,diaAusencia:ee,bloquesAfectados:W,docenteReemplazante:te,asignaturaReemplazante:G}=d;if(!F||!P||!M||!ee||!te||!G||W.length===0){_("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),T(!1);return}if(F===te){_("El docente ausente y el reemplazante no pueden ser la misma persona."),T(!1);return}const q=new Date(ee),z=new Date;if(z.setHours(0,0,0,0),q<z&&!window.confirm("La fecha seleccionada es anterior a hoy. ¿Desea continuar?")){T(!1);return}try{const Z=P.trim().toLowerCase()===G.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",R={...d,resultado:Z};await n(R),h(FF);const K=Z==="Hora realizada"?"✅ Reemplazo registrado - Hora realizada":"⚠️ Reemplazo registrado - Hora cubierta, no realizada",X=document.createElement("div");X.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",X.textContent=K,document.body.appendChild(X),setTimeout(()=>{document.body.contains(X)&&document.body.removeChild(X)},3e3)}catch(Z){console.error("Error al guardar reemplazo:",Z),_("Error al guardar el reemplazo. Por favor, intente nuevamente.")}finally{T(!1)}},[d,n]),N=Q.useCallback(async j=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await a(j)}catch(F){console.error("Error al eliminar reemplazo:",F),alert("Error al eliminar el reemplazo. Por favor, intente nuevamente.")}},[a]),U="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400 disabled:opacity-50 disabled:cursor-not-allowed";return!e||!e.email&&!e.id?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),l.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(e)]})]})}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx(JJ,{userId:t}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Registro de Inasistencias y Reemplazos"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete el formulario para registrar una nueva suplencia."}),A?l.jsxs("div",{className:"flex justify-center items-center py-8",children:[l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando profesores..."})]}):l.jsxs("form",{onSubmit:y,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Ausente"}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"docenteAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),l.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:k,className:U,disabled:B,required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(j=>l.jsx("option",{value:j,children:j},j))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignaturaAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:k,className:U,disabled:B,required:!0,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),yi.map(j=>l.jsx("option",{value:j,children:j},j))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsxs("select",{name:"curso",value:d.curso,onChange:k,className:U,disabled:B,required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),qa.map(j=>l.jsx("option",{value:j,children:j},j))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"diaAusencia",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Día Ausencia"}),l.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:k,className:U,disabled:B,required:!0})]}),l.jsx(YJ,{legend:"Bloques Afectados",selectedBlocks:d.bloquesAfectados,onChange:w,disabled:B})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Reemplazante"}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"docenteReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),l.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:k,className:U,disabled:B,required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(j=>l.jsx("option",{value:j,children:j},j))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignaturaReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:k,className:U,disabled:B,required:!0,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),yi.map(j=>l.jsx("option",{value:j,children:j},j))]})]}),d.asignaturaAusente&&d.asignaturaReemplazante&&l.jsxs("div",{className:"mt-6 p-4 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600",children:[l.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Vista Previa del Resultado:"}),l.jsx("div",{className:`px-3 py-2 rounded-full text-sm font-semibold inline-flex ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"✅ Hora realizada":"⚠️ Hora cubierta, no realizada"}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden - se considera hora realizada":"Las asignaturas no coinciden - se considera hora cubierta pero no realizada"})]})]})]}),(E||o)&&l.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsx("p",{className:"text-red-600 dark:text-red-400",children:E||o})}),l.jsx("div",{className:"pt-4 text-right",children:l.jsxs("button",{type:"submit",disabled:B||A,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[B&&l.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),B?"Registrando...":"Registrar Reemplazo"]})})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Reemplazos"}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)...",value:m,onChange:j=>p(j.target.value),className:`${U} md:w-1/2 pl-10`,disabled:I}),l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:I?l.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}):l.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),m&&l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:I?"Buscando...":`${v.length} resultado(s) encontrado(s)`})]}),i?l.jsxs("div",{className:"flex justify-center items-center py-8",children:[l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando reemplazos..."})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Ausente"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Reemplazante"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Bloques"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Resultado"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:v.length>0?v.map(j=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(j.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:j.curso}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[j.docenteAusente,l.jsx("br",{}),l.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:j.asignaturaAusente})]}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[j.docenteReemplazante,l.jsx("br",{}),l.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:j.asignaturaReemplazante})]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:j.bloquesAfectados.join(", ")}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:l.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${j.resultado==="Hora realizada"?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:j.resultado})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:l.jsx("button",{onClick:()=>N(j.id),title:"Eliminar registro",className:"p-1 text-red-600 hover:text-red-800 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors disabled:opacity-50",disabled:B,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},j.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:m?"No se encontraron registros que coincidan con la búsqueda.":"No hay registros de reemplazos."})})})]})}),v.length>0&&!m&&l.jsxs("div",{className:"mt-4 text-sm text-slate-500 dark:text-slate-400 text-center",children:["Mostrando los últimos ",v.length," registros"]})]})]})},eZ=e=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const t=Ft($r,"reemplazos"),r=nr(t,en("fecha","desc"));return br(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Reemplazos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar reemplazos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a reemplazos:",t),t}},tZ=e=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const t=Ft($r,"acompanamientos"),r=nr(t,en("fecha","desc"));return br(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Acompañamientos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar acompañamientos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a acompañamientos:",t),t}},rZ=e=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const t=Ft($r,"calendar_events"),r=nr(t,en("date","asc"));return br(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Eventos del calendario cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar eventos del calendario:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",t),t}},Bu=({title:e,value:t,description:r,isLoading:n=!1})=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),n?l.jsxs("div",{className:"flex items-center mt-2",children:[l.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),yh=({title:e,data:t,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=Q.useMemo(()=>t.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[t]),i=Q.useMemo(()=>Math.max(...s,1),[s]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),a?l.jsxs("div",{className:"flex justify-center items-center py-8",children:[l.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):l.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((o,c)=>(typeof c.value=="number"?c.value:0)-(typeof o.value=="number"?o.value:0)).map((o,c)=>{const A=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),l.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(o.value)})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${A/i*100}%`}})})]},o.label+c)}):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},nZ=()=>{const[e,t]=Q.useState([]),[r,n]=Q.useState([]),[a,s]=Q.useState([]),[i,o]=Q.useState(!0),[c,A]=Q.useState(null);return Q.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const h=3,m=()=>{d++,d>=h&&(o(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const p=eZ(E=>{t(E),m()}),v=tZ(E=>{n(E),m()}),x=rZ(E=>{s(E),m()});return()=>{p(),v(),x()}}catch(p){console.error("❌ Error al configurar suscripciones del dashboard:",p),A(p instanceof Error?p.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:a,loading:i,error:c}},aZ=({currentUser:e})=>{var h,m;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",e),console.log("🔍 Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log("🔍 Dashboard - Verificación de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log("🔍 Dashboard - Profile length:",(h=e==null?void 0:e.profile)==null?void 0:h.length),console.log("🔍 Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((m=e==null?void 0:e.profile)==null?void 0:m.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:n,loading:a,error:s}=nZ(),[i,o]=Q.useState(Ax);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:e==null?void 0:e.profile}),Q.useEffect(()=>{try{const p=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(p?JSON.parse(p):Ax)}catch(p){console.error("Error al leer rúbrica personalizada",p),o(Ax)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!e),console.log("🔍 Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log("❌ Dashboard - currentUser es null/undefined"),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",e.profile),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),l.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[l.jsx("p",{children:l.jsx("strong",{children:"Debug Info:"})}),l.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),l.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),l.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),s)return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),l.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const c=Q.useMemo(()=>{const p=t.length;if(p===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const v=t.filter(L=>L.resultado==="Hora realizada").length,x=p-v,E=`${(v/p*100).toFixed(1)}%`,_=(L,k)=>L.reduce((w,y)=>{const N=y[k];return typeof N=="string"&&(w[N]=(w[N]||0)+1),w},{}),B=_(t,"docenteAusente"),T=_(t,"docenteReemplazante"),I=_(t,"curso");return{totalInasistencias:p,horasRealizadas:v,horasCubiertas:x,tasaCobertura:E,inasistenciasPorDocente:Object.entries(B).map(([L,k])=>({label:L,value:k})),reemplazosPorDocente:Object.entries(T).map(([L,k])=>({label:L,value:k})),inasistenciasPorCurso:Object.entries(I).map(([L,k])=>({label:L,value:k})),distribucionResultados:[{label:"Hora Realizada",value:v},{label:"Hora Cubierta",value:x}]}},[t]),A=Q.useMemo(()=>{const p=r.length;if(p===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const v=new Map;i.forEach(k=>{k.criteria.forEach(w=>{v.set(w.name,k.domain)})});let x=0,E=0;const _={},B={};r.forEach(k=>{_[k.docente]||(_[k.docente]={total:0,count:0}),Object.entries(k.rubricaResultados).forEach(([w,y])=>{x+=y,E++,_[k.docente].total+=y,_[k.docente].count++;const N=v.get(w);N&&(B[N]||(B[N]={total:0,count:0}),B[N].total+=y,B[N].count++)})});const T=E>0?(x/E).toFixed(2):"N/A",I=Object.entries(_).map(([k,w])=>({label:k,value:w.count>0?(w.total/w.count).toFixed(2):0})),L=Object.entries(B).map(([k,w])=>({label:k,value:w.count>0?(w.total/w.count).toFixed(2):0}));return{totalAcompanamientos:p,promedioGeneral:T,desempenoPorDocente:I,desempenoPorDominio:L}},[r,i]),d=Q.useMemo(()=>{const p={[un.EVALUACION]:0,[un.ACTO]:0,[un.ACTIVIDAD_FOCALIZADA]:0,[un.SALIDA_PEDAGOGICA]:0};for(const x of n)p.hasOwnProperty(x.type)&&p[x.type]++;const v=Object.entries(p).map(([x,E])=>({label:uf[x].label,value:E}));return{totalEvaluaciones:p[un.EVALUACION],totalActos:p[un.ACTO],totalActividadesFocalizadas:p[un.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:p[un.SALIDA_PEDAGOGICA],distribucionEventos:v}},[n]);return a?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):c.totalInasistencias===0&&A.totalAcompanamientos===0&&n.length===0?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"📊"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),l.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[l.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),l.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),l.jsx("p",{children:"• Calendario Académico"})]})]}):l.jsxs("div",{className:"space-y-12 animate-fade-in",children:[l.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[l.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),l.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),l.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(Bu,{title:"Total Inasistencias",value:c.totalInasistencias,description:"Registros totales",isLoading:a}),l.jsx(Bu,{title:"Horas Realizadas",value:c.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),l.jsx(Bu,{title:"Horas Cubiertas",value:c.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),l.jsx(Bu,{title:"Tasa de Cobertura Efectiva",value:c.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(yh,{title:"Inasistencias por Docente",data:c.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),l.jsx(yh,{title:"Reemplazos por Docente",data:c.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),l.jsx(yh,{title:"Inasistencias por Curso",data:c.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),l.jsx(yh,{title:"Distribución de Resultados",data:c.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(Bu,{title:"Total Acompañamientos",value:A.totalAcompanamientos,description:"Registros realizados",isLoading:a}),l.jsx(Bu,{title:"Promedio General",value:A.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(yh,{title:"Desempeño Promedio por Docente",data:A.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:a}),l.jsx(yh,{title:"Desempeño Promedio por Dominio",data:A.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:a})]})]}),n.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(Bu,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),l.jsx(Bu,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),l.jsx(Bu,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),l.jsx(Bu,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(yh,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),a?l.jsxs("div",{className:"flex justify-center items-center py-8",children:[l.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):l.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(p=>new Date(p.date)>=new Date).slice(0,5).map((p,v)=>{var x,E;return l.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:p.responsables||"Evento sin título"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(p.date).toLocaleDateString("es-CL")}),p.ubicacion&&l.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",p.ubicacion]})]}),l.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((x=uf[p.type])==null?void 0:x.color)||"bg-gray-100 text-gray-800"}`,children:((E=uf[p.type])==null?void 0:E.label)||p.type})]})},p.id||v)}),n.filter(p=>new Date(p.date)>=new Date).length===0&&l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+n.length}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(p=>p.docenteAusente),...r.map(p=>p.docente)]).size}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(p=>p.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),l.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[l.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),l.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};var jF;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(jF||(jF={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DF;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(DF||(DF={}));var RF;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(RF||(RF={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF=["user","model","function","system"];var OF;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(OF||(OF={}));var UF;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(UF||(UF={}));var PF;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(PF||(PF={}));var MF;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(MF||(MF={}));var dx;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(dx||(dx={}));var QF;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(QF||(QF={}));var HF;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(HF||(HF={}));var VF;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(VF||(VF={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class J0 extends Xi{constructor(t,r){super(t),this.response=r}}class jU extends Xi{constructor(t,r,n,a){super(t),this.status=r,this.statusText=n,this.errorDetails=a}}class Sf extends Xi{}class DU extends Xi{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sZ="https://generativelanguage.googleapis.com",iZ="v1beta",oZ="0.24.1",lZ="genai-js";var r0;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(r0||(r0={}));class cZ{constructor(t,r,n,a,s){this.model=t,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=s}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||iZ;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||sZ}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function uZ(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${lZ}/${oZ}`),t.join(" ")}async function AZ(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",uZ(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new Sf(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,s]of n.entries()){if(a==="x-goog-api-key")throw new Sf(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new Sf(`Header name ${a} can only be set using the apiClient field`);r.append(a,s)}}return r}async function dZ(e,t,r,n,a,s){const i=new cZ(e,t,r,n,s);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},pZ(s)),{method:"POST",headers:await AZ(i),body:a})}}async function U1(e,t,r,n,a,s={},i=fetch){const{url:o,fetchOptions:c}=await dZ(e,t,r,n,a,s);return fZ(o,c,i)}async function fZ(e,t,r=fetch){let n;try{n=await r(e,t)}catch(a){hZ(a,e)}return n.ok||await mZ(n,e),n}function hZ(e,t){let r=e;throw r.name==="AbortError"?(r=new DU(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof jU||e instanceof Sf||(r=new Xi(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function mZ(e,t){let r="",n;try{const a=await e.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new jU(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function pZ(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),y2(e.candidates[0]))throw new J0(`${ef(e)}`,e);return gZ(e)}else if(e.promptFeedback)throw new J0(`Text not available. ${ef(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),y2(e.candidates[0]))throw new J0(`${ef(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),zF(e)[0]}else if(e.promptFeedback)throw new J0(`Function call not available. ${ef(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),y2(e.candidates[0]))throw new J0(`${ef(e)}`,e);return zF(e)}else if(e.promptFeedback)throw new J0(`Function call not available. ${ef(e)}`,e)},e}function gZ(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.text&&s.push(i.text),i.executableCode&&s.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&s.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function zF(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.functionCall&&s.push(i.functionCall);if(s.length>0)return s}const xZ=[dx.RECITATION,dx.SAFETY,dx.LANGUAGE];function y2(e){return!!e.finishReason&&xZ.includes(e.finishReason)}function ef(e){var t,r,n;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const s=e.candidates[0];y2(s)&&(a+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(a+=`: ${s.finishMessage}`))}return a}function Qx(e){return this instanceof Qx?(this.v=e,this):new Qx(e)}function vZ(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(m){n[m]&&(a[m]=function(p){return new Promise(function(v,x){s.push([m,p,v,x])>1||o(m,p)})})}function o(m,p){try{c(n[m](p))}catch(v){h(s[0][3],v)}}function c(m){m.value instanceof Qx?Promise.resolve(m.value.v).then(A,d):h(s[0][2],m)}function A(m){o("next",m)}function d(m){o("throw",m)}function h(m,p){m(p),s.shift(),s.length&&o(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function bZ(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=EZ(t),[n,a]=r.tee();return{stream:yZ(n),response:wZ(a)}}async function wZ(e){const t=[],r=e.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return qN(CZ(t));t.push(a)}}function yZ(e){return vZ(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:a}=yield Qx(r.read());if(a)break;yield yield Qx(qN(n))}})}function EZ(e){const t=e.getReader();return new ReadableStream({start(n){let a="";return s();function s(){return t.read().then(({value:i,done:o})=>{if(o){if(a.trim()){n.error(new Xi("Failed to parse stream"));return}n.close();return}a+=i;let c=a.match(GF),A;for(;c;){try{A=JSON.parse(c[1])}catch{n.error(new Xi(`Error parsing JSON response: "${c[1]}"`));return}n.enqueue(A),a=a.substring(c[0].length),c=a.match(GF)}return s()}).catch(i=>{let o=i;throw o.stack=i.stack,o.name==="AbortError"?o=new DU("Request aborted when reading from the stream"):o=new Xi("Error reading from the stream"),o})}}})}function CZ(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let a=0;for(const s of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=s.citationMetadata,r.candidates[a].groundingMetadata=s.groundingMetadata,r.candidates[a].finishReason=s.finishReason,r.candidates[a].finishMessage=s.finishMessage,r.candidates[a].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[a].content||(r.candidates[a].content={role:s.content.role||"user",parts:[]});const i={};for(const o of s.content.parts)o.text&&(i.text=o.text),o.functionCall&&(i.functionCall=o.functionCall),o.executableCode&&(i.executableCode=o.executableCode),o.codeExecutionResult&&(i.codeExecutionResult=o.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),r.candidates[a].content.parts.push(i)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RU(e,t,r,n){const a=await U1(t,r0.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return bZ(a)}async function LU(e,t,r,n){const s=await(await U1(t,r0.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:qN(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function Hx(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return _Z(t)}function _Z(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const s of e)"functionResponse"in s?(r.parts.push(s),a=!0):(t.parts.push(s),n=!0);if(n&&a)throw new Xi("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new Xi("No content is provided for sending chat message.");return n?t:r}function SZ(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new Sf("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const s=Hx(e);n.contents=[s]}return{generateContentRequest:n}}function KF(e){let t;return e.contents?t=e:t={contents:[Hx(e)]},e.systemInstruction&&(t.systemInstruction=OU(e.systemInstruction)),t}function NZ(e){return typeof e=="string"||Array.isArray(e)?{content:Hx(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],BZ={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function kZ(e){let t=!1;for(const r of e){const{role:n,parts:a}=r;if(!t&&n!=="user")throw new Xi(`First content should be with role 'user', got ${n}`);if(!LF.includes(n))throw new Xi(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(LF)}`);if(!Array.isArray(a))throw new Xi("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new Xi("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of a)for(const c of qF)c in o&&(s[c]+=1);const i=BZ[n];for(const o of qF)if(!i.includes(o)&&s[o]>0)throw new Xi(`Content with role '${n}' can't contain '${o}' part`);t=!0}}function $F(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WF="SILENT_ERROR";class TZ{constructor(t,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(kZ(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,a,s,i,o,c;await this._sendPromise;const A=Hx(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,A]},h=Object.assign(Object.assign({},this._requestOptions),r);let m;return this._sendPromise=this._sendPromise.then(()=>LU(this._apiKey,this.model,d,h)).then(p=>{var v;if($F(p.response)){this._history.push(A);const x=Object.assign({parts:[],role:"model"},(v=p.response.candidates)===null||v===void 0?void 0:v[0].content);this._history.push(x)}else{const x=ef(p.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}m=p}).catch(p=>{throw this._sendPromise=Promise.resolve(),p}),await this._sendPromise,m}async sendMessageStream(t,r={}){var n,a,s,i,o,c;await this._sendPromise;const A=Hx(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,A]},h=Object.assign(Object.assign({},this._requestOptions),r),m=RU(this._apiKey,this.model,d,h);return this._sendPromise=this._sendPromise.then(()=>m).catch(p=>{throw new Error(WF)}).then(p=>p.response).then(p=>{if($F(p)){this._history.push(A);const v=Object.assign({},p.candidates[0].content);v.role||(v.role="model"),this._history.push(v)}else{const v=ef(p);v&&console.warn(`sendMessageStream() was unsuccessful. ${v}. Inspect response object for details.`)}}).catch(p=>{p.message!==WF&&console.error(p)}),m}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IZ(e,t,r,n){return(await U1(t,r0.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FZ(e,t,r,n){return(await U1(t,r0.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function jZ(e,t,r,n){const a=r.requests.map(i=>Object.assign(Object.assign({},i),{model:t}));return(await U1(t,r0.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=OU(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const a=KF(t),s=Object.assign(Object.assign({},this._requestOptions),r);return LU(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}async generateContentStream(t,r={}){var n;const a=KF(t),s=Object.assign(Object.assign({},this._requestOptions),r);return RU(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}startChat(t){var r;return new TZ(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=SZ(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return IZ(this.apiKey,this.model,n,a)}async embedContent(t,r={}){const n=NZ(t),a=Object.assign(Object.assign({},this._requestOptions),r);return FZ(this.apiKey,this.model,n,a)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return jZ(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new Xi("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new XF(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new Sf("Cached content must contain a `name` field.");if(!t.model)throw new Sf("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const i of a)if(r!=null&&r[i]&&t[i]&&(r==null?void 0:r[i])!==t[i]){if(i==="model"){const o=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(o===c)continue}throw new Sf(`Different value for "${i}" specified in modelParams (${r[i]}) and cachedContent (${t[i]})`)}const s=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new XF(this.apiKey,s,n)}}const $N="horario_asignaciones",UU="horarios_generados",DZ="usuarios",PU=e=>{const t=e.data();return{id:e.id,...t}},RZ=e=>{const t=nr(Ft(kt,$N));return br(t,n=>{const a=n.docs.map(s=>PU(s));e(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),e([])})},LZ=async e=>{try{return(await ha(Ft(kt,$N),e)).id}catch(t){throw console.error("Error al agregar asignación:",t),new Error("No se pudo agregar la asignación.")}},OZ=async e=>{try{const t=vr(kt,$N,e);await zs(t)}catch(t){throw console.error("Error al eliminar asignación:",t),new Error("No se pudo eliminar la asignación.")}},YF=async e=>{try{const t=vr(kt,UU,"global");await no(t,{data:e})}catch(t){throw console.error("Error al guardar los horarios:",t),new Error("No se pudieron guardar los horarios generados.")}},UZ=e=>{const t=vr(kt,UU,"global");return br(t,n=>{n.exists()?e(n.data().data||{}):e({})},n=>{console.error("Error al suscribirse a los horarios:",n),e({})})},PZ=e=>{const t=nr(Ft(kt,DZ),Mn("profile","==",Gt.PROFESORADO));return br(t,n=>{const a=n.docs.map(s=>PU(s));e(a)},n=>{console.error("Error al suscribirse a los profesores:",n),e([])})},MZ=({horarios:e})=>Object.keys(e).length===0?l.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'Aún no se ha generado ningún horario. Utilice la pestaña de "Configuración" para generar uno.'})}):l.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full border-collapse",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),qa.map(t=>l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:t},t))]})}),l.jsx("tbody",{children:w2.map(t=>l.jsxs(mt.Fragment,{children:[l.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:l.jsx("th",{colSpan:2+qa.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:t.toUpperCase()})}),m4.map(({bloque:r,inicio:n,fin:a})=>l.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:r}),l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${n} - ${a}`}),qa.map(s=>{var o,c;const i=(c=(o=e[s])==null?void 0:o[t])==null?void 0:c[r];return l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?l.jsxs("div",{className:"flex flex-col justify-center h-full",children:[l.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),l.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):l.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${s}-${t}-${r}`)})]},`${t}-${r}`))]},t))})]})}),QZ=()=>{const[e,t]=Q.useState([]),[r,n]=Q.useState({curso:"",asignatura:"",profesor:""}),[a,s]=Q.useState([]),[i,o]=Q.useState({}),[c,A]=Q.useState(qa[0]),[d,h]=Q.useState(!1),[m,p]=Q.useState(!0),[v,x]=Q.useState(null),[E,_]=Q.useState(null),[B,T]=Q.useState(null),[I,L]=Q.useState({asignatura:"",profesor:""}),[k,w]=Q.useState("edicion"),[y,N]=Q.useState("");Q.useEffect(()=>{p(!0);const G=RZ(t),q=UZ(o),z=PZ(Z=>{const R=Z.map(K=>K.nombreCompleto).sort();s(R),p(!1)});return()=>{G(),q(),z()}},[]);const U=async G=>{if(G.preventDefault(),x(null),!r.curso||!r.asignatura||!r.profesor){x("Todos los campos de la asignación son obligatorios.");return}try{await LZ({curso:r.curso,asignatura:r.asignatura,profesor:r.profesor}),n({curso:"",asignatura:"",profesor:""})}catch(q){x(q instanceof Error?q.message:"Error al guardar la asignación.")}},j=async G=>{try{await OZ(G)}catch(q){x(q instanceof Error?q.message:"Error al eliminar la asignación.")}},F=async()=>{if(e.length===0){x("Debe agregar al menos una asignación de profesor antes de generar el horario.");return}h(!0),x(null),_(null);try{const G="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",q=new Is(G),z=`
                Eres un asistente experto en planificación de horarios escolares para un liceo técnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Días de la semana: ${w2.join(", ")}
                - Bloques horarios por día: 10 bloques con los siguientes horarios: ${JSON.stringify(m4,null,2)}
                - Cursos del liceo: ${qa.join(", ")}

                **Contexto Adicional de Especialidades (3º y 4º Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecánica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecánica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3°/4° Medio Automotriz" y "3°/4° Medio Industrial" correctamente.

                **Reglas de Asignación de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura según el nivel del curso:
                ${JSON.stringify(TJ,null,2)}
                Notas sobre las reglas:
                - '1º y 2º medio' aplica a cursos que empiezan con '1º' o '2º'.
                - '3º y 4º medio' aplica a cursos que empiezan con '3º' o '4º'.
                - Algunas reglas aplican a cursos específicos (ej. Mecánica).

                **Asignaciones de Profesores (Input):**
                Aquí está la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(e,null,2)}

                **REGLA CRÍTICA INVIOLABLE:**
                La restricción más importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo día y mismo bloque horario. Es físicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las demás. No deben existir topes de horario para ningún profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${y||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma más balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo día si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un único objeto JSON válido, sin texto adicional, explicaciones, ni el bloque \`\`\`json. La estructura del JSON debe ser la siguiente:
                {
                  "1ºA": {
                    "Lunes": { "1": { "asignatura": "Matemática", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemática", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1ºB": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada día de la semana. Cada día tiene claves para cada bloque del 1 al 10. Si un bloque está vacío, usa \`{ "asignatura": null, "profesor": null }\`.
            `,re=(await(await q.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(z)).response).text().replace(/^```json\s*|```\s*$/g,""),ne=JSON.parse(re);await YF(ne),_("¡Horario generado y guardado con éxito!")}catch(G){console.error("Error al generar horario con IA:",G),x("Ocurrió un error al contactar con la IA o al procesar la respuesta. Revisa la consola para más detalles.")}finally{h(!1)}},P=(G,q,z)=>{T({dia:G,bloque:q}),L({asignatura:(z==null?void 0:z.asignatura)||"",profesor:(z==null?void 0:z.profesor)||""})},M=async()=>{if(!B)return;const{dia:G,bloque:q}=B,z=JSON.parse(JSON.stringify(i));z[c]||(z[c]={}),z[c][G]||(z[c][G]={}),z[c][G][q]={asignatura:I.asignatura||null,profesor:I.profesor||null};try{await YF(z),T(null)}catch(Z){x(Z instanceof Error?Z.message:"Error al guardar la edición.")}},ee="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",W=()=>{const G=i[c]||{};return l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[l.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),w2.map(q=>l.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:q},q))]})}),l.jsx("tbody",{children:m4.map(({bloque:q,inicio:z,fin:Z})=>l.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[l.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:q}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${z} - ${Z}`})]}),w2.map(R=>{var re;const K=(B==null?void 0:B.dia)===R&&(B==null?void 0:B.bloque)===q,X=(re=G[R])==null?void 0:re[q];return l.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!K&&P(R,q,X),children:K?l.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[l.jsx("input",{type:"text",placeholder:"Asignatura",value:I.asignatura,onChange:ne=>L(ue=>({...ue,asignatura:ne.target.value})),className:ee+" text-xs mb-1"}),l.jsx("input",{type:"text",placeholder:"Profesor",value:I.profesor,onChange:ne=>L(ue=>({...ue,profesor:ne.target.value})),className:ee+" text-xs"}),l.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[l.jsx("button",{onClick:()=>T(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),l.jsx("button",{onClick:M,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):X!=null&&X.asignatura?l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:X.asignatura}),l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",X.profesor,")"]})]}):l.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${R}-${q}`)})]},q))})]})})},te=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🔧 1. Configuración de Asignaciones"}),l.jsxs("form",{onSubmit:U,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsxs("select",{name:"curso",value:r.curso,onChange:G=>n(q=>({...q,curso:G.target.value})),className:ee,children:[l.jsx("option",{value:"",children:"Seleccione"}),qa.map(G=>l.jsx("option",{value:G,children:G},G))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{name:"asignatura",value:r.asignatura,onChange:G=>n(q=>({...q,asignatura:G.target.value})),className:ee,children:[l.jsx("option",{value:"",children:"Seleccione"}),yi.map(G=>l.jsx("option",{value:G,children:G},G))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),l.jsxs("select",{name:"profesor",value:r.profesor,onChange:G=>n(q=>({...q,profesor:G.target.value})),className:ee,children:[l.jsx("option",{value:"",children:"Seleccione"}),a.map(G=>l.jsx("option",{value:G,children:G},G))]})]}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),l.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:l.jsx("ul",{className:"space-y-2",children:e.map(G=>l.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[l.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[G.curso," - ",G.asignatura," - ",l.jsx("strong",{children:G.profesor})]}),l.jsx("button",{onClick:()=>j(G.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:"×"})]},G.id))})})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🧠 2. Generación Automática con IA"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),l.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:y,onChange:G=>N(G.target.value),rows:3,placeholder:"Ej: Dejar los módulos teóricos en la mañana y los prácticos en la tarde. Evitar poner 2 bloques de matemática seguidos.",className:ee})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("button",{onClick:F,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),v&&l.jsx("p",{className:"text-red-600",children:v}),E&&l.jsx("p",{className:"text-green-600",children:E})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"📅 3. Visualización y Edición por Curso"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),l.jsx("select",{id:"selectCurso",value:c,onChange:G=>A(G.target.value),className:ee+" md:w-1/3",children:qa.map(G=>l.jsx("option",{value:G,children:G},G))})]}),Object.keys(i).length>0?W():l.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Aún no se ha generado ningún horario. Utilice el botón de generación con IA."})})]})]});return m?l.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>w("edicion"),className:`${k==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuración y Edición por Curso"}),l.jsx("button",{onClick:()=>w("global"),className:`${k==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),k==="edicion"?te():l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),l.jsx(MZ,{horarios:i})]})]})},Hy="acciones",HZ=async()=>{try{const e=nr(Ft($r,Hy),en("fechaRegistro","desc"));return(await Ts(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener acciones:",e),new Error("No se pudieron cargar las acciones pedagógicas")}},VZ=async e=>{try{return{id:(await ha(Ft($r,Hy),{...e,fechaRegistro:e.fechaRegistro||new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear acción:",t),new Error("No se pudo crear la acción pedagógica")}},JF=async(e,t)=>{try{const r=vr($r,Hy,e);await D1(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acción:",r,"ID:",e),new Error("No se pudo actualizar la acción pedagógica")}},zZ=async e=>{try{const t=vr($r,Hy,e);await zs(t)}catch(t){throw console.error("Error al eliminar acción:",t,"ID:",e),new Error("No se pudo eliminar la acción pedagógica")}},ZF={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente",enlaceDocumento:""},GZ={Pendiente:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En Proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Cumplida:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},KZ=()=>{const[e,t]=Q.useState([]),[r,n]=Q.useState(!1),[a,s]=Q.useState(null),[i,o]=Q.useState(ZF),[c,A]=Q.useState(null),[d,h]=Q.useState(""),[m,p]=Q.useState(""),[v,x]=Q.useState(""),E=Q.useCallback(async()=>{n(!0);try{const N=await HZ();t(N),s(null)}catch(N){console.error("Error al cargar acciones:",N),s("No se pudieron cargar las acciones pedagógicas.")}finally{n(!1)}},[]);Q.useEffect(()=>{E()},[E]);const _=Q.useCallback(N=>{const{name:U,value:j}=N.target;o(F=>({...F,[U]:j}))},[]),B=Q.useCallback(()=>{o(ZF),A(null),s(null)},[]),T=Q.useCallback(async N=>{if(N.preventDefault(),!i.responsable||!i.area||!i.descripcion||!i.fechaCumplimiento){s("Los campos responsables, área, descripción y fecha de cumplimiento son obligatorios.");return}try{c?await JF(c,i):await VZ(i),await E(),B()}catch(U){console.error("Error al guardar acción:",U),s("Error al guardar la acción.")}},[i,c,E,B]),I=Q.useCallback(N=>{window.scrollTo({top:0,behavior:"smooth"}),A(N.id),o({...N,enlaceDocumento:N.enlaceDocumento||""})},[]),L=Q.useCallback(async N=>{if(window.confirm("¿Está seguro de que desea eliminar esta acción?"))try{await zZ(N),await E()}catch(U){console.error("Error al eliminar acción:",U),s("No se pudo eliminar la acción.")}},[E]),k=Q.useCallback(async N=>{try{const U=e.find(j=>j.id===N);if(U){const F=(ab.indexOf(U.estado)+1)%ab.length,P=ab[F];await JF(N,{estado:P}),await E()}}catch(U){console.error("Error al cambiar estado:",U),s("No se pudo cambiar el estado de la acción.")}},[e,E]),w=Q.useMemo(()=>e.filter(N=>{const U=d===""||N.responsable.toLowerCase().includes(d.toLowerCase())||N.descripcion.toLowerCase().includes(d.toLowerCase()),j=m===""||N.area===m,F=v===""||N.estado===v;return U&&j&&F}),[e,d,m,v]),y="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Acciones Pedagógicas"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:c?"Editando acción existente.":"Registre una nueva acción de seguimiento."}),a&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),l.jsxs("form",{onSubmit:T,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaRegistro",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Registro"}),l.jsx("input",{type:"date",name:"fechaRegistro",value:i.fechaRegistro,onChange:_,className:y})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),l.jsx("input",{type:"text",name:"responsable",value:i.responsable,onChange:_,placeholder:"Nombre del responsable",className:y})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Área Vinculada"}),l.jsxs("select",{name:"area",value:i.area,onChange:_,className:y,children:[l.jsx("option",{value:"",children:"Seleccione un área"}),SF.map(N=>l.jsx("option",{value:N,children:N},N))]})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Descripción de la Acción"}),l.jsx("textarea",{name:"descripcion",value:i.descripcion,onChange:_,rows:3,placeholder:"Detalle de la acción a realizar...",className:y})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaCumplimiento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Cumplimiento"}),l.jsx("input",{type:"date",name:"fechaCumplimiento",value:i.fechaCumplimiento,onChange:_,className:y})]}),l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("label",{htmlFor:"enlaceDocumento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace a Documento (Opcional)"}),l.jsx("input",{type:"url",name:"enlaceDocumento",value:i.enlaceDocumento||"",onChange:_,placeholder:"https://ejemplo.com/documento",className:y})]})]}),l.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[c&&l.jsx("button",{type:"button",onClick:B,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:c?"Actualizar Acción":"Registrar Acción"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Tabla de Seguimiento"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[l.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:d,onChange:N=>h(N.target.value),className:y+" md:col-span-1"}),l.jsxs("select",{value:m,onChange:N=>p(N.target.value),className:y,children:[l.jsx("option",{value:"",children:"Filtrar por Área"}),SF.map(N=>l.jsx("option",{value:N,children:N},N))]}),l.jsxs("select",{value:v,onChange:N=>x(N.target.value),className:y,children:[l.jsx("option",{value:"",children:"Filtrar por Estado"}),ab.map(N=>l.jsx("option",{value:N,children:N},N))]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Responsable"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Descripción"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fechas"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:r?l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"text-center py-10",children:"Cargando..."})}):w.length>0?w.map(N=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[l.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:N.responsable}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:N.area})]}),l.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-slate-300 max-w-sm whitespace-normal",children:N.descripcion}),l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:[l.jsxs("div",{children:["Reg: ",N.fechaRegistro]}),l.jsxs("div",{className:"font-semibold",children:["Comp: ",N.fechaCumplimiento]})]}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm",children:l.jsx("button",{onClick:()=>k(N.id),className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${GZ[N.estado]}`,children:N.estado})}),l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[N.enlaceDocumento&&l.jsx("a",{href:N.enlaceDocumento,target:"_blank",rel:"noopener noreferrer",title:"Ver Documento",className:"text-indigo-600 hover:text-indigo-800 p-1 rounded-full hover:bg-indigo-100 dark:hover:bg-indigo-900/40 inline-block align-middle",children:"🔗"}),l.jsx("button",{onClick:()=>I(N),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),l.jsx("button",{onClick:()=>L(N.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},N.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"text-center py-10 text-slate-500",children:"No se encontraron acciones."})})})]})})]})]})},Vy="planificaciones",MU="actividades_calendario",QU=e=>{var r,n,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||t.fechaCreacion}},qZ=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:Ar.fromDate(new Date),fechaActualizacion:Ar.fromDate(new Date)};return(await ha(Ft(kt,Vy),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},$Z=async(e,t,r)=>{try{const n=vr(kt,Vy,e),a=await j1(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await D1(n,{...t,fechaActualizacion:Ar.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificación:",n),new Error("No se pudo actualizar la planificación")}},WZ=async(e,t)=>{try{const r=vr(kt,Vy,e),n=await j1(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificación");await zs(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},XZ=(e,t)=>{const r=nr(Ft(kt,Vy),Mn("userId","==",e),en("fechaCreacion","desc"));return br(r,n=>{const a=n.docs.map(QU);t(a)},n=>{console.error("Error en suscripción a planificaciones:",n)})},YZ=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:Ar.fromDate(new Date),fechaActualizacion:Ar.fromDate(new Date)};return(await ha(Ft(kt,MU),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},JZ=(e,t)=>{const r=nr(Ft(kt,MU),Mn("userId","==",e),en("fecha","desc"));return br(r,n=>{const a=n.docs.map(QU);t(a)},n=>{console.error("Error en suscripción a actividades:",n)})},ZZ=e=>{const[t,r]=Q.useState([]),[n,a]=Q.useState(!0),[s,i]=Q.useState(null);return Q.useEffect(()=>e?(a(!0),XZ(e,h=>{r(h),a(!1)})):void 0,[e]),{planificaciones:t,loading:n,error:s,save:async d=>{try{return i(null),await qZ(d,e)}catch(h){throw i(h.message||"Error al guardar planificación"),h}},update:async(d,h)=>{try{i(null),await $Z(d,h,e)}catch(m){throw i(m.message||"Error al actualizar planificación"),m}},remove:async d=>{try{i(null),await WZ(d,e)}catch(h){throw i(h.message||"Error al eliminar planificación"),h}}}},p4=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},eee=e=>{const[t,r]=Q.useState([]),[n,a]=Q.useState(!0),[s,i]=Q.useState(null);Q.useEffect(()=>e?JZ(e,A=>{r(A),a(!1)}):void 0,[e]);const o=Q.useCallback(async c=>{try{return i(null),await YZ(c,e)}catch(A){throw i(A instanceof Error?A.message:"Error al guardar actividad"),A}},[e]);return{actividades:t,loading:n,error:s,save:o}},tee=({lesson:e,onClose:t,onSave:r,isLoading:n=!1})=>{const[a,s]=Q.useState(e),i=c=>{s({...a,[c.target.name]:c.target.value})},o=async()=>{try{await r(a),t()}catch(c){console.error("Error al guardar lección:",c)}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),l.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([c,A])=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:c.replace(/([A-Z])/g," $1")}),l.jsx("textarea",{name:c,value:A,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},c))}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[l.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),l.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},ree=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:n=!1,onUpdatePlan:a})=>{const[s,i]=Q.useState(e.progreso??0),[o,c]=Q.useState(!1),A=async d=>{const h=parseInt(d.target.value,10);i(h),c(!0);try{e.id&&a&&(await a(e.id,{progreso:h}),console.log("✅ Progreso actualizado exitosamente"))}catch(m){console.error("❌ Error completo:",m),alert(`Error al guardar el avance: ${m.message}`),i(e.progreso??0)}finally{c(!1)}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("input",{type:"range",min:0,max:100,value:s,onChange:A,disabled:o||n}),l.jsxs("span",{className:"font-bold w-12",children:[s,"%"]}),o&&l.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),l.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((d,h)=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",h+1,": ",d.actividades]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo:"})," ",d.objetivosAprendizaje]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Contenidos:"})," ",d.contenidosConceptuales]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Habilidad (Bloom):"})," ",d.habilidadesBloom]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Perfil de Egreso:"})," ",d.perfilEgreso]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Interdisciplinariedad:"})," ",d.asignaturasInterdisciplinariedad]})]}),l.jsxs("div",{className:"flex gap-2 mt-4",children:[l.jsx("button",{onClick:()=>t(h,d),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),l.jsx("button",{onClick:()=>r(d,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},h))})]})},nee=({plan:e,onBack:t,onSave:r,onDelete:n,isLoading:a=!1})=>{const[s,i]=Q.useState(e),[o,c]=Q.useState(!1),A=h=>{const{name:m,value:p}=h.target,[v,x]=m.split(".");i(v==="momentosClase"?E=>({...E,momentosClase:{...E.momentosClase,[x]:p}}):E=>({...E,[m]:p}))},d=async()=>{c(!0);try{await r(s)}catch(h){console.error("Error al guardar plan de clase:",h)}finally{c(!1)}};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),l.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:a||o,children:"← Volver"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),l.jsx("textarea",{name:"momentosClase.inicio",value:s.momentosClase.inicio,onChange:A,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),l.jsx("textarea",{name:"momentosClase.desarrollo",value:s.momentosClase.desarrollo,onChange:A,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),l.jsx("textarea",{name:"momentosClase.cierre",value:s.momentosClase.cierre,onChange:A,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]})]}),l.jsx("div",{className:"text-right mt-6",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("button",{onClick:()=>n(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:"🗑️ Eliminar Plan"}),l.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:[o&&l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},aee=({userId:e})=>{const{actividades:t,save:r}=eee(e),[n,a]=Q.useState("list"),[s,i]=Q.useState(null),[o,c]=Q.useState(!1),[A,d]=Q.useState(!1),h={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[m,p]=Q.useState(h);Q.useEffect(()=>{n==="summary"&&s&&v()},[n,s,e]);const v=async()=>{if(s)try{d(!1)}catch(k){console.error("Error al verificar evento en calendario:",k)}},x=k=>{const{name:w,value:y}=k.target;p(N=>({...N,[w]:y}))},E=(k,w,y)=>{p(N=>({...N,tareas:N.tareas.map(U=>U.id===k?{...U,[w]:y}:U)}))},_=()=>{p(k=>({...k,tareas:[...k.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},B=k=>{p(w=>({...w,tareas:w.tareas.filter(y=>y.id!==k)}))},T=async k=>{k.preventDefault(),c(!0);const w=`Basado en la siguiente información de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${m.nombre}
    - Descripción: ${m.descripcion}
    - Tareas: ${m.tareas.map(y=>y.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propósito principal de la actividad.`;try{p4("Planificación - Actividad Calendario");const y="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",P=(await(await new Is(y).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(w)).response).text(),M={...m,objetivo:P.replace(/(\*\*|\*)/g,"")},ee=await r(M),W={...M,id:ee};i(W),a("summary")}catch(y){console.error("Error al generar objetivo con IA:",y),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");try{const N={...m,objetivo:"No generado"},U=await r(N),j={...N,id:U};i(j),a("summary")}catch(N){console.error("Error al guardar actividad:",N),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{c(!1)}},I=async k=>{if(k)try{d(!0),alert("Actividad marcada como añadida al calendario (funcionalidad en desarrollo).")}catch(w){console.error("Error adding to calendar:",w),alert("Hubo un error al agregar la actividad al calendario.")}},L="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return n==="form"?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:l.jsxs("form",{onSubmit:T,className:"space-y-8",children:[l.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{name:"nombre",value:m.nombre,onChange:x,placeholder:"Nombre de la Actividad",className:L,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("input",{name:"fecha",type:"date",value:m.fecha,onChange:x,className:L,required:!0,disabled:o}),l.jsx("input",{name:"hora",type:"time",value:m.hora,onChange:x,className:L,required:!0,disabled:o})]}),l.jsx("textarea",{name:"descripcion",value:m.descripcion,onChange:x,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:L,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("input",{name:"ubicacion",value:m.ubicacion,onChange:x,placeholder:"Ubicación",className:L,required:!0,disabled:o}),l.jsx("input",{name:"participantes",value:m.participantes,onChange:x,placeholder:"Participantes",className:L,required:!0,disabled:o})]}),l.jsx("textarea",{name:"recursosGenerales",value:m.recursosGenerales,onChange:x,placeholder:"Recursos Generales Necesarios",rows:2,className:L,disabled:o})]})]}),l.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),l.jsx("button",{type:"button",onClick:_,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),l.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:m.tareas.map((k,w)=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[l.jsx("button",{type:"button",onClick:()=>B(k.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:"×"}),l.jsx("textarea",{value:k.descripcion,onChange:y=>E(k.id,"descripcion",y.target.value),placeholder:`Descripción de la Tarea ${w+1}`,rows:2,className:L,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[l.jsx("input",{value:k.responsable,onChange:y=>E(k.id,"responsable",y.target.value),placeholder:"Responsable",className:L,required:!0,disabled:o}),l.jsx("input",{value:k.recursos,onChange:y=>E(k.id,"recursos",y.target.value),placeholder:"Recursos Necesarios",className:L,disabled:o})]})]},k.id))})]}),l.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[l.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),l.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[l.jsx("span",{className:"text-2xl",children:"✓"}),l.jsxs("div",{children:[l.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),l.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),l.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),l.jsxs("div",{className:"space-y-4 text-sm",children:[l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),l.jsx("span",{children:s.nombre})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),l.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),l.jsx("p",{children:s.descripcion})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),l.jsx("span",{children:s.ubicacion})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),l.jsx("span",{children:s.participantes})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),l.jsx("p",{children:s.recursosGenerales})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),l.jsx("p",{children:s.objetivo})]})]}),l.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[l.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),l.jsx("button",{onClick:()=>I(s),disabled:A,className:`font-bold px-4 py-2 rounded-lg transition-colors ${A?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:A?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),l.jsx("button",{onClick:()=>{a("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),l.jsx("button",{onClick:()=>{a("form"),p(h)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),l.jsx("div",{className:"space-y-3",children:t.length>0?t.map(k=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:k.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(k.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",k.ubicacion]})]},k.id)):l.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},see=({currentUser:e})=>{const t=e.uid||e.email||e.id||"",{planificaciones:r,save:n,update:a,remove:s,loading:i}=ZZ(t),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[c,A]=Q.useState(o),[d,h]=Q.useState(null),[m,p]=Q.useState(!1),[v,x]=Q.useState(null),[E,_]=Q.useState("unidad"),[B,T]=Q.useState(null),[I,L]=Q.useState(null),k=Q.useMemo(()=>e.asignaturas||[],[e.asignaturas]),w=Q.useMemo(()=>{const z=e.cursos||[],Z=new Set;return z.forEach(R=>{R.startsWith("1º")?Z.add("1º Medio"):R.startsWith("2º")?Z.add("2º Medio"):R.startsWith("3º")?Z.add("3º Medio"):R.startsWith("4º")&&Z.add("4º Medio")}),Array.from(Z)},[e.cursos]);Q.useEffect(()=>{A(z=>({...z,asignatura:k[0]||"",nivel:w[0]||""})),console.log("🔍 Debug datos usuario y planificaciones:",{currentUser:{uid:e.uid,email:e.email,id:e.id,nombreCompleto:e.nombreCompleto},userId:t,planificacionesCount:r.length,planificacionesAutores:r.map(z=>({id:z.id,autor:z.autor,tipo:z.tipo,coincideConUserId:z.autor===t}))})},[k,w,e,t,r]);const y=z=>{const{name:Z,value:R}=z.target;A(K=>({...K,[Z]:Z==="cantidadClases"?parseInt(R,10):R}))},N=()=>{const{asignatura:z,nivel:Z,nombreUnidad:R,contenidos:K,cantidadClases:X,observaciones:re,ideasParaUnidad:ne}=c;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica completa en formato JSON estructurado, basándote en la información proporcionada.

    **Información Base:**
    - Asignatura: ${z}
    - Nivel: ${Z}
    - Nombre de la Unidad: "${R}"
    - Contenidos clave a trabajar (insumo principal): "${K}"
    - Cantidad de clases para la unidad: ${X}
    - Ideas y perspectiva del docente para la unidad: "${ne||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${re||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${X} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},U=async z=>{if(z.preventDefault(),p(!0),x(null),!c.contenidos||!c.nombreUnidad){x("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),p(!1);return}try{p4("Planificación - Unidad");const Z="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",K=new Is(Z).getGenerativeModel({model:"gemini-1.5-flash-latest"}),X=N(),re={type:"object",properties:{objetivosAprendizaje:{type:"string"},indicadoresEvaluacion:{type:"string"},detallesLeccion:{type:"array",items:{type:"object",properties:{objetivosAprendizaje:{type:"string"},contenidosConceptuales:{type:"string"},habilidadesBloom:{type:"string"},perfilEgreso:{type:"string"},actividades:{type:"string"},asignaturasInterdisciplinariedad:{type:"string"}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},fe=(await(await K.generateContent({contents:[{parts:[{text:X}]}],generationConfig:{responseMimeType:"application/json",responseSchema:re}})).response).text(),be=JSON.parse(fe),Ce={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:c.asignatura,nivel:c.nivel,nombreUnidad:c.nombreUnidad,contenidos:c.contenidos,cantidadClases:c.cantidadClases,observaciones:c.observaciones,ideasParaUnidad:c.ideasParaUnidad,objetivosAprendizaje:be.objetivosAprendizaje,indicadoresEvaluacion:be.indicadoresEvaluacion,detallesLeccion:be.detallesLeccion};if(d)await a(d.id,Ce),h({...Ce,id:d.id});else{const me=await n(Ce);h({...Ce,id:me})}}catch(Z){console.error("Error al generar planificación con IA",Z),x("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{p(!1)}},j=async(z,Z)=>{p(!0),x(null);const R=`A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${Z.asignatura}
    - Nivel: ${Z.nivel}
    - Objetivo de la clase: ${z.objetivosAprendizaje}
    - Contenidos: ${z.contenidosConceptuales}
    - Actividades sugeridas: ${z.actividades}
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{p4("Planificación - Utilizar Clase");const K="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",re=new Is(K).getGenerativeModel({model:"gemini-1.5-flash-latest"}),ne={type:"object",properties:{inicio:{type:"string"},desarrollo:{type:"string"},cierre:{type:"string"}},required:["inicio","desarrollo","cierre"]},be=(await(await re.generateContent({contents:[{parts:[{text:R}]}],generationConfig:{responseMimeType:"application/json",responseSchema:ne}})).response).text(),Ce=JSON.parse(be),me={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:Z.asignatura,nivel:Z.nivel,contenidos:z.contenidosConceptuales,observaciones:"",nombreClase:z.actividades,duracionClase:80,momentosClase:Ce,detalleLeccionOrigen:z};await n(me),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),_("clase")}catch(K){console.error("Error al generar plan de clase con IA",K),x("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{p(!1)}},F=z=>{z.tipo==="Unidad"&&(A({asignatura:z.asignatura,nivel:z.nivel,nombreUnidad:z.nombreUnidad,contenidos:z.contenidos,cantidadClases:z.cantidadClases,observaciones:z.observaciones,ideasParaUnidad:z.ideasParaUnidad||""}),h(z),window.scrollTo({top:0,behavior:"smooth"}))},P=async z=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?"))try{await s(z),(d==null?void 0:d.id)===z&&(h(null),A(o))}catch(Z){console.error("Error al eliminar planificación:",Z),alert("Error al eliminar la planificación. Por favor, intente nuevamente.")}},M=async z=>{if(window.confirm("¿Está seguro de que desea eliminar este plan de clase?"))try{await s(z),(B==null?void 0:B.id)===z&&T(null),console.log("✅ Plan de clase eliminado exitosamente")}catch(Z){console.error("Error al eliminar plan de clase:",Z),alert("Error al eliminar el plan de clase. Por favor, intente nuevamente.")}},ee=(z,Z)=>{d&&L({planId:d.id,lessonIndex:z,lessonData:Z})},W=async z=>{if(I)try{const{planId:Z,lessonIndex:R}=I,K=r.find(ne=>ne.id===Z&&ne.tipo==="Unidad");if(!K)return;const X=[...K.detallesLeccion];X[R]=z;const re={...K,detallesLeccion:X};await a(Z,re),h(re),L(null)}catch(Z){console.error("Error al actualizar lección:",Z),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},te="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",G=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsxs("form",{onSubmit:U,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:c.asignatura,onChange:y,className:te,disabled:m,children:k.length>0?k.map(z=>l.jsx("option",{value:z,children:z},z)):l.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsx("select",{name:"nivel",value:c.nivel,onChange:y,className:te,disabled:m,children:w.length>0?w.map(z=>l.jsx("option",{value:z,children:z},z)):l.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",name:"nombreUnidad",value:c.nombreUnidad,onChange:y,className:te,placeholder:"Ej: La Célula y sus procesos",disabled:m})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[l.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{name:"contenidos",value:c.contenidos,onChange:y,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:te,disabled:m})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[l.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),l.jsx("textarea",{name:"ideasParaUnidad",value:c.ideasParaUnidad,onChange:y,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:te,disabled:m})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),l.jsx("input",{type:"number",name:"cantidadClases",value:c.cantidadClases,onChange:y,className:te,min:"1",max:"20",disabled:m})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),l.jsx("textarea",{name:"observaciones",value:c.observaciones,onChange:y,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:te,disabled:m})]})]}),l.jsx("div",{className:"pt-4 text-right",children:l.jsx("button",{type:"submit",disabled:m||i,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:m?l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Regenerar":"Generar Plan"})}),v&&l.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:v})]})]}),d&&l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),l.jsx(ree,{plan:d,onEditLesson:ee,onUseLesson:j,onUpdatePlan:a,isLoading:m})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsx("div",{className:"space-y-4",children:r.filter(z=>z.tipo==="Unidad").length>0?r.filter(z=>z.tipo==="Unidad").map(z=>l.jsx("div",{className:`p-4 border rounded-lg ${(d==null?void 0:d.id)===z.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:z.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(z.fechaCreacion).toLocaleString("es-CL")]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",z.contenidos]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>F(z),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:m,children:"Ver y Editar"}),l.jsx("button",{onClick:()=>P(z.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:m,children:"🗑️"})]})]})},z.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),q=()=>{const z=r.filter(Z=>Z.tipo==="Clase").sort((Z,R)=>new Date(R.fechaCreacion).getTime()-new Date(Z.fechaCreacion).getTime());return B?l.jsx(nee,{plan:B,onBack:()=>T(null),onDelete:M,onSave:async Z=>{try{await a(Z.id,Z),T(Z)}catch(R){console.error("Error al actualizar plan de clase:",R),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:m}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsx("div",{className:"space-y-4",children:z.length>0?z.map(Z=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:Z.nombreClase}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(Z.fechaCreacion).toLocaleString("es-CL")]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",Z.contenidos]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("button",{onClick:()=>T(Z),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},Z.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return!e||!e.email&&!e.id?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),l.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(e)]})]})}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>_("unidad"),className:`${E==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),l.jsx("button",{onClick:()=>_("clase"),className:`${E==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),l.jsx("button",{onClick:()=>_("calendario"),className:`${E==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),E==="unidad"&&G(),E==="clase"&&q(),E==="calendario"&&l.jsx(aee,{userId:t}),I&&l.jsx(tee,{lesson:I.lessonData,onClose:()=>L(null),onSave:W,isLoading:m})]})},zy="events",iee=async()=>{try{const e=nr(Ft($r,zy),en("date","asc"));return(await Ts(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},oee=async e=>{try{return{id:(await ha(Ft($r,zy),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},lee=async(e,t)=>{try{const r=vr($r,zy,e);await D1(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},cee=async e=>{try{const t=vr($r,zy,e);await zs(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},uee=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],Aee=e=>{switch(e.type){case un.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case un.ACTO:return`Acto: ${e.ubicacion}`;case un.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case un.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},dee=({isOpen:e,onClose:t,onSave:r,onDelete:n,event:a,date:s,isLoading:i})=>{const[o,c]=Q.useState({});Q.useEffect(()=>{c(a||{type:un.EVALUACION,subtype:Nh.PRUEBA_PARCIAL,asignatura:yi[0],curso:qa[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,e]);const A="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",d=x=>{const{name:E,value:_}=x.target;c(B=>({...B,[E]:_}))},h=x=>{c(E=>{if(E.type===un.SALIDA_PEDAGOGICA){const _=E.cursos||[],B=_.includes(x)?_.filter(T=>T!==x):[..._,x];return{...E,cursos:B.sort()}}return E})},m=x=>{var _;x.preventDefault();let E;switch(o.type){case un.EVALUACION:const B={date:s,type:un.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===Nh.RUBRICA||o.subtype===Nh.PAUTA_COTEJO)&&((_=o.enlace)!=null&&_.trim())&&(B.enlace=o.enlace.trim()),E=B;break;case un.ACTO:E={date:s,type:un.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case un.ACTIVIDAD_FOCALIZADA:E={date:s,type:un.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case un.SALIDA_PEDAGOGICA:E={date:s,type:un.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(E)};if(!e)return null;const p=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),v=()=>{switch(o.type){case un.EVALUACION:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subtipo"}),l.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:A,children:IJ.map(x=>l.jsx("option",{value:x,children:x},x))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:A,children:yi.map(x=>l.jsx("option",{value:x,children:x},x))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:A,children:qa.map(x=>l.jsx("option",{value:x,children:x},x))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos"}),l.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:d,required:!0,rows:3,className:A})]}),(o.subtype===Nh.RUBRICA||o.subtype===Nh.PAUTA_COTEJO)&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),l.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:d,placeholder:"https://...",className:A})]})]});case un.ACTO:case un.ACTIVIDAD_FOCALIZADA:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsables"}),l.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:d,required:!0,className:A})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación"}),l.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:A})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Horario"}),l.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:d,required:!0,className:A})]})]});case un.SALIDA_PEDAGOGICA:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),l.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:d,required:!0,className:A})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),l.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:A})]}),l.jsxs("fieldset",{children:[l.jsx("legend",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),l.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border p-2 rounded-md dark:border-slate-600 text-slate-700 dark:text-slate-300",children:qa.map(x=>l.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(x),onChange:()=>h(x),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{children:x})]},x))})]})]});default:return null}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:t,children:l.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg animate-fade-in-up",onClick:x=>x.stopPropagation(),children:l.jsxs("form",{onSubmit:m,children:[l.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:a?"Editar Evento":"Agregar Evento"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6 font-semibold",children:p}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),l.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:A,children:Object.values(un).map(x=>l.jsx("option",{value:x,children:x},x))})]}),v()]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 px-6 py-4 rounded-b-xl flex justify-between items-center",children:[l.jsx("div",{children:a&&n&&l.jsx("button",{type:"button",onClick:n,disabled:i,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:i?"Eliminando...":"Eliminar"})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"button",onClick:t,disabled:i,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 disabled:opacity-50",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:i,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50",children:i?"Guardando...":"Guardar"})]})]})]})})})},fee=({profile:e})=>{const[t,r]=Q.useState(new Date),[n,a]=Q.useState([]),[s,i]=Q.useState(!1),[o,c]=Q.useState(null),[A,d]=Q.useState(!1),[h,m]=Q.useState(Object.values(un)),[p,v]=Q.useState(!1),[x,E]=Q.useState(null),[_,B]=Q.useState(null),T=Q.useCallback(async()=>{i(!0);try{const j=await iee();a(j),c(null)}catch(j){console.error("Error al cargar eventos desde Firestore",j),c("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);Q.useEffect(()=>{T()},[T]);const I=Q.useMemo(()=>{const j=t.getFullYear(),F=t.getMonth(),P=new Date(j,F,1).getDay(),M=new Date(j,F+1,0).getDate(),ee=[];let W=1;for(let te=0;te<6;te++){const G=[];for(let q=0;q<7;q++)te===0&&q<P||W>M?G.push(null):(G.push(new Date(j,F,W)),W++);if(ee.push(G),W>M)break}return ee},[t]),L=j=>{m(F=>F.includes(j)?F.filter(P=>P!==j):[...F,j])},k=()=>{h.length===Object.values(un).length?m([]):m(Object.values(un))},w=j=>{e!==Gt.ESTUDIANTE&&(E(j.toISOString().split("T")[0]),B(null),v(!0))},y=(j,F)=>{F.stopPropagation(),e!==Gt.ESTUDIANTE&&(E(j.date),B(j),v(!0))},N=async j=>{d(!0);try{_?await lee(_.id,j):await oee(j),await T(),v(!1)}catch(F){console.error("Error al guardar evento:",F);const P=F instanceof Error?F.message:"Error desconocido";c(`Error al guardar el evento: ${P}`)}finally{d(!1)}},U=async()=>{if(_){d(!0);try{await cee(_.id),await T(),v(!1)}catch(j){console.error("Error al eliminar evento:",j);const F=j instanceof Error?j.message:"Error desconocido";c(`No se pudo eliminar el evento: ${F}`)}finally{d(!1)}}};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Calendario Académico"}),s&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando eventos desde la nube..."}),o&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:o}),!s&&n.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay eventos registrados en la nube."}),l.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),l.jsx("div",{className:"ml-3",children:l.jsx("p",{className:"text-sm",children:"Recuerda que el calendario escolar completo se encuentra disponible en la intranet. Este calendario es de exclusivo uso evaluativo y académico."})})]})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Filtrar por tipo de evento:"}),l.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[l.jsx("button",{onClick:k,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-slate-700 text-white hover:bg-slate-600 dark:bg-slate-600 dark:hover:bg-slate-500 transition-colors",children:h.length===Object.values(un).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(un).map(j=>l.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2 ${h.includes(j)?`shadow-sm ${uf[j].color}`:"bg-slate-100 text-slate-600 hover:bg-slate-200 opacity-70 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600 dark:opacity-60"}`,children:[l.jsx("input",{type:"checkbox",checked:h.includes(j),onChange:()=>L(j),className:"hidden"}),l.jsx("span",{children:uf[j].icon}),l.jsx("span",{children:uf[j].label})]},j))]})]}),l.jsxs("div",{className:"border dark:border-slate-700 rounded-lg overflow-hidden",children:[l.jsxs("header",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 border-b dark:border-slate-700",children:[l.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:"<"}),l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),l.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:">"}),l.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-slate-800 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Hoy"})]}),l.jsx("div",{className:"grid grid-cols-7",children:uee.map(j=>l.jsx("div",{className:"text-center font-semibold text-slate-500 dark:text-slate-400 text-sm py-3 bg-slate-50 dark:bg-slate-700/50 border-b border-r dark:border-slate-700",children:j},j))}),l.jsx("div",{className:"grid grid-cols-7 grid-rows-6",children:I.flat().map((j,F)=>{const P=j&&j.toDateString()===new Date().toDateString(),M=j==null?void 0:j.toISOString().split("T")[0],ee=M?n.filter(W=>W.date===M&&h.includes(W.type)):[];return l.jsx("div",{onClick:()=>j&&w(j),className:`border-b border-r dark:border-slate-700 p-2 h-36 flex flex-col overflow-hidden relative group ${j?e!==Gt.ESTUDIANTE?"cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50":"":"bg-slate-50 dark:bg-slate-800/50"}`,children:j&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:`self-end text-sm font-semibold ${P?"bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-600 dark:text-slate-300"}`,children:j.getDate()}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:ee.map(W=>l.jsxs("div",{onClick:te=>y(W,te),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${uf[W.type].color}`,children:[l.jsx("span",{children:uf[W.type].icon}),l.jsx("span",{className:"truncate",children:Aee(W)})]},W.id))}),e!==Gt.ESTUDIANTE&&l.jsx("button",{className:"absolute bottom-1 right-1 bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-lg font-bold",children:"+"})]})},F)})})]}),p&&l.jsx(dee,{isOpen:p,onClose:()=>v(!1),onSave:N,onDelete:U,event:_,date:x,isLoading:A})]})},Gy="anuncios",hee=async()=>{try{const e=nr(Ft($r,Gy),en("fechaPublicacion","desc"));return(await Ts(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener anuncios:",e),new Error("No se pudieron cargar los anuncios")}},mee=async e=>{try{return{id:(await ha(Ft($r,Gy),{...e,fechaPublicacion:e.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear anuncio:",t),new Error("No se pudo crear el anuncio")}},pee=async(e,t)=>{try{const r=vr($r,Gy,e);await D1(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",e),new Error("No se pudo actualizar el anuncio")}},gee=async e=>{try{const t=vr($r,Gy,e);await zs(t)}catch(t){throw console.error("Error al eliminar anuncio:",t,"ID:",e),new Error("No se pudo eliminar el anuncio")}},e6=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],xee=({currentUser:e})=>{const[t,r]=Q.useState([]),[n,a]=Q.useState(!1),[s,i]=Q.useState(null),[o,c]=Q.useState({titulo:"",mensaje:"",adjunto:""}),[A,d]=Q.useState({tipo:"Todos",cursos:[]}),h=Q.useCallback(async()=>{a(!0);try{const w=await hee();r(w),i(null)}catch(w){console.error("Error al cargar anuncios desde Firestore",w),i("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);Q.useEffect(()=>{h()},[h]);const m=w=>{const{name:y,value:N}=w.target;c(U=>({...U,[y]:N}))},p=w=>{d({tipo:w,cursos:w==="Cursos"?[]:void 0})},v=w=>{d(y=>{var U;if(y.tipo!=="Cursos")return y;const N=(U=y.cursos)!=null&&U.includes(w)?y.cursos.filter(j=>j!==w):[...y.cursos||[],w];return{...y,cursos:N}})},x=async w=>{if(w.preventDefault(),!o.titulo||!o.mensaje){alert("Título y mensaje son obligatorios.");return}if(A.tipo==="Cursos"&&(!A.cursos||A.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const y={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:e.nombreCompleto,profileCreador:e.profile,destinatarios:A,...o};await mee(y),await h(),c({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(y){console.error("Error al crear anuncio:",y),i("Error al publicar el anuncio en la nube.")}},E=async w=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await gee(w),await h()}catch(y){console.error("Error al eliminar anuncio:",y),i("No se pudo eliminar el anuncio en la nube.")}},_=async w=>{try{const y=t.find(N=>N.id===w);y&&(await pee(w,{destacado:!y.destacado}),await h())}catch(y){console.error("Error al actualizar anuncio:",y),i("No se pudo actualizar el estado del anuncio en la nube.")}},B=Q.useMemo(()=>[...t].sort((w,y)=>w.destacado&&!y.destacado?-1:!w.destacado&&y.destacado?1:new Date(y.fechaPublicacion).getTime()-new Date(w.fechaPublicacion).getTime()),[t]),T=Q.useMemo(()=>{const w=e.profile,y=e.curso;return B.filter(N=>{if(w===Gt.SUBDIRECCION)return!0;if(!N.destinatarios)return w!==Gt.ESTUDIANTE;const{tipo:U,cursos:j}=N.destinatarios;return U==="Todos"||U==="Profesores"&&w===Gt.PROFESORADO||U==="Coordinación TP"&&w===Gt.COORDINACION_TP?!0:U==="Cursos"?w===Gt.ESTUDIANTE?j==null?void 0:j.includes(y||""):!0:!1})},[B,e]),I=w=>e.profile===Gt.ESTUDIANTE?!1:e.profile===Gt.SUBDIRECCION||e.profile===w.profileCreador,L=()=>e.profile===Gt.SUBDIRECCION||e.profile===Gt.PROFESORADO,k="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),e.profile!==Gt.ESTUDIANTE?l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),l.jsxs("form",{onSubmit:x,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),l.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:m,required:!0,className:k})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),l.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:m,required:!0,rows:4,className:k})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),l.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(w=>l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"destinatarioTipo",value:w,checked:A.tipo===w,onChange:()=>p(w),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),l.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:w.replace("Coordinación TP","Coord. TP")})]},w))})]}),A.tipo==="Cursos"&&l.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:qa.map(w=>{var y;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(y=A.cursos)==null?void 0:y.includes(w),onChange:()=>v(w),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:w})]},w)})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),l.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:m,placeholder:"https://ejemplo.com/documento.pdf",className:k})]}),l.jsx("div",{className:"pt-2 text-right",children:l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!n&&T.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&T.length>0&&T.map((w,y)=>{const N=e6[y%e6.length];return l.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${N.bg} ${N.rotate}`,children:[w.destacado&&l.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:l.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),l.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:w.titulo}),l.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:w.mensaje}),w.adjunto&&l.jsx("div",{className:"font-sans text-sm mb-4",children:l.jsxs("a",{href:w.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),l.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold",children:w.autor}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(w.fechaPublicacion).toLocaleString("es-CL")})]}),l.jsxs("div",{className:"flex items-center",children:[L()&&l.jsx("button",{onClick:()=>_(w.id),title:w.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:l.jsx("span",{className:`text-xl transition-opacity ${w.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),I(w)&&l.jsx("button",{onClick:()=>E(w.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},w.id)})})]})},HU="api_logs",vee=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:Ar.fromDate(new Date)};await ha(Ft(kt,HU),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},bee=e=>{const t=nr(Ft(kt,HU),en("timestamp","desc"));return br(t,n=>{const a=n.docs.map(s=>{var o,c;const i=s.data();return{id:s.id,...i,timestamp:((c=(o=i.timestamp)==null?void 0:o.toDate)==null?void 0:c.call(o).toISOString())||i.timestamp}});e(a)},n=>{console.error("Error al suscribirse a los logs de API:",n),e([])})},up=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}vee(e,t)},WN="actas_de_reunion",wee=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},yee=e=>{const t=nr(Ft(kt,WN),en("fechaCreacion","desc"));return br(t,n=>{const a=n.docs.map(s=>wee(s));e(a)},n=>{console.error("Error al suscribirse a las actas:",n),e([])})},Eee=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:Ar.fromDate(new Date(e.fechaCreacion))};return(await ha(Ft(kt,WN),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},Cee=async e=>{try{const t=vr(kt,WN,e);await zs(t)}catch(t){throw console.error("Error al eliminar el acta:",t),new Error("No se pudo eliminar el acta.")}},VU=window.SpeechRecognition||window.webkitSpeechRecognition,t6=!!VU,_ee=({isListening:e})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),See=({currentUser:e})=>{const[t,r]=Q.useState([]),[n,a]=Q.useState(null),[s,i]=Q.useState({tipoReunion:f5[0],asistentes:"",textoReunion:""}),[o,c]=Q.useState(!1),[A,d]=Q.useState(!1),[h,m]=Q.useState(!0),[p,v]=Q.useState(null),x=Q.useRef(null);Q.useEffect(()=>{m(!0);const w=yee(y=>{r(y),!n&&y.length>0&&a(y[0]),m(!1)});return()=>w()},[n]);const E=w=>{const{name:y,value:N}=w.target;i(U=>({...U,[y]:N}))},_=Q.useCallback(()=>{var w;if(!t6){v("El reconocimiento de voz no es compatible con este navegador.");return}o?(w=x.current)==null||w.stop():(x.current=new VU,x.current.lang="es-CL",x.current.continuous=!0,x.current.interimResults=!0,x.current.onresult=y=>{let N="";for(let U=y.resultIndex;U<y.results.length;++U)y.results[U].isFinal&&(N+=y.results[U][0].transcript+". ");i(U=>({...U,textoReunion:U.textoReunion+N}))},x.current.onstart=()=>c(!0),x.current.onend=()=>c(!1),x.current.onerror=y=>{console.error("Speech recognition error",y.error),v(`Error de reconocimiento: ${y.error}`),c(!1)},x.current.start())},[o]),B=async w=>{w.preventDefault();const{tipoReunion:y,asistentes:N,textoReunion:U}=s;if(!y||!N.trim()||!U.trim()){v("Todos los campos son obligatorios.");return}d(!0),v(null);try{up("Generador de Actas");const j="",P=new globalThis.GoogleGenerativeAI(j).getGenerativeModel({model:"gemini-pro"}),M=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${U}"
                
                Asistentes a la reunión para referencia de nombres: ${N}
            `,G=(await(await P.generateContent(M)).response).text().replace(/^```json\s*|```\s*$/g,""),q=JSON.parse(G),z={fechaCreacion:new Date().toISOString(),...s,...q},Z=await Eee(z,e);i({tipoReunion:f5[0],asistentes:"",textoReunion:""})}catch(j){console.error("Error al analizar acta con IA:",j),v("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{d(!1)}},T=async w=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await Cee(w),(n==null?void 0:n.id)===w&&a(t.length>1?t[1]:null)}catch(y){console.error("Error deleting acta:",y),alert("No se pudo eliminar el acta.")}},I=w=>{a(w)},L=w=>w.temas||w.acuerdos||w.plazos||w.responsables?l.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),w.temas&&w.temas.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:w.temas.map((N,U)=>l.jsx("li",{children:N},U))})]}),w.acuerdos&&w.acuerdos.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:w.acuerdos.map((N,U)=>l.jsx("li",{children:N},U))})]}),w.plazos&&w.plazos.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:w.plazos.map((N,U)=>l.jsx("li",{children:N},U))})]}),w.responsables&&w.responsables.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:w.responsables.map((N,U)=>l.jsx("li",{children:N},U))})]})]}):null,k="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return h?l.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[l.jsxs("div",{className:"md:col-span-1 space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),l.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),l.jsx("div",{className:"ml-3",children:l.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",l.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),l.jsxs("form",{onSubmit:B,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),l.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:E,required:!0,className:k,children:f5.map(w=>l.jsx("option",{value:w,children:w},w))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),l.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:E,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:k})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:E,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:k}),t6&&l.jsx("button",{type:"button",onClick:_,title:o?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${o?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:l.jsx(_ee,{isListening:o})})]})]}),p&&l.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:p}),l.jsx("div",{className:"pt-2 text-right",children:l.jsx("button",{type:"submit",disabled:A,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:A?l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),l.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.map(w=>l.jsxs("button",{onClick:()=>I(w),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===w.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:w.tipoReunion}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(w.fechaCreacion).toLocaleDateString("es-CL")})]},w.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),l.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?l.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${n.tipoReunion}`}),l.jsx("button",{onClick:()=>T(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[l.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),l.jsx("h2",{children:"Asistentes"}),l.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((w,y)=>w.trim()&&l.jsx("li",{children:w.trim()},y))}),L(n),l.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:l.jsx("p",{children:n.textoReunion})})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[l.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),l.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},Nee="modulepreload",Bee=function(e){return"/"+e},r6={},xw=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let i=function(A){return Promise.all(A.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=i(r.map(A=>{if(A=Bee(A),A in r6)return;r6[A]=!0;const d=A.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Nee,d||(m.as="script"),m.crossOrigin="",m.href=A,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((p,v)=>{m.addEventListener("load",p),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${A}`)))})}))}function s(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})};function Yn(e){"@babel/helpers - typeof";return Yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yn(e)}var Yi=Uint8Array,pl=Uint16Array,XN=Int32Array,Ky=new Yi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),qy=new Yi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),g4=new Yi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zU=function(e,t){for(var r=new pl(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new XN(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},GU=zU(Ky,2),KU=GU.b,x4=GU.r;KU[28]=258,x4[258]=28;var qU=zU(qy,0),kee=qU.b,n6=qU.r,v4=new pl(32768);for(var ga=0;ga<32768;++ga){var qd=(ga&43690)>>1|(ga&21845)<<1;qd=(qd&52428)>>2|(qd&13107)<<2,qd=(qd&61680)>>4|(qd&3855)<<4,v4[ga]=((qd&65280)>>8|(qd&255)<<8)>>1}var $u=function(e,t,r){for(var n=e.length,a=0,s=new pl(t);a<n;++a)e[a]&&++s[e[a]-1];var i=new pl(t);for(a=1;a<t;++a)i[a]=i[a-1]+s[a-1]<<1;var o;if(r){o=new pl(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var A=a<<4|e[a],d=t-e[a],h=i[e[a]-1]++<<d,m=h|(1<<d)-1;h<=m;++h)o[v4[h]>>c]=A}else for(o=new pl(n),a=0;a<n;++a)e[a]&&(o[a]=v4[i[e[a]-1]++]>>15-e[a]);return o},Mf=new Yi(288);for(var ga=0;ga<144;++ga)Mf[ga]=8;for(var ga=144;ga<256;++ga)Mf[ga]=9;for(var ga=256;ga<280;++ga)Mf[ga]=7;for(var ga=280;ga<288;++ga)Mf[ga]=8;var Vx=new Yi(32);for(var ga=0;ga<32;++ga)Vx[ga]=5;var Tee=$u(Mf,9,0),Iee=$u(Mf,9,1),Fee=$u(Vx,5,0),jee=$u(Vx,5,1),p5=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},jc=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},g5=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},YN=function(e){return(e+7)/8|0},$U=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Yi(e.subarray(t,r))},Dee=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Oc=function(e,t,r){var n=new Error(t||Dee[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Oc),!r)throw n;return n},Ree=function(e,t,r,n){var a=e.length,s=0;if(!a||t.f&&!t.l)return r||new Yi(0);var i=!r,o=i||t.i!=2,c=t.i;i&&(r=new Yi(a*3));var A=function(me){var oe=r.length;if(me>oe){var Le=new Yi(Math.max(oe*2,me));Le.set(r),r=Le}},d=t.f||0,h=t.p||0,m=t.b||0,p=t.l,v=t.d,x=t.m,E=t.n,_=a*8;do{if(!p){d=jc(e,h,1);var B=jc(e,h+1,3);if(h+=3,B)if(B==1)p=Iee,v=jee,x=9,E=5;else if(B==2){var k=jc(e,h,31)+257,w=jc(e,h+10,15)+4,y=k+jc(e,h+5,31)+1;h+=14;for(var N=new Yi(y),U=new Yi(19),j=0;j<w;++j)U[g4[j]]=jc(e,h+j*3,7);h+=w*3;for(var F=p5(U),P=(1<<F)-1,M=$u(U,F,1),j=0;j<y;){var ee=M[jc(e,h,P)];h+=ee&15;var T=ee>>4;if(T<16)N[j++]=T;else{var W=0,te=0;for(T==16?(te=3+jc(e,h,3),h+=2,W=N[j-1]):T==17?(te=3+jc(e,h,7),h+=3):T==18&&(te=11+jc(e,h,127),h+=7);te--;)N[j++]=W}}var G=N.subarray(0,k),q=N.subarray(k);x=p5(G),E=p5(q),p=$u(G,x,1),v=$u(q,E,1)}else Oc(1);else{var T=YN(h)+4,I=e[T-4]|e[T-3]<<8,L=T+I;if(L>a){c&&Oc(0);break}o&&A(m+I),r.set(e.subarray(T,L),m),t.b=m+=I,t.p=h=L*8,t.f=d;continue}if(h>_){c&&Oc(0);break}}o&&A(m+131072);for(var z=(1<<x)-1,Z=(1<<E)-1,R=h;;R=h){var W=p[g5(e,h)&z],K=W>>4;if(h+=W&15,h>_){c&&Oc(0);break}if(W||Oc(2),K<256)r[m++]=K;else if(K==256){R=h,p=null;break}else{var X=K-254;if(K>264){var j=K-257,re=Ky[j];X=jc(e,h,(1<<re)-1)+KU[j],h+=re}var ne=v[g5(e,h)&Z],ue=ne>>4;ne||Oc(3),h+=ne&15;var q=kee[ue];if(ue>3){var re=qy[ue];q+=g5(e,h)&(1<<re)-1,h+=re}if(h>_){c&&Oc(0);break}o&&A(m+131072);var fe=m+X;if(m<q){var be=s-q,Ce=Math.min(q,fe);for(be+m<0&&Oc(3);m<Ce;++m)r[m]=n[be+m]}for(;m<fe;++m)r[m]=r[m-q]}}t.l=p,t.p=R,t.b=m,t.f=d,p&&(d=1,t.m=x,t.d=v,t.n=E)}while(!d);return m!=r.length&&i?$U(r,0,m):r.subarray(0,m)},DA=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Eg=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},x5=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:XU,l:0};if(a==1){var i=new Yi(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(L,k){return L.f-k.f}),r.push({s:-1,f:25001});var o=r[0],c=r[1],A=0,d=1,h=2;for(r[0]={s:-1,f:o.f+c.f,l:o,r:c};d!=a-1;)o=r[r[A].f<r[h].f?A++:h++],c=r[A!=d&&r[A].f<r[h].f?A++:h++],r[d++]={s:-1,f:o.f+c.f,l:o,r:c};for(var m=s[0].s,n=1;n<a;++n)s[n].s>m&&(m=s[n].s);var p=new pl(m+1),v=b4(r[d-1],p,0);if(v>t){var n=0,x=0,E=v-t,_=1<<E;for(s.sort(function(k,w){return p[w.s]-p[k.s]||k.f-w.f});n<a;++n){var B=s[n].s;if(p[B]>t)x+=_-(1<<v-p[B]),p[B]=t;else break}for(x>>=E;x>0;){var T=s[n].s;p[T]<t?x-=1<<t-p[T]++-1:++n}for(;n>=0&&x;--n){var I=s[n].s;p[I]==t&&(--p[I],++x)}v=t}return{t:new Yi(p),l:v}},b4=function(e,t,r){return e.s==-1?Math.max(b4(e.l,t,r+1),b4(e.r,t,r+1)):t[e.s]=r},a6=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new pl(++t),n=0,a=e[0],s=1,i=function(c){r[n++]=c},o=1;o<=t;++o)if(e[o]==a&&o!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=e[o]}return{c:r.subarray(0,n),n:t}},Cg=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},WU=function(e,t,r){var n=r.length,a=YN(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},s6=function(e,t,r,n,a,s,i,o,c,A,d){DA(t,d++,r),++a[256];for(var h=x5(a,15),m=h.t,p=h.l,v=x5(s,15),x=v.t,E=v.l,_=a6(m),B=_.c,T=_.n,I=a6(x),L=I.c,k=I.n,w=new pl(19),y=0;y<B.length;++y)++w[B[y]&31];for(var y=0;y<L.length;++y)++w[L[y]&31];for(var N=x5(w,7),U=N.t,j=N.l,F=19;F>4&&!U[g4[F-1]];--F);var P=A+5<<3,M=Cg(a,Mf)+Cg(s,Vx)+i,ee=Cg(a,m)+Cg(s,x)+i+14+3*F+Cg(w,U)+2*w[16]+3*w[17]+7*w[18];if(c>=0&&P<=M&&P<=ee)return WU(t,d,e.subarray(c,c+A));var W,te,G,q;if(DA(t,d,1+(ee<M)),d+=2,ee<M){W=$u(m,p,0),te=m,G=$u(x,E,0),q=x;var z=$u(U,j,0);DA(t,d,T-257),DA(t,d+5,k-1),DA(t,d+10,F-4),d+=14;for(var y=0;y<F;++y)DA(t,d+3*y,U[g4[y]]);d+=3*F;for(var Z=[B,L],R=0;R<2;++R)for(var K=Z[R],y=0;y<K.length;++y){var X=K[y]&31;DA(t,d,z[X]),d+=U[X],X>15&&(DA(t,d,K[y]>>5&127),d+=K[y]>>12)}}else W=Tee,te=Mf,G=Fee,q=Vx;for(var y=0;y<o;++y){var re=n[y];if(re>255){var X=re>>18&31;Eg(t,d,W[X+257]),d+=te[X+257],X>7&&(DA(t,d,re>>23&31),d+=Ky[X]);var ne=re&31;Eg(t,d,G[ne]),d+=q[ne],ne>3&&(Eg(t,d,re>>5&8191),d+=qy[ne])}else Eg(t,d,W[re]),d+=te[re]}return Eg(t,d,W[256]),d+te[256]},Lee=new XN([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),XU=new Yi(0),Oee=function(e,t,r,n,a,s){var i=s.z||e.length,o=new Yi(n+i+5*(1+Math.ceil(i/7e3))+a),c=o.subarray(n,o.length-a),A=s.l,d=(s.r||0)&7;if(t){d&&(c[0]=s.r>>3);for(var h=Lee[t-1],m=h>>13,p=h&8191,v=(1<<r)-1,x=s.p||new pl(32768),E=s.h||new pl(v+1),_=Math.ceil(r/3),B=2*_,T=function(Ye){return(e[Ye]^e[Ye+1]<<_^e[Ye+2]<<B)&v},I=new XN(25e3),L=new pl(288),k=new pl(32),w=0,y=0,N=s.i||0,U=0,j=s.w||0,F=0;N+2<i;++N){var P=T(N),M=N&32767,ee=E[P];if(x[M]=ee,E[P]=M,j<=N){var W=i-N;if((w>7e3||U>24576)&&(W>423||!A)){d=s6(e,c,0,I,L,k,y,U,F,N-F,d),U=w=y=0,F=N;for(var te=0;te<286;++te)L[te]=0;for(var te=0;te<30;++te)k[te]=0}var G=2,q=0,z=p,Z=M-ee&32767;if(W>2&&P==T(N-Z))for(var R=Math.min(m,W)-1,K=Math.min(32767,N),X=Math.min(258,W);Z<=K&&--z&&M!=ee;){if(e[N+G]==e[N+G-Z]){for(var re=0;re<X&&e[N+re]==e[N+re-Z];++re);if(re>G){if(G=re,q=Z,re>R)break;for(var ne=Math.min(Z,re-2),ue=0,te=0;te<ne;++te){var fe=N-Z+te&32767,be=x[fe],Ce=fe-be&32767;Ce>ue&&(ue=Ce,ee=fe)}}}M=ee,ee=x[M],Z+=M-ee&32767}if(q){I[U++]=268435456|x4[G]<<18|n6[q];var me=x4[G]&31,oe=n6[q]&31;y+=Ky[me]+qy[oe],++L[257+me],++k[oe],j=N+G,++w}else I[U++]=e[N],++L[e[N]]}}for(N=Math.max(N,j);N<i;++N)I[U++]=e[N],++L[e[N]];d=s6(e,c,A,I,L,k,y,U,F,N-F,d),A||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=E,s.p=x,s.i=N,s.w=j)}else{for(var N=s.w||0;N<i+A;N+=65535){var Le=N+65535;Le>=i&&(c[d/8|0]=A,Le=i),d=WU(c,d+1,e.subarray(N,Le))}s.i=i}return $U(o,0,n+YN(d)+a)},YU=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Uee=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),i=new Yi(s.length+e.length);i.set(s),i.set(e,s.length),e=i,a.w=s.length}return Oee(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},JU=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Pee=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=YU();a.p(t.dictionary),JU(e,2,a.d())}},Mee=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Oc(6,"invalid zlib data"),(e[1]>>5&1)==1&&Oc(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function w4(e,t){t||(t={});var r=YU();r.p(e);var n=Uee(e,t,t.dictionary?6:2,4);return Pee(n,t),JU(n,n.length-4,r.d()),n}function Qee(e,t){return Ree(e.subarray(Mee(e),-4),{i:2},t,t)}var Hee=typeof TextDecoder<"u"&&new TextDecoder,Vee=0;try{Hee.decode(XU,{stream:!0}),Vee=1}catch{}var Br=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function v5(){Br.console&&typeof Br.console.log=="function"&&Br.console.log.apply(Br.console,arguments)}var ca={log:v5,warn:function(e){Br.console&&(typeof Br.console.warn=="function"?Br.console.warn.apply(Br.console,arguments):v5.call(null,arguments))},error:function(e){Br.console&&(typeof Br.console.error=="function"?Br.console.error.apply(Br.console,arguments):v5(e))}};function b5(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){_h(n.response,t,r)},n.onerror=function(){ca.error("could not download file")},n.send()}function i6(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function ib(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var fx,y4,_h=Br.saveAs||((typeof window>"u"?"undefined":Yn(window))!=="object"||window!==Br?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Br.URL||Br.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?i6(a.href)?b5(e,t,r):ib(a,a.target="_blank"):ib(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){ib(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(i6(e))b5(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){ib(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:Yn(s)!=="object"&&(ca.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return b5(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(Br.HTMLElement)||Br.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":Yn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(e)}else{var c=Br.URL||Br.webkitURL,A=c.createObjectURL(e);n?n.location=A:location.href=A,n=null,setTimeout(function(){c.revokeObjectURL(A)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function ZU(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(e);i&&(t=s(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),A=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),A.length==1&&(A="0"+A),"#"+o+c+A}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function w5(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=Ui(r,n,a,s,t[0],7,-680876936),s=Ui(s,r,n,a,t[1],12,-389564586),a=Ui(a,s,r,n,t[2],17,606105819),n=Ui(n,a,s,r,t[3],22,-1044525330),r=Ui(r,n,a,s,t[4],7,-176418897),s=Ui(s,r,n,a,t[5],12,1200080426),a=Ui(a,s,r,n,t[6],17,-1473231341),n=Ui(n,a,s,r,t[7],22,-45705983),r=Ui(r,n,a,s,t[8],7,1770035416),s=Ui(s,r,n,a,t[9],12,-1958414417),a=Ui(a,s,r,n,t[10],17,-42063),n=Ui(n,a,s,r,t[11],22,-1990404162),r=Ui(r,n,a,s,t[12],7,1804603682),s=Ui(s,r,n,a,t[13],12,-40341101),a=Ui(a,s,r,n,t[14],17,-1502002290),r=Pi(r,n=Ui(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Pi(s,r,n,a,t[6],9,-1069501632),a=Pi(a,s,r,n,t[11],14,643717713),n=Pi(n,a,s,r,t[0],20,-373897302),r=Pi(r,n,a,s,t[5],5,-701558691),s=Pi(s,r,n,a,t[10],9,38016083),a=Pi(a,s,r,n,t[15],14,-660478335),n=Pi(n,a,s,r,t[4],20,-405537848),r=Pi(r,n,a,s,t[9],5,568446438),s=Pi(s,r,n,a,t[14],9,-1019803690),a=Pi(a,s,r,n,t[3],14,-187363961),n=Pi(n,a,s,r,t[8],20,1163531501),r=Pi(r,n,a,s,t[13],5,-1444681467),s=Pi(s,r,n,a,t[2],9,-51403784),a=Pi(a,s,r,n,t[7],14,1735328473),r=Mi(r,n=Pi(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=Mi(s,r,n,a,t[8],11,-2022574463),a=Mi(a,s,r,n,t[11],16,1839030562),n=Mi(n,a,s,r,t[14],23,-35309556),r=Mi(r,n,a,s,t[1],4,-1530992060),s=Mi(s,r,n,a,t[4],11,1272893353),a=Mi(a,s,r,n,t[7],16,-155497632),n=Mi(n,a,s,r,t[10],23,-1094730640),r=Mi(r,n,a,s,t[13],4,681279174),s=Mi(s,r,n,a,t[0],11,-358537222),a=Mi(a,s,r,n,t[3],16,-722521979),n=Mi(n,a,s,r,t[6],23,76029189),r=Mi(r,n,a,s,t[9],4,-640364487),s=Mi(s,r,n,a,t[12],11,-421815835),a=Mi(a,s,r,n,t[15],16,530742520),r=Qi(r,n=Mi(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=Qi(s,r,n,a,t[7],10,1126891415),a=Qi(a,s,r,n,t[14],15,-1416354905),n=Qi(n,a,s,r,t[5],21,-57434055),r=Qi(r,n,a,s,t[12],6,1700485571),s=Qi(s,r,n,a,t[3],10,-1894986606),a=Qi(a,s,r,n,t[10],15,-1051523),n=Qi(n,a,s,r,t[1],21,-2054922799),r=Qi(r,n,a,s,t[8],6,1873313359),s=Qi(s,r,n,a,t[15],10,-30611744),a=Qi(a,s,r,n,t[6],15,-1560198380),n=Qi(n,a,s,r,t[13],21,1309151649),r=Qi(r,n,a,s,t[4],6,-145523070),s=Qi(s,r,n,a,t[11],10,-1120210379),a=Qi(a,s,r,n,t[2],15,718787259),n=Qi(n,a,s,r,t[9],21,-343485551),e[0]=hf(r,e[0]),e[1]=hf(n,e[1]),e[2]=hf(a,e[2]),e[3]=hf(s,e[3])}function $y(e,t,r,n,a,s){return t=hf(hf(t,e),hf(n,s)),hf(t<<a|t>>>32-a,r)}function Ui(e,t,r,n,a,s,i){return $y(t&r|~t&n,e,t,a,s,i)}function Pi(e,t,r,n,a,s,i){return $y(t&n|r&~n,e,t,a,s,i)}function Mi(e,t,r,n,a,s,i){return $y(t^r^n,e,t,a,s,i)}function Qi(e,t,r,n,a,s,i){return $y(r^(t|~n),e,t,a,s,i)}function e7(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)w5(n,zee(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(w5(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,w5(n,a),n}function zee(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}fx=Br.atob.bind(Br),y4=Br.btoa.bind(Br);var o6="0123456789abcdef".split("");function Gee(e){for(var t="",r=0;r<4;r++)t+=o6[e>>8*r+4&15]+o6[e>>8*r&15];return t}function Kee(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function E4(e){return e7(e).map(Kee).join("")}var qee=function(e){for(var t=0;t<e.length;t++)e[t]=Gee(e[t]);return e.join("")}(e7("hello"))!="5d41402abc4b2a76b9719d911017c592";function hf(e,t){if(qee){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function C4(e,t){var r,n,a,s;if(e!==r){for(var i=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),o=[],c=0;c<256;c++)o[c]=c;var A=0;for(c=0;c<256;c++){var d=o[c];A=(A+d+i.charCodeAt(c))%256,o[c]=o[A],o[A]=d}r=e,n=o}else o=n;var h=t.length,m=0,p=0,v="";for(c=0;c<h;c++)p=(p+(d=o[m=(m+1)%256]))%256,o[m]=o[p],o[p]=d,i=o[(o[m]+o[p])%256],v+=String.fromCharCode(t.charCodeAt(c)^i);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var l6={print:4,modify:8,copy:16,"annot-forms":32};function Em(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(o){if(l6.perm!==void 0)throw new Error("Invalid permission: "+o);a+=l6[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=E4(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=C4(this.encryptionKey,this.padding)}function Cm(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function c6(e){if(Yn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var i=t[r][s];try{i[0].apply(e,n)}catch(o){Br.console&&ca.error("jsPDF PubSub Error",o.message,o)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function vw(e){if(!(this instanceof vw))return new vw(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function t7(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Bh(e,t,r,n,a){if(!(this instanceof Bh))return new Bh(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,t7.call(this,n,a)}function Tm(e,t,r,n,a){if(!(this instanceof Tm))return new Tm(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,t7.call(this,n,a)}function ur(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],o=1,c=16,A="S",d=null;Yn(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),A=e.defaultPathOperation||"S"),i=e.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=c6;var v="1.3",x=p.__private__.getPdfVersion=function(){return v};p.__private__.setPdfVersion=function(V){v=V};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return E};var _=p.__private__.getPageFormat=function(V){return E[V]};a=a||"a4";var B={COMPAT:"compat",ADVANCED:"advanced"},T=B.COMPAT;function I(){this.saveGraphicsState(),we(new Kt(ke,0,0,-ke,0,$s()*ke).toString()+" cm"),this.setFontSize(this.getFontSize()/ke),A="n",T=B.ADVANCED}function L(){this.restoreGraphicsState(),A="S",T=B.COMPAT}var k=p.__private__.combineFontStyleAndFontWeight=function(V,ce){if(V=="bold"&&ce=="normal"||V=="bold"&&ce==400||V=="normal"&&ce=="italic"||V=="bold"&&ce=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ce&&(V=ce==400||ce==="normal"?V==="italic"?"italic":"normal":ce!=700&&ce!=="bold"||V!=="normal"?(ce==700?"bold":ce)+""+V:"bold"),V};p.advancedAPI=function(V){var ce=T===B.COMPAT;return ce&&I.call(this),typeof V!="function"||(V(this),ce&&L.call(this)),this},p.compatAPI=function(V){var ce=T===B.ADVANCED;return ce&&L.call(this),typeof V!="function"||(V(this),ce&&I.call(this)),this},p.isAdvancedAPI=function(){return T===B.ADVANCED};var w,y=function(V){if(T!==B.ADVANCED)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},N=p.roundToPrecision=p.__private__.roundToPrecision=function(V,ce){var Ie=t||ce;if(isNaN(V)||isNaN(Ie))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(Ie).replace(/0+$/,"")};w=p.hpf=p.__private__.hpf=typeof c=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return N(V,c)}:c==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return N(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return N(V,16)};var U=p.f2=p.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return N(V,2)},j=p.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return N(V,3)},F=p.scale=p.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return T===B.COMPAT?V*ke:T===B.ADVANCED?V:void 0},P=function(V){return T===B.COMPAT?$s()-V:T===B.ADVANCED?V:void 0},M=function(V){return F(P(V))};p.__private__.setPrecision=p.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(t=parseInt(V,10))};var ee,W="00000000000000000000000000000000",te=p.__private__.getFileId=function(){return W},G=p.__private__.setFileId=function(V){return W=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():W.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Gn=new Em(d.userPermissions,d.userPassword,d.ownerPassword,W)),W};p.setFileId=function(V){return G(V),this},p.getFileId=function(){return te()};var q=p.__private__.convertDateToPDFDate=function(V){var ce=V.getTimezoneOffset(),Ie=ce<0?"+":"-",Re=Math.floor(Math.abs(ce/60)),Ge=Math.abs(ce%60),ct=[Ie,X(Re),"'",X(Ge),"'"].join("");return["D:",V.getFullYear(),X(V.getMonth()+1),X(V.getDate()),X(V.getHours()),X(V.getMinutes()),X(V.getSeconds()),ct].join("")},z=p.__private__.convertPDFDateToDate=function(V){var ce=parseInt(V.substr(2,4),10),Ie=parseInt(V.substr(6,2),10)-1,Re=parseInt(V.substr(8,2),10),Ge=parseInt(V.substr(10,2),10),ct=parseInt(V.substr(12,2),10),Nt=parseInt(V.substr(14,2),10);return new Date(ce,Ie,Re,Ge,ct,Nt,0)},Z=p.__private__.setCreationDate=function(V){var ce;if(V===void 0&&(V=new Date),V instanceof Date)ce=q(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ce=V}return ee=ce},R=p.__private__.getCreationDate=function(V){var ce=ee;return V==="jsDate"&&(ce=z(ee)),ce};p.setCreationDate=function(V){return Z(V),this},p.getCreationDate=function(V){return R(V)};var K,X=p.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},re=p.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},ne=0,ue=[],fe=[],be=0,Ce=[],me=[],oe=!1,Le=fe,Ye=function(){ne=0,be=0,fe=[],ue=[],Ce=[],ye=ea(),Ee=ea()};p.__private__.setCustomOutputDestination=function(V){oe=!0,Le=V};var Te=function(V){oe||(Le=V)};p.__private__.resetCustomOutputDestination=function(){oe=!1,Le=fe};var we=p.__private__.out=function(V){return V=V.toString(),be+=V.length+1,Le.push(V),Le},Fe=p.__private__.write=function(V){return we(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},He=p.__private__.getArrayBuffer=function(V){for(var ce=V.length,Ie=new ArrayBuffer(ce),Re=new Uint8Array(Ie);ce--;)Re[ce]=V.charCodeAt(ce);return Ie},Xe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Xe};var ut=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(V){return ut=T===B.ADVANCED?V/ke:V,this};var Et,At=p.__private__.getFontSize=p.getFontSize=function(){return T===B.COMPAT?ut:ut*ke},jt=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(V){return jt=V,this},p.__private__.getR2L=p.getR2L=function(){return jt};var Dt,Yt=p.__private__.setZoomMode=function(V){var ce=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))Et=V;else if(isNaN(V)){if(ce.indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');Et=V}else Et=parseInt(V,10)};p.__private__.getZoomMode=function(){return Et};var Rt,Ut=p.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');Dt=V};p.__private__.getPageMode=function(){return Dt};var qt=p.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');Rt=V};p.__private__.getLayoutMode=function(){return Rt},p.__private__.setDisplayMode=p.setDisplayMode=function(V,ce,Ie){return Yt(V),qt(ce),Ut(Ie),this};var De={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(V){if(Object.keys(De).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return De[V]},p.__private__.getDocumentProperties=function(){return De},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(V){for(var ce in De)De.hasOwnProperty(ce)&&V[ce]&&(De[ce]=V[ce]);return this},p.__private__.setDocumentProperty=function(V,ce){if(Object.keys(De).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return De[V]=ce};var Oe,ke,We,ft,$t,zt={},tr={},Hr=[],or={},mn={},Lr={},En={},Vn=null,ar=0,Jt=[],Mr=new c6(p),ms=e.hotfixes||[],Zn={},_a={},js=[],Kt=function V(ce,Ie,Re,Ge,ct,Nt){if(!(this instanceof V))return new V(ce,Ie,Re,Ge,ct,Nt);isNaN(ce)&&(ce=1),isNaN(Ie)&&(Ie=0),isNaN(Re)&&(Re=0),isNaN(Ge)&&(Ge=1),isNaN(ct)&&(ct=0),isNaN(Nt)&&(Nt=0),this._matrix=[ce,Ie,Re,Ge,ct,Nt]};Object.defineProperty(Kt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(Kt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(Kt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(Kt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(Kt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(Kt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(Kt.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(Kt.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(Kt.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(Kt.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(Kt.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(Kt.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(Kt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Kt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Kt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Kt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Kt.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(w).join(V)},Kt.prototype.multiply=function(V){var ce=V.sx*this.sx+V.shy*this.shx,Ie=V.sx*this.shy+V.shy*this.sy,Re=V.shx*this.sx+V.sy*this.shx,Ge=V.shx*this.shy+V.sy*this.sy,ct=V.tx*this.sx+V.ty*this.shx+this.tx,Nt=V.tx*this.shy+V.ty*this.sy+this.ty;return new Kt(ce,Ie,Re,Ge,ct,Nt)},Kt.prototype.decompose=function(){var V=this.sx,ce=this.shy,Ie=this.shx,Re=this.sy,Ge=this.tx,ct=this.ty,Nt=Math.sqrt(V*V+ce*ce),Ht=(V/=Nt)*Ie+(ce/=Nt)*Re;Ie-=V*Ht,Re-=ce*Ht;var S=Math.sqrt(Ie*Ie+Re*Re);return Ht/=S,V*(Re/=S)<ce*(Ie/=S)&&(V=-V,ce=-ce,Ht=-Ht,Nt=-Nt),{scale:new Kt(Nt,0,0,S,0,0),translate:new Kt(1,0,0,1,Ge,ct),rotate:new Kt(V,ce,-ce,V,0,0),skew:new Kt(1,0,Ht,1,0,0)}},Kt.prototype.toString=function(V){return this.join(" ")},Kt.prototype.inversed=function(){var V=this.sx,ce=this.shy,Ie=this.shx,Re=this.sy,Ge=this.tx,ct=this.ty,Nt=1/(V*Re-ce*Ie),Ht=Re*Nt,S=-ce*Nt,J=-Ie*Nt,se=V*Nt;return new Kt(Ht,S,J,se,-Ht*Ge-J*ct,-S*Ge-se*ct)},Kt.prototype.applyToPoint=function(V){var ce=V.x*this.sx+V.y*this.shx+this.tx,Ie=V.x*this.shy+V.y*this.sy+this.ty;return new hc(ce,Ie)},Kt.prototype.applyToRectangle=function(V){var ce=this.applyToPoint(V),Ie=this.applyToPoint(new hc(V.x+V.w,V.y+V.h));return new nu(ce.x,ce.y,Ie.x-ce.x,Ie.y-ce.y)},Kt.prototype.clone=function(){var V=this.sx,ce=this.shy,Ie=this.shx,Re=this.sy,Ge=this.tx,ct=this.ty;return new Kt(V,ce,Ie,Re,Ge,ct)},p.Matrix=Kt;var pn=p.matrixMult=function(V,ce){return ce.multiply(V)},on=new Kt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=on;var Dn=function(V,ce){if(!mn[V]){var Ie=(ce instanceof Bh?"Sh":"P")+(Object.keys(or).length+1).toString(10);ce.id=Ie,mn[V]=Ie,or[Ie]=ce,Mr.publish("addPattern",ce)}};p.ShadingPattern=Bh,p.TilingPattern=Tm,p.addShadingPattern=function(V,ce){return y("addShadingPattern()"),Dn(V,ce),this},p.beginTilingPattern=function(V){y("beginTilingPattern()"),Tl(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},p.endTilingPattern=function(V,ce){y("endTilingPattern()"),ce.stream=me[K].join(`
`),Dn(V,ce),Mr.publish("endTilingPattern",ce),js.pop().restore()};var zn=p.__private__.newObject=function(){var V=ea();return Ae(V,!0),V},ea=p.__private__.newObjectDeferred=function(){return ne++,ue[ne]=function(){return be},ne},Ae=function(V,ce){return ce=typeof ce=="boolean"&&ce,ue[V]=be,ce&&we(V+" 0 obj"),V},Ne=p.__private__.newAdditionalObject=function(){var V={objId:ea(),content:""};return Ce.push(V),V},ye=ea(),Ee=ea(),_e=p.__private__.decodeColorString=function(V){var ce=V.split(" ");if(ce.length!==2||ce[1]!=="g"&&ce[1]!=="G")ce.length===5&&(ce[4]==="k"||ce[4]==="K")&&(ce=[(1-ce[0])*(1-ce[3]),(1-ce[1])*(1-ce[3]),(1-ce[2])*(1-ce[3]),"r"]);else{var Ie=parseFloat(ce[0]);ce=[Ie,Ie,Ie,"r"]}for(var Re="#",Ge=0;Ge<3;Ge++)Re+=("0"+Math.floor(255*parseFloat(ce[Ge])).toString(16)).slice(-2);return Re},Be=p.__private__.encodeColorString=function(V){var ce;typeof V=="string"&&(V={ch1:V});var Ie=V.ch1,Re=V.ch2,Ge=V.ch3,ct=V.ch4,Nt=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ie=="string"&&Ie.charAt(0)!=="#"){var Ht=new ZU(Ie);if(Ht.ok)Ie=Ht.toHex();else if(!/^\d*\.?\d*$/.test(Ie))throw new Error('Invalid color "'+Ie+'" passed to jsPDF.encodeColorString.')}if(typeof Ie=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ie)&&(Ie="#"+Ie[1]+Ie[1]+Ie[2]+Ie[2]+Ie[3]+Ie[3]),typeof Ie=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ie)){var S=parseInt(Ie.substr(1),16);Ie=S>>16&255,Re=S>>8&255,Ge=255&S}if(Re===void 0||ct===void 0&&Ie===Re&&Re===Ge)if(typeof Ie=="string")ce=Ie+" "+Nt[0];else switch(V.precision){case 2:ce=U(Ie/255)+" "+Nt[0];break;case 3:default:ce=j(Ie/255)+" "+Nt[0]}else if(ct===void 0||Yn(ct)==="object"){if(ct&&!isNaN(ct.a)&&ct.a===0)return ce=["1.","1.","1.",Nt[1]].join(" ");if(typeof Ie=="string")ce=[Ie,Re,Ge,Nt[1]].join(" ");else switch(V.precision){case 2:ce=[U(Ie/255),U(Re/255),U(Ge/255),Nt[1]].join(" ");break;default:case 3:ce=[j(Ie/255),j(Re/255),j(Ge/255),Nt[1]].join(" ")}}else if(typeof Ie=="string")ce=[Ie,Re,Ge,ct,Nt[2]].join(" ");else switch(V.precision){case 2:ce=[U(Ie),U(Re),U(Ge),U(ct),Nt[2]].join(" ");break;case 3:default:ce=[j(Ie),j(Re),j(Ge),j(ct),Nt[2]].join(" ")}return ce},$e=p.__private__.getFilters=function(){return i},st=p.__private__.putStream=function(V){var ce=(V=V||{}).data||"",Ie=V.filters||$e(),Re=V.alreadyAppliedFilters||[],Ge=V.addLength1||!1,ct=ce.length,Nt=V.objectId,Ht=function(yr){return yr};if(d!==null&&Nt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Ht=Gn.encryptor(Nt,0));var S={};Ie===!0&&(Ie=["FlateEncode"]);var J=V.additionalKeyValues||[],se=(S=ur.API.processDataByFilters!==void 0?ur.API.processDataByFilters(ce,Ie):{data:ce,reverseChain:[]}).reverseChain+(Array.isArray(Re)?Re.join(" "):Re.toString());if(S.data.length!==0&&(J.push({key:"Length",value:S.data.length}),Ge===!0&&J.push({key:"Length1",value:ct})),se.length!=0)if(se.split("/").length-1==1)J.push({key:"Filter",value:se});else{J.push({key:"Filter",value:"["+se+"]"});for(var ge=0;ge<J.length;ge+=1)if(J[ge].key==="DecodeParms"){for(var Ve=[],nt=0;nt<S.reverseChain.split("/").length-1;nt+=1)Ve.push("null");Ve.push(J[ge].value),J[ge].value="["+Ve.join(" ")+"]"}}we("<<");for(var Bt=0;Bt<J.length;Bt++)we("/"+J[Bt].key+" "+J[Bt].value);we(">>"),S.data.length!==0&&(we("stream"),we(Ht(S.data)),we("endstream"))},ze=p.__private__.putPage=function(V){var ce=V.number,Ie=V.data,Re=V.objId,Ge=V.contentsObjId;Ae(Re,!0),we("<</Type /Page"),we("/Parent "+V.rootDictionaryObjId+" 0 R"),we("/Resources "+V.resourceDictionaryObjId+" 0 R"),we("/MediaBox ["+parseFloat(w(V.mediaBox.bottomLeftX))+" "+parseFloat(w(V.mediaBox.bottomLeftY))+" "+w(V.mediaBox.topRightX)+" "+w(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&we("/CropBox ["+w(V.cropBox.bottomLeftX)+" "+w(V.cropBox.bottomLeftY)+" "+w(V.cropBox.topRightX)+" "+w(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&we("/BleedBox ["+w(V.bleedBox.bottomLeftX)+" "+w(V.bleedBox.bottomLeftY)+" "+w(V.bleedBox.topRightX)+" "+w(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&we("/TrimBox ["+w(V.trimBox.bottomLeftX)+" "+w(V.trimBox.bottomLeftY)+" "+w(V.trimBox.topRightX)+" "+w(V.trimBox.topRightY)+"]"),V.artBox!==null&&we("/ArtBox ["+w(V.artBox.bottomLeftX)+" "+w(V.artBox.bottomLeftY)+" "+w(V.artBox.topRightX)+" "+w(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&we("/UserUnit "+V.userUnit),Mr.publish("putPage",{objId:Re,pageContext:Jt[ce],pageNumber:ce,page:Ie}),we("/Contents "+Ge+" 0 R"),we(">>"),we("endobj");var ct=Ie.join(`
`);return T===B.ADVANCED&&(ct+=`
Q`),Ae(Ge,!0),st({data:ct,filters:$e(),objectId:Ge}),we("endobj"),Re},Ze=p.__private__.putPages=function(){var V,ce,Ie=[];for(V=1;V<=ar;V++)Jt[V].objId=ea(),Jt[V].contentsObjId=ea();for(V=1;V<=ar;V++)Ie.push(ze({number:V,data:me[V],objId:Jt[V].objId,contentsObjId:Jt[V].contentsObjId,mediaBox:Jt[V].mediaBox,cropBox:Jt[V].cropBox,bleedBox:Jt[V].bleedBox,trimBox:Jt[V].trimBox,artBox:Jt[V].artBox,userUnit:Jt[V].userUnit,rootDictionaryObjId:ye,resourceDictionaryObjId:Ee}));Ae(ye,!0),we("<</Type /Pages");var Re="/Kids [";for(ce=0;ce<ar;ce++)Re+=Ie[ce]+" 0 R ";we(Re+"]"),we("/Count "+ar),we(">>"),we("endobj"),Mr.publish("postPutPages")},rt=function(V){Mr.publish("putFont",{font:V,out:we,newObject:zn,putStream:st}),V.isAlreadyPutted!==!0&&(V.objectNumber=zn(),we("<<"),we("/Type /Font"),we("/BaseFont /"+Cm(V.postScriptName)),we("/Subtype /Type1"),typeof V.encoding=="string"&&we("/Encoding /"+V.encoding),we("/FirstChar 32"),we("/LastChar 255"),we(">>"),we("endobj"))},yt=function(){for(var V in zt)zt.hasOwnProperty(V)&&(h===!1||h===!0&&m.hasOwnProperty(V))&&rt(zt[V])},It=function(V){V.objectNumber=zn();var ce=[];ce.push({key:"Type",value:"/XObject"}),ce.push({key:"Subtype",value:"/Form"}),ce.push({key:"BBox",value:"["+[w(V.x),w(V.y),w(V.x+V.width),w(V.y+V.height)].join(" ")+"]"}),ce.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var Ie=V.pages[1].join(`
`);st({data:Ie,additionalKeyValues:ce,objectId:V.objectNumber}),we("endobj")},Qt=function(){for(var V in Zn)Zn.hasOwnProperty(V)&&It(Zn[V])},Tt=function(V,ce){var Ie,Re=[],Ge=1/(ce-1);for(Ie=0;Ie<1;Ie+=Ge)Re.push(Ie);if(Re.push(1),V[0].offset!=0){var ct={offset:0,color:V[0].color};V.unshift(ct)}if(V[V.length-1].offset!=1){var Nt={offset:1,color:V[V.length-1].color};V.push(Nt)}for(var Ht="",S=0,J=0;J<Re.length;J++){for(Ie=Re[J];Ie>V[S+1].offset;)S++;var se=V[S].offset,ge=(Ie-se)/(V[S+1].offset-se),Ve=V[S].color,nt=V[S+1].color;Ht+=re(Math.round((1-ge)*Ve[0]+ge*nt[0]).toString(16))+re(Math.round((1-ge)*Ve[1]+ge*nt[1]).toString(16))+re(Math.round((1-ge)*Ve[2]+ge*nt[2]).toString(16))}return Ht.trim()},Lt=function(V,ce){ce||(ce=21);var Ie=zn(),Re=Tt(V.colors,ce),Ge=[];Ge.push({key:"FunctionType",value:"0"}),Ge.push({key:"Domain",value:"[0.0 1.0]"}),Ge.push({key:"Size",value:"["+ce+"]"}),Ge.push({key:"BitsPerSample",value:"8"}),Ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),st({data:Re,additionalKeyValues:Ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ie}),we("endobj"),V.objectNumber=zn(),we("<< /ShadingType "+V.type),we("/ColorSpace /DeviceRGB");var ct="/Coords ["+w(parseFloat(V.coords[0]))+" "+w(parseFloat(V.coords[1]))+" ";V.type===2?ct+=w(parseFloat(V.coords[2]))+" "+w(parseFloat(V.coords[3])):ct+=w(parseFloat(V.coords[2]))+" "+w(parseFloat(V.coords[3]))+" "+w(parseFloat(V.coords[4]))+" "+w(parseFloat(V.coords[5])),we(ct+="]"),V.matrix&&we("/Matrix ["+V.matrix.toString()+"]"),we("/Function "+Ie+" 0 R"),we("/Extend [true true]"),we(">>"),we("endobj")},pr=function(V,ce){var Ie=ea(),Re=zn();ce.push({resourcesOid:Ie,objectOid:Re}),V.objectNumber=Re;var Ge=[];Ge.push({key:"Type",value:"/Pattern"}),Ge.push({key:"PatternType",value:"1"}),Ge.push({key:"PaintType",value:"1"}),Ge.push({key:"TilingType",value:"1"}),Ge.push({key:"BBox",value:"["+V.boundingBox.map(w).join(" ")+"]"}),Ge.push({key:"XStep",value:w(V.xStep)}),Ge.push({key:"YStep",value:w(V.yStep)}),Ge.push({key:"Resources",value:Ie+" 0 R"}),V.matrix&&Ge.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),st({data:V.stream,additionalKeyValues:Ge,objectId:V.objectNumber}),we("endobj")},Vr=function(V){var ce;for(ce in or)or.hasOwnProperty(ce)&&(or[ce]instanceof Bh?Lt(or[ce]):or[ce]instanceof Tm&&pr(or[ce],V))},zr=function(V){for(var ce in V.objectNumber=zn(),we("<<"),V)switch(ce){case"opacity":we("/ca "+U(V[ce]));break;case"stroke-opacity":we("/CA "+U(V[ce]))}we(">>"),we("endobj")},Wr=function(){var V;for(V in Lr)Lr.hasOwnProperty(V)&&zr(Lr[V])},Ra=function(){for(var V in we("/XObject <<"),Zn)Zn.hasOwnProperty(V)&&Zn[V].objectNumber>=0&&we("/"+V+" "+Zn[V].objectNumber+" 0 R");Mr.publish("putXobjectDict"),we(">>")},_i=function(){Gn.oid=zn(),we("<<"),we("/Filter /Standard"),we("/V "+Gn.v),we("/R "+Gn.r),we("/U <"+Gn.toHexString(Gn.U)+">"),we("/O <"+Gn.toHexString(Gn.O)+">"),we("/P "+Gn.P),we(">>"),we("endobj")},La=function(){for(var V in we("/Font <<"),zt)zt.hasOwnProperty(V)&&(h===!1||h===!0&&m.hasOwnProperty(V))&&we("/"+V+" "+zt[V].objectNumber+" 0 R");we(">>")},ps=function(){if(Object.keys(or).length>0){for(var V in we("/Shading <<"),or)or.hasOwnProperty(V)&&or[V]instanceof Bh&&or[V].objectNumber>=0&&we("/"+V+" "+or[V].objectNumber+" 0 R");Mr.publish("putShadingPatternDict"),we(">>")}},Za=function(V){if(Object.keys(or).length>0){for(var ce in we("/Pattern <<"),or)or.hasOwnProperty(ce)&&or[ce]instanceof p.TilingPattern&&or[ce].objectNumber>=0&&or[ce].objectNumber<V&&we("/"+ce+" "+or[ce].objectNumber+" 0 R");Mr.publish("putTilingPatternDict"),we(">>")}},Ds=function(){if(Object.keys(Lr).length>0){var V;for(V in we("/ExtGState <<"),Lr)Lr.hasOwnProperty(V)&&Lr[V].objectNumber>=0&&we("/"+V+" "+Lr[V].objectNumber+" 0 R");Mr.publish("putGStateDict"),we(">>")}},ta=function(V){Ae(V.resourcesOid,!0),we("<<"),we("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),La(),ps(),Za(V.objectOid),Ds(),Ra(),we(">>"),we("endobj")},gs=function(){var V=[];yt(),Wr(),Qt(),Vr(V),Mr.publish("putResources"),V.forEach(ta),ta({resourcesOid:Ee,objectOid:Number.MAX_SAFE_INTEGER}),Mr.publish("postPutResources")},Jc=function(){Mr.publish("putAdditionalObjects");for(var V=0;V<Ce.length;V++){var ce=Ce[V];Ae(ce.objId,!0),we(ce.content),we("endobj")}Mr.publish("postPutAdditionalObjects")},dd=function(V){tr[V.fontName]=tr[V.fontName]||{},tr[V.fontName][V.fontStyle]=V.id},wl=function(V,ce,Ie,Re,Ge){var ct={id:"F"+(Object.keys(zt).length+1).toString(10),postScriptName:V,fontName:ce,fontStyle:Ie,encoding:Re,isStandardFont:Ge||!1,metadata:{}};return Mr.publish("addFont",{font:ct,instance:this}),zt[ct.id]=ct,dd(ct),ct.id},sA=function(V){for(var ce=0,Ie=Xe.length;ce<Ie;ce++){var Re=wl.call(this,V[ce][0],V[ce][1],V[ce][2],Xe[ce][3],!0);h===!1&&(m[Re]=!0);var Ge=V[ce][0].split("-");dd({id:Re,fontName:Ge[0],fontStyle:Ge[1]||""})}Mr.publish("addFonts",{fonts:zt,dictionary:tr})},Rs=function(V){return V.foo=function(){try{return V.apply(this,arguments)}catch(Re){var ce=Re.stack||"";~ce.indexOf(" at ")&&(ce=ce.split(" at ")[1]);var Ie="Error in function "+ce.split(`
`)[0].split("<")[0]+": "+Re.message;if(!Br.console)throw new Error(Ie);Br.console.error(Ie,Re),Br.alert&&alert(Ie)}},V.foo.bar=V,V.foo},Zc=function(V,ce){var Ie,Re,Ge,ct,Nt,Ht,S,J,se;if(Ge=(ce=ce||{}).sourceEncoding||"Unicode",Nt=ce.outputEncoding,(ce.autoencode||Nt)&&zt[Oe].metadata&&zt[Oe].metadata[Ge]&&zt[Oe].metadata[Ge].encoding&&(ct=zt[Oe].metadata[Ge].encoding,!Nt&&zt[Oe].encoding&&(Nt=zt[Oe].encoding),!Nt&&ct.codePages&&(Nt=ct.codePages[0]),typeof Nt=="string"&&(Nt=ct[Nt]),Nt)){for(S=!1,Ht=[],Ie=0,Re=V.length;Ie<Re;Ie++)(J=Nt[V.charCodeAt(Ie)])?Ht.push(String.fromCharCode(J)):Ht.push(V[Ie]),Ht[Ie].charCodeAt(0)>>8&&(S=!0);V=Ht.join("")}for(Ie=V.length;S===void 0&&Ie!==0;)V.charCodeAt(Ie-1)>>8&&(S=!0),Ie--;if(!S)return V;for(Ht=ce.noBOM?[]:[254,255],Ie=0,Re=V.length;Ie<Re;Ie++){if((se=(J=V.charCodeAt(Ie))>>8)>>8)throw new Error("Character at position "+Ie+" of string '"+V+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ht.push(se),Ht.push(J-(se<<8))}return String.fromCharCode.apply(void 0,Ht)},gn=p.__private__.pdfEscape=p.pdfEscape=function(V,ce){return Zc(V,ce).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ls=p.__private__.beginPage=function(V){me[++ar]=[],Jt[ar]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},xo(ar),Te(me[K])},yl=function(V,ce){var Ie,Re,Ge;switch(r=ce||r,typeof V=="string"&&(Ie=_(V.toLowerCase()),Array.isArray(Ie)&&(Re=Ie[0],Ge=Ie[1])),Array.isArray(V)&&(Re=V[0]*ke,Ge=V[1]*ke),isNaN(Re)&&(Re=a[0],Ge=a[1]),(Re>14400||Ge>14400)&&(ca.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Re=Math.min(14400,Re),Ge=Math.min(14400,Ge)),a=[Re,Ge],r.substr(0,1)){case"l":Ge>Re&&(a=[Ge,Re]);break;case"p":Re>Ge&&(a=[Ge,Re])}Ls(a),cA(Sl),we(Os),uA!==0&&we(uA+" J"),fc!==0&&we(fc+" j"),Mr.publish("addPage",{pageNumber:ar})},El=function(V){V>0&&V<=ar&&(me.splice(V,1),Jt.splice(V,1),ar--,K>ar&&(K=ar),this.setPage(K))},xo=function(V){V>0&&V<=ar&&(K=V)},Nn=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return me.length-1},Cl=function(V,ce,Ie){var Re,Ge=void 0;return Ie=Ie||{},V=V!==void 0?V:zt[Oe].fontName,ce=ce!==void 0?ce:zt[Oe].fontStyle,Re=V.toLowerCase(),tr[Re]!==void 0&&tr[Re][ce]!==void 0?Ge=tr[Re][ce]:tr[V]!==void 0&&tr[V][ce]!==void 0?Ge=tr[V][ce]:Ie.disableWarning===!1&&ca.warn("Unable to look up font label for font '"+V+"', '"+ce+"'. Refer to getFontList() for available fonts."),Ge||Ie.noFallback||(Ge=tr.times[ce])==null&&(Ge=tr.times.normal),Ge},Si=p.__private__.putInfo=function(){var V=zn(),ce=function(Re){return Re};for(var Ie in d!==null&&(ce=Gn.encryptor(V,0)),we("<<"),we("/Producer ("+gn(ce("jsPDF "+ur.version))+")"),De)De.hasOwnProperty(Ie)&&De[Ie]&&we("/"+Ie.substr(0,1).toUpperCase()+Ie.substr(1)+" ("+gn(ce(De[Ie]))+")");we("/CreationDate ("+gn(ce(ee))+")"),we(">>"),we("endobj")},zo=p.__private__.putCatalog=function(V){var ce=(V=V||{}).rootDictionaryObjId||ye;switch(zn(),we("<<"),we("/Type /Catalog"),we("/Pages "+ce+" 0 R"),Et||(Et="fullwidth"),Et){case"fullwidth":we("/OpenAction [3 0 R /FitH null]");break;case"fullheight":we("/OpenAction [3 0 R /FitV null]");break;case"fullpage":we("/OpenAction [3 0 R /Fit]");break;case"original":we("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ie=""+Et;Ie.substr(Ie.length-1)==="%"&&(Et=parseInt(Et)/100),typeof Et=="number"&&we("/OpenAction [3 0 R /XYZ null null "+U(Et)+"]")}switch(Rt||(Rt="continuous"),Rt){case"continuous":we("/PageLayout /OneColumn");break;case"single":we("/PageLayout /SinglePage");break;case"two":case"twoleft":we("/PageLayout /TwoColumnLeft");break;case"tworight":we("/PageLayout /TwoColumnRight")}Dt&&we("/PageMode /"+Dt),Mr.publish("putCatalog"),we(">>"),we("endobj")},fd=p.__private__.putTrailer=function(){we("trailer"),we("<<"),we("/Size "+(ne+1)),we("/Root "+ne+" 0 R"),we("/Info "+(ne-1)+" 0 R"),d!==null&&we("/Encrypt "+Gn.oid+" 0 R"),we("/ID [ <"+W+"> <"+W+"> ]"),we(">>")},iA=p.__private__.putHeader=function(){we("%PDF-"+v),we("%ºß¬à")},oA=p.__private__.putXRef=function(){var V="0000000000";we("xref"),we("0 "+(ne+1)),we("0000000000 65535 f ");for(var ce=1;ce<=ne;ce++)typeof ue[ce]=="function"?we((V+ue[ce]()).slice(-10)+" 00000 n "):ue[ce]!==void 0?we((V+ue[ce]).slice(-10)+" 00000 n "):we("0000000000 00000 n ")},Go=p.__private__.buildDocument=function(){Ye(),Te(fe),Mr.publish("buildDocument"),iA(),Ze(),Jc(),gs(),d!==null&&_i(),Si(),zo();var V=be;return oA(),fd(),we("startxref"),we(""+V),we("%%EOF"),Te(me[K]),fe.join(`
`)},eu=p.__private__.getBlob=function(V){return new Blob([He(V)],{type:"application/pdf"})},Ko=p.output=p.__private__.output=Rs(function(V,ce){switch(typeof(ce=ce||{})=="string"?ce={filename:ce}:ce.filename=ce.filename||"generated.pdf",V){case void 0:return Go();case"save":p.save(ce.filename);break;case"arraybuffer":return He(Go());case"blob":return eu(Go());case"bloburi":case"bloburl":if(Br.URL!==void 0&&typeof Br.URL.createObjectURL=="function")return Br.URL&&Br.URL.createObjectURL(eu(Go()))||void 0;ca.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ie="",Re=Go();try{Ie=y4(Re)}catch{Ie=y4(unescape(encodeURIComponent(Re)))}return"data:application/pdf;filename="+ce.filename+";base64,"+Ie;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Br)==="[object Window]"){var Ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ct=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ce.pdfObjectUrl&&(Ge=ce.pdfObjectUrl,ct="");var Nt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ge+'"'+ct+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ce)+");<\/script></body></html>",Ht=Br.open();return Ht!==null&&Ht.document.write(Nt),Ht}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Br)==="[object Window]"){var S='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ce.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ce.filename+'" width="500px" height="400px" /></body></html>',J=Br.open();if(J!==null){J.document.write(S);var se=this;J.document.documentElement.querySelector("#pdfViewer").onload=function(){J.document.title=ce.filename,J.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(se.output("bloburl"))}}return J}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Br)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ge='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ce)+'"></iframe></body></html>',Ve=Br.open();if(Ve!==null&&(Ve.document.write(ge),Ve.document.title=ce.filename),Ve||typeof safari>"u")return Ve;break;case"datauri":case"dataurl":return Br.document.location.href=this.output("datauristring",ce);default:return null}}),vo=function(V){return Array.isArray(ms)===!0&&ms.indexOf(V)>-1};switch(n){case"pt":ke=1;break;case"mm":ke=72/25.4;break;case"cm":ke=72/2.54;break;case"in":ke=72;break;case"px":ke=vo("px_scaling")==1?.75:96/72;break;case"pc":case"em":ke=12;break;case"ex":ke=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ke=n}var Gn=null;Z(),G();var qo=function(V){return d!==null?Gn.encryptor(V,0):function(ce){return ce}},bo=p.__private__.getPageInfo=p.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Jt[V].objId,pageNumber:V,pageContext:Jt[V]}},wr=p.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ce in Jt)if(Jt[ce].objId===V)break;return bo(ce)},wo=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Jt[K].objId,pageNumber:K,pageContext:Jt[K]}};p.addPage=function(){return yl.apply(this,arguments),this},p.setPage=function(){return xo.apply(this,arguments),Te.call(this,me[K]),this},p.insertPage=function(V){return this.addPage(),this.movePage(K,V),this},p.movePage=function(V,ce){var Ie,Re;if(V>ce){Ie=me[V],Re=Jt[V];for(var Ge=V;Ge>ce;Ge--)me[Ge]=me[Ge-1],Jt[Ge]=Jt[Ge-1];me[ce]=Ie,Jt[ce]=Re,this.setPage(ce)}else if(V<ce){Ie=me[V],Re=Jt[V];for(var ct=V;ct<ce;ct++)me[ct]=me[ct+1],Jt[ct]=Jt[ct+1];me[ce]=Ie,Jt[ce]=Re,this.setPage(ce)}return this},p.deletePage=function(){return El.apply(this,arguments),this},p.__private__.text=p.text=function(V,ce,Ie,Re,Ge){var ct,Nt,Ht,S,J,se,ge,Ve,nt,Bt=(Re=Re||{}).scope||this;if(typeof V=="number"&&typeof ce=="number"&&(typeof Ie=="string"||Array.isArray(Ie))){var yr=Ie;Ie=ce,ce=V,V=yr}if(arguments[3]instanceof Kt?(y("The transform parameter of text() with a Matrix value"),nt=Ge):(Ht=arguments[4],S=arguments[5],Yn(ge=arguments[3])==="object"&&ge!==null||(typeof Ht=="string"&&(S=Ht,Ht=null),typeof ge=="string"&&(S=ge,ge=null),typeof ge=="number"&&(Ht=ge,ge=null),Re={flags:ge,angle:Ht,align:S})),isNaN(ce)||isNaN(Ie)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return Bt;var rn="",Dr=!1,Bn=typeof Re.lineHeightFactor=="number"?Re.lineHeightFactor:tn,Ln=Bt.internal.scaleFactor;function _o(Yr){return Yr=Yr.split("	").join(Array(Re.TabLen||9).join(" ")),gn(Yr,ge)}function Sa(Yr){for(var Jr,ra=Yr.concat(),Na=[],No=ra.length;No--;)typeof(Jr=ra.shift())=="string"?Na.push(Jr):Array.isArray(Yr)&&(Jr.length===1||Jr[1]===void 0&&Jr[2]===void 0)?Na.push(Jr[0]):Na.push([Jr[0],Jr[1],Jr[2]]);return Na}function Ti(Yr,Jr){var ra;if(typeof Yr=="string")ra=Jr(Yr)[0];else if(Array.isArray(Yr)){for(var Na,No,hu=Yr.concat(),mu=[],vc=hu.length;vc--;)typeof(Na=hu.shift())=="string"?mu.push(Jr(Na)[0]):Array.isArray(Na)&&typeof Na[0]=="string"&&(No=Jr(Na[0],Na[1],Na[2]),mu.push([No[0],No[1],No[2]]));ra=mu}return ra}var Fl=!1,su=!0;if(typeof V=="string")Fl=!0;else if(Array.isArray(V)){var gd=V.concat();Nt=[];for(var AA,es=gd.length;es--;)(typeof(AA=gd.shift())!="string"||Array.isArray(AA)&&typeof AA[0]!="string")&&(su=!1);Fl=su}if(Fl===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var iu=ut/Bt.internal.scaleFactor,dA=iu*(Bn-1);switch(Re.baseline){case"bottom":Ie-=dA;break;case"top":Ie+=iu-dA;break;case"hanging":Ie+=iu-2*dA;break;case"middle":Ie+=iu/2-dA}if((se=Re.maxWidth||0)>0&&(typeof V=="string"?V=Bt.splitTextToSize(V,se):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce(function(Yr,Jr){return Yr.concat(Bt.splitTextToSize(Jr,se))},[]))),ct={text:V,x:ce,y:Ie,options:Re,mutex:{pdfEscape:gn,activeFontKey:Oe,fonts:zt,activeFontSize:ut}},Mr.publish("preProcessText",ct),V=ct.text,Ht=(Re=ct.options).angle,!(nt instanceof Kt)&&Ht&&typeof Ht=="number"){Ht*=Math.PI/180,Re.rotationDirection===0&&(Ht=-Ht),T===B.ADVANCED&&(Ht=-Ht);var fA=Math.cos(Ht),xd=Math.sin(Ht);nt=new Kt(fA,xd,-xd,fA,0,0)}else Ht&&Ht instanceof Kt&&(nt=Ht);T!==B.ADVANCED||nt||(nt=on),(J=Re.charSpace||dc)!==void 0&&(rn+=w(F(J))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ve=Re.horizontalScale)!==void 0&&(rn+=w(100*Ve)+` Tz
`),Re.lang;var Ii=-1,Op=Re.renderingMode!==void 0?Re.renderingMode:Re.stroke,Zf=Bt.internal.getCurrentPageInfo().pageContext;switch(Op){case 0:case!1:case"fill":Ii=0;break;case 1:case!0:case"stroke":Ii=1;break;case 2:case"fillThenStroke":Ii=2;break;case 3:case"invisible":Ii=3;break;case 4:case"fillAndAddForClipping":Ii=4;break;case 5:case"strokeAndAddPathForClipping":Ii=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ii=6;break;case 7:case"addToPathForClipping":Ii=7}var E0=Zf.usedRenderingMode!==void 0?Zf.usedRenderingMode:-1;Ii!==-1?rn+=Ii+` Tr
`:E0!==-1&&(rn+=`0 Tr
`),Ii!==-1&&(Zf.usedRenderingMode=Ii),S=Re.align||"left";var So,xs=ut*Bn,ou=Bt.internal.pageSize.getWidth(),eh=zt[Oe];J=Re.charSpace||dc,se=Re.maxWidth||0,ge=Object.assign({autoencode:!0,noBOM:!0},Re.flags);var gc=[],lu=function(Yr){return Bt.getStringUnitWidth(Yr,{font:eh,charSpace:J,fontSize:ut,doKerning:!1})*ut/Ln};if(Object.prototype.toString.call(V)==="[object Array]"){var ci;Nt=Sa(V),S!=="left"&&(So=Nt.map(lu));var Us,cu=0;if(S==="right"){ce-=So[0],V=[],es=Nt.length;for(var Fi=0;Fi<es;Fi++)Fi===0?(Us=qs(ce),ci=Ua(Ie)):(Us=F(cu-So[Fi]),ci=-xs),V.push([Nt[Fi],Us,ci]),cu=So[Fi]}else if(S==="center"){ce-=So[0]/2,V=[],es=Nt.length;for(var Yo=0;Yo<es;Yo++)Yo===0?(Us=qs(ce),ci=Ua(Ie)):(Us=F((cu-So[Yo])/2),ci=-xs),V.push([Nt[Yo],Us,ci]),cu=So[Yo]}else if(S==="left"){V=[],es=Nt.length;for(var jl=0;jl<es;jl++)V.push(Nt[jl])}else if(S==="justify"&&eh.encoding==="Identity-H"){V=[],es=Nt.length,se=se!==0?se:ou;for(var Jo=0,ba=0;ba<es;ba++)if(ci=ba===0?Ua(Ie):-xs,Us=ba===0?qs(ce):Jo,ba<es-1){var Zo=F((se-So[ba])/(Nt[ba].split(" ").length-1)),Pa=Nt[ba].split(" ");V.push([Pa[0]+" ",Us,ci]),Jo=0;for(var ji=1;ji<Pa.length;ji++){var hA=(lu(Pa[ji-1]+" "+Pa[ji])-lu(Pa[ji]))*Ln+Zo;ji==Pa.length-1?V.push([Pa[ji],hA,0]):V.push([Pa[ji]+" ",hA,0]),Jo-=hA}}else V.push([Nt[ba],Us,ci]);V.push(["",Jo,0])}else{if(S!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],es=Nt.length,se=se!==0?se:ou,ba=0;ba<es;ba++)ci=ba===0?Ua(Ie):-xs,Us=ba===0?qs(ce):0,ba<es-1?gc.push(w(F((se-So[ba])/(Nt[ba].split(" ").length-1)))):gc.push(0),V.push([Nt[ba],Us,ci])}}var Dl=typeof Re.R2L=="boolean"?Re.R2L:jt;Dl===!0&&(V=Ti(V,function(Yr,Jr,ra){return[Yr.split("").reverse().join(""),Jr,ra]})),ct={text:V,x:ce,y:Ie,options:Re,mutex:{pdfEscape:gn,activeFontKey:Oe,fonts:zt,activeFontSize:ut}},Mr.publish("postProcessText",ct),V=ct.text,Dr=ct.mutex.isHex||!1;var vd=zt[Oe].encoding;vd!=="WinAnsiEncoding"&&vd!=="StandardEncoding"||(V=Ti(V,function(Yr,Jr,ra){return[_o(Yr),Jr,ra]})),Nt=Sa(V),V=[];for(var uu,Au,du,mA=0,bd=1,fu=Array.isArray(Nt[0])?bd:mA,xc="",pA=function(Yr,Jr,ra){var Na="";return ra instanceof Kt?(ra=typeof Re.angle=="number"?pn(ra,new Kt(1,0,0,1,Yr,Jr)):pn(new Kt(1,0,0,1,Yr,Jr),ra),T===B.ADVANCED&&(ra=pn(new Kt(1,0,0,-1,0,0),ra)),Na=ra.join(" ")+` Tm
`):Na=w(Yr)+" "+w(Jr)+` Td
`,Na},wa=0;wa<Nt.length;wa++){switch(xc="",fu){case bd:du=(Dr?"<":"(")+Nt[wa][0]+(Dr?">":")"),uu=parseFloat(Nt[wa][1]),Au=parseFloat(Nt[wa][2]);break;case mA:du=(Dr?"<":"(")+Nt[wa]+(Dr?">":")"),uu=qs(ce),Au=Ua(Ie)}gc!==void 0&&gc[wa]!==void 0&&(xc=gc[wa]+` Tw
`),wa===0?V.push(xc+pA(uu,Au,nt)+du):fu===mA?V.push(xc+du):fu===bd&&V.push(xc+pA(uu,Au,nt)+du)}V=fu===mA?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var io=`BT
/`;return io+=Oe+" "+ut+` Tf
`,io+=w(ut*Bn)+` TL
`,io+=Wo+`
`,io+=rn,io+=V,we(io+="ET"),m[Oe]=!0,Bt};var hd=p.__private__.clip=p.clip=function(V){return we(V==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return hd("evenodd")},p.__private__.discardPath=p.discardPath=function(){return we("n"),this};var Gs=p.__private__.isValidStyle=function(V){var ce=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(ce=!0),ce};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(V){return Gs(V)&&(A=V),this};var Ni=p.__private__.getStyle=p.getStyle=function(V){var ce=A;switch(V){case"D":case"S":ce="S";break;case"F":ce="f";break;case"FD":case"DF":ce="B";break;case"f":case"f*":case"B":case"B*":ce=V}return ce},li=p.close=function(){return we("h"),this};p.stroke=function(){return we("S"),this},p.fill=function(V){return yo("f",V),this},p.fillEvenOdd=function(V){return yo("f*",V),this},p.fillStroke=function(V){return yo("B",V),this},p.fillStrokeEvenOdd=function(V){return yo("B*",V),this};var yo=function(V,ce){Yn(ce)==="object"?$o(ce,V):we(V)},Bi=function(V){V===null||T===B.ADVANCED&&V===void 0||(V=Ni(V),we(V))};function _l(V,ce,Ie,Re,Ge){var ct=new Tm(ce||this.boundingBox,Ie||this.xStep,Re||this.yStep,this.gState,Ge||this.matrix);ct.stream=this.stream;var Nt=V+"$$"+this.cloneIndex+++"$$";return Dn(Nt,ct),ct}var $o=function(V,ce){var Ie=mn[V.key],Re=or[Ie];if(Re instanceof Bh)we("q"),we(lA(ce)),Re.gState&&p.setGState(Re.gState),we(V.matrix.toString()+" cm"),we("/"+Ie+" sh"),we("Q");else if(Re instanceof Tm){var Ge=new Kt(1,0,0,-1,0,$s());V.matrix&&(Ge=Ge.multiply(V.matrix||on),Ie=_l.call(Re,V.key,V.boundingBox,V.xStep,V.yStep,Ge).id),we("q"),we("/Pattern cs"),we("/"+Ie+" scn"),Re.gState&&p.setGState(Re.gState),we(ce),we("Q")}},lA=function(V){switch(V){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ki=p.moveTo=function(V,ce){return we(w(F(V))+" "+w(M(ce))+" m"),this},Ks=p.lineTo=function(V,ce){return we(w(F(V))+" "+w(M(ce))+" l"),this},Eo=p.curveTo=function(V,ce,Ie,Re,Ge,ct){return we([w(F(V)),w(M(ce)),w(F(Ie)),w(M(Re)),w(F(Ge)),w(M(ct)),"c"].join(" ")),this};p.__private__.line=p.line=function(V,ce,Ie,Re,Ge){if(isNaN(V)||isNaN(ce)||isNaN(Ie)||isNaN(Re)||!Gs(Ge))throw new Error("Invalid arguments passed to jsPDF.line");return T===B.COMPAT?this.lines([[Ie-V,Re-ce]],V,ce,[1,1],Ge||"S"):this.lines([[Ie-V,Re-ce]],V,ce,[1,1]).stroke()},p.__private__.lines=p.lines=function(V,ce,Ie,Re,Ge,ct){var Nt,Ht,S,J,se,ge,Ve,nt,Bt,yr,rn,Dr;if(typeof V=="number"&&(Dr=Ie,Ie=ce,ce=V,V=Dr),Re=Re||[1,1],ct=ct||!1,isNaN(ce)||isNaN(Ie)||!Array.isArray(V)||!Array.isArray(Re)||!Gs(Ge)||typeof ct!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ki(ce,Ie),Nt=Re[0],Ht=Re[1],J=V.length,yr=ce,rn=Ie,S=0;S<J;S++)(se=V[S]).length===2?(yr=se[0]*Nt+yr,rn=se[1]*Ht+rn,Ks(yr,rn)):(ge=se[0]*Nt+yr,Ve=se[1]*Ht+rn,nt=se[2]*Nt+yr,Bt=se[3]*Ht+rn,yr=se[4]*Nt+yr,rn=se[5]*Ht+rn,Eo(ge,Ve,nt,Bt,yr,rn));return ct&&li(),Bi(Ge),this},p.path=function(V){for(var ce=0;ce<V.length;ce++){var Ie=V[ce],Re=Ie.c;switch(Ie.op){case"m":ki(Re[0],Re[1]);break;case"l":Ks(Re[0],Re[1]);break;case"c":Eo.apply(this,Re);break;case"h":li()}}return this},p.__private__.rect=p.rect=function(V,ce,Ie,Re,Ge){if(isNaN(V)||isNaN(ce)||isNaN(Ie)||isNaN(Re)||!Gs(Ge))throw new Error("Invalid arguments passed to jsPDF.rect");return T===B.COMPAT&&(Re=-Re),we([w(F(V)),w(M(ce)),w(F(Ie)),w(F(Re)),"re"].join(" ")),Bi(Ge),this},p.__private__.triangle=p.triangle=function(V,ce,Ie,Re,Ge,ct,Nt){if(isNaN(V)||isNaN(ce)||isNaN(Ie)||isNaN(Re)||isNaN(Ge)||isNaN(ct)||!Gs(Nt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ie-V,Re-ce],[Ge-Ie,ct-Re],[V-Ge,ce-ct]],V,ce,[1,1],Nt,!0),this},p.__private__.roundedRect=p.roundedRect=function(V,ce,Ie,Re,Ge,ct,Nt){if(isNaN(V)||isNaN(ce)||isNaN(Ie)||isNaN(Re)||isNaN(Ge)||isNaN(ct)||!Gs(Nt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ht=4/3*(Math.SQRT2-1);return Ge=Math.min(Ge,.5*Ie),ct=Math.min(ct,.5*Re),this.lines([[Ie-2*Ge,0],[Ge*Ht,0,Ge,ct-ct*Ht,Ge,ct],[0,Re-2*ct],[0,ct*Ht,-Ge*Ht,ct,-Ge,ct],[2*Ge-Ie,0],[-Ge*Ht,0,-Ge,-ct*Ht,-Ge,-ct],[0,2*ct-Re],[0,-ct*Ht,Ge*Ht,-ct,Ge,-ct]],V+Ge,ce,[1,1],Nt,!0),this},p.__private__.ellipse=p.ellipse=function(V,ce,Ie,Re,Ge){if(isNaN(V)||isNaN(ce)||isNaN(Ie)||isNaN(Re)||!Gs(Ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ct=4/3*(Math.SQRT2-1)*Ie,Nt=4/3*(Math.SQRT2-1)*Re;return ki(V+Ie,ce),Eo(V+Ie,ce-Nt,V+ct,ce-Re,V,ce-Re),Eo(V-ct,ce-Re,V-Ie,ce-Nt,V-Ie,ce),Eo(V-Ie,ce+Nt,V-ct,ce+Re,V,ce+Re),Eo(V+ct,ce+Re,V+Ie,ce+Nt,V+Ie,ce),Bi(Ge),this},p.__private__.circle=p.circle=function(V,ce,Ie,Re){if(isNaN(V)||isNaN(ce)||isNaN(Ie)||!Gs(Re))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,ce,Ie,Ie,Re)},p.setFont=function(V,ce,Ie){return Ie&&(ce=k(ce,Ie)),Oe=Cl(V,ce,{disableWarning:!1}),this};var Oa=p.__private__.getFont=p.getFont=function(){return zt[Cl.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var V,ce,Ie={};for(V in tr)if(tr.hasOwnProperty(V))for(ce in Ie[V]=[],tr[V])tr[V].hasOwnProperty(ce)&&Ie[V].push(ce);return Ie},p.addFont=function(V,ce,Ie,Re,Ge){var ct=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ct.indexOf(arguments[3])!==-1?Ge=arguments[3]:arguments[3]&&ct.indexOf(arguments[3])==-1&&(Ie=k(Ie,Re)),Ge=Ge||"Identity-H",wl.call(this,V,ce,Ie,Ge)};var tn,Sl=e.lineWidth||.200025,Co=p.__private__.getLineWidth=p.getLineWidth=function(){return Sl},cA=p.__private__.setLineWidth=p.setLineWidth=function(V){return Sl=V,we(w(F(V))+" w"),this};p.__private__.setLineDash=ur.API.setLineDash=ur.API.setLineDashPattern=function(V,ce){if(V=V||[],ce=ce||0,isNaN(ce)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map(function(Ie){return w(F(Ie))}).join(" "),ce=w(F(ce)),we("["+V+"] "+ce+" d"),this};var uc=p.__private__.getLineHeight=p.getLineHeight=function(){return ut*tn};p.__private__.getLineHeight=p.getLineHeight=function(){return ut*tn};var Ac=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(tn=V),this},so=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return tn};Ac(e.lineHeight);var qs=p.__private__.getHorizontalCoordinate=function(V){return F(V)},Ua=p.__private__.getVerticalCoordinate=function(V){return T===B.ADVANCED?V:Jt[K].mediaBox.topRightY-Jt[K].mediaBox.bottomLeftY-F(V)},md=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(V){return w(qs(V))},Nl=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(V){return w(Ua(V))},Os=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return _e(Os)},p.__private__.setStrokeColor=p.setDrawColor=function(V,ce,Ie,Re){return Os=Be({ch1:V,ch2:ce,ch3:Ie,ch4:Re,pdfColorType:"draw",precision:2}),we(Os),this};var Bl=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return _e(Bl)},p.__private__.setFillColor=p.setFillColor=function(V,ce,Ie,Re){return Bl=Be({ch1:V,ch2:ce,ch3:Ie,ch4:Re,pdfColorType:"fill",precision:2}),we(Bl),this};var Wo=e.textColor||"0 g",tu=p.__private__.getTextColor=p.getTextColor=function(){return _e(Wo)};p.__private__.setTextColor=p.setTextColor=function(V,ce,Ie,Re){return Wo=Be({ch1:V,ch2:ce,ch3:Ie,ch4:Re,pdfColorType:"text",precision:3}),this};var dc=e.charSpace,ru=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(dc||0)};p.__private__.setCharSpace=p.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return dc=V,this};var uA=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(V){var ce=p.CapJoinStyles[V];if(ce===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return uA=ce,we(ce+" J"),this};var fc=0;p.__private__.setLineJoin=p.setLineJoin=function(V){var ce=p.CapJoinStyles[V];if(ce===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fc=ce,we(ce+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return we(w(F(V))+" M"),this},p.GState=vw,p.setGState=function(V){(V=typeof V=="string"?Lr[En[V]]:kl(null,V)).equals(Vn)||(we("/"+V.id+" gs"),Vn=V)};var kl=function(V,ce){if(!V||!En[V]){var Ie=!1;for(var Re in Lr)if(Lr.hasOwnProperty(Re)&&Lr[Re].equals(ce)){Ie=!0;break}if(Ie)ce=Lr[Re];else{var Ge="GS"+(Object.keys(Lr).length+1).toString(10);Lr[Ge]=ce,ce.id=Ge}return V&&(En[V]=ce.id),Mr.publish("addGState",ce),ce}};p.addGState=function(V,ce){return kl(V,ce),this},p.saveGraphicsState=function(){return we("q"),Hr.push({key:Oe,size:ut,color:Wo}),this},p.restoreGraphicsState=function(){we("Q");var V=Hr.pop();return Oe=V.key,ut=V.size,Wo=V.color,Vn=null,this},p.setCurrentTransformationMatrix=function(V){return we(V.toString()+" cm"),this},p.comment=function(V){return we("#"+V),this};var hc=function(V,ce){var Ie=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ie},set:function(ct){isNaN(ct)||(Ie=parseFloat(ct))}});var Re=ce||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Re},set:function(ct){isNaN(ct)||(Re=parseFloat(ct))}});var Ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ge},set:function(ct){Ge=ct.toString()}}),this},nu=function(V,ce,Ie,Re){hc.call(this,V,ce),this.type="rect";var Ge=Ie||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ge},set:function(Nt){isNaN(Nt)||(Ge=parseFloat(Nt))}});var ct=Re||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ct},set:function(Nt){isNaN(Nt)||(ct=parseFloat(Nt))}}),this},mc=function(){this.page=ar,this.currentPage=K,this.pages=me.slice(0),this.pagesContext=Jt.slice(0),this.x=We,this.y=ft,this.matrix=$t,this.width=Il(K),this.height=$s(K),this.outputDestination=Le,this.id="",this.objectNumber=-1};mc.prototype.restore=function(){ar=this.page,K=this.currentPage,Jt=this.pagesContext,me=this.pages,We=this.x,ft=this.y,$t=this.matrix,pc(K,this.width),au(K,this.height),Le=this.outputDestination};var Tl=function(V,ce,Ie,Re,Ge){js.push(new mc),ar=K=0,me=[],We=V,ft=ce,$t=Ge,Ls([Ie,Re])},pd=function(V){if(_a[V])js.pop().restore();else{var ce=new mc,Ie="Xo"+(Object.keys(Zn).length+1).toString(10);ce.id=Ie,_a[V]=Ie,Zn[Ie]=ce,Mr.publish("addFormObject",ce),js.pop().restore()}};for(var Xo in p.beginFormObject=function(V,ce,Ie,Re,Ge){return Tl(V,ce,Ie,Re,Ge),this},p.endFormObject=function(V){return pd(V),this},p.doFormObject=function(V,ce){var Ie=Zn[_a[V]];return we("q"),we(ce.toString()+" cm"),we("/"+Ie.id+" Do"),we("Q"),this},p.getFormObject=function(V){var ce=Zn[_a[V]];return{x:ce.x,y:ce.y,width:ce.width,height:ce.height,matrix:ce.matrix}},p.save=function(V,ce){return V=V||"generated.pdf",(ce=ce||{}).returnPromise=ce.returnPromise||!1,ce.returnPromise===!1?(_h(eu(Go()),V),typeof _h.unload=="function"&&Br.setTimeout&&setTimeout(_h.unload,911),this):new Promise(function(Ie,Re){try{var Ge=_h(eu(Go()),V);typeof _h.unload=="function"&&Br.setTimeout&&setTimeout(_h.unload,911),Ie(Ge)}catch(ct){Re(ct.message)}})},ur.API)ur.API.hasOwnProperty(Xo)&&(Xo==="events"&&ur.API.events.length?function(V,ce){var Ie,Re,Ge;for(Ge=ce.length-1;Ge!==-1;Ge--)Ie=ce[Ge][0],Re=ce[Ge][1],V.subscribe.apply(V,[Ie].concat(typeof Re=="function"?[Re]:Re))}(Mr,ur.API.events):p[Xo]=ur.API[Xo]);var Il=p.getPageWidth=function(V){return(Jt[V=V||K].mediaBox.topRightX-Jt[V].mediaBox.bottomLeftX)/ke},pc=p.setPageWidth=function(V,ce){Jt[V].mediaBox.topRightX=ce*ke+Jt[V].mediaBox.bottomLeftX},$s=p.getPageHeight=function(V){return(Jt[V=V||K].mediaBox.topRightY-Jt[V].mediaBox.bottomLeftY)/ke},au=p.setPageHeight=function(V,ce){Jt[V].mediaBox.topRightY=ce*ke+Jt[V].mediaBox.bottomLeftY};return p.internal={pdfEscape:gn,getStyle:Ni,getFont:Oa,getFontSize:At,getCharSpace:ru,getTextColor:tu,getLineHeight:uc,getLineHeightFactor:so,getLineWidth:Co,write:Fe,getHorizontalCoordinate:qs,getVerticalCoordinate:Ua,getCoordinateString:md,getVerticalCoordinateString:Nl,collections:{},newObject:zn,newAdditionalObject:Ne,newObjectDeferred:ea,newObjectDeferredBegin:Ae,getFilters:$e,putStream:st,events:Mr,scaleFactor:ke,pageSize:{getWidth:function(){return Il(K)},setWidth:function(V){pc(K,V)},getHeight:function(){return $s(K)},setHeight:function(V){au(K,V)}},encryptionOptions:d,encryption:Gn,getEncryptor:qo,output:Ko,getNumberOfPages:Nn,pages:me,out:we,f2:U,f3:j,getPageInfo:bo,getPageInfoByObjId:wr,getCurrentPageInfo:wo,getPDFVersion:x,Point:hc,Rectangle:nu,Matrix:Kt,hasHotfix:vo},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Il(K)},set:function(V){pc(K,V)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return $s(K)},set:function(V){au(K,V)},enumerable:!0,configurable:!0}),sA.call(p,Xe),Oe="F1",yl(a,r),Mr.publish("initialized"),p}Em.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Em.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Em.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Em.prototype.processOwnerPassword=function(e,t){return C4(E4(t).substr(0,5),e)},Em.prototype.encryptor=function(e,t){var r=E4(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return C4(r,n)}},vw.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Yn(e)!==Yn(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},ur.API={events:[]},ur.version="2.5.2";var za=ur.API,JN=1,p0=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Z0=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ur=function(e){return e.toFixed(2)},$d=function(e){return e.toFixed(5)};za.__acroform__={};var Vo=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},u6=function(e){return e*JN},Iu=function(e){var t=new n7,r=ir.internal.getHeight(e)||0,n=ir.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Ur(n)),Number(Ur(r))],t},$ee=za.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Wee=za.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},Xee=za.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},us=za.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Xee(e,t-1)},As=za.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return $ee(e,t-1)},ds=za.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Wee(e,t-1)},Yee=za.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],i=e[2],o=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+o)||0,c.upperRight_X=r(a+i)||0,c.upperRight_Y=n(s)||0,[Number(Ur(c.lowerLeft_X)),Number(Ur(c.lowerLeft_Y)),Number(Ur(c.upperRight_X)),Number(Ur(c.upperRight_Y))]},Jee=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=_4(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Ur(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=Iu(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},_4=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(j){return j.split(`
`)}):a.map(function(j){return[j]});var s=r,i=ir.internal.getHeight(e)||0;i=i<0?-i:i;var o=ir.internal.getWidth(e)||0;o=o<0?-o:o;var c=function(j,F,P){if(j+1<a.length){var M=F+" "+a[j+1][0];return ob(M,e,P).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var A,d,h=ob("3",e,s).height,m=e.multiline?i-s:(i-h)/2,p=m+=2,v=0,x=0,E=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+ob(t,e,s=12).width+", FieldWidth:"+o+`
`;break}for(var _="",B=0,T=0;T<a.length;T++)if(a.hasOwnProperty(T)){var I=!1;if(a[T].length!==1&&E!==a[T].length-1){if((h+2)*(B+2)+2>i)continue e;_+=a[T][E],I=!0,x=T,T--}else{_=(_+=a[T][E]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var L=parseInt(T),k=c(L,_,s),w=T>=a.length-1;if(k&&!w){_+=" ",E=0;continue}if(k||w){if(w)x=L;else if(e.multiline&&(h+2)*(B+2)+2>i)continue e}else{if(!e.multiline||(h+2)*(B+2)+2>i)continue e;x=L}}for(var y="",N=v;N<=x;N++){var U=a[N];if(e.multiline){if(N===x){y+=U[E]+" ",E=(E+1)%U.length;continue}if(N===v){y+=U[U.length-1]+" ";continue}}y+=U[0]+" "}switch(y=y.substr(y.length-1)==" "?y.substr(0,y.length-1):y,d=ob(y,e,s).width,e.textAlign){case"right":A=o-d-2;break;case"center":A=(o-d)/2;break;case"left":default:A=2}t+=Ur(A)+" "+Ur(p)+` Td
`,t+="("+p0(y)+`) Tj
`,t+=-Ur(A)+` 0 Td
`,p=-(s+2),d=0,v=I?x:x+1,B++,_=""}break}return n.text=t,n.fontSize=s,n},ob=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},Zee={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ete=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},tte=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),Yn(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},rte=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if($c.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Zee)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");JN=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new a7,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&ete(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var o=n[i],c=[],A=o.Rect;if(o.Rect&&(o.Rect=Yee(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=ir.createDefaultAppearanceStream(o),Yn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=A,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=Jee(o);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var h="";for(var m in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(m)){var p=o.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var i in p)if(p.hasOwnProperty(i)){var v=p[i];typeof v=="function"&&(v=v.call(a,o)),h+="/"+i+" "+v+" ",a.internal.acroformPlugin.xForms.indexOf(v)>=0||a.internal.acroformPlugin.xForms.push(v)}}else typeof(v=p)=="function"&&(v=v.call(a,o)),h+="/"+i+" "+v,a.internal.acroformPlugin.xForms.indexOf(v)>=0||a.internal.acroformPlugin.xForms.push(v);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:o.objId}),a.internal.out("endobj")}s&&tte(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},r7=za.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(i){return i};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),Yn(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+p0(n(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},y5=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+p0(n(e))+")"},Pu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Pu.prototype.toString=function(){return this.objId+" 0 R"},Pu.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Pu.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:r7(a,this.objId,this.scope)}):a instanceof Pu?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var n7=function(){Pu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Vo(n7,Pu);var a7=function(){Pu.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+p0(r(e))+")"}},set:function(r){e=r}})};Vo(a7,Pu);var $c=function e(){Pu.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');t=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!us(t,3)},set:function(_){_?this.F=As(t,3):this.F=ds(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');r=_}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(_){n=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(_){n[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(_){n[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(_){n[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(_){n[3]=_}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof bw)return;s="FieldObject"+e.FieldNum++}var _=function(B){return B};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+p0(_(s))+")"},set:function(_){s=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(_){s=_}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(_){i=_}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(_){o=_}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(_){c=_}});var A=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return A===void 0?50/JN:A},set:function(_){A=_}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(_){d=_}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof bw||this instanceof Qh))return y5(h,this.objId,this.scope)},set:function(_){_=_.toString(),h=_}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ni?m:y5(m,this.objId,this.scope)},set:function(_){_=_.toString(),m=this instanceof ni?_:_.substr(0,1)==="("?Z0(_.substr(1,_.length-2)):Z0(_)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ni?Z0(m.substr(1,m.length-1)):m},set:function(_){_=_.toString(),m=this instanceof ni?"/"+_:_}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof ni?p:y5(p,this.objId,this.scope)},set:function(_){_=_.toString(),p=this instanceof ni?_:_.substr(0,1)==="("?Z0(_.substr(1,_.length-2)):Z0(_)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ni?Z0(p.substr(1,p.length-1)):p},set:function(_){_=_.toString(),p=this instanceof ni?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(_){_=!!_,x=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(_){v=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,1)},set:function(_){_?this.Ff=As(this.Ff,1):this.Ff=ds(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,2)},set:function(_){_?this.Ff=As(this.Ff,2):this.Ff=ds(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,3)},set:function(_){_?this.Ff=As(this.Ff,3):this.Ff=ds(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');E=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(E){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:E=2;break;case"center":case 1:E=1;break;case"left":case 0:default:E=0}}})};Vo($c,Pu);var Qm=function(){$c.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return r7(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,o){o||(o=1);for(var c,A=[];c=i.exec(s);)A.push(c[o]);return A}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,18)},set:function(r){r?this.Ff=As(this.Ff,18):this.Ff=ds(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=As(this.Ff,19):this.Ff=ds(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,20)},set:function(r){r?(this.Ff=As(this.Ff,20),t.sort()):this.Ff=ds(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,22)},set:function(r){r?this.Ff=As(this.Ff,22):this.Ff=ds(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,23)},set:function(r){r?this.Ff=As(this.Ff,23):this.Ff=ds(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,27)},set:function(r){r?this.Ff=As(this.Ff,27):this.Ff=ds(this.Ff,27)}}),this.hasAppearanceStream=!1};Vo(Qm,$c);var Hm=function(){Qm.call(this),this.fontName="helvetica",this.combo=!1};Vo(Hm,Qm);var Vm=function(){Hm.call(this),this.combo=!0};Vo(Vm,Hm);var E2=function(){Vm.call(this),this.edit=!0};Vo(E2,Vm);var ni=function(){$c.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,15)},set:function(r){r?this.Ff=As(this.Ff,15):this.Ff=ds(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,16)},set:function(r){r?this.Ff=As(this.Ff,16):this.Ff=ds(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,17)},set:function(r){r?this.Ff=As(this.Ff,17):this.Ff=ds(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,26)},set:function(r){r?this.Ff=As(this.Ff,26):this.Ff=ds(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+p0(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Yn(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Vo(ni,$c);var C2=function(){ni.call(this),this.pushButton=!0};Vo(C2,ni);var zm=function(){ni.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Vo(zm,ni);var bw=function(){var e,t;$c.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+p0(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){Yn(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ir.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Vo(bw,$c),zm.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},zm.prototype.createOption=function(e){var t=new bw;return t.Parent=this,t.optionName=e,this.Kids.push(t),nte.call(this.scope,t),t};var _2=function(){ni.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ir.CheckBox.createAppearanceStream()};Vo(_2,ni);var Qh=function(){$c.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,13)},set:function(t){t?this.Ff=As(this.Ff,13):this.Ff=ds(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,21)},set:function(t){t?this.Ff=As(this.Ff,21):this.Ff=ds(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,23)},set:function(t){t?this.Ff=As(this.Ff,23):this.Ff=ds(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,24)},set:function(t){t?this.Ff=As(this.Ff,24):this.Ff=ds(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,25)},set:function(t){t?this.Ff=As(this.Ff,25):this.Ff=ds(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,26)},set:function(t){t?this.Ff=As(this.Ff,26):this.Ff=ds(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Vo(Qh,$c);var S2=function(){Qh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,14)},set:function(e){e?this.Ff=As(this.Ff,14):this.Ff=ds(this.Ff,14)}}),this.password=!0};Vo(S2,Qh);var ir={CheckBox:{createAppearanceStream:function(){return{N:{On:ir.CheckBox.YesNormal},D:{On:ir.CheckBox.YesPushDown,Off:ir.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Iu(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=_4(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Ur(ir.internal.getWidth(e))+" "+Ur(ir.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Ur(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Iu(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=ir.internal.getHeight(e),i=ir.internal.getWidth(e),o=_4(e,e.caption);return a.push("1 g"),a.push("0 0 "+Ur(i)+" "+Ur(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Ur(i-1)+" "+Ur(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Ur(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Iu(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ur(ir.internal.getWidth(e))+" "+Ur(ir.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:ir.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=ir.RadioButton.Circle.YesNormal,t.D[e]=ir.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Iu(e);t.scope=e.scope;var r=[],n=ir.internal.getWidth(e)<=ir.internal.getHeight(e)?ir.internal.getWidth(e)/4:ir.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=ir.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+$d(ir.internal.getWidth(e)/2)+" "+$d(ir.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Iu(e);t.scope=e.scope;var r=[],n=ir.internal.getWidth(e)<=ir.internal.getHeight(e)?ir.internal.getWidth(e)/4:ir.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*ir.internal.Bezier_C).toFixed(5)),i=Number((n*ir.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+$d(ir.internal.getWidth(e)/2)+" "+$d(ir.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+$d(ir.internal.getWidth(e)/2)+" "+$d(ir.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Iu(e);t.scope=e.scope;var r=[],n=ir.internal.getWidth(e)<=ir.internal.getHeight(e)?ir.internal.getWidth(e)/4:ir.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*ir.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+$d(ir.internal.getWidth(e)/2)+" "+$d(ir.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:ir.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=ir.RadioButton.Cross.YesNormal,t.D[e]=ir.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Iu(e);t.scope=e.scope;var r=[],n=ir.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Ur(ir.internal.getWidth(e)-2)+" "+Ur(ir.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Ur(n.x1.x)+" "+Ur(n.x1.y)+" m"),r.push(Ur(n.x2.x)+" "+Ur(n.x2.y)+" l"),r.push(Ur(n.x4.x)+" "+Ur(n.x4.y)+" m"),r.push(Ur(n.x3.x)+" "+Ur(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Iu(e);t.scope=e.scope;var r=ir.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+Ur(ir.internal.getWidth(e))+" "+Ur(ir.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Ur(ir.internal.getWidth(e)-2)+" "+Ur(ir.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Ur(r.x1.x)+" "+Ur(r.x1.y)+" m"),n.push(Ur(r.x2.x)+" "+Ur(r.x2.y)+" l"),n.push(Ur(r.x4.x)+" "+Ur(r.x4.y)+" m"),n.push(Ur(r.x3.x)+" "+Ur(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Iu(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ur(ir.internal.getWidth(e))+" "+Ur(ir.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};ir.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=ir.internal.getWidth(e),r=ir.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},ir.internal.getWidth=function(e){var t=0;return Yn(e)==="object"&&(t=u6(e.Rect[2])),t},ir.internal.getHeight=function(e){var t=0;return Yn(e)==="object"&&(t=u6(e.Rect[3])),t};var nte=za.addField=function(e){if(rte(this,e),!(e instanceof $c))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};za.AcroFormChoiceField=Qm,za.AcroFormListBox=Hm,za.AcroFormComboBox=Vm,za.AcroFormEditBox=E2,za.AcroFormButton=ni,za.AcroFormPushButton=C2,za.AcroFormRadioButton=zm,za.AcroFormCheckBox=_2,za.AcroFormTextField=Qh,za.AcroFormPasswordField=S2,za.AcroFormAppearance=ir,za.AcroForm={ChoiceField:Qm,ListBox:Hm,ComboBox:Vm,EditBox:E2,Button:ni,PushButton:C2,RadioButton:zm,CheckBox:_2,TextField:Qh,PasswordField:S2,Appearance:ir},ur.AcroForm={ChoiceField:Qm,ListBox:Hm,ComboBox:Vm,EditBox:E2,Button:ni,PushButton:C2,RadioButton:zm,CheckBox:_2,TextField:Qh,PasswordField:S2,Appearance:ir};ur.AcroForm;function s7(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(j,F){var P,M,ee,W,te,G=t;if((F=F||t)==="RGBA"||j.data!==void 0&&j.data instanceof Uint8ClampedArray&&"height"in j&&"width"in j)return"RGBA";if(k(j))for(te in r)for(ee=r[te],P=0;P<ee.length;P+=1){for(W=!0,M=0;M<ee[P].length;M+=1)if(ee[P][M]!==void 0&&ee[P][M]!==j[M]){W=!1;break}if(W===!0){G=te;break}}else for(te in r)for(ee=r[te],P=0;P<ee.length;P+=1){for(W=!0,M=0;M<ee[P].length;M+=1)if(ee[P][M]!==void 0&&ee[P][M]!==j.charCodeAt(M)){W=!1;break}if(W===!0){G=te;break}}return G===t&&F!==t&&(G=F),G},a=function j(F){for(var P=this.internal.write,M=this.internal.putStream,ee=(0,this.internal.getFilters)();ee.indexOf("FlateEncode")!==-1;)ee.splice(ee.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var W=[];if(W.push({key:"Type",value:"/XObject"}),W.push({key:"Subtype",value:"/Image"}),W.push({key:"Width",value:F.width}),W.push({key:"Height",value:F.height}),F.colorSpace===E.INDEXED?W.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(W.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===E.DEVICE_CMYK&&W.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),W.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&W.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)){for(var te="",G=0,q=F.transparency.length;G<q;G++)te+=F.transparency[G]+" "+F.transparency[G]+" ";W.push({key:"Mask",value:"["+te+"]"})}F.sMask!==void 0&&W.push({key:"SMask",value:F.objectId+1+" 0 R"});var z=F.filter!==void 0?["/"+F.filter]:void 0;if(M({data:F.data,additionalKeyValues:W,alreadyAppliedFilters:z,objectId:F.objectId}),P("endobj"),"sMask"in F&&F.sMask!==void 0){var Z="/Predictor "+F.predictor+" /Colors 1 /BitsPerComponent "+F.bitsPerComponent+" /Columns "+F.width,R={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:F.bitsPerComponent,decodeParameters:Z,data:F.sMask};"filter"in F&&(R.filter=F.filter),j.call(this,R)}if(F.colorSpace===E.INDEXED){var K=this.internal.newObject();M({data:y(new Uint8Array(F.palette)),objectId:K}),P("endobj")}},s=function(){var j=this.internal.collections.addImage_images;for(var F in j)a.call(this,j[F])},i=function(){var j,F=this.internal.collections.addImage_images,P=this.internal.write;for(var M in F)P("/I"+(j=F[M]).index,j.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},c=function(){var j=this.internal.collections.addImage_images;return o.call(this),j},A=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(j){return typeof e["process"+j.toUpperCase()]=="function"},h=function(j){return Yn(j)==="object"&&j.nodeType===1},m=function(j,F){if(j.nodeName==="IMG"&&j.hasAttribute("src")){var P=""+j.getAttribute("src");if(P.indexOf("data:image/")===0)return fx(unescape(P).split("base64,").pop());var M=e.loadFile(P,!0);if(M!==void 0)return M}if(j.nodeName==="CANVAS"){if(j.width===0||j.height===0)throw new Error("Given canvas must have data. Canvas width: "+j.width+", height: "+j.height);var ee;switch(F){case"PNG":ee="image/png";break;case"WEBP":ee="image/webp";break;case"JPEG":case"JPG":default:ee="image/jpeg"}return fx(j.toDataURL(ee,1).split("base64,").pop())}},p=function(j){var F=this.internal.collections.addImage_images;if(F){for(var P in F)if(j===F[P].alias)return F[P]}},v=function(j,F,P){return j||F||(j=-96,F=-96),j<0&&(j=-1*P.width*72/j/this.internal.scaleFactor),F<0&&(F=-1*P.height*72/F/this.internal.scaleFactor),j===0&&(j=F*P.width/P.height),F===0&&(F=j*P.height/P.width),[j,F]},x=function(j,F,P,M,ee,W){var te=v.call(this,P,M,ee),G=this.internal.getCoordinateString,q=this.internal.getVerticalCoordinateString,z=c.call(this);if(P=te[0],M=te[1],z[ee.index]=ee,W){W*=Math.PI/180;var Z=Math.cos(W),R=Math.sin(W),K=function(re){return re.toFixed(4)},X=[K(Z),K(R),K(-1*R),K(Z),0,0,"cm"]}this.internal.write("q"),W?(this.internal.write([1,"0","0",1,G(j),q(F+M),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([G(P),"0","0",G(M),"0","0","cm"].join(" "))):this.internal.write([G(P),"0","0",G(M),G(j),q(F+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ee.index+" Do"),this.internal.write("Q")},E=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var _=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},B=e.__addimage__.sHashCode=function(j){var F,P,M=0;if(typeof j=="string")for(P=j.length,F=0;F<P;F++)M=(M<<5)-M+j.charCodeAt(F),M|=0;else if(k(j))for(P=j.byteLength/2,F=0;F<P;F++)M=(M<<5)-M+j[F],M|=0;return M},T=e.__addimage__.validateStringAsBase64=function(j){(j=j||"").toString().trim();var F=!0;return j.length===0&&(F=!1),j.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(j.substr(0,j.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(j.substr(-2))===!1&&(F=!1),F},I=e.__addimage__.extractImageFromDataUrl=function(j){var F=(j=j||"").split("base64,"),P=null;if(F.length===2){var M=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(F[0]);Array.isArray(M)&&(P={mimeType:M[1],charset:M[2],data:F[1]})}return P},L=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(j){return L()&&j instanceof ArrayBuffer};var k=e.__addimage__.isArrayBufferView=function(j){return L()&&typeof Uint32Array<"u"&&(j instanceof Int8Array||j instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&j instanceof Uint8ClampedArray||j instanceof Int16Array||j instanceof Uint16Array||j instanceof Int32Array||j instanceof Uint32Array||j instanceof Float32Array||j instanceof Float64Array)},w=e.__addimage__.binaryStringToUint8Array=function(j){for(var F=j.length,P=new Uint8Array(F),M=0;M<F;M++)P[M]=j.charCodeAt(M);return P},y=e.__addimage__.arrayBufferToBinaryString=function(j){for(var F="",P=k(j)?j:new Uint8Array(j),M=0;M<P.length;M+=8192)F+=String.fromCharCode.apply(null,P.subarray(M,M+8192));return F};e.addImage=function(){var j,F,P,M,ee,W,te,G,q;if(typeof arguments[1]=="number"?(F=t,P=arguments[1],M=arguments[2],ee=arguments[3],W=arguments[4],te=arguments[5],G=arguments[6],q=arguments[7]):(F=arguments[1],P=arguments[2],M=arguments[3],ee=arguments[4],W=arguments[5],te=arguments[6],G=arguments[7],q=arguments[8]),Yn(j=arguments[0])==="object"&&!h(j)&&"imageData"in j){var z=j;j=z.imageData,F=z.format||F||t,P=z.x||P||0,M=z.y||M||0,ee=z.w||z.width||ee,W=z.h||z.height||W,te=z.alias||te,G=z.compression||G,q=z.rotation||z.angle||q}var Z=this.internal.getFilters();if(G===void 0&&Z.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(P)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var R=N.call(this,j,F,te,G);return x.call(this,P,M,ee,W,R,q),this};var N=function(j,F,P,M){var ee,W,te;if(typeof j=="string"&&n(j)===t){j=unescape(j);var G=U(j,!1);(G!==""||(G=e.loadFile(j,!0))!==void 0)&&(j=G)}if(h(j)&&(j=m(j,F)),F=n(j,F),!d(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((te=P)==null||te.length===0)&&(P=function(q){return typeof q=="string"||k(q)?B(q):k(q.data)?B(q.data):null}(j)),(ee=p.call(this,P))||(L()&&(j instanceof Uint8Array||F==="RGBA"||(W=j,j=w(j))),ee=this["process"+F.toUpperCase()](j,A.call(this),P,function(q){return q&&typeof q=="string"&&(q=q.toUpperCase()),q in e.image_compression?q:_.NONE}(M),W)),!ee)throw new Error("An unknown error occurred whilst processing the image.");return ee},U=e.__addimage__.convertBase64ToBinaryString=function(j,F){var P;F=typeof F!="boolean"||F;var M,ee="";if(typeof j=="string"){M=(P=I(j))!==null?P.data:j;try{ee=fx(M)}catch(W){if(F)throw T(M)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+W.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ee};e.getImageProperties=function(j){var F,P,M="";if(h(j)&&(j=m(j)),typeof j=="string"&&n(j)===t&&((M=U(j,!1))===""&&(M=e.loadFile(j)||""),j=M),P=n(j),!d(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(!L()||j instanceof Uint8Array||(j=w(j)),!(F=this["process"+P.toUpperCase()](j)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=P,F}})(ur.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};ur.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),A=r.pageContext.annotations,d=!1,h=0;h<A.length&&!d;h++)switch((n=A[h]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var m=0;m<A.length;m++){n=A[m];var p=this.internal.pdfEscape,v=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(x.objId),B=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+p(_(n.contents))+")",s+=" /Popup "+E.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+p(_(B))+") >>",x.content=s;var T=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+T,n.open&&(s+=" /Open true"),s+=" >>",E.content=s,this.internal.write(x.objId,"0 R",E.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var I=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+p(v(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+I+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var L=this.annotations._nameMap[n.options.name];n.options.pageNumber=L.page,n.options.top=L.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+p(v(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var k=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+k+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,i){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,A=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(r),y:A(n),w:c(r+a),h:A(n+s)},options:i,type:"link"})},e.textWithLink=function(r,n,a,s){var i,o,c=this.getTextWidth(r),A=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(r,o).length;i=Math.ceil(A*d)}else o=c,i=A;return this.text(r,n,a,s),a+=.2*A,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-A,o,i,s),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(ur.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},i=e.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},o=e.__arabicParser__.isArabicEndLetter=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(x){return i(x)&&a.indexOf(x.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=1};var A=e.__arabicParser__.arabicLetterHasFinalForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(x){var E=0,_=r,B="",T=0;for(E=0;E<x.length;E+=1)_[x.charCodeAt(E)]!==void 0?(T++,typeof(_=_[x.charCodeAt(E)])=="number"&&(B+=String.fromCharCode(_),_=r,T=0),E===x.length-1&&(_=r,B+=x.charAt(E-(T-1)),E-=T-1,T=0)):(_=r,B+=x.charAt(E-T),E-=T,T=0);return B};e.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var m=e.__arabicParser__.getCorrectForm=function(x,E,_){return i(x)?s(x)===!1?-1:!A(x)||!i(E)&&!i(_)||!i(_)&&o(E)||o(x)&&!i(E)||o(x)&&c(E)||o(x)&&o(E)?0:d(x)&&i(E)&&!o(E)&&i(_)&&A(_)?3:o(x)||!i(_)?1:2:-1},p=function(x){var E=0,_=0,B=0,T="",I="",L="",k=(x=x||"").split("\\s+"),w=[];for(E=0;E<k.length;E+=1){for(w.push(""),_=0;_<k[E].length;_+=1)T=k[E][_],I=k[E][_-1],L=k[E][_+1],i(T)?(B=m(T,I,L),w[E]+=B!==-1?String.fromCharCode(t[T.charCodeAt(0)][B]):T):w[E]+=T;w[E]=h(w[E])}return w.join(" ")},v=e.__arabicParser__.processArabic=e.processArabic=function(){var x,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(E)){var B=0;for(_=[],B=0;B<E.length;B+=1)Array.isArray(E[B])?_.push([p(E[B][0]),E[B][1],E[B][2]]):_.push([p(E[B])]);x=_}else x=p(E);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};e.events.push(["preProcessText",v])}(ur.API),ur.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(ur.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var A=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return A},set:function(x){A=x}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(x){v=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,A){n.call(this);var d=(A=A||{}).fontSize||this.getFontSize(),h=A.font||this.getFont(),m=A.scaleFactor||this.internal.scaleFactor,p=0,v=0,x=0,E=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var _=A.maxWidth;_>0?typeof c=="string"?c=this.splitTextToSize(c,_):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(T,I){return T.concat(E.splitTextToSize(I,_))},[])):c=Array.isArray(c)?c:[c];for(var B=0;B<c.length;B++)p<(x=this.getStringUnitWidth(c[B],{font:h})*d)&&(p=x);return p!==0&&(v=c.length),{w:p/=m,h:Math.max((v*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/m,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var A=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,m=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return A.lineNumber!==void 0&&(A.lineNumber===c.lineNumber?(c.x=(A.x||0)+(A.width||0),c.y=A.y||0):A.y+A.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,p&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=A.y+A.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,A,d,h,m){if(n.call(this),!d)throw new Error("No data for PDF table.");var p,v,x,E,_=[],B=[],T=[],I={},L={},k=[],w=[],y=(m=m||{}).autoSize||!1,N=m.printHeaders!==!1,U=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,j=m.margins||Object.assign({width:this.getPageWidth()},t),F=typeof m.padding=="number"?m.padding:3,P=m.headerBackgroundColor||"#c8c8c8",M=m.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=N,this.internal.__cell__.margins=j,this.internal.__cell__.table_font_size=U,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=P,this.internal.__cell__.headerTextColor=M,this.setFontSize(U),h==null)B=_=Object.keys(d[0]),T=_.map(function(){return"left"});else if(Array.isArray(h)&&Yn(h[0])==="object")for(_=h.map(function(z){return z.name}),B=h.map(function(z){return z.prompt||z.name||""}),T=h.map(function(z){return z.align||"left"}),p=0;p<h.length;p+=1)L[h[p].name]=h[p].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(B=_=h,T=_.map(function(){return"left"}));if(y||Array.isArray(h)&&typeof h[0]=="string")for(p=0;p<_.length;p+=1){for(I[E=_[p]]=d.map(function(z){return z[E]}),this.setFont(void 0,"bold"),k.push(this.getTextDimensions(B[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=I[E],this.setFont(void 0,"normal"),x=0;x<v.length;x+=1)k.push(this.getTextDimensions(v[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);L[E]=Math.max.apply(null,k)+F+F,k=[]}if(N){var ee={};for(p=0;p<_.length;p+=1)ee[_[p]]={},ee[_[p]].text=B[p],ee[_[p]].align=T[p];var W=o.call(this,ee,L);w=_.map(function(z){return new s(c,A,L[z],W,ee[z].text,void 0,ee[z].align)}),this.setTableHeaderRow(w),this.printHeaderRow(1,!1)}var te=h.reduce(function(z,Z){return z[Z.name]=Z.align,z},{});for(p=0;p<d.length;p+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:p,data:d[p]},this);var G=o.call(this,d[p],L);for(x=0;x<_.length;x+=1){var q=d[p][_[x]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:p,col:x,data:q},this),i.call(this,new s(c,A,L[_[x]],G,q,p+2,te[_[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=A,this};var o=function(c,A){var d=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(p){var v=c[p];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,A[p]-d-d)},this).map(function(p){return this.getLineHeightFactor()*p.length*h/m+d+d},this).reduce(function(p,v){return Math.max(p,v)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,A){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){d=this.internal.__cell__.tableHeaderRow[p].clone(),A&&(d.y=this.internal.__cell__.margins.top||0,m.push(d)),d.lineNumber=c;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(v)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}}(ur.API);var i7={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},o7=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],S4=s7(o7),l7=[100,200,300,400,500,600,700,800,900],ate=s7(l7);function N4(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return i7[s=s||"normal"]?s:"normal"}(e.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof S4[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function A6(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var ste={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},d6={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function f6(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function ite(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},ste,r.genericFontFamilies||{}),s=null,i=null,o=0;o<t.length;++o)if(a[(s=N4(t[o])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){i=e[s.family];break}if(!(i=i||e[n]))throw new Error("Could not find a font-family for the rule '"+f6(s)+"' and default family '"+n+"'.");if(i=function(c,A){if(A[c])return A[c];var d=S4[c],h=d<=S4.normal?-1:1,m=A6(A,o7,d,h);if(!m)throw new Error("Could not find a matching font-stretch value for "+c);return m}(s.stretch,i),i=function(c,A){if(A[c])return A[c];for(var d=i7[c],h=0;h<d.length;++h)if(A[d[h]])return A[d[h]];throw new Error("Could not find a matching font-style for "+c)}(s.style,i),!(i=function(c,A){if(A[c])return A[c];if(c===400&&A[500])return A[500];if(c===500&&A[400])return A[400];var d=ate[c],h=A6(A,l7,d,c<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+c);return h}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+f6(s)+"'.");return i}function h6(e){return e.trimLeft()}function ote(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function lte(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var lb,m6,p6,E5=["times"];(function(e){var t,r,n,a,s,i,o,c,A,d=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new c,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new i,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new i,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,A=new d}]);var h=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=R;Object.defineProperty(this,"pdf",{get:function(){return K}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(Te){X=!!Te}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(Te){re=!!Te}});var ne=0;Object.defineProperty(this,"posX",{get:function(){return ne},set:function(Te){isNaN(Te)||(ne=Te)}});var ue=0;Object.defineProperty(this,"posY",{get:function(){return ue},set:function(Te){isNaN(Te)||(ue=Te)}}),Object.defineProperty(this,"margin",{get:function(){return A.margin},set:function(Te){var we;typeof Te=="number"?we=[Te,Te,Te,Te]:((we=new Array(4))[0]=Te[0],we[1]=Te.length>=2?Te[1]:we[0],we[2]=Te.length>=3?Te[2]:we[0],we[3]=Te.length>=4?Te[3]:we[1]),A.margin=we}});var fe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return fe},set:function(Te){fe=Te}});var be=0;Object.defineProperty(this,"lastBreak",{get:function(){return be},set:function(Te){be=Te}});var Ce=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ce},set:function(Te){Ce=Te}}),Object.defineProperty(this,"ctx",{get:function(){return A},set:function(Te){Te instanceof d&&(A=Te)}}),Object.defineProperty(this,"path",{get:function(){return A.path},set:function(Te){A.path=Te}});var me=[];Object.defineProperty(this,"ctxStack",{get:function(){return me},set:function(Te){me=Te}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Te){var we;we=m(Te),this.ctx.fillStyle=we.style,this.ctx.isFillTransparent=we.a===0,this.ctx.fillOpacity=we.a,this.pdf.setFillColor(we.r,we.g,we.b,{a:we.a}),this.pdf.setTextColor(we.r,we.g,we.b,{a:we.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Te){var we=m(Te);this.ctx.strokeStyle=we.style,this.ctx.isStrokeTransparent=we.a===0,this.ctx.strokeOpacity=we.a,we.a===0?this.pdf.setDrawColor(255,255,255):(we.a,this.pdf.setDrawColor(we.r,we.g,we.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Te){["butt","round","square"].indexOf(Te)!==-1&&(this.ctx.lineCap=Te,this.pdf.setLineCap(Te))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Te){isNaN(Te)||(this.ctx.lineWidth=Te,this.pdf.setLineWidth(Te))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Te){["bevel","round","miter"].indexOf(Te)!==-1&&(this.ctx.lineJoin=Te,this.pdf.setLineJoin(Te))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Te){isNaN(Te)||(this.ctx.miterLimit=Te,this.pdf.setMiterLimit(Te))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Te){this.ctx.textBaseline=Te}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Te){["right","end","center","left","start"].indexOf(Te)!==-1&&(this.ctx.textAlign=Te)}});var oe=null;function Le(Te,we){if(oe===null){var Fe=function(He){var Xe=[];return Object.keys(He).forEach(function(ut){He[ut].forEach(function(Et){var At=null;switch(Et){case"bold":At={family:ut,weight:"bold"};break;case"italic":At={family:ut,style:"italic"};break;case"bolditalic":At={family:ut,weight:"bold",style:"italic"};break;case"":case"normal":At={family:ut}}At!==null&&(At.ref={name:ut,style:Et},Xe.push(At))})}),Xe}(Te.getFontList());oe=function(He){for(var Xe={},ut=0;ut<He.length;++ut){var Et=N4(He[ut]),At=Et.family,jt=Et.stretch,Dt=Et.style,Yt=Et.weight;Xe[At]=Xe[At]||{},Xe[At][jt]=Xe[At][jt]||{},Xe[At][jt][Dt]=Xe[At][jt][Dt]||{},Xe[At][jt][Dt][Yt]=Et}return Xe}(Fe.concat(we))}return oe}var Ye=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ye},set:function(Te){oe=null,Ye=Te}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Te){var we;if(this.ctx.font=Te,(we=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Te))!==null){var Fe=we[1],He=(we[2],we[3]),Xe=we[4],ut=(we[5],we[6]),Et=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Xe)[2];Xe=Math.floor(Et==="px"?parseFloat(Xe)*this.pdf.internal.scaleFactor:Et==="em"?parseFloat(Xe)*this.pdf.getFontSize():parseFloat(Xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Xe);var At=function(De){var Oe,ke,We=[],ft=De.trim();if(ft==="")return E5;if(ft in d6)return[d6[ft]];for(;ft!=="";){switch(ke=null,Oe=(ft=h6(ft)).charAt(0)){case'"':case"'":ke=ote(ft.substring(1),Oe);break;default:ke=lte(ft)}if(ke===null||(We.push(ke[0]),(ft=h6(ke[1]))!==""&&ft.charAt(0)!==","))return E5;ft=ft.replace(/^,/,"")}return We}(ut);if(this.fontFaces){var jt=ite(Le(this.pdf,this.fontFaces),At.map(function(De){return{family:De,stretch:"normal",weight:He,style:Fe}}));this.pdf.setFont(jt.ref.name,jt.ref.style)}else{var Dt="";(He==="bold"||parseInt(He,10)>=700||Fe==="bold")&&(Dt="bold"),Fe==="italic"&&(Dt+="italic"),Dt.length===0&&(Dt="normal");for(var Yt="",Rt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ut=0;Ut<At.length;Ut++){if(this.pdf.internal.getFont(At[Ut],Dt,{noFallback:!0,disableWarning:!0})!==void 0){Yt=At[Ut];break}if(Dt==="bolditalic"&&this.pdf.internal.getFont(At[Ut],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Yt=At[Ut],Dt="bold";else if(this.pdf.internal.getFont(At[Ut],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Yt=At[Ut],Dt="normal";break}}if(Yt===""){for(var qt=0;qt<At.length;qt++)if(Rt[At[qt]]){Yt=Rt[At[qt]];break}}Yt=Yt===""?"Times":Yt,this.pdf.setFont(Yt,Dt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Te){this.ctx.globalCompositeOperation=Te}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Te){this.ctx.globalAlpha=Te}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Te){this.ctx.lineDashOffset=Te,Z.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Te){this.ctx.lineDash=Te,Z.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Te){this.ctx.ignoreClearRect=!!Te}})};h.prototype.setLineDash=function(R){this.lineDash=R},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){I.call(this,"fill",!1)},h.prototype.stroke=function(){I.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(R,K){if(isNaN(R)||isNaN(K))throw ca.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new i(R,K));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new i(R,K)},h.prototype.closePath=function(){var R=new i(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&Yn(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){R=new i(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(R.x,R.y)},h.prototype.lineTo=function(R,K){if(isNaN(R)||isNaN(K))throw ca.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new i(R,K));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new i(X.x,X.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),I.call(this,null,!0)},h.prototype.quadraticCurveTo=function(R,K,X,re){if(isNaN(X)||isNaN(re)||isNaN(R)||isNaN(K))throw ca.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ne=this.ctx.transform.applyToPoint(new i(X,re)),ue=this.ctx.transform.applyToPoint(new i(R,K));this.path.push({type:"qct",x1:ue.x,y1:ue.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new i(ne.x,ne.y)},h.prototype.bezierCurveTo=function(R,K,X,re,ne,ue){if(isNaN(ne)||isNaN(ue)||isNaN(R)||isNaN(K)||isNaN(X)||isNaN(re))throw ca.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var fe=this.ctx.transform.applyToPoint(new i(ne,ue)),be=this.ctx.transform.applyToPoint(new i(R,K)),Ce=this.ctx.transform.applyToPoint(new i(X,re));this.path.push({type:"bct",x1:be.x,y1:be.y,x2:Ce.x,y2:Ce.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new i(fe.x,fe.y)},h.prototype.arc=function(R,K,X,re,ne,ue){if(isNaN(R)||isNaN(K)||isNaN(X)||isNaN(re)||isNaN(ne))throw ca.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ue=!!ue,!this.ctx.transform.isIdentity){var fe=this.ctx.transform.applyToPoint(new i(R,K));R=fe.x,K=fe.y;var be=this.ctx.transform.applyToPoint(new i(0,X)),Ce=this.ctx.transform.applyToPoint(new i(0,0));X=Math.sqrt(Math.pow(be.x-Ce.x,2)+Math.pow(be.y-Ce.y,2))}Math.abs(ne-re)>=2*Math.PI&&(re=0,ne=2*Math.PI),this.path.push({type:"arc",x:R,y:K,radius:X,startAngle:re,endAngle:ne,counterclockwise:ue})},h.prototype.arcTo=function(R,K,X,re,ne){throw new Error("arcTo not implemented.")},h.prototype.rect=function(R,K,X,re){if(isNaN(R)||isNaN(K)||isNaN(X)||isNaN(re))throw ca.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,K),this.lineTo(R+X,K),this.lineTo(R+X,K+re),this.lineTo(R,K+re),this.lineTo(R,K),this.lineTo(R+X,K),this.lineTo(R,K)},h.prototype.fillRect=function(R,K,X,re){if(isNaN(R)||isNaN(K)||isNaN(X)||isNaN(re))throw ca.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ne={};this.lineCap!=="butt"&&(ne.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ne.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,K,X,re),this.fill(),ne.hasOwnProperty("lineCap")&&(this.lineCap=ne.lineCap),ne.hasOwnProperty("lineJoin")&&(this.lineJoin=ne.lineJoin)}},h.prototype.strokeRect=function(R,K,X,re){if(isNaN(R)||isNaN(K)||isNaN(X)||isNaN(re))throw ca.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(R,K,X,re),this.stroke())},h.prototype.clearRect=function(R,K,X,re){if(isNaN(R)||isNaN(K)||isNaN(X)||isNaN(re))throw ca.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,K,X,re))},h.prototype.save=function(R){R=typeof R!="boolean"||R;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},h.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(K),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(R){var K,X,re,ne;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))K=0,X=0,re=0,ne=0;else{var ue=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(ue!==null)K=parseInt(ue[1]),X=parseInt(ue[2]),re=parseInt(ue[3]),ne=1;else if((ue=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)K=parseInt(ue[1]),X=parseInt(ue[2]),re=parseInt(ue[3]),ne=parseFloat(ue[4]);else{if(ne=1,typeof R=="string"&&R.charAt(0)!=="#"){var fe=new ZU(R);R=fe.ok?fe.toHex():"#000000"}R.length===4?(K=R.substring(1,2),K+=K,X=R.substring(2,3),X+=X,re=R.substring(3,4),re+=re):(K=R.substring(1,3),X=R.substring(3,5),re=R.substring(5,7)),K=parseInt(K,16),X=parseInt(X,16),re=parseInt(re,16)}}return{r:K,g:X,b:re,a:ne,style:R}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(R,K,X,re){if(isNaN(K)||isNaN(X)||typeof R!="string")throw ca.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!p.call(this)){var ne=G(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;F.call(this,{text:R,x:K,y:X,scale:ue,angle:ne,align:this.textAlign,maxWidth:re})}},h.prototype.strokeText=function(R,K,X,re){if(isNaN(K)||isNaN(X)||typeof R!="string")throw ca.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){re=isNaN(re)?void 0:re;var ne=G(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;F.call(this,{text:R,x:K,y:X,scale:ue,renderingMode:"stroke",angle:ne,align:this.textAlign,maxWidth:re})}},h.prototype.measureText=function(R){if(typeof R!="string")throw ca.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,X=this.pdf.internal.scaleFactor,re=K.internal.getFontSize(),ne=K.getStringUnitWidth(R)*re/K.internal.scaleFactor,ue=function(fe){var be=(fe=fe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return be}}),this};return new ue({width:ne*=Math.round(96*X/72*1e4)/1e4})},h.prototype.scale=function(R,K){if(isNaN(R)||isNaN(K))throw ca.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new c(R,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},h.prototype.rotate=function(R){if(isNaN(R))throw ca.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new c(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},h.prototype.translate=function(R,K){if(isNaN(R)||isNaN(K))throw ca.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new c(1,0,0,1,R,K);this.ctx.transform=this.ctx.transform.multiply(X)},h.prototype.transform=function(R,K,X,re,ne,ue){if(isNaN(R)||isNaN(K)||isNaN(X)||isNaN(re)||isNaN(ne)||isNaN(ue))throw ca.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var fe=new c(R,K,X,re,ne,ue);this.ctx.transform=this.ctx.transform.multiply(fe)},h.prototype.setTransform=function(R,K,X,re,ne,ue){R=isNaN(R)?1:R,K=isNaN(K)?0:K,X=isNaN(X)?0:X,re=isNaN(re)?1:re,ne=isNaN(ne)?0:ne,ue=isNaN(ue)?0:ue,this.ctx.transform=new c(R,K,X,re,ne,ue)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(R,K,X,re,ne,ue,fe,be,Ce){var me=this.pdf.getImageProperties(R),oe=1,Le=1,Ye=1,Te=1;re!==void 0&&be!==void 0&&(Ye=be/re,Te=Ce/ne,oe=me.width/re*be/re,Le=me.height/ne*Ce/ne),ue===void 0&&(ue=K,fe=X,K=0,X=0),re!==void 0&&be===void 0&&(be=re,Ce=ne),re===void 0&&be===void 0&&(be=me.width,Ce=me.height);for(var we,Fe=this.ctx.transform.decompose(),He=G(Fe.rotate.shx),Xe=new c,ut=(Xe=(Xe=(Xe=Xe.multiply(Fe.translate)).multiply(Fe.skew)).multiply(Fe.scale)).applyToRectangle(new o(ue-K*Ye,fe-X*Te,re*oe,ne*Le)),Et=E.call(this,ut),At=[],jt=0;jt<Et.length;jt+=1)At.indexOf(Et[jt])===-1&&At.push(Et[jt]);if(T(At),this.autoPaging)for(var Dt=At[0],Yt=At[At.length-1],Rt=Dt;Rt<Yt+1;Rt++){this.pdf.setPage(Rt);var Ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qt=Rt===1?this.posY+this.margin[0]:this.margin[0],De=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Oe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ke=Rt===1?0:De+(Rt-2)*Oe;if(this.ctx.clip_path.length!==0){var We=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(we,this.posX+this.margin[3],-ke+qt+this.ctx.prevPageLastElemOffset),L.call(this,"fill",!0),this.path=We}var ft=JSON.parse(JSON.stringify(ut));ft=B([ft],this.posX+this.margin[3],-ke+qt+this.ctx.prevPageLastElemOffset)[0];var $t=(Rt>Dt||Rt<Yt)&&x.call(this);$t&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ut,Oe,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",ft.x,ft.y,ft.w,ft.h,null,null,He),$t&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(R,"JPEG",ut.x,ut.y,ut.w,ut.h,null,null,He)};var E=function(R,K,X){var re=[];K=K||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ne=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":re.push(Math.floor((R.y+ne)/X)+1);break;case"arc":re.push(Math.floor((R.y+ne-R.radius)/X)+1),re.push(Math.floor((R.y+ne+R.radius)/X)+1);break;case"qct":var ue=q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);re.push(Math.floor((ue.y+ne)/X)+1),re.push(Math.floor((ue.y+ue.h+ne)/X)+1);break;case"bct":var fe=z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);re.push(Math.floor((fe.y+ne)/X)+1),re.push(Math.floor((fe.y+fe.h+ne)/X)+1);break;case"rect":re.push(Math.floor((R.y+ne)/X)+1),re.push(Math.floor((R.y+R.h+ne)/X)+1)}for(var be=0;be<re.length;be+=1)for(;this.pdf.internal.getNumberOfPages()<re[be];)_.call(this);return re},_=function(){var R=this.fillStyle,K=this.strokeStyle,X=this.font,re=this.lineCap,ne=this.lineWidth,ue=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=K,this.font=X,this.lineCap=re,this.lineWidth=ne,this.lineJoin=ue},B=function(R,K,X){for(var re=0;re<R.length;re++)switch(R[re].type){case"bct":R[re].x2+=K,R[re].y2+=X;case"qct":R[re].x1+=K,R[re].y1+=X;case"mt":case"lt":case"arc":default:R[re].x+=K,R[re].y+=X}return R},T=function(R){return R.sort(function(K,X){return K-X})},I=function(R,K){for(var X,re,ne=this.fillStyle,ue=this.strokeStyle,fe=this.lineCap,be=this.lineWidth,Ce=Math.abs(be*this.ctx.transform.scaleX),me=this.lineJoin,oe=JSON.parse(JSON.stringify(this.path)),Le=JSON.parse(JSON.stringify(this.path)),Ye=[],Te=0;Te<Le.length;Te++)if(Le[Te].x!==void 0)for(var we=E.call(this,Le[Te]),Fe=0;Fe<we.length;Fe+=1)Ye.indexOf(we[Fe])===-1&&Ye.push(we[Fe]);for(var He=0;He<Ye.length;He++)for(;this.pdf.internal.getNumberOfPages()<Ye[He];)_.call(this);if(T(Ye),this.autoPaging)for(var Xe=Ye[0],ut=Ye[Ye.length-1],Et=Xe;Et<ut+1;Et++){this.pdf.setPage(Et),this.fillStyle=ne,this.strokeStyle=ue,this.lineCap=fe,this.lineWidth=Ce,this.lineJoin=me;var At=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],jt=Et===1?this.posY+this.margin[0]:this.margin[0],Dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Rt=Et===1?0:Dt+(Et-2)*Yt;if(this.ctx.clip_path.length!==0){var Ut=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(X,this.posX+this.margin[3],-Rt+jt+this.ctx.prevPageLastElemOffset),L.call(this,R,!0),this.path=Ut}if(re=JSON.parse(JSON.stringify(oe)),this.path=B(re,this.posX+this.margin[3],-Rt+jt+this.ctx.prevPageLastElemOffset),K===!1||Et===0){var qt=(Et>Xe||Et<ut)&&x.call(this);qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,Yt,null).clip().discardPath()),L.call(this,R,K),qt&&this.pdf.restoreGraphicsState()}this.lineWidth=be}else this.lineWidth=Ce,L.call(this,R,K),this.lineWidth=be;this.path=oe},L=function(R,K){if((R!=="stroke"||K||!v.call(this))&&(R==="stroke"||K||!p.call(this))){for(var X,re,ne=[],ue=this.path,fe=0;fe<ue.length;fe++){var be=ue[fe];switch(be.type){case"begin":ne.push({begin:!0});break;case"close":ne.push({close:!0});break;case"mt":ne.push({start:be,deltas:[],abs:[]});break;case"lt":var Ce=ne.length;if(ue[fe-1]&&!isNaN(ue[fe-1].x)&&(X=[be.x-ue[fe-1].x,be.y-ue[fe-1].y],Ce>0)){for(;Ce>=0;Ce--)if(ne[Ce-1].close!==!0&&ne[Ce-1].begin!==!0){ne[Ce-1].deltas.push(X),ne[Ce-1].abs.push(be);break}}break;case"bct":X=[be.x1-ue[fe-1].x,be.y1-ue[fe-1].y,be.x2-ue[fe-1].x,be.y2-ue[fe-1].y,be.x-ue[fe-1].x,be.y-ue[fe-1].y],ne[ne.length-1].deltas.push(X);break;case"qct":var me=ue[fe-1].x+2/3*(be.x1-ue[fe-1].x),oe=ue[fe-1].y+2/3*(be.y1-ue[fe-1].y),Le=be.x+2/3*(be.x1-be.x),Ye=be.y+2/3*(be.y1-be.y),Te=be.x,we=be.y;X=[me-ue[fe-1].x,oe-ue[fe-1].y,Le-ue[fe-1].x,Ye-ue[fe-1].y,Te-ue[fe-1].x,we-ue[fe-1].y],ne[ne.length-1].deltas.push(X);break;case"arc":ne.push({deltas:[],abs:[],arc:!0}),Array.isArray(ne[ne.length-1].abs)&&ne[ne.length-1].abs.push(be)}}re=K?null:R==="stroke"?"stroke":"fill";for(var Fe=!1,He=0;He<ne.length;He++)if(ne[He].arc)for(var Xe=ne[He].abs,ut=0;ut<Xe.length;ut++){var Et=Xe[ut];Et.type==="arc"?y.call(this,Et.x,Et.y,Et.radius,Et.startAngle,Et.endAngle,Et.counterclockwise,void 0,K,!Fe):P.call(this,Et.x,Et.y),Fe=!0}else if(ne[He].close===!0)this.pdf.internal.out("h"),Fe=!1;else if(ne[He].begin!==!0){var At=ne[He].start.x,jt=ne[He].start.y;M.call(this,ne[He].deltas,At,jt),Fe=!0}re&&N.call(this,re),K&&U.call(this)}},k=function(R){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-X;case"top":return R+K-X;case"hanging":return R+K-2*X;case"middle":return R+K/2-X;case"ideographic":return R;case"alphabetic":default:return R}},w=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(K,X){this.colorStops.push([K,X])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var y=function(R,K,X,re,ne,ue,fe,be,Ce){for(var me=W.call(this,X,re,ne,ue),oe=0;oe<me.length;oe++){var Le=me[oe];oe===0&&(Ce?j.call(this,Le.x1+R,Le.y1+K):P.call(this,Le.x1+R,Le.y1+K)),ee.call(this,R,K,Le.x2,Le.y2,Le.x3,Le.y3,Le.x4,Le.y4)}be?U.call(this):N.call(this,fe)},N=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},U=function(){this.pdf.clip(),this.pdf.discardPath()},j=function(R,K){this.pdf.internal.out(r(R)+" "+n(K)+" m")},F=function(R){var K;switch(R.align){case"right":case"end":K="right";break;case"center":K="center";break;case"left":case"start":default:K="left"}var X=this.pdf.getTextDimensions(R.text),re=k.call(this,R.y),ne=w.call(this,re)-X.h,ue=this.ctx.transform.applyToPoint(new i(R.x,re)),fe=this.ctx.transform.decompose(),be=new c;be=(be=(be=be.multiply(fe.translate)).multiply(fe.skew)).multiply(fe.scale);for(var Ce,me,oe,Le=this.ctx.transform.applyToRectangle(new o(R.x,re,X.w,X.h)),Ye=be.applyToRectangle(new o(R.x,ne,X.w,X.h)),Te=E.call(this,Ye),we=[],Fe=0;Fe<Te.length;Fe+=1)we.indexOf(Te[Fe])===-1&&we.push(Te[Fe]);if(T(we),this.autoPaging)for(var He=we[0],Xe=we[we.length-1],ut=He;ut<Xe+1;ut++){this.pdf.setPage(ut);var Et=ut===1?this.posY+this.margin[0]:this.margin[0],At=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],jt=this.pdf.internal.pageSize.height-this.margin[2],Dt=jt-this.margin[0],Yt=this.pdf.internal.pageSize.width-this.margin[1],Rt=Yt-this.margin[3],Ut=ut===1?0:At+(ut-2)*Dt;if(this.ctx.clip_path.length!==0){var qt=this.path;Ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(Ce,this.posX+this.margin[3],-1*Ut+Et),L.call(this,"fill",!0),this.path=qt}var De=B([JSON.parse(JSON.stringify(Ye))],this.posX+this.margin[3],-Ut+Et+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(me*R.scale),oe=this.lineWidth,this.lineWidth=oe*R.scale);var Oe=this.autoPaging!=="text";if(Oe||De.y+De.h<=jt){if(Oe||De.y>=Et&&De.x<=Yt){var ke=Oe?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||Yt-De.x)[0],We=B([JSON.parse(JSON.stringify(Le))],this.posX+this.margin[3],-Ut+Et+this.ctx.prevPageLastElemOffset)[0],ft=Oe&&(ut>He||ut<Xe)&&x.call(this);ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Rt,Dt,null).clip().discardPath()),this.pdf.text(ke,We.x,We.y,{angle:R.angle,align:K,renderingMode:R.renderingMode}),ft&&this.pdf.restoreGraphicsState()}}else De.y<jt&&(this.ctx.prevPageLastElemOffset+=jt-De.y);R.scale>=.01&&(this.pdf.setFontSize(me),this.lineWidth=oe)}else R.scale>=.01&&(me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(me*R.scale),oe=this.lineWidth,this.lineWidth=oe*R.scale),this.pdf.text(R.text,ue.x+this.posX,ue.y+this.posY,{angle:R.angle,align:K,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(me),this.lineWidth=oe)},P=function(R,K,X,re){X=X||0,re=re||0,this.pdf.internal.out(r(R+X)+" "+n(K+re)+" l")},M=function(R,K,X){return this.pdf.lines(R,K,X,null,null)},ee=function(R,K,X,re,ne,ue,fe,be){this.pdf.internal.out([t(a(X+R)),t(s(re+K)),t(a(ne+R)),t(s(ue+K)),t(a(fe+R)),t(s(be+K)),"c"].join(" "))},W=function(R,K,X,re){for(var ne=2*Math.PI,ue=Math.PI/2;K>X;)K-=ne;var fe=Math.abs(X-K);fe<ne&&re&&(fe=ne-fe);for(var be=[],Ce=re?-1:1,me=K;fe>1e-5;){var oe=me+Ce*Math.min(fe,ue);be.push(te.call(this,R,me,oe)),fe-=Math.abs(oe-me),me=oe}return be},te=function(R,K,X){var re=(X-K)/2,ne=R*Math.cos(re),ue=R*Math.sin(re),fe=ne,be=-ue,Ce=fe*fe+be*be,me=Ce+fe*ne+be*ue,oe=4/3*(Math.sqrt(2*Ce*me)-me)/(fe*ue-be*ne),Le=fe-oe*be,Ye=be+oe*fe,Te=Le,we=-Ye,Fe=re+K,He=Math.cos(Fe),Xe=Math.sin(Fe);return{x1:R*Math.cos(K),y1:R*Math.sin(K),x2:Le*He-Ye*Xe,y2:Le*Xe+Ye*He,x3:Te*He-we*Xe,y3:Te*Xe+we*He,x4:R*Math.cos(X),y4:R*Math.sin(X)}},G=function(R){return 180*R/Math.PI},q=function(R,K,X,re,ne,ue){var fe=R+.5*(X-R),be=K+.5*(re-K),Ce=ne+.5*(X-ne),me=ue+.5*(re-ue),oe=Math.min(R,ne,fe,Ce),Le=Math.max(R,ne,fe,Ce),Ye=Math.min(K,ue,be,me),Te=Math.max(K,ue,be,me);return new o(oe,Ye,Le-oe,Te-Ye)},z=function(R,K,X,re,ne,ue,fe,be){var Ce,me,oe,Le,Ye,Te,we,Fe,He,Xe,ut,Et,At,jt,Dt=X-R,Yt=re-K,Rt=ne-X,Ut=ue-re,qt=fe-ne,De=be-ue;for(me=0;me<41;me++)He=(we=(oe=R+(Ce=me/40)*Dt)+Ce*((Ye=X+Ce*Rt)-oe))+Ce*(Ye+Ce*(ne+Ce*qt-Ye)-we),Xe=(Fe=(Le=K+Ce*Yt)+Ce*((Te=re+Ce*Ut)-Le))+Ce*(Te+Ce*(ue+Ce*De-Te)-Fe),me==0?(ut=He,Et=Xe,At=He,jt=Xe):(ut=Math.min(ut,He),Et=Math.min(Et,Xe),At=Math.max(At,He),jt=Math.max(jt,Xe));return new o(Math.round(ut),Math.round(Et),Math.round(At-ut),Math.round(jt-Et))},Z=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,K,X=(R=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:K}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(ur.API),function(e){var t=function(s){var i,o,c,A,d,h,m,p,v,x;for(o=[],c=0,A=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;A>c;c+=4)(d=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(h=(d=((d=((d=((d=(d-(x=d%85))/85)-(v=d%85))/85)-(p=d%85))/85)-(m=d%85))/85)%85,o.push(h+33,m+33,p+33,v+33,x+33)):o.push(122);return function(E,_){for(var B=_;B>0;B--)E.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},r=function(s){var i,o,c,A,d,h=String,m="length",p=255,v="charCodeAt",x="slice",E="replace";for(s[x](-2),s=s[x](0,-2)[E](/\s/g,"")[E]("z","!!!!!"),c=[],A=0,d=(s+=i="uuuuu"[x](s[m]%5||5))[m];d>A;A+=5)o=52200625*(s[v](A)-33)+614125*(s[v](A+1)-33)+7225*(s[v](A+2)-33)+85*(s[v](A+3)-33)+(s[v](A+4)-33),c.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(_,B){for(var T=B;T>0;T--)_.pop()}(c,i[m]),h.fromCharCode.apply(h,c)},n=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var o="",c=0;c<s.length;c+=2)o+=String.fromCharCode("0x"+(s[c]+s[c+1]));return o},a=function(s){for(var i=new Uint8Array(s.length),o=s.length;o--;)i[o]=s.charCodeAt(o);return s=(i=w4(i)).reduce(function(c,A){return c+String.fromCharCode(A)},"")};e.processDataByFilters=function(s,i){var o=0,c=s||"",A=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),A.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),A.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),A.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",A.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),A.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:c,reverseChain:A.reverse().join(" ")}}}(ur.API),function(e){e.loadFile=function(t,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(c,A,d){var h=new XMLHttpRequest,m=0,p=function(v){var x=v.length,E=[],_=String.fromCharCode;for(m=0;m<x;m+=1)E.push(_(255&v.charCodeAt(m)));return E.join("")};if(h.open("GET",c,!A),h.overrideMimeType("text/plain; charset=x-user-defined"),A===!1&&(h.onload=function(){h.status===200?d(p(this.responseText)):d(void 0)}),h.send(null),A&&h.status===200)return p(h.responseText)}(a,s,i)}catch{}return o}(t,r,n)},e.loadImageFile=e.loadFile}(ur.API),function(e){function t(){return(Br.html2canvas?Promise.resolve(Br.html2canvas):xw(()=>Promise.resolve().then(()=>B2e),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(Br.DOMPurify?Promise.resolve(Br.DOMPurify):xw(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var o=Yn(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(i,o){var c=document.createElement(i);for(var A in o.className&&(c.className=o.className),o.innerHTML&&o.dompurify&&(c.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)c.style[A]=o.style[A];return c},s=function i(o){var c=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),A=i.convert(Promise.resolve(),c);return A=(A=A.setProgress(1,i,1,[i])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,o){return i.__proto__=o||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:i,dompurify:c})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function c(A,d){for(var h=A.nodeType===3?document.createTextNode(A.nodeValue):A.cloneNode(!1),m=A.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||h.appendChild(c(m,d));return A.nodeType===1&&(A.nodeName==="CANVAS"?(h.width=A.width,h.height=A.height,h.getContext("2d").drawImage(A,0,0)):A.nodeName!=="TEXTAREA"&&A.nodeName!=="SELECT"||(h.value=A.value),h.addEventListener("load",function(){h.scrollTop=A.scrollTop,h.scrollLeft=A.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,o(this.prop.container,c)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var c=this.opt.jsPDF,A=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=A,A)for(var m=0;m<A.length;++m){var p=A[m],v=p.src.find(function(x){return x.format==="truetype"});v&&c.addFont(v.url,p.ref.name,p.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),o(this.prop.container,h)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,o,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},s.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(n(i)!=="object")return this;var o=Object.keys(i||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=i[c]};switch(c){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[c]=i[c]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(i,o){return this.then(function(){var c=i in s.template.prop?this.prop[i]:this.opt[i];return o?o(c):c})},s.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function o(c,A){return Math.floor(c*A/72*96)}return this.then(function(){(i=i||ur.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,o,c,A){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),c!=null&&(this.progress.n=c),A!=null&&(this.progress.stack=A),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,o,c,A){return this.setProgress(i?this.progress.val+i:null,o||null,c?this.progress.n+c:null,A?this.progress.stack.concat(A):null)},s.prototype.then=function(i,o){var c=this;return this.thenCore(i,o,function(A,d){return c.updateProgress(null,null,1,[A]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,A),h}).then(A,d).then(function(h){return c.updateProgress(1),h})})},s.prototype.thenCore=function(i,o,c){c=c||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var A=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=c.call(A,i,o);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},s.prototype.thenList=function(i){var o=this;return i.forEach(function(c){o=o.thenCore(c)}),o},s.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return s.convert(o,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,ur.getPageSize=function(i,o,c){if(Yn(i)==="object"){var A=i;i=A.orientation,o=A.unit||o,c=A.format||c}o=o||"mm",c=c||"a4",i=(""+(i||"P")).toLowerCase();var d,h=(""+c).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var p,v=0,x=0;if(m.hasOwnProperty(h))v=m[h][1]/d,x=m[h][0]/d;else try{v=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(i==="p"||i==="portrait")i="p",x>v&&(p=x,x=v,v=p);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",v>x&&(p=x,x=v,v=p)}return{width:x,height:v,unit:o,k:d,orientation:i}},e.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(N4):null;var c=new s(o);return o.worker?c:c.from(i).doCallback()}}(ur.API),ur.API.addJS=function(e){return p6=e,this.internal.events.subscribe("postPutResources",function(){lb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(lb+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),m6=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+p6+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){lb!==void 0&&m6!==void 0&&this.internal.out("/Names <</JavaScript "+lb+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],o=n.exec(i);if(o!=null){var c=o[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var A=this.internal.pages.length,d=[];for(s=0;s<A;s++){var h=r.internal.newObject();d.push(h);var m=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var c=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var A=0;A<n.children.length;A++)this.renderItems(n.children[A])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(ur.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,i,o){var c,A=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(h){for(var m,p=256*h.charCodeAt(4)+h.charCodeAt(5),v=h.length,x={width:0,height:0,numcomponents:1},E=4;E<v;E+=2){if(E+=p,t.indexOf(h.charCodeAt(E+1))!==-1){m=256*h.charCodeAt(E+5)+h.charCodeAt(E+6),x={width:256*h.charCodeAt(E+7)+h.charCodeAt(E+8),height:m,numcomponents:h.charCodeAt(E+9)};break}p=256*h.charCodeAt(E+2)+h.charCodeAt(E+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:A,index:n,alias:a}}return d}}(ur.API);var em,cb,g6,x6,v6,cte=function(){var e,t,r;function n(s){var i,o,c,A,d,h,m,p,v,x,E,_,B,T;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(i=this.readUInt32(),v=(function(){var I,L;for(L=[],I=0;I<4;++I)L.push(String.fromCharCode(this.data[this.pos++]));return L}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),A=this.readUInt16()||100,h.delay=1e3*d/A,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,i-=4),s=(h!=null?h.data:void 0)||this.imgData,_=0;0<=i?_<i:_>i;0<=i?++_:--_)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(B=0;0<=x?B<x:B>x;0<=x?++B:--B)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":m=(E=this.read(i)).indexOf(0),p=String.fromCharCode.apply(String,E.slice(0,m)),this.text[p]=String.fromCharCode.apply(String,E.slice(m+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(T=this.colorType)===4||T===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var i,o;for(o=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),c=0,A=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(h,m,p,v){var x,E,_,B,T,I,L,k,w,y,N,U,j,F,P,M,ee,W,te,G,q,z=Math.ceil((A.width-h)/p),Z=Math.ceil((A.height-m)/v),R=A.width==z&&A.height==Z;for(F=i*z,U=R?o:new Uint8Array(F*Z),I=s.length,j=0,E=0;j<Z&&c<I;){switch(s[c++]){case 0:for(B=ee=0;ee<F;B=ee+=1)U[E++]=s[c++];break;case 1:for(B=W=0;W<F;B=W+=1)x=s[c++],T=B<i?0:U[E-i],U[E++]=(x+T)%256;break;case 2:for(B=te=0;te<F;B=te+=1)x=s[c++],_=(B-B%i)/i,P=j&&U[(j-1)*F+_*i+B%i],U[E++]=(P+x)%256;break;case 3:for(B=G=0;G<F;B=G+=1)x=s[c++],_=(B-B%i)/i,T=B<i?0:U[E-i],P=j&&U[(j-1)*F+_*i+B%i],U[E++]=(x+Math.floor((T+P)/2))%256;break;case 4:for(B=q=0;q<F;B=q+=1)x=s[c++],_=(B-B%i)/i,T=B<i?0:U[E-i],j===0?P=M=0:(P=U[(j-1)*F+_*i+B%i],M=_&&U[(j-1)*F+(_-1)*i+B%i]),L=T+P-M,k=Math.abs(L-T),y=Math.abs(L-P),N=Math.abs(L-M),w=k<=y&&k<=N?T:y<=N?P:M,U[E++]=(x+w)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!R){var K=((m+j*v)*A.width+h)*i,X=j*F;for(B=0;B<z;B+=1){for(var re=0;re<i;re+=1)o[K++]=U[X++];K+=(p-1)*i}}j++}}return s=Qee(s),A.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},n.prototype.decodePalette=function(){var s,i,o,c,A,d,h,m,p;for(o=this.palette,d=this.transparency.indexed||[],A=new Uint8Array((d.length||0)+o.length),c=0,s=0,i=h=0,m=o.length;h<m;i=h+=3)A[c++]=o[i],A[c++]=o[i+1],A[c++]=o[i+2],A[c++]=(p=d[s++])!=null?p:255;return A},n.prototype.copyToImageData=function(s,i){var o,c,A,d,h,m,p,v,x,E,_;if(c=this.colors,x=null,o=this.hasAlphaChannel,this.palette.length&&(x=(_=this._decodedPalette)!=null?_:this._decodedPalette=this.decodePalette(),c=4,o=!0),v=(A=s.data||s).length,h=x||i,d=m=0,c===1)for(;d<v;)p=x?4*i[d/4]:m,E=h[p++],A[d++]=E,A[d++]=E,A[d++]=E,A[d++]=o?h[p++]:255,m=p;else for(;d<v;)p=x?4*i[d/4]:m,A[d++]=h[p++],A[d++]=h[p++],A[d++]=h[p++],A[d++]=o?h[p++]:255,m=p},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(Br)==="[object Window]"){try{t=Br.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var i;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(i=new Image).src=t.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var i,o,c,A,d,h,m,p;if(this.animation){for(p=[],o=d=0,h=(m=this.animation.frames).length;d<h;o=++d)i=m[o],c=s.createImageData(i.width,i.height),A=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(c,A),i.imageData=c,p.push(i.image=e(c));return p}},n.prototype.renderFrame=function(s,i){var o,c,A;return o=(c=this.animation.frames)[i],A=c[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(A!=null?A.disposeOp:void 0)===1?s.clearRect(A.xOffset,A.yOffset,A.width,A.height):(A!=null?A.disposeOp:void 0)===2&&s.putImageData(A.imageData,A.xOffset,A.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(s){var i,o,c,A,d,h,m=this;return o=0,h=this.animation,A=h.numFrames,c=h.frames,d=h.numPlays,(i=function(){var p,v;if(p=o++%A,v=c[p],m.renderFrame(s,p),A>1&&o/A<d)return m.animation._timeout=setTimeout(i,v.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var i,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function ute(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,i=1<<(7&a)+1;e[t++],e[t++];var o=null,c=null;s&&(o=t,c=i,t+=3*i);var A=!0,d=[],h=0,m=null,p=0,v=null;for(this.width=r,this.height=n;A&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,v=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((j=e[t++])>=0))throw Error("Invalid block size");if(j===0)break;t+=j}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=e[t++];h=e[t++]|e[t++]<<8,m=e[t++],(1&x)==0&&(m=null),p=x>>2&7,t++;break;case 254:for(;;){if(!((j=e[t++])>=0))throw Error("Invalid block size");if(j===0)break;t+=j}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var E=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,B=e[t++]|e[t++]<<8,T=e[t++]|e[t++]<<8,I=e[t++],L=I>>6&1,k=1<<(7&I)+1,w=o,y=c,N=!1;I>>7&&(N=!0,w=t,y=k,t+=3*k);var U=t;for(t++;;){var j;if(!((j=e[t++])>=0))throw Error("Invalid block size");if(j===0)break;t+=j}d.push({x:E,y:_,width:B,height:T,has_local_palette:N,palette_offset:w,palette_size:y,data_offset:U,data_length:t-U,transparent_index:m,interlaced:!!L,delay:h,disposal:p});break;case 59:A=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return v},this.frameInfo=function(F){if(F<0||F>=d.length)throw new Error("Frame index out of range.");return d[F]},this.decodeAndBlitFrameBGRA=function(F,P){var M=this.frameInfo(F),ee=M.width*M.height,W=new Uint8Array(ee);b6(e,M.data_offset,W,ee);var te=M.palette_offset,G=M.transparent_index;G===null&&(G=256);var q=M.width,z=r-q,Z=q,R=4*(M.y*r+M.x),K=4*((M.y+M.height)*r+M.x),X=R,re=4*z;M.interlaced===!0&&(re+=4*r*7);for(var ne=8,ue=0,fe=W.length;ue<fe;++ue){var be=W[ue];if(Z===0&&(Z=q,(X+=re)>=K&&(re=4*z+4*r*(ne-1),X=R+(q+z)*(ne<<1),ne>>=1)),be===G)X+=4;else{var Ce=e[te+3*be],me=e[te+3*be+1],oe=e[te+3*be+2];P[X++]=oe,P[X++]=me,P[X++]=Ce,P[X++]=255}--Z}},this.decodeAndBlitFrameRGBA=function(F,P){var M=this.frameInfo(F),ee=M.width*M.height,W=new Uint8Array(ee);b6(e,M.data_offset,W,ee);var te=M.palette_offset,G=M.transparent_index;G===null&&(G=256);var q=M.width,z=r-q,Z=q,R=4*(M.y*r+M.x),K=4*((M.y+M.height)*r+M.x),X=R,re=4*z;M.interlaced===!0&&(re+=4*r*7);for(var ne=8,ue=0,fe=W.length;ue<fe;++ue){var be=W[ue];if(Z===0&&(Z=q,(X+=re)>=K&&(re=4*z+4*r*(ne-1),X=R+(q+z)*(ne<<1),ne>>=1)),be===G)X+=4;else{var Ce=e[te+3*be],me=e[te+3*be+1],oe=e[te+3*be+2];P[X++]=Ce,P[X++]=me,P[X++]=oe,P[X++]=255}--Z}}}function b6(e,t,r,n){for(var a=e[t++],s=1<<a,i=s+1,o=i+1,c=a+1,A=(1<<c)-1,d=0,h=0,m=0,p=e[t++],v=new Int32Array(4096),x=null;;){for(;d<16&&p!==0;)h|=e[t++]<<d,d+=8,p===1?p=e[t++]:--p;if(d<c)break;var E=h&A;if(h>>=c,d-=c,E!==s){if(E===i)break;for(var _=E<o?E:x,B=0,T=_;T>s;)T=v[T]>>8,++B;var I=T;if(m+B+(_!==E?1:0)>n)return void ca.log("Warning, gif stream longer than expected.");r[m++]=I;var L=m+=B;for(_!==E&&(r[m++]=I),T=_;B--;)T=v[T],r[--L]=255&T,T>>=8;x!==null&&o<4096&&(v[o++]=x<<8|I,o>=A+1&&c<12&&(++c,A=A<<1|1)),x=E}else o=i+1,A=(1<<(c=a+1))-1,x=null}return m!==n&&ca.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function C5(e){var t,r,n,a,s,i=Math.floor,o=new Array(64),c=new Array(64),A=new Array(64),d=new Array(64),h=new Array(65535),m=new Array(65535),p=new Array(64),v=new Array(64),x=[],E=0,_=7,B=new Array(64),T=new Array(64),I=new Array(64),L=new Array(256),k=new Array(2048),w=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],y=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],j=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ee=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function W(R,K){for(var X=0,re=0,ne=new Array,ue=1;ue<=16;ue++){for(var fe=1;fe<=R[ue];fe++)ne[K[re]]=[],ne[K[re]][0]=X,ne[K[re]][1]=ue,re++,X++;X*=2}return ne}function te(R){for(var K=R[0],X=R[1]-1;X>=0;)K&1<<X&&(E|=1<<_),X--,--_<0&&(E==255?(G(255),G(0)):G(E),_=7,E=0)}function G(R){x.push(R)}function q(R){G(R>>8&255),G(255&R)}function z(R,K,X,re,ne){for(var ue,fe=ne[0],be=ne[240],Ce=function(Xe,ut){var Et,At,jt,Dt,Yt,Rt,Ut,qt,De,Oe,ke=0;for(De=0;De<8;++De){Et=Xe[ke],At=Xe[ke+1],jt=Xe[ke+2],Dt=Xe[ke+3],Yt=Xe[ke+4],Rt=Xe[ke+5],Ut=Xe[ke+6];var We=Et+(qt=Xe[ke+7]),ft=Et-qt,$t=At+Ut,zt=At-Ut,tr=jt+Rt,Hr=jt-Rt,or=Dt+Yt,mn=Dt-Yt,Lr=We+or,En=We-or,Vn=$t+tr,ar=$t-tr;Xe[ke]=Lr+Vn,Xe[ke+4]=Lr-Vn;var Jt=.707106781*(ar+En);Xe[ke+2]=En+Jt,Xe[ke+6]=En-Jt;var Mr=.382683433*((Lr=mn+Hr)-(ar=zt+ft)),ms=.5411961*Lr+Mr,Zn=1.306562965*ar+Mr,_a=.707106781*(Vn=Hr+zt),js=ft+_a,Kt=ft-_a;Xe[ke+5]=Kt+ms,Xe[ke+3]=Kt-ms,Xe[ke+1]=js+Zn,Xe[ke+7]=js-Zn,ke+=8}for(ke=0,De=0;De<8;++De){Et=Xe[ke],At=Xe[ke+8],jt=Xe[ke+16],Dt=Xe[ke+24],Yt=Xe[ke+32],Rt=Xe[ke+40],Ut=Xe[ke+48];var pn=Et+(qt=Xe[ke+56]),on=Et-qt,Dn=At+Ut,zn=At-Ut,ea=jt+Rt,Ae=jt-Rt,Ne=Dt+Yt,ye=Dt-Yt,Ee=pn+Ne,_e=pn-Ne,Be=Dn+ea,$e=Dn-ea;Xe[ke]=Ee+Be,Xe[ke+32]=Ee-Be;var st=.707106781*($e+_e);Xe[ke+16]=_e+st,Xe[ke+48]=_e-st;var ze=.382683433*((Ee=ye+Ae)-($e=zn+on)),Ze=.5411961*Ee+ze,rt=1.306562965*$e+ze,yt=.707106781*(Be=Ae+zn),It=on+yt,Qt=on-yt;Xe[ke+40]=Qt+Ze,Xe[ke+24]=Qt-Ze,Xe[ke+8]=It+rt,Xe[ke+56]=It-rt,ke++}for(De=0;De<64;++De)Oe=Xe[De]*ut[De],p[De]=Oe>0?Oe+.5|0:Oe-.5|0;return p}(R,K),me=0;me<64;++me)v[w[me]]=Ce[me];var oe=v[0]-X;X=v[0],oe==0?te(re[0]):(te(re[m[ue=32767+oe]]),te(h[ue]));for(var Le=63;Le>0&&v[Le]==0;)Le--;if(Le==0)return te(fe),X;for(var Ye,Te=1;Te<=Le;){for(var we=Te;v[Te]==0&&Te<=Le;)++Te;var Fe=Te-we;if(Fe>=16){Ye=Fe>>4;for(var He=1;He<=Ye;++He)te(be);Fe&=15}ue=32767+v[Te],te(ne[(Fe<<4)+m[ue]]),te(h[ue]),Te++}return Le!=63&&te(fe),X}function Z(R){R=Math.min(Math.max(R,1),100),s!=R&&(function(K){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var ne=i((X[re]*K+50)/100);ne=Math.min(Math.max(ne,1),255),o[w[re]]=ne}for(var ue=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],fe=0;fe<64;fe++){var be=i((ue[fe]*K+50)/100);be=Math.min(Math.max(be,1),255),c[w[fe]]=be}for(var Ce=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],me=0,oe=0;oe<8;oe++)for(var Le=0;Le<8;Le++)A[me]=1/(o[w[me]]*Ce[oe]*Ce[Le]*8),d[me]=1/(c[w[me]]*Ce[oe]*Ce[Le]*8),me++}(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),s=R)}this.encode=function(R,K){K&&Z(K),x=new Array,E=0,_=7,q(65496),q(65504),q(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),q(1),q(1),G(0),G(0),function(){q(65499),q(132),G(0);for(var At=0;At<64;At++)G(o[At]);G(1);for(var jt=0;jt<64;jt++)G(c[jt])}(),function(At,jt){q(65472),q(17),G(8),q(jt),q(At),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)}(R.width,R.height),function(){q(65476),q(418),G(0);for(var At=0;At<16;At++)G(y[At+1]);for(var jt=0;jt<=11;jt++)G(N[jt]);G(16);for(var Dt=0;Dt<16;Dt++)G(U[Dt+1]);for(var Yt=0;Yt<=161;Yt++)G(j[Yt]);G(1);for(var Rt=0;Rt<16;Rt++)G(F[Rt+1]);for(var Ut=0;Ut<=11;Ut++)G(P[Ut]);G(17);for(var qt=0;qt<16;qt++)G(M[qt+1]);for(var De=0;De<=161;De++)G(ee[De])}(),q(65498),q(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var X=0,re=0,ne=0;E=0,_=7,this.encode.displayName="_encode_";for(var ue,fe,be,Ce,me,oe,Le,Ye,Te,we=R.data,Fe=R.width,He=R.height,Xe=4*Fe,ut=0;ut<He;){for(ue=0;ue<Xe;){for(me=Xe*ut+ue,Le=-1,Ye=0,Te=0;Te<64;Te++)oe=me+(Ye=Te>>3)*Xe+(Le=4*(7&Te)),ut+Ye>=He&&(oe-=Xe*(ut+1+Ye-He)),ue+Le>=Xe&&(oe-=ue+Le-Xe+4),fe=we[oe++],be=we[oe++],Ce=we[oe++],B[Te]=(k[fe]+k[be+256>>0]+k[Ce+512>>0]>>16)-128,T[Te]=(k[fe+768>>0]+k[be+1024>>0]+k[Ce+1280>>0]>>16)-128,I[Te]=(k[fe+1280>>0]+k[be+1536>>0]+k[Ce+1792>>0]>>16)-128;X=z(B,A,X,t,n),re=z(T,d,re,r,a),ne=z(I,d,ne,r,a),ue+=32}ut+=8}if(_>=0){var Et=[];Et[1]=_+1,Et[0]=(1<<_+1)-1,te(Et)}return q(65497),new Uint8Array(x)},e=e||50,function(){for(var R=String.fromCharCode,K=0;K<256;K++)L[K]=R(K)}(),t=W(y,N),r=W(F,P),n=W(U,j),a=W(M,ee),function(){for(var R=1,K=2,X=1;X<=15;X++){for(var re=R;re<K;re++)m[32767+re]=X,h[32767+re]=[],h[32767+re][1]=X,h[32767+re][0]=re;for(var ne=-(K-1);ne<=-R;ne++)m[32767+ne]=X,h[32767+ne]=[],h[32767+ne][1]=X,h[32767+ne][0]=K-1+ne;R<<=1,K<<=1}}(),function(){for(var R=0;R<256;R++)k[R]=19595*R,k[R+256>>0]=38470*R,k[R+512>>0]=7471*R+32768,k[R+768>>0]=-11059*R,k[R+1024>>0]=-21709*R,k[R+1280>>0]=32768*R+8421375,k[R+1536>>0]=-27439*R,k[R+1792>>0]=-5329*R}(),Z(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Dc(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function w6(e){function t(y){if(!y)throw Error("assert :P")}function r(y,N,U){for(var j=0;4>j;j++)if(y[N+j]!=U.charCodeAt(j))return!0;return!1}function n(y,N,U,j,F){for(var P=0;P<F;P++)y[N+P]=U[j+P]}function a(y,N,U,j){for(var F=0;F<j;F++)y[N+F]=U}function s(y){return new Int32Array(y)}function i(y,N){for(var U=[],j=0;j<y;j++)U.push(new N);return U}function o(y,N){var U=[];return function j(F,P,M){for(var ee=M[P],W=0;W<ee&&(F.push(M.length>P+1?[]:new N),!(M.length<P+1));W++)j(F[W],P+1,M)}(U,0,y),U}var c=function(){var y=this;function N(C,O){for(var Y=1<<O-1>>>0;C&Y;)Y>>>=1;return Y?(C&Y-1)+Y:C}function U(C,O,Y,ae,le){t(!(ae%Y));do C[O+(ae-=Y)]=le;while(0<ae)}function j(C,O,Y,ae,le){if(t(2328>=le),512>=le)var de=s(512);else if((de=s(le))==null)return 0;return function(he,pe,ve,Se,Ue,tt){var Je,Ke,bt=pe,lt=1<<ve,Pe=s(16),Qe=s(16);for(t(Ue!=0),t(Se!=null),t(he!=null),t(0<ve),Ke=0;Ke<Ue;++Ke){if(15<Se[Ke])return 0;++Pe[Se[Ke]]}if(Pe[0]==Ue)return 0;for(Qe[1]=0,Je=1;15>Je;++Je){if(Pe[Je]>1<<Je)return 0;Qe[Je+1]=Qe[Je]+Pe[Je]}for(Ke=0;Ke<Ue;++Ke)Je=Se[Ke],0<Se[Ke]&&(tt[Qe[Je]++]=Ke);if(Qe[15]==1)return(Se=new F).g=0,Se.value=tt[0],U(he,bt,1,lt,Se),lt;var ht,wt=-1,gt=lt-1,Xt=0,Mt=1,lr=1,Vt=1<<ve;for(Ke=0,Je=1,Ue=2;Je<=ve;++Je,Ue<<=1){if(Mt+=lr<<=1,0>(lr-=Pe[Je]))return 0;for(;0<Pe[Je];--Pe[Je])(Se=new F).g=Je,Se.value=tt[Ke++],U(he,bt+Xt,Ue,Vt,Se),Xt=N(Xt,Je)}for(Je=ve+1,Ue=2;15>=Je;++Je,Ue<<=1){if(Mt+=lr<<=1,0>(lr-=Pe[Je]))return 0;for(;0<Pe[Je];--Pe[Je]){if(Se=new F,(Xt&gt)!=wt){for(bt+=Vt,ht=1<<(wt=Je)-ve;15>wt&&!(0>=(ht-=Pe[wt]));)++wt,ht<<=1;lt+=Vt=1<<(ht=wt-ve),he[pe+(wt=Xt&gt)].g=ht+ve,he[pe+wt].value=bt-pe-wt}Se.g=Je-ve,Se.value=tt[Ke++],U(he,bt+(Xt>>ve),Ue,Vt,Se),Xt=N(Xt,Je)}}return Mt!=2*Qe[15]-1?0:lt}(C,O,Y,ae,le,de)}function F(){this.value=this.g=0}function P(){this.value=this.g=0}function M(){this.G=i(5,F),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(es,P)}function ee(C,O,Y,ae){t(C!=null),t(O!=null),t(2147483648>ae),C.Ca=254,C.I=0,C.b=-8,C.Ka=0,C.oa=O,C.pa=Y,C.Jd=O,C.Yc=Y+ae,C.Zc=4<=ae?Y+ae-4+1:Y,ue(C)}function W(C,O){for(var Y=0;0<O--;)Y|=be(C,128)<<O;return Y}function te(C,O){var Y=W(C,O);return fe(C)?-Y:Y}function G(C,O,Y,ae){var le,de=0;for(t(C!=null),t(O!=null),t(4294967288>ae),C.Sb=ae,C.Ra=0,C.u=0,C.h=0,4<ae&&(ae=4),le=0;le<ae;++le)de+=O[Y+le]<<8*le;C.Ra=de,C.bb=ae,C.oa=O,C.pa=Y}function q(C){for(;8<=C.u&&C.bb<C.Sb;)C.Ra>>>=8,C.Ra+=C.oa[C.pa+C.bb]<<fA-8>>>0,++C.bb,C.u-=8;X(C)&&(C.h=1,C.u=0)}function z(C,O){if(t(0<=O),!C.h&&O<=dA){var Y=K(C)&iu[O];return C.u+=O,q(C),Y}return C.h=1,C.u=0}function Z(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function R(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(C){return C.Ra>>>(C.u&fA-1)>>>0}function X(C){return t(C.bb<=C.Sb),C.h||C.bb==C.Sb&&C.u>fA}function re(C,O){C.u=O,C.h=X(C)}function ne(C){C.u>=xd&&(t(C.u>=xd),q(C))}function ue(C){t(C!=null&&C.oa!=null),C.pa<C.Zc?(C.I=(C.oa[C.pa++]|C.I<<8)>>>0,C.b+=8):(t(C!=null&&C.oa!=null),C.pa<C.Yc?(C.b+=8,C.I=C.oa[C.pa++]|C.I<<8):C.Ka?C.b=0:(C.I<<=8,C.b+=8,C.Ka=1))}function fe(C){return W(C,1)}function be(C,O){var Y=C.Ca;0>C.b&&ue(C);var ae=C.b,le=Y*O>>>8,de=(C.I>>>ae>le)+0;for(de?(Y-=le,C.I-=le+1<<ae>>>0):Y=le+1,ae=Y,le=0;256<=ae;)le+=8,ae>>=8;return ae=7^le+Ii[ae],C.b-=ae,C.Ca=(Y<<ae)-1,de}function Ce(C,O,Y){C[O+0]=Y>>24&255,C[O+1]=Y>>16&255,C[O+2]=Y>>8&255,C[O+3]=Y>>0&255}function me(C,O){return C[O+0]<<0|C[O+1]<<8}function oe(C,O){return me(C,O)|C[O+2]<<16}function Le(C,O){return me(C,O)|me(C,O+2)<<16}function Ye(C,O){var Y=1<<O;return t(C!=null),t(0<O),C.X=s(Y),C.X==null?0:(C.Mb=32-O,C.Xa=O,1)}function Te(C,O){t(C!=null),t(O!=null),t(C.Xa==O.Xa),n(O.X,0,C.X,0,1<<O.Xa)}function we(){this.X=[],this.Xa=this.Mb=0}function Fe(C,O,Y,ae){t(Y!=null),t(ae!=null);var le=Y[0],de=ae[0];return le==0&&(le=(C*de+O/2)/O),de==0&&(de=(O*le+C/2)/C),0>=le||0>=de?0:(Y[0]=le,ae[0]=de,1)}function He(C,O){return C+(1<<O)-1>>>O}function Xe(C,O){return((4278255360&C)+(4278255360&O)>>>0&4278255360)+((16711935&C)+(16711935&O)>>>0&16711935)>>>0}function ut(C,O){y[O]=function(Y,ae,le,de,he,pe,ve){var Se;for(Se=0;Se<he;++Se){var Ue=y[C](pe[ve+Se-1],le,de+Se);pe[ve+Se]=Xe(Y[ae+Se],Ue)}}}function Et(){this.ud=this.hd=this.jd=0}function At(C,O){return((4278124286&(C^O))>>>1)+(C&O)>>>0}function jt(C){return 0<=C&&256>C?C:0>C?0:255<C?255:void 0}function Dt(C,O){return jt(C+(C-O+.5>>1))}function Yt(C,O,Y){return Math.abs(O-Y)-Math.abs(C-Y)}function Rt(C,O,Y,ae,le,de,he){for(ae=de[he-1],Y=0;Y<le;++Y)de[he+Y]=ae=Xe(C[O+Y],ae)}function Ut(C,O,Y,ae,le){var de;for(de=0;de<Y;++de){var he=C[O+de],pe=he>>8&255,ve=16711935&(ve=(ve=16711935&he)+((pe<<16)+pe));ae[le+de]=(4278255360&he)+ve>>>0}}function qt(C,O){O.jd=C>>0&255,O.hd=C>>8&255,O.ud=C>>16&255}function De(C,O,Y,ae,le,de){var he;for(he=0;he<ae;++he){var pe=O[Y+he],ve=pe>>>8,Se=pe,Ue=255&(Ue=(Ue=pe>>>16)+((C.jd<<24>>24)*(ve<<24>>24)>>>5));Se=255&(Se=(Se=Se+((C.hd<<24>>24)*(ve<<24>>24)>>>5))+((C.ud<<24>>24)*(Ue<<24>>24)>>>5)),le[de+he]=(4278255360&pe)+(Ue<<16)+Se}}function Oe(C,O,Y,ae,le){y[O]=function(de,he,pe,ve,Se,Ue,tt,Je,Ke){for(ve=tt;ve<Je;++ve)for(tt=0;tt<Ke;++tt)Se[Ue++]=le(pe[ae(de[he++])])},y[C]=function(de,he,pe,ve,Se,Ue,tt){var Je=8>>de.b,Ke=de.Ea,bt=de.K[0],lt=de.w;if(8>Je)for(de=(1<<de.b)-1,lt=(1<<Je)-1;he<pe;++he){var Pe,Qe=0;for(Pe=0;Pe<Ke;++Pe)Pe&de||(Qe=ae(ve[Se++])),Ue[tt++]=le(bt[Qe&lt]),Qe>>=Je}else y["VP8LMapColor"+Y](ve,Se,bt,lt,Ue,tt,he,pe,Ke)}}function ke(C,O,Y,ae,le){for(Y=O+Y;O<Y;){var de=C[O++];ae[le++]=de>>16&255,ae[le++]=de>>8&255,ae[le++]=de>>0&255}}function We(C,O,Y,ae,le){for(Y=O+Y;O<Y;){var de=C[O++];ae[le++]=de>>16&255,ae[le++]=de>>8&255,ae[le++]=de>>0&255,ae[le++]=de>>24&255}}function ft(C,O,Y,ae,le){for(Y=O+Y;O<Y;){var de=(he=C[O++])>>16&240|he>>12&15,he=he>>0&240|he>>28&15;ae[le++]=de,ae[le++]=he}}function $t(C,O,Y,ae,le){for(Y=O+Y;O<Y;){var de=(he=C[O++])>>16&248|he>>13&7,he=he>>5&224|he>>3&31;ae[le++]=de,ae[le++]=he}}function zt(C,O,Y,ae,le){for(Y=O+Y;O<Y;){var de=C[O++];ae[le++]=de>>0&255,ae[le++]=de>>8&255,ae[le++]=de>>16&255}}function tr(C,O,Y,ae,le,de){if(de==0)for(Y=O+Y;O<Y;)Ce(ae,((de=C[O++])[0]>>24|de[1]>>8&65280|de[2]<<8&16711680|de[3]<<24)>>>0),le+=32;else n(ae,le,C,O,Y)}function Hr(C,O){y[O][0]=y[C+"0"],y[O][1]=y[C+"1"],y[O][2]=y[C+"2"],y[O][3]=y[C+"3"],y[O][4]=y[C+"4"],y[O][5]=y[C+"5"],y[O][6]=y[C+"6"],y[O][7]=y[C+"7"],y[O][8]=y[C+"8"],y[O][9]=y[C+"9"],y[O][10]=y[C+"10"],y[O][11]=y[C+"11"],y[O][12]=y[C+"12"],y[O][13]=y[C+"13"],y[O][14]=y[C+"0"],y[O][15]=y[C+"0"]}function or(C){return C==rh||C==pu||C==wc||C==yd}function mn(){this.eb=[],this.size=this.A=this.fb=0}function Lr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function En(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new mn,this.f.kb=new Lr,this.sd=null}function Vn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ar(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Jt(C){return alert("todo:WebPSamplerProcessPlane"),C.T}function Mr(C,O){var Y=C.T,ae=O.ba.f.RGBA,le=ae.eb,de=ae.fb+C.ka*ae.A,he=bs[O.ba.S],pe=C.y,ve=C.O,Se=C.f,Ue=C.N,tt=C.ea,Je=C.W,Ke=O.cc,bt=O.dc,lt=O.Mc,Pe=O.Nc,Qe=C.ka,ht=C.ka+C.T,wt=C.U,gt=wt+1>>1;for(Qe==0?he(pe,ve,null,null,Se,Ue,tt,Je,Se,Ue,tt,Je,le,de,null,null,wt):(he(O.ec,O.fc,pe,ve,Ke,bt,lt,Pe,Se,Ue,tt,Je,le,de-ae.A,le,de,wt),++Y);Qe+2<ht;Qe+=2)Ke=Se,bt=Ue,lt=tt,Pe=Je,Ue+=C.Rc,Je+=C.Rc,de+=2*ae.A,he(pe,(ve+=2*C.fa)-C.fa,pe,ve,Ke,bt,lt,Pe,Se,Ue,tt,Je,le,de-ae.A,le,de,wt);return ve+=C.fa,C.j+ht<C.o?(n(O.ec,O.fc,pe,ve,wt),n(O.cc,O.dc,Se,Ue,gt),n(O.Mc,O.Nc,tt,Je,gt),Y--):1&ht||he(pe,ve,null,null,Se,Ue,tt,Je,Se,Ue,tt,Je,le,de+ae.A,null,null,wt),Y}function ms(C,O,Y){var ae=C.F,le=[C.J];if(ae!=null){var de=C.U,he=O.ba.S,pe=he==xA||he==wc;O=O.ba.f.RGBA;var ve=[0],Se=C.ka;ve[0]=C.T,C.Kb&&(Se==0?--ve[0]:(--Se,le[0]-=C.width),C.j+C.ka+C.T==C.o&&(ve[0]=C.o-C.j-Se));var Ue=O.eb;Se=O.fb+Se*O.A,C=Jr(ae,le[0],C.width,de,ve,Ue,Se+(pe?0:3),O.A),t(Y==ve),C&&or(he)&&io(Ue,Se,pe,de,ve,O.A)}return 0}function Zn(C){var O=C.ma,Y=O.ba.S,ae=11>Y,le=Y==wd||Y==th||Y==xA||Y==bc||Y==12||or(Y);if(O.memory=null,O.Ib=null,O.Jb=null,O.Nd=null,!su(O.Oa,C,le?11:12))return 0;if(le&&or(Y)&&Nt(),C.da)alert("todo:use_scaling");else{if(ae){if(O.Ib=Jt,C.Kb){if(Y=C.U+1>>1,O.memory=s(C.U+2*Y),O.memory==null)return 0;O.ec=O.memory,O.fc=0,O.cc=O.ec,O.dc=O.fc+C.U,O.Mc=O.cc,O.Nc=O.dc+Y,O.Ib=Mr,Nt()}}else alert("todo:EmitYUV");le&&(O.Jb=ms,ae&&Ge())}if(ae&&!rv){for(C=0;256>C;++C)ME[C]=89858*(C-128)+rs>>Pl,sh[C]=-22014*(C-128)+rs,Pp[C]=-45773*(C-128),ns[C]=113618*(C-128)+rs>>Pl;for(C=vu;C<T0;++C)O=76283*(C-16)+rs>>Pl,ih[C-vu]=Bn(O,255),Mp[C-vu]=Bn(O+8>>4,15);rv=1}return 1}function _a(C){var O=C.ma,Y=C.U,ae=C.T;return t(!(1&C.ka)),0>=Y||0>=ae?0:(Y=O.Ib(C,O),O.Jb!=null&&O.Jb(C,O,Y),O.Dc+=Y,1)}function js(C){C.ma.memory=null}function Kt(C,O,Y,ae){return z(C,8)!=47?0:(O[0]=z(C,14)+1,Y[0]=z(C,14)+1,ae[0]=z(C,1),z(C,3)!=0?0:!C.h)}function pn(C,O){if(4>C)return C+1;var Y=C-2>>1;return(2+(1&C)<<Y)+z(O,Y)+1}function on(C,O){return 120<O?O-120:1<=(Y=((Y=Ec[O-1])>>4)*C+(8-(15&Y)))?Y:1;var Y}function Dn(C,O,Y){var ae=K(Y),le=C[O+=255&ae].g-8;return 0<le&&(re(Y,Y.u+8),ae=K(Y),O+=C[O].value,O+=ae&(1<<le)-1),re(Y,Y.u+C[O].g),C[O].value}function zn(C,O,Y){return Y.g+=C.g,Y.value+=C.value<<O>>>0,t(8>=Y.g),C.g}function ea(C,O,Y){var ae=C.xc;return t((O=ae==0?0:C.vc[C.md*(Y>>ae)+(O>>ae)])<C.Wb),C.Ya[O]}function Ae(C,O,Y,ae){var le=C.ab,de=C.c*O,he=C.C;O=he+O;var pe=Y,ve=ae;for(ae=C.Ta,Y=C.Ua;0<le--;){var Se=C.gc[le],Ue=he,tt=O,Je=pe,Ke=ve,bt=(ve=ae,pe=Y,Se.Ea);switch(t(Ue<tt),t(tt<=Se.nc),Se.hc){case 2:E0(Je,Ke,(tt-Ue)*bt,ve,pe);break;case 0:var lt=Ue,Pe=tt,Qe=ve,ht=pe,wt=(Vt=Se).Ea;lt==0&&(Op(Je,Ke,null,null,1,Qe,ht),Rt(Je,Ke+1,0,0,wt-1,Qe,ht+1),Ke+=wt,ht+=wt,++lt);for(var gt=1<<Vt.b,Xt=gt-1,Mt=He(wt,Vt.b),lr=Vt.K,Vt=Vt.w+(lt>>Vt.b)*Mt;lt<Pe;){var vn=lr,kn=Vt,Xr=1;for(Zf(Je,Ke,Qe,ht-wt,1,Qe,ht);Xr<wt;){var Gr=(Xr&~Xt)+gt;Gr>wt&&(Gr=wt),(0,gc[vn[kn++]>>8&15])(Je,Ke+ +Xr,Qe,ht+Xr-wt,Gr-Xr,Qe,ht+Xr),Xr=Gr}Ke+=wt,ht+=wt,++lt&Xt||(Vt+=Mt)}tt!=Se.nc&&n(ve,pe-bt,ve,pe+(tt-Ue-1)*bt,bt);break;case 1:for(bt=Je,Pe=Ke,wt=(Je=Se.Ea)-(ht=Je&~(Qe=(Ke=1<<Se.b)-1)),lt=He(Je,Se.b),gt=Se.K,Se=Se.w+(Ue>>Se.b)*lt;Ue<tt;){for(Xt=gt,Mt=Se,lr=new Et,Vt=Pe+ht,vn=Pe+Je;Pe<Vt;)qt(Xt[Mt++],lr),lu(lr,bt,Pe,Ke,ve,pe),Pe+=Ke,pe+=Ke;Pe<vn&&(qt(Xt[Mt++],lr),lu(lr,bt,Pe,wt,ve,pe),Pe+=wt,pe+=wt),++Ue&Qe||(Se+=lt)}break;case 3:if(Je==ve&&Ke==pe&&0<Se.b){for(Pe=ve,Je=bt=pe+(tt-Ue)*bt-(ht=(tt-Ue)*He(Se.Ea,Se.b)),Ke=ve,Qe=pe,lt=[],ht=(wt=ht)-1;0<=ht;--ht)lt[ht]=Ke[Qe+ht];for(ht=wt-1;0<=ht;--ht)Pe[Je+ht]=lt[ht];So(Se,Ue,tt,ve,bt,ve,pe)}else So(Se,Ue,tt,Je,Ke,ve,pe)}pe=ae,ve=Y}ve!=Y&&n(ae,Y,pe,ve,de)}function Ne(C,O){var Y=C.V,ae=C.Ba+C.c*C.C,le=O-C.C;if(t(O<=C.l.o),t(16>=le),0<le){var de=C.l,he=C.Ta,pe=C.Ua,ve=de.width;if(Ae(C,le,Y,ae),le=pe=[pe],t((Y=C.C)<(ae=O)),t(de.v<de.va),ae>de.o&&(ae=de.o),Y<de.j){var Se=de.j-Y;Y=de.j,le[0]+=Se*ve}if(Y>=ae?Y=0:(le[0]+=4*de.v,de.ka=Y-de.j,de.U=de.va-de.v,de.T=ae-Y,Y=1),Y){if(pe=pe[0],11>(Y=C.ca).S){var Ue=Y.f.RGBA,tt=(ae=Y.S,le=de.U,de=de.T,Se=Ue.eb,Ue.A),Je=de;for(Ue=Ue.fb+C.Ma*Ue.A;0<Je--;){var Ke=he,bt=pe,lt=le,Pe=Se,Qe=Ue;switch(ae){case Ws:ci(Ke,bt,lt,Pe,Qe);break;case wd:Us(Ke,bt,lt,Pe,Qe);break;case rh:Us(Ke,bt,lt,Pe,Qe),io(Pe,Qe,0,lt,1,0);break;case Rl:Yo(Ke,bt,lt,Pe,Qe);break;case th:tr(Ke,bt,lt,Pe,Qe,1);break;case pu:tr(Ke,bt,lt,Pe,Qe,1),io(Pe,Qe,0,lt,1,0);break;case xA:tr(Ke,bt,lt,Pe,Qe,0);break;case wc:tr(Ke,bt,lt,Pe,Qe,0),io(Pe,Qe,1,lt,1,0);break;case bc:cu(Ke,bt,lt,Pe,Qe);break;case yd:cu(Ke,bt,lt,Pe,Qe),Yr(Pe,Qe,lt,1,0);break;case _0:Fi(Ke,bt,lt,Pe,Qe);break;default:t(0)}pe+=ve,Ue+=tt}C.Ma+=de}else alert("todo:EmitRescaledRowsYUVA");t(C.Ma<=Y.height)}}C.C=O,t(C.C<=C.i)}function ye(C){var O;if(0<C.ua)return 0;for(O=0;O<C.Wb;++O){var Y=C.Ya[O].G,ae=C.Ya[O].H;if(0<Y[1][ae[1]+0].g||0<Y[2][ae[2]+0].g||0<Y[3][ae[3]+0].g)return 0}return 1}function Ee(C,O,Y,ae,le,de){if(C.Z!=0){var he=C.qd,pe=C.rd;for(t(Ol[C.Z]!=null);O<Y;++O)Ol[C.Z](he,pe,ae,le,ae,le,de),he=ae,pe=le,le+=de;C.qd=he,C.rd=pe}}function _e(C,O){var Y=C.l.ma,ae=Y.Z==0||Y.Z==1?C.l.j:C.C;if(ae=C.C<ae?ae:C.C,t(O<=C.l.o),O>ae){var le=C.l.width,de=Y.ca,he=Y.tb+le*ae,pe=C.V,ve=C.Ba+C.c*ae,Se=C.gc;t(C.ab==1),t(Se[0].hc==3),ou(Se[0],ae,O,pe,ve,de,he),Ee(Y,ae,O,de,he,le)}C.C=C.Ma=O}function Be(C,O,Y,ae,le,de,he){var pe=C.$/ae,ve=C.$%ae,Se=C.m,Ue=C.s,tt=Y+C.$,Je=tt;le=Y+ae*le;var Ke=Y+ae*de,bt=280+Ue.ua,lt=C.Pb?pe:16777216,Pe=0<Ue.ua?Ue.Wa:null,Qe=Ue.wc,ht=tt<Ke?ea(Ue,ve,pe):null;t(C.C<de),t(Ke<=le);var wt=!1;e:for(;;){for(;wt||tt<Ke;){var gt=0;if(pe>=lt){var Xt=tt-Y;t((lt=C).Pb),lt.wd=lt.m,lt.xd=Xt,0<lt.s.ua&&Te(lt.s.Wa,lt.s.vb),lt=pe+Z1}if(ve&Qe||(ht=ea(Ue,ve,pe)),t(ht!=null),ht.Qb&&(O[tt]=ht.qb,wt=!0),!wt)if(ne(Se),ht.jc){gt=Se,Xt=O;var Mt=tt,lr=ht.pd[K(gt)&es-1];t(ht.jc),256>lr.g?(re(gt,gt.u+lr.g),Xt[Mt]=lr.value,gt=0):(re(gt,gt.u+lr.g-256),t(256<=lr.value),gt=lr.value),gt==0&&(wt=!0)}else gt=Dn(ht.G[0],ht.H[0],Se);if(Se.h)break;if(wt||256>gt){if(!wt)if(ht.nd)O[tt]=(ht.qb|gt<<8)>>>0;else{if(ne(Se),wt=Dn(ht.G[1],ht.H[1],Se),ne(Se),Xt=Dn(ht.G[2],ht.H[2],Se),Mt=Dn(ht.G[3],ht.H[3],Se),Se.h)break;O[tt]=(Mt<<24|wt<<16|gt<<8|Xt)>>>0}if(wt=!1,++tt,++ve>=ae&&(ve=0,++pe,he!=null&&pe<=de&&!(pe%16)&&he(C,pe),Pe!=null))for(;Je<tt;)gt=O[Je++],Pe.X[(506832829*gt&4294967295)>>>Pe.Mb]=gt}else if(280>gt){if(gt=pn(gt-256,Se),Xt=Dn(ht.G[4],ht.H[4],Se),ne(Se),Xt=on(ae,Xt=pn(Xt,Se)),Se.h)break;if(tt-Y<Xt||le-tt<gt)break e;for(Mt=0;Mt<gt;++Mt)O[tt+Mt]=O[tt+Mt-Xt];for(tt+=gt,ve+=gt;ve>=ae;)ve-=ae,++pe,he!=null&&pe<=de&&!(pe%16)&&he(C,pe);if(t(tt<=le),ve&Qe&&(ht=ea(Ue,ve,pe)),Pe!=null)for(;Je<tt;)gt=O[Je++],Pe.X[(506832829*gt&4294967295)>>>Pe.Mb]=gt}else{if(!(gt<bt))break e;for(wt=gt-280,t(Pe!=null);Je<tt;)gt=O[Je++],Pe.X[(506832829*gt&4294967295)>>>Pe.Mb]=gt;gt=tt,t(!(wt>>>(Xt=Pe).Xa)),O[gt]=Xt.X[wt],wt=!0}wt||t(Se.h==X(Se))}if(C.Pb&&Se.h&&tt<le)t(C.m.h),C.a=5,C.m=C.wd,C.$=C.xd,0<C.s.ua&&Te(C.s.vb,C.s.Wa);else{if(Se.h)break e;he!=null&&he(C,pe>de?de:pe),C.a=0,C.$=tt-Y}return 1}return C.a=3,0}function $e(C){t(C!=null),C.vc=null,C.yc=null,C.Ya=null;var O=C.Wa;O!=null&&(O.X=null),C.vb=null,t(C!=null)}function st(){var C=new pd;return C==null?null:(C.a=0,C.xb=Ed,Hr("Predictor","VP8LPredictors"),Hr("Predictor","VP8LPredictors_C"),Hr("PredictorAdd","VP8LPredictorsAdd"),Hr("PredictorAdd","VP8LPredictorsAdd_C"),E0=Ut,lu=De,ci=ke,Us=We,cu=ft,Fi=$t,Yo=zt,y.VP8LMapColor32b=xs,y.VP8LMapColor8b=eh,C)}function ze(C,O,Y,ae,le){var de=1,he=[C],pe=[O],ve=ae.m,Se=ae.s,Ue=null,tt=0;e:for(;;){if(Y)for(;de&&z(ve,1);){var Je=he,Ke=pe,bt=ae,lt=1,Pe=bt.m,Qe=bt.gc[bt.ab],ht=z(Pe,2);if(bt.Oc&1<<ht)de=0;else{switch(bt.Oc|=1<<ht,Qe.hc=ht,Qe.Ea=Je[0],Qe.nc=Ke[0],Qe.K=[null],++bt.ab,t(4>=bt.ab),ht){case 0:case 1:Qe.b=z(Pe,3)+2,lt=ze(He(Qe.Ea,Qe.b),He(Qe.nc,Qe.b),0,bt,Qe.K),Qe.K=Qe.K[0];break;case 3:var wt,gt=z(Pe,8)+1,Xt=16<gt?0:4<gt?1:2<gt?2:3;if(Je[0]=He(Qe.Ea,Xt),Qe.b=Xt,wt=lt=ze(gt,1,0,bt,Qe.K)){var Mt,lr=gt,Vt=Qe,vn=1<<(8>>Vt.b),kn=s(vn);if(kn==null)wt=0;else{var Xr=Vt.K[0],Gr=Vt.w;for(kn[0]=Vt.K[0][0],Mt=1;Mt<1*lr;++Mt)kn[Mt]=Xe(Xr[Gr+Mt],kn[Mt-1]);for(;Mt<4*vn;++Mt)kn[Mt]=0;Vt.K[0]=null,Vt.K[0]=kn,wt=1}}lt=wt;break;case 2:break;default:t(0)}de=lt}}if(he=he[0],pe=pe[0],de&&z(ve,1)&&!(de=1<=(tt=z(ve,4))&&11>=tt)){ae.a=3;break e}var On;if(On=de)t:{var Tn,Rr,Kn,gr=ae,Nr=he,xn=pe,bn=tt,ws=Y,as=gr.m,Ba=gr.s,ka=[null],Ma=1,To=0,In=bA[bn];r:for(;;){if(ws&&z(as,1)){var Qa=z(as,3)+2,el=He(Nr,Qa),bu=He(xn,Qa),EA=el*bu;if(!ze(el,bu,0,gr,ka))break r;for(ka=ka[0],Ba.xc=Qa,Tn=0;Tn<EA;++Tn){var wu=ka[Tn]>>8&65535;ka[Tn]=wu,wu>=Ma&&(Ma=wu+1)}}if(as.h)break r;for(Rr=0;5>Rr;++Rr){var ua=oo[Rr];!Rr&&0<bn&&(ua+=1<<bn),To<ua&&(To=ua)}var oh=i(Ma*In,F),I0=Ma,Ai=i(I0,M);if(Ai==null)var ma=null;else t(65536>=I0),ma=Ai;var CA=s(To);if(ma==null||CA==null||oh==null){gr.a=1;break r}var yu=oh;for(Tn=Kn=0;Tn<Ma;++Tn){var Di=ma[Tn],Eu=Di.G,Ri=Di.H,lh=0,_d=1,F0=0;for(Rr=0;5>Rr;++Rr){ua=oo[Rr],Eu[Rr]=yu,Ri[Rr]=Kn,!Rr&&0<bn&&(ua+=1<<bn);a:{var ch,j0=ua,uh=gr,Sd=CA,sv=yu,iv=Kn,Ah=0,Nc=uh.m,HE=z(Nc,1);if(a(Sd,0,0,j0),HE){var ov=z(Nc,1)+1,lv=z(Nc,1),Qp=z(Nc,lv==0?1:8);Sd[Qp]=1,ov==2&&(Sd[Qp=z(Nc,8)]=1);var Nd=1}else{var Hp=s(19),Vp=z(Nc,4)+4;if(19<Vp){uh.a=3;var dh=0;break a}for(ch=0;ch<Vp;++ch)Hp[yc[ch]]=z(Nc,3);var D0=void 0,Bd=void 0,cv=uh,uv=Hp,Bc=j0,fh=Sd,R0=0,tl=cv.m,kd=8,zp=i(128,F);n:for(;j(zp,0,7,uv,19);){if(z(tl,1)){var Av=2+2*z(tl,3);if((D0=2+z(tl,Av))>Bc)break n}else D0=Bc;for(Bd=0;Bd<Bc&&D0--;){ne(tl);var Gp=zp[0+(127&K(tl))];re(tl,tl.u+Gp.g);var _A=Gp.value;if(16>_A)fh[Bd++]=_A,_A!=0&&(kd=_A);else{var dv=_A==16,Kp=_A-16,qp=ko[Kp],$p=z(tl,S0[Kp])+qp;if(Bd+$p>Bc)break n;for(var fv=dv?kd:0;0<$p--;)fh[Bd++]=fv}}R0=1;break n}R0||(cv.a=3),Nd=R0}(Nd=Nd&&!Nc.h)&&(Ah=j(sv,iv,8,Sd,j0)),Nd&&Ah!=0?dh=Ah:(uh.a=3,dh=0)}if(dh==0)break r;if(_d&&vA[Rr]==1&&(_d=yu[Kn].g==0),lh+=yu[Kn].g,Kn+=dh,3>=Rr){var SA,L0=CA[0];for(SA=1;SA<ua;++SA)CA[SA]>L0&&(L0=CA[SA]);F0+=L0}}if(Di.nd=_d,Di.Qb=0,_d&&(Di.qb=(Eu[3][Ri[3]+0].value<<24|Eu[1][Ri[1]+0].value<<16|Eu[2][Ri[2]+0].value)>>>0,lh==0&&256>Eu[0][Ri[0]+0].value&&(Di.Qb=1,Di.qb+=Eu[0][Ri[0]+0].value<<8)),Di.jc=!Di.Qb&&6>F0,Di.jc){var hh,kc=Di;for(hh=0;hh<es;++hh){var Ml=hh,Tc=kc.pd[Ml],mh=kc.G[0][kc.H[0]+Ml];256<=mh.value?(Tc.g=mh.g+256,Tc.value=mh.value):(Tc.g=0,Tc.value=0,Ml>>=zn(mh,8,Tc),Ml>>=zn(kc.G[1][kc.H[1]+Ml],16,Tc),Ml>>=zn(kc.G[2][kc.H[2]+Ml],0,Tc),zn(kc.G[3][kc.H[3]+Ml],24,Tc))}}}Ba.vc=ka,Ba.Wb=Ma,Ba.Ya=ma,Ba.yc=oh,On=1;break t}On=0}if(!(de=On)){ae.a=3;break e}if(0<tt){if(Se.ua=1<<tt,!Ye(Se.Wa,tt)){ae.a=1,de=0;break e}}else Se.ua=0;var ph=ae,Wp=he,hv=pe,Xp=ph.s,Yp=Xp.xc;if(ph.c=Wp,ph.i=hv,Xp.md=He(Wp,Yp),Xp.wc=Yp==0?-1:(1<<Yp)-1,Y){ae.xb=tv;break e}if((Ue=s(he*pe))==null){ae.a=1,de=0;break e}de=(de=Be(ae,Ue,0,he,pe,pe,null))&&!ve.h;break e}return de?(le!=null?le[0]=Ue:(t(Ue==null),t(Y)),ae.$=0,Y||$e(Se)):$e(Se),de}function Ze(C,O){var Y=C.c*C.i,ae=Y+O+16*O;return t(C.c<=O),C.V=s(ae),C.V==null?(C.Ta=null,C.Ua=0,C.a=1,0):(C.Ta=C.V,C.Ua=C.Ba+Y+O,1)}function rt(C,O){var Y=C.C,ae=O-Y,le=C.V,de=C.Ba+C.c*Y;for(t(O<=C.l.o);0<ae;){var he=16<ae?16:ae,pe=C.l.ma,ve=C.l.width,Se=ve*he,Ue=pe.ca,tt=pe.tb+ve*Y,Je=C.Ta,Ke=C.Ua;Ae(C,he,le,de),ra(Je,Ke,Ue,tt,Se),Ee(pe,Y,Y+he,Ue,tt,ve),ae-=he,le+=he*C.c,Y+=he}t(Y==O),C.C=C.Ma=O}function yt(){this.ub=this.yd=this.td=this.Rb=0}function It(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Qt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Tt(){this.Yb=function(){var C=[];return function O(Y,ae,le){for(var de=le[ae],he=0;he<de&&(Y.push(le.length>ae+1?[]:0),!(le.length<ae+1));he++)O(Y[he],ae+1,le)}(C,0,[3,11]),C}()}function Lt(){this.jb=s(3),this.Wc=o([4,8],Tt),this.Xc=o([4,17],Tt)}function pr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Vr(){this.ld=this.La=this.dd=this.tc=0}function zr(){this.Na=this.la=0}function Wr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ra(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function _i(){this.uc=this.M=this.Nb=0,this.wa=Array(new Vr),this.Y=0,this.ya=Array(new Ra),this.aa=0,this.l=new Za}function La(){this.y=s(16),this.f=s(8),this.ea=s(8)}function ps(){this.cb=this.a=0,this.sc="",this.m=new Z,this.Od=new yt,this.Kc=new It,this.ed=new pr,this.Qa=new Qt,this.Ic=this.$c=this.Aa=0,this.D=new _i,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,Z),this.ia=0,this.pb=i(4,Wr),this.Pa=new Lt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new La),this.Hd=0,this.rb=Array(new zr),this.sb=0,this.wa=Array(new Vr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ra),this.L=this.aa=0,this.gd=o([4,2],Vr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Za(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ds(){var C=new ps;return C!=null&&(C.a=0,C.sc="OK",C.cb=0,C.Xb=0,ts||(ts=dd)),C}function ta(C,O,Y){return C.a==0&&(C.a=O,C.sc=Y,C.cb=0),0}function gs(C,O,Y){return 3<=Y&&C[O+0]==157&&C[O+1]==1&&C[O+2]==42}function Jc(C,O){if(C==null)return 0;if(C.a=0,C.sc="OK",O==null)return ta(C,2,"null VP8Io passed to VP8GetHeaders()");var Y=O.data,ae=O.w,le=O.ha;if(4>le)return ta(C,7,"Truncated header.");var de=Y[ae+0]|Y[ae+1]<<8|Y[ae+2]<<16,he=C.Od;if(he.Rb=!(1&de),he.td=de>>1&7,he.yd=de>>4&1,he.ub=de>>5,3<he.td)return ta(C,3,"Incorrect keyframe parameters.");if(!he.yd)return ta(C,4,"Frame not displayable.");ae+=3,le-=3;var pe=C.Kc;if(he.Rb){if(7>le)return ta(C,7,"cannot parse picture header");if(!gs(Y,ae,le))return ta(C,3,"Bad code word");pe.c=16383&(Y[ae+4]<<8|Y[ae+3]),pe.Td=Y[ae+4]>>6,pe.i=16383&(Y[ae+6]<<8|Y[ae+5]),pe.Ud=Y[ae+6]>>6,ae+=7,le-=7,C.za=pe.c+15>>4,C.Ub=pe.i+15>>4,O.width=pe.c,O.height=pe.i,O.Da=0,O.j=0,O.v=0,O.va=O.width,O.o=O.height,O.da=0,O.ib=O.width,O.hb=O.height,O.U=O.width,O.T=O.height,a((de=C.Pa).jb,0,255,de.jb.length),t((de=C.Qa)!=null),de.Cb=0,de.Bb=0,de.Fb=1,a(de.Zb,0,0,de.Zb.length),a(de.Lb,0,0,de.Lb)}if(he.ub>le)return ta(C,7,"bad partition length");ee(de=C.m,Y,ae,he.ub),ae+=he.ub,le-=he.ub,he.Rb&&(pe.Ld=fe(de),pe.Kd=fe(de)),pe=C.Qa;var ve,Se=C.Pa;if(t(de!=null),t(pe!=null),pe.Cb=fe(de),pe.Cb){if(pe.Bb=fe(de),fe(de)){for(pe.Fb=fe(de),ve=0;4>ve;++ve)pe.Zb[ve]=fe(de)?te(de,7):0;for(ve=0;4>ve;++ve)pe.Lb[ve]=fe(de)?te(de,6):0}if(pe.Bb)for(ve=0;3>ve;++ve)Se.jb[ve]=fe(de)?W(de,8):255}else pe.Bb=0;if(de.Ka)return ta(C,3,"cannot parse segment header");if((pe=C.ed).zd=fe(de),pe.Tb=W(de,6),pe.wb=W(de,3),pe.Pc=fe(de),pe.Pc&&fe(de)){for(Se=0;4>Se;++Se)fe(de)&&(pe.vd[Se]=te(de,6));for(Se=0;4>Se;++Se)fe(de)&&(pe.od[Se]=te(de,6))}if(C.L=pe.Tb==0?0:pe.zd?1:2,de.Ka)return ta(C,3,"cannot parse filter header");var Ue=le;if(le=ve=ae,ae=ve+Ue,pe=Ue,C.Xb=(1<<W(C.m,2))-1,Ue<3*(Se=C.Xb))Y=7;else{for(ve+=3*Se,pe-=3*Se,Ue=0;Ue<Se;++Ue){var tt=Y[le+0]|Y[le+1]<<8|Y[le+2]<<16;tt>pe&&(tt=pe),ee(C.Jc[+Ue],Y,ve,tt),ve+=tt,pe-=tt,le+=3}ee(C.Jc[+Se],Y,ve,pe),Y=ve<ae?0:5}if(Y!=0)return ta(C,Y,"cannot parse partitions");for(Y=W(ve=C.m,7),le=fe(ve)?te(ve,4):0,ae=fe(ve)?te(ve,4):0,pe=fe(ve)?te(ve,4):0,Se=fe(ve)?te(ve,4):0,ve=fe(ve)?te(ve,4):0,Ue=C.Qa,tt=0;4>tt;++tt){if(Ue.Cb){var Je=Ue.Zb[tt];Ue.Fb||(Je+=Y)}else{if(0<tt){C.pb[tt]=C.pb[0];continue}Je=Y}var Ke=C.pb[tt];Ke.Sc[0]=nh[Bn(Je+le,127)],Ke.Sc[1]=ah[Bn(Je+0,127)],Ke.Eb[0]=2*nh[Bn(Je+ae,127)],Ke.Eb[1]=101581*ah[Bn(Je+pe,127)]>>16,8>Ke.Eb[1]&&(Ke.Eb[1]=8),Ke.Qc[0]=nh[Bn(Je+Se,117)],Ke.Qc[1]=ah[Bn(Je+ve,127)],Ke.lc=Je+ve}if(!he.Rb)return ta(C,4,"Not a key frame.");for(fe(de),he=C.Pa,Y=0;4>Y;++Y){for(le=0;8>le;++le)for(ae=0;3>ae;++ae)for(pe=0;11>pe;++pe)Se=be(de,wA[Y][le][ae][pe])?W(de,8):Ll[Y][le][ae][pe],he.Wc[Y][le].Yb[ae][pe]=Se;for(le=0;17>le;++le)he.Xc[Y][le]=he.Wc[Y][ev[le]]}return C.kc=fe(de),C.kc&&(C.Bd=W(de,8)),C.cb=1}function dd(C,O,Y,ae,le,de,he){var pe=O[le].Yb[Y];for(Y=0;16>le;++le){if(!be(C,pe[Y+0]))return le;for(;!be(C,pe[Y+1]);)if(pe=O[++le].Yb[0],Y=0,le==16)return 16;var ve=O[le+1].Yb;if(be(C,pe[Y+2])){var Se=C,Ue=0;if(be(Se,(Je=pe)[(tt=Y)+3]))if(be(Se,Je[tt+6])){for(pe=0,tt=2*(Ue=be(Se,Je[tt+8]))+(Je=be(Se,Je[tt+9+Ue])),Ue=0,Je=ya[tt];Je[pe];++pe)Ue+=Ue+be(Se,Je[pe]);Ue+=3+(8<<tt)}else be(Se,Je[tt+7])?(Ue=7+2*be(Se,165),Ue+=be(Se,145)):Ue=5+be(Se,159);else Ue=be(Se,Je[tt+4])?3+be(Se,Je[tt+5]):2;pe=ve[2]}else Ue=1,pe=ve[1];ve=he+Cn[le],0>(Se=C).b&&ue(Se);var tt,Je=Se.b,Ke=(tt=Se.Ca>>1)-(Se.I>>Je)>>31;--Se.b,Se.Ca+=Ke,Se.Ca|=1,Se.I-=(tt+1&Ke)<<Je,de[ve]=((Ue^Ke)-Ke)*ae[(0<le)+0]}return 16}function wl(C){var O=C.rb[C.sb-1];O.la=0,O.Na=0,a(C.zc,0,0,C.zc.length),C.ja=0}function sA(C,O){if(C==null)return 0;if(O==null)return ta(C,2,"NULL VP8Io parameter in VP8Decode().");if(!C.cb&&!Jc(C,O))return 0;if(t(C.cb),O.ac==null||O.ac(O)){O.ob&&(C.L=0);var Y=Sc[C.L];if(C.L==2?(C.yb=0,C.zb=0):(C.yb=O.v-Y>>4,C.zb=O.j-Y>>4,0>C.yb&&(C.yb=0),0>C.zb&&(C.zb=0)),C.Va=O.o+15+Y>>4,C.Hb=O.va+15+Y>>4,C.Hb>C.za&&(C.Hb=C.za),C.Va>C.Ub&&(C.Va=C.Ub),0<C.L){var ae=C.ed;for(Y=0;4>Y;++Y){var le;if(C.Qa.Cb){var de=C.Qa.Lb[Y];C.Qa.Fb||(de+=ae.Tb)}else de=ae.Tb;for(le=0;1>=le;++le){var he=C.gd[Y][le],pe=de;if(ae.Pc&&(pe+=ae.vd[0],le&&(pe+=ae.od[0])),0<(pe=0>pe?0:63<pe?63:pe)){var ve=pe;0<ae.wb&&(ve=4<ae.wb?ve>>2:ve>>1)>9-ae.wb&&(ve=9-ae.wb),1>ve&&(ve=1),he.dd=ve,he.tc=2*pe+ve,he.ld=40<=pe?2:15<=pe?1:0}else he.tc=0;he.La=le}}}Y=0}else ta(C,6,"Frame setup failed"),Y=C.a;if(Y=Y==0){if(Y){C.$c=0,0<C.Aa||(C.Ic=nv);e:{Y=C.Ic,ae=4*(ve=C.za);var Se=32*ve,Ue=ve+1,tt=0<C.L?ve*(0<C.Aa?2:1):0,Je=(C.Aa==2?2:1)*ve;if((he=ae+832+(le=3*(16*Y+Sc[C.L])/2*Se)+(de=C.Fa!=null&&0<C.Fa.length?C.Kc.c*C.Kc.i:0))!=he)Y=0;else{if(he>C.Vb){if(C.Vb=0,C.Ec=s(he),C.Fc=0,C.Ec==null){Y=ta(C,1,"no memory during frame initialization.");break e}C.Vb=he}he=C.Ec,pe=C.Fc,C.Ac=he,C.Bc=pe,pe+=ae,C.Gd=i(Se,La),C.Hd=0,C.rb=i(Ue+1,zr),C.sb=1,C.wa=tt?i(tt,Vr):null,C.Y=0,C.D.Nb=0,C.D.wa=C.wa,C.D.Y=C.Y,0<C.Aa&&(C.D.Y+=ve),t(!0),C.oc=he,C.pc=pe,pe+=832,C.ya=i(Je,Ra),C.aa=0,C.D.ya=C.ya,C.D.aa=C.aa,C.Aa==2&&(C.D.aa+=ve),C.R=16*ve,C.B=8*ve,ve=(Se=Sc[C.L])*C.R,Se=Se/2*C.B,C.sa=he,C.ta=pe+ve,C.qa=C.sa,C.ra=C.ta+16*Y*C.R+Se,C.Ha=C.qa,C.Ia=C.ra+8*Y*C.B+Se,C.$c=0,pe+=le,C.mb=de?he:null,C.nb=de?pe:null,t(pe+de<=C.Fc+C.Vb),wl(C),a(C.Ac,C.Bc,0,ae),Y=1}}if(Y){if(O.ka=0,O.y=C.sa,O.O=C.ta,O.f=C.qa,O.N=C.ra,O.ea=C.Ha,O.Vd=C.Ia,O.fa=C.R,O.Rc=C.B,O.F=null,O.J=0,!vc){for(Y=-255;255>=Y;++Y)Na[255+Y]=0>Y?-Y:Y;for(Y=-1020;1020>=Y;++Y)No[1020+Y]=-128>Y?-128:127<Y?127:Y;for(Y=-112;112>=Y;++Y)hu[112+Y]=-16>Y?-16:15<Y?15:Y;for(Y=-255;510>=Y;++Y)mu[255+Y]=0>Y?0:255<Y?255:Y;vc=1}jl=Si,Jo=El,Zo=xo,Pa=Nn,ji=Cl,ba=yl,hA=Bl,Dl=Wo,vd=ru,uu=uA,Au=tu,du=dc,mA=fc,bd=kl,fu=so,xc=qs,pA=Ua,wa=md,ui[0]=Gs,ui[1]=fd,ui[2]=wo,ui[3]=hd,ui[4]=Ni,ui[5]=yo,ui[6]=li,ui[7]=Bi,ui[8]=$o,ui[9]=_l,Cc[0]=vo,Cc[1]=oA,Cc[2]=Go,Cc[3]=eu,Cc[4]=Gn,Cc[5]=qo,Cc[6]=bo,lo[0]=Eo,lo[1]=iA,lo[2]=lA,lo[3]=ki,lo[4]=tn,lo[5]=Oa,lo[6]=Sl,Y=1}else Y=0}Y&&(Y=function(Ke,bt){for(Ke.M=0;Ke.M<Ke.Va;++Ke.M){var lt,Pe=Ke.Jc[Ke.M&Ke.Xb],Qe=Ke.m,ht=Ke;for(lt=0;lt<ht.za;++lt){var wt=Qe,gt=ht,Xt=gt.Ac,Mt=gt.Bc+4*lt,lr=gt.zc,Vt=gt.ya[gt.aa+lt];if(gt.Qa.Bb?Vt.$b=be(wt,gt.Pa.jb[0])?2+be(wt,gt.Pa.jb[2]):be(wt,gt.Pa.jb[1]):Vt.$b=0,gt.kc&&(Vt.Ad=be(wt,gt.Bd)),Vt.Za=!be(wt,145)+0,Vt.Za){var vn=Vt.Ob,kn=0;for(gt=0;4>gt;++gt){var Xr,Gr=lr[0+gt];for(Xr=0;4>Xr;++Xr){Gr=Up[Xt[Mt+Xr]][Gr];for(var On=gu[be(wt,Gr[0])];0<On;)On=gu[2*On+be(wt,Gr[On])];Gr=-On,Xt[Mt+Xr]=Gr}n(vn,kn,Xt,Mt,4),kn+=4,lr[0+gt]=Gr}}else Gr=be(wt,156)?be(wt,128)?1:3:be(wt,163)?2:0,Vt.Ob[0]=Gr,a(Xt,Mt,Gr,4),a(lr,0,Gr,4);Vt.Dd=be(wt,142)?be(wt,114)?be(wt,183)?1:3:2:0}if(ht.m.Ka)return ta(Ke,7,"Premature end-of-partition0 encountered.");for(;Ke.ja<Ke.za;++Ke.ja){if(ht=Pe,wt=(Qe=Ke).rb[Qe.sb-1],Xt=Qe.rb[Qe.sb+Qe.ja],lt=Qe.ya[Qe.aa+Qe.ja],Mt=Qe.kc?lt.Ad:0)wt.la=Xt.la=0,lt.Za||(wt.Na=Xt.Na=0),lt.Hc=0,lt.Gc=0,lt.ia=0;else{var Tn,Rr;if(wt=Xt,Xt=ht,Mt=Qe.Pa.Xc,lr=Qe.ya[Qe.aa+Qe.ja],Vt=Qe.pb[lr.$b],gt=lr.ad,vn=0,kn=Qe.rb[Qe.sb-1],Gr=Xr=0,a(gt,vn,0,384),lr.Za)var Kn=0,gr=Mt[3];else{On=s(16);var Nr=wt.Na+kn.Na;if(Nr=ts(Xt,Mt[1],Nr,Vt.Eb,0,On,0),wt.Na=kn.Na=(0<Nr)+0,1<Nr)jl(On,0,gt,vn);else{var xn=On[0]+3>>3;for(On=0;256>On;On+=16)gt[vn+On]=xn}Kn=1,gr=Mt[0]}var bn=15&wt.la,ws=15&kn.la;for(On=0;4>On;++On){var as=1&ws;for(xn=Rr=0;4>xn;++xn)bn=bn>>1|(as=(Nr=ts(Xt,gr,Nr=as+(1&bn),Vt.Sc,Kn,gt,vn))>Kn)<<7,Rr=Rr<<2|(3<Nr?3:1<Nr?2:gt[vn+0]!=0),vn+=16;bn>>=4,ws=ws>>1|as<<7,Xr=(Xr<<8|Rr)>>>0}for(gr=bn,Kn=ws>>4,Tn=0;4>Tn;Tn+=2){for(Rr=0,bn=wt.la>>4+Tn,ws=kn.la>>4+Tn,On=0;2>On;++On){for(as=1&ws,xn=0;2>xn;++xn)Nr=as+(1&bn),bn=bn>>1|(as=0<(Nr=ts(Xt,Mt[2],Nr,Vt.Qc,0,gt,vn)))<<3,Rr=Rr<<2|(3<Nr?3:1<Nr?2:gt[vn+0]!=0),vn+=16;bn>>=2,ws=ws>>1|as<<5}Gr|=Rr<<4*Tn,gr|=bn<<4<<Tn,Kn|=(240&ws)<<Tn}wt.la=gr,kn.la=Kn,lr.Hc=Xr,lr.Gc=Gr,lr.ia=43690&Gr?0:Vt.ia,Mt=!(Xr|Gr)}if(0<Qe.L&&(Qe.wa[Qe.Y+Qe.ja]=Qe.gd[lt.$b][lt.Za],Qe.wa[Qe.Y+Qe.ja].La|=!Mt),ht.Ka)return ta(Ke,7,"Premature end-of-file encountered.")}if(wl(Ke),Qe=bt,ht=1,lt=(Pe=Ke).D,wt=0<Pe.L&&Pe.M>=Pe.zb&&Pe.M<=Pe.Va,Pe.Aa==0)e:{if(lt.M=Pe.M,lt.uc=wt,Ti(Pe,lt),ht=1,lt=(Rr=Pe.D).Nb,wt=(Gr=Sc[Pe.L])*Pe.R,Xt=Gr/2*Pe.B,On=16*lt*Pe.R,xn=8*lt*Pe.B,Mt=Pe.sa,lr=Pe.ta-wt+On,Vt=Pe.qa,gt=Pe.ra-Xt+xn,vn=Pe.Ha,kn=Pe.Ia-Xt+xn,ws=(bn=Rr.M)==0,Xr=bn>=Pe.Va-1,Pe.Aa==2&&Ti(Pe,Rr),Rr.uc)for(as=(Nr=Pe).D.M,t(Nr.D.uc),Rr=Nr.yb;Rr<Nr.Hb;++Rr){Kn=Rr,gr=as;var Ba=(ka=(ua=Nr).D).Nb;Tn=ua.R;var ka=ka.wa[ka.Y+Kn],Ma=ua.sa,To=ua.ta+16*Ba*Tn+16*Kn,In=ka.dd,Qa=ka.tc;if(Qa!=0)if(t(3<=Qa),ua.L==1)0<Kn&&xc(Ma,To,Tn,Qa+4),ka.La&&wa(Ma,To,Tn,Qa),0<gr&&fu(Ma,To,Tn,Qa+4),ka.La&&pA(Ma,To,Tn,Qa);else{var el=ua.B,bu=ua.qa,EA=ua.ra+8*Ba*el+8*Kn,wu=ua.Ha,ua=ua.Ia+8*Ba*el+8*Kn;Ba=ka.ld,0<Kn&&(Dl(Ma,To,Tn,Qa+4,In,Ba),uu(bu,EA,wu,ua,el,Qa+4,In,Ba)),ka.La&&(du(Ma,To,Tn,Qa,In,Ba),bd(bu,EA,wu,ua,el,Qa,In,Ba)),0<gr&&(hA(Ma,To,Tn,Qa+4,In,Ba),vd(bu,EA,wu,ua,el,Qa+4,In,Ba)),ka.La&&(Au(Ma,To,Tn,Qa,In,Ba),mA(bu,EA,wu,ua,el,Qa,In,Ba))}}if(Pe.ia&&alert("todo:DitherRow"),Qe.put!=null){if(Rr=16*bn,bn=16*(bn+1),ws?(Qe.y=Pe.sa,Qe.O=Pe.ta+On,Qe.f=Pe.qa,Qe.N=Pe.ra+xn,Qe.ea=Pe.Ha,Qe.W=Pe.Ia+xn):(Rr-=Gr,Qe.y=Mt,Qe.O=lr,Qe.f=Vt,Qe.N=gt,Qe.ea=vn,Qe.W=kn),Xr||(bn-=Gr),bn>Qe.o&&(bn=Qe.o),Qe.F=null,Qe.J=null,Pe.Fa!=null&&0<Pe.Fa.length&&Rr<bn&&(Qe.J=au(Pe,Qe,Rr,bn-Rr),Qe.F=Pe.mb,Qe.F==null&&Qe.F.length==0)){ht=ta(Pe,3,"Could not decode alpha data.");break e}Rr<Qe.j&&(Gr=Qe.j-Rr,Rr=Qe.j,t(!(1&Gr)),Qe.O+=Pe.R*Gr,Qe.N+=Pe.B*(Gr>>1),Qe.W+=Pe.B*(Gr>>1),Qe.F!=null&&(Qe.J+=Qe.width*Gr)),Rr<bn&&(Qe.O+=Qe.v,Qe.N+=Qe.v>>1,Qe.W+=Qe.v>>1,Qe.F!=null&&(Qe.J+=Qe.v),Qe.ka=Rr-Qe.j,Qe.U=Qe.va-Qe.v,Qe.T=bn-Rr,ht=Qe.put(Qe))}lt+1!=Pe.Ic||Xr||(n(Pe.sa,Pe.ta-wt,Mt,lr+16*Pe.R,wt),n(Pe.qa,Pe.ra-Xt,Vt,gt+8*Pe.B,Xt),n(Pe.Ha,Pe.Ia-Xt,vn,kn+8*Pe.B,Xt))}if(!ht)return ta(Ke,6,"Output aborted.")}return 1}(C,O)),O.bc!=null&&O.bc(O),Y&=1}return Y?(C.cb=0,Y):0}function Rs(C,O,Y,ae,le){le=C[O+Y+32*ae]+(le>>3),C[O+Y+32*ae]=-256&le?0>le?0:255:le}function Zc(C,O,Y,ae,le,de){Rs(C,O,0,Y,ae+le),Rs(C,O,1,Y,ae+de),Rs(C,O,2,Y,ae-de),Rs(C,O,3,Y,ae-le)}function gn(C){return(20091*C>>16)+C}function Ls(C,O,Y,ae){var le,de=0,he=s(16);for(le=0;4>le;++le){var pe=C[O+0]+C[O+8],ve=C[O+0]-C[O+8],Se=(35468*C[O+4]>>16)-gn(C[O+12]),Ue=gn(C[O+4])+(35468*C[O+12]>>16);he[de+0]=pe+Ue,he[de+1]=ve+Se,he[de+2]=ve-Se,he[de+3]=pe-Ue,de+=4,O++}for(le=de=0;4>le;++le)pe=(C=he[de+0]+4)+he[de+8],ve=C-he[de+8],Se=(35468*he[de+4]>>16)-gn(he[de+12]),Rs(Y,ae,0,0,pe+(Ue=gn(he[de+4])+(35468*he[de+12]>>16))),Rs(Y,ae,1,0,ve+Se),Rs(Y,ae,2,0,ve-Se),Rs(Y,ae,3,0,pe-Ue),de++,ae+=32}function yl(C,O,Y,ae){var le=C[O+0]+4,de=35468*C[O+4]>>16,he=gn(C[O+4]),pe=35468*C[O+1]>>16;Zc(Y,ae,0,le+he,C=gn(C[O+1]),pe),Zc(Y,ae,1,le+de,C,pe),Zc(Y,ae,2,le-de,C,pe),Zc(Y,ae,3,le-he,C,pe)}function El(C,O,Y,ae,le){Ls(C,O,Y,ae),le&&Ls(C,O+16,Y,ae+4)}function xo(C,O,Y,ae){Jo(C,O+0,Y,ae,1),Jo(C,O+32,Y,ae+128,1)}function Nn(C,O,Y,ae){var le;for(C=C[O+0]+4,le=0;4>le;++le)for(O=0;4>O;++O)Rs(Y,ae,O,le,C)}function Cl(C,O,Y,ae){C[O+0]&&Pa(C,O+0,Y,ae),C[O+16]&&Pa(C,O+16,Y,ae+4),C[O+32]&&Pa(C,O+32,Y,ae+128),C[O+48]&&Pa(C,O+48,Y,ae+128+4)}function Si(C,O,Y,ae){var le,de=s(16);for(le=0;4>le;++le){var he=C[O+0+le]+C[O+12+le],pe=C[O+4+le]+C[O+8+le],ve=C[O+4+le]-C[O+8+le],Se=C[O+0+le]-C[O+12+le];de[0+le]=he+pe,de[8+le]=he-pe,de[4+le]=Se+ve,de[12+le]=Se-ve}for(le=0;4>le;++le)he=(C=de[0+4*le]+3)+de[3+4*le],pe=de[1+4*le]+de[2+4*le],ve=de[1+4*le]-de[2+4*le],Se=C-de[3+4*le],Y[ae+0]=he+pe>>3,Y[ae+16]=Se+ve>>3,Y[ae+32]=he-pe>>3,Y[ae+48]=Se-ve>>3,ae+=64}function zo(C,O,Y){var ae,le=O-32,de=vs,he=255-C[le-1];for(ae=0;ae<Y;++ae){var pe,ve=de,Se=he+C[O-1];for(pe=0;pe<Y;++pe)C[O+pe]=ve[Se+C[le+pe]];O+=32}}function fd(C,O){zo(C,O,4)}function iA(C,O){zo(C,O,8)}function oA(C,O){zo(C,O,16)}function Go(C,O){var Y;for(Y=0;16>Y;++Y)n(C,O+32*Y,C,O-32,16)}function eu(C,O){var Y;for(Y=16;0<Y;--Y)a(C,O,C[O-1],16),O+=32}function Ko(C,O,Y){var ae;for(ae=0;16>ae;++ae)a(O,Y+32*ae,C,16)}function vo(C,O){var Y,ae=16;for(Y=0;16>Y;++Y)ae+=C[O-1+32*Y]+C[O+Y-32];Ko(ae>>5,C,O)}function Gn(C,O){var Y,ae=8;for(Y=0;16>Y;++Y)ae+=C[O-1+32*Y];Ko(ae>>4,C,O)}function qo(C,O){var Y,ae=8;for(Y=0;16>Y;++Y)ae+=C[O+Y-32];Ko(ae>>4,C,O)}function bo(C,O){Ko(128,C,O)}function wr(C,O,Y){return C+2*O+Y+2>>2}function wo(C,O){var Y,ae=O-32;for(ae=new Uint8Array([wr(C[ae-1],C[ae+0],C[ae+1]),wr(C[ae+0],C[ae+1],C[ae+2]),wr(C[ae+1],C[ae+2],C[ae+3]),wr(C[ae+2],C[ae+3],C[ae+4])]),Y=0;4>Y;++Y)n(C,O+32*Y,ae,0,ae.length)}function hd(C,O){var Y=C[O-1],ae=C[O-1+32],le=C[O-1+64],de=C[O-1+96];Ce(C,O+0,16843009*wr(C[O-1-32],Y,ae)),Ce(C,O+32,16843009*wr(Y,ae,le)),Ce(C,O+64,16843009*wr(ae,le,de)),Ce(C,O+96,16843009*wr(le,de,de))}function Gs(C,O){var Y,ae=4;for(Y=0;4>Y;++Y)ae+=C[O+Y-32]+C[O-1+32*Y];for(ae>>=3,Y=0;4>Y;++Y)a(C,O+32*Y,ae,4)}function Ni(C,O){var Y=C[O-1+0],ae=C[O-1+32],le=C[O-1+64],de=C[O-1-32],he=C[O+0-32],pe=C[O+1-32],ve=C[O+2-32],Se=C[O+3-32];C[O+0+96]=wr(ae,le,C[O-1+96]),C[O+1+96]=C[O+0+64]=wr(Y,ae,le),C[O+2+96]=C[O+1+64]=C[O+0+32]=wr(de,Y,ae),C[O+3+96]=C[O+2+64]=C[O+1+32]=C[O+0+0]=wr(he,de,Y),C[O+3+64]=C[O+2+32]=C[O+1+0]=wr(pe,he,de),C[O+3+32]=C[O+2+0]=wr(ve,pe,he),C[O+3+0]=wr(Se,ve,pe)}function li(C,O){var Y=C[O+1-32],ae=C[O+2-32],le=C[O+3-32],de=C[O+4-32],he=C[O+5-32],pe=C[O+6-32],ve=C[O+7-32];C[O+0+0]=wr(C[O+0-32],Y,ae),C[O+1+0]=C[O+0+32]=wr(Y,ae,le),C[O+2+0]=C[O+1+32]=C[O+0+64]=wr(ae,le,de),C[O+3+0]=C[O+2+32]=C[O+1+64]=C[O+0+96]=wr(le,de,he),C[O+3+32]=C[O+2+64]=C[O+1+96]=wr(de,he,pe),C[O+3+64]=C[O+2+96]=wr(he,pe,ve),C[O+3+96]=wr(pe,ve,ve)}function yo(C,O){var Y=C[O-1+0],ae=C[O-1+32],le=C[O-1+64],de=C[O-1-32],he=C[O+0-32],pe=C[O+1-32],ve=C[O+2-32],Se=C[O+3-32];C[O+0+0]=C[O+1+64]=de+he+1>>1,C[O+1+0]=C[O+2+64]=he+pe+1>>1,C[O+2+0]=C[O+3+64]=pe+ve+1>>1,C[O+3+0]=ve+Se+1>>1,C[O+0+96]=wr(le,ae,Y),C[O+0+64]=wr(ae,Y,de),C[O+0+32]=C[O+1+96]=wr(Y,de,he),C[O+1+32]=C[O+2+96]=wr(de,he,pe),C[O+2+32]=C[O+3+96]=wr(he,pe,ve),C[O+3+32]=wr(pe,ve,Se)}function Bi(C,O){var Y=C[O+0-32],ae=C[O+1-32],le=C[O+2-32],de=C[O+3-32],he=C[O+4-32],pe=C[O+5-32],ve=C[O+6-32],Se=C[O+7-32];C[O+0+0]=Y+ae+1>>1,C[O+1+0]=C[O+0+64]=ae+le+1>>1,C[O+2+0]=C[O+1+64]=le+de+1>>1,C[O+3+0]=C[O+2+64]=de+he+1>>1,C[O+0+32]=wr(Y,ae,le),C[O+1+32]=C[O+0+96]=wr(ae,le,de),C[O+2+32]=C[O+1+96]=wr(le,de,he),C[O+3+32]=C[O+2+96]=wr(de,he,pe),C[O+3+64]=wr(he,pe,ve),C[O+3+96]=wr(pe,ve,Se)}function _l(C,O){var Y=C[O-1+0],ae=C[O-1+32],le=C[O-1+64],de=C[O-1+96];C[O+0+0]=Y+ae+1>>1,C[O+2+0]=C[O+0+32]=ae+le+1>>1,C[O+2+32]=C[O+0+64]=le+de+1>>1,C[O+1+0]=wr(Y,ae,le),C[O+3+0]=C[O+1+32]=wr(ae,le,de),C[O+3+32]=C[O+1+64]=wr(le,de,de),C[O+3+64]=C[O+2+64]=C[O+0+96]=C[O+1+96]=C[O+2+96]=C[O+3+96]=de}function $o(C,O){var Y=C[O-1+0],ae=C[O-1+32],le=C[O-1+64],de=C[O-1+96],he=C[O-1-32],pe=C[O+0-32],ve=C[O+1-32],Se=C[O+2-32];C[O+0+0]=C[O+2+32]=Y+he+1>>1,C[O+0+32]=C[O+2+64]=ae+Y+1>>1,C[O+0+64]=C[O+2+96]=le+ae+1>>1,C[O+0+96]=de+le+1>>1,C[O+3+0]=wr(pe,ve,Se),C[O+2+0]=wr(he,pe,ve),C[O+1+0]=C[O+3+32]=wr(Y,he,pe),C[O+1+32]=C[O+3+64]=wr(ae,Y,he),C[O+1+64]=C[O+3+96]=wr(le,ae,Y),C[O+1+96]=wr(de,le,ae)}function lA(C,O){var Y;for(Y=0;8>Y;++Y)n(C,O+32*Y,C,O-32,8)}function ki(C,O){var Y;for(Y=0;8>Y;++Y)a(C,O,C[O-1],8),O+=32}function Ks(C,O,Y){var ae;for(ae=0;8>ae;++ae)a(O,Y+32*ae,C,8)}function Eo(C,O){var Y,ae=8;for(Y=0;8>Y;++Y)ae+=C[O+Y-32]+C[O-1+32*Y];Ks(ae>>4,C,O)}function Oa(C,O){var Y,ae=4;for(Y=0;8>Y;++Y)ae+=C[O+Y-32];Ks(ae>>3,C,O)}function tn(C,O){var Y,ae=4;for(Y=0;8>Y;++Y)ae+=C[O-1+32*Y];Ks(ae>>3,C,O)}function Sl(C,O){Ks(128,C,O)}function Co(C,O,Y){var ae=C[O-Y],le=C[O+0],de=3*(le-ae)+C0[1020+C[O-2*Y]-C[O+Y]],he=gA[112+(de+4>>3)];C[O-Y]=vs[255+ae+gA[112+(de+3>>3)]],C[O+0]=vs[255+le-he]}function cA(C,O,Y,ae){var le=C[O+0],de=C[O+Y];return Bo[255+C[O-2*Y]-C[O-Y]]>ae||Bo[255+de-le]>ae}function uc(C,O,Y,ae){return 4*Bo[255+C[O-Y]-C[O+0]]+Bo[255+C[O-2*Y]-C[O+Y]]<=ae}function Ac(C,O,Y,ae,le){var de=C[O-3*Y],he=C[O-2*Y],pe=C[O-Y],ve=C[O+0],Se=C[O+Y],Ue=C[O+2*Y],tt=C[O+3*Y];return 4*Bo[255+pe-ve]+Bo[255+he-Se]>ae?0:Bo[255+C[O-4*Y]-de]<=le&&Bo[255+de-he]<=le&&Bo[255+he-pe]<=le&&Bo[255+tt-Ue]<=le&&Bo[255+Ue-Se]<=le&&Bo[255+Se-ve]<=le}function so(C,O,Y,ae){var le=2*ae+1;for(ae=0;16>ae;++ae)uc(C,O+ae,Y,le)&&Co(C,O+ae,Y)}function qs(C,O,Y,ae){var le=2*ae+1;for(ae=0;16>ae;++ae)uc(C,O+ae*Y,1,le)&&Co(C,O+ae*Y,1)}function Ua(C,O,Y,ae){var le;for(le=3;0<le;--le)so(C,O+=4*Y,Y,ae)}function md(C,O,Y,ae){var le;for(le=3;0<le;--le)qs(C,O+=4,Y,ae)}function Nl(C,O,Y,ae,le,de,he,pe){for(de=2*de+1;0<le--;){if(Ac(C,O,Y,de,he))if(cA(C,O,Y,pe))Co(C,O,Y);else{var ve=C,Se=O,Ue=Y,tt=ve[Se-2*Ue],Je=ve[Se-Ue],Ke=ve[Se+0],bt=ve[Se+Ue],lt=ve[Se+2*Ue],Pe=27*(ht=C0[1020+3*(Ke-Je)+C0[1020+tt-bt]])+63>>7,Qe=18*ht+63>>7,ht=9*ht+63>>7;ve[Se-3*Ue]=vs[255+ve[Se-3*Ue]+ht],ve[Se-2*Ue]=vs[255+tt+Qe],ve[Se-Ue]=vs[255+Je+Pe],ve[Se+0]=vs[255+Ke-Pe],ve[Se+Ue]=vs[255+bt-Qe],ve[Se+2*Ue]=vs[255+lt-ht]}O+=ae}}function Os(C,O,Y,ae,le,de,he,pe){for(de=2*de+1;0<le--;){if(Ac(C,O,Y,de,he))if(cA(C,O,Y,pe))Co(C,O,Y);else{var ve=C,Se=O,Ue=Y,tt=ve[Se-Ue],Je=ve[Se+0],Ke=ve[Se+Ue],bt=gA[112+((lt=3*(Je-tt))+4>>3)],lt=gA[112+(lt+3>>3)],Pe=bt+1>>1;ve[Se-2*Ue]=vs[255+ve[Se-2*Ue]+Pe],ve[Se-Ue]=vs[255+tt+lt],ve[Se+0]=vs[255+Je-bt],ve[Se+Ue]=vs[255+Ke-Pe]}O+=ae}}function Bl(C,O,Y,ae,le,de){Nl(C,O,Y,1,16,ae,le,de)}function Wo(C,O,Y,ae,le,de){Nl(C,O,1,Y,16,ae,le,de)}function tu(C,O,Y,ae,le,de){var he;for(he=3;0<he;--he)Os(C,O+=4*Y,Y,1,16,ae,le,de)}function dc(C,O,Y,ae,le,de){var he;for(he=3;0<he;--he)Os(C,O+=4,1,Y,16,ae,le,de)}function ru(C,O,Y,ae,le,de,he,pe){Nl(C,O,le,1,8,de,he,pe),Nl(Y,ae,le,1,8,de,he,pe)}function uA(C,O,Y,ae,le,de,he,pe){Nl(C,O,1,le,8,de,he,pe),Nl(Y,ae,1,le,8,de,he,pe)}function fc(C,O,Y,ae,le,de,he,pe){Os(C,O+4*le,le,1,8,de,he,pe),Os(Y,ae+4*le,le,1,8,de,he,pe)}function kl(C,O,Y,ae,le,de,he,pe){Os(C,O+4,1,le,8,de,he,pe),Os(Y,ae+4,1,le,8,de,he,pe)}function hc(){this.ba=new En,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ar,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function nu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function mc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Tl(){this.ua=0,this.Wa=new we,this.vb=new we,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new F}function pd(){this.xb=this.a=0,this.l=new Za,this.ca=new En,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new R,this.Pb=0,this.wd=new R,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Tl,this.ab=0,this.gc=i(4,mc),this.Oc=0}function Xo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Za,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Il(C,O,Y,ae,le,de,he){for(C=C==null?0:C[O+0],O=0;O<he;++O)le[de+O]=C+Y[ae+O]&255,C=le[de+O]}function pc(C,O,Y,ae,le,de,he){var pe;if(C==null)Il(null,null,Y,ae,le,de,he);else for(pe=0;pe<he;++pe)le[de+pe]=C[O+pe]+Y[ae+pe]&255}function $s(C,O,Y,ae,le,de,he){if(C==null)Il(null,null,Y,ae,le,de,he);else{var pe,ve=C[O+0],Se=ve,Ue=ve;for(pe=0;pe<he;++pe)Se=Ue+(ve=C[O+pe])-Se,Ue=Y[ae+pe]+(-256&Se?0>Se?0:255:Se)&255,Se=ve,le[de+pe]=Ue}}function au(C,O,Y,ae){var le=O.width,de=O.o;if(t(C!=null&&O!=null),0>Y||0>=ae||Y+ae>de)return null;if(!C.Cc){if(C.ga==null){var he;if(C.ga=new Xo,(he=C.ga==null)||(he=O.width*O.o,t(C.Gb.length==0),C.Gb=s(he),C.Uc=0,C.Gb==null?he=0:(C.mb=C.Gb,C.nb=C.Uc,C.rc=null,he=1),he=!he),!he){he=C.ga;var pe=C.Fa,ve=C.P,Se=C.qc,Ue=C.mb,tt=C.nb,Je=ve+1,Ke=Se-1,bt=he.l;if(t(pe!=null&&Ue!=null&&O!=null),Ol[0]=null,Ol[1]=Il,Ol[2]=pc,Ol[3]=$s,he.ca=Ue,he.tb=tt,he.c=O.width,he.i=O.height,t(0<he.c&&0<he.i),1>=Se)O=0;else if(he.$a=pe[ve+0]>>0&3,he.Z=pe[ve+0]>>2&3,he.Lc=pe[ve+0]>>4&3,ve=pe[ve+0]>>6&3,0>he.$a||1<he.$a||4<=he.Z||1<he.Lc||ve)O=0;else if(bt.put=_a,bt.ac=Zn,bt.bc=js,bt.ma=he,bt.width=O.width,bt.height=O.height,bt.Da=O.Da,bt.v=O.v,bt.va=O.va,bt.j=O.j,bt.o=O.o,he.$a)e:{t(he.$a==1),O=st();t:for(;;){if(O==null){O=0;break e}if(t(he!=null),he.mc=O,O.c=he.c,O.i=he.i,O.l=he.l,O.l.ma=he,O.l.width=he.c,O.l.height=he.i,O.a=0,G(O.m,pe,Je,Ke),!ze(he.c,he.i,1,O,null)||(O.ab==1&&O.gc[0].hc==3&&ye(O.s)?(he.ic=1,pe=O.c*O.i,O.Ta=null,O.Ua=0,O.V=s(pe),O.Ba=0,O.V==null?(O.a=1,O=0):O=1):(he.ic=0,O=Ze(O,he.c)),!O))break t;O=1;break e}he.mc=null,O=0}else O=Ke>=he.c*he.i;he=!O}if(he)return null;C.ga.Lc!=1?C.Ga=0:ae=de-Y}t(C.ga!=null),t(Y+ae<=de);e:{if(O=(pe=C.ga).c,de=pe.l.o,pe.$a==0){if(Je=C.rc,Ke=C.Vc,bt=C.Fa,ve=C.P+1+Y*O,Se=C.mb,Ue=C.nb+Y*O,t(ve<=C.P+C.qc),pe.Z!=0)for(t(Ol[pe.Z]!=null),he=0;he<ae;++he)Ol[pe.Z](Je,Ke,bt,ve,Se,Ue,O),Je=Se,Ke=Ue,Ue+=O,ve+=O;else for(he=0;he<ae;++he)n(Se,Ue,bt,ve,O),Je=Se,Ke=Ue,Ue+=O,ve+=O;C.rc=Je,C.Vc=Ke}else{if(t(pe.mc!=null),O=Y+ae,t((he=pe.mc)!=null),t(O<=he.i),he.C>=O)O=1;else if(pe.ic||Ge(),pe.ic){pe=he.V,Je=he.Ba,Ke=he.c;var lt=he.i,Pe=(bt=1,ve=he.$/Ke,Se=he.$%Ke,Ue=he.m,tt=he.s,he.$),Qe=Ke*lt,ht=Ke*O,wt=tt.wc,gt=Pe<ht?ea(tt,Se,ve):null;t(Pe<=Qe),t(O<=lt),t(ye(tt));t:for(;;){for(;!Ue.h&&Pe<ht;){if(Se&wt||(gt=ea(tt,Se,ve)),t(gt!=null),ne(Ue),256>(lt=Dn(gt.G[0],gt.H[0],Ue)))pe[Je+Pe]=lt,++Pe,++Se>=Ke&&(Se=0,++ve<=O&&!(ve%16)&&_e(he,ve));else{if(!(280>lt)){bt=0;break t}lt=pn(lt-256,Ue);var Xt,Mt=Dn(gt.G[4],gt.H[4],Ue);if(ne(Ue),!(Pe>=(Mt=on(Ke,Mt=pn(Mt,Ue)))&&Qe-Pe>=lt)){bt=0;break t}for(Xt=0;Xt<lt;++Xt)pe[Je+Pe+Xt]=pe[Je+Pe+Xt-Mt];for(Pe+=lt,Se+=lt;Se>=Ke;)Se-=Ke,++ve<=O&&!(ve%16)&&_e(he,ve);Pe<ht&&Se&wt&&(gt=ea(tt,Se,ve))}t(Ue.h==X(Ue))}_e(he,ve>O?O:ve);break t}!bt||Ue.h&&Pe<Qe?(bt=0,he.a=Ue.h?5:3):he.$=Pe,O=bt}else O=Be(he,he.V,he.Ba,he.c,he.i,O,rt);if(!O){ae=0;break e}}Y+ae>=de&&(C.Cc=1),ae=1}if(!ae)return null;if(C.Cc&&((ae=C.ga)!=null&&(ae.mc=null),C.ga=null,0<C.Ga))return alert("todo:WebPDequantizeLevels"),null}return C.nb+Y*le}function V(C,O,Y,ae,le,de){for(;0<le--;){var he,pe=C,ve=O+(Y?1:0),Se=C,Ue=O+(Y?0:3);for(he=0;he<ae;++he){var tt=Se[Ue+4*he];tt!=255&&(tt*=32897,pe[ve+4*he+0]=pe[ve+4*he+0]*tt>>23,pe[ve+4*he+1]=pe[ve+4*he+1]*tt>>23,pe[ve+4*he+2]=pe[ve+4*he+2]*tt>>23)}O+=de}}function ce(C,O,Y,ae,le){for(;0<ae--;){var de;for(de=0;de<Y;++de){var he=C[O+2*de+0],pe=15&(Se=C[O+2*de+1]),ve=4369*pe,Se=(240&Se|Se>>4)*ve>>16;C[O+2*de+0]=(240&he|he>>4)*ve>>16&240|(15&he|he<<4)*ve>>16>>4&15,C[O+2*de+1]=240&Se|pe}O+=le}}function Ie(C,O,Y,ae,le,de,he,pe){var ve,Se,Ue=255;for(Se=0;Se<le;++Se){for(ve=0;ve<ae;++ve){var tt=C[O+ve];de[he+4*ve]=tt,Ue&=tt}O+=Y,he+=pe}return Ue!=255}function Re(C,O,Y,ae,le){var de;for(de=0;de<le;++de)Y[ae+de]=C[O+de]>>8}function Ge(){io=V,Yr=ce,Jr=Ie,ra=Re}function ct(C,O,Y){y[C]=function(ae,le,de,he,pe,ve,Se,Ue,tt,Je,Ke,bt,lt,Pe,Qe,ht,wt){var gt,Xt=wt-1>>1,Mt=pe[ve+0]|Se[Ue+0]<<16,lr=tt[Je+0]|Ke[bt+0]<<16;t(ae!=null);var Vt=3*Mt+lr+131074>>2;for(O(ae[le+0],255&Vt,Vt>>16,lt,Pe),de!=null&&(Vt=3*lr+Mt+131074>>2,O(de[he+0],255&Vt,Vt>>16,Qe,ht)),gt=1;gt<=Xt;++gt){var vn=pe[ve+gt]|Se[Ue+gt]<<16,kn=tt[Je+gt]|Ke[bt+gt]<<16,Xr=Mt+vn+lr+kn+524296,Gr=Xr+2*(vn+lr)>>3;Vt=Gr+Mt>>1,Mt=(Xr=Xr+2*(Mt+kn)>>3)+vn>>1,O(ae[le+2*gt-1],255&Vt,Vt>>16,lt,Pe+(2*gt-1)*Y),O(ae[le+2*gt-0],255&Mt,Mt>>16,lt,Pe+(2*gt-0)*Y),de!=null&&(Vt=Xr+lr>>1,Mt=Gr+kn>>1,O(de[he+2*gt-1],255&Vt,Vt>>16,Qe,ht+(2*gt-1)*Y),O(de[he+2*gt+0],255&Mt,Mt>>16,Qe,ht+(2*gt+0)*Y)),Mt=vn,lr=kn}1&wt||(Vt=3*Mt+lr+131074>>2,O(ae[le+wt-1],255&Vt,Vt>>16,lt,Pe+(wt-1)*Y),de!=null&&(Vt=3*lr+Mt+131074>>2,O(de[he+wt-1],255&Vt,Vt>>16,Qe,ht+(wt-1)*Y)))}}function Nt(){bs[Ws]=_c,bs[wd]=Ul,bs[Rl]=xu,bs[th]=N0,bs[xA]=B0,bs[bc]=Cd,bs[_0]=k0,bs[rh]=Ul,bs[pu]=N0,bs[wc]=B0,bs[yd]=Cd}function Ht(C){return C&-16384?0>C?0:255:C>>PE}function S(C,O){return Ht((19077*C>>8)+(26149*O>>8)-14234)}function J(C,O,Y){return Ht((19077*C>>8)-(6419*O>>8)-(13320*Y>>8)+8708)}function se(C,O){return Ht((19077*C>>8)+(33050*O>>8)-17685)}function ge(C,O,Y,ae,le){ae[le+0]=S(C,Y),ae[le+1]=J(C,O,Y),ae[le+2]=se(C,O)}function Ve(C,O,Y,ae,le){ae[le+0]=se(C,O),ae[le+1]=J(C,O,Y),ae[le+2]=S(C,Y)}function nt(C,O,Y,ae,le){var de=J(C,O,Y);O=de<<3&224|se(C,O)>>3,ae[le+0]=248&S(C,Y)|de>>5,ae[le+1]=O}function Bt(C,O,Y,ae,le){var de=240&se(C,O)|15;ae[le+0]=240&S(C,Y)|J(C,O,Y)>>4,ae[le+1]=de}function yr(C,O,Y,ae,le){ae[le+0]=255,ge(C,O,Y,ae,le+1)}function rn(C,O,Y,ae,le){Ve(C,O,Y,ae,le),ae[le+3]=255}function Dr(C,O,Y,ae,le){ge(C,O,Y,ae,le),ae[le+3]=255}function Bn(C,O){return 0>C?0:C>O?O:C}function Ln(C,O,Y){y[C]=function(ae,le,de,he,pe,ve,Se,Ue,tt){for(var Je=Ue+(-2&tt)*Y;Ue!=Je;)O(ae[le+0],de[he+0],pe[ve+0],Se,Ue),O(ae[le+1],de[he+0],pe[ve+0],Se,Ue+Y),le+=2,++he,++ve,Ue+=2*Y;1&tt&&O(ae[le+0],de[he+0],pe[ve+0],Se,Ue)}}function _o(C,O,Y){return Y==0?C==0?O==0?6:5:O==0?4:0:Y}function Sa(C,O,Y,ae,le){switch(C>>>30){case 3:Jo(O,Y,ae,le,0);break;case 2:ba(O,Y,ae,le);break;case 1:Pa(O,Y,ae,le)}}function Ti(C,O){var Y,ae,le=O.M,de=O.Nb,he=C.oc,pe=C.pc+40,ve=C.oc,Se=C.pc+584,Ue=C.oc,tt=C.pc+600;for(Y=0;16>Y;++Y)he[pe+32*Y-1]=129;for(Y=0;8>Y;++Y)ve[Se+32*Y-1]=129,Ue[tt+32*Y-1]=129;for(0<le?he[pe-1-32]=ve[Se-1-32]=Ue[tt-1-32]=129:(a(he,pe-32-1,127,21),a(ve,Se-32-1,127,9),a(Ue,tt-32-1,127,9)),ae=0;ae<C.za;++ae){var Je=O.ya[O.aa+ae];if(0<ae){for(Y=-1;16>Y;++Y)n(he,pe+32*Y-4,he,pe+32*Y+12,4);for(Y=-1;8>Y;++Y)n(ve,Se+32*Y-4,ve,Se+32*Y+4,4),n(Ue,tt+32*Y-4,Ue,tt+32*Y+4,4)}var Ke=C.Gd,bt=C.Hd+ae,lt=Je.ad,Pe=Je.Hc;if(0<le&&(n(he,pe-32,Ke[bt].y,0,16),n(ve,Se-32,Ke[bt].f,0,8),n(Ue,tt-32,Ke[bt].ea,0,8)),Je.Za){var Qe=he,ht=pe-32+16;for(0<le&&(ae>=C.za-1?a(Qe,ht,Ke[bt].y[15],4):n(Qe,ht,Ke[bt+1].y,0,4)),Y=0;4>Y;Y++)Qe[ht+128+Y]=Qe[ht+256+Y]=Qe[ht+384+Y]=Qe[ht+0+Y];for(Y=0;16>Y;++Y,Pe<<=2)Qe=he,ht=pe+yA[Y],ui[Je.Ob[Y]](Qe,ht),Sa(Pe,lt,16*+Y,Qe,ht)}else if(Qe=_o(ae,le,Je.Ob[0]),Cc[Qe](he,pe),Pe!=0)for(Y=0;16>Y;++Y,Pe<<=2)Sa(Pe,lt,16*+Y,he,pe+yA[Y]);for(Y=Je.Gc,Qe=_o(ae,le,Je.Dd),lo[Qe](ve,Se),lo[Qe](Ue,tt),Pe=lt,Qe=ve,ht=Se,255&(Je=Y>>0)&&(170&Je?Zo(Pe,256,Qe,ht):ji(Pe,256,Qe,ht)),Je=Ue,Pe=tt,255&(Y>>=8)&&(170&Y?Zo(lt,320,Je,Pe):ji(lt,320,Je,Pe)),le<C.Ub-1&&(n(Ke[bt].y,0,he,pe+480,16),n(Ke[bt].f,0,ve,Se+224,8),n(Ke[bt].ea,0,Ue,tt+224,8)),Y=8*de*C.B,Ke=C.sa,bt=C.ta+16*ae+16*de*C.R,lt=C.qa,Je=C.ra+8*ae+Y,Pe=C.Ha,Qe=C.Ia+8*ae+Y,Y=0;16>Y;++Y)n(Ke,bt+Y*C.R,he,pe+32*Y,16);for(Y=0;8>Y;++Y)n(lt,Je+Y*C.B,ve,Se+32*Y,8),n(Pe,Qe+Y*C.B,Ue,tt+32*Y,8)}}function Fl(C,O,Y,ae,le,de,he,pe,ve){var Se=[0],Ue=[0],tt=0,Je=ve!=null?ve.kd:0,Ke=ve??new nu;if(C==null||12>Y)return 7;Ke.data=C,Ke.w=O,Ke.ha=Y,O=[O],Y=[Y],Ke.gb=[Ke.gb];e:{var bt=O,lt=Y,Pe=Ke.gb;if(t(C!=null),t(lt!=null),t(Pe!=null),Pe[0]=0,12<=lt[0]&&!r(C,bt[0],"RIFF")){if(r(C,bt[0]+8,"WEBP")){Pe=3;break e}var Qe=Le(C,bt[0]+4);if(12>Qe||4294967286<Qe){Pe=3;break e}if(Je&&Qe>lt[0]-8){Pe=7;break e}Pe[0]=Qe,bt[0]+=12,lt[0]-=12}Pe=0}if(Pe!=0)return Pe;for(Qe=0<Ke.gb[0],Y=Y[0];;){e:{var ht=C;lt=O,Pe=Y;var wt=Se,gt=Ue,Xt=bt=[0];if((Vt=tt=[tt])[0]=0,8>Pe[0])Pe=7;else{if(!r(ht,lt[0],"VP8X")){if(Le(ht,lt[0]+4)!=10){Pe=3;break e}if(18>Pe[0]){Pe=7;break e}var Mt=Le(ht,lt[0]+8),lr=1+oe(ht,lt[0]+12);if(2147483648<=lr*(ht=1+oe(ht,lt[0]+15))){Pe=3;break e}Xt!=null&&(Xt[0]=Mt),wt!=null&&(wt[0]=lr),gt!=null&&(gt[0]=ht),lt[0]+=18,Pe[0]-=18,Vt[0]=1}Pe=0}}if(tt=tt[0],bt=bt[0],Pe!=0)return Pe;if(lt=!!(2&bt),!Qe&&tt)return 3;if(de!=null&&(de[0]=!!(16&bt)),he!=null&&(he[0]=lt),pe!=null&&(pe[0]=0),he=Se[0],bt=Ue[0],tt&&lt&&ve==null){Pe=0;break}if(4>Y){Pe=7;break}if(Qe&&tt||!Qe&&!tt&&!r(C,O[0],"ALPH")){Y=[Y],Ke.na=[Ke.na],Ke.P=[Ke.P],Ke.Sa=[Ke.Sa];e:{Mt=C,Pe=O,Qe=Y;var Vt=Ke.gb;wt=Ke.na,gt=Ke.P,Xt=Ke.Sa,lr=22,t(Mt!=null),t(Qe!=null),ht=Pe[0];var vn=Qe[0];for(t(wt!=null),t(Xt!=null),wt[0]=null,gt[0]=null,Xt[0]=0;;){if(Pe[0]=ht,Qe[0]=vn,8>vn){Pe=7;break e}var kn=Le(Mt,ht+4);if(4294967286<kn){Pe=3;break e}var Xr=8+kn+1&-2;if(lr+=Xr,0<Vt&&lr>Vt){Pe=3;break e}if(!r(Mt,ht,"VP8 ")||!r(Mt,ht,"VP8L")){Pe=0;break e}if(vn[0]<Xr){Pe=7;break e}r(Mt,ht,"ALPH")||(wt[0]=Mt,gt[0]=ht+8,Xt[0]=kn),ht+=Xr,vn-=Xr}}if(Y=Y[0],Ke.na=Ke.na[0],Ke.P=Ke.P[0],Ke.Sa=Ke.Sa[0],Pe!=0)break}Y=[Y],Ke.Ja=[Ke.Ja],Ke.xa=[Ke.xa];e:if(Vt=C,Pe=O,Qe=Y,wt=Ke.gb[0],gt=Ke.Ja,Xt=Ke.xa,Mt=Pe[0],ht=!r(Vt,Mt,"VP8 "),lr=!r(Vt,Mt,"VP8L"),t(Vt!=null),t(Qe!=null),t(gt!=null),t(Xt!=null),8>Qe[0])Pe=7;else{if(ht||lr){if(Vt=Le(Vt,Mt+4),12<=wt&&Vt>wt-12){Pe=3;break e}if(Je&&Vt>Qe[0]-8){Pe=7;break e}gt[0]=Vt,Pe[0]+=8,Qe[0]-=8,Xt[0]=lr}else Xt[0]=5<=Qe[0]&&Vt[Mt+0]==47&&!(Vt[Mt+4]>>5),gt[0]=Qe[0];Pe=0}if(Y=Y[0],Ke.Ja=Ke.Ja[0],Ke.xa=Ke.xa[0],O=O[0],Pe!=0)break;if(4294967286<Ke.Ja)return 3;if(pe==null||lt||(pe[0]=Ke.xa?2:1),he=[he],bt=[bt],Ke.xa){if(5>Y){Pe=7;break}pe=he,Je=bt,lt=de,C==null||5>Y?C=0:5<=Y&&C[O+0]==47&&!(C[O+4]>>5)?(Qe=[0],Vt=[0],wt=[0],G(gt=new R,C,O,Y),Kt(gt,Qe,Vt,wt)?(pe!=null&&(pe[0]=Qe[0]),Je!=null&&(Je[0]=Vt[0]),lt!=null&&(lt[0]=wt[0]),C=1):C=0):C=0}else{if(10>Y){Pe=7;break}pe=bt,C==null||10>Y||!gs(C,O+3,Y-3)?C=0:(Je=C[O+0]|C[O+1]<<8|C[O+2]<<16,lt=16383&(C[O+7]<<8|C[O+6]),C=16383&(C[O+9]<<8|C[O+8]),1&Je||3<(Je>>1&7)||!(Je>>4&1)||Je>>5>=Ke.Ja||!lt||!C?C=0:(he&&(he[0]=lt),pe&&(pe[0]=C),C=1))}if(!C||(he=he[0],bt=bt[0],tt&&(Se[0]!=he||Ue[0]!=bt)))return 3;ve!=null&&(ve[0]=Ke,ve.offset=O-ve.w,t(4294967286>O-ve.w),t(ve.offset==ve.ha-Y));break}return Pe==0||Pe==7&&tt&&ve==null?(de!=null&&(de[0]|=Ke.na!=null&&0<Ke.na.length),ae!=null&&(ae[0]=he),le!=null&&(le[0]=bt),0):Pe}function su(C,O,Y){var ae=O.width,le=O.height,de=0,he=0,pe=ae,ve=le;if(O.Da=C!=null&&0<C.Da,O.Da&&(pe=C.cd,ve=C.bd,de=C.v,he=C.j,11>Y||(de&=-2,he&=-2),0>de||0>he||0>=pe||0>=ve||de+pe>ae||he+ve>le))return 0;if(O.v=de,O.j=he,O.va=de+pe,O.o=he+ve,O.U=pe,O.T=ve,O.da=C!=null&&0<C.da,O.da){if(!Fe(pe,ve,Y=[C.ib],de=[C.hb]))return 0;O.ib=Y[0],O.hb=de[0]}return O.ob=C!=null&&C.ob,O.Kb=C==null||!C.Sd,O.da&&(O.ob=O.ib<3*ae/4&&O.hb<3*le/4,O.Kb=0),1}function gd(C){if(C==null)return 2;if(11>C.S){var O=C.f.RGBA;O.fb+=(C.height-1)*O.A,O.A=-O.A}else O=C.f.kb,C=C.height,O.O+=(C-1)*O.fa,O.fa=-O.fa,O.N+=(C-1>>1)*O.Ab,O.Ab=-O.Ab,O.W+=(C-1>>1)*O.Db,O.Db=-O.Db,O.F!=null&&(O.J+=(C-1)*O.lb,O.lb=-O.lb);return 0}function AA(C,O,Y,ae){if(ae==null||0>=C||0>=O)return 2;if(Y!=null){if(Y.Da){var le=Y.cd,de=Y.bd,he=-2&Y.v,pe=-2&Y.j;if(0>he||0>pe||0>=le||0>=de||he+le>C||pe+de>O)return 2;C=le,O=de}if(Y.da){if(!Fe(C,O,le=[Y.ib],de=[Y.hb]))return 2;C=le[0],O=de[0]}}ae.width=C,ae.height=O;e:{var ve=ae.width,Se=ae.height;if(C=ae.S,0>=ve||0>=Se||!(C>=Ws&&13>C))C=2;else{if(0>=ae.Rd&&ae.sd==null){he=de=le=O=0;var Ue=(pe=ve*av[C])*Se;if(11>C||(de=(Se+1)/2*(O=(ve+1)/2),C==12&&(he=(le=ve)*Se)),(Se=s(Ue+2*de+he))==null){C=1;break e}ae.sd=Se,11>C?((ve=ae.f.RGBA).eb=Se,ve.fb=0,ve.A=pe,ve.size=Ue):((ve=ae.f.kb).y=Se,ve.O=0,ve.fa=pe,ve.Fd=Ue,ve.f=Se,ve.N=0+Ue,ve.Ab=O,ve.Cd=de,ve.ea=Se,ve.W=0+Ue+de,ve.Db=O,ve.Ed=de,C==12&&(ve.F=Se,ve.J=0+Ue+2*de),ve.Tc=he,ve.lb=le)}if(O=1,le=ae.S,de=ae.width,he=ae.height,le>=Ws&&13>le)if(11>le)C=ae.f.RGBA,O&=(pe=Math.abs(C.A))*(he-1)+de<=C.size,O&=pe>=de*av[le],O&=C.eb!=null;else{C=ae.f.kb,pe=(de+1)/2,Ue=(he+1)/2,ve=Math.abs(C.fa),Se=Math.abs(C.Ab);var tt=Math.abs(C.Db),Je=Math.abs(C.lb),Ke=Je*(he-1)+de;O&=ve*(he-1)+de<=C.Fd,O&=Se*(Ue-1)+pe<=C.Cd,O=(O&=tt*(Ue-1)+pe<=C.Ed)&ve>=de&Se>=pe&tt>=pe,O&=C.y!=null,O&=C.f!=null,O&=C.ea!=null,le==12&&(O&=Je>=de,O&=Ke<=C.Tc,O&=C.F!=null)}else O=0;C=O?0:2}}return C!=0||Y!=null&&Y.fd&&(C=gd(ae)),C}var es=64,iu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],dA=24,fA=32,xd=8,Ii=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ut("Predictor0","PredictorAdd0"),y.Predictor0=function(){return 4278190080},y.Predictor1=function(C){return C},y.Predictor2=function(C,O,Y){return O[Y+0]},y.Predictor3=function(C,O,Y){return O[Y+1]},y.Predictor4=function(C,O,Y){return O[Y-1]},y.Predictor5=function(C,O,Y){return At(At(C,O[Y+1]),O[Y+0])},y.Predictor6=function(C,O,Y){return At(C,O[Y-1])},y.Predictor7=function(C,O,Y){return At(C,O[Y+0])},y.Predictor8=function(C,O,Y){return At(O[Y-1],O[Y+0])},y.Predictor9=function(C,O,Y){return At(O[Y+0],O[Y+1])},y.Predictor10=function(C,O,Y){return At(At(C,O[Y-1]),At(O[Y+0],O[Y+1]))},y.Predictor11=function(C,O,Y){var ae=O[Y+0];return 0>=Yt(ae>>24&255,C>>24&255,(O=O[Y-1])>>24&255)+Yt(ae>>16&255,C>>16&255,O>>16&255)+Yt(ae>>8&255,C>>8&255,O>>8&255)+Yt(255&ae,255&C,255&O)?ae:C},y.Predictor12=function(C,O,Y){var ae=O[Y+0];return(jt((C>>24&255)+(ae>>24&255)-((O=O[Y-1])>>24&255))<<24|jt((C>>16&255)+(ae>>16&255)-(O>>16&255))<<16|jt((C>>8&255)+(ae>>8&255)-(O>>8&255))<<8|jt((255&C)+(255&ae)-(255&O)))>>>0},y.Predictor13=function(C,O,Y){var ae=O[Y-1];return(Dt((C=At(C,O[Y+0]))>>24&255,ae>>24&255)<<24|Dt(C>>16&255,ae>>16&255)<<16|Dt(C>>8&255,ae>>8&255)<<8|Dt(C>>0&255,ae>>0&255))>>>0};var Op=y.PredictorAdd0;y.PredictorAdd1=Rt,ut("Predictor2","PredictorAdd2"),ut("Predictor3","PredictorAdd3"),ut("Predictor4","PredictorAdd4"),ut("Predictor5","PredictorAdd5"),ut("Predictor6","PredictorAdd6"),ut("Predictor7","PredictorAdd7"),ut("Predictor8","PredictorAdd8"),ut("Predictor9","PredictorAdd9"),ut("Predictor10","PredictorAdd10"),ut("Predictor11","PredictorAdd11"),ut("Predictor12","PredictorAdd12"),ut("Predictor13","PredictorAdd13");var Zf=y.PredictorAdd2;Oe("ColorIndexInverseTransform","MapARGB","32b",function(C){return C>>8&255},function(C){return C}),Oe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(C){return C},function(C){return C>>8&255});var E0,So=y.ColorIndexInverseTransform,xs=y.MapARGB,ou=y.VP8LColorIndexInverseTransformAlpha,eh=y.MapAlpha,gc=y.VP8LPredictorsAdd=[];gc.length=16,(y.VP8LPredictors=[]).length=16,(y.VP8LPredictorsAdd_C=[]).length=16,(y.VP8LPredictors_C=[]).length=16;var lu,ci,Us,cu,Fi,Yo,jl,Jo,ba,Zo,Pa,ji,hA,Dl,vd,uu,Au,du,mA,bd,fu,xc,pA,wa,io,Yr,Jr,ra,Na=s(511),No=s(2041),hu=s(225),mu=s(767),vc=0,C0=No,gA=hu,vs=mu,Bo=Na,Ws=0,wd=1,Rl=2,th=3,xA=4,bc=5,_0=6,rh=7,pu=8,wc=9,yd=10,S0=[2,3,7],ko=[3,3,11],oo=[280,256,256,256,40],vA=[0,1,1,1,0],yc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ec=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],bA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Z1=8,nh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ah=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ts=null,ya=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Cn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],gu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ll=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Up=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],wA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ev=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Cc=[],ui=[],lo=[],tv=1,Ed=2,Ol=[],bs=[];ct("UpsampleRgbLinePair",ge,3),ct("UpsampleBgrLinePair",Ve,3),ct("UpsampleRgbaLinePair",Dr,4),ct("UpsampleBgraLinePair",rn,4),ct("UpsampleArgbLinePair",yr,4),ct("UpsampleRgba4444LinePair",Bt,2),ct("UpsampleRgb565LinePair",nt,2);var _c=y.UpsampleRgbLinePair,xu=y.UpsampleBgrLinePair,Ul=y.UpsampleRgbaLinePair,N0=y.UpsampleBgraLinePair,B0=y.UpsampleArgbLinePair,Cd=y.UpsampleRgba4444LinePair,k0=y.UpsampleRgb565LinePair,Pl=16,rs=1<<Pl-1,vu=-227,T0=482,PE=6,rv=0,ME=s(256),ns=s(256),Pp=s(256),sh=s(256),ih=s(T0-vu),Mp=s(T0-vu);Ln("YuvToRgbRow",ge,3),Ln("YuvToBgrRow",Ve,3),Ln("YuvToRgbaRow",Dr,4),Ln("YuvToBgraRow",rn,4),Ln("YuvToArgbRow",yr,4),Ln("YuvToRgba4444Row",Bt,2),Ln("YuvToRgb565Row",nt,2);var yA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Sc=[0,2,8],QE=[8,7,6,4,4,2,2,2,1,1,1,1],nv=1;this.WebPDecodeRGBA=function(C,O,Y,ae,le){var de=wd,he=new hc,pe=new En;he.ba=pe,pe.S=de,pe.width=[pe.width],pe.height=[pe.height];var ve=pe.width,Se=pe.height,Ue=new Vn;if(Ue==null||C==null)var tt=2;else t(Ue!=null),tt=Fl(C,O,Y,Ue.width,Ue.height,Ue.Pd,Ue.Qd,Ue.format,null);if(tt!=0?ve=0:(ve!=null&&(ve[0]=Ue.width[0]),Se!=null&&(Se[0]=Ue.height[0]),ve=1),ve){pe.width=pe.width[0],pe.height=pe.height[0],ae!=null&&(ae[0]=pe.width),le!=null&&(le[0]=pe.height);e:{if(ae=new Za,(le=new nu).data=C,le.w=O,le.ha=Y,le.kd=1,O=[0],t(le!=null),((C=Fl(le.data,le.w,le.ha,null,null,null,O,null,le))==0||C==7)&&O[0]&&(C=4),(O=C)==0){if(t(he!=null),ae.data=le.data,ae.w=le.w+le.offset,ae.ha=le.ha-le.offset,ae.put=_a,ae.ac=Zn,ae.bc=js,ae.ma=he,le.xa){if((C=st())==null){he=1;break e}if(function(Je,Ke){var bt=[0],lt=[0],Pe=[0];t:for(;;){if(Je==null)return 0;if(Ke==null)return Je.a=2,0;if(Je.l=Ke,Je.a=0,G(Je.m,Ke.data,Ke.w,Ke.ha),!Kt(Je.m,bt,lt,Pe)){Je.a=3;break t}if(Je.xb=Ed,Ke.width=bt[0],Ke.height=lt[0],!ze(bt[0],lt[0],1,Je,null))break t;return 1}return t(Je.a!=0),0}(C,ae)){if(ae=(O=AA(ae.width,ae.height,he.Oa,he.ba))==0){t:{ae=C;r:for(;;){if(ae==null){ae=0;break t}if(t(ae.s.yc!=null),t(ae.s.Ya!=null),t(0<ae.s.Wb),t((Y=ae.l)!=null),t((le=Y.ma)!=null),ae.xb!=0){if(ae.ca=le.ba,ae.tb=le.tb,t(ae.ca!=null),!su(le.Oa,Y,th)){ae.a=2;break r}if(!Ze(ae,Y.width)||Y.da)break r;if((Y.da||or(ae.ca.S))&&Ge(),11>ae.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ae.ca.f.kb.F!=null&&Ge()),ae.Pb&&0<ae.s.ua&&ae.s.vb.X==null&&!Ye(ae.s.vb,ae.s.Wa.Xa)){ae.a=1;break r}ae.xb=0}if(!Be(ae,ae.V,ae.Ba,ae.c,ae.i,Y.o,Ne))break r;le.Dc=ae.Ma,ae=1;break t}t(ae.a!=0),ae=0}ae=!ae}ae&&(O=C.a)}else O=C.a}else{if((C=new Ds)==null){he=1;break e}if(C.Fa=le.na,C.P=le.P,C.qc=le.Sa,Jc(C,ae)){if((O=AA(ae.width,ae.height,he.Oa,he.ba))==0){if(C.Aa=0,Y=he.Oa,t((le=C)!=null),Y!=null){if(0<(ve=0>(ve=Y.Md)?0:100<ve?255:255*ve/100)){for(Se=Ue=0;4>Se;++Se)12>(tt=le.pb[Se]).lc&&(tt.ia=ve*QE[0>tt.lc?0:tt.lc]>>3),Ue|=tt.ia;Ue&&(alert("todo:VP8InitRandom"),le.ia=1)}le.Ga=Y.Id,100<le.Ga?le.Ga=100:0>le.Ga&&(le.Ga=0)}sA(C,ae)||(O=C.a)}}else O=C.a}O==0&&he.Oa!=null&&he.Oa.fd&&(O=gd(he.ba))}he=O}de=he!=0?null:11>de?pe.f.RGBA.eb:pe.f.kb.y}else de=null;return de};var av=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function A(y,N){for(var U="",j=0;j<4;j++)U+=String.fromCharCode(y[N++]);return U}function d(y,N){return(y[N+0]<<0|y[N+1]<<8|y[N+2]<<16)>>>0}function h(y,N){return(y[N+0]<<0|y[N+1]<<8|y[N+2]<<16|y[N+3]<<24)>>>0}new c;var m=[0],p=[0],v=[],x=new c,E=e,_=function(y,N){var U={},j=0,F=!1,P=0,M=0;if(U.frames=[],!function(K,X,re,ne){for(var ue=0;ue<ne;ue++)if(K[X+ue]!=re.charCodeAt(ue))return!0;return!1}(y,N,"RIFF",4)){var ee,W;for(h(y,N+=4),N+=8;N<y.length;){var te=A(y,N),G=h(y,N+=4);N+=4;var q=G+(1&G);switch(te){case"VP8 ":case"VP8L":U.frames[j]===void 0&&(U.frames[j]={}),(R=U.frames[j]).src_off=F?M:N-8,R.src_size=P+G+8,j++,F&&(F=!1,P=0,M=0);break;case"VP8X":(R=U.header={}).feature_flags=y[N];var z=N+4;R.canvas_width=1+d(y,z),z+=3,R.canvas_height=1+d(y,z),z+=3;break;case"ALPH":F=!0,P=q+8,M=N-8;break;case"ANIM":(R=U.header).bgcolor=h(y,N),z=N+4,R.loop_count=(ee=y)[(W=z)+0]<<0|ee[W+1]<<8,z+=2;break;case"ANMF":var Z,R;(R=U.frames[j]={}).offset_x=2*d(y,N),N+=3,R.offset_y=2*d(y,N),N+=3,R.width=1+d(y,N),N+=3,R.height=1+d(y,N),N+=3,R.duration=d(y,N),N+=3,Z=y[N++],R.dispose=1&Z,R.blend=Z>>1&1}te!="ANMF"&&(N+=q)}return U}}(E,0);_.response=E,_.rgbaoutput=!0,_.dataurl=!1;var B=_.header?_.header:null,T=_.frames?_.frames:null;if(B){B.loop_counter=B.loop_count,m=[B.canvas_height],p=[B.canvas_width];for(var I=0;I<T.length&&T[I].blend!=0;I++);}var L=T[0],k=x.WebPDecodeRGBA(E,L.src_off,L.src_size,p,m);L.rgba=k,L.imgwidth=p[0],L.imgheight=m[0];for(var w=0;w<p[0]*m[0]*4;w++)v[w]=k[w];return this.width=p,this.height=m,this.data=v,this}(function(e){var t=function(){return typeof w4=="function"},r=function(m,p,v,x){var E=4,_=i;switch(x){case e.image_compression.FAST:E=1,_=s;break;case e.image_compression.MEDIUM:E=6,_=o;break;case e.image_compression.SLOW:E=9,_=c}m=n(m,p,v,_);var B=w4(m,{level:E});return e.__addimage__.arrayBufferToBinaryString(B)},n=function(m,p,v,x){for(var E,_,B,T=m.length/p,I=new Uint8Array(m.length+T),L=d(),k=0;k<T;k+=1){if(B=k*p,E=m.subarray(B,B+p),x)I.set(x(E,v,_),B+k);else{for(var w,y=L.length,N=[];w<y;w+=1)N[w]=L[w](E,v,_);var U=h(N.concat());I.set(N[U],B+k)}_=E}return I},a=function(m){var p=Array.apply([],m);return p.unshift(0),p},s=function(m,p){var v,x=[],E=m.length;x[0]=1;for(var _=0;_<E;_+=1)v=m[_-p]||0,x[_+1]=m[_]-v+256&255;return x},i=function(m,p,v){var x,E=[],_=m.length;E[0]=2;for(var B=0;B<_;B+=1)x=v&&v[B]||0,E[B+1]=m[B]-x+256&255;return E},o=function(m,p,v){var x,E,_=[],B=m.length;_[0]=3;for(var T=0;T<B;T+=1)x=m[T-p]||0,E=v&&v[T]||0,_[T+1]=m[T]+256-(x+E>>>1)&255;return _},c=function(m,p,v){var x,E,_,B,T=[],I=m.length;T[0]=4;for(var L=0;L<I;L+=1)x=m[L-p]||0,E=v&&v[L]||0,_=v&&v[L-p]||0,B=A(x,E,_),T[L+1]=m[L]-B+256&255;return T},A=function(m,p,v){if(m===p&&p===v)return m;var x=Math.abs(p-v),E=Math.abs(m-v),_=Math.abs(m+p-v-v);return x<=E&&x<=_?m:E<=_?p:v},d=function(){return[a,s,i,o,c]},h=function(m){var p=m.map(function(v){return v.reduce(function(x,E){return x+Math.abs(E)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(m,p,v,x){var E,_,B,T,I,L,k,w,y,N,U,j,F,P,M,ee=this.decode.FLATE_DECODE,W="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(B=new cte(m)).imgData,_=B.bits,E=B.colorSpace,I=B.colors,[4,6].indexOf(B.colorType)!==-1){if(B.bits===8){y=(w=B.pixelBitlength==32?new Uint32Array(B.decodePixels().buffer):B.pixelBitlength==16?new Uint16Array(B.decodePixels().buffer):new Uint8Array(B.decodePixels().buffer)).length,U=new Uint8Array(y*B.colors),N=new Uint8Array(y);var te,G=B.pixelBitlength-B.bits;for(P=0,M=0;P<y;P++){for(F=w[P],te=0;te<G;)U[M++]=F>>>te&255,te+=B.bits;N[P]=F>>>te&255}}if(B.bits===16){y=(w=new Uint32Array(B.decodePixels().buffer)).length,U=new Uint8Array(y*(32/B.pixelBitlength)*B.colors),N=new Uint8Array(y*(32/B.pixelBitlength)),j=B.colors>1,P=0,M=0;for(var q=0;P<y;)F=w[P++],U[M++]=F>>>0&255,j&&(U[M++]=F>>>16&255,F=w[P++],U[M++]=F>>>0&255),N[q++]=F>>>16&255;_=8}x!==e.image_compression.NONE&&t()?(m=r(U,B.width*B.colors,B.colors,x),k=r(N,B.width,1,x)):(m=U,k=N,ee=void 0)}if(B.colorType===3&&(E=this.color_spaces.INDEXED,L=B.palette,B.transparency.indexed)){var z=B.transparency.indexed,Z=0;for(P=0,y=z.length;P<y;++P)Z+=z[P];if((Z/=255)===y-1&&z.indexOf(0)!==-1)T=[z.indexOf(0)];else if(Z!==y){for(w=B.decodePixels(),N=new Uint8Array(w.length),P=0,y=w.length;P<y;P++)N[P]=z[w[P]];k=r(N,B.width,1)}}var R=function(K){var X;switch(K){case e.image_compression.FAST:X=11;break;case e.image_compression.MEDIUM:X=13;break;case e.image_compression.SLOW:X=14;break;default:X=12}return X}(x);return ee===this.decode.FLATE_DECODE&&(W="/Predictor "+R+" "),W+="/Colors "+I+" /BitsPerComponent "+_+" /Columns "+B.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(k&&this.__addimage__.isArrayBuffer(k)||this.__addimage__.isArrayBufferView(k))&&(k=this.__addimage__.arrayBufferToBinaryString(k)),{alias:v,data:m,index:p,filter:ee,decodeParameters:W,transparency:T,palette:L,sMask:k,predictor:R,width:B.width,height:B.height,bitsPerComponent:_,colorSpace:E}}}})(ur.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new ute(t),i=s.width,o=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var A={data:c,width:i,height:o},d=new C5(100).encode(A,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(ur.API),Dc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Dc.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){ca.log("bit decode error:"+r)}},Dc.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var c=this.palette[s>>7-o&1];this.data[i+4*o]=c.blue,this.data[i+4*o+1]=c.green,this.data[i+4*o+2]=c.red,this.data[i+4*o+3]=255}r!==0&&(this.pos+=4-r)}},Dc.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,o=s>>4,c=15&s,A=this.palette[o];if(this.data[i]=A.blue,this.data[i+1]=A.green,this.data[i+2]=A.red,this.data[i+3]=255,2*a+1>=this.width)break;A=this.palette[c],this.data[i+4]=A.blue,this.data[i+4+1]=A.green,this.data[i+4+2]=A.red,this.data[i+4+3]=255}t!==0&&(this.pos+=4-t)}},Dc.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},Dc.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,A=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=A}this.pos+=e}},Dc.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,c=(i>>5&r)/r*255|0,A=(i>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=A,this.data[d+1]=c,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},Dc.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},Dc.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=i}},Dc.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new Dc(t,!1),i=s.width,o=s.height,c={data:s.getData(),width:i,height:o},A=new C5(100).encode(c,100);return e.processJPEG.call(this,A,r,n,a)}}(ur.API),w6.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new w6(t),i=s.width,o=s.height,c={data:s.getData(),width:i,height:o},A=new C5(100).encode(c,100);return e.processJPEG.call(this,A,r,n,a)}}(ur.API),ur.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,c=0,A=0;A<a;A+=4){var d=n[A],h=n[A+1],m=n[A+2],p=n[A+3];s[o++]=d,s[o++]=h,s[o++]=m,i[c++]=p}var v=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:v,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},ur.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},em=ur.API,cb=em.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),i=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,c=o.fof?o.fof:1,A=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=A.fof?A.fof:1,h=t.doKerning!==!1,m=0,p=e.length,v=0,x=o[0]||c,E=[];for(r=0;r<p;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?E.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(m=h&&Yn(A[n])==="object"&&!isNaN(parseInt(A[n][v],10))?A[n][v]/d:0,E.push((o[n]||x)/c+m)),v=n;return E},g6=em.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return em.processArabic&&(e=em.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:cb.apply(this,arguments).reduce(function(s,i){return s+i},0)},x6=function(e,t,r,n){for(var a=[],s=0,i=e.length,o=0;s!==i&&o+t[s]<r;)o+=t[s],s++;a.push(e.slice(0,s));var c=s;for(o=0;s!==i;)o+t[s]>n&&(a.push(e.slice(c,s)),o=0,c=s),o+=t[s],s++;return c!==s&&a.push(e.slice(c,s)),a},v6=function(e,t,r){r||(r={});var n,a,s,i,o,c,A,d=[],h=[d],m=r.textIndent||0,p=0,v=0,x=e.split(" "),E=cb.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var _=Array(c).join(" "),B=[];x.map(function(I){(I=I.split(/\s*\n/)).length>1?B=B.concat(I.map(function(L,k){return(k&&L.length?`
`:"")+L})):B.push(I[0])}),x=B,c=g6.apply(this,[_,r])}for(s=0,i=x.length;s<i;s++){var T=0;if(n=x[s],c&&n[0]==`
`&&(n=n.substr(1),T=1),m+p+(v=(a=cb.apply(this,[n,r])).reduce(function(I,L){return I+L},0))>t||T){if(v>t){for(o=x6.apply(this,[n,a,t-(m+p),t]),d.push(o.shift()),d=[o.pop()];o.length;)h.push([o.shift()]);v=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(I,L){return I+L},0)}else d=[n];h.push(d),m=v+c,p=E}else d.push(n),m+=p+v,p=E}return A=c?function(I,L){return(L?_:"")+I.join(" ")}:function(I){return I.join(" ")},h.map(A)},em.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var h=this.internal.getFont(d.fontName,d.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var o,c,A=[];for(o=0,c=n.length;o<c;o++)A=A.concat(v6.apply(this,[n[o],i,s]));return A},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var s=function(h){return"0x"+parseInt(h,10).toString(16)},i=e.__fontmetrics__.compress=function(h){var m,p,v,x,E=["{"];for(var _ in h){if(m=h[_],isNaN(parseInt(_,10))?p="'"+_+"'":(_=parseInt(_,10),p=(p=s(_).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof m=="number")m<0?(v=s(m).slice(3),x="-"):(v=s(m).slice(2),x=""),v=x+v.slice(0,-1)+n[v.slice(-1)];else{if(Yn(m)!=="object")throw new Error("Don't know what to do with value type "+Yn(m)+".");v=i(m)}E.push(p+v)}return E.push("}"),E.join("")},o=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,p,v,x,E={},_=1,B=E,T=[],I="",L="",k=h.length-1,w=1;w<k;w+=1)(x=h[w])=="'"?m?(v=m.join(""),m=void 0):m=[]:m?m.push(x):x=="{"?(T.push([B,v]),B={},v=void 0):x=="}"?((p=T.pop())[0][p[1]]=B,v=void 0,B=p[0]):x=="-"?_=-1:v===void 0?r.hasOwnProperty(x)?(I+=r[x],v=parseInt(I,16)*_,_=1,I=""):I+=x:r.hasOwnProperty(x)?(L+=r[x],B[v]=parseInt(L,16)*_,_=1,v=void 0,L=""):L+=x;return E},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},A={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var m=h.font,p=d.Unicode[m.postScriptName];p&&(m.metadata.Unicode={},m.metadata.Unicode.widths=p.widths,m.metadata.Unicode.kerning=p.kerning);var v=A.Unicode[m.postScriptName];v&&(m.metadata.Unicode.encoding=v,m.encoding=v.codePages[0])}])}(ur.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(fx(o)),i.metadata=e.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(ur),function(e){function t(){return(Br.canvg?Promise.resolve(Br.canvg):xw(()=>import("./index.es-BL1NbEsT.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}ur.API.addSvgAsImage=function(r,n,a,s,i,o,c,A){if(isNaN(n)||isNaN(a))throw ca.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw ca.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=i;var h=d.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(v){return v.fromString(h,r,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(m)}).then(function(){p.addImage(d.toDataURL("image/jpeg",1),n,a,s,i,c,A)})}}(),ur.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},ur.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),c=[],A=0,d=0,h=0;function m(v,x){var E,_=!1;for(E=0;E<v.length;E+=1)v[E]===x&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=o.length;for(h=0;h<p;h+=1)r[o[h]].value=r[o[h]].defaultValue,r[o[h]].explicitSet=!1}if(Yn(e)==="object"){for(a in e)if(s=e[a],m(o,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&m(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(A=0;A<s.length;A+=1)if(n=!0,s[A].length===1&&typeof s[A][0]=="number")c.push(String(s[A]-1));else if(s[A].length>1){for(d=0;d<s[A].length;d+=1)typeof s[A][d]!="number"&&(n=!1);n===!0&&c.push([s[A][0]-1,s[A][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,x=[];for(v in r)r[v].explicitSet===!0&&(r[v].type==="name"?x.push("/"+v+" /"+r[v].value):x.push("/"+v+" "+r[v].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),A=s.length+i.length+o.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+A+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+o+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(ur.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,i){for(var o,c=i.metadata.Unicode.widths,A=["","0","00","000","0000"],d=[""],h=0,m=s.length;h<m;++h){if(o=i.metadata.characterToGlyph(s.charCodeAt(h)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=s.charCodeAt(h),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(A[4-o.length],o)}return d.join("")},n=function(s){var i,o,c,A,d,h,m;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,m=(o=Object.keys(s).sort(function(p,v){return p-v})).length;h<m;h++)i=o[h],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(A=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),c.push("<"+i+"><"+A+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(i){var o=i.font,c=i.out,A=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var h=o.metadata.Unicode.widths,m=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",v=0;v<m.length;v++)p+=String.fromCharCode(m[v]);var x=A();d({data:p,addLength1:!0,objectId:x}),c("endobj");var E=A();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:E}),c("endobj");var _=A();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Cm(o.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var B=A();c("<<"),c("/Type /Font"),c("/BaseFont /"+Cm(o.fontName)),c("/FontDescriptor "+_+" 0 R"),c("/W "+e.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=A(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+E+" 0 R"),c("/BaseFont /"+Cm(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+B+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(i){var o=i.font,c=i.out,A=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var h=o.metadata.rawData,m="",p=0;p<h.length;p++)m+=String.fromCharCode(h[p]);var v=A();d({data:m,addLength1:!0,objectId:v}),c("endobj");var x=A();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var E=A();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+v+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+Cm(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=A();for(var _=0;_<o.metadata.hmtx.widths.length;_++)o.metadata.hmtx.widths[_]=parseInt(o.metadata.hmtx.widths[_]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+Cm(o.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,o=s.text||"",c=s.x,A=s.y,d=s.options||{},h=s.mutex||{},m=h.pdfEscape,p=h.activeFontKey,v=h.fonts,x=p,E="",_=0,B="",T=v[x].encoding;if(v[x].encoding!=="Identity-H")return{text:o,x:c,y:A,options:d,mutex:h};for(B=o,x=p,Array.isArray(o)&&(B=o[0]),_=0;_<B.length;_+=1)v[x].metadata.hasOwnProperty("cmap")&&(i=v[x].metadata.cmap.unicode.codeMap[B[_].charCodeAt(0)]),i||B[_].charCodeAt(0)<256&&v[x].metadata.hasOwnProperty("Unicode")?E+=B[_]:E+="";var I="";return parseInt(x.slice(1))<14||T==="WinAnsiEncoding"?I=m(E,x).split("").map(function(L){return L.charCodeAt(0).toString(16)}).join(""):T==="Identity-H"&&(I=r(E,v[x])),h.isHex=!0,{text:I,x:c,y:A,options:d,mutex:h}};t.events.push(["postProcessText",function(s){var i=s.text||"",o=[],c={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var A=0;for(A=0;A<i.length;A+=1)Array.isArray(i[A])&&i[A].length===3?o.push([a(Object.assign({},c,{text:i[A][0]})).text,i[A][1],i[A][2]]):o.push(a(Object.assign({},c,{text:i[A]})).text);s.text=o}else s.text=a(Object.assign({},c,{text:i})).text}])}(ur),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(ur.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,i,o,c,A,d,h=t,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),B=!1,T=0;this.__bidiEngine__={};var I=function(j){var F=j.charCodeAt(),P=F>>8,M=x[P];return M!==void 0?h[256*M+(255&F)]:P===252||P===253?"AL":_.test(P)?"L":P===8?"R":"N"},L=function(j){for(var F,P=0;P<j.length;P++){if((F=I(j.charAt(P)))==="L")return!1;if(F==="R")return!0}return!1},k=function(j,F,P,M){var ee,W,te,G,q=F[M];switch(q){case"L":case"R":B=!1;break;case"N":case"AN":break;case"EN":B&&(q="AN");break;case"AL":B=!0,q="R";break;case"WS":q="N";break;case"CS":M<1||M+1>=F.length||(ee=P[M-1])!=="EN"&&ee!=="AN"||(W=F[M+1])!=="EN"&&W!=="AN"?q="N":B&&(W="AN"),q=W===ee?W:"N";break;case"ES":q=(ee=M>0?P[M-1]:"B")==="EN"&&M+1<F.length&&F[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&P[M-1]==="EN"){q="EN";break}if(B){q="N";break}for(te=M+1,G=F.length;te<G&&F[te]==="ET";)te++;q=te<G&&F[te]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(G=F.length,te=M+1;te<G&&F[te]==="NSM";)te++;if(te<G){var z=j[M],Z=z>=1425&&z<=2303||z===64286;if(ee=F[te],Z&&(ee==="R"||ee==="AL")){q="R";break}}}q=M<1||(ee=F[M-1])==="B"?"N":P[M-1];break;case"B":B=!1,a=!0,q=T;break;case"S":s=!0,q="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":B=!1;break;case"BN":q="N"}return q},w=function(j,F,P){var M=j.split("");return P&&y(M,P,{hiLevel:T}),M.reverse(),F&&F.reverse(),M.join("")},y=function(j,F,P){var M,ee,W,te,G,q=-1,z=j.length,Z=0,R=[],K=T?p:m,X=[];for(B=!1,a=!1,s=!1,ee=0;ee<z;ee++)X[ee]=I(j[ee]);for(W=0;W<z;W++){if(G=Z,R[W]=k(j,X,R,W),M=240&(Z=K[G][v[R[W]]]),Z&=15,F[W]=te=K[Z][5],M>0)if(M===16){for(ee=q;ee<W;ee++)F[ee]=1;q=-1}else q=-1;if(K[Z][6])q===-1&&(q=W);else if(q>-1){for(ee=q;ee<W;ee++)F[ee]=te;q=-1}X[W]==="B"&&(F[W]=0),P.hiLevel|=te}s&&function(re,ne,ue){for(var fe=0;fe<ue;fe++)if(re[fe]==="S"){ne[fe]=T;for(var be=fe-1;be>=0&&re[be]==="WS";be--)ne[be]=T}}(X,F,z)},N=function(j,F,P,M,ee){if(!(ee.hiLevel<j)){if(j===1&&T===1&&!a)return F.reverse(),void(P&&P.reverse());for(var W,te,G,q,z=F.length,Z=0;Z<z;){if(M[Z]>=j){for(G=Z+1;G<z&&M[G]>=j;)G++;for(q=Z,te=G-1;q<te;q++,te--)W=F[q],F[q]=F[te],F[te]=W,P&&(W=P[q],P[q]=P[te],P[te]=W);Z=G}Z++}}},U=function(j,F,P){var M=j.split(""),ee={hiLevel:T};return P||(P=[]),y(M,P,ee),function(W,te,G){if(G.hiLevel!==0&&d)for(var q,z=0;z<W.length;z++)te[z]===1&&(q=E.indexOf(W[z]))>=0&&(W[z]=E[q+1])}(M,P,ee),N(2,M,F,P,ee),N(1,M,F,P,ee),M.join("")};return this.__bidiEngine__.doBidiReorder=function(j,F,P){if(function(ee,W){if(W)for(var te=0;te<ee.length;te++)W[te]=te;o===void 0&&(o=L(ee)),A===void 0&&(A=L(ee))}(j,F),i||!c||A)if(i&&c&&o^A)T=o?1:0,j=w(j,F,P);else if(!i&&c&&A)T=o?1:0,j=U(j,F,P),j=w(j,F);else if(!i||o||c||A){if(i&&!c&&o^A)j=w(j,F),o?(T=0,j=U(j,F,P)):(T=1,j=U(j,F,P),j=w(j,F));else if(i&&o&&!c&&A)T=1,j=U(j,F,P),j=w(j,F);else if(!i&&!c&&o^A){var M=d;o?(T=1,j=U(j,F,P),T=0,d=!1,j=U(j,F,P),d=M):(T=0,j=U(j,F,P),j=w(j,F),T=1,d=!1,j=U(j,F,P),d=M,j=w(j,F))}}else T=0,j=U(j,F,P);else T=o?1:0,j=U(j,F,P);return j},this.__bidiEngine__.setOptions=function(j){j&&(i=j.isInputVisual,c=j.isOutputVisual,o=j.isInputRtl,A=j.isOutputRtl,d=j.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),i=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(i=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?i.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):i.push([r.doBidiReorder(a[o])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(ur),ur.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Qf(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new _te(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Ate(this.contents),this.head=new fte(this),this.name=new xte(this),this.cmap=new c7(this),this.toUnicode={},this.hhea=new hte(this),this.maxp=new vte(this),this.hmtx=new bte(this),this.post=new pte(this),this.os2=new mte(this),this.loca=new Cte(this),this.glyf=new wte(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,c,A;for(A=[],i=0,o=(c=this.bbox).length;i<o;i++)t=c[i],A.push(Math.round(t*this.scaleFactor));return A}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,i,o;for(i=0,s=0,o=(t=""+t).length;0<=o?s<o:s>o;s=0<=o?++s:--s)a=t.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Wc,Qf=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,i,o,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^o)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*o+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),Ate=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,i,o,c,A,d,h,m,p,v,x;for(x in p=Object.keys(r).length,c=Math.log(2),h=16*Math.floor(Math.log(p)/c),i=Math.floor(h/c),d=16*p-h,(a=new Qf).writeInt(this.scalarType),a.writeShort(p),a.writeShort(h),a.writeShort(i),a.writeShort(d),s=16*p,A=a.pos+s,o=null,v=[],r)for(m=r[x],a.writeString(x),a.writeInt(e(m)),a.writeInt(A),a.writeInt(m.length),v=v.concat(m),x==="head"&&(o=A),A+=m.length;A%4;)v.push(0),A++;return a.write(v),n=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,i;for(r=u7.call(r);r.length%4;)r.push(0);for(s=new Qf(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),dte={}.hasOwnProperty,Zu=function(e,t){for(var r in t)dte.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Wc=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var fte=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zu(t,Wc),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new Qf).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),y6=function(){function e(t,r){var n,a,s,i,o,c,A,d,h,m,p,v,x,E,_,B,T;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(p=t.readUInt16(),m=p/2,t.pos+=6,s=function(){var I,L;for(L=[],c=I=0;0<=m?I<m:I>m;c=0<=m?++I:--I)L.push(t.readUInt16());return L}(),t.pos+=2,x=function(){var I,L;for(L=[],c=I=0;0<=m?I<m:I>m;c=0<=m?++I:--I)L.push(t.readUInt16());return L}(),A=function(){var I,L;for(L=[],c=I=0;0<=m?I<m:I>m;c=0<=m?++I:--I)L.push(t.readUInt16());return L}(),d=function(){var I,L;for(L=[],c=I=0;0<=m?I<m:I>m;c=0<=m?++I:--I)L.push(t.readUInt16());return L}(),a=(this.length-t.pos+this.offset)/2,o=function(){var I,L;for(L=[],c=I=0;0<=a?I<a:I>a;c=0<=a?++I:--I)L.push(t.readUInt16());return L}(),c=_=0,T=s.length;_<T;c=++_)for(E=s[c],n=B=v=x[c];v<=E?B<=E:B>=E;n=v<=E?++B:--B)d[c]===0?i=n+A[c]:(i=o[d[c]/2+(n-v)-(m-c)]||0)!==0&&(i+=A[c]),this.codeMap[n]=65535&i}t.pos=h}return e.encode=function(t,r){var n,a,s,i,o,c,A,d,h,m,p,v,x,E,_,B,T,I,L,k,w,y,N,U,j,F,P,M,ee,W,te,G,q,z,Z,R,K,X,re,ne,ue,fe,be,Ce,me,oe;switch(M=new Qf,i=Object.keys(t).sort(function(Le,Ye){return Le-Ye}),r){case"macroman":for(x=0,E=function(){var Le=[];for(v=0;v<256;++v)Le.push(0);return Le}(),B={0:0},s={},ee=0,q=i.length;ee<q;ee++)B[be=t[a=i[ee]]]==null&&(B[be]=++x),s[a]={old:t[a],new:B[t[a]]},E[a]=B[t[a]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(E),{charMap:s,subtable:M.data,maxGlyphID:x+1};case"unicode":for(F=[],h=[],T=0,B={},n={},_=A=null,W=0,z=i.length;W<z;W++)B[L=t[a=i[W]]]==null&&(B[L]=++T),n[a]={old:L,new:B[L]},o=B[L]-a,_!=null&&o===A||(_&&h.push(_),F.push(a),A=o),_=a;for(_&&h.push(_),h.push(65535),F.push(65535),U=2*(N=F.length),y=2*Math.pow(Math.log(N)/Math.LN2,2),m=Math.log(y/2)/Math.LN2,w=2*N-y,c=[],k=[],p=[],v=te=0,Z=F.length;te<Z;v=++te){if(j=F[v],d=h[v],j===65535){c.push(0),k.push(0);break}if(j-(P=n[j].new)>=32768)for(c.push(0),k.push(2*(p.length+N-v)),a=G=j;j<=d?G<=d:G>=d;a=j<=d?++G:--G)p.push(n[a].new);else c.push(P-j),k.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*N+2*p.length),M.writeUInt16(0),M.writeUInt16(U),M.writeUInt16(y),M.writeUInt16(m),M.writeUInt16(w),ue=0,R=h.length;ue<R;ue++)a=h[ue],M.writeUInt16(a);for(M.writeUInt16(0),fe=0,K=F.length;fe<K;fe++)a=F[fe],M.writeUInt16(a);for(Ce=0,X=c.length;Ce<X;Ce++)o=c[Ce],M.writeUInt16(o);for(me=0,re=k.length;me<re;me++)I=k[me],M.writeUInt16(I);for(oe=0,ne=p.length;oe<ne;oe++)x=p[oe],M.writeUInt16(x);return{charMap:n,subtable:M.data,maxGlyphID:T+1}}},e}(),c7=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zu(t,Wc),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new y6(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=y6.encode(r,n),(s=new Qf).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),hte=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zu(t,Wc),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),mte=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zu(t,Wc),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),pte=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zu(t,Wc),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(a=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var o,c,A;for(A=[],i=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;i=0<=c?++o:--o)A.push(r.readUInt32());return A}).call(this)}},t}(),gte=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},xte=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zu(t,Wc),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,s,i,o,c,A,d,h,m,p;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(A={},i=h=0,m=a.length;h<m;i=++h)s=a[i],r.pos=s.offset,d=r.readString(s.length),o=new gte(d,s),A[p=s.nameID]==null&&(A[p]=[]),A[s.nameID].push(o);this.strings=A,this.copyright=A[0],this.fontFamily=A[1],this.fontSubfamily=A[2],this.uniqueSubfamily=A[3],this.fontName=A[4],this.version=A[5];try{this.postscriptName=A[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=A[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=A[7],this.manufacturer=A[8],this.designer=A[9],this.description=A[10],this.vendorUrl=A[11],this.designerUrl=A[12],this.license=A[13],this.licenseUrl=A[14],this.preferredFamily=A[15],this.preferredSubfamily=A[17],this.compatibleFull=A[18],this.sampleText=A[19]},t}(),vte=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zu(t,Wc),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),bte=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zu(t,Wc),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,s,i,o,c,A;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,h;for(h=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)h.push(r.readInt16());return h}(),this.widths=(function(){var d,h,m,p;for(p=[],d=0,h=(m=this.metrics).length;d<h;d++)i=m[d],p.push(i.advance);return p}).call(this),a=this.widths[this.widths.length-1],A=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)A.push(this.widths.push(a));return A},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),u7=[].slice,wte=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zu(t,Wc),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,s,i,o,c,A,d,h,m;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,a=i.indexOf(r),(s=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,o=(c=new Qf(n.read(s))).readShort(),d=c.readShort(),m=c.readShort(),A=c.readShort(),h=c.readShort(),this.cache[r]=o===-1?new Ete(c,d,m,A,h):new yte(c,o,d,m,A,h),this.cache[r]))},t.prototype.encode=function(r,n,a){var s,i,o,c,A;for(o=[],i=[],c=0,A=n.length;c<A;c++)s=r[n[c]],i.push(o.length),s&&(o=o.concat(s.encode(a)));return i.push(o.length),{table:o,offsets:i}},t}(),yte=function(){function e(t,r,n,a,s,i){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Ete=function(){function e(t,r,n,a,s){var i,o;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Qf(u7.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),Cte=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zu(t,Wc),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(r.readUInt32());return i}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<a.length;++o)if(a[o]=s,i<n.length&&n[i]==o){++i,a[o]=s;var c=this.offsets[o],A=this.offsets[o+1]-c;A>0&&(s+=A)}for(var d=new Array(4*a.length),h=0;h<a.length;++h)d[4*h+3]=255&a[h],d[4*h+2]=(65280&a[h])>>8,d[4*h+1]=(16711680&a[h])>>16,d[4*h]=(4278190080&a[h])>>24;return d},t}(),_te=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,i,o,c;for(a={},i=0,o=t.length;i<o;i++)a[s=t[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,i,o,c,A,d,h,m,p,v,x,E,_;for(a in n=c7.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(t),p={0:0},_=n.charMap)p[(c=_[a]).old]=c.new;for(v in m=n.maxGlyphID,i)v in p||(p[v]=m++);return d=function(B){var T,I;for(T in I={},B)I[B[T]]=T;return I}(p),h=Object.keys(d).sort(function(B,T){return B-T}),x=function(){var B,T,I;for(I=[],B=0,T=h.length;B<T;B++)o=h[B],I.push(d[o]);return I}(),s=this.font.glyf.encode(i,x,p),A=this.font.loca.encode(s.offsets,x),E={cmap:this.font.cmap.raw(),glyf:s.table,loca:A,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},e}();ur.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var o,c,A;for(A=[],o=0,c=r.length;o<c;o++)n=r[o],A.push(t.convert(n));return A}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+t.convert(i));return s.push(">>"),s.join(`
`)}return""+r},t}();function A7(e,t,r,n,a){n=n||{};var s=1.15,i=a.internal.scaleFactor,o=a.internal.getFontSize()/i,c=a.getLineHeightFactor?a.getLineHeightFactor():s,A=o*c,d=/\r\n|\r|\n/g,h="",m=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(h=typeof e=="string"?e.split(d):e,m=h.length||1),r+=o*(2-s),n.valign==="middle"?r-=m/2*A:n.valign==="bottom"&&(r-=m*A),n.halign==="center"||n.halign==="right"){var p=o;if(n.halign==="center"&&(p*=.5),h&&m>=1){for(var v=0;v<h.length;v++)a.text(h[v],t-a.getStringUnitWidth(h[v])*p,r),r+=A;return a}t-=a.getStringUnitWidth(e)*p}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var E6={},Gm=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:E6=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,c=i.fontName;if(t.font&&(c=t.font),t.fontStyle){o=t.fontStyle;var A=this.getFontList()[c];A&&A.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(A[0]),o=A[0])}if(this.jsPDFDocument.setFont(c,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,s){return this.jsPDFDocument.rect(t,r,n,a,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return E6||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),B4=function(e,t){return B4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},B4(e,t)};function d7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");B4(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var f7=function(e){d7(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function Ste(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Nte(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function ww(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,i){return Math.max(s,i)},0);return a}function h7(e,t,r,n){var a=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:s});var i=m7(a,!1);i&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,i)}function m7(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function Wy(e,t){var r,n,a,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function p7(e,t){var r=Wy(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function Bte(e,t,r,n,a){var s={},i=1.3333333333333333,o=_5(t,function(T){return a.getComputedStyle(T).backgroundColor});o!=null&&(s.fillColor=o);var c=_5(t,function(T){return a.getComputedStyle(T).color});c!=null&&(s.textColor=c);var A=Tte(n,r);A&&(s.cellPadding=A);var d="borderTopColor",h=i*r,m=n.borderTopWidth;if(n.borderBottomWidth===m&&n.borderRightWidth===m&&n.borderLeftWidth===m){var p=(parseFloat(m)||0)/h;p&&(s.lineWidth=p)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/h,right:(parseFloat(n.borderRightWidth)||0)/h,bottom:(parseFloat(n.borderBottomWidth)||0)/h,left:(parseFloat(n.borderLeftWidth)||0)/h},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var v=_5(t,function(T){return a.getComputedStyle(T)[d]});v!=null&&(s.lineColor=v);var x=["left","right","center","justify"];x.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),x=["middle","bottom","top"],x.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var E=parseInt(n.fontSize||"");isNaN(E)||(s.fontSize=E/i);var _=kte(n);_&&(s.fontStyle=_);var B=(n.fontFamily||"").toLowerCase();return e.indexOf(B)!==-1&&(s.font=B),s}function kte(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function _5(e,t){var r=g7(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function g7(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:g7(e.parentElement,t):r}function Tte(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(o){return parseInt(o||"0")/n}),i=Wy(s,0);return a>i.top&&(i.top=a),a>i.bottom&&(i.bottom=a),i}function x7(e,t,r,n,a){var s,i;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var c=Object.keys(e.getFontList()),A=e.scaleFactor(),d=[],h=[],m=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:d,body:h,foot:m};for(var p=0;p<o.rows.length;p++){var v=o.rows[p],x=(i=(s=v==null?void 0:v.parentElement)===null||s===void 0?void 0:s.tagName)===null||i===void 0?void 0:i.toLowerCase(),E=Ite(c,A,r,v,n,a);E&&(x==="thead"?d.push(E):x==="tfoot"?m.push(E):h.push(E))}return{head:d,body:h,foot:m}}function Ite(e,t,r,n,a,s){for(var i=new f7(n),o=0;o<n.cells.length;o++){var c=n.cells[o],A=r.getComputedStyle(c);if(a||A.display!=="none"){var d=void 0;s&&(d=Bte(e,c,t,A,r)),i.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:Fte(c)})}}var h=r.getComputedStyle(n);if(i.length>0&&(a||h.display!=="none"))return i}function Fte(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function jte(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function QA(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])}return s}function v7(e,t){var r=new Gm(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();jte(a,n,t);var s=QA({},a,n,t),i;typeof window<"u"&&(i=window);var o=Dte(a,n,t),c=Rte(a,n,t),A=Lte(r,s),d=Ute(r,s,i);return{id:t.tableId,content:d,hooks:c,styles:o,settings:A}}function Dte(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var A=e[c],d=t[c],h=r[c];n.columnStyles=QA({},A,d,h)}else{var m=[e,t,r],p=m.map(function(v){return v[c]||{}});n[c]=QA({},p[0],p[1],p[2])}},s=0,i=Object.keys(n);s<i.length;s++){var o=i[s];a(o)}return n}function Rte(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,i=n;s<i.length;s++){var o=i[s];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function Lte(e,t){var r,n,a,s,i,o,c,A,d,h,m,p,v=Wy(t.margin,40/e.scaleFactor()),x=(r=Ote(e,t.startY))!==null&&r!==void 0?r:v.top,E;t.showFoot===!0?E="everyPage":t.showFoot===!1?E="never":E=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var _;t.showHead===!0?_="everyPage":t.showHead===!1?_="never":_=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var B=(s=t.useCss)!==null&&s!==void 0?s:!1,T=t.theme||(B?"plain":"striped"),I=!!t.horizontalPageBreak,L=(i=t.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:B,theme:T,startY:x,margin:v,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(A=t.rowPageBreak)!==null&&A!==void 0?A:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:_,showFoot:E,tableLineWidth:(h=t.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(m=t.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:I,horizontalPageBreakRepeat:L,horizontalPageBreakBehaviour:(p=t.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function Ote(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;s=i===a}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function Ute(e,t,r){var n=t.head||[],a=t.body||[],s=t.foot||[];if(t.html){var i=t.includeHiddenHtml;if(r){var o=x7(e,t.html,r,i,t.useCss)||{};n=o.head||n,a=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||Pte(n,a,s);return{columns:c,head:n,body:a,foot:s}}function Pte(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var i=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var c=0;c<i;c++){var A=void 0;Array.isArray(n)?A=a.length:A=s+(c>0?"_".concat(c):"");var d={dataKey:A};a.push(d)}}),a}var k4=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),Mte=function(e){d7(t,e);function t(r,n,a,s,i,o){var c=e.call(this,r,n,o)||this;return c.cell=a,c.row=s,c.column=i,c.section=s.section,c}return t}(k4),Qte=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,s,i){for(var o=0,c=r;o<c.length;o++){var A=c[o],d=new Mte(t,this,n,a,s,i),h=A(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],h)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new k4(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new k4(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),b7=function(){function e(t,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof f7&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,s){var i=n.cells[s.index];if(!i)return 0;var o=r.getLineHeight(i.styles.fontSize),c=i.padding("vertical"),A=c+o;return A>a?A:a},0)},e}(),w7=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var i=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=Wy(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),Hte=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var s=a[n],i=s.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},e}();function Vte(e,t){zte(e,t);var r=[],n=0;t.columns.forEach(function(s){var i=s.getMaxCustomCellWidth(t);i?s.width=i:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=T4(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=T4(r,a,function(s){return s.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),Kte(t),qte(t,e),Gte(t)}function zte(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=p7(e,t);t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var c=o[i],A=s.cells[c.index];if(A){var d=t.hooks.didParseCell;t.callCellHooks(e,d,A,s,c,null);var h=A.padding("horizontal");A.contentWidth=ww(A.text,A.styles,e)+h;var m=ww(A.text.join(" ").split(/[^\S\u00A0]+/),A.styles,e);if(A.minReadableWidth=m+A.padding("horizontal"),typeof A.styles.cellWidth=="number")A.minWidth=A.styles.cellWidth,A.wrappedWidth=A.styles.cellWidth;else if(A.styles.cellWidth==="wrap"||n===!0)A.contentWidth>a?(A.minWidth=a,A.wrappedWidth=a):(A.minWidth=A.contentWidth,A.wrappedWidth=A.contentWidth);else{var p=10/r;A.minWidth=A.styles.minCellWidth||p,A.wrappedWidth=A.contentWidth,A.minWidth>A.wrappedWidth&&(A.wrappedWidth=A.minWidth)}}}}),t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var c=o[i],A=s.cells[c.index];if(A&&A.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,A.wrappedWidth),c.minWidth=Math.max(c.minWidth,A.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,A.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},h=d.cellWidth||d.minCellWidth;h&&typeof h=="number"&&(c.minWidth=h,c.wrappedWidth=h)}A&&(A.colSpan>1&&!c.minWidth&&(c.minWidth=A.minWidth),A.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=A.minWidth))}})}function T4(e,t,r){for(var n=t,a=e.reduce(function(p,v){return p+v.wrappedWidth},0),s=0;s<e.length;s++){var i=e[s],o=i.wrappedWidth/a,c=n*o,A=i.width+c,d=r(i),h=A<d?d:A;t-=h-i.width,i.width=h}if(t=Math.round(t*1e10)/1e10,t){var m=e.filter(function(p){return t<0?p.width>r(p):!0});m.length&&(t=T4(m,t,r))}return t}function Gte(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var s=n[a],i=0,o=e.columns;i<o.length;i++){var c=o[i],A=t[c.index];if(r>1)r--,delete s.cells[c.index];else if(A)A.cell.height+=s.height,r=A.cell.colSpan,delete s.cells[c.index],A.left--,A.left<=1&&delete t[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var h=n.length-a,m=d.rowSpan>h?h:d.rowSpan;t[c.index]={cell:d,left:m,row:s}}}}}function Kte(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,s=0,i=0,o=0;o<e.columns.length;o++){var c=e.columns[o];if(i-=1,i>1&&e.columns[o+1])s+=c.width,delete n.cells[c.index];else if(a){var A=a;delete n.cells[c.index],a=null,A.width=c.width+s}else{var A=n.cells[c.index];if(!A)continue;if(i=A.colSpan,s=0,A.colSpan>1){a=A,s+=c.width;continue}A.width=c.width+s}}}function qte(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var s=a[n],i=0,o=e.columns;i<o.length;i++){var c=o[i],A=s.cells[c.index];if(A){t.applyStyles(A.styles,!0);var d=A.width-A.padding("horizontal");if(A.styles.overflow==="linebreak")A.text=t.splitTextToSize(A.text,d+1/t.scaleFactor(),{fontSize:A.styles.fontSize});else if(A.styles.overflow==="ellipsize")A.text=C6(A.text,d,A.styles,t,"...");else if(A.styles.overflow==="hidden")A.text=C6(A.text,d,A.styles,t,"");else if(typeof A.styles.overflow=="function"){var h=A.styles.overflow(A.text,d);typeof h=="string"?A.text=[h]:A.text=h}A.contentHeight=A.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var m=A.contentHeight/A.rowSpan;A.rowSpan>1&&r.count*r.height<m*A.rowSpan?r={height:m,count:A.rowSpan}:r&&r.count>0&&r.height>m&&(m=r.height),m>s.height&&(s.height=m)}}r.count--}}function C6(e,t,r,n,a){return e.map(function(s){return $te(s,t,r,n,a)})}function $te(e,t,r,n,a){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=ww(e,r,n))return e;for(;t<ww(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function y7(e,t){var r=new Gm(e),n=Wte(t,r.scaleFactor()),a=new Qte(t,n);return Vte(r,a),r.applyStyles(r.userStyles),a}function Wte(e,t){var r=e.content,n=Yte(r.columns);if(r.head.length===0){var a=_6(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=_6(n,"foot");a&&r.foot.push(a)}var s=e.settings.theme,i=e.styles;return{columns:n,head:S5("head",r.head,n,i,s,t),body:S5("body",r.body,n,i,s,t),foot:S5("foot",r.foot,n,i,s,t)}}function S5(e,t,r,n,a,s){var i={},o=t.map(function(c,A){for(var d=0,h={},m=0,p=0,v=0,x=r;v<x.length;v++){var E=x[v];if(i[E.index]==null||i[E.index].left===0)if(p===0){var _=void 0;Array.isArray(c)?_=c[E.index-m-d]:_=c[E.dataKey];var B={};typeof _=="object"&&!Array.isArray(_)&&(B=(_==null?void 0:_.styles)||{});var T=Jte(e,E,A,a,n,s,B),I=new w7(_,T,e);h[E.dataKey]=I,h[E.index]=I,p=I.colSpan-1,i[E.index]={left:I.rowSpan-1,times:p}}else p--,m++;else i[E.index].left--,p=i[E.index].times,d++}return new b7(c,A,e,h)});return o}function _6(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=Xte(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function Xte(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function Yte(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new Hte(a,t,r)})}function Jte(e,t,r,n,a,s,i){var o=Nte(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var A=QA({},o.table,o[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},h=e==="body"?d:{},m=e==="body"&&r%2===0?QA({},o.alternateRow,a.alternateRowStyles):{},p=Ste(s),v=QA({},p,A,m,h);return QA(v,i)}function Zte(e,t,r){var n;r===void 0&&(r={});var a=p7(e,t),s=new Map,i=[],o=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(m){var p=t.columns.find(function(v){return v.dataKey===m||v.index===m});p&&!s.has(p.index)&&(s.set(p.index,!0),i.push(p.index),o.push(t.columns[p.index]),a-=p.wrappedWidth)});for(var A=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(s.has(d)){d++;continue}var h=t.columns[d].wrappedWidth;if(A||a>=h)A=!1,i.push(d),o.push(t.columns[d]),a-=h;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function ere(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=Zte(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function E7(e,t){var r=t.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},i=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+a.bottom+i;if(r.pageBreak==="avoid"){var c=t.body,A=c.reduce(function(m,p){return m+p.height},0);o+=A}var d=new Gm(e);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(_7(d),s.y=a.top),t.callWillDrawPageHooks(d,s);var h=QA({},s);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?tre(d,t,h,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(m){return td(d,t,m,s,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(m,p){var v=p===t.body.length-1;yw(d,t,m,v,h,s,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(m){return td(d,t,m,s,t.columns)})),h7(d,t,h,s),t.callEndPageHooks(d,s),t.finalY=s.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function tre(e,t,r,n){var a=ere(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(A,d){e.applyStyles(e.userStyles),d>0?hx(e,t,r,n,A.columns,!0):S6(e,t,n,A.columns),rre(e,t,r,n,A.columns),N5(e,t,n,A.columns)});else for(var i=-1,o=a[0],c=function(){var A=i;if(o){e.applyStyles(e.userStyles);var d=o.columns;i>=0?hx(e,t,r,n,d,!0):S6(e,t,n,d),A=N6(e,t,i+1,n,d),N5(e,t,n,d)}var h=A-i;a.slice(1).forEach(function(m){e.applyStyles(e.userStyles),hx(e,t,r,n,m.columns,!0),N6(e,t,i+1,n,m.columns,h),N5(e,t,n,m.columns)}),i=A};i<t.body.length-1;)c()}function S6(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(s){return td(e,t,s,r,n)})}function rre(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(s,i){var o=i===t.body.length-1;yw(e,t,s,o,r,n,a)})}function N6(e,t,r,n,a,s){e.applyStyles(e.userStyles),s=s??t.body.length;var i=Math.min(r+s,t.body.length),o=-1;return t.body.slice(r,i).forEach(function(c,A){var d=r+A===t.body.length-1,h=C7(e,t,d,n);c.canEntireRowFit(h,a)&&(td(e,t,c,n,a),o=r+A)}),o}function N5(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(s){return td(e,t,s,r,n)})}function nre(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),s=Math.floor((t-a)/n);return Math.max(0,s)}function are(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var s=0,i=0,o=r.columns;i<o.length;i++){var c=o[i],A=e.cells[c.index];if(A){Array.isArray(A.text)||(A.text=[A.text]);var d=new w7(A.raw,A.styles,A.section);d=QA(d,A),d.text=[];var h=nre(A,t,n);A.text.length>h&&(d.text=A.text.splice(h,A.text.length));var m=n.scaleFactor(),p=n.getLineHeightFactor();A.contentHeight=A.getContentHeight(m,p),A.contentHeight>=t&&(A.contentHeight=t,d.styles.minCellHeight-=t),A.contentHeight>e.height&&(e.height=A.contentHeight),d.contentHeight=d.getContentHeight(m,p),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var v=new b7(e.raw,-1,e.section,a,!0);v.height=s;for(var x=0,E=r.columns;x<E.length;x++){var c=E[x],d=v.cells[c.index];d&&(d.height=v.height);var A=e.cells[c.index];A&&(A.height=e.height)}return v}function sre(e,t,r,n){var a=e.pageSize().height,s=n.settings.margin,i=s.top+s.bottom,o=a-i;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),A=c<r;if(c>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!A)return!1;var d=t.hasRowSpan(n.columns),h=t.getMaxCellHeight(n.columns)>o;return h?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function yw(e,t,r,n,a,s,i){var o=C7(e,t,n,s);if(r.canEntireRowFit(o,i))td(e,t,r,s,i);else if(sre(e,r,o,t)){var c=are(r,o,t,e);td(e,t,r,s,i),hx(e,t,a,s,i),yw(e,t,c,n,a,s,i)}else hx(e,t,a,s,i),yw(e,t,r,n,a,s,i)}function td(e,t,r,n,a){n.x=t.settings.margin.left;for(var s=0,i=a;s<i.length;s++){var o=i[s],c=r.cells[o.index];if(!c){n.x+=o.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var A=t.callCellHooks(e,t.hooks.willDrawCell,c,r,o,n);if(A===!1){n.x+=o.width;continue}ire(e,c,n);var d=c.getTextPos();A7(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,o,n),n.x+=o.width}n.y+=r.height}function ire(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=m7(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),ore(e,t,r,n.lineWidth))}function ore(e,t,r,n){var a,s,i,o;n.top&&(a=r.x,s=r.y,i=r.x+t.width,o=r.y,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,i,o)),n.bottom&&(a=r.x,s=r.y+t.height,i=r.x+t.width,o=r.y+t.height,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,i,o)),n.left&&(a=r.x,s=r.y,i=r.x,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.left,a,s,i,o)),n.right&&(a=r.x+t.width,s=r.y,i=r.x+t.width,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.right,a,s,i,o));function c(A,d,h,m,p){e.getDocument().setLineWidth(A),e.getDocument().line(d,h,m,p,"S")}}function C7(e,t,r,n){var a=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function hx(e,t,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(o){return td(e,t,o,n,a)}),t.callEndPageHooks(e,n);var i=t.settings.margin;h7(e,t,r,n),_7(e),t.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return td(e,t,o,n,a)}),e.applyStyles(e.userStyles))}function _7(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function lre(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=v7(this,n),s=y7(this,a);return E7(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){A7(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return Gm.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){Gm.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Gm(this),s=x7(a,t,window,r,!1),i=s.head,o=s.body,c=((n=i[0])===null||n===void 0?void 0:n.map(function(A){return A.content}))||[];return{columns:c,rows:o,data:o}}}var B5;function ic(e,t){var r=v7(e,t),n=y7(e,r);E7(e,n)}try{if(typeof window<"u"&&window){var B6=window,k6=B6.jsPDF||((B5=B6.jspdf)===null||B5===void 0?void 0:B5.jsPDF);k6&&lre(k6)}}catch(e){console.error("Could not apply autoTable plugin",e)}const ZN="evaluaciones_pruebas",eB="evaluaciones_rubricas_estaticas",tB="evaluaciones_rubricas_interactivas",cre="usuarios",Xy=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},ure=e=>{const t=nr(Ft(kt,ZN),en("fechaCreacion","desc"));return br(t,n=>{e(n.docs.map(a=>Xy(a)))},n=>{console.error("Error al suscribirse a las pruebas:",n),e([])})},Are=async e=>{try{const{id:t,...r}=e,n=vr(kt,ZN,t);await no(n,{...r,fechaCreacion:Ar.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la prueba:",t),new Error("No se pudo guardar la prueba.")}},dre=async e=>{try{await zs(vr(kt,ZN,e))}catch(t){throw console.error("Error al eliminar la prueba:",t),new Error("No se pudo eliminar la prueba.")}},fre=e=>{const t=nr(Ft(kt,eB),en("fechaCreacion","desc"));return br(t,n=>{e(n.docs.map(a=>Xy(a)))},n=>{console.error("Error al suscribirse a las rúbricas estáticas:",n),e([])})},hre=async e=>{try{const{id:t,...r}=e,n=vr(kt,eB,t);await no(n,{...r,fechaCreacion:Ar.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la rúbrica estática:",t),new Error("No se pudo guardar la rúbrica.")}},mre=async e=>{try{await zs(vr(kt,eB,e))}catch(t){throw console.error("Error al eliminar la rúbrica estática:",t),new Error("No se pudo eliminar la rúbrica.")}},pre=e=>{const t=nr(Ft(kt,tB));return br(t,n=>{e(n.docs.map(a=>Xy(a)))},n=>{console.error("Error al suscribirse a las rúbricas interactivas:",n),e([])})},gre=async e=>{try{const{id:t,...r}=e,n=vr(kt,tB,t);await no(n,r)}catch(t){throw console.error("Error al guardar la rúbrica interactiva:",t),new Error("No se pudo guardar la rúbrica interactiva.")}},xre=async e=>{try{return(await ha(Ft(kt,tB),e)).id}catch(t){throw console.error("Error al crear la rúbrica interactiva:",t),new Error("No se pudo crear la rúbrica interactiva.")}},vre=e=>{const t=nr(Ft(kt,cre));return br(t,n=>{e(n.docs.map(a=>Xy(a)))},n=>{console.error("Error al suscribirse a los usuarios:",n),e([])})},bre=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],T6={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},N2=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},wre=({open:e})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):l.jsxs(l.Fragment,{children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),yre=({item:e,index:t,showAnswers:r})=>{const n=Q.useMemo(()=>e.tipo==="Términos pareados"?[...e.pares.map(a=>a.definicion)].sort(()=>Math.random()-.5):[],[e]);return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[t+1,". ",e.pregunta," (",e.puntaje," pts)"]}),e.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:e.habilidadBloom})]}),e.tipo==="Selección múltiple"&&l.jsx("div",{className:"ml-4 mt-2 space-y-2",children:e.opciones.map((a,s)=>{const i=r&&s===e.respuestaCorrecta;return l.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[l.jsx("div",{className:"w-5 h-5 border rounded-full"}),l.jsxs("span",{children:[String.fromCharCode(65+s),") ",a]})]},s)})}),e.tipo==="Desarrollo"&&l.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),e.tipo==="Verdadero o Falso"&&l.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[l.jsx("span",{children:"V ___ F ___"}),r&&l.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",e.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),e.tipo==="Términos pareados"&&l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),l.jsx("div",{className:"space-y-2",children:e.pares.map((a,s)=>l.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[s+1,". ",a.concepto]},s))})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),l.jsx("div",{className:"space-y-2",children:n.map((a,s)=>l.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:a},s))})]})]}),r&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[l.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),l.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:e.pares.map((a,s)=>l.jsxs("li",{children:[l.jsx("strong",{children:a.concepto})," → ",a.definicion]},s))})]})]}),e.tipo==="Comprensión de lectura"&&l.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[l.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:e.texto}),e.preguntas.map((a,s)=>{if(a.tipo==="Selección múltiple"){const i=a;return l.jsxs("div",{className:"pt-2",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),l.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,c)=>{const A=r&&c===i.respuestaCorrecta;return l.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${A?"bg-green-100 dark:bg-green-900/50":""}`,children:[l.jsx("div",{className:"w-5 h-5 border rounded-full"}),l.jsxs("span",{children:[String.fromCharCode(65+c),") ",o]})]},c)})})]},a.id)}if(a.tipo==="Desarrollo"){const i=a;return l.jsxs("div",{className:"pt-2",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),l.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},a.id)}return null})]})]},e.id)},Ere=()=>{const[e,t]=Q.useState([]),[r,n]=Q.useState(null),[a,s]=Q.useState(!1),[i,o]=Q.useState(!1),[c,A]=Q.useState(null),[d,h]=Q.useState(!1),m={nombre:"",asignatura:yi[0],nivel:km[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[p,v]=Q.useState(m);Q.useEffect(()=>{const w=ure(t);return()=>w()},[]);const x=w=>{const{name:y,value:N}=w.target;v(U=>({...U,[y]:N}))},E=w=>{v(y=>{const N={...y.tiposActividad};return N[w]?delete N[w]:N[w]=T6[w][0],{...y,tiposActividad:N}})},_=(w,y)=>{v(N=>({...N,tiposActividad:{...N.tiposActividad,[w]:y}}))},B=w=>{v(y=>{const N=y.selectedNee.includes(w)?y.selectedNee.filter(U=>U!==w):[...y.selectedNee,w];return{...y,selectedNee:N}})},T=async w=>{if(w.preventDefault(),!p.nombre.trim()||!p.contenido.trim()||Object.keys(p.tiposActividad).length===0){A("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),A(null);const y=Object.entries(p.tiposActividad).map(([j,F])=>`- ${F} ítem(s) de tipo '${j}'`).join(`
`),N=p.isNee&&p.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${p.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",U=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${p.nombre}
            - Asignatura: ${p.asignatura}
            - Nivel: ${p.nivel}
            - Contenido a evaluar: "${p.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${y}
            - Nivel de Dificultad General: ${p.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${N}

            Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
               - 'instrucciones': Instrucciones para esa actividad específica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de ítem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numérico.
                   - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales según el tipo:
                       - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensión de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{up("Evaluación - Pruebas");const j="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",te=(await(await new Is(j).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(U)).response).text().replace(/^```json\s*|```\s*$/g,""),G=JSON.parse(te);let q=0;G.actividades.forEach(Z=>{Z.items.forEach(R=>{q+=R.puntaje||0,R.tipo==="Comprensión de lectura"&&R.preguntas&&R.preguntas.forEach(K=>{q+=K.puntaje||0})})});const z={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:p.nombre,asignatura:p.asignatura,nivel:p.nivel,contenidoOriginal:p.contenido,tiposActividadOriginal:p.tiposActividad,objetivo:G.objetivo,instruccionesGenerales:G.instruccionesGenerales,puntajeIdeal:q,actividades:G.actividades,dificultad:p.dificultad,...p.isNee&&{adaptacionNEE:p.selectedNee}};n(z),h(!1)}catch(j){console.error(j),A("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{s(!1)}},I=async()=>{if(r)try{await Are(r),alert("Prueba guardada con éxito.")}catch(w){console.error(w),alert("No se pudo guardar la prueba.")}},L=async w=>{if(window.confirm("¿Eliminar esta prueba?"))try{await dre(w),(r==null?void 0:r.id)===w&&n(null)}catch(y){console.error(y),alert("No se pudo eliminar la prueba.")}},k=async w=>{o(!0);const y=new ur("p","mm","a4"),N=20,U=y.internal.pageSize.getHeight(),j=y.internal.pageSize.getWidth(),F=j-N*2;let P=N;const M=te=>{te.setFillColor(230,230,230),te.rect(0,0,j,25,"F"),te.setFontSize(9),te.setTextColor(0,0,0),te.text("LICEO INDUSTRIAL DE RECOLETA",N,15,{align:"left"}),te.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",j-N,15,{align:"right"})};M(y),P=30,y.setTextColor(0,0,0),y.setFont("helvetica","bold"),y.setFontSize(16),y.text(w.nombre,j/2,P,{align:"center"}),P+=10,ic(y,{startY:P,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},w.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},w.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},w.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:w.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:w.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:te=>{M(y)}}),P=y.lastAutoTable.finalY+10;const ee=te=>{P+te>U-N&&(y.addPage(),M(y),P=N+15,y.setTextColor(0,0,0))},W=(te,G)=>{y.setFont("helvetica",G.isBold?"bold":"normal"),y.setFontSize(G.fontSize);const q=Array.isArray(te)?te.join(`
`):te;return y.getTextDimensions(q,{maxWidth:G.width}).h};for(const te of w.actividades){let G=W(te.titulo,{fontSize:12,width:F,isBold:!0})+W(te.instrucciones,{fontSize:10,width:F})+12;ee(G),y.setFont("helvetica","bold"),y.setFontSize(12),y.setTextColor(0,0,0),y.text(te.titulo,N,P),P+=8,y.setFont("helvetica","normal"),y.setFontSize(10);const q=y.splitTextToSize(te.instrucciones,F);y.text(q,N,P),P+=q.length*(10*.35*1.15)+4;for(const[z,Z]of te.items.entries()){let R=0;const K=`${z+1}. ${Z.pregunta} (${Z.puntaje} pts)`;switch(R+=W(K,{fontSize:10,width:F,isBold:!0}),Z.tipo){case"Selección múltiple":Z.opciones.forEach(ne=>{R+=W(ne,{fontSize:10,width:F-5})+3}),R+=7;break;case"Verdadero o Falso":R+=10;break;case"Desarrollo":R+=30;break;case"Términos pareados":R+=Z.pares.length*12+20;break;case"Comprensión de lectura":const re=Z;R+=W(re.texto,{fontSize:10,width:F-10})+10,re.preguntas.forEach(ne=>{const ue=`${ne.pregunta} (${ne.puntaje} pts)`;R+=W(ue,{fontSize:10,width:F-5,isBold:!0}),ne.tipo==="Selección múltiple"?(ne.opciones.forEach(fe=>{R+=W(fe,{fontSize:10,width:F-10})+3}),R+=7):ne.tipo==="Desarrollo"&&(R+=30),R+=5}),R+=15;break}ee(R),y.setFont("helvetica","bold"),y.setFontSize(10),y.setTextColor(0,0,0);const X=y.splitTextToSize(K,F);if(y.text(X,N,P),P+=X.length*5+4,y.setFont("helvetica","normal"),Z.tipo==="Selección múltiple")Z.opciones.forEach((re,ne)=>{y.text(`${String.fromCharCode(65+ne)}) ${re}`,N+5,P),P+=7});else if(Z.tipo==="Verdadero o Falso")y.text("V ______    F ______",N+5,P),P+=10;else if(Z.tipo==="Desarrollo")y.setDrawColor(200,200,200),y.setFillColor(245,245,245),y.rect(N,P,F,25,"FD"),P+=30;else if(Z.tipo==="Términos pareados"){const re=[...Z.pares.map(ue=>ue.definicion)].sort(()=>Math.random()-.5),ne=Z.pares.map((ue,fe)=>[`${fe+1}. ${ue.concepto}`,`(   ) ${re[fe]}`]);ic(y,{startY:P,head:[["Columna A: Concepto","Columna B: Definición"]],body:ne,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:ue=>M(y)}),P=y.lastAutoTable.finalY+10}else if(Z.tipo==="Comprensión de lectura"){const re=Z;y.setFillColor(240,240,240),y.setDrawColor(200,200,200);const ne=y.splitTextToSize(re.texto,F-10),ue=ne.length*(10*.35*1.15)+8;y.rect(N,P,F,ue,"FD"),P+=4,y.setFont("helvetica","normal"),y.setFontSize(10),y.setTextColor(0,0,0),y.text(ne,N+5,P),P+=ue;for(const[fe,be]of re.preguntas.entries()){const Ce=`${fe+1}. ${be.pregunta} (${be.puntaje} pts)`;y.setFont("helvetica","bold");const me=y.splitTextToSize(Ce,F-5);y.text(me,N+5,P),P+=me.length*5+4,y.setFont("helvetica","normal"),be.tipo==="Selección múltiple"?be.opciones.forEach((oe,Le)=>{y.text(`${String.fromCharCode(65+Le)}) ${oe}`,N+10,P),P+=7}):be.tipo==="Desarrollo"&&(y.setDrawColor(200,200,200),y.setFillColor(245,245,245),y.rect(N+5,P,F-5,25,"FD"),P+=30)}}P+=5}}y.save(`${w.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return r?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>h(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[l.jsx(wre,{open:!d})," ",l.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),l.jsx("button",{onClick:I,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),l.jsxs("button",{onClick:()=>k(r),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":l.jsx(TU,{})," PDF"]})]})]}),l.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[l.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[l.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),l.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),l.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),l.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),l.jsxs("p",{className:"text-right",children:[l.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),l.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[l.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&l.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(w=>l.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[l.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:w.titulo}),l.jsx("p",{className:"italic text-sm mb-4",children:w.instrucciones}),l.jsx("div",{className:"space-y-6",children:w.items.map((y,N)=>l.jsx(yre,{item:y,index:N,showAnswers:d},y.id))})]},w.id))]})]}):l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),l.jsxs("form",{onSubmit:T,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",name:"nombre",value:p.nombre,onChange:x,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),l.jsx("div",{}),l.jsx("select",{name:"asignatura",value:p.asignatura,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:yi.map(w=>l.jsx("option",{children:w},w))}),l.jsx("select",{name:"nivel",value:p.nivel,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:km.map(w=>l.jsx("option",{children:w},w))})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),l.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((w,y)=>l.jsx("button",{type:"button",onClick:()=>v(N=>({...N,dificultad:w})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${y===0?"rounded-l-lg":""} ${y===2?"rounded-r-lg":""}
                                            ${p.dificultad===w?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:w},w))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:p.isNee,onChange:w=>v(y=>({...y,isNee:w.target.checked,selectedNee:w.target.checked?y.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),p.isNee&&l.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:gw.map(w=>l.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:p.selectedNee.includes(w),onChange:()=>B(w),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:w})]},w))})]})]})]}),l.jsx("textarea",{name:"contenido",value:p.contenido,onChange:x,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("div",{className:"space-y-3",children:bre.map(w=>l.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:!!p.tiposActividad[w],onChange:()=>E(w),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:w})]}),p.tiposActividad[w]&&l.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[l.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),T6[w].map(y=>l.jsx("button",{type:"button",onClick:()=>_(w,y),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${p.tiposActividad[w]===y?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:y},y))]})]},w))}),c&&l.jsx("p",{className:"text-red-500 text-sm",children:c}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),l.jsx("div",{className:"space-y-2",children:e.length>0?e.map(w=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:w.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[w.asignatura," - ",w.nivel," (",new Date(w.fechaCreacion).toLocaleDateString(),")"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>n(w),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),l.jsx("button",{onClick:()=>L(w.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},w.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},Cre=({rubricas:e,onSave:t,onDelete:r,onCreate:n})=>{const[a,s]=Q.useState(null),[i,o]=Q.useState("list"),[c,A]=Q.useState(!1),[d,h]=Q.useState(""),m=async(L,k)=>{if(!L.trim()||!k.trim()){alert("El título y la descripción son obligatorios.");return}A(!0);const w=`Crea una rúbrica de evaluación detallada sobre "${L}" con el propósito de "${k}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,y={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{up("Evaluación - Rúbricas");const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",M=(await(await new Is(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:w}]}],generationConfig:{responseMimeType:"application/json",responseSchema:y}})).response).text(),ee=JSON.parse(M),W={id:crypto.randomUUID(),titulo:L,descripcion:k,fechaCreacion:new Date().toISOString(),dimensiones:ee.map(te=>({id:crypto.randomUUID(),nombre:te.dimension,niveles:{insuficiente:te.insuficiente,suficiente:te.suficiente,competente:te.competente,avanzado:te.avanzado}}))};s(W)}catch(N){console.error(N),alert("Error al generar la rúbrica con IA.")}finally{A(!1)}},p=async()=>{if(!d.trim()||!a)return;const L=crypto.randomUUID(),k={id:L,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};s(N=>N?{...N,dimensiones:[...N.dimensiones,k]}:null),h("");const w=`Para una rúbrica sobre "${a.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${d}". Considera las dimensiones existentes como contexto: ${a.dimensiones.map(N=>N.nombre).join(", ")}. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,y={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{up("Evaluación - Rúbricas (Añadir Dimensión)");const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",M=(await(await new Is(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:w}]}],generationConfig:{responseMimeType:"application/json",responseSchema:y}})).response).text(),ee=JSON.parse(M);s(W=>W?{...W,dimensiones:W.dimensiones.map(te=>te.id===L?{...te,niveles:ee,isLoading:!1}:te)}:null)}catch(N){console.error("Error generating dimension descriptors:",N),alert("No se pudieron generar los descriptores."),s(U=>U?{...U,dimensiones:U.dimensiones.filter(j=>j.id!==L)}:null)}},v=()=>{if(!a)return;e.some(k=>k.id===a.id)?t(a):n(a),o("list"),s(null)},x=L=>{s(L),o("form")},E=()=>{s({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},_=(L,k,w)=>{a&&s(y=>y?{...y,dimensiones:y.dimensiones.map(N=>N.id!==L?N:k==="nombre"?{...N,nombre:w}:{...N,niveles:{...N.niveles,[k]:w}})}:null)},B=(L,k)=>{s(w=>w?{...w,[L]:k}:null)},T=L=>{a&&s(k=>k?{...k,dimensiones:k.dimensiones.filter(w=>w.id!==L)}:null)},I=()=>{if(!a)return null;const L="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",k=`${L} resize-none text-sm`;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),l.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),l.jsx("input",{value:a.titulo,onChange:w=>B("titulo",w.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${L} mt-1`})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),l.jsx("textarea",{value:a.descripcion,onChange:w=>B("descripcion",w.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${L} mt-1`})]})]}),a.dimensiones.length===0&&l.jsx("div",{className:"text-center py-4",children:l.jsx("button",{onClick:()=>m(a.titulo,a.descripcion),disabled:c||!a.titulo||!a.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:c?"Generando...":"✨ Generar Rúbrica con IA"})}),a.dimensiones.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:l.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(w=>l.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:w},w))})}),l.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.dimensiones.map(w=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-2 w-1/5",children:l.jsx("textarea",{value:w.nombre,onChange:y=>_(w.id,"nombre",y.target.value),rows:4,className:k})}),Object.keys(w.niveles).map(y=>l.jsx("td",{className:"p-2 w-1/5",children:w.isLoading?l.jsx("div",{className:"flex justify-center items-center h-full",children:l.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):l.jsx("textarea",{value:w.niveles[y],onChange:N=>_(w.id,y,N.target.value),rows:4,className:k})},y)),l.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:l.jsx("button",{onClick:()=>T(w.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},w.id))})]})}),l.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),l.jsx("input",{value:d,onChange:w=>h(w.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${L} mt-1`})]}),l.jsx("button",{onClick:p,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),l.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:l.jsx("button",{onClick:v,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return i==="list"?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),l.jsx("button",{onClick:E,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(L=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:L.titulo}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:L.descripcion})]}),l.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>x(L),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),l.jsx("button",{onClick:()=>r(L.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},L.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):I()},_re=({allUsers:e,rubricasEstaticas:t})=>{const[r,n]=Q.useState([]),[a,s]=Q.useState(null),[i,o]=Q.useState(null),[c,A]=Q.useState({rubricaEstaticaId:"",curso:""}),[d,h]=Q.useState(null);Q.useEffect(()=>{const B=pre(n);return()=>B()},[]);const m=async B=>{B.preventDefault();const T=t.find(L=>L.id===c.rubricaEstaticaId);if(!T||!c.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const I={nombre:T.titulo,curso:c.curso,asignatura:"N/A",rubricaEstaticaId:T.id,resultados:{}};try{await xre(I),A({rubricaEstaticaId:"",curso:""})}catch(L){console.error(L),alert("No se pudo crear la evaluación con rúbrica.")}},p=B=>{s(B),o(JSON.parse(JSON.stringify(B)))},v=(B,T,I)=>{i&&o(L=>{if(!L)return null;const k=JSON.parse(JSON.stringify(L));return k.resultados[B]||(k.resultados[B]={puntajes:{},feedback:""}),k.resultados[B].puntajes[T]=I,k})},x=async()=>{if(i)try{await gre(i),s(i),alert("Cambios guardados.")}catch(B){console.error(B),alert("No se pudieron guardar los cambios.")}},E=Q.useCallback(B=>{const T=i,I=t.find(U=>U.id===(T==null?void 0:T.rubricaEstaticaId));if(!T||!I)return{score:0,maxScore:0,grade:"N/A"};const L=I.dimensiones.length*4,k=T.resultados[B];if(!k)return{score:0,maxScore:L,grade:"1.0"};const w=Object.values(k.puntajes).reduce((U,j)=>U+j,0),y=1+6*(w/L),N=L>0?y.toFixed(1):"1.0";return{score:w,maxScore:L,grade:N}},[i,t]),_=async B=>{if(!i)return;const T=t.find(w=>w.id===i.rubricaEstaticaId),I=i.resultados[B];if(!T||!I||Object.keys(I.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}h(B);const k=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${T.dimensiones.map(w=>`${w.nombre}: ${I.puntajes[w.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluación es "${T.titulo}". Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{up("Evaluación - Rúbricas Interactivas (Feedback)");const w="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",F=(await(await new Is(w).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(k)).response).text();o(P=>{if(!P)return null;const M=JSON.parse(JSON.stringify(P));return M.resultados[B].feedback=F.replace(/(\*\*|\*)/g,""),M})}catch(w){console.error(w),alert("Error al generar feedback.")}finally{h(null)}};if(a&&i){const B=t.find(I=>I.id===a.rubricaEstaticaId),T=e.filter(I=>I.profile===Gt.ESTUDIANTE&&N2(I.curso||"")===a.curso).map(I=>I.nombreCompleto).sort();return B?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:a.nombre}),l.jsx("p",{className:"text-slate-500",children:a.curso})]}),l.jsx("button",{onClick:()=>s(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),B.dimensiones.map(I=>l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:I.nombre},I.id)),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),l.jsx("tbody",{children:T.map(I=>{var y;const{score:L,maxScore:k,grade:w}=E(I);return l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:I}),B.dimensiones.map(N=>l.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:l.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(U=>{var j;return l.jsx("button",{onClick:()=>v(I,N.id,U),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((j=i.resultados[I])==null?void 0:j.puntajes[N.id])===U?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:U},U)})})},N.id)),l.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[L,"/",k]}),l.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:w}),l.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:l.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[l.jsx("p",{className:"text-xs w-full",children:((y=i.resultados[I])==null?void 0:y.feedback)||"Sin generar"}),l.jsx("button",{onClick:()=>_(I),disabled:d===I,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===I?"...":"Generar IA"})]})})]},I)})})]})}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx("button",{onClick:x,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):l.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",l.jsx("button",{onClick:()=>s(null),children:"Volver"})]})}return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),l.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsxs("select",{value:c.rubricaEstaticaId,onChange:B=>A({...c,rubricaEstaticaId:B.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),t.map(B=>l.jsx("option",{value:B.id,children:B.titulo},B.id))]}),l.jsxs("select",{value:c.curso,onChange:B=>A({...c,curso:B.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un Curso"}),qa.map(B=>l.jsx("option",{value:B,children:B},B))]}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),l.jsx("div",{className:"space-y-2",children:r.map(B=>l.jsxs("button",{onClick:()=>p(B),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[l.jsx("p",{className:"font-semibold",children:B.nombre}),l.jsx("p",{className:"text-sm text-slate-500",children:B.curso})]},B.id))})]})]})},Sre=({allUsers:e})=>{const[t,r]=Q.useState(""),n=Q.useMemo(()=>Array.from(new Set(e.filter(s=>s.profile===Gt.ESTUDIANTE&&s.curso).map(s=>N2(s.curso)))).sort(),[e]),a=Q.useMemo(()=>{const s=e.filter(i=>i.profile===Gt.ESTUDIANTE);return t?s.filter(i=>N2(i.curso||"")===t).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):s.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[e,t]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",l.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),l.jsxs("select",{id:"curso-filter",value:t,onChange:s=>r(s.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(s=>l.jsx("option",{value:s,children:s},s))]})]}),l.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:a.length>0?a.map(s=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:s.nombreCompleto}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:N2(s.curso||"")}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:s.email})]},s.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},Nre=()=>{const[e,t]=Q.useState("pruebas"),[r,n]=Q.useState([]),[a,s]=Q.useState([]),[i,o]=Q.useState(!0);Q.useEffect(()=>{o(!0);const h=vre(n),m=fre(p=>{s(p),o(!1)});return()=>{h(),m()}},[]);const c=async h=>{try{await hre(h)}catch(m){console.error(m),alert("No se pudo guardar la rúbrica.")}},A=async h=>{try{await mre(h)}catch(m){console.error(m),alert("No se pudo eliminar la rúbrica.")}},d=({tabName:h,label:m})=>l.jsx("button",{onClick:()=>t(h),className:`${e===h?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:m});return i?l.jsx("div",{className:"text-center py-10",children:"Cargando módulo de evaluaciones..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx(d,{tabName:"pruebas",label:"Pruebas y Guías"}),l.jsx(d,{tabName:"rubricas",label:"Generador de Rúbricas"}),l.jsx(d,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),l.jsx(d,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),l.jsxs("div",{className:"mt-6",children:[e==="pruebas"&&l.jsx(Ere,{}),e==="rubricas"&&l.jsx(Cre,{rubricas:a,onSave:c,onDelete:A,onCreate:c}),e==="rubricasInteractivas"&&l.jsx(_re,{allUsers:r,rubricasEstaticas:a}),e==="nominas"&&l.jsx(Sre,{allUsers:r})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Ew={};Ew.version="0.18.5";var S7=1252,Bre=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],rB={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},nB=function(e){Bre.indexOf(e)!=-1&&(S7=rB[0]=e)};function kre(){nB(1252)}var Mc=function(e){nB(e)};function aB(){Mc(1200),kre()}function I6(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function Tre(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function N7(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Kg=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Tre(e.slice(2)):t==254&&r==255?N7(e.slice(2)):t==65279?e.slice(1):e},ub=function(t){return String.fromCharCode(t)},F6=function(t){return String.fromCharCode(t)},zx,mf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Gx(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0,c=0,A=0;A<e.length;)r=e.charCodeAt(A++),s=r>>2,n=e.charCodeAt(A++),i=(r&3)<<4|n>>4,a=e.charCodeAt(A++),o=(n&15)<<2|a>>6,c=a&63,isNaN(n)?o=c=64:isNaN(a)&&(c=64),t+=mf.charAt(s)+mf.charAt(i)+mf.charAt(o)+mf.charAt(c);return t}function vl(e){var t="",r=0,n=0,a=0,s=0,i=0,o=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var A=0;A<e.length;)s=mf.indexOf(e.charAt(A++)),i=mf.indexOf(e.charAt(A++)),r=s<<2|i>>4,t+=String.fromCharCode(r),o=mf.indexOf(e.charAt(A++)),n=(i&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),c=mf.indexOf(e.charAt(A++)),a=(o&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var Zr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),cd=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Hf(e){return Zr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function j6(e){return Zr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var fl=function(t){return Zr?cd(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function Yy(e){if(typeof ArrayBuffer>"u")return fl(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Xf(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Ire(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function sB(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return sB(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var ai=Zr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:cd(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function Fre(e){for(var t=[],r=0,n=e.length+250,a=Hf(e.length+255),s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=e.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|o>>6&15|(i&3)<<4,a[r++]=128|o&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(t.push(a.slice(0,r)),r=0,a=Hf(65535),n=65530)}return t.push(a.slice(0,r)),ai(t)}var po=/\u0000/g,qg=/[\u0001-\u0006]/g;function Km(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Qc(e,t){var r=""+e;return r.length>=t?r:Ga("0",t-r.length)+r}function iB(e,t){var r=""+e;return r.length>=t?r:Ga(" ",t-r.length)+r}function Cw(e,t){var r=""+e;return r.length>=t?r:r+Ga(" ",t-r.length)}function jre(e,t){var r=""+Math.round(e);return r.length>=t?r:Ga("0",t-r.length)+r}function Dre(e,t){var r=""+e;return r.length>=t?r:Ga("0",t-r.length)+r}var D6=Math.pow(2,32);function tm(e,t){if(e>D6||e<-D6)return jre(e,t);var r=Math.round(e);return Dre(r,t)}function _w(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var R6=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],k5=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Rre(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Sr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},L6={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Lre={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Sw(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,i=1,o=0,c=1,A=0,d=0,h=Math.floor(a);A<t&&(h=Math.floor(a),o=h*i+s,d=h*A+c,!(a-h<5e-8));)a=1/(a-h),s=i,i=o,c=A,A=d;if(d>t&&(A>t?(d=c,o=s):(d=A,o=i)),!r)return[0,n*o,d];var m=Math.floor(n*o/d);return[m,n*o-m*d,d]}function Dh(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,i=[],o={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=Hre(c,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var B7=new Date(1899,11,31,0,0,0),Ore=B7.getTime(),Ure=new Date(1900,2,1,0,0,0);function k7(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Ure&&(r+=1440*60*1e3),(r-(Ore+(e.getTimezoneOffset()-B7.getTimezoneOffset())*6e4))/(1440*60*1e3)}function oB(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Pre(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Mre(e){var t=e<0?12:11,r=oB(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Qre(e){var t=oB(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Kx(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Mre(e):t===10?r=e.toFixed(10).substr(0,12):r=Qre(e),oB(Pre(r.toUpperCase()))}function n0(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Kx(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return lc(14,k7(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Hre(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Vre(e,t,r,n){var a="",s=0,i=0,o=r.y,c,A=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:c=o%100,A=2;break;default:c=o%1e4,A=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,A=t.length;break;case 3:return k5[r.m-1][1];case 5:return k5[r.m-1][0];default:return k5[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,A=t.length;break;case 3:return R6[r.q][0];default:return R6[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,A=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,A=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,A=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Qc(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),t==="s"?s===0?"0":""+s/i:(a=Qc(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}A=t.length===3?1:2;break;case 101:c=o,A=1;break}var d=A>0?Qc(c,A):"";return d}function pf(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var T7=/%/g;function zre(e,t,r){var n=t.replace(T7,""),a=t.length-n.length;return GA(e,n,r*Math.pow(10,2*a))+Ga("%",a)}function Gre(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return GA(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function I7(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+I7(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,A,d){return c+A+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var F7=/# (\?+)( ?)\/( ?)(\d+)/;function Kre(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),i=a-s*n,o=n;return r+(s===0?"":""+s)+" "+(i===0?Ga(" ",e[1].length+1+e[4].length):iB(i,e[1].length)+e[2]+"/"+e[3]+Qc(o,e[4].length))}function qre(e,t,r){return r+(t===0?"":""+t)+Ga(" ",e[1].length+2+e[4].length)}var j7=/^#*0*\.([0#]+)/,D7=/\).*[0#]/,R7=/\(###\) ###\\?-####/;function Ao(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function O6(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function U6(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function $re(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Wre(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Kl(e,t,r){if(e.charCodeAt(0)===40&&!t.match(D7)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Kl("n",n,r):"("+Kl("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Gre(e,t,r);if(t.indexOf("%")!==-1)return zre(e,t,r);if(t.indexOf("E")!==-1)return I7(t,r);if(t.charCodeAt(0)===36)return"$"+Kl(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,c=Math.abs(r),A=r<0?"-":"";if(t.match(/^00+$/))return A+tm(c,t.length);if(t.match(/^[#?]+$/))return a=tm(r,0),a==="0"&&(a=""),a.length>t.length?a:Ao(t.substr(0,t.length-a.length))+a;if(s=t.match(F7))return Kre(s,c,A);if(t.match(/^#+0+$/))return A+tm(c,t.length-t.indexOf("0"));if(s=t.match(j7))return a=O6(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Ao(s[1])).replace(/\.$/,"."+Ao(s[1])).replace(/\.(\d*)$/,function(v,x){return"."+x+Ga("0",Ao(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return A+O6(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return A+pf(tm(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Kl(e,t,-r):pf(""+(Math.floor(r)+$re(r,s[1].length)))+"."+Qc(U6(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return Kl(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Km(Kl(e,t.replace(/[\\-]/g,""),r)),i=0,Km(Km(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return i<a.length?a.charAt(i++):v==="0"?"0":""}));if(t.match(R7))return a=Kl(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=Sw(c,Math.pow(10,i)-1,!1),a=""+A,d=GA("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=Cw(o[2],i),d.length<s[4].length&&(d=Ao(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=Sw(c,Math.pow(10,i)-1,!0),A+(o[0]||(o[1]?"":"0"))+" "+(o[1]?iB(o[1],i)+s[2]+"/"+s[3]+Cw(o[2],i):Ga(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=tm(r,0),t.length<=a.length?a:Ao(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var h=t.indexOf(".")-i,m=t.length-a.length-h;return Ao(t.substr(0,h)+a+t.substr(t.length-m))}if(s=t.match(/^00,000\.([#0]*0)$/))return i=U6(r,s[1].length),r<0?"-"+Kl(e,t,-r):pf(Wre(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Qc(0,3-v.length):"")+v})+"."+Qc(i,s[1].length);switch(t){case"###,##0.00":return Kl(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=pf(tm(c,0));return p!=="0"?A+p:"";case"###,###.00":return Kl(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Kl(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Xre(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return GA(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Yre(e,t,r){var n=t.replace(T7,""),a=t.length-n.length;return GA(e,n,r*Math.pow(10,2*a))+Ga("%",a)}function L7(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+L7(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,A,d){return c+A+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Fu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(D7)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Fu("n",n,r):"("+Fu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Xre(e,t,r);if(t.indexOf("%")!==-1)return Yre(e,t,r);if(t.indexOf("E")!==-1)return L7(t,r);if(t.charCodeAt(0)===36)return"$"+Fu(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,c=Math.abs(r),A=r<0?"-":"";if(t.match(/^00+$/))return A+Qc(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:Ao(t.substr(0,t.length-a.length))+a;if(s=t.match(F7))return qre(s,c,A);if(t.match(/^#+0+$/))return A+Qc(c,t.length-t.indexOf("0"));if(s=t.match(j7))return a=(""+r).replace(/^([^\.]+)$/,"$1."+Ao(s[1])).replace(/\.$/,"."+Ao(s[1])),a=a.replace(/\.(\d*)$/,function(v,x){return"."+x+Ga("0",Ao(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return A+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return A+pf(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Fu(e,t,-r):pf(""+r)+"."+Ga("0",s[1].length);if(s=t.match(/^#,#*,#0/))return Fu(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Km(Fu(e,t.replace(/[\\-]/g,""),r)),i=0,Km(Km(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return i<a.length?a.charAt(i++):v==="0"?"0":""}));if(t.match(R7))return a=Fu(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=Sw(c,Math.pow(10,i)-1,!1),a=""+A,d=GA("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=Cw(o[2],i),d.length<s[4].length&&(d=Ao(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=Sw(c,Math.pow(10,i)-1,!0),A+(o[0]||(o[1]?"":"0"))+" "+(o[1]?iB(o[1],i)+s[2]+"/"+s[3]+Cw(o[2],i):Ga(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:Ao(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var h=t.indexOf(".")-i,m=t.length-a.length-h;return Ao(t.substr(0,h)+a+t.substr(t.length-m))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Fu(e,t,-r):pf(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Qc(0,3-v.length):"")+v})+"."+Qc(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=pf(""+c);return p!=="0"?A+p:"";default:if(t.match(/\.[0#?]*$/))return Fu(e,t.slice(0,t.lastIndexOf(".")),r)+Ao(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function GA(e,t,r){return(r|0)===r?Fu(e,t,r):Kl(e,t,r)}function Jre(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var O7=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function kp(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":_w(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(O7))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Zre(e,t,r,n){for(var a=[],s="",i=0,o="",c="t",A,d,h,m="H";i<e.length;)switch(o=e.charAt(i)){case"G":if(!_w(e,i))throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(h=e.charCodeAt(++i))!==34&&i<e.length;)s+=String.fromCharCode(h);a[a.length]={t:"t",v:s},++i;break;case"\\":var p=e.charAt(++i),v=p==="("||p===")"?p:"t";a[a.length]={t:v,v:p},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(A==null&&(A=Dh(t,r,e.charAt(i+1)==="2"),A==null))return"";a[a.length]={t:"X",v:e.substr(i,2)},c=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||A==null&&(A=Dh(t,r),A==null))return"";for(s=o;++i<e.length&&e.charAt(i).toLowerCase()===o;)s+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=m),a[a.length]={t:o,v:s},c=o;break;case"A":case"a":case"上":var x={t:o,v:o};if(A==null&&(A=Dh(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(A!=null&&(x.v=A.H>=12?"P":"A"),x.t="T",m="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(A!=null&&(x.v=A.H>=12?"PM":"AM"),x.t="T",i+=5,m="h"):e.substr(i,5).toUpperCase()==="上午/下午"?(A!=null&&(x.v=A.H>=12?"下午":"上午"),x.t="T",i+=5,m="h"):(x.t="t",++i),A==null&&x.t==="T")return"";a[a.length]=x,c=o;break;case"[":for(s=o;e.charAt(i++)!=="]"&&i<e.length;)s+=e.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(O7)){if(A==null&&(A=Dh(t,r),A==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",kp(e)||(a[a.length]={t:"t",v:s}));break;case".":if(A!=null){for(s=o;++i<e.length&&(o=e.charAt(i))==="0";)s+=o;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++i<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(i))>-1;)s+=o;a[a.length]={t:"n",v:s};break;case"?":for(s=o;e.charAt(++i)===o;)s+=o;a[a.length]={t:o,v:s},c=o;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)s+=e.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:o,v:o},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"t",v:o},++i;break}var E=0,_=0,B;for(i=a.length-1,c="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=m,c="h",E<1&&(E=1);break;case"s":(B=a[i].v.match(/\.0+$/))&&(_=Math.max(_,B[0].length-1)),E<3&&(E=3);case"d":case"y":case"M":case"e":c=a[i].t;break;case"m":c==="s"&&(a[i].t="M",E<2&&(E=2));break;case"X":break;case"Z":E<1&&a[i].v.match(/[Hh]/)&&(E=1),E<2&&a[i].v.match(/[Mm]/)&&(E=2),E<3&&a[i].v.match(/[Ss]/)&&(E=3)}switch(E){case 0:break;case 1:A.u>=.5&&(A.u=0,++A.S),A.S>=60&&(A.S=0,++A.M),A.M>=60&&(A.M=0,++A.H);break;case 2:A.u>=.5&&(A.u=0,++A.S),A.S>=60&&(A.S=0,++A.M);break}var T="",I;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=Vre(a[i].t.charCodeAt(0),a[i].v,A,_),a[i].t="t";break;case"n":case"?":for(I=i+1;a[I]!=null&&((o=a[I].t)==="?"||o==="D"||(o===" "||o==="t")&&a[I+1]!=null&&(a[I+1].t==="?"||a[I+1].t==="t"&&a[I+1].v==="/")||a[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[I].v==="/"||a[I].v===" "&&a[I+1]!=null&&a[I+1].t=="?"));)a[i].v+=a[I].v,a[I]={v:"",t:";"},++I;T+=a[i].v,i=I-1;break;case"G":a[i].t="t",a[i].v=n0(t,r);break}var L="",k,w;if(T.length>0){T.charCodeAt(0)==40?(k=t<0&&T.charCodeAt(0)===45?-t:t,w=GA("n",T,k)):(k=t<0&&n>1?-t:t,w=GA("n",T,k),k<0&&a[0]&&a[0].t=="t"&&(w=w.substr(1),a[0].v="-"+a[0].v)),I=w.length-1;var y=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){y=i;break}var N=a.length;if(y===a.length&&w.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(I>=a[i].v.length-1?(I-=a[i].v.length,a[i].v=w.substr(I+1,a[i].v.length)):I<0?a[i].v="":(a[i].v=w.substr(0,I+1),I=-1),a[i].t="t",N=i);I>=0&&N<a.length&&(a[N].v=w.substr(0,I+1)+a[N].v)}else if(y!==a.length&&w.indexOf("E")===-1){for(I=w.indexOf(".")-1,i=y;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===y?a[i].v.indexOf(".")-1:a[i].v.length-1,L=a[i].v.substr(d+1);d>=0;--d)I>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(L=w.charAt(I--)+L);a[i].v=L,a[i].t="t",N=i}for(I>=0&&N<a.length&&(a[N].v=w.substr(0,I+1)+a[N].v),I=w.indexOf(".")+1,i=y;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==y)){for(d=a[i].v.indexOf(".")>-1&&i===y?a[i].v.indexOf(".")+1:0,L=a[i].v.substr(0,d);d<a[i].v.length;++d)I<w.length&&(L+=w.charAt(I++));a[i].v=L,a[i].t="t",N=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(k=n>1&&t<0&&i>0&&a[i-1].v==="-"?-t:t,a[i].v=GA(a[i].t,a[i].v,k),a[i].t="t");var U="";for(i=0;i!==a.length;++i)a[i]!=null&&(U+=a[i].v);return U}var P6=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function M6(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function ene(e,t){var r=Jre(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(P6),o=r[1].match(P6);return M6(t,i)?[n,r[0]]:M6(t,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,s]}function lc(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Sr)[e],n==null&&(n=r.table&&r.table[L6[e]]||Sr[L6[e]]),n==null&&(n=Lre[e]||"General");break}if(_w(n,0))return n0(t,r);t instanceof Date&&(t=k7(t,r.date1904));var a=ene(n,t);if(_w(a[1]))return n0(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Zre(a[1],t,r,a[0])}function KA(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Sr[r]==null){t<0&&(t=r);continue}if(Sr[r]==e){t=r;break}}t<0&&(t=391)}return Sr[t]=e,t}function Jy(e){for(var t=0;t!=392;++t)e[t]!==void 0&&KA(e[t],t)}function Tp(){Sr=Rre()}var tne={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},U7=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function rne(e){var t=typeof e=="number"?Sr[e]:e;return t=t.replace(U7,"(\\d+)"),new RegExp("^"+t+"$")}function nne(e,t,r){var n=-1,a=-1,s=-1,i=-1,o=-1,c=-1;(t.match(U7)||[]).forEach(function(h,m){var p=parseInt(r[m+1],10);switch(h.toLowerCase().charAt(0)){case"y":n=p;break;case"d":s=p;break;case"h":i=p;break;case"s":c=p;break;case"m":i>=0?o=p:a=p;break}}),c>=0&&o==-1&&a>=0&&(o=a,a=-1);var A=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);A.length==7&&(A="0"+A),A.length==8&&(A="20"+A);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&o==-1&&c==-1?A:n==-1&&a==-1&&s==-1?d:A+"T"+d}var ane=function(){var e={};e.version="1.2.0";function t(){for(var w=0,y=new Array(256),N=0;N!=256;++N)w=N,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,y[N]=w;return typeof Int32Array<"u"?new Int32Array(y):y}var r=t();function n(w){var y=0,N=0,U=0,j=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(U=0;U!=256;++U)j[U]=w[U];for(U=0;U!=256;++U)for(N=w[U],y=256+U;y<4096;y+=256)N=j[y]=N>>>8^w[N&255];var F=[];for(U=1;U!=16;++U)F[U-1]=typeof Int32Array<"u"?j.subarray(U*256,U*256+256):j.slice(U*256,U*256+256);return F}var a=n(r),s=a[0],i=a[1],o=a[2],c=a[3],A=a[4],d=a[5],h=a[6],m=a[7],p=a[8],v=a[9],x=a[10],E=a[11],_=a[12],B=a[13],T=a[14];function I(w,y){for(var N=y^-1,U=0,j=w.length;U<j;)N=N>>>8^r[(N^w.charCodeAt(U++))&255];return~N}function L(w,y){for(var N=y^-1,U=w.length-15,j=0;j<U;)N=T[w[j++]^N&255]^B[w[j++]^N>>8&255]^_[w[j++]^N>>16&255]^E[w[j++]^N>>>24]^x[w[j++]]^v[w[j++]]^p[w[j++]]^m[w[j++]]^h[w[j++]]^d[w[j++]]^A[w[j++]]^c[w[j++]]^o[w[j++]]^i[w[j++]]^s[w[j++]]^r[w[j++]];for(U+=15;j<U;)N=N>>>8^r[(N^w[j++])&255];return~N}function k(w,y){for(var N=y^-1,U=0,j=w.length,F=0,P=0;U<j;)F=w.charCodeAt(U++),F<128?N=N>>>8^r[(N^F)&255]:F<2048?(N=N>>>8^r[(N^(192|F>>6&31))&255],N=N>>>8^r[(N^(128|F&63))&255]):F>=55296&&F<57344?(F=(F&1023)+64,P=w.charCodeAt(U++)&1023,N=N>>>8^r[(N^(240|F>>8&7))&255],N=N>>>8^r[(N^(128|F>>2&63))&255],N=N>>>8^r[(N^(128|P>>6&15|(F&3)<<4))&255],N=N>>>8^r[(N^(128|P&63))&255]):(N=N>>>8^r[(N^(224|F>>12&15))&255],N=N>>>8^r[(N^(128|F>>6&63))&255],N=N>>>8^r[(N^(128|F&63))&255]);return~N}return e.table=r,e.bstr=I,e.buf=L,e.str=k,e}(),hr=function(){var t={};t.version="1.2.1";function r(Ae,Ne){for(var ye=Ae.split("/"),Ee=Ne.split("/"),_e=0,Be=0,$e=Math.min(ye.length,Ee.length);_e<$e;++_e){if(Be=ye[_e].length-Ee[_e].length)return Be;if(ye[_e]!=Ee[_e])return ye[_e]<Ee[_e]?-1:1}return ye.length-Ee.length}function n(Ae){if(Ae.charAt(Ae.length-1)=="/")return Ae.slice(0,-1).indexOf("/")===-1?Ae:n(Ae.slice(0,-1));var Ne=Ae.lastIndexOf("/");return Ne===-1?Ae:Ae.slice(0,Ne+1)}function a(Ae){if(Ae.charAt(Ae.length-1)=="/")return a(Ae.slice(0,-1));var Ne=Ae.lastIndexOf("/");return Ne===-1?Ae:Ae.slice(Ne+1)}function s(Ae,Ne){typeof Ne=="string"&&(Ne=new Date(Ne));var ye=Ne.getHours();ye=ye<<6|Ne.getMinutes(),ye=ye<<5|Ne.getSeconds()>>>1,Ae.write_shift(2,ye);var Ee=Ne.getFullYear()-1980;Ee=Ee<<4|Ne.getMonth()+1,Ee=Ee<<5|Ne.getDate(),Ae.write_shift(2,Ee)}function i(Ae){var Ne=Ae.read_shift(2)&65535,ye=Ae.read_shift(2)&65535,Ee=new Date,_e=ye&31;ye>>>=5;var Be=ye&15;ye>>>=4,Ee.setMilliseconds(0),Ee.setFullYear(ye+1980),Ee.setMonth(Be-1),Ee.setDate(_e);var $e=Ne&31;Ne>>>=5;var st=Ne&63;return Ne>>>=6,Ee.setHours(Ne),Ee.setMinutes(st),Ee.setSeconds($e<<1),Ee}function o(Ae){vi(Ae,0);for(var Ne={},ye=0;Ae.l<=Ae.length-4;){var Ee=Ae.read_shift(2),_e=Ae.read_shift(2),Be=Ae.l+_e,$e={};switch(Ee){case 21589:ye=Ae.read_shift(1),ye&1&&($e.mtime=Ae.read_shift(4)),_e>5&&(ye&2&&($e.atime=Ae.read_shift(4)),ye&4&&($e.ctime=Ae.read_shift(4))),$e.mtime&&($e.mt=new Date($e.mtime*1e3));break}Ae.l=Be,Ne[Ee]=$e}return Ne}var c;function A(){return c||(c={})}function d(Ae,Ne){if(Ae[0]==80&&Ae[1]==75)return Lr(Ae,Ne);if((Ae[0]|32)==109&&(Ae[1]|32)==105)return js(Ae,Ne);if(Ae.length<512)throw new Error("CFB file size "+Ae.length+" < 512");var ye=3,Ee=512,_e=0,Be=0,$e=0,st=0,ze=0,Ze=[],rt=Ae.slice(0,512);vi(rt,0);var yt=h(rt);switch(ye=yt[0],ye){case 3:Ee=512;break;case 4:Ee=4096;break;case 0:if(yt[1]==0)return Lr(Ae,Ne);default:throw new Error("Major Version: Expected 3 or 4 saw "+ye)}Ee!==512&&(rt=Ae.slice(0,Ee),vi(rt,28));var It=Ae.slice(0,Ee);m(rt,ye);var Qt=rt.read_shift(4,"i");if(ye===3&&Qt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Qt);rt.l+=4,$e=rt.read_shift(4,"i"),rt.l+=4,rt.chk("00100000","Mini Stream Cutoff Size: "),st=rt.read_shift(4,"i"),_e=rt.read_shift(4,"i"),ze=rt.read_shift(4,"i"),Be=rt.read_shift(4,"i");for(var Tt=-1,Lt=0;Lt<109&&(Tt=rt.read_shift(4,"i"),!(Tt<0));++Lt)Ze[Lt]=Tt;var pr=p(Ae,Ee);E(ze,Be,pr,Ee,Ze);var Vr=B(pr,$e,Ze,Ee);Vr[$e].name="!Directory",_e>0&&st!==P&&(Vr[st].name="!MiniFAT"),Vr[Ze[0]].name="!FAT",Vr.fat_addrs=Ze,Vr.ssz=Ee;var zr={},Wr=[],Ra=[],_i=[];T($e,Vr,pr,Wr,_e,zr,Ra,st),v(Ra,_i,Wr),Wr.shift();var La={FileIndex:Ra,FullPaths:_i};return Ne&&Ne.raw&&(La.raw={header:It,sectors:pr}),La}function h(Ae){if(Ae[Ae.l]==80&&Ae[Ae.l+1]==75)return[0,0];Ae.chk(M,"Header Signature: "),Ae.l+=16;var Ne=Ae.read_shift(2,"u");return[Ae.read_shift(2,"u"),Ne]}function m(Ae,Ne){var ye=9;switch(Ae.l+=2,ye=Ae.read_shift(2)){case 9:if(Ne!=3)throw new Error("Sector Shift: Expected 9 saw "+ye);break;case 12:if(Ne!=4)throw new Error("Sector Shift: Expected 12 saw "+ye);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ye)}Ae.chk("0600","Mini Sector Shift: "),Ae.chk("000000000000","Reserved: ")}function p(Ae,Ne){for(var ye=Math.ceil(Ae.length/Ne)-1,Ee=[],_e=1;_e<ye;++_e)Ee[_e-1]=Ae.slice(_e*Ne,(_e+1)*Ne);return Ee[ye-1]=Ae.slice(ye*Ne),Ee}function v(Ae,Ne,ye){for(var Ee=0,_e=0,Be=0,$e=0,st=0,ze=ye.length,Ze=[],rt=[];Ee<ze;++Ee)Ze[Ee]=rt[Ee]=Ee,Ne[Ee]=ye[Ee];for(;st<rt.length;++st)Ee=rt[st],_e=Ae[Ee].L,Be=Ae[Ee].R,$e=Ae[Ee].C,Ze[Ee]===Ee&&(_e!==-1&&Ze[_e]!==_e&&(Ze[Ee]=Ze[_e]),Be!==-1&&Ze[Be]!==Be&&(Ze[Ee]=Ze[Be])),$e!==-1&&(Ze[$e]=Ee),_e!==-1&&Ee!=Ze[Ee]&&(Ze[_e]=Ze[Ee],rt.lastIndexOf(_e)<st&&rt.push(_e)),Be!==-1&&Ee!=Ze[Ee]&&(Ze[Be]=Ze[Ee],rt.lastIndexOf(Be)<st&&rt.push(Be));for(Ee=1;Ee<ze;++Ee)Ze[Ee]===Ee&&(Be!==-1&&Ze[Be]!==Be?Ze[Ee]=Ze[Be]:_e!==-1&&Ze[_e]!==_e&&(Ze[Ee]=Ze[_e]));for(Ee=1;Ee<ze;++Ee)if(Ae[Ee].type!==0){if(st=Ee,st!=Ze[st])do st=Ze[st],Ne[Ee]=Ne[st]+"/"+Ne[Ee];while(st!==0&&Ze[st]!==-1&&st!=Ze[st]);Ze[Ee]=-1}for(Ne[0]+="/",Ee=1;Ee<ze;++Ee)Ae[Ee].type!==2&&(Ne[Ee]+="/")}function x(Ae,Ne,ye){for(var Ee=Ae.start,_e=Ae.size,Be=[],$e=Ee;ye&&_e>0&&$e>=0;)Be.push(Ne.slice($e*F,$e*F+F)),_e-=F,$e=kh(ye,$e*4);return Be.length===0?dt(0):ai(Be).slice(0,Ae.size)}function E(Ae,Ne,ye,Ee,_e){var Be=P;if(Ae===P){if(Ne!==0)throw new Error("DIFAT chain shorter than expected")}else if(Ae!==-1){var $e=ye[Ae],st=(Ee>>>2)-1;if(!$e)return;for(var ze=0;ze<st&&(Be=kh($e,ze*4))!==P;++ze)_e.push(Be);E(kh($e,Ee-4),Ne-1,ye,Ee,_e)}}function _(Ae,Ne,ye,Ee,_e){var Be=[],$e=[];_e||(_e=[]);var st=Ee-1,ze=0,Ze=0;for(ze=Ne;ze>=0;){_e[ze]=!0,Be[Be.length]=ze,$e.push(Ae[ze]);var rt=ye[Math.floor(ze*4/Ee)];if(Ze=ze*4&st,Ee<4+Ze)throw new Error("FAT boundary crossed: "+ze+" 4 "+Ee);if(!Ae[rt])break;ze=kh(Ae[rt],Ze)}return{nodes:Be,data:J6([$e])}}function B(Ae,Ne,ye,Ee){var _e=Ae.length,Be=[],$e=[],st=[],ze=[],Ze=Ee-1,rt=0,yt=0,It=0,Qt=0;for(rt=0;rt<_e;++rt)if(st=[],It=rt+Ne,It>=_e&&(It-=_e),!$e[It]){ze=[];var Tt=[];for(yt=It;yt>=0;){Tt[yt]=!0,$e[yt]=!0,st[st.length]=yt,ze.push(Ae[yt]);var Lt=ye[Math.floor(yt*4/Ee)];if(Qt=yt*4&Ze,Ee<4+Qt)throw new Error("FAT boundary crossed: "+yt+" 4 "+Ee);if(!Ae[Lt]||(yt=kh(Ae[Lt],Qt),Tt[yt]))break}Be[It]={nodes:st,data:J6([ze])}}return Be}function T(Ae,Ne,ye,Ee,_e,Be,$e,st){for(var ze=0,Ze=Ee.length?2:0,rt=Ne[Ae].data,yt=0,It=0,Qt;yt<rt.length;yt+=128){var Tt=rt.slice(yt,yt+128);vi(Tt,64),It=Tt.read_shift(2),Qt=hB(Tt,0,It-Ze),Ee.push(Qt);var Lt={name:Qt,type:Tt.read_shift(1),color:Tt.read_shift(1),L:Tt.read_shift(4,"i"),R:Tt.read_shift(4,"i"),C:Tt.read_shift(4,"i"),clsid:Tt.read_shift(16),state:Tt.read_shift(4,"i"),start:0,size:0},pr=Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2);pr!==0&&(Lt.ct=I(Tt,Tt.l-8));var Vr=Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2);Vr!==0&&(Lt.mt=I(Tt,Tt.l-8)),Lt.start=Tt.read_shift(4,"i"),Lt.size=Tt.read_shift(4,"i"),Lt.size<0&&Lt.start<0&&(Lt.size=Lt.type=0,Lt.start=P,Lt.name=""),Lt.type===5?(ze=Lt.start,_e>0&&ze!==P&&(Ne[ze].name="!StreamData")):Lt.size>=4096?(Lt.storage="fat",Ne[Lt.start]===void 0&&(Ne[Lt.start]=_(ye,Lt.start,Ne.fat_addrs,Ne.ssz)),Ne[Lt.start].name=Lt.name,Lt.content=Ne[Lt.start].data.slice(0,Lt.size)):(Lt.storage="minifat",Lt.size<0?Lt.size=0:ze!==P&&Lt.start!==P&&Ne[ze]&&(Lt.content=x(Lt,Ne[ze].data,(Ne[st]||{}).data))),Lt.content&&vi(Lt.content,0),Be[Qt]=Lt,$e.push(Lt)}}function I(Ae,Ne){return new Date((Al(Ae,Ne+4)/1e7*Math.pow(2,32)+Al(Ae,Ne)/1e7-11644473600)*1e3)}function L(Ae,Ne){return A(),d(c.readFileSync(Ae),Ne)}function k(Ae,Ne){var ye=Ne&&Ne.type;switch(ye||Zr&&Buffer.isBuffer(Ae)&&(ye="buffer"),ye||"base64"){case"file":return L(Ae,Ne);case"base64":return d(fl(vl(Ae)),Ne);case"binary":return d(fl(Ae),Ne)}return d(Ae,Ne)}function w(Ae,Ne){var ye=Ne||{},Ee=ye.root||"Root Entry";if(Ae.FullPaths||(Ae.FullPaths=[]),Ae.FileIndex||(Ae.FileIndex=[]),Ae.FullPaths.length!==Ae.FileIndex.length)throw new Error("inconsistent CFB structure");Ae.FullPaths.length===0&&(Ae.FullPaths[0]=Ee+"/",Ae.FileIndex[0]={name:Ee,type:5}),ye.CLSID&&(Ae.FileIndex[0].clsid=ye.CLSID),y(Ae)}function y(Ae){var Ne="Sh33tJ5";if(!hr.find(Ae,"/"+Ne)){var ye=dt(4);ye[0]=55,ye[1]=ye[3]=50,ye[2]=54,Ae.FileIndex.push({name:Ne,type:2,content:ye,size:4,L:69,R:69,C:69}),Ae.FullPaths.push(Ae.FullPaths[0]+Ne),N(Ae)}}function N(Ae,Ne){w(Ae);for(var ye=!1,Ee=!1,_e=Ae.FullPaths.length-1;_e>=0;--_e){var Be=Ae.FileIndex[_e];switch(Be.type){case 0:Ee?ye=!0:(Ae.FileIndex.pop(),Ae.FullPaths.pop());break;case 1:case 2:case 5:Ee=!0,isNaN(Be.R*Be.L*Be.C)&&(ye=!0),Be.R>-1&&Be.L>-1&&Be.R==Be.L&&(ye=!0);break;default:ye=!0;break}}if(!(!ye&&!Ne)){var $e=new Date(1987,1,19),st=0,ze=Object.create?Object.create(null):{},Ze=[];for(_e=0;_e<Ae.FullPaths.length;++_e)ze[Ae.FullPaths[_e]]=!0,Ae.FileIndex[_e].type!==0&&Ze.push([Ae.FullPaths[_e],Ae.FileIndex[_e]]);for(_e=0;_e<Ze.length;++_e){var rt=n(Ze[_e][0]);Ee=ze[rt],Ee||(Ze.push([rt,{name:a(rt).replace("/",""),type:1,clsid:W,ct:$e,mt:$e,content:null}]),ze[rt]=!0)}for(Ze.sort(function(Qt,Tt){return r(Qt[0],Tt[0])}),Ae.FullPaths=[],Ae.FileIndex=[],_e=0;_e<Ze.length;++_e)Ae.FullPaths[_e]=Ze[_e][0],Ae.FileIndex[_e]=Ze[_e][1];for(_e=0;_e<Ze.length;++_e){var yt=Ae.FileIndex[_e],It=Ae.FullPaths[_e];if(yt.name=a(It).replace("/",""),yt.L=yt.R=yt.C=-(yt.color=1),yt.size=yt.content?yt.content.length:0,yt.start=0,yt.clsid=yt.clsid||W,_e===0)yt.C=Ze.length>1?1:-1,yt.size=0,yt.type=5;else if(It.slice(-1)=="/"){for(st=_e+1;st<Ze.length&&n(Ae.FullPaths[st])!=It;++st);for(yt.C=st>=Ze.length?-1:st,st=_e+1;st<Ze.length&&n(Ae.FullPaths[st])!=n(It);++st);yt.R=st>=Ze.length?-1:st,yt.type=1}else n(Ae.FullPaths[_e+1]||"")==n(It)&&(yt.R=_e+1),yt.type=2}}}function U(Ae,Ne){var ye=Ne||{};if(ye.fileType=="mad")return Kt(Ae,ye);switch(N(Ae),ye.fileType){case"zip":return Vn(Ae,ye)}var Ee=function(Qt){for(var Tt=0,Lt=0,pr=0;pr<Qt.FileIndex.length;++pr){var Vr=Qt.FileIndex[pr];if(Vr.content){var zr=Vr.content.length;zr>0&&(zr<4096?Tt+=zr+63>>6:Lt+=zr+511>>9)}}for(var Wr=Qt.FullPaths.length+3>>2,Ra=Tt+7>>3,_i=Tt+127>>7,La=Ra+Lt+Wr+_i,ps=La+127>>7,Za=ps<=109?0:Math.ceil((ps-109)/127);La+ps+Za+127>>7>ps;)Za=++ps<=109?0:Math.ceil((ps-109)/127);var Ds=[1,Za,ps,_i,Wr,Lt,Tt,0];return Qt.FileIndex[0].size=Tt<<6,Ds[7]=(Qt.FileIndex[0].start=Ds[0]+Ds[1]+Ds[2]+Ds[3]+Ds[4]+Ds[5])+(Ds[6]+7>>3),Ds}(Ae),_e=dt(Ee[7]<<9),Be=0,$e=0;{for(Be=0;Be<8;++Be)_e.write_shift(1,ee[Be]);for(Be=0;Be<8;++Be)_e.write_shift(2,0);for(_e.write_shift(2,62),_e.write_shift(2,3),_e.write_shift(2,65534),_e.write_shift(2,9),_e.write_shift(2,6),Be=0;Be<3;++Be)_e.write_shift(2,0);for(_e.write_shift(4,0),_e.write_shift(4,Ee[2]),_e.write_shift(4,Ee[0]+Ee[1]+Ee[2]+Ee[3]-1),_e.write_shift(4,0),_e.write_shift(4,4096),_e.write_shift(4,Ee[3]?Ee[0]+Ee[1]+Ee[2]-1:P),_e.write_shift(4,Ee[3]),_e.write_shift(-4,Ee[1]?Ee[0]-1:P),_e.write_shift(4,Ee[1]),Be=0;Be<109;++Be)_e.write_shift(-4,Be<Ee[2]?Ee[1]+Be:-1)}if(Ee[1])for($e=0;$e<Ee[1];++$e){for(;Be<236+$e*127;++Be)_e.write_shift(-4,Be<Ee[2]?Ee[1]+Be:-1);_e.write_shift(-4,$e===Ee[1]-1?P:$e+1)}var st=function(Qt){for($e+=Qt;Be<$e-1;++Be)_e.write_shift(-4,Be+1);Qt&&(++Be,_e.write_shift(-4,P))};for($e=Be=0,$e+=Ee[1];Be<$e;++Be)_e.write_shift(-4,te.DIFSECT);for($e+=Ee[2];Be<$e;++Be)_e.write_shift(-4,te.FATSECT);st(Ee[3]),st(Ee[4]);for(var ze=0,Ze=0,rt=Ae.FileIndex[0];ze<Ae.FileIndex.length;++ze)rt=Ae.FileIndex[ze],rt.content&&(Ze=rt.content.length,!(Ze<4096)&&(rt.start=$e,st(Ze+511>>9)));for(st(Ee[6]+7>>3);_e.l&511;)_e.write_shift(-4,te.ENDOFCHAIN);for($e=Be=0,ze=0;ze<Ae.FileIndex.length;++ze)rt=Ae.FileIndex[ze],rt.content&&(Ze=rt.content.length,!(!Ze||Ze>=4096)&&(rt.start=$e,st(Ze+63>>6)));for(;_e.l&511;)_e.write_shift(-4,te.ENDOFCHAIN);for(Be=0;Be<Ee[4]<<2;++Be){var yt=Ae.FullPaths[Be];if(!yt||yt.length===0){for(ze=0;ze<17;++ze)_e.write_shift(4,0);for(ze=0;ze<3;++ze)_e.write_shift(4,-1);for(ze=0;ze<12;++ze)_e.write_shift(4,0);continue}rt=Ae.FileIndex[Be],Be===0&&(rt.start=rt.size?rt.start-1:P);var It=Be===0&&ye.root||rt.name;if(Ze=2*(It.length+1),_e.write_shift(64,It,"utf16le"),_e.write_shift(2,Ze),_e.write_shift(1,rt.type),_e.write_shift(1,rt.color),_e.write_shift(-4,rt.L),_e.write_shift(-4,rt.R),_e.write_shift(-4,rt.C),rt.clsid)_e.write_shift(16,rt.clsid,"hex");else for(ze=0;ze<4;++ze)_e.write_shift(4,0);_e.write_shift(4,rt.state||0),_e.write_shift(4,0),_e.write_shift(4,0),_e.write_shift(4,0),_e.write_shift(4,0),_e.write_shift(4,rt.start),_e.write_shift(4,rt.size),_e.write_shift(4,0)}for(Be=1;Be<Ae.FileIndex.length;++Be)if(rt=Ae.FileIndex[Be],rt.size>=4096)if(_e.l=rt.start+1<<9,Zr&&Buffer.isBuffer(rt.content))rt.content.copy(_e,_e.l,0,rt.size),_e.l+=rt.size+511&-512;else{for(ze=0;ze<rt.size;++ze)_e.write_shift(1,rt.content[ze]);for(;ze&511;++ze)_e.write_shift(1,0)}for(Be=1;Be<Ae.FileIndex.length;++Be)if(rt=Ae.FileIndex[Be],rt.size>0&&rt.size<4096)if(Zr&&Buffer.isBuffer(rt.content))rt.content.copy(_e,_e.l,0,rt.size),_e.l+=rt.size+63&-64;else{for(ze=0;ze<rt.size;++ze)_e.write_shift(1,rt.content[ze]);for(;ze&63;++ze)_e.write_shift(1,0)}if(Zr)_e.l=_e.length;else for(;_e.l<_e.length;)_e.write_shift(1,0);return _e}function j(Ae,Ne){var ye=Ae.FullPaths.map(function(ze){return ze.toUpperCase()}),Ee=ye.map(function(ze){var Ze=ze.split("/");return Ze[Ze.length-(ze.slice(-1)=="/"?2:1)]}),_e=!1;Ne.charCodeAt(0)===47?(_e=!0,Ne=ye[0].slice(0,-1)+Ne):_e=Ne.indexOf("/")!==-1;var Be=Ne.toUpperCase(),$e=_e===!0?ye.indexOf(Be):Ee.indexOf(Be);if($e!==-1)return Ae.FileIndex[$e];var st=!Be.match(qg);for(Be=Be.replace(po,""),st&&(Be=Be.replace(qg,"!")),$e=0;$e<ye.length;++$e)if((st?ye[$e].replace(qg,"!"):ye[$e]).replace(po,"")==Be||(st?Ee[$e].replace(qg,"!"):Ee[$e]).replace(po,"")==Be)return Ae.FileIndex[$e];return null}var F=64,P=-2,M="d0cf11e0a1b11ae1",ee=[208,207,17,224,161,177,26,225],W="00000000000000000000000000000000",te={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:P,FREESECT:-1,HEADER_SIGNATURE:M,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:W,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function G(Ae,Ne,ye){A();var Ee=U(Ae,ye);c.writeFileSync(Ne,Ee)}function q(Ae){for(var Ne=new Array(Ae.length),ye=0;ye<Ae.length;++ye)Ne[ye]=String.fromCharCode(Ae[ye]);return Ne.join("")}function z(Ae,Ne){var ye=U(Ae,Ne);switch(Ne&&Ne.type||"buffer"){case"file":return A(),c.writeFileSync(Ne.filename,ye),ye;case"binary":return typeof ye=="string"?ye:q(ye);case"base64":return Gx(typeof ye=="string"?ye:q(ye));case"buffer":if(Zr)return Buffer.isBuffer(ye)?ye:cd(ye);case"array":return typeof ye=="string"?fl(ye):ye}return ye}var Z;function R(Ae){try{var Ne=Ae.InflateRaw,ye=new Ne;if(ye._processChunk(new Uint8Array([3,0]),ye._finishFlushFlag),ye.bytesRead)Z=Ae;else throw new Error("zlib does not expose bytesRead")}catch(Ee){console.error("cannot use native zlib: "+(Ee.message||Ee))}}function K(Ae,Ne){if(!Z)return or(Ae,Ne);var ye=Z.InflateRaw,Ee=new ye,_e=Ee._processChunk(Ae.slice(Ae.l),Ee._finishFlushFlag);return Ae.l+=Ee.bytesRead,_e}function X(Ae){return Z?Z.deflateRawSync(Ae):Oe(Ae)}var re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ne=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ue=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function fe(Ae){var Ne=(Ae<<1|Ae<<11)&139536|(Ae<<5|Ae<<15)&558144;return(Ne>>16|Ne>>8|Ne)&255}for(var be=typeof Uint8Array<"u",Ce=be?new Uint8Array(256):[],me=0;me<256;++me)Ce[me]=fe(me);function oe(Ae,Ne){var ye=Ce[Ae&255];return Ne<=8?ye>>>8-Ne:(ye=ye<<8|Ce[Ae>>8&255],Ne<=16?ye>>>16-Ne:(ye=ye<<8|Ce[Ae>>16&255],ye>>>24-Ne))}function Le(Ae,Ne){var ye=Ne&7,Ee=Ne>>>3;return(Ae[Ee]|(ye<=6?0:Ae[Ee+1]<<8))>>>ye&3}function Ye(Ae,Ne){var ye=Ne&7,Ee=Ne>>>3;return(Ae[Ee]|(ye<=5?0:Ae[Ee+1]<<8))>>>ye&7}function Te(Ae,Ne){var ye=Ne&7,Ee=Ne>>>3;return(Ae[Ee]|(ye<=4?0:Ae[Ee+1]<<8))>>>ye&15}function we(Ae,Ne){var ye=Ne&7,Ee=Ne>>>3;return(Ae[Ee]|(ye<=3?0:Ae[Ee+1]<<8))>>>ye&31}function Fe(Ae,Ne){var ye=Ne&7,Ee=Ne>>>3;return(Ae[Ee]|(ye<=1?0:Ae[Ee+1]<<8))>>>ye&127}function He(Ae,Ne,ye){var Ee=Ne&7,_e=Ne>>>3,Be=(1<<ye)-1,$e=Ae[_e]>>>Ee;return ye<8-Ee||($e|=Ae[_e+1]<<8-Ee,ye<16-Ee)||($e|=Ae[_e+2]<<16-Ee,ye<24-Ee)||($e|=Ae[_e+3]<<24-Ee),$e&Be}function Xe(Ae,Ne,ye){var Ee=Ne&7,_e=Ne>>>3;return Ee<=5?Ae[_e]|=(ye&7)<<Ee:(Ae[_e]|=ye<<Ee&255,Ae[_e+1]=(ye&7)>>8-Ee),Ne+3}function ut(Ae,Ne,ye){var Ee=Ne&7,_e=Ne>>>3;return ye=(ye&1)<<Ee,Ae[_e]|=ye,Ne+1}function Et(Ae,Ne,ye){var Ee=Ne&7,_e=Ne>>>3;return ye<<=Ee,Ae[_e]|=ye&255,ye>>>=8,Ae[_e+1]=ye,Ne+8}function At(Ae,Ne,ye){var Ee=Ne&7,_e=Ne>>>3;return ye<<=Ee,Ae[_e]|=ye&255,ye>>>=8,Ae[_e+1]=ye&255,Ae[_e+2]=ye>>>8,Ne+16}function jt(Ae,Ne){var ye=Ae.length,Ee=2*ye>Ne?2*ye:Ne+5,_e=0;if(ye>=Ne)return Ae;if(Zr){var Be=j6(Ee);if(Ae.copy)Ae.copy(Be);else for(;_e<Ae.length;++_e)Be[_e]=Ae[_e];return Be}else if(be){var $e=new Uint8Array(Ee);if($e.set)$e.set(Ae);else for(;_e<ye;++_e)$e[_e]=Ae[_e];return $e}return Ae.length=Ee,Ae}function Dt(Ae){for(var Ne=new Array(Ae),ye=0;ye<Ae;++ye)Ne[ye]=0;return Ne}function Yt(Ae,Ne,ye){var Ee=1,_e=0,Be=0,$e=0,st=0,ze=Ae.length,Ze=be?new Uint16Array(32):Dt(32);for(Be=0;Be<32;++Be)Ze[Be]=0;for(Be=ze;Be<ye;++Be)Ae[Be]=0;ze=Ae.length;var rt=be?new Uint16Array(ze):Dt(ze);for(Be=0;Be<ze;++Be)Ze[_e=Ae[Be]]++,Ee<_e&&(Ee=_e),rt[Be]=0;for(Ze[0]=0,Be=1;Be<=Ee;++Be)Ze[Be+16]=st=st+Ze[Be-1]<<1;for(Be=0;Be<ze;++Be)st=Ae[Be],st!=0&&(rt[Be]=Ze[st+16]++);var yt=0;for(Be=0;Be<ze;++Be)if(yt=Ae[Be],yt!=0)for(st=oe(rt[Be],Ee)>>Ee-yt,$e=(1<<Ee+4-yt)-1;$e>=0;--$e)Ne[st|$e<<yt]=yt&15|Be<<4;return Ee}var Rt=be?new Uint16Array(512):Dt(512),Ut=be?new Uint16Array(32):Dt(32);if(!be){for(var qt=0;qt<512;++qt)Rt[qt]=0;for(qt=0;qt<32;++qt)Ut[qt]=0}(function(){for(var Ae=[],Ne=0;Ne<32;Ne++)Ae.push(5);Yt(Ae,Ut,32);var ye=[];for(Ne=0;Ne<=143;Ne++)ye.push(8);for(;Ne<=255;Ne++)ye.push(9);for(;Ne<=279;Ne++)ye.push(7);for(;Ne<=287;Ne++)ye.push(8);Yt(ye,Rt,288)})();var De=function(){for(var Ne=be?new Uint8Array(32768):[],ye=0,Ee=0;ye<ue.length-1;++ye)for(;Ee<ue[ye+1];++Ee)Ne[Ee]=ye;for(;Ee<32768;++Ee)Ne[Ee]=29;var _e=be?new Uint8Array(259):[];for(ye=0,Ee=0;ye<ne.length-1;++ye)for(;Ee<ne[ye+1];++Ee)_e[Ee]=ye;function Be(st,ze){for(var Ze=0;Ze<st.length;){var rt=Math.min(65535,st.length-Ze),yt=Ze+rt==st.length;for(ze.write_shift(1,+yt),ze.write_shift(2,rt),ze.write_shift(2,~rt&65535);rt-- >0;)ze[ze.l++]=st[Ze++]}return ze.l}function $e(st,ze){for(var Ze=0,rt=0,yt=be?new Uint16Array(32768):[];rt<st.length;){var It=Math.min(65535,st.length-rt);if(It<10){for(Ze=Xe(ze,Ze,+(rt+It==st.length)),Ze&7&&(Ze+=8-(Ze&7)),ze.l=Ze/8|0,ze.write_shift(2,It),ze.write_shift(2,~It&65535);It-- >0;)ze[ze.l++]=st[rt++];Ze=ze.l*8;continue}Ze=Xe(ze,Ze,+(rt+It==st.length)+2);for(var Qt=0;It-- >0;){var Tt=st[rt];Qt=(Qt<<5^Tt)&32767;var Lt=-1,pr=0;if((Lt=yt[Qt])&&(Lt|=rt&-32768,Lt>rt&&(Lt-=32768),Lt<rt))for(;st[Lt+pr]==st[rt+pr]&&pr<250;)++pr;if(pr>2){Tt=_e[pr],Tt<=22?Ze=Et(ze,Ze,Ce[Tt+1]>>1)-1:(Et(ze,Ze,3),Ze+=5,Et(ze,Ze,Ce[Tt-23]>>5),Ze+=3);var Vr=Tt<8?0:Tt-4>>2;Vr>0&&(At(ze,Ze,pr-ne[Tt]),Ze+=Vr),Tt=Ne[rt-Lt],Ze=Et(ze,Ze,Ce[Tt]>>3),Ze-=3;var zr=Tt<4?0:Tt-2>>1;zr>0&&(At(ze,Ze,rt-Lt-ue[Tt]),Ze+=zr);for(var Wr=0;Wr<pr;++Wr)yt[Qt]=rt&32767,Qt=(Qt<<5^st[rt])&32767,++rt;It-=pr-1}else Tt<=143?Tt=Tt+48:Ze=ut(ze,Ze,1),Ze=Et(ze,Ze,Ce[Tt]),yt[Qt]=rt&32767,++rt}Ze=Et(ze,Ze,0)-1}return ze.l=(Ze+7)/8|0,ze.l}return function(ze,Ze){return ze.length<8?Be(ze,Ze):$e(ze,Ze)}}();function Oe(Ae){var Ne=dt(50+Math.floor(Ae.length*1.1)),ye=De(Ae,Ne);return Ne.slice(0,ye)}var ke=be?new Uint16Array(32768):Dt(32768),We=be?new Uint16Array(32768):Dt(32768),ft=be?new Uint16Array(128):Dt(128),$t=1,zt=1;function tr(Ae,Ne){var ye=we(Ae,Ne)+257;Ne+=5;var Ee=we(Ae,Ne)+1;Ne+=5;var _e=Te(Ae,Ne)+4;Ne+=4;for(var Be=0,$e=be?new Uint8Array(19):Dt(19),st=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ze=1,Ze=be?new Uint8Array(8):Dt(8),rt=be?new Uint8Array(8):Dt(8),yt=$e.length,It=0;It<_e;++It)$e[re[It]]=Be=Ye(Ae,Ne),ze<Be&&(ze=Be),Ze[Be]++,Ne+=3;var Qt=0;for(Ze[0]=0,It=1;It<=ze;++It)rt[It]=Qt=Qt+Ze[It-1]<<1;for(It=0;It<yt;++It)(Qt=$e[It])!=0&&(st[It]=rt[Qt]++);var Tt=0;for(It=0;It<yt;++It)if(Tt=$e[It],Tt!=0){Qt=Ce[st[It]]>>8-Tt;for(var Lt=(1<<7-Tt)-1;Lt>=0;--Lt)ft[Qt|Lt<<Tt]=Tt&7|It<<3}var pr=[];for(ze=1;pr.length<ye+Ee;)switch(Qt=ft[Fe(Ae,Ne)],Ne+=Qt&7,Qt>>>=3){case 16:for(Be=3+Le(Ae,Ne),Ne+=2,Qt=pr[pr.length-1];Be-- >0;)pr.push(Qt);break;case 17:for(Be=3+Ye(Ae,Ne),Ne+=3;Be-- >0;)pr.push(0);break;case 18:for(Be=11+Fe(Ae,Ne),Ne+=7;Be-- >0;)pr.push(0);break;default:pr.push(Qt),ze<Qt&&(ze=Qt);break}var Vr=pr.slice(0,ye),zr=pr.slice(ye);for(It=ye;It<286;++It)Vr[It]=0;for(It=Ee;It<30;++It)zr[It]=0;return $t=Yt(Vr,ke,286),zt=Yt(zr,We,30),Ne}function Hr(Ae,Ne){if(Ae[0]==3&&!(Ae[1]&3))return[Hf(Ne),2];for(var ye=0,Ee=0,_e=j6(Ne||1<<18),Be=0,$e=_e.length>>>0,st=0,ze=0;(Ee&1)==0;){if(Ee=Ye(Ae,ye),ye+=3,Ee>>>1)Ee>>1==1?(st=9,ze=5):(ye=tr(Ae,ye),st=$t,ze=zt);else{ye&7&&(ye+=8-(ye&7));var Ze=Ae[ye>>>3]|Ae[(ye>>>3)+1]<<8;if(ye+=32,Ze>0)for(!Ne&&$e<Be+Ze&&(_e=jt(_e,Be+Ze),$e=_e.length);Ze-- >0;)_e[Be++]=Ae[ye>>>3],ye+=8;continue}for(;;){!Ne&&$e<Be+32767&&(_e=jt(_e,Be+32767),$e=_e.length);var rt=He(Ae,ye,st),yt=Ee>>>1==1?Rt[rt]:ke[rt];if(ye+=yt&15,yt>>>=4,(yt>>>8&255)===0)_e[Be++]=yt;else{if(yt==256)break;yt-=257;var It=yt<8?0:yt-4>>2;It>5&&(It=0);var Qt=Be+ne[yt];It>0&&(Qt+=He(Ae,ye,It),ye+=It),rt=He(Ae,ye,ze),yt=Ee>>>1==1?Ut[rt]:We[rt],ye+=yt&15,yt>>>=4;var Tt=yt<4?0:yt-2>>1,Lt=ue[yt];for(Tt>0&&(Lt+=He(Ae,ye,Tt),ye+=Tt),!Ne&&$e<Qt&&(_e=jt(_e,Qt+100),$e=_e.length);Be<Qt;)_e[Be]=_e[Be-Lt],++Be}}}return Ne?[_e,ye+7>>>3]:[_e.slice(0,Be),ye+7>>>3]}function or(Ae,Ne){var ye=Ae.slice(Ae.l||0),Ee=Hr(ye,Ne);return Ae.l+=Ee[1],Ee[0]}function mn(Ae,Ne){if(Ae)typeof console<"u"&&console.error(Ne);else throw new Error(Ne)}function Lr(Ae,Ne){var ye=Ae;vi(ye,0);var Ee=[],_e=[],Be={FileIndex:Ee,FullPaths:_e};w(Be,{root:Ne.root});for(var $e=ye.length-4;(ye[$e]!=80||ye[$e+1]!=75||ye[$e+2]!=5||ye[$e+3]!=6)&&$e>=0;)--$e;ye.l=$e+4,ye.l+=4;var st=ye.read_shift(2);ye.l+=6;var ze=ye.read_shift(4);for(ye.l=ze,$e=0;$e<st;++$e){ye.l+=20;var Ze=ye.read_shift(4),rt=ye.read_shift(4),yt=ye.read_shift(2),It=ye.read_shift(2),Qt=ye.read_shift(2);ye.l+=8;var Tt=ye.read_shift(4),Lt=o(ye.slice(ye.l+yt,ye.l+yt+It));ye.l+=yt+It+Qt;var pr=ye.l;ye.l=Tt+4,En(ye,Ze,rt,Be,Lt),ye.l=pr}return Be}function En(Ae,Ne,ye,Ee,_e){Ae.l+=2;var Be=Ae.read_shift(2),$e=Ae.read_shift(2),st=i(Ae);if(Be&8257)throw new Error("Unsupported ZIP encryption");for(var ze=Ae.read_shift(4),Ze=Ae.read_shift(4),rt=Ae.read_shift(4),yt=Ae.read_shift(2),It=Ae.read_shift(2),Qt="",Tt=0;Tt<yt;++Tt)Qt+=String.fromCharCode(Ae[Ae.l++]);if(It){var Lt=o(Ae.slice(Ae.l,Ae.l+It));(Lt[21589]||{}).mt&&(st=Lt[21589].mt),((_e||{})[21589]||{}).mt&&(st=_e[21589].mt)}Ae.l+=It;var pr=Ae.slice(Ae.l,Ae.l+Ze);switch($e){case 8:pr=K(Ae,rt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+$e)}var Vr=!1;Be&8&&(ze=Ae.read_shift(4),ze==134695760&&(ze=Ae.read_shift(4),Vr=!0),Ze=Ae.read_shift(4),rt=Ae.read_shift(4)),Ze!=Ne&&mn(Vr,"Bad compressed size: "+Ne+" != "+Ze),rt!=ye&&mn(Vr,"Bad uncompressed size: "+ye+" != "+rt),on(Ee,Qt,pr,{unsafe:!0,mt:st})}function Vn(Ae,Ne){var ye=Ne||{},Ee=[],_e=[],Be=dt(1),$e=ye.compression?8:0,st=0,ze=0,Ze=0,rt=0,yt=0,It=Ae.FullPaths[0],Qt=It,Tt=Ae.FileIndex[0],Lt=[],pr=0;for(ze=1;ze<Ae.FullPaths.length;++ze)if(Qt=Ae.FullPaths[ze].slice(It.length),Tt=Ae.FileIndex[ze],!(!Tt.size||!Tt.content||Qt=="Sh33tJ5")){var Vr=rt,zr=dt(Qt.length);for(Ze=0;Ze<Qt.length;++Ze)zr.write_shift(1,Qt.charCodeAt(Ze)&127);zr=zr.slice(0,zr.l),Lt[yt]=ane.buf(Tt.content,0);var Wr=Tt.content;$e==8&&(Wr=X(Wr)),Be=dt(30),Be.write_shift(4,67324752),Be.write_shift(2,20),Be.write_shift(2,st),Be.write_shift(2,$e),Tt.mt?s(Be,Tt.mt):Be.write_shift(4,0),Be.write_shift(-4,Lt[yt]),Be.write_shift(4,Wr.length),Be.write_shift(4,Tt.content.length),Be.write_shift(2,zr.length),Be.write_shift(2,0),rt+=Be.length,Ee.push(Be),rt+=zr.length,Ee.push(zr),rt+=Wr.length,Ee.push(Wr),Be=dt(46),Be.write_shift(4,33639248),Be.write_shift(2,0),Be.write_shift(2,20),Be.write_shift(2,st),Be.write_shift(2,$e),Be.write_shift(4,0),Be.write_shift(-4,Lt[yt]),Be.write_shift(4,Wr.length),Be.write_shift(4,Tt.content.length),Be.write_shift(2,zr.length),Be.write_shift(2,0),Be.write_shift(2,0),Be.write_shift(2,0),Be.write_shift(2,0),Be.write_shift(4,0),Be.write_shift(4,Vr),pr+=Be.l,_e.push(Be),pr+=zr.length,_e.push(zr),++yt}return Be=dt(22),Be.write_shift(4,101010256),Be.write_shift(2,0),Be.write_shift(2,0),Be.write_shift(2,yt),Be.write_shift(2,yt),Be.write_shift(4,pr),Be.write_shift(4,rt),Be.write_shift(2,0),ai([ai(Ee),ai(_e),Be])}var ar={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Jt(Ae,Ne){if(Ae.ctype)return Ae.ctype;var ye=Ae.name||"",Ee=ye.match(/\.([^\.]+)$/);return Ee&&ar[Ee[1]]||Ne&&(Ee=(ye=Ne).match(/[\.\\]([^\.\\])+$/),Ee&&ar[Ee[1]])?ar[Ee[1]]:"application/octet-stream"}function Mr(Ae){for(var Ne=Gx(Ae),ye=[],Ee=0;Ee<Ne.length;Ee+=76)ye.push(Ne.slice(Ee,Ee+76));return ye.join(`\r
`)+`\r
`}function ms(Ae){var Ne=Ae.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ze){var rt=Ze.charCodeAt(0).toString(16).toUpperCase();return"="+(rt.length==1?"0"+rt:rt)});Ne=Ne.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ne.charAt(0)==`
`&&(Ne="=0D"+Ne.slice(1)),Ne=Ne.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ye=[],Ee=Ne.split(`\r
`),_e=0;_e<Ee.length;++_e){var Be=Ee[_e];if(Be.length==0){ye.push("");continue}for(var $e=0;$e<Be.length;){var st=76,ze=Be.slice($e,$e+st);ze.charAt(st-1)=="="?st--:ze.charAt(st-2)=="="?st-=2:ze.charAt(st-3)=="="&&(st-=3),ze=Be.slice($e,$e+st),$e+=st,$e<Be.length&&(ze+="="),ye.push(ze)}}return ye.join(`\r
`)}function Zn(Ae){for(var Ne=[],ye=0;ye<Ae.length;++ye){for(var Ee=Ae[ye];ye<=Ae.length&&Ee.charAt(Ee.length-1)=="=";)Ee=Ee.slice(0,Ee.length-1)+Ae[++ye];Ne.push(Ee)}for(var _e=0;_e<Ne.length;++_e)Ne[_e]=Ne[_e].replace(/[=][0-9A-Fa-f]{2}/g,function(Be){return String.fromCharCode(parseInt(Be.slice(1),16))});return fl(Ne.join(`\r
`))}function _a(Ae,Ne,ye){for(var Ee="",_e="",Be="",$e,st=0;st<10;++st){var ze=Ne[st];if(!ze||ze.match(/^\s*$/))break;var Ze=ze.match(/^(.*?):\s*([^\s].*)$/);if(Ze)switch(Ze[1].toLowerCase()){case"content-location":Ee=Ze[2].trim();break;case"content-type":Be=Ze[2].trim();break;case"content-transfer-encoding":_e=Ze[2].trim();break}}switch(++st,_e.toLowerCase()){case"base64":$e=fl(vl(Ne.slice(st).join("")));break;case"quoted-printable":$e=Zn(Ne.slice(st));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+_e)}var rt=on(Ae,Ee.slice(ye.length),$e,{unsafe:!0});Be&&(rt.ctype=Be)}function js(Ae,Ne){if(q(Ae.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ye=Ne&&Ne.root||"",Ee=(Zr&&Buffer.isBuffer(Ae)?Ae.toString("binary"):q(Ae)).split(`\r
`),_e=0,Be="";for(_e=0;_e<Ee.length;++_e)if(Be=Ee[_e],!!/^Content-Location:/i.test(Be)&&(Be=Be.slice(Be.indexOf("file")),ye||(ye=Be.slice(0,Be.lastIndexOf("/")+1)),Be.slice(0,ye.length)!=ye))for(;ye.length>0&&(ye=ye.slice(0,ye.length-1),ye=ye.slice(0,ye.lastIndexOf("/")+1),Be.slice(0,ye.length)!=ye););var $e=(Ee[1]||"").match(/boundary="(.*?)"/);if(!$e)throw new Error("MAD cannot find boundary");var st="--"+($e[1]||""),ze=[],Ze=[],rt={FileIndex:ze,FullPaths:Ze};w(rt);var yt,It=0;for(_e=0;_e<Ee.length;++_e){var Qt=Ee[_e];Qt!==st&&Qt!==st+"--"||(It++&&_a(rt,Ee.slice(yt,_e),ye),yt=_e)}return rt}function Kt(Ae,Ne){var ye=Ne||{},Ee=ye.boundary||"SheetJS";Ee="------="+Ee;for(var _e=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ee.slice(2)+'"',"","",""],Be=Ae.FullPaths[0],$e=Be,st=Ae.FileIndex[0],ze=1;ze<Ae.FullPaths.length;++ze)if($e=Ae.FullPaths[ze].slice(Be.length),st=Ae.FileIndex[ze],!(!st.size||!st.content||$e=="Sh33tJ5")){$e=$e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(pr){return"_x"+pr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(pr){return"_u"+pr.charCodeAt(0).toString(16)+"_"});for(var Ze=st.content,rt=Zr&&Buffer.isBuffer(Ze)?Ze.toString("binary"):q(Ze),yt=0,It=Math.min(1024,rt.length),Qt=0,Tt=0;Tt<=It;++Tt)(Qt=rt.charCodeAt(Tt))>=32&&Qt<128&&++yt;var Lt=yt>=It*4/5;_e.push(Ee),_e.push("Content-Location: "+(ye.root||"file:///C:/SheetJS/")+$e),_e.push("Content-Transfer-Encoding: "+(Lt?"quoted-printable":"base64")),_e.push("Content-Type: "+Jt(st,$e)),_e.push(""),_e.push(Lt?ms(rt):Mr(rt))}return _e.push(Ee+`--\r
`),_e.join(`\r
`)}function pn(Ae){var Ne={};return w(Ne,Ae),Ne}function on(Ae,Ne,ye,Ee){var _e=Ee&&Ee.unsafe;_e||w(Ae);var Be=!_e&&hr.find(Ae,Ne);if(!Be){var $e=Ae.FullPaths[0];Ne.slice(0,$e.length)==$e?$e=Ne:($e.slice(-1)!="/"&&($e+="/"),$e=($e+Ne).replace("//","/")),Be={name:a(Ne),type:2},Ae.FileIndex.push(Be),Ae.FullPaths.push($e),_e||hr.utils.cfb_gc(Ae)}return Be.content=ye,Be.size=ye?ye.length:0,Ee&&(Ee.CLSID&&(Be.clsid=Ee.CLSID),Ee.mt&&(Be.mt=Ee.mt),Ee.ct&&(Be.ct=Ee.ct)),Be}function Dn(Ae,Ne){w(Ae);var ye=hr.find(Ae,Ne);if(ye){for(var Ee=0;Ee<Ae.FileIndex.length;++Ee)if(Ae.FileIndex[Ee]==ye)return Ae.FileIndex.splice(Ee,1),Ae.FullPaths.splice(Ee,1),!0}return!1}function zn(Ae,Ne,ye){w(Ae);var Ee=hr.find(Ae,Ne);if(Ee){for(var _e=0;_e<Ae.FileIndex.length;++_e)if(Ae.FileIndex[_e]==Ee)return Ae.FileIndex[_e].name=a(ye),Ae.FullPaths[_e]=ye,!0}return!1}function ea(Ae){N(Ae,!0)}return t.find=j,t.read=k,t.parse=d,t.write=z,t.writeFile=G,t.utils={cfb_new:pn,cfb_add:on,cfb_del:Dn,cfb_mov:zn,cfb_gc:ea,ReadShift:mx,CheckField:iP,prep_blob:vi,bconcat:ai,use_zlib:R,_deflateRaw:Oe,_inflateRaw:or,consts:te},t}();function sne(e){return typeof e=="string"?Yy(e):Array.isArray(e)?Ire(e):e}function P1(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=Yy(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Mu(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([sne(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=Xf(t)),o.write(t),o.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function ine(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Xa(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function Q6(e,t){for(var r=[],n=Xa(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function Zy(e){for(var t=[],r=Xa(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function eE(e){for(var t=[],r=Xa(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function one(e){for(var t=[],r=Xa(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var Nw=new Date(1899,11,30,0,0,0);function Vs(e,t){var r=e.getTime(),n=Nw.getTime()+(e.getTimezoneOffset()-Nw.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var P7=new Date,lne=Nw.getTime()+(P7.getTimezoneOffset()-Nw.getTimezoneOffset())*6e4,H6=P7.getTimezoneOffset();function tE(e){var t=new Date;return t.setTime(e*24*60*60*1e3+lne),t.getTimezoneOffset()!==H6&&t.setTime(t.getTime()+(t.getTimezoneOffset()-H6)*6e4),t}function cne(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var V6=new Date("2017-02-19T19:06:09.000Z"),M7=isNaN(V6.getFullYear())?new Date("2/19/17"):V6,une=M7.getFullYear()==2017;function xa(e,t){var r=new Date(e);if(une)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(M7.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function a0(e,t){if(Zr&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Mu(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Mu(N7(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Mu(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Mu(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function va(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=va(e[r]));return t}function Ga(e,t){for(var r="";r.length<t;)r+=e;return r}function Hc(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var Ane=["january","february","march","april","may","june","july","august","september","october","november","december"];function Ap(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&Ane.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var dne=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],o=1;o<s.length;++o)i.push(a),i.push(s[o]);return i}}();function Q7(e){return e?e.content&&e.type?a0(e.content,!0):e.data?Kg(e.data):e.asNodeBuffer&&Zr?Kg(e.asNodeBuffer().toString("binary")):e.asBinary?Kg(e.asBinary()):e._data&&e._data.getContent?Kg(a0(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function H7(e){if(!e)return null;if(e.data)return I6(e.data);if(e.asNodeBuffer&&Zr)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?I6(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function fne(e){return e&&e.name.slice(-4)===".bin"?H7(e):Q7(e)}function Wl(e,t){for(var r=e.FullPaths||Xa(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function lB(e,t){var r=Wl(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Cs(e,t,r){if(!r)return fne(lB(e,t));if(!t)return null;try{return Cs(e,t)}catch{return null}}function hl(e,t,r){if(!r)return Q7(lB(e,t));if(!t)return null;try{return hl(e,t)}catch{return null}}function hne(e,t,r){return H7(lB(e,t))}function z6(e){for(var t=e.FullPaths||Xa(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function qr(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return Zr?n=cd(r):n=Fre(r),hr.utils.cfb_add(e,t,n)}hr.utils.cfb_add(e,t,r)}else e.file(t,r)}function cB(){return hr.utils.cfb_new()}function V7(e,t){switch(t.type){case"base64":return hr.read(e,{type:"base64"});case"binary":return hr.read(e,{type:"binary"});case"buffer":case"array":return hr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function $g(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var hs=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,mne=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,G6=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,pne=/<[^>]*>/g,ao=hs.match(G6)?G6:pne,gne=/<\w*:/,xne=/<(\/?)\w+:/;function jr(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var i=e.match(mne),o=0,c="",A=0,d="",h="",m=1;if(i)for(A=0;A!=i.length;++A){for(h=i[A],s=0;s!=h.length&&h.charCodeAt(s)!==61;++s);for(d=h.slice(0,s).trim();h.charCodeAt(s+1)==32;)++s;for(m=(a=h.charCodeAt(s+1))==34||a==39?1:0,c=h.slice(s+1+m,h.length-m),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var p=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[p]&&d.slice(o-3,o)=="ext")continue;n[p]=c,n[p.toLowerCase()]=c}}return n}function eA(e){return e.replace(xne,"<$1")}var z7={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},uB=Zy(z7),_n=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(o,c){return z7[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,c){return String.fromCharCode(parseInt(c,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),AB=/[&<>'"]/g,vne=/[\u0000-\u0008\u000b-\u001f]/g;function Jn(e){var t=e+"";return t.replace(AB,function(r){return uB[r]}).replace(vne,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function K6(e){return Jn(e).replace(/ /g,"_x0020_")}var G7=/[\u0000-\u001f]/g;function dB(e){var t=e+"";return t.replace(AB,function(r){return uB[r]}).replace(/\n/g,"<br/>").replace(G7,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function bne(e){var t=e+"";return t.replace(AB,function(r){return uB[r]}).replace(G7,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var q6=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function wne(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function pa(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function T5(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,t+=String.fromCharCode(i);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=e.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function $6(e){var t=Hf(2*e.length),r,n,a=1,s=0,i=0,o;for(n=0;n<e.length;n+=a)a=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[s++]=i&255,t[s++]=i>>>8,i=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function W6(e){return cd(e,"binary").toString("utf8")}var Ab="foo bar bazâð£",ia=Zr&&(W6(Ab)==T5(Ab)&&W6||$6(Ab)==T5(Ab)&&$6)||T5,Mu=Zr?function(e){return cd(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},qx=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),K7=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),yne=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),Ene=/<\/?(?:vt:)?variant>/g,Cne=/<(?:vt:)([^>]*)>([\s\S]*)</;function X6(e,t){var r=jr(e),n=e.match(yne(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(Ene,"").match(Cne);i&&a.push({v:ia(i[2]),t:i[1]})}),a}var q7=/(^\s|\s$|\n)/;function wi(e,t){return"<"+e+(t.match(q7)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function $x(e){return Xa(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Ot(e,t,r){return"<"+e+(r!=null?$x(r):"")+(t!=null?(t.match(q7)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function I4(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function _ne(e,t){switch(typeof e){case"string":var r=Ot("vt:lpwstr",Jn(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Ot((e|0)==e?"vt:i4":"vt:r8",Jn(String(e)));case"boolean":return Ot("vt:bool",e?"true":"false")}if(e instanceof Date)return Ot("vt:filetime",I4(e));throw new Error("Unable to serialize "+e)}function fB(e){if(Zr&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return ia(Xf(sB(e)));throw new Error("Bad input format: expected Buffer or string")}var Wx=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Qs={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},g0=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ul={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Sne(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function Nne(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,i=n?-t:t;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[r+o]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var Y6=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},J6=Zr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:cd(t)})):Y6(e)}:Y6,Z6=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(HA(e,a)));return n.join("").replace(po,"")},hB=Zr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(po,""):Z6(e,t,r)}:Z6,ej=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},$7=Zr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):ej(e,t,r)}:ej,tj=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(_m(e,a)));return n.join("")},M1=Zr?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):tj(t,r,n)}:tj,W7=function(e,t){var r=Al(e,t);return r>0?M1(e,t+4,t+4+r-1):""},X7=W7,Y7=function(e,t){var r=Al(e,t);return r>0?M1(e,t+4,t+4+r-1):""},J7=Y7,Z7=function(e,t){var r=2*Al(e,t);return r>0?M1(e,t+4,t+4+r-1):""},eP=Z7,tP=function(t,r){var n=Al(t,r);return n>0?hB(t,r+4,r+4+n):""},rP=tP,nP=function(e,t){var r=Al(e,t);return r>0?M1(e,t+4,t+4+r):""},aP=nP,sP=function(e,t){return Sne(e,t)},Bw=sP,mB=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Zr&&(X7=function(t,r){if(!Buffer.isBuffer(t))return W7(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},J7=function(t,r){if(!Buffer.isBuffer(t))return Y7(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},eP=function(t,r){if(!Buffer.isBuffer(t))return Z7(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},rP=function(t,r){if(!Buffer.isBuffer(t))return tP(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},aP=function(t,r){if(!Buffer.isBuffer(t))return nP(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},Bw=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):sP(t,r)},mB=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var _m=function(e,t){return e[t]},HA=function(e,t){return e[t+1]*256+e[t]},Bne=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Al=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},kh=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},kne=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function mx(e,t){var r="",n,a,s=[],i,o,c,A;switch(t){case"dbcs":if(A=this.l,Zr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(HA(this,A)),A+=2;e*=2;break;case"utf8":r=M1(this,this.l,this.l+e);break;case"utf16le":e*=2,r=hB(this,this.l,this.l+e);break;case"wstr":return mx.call(this,e,"dbcs");case"lpstr-ansi":r=X7(this,this.l),e=4+Al(this,this.l);break;case"lpstr-cp":r=J7(this,this.l),e=4+Al(this,this.l);break;case"lpwstr":r=eP(this,this.l),e=4+2*Al(this,this.l);break;case"lpp4":e=4+Al(this,this.l),r=rP(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Al(this,this.l),r=aP(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=_m(this,this.l+e++))!==0;)s.push(ub(i));r=s.join("");break;case"_wstr":for(e=0,r="";(i=HA(this,this.l+e))!==0;)s.push(ub(i)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",A=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(A)!==-1)return i=_m(this,A),this.l=A+1,o=mx.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(ub(HA(this,A))),A+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",A=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(A)!==-1)return i=_m(this,A),this.l=A+1,o=mx.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(ub(_m(this,A))),A+=1}r=s.join("");break;default:switch(e){case 1:return n=_m(this,this.l),this.l++,n;case 2:return n=(t==="i"?Bne:HA)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?kh:kne)(this,this.l),this.l+=4,n):(a=Al(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=Bw(this,this.l):a=Bw([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=$7(this,this.l,e);break}}return this.l+=e,r}var Tne=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Ine=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Fne=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function jne(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)Fne(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var i=t.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,Tne(this,t,this.l);break;case 8:if(n=8,r==="f"){Nne(this,t,this.l);break}case 16:break;case-4:n=4,Ine(this,t,this.l);break}return this.l+=n,this}function iP(e,t){var r=$7(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function vi(e,t){e.l=t,e.read_shift=mx,e.chk=iP,e.write_shift=jne}function to(e,t){e.l+=t}function dt(e){var t=Hf(e);return vi(t,0),t}function ud(e,t,r){if(e){var n,a,s;vi(e,e.l||0);for(var i=e.length,o=0,c=0;e.l<i;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var A=t1[o]||t1[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;c=e.l+s;var d=A.f&&A.f(e,s,r);if(e.l=c,t(d,A,o))return}}}function Po(){var e=[],t=Zr?256:2048,r=function(A){var d=dt(A);return vi(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(A){return n&&A<n.length-n.l?n:(a(),n=r(Math.max(A+1,t)))},i=function(){return a(),ai(e)},o=function(A){a(),n=A,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:o,end:i,_bufs:e}}function St(e,t,r,n){var a=+t,s;if(!isNaN(a)){n||(n=t1[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=e.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&mB(r)&&e.push(r)}}function px(e,t,r){var n=va(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function rj(e,t,r){var n=va(e);return n.s=px(n.s,t.s,r),n.e=px(n.e,t.s,r),n}function gx(e,t){if(e.cRel&&e.c<0)for(e=va(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=va(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=kr(e);return!e.cRel&&e.cRel!=null&&(r=Lne(r)),!e.rRel&&e.rRel!=null&&(r=Dne(r)),r}function I5(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Ia(e.s.c)+":"+(e.e.cRel?"":"$")+Ia(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+fs(e.s.r)+":"+(e.e.rRel?"":"$")+fs(e.e.r):gx(e.s,t.biff)+":"+gx(e.e,t.biff)}function pB(e){return parseInt(Rne(e),10)-1}function fs(e){return""+(e+1)}function Dne(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Rne(e){return e.replace(/\$(\d+)$/,"$1")}function gB(e){for(var t=One(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Ia(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Lne(e){return e.replace(/^([A-Z])/,"$$$1")}function One(e){return e.replace(/^\$([A-Z])/,"$1")}function Une(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Fa(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function kr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Qo(e){var t=e.indexOf(":");return t==-1?{s:Fa(e),e:Fa(e)}:{s:Fa(e.slice(0,t)),e:Fa(e.slice(t+1))}}function Qr(e,t){return typeof t>"u"||typeof t=="number"?Qr(e.s,e.e):(typeof e!="string"&&(e=kr(e)),typeof t!="string"&&(t=kr(t)),e==t?e:e+":"+t)}function Sn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function nj(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=lc(e.z,r?Vs(t):t)}catch{}try{return e.w=lc((e.XF||{}).numFmtId||(r?14:0),r?Vs(t):t)}catch{return""+t}}function rd(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Ad[e.v]||e.v:t==null?nj(e,e.v):nj(e,t))}function Yf(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function oP(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),i=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?Fa(n.origin):n.origin;i=c.r,o=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var A={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Sn(s["!ref"]);A.s.c=d.s.c,A.s.r=d.s.r,A.e.c=Math.max(A.e.c,d.e.c),A.e.r=Math.max(A.e.r,d.e.r),i==-1&&(A.e.r=i=d.e.r+1)}for(var h=0;h!=t.length;++h)if(t[h]){if(!Array.isArray(t[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[h].length;++m)if(!(typeof t[h][m]>"u")){var p={v:t[h][m]},v=i+h,x=o+m;if(A.s.r>v&&(A.s.r=v),A.s.c>x&&(A.s.c=x),A.e.r<v&&(A.e.r=v),A.e.c<x&&(A.e.c=x),t[h][m]&&typeof t[h][m]=="object"&&!Array.isArray(t[h][m])&&!(t[h][m]instanceof Date))p=t[h][m];else if(Array.isArray(p.v)&&(p.f=t[h][m][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Sr[14],n.cellDates?(p.t="d",p.w=lc(p.z,Vs(p.v))):(p.t="n",p.v=Vs(p.v),p.w=lc(p.z,p.v))):p.t="s";if(a)s[v]||(s[v]=[]),s[v][x]&&s[v][x].z&&(p.z=s[v][x].z),s[v][x]=p;else{var E=kr({c:x,r:v});s[E]&&s[E].z&&(p.z=s[E].z),s[E]=p}}}return A.s.c<1e7&&(s["!ref"]=Qr(A)),s}function Ip(e,t){return oP(null,e,t)}function Pne(e){return e.read_shift(4,"i")}function Vc(e,t){return t||(t=dt(4)),t.write_shift(4,e),t}function Zi(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function si(e,t){var r=!1;return t==null&&(r=!0,t=dt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Mne(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Qne(e,t){return t||(t=dt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function xB(e,t){var r=e.l,n=e.read_shift(1),a=Zi(e),s=[],i={t:a,h:a};if((n&1)!==0){for(var o=e.read_shift(4),c=0;c!=o;++c)s.push(Mne(e));i.r=s}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function Hne(e,t){var r=!1;return t==null&&(r=!0,t=dt(15+4*e.t.length)),t.write_shift(1,0),si(e.t,t),r?t.slice(0,t.l):t}var Vne=xB;function zne(e,t){var r=!1;return t==null&&(r=!0,t=dt(23+4*e.t.length)),t.write_shift(1,1),si(e.t,t),t.write_shift(4,1),Qne({},t),r?t.slice(0,t.l):t}function cc(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function x0(e,t){return t==null&&(t=dt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function v0(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function b0(e,t){return t==null&&(t=dt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Gne=Zi,lP=si;function vB(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function kw(e,t){var r=!1;return t==null&&(r=!0,t=dt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Kne=Zi,F4=vB,bB=kw;function wB(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?Bw([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):kh(t,0)>>2;return r?a/100:a}function cP(e,t){t==null&&(t=dt(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function uP(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function qne(e,t){return t||(t=dt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var w0=uP,Fp=qne;function Ji(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function s0(e,t){return(t||dt(8)).write_shift(8,e,"f")}function $ne(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var A=Hh[a];A&&(t.rgb=Yx(A));break;case 2:t.rgb=Yx([i,o,c]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function Tw(e,t){if(t||(t=dt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function Wne(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Xne(e,t){t||(t=dt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function AP(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function Yne(e){return AP(e,1)}function Jne(e){return AP(e,2)}var yB=2,jo=3,db=11,aj=12,Iw=19,fb=64,Zne=65,eae=71,tae=4108,rae=4126,ri=80,dP=81,nae=[ri,dP],j4={1:{n:"CodePage",t:yB},2:{n:"Category",t:ri},3:{n:"PresentationFormat",t:ri},4:{n:"ByteCount",t:jo},5:{n:"LineCount",t:jo},6:{n:"ParagraphCount",t:jo},7:{n:"SlideCount",t:jo},8:{n:"NoteCount",t:jo},9:{n:"HiddenCount",t:jo},10:{n:"MultimediaClipCount",t:jo},11:{n:"ScaleCrop",t:db},12:{n:"HeadingPairs",t:tae},13:{n:"TitlesOfParts",t:rae},14:{n:"Manager",t:ri},15:{n:"Company",t:ri},16:{n:"LinksUpToDate",t:db},17:{n:"CharacterCount",t:jo},19:{n:"SharedDoc",t:db},22:{n:"HyperlinksChanged",t:db},23:{n:"AppVersion",t:jo,p:"version"},24:{n:"DigSig",t:Zne},26:{n:"ContentType",t:ri},27:{n:"ContentStatus",t:ri},28:{n:"Language",t:ri},29:{n:"Version",t:ri},255:{},2147483648:{n:"Locale",t:Iw},2147483651:{n:"Behavior",t:Iw},1919054434:{}},D4={1:{n:"CodePage",t:yB},2:{n:"Title",t:ri},3:{n:"Subject",t:ri},4:{n:"Author",t:ri},5:{n:"Keywords",t:ri},6:{n:"Comments",t:ri},7:{n:"Template",t:ri},8:{n:"LastAuthor",t:ri},9:{n:"RevNumber",t:ri},10:{n:"EditTime",t:fb},11:{n:"LastPrinted",t:fb},12:{n:"CreatedDate",t:fb},13:{n:"ModifiedDate",t:fb},14:{n:"PageCount",t:jo},15:{n:"WordCount",t:jo},16:{n:"CharCount",t:jo},17:{n:"Thumbnail",t:eae},18:{n:"Application",t:ri},19:{n:"DocSecurity",t:jo},255:{},2147483648:{n:"Locale",t:Iw},2147483651:{n:"Behavior",t:Iw},1919054434:{}},sj={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},aae=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function sae(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var iae=sae([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Hh=va(iae),Ad={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},fP={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},R4={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},hb={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function EB(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function oae(e){var t=EB();if(!e||!e.match)return t;var r={};if((e.match(ao)||[]).forEach(function(n){var a=jr(n);switch(a[0].replace(gne,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[R4[a.ContentType]]!==void 0&&t[R4[a.ContentType]].push(a.PartName);break}}),t.xmlns!==Qs.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function hP(e,t){var r=one(R4),n=[],a;n[n.length]=hs,n[n.length]=Ot("Types",null,{xmlns:Qs.CT,"xmlns:xsd":Qs.xsd,"xmlns:xsi":Qs.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Ot("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=Ot("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:hb[c][t.bookType]||hb[c].xlsx}))},i=function(c){(e[c]||[]).forEach(function(A){n[n.length]=Ot("Override",null,{PartName:(A[0]=="/"?"":"/")+A,ContentType:hb[c][t.bookType]||hb[c].xlsx})})},o=function(c){(e[c]||[]).forEach(function(A){n[n.length]=Ot("Override",null,{PartName:(A[0]=="/"?"":"/")+A,ContentType:r[c][0]})})};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var sn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Xx(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function xx(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(ao)||[]).forEach(function(a){var s=jr(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:$g(s.Target,t);r[o]=i,n[s.Id]=i}}),r["!id"]=n,r}function qm(e){var t=[hs,Ot("Relationships",null,{xmlns:Qs.RELS})];return Xa(e["!id"]).forEach(function(r){t[t.length]=Ot("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Xn(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[sn.HLINK,sn.XPATH,sn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var lae="application/vnd.oasis.opendocument.spreadsheet";function cae(e,t){for(var r=fB(e),n,a;n=Wx.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=jr(n[0],!1),a.path=="/"&&a.type!==lae)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function uae(e){var t=[hs];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function ij(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function Aae(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function dae(e){var t=[hs];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(ij(e[r][0],e[r][1])),t.push(Aae("",e[r][0]));return t.push(ij("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function mP(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Ew.version+"</meta:generator></office:meta></office:document-meta>"}var oc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],fae=function(){for(var e=new Array(oc.length),t=0;t<oc.length;++t){var r=oc[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function pP(e){var t={};e=ia(e);for(var r=0;r<oc.length;++r){var n=oc[r],a=e.match(fae[r]);a!=null&&a.length>0&&(t[n[1]]=_n(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=xa(t[n[1]]))}return t}function F5(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=Jn(t),n[n.length]=r?Ot(e,t,r):wi(e,t))}function gP(e,t){var r=t||{},n=[hs,Ot("cp:coreProperties",null,{"xmlns:cp":Qs.CORE_PROPS,"xmlns:dc":Qs.dc,"xmlns:dcterms":Qs.dcterms,"xmlns:dcmitype":Qs.dcmitype,"xmlns:xsi":Qs.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&F5("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:I4(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&F5("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:I4(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=oc.length;++s){var i=oc[s],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&F5(i[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Vh=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],xP=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function vP(e,t,r,n){var a=[];if(typeof e=="string")a=X6(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(d){return{v:d}}));var i=typeof t=="string"?X6(t,n).map(function(d){return d.v}):t,o=0,c=0;if(i.length>0)for(var A=0;A!==a.length;A+=2){switch(c=+a[A+1].v,a[A].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=i.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=c,r.DefinedNames=i.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=i.slice(o,o+c);break}o+=c}}function hae(e,t,r){var n={};return t||(t={}),e=ia(e),Vh.forEach(function(a){var s=(e.match(qx(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=_n(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var i=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&vP(n.HeadingPairs,n.TitlesOfParts,t,r),t}function bP(e){var t=[],r=Ot;return e||(e={}),e.Application="SheetJS",t[t.length]=hs,t[t.length]=Ot("Properties",null,{xmlns:Qs.EXT_PROPS,"xmlns:vt":Qs.vt}),Vh.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=Jn(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+Jn(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var mae=/<[^>]+>[^<]*/g;function pae(e,t){var r={},n="",a=e.match(mae);if(a)for(var s=0;s!=a.length;++s){var i=a[s],o=jr(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=_n(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var c=i.split(">"),A=c[0].slice(4),d=c[1];switch(A){case"lpstr":case"bstr":case"lpwstr":r[n]=_n(d);break;case"bool":r[n]=pa(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=xa(d);break;case"cy":case"error":r[n]=_n(d);break;default:if(A.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,A,c)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function wP(e){var t=[hs,Ot("Properties",null,{xmlns:Qs.CUST_PROPS,"xmlns:vt":Qs.vt})];if(!e)return t.join("");var r=1;return Xa(e).forEach(function(a){++r,t[t.length]=Ot("property",_ne(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Jn(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var L4={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},j5;function gae(e,t,r){j5||(j5=Zy(L4)),t=j5[t]||t,e[t]=r}function xae(e,t){var r=[];return Xa(L4).map(function(n){for(var a=0;a<oc.length;++a)if(oc[a][1]==n)return oc[a];for(a=0;a<Vh.length;++a)if(Vh[a][1]==n)return Vh[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(wi(L4[n[1]]||n[1],a))}}),Ot("DocumentProperties",r.join(""),{xmlns:ul.o})}function vae(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Xa(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var i=0;i<oc.length;++i)if(s==oc[i][1])return;for(i=0;i<Vh.length;++i)if(s==Vh[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var o=e[s],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),a.push(Ot(K6(s),o,{"dt:dt":c}))}}),t&&Xa(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var i=t[s],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),a.push(Ot(K6(s),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+ul.o+'">'+a.join("")+"</"+n+">"}function CB(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function bae(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=dt(8);return i.write_shift(4,n),i.write_shift(4,a),i}function yP(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function EP(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function CP(e,t,r){return t===31?EP(e):yP(e,t,r)}function O4(e,t,r){return CP(e,t,r===!1?0:4)}function wae(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return CP(e,t,0)}function yae(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(po,""),e.l-a&2&&(e.l+=2)}return r}function Eae(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(po,"");return r}function Cae(e){var t=e.l,r=Fw(e,dP);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=Fw(e,jo);return[r,n]}function _ae(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(Cae(e));return r}function oj(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),i=e.read_shift(4);n[s]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(po,"").replace(qg,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function _P(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function Sae(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function Fw(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==aj&&n!==t&&nae.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===aj?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return yP(e,n,4).replace(po,"");case 31:return EP(e);case 64:return CB(e);case 65:return _P(e);case 71:return Sae(e);case 80:return O4(e,n,!s.raw).replace(po,"");case 81:return wae(e,n).replace(po,"");case 4108:return _ae(e);case 4126:case 4127:return n==4127?yae(e):Eae(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function lj(e,t){var r=dt(4),n=dt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=dt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=bae(t);break;case 31:case 80:for(n=dt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return ai([r,n])}function cj(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0,o=0,c=-1,A={};for(i=0;i!=a;++i){var d=e.read_shift(4),h=e.read_shift(4);s[i]=[d,h+r]}s.sort(function(B,T){return B[1]-T[1]});var m={};for(i=0;i!=a;++i){if(e.l!==s[i][1]){var p=!0;if(i>0&&t)switch(t[s[i-1][0]].t){case 2:e.l+2===s[i][1]&&(e.l+=2,p=!1);break;case 80:e.l<=s[i][1]&&(e.l=s[i][1],p=!1);break;case 4108:e.l<=s[i][1]&&(e.l=s[i][1],p=!1);break}if((!t||i==0)&&e.l<=s[i][1]&&(p=!1,e.l=s[i][1]),p)throw new Error("Read Error: Expected address "+s[i][1]+" at "+e.l+" :"+i)}if(t){var v=t[s[i][0]];if(m[v.n]=Fw(e,v.t,{raw:!0}),v.p==="version"&&(m[v.n]=String(m[v.n]>>16)+"."+("0000"+String(m[v.n]&65535)).slice(-4)),v.n=="CodePage")switch(m[v.n]){case 0:m[v.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Mc(o=m[v.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[v.n])}}else if(s[i][0]===1){if(o=m.CodePage=Fw(e,yB),Mc(o),c!==-1){var x=e.l;e.l=s[c][1],A=oj(e,o),e.l=x}}else if(s[i][0]===0){if(o===0){c=i,e.l=s[i+1][1];continue}A=oj(e,o)}else{var E=A[s[i][0]],_;switch(e[e.l]){case 65:e.l+=4,_=_P(e);break;case 30:e.l+=4,_=O4(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,_=O4(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,_=e.read_shift(4,"i");break;case 19:e.l+=4,_=e.read_shift(4);break;case 5:e.l+=4,_=e.read_shift(8,"f");break;case 11:e.l+=4,_=os(e,4);break;case 64:e.l+=4,_=xa(CB(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[E]=_}}return e.l=r+n,m}var SP=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Nae(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function uj(e,t,r){var n=dt(8),a=[],s=[],i=8,o=0,c=dt(8),A=dt(8);if(c.write_shift(4,2),c.write_shift(4,1200),A.write_shift(4,1),s.push(c),a.push(A),i+=8+c.length,!t){A=dt(8),A.write_shift(4,0),a.unshift(A);var d=[dt(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var h=e[o][0];for(c=dt(8+2*(h.length+1)+(h.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,h.length+1),c.write_shift(0,h,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=ai(d),s.unshift(c),i+=8+c.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(SP.indexOf(e[o][0])>-1||xP.indexOf(e[o][0])>-1)&&e[o][1]!=null){var m=e[o][1],p=0;if(t){p=+t[e[o][0]];var v=r[p];if(v.p=="version"&&typeof m=="string"){var x=m.split(".");m=(+x[0]<<16)+(+x[1]||0)}c=lj(v.t,m)}else{var E=Nae(m);E==-1&&(E=31,m=String(m)),c=lj(E,m)}s.push(c),A=dt(8),A.write_shift(4,t?p:2+o),a.push(A),i+=8+c.length}var _=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,_),_+=s[o].length;return n.write_shift(4,i),n.write_shift(4,s.length),ai([n].concat(a).concat(s))}function Aj(e,t,r){var n=e.content;if(!n)return{};vi(n,0);var a,s,i,o,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var A=n.read_shift(4),d=n.read_shift(16);if(d!==hr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),o=n.read_shift(4),a===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);a===2&&(i=n.read_shift(16),c=n.read_shift(4));var h=cj(n,t),m={SystemIdentifier:A};for(var p in h)m[p]=h[p];if(m.FMTID=s,a===1)return m;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var v;try{v=cj(n,null)}catch{}for(p in v)m[p]=v[p];return m.FMTID=[s,i],m}function dj(e,t,r,n,a,s){var i=dt(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,hr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,a?68:48);var c=uj(e,r,n);if(o.push(c),a){var A=uj(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+c.length),o.push(A)}return ai(o)}function Wd(e,t){return e.read_shift(t),null}function Bae(e,t){t||(t=dt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function kae(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function os(e,t){return e.read_shift(t)===1}function fo(e,t){return t||(t=dt(2)),t.write_shift(2,+!!e),t}function _s(e){return e.read_shift(2,"u")}function Yl(e,t){return t||(t=dt(2)),t.write_shift(2,e),t}function NP(e,t){return kae(e,t,_s)}function Tae(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function BP(e,t,r){return r||(r=dt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function Q1(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?e.read_shift(n,a):"";return i}function Iae(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,o,c={};a&&(i=e.read_shift(2)),n&&(o=e.read_shift(4));var A=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,A);return a&&(e.l+=4*i),n&&(e.l+=o),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function Fae(e){var t=e.t||"",r=dt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=dt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return ai(a)}function i0(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function H1(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):i0(e,n,r)}function y0(e,t,r){if(r.biff>5)return H1(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function kP(e,t,r){return r||(r=dt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function jae(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function Dae(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(po,"");return n&&(e.l+=24),a}function Rae(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(s>>1,"utf16le").replace(po,"");return r+i}function Lae(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Dae(e);case"0303000000000000c000000000000046":return Rae(e);default:throw new Error("Unsupported Moniker "+r)}}function mb(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(po,""):"";return r}function fj(e,t){t||(t=dt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function Oae(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,i,o,c,A="",d,h;a&16&&(s=mb(e,r-e.l)),a&128&&(i=mb(e,r-e.l)),(a&257)===257&&(o=mb(e,r-e.l)),(a&257)===1&&(c=Lae(e,r-e.l)),a&8&&(A=mb(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(h=CB(e)),e.l=r;var m=i||o||c||"";m&&A&&(m+="#"+A),m||(m="#"+A),a&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var p={Target:m};return d&&(p.guid=d),h&&(p.time=h),s&&(p.Tooltip=s),p}function Uae(e){var t=dt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(s==28)n=n.slice(1),fj(n,t);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),s&8&&fj(a>-1?n.slice(a+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function TP(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function IP(e,t){var r=TP(e);return r[3]=0,r}function tA(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function o0(e,t,r,n){return n||(n=dt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function Pae(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Mae(e,t,r){return t===0?"":y0(e,t,r)}function Qae(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[a,s,i]}function FP(e){var t=e.read_shift(2),r=wB(e);return[t,r]}function Hae(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=Q1(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function rE(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function jP(e,t){return t||(t=dt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function DP(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var Vae=DP;function RP(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function zae(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Gae(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Hi(e){e.l+=2,e.l+=e.read_shift(2)}var Kae={0:Hi,4:Hi,5:Hi,6:Hi,7:Gae,8:Hi,9:Hi,10:Hi,11:Hi,12:Hi,13:zae,14:Hi,15:Hi,16:Hi,17:Hi,18:Hi,19:Hi,20:Hi,21:RP};function qae(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(Kae[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function pb(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function _B(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=dt(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function $ae(e,t){return t===0||e.read_shift(2),1200}function Wae(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=y0(e,0,r);return e.read_shift(t+n-e.l),a}function Xae(e,t){var r=!t||t.biff==8,n=dt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function Yae(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Jae(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=Q1(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function Zae(e,t){var r=!t||t.biff>=8?2:1,n=dt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function ese(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0;i!=a&&e.l<r;++i)s.push(Iae(e));return s.Count=n,s.Unique=a,s}function tse(e,t){var r=dt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=Fae(e[a]);var s=ai([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function rse(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function nse(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function ase(e){var t=Pae(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function sse(e){return e.read_shift(2),e.read_shift(4)}function hj(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function ise(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),c=e.read_shift(2),A=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:o,Selected:c,TabRatio:A}}function ose(){var e=dt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function lse(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function cse(e){var t=dt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function use(){}function Ase(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=Q1(e,0,r),n}function dse(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,s=dt(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function fse(e){var t=tA(e);return t.isst=e.read_shift(4),t}function hse(e,t,r,n){var a=dt(10);return o0(e,t,n,a),a.write_shift(4,r),a}function mse(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=tA(e);r.biff==2&&e.l++;var s=H1(e,n-e.l,r);return a.val=s,a}function pse(e,t,r,n,a){var s=!a||a.biff==8,i=dt(8+ +s+(1+s)*r.length);return o0(e,t,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function gse(e,t,r){var n=e.read_shift(2),a=y0(e,0,r);return[n,a]}function xse(e,t,r,n){var a=r&&r.biff==5;n||(n=dt(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var vse=y0;function mj(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:s,c:o},e:{r:i,c}}}function bse(e,t){var r=t.biff==8||!t.biff?4:2,n=dt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function wse(e){var t=e.read_shift(2),r=e.read_shift(2),n=FP(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function yse(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(FP(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function Ese(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function Cse(e,t,r,n){var a={},s=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),c=e.read_shift(2);return a.patternType=aae[o>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function _se(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=Cse(e,t,n.fStyle,r),n}function pj(e,t,r,n){var a=r&&r.biff==5;n||(n=dt(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function Sse(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function Nse(e){var t=dt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function gj(e,t,r){var n=tA(e);(r.biff==2||t==9)&&++e.l;var a=Tae(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function Bse(e,t,r,n,a,s){var i=dt(8);return o0(e,t,n,i),BP(r,s,i),i}function kse(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=tA(e),a=Ji(e);return n.val=a,n}function Tse(e,t,r,n){var a=dt(14);return o0(e,t,n,a),s0(r,a),a}var xj=Mae;function Ise(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=i0(e,s),o=[];n>e.l;)o.push(H1(e));return[s,a,i,o]}function vj(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=Hae(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var Fse=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function bj(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var A=i0(e,i,r);a&32&&(A=Fse[A.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var h=n==e.l||o===0||!(d>0)?[]:qce(e,d,r,o);return{chKey:s,Name:A,itab:c,rgce:h}}function LP(e,t,r){if(r.biff<8)return jse(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(Qae(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function jse(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=Q1(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function Dse(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=i0(e,n,r),i=i0(e,a,r);return[s,i]}function Rse(e,t,r){var n=DP(e);e.l++;var a=e.read_shift(1);return t-=8,[$ce(e,t,r),a,n]}function wj(e,t,r){var n=Vae(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,Gce(e,t,r)]}function Lse(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function Ose(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=y0(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},o,i,s]}}function Use(e,t,r){return Ose(e,t,r)}function Pse(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(rE(e));return r}function Mse(e){var t=dt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)jP(e[r],t);return t}function Qse(e,t,r){if(r&&r.biff<8)return Vse(e,t,r);var n=RP(e),a=qae(e,t-22,n[1]);return{cmo:n,ft:a}}var Hse={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function Vse(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((Hse[n]||to)(e,t,r)),{cmo:[a,n,s],ft:i}}function zse(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:i=jae(e,6,r);var o=e.read_shift(2);e.read_shift(2),_s(e,2);var c=e.read_shift(2);e.l+=c;for(var A=1;A<e.lens.length-1;++A){if(e.l-n!=e.lens[A])throw new Error("TxO: bad continue record");var d=e[e.l],h=i0(e,e.lens[A+1]-e.lens[A]-1);if(a+=h,a.length>=(d?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function Gse(e,t){var r=rE(e);e.l+=16;var n=Oae(e,t-24);return[r,n]}function Kse(e){var t=dt(24),r=Fa(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return ai([t,Uae(e[1])])}function qse(e,t){e.read_shift(2);var r=rE(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(po,""),[r,n]}function $se(e){var t=e[1].Tooltip,r=dt(10+2*(t.length+1));r.write_shift(2,2048);var n=Fa(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function Wse(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=sj[r]||r,r=e.read_shift(2),t[1]=sj[r]||r,t}function Xse(e){return e||(e=dt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function Yse(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(IP(e));return r}function Jse(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(IP(e));return r}function Zse(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function OP(e,t,r){if(!r.cellStyles)return to(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var A={s:a,e:s,w:i,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(A.level=c>>8&7),A}function eie(e,t){var r=dt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function tie(e,t){var r={};return t<32||(e.l+=16,r.header=Ji(e),r.footer=Ji(e),e.l+=2),r}function rie(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function nie(e){for(var t=dt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var aie=tA,sie=NP,iie=H1;function oie(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function lie(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=tA(e);++e.l;var a=y0(e,t-7,r);return n.t="str",n.val=a,n}function cie(e){var t=tA(e);++e.l;var r=Ji(e);return t.t="n",t.val=r,t}function uie(e,t,r){var n=dt(15);return K1(n,e,t),n.write_shift(8,r,"f"),n}function Aie(e){var t=tA(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function die(e,t,r){var n=dt(9);return K1(n,e,t),n.write_shift(2,r),n}function fie(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function hie(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function mie(e,t,r){var n=e.l+t,a=tA(e),s=e.read_shift(2),i=i0(e,s,r);return e.l=n,a.t="str",a.val=i,a}var pie=[2,3,48,49,131,139,140,245],U4=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Zy({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var A=[],d=Hf(1);switch(c.type){case"base64":d=fl(vl(o));break;case"binary":d=fl(o);break;case"buffer":case"array":d=o;break}vi(d,0);var h=d.read_shift(1),m=!!(h&136),p=!1,v=!1;switch(h){case 2:break;case 3:break;case 48:p=!0,m=!0;break;case 49:p=!0,m=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var x=0,E=521;h==2&&(x=d.read_shift(2)),d.l+=3,h!=2&&(x=d.read_shift(4)),x>1048576&&(x=1e6),h!=2&&(E=d.read_shift(2));var _=d.read_shift(2),B=c.codepage||1252;h!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(B=e[d[d.l]]),d.l+=1,d.l+=2),v&&(d.l+=36);for(var T=[],I={},L=Math.min(d.length,h==2?521:E-10-(p?264:0)),k=v?32:11;d.l<L&&d[d.l]!=13;)switch(I={},I.name=zx.utils.decode(B,d.slice(d.l,d.l+k)).replace(/[\u0000\r\n].*$/g,""),d.l+=k,I.type=String.fromCharCode(d.read_shift(1)),h!=2&&!v&&(I.offset=d.read_shift(4)),I.len=d.read_shift(1),h==2&&(I.offset=d.read_shift(2)),I.dec=d.read_shift(1),I.name.length&&T.push(I),h!=2&&(d.l+=v?13:14),I.type){case"B":(!p||I.len!=8)&&c.WTF&&console.log("Skipping "+I.name+":"+I.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+I.name+":"+I.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+I.type)}if(d[d.l]!==13&&(d.l=E-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=E;var w=0,y=0;for(A[0]=[],y=0;y!=T.length;++y)A[0][y]=T[y].name;for(;x-- >0;){if(d[d.l]===42){d.l+=_;continue}for(++d.l,A[++w]=[],y=0,y=0;y!=T.length;++y){var N=d.slice(d.l,d.l+T[y].len);d.l+=T[y].len,vi(N,0);var U=zx.utils.decode(B,N);switch(T[y].type){case"C":U.trim().length&&(A[w][y]=U.replace(/\s+$/,""));break;case"D":U.length===8?A[w][y]=new Date(+U.slice(0,4),+U.slice(4,6)-1,+U.slice(6,8)):A[w][y]=U;break;case"F":A[w][y]=parseFloat(U.trim());break;case"+":case"I":A[w][y]=v?N.read_shift(-4,"i")^2147483648:N.read_shift(4,"i");break;case"L":switch(U.trim().toUpperCase()){case"Y":case"T":A[w][y]=!0;break;case"N":case"F":A[w][y]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+U+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));A[w][y]="##MEMO##"+(v?parseInt(U.trim(),10):N.read_shift(4));break;case"N":U=U.replace(/\u0000/g,"").trim(),U&&U!="."&&(A[w][y]=+U||0);break;case"@":A[w][y]=new Date(N.read_shift(-8,"f")-621356832e5);break;case"T":A[w][y]=new Date((N.read_shift(4)-2440588)*864e5+N.read_shift(4));break;case"Y":A[w][y]=N.read_shift(4,"i")/1e4+N.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":A[w][y]=-N.read_shift(-8,"f");break;case"B":if(p&&T[y].len==8){A[w][y]=N.read_shift(8,"f");break}case"G":case"P":N.l+=T[y].len;break;case"0":if(T[y].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+T[y].type)}}}if(h!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(A=A.slice(0,c.sheetRows)),c.DBF=T,A}function n(o,c){var A=c||{};A.dateNF||(A.dateNF="yyyymmdd");var d=Ip(r(o,A),A);return d["!cols"]=A.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete A.DBF,d}function a(o,c){try{return Yf(n(o,c),c)}catch(A){if(c&&c.WTF)throw A}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,c){var A=c||{};if(+A.codepage>=0&&Mc(+A.codepage),A.type=="string")throw new Error("Cannot write DBF to JS string");var d=Po(),h=Rw(o,{header:1,raw:!0,cellDates:!0}),m=h[0],p=h.slice(1),v=o["!cols"]||[],x=0,E=0,_=0,B=1;for(x=0;x<m.length;++x){if(((v[x]||{}).DBF||{}).name){m[x]=v[x].DBF.name,++_;continue}if(m[x]!=null){if(++_,typeof m[x]=="number"&&(m[x]=m[x].toString(10)),typeof m[x]!="string")throw new Error("DBF Invalid column name "+m[x]+" |"+typeof m[x]+"|");if(m.indexOf(m[x])!==x){for(E=0;E<1024;++E)if(m.indexOf(m[x]+"_"+E)==-1){m[x]+="_"+E;break}}}}var T=Sn(o["!ref"]),I=[],L=[],k=[];for(x=0;x<=T.e.c-T.s.c;++x){var w="",y="",N=0,U=[];for(E=0;E<p.length;++E)p[E][x]!=null&&U.push(p[E][x]);if(U.length==0||m[x]==null){I[x]="?";continue}for(E=0;E<U.length;++E){switch(typeof U[E]){case"number":y="B";break;case"string":y="C";break;case"boolean":y="L";break;case"object":y=U[E]instanceof Date?"D":"C";break;default:y="C"}N=Math.max(N,String(U[E]).length),w=w&&w!=y?"C":y}N>250&&(N=250),y=((v[x]||{}).DBF||{}).type,y=="C"&&v[x].DBF.len>N&&(N=v[x].DBF.len),w=="B"&&y=="N"&&(w="N",k[x]=v[x].DBF.dec,N=v[x].DBF.len),L[x]=w=="C"||y=="N"?N:s[w]||0,B+=L[x],I[x]=w}var j=d.next(32);for(j.write_shift(4,318902576),j.write_shift(4,p.length),j.write_shift(2,296+32*_),j.write_shift(2,B),x=0;x<4;++x)j.write_shift(4,0);for(j.write_shift(4,0|(+t[S7]||3)<<8),x=0,E=0;x<m.length;++x)if(m[x]!=null){var F=d.next(32),P=(m[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);F.write_shift(1,P,"sbcs"),F.write_shift(1,I[x]=="?"?"C":I[x],"sbcs"),F.write_shift(4,E),F.write_shift(1,L[x]||s[I[x]]||0),F.write_shift(1,k[x]||0),F.write_shift(1,2),F.write_shift(4,0),F.write_shift(1,0),F.write_shift(4,0),F.write_shift(4,0),E+=L[x]||s[I[x]]||0}var M=d.next(264);for(M.write_shift(4,13),x=0;x<65;++x)M.write_shift(4,0);for(x=0;x<p.length;++x){var ee=d.next(B);for(ee.write_shift(1,0),E=0;E<m.length;++E)if(m[E]!=null)switch(I[E]){case"L":ee.write_shift(1,p[x][E]==null?63:p[x][E]?84:70);break;case"B":ee.write_shift(8,p[x][E]||0,"f");break;case"N":var W="0";for(typeof p[x][E]=="number"&&(W=p[x][E].toFixed(k[E]||0)),_=0;_<L[E]-W.length;++_)ee.write_shift(1,32);ee.write_shift(1,W,"sbcs");break;case"D":p[x][E]?(ee.write_shift(4,("0000"+p[x][E].getFullYear()).slice(-4),"sbcs"),ee.write_shift(2,("00"+(p[x][E].getMonth()+1)).slice(-2),"sbcs"),ee.write_shift(2,("00"+p[x][E].getDate()).slice(-2),"sbcs")):ee.write_shift(8,"00000000","sbcs");break;case"C":var te=String(p[x][E]!=null?p[x][E]:"").slice(0,L[E]);for(ee.write_shift(1,te,"sbcs"),_=0;_<L[E]-te.length;++_)ee.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),UP=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Xa(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,p){var v=e[p];return typeof v=="number"?F6(v):v},n=function(m,p,v){var x=p.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return x==59?m:F6(x)};e["|"]=254;function a(m,p){switch(p.type){case"base64":return s(vl(m),p);case"binary":return s(m,p);case"buffer":return s(Zr&&Buffer.isBuffer(m)?m.toString("binary"):Xf(m),p);case"array":return s(a0(m),p)}throw new Error("Unrecognized type "+p.type)}function s(m,p){var v=m.split(/[\n\r]+/),x=-1,E=-1,_=0,B=0,T=[],I=[],L=null,k={},w=[],y=[],N=[],U=0,j;for(+p.codepage>=0&&Mc(+p.codepage);_!==v.length;++_){U=0;var F=v[_].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),P=F.replace(/;;/g,"\0").split(";").map(function(re){return re.replace(/\u0000/g,";")}),M=P[0],ee;if(F.length>0)switch(M){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":P[1].charAt(0)=="P"&&I.push(F.slice(3).replace(/;;/g,";"));break;case"C":var W=!1,te=!1,G=!1,q=!1,z=-1,Z=-1;for(B=1;B<P.length;++B)switch(P[B].charAt(0)){case"A":break;case"X":E=parseInt(P[B].slice(1))-1,te=!0;break;case"Y":for(x=parseInt(P[B].slice(1))-1,te||(E=0),j=T.length;j<=x;++j)T[j]=[];break;case"K":ee=P[B].slice(1),ee.charAt(0)==='"'?ee=ee.slice(1,ee.length-1):ee==="TRUE"?ee=!0:ee==="FALSE"?ee=!1:isNaN(Hc(ee))?isNaN(Ap(ee).getDate())||(ee=xa(ee)):(ee=Hc(ee),L!==null&&kp(L)&&(ee=tE(ee))),W=!0;break;case"E":q=!0;var R=$m(P[B].slice(1),{r:x,c:E});T[x][E]=[T[x][E],R];break;case"S":G=!0,T[x][E]=[T[x][E],"S5S"];break;case"G":break;case"R":z=parseInt(P[B].slice(1))-1;break;case"C":Z=parseInt(P[B].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+F)}if(W&&(T[x][E]&&T[x][E].length==2?T[x][E][0]=ee:T[x][E]=ee,L=null),G){if(q)throw new Error("SYLK shared formula cannot have own formula");var K=z>-1&&T[z][Z];if(!K||!K[1])throw new Error("SYLK shared formula cannot find base");T[x][E][1]=rM(K[1],{r:x-z,c:E-Z})}break;case"F":var X=0;for(B=1;B<P.length;++B)switch(P[B].charAt(0)){case"X":E=parseInt(P[B].slice(1))-1,++X;break;case"Y":for(x=parseInt(P[B].slice(1))-1,j=T.length;j<=x;++j)T[j]=[];break;case"M":U=parseInt(P[B].slice(1))/20;break;case"F":break;case"G":break;case"P":L=I[parseInt(P[B].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(N=P[B].slice(1).split(" "),j=parseInt(N[0],10);j<=parseInt(N[1],10);++j)U=parseInt(N[2],10),y[j-1]=U===0?{hidden:!0}:{wch:U},Vf(y[j-1]);break;case"C":E=parseInt(P[B].slice(1))-1,y[E]||(y[E]={});break;case"R":x=parseInt(P[B].slice(1))-1,w[x]||(w[x]={}),U>0?(w[x].hpt=U,w[x].hpx=fp(U)):U===0&&(w[x].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+F)}X<1&&(L=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+F)}}return w.length>0&&(k["!rows"]=w),y.length>0&&(k["!cols"]=y),p&&p.sheetRows&&(T=T.slice(0,p.sheetRows)),[T,k]}function i(m,p){var v=a(m,p),x=v[0],E=v[1],_=Ip(x,p);return Xa(E).forEach(function(B){_[B]=E[B]}),_}function o(m,p){return Yf(i(m,p),p)}function c(m,p,v,x){var E="C;Y"+(v+1)+";X"+(x+1)+";K";switch(m.t){case"n":E+=m.v||0,m.f&&!m.F&&(E+=";E"+IB(m.f,{r:v,c:x}));break;case"b":E+=m.v?"TRUE":"FALSE";break;case"e":E+=m.w||m.v;break;case"d":E+='"'+(m.w||m.v)+'"';break;case"s":E+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return E}function A(m,p){p.forEach(function(v,x){var E="F;W"+(x+1)+" "+(x+1)+" ";v.hidden?E+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=Jx(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=Zx(v.wpx)),typeof v.wch=="number"&&(E+=Math.round(v.wch))),E.charAt(E.length-1)!=" "&&m.push(E)})}function d(m,p){p.forEach(function(v,x){var E="F;";v.hidden?E+="M0;":v.hpt?E+="M"+20*v.hpt+";":v.hpx&&(E+="M"+20*e1(v.hpx)+";"),E.length>2&&m.push(E+"R"+(x+1))})}function h(m,p){var v=["ID;PWXL;N;E"],x=[],E=Sn(m["!ref"]),_,B=Array.isArray(m),T=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),m["!cols"]&&A(v,m["!cols"]),m["!rows"]&&d(v,m["!rows"]),v.push("B;Y"+(E.e.r-E.s.r+1)+";X"+(E.e.c-E.s.c+1)+";D"+[E.s.c,E.s.r,E.e.c,E.e.r].join(" "));for(var I=E.s.r;I<=E.e.r;++I)for(var L=E.s.c;L<=E.e.c;++L){var k=kr({r:I,c:L});_=B?(m[I]||[])[L]:m[k],!(!_||_.v==null&&(!_.f||_.F))&&x.push(c(_,m,I,L))}return v.join(T)+T+x.join(T)+T+"E"+T}return{to_workbook:o,to_sheet:i,from_sheet:h}}(),PP=function(){function e(s,i){switch(i.type){case"base64":return t(vl(s),i);case"binary":return t(s,i);case"buffer":return t(Zr&&Buffer.isBuffer(s)?s.toString("binary"):Xf(s),i);case"array":return t(a0(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){for(var o=s.split(`
`),c=-1,A=-1,d=0,h=[];d!==o.length;++d){if(o[d].trim()==="BOT"){h[++c]=[],A=0;continue}if(!(c<0)){var m=o[d].trim().split(","),p=m[0],v=m[1];++d;for(var x=o[d]||"";(x.match(/["]/g)||[]).length&1&&d<o.length-1;)x+=`
`+o[++d];switch(x=x.trim(),+p){case-1:if(x==="BOT"){h[++c]=[],A=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?h[c][A]=!0:x==="FALSE"?h[c][A]=!1:isNaN(Hc(v))?isNaN(Ap(v).getDate())?h[c][A]=v:h[c][A]=xa(v):h[c][A]=Hc(v),++A;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),h[c][A++]=x!==""?x:null;break}if(x==="EOD")break}}return i&&i.sheetRows&&(h=h.slice(0,i.sheetRows)),h}function r(s,i){return Ip(e(s,i),i)}function n(s,i){return Yf(r(s,i),i)}var a=function(){var s=function(c,A,d,h,m){c.push(A),c.push(d+","+h),c.push('"'+m.replace(/"/g,'""')+'"')},i=function(c,A,d,h){c.push(A+","+d),c.push(A==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(c){var A=[],d=Sn(c["!ref"]),h,m=Array.isArray(c);s(A,"TABLE",0,1,"sheetjs"),s(A,"VECTORS",0,d.e.r-d.s.r+1,""),s(A,"TUPLES",0,d.e.c-d.s.c+1,""),s(A,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){i(A,-1,0,"BOT");for(var v=d.s.c;v<=d.e.c;++v){var x=kr({r:p,c:v});if(h=m?(c[p]||[])[v]:c[x],!h){i(A,1,0,"");continue}switch(h.t){case"n":var E=h.w;!E&&h.v!=null&&(E=h.v),E==null?h.f&&!h.F?i(A,1,0,"="+h.f):i(A,1,0,""):i(A,0,E,"V");break;case"b":i(A,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":i(A,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=lc(h.z||Sr[14],Vs(xa(h.v)))),i(A,0,h.w,"V");break;default:i(A,1,0,"")}}}i(A,-1,0,"EOD");var _=`\r
`,B=A.join(_);return B}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),MP=function(){function e(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(h,m){for(var p=h.split(`
`),v=-1,x=-1,E=0,_=[];E!==p.length;++E){var B=p[E].trim().split(":");if(B[0]==="cell"){var T=Fa(B[1]);if(_.length<=T.r)for(v=_.length;v<=T.r;++v)_[v]||(_[v]=[]);switch(v=T.r,x=T.c,B[2]){case"t":_[v][x]=e(B[3]);break;case"v":_[v][x]=+B[3];break;case"vtf":var I=B[B.length-1];case"vtc":switch(B[3]){case"nl":_[v][x]=!!+B[4];break;default:_[v][x]=+B[4];break}B[2]=="vtf"&&(_[v][x]=[_[v][x],I])}}}return m&&m.sheetRows&&(_=_.slice(0,m.sheetRows)),_}function n(h,m){return Ip(r(h,m),m)}function a(h,m){return Yf(n(h,m),m)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function A(h){if(!h||!h["!ref"])return"";for(var m=[],p=[],v,x="",E=Qo(h["!ref"]),_=Array.isArray(h),B=E.s.r;B<=E.e.r;++B)for(var T=E.s.c;T<=E.e.c;++T)if(x=kr({r:B,c:T}),v=_?(h[B]||[])[T]:h[x],!(!v||v.v==null||v.t==="z")){switch(p=["cell",x,"t"],v.t){case"s":case"str":p.push(t(v.v));break;case"n":v.f?(p[2]="vtf",p[3]="n",p[4]=v.v,p[5]=t(v.f)):(p[2]="v",p[3]=v.v);break;case"b":p[2]="vt"+(v.f?"f":"c"),p[3]="nl",p[4]=v.v?"1":"0",p[5]=t(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var I=Vs(xa(v.v));p[2]="vtc",p[3]="nd",p[4]=""+I,p[5]=v.w||lc(v.z||Sr[14],I);break;case"e":continue}m.push(p.join(":"))}return m.push("sheet:c:"+(E.e.c-E.s.c+1)+":r:"+(E.e.r-E.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function d(h){return[s,i,o,i,A(h),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),dp=function(){function e(d,h,m,p,v){v.raw?h[m][p]=d:d===""||(d==="TRUE"?h[m][p]=!0:d==="FALSE"?h[m][p]=!1:isNaN(Hc(d))?isNaN(Ap(d).getDate())?h[m][p]=d:h[m][p]=xa(d):h[m][p]=Hc(d))}function t(d,h){var m=h||{},p=[];if(!d||d.length===0)return p;for(var v=d.split(/[\r\n]/),x=v.length-1;x>=0&&v[x].length===0;)--x;for(var E=10,_=0,B=0;B<=x;++B)_=v[B].indexOf(" "),_==-1?_=v[B].length:_++,E=Math.max(E,_);for(B=0;B<=x;++B){p[B]=[];var T=0;for(e(v[B].slice(0,E).trim(),p,B,T,m),T=1;T<=(v[B].length-E)/10+1;++T)e(v[B].slice(E+(T-1)*10,E+T*10).trim(),p,B,T,m)}return m.sheetRows&&(p=p.slice(0,m.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var h={},m=!1,p=0,v=0;p<d.length;++p)(v=d.charCodeAt(p))==34?m=!m:!m&&v in r&&(h[v]=(h[v]||0)+1);v=[];for(p in h)Object.prototype.hasOwnProperty.call(h,p)&&v.push([h[p],p]);if(!v.length){h=n;for(p in h)Object.prototype.hasOwnProperty.call(h,p)&&v.push([h[p],p])}return v.sort(function(x,E){return x[0]-E[0]||n[x[1]]-n[E[1]]}),r[v.pop()[1]]||44}function s(d,h){var m=h||{},p="",v=m.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=a(d.slice(0,1024)):m&&m.FS?p=m.FS:p=a(d.slice(0,1024));var E=0,_=0,B=0,T=0,I=0,L=p.charCodeAt(0),k=!1,w=0,y=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var N=m.dateNF!=null?rne(m.dateNF):null;function U(){var j=d.slice(T,I),F={};if(j.charAt(0)=='"'&&j.charAt(j.length-1)=='"'&&(j=j.slice(1,-1).replace(/""/g,'"')),j.length===0)F.t="z";else if(m.raw)F.t="s",F.v=j;else if(j.trim().length===0)F.t="s",F.v=j;else if(j.charCodeAt(0)==61)j.charCodeAt(1)==34&&j.charCodeAt(j.length-1)==34?(F.t="s",F.v=j.slice(2,-1).replace(/""/g,'"')):Ile(j)?(F.t="n",F.f=j.slice(1)):(F.t="s",F.v=j);else if(j=="TRUE")F.t="b",F.v=!0;else if(j=="FALSE")F.t="b",F.v=!1;else if(!isNaN(B=Hc(j)))F.t="n",m.cellText!==!1&&(F.w=j),F.v=B;else if(!isNaN(Ap(j).getDate())||N&&j.match(N)){F.z=m.dateNF||Sr[14];var P=0;N&&j.match(N)&&(j=nne(j,m.dateNF,j.match(N)||[]),P=1),m.cellDates?(F.t="d",F.v=xa(j,P)):(F.t="n",F.v=Vs(xa(j,P))),m.cellText!==!1&&(F.w=lc(F.z,F.v instanceof Date?Vs(F.v):F.v)),m.cellNF||delete F.z}else F.t="s",F.v=j;if(F.t=="z"||(m.dense?(v[E]||(v[E]=[]),v[E][_]=F):v[kr({c:_,r:E})]=F),T=I+1,y=d.charCodeAt(T),x.e.c<_&&(x.e.c=_),x.e.r<E&&(x.e.r=E),w==L)++_;else if(_=0,++E,m.sheetRows&&m.sheetRows<=E)return!0}e:for(;I<d.length;++I)switch(w=d.charCodeAt(I)){case 34:y===34&&(k=!k);break;case L:case 10:case 13:if(!k&&U())break e;break}return I-T>0&&U(),v["!ref"]=Qr(x),v}function i(d,h){return!(h&&h.PRN)||h.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,h):Ip(t(d,h),h)}function o(d,h){var m="",p=h.type=="string"?[0,0,0,0]:PB(d,h);switch(h.type){case"base64":m=vl(d);break;case"binary":m=d;break;case"buffer":h.codepage==65001?m=d.toString("utf8"):h.codepage&&typeof zx<"u"||(m=Zr&&Buffer.isBuffer(d)?d.toString("binary"):Xf(d));break;case"array":m=a0(d);break;case"string":m=d;break;default:throw new Error("Unrecognized type "+h.type)}return p[0]==239&&p[1]==187&&p[2]==191?m=ia(m.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?m=ia(m):h.type=="binary"&&typeof zx<"u",m.slice(0,19)=="socialcalc:version:"?MP.to_sheet(h.type=="string"?m:ia(m),h):i(m,h)}function c(d,h){return Yf(o(d,h),h)}function A(d){for(var h=[],m=Sn(d["!ref"]),p,v=Array.isArray(d),x=m.s.r;x<=m.e.r;++x){for(var E=[],_=m.s.c;_<=m.e.c;++_){var B=kr({r:x,c:_});if(p=v?(d[x]||[])[_]:d[B],!p||p.v==null){E.push("          ");continue}for(var T=(p.w||(rd(p),p.w)||"").slice(0,10);T.length<10;)T+=" ";E.push(T+(_===0?" ":""))}h.push(E.join(""))}return h.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:A}}();function gie(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=UP.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return dp.to_workbook(e,t)}}var zh=function(){function e(R,K,X){if(R){vi(R,R.l||0);for(var re=X.Enum||z;R.l<R.length;){var ne=R.read_shift(2),ue=re[ne]||re[65535],fe=R.read_shift(2),be=R.l+fe,Ce=ue.f&&ue.f(R,fe,X);if(R.l=be,K(Ce,ue,ne))return}}}function t(R,K){switch(K.type){case"base64":return r(fl(vl(R)),K);case"binary":return r(fl(R),K);case"buffer":case"array":return r(R,K)}throw"Unsupported type "+K.type}function r(R,K){if(!R)return R;var X=K||{},re=X.dense?[]:{},ne="Sheet1",ue="",fe=0,be={},Ce=[],me=[],oe={s:{r:0,c:0},e:{r:0,c:0}},Le=X.sheetRows||0;if(R[2]==0&&(R[3]==8||R[3]==9)&&R.length>=16&&R[14]==5&&R[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(R[2]==2)X.Enum=z,e(R,function(Fe,He,Xe){switch(Xe){case 0:X.vers=Fe,Fe>=4096&&(X.qpro=!0);break;case 6:oe=Fe;break;case 204:Fe&&(ue=Fe);break;case 222:ue=Fe;break;case 15:case 51:X.qpro||(Fe[1].v=Fe[1].v.slice(1));case 13:case 14:case 16:Xe==14&&(Fe[2]&112)==112&&(Fe[2]&15)>1&&(Fe[2]&15)<15&&(Fe[1].z=X.dateNF||Sr[14],X.cellDates&&(Fe[1].t="d",Fe[1].v=tE(Fe[1].v))),X.qpro&&Fe[3]>fe&&(re["!ref"]=Qr(oe),be[ne]=re,Ce.push(ne),re=X.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},fe=Fe[3],ne=ue||"Sheet"+(fe+1),ue="");var ut=X.dense?(re[Fe[0].r]||[])[Fe[0].c]:re[kr(Fe[0])];if(ut){ut.t=Fe[1].t,ut.v=Fe[1].v,Fe[1].z!=null&&(ut.z=Fe[1].z),Fe[1].f!=null&&(ut.f=Fe[1].f);break}X.dense?(re[Fe[0].r]||(re[Fe[0].r]=[]),re[Fe[0].r][Fe[0].c]=Fe[1]):re[kr(Fe[0])]=Fe[1];break}},X);else if(R[2]==26||R[2]==14)X.Enum=Z,R[2]==14&&(X.qpro=!0,R.l=0),e(R,function(Fe,He,Xe){switch(Xe){case 204:ne=Fe;break;case 22:Fe[1].v=Fe[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Fe[3]>fe&&(re["!ref"]=Qr(oe),be[ne]=re,Ce.push(ne),re=X.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},fe=Fe[3],ne="Sheet"+(fe+1)),Le>0&&Fe[0].r>=Le)break;X.dense?(re[Fe[0].r]||(re[Fe[0].r]=[]),re[Fe[0].r][Fe[0].c]=Fe[1]):re[kr(Fe[0])]=Fe[1],oe.e.c<Fe[0].c&&(oe.e.c=Fe[0].c),oe.e.r<Fe[0].r&&(oe.e.r=Fe[0].r);break;case 27:Fe[14e3]&&(me[Fe[14e3][0]]=Fe[14e3][1]);break;case 1537:me[Fe[0]]=Fe[1],Fe[0]==fe&&(ne=Fe[1]);break}},X);else throw new Error("Unrecognized LOTUS BOF "+R[2]);if(re["!ref"]=Qr(oe),be[ue||ne]=re,Ce.push(ue||ne),!me.length)return{SheetNames:Ce,Sheets:be};for(var Ye={},Te=[],we=0;we<me.length;++we)be[Ce[we]]?(Te.push(me[we]||Ce[we]),Ye[me[we]]=be[me[we]]||be[Ce[we]]):(Te.push(me[we]),Ye[me[we]]={"!ref":"A1"});return{SheetNames:Te,Sheets:Ye}}function n(R,K){var X=K||{};if(+X.codepage>=0&&Mc(+X.codepage),X.type=="string")throw new Error("Cannot write WK1 to JS string");var re=Po(),ne=Sn(R["!ref"]),ue=Array.isArray(R),fe=[];Pt(re,0,s(1030)),Pt(re,6,c(ne));for(var be=Math.min(ne.e.r,8191),Ce=ne.s.r;Ce<=be;++Ce)for(var me=fs(Ce),oe=ne.s.c;oe<=ne.e.c;++oe){Ce===ne.s.r&&(fe[oe]=Ia(oe));var Le=fe[oe]+me,Ye=ue?(R[Ce]||[])[oe]:R[Le];if(!(!Ye||Ye.t=="z"))if(Ye.t=="n")(Ye.v|0)==Ye.v&&Ye.v>=-32768&&Ye.v<=32767?Pt(re,13,p(Ce,oe,Ye.v)):Pt(re,14,x(Ce,oe,Ye.v));else{var Te=rd(Ye);Pt(re,15,h(Ce,oe,Te.slice(0,239)))}}return Pt(re,1),re.end()}function a(R,K){var X=K||{};if(+X.codepage>=0&&Mc(+X.codepage),X.type=="string")throw new Error("Cannot write WK3 to JS string");var re=Po();Pt(re,0,i(R));for(var ne=0,ue=0;ne<R.SheetNames.length;++ne)(R.Sheets[R.SheetNames[ne]]||{})["!ref"]&&Pt(re,27,q(R.SheetNames[ne],ue++));var fe=0;for(ne=0;ne<R.SheetNames.length;++ne){var be=R.Sheets[R.SheetNames[ne]];if(!(!be||!be["!ref"])){for(var Ce=Sn(be["!ref"]),me=Array.isArray(be),oe=[],Le=Math.min(Ce.e.r,8191),Ye=Ce.s.r;Ye<=Le;++Ye)for(var Te=fs(Ye),we=Ce.s.c;we<=Ce.e.c;++we){Ye===Ce.s.r&&(oe[we]=Ia(we));var Fe=oe[we]+Te,He=me?(be[Ye]||[])[we]:be[Fe];if(!(!He||He.t=="z"))if(He.t=="n")Pt(re,23,U(Ye,we,fe,He.v));else{var Xe=rd(He);Pt(re,22,w(Ye,we,fe,Xe.slice(0,239)))}}++fe}}return Pt(re,1),re.end()}function s(R){var K=dt(2);return K.write_shift(2,R),K}function i(R){var K=dt(26);K.write_shift(2,4096),K.write_shift(2,4),K.write_shift(4,0);for(var X=0,re=0,ne=0,ue=0;ue<R.SheetNames.length;++ue){var fe=R.SheetNames[ue],be=R.Sheets[fe];if(!(!be||!be["!ref"])){++ne;var Ce=Qo(be["!ref"]);X<Ce.e.r&&(X=Ce.e.r),re<Ce.e.c&&(re=Ce.e.c)}}return X>8191&&(X=8191),K.write_shift(2,X),K.write_shift(1,ne),K.write_shift(1,re),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(1,1),K.write_shift(1,2),K.write_shift(4,0),K.write_shift(4,0),K}function o(R,K,X){var re={s:{c:0,r:0},e:{c:0,r:0}};return K==8&&X.qpro?(re.s.c=R.read_shift(1),R.l++,re.s.r=R.read_shift(2),re.e.c=R.read_shift(1),R.l++,re.e.r=R.read_shift(2),re):(re.s.c=R.read_shift(2),re.s.r=R.read_shift(2),K==12&&X.qpro&&(R.l+=2),re.e.c=R.read_shift(2),re.e.r=R.read_shift(2),K==12&&X.qpro&&(R.l+=2),re.s.c==65535&&(re.s.c=re.e.c=re.s.r=re.e.r=0),re)}function c(R){var K=dt(8);return K.write_shift(2,R.s.c),K.write_shift(2,R.s.r),K.write_shift(2,R.e.c),K.write_shift(2,R.e.r),K}function A(R,K,X){var re=[{c:0,r:0},{t:"n",v:0},0,0];return X.qpro&&X.vers!=20768?(re[0].c=R.read_shift(1),re[3]=R.read_shift(1),re[0].r=R.read_shift(2),R.l+=2):(re[2]=R.read_shift(1),re[0].c=R.read_shift(2),re[0].r=R.read_shift(2)),re}function d(R,K,X){var re=R.l+K,ne=A(R,K,X);if(ne[1].t="s",X.vers==20768){R.l++;var ue=R.read_shift(1);return ne[1].v=R.read_shift(ue,"utf8"),ne}return X.qpro&&R.l++,ne[1].v=R.read_shift(re-R.l,"cstr"),ne}function h(R,K,X){var re=dt(7+X.length);re.write_shift(1,255),re.write_shift(2,K),re.write_shift(2,R),re.write_shift(1,39);for(var ne=0;ne<re.length;++ne){var ue=X.charCodeAt(ne);re.write_shift(1,ue>=128?95:ue)}return re.write_shift(1,0),re}function m(R,K,X){var re=A(R,K,X);return re[1].v=R.read_shift(2,"i"),re}function p(R,K,X){var re=dt(7);return re.write_shift(1,255),re.write_shift(2,K),re.write_shift(2,R),re.write_shift(2,X,"i"),re}function v(R,K,X){var re=A(R,K,X);return re[1].v=R.read_shift(8,"f"),re}function x(R,K,X){var re=dt(13);return re.write_shift(1,255),re.write_shift(2,K),re.write_shift(2,R),re.write_shift(8,X,"f"),re}function E(R,K,X){var re=R.l+K,ne=A(R,K,X);if(ne[1].v=R.read_shift(8,"f"),X.qpro)R.l=re;else{var ue=R.read_shift(2);I(R.slice(R.l,R.l+ue),ne),R.l+=ue}return ne}function _(R,K,X){var re=K&32768;return K&=-32769,K=(re?R:0)+(K>=8192?K-16384:K),(re?"":"$")+(X?Ia(K):fs(K))}var B={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},T=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function I(R,K){vi(R,0);for(var X=[],re=0,ne="",ue="",fe="",be="";R.l<R.length;){var Ce=R[R.l++];switch(Ce){case 0:X.push(R.read_shift(8,"f"));break;case 1:ue=_(K[0].c,R.read_shift(2),!0),ne=_(K[0].r,R.read_shift(2),!1),X.push(ue+ne);break;case 2:{var me=_(K[0].c,R.read_shift(2),!0),oe=_(K[0].r,R.read_shift(2),!1);ue=_(K[0].c,R.read_shift(2),!0),ne=_(K[0].r,R.read_shift(2),!1),X.push(me+oe+":"+ue+ne)}break;case 3:if(R.l<R.length){console.error("WK1 premature formula end");return}break;case 4:X.push("("+X.pop()+")");break;case 5:X.push(R.read_shift(2));break;case 6:{for(var Le="";Ce=R[R.l++];)Le+=String.fromCharCode(Ce);X.push('"'+Le.replace(/"/g,'""')+'"')}break;case 8:X.push("-"+X.pop());break;case 23:X.push("+"+X.pop());break;case 22:X.push("NOT("+X.pop()+")");break;case 20:case 21:be=X.pop(),fe=X.pop(),X.push(["AND","OR"][Ce-20]+"("+fe+","+be+")");break;default:if(Ce<32&&T[Ce])be=X.pop(),fe=X.pop(),X.push(fe+T[Ce]+be);else if(B[Ce]){if(re=B[Ce][1],re==69&&(re=R[R.l++]),re>X.length){console.error("WK1 bad formula parse 0x"+Ce.toString(16)+":|"+X.join("|")+"|");return}var Ye=X.slice(-re);X.length-=re,X.push(B[Ce][0]+"("+Ye.join(",")+")")}else return Ce<=7?console.error("WK1 invalid opcode "+Ce.toString(16)):Ce<=24?console.error("WK1 unsupported op "+Ce.toString(16)):Ce<=30?console.error("WK1 invalid opcode "+Ce.toString(16)):Ce<=115?console.error("WK1 unsupported function opcode "+Ce.toString(16)):console.error("WK1 unrecognized opcode "+Ce.toString(16))}}X.length==1?K[1].f=""+X[0]:console.error("WK1 bad formula parse |"+X.join("|")+"|")}function L(R){var K=[{c:0,r:0},{t:"n",v:0},0];return K[0].r=R.read_shift(2),K[3]=R[R.l++],K[0].c=R[R.l++],K}function k(R,K){var X=L(R);return X[1].t="s",X[1].v=R.read_shift(K-4,"cstr"),X}function w(R,K,X,re){var ne=dt(6+re.length);ne.write_shift(2,R),ne.write_shift(1,X),ne.write_shift(1,K),ne.write_shift(1,39);for(var ue=0;ue<re.length;++ue){var fe=re.charCodeAt(ue);ne.write_shift(1,fe>=128?95:fe)}return ne.write_shift(1,0),ne}function y(R,K){var X=L(R);X[1].v=R.read_shift(2);var re=X[1].v>>1;if(X[1].v&1)switch(re&7){case 0:re=(re>>3)*5e3;break;case 1:re=(re>>3)*500;break;case 2:re=(re>>3)/20;break;case 3:re=(re>>3)/200;break;case 4:re=(re>>3)/2e3;break;case 5:re=(re>>3)/2e4;break;case 6:re=(re>>3)/16;break;case 7:re=(re>>3)/64;break}return X[1].v=re,X}function N(R,K){var X=L(R),re=R.read_shift(4),ne=R.read_shift(4),ue=R.read_shift(2);if(ue==65535)return re===0&&ne===3221225472?(X[1].t="e",X[1].v=15):re===0&&ne===3489660928?(X[1].t="e",X[1].v=42):X[1].v=0,X;var fe=ue&32768;return ue=(ue&32767)-16446,X[1].v=(1-fe*2)*(ne*Math.pow(2,ue+32)+re*Math.pow(2,ue)),X}function U(R,K,X,re){var ne=dt(14);if(ne.write_shift(2,R),ne.write_shift(1,X),ne.write_shift(1,K),re==0)return ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(2,65535),ne;var ue=0,fe=0,be=0,Ce=0;return re<0&&(ue=1,re=-re),fe=Math.log2(re)|0,re/=Math.pow(2,fe-31),Ce=re>>>0,(Ce&2147483648)==0&&(re/=2,++fe,Ce=re>>>0),re-=Ce,Ce|=2147483648,Ce>>>=0,re*=Math.pow(2,32),be=re>>>0,ne.write_shift(4,be),ne.write_shift(4,Ce),fe+=16383+(ue?32768:0),ne.write_shift(2,fe),ne}function j(R,K){var X=N(R);return R.l+=K-14,X}function F(R,K){var X=L(R),re=R.read_shift(4);return X[1].v=re>>6,X}function P(R,K){var X=L(R),re=R.read_shift(8,"f");return X[1].v=re,X}function M(R,K){var X=P(R);return R.l+=K-10,X}function ee(R,K){return R[R.l+K-1]==0?R.read_shift(K,"cstr"):""}function W(R,K){var X=R[R.l++];X>K-1&&(X=K-1);for(var re="";re.length<X;)re+=String.fromCharCode(R[R.l++]);return re}function te(R,K,X){if(!(!X.qpro||K<21)){var re=R.read_shift(1);R.l+=17,R.l+=1,R.l+=2;var ne=R.read_shift(K-21,"cstr");return[re,ne]}}function G(R,K){for(var X={},re=R.l+K;R.l<re;){var ne=R.read_shift(2);if(ne==14e3){for(X[ne]=[0,""],X[ne][0]=R.read_shift(2);R[R.l];)X[ne][1]+=String.fromCharCode(R[R.l]),R.l++;R.l++}}return X}function q(R,K){var X=dt(5+R.length);X.write_shift(2,14e3),X.write_shift(2,K);for(var re=0;re<R.length;++re){var ne=R.charCodeAt(re);X[X.l++]=ne>127?95:ne}return X[X.l++]=0,X}var z={0:{n:"BOF",f:_s},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:E},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ee},222:{n:"SHEETNAMELP",f:W},65535:{n:""}},Z={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:k},23:{n:"NUMBER17",f:N},24:{n:"NUMBER18",f:y},25:{n:"FORMULA19",f:j},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:G},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:F},38:{n:"??"},39:{n:"NUMBER27",f:P},40:{n:"FORMULA28",f:M},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ee},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:te},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function xie(e){var t={},r=e.match(ao),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=jr(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=rB[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var vie=function(){var e=qx("t"),t=qx("rPr");function r(s){var i=s.match(e);if(!i)return{t:"s",v:""};var o={t:"s",v:_n(i[1])},c=s.match(t);return c&&(o.s=xie(c[1])),o}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(o){return o.v})}}(),bie=function(){var t=/(\r\n|\n)/g;function r(a,s,i){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),i.push("</"+c+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),wie=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,yie=/<(?:\w+:)?r>/,Eie=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function SB(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=_n(ia(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=ia(e),r&&(n.h=dB(n.t))):e.match(yie)&&(n.r=ia(e),n.t=_n(ia((e.replace(Eie,"").match(wie)||[]).join("").replace(ao,""))),r&&(n.h=bie(vie(n.r)))),n):{t:""}}var Cie=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,_ie=/<(?:\w+:)?(?:si|sstItem)>/g,Sie=/<\/(?:\w+:)?(?:si|sstItem)>/;function Nie(e,t){var r=[],n="";if(!e)return r;var a=e.match(Cie);if(a){n=a[2].replace(_ie,"").split(Sie);for(var s=0;s!=n.length;++s){var i=SB(n[s].trim(),t);i!=null&&(r[r.length]=i)}a=jr(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var Bie=/^\s|\s$|[\t\n\r]/;function QP(e,t){if(!t.bookSST)return"";var r=[hs];r[r.length]=Ot("sst",null,{xmlns:g0[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(Bie)&&(s+=' xml:space="preserve"'),s+=">"+Jn(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function kie(e){return[e.read_shift(4),e.read_shift(4)]}function Tie(e,t){var r=[],n=!1;return ud(e,function(s,i,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Iie(e,t){return t||(t=dt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Fie=Hne;function jie(e){var t=Po();St(t,159,Iie(e));for(var r=0;r<e.length;++r)St(t,19,Fie(e[r]));return St(t,160),t.end()}function HP(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function qA(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function Die(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=qA(e,4),t.U=qA(e,4),t.W=qA(e,4),t}function Rie(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function Lie(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(Rie(e));return t}function Oie(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function Uie(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=qA(e,4),t.U=qA(e,4),t.W=qA(e,4),t}function Pie(e){var t=Uie(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function VP(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function zP(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function Mie(e){var t=qA(e);switch(t.Minor){case 2:return[t.Minor,Qie(e)];case 3:return[t.Minor,Hie()];case 4:return[t.Minor,Vie(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function Qie(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=VP(e,r),a=zP(e,e.length-e.l);return{t:"Std",h:n,v:a}}function Hie(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Vie(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(ao,function(s){var i=jr(s);switch(eA(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function zie(e,t){var r={},n=r.EncryptionVersionInfo=qA(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=VP(e,a),t-=a,r.EncryptionVerifier=zP(e,t),r}function Gie(e){var t={},r=t.EncryptionVersionInfo=qA(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function NB(e){var t=0,r,n=HP(e),a=n.length+1,s,i,o,c,A;for(r=Hf(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],o=(t&16384)===0?0:1,c=t<<1&32767,A=o|c,t=A^i;return t^52811}var GP=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,o){return n(i^o)},s=function(i){for(var o=t[i.length-1],c=104,A=i.length-1;A>=0;--A)for(var d=i[A],h=0;h!=7;++h)d&64&&(o^=r[c]),d*=2,--c;return o};return function(i){for(var o=HP(i),c=s(o),A=o.length,d=Hf(16),h=0;h!=16;++h)d[h]=0;var m,p,v;for((A&1)===1&&(m=c>>8,d[A]=a(e[0],m),--A,m=c&255,p=o[o.length-1],d[A]=a(p,m));A>0;)--A,m=c>>8,d[A]=a(o[A],m),--A,m=c&255,d[A]=a(o[A],m);for(A=15,v=15-o.length;v>0;)m=c>>8,d[A]=a(e[v],m),--A,--v,m=c&255,d[A]=a(o[A],m),--A,--v;return d}}(),Kie=function(e,t,r,n,a){a||(a=t),n||(n=GP(e));var s,i;for(s=0;s!=t.length;++s)i=t[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},qie=function(e){var t=0,r=GP(e);return function(n){var a=Kie("",n,t,r);return t=a[1],a[0]}};function $ie(e,t,r,n){var a={key:_s(e),verificationBytes:_s(e)};return r.password&&(a.verifier=NB(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=qie(r.password)),a}function Wie(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=Gie(e):n.Data=zie(e,t),n}function Xie(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?Wie(e,t-2,n):$ie(e,r.biff>=8?t:t-2,r,n),n}var KP=function(){function e(a,s){switch(s.type){case"base64":return t(vl(a),s);case"binary":return t(a,s);case"buffer":return t(Zr&&Buffer.isBuffer(a)?a.toString("binary"):Xf(a),s);case"array":return t(a0(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var i=s||{},o=i.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var A={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,h){Array.isArray(o)&&(o[h]=[]);for(var m=/\\\w+\b/g,p=0,v,x=-1;v=m.exec(d);){switch(v[0]){case"\\cell":var E=d.slice(p,m.lastIndex-v[0].length);if(E[0]==" "&&(E=E.slice(1)),++x,E.length){var _={v:E,t:"s"};Array.isArray(o)?o[h][x]=_:o[kr({r:h,c:x})]=_}break}p=m.lastIndex}x>A.e.c&&(A.e.c=x)}),o["!ref"]=Qr(A),o}function r(a,s){return Yf(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=Sn(a["!ref"]),o,c=Array.isArray(a),A=i.s.r;A<=i.e.r;++A){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var h=kr({r:A,c:d});o=c?(a[A]||[])[d]:a[h],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(rd(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function Yie(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Yx(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function Jie(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),i=a-s;if(i===0)return[0,0,t];var o=0,c=0,A=a+s;switch(c=i/(A>1?2-A:A),a){case t:o=((r-n)/i+6)%6;break;case r:o=(n-t)/i+2;break;case n:o=(t-r)/i+4;break}return[o/6,c,A/2]}function Zie(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],o=6*t,c;if(r!==0)switch(o|0){case 0:case 6:c=a*o,i[0]+=a,i[1]+=c;break;case 1:c=a*(2-o),i[0]+=c,i[1]+=a;break;case 2:c=a*(o-2),i[1]+=a,i[2]+=c;break;case 3:c=a*(4-o),i[1]+=c,i[2]+=a;break;case 4:c=a*(o-4),i[2]+=a,i[0]+=c;break;case 5:c=a*(6-o),i[2]+=c,i[0]+=a;break}for(var A=0;A!=3;++A)i[A]=Math.round(i[A]*255);return i}function jw(e,t){if(t===0)return e;var r=Jie(Yie(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Yx(Zie(r))}var qP=6,eoe=15,toe=1,Wi=qP;function Jx(e){return Math.floor((e+Math.round(128/Wi)/256)*Wi)}function Zx(e){return Math.floor((e-5)/Wi*100+.5)/100}function Dw(e){return Math.round((e*Wi+5)/Wi*256)/256}function D5(e){return Dw(Zx(Jx(e)))}function BB(e){var t=Math.abs(e-D5(e)),r=Wi;if(t>.005)for(Wi=toe;Wi<eoe;++Wi)Math.abs(e-D5(e))<=t&&(t=Math.abs(e-D5(e)),r=Wi);Wi=r}function Vf(e){e.width?(e.wpx=Jx(e.width),e.wch=Zx(e.wpx),e.MDW=Wi):e.wpx?(e.wch=Zx(e.wpx),e.width=Dw(e.wch),e.MDW=Wi):typeof e.wch=="number"&&(e.width=Dw(e.wch),e.wpx=Jx(e.width),e.MDW=Wi),e.customWidth&&delete e.customWidth}var roe=96,$P=roe;function e1(e){return e*96/$P}function fp(e){return e*$P/96}var noe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function aoe(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(ao)||[]).forEach(function(i){var o=jr(i);switch(eA(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=pa(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=pa(o.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function soe(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(ao)||[]).forEach(function(i){var o=jr(i);switch(eA(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function ioe(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(ao)||[]).forEach(function(i){var o=jr(i);switch(eA(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=ia(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?pa(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?pa(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?pa(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?pa(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?pa(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?pa(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?pa(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=rB[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=pa(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var c=Hh[a.color.index];a.color.index==81&&(c=Hh[1]),c||(c=Hh[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=jw(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function ooe(e,t,r){t.NumberFmt=[];for(var n=Xa(Sr),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Sr[n[a]];var s=e[0].match(ao);if(s)for(a=0;a<s.length;++a){var i=jr(s[a]);switch(eA(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=_n(ia(i.formatCode)),c=parseInt(i.numFmtId,10);if(t.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=o}KA(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function loe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Ot("numFmt",null,{numFmtId:n,formatCode:Jn(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Ot("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var gb=["numFmtId","fillId","fontId","borderId","xfId"],xb=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function coe(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(ao)||[]).forEach(function(s){var i=jr(s),o=0;switch(eA(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<gb.length;++o)n[gb[o]]&&(n[gb[o]]=parseInt(n[gb[o]],10));for(o=0;o<xb.length;++o)n[xb[o]]&&(n[xb[o]]=pa(n[xb[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};i.vertical&&(c.vertical=i.vertical),i.horizontal&&(c.horizontal=i.horizontal),i.textRotation!=null&&(c.textRotation=i.textRotation),i.indent&&(c.indent=i.indent),i.wrapText&&(c.wrapText=pa(i.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function uoe(e){var t=[];return t[t.length]=Ot("cellXfs",null),e.forEach(function(r){t[t.length]=Ot("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Ot("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Aoe=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,A){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=o.match(t))&&ooe(h,d,A),(h=o.match(a))&&ioe(h,d,c,A),(h=o.match(n))&&soe(h,d,c,A),(h=o.match(s))&&aoe(h,d,c,A),(h=o.match(r))&&coe(h,d,A),d}}();function WP(e,t){var r=[hs,Ot("styleSheet",null,{xmlns:g0[0],"xmlns:vt":Qs.vt})],n;return e.SSF&&(n=loe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=uoe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function doe(e,t){var r=e.read_shift(2),n=Zi(e);return[r,n]}function foe(e,t,r){r||(r=dt(6+4*t.length)),r.write_shift(2,e),si(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function hoe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=Wne(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var o=e.read_shift(1);o>0&&(n.family=o);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=$ne(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Zi(e),n}function moe(e,t){t||(t=dt(153)),t.write_shift(2,e.sz*20),Xne(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Tw(e.color,t);var n=0;return n=2,t.write_shift(1,n),si(e.name,t),t.length>t.l?t.slice(0,t.l):t}var poe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],R5,goe=to;function yj(e,t){t||(t=dt(84)),R5||(R5=Zy(poe));var r=R5[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(Tw({auto:1},t),Tw({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function xoe(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function XP(e,t,r){r||(r=dt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function _g(e,t){return t||(t=dt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var voe=to;function boe(e,t){return t||(t=dt(51)),t.write_shift(1,0),_g(null,t),_g(null,t),_g(null,t),_g(null,t),_g(null,t),t.length>t.l?t.slice(0,t.l):t}function woe(e,t){return t||(t=dt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),kw(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function yoe(e,t,r){var n=dt(2052);return n.write_shift(4,e),kw(t,n),kw(r,n),n.length>n.l?n.slice(0,n.l):n}function Eoe(e,t,r){var n={};n.NumberFmt=[];for(var a in Sr)n.NumberFmt[a]=Sr[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return ud(e,function(c,A,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],KA(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=jw(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(A.T>0)s.push(d);else if(A.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function Coe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(St(e,615,Vc(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&St(e,44,foe(a,t[a]))}),St(e,616))}}function _oe(e){var t=1;St(e,611,Vc(t)),St(e,43,moe({sz:12,color:{theme:1},name:"Calibri",family:2})),St(e,612)}function Soe(e){var t=2;St(e,603,Vc(t)),St(e,45,yj({patternType:"none"})),St(e,45,yj({patternType:"gray125"})),St(e,604)}function Noe(e){var t=1;St(e,613,Vc(t)),St(e,46,boe()),St(e,614)}function Boe(e){var t=1;St(e,626,Vc(t)),St(e,47,XP({numFmtId:0},65535)),St(e,627)}function koe(e,t){St(e,617,Vc(t.length)),t.forEach(function(r){St(e,47,XP(r,0))}),St(e,618)}function Toe(e){var t=1;St(e,619,Vc(t)),St(e,48,woe({xfId:0,name:"Normal"})),St(e,620)}function Ioe(e){var t=0;St(e,505,Vc(t)),St(e,506)}function Foe(e){var t=0;St(e,508,yoe(t,"TableStyleMedium9","PivotStyleMedium4")),St(e,509)}function joe(e,t){var r=Po();return St(r,278),Coe(r,e.SSF),_oe(r),Soe(r),Noe(r),Boe(r),koe(r,t.cellXfs),Toe(r),Ioe(r),Foe(r),St(r,279),r.end()}var Doe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Roe(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(ao)||[]).forEach(function(a){var s=jr(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[Doe.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function Loe(){}function Ooe(){}var Uoe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Poe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Moe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Qoe(e,t,r){t.themeElements={};var n;[["clrScheme",Uoe,Roe],["fontScheme",Poe,Loe],["fmtScheme",Moe,Ooe]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var Hoe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function YP(e,t){(!e||e.length===0)&&(e=kB());var r,n={};if(!(r=e.match(Hoe)))throw new Error("themeElements not found in theme");return Qoe(r[0],n,t),n.raw=e,n}function kB(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[hs];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Voe(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var i;try{i=V7(s,{type:"array"})}catch{return}var o=hl(i,"theme/theme/theme1.xml",!0);if(o)return YP(o,r)}}function zoe(e){return e.read_shift(4)}function Goe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Koe(e,4);break;case 2:t.xclrValue=TP(e);break;case 3:t.xclrValue=zoe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Koe(e,t){return to(e,t)}function qoe(e,t){return to(e,t)}function $oe(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Goe(e);break;case 6:n[1]=qoe(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function Woe(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push($oe(e,r-e.l));return{ixfe:n,ext:s}}function Xoe(e,t){t.forEach(function(r){r[0]})}function Yoe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Zi(e)}}function Joe(e){var t=dt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),si(e.name,t),t.slice(0,t.l)}function Zoe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function ele(e){var t=dt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function tle(e,t){var r=dt(8+2*t.length);return r.write_shift(4,e),si(t,r),r.slice(0,r.l)}function rle(e){return e.l+=4,e.read_shift(4)!=0}function nle(e,t){var r=dt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function ale(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,o=2;return ud(e,function(c,A,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(h){o==1?n.Cell.push({type:n.Types[h[0]-1].name,index:h[1]}):o==0&&n.Value.push({type:n.Types[h[0]-1].name,index:h[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!A.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function sle(){var e=Po();return St(e,332),St(e,334,Vc(1)),St(e,335,Joe({name:"XLDAPR",version:12e4,flags:3496657072})),St(e,336),St(e,339,tle(1,"XLDAPR")),St(e,52),St(e,35,Vc(514)),St(e,4096,Vc(0)),St(e,4097,Yl(1)),St(e,36),St(e,53),St(e,340),St(e,337,nle(1)),St(e,51,ele([[1,0]])),St(e,338),St(e,333),e.end()}function ile(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,i;return e.replace(ao,function(o){var c=jr(o);switch(eA(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var A=0;A<n.Types.length;++A)n.Types[A].name==c.name&&(i=n.Types[A]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),n}function JP(){var e=[hs];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function ole(e){var t=[];if(!e)return t;var r=1;return(e.match(ao)||[]).forEach(function(n){var a=jr(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function lle(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=kr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function cle(e,t,r){var n=[];return ud(e,function(s,i,o){switch(o){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function ule(e,t,r,n){if(!e)return e;var a=n||{},s=!1;ud(e,function(o,c,A){switch(A){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}},a)}function Ale(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Im=1024;function ZP(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Ot("xml",null,{"xmlns:v":ul.v,"xmlns:o":ul.o,"xmlns:x":ul.x,"xmlns:mv":ul.mv}).replace(/\/>/,">"),Ot("o:shapelayout",Ot("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Ot("v:shapetype",[Ot("v:stroke",null,{joinstyle:"miter"}),Ot("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Im<e*1e3;)Im+=1e3;return t.forEach(function(s){var i=Fa(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?Ot("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,A=Ot("v:fill",c,o),d={on:"t",obscured:"t"};++Im,a=a.concat(["<v:shape"+$x({id:"_x0000_s"+Im,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",A,Ot("v:shadow",null,d),Ot("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",wi("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),wi("x:AutoFill","False"),wi("x:Row",String(i.r)),wi("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function Ej(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(i){var o=Fa(i.ref);if(a?(e[o.r]||(e[o.r]=[]),s=e[o.r][o.c]):s=e[i.ref],!s){s={t:"z"},a?e[o.r][o.c]=s:e[i.ref]=s;var c=Sn(e["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var A=Qr(c);A!==e["!ref"]&&(e["!ref"]=A)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var h=s.c.length-1;h>=0;--h){if(!r&&s.c[h].T)return;r&&!s.c[h].T&&s.c.splice(h,1)}if(r&&n){for(h=0;h<n.length;++h)if(d.a==n[h].id){d.a=n[h].name||d.a;break}}s.c.push(d)})}function dle(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=jr(o[0]),A={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=Fa(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var h=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!h&&!!h[1]&&SB(h[1])||{r:"",t:"",h:""};A.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),A.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(A.h=m.h),n.push(A)}}}}),n}function eM(e){var t=[hs,Ot("comments",null,{xmlns:g0[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=Jn(a.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(Jn(c.a))),s.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)t.push(wi("t",Jn(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)i+=`Reply:
    `+s[o]+`
`;t.push(wi("t",Jn(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function fle(e,t){var r=[],n=!1,a={},s=0;return e.replace(ao,function(o,c){var A=jr(o);switch(eA(A[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:A.personId,guid:A.id,ref:A.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+o.length;break;case"</text>":a.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+A[0]+" in threaded comments")}return o}),r}function hle(e,t,r){var n=[hs,Ot("ThreadedComments",null,{xmlns:Qs.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=c.id:c.parentId=s,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push(Ot("threadedComment",wi("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function mle(e,t){var r=[],n=!1;return e.replace(ao,function(s){var i=jr(s);switch(eA(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function ple(e){var t=[hs,Ot("personList",null,{xmlns:Qs.TCMNT,"xmlns:x":g0[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Ot("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function gle(e){var t={};t.iauthor=e.read_shift(4);var r=w0(e);return t.rfx=r.s,t.ref=kr(r.s),e.l+=16,t}function xle(e,t){return t==null&&(t=dt(36)),t.write_shift(4,e[1].iauthor),Fp(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var vle=Zi;function ble(e){return si(e.slice(0,54))}function wle(e,t){var r=[],n=[],a={},s=!1;return ud(e,function(o,c,A){switch(A){case 632:n.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}}),r}function yle(e){var t=Po(),r=[];return St(t,628),St(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),St(t,632,ble(a.a)))})}),St(t,631),St(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:Fa(n[0]),e:Fa(n[0])};St(t,635,xle([s,a])),a.t&&a.t.length>0&&St(t,637,zne(a)),St(t,636),delete a.iauthor})}),St(t,634),St(t,629),t.end()}var Ele="application/vnd.ms-office.vbaProject";function Cle(e){var t=hr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");hr.utils.cfb_add(t,a,e.FileIndex[n].content)}}),hr.write(t)}function _le(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&hr.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var tM=["xlsb","xlsm","xlam","biff8","xla"];function Sle(){return{"!type":"dialog"}}function Nle(){return{"!type":"dialog"}}function Ble(){return{"!type":"macro"}}function kle(){return{"!type":"macro"}}var $m=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,i){var o=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var A=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=t.c:--d,c?A+=t.r:--A,a+(o?"":"$")+Ia(d)+(c?"":"$")+fs(A)}return function(a,s){return t=s,a.replace(e,r)}}(),TB=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,IB=function(){return function(t,r){return t.replace(TB,function(n,a,s,i,o,c){var A=gB(i)-(s?0:r.c),d=pB(c)-(o?0:r.r),h=d==0?"":o?d+1:"["+d+"]",m=A==0?"":s?A+1:"["+A+"]";return a+"R"+h+"C"+m})}}();function rM(e,t){return e.replace(TB,function(r,n,a,s,i,o){return n+(a=="$"?a+s:Ia(gB(s)+t.c))+(i=="$"?i+o:fs(pB(o)+t.r))})}function Tle(e,t,r){var n=Qo(t),a=n.s,s=Fa(r),i={r:s.r-a.r,c:s.c-a.c};return rM(e,i)}function Ile(e){return e.length!=1}function Cj(e){return e.replace(/_xlfn\./g,"")}function ys(e){e.l+=1}function zf(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function nM(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return aM(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),i=zf(e),o=zf(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function aM(e){var t=zf(e),r=zf(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function Fle(e,t,r){if(r.biff<8)return aM(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=zf(e),i=zf(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function sM(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return jle(e);var n=e.read_shift(r&&r.biff==12?4:2),a=zf(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function jle(e){var t=zf(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function Dle(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Rle(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return Lle(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),i=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:o}}function Lle(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function Ole(e,t,r){var n=(e[e.l++]&96)>>5,a=nM(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function Ule(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var i=nM(e,s,r);return[n,a,i]}function Ple(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Mle(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function Qle(e,t,r){var n=(e[e.l++]&96)>>5,a=Fle(e,t-1,r);return[n,a]}function Hle(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function _j(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Vle(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function zle(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Gle(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Kle(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function qle(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function iM(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function $le(e){return e.read_shift(2),iM(e)}function Wle(e){return e.read_shift(2),iM(e)}function Xle(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=sM(e,0,r);return[n,a]}function Yle(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=Rle(e,0,r);return[n,a]}function Jle(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=sM(e,0,r);return[n,a,s]}function Zle(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[rue[a],cM[a],n]}function ece(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:tce(e);return[a,(s[0]===0?cM:tue)[s[1]]]}function tce(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function rce(e,t,r){e.l+=r&&r.biff==2?3:4}function nce(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function ace(e){return e.l++,Ad[e.read_shift(1)]}function sce(e){return e.l++,e.read_shift(2)}function ice(e){return e.l++,e.read_shift(1)!==0}function oce(e){return e.l++,Ji(e)}function lce(e,t,r){return e.l++,Q1(e,t-1,r)}function cce(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=os(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Ad[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Ji(e);break;case 2:r[1]=y0(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function uce(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?w0:rE)(e));return a}function Ace(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=cce(e,r.biff);return i}function dce(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function fce(e,t,r){if(r.biff==5)return hce(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function hce(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function mce(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function pce(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function gce(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function xce(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var vce=to,bce=to,wce=to;function V1(e,t,r){return e.l+=2,[Dle(e)]}function FB(e){return e.l+=6,[]}var yce=V1,Ece=FB,Cce=FB,_ce=V1;function oM(e){return e.l+=2,[_s(e),e.read_shift(2)&1]}var Sce=V1,Nce=oM,Bce=FB,kce=V1,Tce=V1,Ice=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Fce(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),i=Ice[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:a,C:s}}function jce(e){return e.l+=2,[e.read_shift(4)]}function Dce(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Rce(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Lce(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Oce(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Uce(e){return e.l+=4,[0,0]}var Sj={1:{n:"PtgExp",f:nce},2:{n:"PtgTbl",f:wce},3:{n:"PtgAdd",f:ys},4:{n:"PtgSub",f:ys},5:{n:"PtgMul",f:ys},6:{n:"PtgDiv",f:ys},7:{n:"PtgPower",f:ys},8:{n:"PtgConcat",f:ys},9:{n:"PtgLt",f:ys},10:{n:"PtgLe",f:ys},11:{n:"PtgEq",f:ys},12:{n:"PtgGe",f:ys},13:{n:"PtgGt",f:ys},14:{n:"PtgNe",f:ys},15:{n:"PtgIsect",f:ys},16:{n:"PtgUnion",f:ys},17:{n:"PtgRange",f:ys},18:{n:"PtgUplus",f:ys},19:{n:"PtgUminus",f:ys},20:{n:"PtgPercent",f:ys},21:{n:"PtgParen",f:ys},22:{n:"PtgMissArg",f:ys},23:{n:"PtgStr",f:lce},26:{n:"PtgSheet",f:Dce},27:{n:"PtgEndSheet",f:Rce},28:{n:"PtgErr",f:ace},29:{n:"PtgBool",f:ice},30:{n:"PtgInt",f:sce},31:{n:"PtgNum",f:oce},32:{n:"PtgArray",f:Hle},33:{n:"PtgFunc",f:Zle},34:{n:"PtgFuncVar",f:ece},35:{n:"PtgName",f:dce},36:{n:"PtgRef",f:Xle},37:{n:"PtgArea",f:Ole},38:{n:"PtgMemArea",f:mce},39:{n:"PtgMemErr",f:vce},40:{n:"PtgMemNoMem",f:bce},41:{n:"PtgMemFunc",f:pce},42:{n:"PtgRefErr",f:gce},43:{n:"PtgAreaErr",f:Ple},44:{n:"PtgRefN",f:Yle},45:{n:"PtgAreaN",f:Qle},46:{n:"PtgMemAreaN",f:Lce},47:{n:"PtgMemNoMemN",f:Oce},57:{n:"PtgNameX",f:fce},58:{n:"PtgRef3d",f:Jle},59:{n:"PtgArea3d",f:Ule},60:{n:"PtgRefErr3d",f:xce},61:{n:"PtgAreaErr3d",f:Mle},255:{}},Pce={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Mce={1:{n:"PtgElfLel",f:oM},2:{n:"PtgElfRw",f:kce},3:{n:"PtgElfCol",f:yce},6:{n:"PtgElfRwV",f:Tce},7:{n:"PtgElfColV",f:_ce},10:{n:"PtgElfRadical",f:Sce},11:{n:"PtgElfRadicalS",f:Bce},13:{n:"PtgElfColS",f:Ece},15:{n:"PtgElfColSV",f:Cce},16:{n:"PtgElfRadicalLel",f:Nce},25:{n:"PtgList",f:Fce},29:{n:"PtgSxName",f:jce},255:{}},Qce={0:{n:"PtgAttrNoop",f:Uce},1:{n:"PtgAttrSemi",f:qle},2:{n:"PtgAttrIf",f:Gle},4:{n:"PtgAttrChoose",f:Vle},8:{n:"PtgAttrGoto",f:zle},16:{n:"PtgAttrSum",f:rce},32:{n:"PtgAttrBaxcel",f:_j},33:{n:"PtgAttrBaxcel",f:_j},64:{n:"PtgAttrSpace",f:$le},65:{n:"PtgAttrSpaceSemi",f:Wle},128:{n:"PtgAttrIfError",f:Kle},255:{}};function z1(e,t,r,n){if(n.biff<8)return to(e,t);for(var a=e.l+t,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=Ace(e,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=uce(e,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=a-e.l,t!==0&&s.push(to(e,t)),s}function G1(e,t,r){for(var n=e.l+t,a,s,i=[];n!=e.l;)t=n-e.l,s=e[e.l],a=Sj[s]||Sj[Pce[s]],(s===24||s===25)&&(a=(s===24?Mce:Qce)[e[e.l+1]]),!a||!a.f?to(e,t):i.push([a.n,a.f(e,t,r)]);return i}function Hce(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var Vce={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function zce(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function lM(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function Nj(e,t,r){var n=lM(e,t,r);return n=="#REF"?n:zce(n,r)}function Ki(e,t,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},o=[],c,A,d,h=0,m=0,p,v="";if(!e[0]||!e[0][0])return"";for(var x=-1,E="",_=0,B=e[0].length;_<B;++_){var T=e[0][_];switch(T[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),A=o.pop(),x>=0){switch(e[0][x][1][0]){case 0:E=Ga(" ",e[0][x][1][1]);break;case 1:E=Ga("\r",e[0][x][1][1]);break;default:if(E="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}A=A+E,x=-1}o.push(A+Vce[T[0]]+c);break;case"PtgIsect":c=o.pop(),A=o.pop(),o.push(A+" "+c);break;case"PtgUnion":c=o.pop(),A=o.pop(),o.push(A+","+c);break;case"PtgRange":c=o.pop(),A=o.pop(),o.push(A+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=px(T[1][1],i,a),o.push(gx(d,s));break;case"PtgRefN":d=r?px(T[1][1],r,a):T[1][1],o.push(gx(d,s));break;case"PtgRef3d":h=T[1][1],d=px(T[1][2],i,a),v=Nj(n,h,a),o.push(v+"!"+gx(d,s));break;case"PtgFunc":case"PtgFuncVar":var I=T[1][0],L=T[1][1];I||(I=0),I&=127;var k=I==0?[]:o.slice(-I);o.length-=I,L==="User"&&(L=k.shift()),o.push(L+"("+k.join(",")+")");break;case"PtgBool":o.push(T[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(T[1]);break;case"PtgNum":o.push(String(T[1]));break;case"PtgStr":o.push('"'+T[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(T[1]);break;case"PtgAreaN":p=rj(T[1][1],r?{s:r}:i,a),o.push(I5(p,a));break;case"PtgArea":p=rj(T[1][1],i,a),o.push(I5(p,a));break;case"PtgArea3d":h=T[1][1],p=T[1][2],v=Nj(n,h,a),o.push(v+"!"+I5(p,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=T[1][2];var w=(n.names||[])[m-1]||(n[0]||[])[m],y=w?w.Name:"SH33TJSNAME"+String(m);y&&y.slice(0,6)=="_xlfn."&&!a.xlfn&&(y=y.slice(6)),o.push(y);break;case"PtgNameX":var N=T[1][1];m=T[1][2];var U;if(a.biff<=5)N<0&&(N=-N),n[N]&&(U=n[N][m]);else{var j="";if(((n[N]||[])[0]||[])[0]==14849||(((n[N]||[])[0]||[])[0]==1025?n[N][m]&&n[N][m].itab>0&&(j=n.SheetNames[n[N][m].itab-1]+"!"):j=n.SheetNames[m-1]+"!"),n[N]&&n[N][m])j+=n[N][m].Name;else if(n[0]&&n[0][m])j+=n[0][m].Name;else{var F=(lM(n,N,a)||"").split(";;");F[m-1]?j=F[m-1]:j+="SH33TJSERRX"}o.push(j);break}U||(U={Name:"SH33TJSERRY"}),o.push(U.Name);break;case"PtgParen":var P="(",M=")";if(x>=0){switch(E="",e[0][x][1][0]){case 2:P=Ga(" ",e[0][x][1][1])+P;break;case 3:P=Ga("\r",e[0][x][1][1])+P;break;case 4:M=Ga(" ",e[0][x][1][1])+M;break;case 5:M=Ga("\r",e[0][x][1][1])+M;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}x=-1}o.push(P+o.pop()+M);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:T[1][1],r:T[1][0]};var ee={c:r.c,r:r.r};if(n.sharedf[kr(d)]){var W=n.sharedf[kr(d)];o.push(Ki(W,i,ee,n,a))}else{var te=!1;for(c=0;c!=n.arrayf.length;++c)if(A=n.arrayf[c],!(d.c<A[0].s.c||d.c>A[0].e.c)&&!(d.r<A[0].s.r||d.r>A[0].e.r)){o.push(Ki(A[1],i,ee,n,a)),te=!0;break}te||o.push(T[1])}break;case"PtgArray":o.push("{"+Hce(T[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=_;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+T[1].idx+"[#"+T[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(T));default:throw new Error("Unrecognized Formula Token: "+String(T))}var G=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&x>=0&&G.indexOf(e[0][_][0])==-1){T=e[0][x];var q=!0;switch(T[1][0]){case 4:q=!1;case 0:E=Ga(" ",T[1][1]);break;case 5:q=!1;case 1:E=Ga("\r",T[1][1]);break;default:if(E="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+T[1][0])}o.push((q?E:"")+o.pop()+(q?"":E)),x=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function Gce(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],to(e,t-2)];var o=G1(e,i,r);return t!==i+a&&(s=z1(e,t-i-a,o,r)),e.l=n,[o,s]}function Kce(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],to(e,t-2)];var o=G1(e,i,r);return t!==i+a&&(s=z1(e,t-i-a,o,r)),e.l=n,[o,s]}function qce(e,t,r,n){var a=e.l+t,s=G1(e,n,r),i;return a!==e.l&&(i=z1(e,a-e.l,s,r)),[s,i]}function $ce(e,t,r){var n=e.l+t,a,s=e.read_shift(2),i=G1(e,s,r);return s==65535?[[],to(e,t-2)]:(t!==s+2&&(a=z1(e,n-s-2,i,r)),[i,a])}function Wce(e){var t;if(HA(e,e.l+6)!==65535)return[Ji(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function Xce(e){if(e==null){var t=dt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return s0(e);return s0(0)}function L5(e,t,r){var n=e.l+t,a=tA(e);r.biff==2&&++e.l;var s=Wce(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=Kce(e,n-e.l,r);return{cell:a,val:s[0],formula:o,shared:i>>3&1,tt:s[1]}}function Yce(e,t,r,n,a){var s=o0(t,r,a),i=Xce(e.v),o=dt(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var A=dt(e.bf.length),d=0;d<e.bf.length;++d)A[d]=e.bf[d];var h=ai([s,i,o,A]);return h}function nE(e,t,r){var n=e.read_shift(4),a=G1(e,n,r),s=e.read_shift(4),i=s>0?z1(e,s,a,r):null;return[a,i]}var Jce=nE,aE=nE,Zce=nE,eue=nE,tue={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},cM={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},rue={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Bj(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function nue(e){var t="of:="+e.replace(TB,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function O5(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function aue(e){return e.replace(/\./,"!")}var vx={},Wm={},bx=typeof Map<"u";function jB(e,t,r){var n=0,a=e.length;if(r){if(bx?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=bx?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(bx?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function sE(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Wi=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=Zx(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=Dw(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Gh(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Jf(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,s=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){KA(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function uM(e,t,r,n,a,s){try{n.cellNF&&(e.z=Sr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=xa(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Sr[t]==null&&KA(tne[t]||"General",t),e.t==="e")e.w=e.w||Ad[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Kx(e.v);else if(e.t==="d"){var i=Vs(e.v);(i|0)===i?e.w=i.toString(10):e.w=Kx(i)}else{if(e.v===void 0)return"";e.w=n0(e.v,Wm)}else e.t==="d"?e.w=lc(t,Vs(e.v),Wm):e.w=lc(t,e.v,Wm)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=jw(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=jw(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function sue(e,t,r){if(e&&e["!ref"]){var n=Sn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function iue(e,t){var r=Sn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Qr(r))}var oue=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,lue=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,cue=/<(?:\w:)?hyperlink [^>]*>/mg,uue=/"(\w*:\w*)"/,Aue=/<(?:\w:)?col\b[^>]*[\/]?>/g,due=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,fue=/<(?:\w:)?pageMargins[^>]*\/>/g,AM=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,hue=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,mue=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function pue(e,t,r,n,a,s,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},A="",d="",h=e.match(lue);h?(A=e.slice(0,h.index),d=e.slice(h.index+h[0].length)):A=d=e;var m=A.match(AM);m?DB(m[0],o,a,r):(m=A.match(hue))&&xue(m[0],m[1]||"",o,a,r);var p=(A.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var v=A.slice(p,p+50).match(uue);v&&iue(o,v[1])}var x=A.match(mue);x&&x[1]&&Iue(x[1],a);var E=[];if(t.cellStyles){var _=A.match(Aue);_&&Sue(E,_)}h&&Due(h[1],o,t,c,s,i);var B=d.match(due);B&&(o["!autofilter"]=Bue(B[0]));var T=[],I=d.match(oue);if(I)for(p=0;p!=I.length;++p)T[p]=Sn(I[p].slice(I[p].indexOf('"')+1));var L=d.match(cue);L&&Eue(o,L,n);var k=d.match(fue);if(k&&(o["!margins"]=Cue(jr(k[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=Qr(c)),t.sheetRows>0&&o["!ref"]){var w=Sn(o["!ref"]);t.sheetRows<=+w.e.r&&(w.e.r=t.sheetRows-1,w.e.r>c.e.r&&(w.e.r=c.e.r),w.e.r<w.s.r&&(w.s.r=w.e.r),w.e.c>c.e.c&&(w.e.c=c.e.c),w.e.c<w.s.c&&(w.s.c=w.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Qr(w))}return E.length>0&&(o["!cols"]=E),T.length>0&&(o["!merges"]=T),o}function gue(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Qr(e[r])+'"/>';return t+"</mergeCells>"}function DB(e,t,r,n){var a=jr(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=_n(ia(a.codeName)))}function xue(e,t,r,n,a){DB(e.slice(0,e.indexOf(">")),r,n,a)}function vue(e,t,r,n,a){var s=!1,i={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,i.codeName=Mu(Jn(c))}if(e&&e["!outline"]){var A={summaryBelow:1,summaryRight:1};e["!outline"].above&&(A.summaryBelow=0),e["!outline"].left&&(A.summaryRight=0),o=(o||"")+Ot("outlinePr",null,A)}!s&&!o||(a[a.length]=Ot("sheetPr",o,i))}var bue=["objects","scenarios","selectLockedCells","selectUnlockedCells"],wue=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function yue(e){var t={sheet:1};return bue.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),wue.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=NB(e.password).toString(16).toUpperCase()),Ot("sheetProtection",null,t)}function Eue(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=jr(ia(t[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+_n(s.location))):(s.Target="#"+_n(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=Sn(s.ref),c=o.s.r;c<=o.e.r;++c)for(var A=o.s.c;A<=o.e.c;++A){var d=kr({c:A,r:c});n?(e[c]||(e[c]=[]),e[c][A]||(e[c][A]={t:"z",v:void 0}),e[c][A].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function Cue(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function _ue(e){return Gh(e),Ot("pageMargins",null,e)}function Sue(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=jr(t[n],!0);a.hidden&&(a.hidden=pa(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,BB(a.width)),Vf(a);s<=i;)e[s++]=va(a)}}function Nue(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Ot("col",null,sE(a,n)));return r[r.length]="</cols>",r.join("")}function Bue(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function kue(e,t,r,n){var a=typeof e.ref=="string"?e.ref:Qr(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=Qo(a);i.s.r==i.e.r&&(i.e.r=Qo(t["!ref"]).e.r,a=Qr(i));for(var o=0;o<s.length;++o){var c=s[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Ot("autoFilter",null,{ref:a})}var Tue=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Iue(e,t){t.Views||(t.Views=[{}]),(e.match(Tue)||[]).forEach(function(r,n){var a=jr(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),pa(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function Fue(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Ot("sheetViews",Ot("sheetView",null,a),{})}function jue(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=Ad[e.v];break;case"d":n&&n.cellDates?a=xa(e.v,-1).toISOString():(e=va(e),e.t="n",a=""+(e.v=Vs(xa(e.v)))),typeof e.z>"u"&&(e.z=Sr[14]);break;default:a=e.v;break}var o=wi("v",Jn(a)),c={r:t},A=Jf(n.cellXfs,e,n);switch(A!==0&&(c.s=A),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=wi("v",""+jB(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=s&&(e.t=s,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Ot("f",Jn(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Ot("c",o,c)}var Due=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=qx("v"),i=qx("f");return function(c,A,d,h,m,p){for(var v=0,x="",E=[],_=[],B=0,T=0,I=0,L="",k,w,y=0,N=0,U,j,F=0,P=0,M=Array.isArray(p.CellXf),ee,W=[],te=[],G=Array.isArray(A),q=[],z={},Z=!1,R=!!d.sheetStubs,K=c.split(t),X=0,re=K.length;X!=re;++X){x=K[X].trim();var ne=x.length;if(ne!==0){var ue=0;e:for(v=0;v<ne;++v)switch(x[v]){case">":if(x[v-1]!="/"){++v;break e}if(d&&d.cellStyles){if(w=jr(x.slice(ue,v),!0),y=w.r!=null?parseInt(w.r,10):y+1,N=-1,d.sheetRows&&d.sheetRows<y)continue;z={},Z=!1,w.ht&&(Z=!0,z.hpt=parseFloat(w.ht),z.hpx=fp(z.hpt)),w.hidden=="1"&&(Z=!0,z.hidden=!0),w.outlineLevel!=null&&(Z=!0,z.level=+w.outlineLevel),Z&&(q[y-1]=z)}break;case"<":ue=v;break}if(ue>=v)break;if(w=jr(x.slice(ue,v),!0),y=w.r!=null?parseInt(w.r,10):y+1,N=-1,!(d.sheetRows&&d.sheetRows<y)){h.s.r>y-1&&(h.s.r=y-1),h.e.r<y-1&&(h.e.r=y-1),d&&d.cellStyles&&(z={},Z=!1,w.ht&&(Z=!0,z.hpt=parseFloat(w.ht),z.hpx=fp(z.hpt)),w.hidden=="1"&&(Z=!0,z.hidden=!0),w.outlineLevel!=null&&(Z=!0,z.level=+w.outlineLevel),Z&&(q[y-1]=z)),E=x.slice(v).split(e);for(var fe=0;fe!=E.length&&E[fe].trim().charAt(0)=="<";++fe);for(E=E.slice(fe),v=0;v!=E.length;++v)if(x=E[v].trim(),x.length!==0){if(_=x.match(r),B=v,T=0,I=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,_!=null&&_.length===2){for(B=0,L=_[1],T=0;T!=L.length&&!((I=L.charCodeAt(T)-64)<1||I>26);++T)B=26*B+I;--B,N=B}else++N;for(T=0;T!=x.length&&x.charCodeAt(T)!==62;++T);if(++T,w=jr(x.slice(0,T),!0),w.r||(w.r=kr({r:y-1,c:N})),L=x.slice(T),k={t:""},(_=L.match(s))!=null&&_[1]!==""&&(k.v=_n(_[1])),d.cellFormula){if((_=L.match(i))!=null&&_[1]!==""){if(k.f=_n(ia(_[1])).replace(/\r\n/g,`
`),d.xlfn||(k.f=Cj(k.f)),_[0].indexOf('t="array"')>-1)k.F=(L.match(a)||[])[1],k.F.indexOf(":")>-1&&W.push([Sn(k.F),k.F]);else if(_[0].indexOf('t="shared"')>-1){j=jr(_[0]);var be=_n(ia(_[1]));d.xlfn||(be=Cj(be)),te[parseInt(j.si,10)]=[j,be,w.r]}}else(_=L.match(/<f[^>]*\/>/))&&(j=jr(_[0]),te[j.si]&&(k.f=Tle(te[j.si][1],te[j.si][2],w.r)));var Ce=Fa(w.r);for(T=0;T<W.length;++T)Ce.r>=W[T][0].s.r&&Ce.r<=W[T][0].e.r&&Ce.c>=W[T][0].s.c&&Ce.c<=W[T][0].e.c&&(k.F=W[T][1])}if(w.t==null&&k.v===void 0)if(k.f||k.F)k.v=0,k.t="n";else if(R)k.t="z";else continue;else k.t=w.t||"n";switch(h.s.c>N&&(h.s.c=N),h.e.c<N&&(h.e.c=N),k.t){case"n":if(k.v==""||k.v==null){if(!R)continue;k.t="z"}else k.v=parseFloat(k.v);break;case"s":if(typeof k.v>"u"){if(!R)continue;k.t="z"}else U=vx[parseInt(k.v,10)],k.v=U.t,k.r=U.r,d.cellHTML&&(k.h=U.h);break;case"str":k.t="s",k.v=k.v!=null?ia(k.v):"",d.cellHTML&&(k.h=dB(k.v));break;case"inlineStr":_=L.match(n),k.t="s",_!=null&&(U=SB(_[1]))?(k.v=U.t,d.cellHTML&&(k.h=U.h)):k.v="";break;case"b":k.v=pa(k.v);break;case"d":d.cellDates?k.v=xa(k.v,1):(k.v=Vs(xa(k.v,1)),k.t="n");break;case"e":(!d||d.cellText!==!1)&&(k.w=k.v),k.v=fP[k.v];break}if(F=P=0,ee=null,M&&w.s!==void 0&&(ee=p.CellXf[w.s],ee!=null&&(ee.numFmtId!=null&&(F=ee.numFmtId),d.cellStyles&&ee.fillId!=null&&(P=ee.fillId))),uM(k,F,P,d,m,p),d.cellDates&&M&&k.t=="n"&&kp(Sr[F])&&(k.t="d",k.v=tE(k.v)),w.cm&&d.xlmeta){var me=(d.xlmeta.Cell||[])[+w.cm-1];me&&me.type=="XLDAPR"&&(k.D=!0)}if(G){var oe=Fa(w.r);A[oe.r]||(A[oe.r]=[]),A[oe.r][oe.c]=k}else A[w.r]=k}}}}q.length>0&&(A["!rows"]=q)}}();function Rue(e,t,r,n){var a=[],s=[],i=Sn(e["!ref"]),o="",c,A="",d=[],h=0,m=0,p=e["!rows"],v=Array.isArray(e),x={r:A},E,_=-1;for(m=i.s.c;m<=i.e.c;++m)d[m]=Ia(m);for(h=i.s.r;h<=i.e.r;++h){for(s=[],A=fs(h),m=i.s.c;m<=i.e.c;++m){c=d[m]+A;var B=v?(e[h]||[])[m]:e[c];B!==void 0&&(o=jue(B,c,e,t))!=null&&s.push(o)}(s.length>0||p&&p[h])&&(x={r:A},p&&p[h]&&(E=p[h],E.hidden&&(x.hidden=1),_=-1,E.hpx?_=e1(E.hpx):E.hpt&&(_=E.hpt),_>-1&&(x.ht=_,x.customHeight=1),E.level&&(x.outlineLevel=E.level)),a[a.length]=Ot("row",s.join(""),x))}if(p)for(;h<p.length;++h)p&&p[h]&&(x={r:h+1},E=p[h],E.hidden&&(x.hidden=1),_=-1,E.hpx?_=e1(E.hpx):E.hpt&&(_=E.hpt),_>-1&&(x.ht=_,x.customHeight=1),E.level&&(x.outlineLevel=E.level),a[a.length]=Ot("row","",x));return a.join("")}function dM(e,t,r,n){var a=[hs,Ot("worksheet",null,{xmlns:g0[0],"xmlns:r":Qs.r})],s=r.SheetNames[e],i=0,o="",c=r.Sheets[s];c==null&&(c={});var A=c["!ref"]||"A1",d=Sn(A);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+A+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),A=Qr(d)}n||(n={}),c["!comments"]=[];var h=[];vue(c,r,e,t,a),a[a.length]=Ot("dimension",null,{ref:A}),a[a.length]=Fue(c,t,e,r),t.sheetFormat&&(a[a.length]=Ot("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=Nue(c,c["!cols"])),a[i=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=Rue(c,t),o.length>0&&(a[a.length]=o)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),c["!protect"]&&(a[a.length]=yue(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=kue(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=gue(c["!merges"]));var m=-1,p,v=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(x){x[1].Target&&(p={ref:x[0]},x[1].Target.charAt(0)!="#"&&(v=Xn(n,-1,Jn(x[1].Target).replace(/#.*$/,""),sn.HLINK),p["r:id"]="rId"+v),(m=x[1].Target.indexOf("#"))>-1&&(p.location=Jn(x[1].Target.slice(m+1))),x[1].Tooltip&&(p.tooltip=Jn(x[1].Tooltip)),a[a.length]=Ot("hyperlink",null,p))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=_ue(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=wi("ignoredErrors",Ot("ignoredError",null,{numberStoredAsText:1,sqref:A}))),h.length>0&&(v=Xn(n,-1,"../drawings/drawing"+(e+1)+".xml",sn.DRAW),a[a.length]=Ot("drawing",null,{"r:id":"rId"+v}),c["!drawing"]=h),c["!comments"].length>0&&(v=Xn(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",sn.VML),a[a.length]=Ot("legacyDrawing",null,{"r:id":"rId"+v}),c["!legacy"]=v),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function Lue(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function Oue(e,t,r){var n=dt(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=e1(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var A={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var h=-1,m=-1,p=d<<10;p<d+1<<10;++p){A.c=p;var v=Array.isArray(r)?(r[A.r]||[])[A.c]:r[kr(A)];v&&(h<0&&(h=p),m=p)}h<0||(++o,n.write_shift(4,h),n.write_shift(4,m))}var x=n.l;return n.l=c,n.write_shift(4,o),n.l=x,n.length>n.l?n.slice(0,n.l):n}function Uue(e,t,r,n){var a=Oue(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&St(e,0,a)}var Pue=w0,Mue=Fp;function Que(){}function Hue(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=Gne(e),r}function Vue(e,t,r){r==null&&(r=dt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return Tw({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),lP(e,r),r.slice(0,r.l)}function zue(e){var t=cc(e);return[t]}function Gue(e,t,r){return r==null&&(r=dt(8)),x0(t,r)}function Kue(e){var t=v0(e);return[t]}function que(e,t,r){return r==null&&(r=dt(4)),b0(t,r)}function $ue(e){var t=cc(e),r=e.read_shift(1);return[t,r,"b"]}function Wue(e,t,r){return r==null&&(r=dt(9)),x0(t,r),r.write_shift(1,e.v?1:0),r}function Xue(e){var t=v0(e),r=e.read_shift(1);return[t,r,"b"]}function Yue(e,t,r){return r==null&&(r=dt(5)),b0(t,r),r.write_shift(1,e.v?1:0),r}function Jue(e){var t=cc(e),r=e.read_shift(1);return[t,r,"e"]}function Zue(e,t,r){return r==null&&(r=dt(9)),x0(t,r),r.write_shift(1,e.v),r}function eAe(e){var t=v0(e),r=e.read_shift(1);return[t,r,"e"]}function tAe(e,t,r){return r==null&&(r=dt(8)),b0(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function rAe(e){var t=cc(e),r=e.read_shift(4);return[t,r,"s"]}function nAe(e,t,r){return r==null&&(r=dt(12)),x0(t,r),r.write_shift(4,t.v),r}function aAe(e){var t=v0(e),r=e.read_shift(4);return[t,r,"s"]}function sAe(e,t,r){return r==null&&(r=dt(8)),b0(t,r),r.write_shift(4,t.v),r}function iAe(e){var t=cc(e),r=Ji(e);return[t,r,"n"]}function oAe(e,t,r){return r==null&&(r=dt(16)),x0(t,r),s0(e.v,r),r}function fM(e){var t=v0(e),r=Ji(e);return[t,r,"n"]}function lAe(e,t,r){return r==null&&(r=dt(12)),b0(t,r),s0(e.v,r),r}function cAe(e){var t=cc(e),r=wB(e);return[t,r,"n"]}function uAe(e,t,r){return r==null&&(r=dt(12)),x0(t,r),cP(e.v,r),r}function AAe(e){var t=v0(e),r=wB(e);return[t,r,"n"]}function dAe(e,t,r){return r==null&&(r=dt(8)),b0(t,r),cP(e.v,r),r}function fAe(e){var t=cc(e),r=xB(e);return[t,r,"is"]}function hAe(e){var t=cc(e),r=Zi(e);return[t,r,"str"]}function mAe(e,t,r){return r==null&&(r=dt(12+4*e.v.length)),x0(t,r),si(e.v,r),r.length>r.l?r.slice(0,r.l):r}function pAe(e){var t=v0(e),r=Zi(e);return[t,r,"str"]}function gAe(e,t,r){return r==null&&(r=dt(8+4*e.v.length)),b0(t,r),si(e.v,r),r.length>r.l?r.slice(0,r.l):r}function xAe(e,t,r){var n=e.l+t,a=cc(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"b"];if(r.cellFormula){e.l+=2;var o=aE(e,n-e.l,r);i[3]=Ki(o,null,a,r.supbooks,r)}else e.l=n;return i}function vAe(e,t,r){var n=e.l+t,a=cc(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"e"];if(r.cellFormula){e.l+=2;var o=aE(e,n-e.l,r);i[3]=Ki(o,null,a,r.supbooks,r)}else e.l=n;return i}function bAe(e,t,r){var n=e.l+t,a=cc(e);a.r=r["!row"];var s=Ji(e),i=[a,s,"n"];if(r.cellFormula){e.l+=2;var o=aE(e,n-e.l,r);i[3]=Ki(o,null,a,r.supbooks,r)}else e.l=n;return i}function wAe(e,t,r){var n=e.l+t,a=cc(e);a.r=r["!row"];var s=Zi(e),i=[a,s,"str"];if(r.cellFormula){e.l+=2;var o=aE(e,n-e.l,r);i[3]=Ki(o,null,a,r.supbooks,r)}else e.l=n;return i}var yAe=w0,EAe=Fp;function CAe(e,t){return t==null&&(t=dt(4)),t.write_shift(4,e),t}function _Ae(e,t){var r=e.l+t,n=w0(e),a=vB(e),s=Zi(e),i=Zi(e),o=Zi(e);e.l=r;var c={rfx:n,relId:a,loc:s,display:o};return i&&(c.Tooltip=i),c}function SAe(e,t){var r=dt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Fp({s:Fa(e[0]),e:Fa(e[0])},r),bB("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return si(a||"",r),si(e[1].Tooltip||"",r),si("",r),r.slice(0,r.l)}function NAe(){}function BAe(e,t,r){var n=e.l+t,a=uP(e),s=e.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var o=Jce(e,n-e.l,r);i[1]=o}else e.l=n;return i}function kAe(e,t,r){var n=e.l+t,a=w0(e),s=[a];if(r.cellFormula){var i=eue(e,n-e.l,r);s[1]=i,e.l=n}else e.l=n;return s}function TAe(e,t,r){r==null&&(r=dt(18));var n=sE(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var hM=["left","right","top","bottom","header","footer"];function IAe(e){var t={};return hM.forEach(function(r){t[r]=Ji(e)}),t}function FAe(e,t){return t==null&&(t=dt(48)),Gh(e),hM.forEach(function(r){s0(e[r],t)}),t}function jAe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function DAe(e,t,r){r==null&&(r=dt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function RAe(e){var t=dt(24);return t.write_shift(4,4),t.write_shift(4,1),Fp(e,t),t}function LAe(e,t){return t==null&&(t=dt(66)),t.write_shift(2,e.password?NB(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function OAe(){}function UAe(){}function PAe(e,t,r,n,a,s,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var c=o.dense?[]:{},A,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,m=!1,p,v,x,E,_,B,T,I,L,k=[];o.biff=12,o["!row"]=0;var w=0,y=!1,N=[],U={},j=o.supbooks||a.supbooks||[[]];if(j.sharedf=U,j.arrayf=N,j.SheetNames=a.SheetNames||a.Sheets.map(function(G){return G.name}),!o.supbooks&&(o.supbooks=j,a.Names))for(var F=0;F<a.Names.length;++F)j[0][F+1]=a.Names[F];var P=[],M=[],ee=!1;t1[16]={n:"BrtShortReal",f:fM};var W;if(ud(e,function(q,z,Z){if(!m)switch(Z){case 148:A=q;break;case 0:p=q,o.sheetRows&&o.sheetRows<=p.r&&(m=!0),I=fs(E=p.r),o["!row"]=p.r,(q.hidden||q.hpt||q.level!=null)&&(q.hpt&&(q.hpx=fp(q.hpt)),M[q.r]=q);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(v={t:q[2]},q[2]){case"n":v.v=q[1];break;case"s":T=vx[q[1]],v.v=T.t,v.r=T.r;break;case"b":v.v=!!q[1];break;case"e":v.v=q[1],o.cellText!==!1&&(v.w=Ad[v.v]);break;case"str":v.t="s",v.v=q[1];break;case"is":v.t="s",v.v=q[1].t;break}if((x=i.CellXf[q[0].iStyleRef])&&uM(v,x.numFmtId,null,o,s,i),_=q[0].c==-1?_+1:q[0].c,o.dense?(c[E]||(c[E]=[]),c[E][_]=v):c[Ia(_)+I]=v,o.cellFormula){for(y=!1,w=0;w<N.length;++w){var R=N[w];p.r>=R[0].s.r&&p.r<=R[0].e.r&&_>=R[0].s.c&&_<=R[0].e.c&&(v.F=Qr(R[0]),y=!0)}!y&&q.length>3&&(v.f=q[3])}if(d.s.r>p.r&&(d.s.r=p.r),d.s.c>_&&(d.s.c=_),d.e.r<p.r&&(d.e.r=p.r),d.e.c<_&&(d.e.c=_),o.cellDates&&x&&v.t=="n"&&kp(Sr[x.numFmtId])){var K=Dh(v.v);K&&(v.t="d",v.v=new Date(K.y,K.m-1,K.d,K.H,K.M,K.S,K.u))}W&&(W.type=="XLDAPR"&&(v.D=!0),W=void 0);break;case 1:case 12:if(!o.sheetStubs||h)break;v={t:"z",v:void 0},_=q[0].c==-1?_+1:q[0].c,o.dense?(c[E]||(c[E]=[]),c[E][_]=v):c[Ia(_)+I]=v,d.s.r>p.r&&(d.s.r=p.r),d.s.c>_&&(d.s.c=_),d.e.r<p.r&&(d.e.r=p.r),d.e.c<_&&(d.e.c=_),W&&(W.type=="XLDAPR"&&(v.D=!0),W=void 0);break;case 176:k.push(q);break;case 49:W=((o.xlmeta||{}).Cell||[])[q-1];break;case 494:var X=n["!id"][q.relId];for(X?(q.Target=X.Target,q.loc&&(q.Target+="#"+q.loc),q.Rel=X):q.relId==""&&(q.Target="#"+q.loc),E=q.rfx.s.r;E<=q.rfx.e.r;++E)for(_=q.rfx.s.c;_<=q.rfx.e.c;++_)o.dense?(c[E]||(c[E]=[]),c[E][_]||(c[E][_]={t:"z",v:void 0}),c[E][_].l=q):(B=kr({c:_,r:E}),c[B]||(c[B]={t:"z",v:void 0}),c[B].l=q);break;case 426:if(!o.cellFormula)break;N.push(q),L=o.dense?c[E][_]:c[Ia(_)+I],L.f=Ki(q[1],d,{r:p.r,c:_},j,o),L.F=Qr(q[0]);break;case 427:if(!o.cellFormula)break;U[kr(q[0].s)]=q[1],L=o.dense?c[E][_]:c[Ia(_)+I],L.f=Ki(q[1],d,{r:p.r,c:_},j,o);break;case 60:if(!o.cellStyles)break;for(;q.e>=q.s;)P[q.e--]={width:q.w/256,hidden:!!(q.flags&1),level:q.level},ee||(ee=!0,BB(q.w/256)),Vf(P[q.e+1]);break;case 161:c["!autofilter"]={ref:Qr(q)};break;case 476:c["!margins"]=q;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),q.name&&(a.Sheets[r].CodeName=q.name),(q.above||q.left)&&(c["!outline"]={above:q.above,left:q.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),q.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!z.T){if(!h||o.WTF)throw new Error("Unexpected record 0x"+Z.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(d.s.r<2e6||A&&(A.e.r>0||A.e.c>0||A.s.r>0||A.s.c>0))&&(c["!ref"]=Qr(A||d)),o.sheetRows&&c["!ref"]){var te=Sn(c["!ref"]);o.sheetRows<=+te.e.r&&(te.e.r=o.sheetRows-1,te.e.r>d.e.r&&(te.e.r=d.e.r),te.e.r<te.s.r&&(te.s.r=te.e.r),te.e.c>d.e.c&&(te.e.c=d.e.c),te.e.c<te.s.c&&(te.s.c=te.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Qr(te))}return k.length>0&&(c["!merges"]=k),P.length>0&&(c["!cols"]=P),M.length>0&&(c["!rows"]=M),c}function MAe(e,t,r,n,a,s,i){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=va(t),t.z=t.z||Sr[14],t.v=Vs(xa(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var c={r,c:n};switch(c.s=Jf(a.cellXfs,t,a),t.l&&s["!links"].push([kr(c),t.l]),t.c&&s["!comments"].push([kr(c),t.c]),t.t){case"s":case"str":return a.bookSST?(o=jB(a.Strings,t.v,a.revStrings),c.t="s",c.v=o,i?St(e,18,sAe(t,c)):St(e,7,nAe(t,c))):(c.t="str",i?St(e,17,gAe(t,c)):St(e,6,mAe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?St(e,13,dAe(t,c)):St(e,2,uAe(t,c)):i?St(e,16,lAe(t,c)):St(e,5,oAe(t,c)),!0;case"b":return c.t="b",i?St(e,15,Yue(t,c)):St(e,4,Wue(t,c)),!0;case"e":return c.t="e",i?St(e,14,tAe(t,c)):St(e,3,Zue(t,c)),!0}return i?St(e,12,que(t,c)):St(e,1,Gue(t,c)),!0}function QAe(e,t,r,n){var a=Sn(t["!ref"]||"A1"),s,i="",o=[];St(e,145);var c=Array.isArray(t),A=a.e.r;t["!rows"]&&(A=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=A;++d){i=fs(d),Uue(e,t,a,d);var h=!1;if(d<=a.e.r)for(var m=a.s.c;m<=a.e.c;++m){d===a.s.r&&(o[m]=Ia(m)),s=o[m]+i;var p=c?(t[d]||[])[m]:t[s];if(!p){h=!1;continue}h=MAe(e,p,d,m,n,t,h)}}St(e,146)}function HAe(e,t){!t||!t["!merges"]||(St(e,177,CAe(t["!merges"].length)),t["!merges"].forEach(function(r){St(e,176,EAe(r))}),St(e,178))}function VAe(e,t){!t||!t["!cols"]||(St(e,390),t["!cols"].forEach(function(r,n){r&&St(e,60,TAe(n,r))}),St(e,391))}function zAe(e,t){!t||!t["!ref"]||(St(e,648),St(e,649,RAe(Sn(t["!ref"]))),St(e,650))}function GAe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=Xn(r,-1,n[1].Target.replace(/#.*$/,""),sn.HLINK);St(e,494,SAe(n,a))}}),delete t["!links"]}function KAe(e,t,r,n){if(t["!comments"].length>0){var a=Xn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",sn.VML);St(e,551,bB("rId"+a)),t["!legacy"]=a}}function qAe(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s=typeof a.ref=="string"?a.ref:Qr(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Qo(s);o.s.r==o.e.r&&(o.e.r=Qo(t["!ref"]).e.r,s=Qr(o));for(var c=0;c<i.length;++c){var A=i[c];if(A.Name=="_xlnm._FilterDatabase"&&A.Sheet==n){A.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),St(e,161,Fp(Sn(s))),St(e,162)}}function $Ae(e,t,r){St(e,133),St(e,137,DAe(t,r)),St(e,138),St(e,134)}function WAe(e,t){t["!protect"]&&St(e,535,LAe(t["!protect"]))}function XAe(e,t,r,n){var a=Po(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var c=Sn(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],St(a,129),(r.vbaraw||i["!outline"])&&St(a,147,Vue(o,i["!outline"])),St(a,148,Mue(c)),$Ae(a,i,r.Workbook),VAe(a,i),QAe(a,i,e,t),WAe(a,i),qAe(a,i,r,e),HAe(a,i),GAe(a,i,n),i["!margins"]&&St(a,476,FAe(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&zAe(a,i),KAe(a,i,e,n),St(a,130),a.end()}function YAe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var a=_n((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function JAe(e,t,r,n,a,s){var i=s||{"!type":"chart"};if(!e)return s;var o=0,c=0,A="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var m=YAe(h);d.s.r=d.s.c=0,d.e.c=o,A=Ia(o),m[0].forEach(function(p,v){i[A+fs(v)]={t:"n",v:p,z:m[1]},c=v}),d.e.r<c&&(d.e.r=c),++o}),o>0&&(i["!ref"]=Qr(d)),i}function ZAe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,o=e.match(AM);return o&&DB(o[0],s,a,r),(i=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function ede(e,t){e.l+=10;var r=Zi(e);return{name:r}}function tde(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return ud(e,function(c,A,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(A.T>0)){if(!(A.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var RB=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],rde=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],nde=[],ade=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function kj(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=pa(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function Tj(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=pa(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function mM(e){Tj(e.WBProps,RB),Tj(e.CalcPr,ade),kj(e.WBView,rde),kj(e.Sheets,nde),Wm.date1904=pa(e.WBProps.date1904)}function sde(e){return!e.Workbook||!e.Workbook.WBProps?"false":pa(e.Workbook.WBProps.date1904)?"true":"false"}var ide="][*?/\\".split("");function pM(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return ide.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function ode(e,t,r){e.forEach(function(n,a){pM(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[a]&&t[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function lde(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];ode(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)sue(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var cde=/<\w+:workbook/;function ude(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(e.replace(ao,function(c,A){var d=jr(c);switch(eA(d[0])){case"<?xml":break;case"<workbook":c.match(cde)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":RB.forEach(function(h){if(d[h[0]]!=null)switch(h[2]){case"bool":r.WBProps[h[0]]=pa(d[h[0]]);break;case"int":r.WBProps[h[0]]=parseInt(d[h[0]],10);break;default:r.WBProps[h[0]]=d[h[0]]}}),d.codeName&&(r.WBProps.CodeName=ia(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=_n(ia(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=ia(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),pa(d.hidden||"0")&&(s.Hidden=!0),i=A+c.length;break;case"</definedName>":s.Ref=_n(ia(e.slice(i,A))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),g0.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return mM(r),r}function gM(e){var t=[hs];t[t.length]=Ot("workbook",null,{xmlns:g0[0],"xmlns:r":Qs.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(RB.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Ot("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var i={name:Jn(e.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=Ot("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(t[t.length]=Ot("definedName",Jn(o.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function Ade(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=F4(e),r.name=Zi(e),r}function dde(e,t){return t||(t=dt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),bB(e.strRelID,t),si(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function fde(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?Zi(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function hde(e,t){t||(t=dt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),lP(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function mde(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function pde(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=Kne(e),i=Zce(e,0,r),o=vB(e);e.l=n;var c={Name:s,Ptg:i};return a<268435455&&(c.Sheet=a),o&&(c.Comment=o),c}function gde(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],t1[16]={n:"BrtFRTArchID$",f:mde},ud(e,function(c,A,d){switch(d){case 156:i.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=Ki(c.Ptg,null,null,i,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,c]):i[0]=[d,c],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(c),i.XTI=i.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!A.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),mM(r),r.Names=s,r.supbooks=i,r}function xde(e,t){St(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};St(e,156,dde(a))}St(e,144)}function vde(e,t){t||(t=dt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return si("SheetJS",t),si(Ew.version,t),si(Ew.version,t),si("7262",t),t.length>t.l?t.slice(0,t.l):t}function bde(e,t){t||(t=dt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function wde(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(St(e,135),St(e,158,bde(a)),St(e,136))}}function yde(e,t){var r=Po();return St(r,131),St(r,128,vde()),St(r,153,hde(e.Workbook&&e.Workbook.WBProps||null)),wde(r,e),xde(r,e),St(r,132),r.end()}function Ede(e,t,r){return t.slice(-4)===".bin"?gde(e,r):ude(e,r)}function Cde(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?PAe(e,n,r,a,s,i,o):pue(e,n,r,a,s,i,o)}function _de(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?tde(e,n,r,a,s):ZAe(e,n,r,a,s)}function Sde(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?Ble():kle()}function Nde(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?Sle():Nle()}function Bde(e,t,r,n){return t.slice(-4)===".bin"?Eoe(e,r,n):Aoe(e,r,n)}function kde(e,t,r){return YP(e,r)}function Tde(e,t,r){return t.slice(-4)===".bin"?Tie(e,r):Nie(e,r)}function Ide(e,t,r){return t.slice(-4)===".bin"?wle(e,r):dle(e,r)}function Fde(e,t,r){return t.slice(-4)===".bin"?cle(e):ole(e)}function jde(e,t,r,n){return r.slice(-4)===".bin"?ule(e,t,r,n):void 0}function Dde(e,t,r){return t.slice(-4)===".bin"?ale(e,t,r):ile(e,t,r)}function Rde(e,t,r){return(t.slice(-4)===".bin"?yde:gM)(e)}function Lde(e,t,r,n,a){return(t.slice(-4)===".bin"?XAe:dM)(e,r,n,a)}function Ode(e,t,r){return(t.slice(-4)===".bin"?joe:WP)(e,r)}function Ude(e,t,r){return(t.slice(-4)===".bin"?jie:QP)(e,r)}function Pde(e,t,r){return(t.slice(-4)===".bin"?yle:eM)(e)}function Mde(e){return(e.slice(-4)===".bin"?sle:JP)()}var xM=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,vM=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Rc(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(xM),s,i,o,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(vM),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),n[o]=s[2].slice(1,s[2].length-1));return n}function Qde(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(xM),a,s,i,o;if(n)for(o=0;o!=n.length;++o)a=n[o].match(vM),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var wx;function Hde(e,t){var r=wx[e]||_n(e);return r==="General"?n0(t):lc(r,t)}function Vde(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=pa(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=xa(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[_n(t)]=a}function zde(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Ad[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Kx(e.v):e.w=n0(e.v):e.w=Hde(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=wx[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&kp(n)){var a=Dh(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function Gde(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=noe[n.Pattern]||n.Pattern)}e[t.ID]=t}function Kde(e,t,r,n,a,s,i,o,c,A){var d="General",h=n.StyleID,m={};A=A||{};var p=[],v=0;for(h===void 0&&o&&(h=o.StyleID),h===void 0&&i&&(h=i.StyleID);s[h]!==void 0&&(s[h].nf&&(d=s[h].nf),s[h].Interior&&p.push(s[h].Interior),!!s[h].Parent);)h=s[h].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=pa(e);break;case"String":n.t="s",n.r=q6(_n(e)),n.v=e.indexOf("<")>-1?_n(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(xa(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=_n(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=fP[e],A.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=q6(t||e));break}if(zde(n,d,A),A.cellFormula!==!1)if(n.Formula){var x=_n(n.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),n.f=$m(x,a),delete n.Formula,n.ArrayRange=="RC"?n.F=$m("RC:RC",a):n.ArrayRange&&(n.F=$m(n.ArrayRange,a),c.push([Sn(n.F),n.F]))}else for(v=0;v<c.length;++v)a.r>=c[v][0].s.r&&a.r<=c[v][0].e.r&&a.c>=c[v][0].s.c&&a.c<=c[v][0].e.c&&(n.F=c[v][1]);A.cellStyles&&(p.forEach(function(E){!m.patternType&&E.patternType&&(m.patternType=E.patternType)}),n.s=m),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function qde(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function U5(e,t){var r=t||{};Tp();var n=Kg(fB(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=ia(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=va(r);return i.type="string",dp.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(He){a.indexOf("<"+He)>=0&&(s=!0)}),s)return Ffe(n,r);wx={"General Number":"General","General Date":Sr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Sr[15],"Short Date":Sr[14],"Long Time":Sr[19],"Medium Time":Sr[18],"Short Time":Sr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Sr[2],Standard:Sr[4],Percent:Sr[10],Scientific:Sr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],A,d={},h=[],m=r.dense?[]:{},p="",v={},x={},E=Rc('<Data ss:Type="String">'),_=0,B=0,T=0,I={s:{r:2e6,c:2e6},e:{r:0,c:0}},L={},k={},w="",y=0,N=[],U={},j={},F=0,P=[],M=[],ee={},W=[],te,G=!1,q=[],z=[],Z={},R=0,K=0,X={Sheets:[],WBProps:{date1904:!1}},re={};Wx.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ne="";o=Wx.exec(n);)switch(o[3]=(ne=o[3]).toLowerCase()){case"data":if(ne=="data"){if(o[1]==="/"){if((A=c.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?Kde(n.slice(_,o.index),w,E,c[c.length-1][0]=="comment"?ee:v,{c:B,r:T},L,W[B],x,q,r):(w="",E=Rc(o[0]),_=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(M.length>0&&(v.c=M),(!r.sheetRows||r.sheetRows>T)&&v.v!==void 0&&(r.dense?(m[T]||(m[T]=[]),m[T][B]=v):m[Ia(B)+fs(T)]=v),v.HRef&&(v.l={Target:_n(v.HRef)},v.HRefScreenTip&&(v.l.Tooltip=v.HRefScreenTip),delete v.HRef,delete v.HRefScreenTip),(v.MergeAcross||v.MergeDown)&&(R=B+(parseInt(v.MergeAcross,10)|0),K=T+(parseInt(v.MergeDown,10)|0),N.push({s:{c:B,r:T},e:{c:R,r:K}})),!r.sheetStubs)v.MergeAcross?B=R+1:++B;else if(v.MergeAcross||v.MergeDown){for(var ue=B;ue<=R;++ue)for(var fe=T;fe<=K;++fe)(ue>B||fe>T)&&(r.dense?(m[fe]||(m[fe]=[]),m[fe][ue]={t:"z"}):m[Ia(ue)+fs(fe)]={t:"z"});B=R+1}else++B;else v=Qde(o[0]),v.Index&&(B=+v.Index-1),B<I.s.c&&(I.s.c=B),B>I.e.c&&(I.e.c=B),o[0].slice(-2)==="/>"&&++B,M=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(T<I.s.r&&(I.s.r=T),T>I.e.r&&(I.e.r=T),o[0].slice(-2)==="/>"&&(x=Rc(o[0]),x.Index&&(T=+x.Index-1)),B=0,++T):(x=Rc(o[0]),x.Index&&(T=+x.Index-1),Z={},(x.AutoFitHeight=="0"||x.Height)&&(Z.hpx=parseInt(x.Height,10),Z.hpt=e1(Z.hpx),z[T]=Z),x.Hidden=="1"&&(Z.hidden=!0,z[T]=Z));break;case"worksheet":if(o[1]==="/"){if((A=c.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"));h.push(p),I.s.r<=I.e.r&&I.s.c<=I.e.c&&(m["!ref"]=Qr(I),r.sheetRows&&r.sheetRows<=I.e.r&&(m["!fullref"]=m["!ref"],I.e.r=r.sheetRows-1,m["!ref"]=Qr(I))),N.length&&(m["!merges"]=N),W.length>0&&(m["!cols"]=W),z.length>0&&(m["!rows"]=z),d[p]=m}else I={s:{r:2e6,c:2e6},e:{r:0,c:0}},T=B=0,c.push([o[3],!1]),A=Rc(o[0]),p=_n(A.Name),m=r.dense?[]:{},N=[],q=[],z=[],re={name:p,Hidden:0},X.Sheets.push(re);break;case"table":if(o[1]==="/"){if((A=c.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),W=[],G=!1}break;case"style":o[1]==="/"?Gde(L,k,r):k=Rc(o[0]);break;case"numberformat":k.nf=_n(Rc(o[0]).Format||"General"),wx[k.nf]&&(k.nf=wx[k.nf]);for(var be=0;be!=392&&Sr[be]!=k.nf;++be);if(be==392){for(be=57;be!=392;++be)if(Sr[be]==null){KA(k.nf,be);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(te=Rc(o[0]),te.Hidden&&(te.hidden=!0,delete te.Hidden),te.Width&&(te.wpx=parseInt(te.Width,10)),!G&&te.wpx>10){G=!0,Wi=qP;for(var Ce=0;Ce<W.length;++Ce)W[Ce]&&Vf(W[Ce])}G&&Vf(te),W[te.Index-1||W.length]=te;for(var me=0;me<+te.Span;++me)W[W.length]=va(te);break;case"namedrange":if(o[1]==="/")break;X.Names||(X.Names=[]);var oe=jr(o[0]),Le={Name:oe.Name,Ref:$m(oe.RefersTo.slice(1),{r:0,c:0})};X.Sheets.length>0&&(Le.Sheet=X.Sheets.length-1),X.Names.push(Le);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?w+=n.slice(y,o.index):y=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;k.Interior=Rc(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?gae(U,ne,n.slice(F,o.index)):F=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((A=c.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((A=c.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"));qde(ee),M.push(ee)}else c.push([o[3],!1]),A=Rc(o[0]),ee={a:A.Author};break;case"autofilter":if(o[1]==="/"){if((A=c.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Ye=Rc(o[0]);m["!autofilter"]={ref:$m(Ye.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((A=c.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((A=c.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return Rj(n,r);var Te=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Te=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Te=!1}break;case"excelworkbook":switch(o[3]){case"date1904":X.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Te=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Te=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(F,o.index)){case"SheetHidden":re.Hidden=1;break;case"SheetVeryHidden":re.Hidden=2;break}else F=o.index+o[0].length;break;case"header":m["!margins"]||Gh(m["!margins"]={},"xlml"),isNaN(+jr(o[0]).Margin)||(m["!margins"].header=+jr(o[0]).Margin);break;case"footer":m["!margins"]||Gh(m["!margins"]={},"xlml"),isNaN(+jr(o[0]).Margin)||(m["!margins"].footer=+jr(o[0]).Margin);break;case"pagemargins":var we=jr(o[0]);m["!margins"]||Gh(m["!margins"]={},"xlml"),isNaN(+we.Top)||(m["!margins"].top=+we.Top),isNaN(+we.Left)||(m["!margins"].left=+we.Left),isNaN(+we.Right)||(m["!margins"].right=+we.Right),isNaN(+we.Bottom)||(m["!margins"].bottom=+we.Bottom);break;case"displayrighttoleft":X.Views||(X.Views=[]),X.Views[0]||(X.Views[0]={}),X.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Te=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Te=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Te=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Te=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Te=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Te=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Te=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Te=!1}break;case"smarttags":break;default:Te=!1;break}if(Te||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Vde(j,ne,P,n.slice(F,o.index)):(P=o,F=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var Fe={};return!r.bookSheets&&!r.bookProps&&(Fe.Sheets=d),Fe.SheetNames=h,Fe.Workbook=X,Fe.SSF=va(Sr),Fe.Props=U,Fe.Custprops=j,Fe}function P4(e,t){switch(OB(t=t||{}),t.type||"base64"){case"base64":return U5(vl(e),t);case"binary":case"buffer":case"file":return U5(e,t);case"array":return U5(Xf(e),t)}}function $de(e,t){var r=[];return e.Props&&r.push(xae(e.Props,t)),e.Custprops&&r.push(vae(e.Props,e.Custprops)),r.join("")}function Wde(){return""}function Xde(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var s=[];s.push(Ot("NumberFormat",null,{"ss:Format":Jn(Sr[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(Ot("Style",s.join(""),i))}),Ot("Styles",r.join(""))}function bM(e){return Ot("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+IB(e.Ref,{r:0,c:0})})}function Yde(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(bM(a)))}return Ot("Names",r.join(""))}function Jde(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(bM(o)))}return s.join("")}function Zde(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Ot("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Ot("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Ot("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Ot("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(wi("ProtectContents","True")),e["!protect"].objects&&a.push(wi("ProtectObjects","True")),e["!protect"].scenarios&&a.push(wi("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(wi("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(wi("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":Ot("WorksheetOptions",a.join(""),{xmlns:ul.x})}function efe(e){return e.map(function(t){var r=wne(t.t||""),n=Ot("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ot("Comment",n,{"ss:Author":t.a})}).join("")}function tfe(e,t,r,n,a,s,i){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+Jn(IB(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var c=Fa(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=Jn(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=Jn(e.l.Tooltip))),r["!merges"])for(var A=r["!merges"],d=0;d!=A.length;++d)A[d].s.c!=i.c||A[d].s.r!=i.r||(A[d].e.c>A[d].s.c&&(o["ss:MergeAcross"]=A[d].e.c-A[d].s.c),A[d].e.r>A[d].s.r&&(o["ss:MergeDown"]=A[d].e.r-A[d].s.r));var h="",m="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":h="Number",m=String(e.v);break;case"b":h="Boolean",m=e.v?"1":"0";break;case"e":h="Error",m=Ad[e.v];break;case"d":h="DateTime",m=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Sr[14]);break;case"s":h="String",m=bne(e.v||"");break}var p=Jf(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=i.c+1;var v=e.v!=null?m:"",x=e.t=="z"?"":'<Data ss:Type="'+h+'">'+v+"</Data>";return(e.c||[]).length>0&&(x+=efe(e.c)),Ot("Cell",x,o)}function rfe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=fp(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function nfe(e,t,r,n){if(!e["!ref"])return"";var a=Sn(e["!ref"]),s=e["!merges"]||[],i=0,o=[];e["!cols"]&&e["!cols"].forEach(function(E,_){Vf(E);var B=!!E.width,T=sE(_,E),I={"ss:Index":_+1};B&&(I["ss:Width"]=Jx(T.width)),E.hidden&&(I["ss:Hidden"]="1"),o.push(Ot("Column",null,I))});for(var c=Array.isArray(e),A=a.s.r;A<=a.e.r;++A){for(var d=[rfe(A,(e["!rows"]||[])[A])],h=a.s.c;h<=a.e.c;++h){var m=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>h)&&!(s[i].s.r>A)&&!(s[i].e.c<h)&&!(s[i].e.r<A)){(s[i].s.c!=h||s[i].s.r!=A)&&(m=!0);break}if(!m){var p={r:A,c:h},v=kr(p),x=c?(e[A]||[])[h]:e[v];d.push(tfe(x,v,e,t,r,n,p))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function afe(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],i=s?Jde(s,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?nfe(s,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(Zde(s,t,e,r)),n.join("")}function sfe(e,t){t||(t={}),e.SSF||(e.SSF=va(Sr)),e.SSF&&(Tp(),Jy(e.SSF),t.revssf=eE(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Jf(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push($de(e,t)),r.push(Wde()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Ot("Worksheet",afe(n,t,e),{"ss:Name":Jn(e.SheetNames[n])}));return r[2]=Xde(e,t),r[3]=Yde(e),hs+Ot("Workbook",r.join(""),{xmlns:ul.ss,"xmlns:o":ul.o,"xmlns:x":ul.x,"xmlns:ss":ul.ss,"xmlns:dt":ul.dt,"xmlns:html":ul.html})}function ife(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=Yne(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=Jne(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var ofe=[60,1084,2066,2165,2175];function lfe(e,t,r,n,a){var s=n,i=[],o=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}i.push(o),r.l+=s;for(var c=HA(r,r.l),A=M4[c],d=0;A!=null&&ofe.indexOf(c)>-1;)s=HA(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),o=r.slice(d,r.l+4+s),i.push(o),r.l+=4+s,A=M4[c=HA(r,r.l)];var h=ai(i);vi(h,0);var m=0;h.lens=[];for(var p=0;p<i.length;++p)h.lens.push(m),m+=i[p].length;if(h.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+h.length+" < "+n;return t.f(h,h.length,a)}function ku(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Sr[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Ad[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Kx(e.v):e.w=n0(e.v):e.w=lc(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&kp(Sr[n]||String(n))){var a=Dh(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function vb(e,t,r){return{v:e,ixfe:t,t:r}}function cfe(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},i={},o=null,c=[],A="",d={},h,m="",p,v,x,E,_={},B=[],T,I,L=[],k=[],w={Sheets:[],WBProps:{date1904:!1},Views:[{}]},y={},N=function(Oe){return Oe<8?Hh[Oe]:Oe<64&&k[Oe-8]||Hh[Oe]},U=function(Oe,ke,We){var ft=ke.XF.data;if(!(!ft||!ft.patternType||!We||!We.cellStyles)){ke.s={},ke.s.patternType=ft.patternType;var $t;($t=Yx(N(ft.icvFore)))&&(ke.s.fgColor={rgb:$t}),($t=Yx(N(ft.icvBack)))&&(ke.s.bgColor={rgb:$t})}},j=function(Oe,ke,We){if(!(Z>1)&&!(We.sheetRows&&Oe.r>=We.sheetRows)){if(We.cellStyles&&ke.XF&&ke.XF.data&&U(Oe,ke,We),delete ke.ixfe,delete ke.XF,h=Oe,m=kr(Oe),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Oe.r<i.s.r&&(i.s.r=Oe.r),Oe.c<i.s.c&&(i.s.c=Oe.c),Oe.r+1>i.e.r&&(i.e.r=Oe.r+1),Oe.c+1>i.e.c&&(i.e.c=Oe.c+1),We.cellFormula&&ke.f){for(var ft=0;ft<B.length;++ft)if(!(B[ft][0].s.c>Oe.c||B[ft][0].s.r>Oe.r)&&!(B[ft][0].e.c<Oe.c||B[ft][0].e.r<Oe.r)){ke.F=Qr(B[ft][0]),(B[ft][0].s.c!=Oe.c||B[ft][0].s.r!=Oe.r)&&delete ke.f,ke.f&&(ke.f=""+Ki(B[ft][1],i,Oe,q,F));break}}We.dense?(a[Oe.r]||(a[Oe.r]=[]),a[Oe.r][Oe.c]=ke):a[m]=ke}},F={enc:!1,sbcch:0,snames:[],sharedf:_,arrayf:B,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(F.password=t.password);var P,M=[],ee=[],W=[],te=[],G=!1,q=[];q.SheetNames=F.snames,q.sharedf=F.sharedf,q.arrayf=F.arrayf,q.names=[],q.XTI=[];var z=0,Z=0,R=0,K=[],X=[],re;F.codepage=1200,Mc(1200);for(var ne=!1;e.l<e.length-1;){var ue=e.l,fe=e.read_shift(2);if(fe===0&&z===10)break;var be=e.l===e.length?0:e.read_shift(2),Ce=M4[fe];if(Ce&&Ce.f){if(t.bookSheets&&z===133&&fe!==133)break;if(z=fe,Ce.r===2||Ce.r==12){var me=e.read_shift(2);if(be-=2,!F.enc&&me!==fe&&((me&255)<<8|me>>8)!==fe)throw new Error("rt mismatch: "+me+"!="+fe);Ce.r==12&&(e.l+=10,be-=10)}var oe={};if(fe===10?oe=Ce.f(e,be,F):oe=lfe(fe,Ce,e,be,F),Z==0&&[9,521,1033,2057].indexOf(z)===-1)continue;switch(fe){case 34:r.opts.Date1904=w.WBProps.date1904=oe;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(F.enc||(e.l=0),F.enc=oe,!t.password)throw new Error("File is password-protected");if(oe.valid==null)throw new Error("Encryption scheme unsupported");if(!oe.valid)throw new Error("Password is incorrect");break;case 92:F.lastuser=oe;break;case 66:var Le=Number(oe);switch(Le){case 21010:Le=1200;break;case 32768:Le=1e4;break;case 32769:Le=1252;break}Mc(F.codepage=Le),ne=!0;break;case 317:F.rrtabid=oe;break;case 25:F.winlocked=oe;break;case 439:r.opts.RefreshAll=oe;break;case 12:r.opts.CalcCount=oe;break;case 16:r.opts.CalcDelta=oe;break;case 17:r.opts.CalcIter=oe;break;case 13:r.opts.CalcMode=oe;break;case 14:r.opts.CalcPrecision=oe;break;case 95:r.opts.CalcSaveRecalc=oe;break;case 15:F.CalcRefMode=oe;break;case 2211:r.opts.FullCalc=oe;break;case 129:oe.fDialog&&(a["!type"]="dialog"),oe.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),oe.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:L.push(oe);break;case 430:q.push([oe]),q[q.length-1].XTI=[];break;case 35:case 547:q[q.length-1].push(oe);break;case 24:case 536:re={Name:oe.Name,Ref:Ki(oe.rgce,i,null,q,F)},oe.itab>0&&(re.Sheet=oe.itab-1),q.names.push(re),q[0]||(q[0]=[],q[0].XTI=[]),q[q.length-1].push(oe),oe.Name=="_xlnm._FilterDatabase"&&oe.itab>0&&oe.rgce&&oe.rgce[0]&&oe.rgce[0][0]&&oe.rgce[0][0][0]=="PtgArea3d"&&(X[oe.itab-1]={ref:Qr(oe.rgce[0][0][1][2])});break;case 22:F.ExternCount=oe;break;case 23:q.length==0&&(q[0]=[],q[0].XTI=[]),q[q.length-1].XTI=q[q.length-1].XTI.concat(oe),q.XTI=q.XTI.concat(oe);break;case 2196:if(F.biff<8)break;re!=null&&(re.Comment=oe[1]);break;case 18:a["!protect"]=oe;break;case 19:oe!==0&&F.WTF&&console.error("Password verifier: "+oe);break;case 133:s[oe.pos]=oe,F.snames.push(oe.name);break;case 10:{if(--Z)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=Qr(i),t.sheetRows&&t.sheetRows<=i.e.r){var Ye=i.e.r;i.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=Qr(i),i.e.r=Ye}i.e.r++,i.e.c++}M.length>0&&(a["!merges"]=M),ee.length>0&&(a["!objects"]=ee),W.length>0&&(a["!cols"]=W),te.length>0&&(a["!rows"]=te),w.Sheets.push(y)}A===""?d=a:n[A]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(F.biff===8&&(F.biff={9:2,521:3,1033:4}[fe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[oe.BIFFVer]||8),F.biffguess=oe.BIFFVer==0,oe.BIFFVer==0&&oe.dt==4096&&(F.biff=5,ne=!0,Mc(F.codepage=28591)),F.biff==8&&oe.BIFFVer==0&&oe.dt==16&&(F.biff=2),Z++)break;if(a=t.dense?[]:{},F.biff<8&&!ne&&(ne=!0,Mc(F.codepage=t.codepage||1252)),F.biff<5||oe.BIFFVer==0&&oe.dt==4096){A===""&&(A="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Te={pos:e.l-be,name:A};s[Te.pos]=Te,F.snames.push(A)}else A=(s[ue]||{name:""}).name;oe.dt==32&&(a["!type"]="chart"),oe.dt==64&&(a["!type"]="macro"),M=[],ee=[],F.arrayf=B=[],W=[],te=[],G=!1,y={Hidden:(s[ue]||{hs:0}).hs,name:A}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[oe.r]||[])[oe.c]:a[kr({c:oe.c,r:oe.r})])&&++oe.c,T={ixfe:oe.ixfe,XF:L[oe.ixfe]||{},v:oe.val,t:"n"},R>0&&(T.z=K[T.ixfe>>8&63]),ku(T,t,r.opts.Date1904),j({c:oe.c,r:oe.r},T,t);break;case 5:case 517:T={ixfe:oe.ixfe,XF:L[oe.ixfe],v:oe.val,t:oe.t},R>0&&(T.z=K[T.ixfe>>8&63]),ku(T,t,r.opts.Date1904),j({c:oe.c,r:oe.r},T,t);break;case 638:T={ixfe:oe.ixfe,XF:L[oe.ixfe],v:oe.rknum,t:"n"},R>0&&(T.z=K[T.ixfe>>8&63]),ku(T,t,r.opts.Date1904),j({c:oe.c,r:oe.r},T,t);break;case 189:for(var we=oe.c;we<=oe.C;++we){var Fe=oe.rkrec[we-oe.c][0];T={ixfe:Fe,XF:L[Fe],v:oe.rkrec[we-oe.c][1],t:"n"},R>0&&(T.z=K[T.ixfe>>8&63]),ku(T,t,r.opts.Date1904),j({c:we,r:oe.r},T,t)}break;case 6:case 518:case 1030:{if(oe.val=="String"){o=oe;break}if(T=vb(oe.val,oe.cell.ixfe,oe.tt),T.XF=L[T.ixfe],t.cellFormula){var He=oe.formula;if(He&&He[0]&&He[0][0]&&He[0][0][0]=="PtgExp"){var Xe=He[0][0][1][0],ut=He[0][0][1][1],Et=kr({r:Xe,c:ut});_[Et]?T.f=""+Ki(oe.formula,i,oe.cell,q,F):T.F=((t.dense?(a[Xe]||[])[ut]:a[Et])||{}).F}else T.f=""+Ki(oe.formula,i,oe.cell,q,F)}R>0&&(T.z=K[T.ixfe>>8&63]),ku(T,t,r.opts.Date1904),j(oe.cell,T,t),o=oe}break;case 7:case 519:if(o)o.val=oe,T=vb(oe,o.cell.ixfe,"s"),T.XF=L[T.ixfe],t.cellFormula&&(T.f=""+Ki(o.formula,i,o.cell,q,F)),R>0&&(T.z=K[T.ixfe>>8&63]),ku(T,t,r.opts.Date1904),j(o.cell,T,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{B.push(oe);var At=kr(oe[0].s);if(p=t.dense?(a[oe[0].s.r]||[])[oe[0].s.c]:a[At],t.cellFormula&&p){if(!o||!At||!p)break;p.f=""+Ki(oe[1],i,oe[0],q,F),p.F=Qr(oe[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!o)break;_[kr(o.cell)]=oe[0],p=t.dense?(a[o.cell.r]||[])[o.cell.c]:a[kr(o.cell)],(p||{}).f=""+Ki(oe[0],i,h,q,F)}}break;case 253:T=vb(c[oe.isst].t,oe.ixfe,"s"),c[oe.isst].h&&(T.h=c[oe.isst].h),T.XF=L[T.ixfe],R>0&&(T.z=K[T.ixfe>>8&63]),ku(T,t,r.opts.Date1904),j({c:oe.c,r:oe.r},T,t);break;case 513:t.sheetStubs&&(T={ixfe:oe.ixfe,XF:L[oe.ixfe],t:"z"},R>0&&(T.z=K[T.ixfe>>8&63]),ku(T,t,r.opts.Date1904),j({c:oe.c,r:oe.r},T,t));break;case 190:if(t.sheetStubs)for(var jt=oe.c;jt<=oe.C;++jt){var Dt=oe.ixfe[jt-oe.c];T={ixfe:Dt,XF:L[Dt],t:"z"},R>0&&(T.z=K[T.ixfe>>8&63]),ku(T,t,r.opts.Date1904),j({c:jt,r:oe.r},T,t)}break;case 214:case 516:case 4:T=vb(oe.val,oe.ixfe,"s"),T.XF=L[T.ixfe],R>0&&(T.z=K[T.ixfe>>8&63]),ku(T,t,r.opts.Date1904),j({c:oe.c,r:oe.r},T,t);break;case 0:case 512:Z===1&&(i=oe);break;case 252:c=oe;break;case 1054:if(F.biff==4){K[R++]=oe[1];for(var Yt=0;Yt<R+163&&Sr[Yt]!=oe[1];++Yt);Yt>=163&&KA(oe[1],R+163)}else KA(oe[1],oe[0]);break;case 30:{K[R++]=oe;for(var Rt=0;Rt<R+163&&Sr[Rt]!=oe;++Rt);Rt>=163&&KA(oe,R+163)}break;case 229:M=M.concat(oe);break;case 93:ee[oe.cmo[0]]=F.lastobj=oe;break;case 438:F.lastobj.TxO=oe;break;case 127:F.lastobj.ImData=oe;break;case 440:for(E=oe[0].s.r;E<=oe[0].e.r;++E)for(x=oe[0].s.c;x<=oe[0].e.c;++x)p=t.dense?(a[E]||[])[x]:a[kr({c:x,r:E})],p&&(p.l=oe[1]);break;case 2048:for(E=oe[0].s.r;E<=oe[0].e.r;++E)for(x=oe[0].s.c;x<=oe[0].e.c;++x)p=t.dense?(a[E]||[])[x]:a[kr({c:x,r:E})],p&&p.l&&(p.l.Tooltip=oe[1]);break;case 28:{if(F.biff<=5&&F.biff>=2)break;p=t.dense?(a[oe[0].r]||[])[oe[0].c]:a[kr(oe[0])];var Ut=ee[oe[2]];p||(t.dense?(a[oe[0].r]||(a[oe[0].r]=[]),p=a[oe[0].r][oe[0].c]={t:"z"}):p=a[kr(oe[0])]={t:"z"},i.e.r=Math.max(i.e.r,oe[0].r),i.s.r=Math.min(i.s.r,oe[0].r),i.e.c=Math.max(i.e.c,oe[0].c),i.s.c=Math.min(i.s.c,oe[0].c)),p.c||(p.c=[]),v={a:oe[1],t:Ut.TxO.t},p.c.push(v)}break;case 2173:Xoe(L[oe.ixfe],oe.ext);break;case 125:{if(!F.cellStyles)break;for(;oe.e>=oe.s;)W[oe.e--]={width:oe.w/256,level:oe.level||0,hidden:!!(oe.flags&1)},G||(G=!0,BB(oe.w/256)),Vf(W[oe.e+1])}break;case 520:{var qt={};oe.level!=null&&(te[oe.r]=qt,qt.level=oe.level),oe.hidden&&(te[oe.r]=qt,qt.hidden=!0),oe.hpt&&(te[oe.r]=qt,qt.hpt=oe.hpt,qt.hpx=fp(oe.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Gh(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[fe]]=oe;break;case 161:a["!margins"]||Gh(a["!margins"]={}),a["!margins"].header=oe.header,a["!margins"].footer=oe.footer;break;case 574:oe.RTL&&(w.Views[0].RTL=!0);break;case 146:k=oe;break;case 2198:P=oe;break;case 140:I=oe;break;case 442:A?y.CodeName=oe||y.name:w.WBProps.CodeName=oe||"ThisWorkbook";break}}else Ce||console.error("Missing Info for XLS Record 0x"+fe.toString(16)),e.l+=be}return r.SheetNames=Xa(s).sort(function(De,Oe){return Number(De)-Number(Oe)}).map(function(De){return s[De].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&X.forEach(function(De,Oe){r.Sheets[r.SheetNames[Oe]]["!autofilter"]=De}),r.Strings=c,r.SSF=va(Sr),F.enc&&(r.Encryption=F.enc),P&&(r.Themes=P),r.Metadata={},I!==void 0&&(r.Metadata.Country=I),q.names.length>0&&(w.Names=q.names),r.Workbook=w,r}var yx={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function ufe(e,t,r){var n=hr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=Aj(n,j4,yx.DSI);for(var s in a)t[s]=a[s]}catch(A){if(r.WTF)throw A}var i=hr.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=Aj(i,D4,yx.SI);for(var c in o)t[c]==null&&(t[c]=o[c])}catch(A){if(r.WTF)throw A}t.HeadingPairs&&t.TitlesOfParts&&(vP(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function Afe(e,t){var r=[],n=[],a=[],s=0,i,o=Q6(j4,"n"),c=Q6(D4,"n");if(e.Props)for(i=Xa(e.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],e.Props[i[s]]]);if(e.Custprops)for(i=Xa(e.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],e.Custprops[i[s]]]);var A=[];for(s=0;s<a.length;++s)SP.indexOf(a[s][0])>-1||xP.indexOf(a[s][0])>-1||a[s][1]!=null&&A.push(a[s]);n.length&&hr.utils.cfb_add(t,"/SummaryInformation",dj(n,yx.SI,c,D4)),(r.length||A.length)&&hr.utils.cfb_add(t,"/DocumentSummaryInformation",dj(r,yx.DSI,o,j4,A.length?A:null,yx.UDI))}function wM(e,t){t||(t={}),OB(t),aB(),t.codepage&&nB(t.codepage);var r,n;if(e.FullPaths){if(hr.find(e,"/encryption"))throw new Error("File is password-protected");r=hr.find(e,"!CompObj"),n=hr.find(e,"/Workbook")||hr.find(e,"/Book")}else{switch(t.type){case"base64":e=fl(vl(e));break;case"binary":e=fl(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}vi(e,0),n={content:e}}var a,s;if(r&&ife(r),t.bookProps&&!t.bookSheets)a={};else{var i=Zr?"buffer":"array";if(n&&n.content)a=cfe(n.content,t);else if((s=hr.find(e,"PerfectOffice_MAIN"))&&s.content)a=zh.to_workbook(s.content,(t.type=i,t));else if((s=hr.find(e,"NativeContent_MAIN"))&&s.content)a=zh.to_workbook(s.content,(t.type=i,t));else throw(s=hr.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&hr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=Cle(e))}var o={};return e.FullPaths&&ufe(e,o,t),a.Props=a.Custprops=o,t.bookFiles&&(a.cfb=e),a}function dfe(e,t){var r=t||{},n=hr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return hr.utils.cfb_add(n,a,yM(e,r)),r.biff==8&&(e.Props||e.Custprops)&&Afe(e,n),r.biff==8&&e.vbaraw&&_le(n,hr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var t1={0:{f:Lue},1:{f:zue},2:{f:cAe},3:{f:Jue},4:{f:$ue},5:{f:iAe},6:{f:hAe},7:{f:rAe},8:{f:wAe},9:{f:bAe},10:{f:xAe},11:{f:vAe},12:{f:Kue},13:{f:AAe},14:{f:eAe},15:{f:Xue},16:{f:fM},17:{f:pAe},18:{f:aAe},19:{f:xB},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:pde},40:{},42:{},43:{f:hoe},44:{f:doe},45:{f:goe},46:{f:voe},47:{f:xoe},48:{},49:{f:Pne},50:{},51:{f:Zoe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:OP},62:{f:fAe},63:{f:lle},64:{f:OAe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:to,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:jAe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Hue},148:{f:Pue,p:16},151:{f:NAe},152:{},153:{f:fde},154:{},155:{},156:{f:Ade},157:{},158:{},159:{T:1,f:kie},160:{T:-1},161:{T:1,f:w0},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:yAe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Yoe},336:{T:-1},337:{f:rle,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:F4},357:{},358:{},359:{},360:{T:1},361:{},362:{f:LP},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:BAe},427:{f:kAe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:IAe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Que},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:_Ae},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:F4},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:vle},633:{T:1},634:{T:-1},635:{T:1,f:gle},636:{T:-1},637:{f:Vne},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:ede},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:UAe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},M4={6:{f:L5},10:{f:Wd},12:{f:_s},13:{f:_s},14:{f:os},15:{f:os},16:{f:Ji},17:{f:os},18:{f:os},19:{f:_s},20:{f:xj},21:{f:xj},23:{f:LP},24:{f:bj},25:{f:os},26:{},27:{},28:{f:Use},29:{},34:{f:os},35:{f:vj},38:{f:Ji},39:{f:Ji},40:{f:Ji},41:{f:Ji},42:{f:os},43:{f:os},47:{f:Xie},49:{f:Ase},51:{f:_s},60:{},61:{f:ise},64:{f:os},65:{f:use},66:{f:_s},77:{},80:{},81:{},82:{},85:{f:_s},89:{},90:{},91:{},92:{f:Wae},93:{f:Qse},94:{},95:{f:os},96:{},97:{},99:{f:os},125:{f:OP},128:{f:Sse},129:{f:Yae},130:{f:_s},131:{f:os},132:{f:os},133:{f:Jae},134:{},140:{f:Wse},141:{f:_s},144:{},146:{f:Jse},151:{},152:{},153:{},154:{},155:{},156:{f:_s},157:{},158:{},160:{f:sie},161:{f:tie},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:yse},190:{f:Ese},193:{f:Wd},197:{},198:{},199:{},200:{},201:{},202:{f:os},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:_s},220:{},221:{f:os},222:{},224:{f:_se},225:{f:$ae},226:{f:Wd},227:{},229:{f:Pse},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:ese},253:{f:fse},255:{f:rse},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:NP},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:os},353:{f:Wd},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Ise},431:{f:os},432:{},433:{},434:{},437:{},438:{f:zse},439:{f:os},440:{f:Gse},441:{},442:{f:H1},443:{},444:{f:_s},445:{},446:{},448:{f:Wd},449:{f:sse,r:2},450:{f:Wd},512:{f:mj},513:{f:aie},515:{f:kse},516:{f:mse},517:{f:gj},519:{f:iie},520:{f:nse},523:{},545:{f:wj},549:{f:hj},566:{},574:{f:lse},638:{f:wse},659:{},1048:{},1054:{f:gse},1084:{},1212:{f:Rse},2048:{f:qse},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:pb},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Wd},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Zse,r:12},2173:{f:Woe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:os,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Dse,r:12},2197:{},2198:{f:Voe,r:12},2199:{},2200:{},2201:{},2202:{f:Lse,r:12},2203:{f:Wd},2204:{},2205:{},2206:{},2207:{},2211:{f:ase},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:_s},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:rie},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Yse},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:mj},1:{},2:{f:Aie},3:{f:cie},4:{f:lie},5:{f:gj},7:{f:fie},8:{},9:{f:pb},11:{},22:{f:_s},30:{f:vse},31:{},32:{},33:{f:wj},36:{},37:{f:hj},50:{f:hie},62:{},52:{},67:{},68:{f:_s},69:{},86:{},126:{},127:{f:oie},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:mie},223:{},234:{},354:{},421:{},518:{f:L5},521:{f:pb},536:{f:bj},547:{f:vj},561:{},579:{},1030:{f:L5},1033:{f:pb},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Pt(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&mB(r)&&e.push(r)}}function ffe(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return Pt(e,t,r,a);var s=t;if(!isNaN(s)){for(var i=r.parts||[],o=0,c=0,A=0;A+(i[o]||8224)<=8224;)A+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,A),e.push(r.slice(c,c+A)),c+=A;c<a;){for(d=e.next(4),d.write_shift(2,60),A=0;A+(i[o]||8224)<=8224;)A+=i[o]||8224,o++;d.write_shift(2,A),e.push(r.slice(c,c+A)),c+=A}}}function K1(e,t,r){return e||(e=dt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function hfe(e,t,r,n){var a=dt(9);return K1(a,e,t),BP(r,n||"b",a),a}function mfe(e,t,r){var n=dt(8+2*r.length);return K1(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function pfe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?Vs(xa(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?Pt(e,2,die(r,n,a)):Pt(e,3,uie(r,n,a));return;case"b":case"e":Pt(e,5,hfe(r,n,t.v,t.t));return;case"s":case"str":Pt(e,4,mfe(r,n,(t.v||"").slice(0,255)));return}Pt(e,1,K1(null,r,n))}function gfe(e,t,r,n){var a=Array.isArray(t),s=Sn(t["!ref"]||"A1"),i,o="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=Qr(s)}for(var A=s.s.r;A<=s.e.r;++A){o=fs(A);for(var d=s.s.c;d<=s.e.c;++d){A===s.s.r&&(c[d]=Ia(d)),i=c[d]+o;var h=a?(t[A]||[])[d]:t[i];h&&pfe(e,h,A,d)}}}function xfe(e,t){for(var r=t||{},n=Po(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Pt(n,r.biff==4?1033:r.biff==3?521:9,_B(e,16,r)),gfe(n,e.Sheets[e.SheetNames[a]],a,r),Pt(n,10),n.end()}function vfe(e,t,r){Pt(e,49,dse({sz:12,name:"Arial"},r))}function bfe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Pt(e,1054,xse(a,t[a],r))})}function wfe(e,t){var r=dt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Pt(e,2151,r),r=dt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),jP(Sn(t["!ref"]||"A1"),r),r.write_shift(4,4),Pt(e,2152,r)}function yfe(e,t){for(var r=0;r<16;++r)Pt(e,224,pj({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Pt(e,224,pj(n,0,t))})}function Efe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];Pt(e,440,Kse(n)),n[1].Tooltip&&Pt(e,2048,$se(n))}delete t["!links"]}function Cfe(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&Pt(e,125,eie(sE(a,n),a))})}}function _fe(e,t,r,n,a){var s=16+Jf(a.cellXfs,t,a);if(t.v==null&&!t.bf){Pt(e,513,o0(r,n,s));return}if(t.bf)Pt(e,6,Yce(t,r,n,a,s));else switch(t.t){case"d":case"n":var i=t.t=="d"?Vs(xa(t.v)):t.v;Pt(e,515,Tse(r,n,i,s));break;case"b":case"e":Pt(e,517,Bse(r,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var o=jB(a.Strings,t.v,a.revStrings);Pt(e,253,hse(r,n,o,s))}else Pt(e,516,pse(r,n,(t.v||"").slice(0,255),s,a));break;default:Pt(e,513,o0(r,n,s))}}function Sfe(e,t,r){var n=Po(),a=r.SheetNames[e],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[e]||{},c=Array.isArray(s),A=t.biff==8,d,h="",m=[],p=Sn(s["!ref"]||"A1"),v=A?65536:16384;if(p.e.c>255||p.e.r>=v){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,v-1)}Pt(n,2057,_B(r,16,t)),Pt(n,13,Yl(1)),Pt(n,12,Yl(100)),Pt(n,15,fo(!0)),Pt(n,17,fo(!1)),Pt(n,16,s0(.001)),Pt(n,95,fo(!0)),Pt(n,42,fo(!1)),Pt(n,43,fo(!1)),Pt(n,130,Yl(1)),Pt(n,128,Nse()),Pt(n,131,fo(!1)),Pt(n,132,fo(!1)),A&&Cfe(n,s["!cols"]),Pt(n,512,bse(p,t)),A&&(s["!links"]=[]);for(var x=p.s.r;x<=p.e.r;++x){h=fs(x);for(var E=p.s.c;E<=p.e.c;++E){x===p.s.r&&(m[E]=Ia(E)),d=m[E]+h;var _=c?(s[x]||[])[E]:s[d];_&&(_fe(n,_,x,E,t),A&&_.l&&s["!links"].push([d,_.l]))}}var B=o.CodeName||o.name||a;return A&&Pt(n,574,cse((i.Views||[])[0])),A&&(s["!merges"]||[]).length&&Pt(n,229,Mse(s["!merges"])),A&&Efe(n,s),Pt(n,442,kP(B)),A&&wfe(n,s),Pt(n,10),n.end()}function Nfe(e,t,r){var n=Po(),a=(e||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=r.biff==8,c=r.biff==5;if(Pt(n,2057,_B(e,5,r)),r.bookType=="xla"&&Pt(n,135),Pt(n,225,o?Yl(1200):null),Pt(n,193,Bae(2)),c&&Pt(n,191),c&&Pt(n,192),Pt(n,226),Pt(n,92,Xae("SheetJS",r)),Pt(n,66,Yl(o?1200:1252)),o&&Pt(n,353,Yl(0)),o&&Pt(n,448),Pt(n,317,nie(e.SheetNames.length)),o&&e.vbaraw&&Pt(n,211),o&&e.vbaraw){var A=i.CodeName||"ThisWorkbook";Pt(n,442,kP(A))}Pt(n,156,Yl(17)),Pt(n,25,fo(!1)),Pt(n,18,fo(!1)),Pt(n,19,Yl(0)),o&&Pt(n,431,fo(!1)),o&&Pt(n,444,Yl(0)),Pt(n,61,ose()),Pt(n,64,fo(!1)),Pt(n,141,Yl(0)),Pt(n,34,fo(sde(e)=="true")),Pt(n,14,fo(!0)),o&&Pt(n,439,fo(!1)),Pt(n,218,Yl(0)),vfe(n,e,r),bfe(n,e.SSF,r),yfe(n,r),o&&Pt(n,352,fo(!1));var d=n.end(),h=Po();o&&Pt(h,140,Xse()),o&&r.Strings&&ffe(h,252,tse(r.Strings)),Pt(h,10);var m=h.end(),p=Po(),v=0,x=0;for(x=0;x<e.SheetNames.length;++x)v+=(o?12:11)+(o?2:1)*e.SheetNames[x].length;var E=d.length+v+m.length;for(x=0;x<e.SheetNames.length;++x){var _=s[x]||{};Pt(p,133,Zae({pos:E,hs:_.Hidden||0,dt:0,name:e.SheetNames[x]},r)),E+=t[x].length}var B=p.end();if(v!=B.length)throw new Error("BS8 "+v+" != "+B.length);var T=[];return d.length&&T.push(d),B.length&&T.push(B),m.length&&T.push(m),ai(T)}function Bfe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=va(Sr)),e&&e.SSF&&(Tp(),Jy(e.SSF),r.revssf=eE(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,UB(r),r.cellXfs=[],Jf(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=Sfe(a,r,e);return n.unshift(Nfe(e,n,r)),ai(n)}function yM(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Qo(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return Bfe(e,t);case 4:case 3:case 2:return xfe(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function Ij(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),i=a.index,o=s&&s.index||e.length,c=dne(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),A=-1,d=0,h=0,m=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},v=[];for(i=0;i<c.length;++i){var x=c[i].trim(),E=x.slice(0,3).toLowerCase();if(E=="<tr"){if(++A,r.sheetRows&&r.sheetRows<=A){--A;break}d=0;continue}if(!(E!="<td"&&E!="<th")){var _=x.split(/<\/t[dh]>/i);for(o=0;o<_.length;++o){var B=_[o].trim();if(B.match(/<t[dh]/i)){for(var T=B,I=0;T.charAt(0)=="<"&&(I=T.indexOf(">"))>-1;)T=T.slice(I+1);for(var L=0;L<v.length;++L){var k=v[L];k.s.c==d&&k.s.r<A&&A<=k.e.r&&(d=k.e.c+1,L=-1)}var w=jr(B.slice(0,B.indexOf(">")));m=w.colspan?+w.colspan:1,((h=+w.rowspan)>1||m>1)&&v.push({s:{r:A,c:d},e:{r:A+(h||1)-1,c:d+m-1}});var y=w.t||w["data-t"]||"";if(!T.length){d+=m;continue}if(T=K7(T),p.s.r>A&&(p.s.r=A),p.e.r<A&&(p.e.r=A),p.s.c>d&&(p.s.c=d),p.e.c<d&&(p.e.c=d),!T.length){d+=m;continue}var N={t:"s",v:T};r.raw||!T.trim().length||y=="s"||(T==="TRUE"?N={t:"b",v:!0}:T==="FALSE"?N={t:"b",v:!1}:isNaN(Hc(T))?isNaN(Ap(T).getDate())||(N={t:"d",v:xa(T)},r.cellDates||(N={t:"n",v:Vs(N.v)}),N.z=r.dateNF||Sr[14]):N={t:"n",v:Hc(T)}),r.dense?(n[A]||(n[A]=[]),n[A][d]=N):n[kr({r:A,c:d})]=N,d+=m}}}}return n["!ref"]=Qr(p),v.length&&(n["!merges"]=v),n}function kfe(e,t,r,n){for(var a=e["!merges"]||[],s=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,c=0,A=0;A<a.length;++A)if(!(a[A].s.r>r||a[A].s.c>i)&&!(a[A].e.r<r||a[A].e.c<i)){if(a[A].s.r<r||a[A].s.c<i){o=-1;break}o=a[A].e.r-a[A].s.r+1,c=a[A].e.c-a[A].s.c+1;break}if(!(o<0)){var d=kr({r,c:i}),h=n.dense?(e[r]||[])[i]:e[d],m=h&&h.v!=null&&(h.h||dB(h.w||(rd(h),h.w)||""))||"",p={};o>1&&(p.rowspan=o),c>1&&(p.colspan=c),n.editable?m='<span contenteditable="true">'+m+"</span>":h&&(p["data-t"]=h&&h.t||"z",h.v!=null&&(p["data-v"]=h.v),h.z!=null&&(p["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+h.l.Target+'">'+m+"</a>")),p.id=(n.id||"sjs")+"-"+d,s.push(Ot("td",m,p))}}var v="<tr>";return v+s.join("")+"</tr>"}var Tfe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Ife="</body></html>";function Ffe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Yf(Ij(r[0],t),t);var n=HB();return r.forEach(function(a,s){VB(n,Ij(a,t),"Sheet"+(s+1))}),n}function jfe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function EM(e,t){var r=t||{},n=r.header!=null?r.header:Tfe,a=r.footer!=null?r.footer:Ife,s=[n],i=Qo(e["!ref"]);r.dense=Array.isArray(e),s.push(jfe(e,i,r));for(var o=i.s.r;o<=i.e.r;++o)s.push(kfe(e,i,o,r));return s.push("</table>"+a),s.join("")}function CM(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?Fa(n.origin):n.origin;a=i.r,s=i.c}var o=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,o.length),A={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=Qo(e["!ref"]);A.s.r=Math.min(A.s.r,d.s.r),A.s.c=Math.min(A.s.c,d.s.c),A.e.r=Math.max(A.e.r,d.e.r),A.e.c=Math.max(A.e.c,d.e.c),a==-1&&(A.e.r=a=d.e.r+1)}var h=[],m=0,p=e["!rows"]||(e["!rows"]=[]),v=0,x=0,E=0,_=0,B=0,T=0;for(e["!cols"]||(e["!cols"]=[]);v<o.length&&x<c;++v){var I=o[v];if(Fj(I)){if(n.display)continue;p[x]={hidden:!0}}var L=I.children;for(E=_=0;E<L.length;++E){var k=L[E];if(!(n.display&&Fj(k))){var w=k.hasAttribute("data-v")?k.getAttribute("data-v"):k.hasAttribute("v")?k.getAttribute("v"):K7(k.innerHTML),y=k.getAttribute("data-z")||k.getAttribute("z");for(m=0;m<h.length;++m){var N=h[m];N.s.c==_+s&&N.s.r<x+a&&x+a<=N.e.r&&(_=N.e.c+1-s,m=-1)}T=+k.getAttribute("colspan")||1,((B=+k.getAttribute("rowspan")||1)>1||T>1)&&h.push({s:{r:x+a,c:_+s},e:{r:x+a+(B||1)-1,c:_+s+(T||1)-1}});var U={t:"s",v:w},j=k.getAttribute("data-t")||k.getAttribute("t")||"";w!=null&&(w.length==0?U.t=j||"z":n.raw||w.trim().length==0||j=="s"||(w==="TRUE"?U={t:"b",v:!0}:w==="FALSE"?U={t:"b",v:!1}:isNaN(Hc(w))?isNaN(Ap(w).getDate())||(U={t:"d",v:xa(w)},n.cellDates||(U={t:"n",v:Vs(U.v)}),U.z=n.dateNF||Sr[14]):U={t:"n",v:Hc(w)})),U.z===void 0&&y!=null&&(U.z=y);var F="",P=k.getElementsByTagName("A");if(P&&P.length)for(var M=0;M<P.length&&!(P[M].hasAttribute("href")&&(F=P[M].getAttribute("href"),F.charAt(0)!="#"));++M);F&&F.charAt(0)!="#"&&(U.l={Target:F}),n.dense?(e[x+a]||(e[x+a]=[]),e[x+a][_+s]=U):e[kr({c:_+s,r:x+a})]=U,A.e.c<_+s&&(A.e.c=_+s),_+=T}}++x}return h.length&&(e["!merges"]=(e["!merges"]||[]).concat(h)),A.e.r=Math.max(A.e.r,x-1+a),e["!ref"]=Qr(A),x>=c&&(e["!fullref"]=Qr((A.e.r=o.length-v+x-1+a,A))),e}function _M(e,t){var r=t||{},n=r.dense?[]:{};return CM(n,e,t)}function Dfe(e,t){return Yf(_M(e,t),t)}function Fj(e){var t="",r=Rfe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Rfe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Lfe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=_n(t.replace(/<[^>]*>/g,""));return[r]}var jj={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function SM(e,t){var r=t||{},n=fB(e),a=[],s,i,o={name:""},c="",A=0,d,h,m={},p=[],v=r.dense?[]:{},x,E,_={value:""},B="",T=0,I=[],L=-1,k=-1,w={s:{r:1e6,c:1e7},e:{r:0,c:0}},y=0,N={},U=[],j={},F=0,P=0,M=[],ee=1,W=1,te=[],G={Names:[]},q={},z=["",""],Z=[],R={},K="",X=0,re=!1,ne=!1,ue=0;for(Wx.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=Wx.exec(n);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"工作表":x[1]==="/"?(w.e.c>=w.s.c&&w.e.r>=w.s.r?v["!ref"]=Qr(w):v["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=w.e.r&&(v["!fullref"]=v["!ref"],w.e.r=r.sheetRows-1,v["!ref"]=Qr(w)),U.length&&(v["!merges"]=U),M.length&&(v["!rows"]=M),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),p.push(d.name),m[d.name]=v,ne=!1):x[0].charAt(x[0].length-2)!=="/"&&(d=jr(x[0],!1),L=k=-1,w.s.r=w.s.c=1e7,w.e.r=w.e.c=0,v=r.dense?[]:{},U=[],M=[],ne=!0);break;case"table-row-group":x[1]==="/"?--y:++y;break;case"table-row":case"行":if(x[1]==="/"){L+=ee,ee=1;break}if(h=jr(x[0],!1),h.行号?L=h.行号-1:L==-1&&(L=0),ee=+h["number-rows-repeated"]||1,ee<10)for(ue=0;ue<ee;++ue)y>0&&(M[L+ue]={level:y});k=-1;break;case"covered-table-cell":x[1]!=="/"&&++k,r.sheetStubs&&(r.dense?(v[L]||(v[L]=[]),v[L][k]={t:"z"}):v[kr({r:L,c:k})]={t:"z"}),B="",I=[];break;case"table-cell":case"数据":if(x[0].charAt(x[0].length-2)==="/")++k,_=jr(x[0],!1),W=parseInt(_["number-columns-repeated"]||"1",10),E={t:"z",v:null},_.formula&&r.cellFormula!=!1&&(E.f=Bj(_n(_.formula))),(_.数据类型||_["value-type"])=="string"&&(E.t="s",E.v=_n(_["string-value"]||""),r.dense?(v[L]||(v[L]=[]),v[L][k]=E):v[kr({r:L,c:k})]=E),k+=W-1;else if(x[1]!=="/"){++k,B="",T=0,I=[],W=1;var fe=ee?L+ee-1:L;if(k>w.e.c&&(w.e.c=k),k<w.s.c&&(w.s.c=k),L<w.s.r&&(w.s.r=L),fe>w.e.r&&(w.e.r=fe),_=jr(x[0],!1),Z=[],R={},E={t:_.数据类型||_["value-type"],v:null},r.cellFormula)if(_.formula&&(_.formula=_n(_.formula)),_["number-matrix-columns-spanned"]&&_["number-matrix-rows-spanned"]&&(F=parseInt(_["number-matrix-rows-spanned"],10)||0,P=parseInt(_["number-matrix-columns-spanned"],10)||0,j={s:{r:L,c:k},e:{r:L+F-1,c:k+P-1}},E.F=Qr(j),te.push([j,E.F])),_.formula)E.f=Bj(_.formula);else for(ue=0;ue<te.length;++ue)L>=te[ue][0].s.r&&L<=te[ue][0].e.r&&k>=te[ue][0].s.c&&k<=te[ue][0].e.c&&(E.F=te[ue][1]);switch((_["number-columns-spanned"]||_["number-rows-spanned"])&&(F=parseInt(_["number-rows-spanned"],10)||0,P=parseInt(_["number-columns-spanned"],10)||0,j={s:{r:L,c:k},e:{r:L+F-1,c:k+P-1}},U.push(j)),_["number-columns-repeated"]&&(W=parseInt(_["number-columns-repeated"],10)),E.t){case"boolean":E.t="b",E.v=pa(_["boolean-value"]);break;case"float":E.t="n",E.v=parseFloat(_.value);break;case"percentage":E.t="n",E.v=parseFloat(_.value);break;case"currency":E.t="n",E.v=parseFloat(_.value);break;case"date":E.t="d",E.v=xa(_["date-value"]),r.cellDates||(E.t="n",E.v=Vs(E.v)),E.z="m/d/yy";break;case"time":E.t="n",E.v=cne(_["time-value"])/86400,r.cellDates&&(E.t="d",E.v=tE(E.v)),E.z="HH:MM:SS";break;case"number":E.t="n",E.v=parseFloat(_.数据数值);break;default:if(E.t==="string"||E.t==="text"||!E.t)E.t="s",_["string-value"]!=null&&(B=_n(_["string-value"]),I=[]);else throw new Error("Unsupported value type "+E.t)}}else{if(re=!1,E.t==="s"&&(E.v=B||"",I.length&&(E.R=I),re=T==0),q.Target&&(E.l=q),Z.length>0&&(E.c=Z,Z=[]),B&&r.cellText!==!1&&(E.w=B),re&&(E.t="z",delete E.v),(!re||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=L))for(var be=0;be<ee;++be){if(W=parseInt(_["number-columns-repeated"]||"1",10),r.dense)for(v[L+be]||(v[L+be]=[]),v[L+be][k]=be==0?E:va(E);--W>0;)v[L+be][k+W]=va(E);else for(v[kr({r:L+be,c:k})]=E;--W>0;)v[kr({r:L+be,c:k+W})]=va(E);w.e.c<=k&&(w.e.c=k)}W=parseInt(_["number-columns-repeated"]||"1",10),k+=W-1,W=0,E={},B="",I=[]}q={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s;R.t=B,I.length&&(R.R=I),R.a=K,Z.push(R)}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);K="",X=0,B="",T=0,I=[];break;case"creator":x[1]==="/"?K=n.slice(X,x.index):X=x.index+x[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);B="",T=0,I=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(N[o.name]=c,(s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&(c="",o=jr(x[0],!1),a.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=jr(x[0],!1),c+=jj[x[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=jr(x[0],!1),c+=jj[x[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(A,x.index);break}else A=x.index+x[0].length;break;case"named-range":i=jr(x[0],!1),z=O5(i["cell-range-address"]);var Ce={Name:i.name,Ref:z[0]+"!"+z[1]};ne&&(Ce.Sheet=p.length),G.Names.push(Ce);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(x[1]==="/"&&(!_||!_["string-value"])){var me=Lfe(n.slice(T,x.index));B=(B.length>0?B+`
`:"")+me[0]}else jr(x[0],!1),T=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{z=O5(jr(x[0])["target-range-address"]),m[z[0]]["!autofilter"]={ref:z[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(q=jr(x[0],!1),!q.href)break;q.Target=_n(q.href),delete q.href,q.Target.charAt(0)=="#"&&q.Target.indexOf(".")>-1?(z=O5(q.Target.slice(1)),q.Target="#"+z[0]+"!"+z[1]):q.Target.match(/^\.\.[\\\/]/)&&(q.Target=q.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(x)}}var oe={Sheets:m,SheetNames:p,Workbook:G};return r.bookSheets&&delete oe.Sheets,oe}function Dj(e,t){t=t||{},Wl(e,"META-INF/manifest.xml")&&cae(Cs(e,"META-INF/manifest.xml"),t);var r=hl(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=SM(ia(r),t);return Wl(e,"meta.xml")&&(n.Props=pP(Cs(e,"meta.xml"))),n}function Rj(e,t){return SM(e,t)}var Ofe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+$x({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return hs+t}}(),Lj=function(){var e=function(s){return Jn(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,o){var c=[];c.push('      <table:table table:name="'+Jn(i.SheetNames[o])+`" table:style-name="ta1">
`);var A=0,d=0,h=Qo(s["!ref"]||"A1"),m=s["!merges"]||[],p=0,v=Array.isArray(s);if(s["!cols"])for(d=0;d<=h.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var x="",E=s["!rows"]||[];for(A=0;A<h.s.r;++A)x=E[A]?' table:style-name="ro'+E[A].ods+'"':"",c.push("        <table:table-row"+x+`></table:table-row>
`);for(;A<=h.e.r;++A){for(x=E[A]?' table:style-name="ro'+E[A].ods+'"':"",c.push("        <table:table-row"+x+`>
`),d=0;d<h.s.c;++d)c.push(t);for(;d<=h.e.c;++d){var _=!1,B={},T="";for(p=0;p!=m.length;++p)if(!(m[p].s.c>d)&&!(m[p].s.r>A)&&!(m[p].e.c<d)&&!(m[p].e.r<A)){(m[p].s.c!=d||m[p].s.r!=A)&&(_=!0),B["table:number-columns-spanned"]=m[p].e.c-m[p].s.c+1,B["table:number-rows-spanned"]=m[p].e.r-m[p].s.r+1;break}if(_){c.push(r);continue}var I=kr({r:A,c:d}),L=v?(s[A]||[])[d]:s[I];if(L&&L.f&&(B["table:formula"]=Jn(nue(L.f)),L.F&&L.F.slice(0,I.length)==I)){var k=Qo(L.F);B["table:number-matrix-columns-spanned"]=k.e.c-k.s.c+1,B["table:number-matrix-rows-spanned"]=k.e.r-k.s.r+1}if(!L){c.push(t);continue}switch(L.t){case"b":T=L.v?"TRUE":"FALSE",B["office:value-type"]="boolean",B["office:boolean-value"]=L.v?"true":"false";break;case"n":T=L.w||String(L.v||0),B["office:value-type"]="float",B["office:value"]=L.v||0;break;case"s":case"str":T=L.v==null?"":L.v,B["office:value-type"]="string";break;case"d":T=L.w||xa(L.v).toISOString(),B["office:value-type"]="date",B["office:date-value"]=xa(L.v).toISOString(),B["table:style-name"]="ce1";break;default:c.push(t);continue}var w=e(T);if(L.l&&L.l.Target){var y=L.l.Target;y=y.charAt(0)=="#"?"#"+aue(y.slice(1)):y,y.charAt(0)!="#"&&!y.match(/^\w+:/)&&(y="../"+y),w=Ot("text:a",w,{"xlink:href":y.replace(/&/g,"&amp;")})}c.push("          "+Ot("table:table-cell",Ot("text:p",w,{}),B)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(A){return i.Sheets[A]}).forEach(function(A){if(A&&A["!cols"]){for(var d=0;d<A["!cols"].length;++d)if(A["!cols"][d]){var h=A["!cols"][d];if(h.width==null&&h.wpx==null&&h.wch==null)continue;Vf(h),h.ods=o;var m=A["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),s.push(`  </style:style>
`),++o}}});var c=0;i.SheetNames.map(function(A){return i.Sheets[A]}).forEach(function(A){if(A&&A["!rows"]){for(var d=0;d<A["!rows"].length;++d)if(A["!rows"][d]){A["!rows"][d].ods=c;var h=A["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,o){var c=[hs],A=$x({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=$x({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+A+d+`>
`),c.push(mP().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+A+`>
`),a(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var h=0;h!=i.SheetNames.length;++h)c.push(n(i.Sheets[i.SheetNames[h]],i,h));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function NM(e,t){if(t.bookType=="fods")return Lj(e,t);var r=cB(),n="",a=[],s=[];return n="mimetype",qr(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",qr(r,n,Lj(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",qr(r,n,Ofe(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",qr(r,n,hs+mP()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",qr(r,n,dae(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",qr(r,n,uae(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function l0(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Q4(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):ia(Xf(e))}function Ufe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):fl(Mu(e))}function Pfe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Gf(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function Oj(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function Mfe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function Qfe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=a&255;e[t+15]|=r>=0?0:128}function r1(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Wn(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Wa(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function jn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=r1(e,r),s=a&7;a=Math.floor(a/8);var i=0,o;if(a==0)break;switch(s){case 0:{for(var c=r[0];e[r[0]++]>=128;);o=e.slice(c,r[0])}break;case 5:i=4,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=r1(e,r),o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var A={data:o,type:s};t[a]==null?t[a]=[A]:t[a].push(A)}return t}function mi(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(Wn(n*8+a.type)),a.type==2&&t.push(Wn(a.data.length)),t.push(a.data))})}),Gf(t)}function LB(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function ql(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=r1(e,n),s=jn(e.slice(n[0],n[0]+a));n[0]+=a;var i={id:Wa(s[1][0].data),messages:[]};s[2].forEach(function(o){var c=jn(o.data),A=Wa(c[3][0].data);i.messages.push({meta:c,data:e.slice(n[0],n[0]+A)}),n[0]+=A}),(t=s[3])!=null&&t[0]&&(i.merge=Wa(s[3][0].data)>>>0>0),r.push(i)}return r}function rm(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:Wn(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Wn(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:Wn(i.data.length)}],n[2].push({data:mi(i.meta),type:2})});var s=mi(n);t.push(Wn(s.length)),t.push(s),a.forEach(function(i){return t.push(i)})}),Gf(t)}function Hfe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=r1(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=t[r[0]],o>1&&(i|=t[r[0]+1]<<8),o>2&&(i|=t[r[0]+2]<<16),o>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}a.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,A=0;if(s==1?(A=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(A=(t[r[0]++]>>2)+1,s==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Gf(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(A>=c)for(a.push(a[0].slice(-c)),A-=c;A>=a[a.length-1].length;)a.push(a[a.length-1]),A-=a[a.length-1].length;a.push(a[0].slice(-c,-c+A))}}var d=Gf(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function $l(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Hfe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Gf(t)}function nm(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=Wn(n),i=s.length;t.push(s),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return Gf(t)}function Vfe(e,t,r,n){var a=l0(e),s=a.getUint32(4,!0),i=(n>1?12:8)+Oj(s&(n>1?3470:398))*4,o=-1,c=-1,A=NaN,d=new Date(2001,0,1);s&512&&(o=a.getUint32(i,!0),i+=4),i+=Oj(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(i,!0),i+=4),s&32&&(A=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var h;switch(e[2]){case 0:break;case 2:h={t:"n",v:A};break;case 3:h={t:"s",v:t[c]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:A>0};break;case 7:h={t:"n",v:A/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:r[o]};else if(c>-1)h={t:"s",v:t[c]};else if(!isNaN(A))h={t:"n",v:A};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return h}function zfe(e,t,r){var n=l0(e),a=n.getUint32(8,!0),s=12,i=-1,o=-1,c=NaN,A=NaN,d=new Date(2001,0,1);a&1&&(c=Mfe(e,s),s+=16),a&2&&(A=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(o=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var h;switch(e[1]){case 0:break;case 2:h={t:"n",v:c};break;case 3:h={t:"s",v:t[o]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:A>0};break;case 7:h={t:"n",v:A/86400};break;case 8:h={t:"e",v:0};break;case 9:if(i>-1)h={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:h={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return h}function P5(e,t){var r=new Uint8Array(32),n=l0(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,Qfe(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function M5(e,t){var r=new Uint8Array(32),n=l0(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function Gfe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return Vfe(e,t,r,e[0]);case 5:return zfe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Gi(e){var t=jn(e);return r1(t[1][0].data)}function Uj(e,t){var r=jn(t.data),n=Wa(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var o=jn(i.data),c=Wa(o[1][0].data)>>>0;switch(n){case 1:s[c]=Q4(o[3][0].data);break;case 8:{var A=e[Gi(o[9][0].data)][0],d=jn(A.data),h=e[Gi(d[1][0].data)][0],m=Wa(h.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var p=jn(h.data);s[c]=p[3].map(function(v){return Q4(v.data)}).join("")}break}}),s}function Kfe(e,t){var r,n,a,s,i,o,c,A,d,h,m,p,v,x,E=jn(e),_=Wa(E[1][0].data)>>>0,B=Wa(E[2][0].data)>>>0,T=((n=(r=E[8])==null?void 0:r[0])==null?void 0:n.data)&&Wa(E[8][0].data)>0||!1,I,L;if((s=(a=E[7])==null?void 0:a[0])!=null&&s.data&&t!=0)I=(o=(i=E[7])==null?void 0:i[0])==null?void 0:o.data,L=(A=(c=E[6])==null?void 0:c[0])==null?void 0:A.data;else if((h=(d=E[4])==null?void 0:d[0])!=null&&h.data&&t!=1)I=(p=(m=E[4])==null?void 0:m[0])==null?void 0:p.data,L=(x=(v=E[3])==null?void 0:v[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var k=T?4:1,w=l0(I),y=[],N=0;N<I.length/2;++N){var U=w.getUint16(N*2,!0);U<65535&&y.push([N,U])}if(y.length!=B)throw"Expected ".concat(B," cells, found ").concat(y.length);var j=[];for(N=0;N<y.length-1;++N)j[y[N][0]]=L.subarray(y[N][1]*k,y[N+1][1]*k);return y.length>=1&&(j[y[y.length-1][0]]=L.subarray(y[y.length-1][1]*k)),{R:_,cells:j}}function qfe(e,t){var r,n=jn(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Wa(n[7][0].data)>>>0>0?1:0:-1,s=LB(n[5],function(i){return Kfe(i,a)});return{nrows:Wa(n[4][0].data)>>>0,data:s.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(c,A){if(i[o.R][A])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(A));i[o.R][A]=c}),i},[])}}function $fe(e,t,r){var n,a=jn(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Wa(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Wa(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=Qr(s);var i=jn(a[4][0].data),o=Uj(e,e[Gi(i[4][0].data)][0]),c=(n=i[17])!=null&&n[0]?Uj(e,e[Gi(i[17][0].data)][0]):[],A=jn(i[3][0].data),d=0;A[1].forEach(function(h){var m=jn(h.data),p=e[Gi(m[2][0].data)][0],v=Wa(p.meta[1][0].data);if(v!=6002)throw new Error("6001 unexpected reference to ".concat(v));var x=qfe(e,p);x.data.forEach(function(E,_){E.forEach(function(B,T){var I=kr({r:d+_,c:T}),L=Gfe(B,o,c);L&&(r[I]=L)})}),d+=x.nrows})}function Wfe(e,t){var r=jn(t.data),n={"!ref":"A1"},a=e[Gi(r[2][0].data)],s=Wa(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return $fe(e,a[0],n),n}function Xfe(e,t){var r,n=jn(t.data),a={name:(r=n[1])!=null&&r[0]?Q4(n[1][0].data):"",sheets:[]},s=LB(n[2],Gi);return s.forEach(function(i){e[i].forEach(function(o){var c=Wa(o.meta[1][0].data);c==6e3&&a.sheets.push(Wfe(e,o))})}),a}function Yfe(e,t){var r=HB(),n=jn(t.data),a=LB(n[1],Gi);if(a.forEach(function(s){e[s].forEach(function(i){var o=Wa(i.meta[1][0].data);if(o==2){var c=Xfe(e,i);c.sheets.forEach(function(A,d){VB(r,A,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function Q5(e){var t,r,n,a,s={},i=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var A;try{A=$l(c.content)}catch(h){return console.log("?? "+c.content.length+" "+(h.message||h))}var d;try{d=ql(A)}catch(h){return console.log("## "+(h.message||h))}d.forEach(function(h){s[h.id]=h.messages,i.push(h.id)})}}),!i.length)throw new Error("File has no messages");var o=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Wa(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||i.forEach(function(c){s[c].forEach(function(A){var d=Wa(A.meta[1][0].data)>>>0;if(d==1)if(!o)o=A;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return Yfe(s,o)}function Jfe(e,t,r){var n,a,s,i;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(s=e[8])==null?void 0:s[0])==null?void 0:i.data)&&Wa(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,A=l0(e[7][0].data),d=0,h=[],m=l0(e[4][0].data),p=0,v=[],x=0;x<t.length;++x){if(t[x]==null){A.setUint16(x*2,65535,!0),m.setUint16(x*2,65535);continue}A.setUint16(x*2,d,!0),m.setUint16(x*2,p,!0);var E,_;switch(typeof t[x]){case"string":E=P5({t:"s",v:t[x]},r),_=M5({t:"s",v:t[x]},r);break;case"number":E=P5({t:"n",v:t[x]},r),_=M5({t:"n",v:t[x]},r);break;case"boolean":E=P5({t:"b",v:t[x]},r),_=M5({t:"b",v:t[x]},r);break;default:throw new Error("Unsupported value "+t[x])}h.push(E),d+=E.length,v.push(_),p+=_.length,++c}for(e[2][0].data=Wn(c);x<e[7][0].data.length/2;++x)A.setUint16(x*2,65535,!0),m.setUint16(x*2,65535,!0);return e[6][0].data=Gf(h),e[3][0].data=Gf(v),c}function Zfe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Qo(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Qr(n)));var s=Rw(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(K){return K.forEach(function(X){typeof X=="string"&&i.push(X)})});var o={},c=[],A=hr.read(t.numbers,{type:"base64"});A.FileIndex.map(function(K,X){return[K,A.FullPaths[X]]}).forEach(function(K){var X=K[0],re=K[1];if(X.type==2&&X.name.match(/\.iwa/)){var ne=X.content,ue=$l(ne),fe=ql(ue);fe.forEach(function(be){c.push(be.id),o[be.id]={deps:[],location:re,type:Wa(be.messages[0].meta[1][0].data)}})}}),c.sort(function(K,X){return K-X});var d=c.filter(function(K){return K>1}).map(function(K){return[K,Wn(K)]});A.FileIndex.map(function(K,X){return[K,A.FullPaths[X]]}).forEach(function(K){var X=K[0];if(K[1],!!X.name.match(/\.iwa/)){var re=ql($l(X.content));re.forEach(function(ne){ne.messages.forEach(function(ue){d.forEach(function(fe){ne.messages.some(function(be){return Wa(be.meta[1][0].data)!=11006&&Pfe(be.data,fe[1])})&&o[fe[0]].deps.push(ne.id)})})})}});for(var h=hr.find(A,o[1].location),m=ql($l(h.content)),p,v=0;v<m.length;++v){var x=m[v];x.id==1&&(p=x)}var E=Gi(jn(p.messages[0].data)[1][0].data);for(h=hr.find(A,o[E].location),m=ql($l(h.content)),v=0;v<m.length;++v)x=m[v],x.id==E&&(p=x);for(E=Gi(jn(p.messages[0].data)[2][0].data),h=hr.find(A,o[E].location),m=ql($l(h.content)),v=0;v<m.length;++v)x=m[v],x.id==E&&(p=x);for(E=Gi(jn(p.messages[0].data)[2][0].data),h=hr.find(A,o[E].location),m=ql($l(h.content)),v=0;v<m.length;++v)x=m[v],x.id==E&&(p=x);var _=jn(p.messages[0].data);{_[6][0].data=Wn(n.e.r+1),_[7][0].data=Wn(n.e.c+1);var B=Gi(_[46][0].data),T=hr.find(A,o[B].location),I=ql($l(T.content));{for(var L=0;L<I.length&&I[L].id!=B;++L);if(I[L].id!=B)throw"Bad ColumnRowUIDMapArchive";var k=jn(I[L].messages[0].data);k[1]=[],k[2]=[],k[3]=[];for(var w=0;w<=n.e.c;++w){var y=[];y[1]=y[2]=[{type:0,data:Wn(w+420690)}],k[1].push({type:2,data:mi(y)}),k[2].push({type:0,data:Wn(w)}),k[3].push({type:0,data:Wn(w)})}k[4]=[],k[5]=[],k[6]=[];for(var N=0;N<=n.e.r;++N)y=[],y[1]=y[2]=[{type:0,data:Wn(N+726270)}],k[4].push({type:2,data:mi(y)}),k[5].push({type:0,data:Wn(N)}),k[6].push({type:0,data:Wn(N)});I[L].messages[0].data=mi(k)}T.content=nm(rm(I)),T.size=T.content.length,delete _[46];var U=jn(_[4][0].data);{U[7][0].data=Wn(n.e.r+1);var j=jn(U[1][0].data),F=Gi(j[2][0].data);T=hr.find(A,o[F].location),I=ql($l(T.content));{if(I[0].id!=F)throw"Bad HeaderStorageBucket";var P=jn(I[0].messages[0].data);for(N=0;N<s.length;++N){var M=jn(P[2][0].data);M[1][0].data=Wn(N),M[4][0].data=Wn(s[N].length),P[2][N]={type:P[2][0].type,data:mi(M)}}I[0].messages[0].data=mi(P)}T.content=nm(rm(I)),T.size=T.content.length;var ee=Gi(U[2][0].data);T=hr.find(A,o[ee].location),I=ql($l(T.content));{if(I[0].id!=ee)throw"Bad HeaderStorageBucket";for(P=jn(I[0].messages[0].data),w=0;w<=n.e.c;++w)M=jn(P[2][0].data),M[1][0].data=Wn(w),M[4][0].data=Wn(n.e.r+1),P[2][w]={type:P[2][0].type,data:mi(M)};I[0].messages[0].data=mi(P)}T.content=nm(rm(I)),T.size=T.content.length;var W=Gi(U[4][0].data);(function(){for(var K=hr.find(A,o[W].location),X=ql($l(K.content)),re,ne=0;ne<X.length;++ne){var ue=X[ne];ue.id==W&&(re=ue)}var fe=jn(re.messages[0].data);{fe[3]=[];var be=[];i.forEach(function(oe,Le){be[1]=[{type:0,data:Wn(Le)}],be[2]=[{type:0,data:Wn(1)}],be[3]=[{type:2,data:Ufe(oe)}],fe[3].push({type:2,data:mi(be)})})}re.messages[0].data=mi(fe);var Ce=rm(X),me=nm(Ce);K.content=me,K.size=K.content.length})();var te=jn(U[3][0].data);{var G=te[1][0];delete te[2];var q=jn(G.data);{var z=Gi(q[2][0].data);(function(){for(var K=hr.find(A,o[z].location),X=ql($l(K.content)),re,ne=0;ne<X.length;++ne){var ue=X[ne];ue.id==z&&(re=ue)}var fe=jn(re.messages[0].data);{delete fe[6],delete te[7];var be=new Uint8Array(fe[5][0].data);fe[5]=[];for(var Ce=0,me=0;me<=n.e.r;++me){var oe=jn(be);Ce+=Jfe(oe,s[me],i),oe[1][0].data=Wn(me),fe[5].push({data:mi(oe),type:2})}fe[1]=[{type:0,data:Wn(n.e.c+1)}],fe[2]=[{type:0,data:Wn(n.e.r+1)}],fe[3]=[{type:0,data:Wn(Ce)}],fe[4]=[{type:0,data:Wn(n.e.r+1)}]}re.messages[0].data=mi(fe);var Le=rm(X),Ye=nm(Le);K.content=Ye,K.size=K.content.length})()}G.data=mi(q)}U[3][0].data=mi(te)}_[4][0].data=mi(U)}p.messages[0].data=mi(_);var Z=rm(m),R=nm(Z);return h.content=R,h.size=h.content.length,A}function BM(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function OB(e){BM([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function UB(e){BM([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function ehe(e){return sn.WS.indexOf(e)>-1?"sheet":e==sn.CS?"chart":e==sn.DS?"dialog":e==sn.MS?"macro":e&&e.length?e:"sheet"}function the(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,ehe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function rhe(e,t,r,n,a,s,i,o,c,A,d,h){try{s[n]=xx(hl(e,r,!0),t);var m=Cs(e,t),p;switch(o){case"sheet":p=Cde(m,t,a,c,s[n],A,d,h);break;case"chart":if(p=_de(m,t,a,c,s[n],A,d,h),!p||!p["!drawel"])break;var v=$g(p["!drawel"].Target,t),x=Xx(v),E=Ale(hl(e,v,!0),xx(hl(e,x,!0),v)),_=$g(E,v),B=Xx(_);p=JAe(hl(e,_,!0),_,c,xx(hl(e,B,!0),_),A,p);break;case"macro":p=Sde(m,t,a,c,s[n],A,d,h);break;case"dialog":p=Nde(m,t,a,c,s[n],A,d,h);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=p;var T=[];s&&s[n]&&Xa(s[n]).forEach(function(I){var L="";if(s[n][I].Type==sn.CMNT){L=$g(s[n][I].Target,t);var k=Ide(Cs(e,L,!0),L,c);if(!k||!k.length)return;Ej(p,k,!1)}s[n][I].Type==sn.TCMNT&&(L=$g(s[n][I].Target,t),T=T.concat(fle(Cs(e,L,!0),c)))}),T&&T.length&&Ej(p,T,!0,c.people||[])}catch(I){if(c.WTF)throw I}}function zl(e){return e.charAt(0)=="/"?e.slice(1):e}function nhe(e,t){if(Tp(),t=t||{},OB(t),Wl(e,"META-INF/manifest.xml")||Wl(e,"objectdata.xml"))return Dj(e,t);if(Wl(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Q5<"u"){if(e.FileIndex)return Q5(e);var r=hr.utils.cfb_new();return z6(e).forEach(function(M){qr(r,M,hne(e,M))}),Q5(r)}throw new Error("Unsupported NUMBERS file")}if(!Wl(e,"[Content_Types].xml"))throw Wl(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Wl(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=z6(e),a=oae(hl(e,"[Content_Types].xml")),s=!1,i,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",Cs(e,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!Cs(e,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},A={};if(!t.bookSheets&&!t.bookProps){if(vx=[],a.sst)try{vx=Tde(Cs(e,zl(a.sst)),a.sst,t)}catch(M){if(t.WTF)throw M}t.cellStyles&&a.themes.length&&(c=kde(hl(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(A=Bde(Cs(e,zl(a.style)),a.style,c,t))}a.links.map(function(M){try{var ee=xx(hl(e,Xx(zl(M))),M);return jde(Cs(e,zl(M)),ee,M,t)}catch{}});var d=Ede(Cs(e,zl(a.workbooks[0])),a.workbooks[0],t),h={},m="";a.coreprops.length&&(m=Cs(e,zl(a.coreprops[0]),!0),m&&(h=pP(m)),a.extprops.length!==0&&(m=Cs(e,zl(a.extprops[0]),!0),m&&hae(m,h,t)));var p={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(m=hl(e,zl(a.custprops[0]),!0),m&&(p=pae(m,t)));var v={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(ee){return ee.name}):h.Worksheets&&h.SheetNames.length>0&&(i=h.SheetNames),t.bookProps&&(v.Props=h,v.Custprops=p),t.bookSheets&&typeof i<"u"&&(v.SheetNames=i),t.bookSheets?v.SheetNames:t.bookProps))return v;i={};var x={};t.bookDeps&&a.calcchain&&(x=Fde(Cs(e,zl(a.calcchain)),a.calcchain));var E=0,_={},B,T;{var I=d.Sheets;h.Worksheets=I.length,h.SheetNames=[];for(var L=0;L!=I.length;++L)h.SheetNames[L]=I[L].name}var k=s?"bin":"xml",w=a.workbooks[0].lastIndexOf("/"),y=(a.workbooks[0].slice(0,w+1)+"_rels/"+a.workbooks[0].slice(w+1)+".rels").replace(/^\//,"");Wl(e,y)||(y="xl/_rels/workbook."+k+".rels");var N=xx(hl(e,y,!0),y.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=Dde(Cs(e,zl(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=mle(Cs(e,zl(a.people[0])),t)),N&&(N=the(N,d.Sheets));var U=Cs(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(E=0;E!=h.Worksheets;++E){var j="sheet";if(N&&N[E]?(B="xl/"+N[E][1].replace(/[\/]?xl\//,""),Wl(e,B)||(B=N[E][1]),Wl(e,B)||(B=y.replace(/_rels\/.*$/,"")+N[E][1]),j=N[E][2]):(B="xl/worksheets/sheet"+(E+1-U)+"."+k,B=B.replace(/sheet0\./,"sheet.")),T=B.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(E!=t.sheets)continue e;break;case"string":if(h.SheetNames[E].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var F=!1,P=0;P!=t.sheets.length;++P)typeof t.sheets[P]=="number"&&t.sheets[P]==E&&(F=1),typeof t.sheets[P]=="string"&&t.sheets[P].toLowerCase()==h.SheetNames[E].toLowerCase()&&(F=1);if(!F)continue e}}rhe(e,B,T,h.SheetNames[E],E,_,i,j,t,d,c,A)}return v={Directory:a,Workbook:d,Props:h,Custprops:p,Deps:x,Sheets:i,SheetNames:h.SheetNames,Strings:vx,Styles:A,Themes:c,SSF:va(Sr)},t&&t.bookFiles&&(e.files?(v.keys=n,v.files=e.files):(v.keys=[],v.files={},e.FullPaths.forEach(function(M,ee){M=M.replace(/^Root Entry[\/]/,""),v.keys.push(M),v.files[M]=e.FileIndex[ee]}))),t&&t.bookVBA&&(a.vba.length>0?v.vbaraw=Cs(e,zl(a.vba[0]),!0):a.defaults&&a.defaults.bin===Ele&&(v.vbaraw=Cs(e,"xl/vbaProject.bin",!0))),v}function ahe(e,t){var r=t||{},n="Workbook",a=hr.find(e,n);try{if(n="/!DataSpaces/Version",a=hr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Die(a.content),n="/!DataSpaces/DataSpaceMap",a=hr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=Lie(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=hr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=Oie(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=hr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);Pie(a.content)}catch{}if(n="/EncryptionInfo",a=hr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=Mie(a.content);if(n="/EncryptedPackage",a=hr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function she(e,t){return t.bookType=="ods"?NM(e,t):t.bookType=="numbers"?Zfe(e,t):t.bookType=="xlsb"?ihe(e,t):ohe(e,t)}function ihe(e,t){Im=1024,e&&!e.SSF&&(e.SSF=va(Sr)),e&&e.SSF&&(Tp(),Jy(e.SSF),t.revssf=eE(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,bx?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=tM.indexOf(t.bookType)>-1,a=EB();UB(t=t||{});var s=cB(),i="",o=0;if(t.cellXfs=[],Jf(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",qr(s,i,gP(e.Props,t)),a.coreprops.push(i),Xn(t.rels,2,i,sn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],A=0;A<e.SheetNames.length;++A)(e.Workbook.Sheets[A]||{}).Hidden!=2&&c.push(e.SheetNames[A]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,qr(s,i,bP(e.Props)),a.extprops.push(i),Xn(t.rels,3,i,sn.EXT_PROPS),e.Custprops!==e.Props&&Xa(e.Custprops||{}).length>0&&(i="docProps/custom.xml",qr(s,i,wP(e.Custprops)),a.custprops.push(i),Xn(t.rels,4,i,sn.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},h=e.Sheets[e.SheetNames[o-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,qr(s,i,Lde(o-1,i,t,e,d)),a.sheets.push(i),Xn(t.wbrels,-1,"worksheets/sheet"+o+"."+r,sn.WS[0])}if(h){var p=h["!comments"],v=!1,x="";p&&p.length>0&&(x="xl/comments"+o+"."+r,qr(s,x,Pde(p,x)),a.comments.push(x),Xn(d,-1,"../comments"+o+"."+r,sn.CMNT),v=!0),h["!legacy"]&&v&&qr(s,"xl/drawings/vmlDrawing"+o+".vml",ZP(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&qr(s,Xx(i),qm(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,qr(s,i,Ude(t.Strings,i,t)),a.strs.push(i),Xn(t.wbrels,-1,"sharedStrings."+r,sn.SST)),i="xl/workbook."+r,qr(s,i,Rde(e,i)),a.workbooks.push(i),Xn(t.rels,1,i,sn.WB),i="xl/theme/theme1.xml",qr(s,i,kB(e.Themes,t)),a.themes.push(i),Xn(t.wbrels,-1,"theme/theme1.xml",sn.THEME),i="xl/styles."+r,qr(s,i,Ode(e,i,t)),a.styles.push(i),Xn(t.wbrels,-1,"styles."+r,sn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",qr(s,i,e.vbaraw),a.vba.push(i),Xn(t.wbrels,-1,"vbaProject.bin",sn.VBA)),i="xl/metadata."+r,qr(s,i,Mde(i)),a.metadata.push(i),Xn(t.wbrels,-1,"metadata."+r,sn.XLMETA),qr(s,"[Content_Types].xml",hP(a,t)),qr(s,"_rels/.rels",qm(t.rels)),qr(s,"xl/_rels/workbook."+r+".rels",qm(t.wbrels)),delete t.revssf,delete t.ssf,s}function ohe(e,t){Im=1024,e&&!e.SSF&&(e.SSF=va(Sr)),e&&e.SSF&&(Tp(),Jy(e.SSF),t.revssf=eE(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,bx?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=tM.indexOf(t.bookType)>-1,a=EB();UB(t=t||{});var s=cB(),i="",o=0;if(t.cellXfs=[],Jf(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",qr(s,i,gP(e.Props,t)),a.coreprops.push(i),Xn(t.rels,2,i,sn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],A=0;A<e.SheetNames.length;++A)(e.Workbook.Sheets[A]||{}).Hidden!=2&&c.push(e.SheetNames[A]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,qr(s,i,bP(e.Props)),a.extprops.push(i),Xn(t.rels,3,i,sn.EXT_PROPS),e.Custprops!==e.Props&&Xa(e.Custprops||{}).length>0&&(i="docProps/custom.xml",qr(s,i,wP(e.Custprops)),a.custprops.push(i),Xn(t.rels,4,i,sn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var h={"!id":{}},m=e.Sheets[e.SheetNames[o-1]],p=(m||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,qr(s,i,dM(o-1,t,e,h)),a.sheets.push(i),Xn(t.wbrels,-1,"worksheets/sheet"+o+"."+r,sn.WS[0])}if(m){var v=m["!comments"],x=!1,E="";if(v&&v.length>0){var _=!1;v.forEach(function(B){B[1].forEach(function(T){T.T==!0&&(_=!0)})}),_&&(E="xl/threadedComments/threadedComment"+o+"."+r,qr(s,E,hle(v,d,t)),a.threadedcomments.push(E),Xn(h,-1,"../threadedComments/threadedComment"+o+"."+r,sn.TCMNT)),E="xl/comments"+o+"."+r,qr(s,E,eM(v)),a.comments.push(E),Xn(h,-1,"../comments"+o+"."+r,sn.CMNT),x=!0}m["!legacy"]&&x&&qr(s,"xl/drawings/vmlDrawing"+o+".vml",ZP(o,m["!comments"])),delete m["!comments"],delete m["!legacy"]}h["!id"].rId1&&qr(s,Xx(i),qm(h))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,qr(s,i,QP(t.Strings,t)),a.strs.push(i),Xn(t.wbrels,-1,"sharedStrings."+r,sn.SST)),i="xl/workbook."+r,qr(s,i,gM(e)),a.workbooks.push(i),Xn(t.rels,1,i,sn.WB),i="xl/theme/theme1.xml",qr(s,i,kB(e.Themes,t)),a.themes.push(i),Xn(t.wbrels,-1,"theme/theme1.xml",sn.THEME),i="xl/styles."+r,qr(s,i,WP(e,t)),a.styles.push(i),Xn(t.wbrels,-1,"styles."+r,sn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",qr(s,i,e.vbaraw),a.vba.push(i),Xn(t.wbrels,-1,"vbaProject.bin",sn.VBA)),i="xl/metadata."+r,qr(s,i,JP()),a.metadata.push(i),Xn(t.wbrels,-1,"metadata."+r,sn.XLMETA),d.length>1&&(i="xl/persons/person.xml",qr(s,i,ple(d)),a.people.push(i),Xn(t.wbrels,-1,"persons/person.xml",sn.PEOPLE)),qr(s,"[Content_Types].xml",hP(a,t)),qr(s,"_rels/.rels",qm(t.rels)),qr(s,"xl/_rels/workbook."+r+".rels",qm(t.wbrels)),delete t.revssf,delete t.ssf,s}function PB(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=vl(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function lhe(e,t){return hr.find(e,"EncryptedPackage")?ahe(e,t):wM(e,t)}function che(e,t){var r,n=e,a=t||{};return a.type||(a.type=Zr&&Buffer.isBuffer(e)?"buffer":"base64"),r=V7(n,a),nhe(r,a)}function kM(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return P4(e.slice(r),t);default:break e}return dp.to_workbook(e,t)}function uhe(e,t){var r="",n=PB(e,t);switch(t.type){case"base64":r=vl(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=a0(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=ia(r)),t.type="binary",kM(r,t)}function Ahe(e,t){var r=e;return t.type=="base64"&&(r=vl(r)),r=zx.utils.decode(1200,r.slice(2),"str"),t.type="binary",kM(r,t)}function dhe(e){return e.match(/[^\x00-\x7F]/)?Mu(e):e}function H5(e,t,r,n){return n?(r.type="string",dp.to_workbook(e,r)):dp.to_workbook(t,r)}function n1(e,t){aB();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return n1(new Uint8Array(e),(r=va(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Wm={},r.dateNF&&(Wm.dateNF=r.dateNF),r.type||(r.type=Zr&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=Zr?"buffer":"binary",n=ine(e),typeof Uint8Array<"u"&&!Zr&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=dhe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=va(r),r.type="array",n1(sB(n),r)}switch((a=PB(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return lhe(hr.read(n,r),r);break;case 9:if(a[1]<=8)return wM(n,r);break;case 60:return P4(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return gie(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return PP.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?che(n,r):H5(e,n,r,s);case 239:return a[3]===60?P4(n,r):H5(e,n,r,s);case 255:if(a[1]===254)return Ahe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return zh.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return zh.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return U4.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return KP.to_workbook(n,r);break;case 10:case 13:case 32:return uhe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return pie.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?U4.to_workbook(n,r):H5(e,n,r,s)}function TM(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return P1(t.file,hr.write(e,{type:Zr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return hr.write(e,t)}function fhe(e,t){var r=va(t||{}),n=she(e,r);return hhe(n,r)}function hhe(e,t){var r={},n=Zr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?hr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(Yy(a))}return t.password&&typeof encrypt_agile<"u"?TM(encrypt_agile(a,t.password),t):t.type==="file"?P1(t.file,a):t.type=="string"?ia(a):a}function mhe(e,t){var r=t||{},n=dfe(e,r);return TM(n,r)}function ju(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Gx(Mu(n));case"binary":return Mu(n);case"string":return e;case"file":return P1(t.file,n,"utf8");case"buffer":return Zr?cd(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):ju(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function phe(e,t){switch(t.type){case"base64":return Gx(e);case"binary":return e;case"string":return e;case"file":return P1(t.file,e,"binary");case"buffer":return Zr?cd(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function bb(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Gx(r):t.type=="string"?ia(r):r;case"file":return P1(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function IM(e,t){aB(),lde(e);var r=va(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=IM(e,r);return r.type="array",Yy(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return ju(sfe(e,r),r);case"slk":case"sylk":return ju(UP.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return ju(EM(e.Sheets[e.SheetNames[a]],r),r);case"txt":return phe(FM(e.Sheets[e.SheetNames[a]],r),r);case"csv":return ju(QB(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return ju(PP.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return bb(U4.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return ju(dp.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return ju(KP.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return ju(MP.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return ju(NM(e,r),r);case"wk1":return bb(zh.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return bb(zh.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),bb(yM(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),mhe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return fhe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function ghe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function MB(e,t,r){var n={};return n.type="file",n.file=t,ghe(n),IM(e,n)}function xhe(e,t,r,n,a,s,i,o){var c=fs(r),A=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),h=!0,m=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!i||e[r])for(var p=t.s.c;p<=t.e.c;++p){var v=i?e[r][p]:e[n[p]+c];if(v===void 0||v.t===void 0){if(A===void 0)continue;s[p]!=null&&(m[s[p]]=A);continue}var x=v.v;switch(v.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(s[p]!=null){if(x==null)if(v.t=="e"&&x===null)m[s[p]]=null;else if(A!==void 0)m[s[p]]=A;else if(d&&x===null)m[s[p]]=null;else continue;else m[s[p]]=d&&(v.t!=="n"||v.t==="n"&&o.rawNumbers!==!1)?x:rd(v,x,o);x!=null&&(h=!1)}}return{row:m,isempty:h}}function Rw(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},A=t||{},d=A.range!=null?A.range:e["!ref"];switch(A.header===1?n=1:A.header==="A"?n=2:Array.isArray(A.header)?n=3:A.header==null&&(n=0),typeof d){case"string":c=Sn(d);break;case"number":c=Sn(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var h=fs(c.s.r),m=[],p=[],v=0,x=0,E=Array.isArray(e),_=c.s.r,B=0,T={};E&&!e[_]&&(e[_]=[]);var I=A.skipHidden&&e["!cols"]||[],L=A.skipHidden&&e["!rows"]||[];for(B=c.s.c;B<=c.e.c;++B)if(!(I[B]||{}).hidden)switch(m[B]=Ia(B),r=E?e[_][B]:e[m[B]+h],n){case 1:s[B]=B-c.s.c;break;case 2:s[B]=m[B];break;case 3:s[B]=A.header[B-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=rd(r,null,A),x=T[i]||0,!x)T[i]=1;else{do o=i+"_"+x++;while(T[o]);T[i]=x,T[o]=1}s[B]=o}for(_=c.s.r+a;_<=c.e.r;++_)if(!(L[_]||{}).hidden){var k=xhe(e,c,_,m,n,s,E,A);(k.isempty===!1||(n===1?A.blankrows!==!1:A.blankrows))&&(p[v++]=k.row)}return p.length=v,p}var Pj=/"/g;function vhe(e,t,r,n,a,s,i,o){for(var c=!0,A=[],d="",h=fs(r),m=t.s.c;m<=t.e.c;++m)if(n[m]){var p=o.dense?(e[r]||[])[m]:e[n[m]+h];if(p==null)d="";else if(p.v!=null){c=!1,d=""+(o.rawNumbers&&p.t=="n"?p.v:rd(p,null,o));for(var v=0,x=0;v!==d.length;++v)if((x=d.charCodeAt(v))===a||x===s||x===34||o.forceQuotes){d='"'+d.replace(Pj,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(c=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(Pj,'""')+'"')):d="";A.push(d)}return o.blankrows===!1&&c?null:A.join(i)}function QB(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Sn(e["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),A=new RegExp((s=="|"?"\\|":s)+"+$"),d="",h=[];n.dense=Array.isArray(e);for(var m=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],v=a.s.c;v<=a.e.c;++v)(m[v]||{}).hidden||(h[v]=Ia(v));for(var x=0,E=a.s.r;E<=a.e.r;++E)(p[E]||{}).hidden||(d=vhe(e,a,E,h,i,c,s,n),d!=null&&(n.strip&&(d=d.replace(A,"")),(d||n.blankrows!==!1)&&r.push((x++?o:"")+d)));return delete n.dense,r.join("")}function FM(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=QB(e,t);return r}function bhe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Sn(e["!ref"]),s="",i=[],o,c=[],A=Array.isArray(e);for(o=a.s.c;o<=a.e.c;++o)i[o]=Ia(o);for(var d=a.s.r;d<=a.e.r;++d)for(s=fs(d),o=a.s.c;o<=a.e.c;++o)if(t=i[o]+s,r=A?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function jM(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},i=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?Fa(n.origin):n.origin;i=c.r,o=c.c}var A,d={s:{c:0,r:0},e:{c:o,r:i+t.length-1+a}};if(s["!ref"]){var h=Sn(s["!ref"]);d.e.c=Math.max(d.e.c,h.e.c),d.e.r=Math.max(d.e.r,h.e.r),i==-1&&(i=h.e.r+1,d.e.r=i+t.length-1+a)}else i==-1&&(i=0,d.e.r=t.length-1+a);var m=n.header||[],p=0;t.forEach(function(x,E){Xa(x).forEach(function(_){(p=m.indexOf(_))==-1&&(m[p=m.length]=_);var B=x[_],T="z",I="",L=kr({c:o+p,r:i+E+a});A=a1(s,L),B&&typeof B=="object"&&!(B instanceof Date)?s[L]=B:(typeof B=="number"?T="n":typeof B=="boolean"?T="b":typeof B=="string"?T="s":B instanceof Date?(T="d",n.cellDates||(T="n",B=Vs(B)),I=n.dateNF||Sr[14]):B===null&&n.nullError&&(T="e",B=0),A?(A.t=T,A.v=B,delete A.w,delete A.R,I&&(A.z=I)):s[L]=A={t:T,v:B},I&&(A.z=I))})}),d.e.c=Math.max(d.e.c,o+m.length-1);var v=fs(i);if(a)for(p=0;p<m.length;++p)s[Ia(p+o)+v]={t:"s",v:m[p]};return s["!ref"]=Qr(d),s}function whe(e,t){return jM(null,e,t)}function a1(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Fa(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?a1(e,kr(t)):a1(e,kr({r:t,c:r||0}))}function yhe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function HB(){return{SheetNames:[],Sheets:{}}}function VB(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=i+a)!=-1;++a);}if(pM(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function Ehe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=yhe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function Che(e,t){return e.z=t,e}function DM(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function _he(e,t,r){return DM(e,"#"+t,r)}function She(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function Nhe(e,t,r,n){for(var a=typeof t!="string"?t:Sn(t),s=typeof t=="string"?t:Qr(t),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var c=a1(e,i,o);c.t="n",c.F=s,delete c.v,i==a.s.r&&o==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var tc={encode_col:Ia,encode_row:fs,encode_cell:kr,encode_range:Qr,decode_col:gB,decode_row:pB,split_cell:Une,decode_cell:Fa,decode_range:Qo,format_cell:rd,sheet_add_aoa:oP,sheet_add_json:jM,sheet_add_dom:CM,aoa_to_sheet:Ip,json_to_sheet:whe,table_to_sheet:_M,table_to_book:Dfe,sheet_to_csv:QB,sheet_to_txt:FM,sheet_to_json:Rw,sheet_to_html:EM,sheet_to_formulae:bhe,sheet_to_row_object_array:Rw,sheet_get_cell:a1,book_new:HB,book_append_sheet:VB,book_set_sheet_visibility:Ehe,cell_set_number_format:Che,cell_set_hyperlink:DM,cell_set_internal_link:_he,cell_add_comment:She,sheet_set_array_formula:Nhe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Bhe=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const c of r)try{const A=Ft($r,c),d=await Ts(A),h=d.size;n+=h,s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:h});let m=0;d.docs.forEach(p=>{const v=p.data();v.createdAt&&new Date(v.createdAt)>=t&&m++}),a+=m}catch(A){console.warn(`Error accediendo a colección ${c}:`,A),s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:0})}const i=[];try{const c=Ft($r,"apiLogs"),A=new Date(e.getTime()-10080*60*1e3),d=nr(c,Mn("timestamp",">=",A.toISOString()),en("timestamp","desc")),h=await Ts(d),m={};h.docs.forEach(p=>{const v=p.data(),x=new Date(v.timestamp).toLocaleDateString("es-CL");m[x]=(m[x]||0)+1}),Object.entries(m).sort(([p],[v])=>new Date(p).getTime()-new Date(v).getTime()).forEach(([p,v])=>{i.push({label:p,value:v})})}catch(c){console.warn("Error calculando actividad diaria:",c)}const o=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:o,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((c,A)=>A.value-c.value),dailyActivity:i}}catch(e){return console.error("Error al obtener estadísticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},Mj=500,am=({title:e,value:t,description:r,alert:n})=>l.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),l.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),V5=({title:e,data:t,colorClass:r})=>{const n=Q.useMemo(()=>Math.max(...t.map(a=>a.value),1),[t]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),l.jsx("div",{className:"space-y-4",children:t.length>0?t.map(a=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),l.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},khe=()=>{const[e,t]=Q.useState([]),[r,n]=Q.useState(!0),[a,s]=Q.useState(null),[i,o]=Q.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});Q.useEffect(()=>{n(!0);const h=bee(v=>{t(v),n(!1)}),m=async()=>{try{const v=await Bhe();o(v)}catch(v){console.error("Error al cargar estadísticas de Firestore:",v)}};m();const p=setInterval(m,300*1e3);return()=>{h(),clearInterval(p)}},[]);const{stats:c,userStats:A,moduleStats:d}=Q.useMemo(()=>{const h=new Date,m=new Date(h.getFullYear(),h.getMonth(),h.getDate()).getTime(),p=m-h.getDay()*24*60*60*1e3,v=new Date(h.getFullYear(),h.getMonth(),1).getTime(),x={today:0,week:0,month:0},E={},_={};e.forEach(I=>{const L=new Date(I.timestamp).getTime();L>=m&&x.today++,L>=p&&x.week++,L>=v&&x.month++;const k=I.userEmail||"Desconocido";E[k]||(E[k]={email:k,today:0,month:0,total:0}),E[k].total++,L>=m&&E[k].today++,L>=v&&E[k].month++,_[I.module]=(_[I.module]||0)+1});const B=Object.values(E).sort((I,L)=>L.total-I.total),T=Object.entries(_).map(([I,L])=>({label:I,value:L})).sort((I,L)=>L.value-I.value);return{stats:x,userStats:B,moduleStats:T}},[e]);return l.jsxs("div",{className:"space-y-8",children:[a&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!r&&e.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsx(am,{title:"Llamadas Hoy",value:r?"--":c.today,description:`Límite recomendado: ${Mj}`,alert:c.today>Mj}),l.jsx(am,{title:"Llamadas esta Semana",value:r?"--":c.week}),l.jsx(am,{title:"Llamadas este Mes",value:r?"--":c.month})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[l.jsx(V5,{title:"Uso por Módulo",data:d,colorClass:"bg-sky-500"}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&A.length>0?A.map(h=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:h.email}),l.jsx("td",{className:"px-4 py-2 text-center text-sm",children:h.today}),l.jsx("td",{className:"px-4 py-2 text-center text-sm",children:h.month}),l.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:h.total})]},h.email)):l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsx(am,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),l.jsx(am,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),l.jsx(am,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[l.jsx(V5,{title:"Actividad por Colección",data:i.collectionsActivity,colorClass:"bg-green-500"}),l.jsx(V5,{title:"Actividad Diaria (Últimos 7 días)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const The="type.googleapis.com/google.protobuf.Int64Value",Ihe="type.googleapis.com/google.protobuf.UInt64Value";function RM(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function Lw(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>Lw(t));if(typeof e=="function"||typeof e=="object")return RM(e,t=>Lw(t));throw new Error("Data cannot be encoded in JSON: "+e)}function hp(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case The:case Ihe:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>hp(t)):typeof e=="function"||typeof e=="object"?RM(e,t=>hp(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zB="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oo extends qc{constructor(t,r,n){super(`${zB}/${t}`,r||""),this.details=n,Object.setPrototypeOf(this,Oo.prototype)}}function Fhe(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Ow(e,t){let r=Fhe(e),n=r,a;try{const s=t&&t.error;if(s){const i=s.status;if(typeof i=="string"){if(!Qj[i])return new Oo("internal","internal");r=Qj[i],n=i}const o=s.message;typeof o=="string"&&(n=o),a=s.details,a!==void 0&&(a=hp(a))}}catch{}return r==="ok"?null:new Oo(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jhe{constructor(t,r,n,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,dl(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||a==null||a.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4="us-central1",Dhe=/^data: (.*?)(?:\n|$)/;function Rhe(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new Oo("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class Lhe{constructor(t,r,n,a,s=H4,i=(...o)=>fetch(...o)){this.app=t,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new jhe(t,r,n,a),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=H4}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function Ohe(e,t,r){const n=id(t);e.emulatorOrigin=`http${n?"s":""}://${t}:${r}`,n&&(my(e.emulatorOrigin),py("Functions",!0))}function Uhe(e,t,r){const n=a=>Mhe(e,t,a,{});return n.stream=(a,s)=>Hhe(e,t,a,s),n}async function Phe(e,t,r,n){r["Content-Type"]="application/json";let a;try{a=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function LM(e,t){const r={},n=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function Mhe(e,t,r,n){const a=e._url(t);return Qhe(e,a,r,n)}async function Qhe(e,t,r,n){r=Lw(r);const a={data:r},s=await LM(e,n),i=n.timeout||7e4,o=Rhe(i),c=await Promise.race([Phe(t,a,s,e.fetchImpl),o.promise,e.cancelAllRequests]);if(o.cancel(),!c)throw new Oo("cancelled","Firebase Functions instance was deleted.");const A=Ow(c.status,c.json);if(A)throw A;if(!c.json)throw new Oo("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new Oo("internal","Response is missing data field.");return{data:hp(d)}}function Hhe(e,t,r,n){const a=e._url(t);return Vhe(e,a,r,n||{})}async function Vhe(e,t,r,n){var m;r=Lw(r);const a={data:r},s=await LM(e,n);s["Content-Type"]="application/json",s.Accept="text/event-stream";let i;try{i=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:s,signal:n==null?void 0:n.signal})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const x=new Oo("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const v=Ow(0,null);return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}let o,c;const A=new Promise((p,v)=>{o=p,c=v});(m=n==null?void 0:n.signal)==null||m.addEventListener("abort",()=>{const p=new Oo("cancelled","Request was cancelled.");c(p)});const d=i.body.getReader(),h=zhe(d,o,c,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const p=h.getReader();return{async next(){const{value:v,done:x}=await p.read();return{value:v,done:x}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:A}}function zhe(e,t,r,n){const a=(i,o)=>{const c=i.match(Dhe);if(!c)return;const A=c[1];try{const d=JSON.parse(A);if("result"in d){t(hp(d.result));return}if("message"in d){o.enqueue(hp(d.message));return}if("error"in d){const h=Ow(0,d);o.error(h),r(h);return}}catch(d){if(d instanceof Oo){o.error(d),r(d);return}}},s=new TextDecoder;return new ReadableStream({start(i){let o="";return c();async function c(){if(n!=null&&n.aborted){const A=new Oo("cancelled","Request was cancelled");return i.error(A),r(A),Promise.resolve()}try{const{value:A,done:d}=await e.read();if(d){o.trim()&&a(o.trim(),i),i.close();return}if(n!=null&&n.aborted){const m=new Oo("cancelled","Request was cancelled");i.error(m),r(m),await e.cancel();return}o+=s.decode(A,{stream:!0});const h=o.split(`
`);o=h.pop()||"";for(const m of h)m.trim()&&a(m.trim(),i);return c()}catch(A){const d=A instanceof Oo?A:Ow(0,null);i.error(d),r(d)}}},cancel(){return e.cancel()}})}const Hj="@firebase/functions",Vj="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ghe="auth-internal",Khe="app-check-internal",qhe="messaging-internal";function $he(e){const t=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(Ghe),i=r.getProvider(qhe),o=r.getProvider(Khe);return new Lhe(a,s,i,o,n)};jf(new XA(zB,t,"PUBLIC").setMultipleInstances(!0)),sc(Hj,Vj,e),sc(Hj,Vj,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(e=gy(),t=H4){const n=b1(oa(e),zB).getImmediate({identifier:t}),a=KS("functions");return a&&Whe(n,...a),n}function Whe(e,t,r){Ohe(oa(e),t,r)}function tf(e,t,r){return Uhe(oa(e),t)}$he();const zj=Ft($r,"usuarios");async function OM(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",zj);const e=await Ts(zj);if(console.log(`📊 [DEBUG] Encontrados ${e.docs.length} documentos en la colección usuarios`),e.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const t=e.docs.map(r=>{const n=r.data();return console.log("👤 [DEBUG] Usuario encontrado:",{id:r.id,...n}),{id:r.id,...n}});return console.log("✅ [DEBUG] Usuarios procesados correctamente:",t.length),console.log("✅ [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error("❌ [DEBUG] Error al obtener usuarios:",e),console.error("❌ [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const Gj=Object.values(Gt),z5=e=>e?e.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",Xhe=()=>{const[e,t]=Q.useState([]),[r,n]=Q.useState(!1),[a,s]=Q.useState("Usuarios"),[i,o]=Q.useState({nombreCompleto:"",email:"",rut:"",profile:Gt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[c,A]=Q.useState(null),[d,h]=Q.useState(""),[m,p]=Q.useState(""),[v,x]=Q.useState(""),[E,_]=Q.useState(null),[B,T]=Q.useState(null),[I,L]=Q.useState(null),k=Q.useCallback(async()=>{n(!0);try{const G=await OM();t(G)}catch(G){console.error("Error al cargar usuarios",G),_("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);Q.useEffect(()=>{k()},[k]);const w=Q.useCallback(G=>{const{name:q,value:z}=G.target;o(Z=>({...Z,[q]:z,curso:q==="profile"&&z!==Gt.ESTUDIANTE?"":Z.curso,cursos:q==="profile"&&z!==Gt.PROFESORADO?[]:Z.cursos,asignaturas:q==="profile"&&z!==Gt.PROFESORADO?[]:Z.asignaturas}))},[]),y=Q.useCallback((G,q)=>{o(z=>{const Z=z[G]||[],R=Z.includes(q)?Z.filter(K=>K!==q):[...Z,q];return{...z,[G]:R}})},[]),N=Q.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:Gt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),A(null),_(null)},[]),U=Q.useCallback(async G=>{G.preventDefault(),_(null);const{nombreCompleto:q,email:z,profile:Z,curso:R,password:K}=i;if(!q.trim()||!z.trim()){_("Nombre Completo y Email son obligatorios.");return}if(Z===Gt.ESTUDIANTE&&!R){_('El campo "Curso" es obligatorio para Estudiantes.');return}if(!c&&!(K!=null&&K.trim())){_("La contraseña es obligatoria al crear un nuevo usuario.");return}const X=Th();try{if(c){const re=tf(X,"updateUser"),ne={...i,password:(K==null?void 0:K.trim())||void 0,curso:Z===Gt.ESTUDIANTE?z5(R||""):void 0};await re(ne)}else{const re=tf(X,"createUser"),ne={...i,curso:Z===Gt.ESTUDIANTE?z5(R||""):void 0};await re(ne)}await k(),N()}catch(re){console.error("Error al guardar usuario:",re),_(re.message||"Error al guardar el usuario.")}},[i,c,k,N]),j=Q.useCallback(G=>{A(G.email),o({nombreCompleto:G.nombreCompleto,email:G.email,rut:G.rut||"",profile:G.profile,password:"",curso:G.curso||"",cursos:G.cursos||[],asignaturas:G.asignaturas||[]}),setTimeout(()=>{const q=document.querySelector("form");q&&q.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),F=Q.useCallback(async G=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${G}? Esta acción es irreversible.`))try{const q=Th();await tf(q,"deleteUser")({email:G}),await k()}catch(q){console.error("Error al eliminar usuario:",q),_(q.message||"No se pudo borrar el usuario.")}},[k]),P=async G=>{var K;const q=(K=G.target.files)==null?void 0:K[0];if(!q)return;T({message:"Procesando archivo...",isError:!1});const z=Th(),Z=tf(z,"createUser"),R=new FileReader;R.onload=async X=>{var re;try{const ne=new Uint8Array((re=X.target)==null?void 0:re.result),ue=n1(ne,{type:"array"}),fe=ue.Sheets[ue.SheetNames[0]],be=tc.sheet_to_json(fe);if(be.length===0){T({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const Ce=be.map(Te=>{const we=Te.Nombre||Te.nombre,Fe=Te.Correo||Te.correo||Te.Email||Te.email,He=Te.Curso||Te.curso,Xe=Te.RUT||Te.rut;return!we||!Fe||!He?Promise.resolve({email:Fe||"Sin email",error:"Datos incompletos"}):Z({nombreCompleto:String(we).trim(),email:String(Fe).trim(),profile:Gt.ESTUDIANTE,curso:z5(String(He).trim()),rut:Xe?String(Xe).trim():"",password:"recoleta"}).catch(ut=>({email:Fe,error:ut.message}))}),me=await Promise.all(Ce),oe=me.filter(Te=>!Te.error).length,Le=me.filter(Te=>Te.error);let Ye=`Carga completada. ${oe} estudiantes agregados.`;Le.length>0&&(Ye+=` ${Le.length} fallaron.`,console.error("Errores en carga masiva:",Le)),T({message:Ye,isError:Le.length>0}),await k()}catch(ne){T({message:`Error: ${ne.message}`,isError:!0})}},R.readAsArrayBuffer(q),G.target.value=""},M=async G=>{var K;const q=(K=G.target.files)==null?void 0:K[0];if(!q)return;L({message:"Procesando archivo...",isError:!1});const z=Th(),Z=tf(z,"createUser"),R=new FileReader;R.onload=async X=>{var re;try{const ne=new Uint8Array((re=X.target)==null?void 0:re.result),ue=n1(ne,{type:"array"}),fe=ue.Sheets[ue.SheetNames[0]],be=tc.sheet_to_json(fe);if(be.length===0){L({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const Ce=be.map(Te=>{const we=Te.Nombre||Te.nombre,Fe=Te.Correo||Te.correo||Te.Email||Te.email,He=Te.Perfil||Te.perfil||Te.Profile||Te.profile,Xe=Te.RUT||Te.rut;return!we||!Fe||!He?Promise.resolve({email:Fe||"Sin email",error:"Datos incompletos"}):Z({nombreCompleto:String(we).trim(),email:String(Fe).trim(),profile:He,rut:Xe?String(Xe).trim():"",password:"recoleta"}).catch(ut=>({email:Fe,error:ut.message}))}),me=await Promise.all(Ce),oe=me.filter(Te=>!Te.error).length,Le=me.filter(Te=>Te.error);let Ye=`Carga completada. ${oe} usuarios agregados.`;Le.length>0&&(Ye+=` ${Le.length} fallaron.`,console.error("Errores en carga masiva:",Le)),L({message:Ye,isError:Le.length>0}),await k()}catch(ne){L({message:`Error: ${ne.message}`,isError:!0})}},R.readAsArrayBuffer(q),G.target.value=""},ee="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",W=Q.useMemo(()=>Array.from(new Set(e.filter(G=>G.profile===Gt.ESTUDIANTE&&G.curso).map(G=>G.curso))).sort(),[e]),te=Q.useMemo(()=>e.filter(G=>(d===""||G.nombreCompleto.toLowerCase().includes(d.toLowerCase())||G.email.toLowerCase().includes(d.toLowerCase()))&&(m===""||G.profile===m)&&(v===""||G.curso===v)),[e,d,m,v]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),l.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),l.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:P,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),B&&l.jsx("p",{className:`text-sm mt-2 ${B.isError?"text-red-600":"text-green-600"}`,children:B.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),l.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:M,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),I&&l.jsx("p",{className:`text-sm mt-2 ${I.isError?"text-red-600":"text-green-600"}`,children:I.message})]})]})]}),l.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:c?"Editando usuario":"Agregar nuevo usuario"}),l.jsxs("form",{onSubmit:U,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),l.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:w,className:ee,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),l.jsx("input",{type:"email",name:"email",value:i.email,onChange:w,className:ee,required:!0,readOnly:!!c})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),l.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:w,placeholder:c?"Dejar en blanco para no cambiar":"Contraseña temporal",className:ee})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),l.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:w,placeholder:"12.345.678-9",className:ee})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),l.jsx("select",{name:"profile",value:i.profile,onChange:w,className:ee,required:!0,children:Gj.map(G=>l.jsx("option",{value:G,children:G},G))})]}),i.profile===Gt.ESTUDIANTE&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsxs("select",{name:"curso",value:i.curso,onChange:w,className:ee,required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),qa.map(G=>l.jsx("option",{value:G,children:G},G))]})]})]}),i.profile===Gt.PROFESORADO&&l.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[l.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[l.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:qa.map(G=>{var q;return l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[l.jsx("input",{type:"checkbox",checked:((q=i.cursos)==null?void 0:q.includes(G))||!1,onChange:()=>y("cursos",G),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:G})]},G)})})]}),i.profile===Gt.PROFESORADO&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[l.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[l.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:yi.map(G=>{var q;return l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[l.jsx("input",{type:"checkbox",checked:((q=i.asignaturas)==null?void 0:q.includes(G))||!1,onChange:()=>y("asignaturas",G),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:G})]},G)})})]}),E&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:E}),l.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[c&&l.jsx("button",{type:"button",onClick:N,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const G=Th(),z=await tf(G,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",z),_("✅ Custom claim agregado exitosamente")}catch(G){console.error("❌ Error al agregar custom claim:",G),_(`Error: ${G.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),l.jsx("button",{type:"button",onClick:async()=>{var G,q,z,Z,R;try{const{auth:K}=await xw(async()=>{const{auth:ne}=await Promise.resolve().then(()=>cJ);return{auth:ne}},void 0);console.log("🔍 Usuario actual:",(G=K.currentUser)==null?void 0:G.email);const X=await((q=K.currentUser)==null?void 0:q.getIdToken(!0));console.log("🔑 Token refreshed:",!!X);const re=await((z=K.currentUser)==null?void 0:z.getIdTokenResult());console.log("📋 Claims completos:",re==null?void 0:re.claims),console.log("👤 Profile claim:",(Z=re==null?void 0:re.claims)==null?void 0:Z.profile),((R=re==null?void 0:re.claims)==null?void 0:R.profile)==="SUBDIRECCION"?_("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):_(`❌ Custom claim faltante. Claims: ${JSON.stringify(re==null?void 0:re.claims)}`)}catch(K){console.error("❌ Error verificando token:",K),_(`Error verificando token: ${K.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:c?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[l.jsx("div",{children:l.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:G=>h(G.target.value),className:ee})}),l.jsx("div",{children:l.jsxs("select",{value:m,onChange:G=>p(G.target.value),className:ee,children:[l.jsx("option",{value:"",children:"Todos los perfiles"}),Gj.map(G=>l.jsx("option",{value:G,children:G},G))]})}),l.jsx("div",{children:l.jsxs("select",{value:v,onChange:G=>x(G.target.value),className:ee,children:[l.jsx("option",{value:"",children:"Todos los cursos"}),W.map(G=>l.jsx("option",{value:G,children:G},G))]})})]}),r?l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:te.map(G=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:G.nombreCompleto}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:G.email}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:l.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${G.profile===Gt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":G.profile===Gt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:G.profile})}),l.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[G.profile===Gt.ESTUDIANTE&&l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:G.curso||"Sin curso"}),G.profile===Gt.PROFESORADO&&l.jsxs("div",{className:"space-y-1",children:[G.cursos&&G.cursos.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),l.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[G.cursos.slice(0,3).map(q=>l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:q},q)),G.cursos.length>3&&l.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",G.cursos.length-3]})]})]}),G.asignaturas&&G.asignaturas.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),l.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[G.asignaturas.slice(0,2).map(q=>l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:q},q)),G.asignaturas.length>2&&l.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",G.asignaturas.length-2]})]})]}),(!G.cursos||G.cursos.length===0)&&(!G.asignaturas||G.asignaturas.length===0)&&l.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),G.profile!==Gt.ESTUDIANTE&&G.profile!==Gt.PROFESORADO&&l.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[l.jsx("button",{onClick:()=>j(G),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),l.jsx("button",{onClick:()=>F(G.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},G.email))})]}),te.length===0&&l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&l.jsx(khe,{})]})},mp="seguimiento_dual_records",Yhe=e=>{const t=e.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},Jhe=e=>{const t=nr(Ft(kt,mp),en("nombreEstudiante","asc"));return br(t,n=>{const a=n.docs.map(s=>Yhe(s));e(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),e([])})},Uw=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{t[n]&&typeof t[n]=="string"&&(t[n]=Ar.fromDate(new Date(t[n]+"T00:00:00")))}),t},Zhe=async e=>{try{const t=Uw(e);return(await ha(Ft(kt,mp),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},Kj=async(e,t)=>{try{const r=vr(kt,mp,e),n=Uw(t);await no(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},e0e=async e=>{try{const t=vr(kt,mp,e);await zs(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},t0e=async e=>{const t=zN(kt),r=Ft(kt,mp);let n=0,a=0;for(const s of e){const i=nr(r,Mn("rutEstudiante","==",s.rutEstudiante)),o=await Ts(i);if(o.empty){const c=vr(r);t.set(c,Uw(s)),a++}else{const c=o.docs[0].id,A=vr(kt,mp,c);t.set(A,Uw(s),{merge:!0}),n++}}return await t.commit(),{updated:n,created:a}},r0e={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},n0e=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},a0e=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},s0e=({record:e,onSave:t,onClose:r})=>{const[n,a]=Q.useState(e),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=c=>{const{name:A,value:d,type:h,checked:m}=c.target;a(p=>({...p,[A]:h==="checkbox"?m:d}))},o=()=>{t(n)};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),l.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),l.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),l.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),l.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),l.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),l.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),l.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:i,className:s+" mt-1"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),l.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:i,className:s+" mt-1"})]})]})]})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),l.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},i0e=()=>{const[e,t]=Q.useState([]),[r,n]=Q.useState(!0),a=Q.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:Mh[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:h5[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,i]=Q.useState(a),[o,c]=Q.useState(null),[A,d]=Q.useState(""),[h,m]=Q.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[p,v]=Q.useState(null),[x,E]=Q.useState(null),[_,B]=Q.useState(!1),[T,I]=Q.useState(null);Q.useEffect(()=>{n(!0);const G=Jhe(q=>{t(q),n(!1)});return()=>G()},[]);const L=Q.useCallback(G=>{const{name:q,value:z}=G.target;i(Z=>({...Z,[q]:z}))},[]),k=Q.useCallback(G=>{const{name:q,value:z}=G.target;m(Z=>({...Z,[q]:z}))},[]),w=Q.useCallback(()=>{i(a),c(null),v(null)},[a]),y=async G=>{G.preventDefault(),v(null);const z=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(Z=>{var R;return!((R=s[Z])!=null&&R.trim())});if(z){v(`El campo '${z}' es obligatorio.`);return}try{o?await Kj(o,s):await Zhe(s),w()}catch(Z){console.error(Z),v("No se pudo guardar el registro.")}},N=Q.useCallback(G=>{window.scrollTo({top:0,behavior:"smooth"}),c(G.id),i(G)},[]),U=async G=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await e0e(G)}catch(q){console.error(q),v("No se pudo eliminar el registro.")}},j=G=>{I(G),B(!0)},F=()=>{I(null),B(!1)},P=async G=>{try{await Kj(G.id,G),F()}catch(q){console.error(q),alert("No se pudieron guardar los cambios de supervisión.")}},M=()=>{const G=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],q=tc.aoa_to_sheet([G]),z=tc.book_new();tc.book_append_sheet(z,q,"Plantilla"),MB(z,"Plantilla_Seguimiento_Dual.xlsx")},ee=G=>{var Z;const q=(Z=G.target.files)==null?void 0:Z[0];if(!q)return;E({message:"Procesando archivo...",isError:!1});const z=new FileReader;z.onload=async R=>{var K;try{const X=new Uint8Array((K=R.target)==null?void 0:K.result),re=n1(X,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),ne=re.SheetNames[0],ue=re.Sheets[ne],fe=tc.sheet_to_json(ue,{raw:!1,dateNF:"yyyy-mm-dd"});if(fe.length===0)throw new Error("El archivo está vacío.");const be={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},Ce=Object.keys(fe[0]).map(Ye=>Ye.trim().toLowerCase()),oe=["nombre","rut","curso 2025","empresa","estado"].find(Ye=>!Ce.includes(Ye));if(oe)throw new Error(`Falta la columna requerida: '${oe}'`);const Le=fe.map((Ye,Te)=>{try{const we={};for(const Fe in Ye){const He=be[Fe.trim().toLowerCase()];if(He){let Xe=Ye[Fe];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(He)?(Xe=n0e(Xe),Xe&&(we[He]=Xe)):He.includes("realizada")?we[He]=a0e(Xe):Xe!=null&&Xe!==""&&(we[He]=String(Xe).trim())}}return!we.nombreEstudiante||!we.rutEstudiante?(console.warn(`Fila ${Te+2}: Faltan campos requeridos`),null):we}catch(we){return console.error(`Error procesando fila ${Te+2}:`,we),null}}).filter(Ye=>Ye!==null);if(console.log("Registros procesados:",Le),Le.length>0){const{updated:Ye,created:Te}=await t0e(Le);E({message:`Carga exitosa. ${Te} registros creados, ${Ye} actualizados.`,isError:!1})}else E({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(X){console.error("Error completo:",X),E({message:`Error al procesar el archivo: ${X.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},z.readAsArrayBuffer(q)},W="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",te=Q.useMemo(()=>e.filter(G=>(A===""||G.nombreEstudiante.toLowerCase().includes(A.toLowerCase())||G.nombreEmpresa.toLowerCase().includes(A.toLowerCase())||G.rutEstudiante.includes(A))&&(h.curso===""||G.curso===h.curso)&&(h.empresa===""||G.nombreEmpresa===h.empresa)&&(h.estado===""||G.estado===h.estado)&&(h.comuna===""||G.comuna===h.comuna)&&(h.profesor===""||G.profesorTutorEmpresa===h.profesor)).sort((G,q)=>G.nombreEstudiante.localeCompare(q.nombreEstudiante)),[e,A,h]);return Q.useMemo(()=>{const G=new Set,q=new Set;return e.forEach(z=>{z.nombreEmpresa&&G.add(z.nombreEmpresa),z.comuna&&q.add(z.comuna)}),{empresas:Array.from(G).sort(),comunas:Array.from(q).sort()}},[e]),r?l.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:o?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),l.jsxs("form",{onSubmit:y,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),l.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:L,className:W,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),l.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:L,className:W,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsx("select",{name:"curso",value:s.curso,onChange:L,className:W,required:!0,children:Mh.map(G=>l.jsx("option",{value:G,children:G},G))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),l.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:L,className:W,children:[l.jsx("option",{value:"",children:"Seleccione un profesor"}),h4.map(G=>l.jsx("option",{value:G,children:G},G))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),l.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:L,className:W,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),l.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:L,className:W})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),l.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:L,className:W})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),l.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:L,className:W})]}),l.jsxs("div",{className:"lg:col-span-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),l.jsx("select",{name:"estado",value:s.estado,onChange:L,className:W,children:h5.map(G=>l.jsx("option",{value:G,children:G},G))})]})]}),s.estado==="Desvinculado"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),l.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:L,className:`${W} border-red-300`})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),l.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:L,className:`${W} border-red-300`})]})]}),p&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:p}),l.jsxs("div",{className:"flex justify-end items-center gap-4",children:[o&&l.jsx("button",{type:"button",onClick:w,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:o?"Actualizar":"Agregar"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[l.jsx("button",{onClick:M,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),l.jsx("input",{type:"file",onChange:ee,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),x&&l.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${x.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.message})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[l.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:A,onChange:G=>d(G.target.value),className:`${W} md:col-span-2 lg:col-span-1`}),l.jsxs("select",{name:"curso",value:h.curso,onChange:k,className:W,children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),Mh.map(G=>l.jsx("option",{children:G},G))]}),l.jsxs("select",{name:"estado",value:h.estado,onChange:k,className:W,children:[l.jsx("option",{value:"",children:"Todos los Estados"}),h5.map(G=>l.jsx("option",{children:G},G))]}),l.jsxs("select",{name:"profesor",value:h.profesor,onChange:k,className:W,children:[l.jsx("option",{value:"",children:"Todos los Profesores"}),h4.map(G=>l.jsx("option",{children:G},G))]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:te.map(G=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[l.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:G.nombreEstudiante}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:G.curso})]}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:G.nombreEmpresa}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:G.profesorTutorEmpresa}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${r0e[G.estado]}`,children:G.estado})}),l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[l.jsx("button",{onClick:()=>j(G),className:"text-blue-600 hover:underline",children:"Supervisión"}),l.jsx("button",{onClick:()=>N(G),className:"text-yellow-600 hover:underline",children:"Editar"}),l.jsx("button",{onClick:()=>U(G.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},G.id))})]})})]}),_&&T&&l.jsx(s0e,{record:T,onClose:F,onSave:P})]})},UM="actividades_remotas",o0e="respuestas_actividades",l0e="pruebas_estandarizadas",c0e="usuarios",GB=e=>{var r,n,a,s,i,o;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,plazoEntrega:((s=(a=t.plazoEntrega)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.plazoEntrega,fechaCompletado:((o=(i=t.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||t.fechaCompletado}},u0e=e=>{const t=nr(Ft(kt,UM),en("fechaCreacion","desc"));return br(t,n=>{const a=n.docs.map(s=>GB(s));e(a)},n=>{console.error("Error al suscribirse a las actividades:",n),e([])})},A0e=async e=>{try{const t={...e,fechaCreacion:Ar.fromDate(new Date),plazoEntrega:Ar.fromDate(new Date(e.plazoEntrega+"T00:00:00"))};return(await ha(Ft(kt,UM),t)).id}catch(t){throw console.error("Error al crear la actividad:",t),new Error("No se pudo crear la actividad.")}},d0e=async e=>{try{const t={...e,fechaCreacion:Ar.fromDate(new Date),plazoEntrega:Ar.fromDate(new Date(e.plazoEntrega+"T00:00:00"))};return(await ha(Ft(kt,l0e),t)).id}catch(t){throw console.error("Error al crear la prueba estandarizada:",t),new Error("No se pudo crear la prueba estandarizada.")}},f0e=e=>{const t=nr(Ft(kt,o0e));return br(t,n=>{const a=n.docs.map(s=>GB(s));e(a)},n=>{console.error("Error al suscribirse a las respuestas:",n),e([])})},h0e=e=>{const t=nr(Ft(kt,c0e));return br(t,n=>{const a=n.docs.map(s=>GB(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},G5={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3]},wb=["Localizar información","Interpretar y relacionar","Reflexionar","Extraer información explícita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],m0e=e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(n.result),n.onerror=a=>r(a)}),p0e=()=>{const[e,t]=Q.useState([]),[r,n]=Q.useState([]),[a,s]=Q.useState([]),[i,o]=Q.useState([]),[c,A]=Q.useState(null),[d,h]=Q.useState(null),[m,p]=Q.useState(!1),[v,x]=Q.useState(!1),[E,_]=Q.useState(!1),[B,T]=Q.useState(!0),[I,L]=Q.useState(null),[k,w]=Q.useState(""),[y,N]=Q.useState(null),[U,j]=Q.useState(null),[F,P]=Q.useState([]),[M,ee]=Q.useState("actividades"),W={asignatura:yi[0],nivel:km[0],contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},te={asignatura:yi[0],nivel:km[0],contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[G,q]=Q.useState(W),[z,Z]=Q.useState(te);Q.useEffect(()=>{T(!0);const De=u0e(t),Oe=f0e(s),ke=h0e(We=>{o(We),T(!1)});return()=>{De(),Oe(),ke()}},[]);const R=De=>{q(Oe=>({...Oe,[De.target.name]:De.target.value}))},K=De=>{Z(Oe=>({...Oe,[De.target.name]:De.target.value}))},X=De=>{q(Oe=>({...Oe,recursos:{...Oe.recursos,[De.target.name]:De.target.value}}))},re=De=>{De.target.files&&P(Array.from(De.target.files))},ne=De=>{q(Oe=>{const ke=Oe.tipos.includes(De)?Oe.tipos.filter(ft=>ft!==De):[...Oe.tipos,De],We={...Oe.cantidadPreguntas};return ke.includes(De)?We[De]||(We[De]=G5[De][0]):delete We[De],{...Oe,tipos:ke,cantidadPreguntas:We}})},ue=(De,Oe)=>{q(ke=>({...ke,cantidadPreguntas:{...ke.cantidadPreguntas,[De]:Oe}}))},fe=(De,Oe=!1)=>{Oe?Z(ke=>{var ft;const We=(ft=ke.cursosDestino)!=null&&ft.includes(De)?ke.cursosDestino.filter($t=>$t!==De):[...ke.cursosDestino||[],De];return{...ke,cursosDestino:We}}):q(ke=>{var ft;const We=(ft=ke.cursosDestino)!=null&&ft.includes(De)?ke.cursosDestino.filter($t=>$t!==De):[...ke.cursosDestino||[],De];return{...ke,cursosDestino:We}})},be=(De,Oe=!1)=>{Oe?Z(ke=>{var ft;const We=(ft=ke.estudiantesDestino)!=null&&ft.includes(De)?ke.estudiantesDestino.filter($t=>$t!==De):[...ke.estudiantesDestino||[],De];return{...ke,estudiantesDestino:We}}):q(ke=>{var ft;const We=(ft=ke.estudiantesDestino)!=null&&ft.includes(De)?ke.estudiantesDestino.filter($t=>$t!==De):[...ke.estudiantesDestino||[],De];return{...ke,estudiantesDestino:We}})},Ce=()=>{const{tipos:De,contenido:Oe,asignatura:ke,nivel:We,cantidadPreguntas:ft}=G;let $t=`Eres un experto diseñador de actividades pedagógicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${Oe}"
Asignatura: ${ke}
Nivel: ${We}

Genera los siguientes elementos:
- **introduccion**: Una breve introducción motivadora para el estudiante sobre el tema: "${Oe}".
- **actividades**: Un objeto que contiene las actividades. Cada actividad es una propiedad con su nombre como clave:
`;return De.forEach(zt=>{const tr=ft[zt]||G5[zt][0];switch(zt){case"Quiz":$t+=`- **Quiz**: Un array de ${tr} objetos. Cada objeto debe tener: "pregunta" (string), "opciones" (array de 4 strings) y "respuestaCorrecta" (string).
`;break;case"Comprensión de Lectura":$t+=`- **Comprensión de Lectura**: Un array de ${tr} objetos. Cada objeto debe tener "texto" (string de 150-200 palabras) y "preguntas" (un array de 4 objetos, cada uno con "pregunta", "opciones" y "respuestaCorrecta").
`;break;case"Términos Pareados":$t+=`- **Términos Pareados**: Un array de ${tr} objetos. Cada objeto debe tener "concepto" (string) y "definicion" (string).
`;break;case"Desarrollo":$t+=`- **Desarrollo**: Un array de ${tr} objetos. Cada objeto debe tener una clave "pregunta" (string con la pregunta) y una clave "rubrica" (string con la rúbrica de evaluación).
`;break}}),$t},me=()=>{const{contenido:De,objetivosAprendizaje:Oe,asignatura:ke,nivel:We}=z;return`Eres un experto en evaluación educativa y diseño de pruebas SIMCE. 

IMPORTANTE: Responde ÚNICAMENTE con un objeto JSON válido, sin comentarios, sin texto adicional, sin explicaciones.

INFORMACIÓN DE LA PRUEBA:
- Asignatura: ${ke}
- Nivel: ${We}
- Contenido: ${De}
- Objetivos: ${Oe}

RESPONDE SOLO CON ESTE JSON (sin comentarios, sin texto extra):
{
  "titulo": "Título descriptivo de la prueba",
  "instrucciones": "Instrucciones claras para el estudiante",
  "textos": [
    {
      "id": 1,
      "titulo": "Título del texto",
      "contenido": "Texto completo de 200-300 palabras",
      "tipo": "narrativo",
      "palabras": 250
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Texto de la pregunta",
      "opciones": ["Opción A completa", "Opción B completa", "Opción C completa", "Opción D completa"],
      "respuestaCorrecta": "A",
      "habilidad": "Localizar información",
      "justificacion": "Explicación breve de por qué es correcta",
      "textoId": 1
    }
  ]
}

REGLAS OBLIGATORIAS:
- ${ke==="Lenguaje y Comunicación"||ke==="Lengua y Literatura"?"3-4 textos de lectura de diferentes tipos":"2-3 textos informativos"}
- Exactamente 30 preguntas numeradas del 1 al 30
- Cada pregunta con exactamente 4 opciones completas y específicas
- Respuesta correcta: solo "A", "B", "C" o "D"
- Habilidades: ${wb.join(", ")}
- Para preguntas basadas en textos: incluir "textoId"
- Sin comentarios en el JSON
- Texto tipo debe ser: "narrativo", "informativo", "argumentativo" o "poetico"

JSON válido sin comentarios:`};function oe(De,Oe){if(De==="Desarrollo"){if(Array.isArray(Oe))return Oe.map(ke=>{if(typeof ke=="string"){const We=ke.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return We?{pregunta:We[1].trim(),rubrica:We[2].trim()}:{pregunta:ke.trim(),rubrica:""}}return ke&&typeof ke=="object"?{pregunta:ke.pregunta||ke.Pregunta||ke.texto||"",rubrica:ke.rubrica||ke.Rubrica||ke.rúbrica||ke.Rúbrica||""}:{pregunta:String(ke),rubrica:""}});if(typeof Oe=="string")return Oe.split(/\n\n|\n- |\d+\. /).map(ke=>{const We=ke.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return We?{pregunta:We[1].trim(),rubrica:We[2].trim()}:{pregunta:ke.trim(),rubrica:""}}).filter(ke=>ke.pregunta)}if(De==="Términos Pareados"){if(Array.isArray(Oe))return Oe.map((ke,We)=>{if(typeof ke=="string"){const ft=ke.match(/^(.+?)[\s:-–]+(.+)$/);return ft?{id:We,concepto:ft[1].trim(),definicion:ft[2].trim()}:{id:We,concepto:ke.trim(),definicion:""}}return ke&&typeof ke=="object"?{id:We,concepto:ke.concepto||ke.termino||"",definicion:ke.definicion||ke.significado||""}:{id:We,concepto:String(ke),definicion:""}});if(typeof Oe=="object"&&Oe!==null)return Object.entries(Oe).map(([ke,We],ft)=>({id:ft,concepto:ke,definicion:We}));if(typeof Oe=="string")return Oe.split(/\n|;/).map((ke,We)=>{const ft=ke.match(/^(.+?)[\s:-–]+(.+)$/);return ft?{id:We,concepto:ft[1].trim(),definicion:ft[2].trim()}:{id:We,concepto:ke.trim(),definicion:""}}).filter(ke=>ke.concepto)}if(De==="Comprensión de Lectura"){if(Oe&&typeof Oe=="object"&&Array.isArray(Oe.preguntas))return{texto:Oe.texto||"",preguntas:Oe.preguntas.map(ke=>({pregunta:ke.pregunta||ke.Pregunta||"",opciones:ke.opciones||ke.Opciones||[],respuestaCorrecta:ke.respuestaCorrecta||ke.respuesta||""}))};if(Array.isArray(Oe)){const ke=Oe.find(We=>We&&typeof We=="object"&&"texto"in We&&"preguntas"in We);return ke?{texto:ke.texto||"",preguntas:(ke.preguntas||[]).map(We=>({pregunta:We.pregunta||We.Pregunta||"",opciones:We.opciones||We.Opciones||[],respuestaCorrecta:We.respuestaCorrecta||We.respuesta||""}))}:{texto:Oe.map(We=>typeof We=="string"?We:JSON.stringify(We)).join(`
`),preguntas:[]}}if(typeof Oe=="string"){const[ke,We]=Oe.split(/Preguntas:|\nPreguntas:/i);let ft=[];return We&&(ft=We.split(/\n- |\n\d+\. /).filter(Boolean).map($t=>{const zt=$t.split(/Opciones:|\nOpciones:/i),tr=zt[0].trim();let Hr=[],or="";zt[1]&&(Hr=zt[1].split(/;|\n|,/).map(Lr=>Lr.trim()).filter(Boolean));const mn=$t.match(/Respuesta\s*correcta\s*:?\s*(.*)/i);return mn&&(or=mn[1].trim()),{pregunta:tr,opciones:Hr,respuestaCorrecta:or}})),{texto:(ke==null?void 0:ke.trim())||Oe,preguntas:ft}}}return Oe}const Le=async De=>{var Oe;if(De.preventDefault(),!G.contenido.trim()||G.tipos.length===0){L("Contenido y al menos un tipo de actividad son obligatorios.");return}_(!0),L(null);try{const ke=await Promise.all(F.map(async Jt=>({nombre:Jt.name,url:await m0e(Jt)}))),We="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",$t=new Is(We).getGenerativeModel({model:"gemini-1.5-flash-latest"}),zt=Ce();let or=await(await(await $t.generateContent(zt)).response).text();console.log("Respuesta cruda de la IA (actividad):",or),or=or.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const mn=or.match(/\{[\s\S]*\}/);if(!mn)throw new Error("No se encontró un objeto JSON válido en la respuesta de la IA");const Lr=mn[0];console.log("JSON extraído (actividad):",Lr);const En=JSON.parse(Lr),Vn={};for(const Jt of G.tipos)Vn[Jt]=oe(Jt,(Oe=En.actividades)==null?void 0:Oe[Jt]);const ar={id:"",fechaCreacion:new Date().toISOString(),...G,recursos:{...G.recursos,archivos:ke},introduccion:En.introduccion||"Actividad generada para reforzar el aprendizaje.",generatedContent:Vn};N(ar)}catch(ke){console.error("Error al generar actividad con IA",ke);const We=ke instanceof Error?ke.message:"Error desconocido";L(`Error al generar la actividad: ${We}. Por favor, inténtelo de nuevo.`)}finally{_(!1)}},Ye=async De=>{if(De.preventDefault(),!z.contenido.trim()||!z.objetivosAprendizaje.trim()){L("Contenido y objetivos de aprendizaje son obligatorios.");return}_(!0),L(null);try{const Oe="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",We=new Is(Oe).getGenerativeModel({model:"gemini-1.5-flash-latest"}),ft=me();let tr=await(await(await We.generateContent(ft)).response).text();console.log("Respuesta cruda de la IA:",tr),tr=tr.replace(/```json\s*/gi,"").replace(/```\s*$/g,""),tr=tr.replace(/\/\/.*$/gm,""),tr=tr.replace(/\/\*[\s\S]*?\*\//g,""),tr=tr.trim();const Hr=tr.match(/\{[\s\S]*\}/);if(!Hr)throw new Error("No se encontró un objeto JSON válido en la respuesta de la IA");let or=Hr[0];console.log("JSON extraído:",or),or=or.replace(/,(\s*[}\]])/g,"$1"),console.log("JSON limpio:",or);const mn=JSON.parse(or);if(!mn.preguntas||!Array.isArray(mn.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas válido");mn.preguntas.length!==30&&console.warn(`Se esperaban 30 preguntas, pero se recibieron ${mn.preguntas.length}`);const Lr=(mn.textos||[]).map((ar,Jt)=>{var Mr;return{id:ar.id||Jt+1,titulo:ar.titulo||`Texto ${Jt+1}`,contenido:ar.contenido||"Contenido del texto no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(ar.tipo)?ar.tipo:"informativo",palabras:ar.palabras||((Mr=ar.contenido)==null?void 0:Mr.split(" ").length)||0}}),En=mn.preguntas.slice(0,30).map((ar,Jt)=>({numero:ar.numero||Jt+1,pregunta:ar.pregunta||`Pregunta ${Jt+1}`,opciones:Array.isArray(ar.opciones)&&ar.opciones.length>=4?ar.opciones.slice(0,4):["Opción A","Opción B","Opción C","Opción D"],respuestaCorrecta:["A","B","C","D"].includes(ar.respuestaCorrecta)?ar.respuestaCorrecta:"A",habilidad:wb.includes(ar.habilidad)?ar.habilidad:wb[0],justificacion:ar.justificacion||"Justificación no disponible",...ar.textoId&&typeof ar.textoId=="number"?{textoId:ar.textoId}:{}}));console.log("Textos procesados:",Lr),console.log("Preguntas procesadas:",En.slice(0,2));const Vn={id:"",fechaCreacion:new Date().toISOString(),...z,titulo:mn.titulo||`Prueba ${z.asignatura} - ${z.nivel}`,instrucciones:mn.instrucciones||"Lee cada pregunta cuidadosamente y selecciona la mejor respuesta.",textos:Lr,preguntas:En};j(Vn)}catch(Oe){console.error("Error al generar prueba con IA",Oe);const ke=Oe instanceof Error?Oe.message:"Error desconocido";ke.includes("JSON")?L("Error al procesar la respuesta de la IA. El formato de respuesta no es válido. Inténtalo de nuevo."):L(`Error al generar la prueba estandarizada: ${ke}. Por favor, inténtelo de nuevo.`)}finally{_(!1)}},Te=async()=>{if(y)try{await A0e(y),q(W),P([]),p(!1),N(null)}catch(De){console.error("Error al guardar la actividad:",De),L("No se pudo guardar la actividad en la base de datos.")}},we=async()=>{if(U)try{const De={...U,cursosDestino:U.cursosDestino||[],estudiantesDestino:U.estudiantesDestino||[],textos:U.textos||[],preguntas:U.preguntas.map(Oe=>({...Oe,textoId:Oe.textoId||null}))};await d0e(De),Z(te),x(!1),j(null)}catch(De){console.error("Error al guardar la prueba:",De),L("No se pudo guardar la prueba en la base de datos.")}},Fe=Q.useMemo(()=>{var We,ft;const De=c||d;if(!De||!i)return[];const Oe=i.filter($t=>{var zt;return $t.profile===Gt.ESTUDIANTE&&((zt=De.cursosDestino)==null?void 0:zt.includes($t.curso||""))}).map($t=>$t.nombreCompleto),ke=De.estudiantesDestino||[];if(!((We=De.cursosDestino)!=null&&We.length)&&!((ft=De.estudiantesDestino)!=null&&ft.length)){const $t=De.nivel.charAt(0);return i.filter(zt=>{var tr;return zt.profile===Gt.ESTUDIANTE&&((tr=zt.curso)==null?void 0:tr.startsWith($t))}).map(zt=>zt.nombreCompleto).sort()}return Array.from(new Set([...Oe,...ke])).sort()},[c,d,i]),He=Q.useMemo(()=>{const De=(c==null?void 0:c.id)||(d==null?void 0:d.id);return a.filter(Oe=>Oe.actividadId===De)},[a,c,d]),Xe=Q.useMemo(()=>i.filter(De=>De.profile===Gt.ESTUDIANTE).sort((De,Oe)=>De.nombreCompleto.localeCompare(Oe.nombreCompleto)),[i]),ut=Q.useMemo(()=>k.trim()?Xe.filter(De=>De.nombreCompleto.toLowerCase().includes(k.toLowerCase())):Xe,[Xe,k]),Et=()=>l.jsxs("div",{className:"flex space-x-1 mb-6",children:[l.jsx("button",{onClick:()=>ee("actividades"),className:`px-4 py-2 rounded-lg font-semibold ${M==="actividades"?"bg-amber-500 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:"Actividades Remotas"}),l.jsx("button",{onClick:()=>ee("pruebas"),className:`px-4 py-2 rounded-lg font-semibold ${M==="pruebas"?"bg-amber-500 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:"Pruebas Estandarizadas"})]}),At=()=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada SIMCE"}),l.jsx("button",{onClick:()=>x(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"La IA generará una prueba de 30 preguntas con estándar SIMCE, indicando qué habilidad se mide en cada pregunta."}),l.jsxs("form",{onSubmit:Ye,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:z.asignatura,onChange:K,className:"w-full border-slate-300 rounded-md shadow-sm",children:yi.map(De=>l.jsx("option",{value:De,children:De},De))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),l.jsx("select",{name:"nivel",value:z.nivel,onChange:K,className:"w-full border-slate-300 rounded-md shadow-sm",children:km.map(De=>l.jsx("option",{value:De,children:De},De))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"duracionMinutos",className:"block text-sm font-medium text-slate-600 mb-1",children:"Duración (minutos)"}),l.jsx("input",{type:"number",name:"duracionMinutos",value:z.duracionMinutos,onChange:K,min:"30",max:"180",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Fecha límite"}),l.jsx("input",{type:"date",name:"plazoEntrega",value:z.plazoEntrega,onChange:K,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione cursos o estudiantes. Si no selecciona ninguno, la prueba será visible para todo el nivel."}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:qa.map(De=>{var Oe;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(Oe=z.cursosDestino)==null?void 0:Oe.includes(De),onChange:()=>fe(De,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700",children:De})]},De)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),l.jsx("input",{type:"text",placeholder:"Buscar...",value:k,onChange:De=>w(De.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:ut.map(De=>{var Oe;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(Oe=z.estudiantesDestino)==null?void 0:Oe.includes(De.nombreCompleto),onChange:()=>be(De.nombreCompleto,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:De.nombreCompleto,children:De.nombreCompleto})]},De.id)})})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido a evaluar ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{name:"contenido",value:z.contenido,onChange:K,required:!0,rows:4,placeholder:"Describa los contenidos que se evaluarán en la prueba...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("label",{htmlFor:"objetivosAprendizaje",className:"block text-sm font-medium text-slate-600 mb-1",children:["Objetivos de Aprendizaje ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{name:"objetivosAprendizaje",value:z.objetivosAprendizaje,onChange:K,required:!0,rows:4,placeholder:"Liste los objetivos de aprendizaje que se evaluarán...",className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),I&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:I}),l.jsx("div",{className:"pt-4 text-right",children:l.jsx("button",{type:"submit",disabled:E,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:E?l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Generar y Previsualizar"})})]})]}),jt=()=>{var De,Oe,ke;return l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Prueba Estandarizada"}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa las preguntas generadas. Si todo está correcto, confirma para asignar la prueba."}),l.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("div",{className:"p-4 bg-blue-50 border-l-4 border-blue-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:U==null?void 0:U.titulo}),l.jsxs("p",{className:"text-slate-700 mb-2",children:[l.jsx("strong",{children:"Duración:"})," ",U==null?void 0:U.duracionMinutos," minutos"]}),l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:U==null?void 0:U.instrucciones})]}),(U==null?void 0:U.textos)&&U.textos.length>0&&l.jsxs("div",{className:"p-4 bg-emerald-50 border-l-4 border-emerald-400 rounded-r-lg",children:[l.jsxs("h3",{className:"font-bold text-emerald-800 mb-4",children:["Textos de Lectura (",U.textos.length,")"]}),l.jsx("div",{className:"space-y-4",children:U.textos.map((We,ft)=>l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-emerald-200",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("h4",{className:"font-semibold text-slate-800",children:["Texto ",We.id,": ",We.titulo]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-1 rounded-full",children:We.tipo}),l.jsxs("span",{className:"text-xs bg-slate-100 text-slate-700 px-2 py-1 rounded-full",children:[We.palabras," palabras"]})]})]}),l.jsx("div",{className:"text-sm text-slate-700 leading-relaxed whitespace-pre-wrap bg-slate-50 p-3 rounded border",children:We.contenido})]},We.id))})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Preguntas (",((De=U==null?void 0:U.preguntas)==null?void 0:De.length)||0,"/30)"]}),l.jsx("div",{className:"space-y-6",children:(Oe=U==null?void 0:U.preguntas)==null?void 0:Oe.map((We,ft)=>{var $t;return l.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("p",{className:"font-semibold text-slate-800",children:[We.numero,". ",We.pregunta,We.textoId&&l.jsxs("span",{className:"ml-2 text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:["Basada en Texto ",We.textoId]})]}),l.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full font-medium",children:We.habilidad})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-3 mb-3",children:($t=We.opciones)==null?void 0:$t.map((zt,tr)=>{const Hr=String.fromCharCode(65+tr),or=We.respuestaCorrecta===Hr;return l.jsxs("div",{className:`p-2 rounded border ${or?"bg-green-50 border-green-300 text-green-800":"bg-slate-50 border-slate-200"}`,children:[l.jsxs("strong",{children:[Hr,"."]})," ",zt,or&&l.jsx("span",{className:"ml-2 text-xs",children:"✓"})]},tr)})}),We.justificacion&&l.jsxs("p",{className:"text-xs text-slate-600 bg-slate-100 p-2 rounded mt-2",children:[l.jsx("strong",{children:"Justificación:"})," ",We.justificacion]}),!1]},ft)})}),l.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[l.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"Distribución de Habilidades SIMCE"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mb-4",children:wb.map(We=>{var $t;const ft=(($t=U==null?void 0:U.preguntas)==null?void 0:$t.filter(zt=>zt.habilidad===We).length)||0;return l.jsxs("div",{className:"text-sm",children:[l.jsxs("span",{className:"font-medium",children:[We,":"]})," ",ft," preguntas"]},We)})}),(U==null?void 0:U.textos)&&U.textos.length>0&&l.jsxs("div",{className:"border-t pt-3",children:[l.jsx("h5",{className:"font-semibold text-gray-700 mb-2",children:"Preguntas por Texto:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[U.textos.map(We=>{var $t;const ft=(($t=U.preguntas)==null?void 0:$t.filter(zt=>zt.textoId===We.id).length)||0;return l.jsxs("div",{className:"text-sm",children:[l.jsxs("span",{className:"font-medium",children:["Texto ",We.id,":"]})," ",ft," preguntas"]},We.id)}),l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium",children:"Sin texto base:"})," ",((ke=U.preguntas)==null?void 0:ke.filter(We=>!We.textoId).length)||0," preguntas"]})]})]})]}),!1]})]}),l.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>j(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:we,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700",children:"Confirmar y Asignar Prueba"})]})]})},Dt=()=>l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),l.jsx("button",{onClick:()=>x(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva Prueba"})]}),l.jsx("div",{className:"space-y-4",children:r.length>0?r.map(De=>{var We,ft,$t;const Oe=[];(We=De.cursosDestino)!=null&&We.length&&Oe.push(`Cursos: ${De.cursosDestino.join(", ")}`),(ft=De.estudiantesDestino)!=null&&ft.length&&Oe.push(`Estudiantes: ${De.estudiantesDestino.length}`);const ke=Oe.length?Oe.join(" | "):`Todo ${De.nivel}`;return l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800",children:De.titulo||`${De.asignatura} - Prueba SIMCE`}),l.jsxs("p",{className:"text-sm text-slate-500",children:[De.nivel," | ",De.duracionMinutos," min | Destino: ",ke]}),l.jsxs("p",{className:"text-xs text-slate-400",children:["Creado: ",new Date(De.fechaCreacion).toLocaleDateString("es-CL")," | Preguntas: ",(($t=De.preguntas)==null?void 0:$t.length)||0]})]}),l.jsx("button",{onClick:()=>h(De),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},De.id)}):l.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay pruebas estandarizadas creadas. Haga clic en "Crear Nueva Prueba" para comenzar.'})})]}),Yt=()=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c?`${c.asignatura} - ${c.tipos.join(", ")}`:`${(d==null?void 0:d.titulo)||"Prueba Estandarizada"}`}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Nivel: ",(c==null?void 0:c.nivel)||(d==null?void 0:d.nivel)," | Plazo: ",(c==null?void 0:c.plazoEntrega)||(d==null?void 0:d.plazoEntrega),d&&` | Duración: ${d.duracionMinutos} min`]})]}),l.jsx("button",{onClick:()=>{A(null),h(null)},className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),l.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Fe.map(De=>{const Oe=He.find(ke=>ke.estudianteId===De);return l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:De}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Oe?l.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):l.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Oe?`${Oe.puntaje}/${Oe.puntajeMaximo}`:"-"}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Oe?new Date(Oe.fechaCompletado).toLocaleString("es-CL"):"-"})]},De)})})]})})]})]}),Rt=()=>{var De,Oe;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),l.jsx("button",{onClick:()=>p(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad interactiva para sus estudiantes."}),l.jsxs("form",{onSubmit:Le,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:G.asignatura,onChange:R,className:"w-full border-slate-300 rounded-md shadow-sm",children:yi.map(ke=>l.jsx("option",{value:ke,children:ke},ke))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),l.jsx("select",{name:"nivel",value:G.nivel,onChange:R,className:"w-full border-slate-300 rounded-md shadow-sm",children:km.map(ke=>l.jsx("option",{value:ke,children:ke},ke))})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos de Aprendizaje (Opcional)"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones de estudio"}),l.jsx("textarea",{name:"instrucciones",value:(De=G.recursos)==null?void 0:De.instrucciones,onChange:X,placeholder:"Ej: Lee el siguiente texto y luego responde...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces (videos, documentos, etc.)"}),l.jsx("textarea",{name:"enlaces",value:(Oe=G.recursos)==null?void 0:Oe.enlaces,onChange:X,placeholder:"Pega un enlace por línea...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos (PDF, imágenes, etc.)"}),l.jsx("input",{type:"file",multiple:!0,onChange:re,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione cursos o estudiantes. Si no selecciona ninguno, la actividad será visible para todo el nivel."}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:qa.map(ke=>{var We;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(We=G.cursosDestino)==null?void 0:We.includes(ke),onChange:()=>fe(ke),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700",children:ke})]},ke)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),l.jsx("input",{type:"text",placeholder:"Buscar...",value:k,onChange:ke=>w(ke.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:ut.map(ke=>{var We;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(We=G.estudiantesDestino)==null?void 0:We.includes(ke.nombreCompleto),onChange:()=>be(ke.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:ke.nombreCompleto,children:ke.nombreCompleto})]},ke.id)})})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),l.jsx("div",{className:"space-y-3",children:FJ.map(ke=>l.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:G.tipos.includes(ke),onChange:()=>ne(ke),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:ke})]}),G.tipos.includes(ke)&&l.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),G5[ke].map(We=>l.jsx("button",{type:"button",onClick:()=>ue(ke,We),className:`px-3 py-1 rounded-full font-semibold text-xs ${G.cantidadPreguntas[ke]===We?"bg-amber-500 text-white":"bg-slate-200"}`,children:We},We))]})]},ke))})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{name:"contenido",value:G.contenido,onChange:R,required:!0,rows:4,placeholder:"Ingrese los temas, conceptos clave o el texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),l.jsx("input",{type:"date",name:"plazoEntrega",value:G.plazoEntrega,onChange:R,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),I&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:I}),l.jsx("div",{className:"pt-4 text-right",children:l.jsx("button",{type:"submit",disabled:E,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:E?l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Generar y Previsualizar"})})]})]})},Ut=()=>{var De;return l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar la actividad."}),l.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:y==null?void 0:y.introduccion})]}),(y==null?void 0:y.recursos)&&(y.recursos.instrucciones||y.recursos.enlaces||((De=y.recursos.archivos)==null?void 0:De.length))&&l.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),l.jsxs("div",{className:"space-y-3",children:[y.recursos.instrucciones&&l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:y.recursos.instrucciones}),y.recursos.enlaces&&l.jsx("div",{children:y.recursos.enlaces.split(`
`).map((Oe,ke)=>Oe.trim()&&l.jsx("a",{href:Oe,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:Oe},ke))}),y.recursos.archivos&&y.recursos.archivos.length>0&&l.jsx("ul",{className:"list-disc list-inside",children:y.recursos.archivos.map(Oe=>l.jsx("li",{className:"text-slate-700",children:Oe.nombre},Oe.nombre))})]})]}),y==null?void 0:y.tipos.map(Oe=>{const ke=y.generatedContent[Oe];return ke?l.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:Oe}),l.jsxs("div",{className:"space-y-4 text-sm",children:[Oe==="Quiz"&&Array.isArray(ke)&&ke.map((We,ft)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[ft+1,". ",We.pregunta]}),l.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:We.opciones.map(($t,zt)=>l.jsxs("li",{children:[l.jsxs("strong",{children:[String.fromCharCode(65+zt),"."]})," ",$t]},zt))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",We.respuestaCorrecta]})]},ft)),Oe==="Comprensión de Lectura"&&ke&&typeof ke=="object"&&Array.isArray(ke.preguntas)&&l.jsxs("div",{children:[l.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:ke.texto}),ke.preguntas.map((We,ft)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[ft+1,". ",We.pregunta]}),l.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:We.opciones.map(($t,zt)=>l.jsxs("li",{children:[l.jsxs("strong",{children:[String.fromCharCode(65+zt),"."]})," ",$t]},zt))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",We.respuestaCorrecta]})]},ft))]}),Oe==="Términos Pareados"&&Array.isArray(ke)&&l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border border-slate-200",children:[l.jsx("thead",{className:"bg-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),l.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),l.jsx("tbody",{children:ke.map(We=>l.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[l.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:We.concepto}),l.jsx("td",{className:"p-2 align-top text-slate-700",children:We.definicion})]},We.id))})]})}),Oe==="Desarrollo"&&Array.isArray(ke)&&ke.map((We,ft)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[ft+1,". ",We.pregunta]}),l.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[l.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",We.rubrica]})]},ft)),(Oe==="Quiz"||Oe==="Términos Pareados"||Oe==="Desarrollo")&&!Array.isArray(ke)&&l.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:['El contenido generado para "',l.jsx("strong",{children:Oe}),'" no tiene el formato de array esperado. La IA pudo haber devuelto una respuesta en un formato no válido.']}),Oe==="Comprensión de Lectura"&&(!ke||typeof ke!="object"||!Array.isArray(ke.preguntas))&&l.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:['El contenido generado para "',l.jsx("strong",{children:"Comprensión de Lectura"}),'" no tiene el formato de objeto con preguntas esperado.']})]})]},Oe):null})]}),l.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>N(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:Te,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700",children:"Confirmar y Asignar"})]})]})},qt=()=>l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),l.jsx("button",{onClick:()=>p(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),l.jsx("div",{className:"space-y-4",children:e.length>0?e.map(De=>{var We,ft;const Oe=[];(We=De.cursosDestino)!=null&&We.length&&Oe.push(`Cursos: ${De.cursosDestino.join(", ")}`),(ft=De.estudiantesDestino)!=null&&ft.length&&Oe.push(`Estudiantes: ${De.estudiantesDestino.length}`);const ke=Oe.length?Oe.join(" | "):`Todo ${De.nivel}`;return l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[De.asignatura," - ",De.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",ke," | Creado: ",new Date(De.fechaCreacion).toLocaleDateString("es-CL")]})]}),l.jsx("button",{onClick:()=>A(De),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},De.id)}):l.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Haga clic en "Crear Nueva" para comenzar.'})})]});return B?l.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):l.jsxs("div",{className:"animate-fade-in",children:[Et(),U?jt():y?Ut():c||d?Yt():M==="pruebas"?v?At():Dt():m?Rt():qt()]})},g0e="actividades_remotas",x0e=e=>{var r,n,a,s,i,o;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,plazoEntrega:((s=(a=t.plazoEntrega)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.plazoEntrega,fechaCompletado:((o=(i=t.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||t.fechaCompletado}},v0e=(e,t)=>{const r=nr(Ft(kt,g0e),en("fechaCreacion","desc"));return br(r,a=>{const i=a.docs.map(o=>x0e(o)).filter(o=>{var c,A,d,h,m;if(!((c=o.cursosDestino)!=null&&c.length)&&!((A=o.estudiantesDestino)!=null&&A.length)){const p=o.nivel.charAt(0);return(d=e.curso)==null?void 0:d.startsWith(p)}return!!((h=o.cursosDestino)!=null&&h.includes(e.curso||"")||(m=o.estudiantesDestino)!=null&&m.includes(e.nombreCompleto))});t(i)},a=>{console.error("Error al suscribirse a las actividades disponibles:",a),t([])})},V4=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),b0e=({actividad:e,onComplete:t,currentUser:r})=>{const[n,a]=Q.useState({}),[s,i]=Q.useState(!1),[o,c]=Q.useState(!1),[A,d]=Q.useState(!1),h=`progress-${r.id}-${e.id}`;Q.useEffect(()=>{const x=localStorage.getItem(h);x&&a(JSON.parse(x))},[h]);const m=(x,E)=>{a(_=>({..._,[x]:E}))},p=()=>{},v=async()=>{};return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h2",{className:"text-xl font-bold text-sky-800 mb-2",children:"Instrucciones"}),l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:e.introduccion})]}),e.tipos.map(x=>{const E=e.generatedContent[x];if(!E)return null;switch(x){case"Quiz":case"Comprensión de Lectura":{const _=x==="Quiz",B=E,T=_?B:B.preguntas;return l.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:x}),!_&&l.jsx("div",{className:"mb-4 p-3 rounded bg-slate-50 whitespace-pre-wrap",children:B.texto}),l.jsx("div",{className:"space-y-6",children:T.map((I,L)=>l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:`${L+1}. ${I.pregunta}`}),l.jsx("div",{className:"mt-2 space-y-2",children:I.opciones.map((k,w)=>{var y;return l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded hover:bg-slate-100 cursor-pointer",children:[l.jsx("input",{type:"radio",name:`q-${x}-${L}`,value:k,checked:((y=n[x])==null?void 0:y[L])===k,onChange:()=>m(x,{...n[x],[L]:k}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400"}),l.jsx("span",{children:k})]},w)})})]},L))})]},x)}default:return null}}),l.jsxs("div",{className:"text-right mt-8 flex justify-end gap-4",children:[l.jsx("button",{onClick:p,disabled:s||o||A,className:"bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:o?l.jsxs(l.Fragment,{children:[l.jsx(V4,{})," Guardando..."]}):A?"✓ Guardado":"Guardar Progreso"}),l.jsx("button",{onClick:v,disabled:s||o,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:s?l.jsxs(l.Fragment,{children:[l.jsx(V4,{})," Evaluando..."]}):"Entregar Actividad"})]})]})},w0e=({currentUser:e})=>{const[t,r]=Q.useState(!0),[n,a]=Q.useState("list"),[s,i]=Q.useState([]),[o,c]=Q.useState(null),[A,d]=Q.useState(null);Q.useEffect(()=>{r(!0);const p=v0e(e,v=>{i(v),r(!1)});return()=>p()},[e]);const h=p=>{c(p),a("activity")},m=Q.useCallback((p,v)=>{if(!o)return;const x={actividadId:o.id,estudianteId:e.id,fechaCompletado:new Date().toISOString(),...p,retroalimentacionDetallada:v};d(x),a("result")},[o,e.id]);return t?l.jsxs("div",{className:"text-center p-10",children:[l.jsx(V4,{})," Cargando actividades..."]}):n==="activity"&&o?l.jsx(b0e,{actividad:o,onComplete:m,currentUser:e}):n==="result"&&A?l.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Resultados de la Actividad"}),l.jsxs("p",{children:["Puntaje: ",A.puntaje," / ",A.puntajeMaximo]}),l.jsx("button",{onClick:()=>a("list"),className:"mt-6 w-full bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700",children:"Volver a la lista"})]}):l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Auto-aprendizaje"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades asignadas por tus profesores."}),l.jsx("div",{className:"space-y-4",children:s.length>0?s.map(p=>l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[p.asignatura," - ",p.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",p.plazoEntrega]})]}),l.jsx("button",{onClick:()=>h(p),className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Comenzar"})]},p.id)):l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-6xl mb-4",children:"📚"}),l.jsx("p",{className:"text-slate-500 text-lg",children:"No hay actividades disponibles en este momento."})]})})]})},iE="estudiantes_inclusion",y0e="usuarios",PM=e=>{const t=e.data();return{id:e.id,...t}},E0e=e=>{const t=nr(Ft(kt,iE));return br(t,n=>{const a=n.docs.map(s=>PM(s));e(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusión:",n),e([])})},C0e=e=>{const t=nr(Ft(kt,y0e));return br(t,n=>{const a=n.docs.map(s=>PM(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},_0e=async e=>{try{return(await ha(Ft(kt,iE),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusión:",t),new Error("No se pudo agregar al estudiante.")}},S0e=async(e,t)=>{try{const{id:r,...n}=t,a=vr(kt,iE,e);await no(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},N0e=async e=>{try{const t=vr(kt,iE,e);await zs(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusión:",t),new Error("No se pudo eliminar al estudiante.")}},B0e=({student:e,onClose:t,onSave:r,profesores:n})=>{const[a,s]=Q.useState("intervenciones"),[i,o]=Q.useState(e);Q.useEffect(()=>{o(e)},[e]);const[c,A]=Q.useState(null),d={responsable:"",accion:"",observaciones:""},[h,m]=Q.useState(d),[p,v]=Q.useState({trimestre:"T1",meta:""}),[x,E]=Q.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[_,B]=Q.useState(null),[T,I]=Q.useState(!1),L={motivo:"",acuerdos:"",asistentes:""},[k,w]=Q.useState(L),y=()=>{r(i),t()},N=()=>{if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let me;c?me=(i.intervenciones||[]).map(Le=>Le.id===c.id?{...Le,...h}:Le):me=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...i.intervenciones||[]];const oe=me.sort((Le,Ye)=>new Date(Ye.fecha).getTime()-new Date(Le.fecha).getTime());o(Le=>({...Le,intervenciones:oe})),m(d),A(null)},U=me=>{A(me),m({responsable:me.responsable,accion:me.accion,observaciones:me.observaciones})},j=me=>{window.confirm("¿Eliminar esta intervención?")&&o(oe=>({...oe,intervenciones:(oe.intervenciones||[]).filter(Le=>Le.id!==me)}))},F=me=>{const{name:oe,value:Le}=me.target;o(Ye=>({...Ye,[oe]:Le,fechaActualizacionApoyos:new Date().toISOString()}))},P=()=>{if(!p.meta.trim())return;const me={...p,id:crypto.randomUUID(),cumplida:!1};o(oe=>({...oe,metasProgreso:[...oe.metasProgreso||[],me]})),v({trimestre:"T1",meta:""})},M=me=>{o(oe=>({...oe,metasProgreso:(oe.metasProgreso||[]).map(Le=>Le.id===me?{...Le,cumplida:!Le.cumplida}:Le)}))},ee=me=>{o(oe=>({...oe,metasProgreso:(oe.metasProgreso||[]).filter(Le=>Le.id!==me)}))},W=Q.useMemo(()=>{const me=i.metasProgreso||[];if(me.length===0)return{percent:0,color:"bg-slate-300"};const oe=me.filter(Te=>Te.cumplida).length,Le=Math.round(oe/me.length*100),Ye=Le<40?"bg-red-500":Le<75?"bg-yellow-500":"bg-green-500";return{percent:Le,color:Ye}},[i.metasProgreso]),te=Q.useMemo(()=>{if(!i.fechaActualizacionApoyos)return!0;const me=new Date(i.fechaActualizacionApoyos),oe=new Date;return oe.setMonth(oe.getMonth()-3),me<oe},[i.fechaActualizacionApoyos]),G=()=>{if(!x.titulo.trim()||!x.fecha)return;const me={...x,id:crypto.randomUUID(),resuelta:!1};o(oe=>({...oe,alertas:[...oe.alertas||[],me].sort((Le,Ye)=>new Date(Le.fecha).getTime()-new Date(Ye.fecha).getTime())})),E({titulo:"",fecha:new Date().toISOString().split("T")[0]})},q=me=>{o(oe=>({...oe,alertas:(oe.alertas||[]).map(Le=>Le.id===me?{...Le,resuelta:!Le.resuelta}:Le)}))},z=me=>{o(oe=>({...oe,alertas:(oe.alertas||[]).filter(Le=>Le.id!==me)}))},Z=me=>{me.target.files&&me.target.files[0]&&B(me.target.files[0])},R=()=>{if(!_)return;I(!0);const me=new FileReader;me.readAsDataURL(_),me.onloadend=()=>{const oe={id:crypto.randomUUID(),nombre:_.name,url:me.result,fechaSubida:new Date().toISOString()};o(Le=>({...Le,archivos:[oe,...Le.archivos||[]]})),B(null),I(!1)},me.onerror=()=>{alert("Error al leer el archivo."),I(!1)}},K=me=>{window.confirm("¿Eliminar este archivo?")&&o(oe=>({...oe,archivos:(oe.archivos||[]).filter(Le=>Le.id!==me)}))},X=()=>{if(!k.motivo.trim()||!k.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const me={...k,id:crypto.randomUUID(),fecha:new Date().toISOString()};o(oe=>({...oe,reuniones:[me,...oe.reuniones||[]].sort((Le,Ye)=>new Date(Ye.fecha).getTime()-new Date(Le.fecha).getTime())})),w(L)},re=me=>{window.confirm("¿Eliminar este registro de reunión?")&&o(oe=>({...oe,reuniones:(oe.reuniones||[]).filter(Le=>Le.id!==me)}))},ne=()=>{var Xe,ut,Et;const me=new ur("p","mm","a4"),oe=20,Le=me.internal.pageSize.getWidth(),Ye=me.internal.pageSize.getHeight();let Te=oe;const we=At=>{At.setFontSize(10),At.setTextColor(100),At.text("Ficha de Seguimiento - Módulo Inclusión",oe,15)};we(me),me.setFontSize(18),me.setFont("helvetica","bold"),me.setTextColor(40),me.text(i.nombre,oe,Te+10),Te+=15,me.setFontSize(11),me.setFont("helvetica","normal"),me.setTextColor(80),me.text(`Curso: ${i.curso}`,oe,Te),me.text(`Dificultad: ${i.dificultad}`,oe,Te+6),Te+=15;const Fe=At=>{Te+At>Ye-oe&&(me.addPage(),we(me),Te=oe)},He=At=>{Fe(15),me.setFontSize(14),me.setFont("helvetica","bold"),me.text(At,oe,Te),Te+=10};if((Xe=i.intervenciones)!=null&&Xe.length&&(He("Historial de Intervenciones"),ic(me,{startY:Te,head:[["Fecha","Responsable","Acción","Observaciones"]],body:i.intervenciones.map(At=>[new Date(At.fecha).toLocaleDateString("es-CL"),At.responsable,At.accion,At.observaciones||""]),theme:"grid",didDrawPage:At=>we(me)}),Te=me.lastAutoTable.finalY+10),i.adaptacionesCurriculares||i.apoyosRecibidos){Fe(30),He("Seguimiento y Apoyos"),me.setFontSize(11),me.setFont("helvetica","normal");const At=`Adaptaciones: ${i.adaptacionesCurriculares||"No registradas."}
Apoyos: ${i.apoyosRecibidos||"No registrados."}`,jt=me.splitTextToSize(At,Le-oe*2);me.text(jt,oe,Te),Te+=jt.length*5+10}(ut=i.metasProgreso)!=null&&ut.length&&(Fe(30),He("Metas de Progreso"),ic(me,{startY:Te,head:[["Trimestre","Meta","Estado"]],body:i.metasProgreso.map(At=>[At.trimestre,At.meta,At.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:At=>we(me)}),Te=me.lastAutoTable.finalY+10),(Et=i.reuniones)!=null&&Et.length&&(He("Reuniones con Apoderados"),ic(me,{startY:Te,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:i.reuniones.map(At=>[new Date(At.fecha).toLocaleDateString("es-CL"),At.motivo,At.acuerdos,At.asistentes]),theme:"grid",didDrawPage:At=>we(me)})),me.save(`Ficha_Inclusion_${i.nombre.replace(/\s/g,"_")}.pdf`)},ue=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:c?"Editando Intervención":"Registrar Nueva Intervención"}),l.jsxs("select",{value:h.responsable,onChange:me=>m(oe=>({...oe,responsable:me.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(me=>l.jsx("option",{value:me,children:me},me))]}),l.jsx("textarea",{value:h.accion,onChange:me=>m(oe=>({...oe,accion:me.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{value:h.observaciones,onChange:me=>m(oe=>({...oe,observaciones:me.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsxs("div",{className:"flex justify-end gap-2",children:[c&&l.jsx("button",{onClick:()=>{A(null),m(d)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md",children:"Cancelar Edición"}),l.jsx("button",{onClick:N,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:c?"Actualizar":"Guardar"})]})]}),l.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.intervenciones||[]).map(me=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:me.accion}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:me.observaciones}),l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(me.fecha).toLocaleString("es-CL")," - ",me.responsable]})]}),l.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[l.jsx("button",{onClick:()=>U(me),className:"text-blue-500",children:"✏️"}),l.jsx("button",{onClick:()=>j(me.id),className:"text-red-500",children:"🗑️"})]})]})},me.id))})]}),fe=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),te&&l.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl",children:"⚠️"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),l.jsx("textarea",{name:"adaptacionesCurriculares",value:i.adaptacionesCurriculares||"",onChange:F,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),l.jsx("textarea",{name:"apoyosRecibidos",value:i.apoyosRecibidos||"",onChange:F,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",W.percent,"%"]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:l.jsx("div",{className:`${W.color} h-4 rounded-full transition-all duration-500`,style:{width:`${W.percent}%`}})})]}),l.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[l.jsxs("select",{value:p.trimestre,onChange:me=>v(oe=>({...oe,trimestre:me.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"T1",children:"T1"}),l.jsx("option",{value:"T2",children:"T2"}),l.jsx("option",{value:"T3",children:"T3"})]}),l.jsx("input",{value:p.meta,onChange:me=>v(oe=>({...oe,meta:me.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:P,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm",children:"Agregar"})]}),l.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(i.metasProgreso||[]).map(me=>l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[l.jsx("input",{type:"checkbox",checked:me.cumplida,onChange:()=>M(me.id),className:"h-5 w-5 rounded text-amber-500"}),l.jsxs("span",{className:`flex-grow text-sm ${me.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[l.jsxs("strong",{children:[me.trimestre,":"]})," ",me.meta]}),l.jsx("button",{onClick:()=>ee(me.id),className:"text-red-500 text-sm",children:"🗑️"})]},me.id))})]})]}),be=()=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),l.jsx("input",{type:"text",value:x.titulo,onChange:me=>E(oe=>({...oe,titulo:me.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),l.jsx("input",{type:"date",value:x.fecha,onChange:me=>E(oe=>({...oe,fecha:me.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),l.jsx("button",{onClick:G,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md",children:"Agendar"})]}),l.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.alertas||[]).map(me=>l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[l.jsx("input",{type:"checkbox",checked:me.resuelta,onChange:()=>q(me.id),className:"h-5 w-5 rounded text-amber-500"}),l.jsxs("span",{className:`flex-grow text-sm ${me.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[me.titulo," (",new Date(me.fecha+"T12:00:00").toLocaleDateString(),")"]}),l.jsx("button",{onClick:()=>z(me.id),className:"text-red-500 text-sm",children:"🗑️"})]},me.id))})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),l.jsx("input",{type:"file",onChange:Z,className:"w-full text-sm"}),l.jsx("button",{onClick:R,disabled:!_||T,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400",children:T?"Subiendo...":"Subir"})]}),l.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.archivos||[]).map(me=>l.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[l.jsx("a",{href:me.url,download:me.nombre,className:"text-sm text-blue-600 hover:underline truncate",children:me.nombre}),l.jsx("button",{onClick:()=>K(me.id),className:"text-red-500 text-sm ml-2",children:"🗑️"})]},me.id))})]})]}),Ce=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),l.jsx("input",{value:k.motivo,onChange:me=>w(oe=>({...oe,motivo:me.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{value:k.acuerdos,onChange:me=>w(oe=>({...oe,acuerdos:me.target.value})),placeholder:"Acuerdos...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{value:k.asistentes,onChange:me=>w(oe=>({...oe,asistentes:me.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("div",{className:"text-right",children:l.jsx("button",{onClick:X,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:"Guardar Reunión"})})]}),l.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.reuniones||[]).map(me=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:me.motivo}),l.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[l.jsx("strong",{children:"Acuerdos:"})," ",me.acuerdos]}),l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(me.fecha).toLocaleString("es-CL")," - Asistentes: ",me.asistentes]})]}),l.jsx("button",{onClick:()=>re(me.id),className:"text-red-500 flex-shrink-0 ml-4",children:"🗑️"})]})},me.id))})]});return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:me=>me.stopPropagation(),children:[l.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:ne,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200",children:"Exportar PDF"}),l.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800",children:"×"})]})]}),l.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:l.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(me=>l.jsx("button",{onClick:()=>s(me),className:`${a===me?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize`,children:me==="alertas"?"Alertas y Archivos":me==="seguimiento"?"Seguimiento y Metas":me},me))})}),l.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[a==="intervenciones"&&ue(),a==="seguimiento"&&fe(),a==="reuniones"&&Ce(),a==="alertas"&&be()]}),l.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[l.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cerrar"}),l.jsx("button",{onClick:y,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios y Cerrar"})]})]})})},k0e=({student:e,onClose:t,onConfirm:r})=>{const[n,a]=Q.useState(gw[0]),s=()=>{r(e,n)};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),l.jsx("select",{id:"dificultad",value:n,onChange:i=>a(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:gw.map(i=>l.jsx("option",{value:i,children:i},i))})]}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Confirmar e Ingresar"})]})]})})},qj=({currentUser:e})=>{const[t,r]=Q.useState([]),[n,a]=Q.useState([]),[s,i]=Q.useState(!0),[o,c]=Q.useState(null),[A,d]=Q.useState(null),[h,m]=Q.useState(""),[p,v]=Q.useState(""),[x,E]=Q.useState("");Q.useEffect(()=>{i(!0);const y=E0e(U=>{r(U),i(!1)}),N=C0e(U=>{a(U)});return()=>{y(),N()}},[]);const _=async(y,N)=>{if(t.some(j=>j.nombre===y.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const U={nombre:y.nombreCompleto,curso:y.curso||"",dificultad:N,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await _0e(U)}catch(j){console.error("Error al agregar estudiante:",j),alert("Hubo un error al agregar al estudiante al programa.")}},B=async y=>{try{await S0e(y.id,y)}catch(N){console.error("Error al actualizar la ficha:",N),alert("Hubo un error al guardar los cambios en la ficha.")}},T=async y=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await N0e(y),(o==null?void 0:o.id)===y&&c(null)}catch(N){console.error("Error al eliminar estudiante:",N),alert("Hubo un error al eliminar al estudiante.")}},I=y=>{if(k.length===0){alert("No hay datos para exportar.");return}const N=k.map(U=>{var j;return{Nombre:U.nombre,Curso:U.curso,Dificultad:U.dificultad,"N° Intervenciones":((j=U.intervenciones)==null?void 0:j.length)||0,"Alertas Pendientes":(U.alertas||[]).filter(F=>!F.resuelta).length}});if(y==="xlsx"){const U=tc.json_to_sheet(N),j=tc.book_new();tc.book_append_sheet(j,U,"Estudiantes_Inclusion"),MB(j,"Estudiantes_Inclusion.xlsx")}else{const U=new ur;U.text("Listado de Estudiantes - Programa de Inclusión",14,15),ic(U,{startY:20,head:[Object.keys(N[0])],body:N.map(Object.values)}),U.save("Estudiantes_Inclusion.pdf")}},L=Q.useMemo(()=>n.filter(y=>{var N;return y.profile===Gt.ESTUDIANTE&&(((N=e.cursos)==null?void 0:N.includes(y.curso||""))||e.profile===Gt.SUBDIRECCION)}).filter(y=>!t.some(N=>N.nombre===y.nombreCompleto)),[n,t,e]),k=Q.useMemo(()=>t.filter(y=>y.nombre.toLowerCase().includes(h.toLowerCase())&&(p===""||y.curso===p)&&(x===""||y.dificultad===x)).sort((y,N)=>y.nombre.localeCompare(N.nombre)),[t,h,p,x]),w=Q.useMemo(()=>n.filter(y=>y.profile===Gt.PROFESORADO).map(y=>y.nombreCompleto).sort(),[n]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),s?l.jsx("div",{className:"text-center py-10",children:"Cargando datos del programa..."}):l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",k.length,")"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>I("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),l.jsx("button",{onClick:()=>I("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[l.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:h,onChange:y=>m(y.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsxs("select",{value:p,onChange:y=>v(y.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),qa.map(y=>l.jsx("option",{children:y},y))]}),l.jsxs("select",{value:x,onChange:y=>E(y.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todas las Dificultades"}),gw.map(y=>l.jsx("option",{children:y},y))]})]}),l.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:k.map(y=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:y.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[y.curso," - ",y.dificultad]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>c(y),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Ficha"}),l.jsx("button",{onClick:()=>T(y.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full text-lg",children:"🗑️"})]})]},y.id))})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante desde Nómina"}),l.jsx("ul",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:L.map(y=>l.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-sm text-slate-800 dark:text-slate-200",children:y.nombreCompleto}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:y.curso})]}),l.jsx("button",{onClick:()=>d(y),className:"text-2xl text-green-500 hover:text-green-700",children:"+"})]},y.id))})]})]}),A&&l.jsx(k0e,{student:A,onClose:()=>d(null),onConfirm:(y,N)=>{_(y,N),d(null)}}),o&&l.jsx(B0e,{student:o,onClose:()=>c(null),onSave:B,profesores:w})]})},MM="asistencia_dual",T0e=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaHora:((n=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaHora}},I0e=(e,t)=>{const r=nr(Ft(kt,MM),Mn("emailEstudiante","==",e),en("fechaHora","desc"));return br(r,a=>{const s=a.docs.map(i=>T0e(i));t(s)},a=>{console.error("Error subscribing to personal attendance:",a),t([])})},F0e=async e=>{try{const t={...e,fechaHora:Ar.fromDate(new Date(e.fechaHora))};await ha(Ft(kt,MM),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},j0e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),D0e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),R0e=({currentUser:e})=>{const[t,r]=Q.useState(e.curso||""),[n,a]=Q.useState([]),[s,i]=Q.useState(!1),[o,c]=Q.useState(!0),[A,d]=Q.useState(null);Q.useEffect(()=>{if(!e.email){c(!1);return}c(!0);const m=I0e(e.email,p=>{a(p),c(!1)});return()=>m()},[e.email]);const h=m=>{if(!t){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),d(null),navigator.geolocation.getCurrentPosition(async p=>{const v={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:m,fechaHora:new Date().toISOString(),ubicacion:{latitud:p.coords.latitude,longitud:p.coords.longitude}};try{await F0e(v),d({text:`¡Marca de ${m} registrada con éxito!`,type:"success"})}catch(x){console.error("Error saving record to Firestore:",x),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},p=>{console.error("Geolocation error:",p);let v="No se pudo obtener la ubicación.";switch(p.code){case p.PERMISSION_DENIED:v="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case p.POSITION_UNAVAILABLE:v="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case p.TIMEOUT:v="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:v=`Ocurrió un error desconocido al obtener la ubicación (código: ${p.code}).`;break}d({text:v,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),l.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),l.jsxs("select",{id:"curso",value:t,onChange:m=>r(m.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"-- Mi curso --"}),Mh.map(m=>l.jsx("option",{value:m,children:m},m))]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[l.jsx("button",{onClick:()=>h("Entrada"),disabled:s||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),l.jsx("button",{onClick:()=>h("Salida"),disabled:s||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&l.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[l.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l.jsx("span",{children:"Obteniendo ubicación..."})]}),A&&l.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${A.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:A.text})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(m=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(m.fechaHora).toLocaleString("es-CL")}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:l.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${m.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[m.tipo==="Entrada"?l.jsx(j0e,{}):l.jsx(D0e,{}),m.tipo]})}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:m.curso})]},m.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},L0e=async()=>{try{console.log("🔍 Debugging users collection...");const e=Ft($r,"users"),t=nr(e,_f(10)),r=await Ts(t),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach((s,i)=>{const o=s.data(),c={id:s.id,data:o,fields:Object.keys(o)};n.sampleDocs.push(c),Object.keys(o).forEach(A=>a.add(A))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(o=>s in o.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},O0e=async(e,t)=>{var c,A,d;const r=new Date(e,t,1),n=new Date(e,t+1,0,23,59,59,999),a=Ar.fromDate(r),s=Ar.fromDate(n),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const h of i)try{const m=Ft($r,h);try{const p=nr(m,Mn("fechaHora",">=",a),Mn("fechaHora","<=",s)),v=await Ts(p);o[h]={exists:!0,hasDateField:!0,count:v.size,sampleDoc:((c=v.docs[0])==null?void 0:c.data())||null}}catch{const v=["fecha","timestamp","createdAt"];let x=!1;for(const E of v)try{const _=nr(m,Mn(E,">=",a),Mn(E,"<=",s)),B=await Ts(_);o[h]={exists:!0,hasDateField:E,count:B.size,sampleDoc:((A=B.docs[0])==null?void 0:A.data())||null},x=!0;break}catch{continue}if(!x){const E=nr(m,en("__name__"),_f(5)),_=await Ts(E);o[h]={exists:!0,hasDateField:!1,count:_.size,sampleDoc:((d=_.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(m){o[h]={exists:!1,error:m instanceof Error?m.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},U0e=(e,t,r,n)=>{try{const a=new Date(e,t,1);a.setHours(0,0,0,0);const s=new Date(e,t+1,0);s.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${a.toISOString()} y ${s.toISOString()}`),console.log(`📅 Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const i=Ar.fromDate(a),o=Ar.fromDate(s),c=[],A=new Map,d=()=>{const m=Array.from(A.values());console.log(`📊 Total registros encontrados: ${m.length}`),m.length>0&&console.log("📅 Registros por día:",m.reduce((p,v)=>{let x;v.fechaHora instanceof Date?x=v.fechaHora:typeof v.fechaHora=="string"?x=new Date(v.fechaHora):x=new Date;const E=x.getDate();return p[E]=(p[E]||0)+1,p},{})),r(m)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(m=>{try{console.log(`🔍 Configurando suscripción para: ${m}`);const p=Ft($r,m),v=nr(p,Mn("fechaHora",">=",i),Mn("fechaHora","<=",o),en("fechaHora","desc")),x=br(v,E=>{console.log(`📋 ${m}: ${E.size} documentos encontrados con filtro`),E.size>0?(console.log(`✅ Registros encontrados en ${m}:`),Array.from(A.keys()).filter(B=>B.startsWith(`${m}_`)).forEach(B=>A.delete(B)),E.docs.forEach((B,T)=>{var I;if(T<5){const L=B.data();let k;(I=L.fechaHora)!=null&&I.toDate?k=L.fechaHora.toDate():typeof L.fechaHora=="string"?k=new Date(L.fechaHora):k=new Date,console.log(`   ${T+1}. ${L.emailEstudiante} - ${k.toLocaleString()} - ${L.tipo}`),console.log(`      📅 Fecha original: ${L.fechaHora} (tipo: ${typeof L.fechaHora})`)}}),E.forEach(B=>{var w;const T=B.data();let I;(w=T.fechaHora)!=null&&w.toDate?I=T.fechaHora.toDate():typeof T.fechaHora=="string"?I=new Date(T.fechaHora):T.fechaHora instanceof Date?I=T.fechaHora:T.fechaHora?I=new Date(T.fechaHora):I=new Date;const L={id:B.id,emailEstudiante:T.emailEstudiante||T.email||"",nombreEstudiante:T.nombreEstudiante||T.nombre||"",curso:T.curso||"",fechaHora:I,tipo:T.tipo,ubicacion:T.ubicacion||null,observaciones:T.observaciones||"",...T},k=`${m}_${B.id}`;A.set(k,L)}),d()):console.log(`⚪ ${m}: vacía, manteniendo datos existentes`)},E=>{console.warn(`⚠️ Error con filtro en ${m}:`,E),console.log(`🔄 Intentando estrategia alternativa en ${m}...`);const _=nr(p,_f(200)),B=br(_,I=>{if(console.log(`📋 ${m} (sin filtro): ${I.size} documentos`),I.size>0){const k=I.docs[0].data();console.log(`📄 Estructura en ${m}:`,Object.keys(k)),console.log("📄 Primer documento:",k)}const L=I.docs.filter(k=>{var N;const w=k.data();if(!w.fechaHora)return!1;let y;return(N=w.fechaHora)!=null&&N.toDate?y=w.fechaHora.toDate():typeof w.fechaHora=="string"?y=new Date(w.fechaHora):w.fechaHora instanceof Date?y=w.fechaHora:y=new Date(w.fechaHora),y>=a&&y<=s});console.log(`📅 ${m}: ${L.length} registros después de filtro manual`),L.length>0&&(Array.from(A.keys()).filter(w=>w.startsWith(`${m}_`)).forEach(w=>A.delete(w)),L.forEach(w=>{var F;const y=w.data();let N;(F=y.fechaHora)!=null&&F.toDate?N=y.fechaHora.toDate():typeof y.fechaHora=="string"?N=new Date(y.fechaHora):y.fechaHora instanceof Date?N=y.fechaHora:N=new Date(y.fechaHora);const U={id:w.id,emailEstudiante:y.emailEstudiante||y.email||"",nombreEstudiante:y.nombreEstudiante||y.nombre||"",curso:y.curso||"",fechaHora:N,tipo:y.tipo,ubicacion:y.ubicacion||null,observaciones:y.observaciones||"",...y},j=`${m}_${w.id}`;A.set(j,U)}),d())}),T=c.findIndex(I=>I===x);T>=0?c[T]=B:c.push(B)});c.push(x)}catch(p){console.warn(`❌ Error configurando ${m}:`,p)}}),()=>{c.forEach(m=>{try{m()}catch(p){console.warn("Error unsubscribing:",p)}})}}catch(a){return console.error("Error setting up subscribeToAsistenciaByMonth:",a),n&&n(new Error(`Error al configurar suscripción: ${a instanceof Error?a.message:"Error desconocido"}`)),()=>{}}},P0e=(e,t)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["usuarios","users"],n=[],a=new Map,s=()=>{const o=Array.from(a.values());console.log(`📊 Total usuarios encontrados: ${o.length}`);const c=o.reduce((d,h)=>(d[h.profile]=(d[h.profile]||0)+1,d),{});console.log("👥 Usuarios por perfil:",c);const A=o.filter(d=>d.profile===Gt.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${A.length}`),A.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),e(o)};let i=!1;return r.forEach(o=>{try{const c=Ft($r,o),A=nr(c),d=br(A,h=>{h.size>0?(console.log(`✅ Encontrados ${h.size} usuarios en colección: ${o}`),i=!0,Array.from(a.keys()).filter(p=>p.startsWith(`${o}_`)).forEach(p=>a.delete(p)),h.forEach(p=>{var v,x,E,_;try{const B=p.data(),T=B.email||B.userEmail||B.mail||B.correo||"",I=B.nombreCompleto||B.displayName||B.name||B.nombre||B.fullName||"",L=B.curso||B.course||B.class||B.grade||"";let k=B.profile||B.role||B.tipo||B.userType||Gt.ESTUDIANTE;if(typeof k=="string"){const N=k.toLowerCase();N.includes("estudiante")||N.includes("student")||N.includes("alumno")?k=Gt.ESTUDIANTE:N.includes("coordinador")||N.includes("coordinator")?k=Gt.COORDINADOR_TP:N.includes("profesor")||N.includes("teacher")||N.includes("docente")?k=Gt.PROFESOR:(N.includes("subdireccion")||N.includes("subdir"))&&(k=Gt.COORDINADOR_TP)}const w={id:p.id,email:T,nombreCompleto:I,curso:L,profile:k,activo:B.activo!==!1,fechaCreacion:((x=(v=B.fechaCreacion)==null?void 0:v.toDate)==null?void 0:x.call(v))||new Date(B.fechaCreacion)||new Date,ultimaActividad:((_=(E=B.ultimaActividad)==null?void 0:E.toDate)==null?void 0:_.call(E))||new Date(B.ultimaActividad)||new Date,...B},y=`${o}_${p.id}`;a.set(y,w)}catch(B){console.warn(`Error procesando documento ${p.id} en ${o}:`,B)}}),s()):console.log(`⚪ Colección ${o}: vacía`)},h=>{console.warn(`⚠️ Error en colección ${o}:`,h)});n.push(d)}catch(c){console.warn(`❌ Error configurando ${o}:`,c)}}),setTimeout(()=>{i||(console.error("❌ No se encontraron usuarios en ninguna colección"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(o=>{try{o()}catch(c){console.warn("Error unsubscribing:",c)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},M0e=(e,t)=>{try{console.log("Setting up users subscription...");const r=Ft($r,"users"),n=nr(r);return br(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const i=[];s.forEach(d=>{var h,m,p,v;try{const x=d.data();console.log(`Processing user doc ${d.id}:`,x);const E=x.email||x.userEmail||x.mail||"",_=x.nombreCompleto||x.displayName||x.name||x.nombre||"",B=x.curso||x.course||x.class||"";let T=x.profile||x.role||x.tipo||Gt.ESTUDIANTE;if(typeof T=="string"){const L=T.toLowerCase();L.includes("estudiante")||L.includes("student")||L.includes("alumno")?T=Gt.ESTUDIANTE:L.includes("coordinador")||L.includes("coordinator")?T=Gt.COORDINADOR_TP:L.includes("profesor")||L.includes("teacher")||L.includes("docente")?T=Gt.PROFESOR:(L.includes("subdireccion")||L.includes("subdir"))&&(T=Gt.COORDINADOR_TP)}const I={id:d.id,email:E,nombreCompleto:_,curso:B,profile:T,activo:x.activo!==!1,fechaCreacion:((m=(h=x.fechaCreacion)==null?void 0:h.toDate)==null?void 0:m.call(h))||new Date(x.fechaCreacion)||new Date,ultimaActividad:((v=(p=x.ultimaActividad)==null?void 0:p.toDate)==null?void 0:v.call(p))||new Date(x.ultimaActividad)||new Date,...x};i.push(I)}catch(x){console.warn(`Error processing user document ${d.id}:`,x)}}),i.sort((d,h)=>d.nombreCompleto.localeCompare(h.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const o=i.reduce((d,h)=>(d[h.profile]=(d[h.profile]||0)+1,d),{});console.log("Users by profile:",o);const c=i.filter(d=>d.profile===Gt.ESTUDIANTE);console.log(`Estudiantes: ${c.length}`);const A=c.filter(d=>d.curso);console.log(`Estudiantes con curso: ${A.length}`),e(i)},s=>{console.error("Error in subscribeToAllUsers:",s),t&&t(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},yb=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},Q0e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),H0e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),V0e=()=>{const[e,t]=Q.useState([]),[r,n]=Q.useState([]),[a,s]=Q.useState(!0),[i,o]=Q.useState(null),[c,A]=Q.useState(new Date),[d,h]=Q.useState("todos"),[m,p]=Q.useState("");Q.useEffect(()=>{s(!0),o(null);const k=c.getFullYear(),w=c.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",k,"Mes:",w);let y=!1,N=!1;const U=()=>{y&&N&&(console.log("=== CARGA COMPLETA ==="),s(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const F=Ft($r,"asistencia_dual"),P=nr(F,_f(5)),M=await Ts(P);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${M.size}`),M.size>0)M.docs.forEach((ee,W)=>{const te=ee.data();console.log(`   ${W+1}. ${ee.id.slice(0,8)} - ${te.emailEstudiante} - ${te.tipo}`),console.log("      Fecha original:",te.fechaHora),console.log("      Todos los campos:",Object.keys(te))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const ee=["asistenciaEmpresa","asistencia_empresa"];for(const W of ee)try{const te=Ft($r,W),G=nr(te,_f(3)),q=await Ts(G);if(console.log(`📋 ${W}: ${q.size} documentos`),q.size>0){const z=q.docs[0].data();console.log("   Estructura:",Object.keys(z)),console.log("   Email:",z.emailEstudiante||z.email),console.log("   Fecha:",z.fechaHora||z.fecha)}}catch(te){console.log(`❌ ${W}: ${te instanceof Error?te.message:"Error"}`)}}}catch(F){console.error("❌ Error en prueba directa:",F),F.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):F.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),O0e(k,w).then(F=>{console.log("🔍 Debug info for collections:",F),Object.entries(F).forEach(([P,M])=>{if(M.exists&&M.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${P.toUpperCase()}:`),console.log(`   📊 Total documentos: ${M.totalDocs}`),console.log(`   📅 Documentos del período: ${M.count}`),console.log(`   🔑 Campo de fecha: ${M.hasDateField}`),M.sampleDoc){console.log("   📄 Documento ejemplo:",M.sampleDoc);const ee=M.sampleDoc,W=ee.emailEstudiante||ee.email||ee.userEmail||ee.correo||"NO ENCONTRADO",te=ee.tipo||ee.type||ee.action||ee.tipoRegistro||"NO ENCONTRADO",G=ee.fechaHora||ee.fecha||ee.timestamp||ee.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${W}`),console.log(`   📝 Tipo registro: ${te}`),console.log(`   📅 Fecha: ${G}`),console.log("   🗂️ Todos los campos:",Object.keys(ee))}M.filteredDocs&&M.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",M.filteredDocs.length),M.filteredDocs.forEach((ee,W)=>{W<3&&console.log(`      ${W+1}. ID: ${ee.id}`,ee.data)}))}else M.exists?console.log(`⚪ Colección ${P}: vacía`):console.log(`❌ Colección ${P}: no existe`)})}).catch(F=>{console.error("Debug error:",F)}),L0e().then(F=>{console.log("🔍 Debug info for users:",F),(!F.exists||F.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async M=>{var ee;try{const W=Ft($r,M),te=nr(W,_f(5)),G=await Ts(te);G.size>0?(console.log(`✅ Encontrada colección alternativa: ${M} con ${G.size} documentos`),console.log("Documento muestra:",(ee=G.docs[0])==null?void 0:ee.data())):console.log(`❌ Colección ${M}: vacía`)}catch{console.log(`❌ Colección ${M}: no existe`)}}))}).catch(F=>{console.error("Users debug error:",F)});try{console.log("Configurando suscripción a asistencia...");const F=U0e(k,w,M=>{if(console.log("✅ Received registros:",M.length),M.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",M[0]);const ee=[...new Set(M.map(Z=>Z.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",ee);const W=[...new Set(M.map(Z=>Z.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",W);const te=M.reduce((Z,R)=>{const K=new Date(R.fechaHora).getDate();return Z[K]||(Z[K]=[]),Z[K].push(R),Z},{});console.log("📅 Registros por día del mes:",Object.keys(te).map(Z=>({dia:parseInt(Z),cantidad:te[parseInt(Z)].length})));const G=r.map(Z=>Z.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",G);const q=ee.filter(Z=>G.includes(Z)),z=ee.filter(Z=>!G.includes(Z));console.log("✅ Emails que coinciden:",q),console.log("❌ Emails que NO coinciden:",z)}else console.log("⚠️ No se encontraron registros de asistencia para el período");t(M),y=!0,U()},M=>{console.error("❌ Error fetching asistencia:",M),o("Error al cargar datos de asistencia: "+M.message),y=!0,U()});console.log("Configurando suscripción a usuarios...");const P=P0e(M=>{if(console.log("✅ Received users (multi-collection):",M.length),M.length>0){console.log("Sample user:",M[0]);const ee=M.filter(W=>W.profile===Gt.ESTUDIANTE&&W.curso);console.log("Dual students found:",ee.length),ee.forEach(W=>{console.log(`- ${W.nombreCompleto} (${W.curso}) - ${W.email}`)})}n(M),N=!0,U()},M=>{console.error("❌ Error fetching users (multi-collection):",M),console.log("🔄 Intentando con función original de usuarios...");const ee=M0e(W=>{console.log("✅ Received users (fallback):",W.length),n(W),N=!0,U()},W=>{console.error("❌ Error en fallback también:",W),o("Error al cargar estudiantes: "+M.message),N=!0,U()})});return()=>{console.log("Limpiando suscripciones..."),F&&F(),P&&P()}}catch(F){console.error("❌ Error setting up subscriptions:",F),o("Error al inicializar conexiones: "+(F instanceof Error?F.message:"Error desconocido")),s(!1)}},[c]);const{monthDays:v,monthName:x,year:E}=Q.useMemo(()=>{const k=c.getFullYear(),w=c.getMonth();return{monthDays:new Date(k,w+1,0).getDate(),monthName:c.toLocaleString("es-CL",{month:"long"}),year:k}},[c]),_=Q.useMemo(()=>{let k=r.filter(w=>w.profile===Gt.ESTUDIANTE&&w.curso&&Mh.includes(yb(w.curso)));if(d!=="todos"&&(k=k.filter(w=>yb(w.curso||"")===d)),m&&(k=k.filter(w=>w.nombreCompleto.toLowerCase().includes(m.toLowerCase()))),e.length>0){const w=[...new Set(e.map(U=>U.emailEstudiante).filter(Boolean))],y=k.map(U=>U.email),N=w.filter(U=>!y.includes(U));if(N.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",N);const j=N.map(F=>{const P=e.find(M=>M.emailEstudiante===F);return{id:F,email:F,nombreCompleto:(P==null?void 0:P.nombreEstudiante)||F.split("@")[0],curso:(P==null?void 0:P.curso)||"3ºC",profile:Gt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(F=>{const P=d==="todos"||yb(F.curso)===d,M=!m||F.nombreCompleto.toLowerCase().includes(m.toLowerCase());return P&&M&&Mh.includes(yb(F.curso))});k=[...k,...j]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${k.length}`),k.forEach(w=>{console.log(`   - ${w.nombreCompleto} (${w.curso}) - ${w.email}`)}),k.sort((w,y)=>w.nombreCompleto.localeCompare(y.nombreCompleto))},[r,d,m,e]),B=Q.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${e.length}`),console.log(`👥 Estudiantes disponibles: ${_.length}`);const k=new Map;return e.length===0?(console.log("⚠️ No hay registros para procesar aún"),k):(e.forEach((w,y)=>{const N=w.emailEstudiante;if(!N)return;let U;if(w.fechaHora instanceof Date)U=w.fechaHora;else if(w.fechaHora&&typeof w.fechaHora=="object"&&"toDate"in w.fechaHora)U=w.fechaHora.toDate();else if(typeof w.fechaHora=="string")U=new Date(w.fechaHora);else{console.warn("Fecha no válida en registro:",w);return}const j=U.getDate(),F=U.getMonth(),P=U.getFullYear();y<3&&console.log(`📅 Registro ${y+1}:`,{email:N,tipo:w.tipo,fechaOriginal:w.fechaHora,fechaProcesada:U.toLocaleString(),año:P,mes:F,día:j}),k.has(N)||k.set(N,new Map);const M=k.get(N);M.has(j)||M.set(j,{});const ee=M.get(j);w.tipo==="Entrada"?(!ee.entrada||U<new Date(ee.entrada.fechaHora))&&(ee.entrada=w):w.tipo==="Salida"&&(!ee.salida||U>new Date(ee.salida.fechaHora))&&(ee.salida=w)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:k.size,estudiantes:Array.from(k.keys()),registrosPorEstudiante:Array.from(k.entries()).map(([w,y])=>({email:w,dias:Array.from(y.keys()),totalRegistros:Array.from(y.values()).reduce((N,U)=>N+(U.entrada?1:0)+(U.salida?1:0),0)}))}),k)},[e]),T=k=>{A(w=>{const y=new Date(w);return y.setMonth(y.getMonth()+k),y})},I=k=>{k!=null&&k.latitud&&(k!=null&&k.longitud)&&window.open(`https://www.google.com/maps?q=${k.latitud},${k.longitud}`,"_blank")},L=["D","L","M","M","J","V","S"];return i?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:l.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[l.jsx("button",{onClick:()=>T(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${x} ${E}`}),l.jsx("button",{onClick:()=>T(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),l.jsxs("select",{value:d,onChange:k=>h(k.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"todos",children:"Todos los Cursos"}),Mh.map(k=>l.jsx("option",{value:k,children:k},k))]}),l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:m,onChange:k=>p(k.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a?l.jsxs("div",{className:"text-center text-amber-600 py-10",children:[l.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),l.jsx("div",{children:"Cargando datos de asistencia..."})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:v},(k,w)=>{const N=new Date(E,c.getMonth(),w+1).getDay(),U=N===0||N===6;return l.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${U?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[l.jsx("div",{className:"font-semibold",children:L[N]}),l.jsx("div",{children:w+1})]},w)})]})}),l.jsx("tbody",{children:_.length>0?_.map(k=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[l.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:k.nombreCompleto}),Array.from({length:v},(w,y)=>{var P;const N=y+1,U=(P=B.get(k.email))==null?void 0:P.get(N),j=new Date(E,c.getMonth(),y+1),F=j.getDay()===0||j.getDay()===6;return k.email==="alexis.robles@industrialderecoleta.cl"&&N===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:k.email,day:N,hasDataForStudent:B.has(k.email),studentDayRecords:U,allAttendanceKeys:Array.from(B.keys()),daysForStudent:B.get(k.email)?Array.from(B.get(k.email).keys()):[]}),l.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${F?"bg-slate-100 dark:bg-slate-700/50":""}`,children:l.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(U==null?void 0:U.entrada)&&l.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var M;return I((M=U.entrada)==null?void 0:M.ubicacion)},children:[l.jsx(Q0e,{}),l.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(U.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(U==null?void 0:U.salida)&&l.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var M;return I((M=U.salida)==null?void 0:M.ubicacion)},children:[l.jsx(H0e,{}),l.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(U.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},N)})]},k.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:v+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},oE="evaluaciones_formativas",lE="calificaciones_formativas",KB="trabajos_grupales_formativos",z0e="usuarios",qB=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},G0e=(e,t,r)=>{const n=nr(Ft(kt,oE),Mn("curso","==",e),Mn("asignatura","==",t),en("fecha","asc"));return br(n,a=>{r(a.docs.map(s=>qB(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},K0e=async(e,t)=>{const r=zN(kt),n=vr(Ft(kt,oE));r.set(n,{...e,fecha:Ar.fromDate(new Date(e.fecha+"T00:00:00"))});const a=vr(kt,lE,n.id);return r.set(a,t),await r.commit(),n.id},q0e=async(e,t)=>{const r=vr(kt,oE,e);await no(r,t,{merge:!0})},$0e=async e=>{const t=zN(kt);t.delete(vr(kt,oE,e)),t.delete(vr(kt,lE,e)),await t.commit()},W0e=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(n=>{const a=vr(kt,lE,n);return br(a,s=>{s.exists()&&t({[n]:s.data()})})});return()=>r.forEach(n=>n())},X0e=async(e,t)=>{const r=vr(kt,lE,e);await no(r,t,{merge:!0})},Y0e=(e,t,r)=>{const n=nr(Ft(kt,KB),Mn("curso","==",e),Mn("asignatura","==",t),en("fechaPresentacion","desc"));return br(n,a=>{r(a.docs.map(s=>qB(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},J0e=async e=>{const t={...e,fechaPresentacion:Ar.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await ha(Ft(kt,KB),t)},Z0e=async(e,t)=>{const r=vr(kt,KB,e);await no(r,t,{merge:!0})},eme=e=>{const t=nr(Ft(kt,z0e));return br(t,r=>{e(r.docs.map(n=>qB(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},QM=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},Fm={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},HM=e=>e.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},tme=({cursos:e,onSelect:t})=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const n=HM(r);return l.jsxs("div",{className:"space-y-2 text-center",children:[l.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[l.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),l.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[l.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),l.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),l.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):l.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[l.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),l.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),rme=({curso:e,asignaturas:t,onSelect:r,onBack:n})=>{const a=HM(e);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),l.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",e]})]}),l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(s=>l.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[l.jsx("span",{className:"text-2xl",children:Fm[s]||Fm.Default}),l.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):l.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[l.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),l.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},nme=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=Q.useState([]),[i,o]=Q.useState({}),[c,A]=Q.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,h]=Q.useState(null),[m,p]=Q.useState(null),[v,x]=Q.useState(!0),E=Q.useMemo(()=>r.filter(y=>y.profile===Gt.ESTUDIANTE&&QM(y.curso||"")===e).map(y=>y.nombreCompleto).sort((y,N)=>y.localeCompare(N)),[r,e]);Q.useEffect(()=>{x(!0);const y=G0e(e,t,N=>{s(N);const U=N.map(F=>F.id),j=W0e(U,F=>{o(P=>({...P,...F}))});return x(!1),()=>j()});return()=>y()},[e,t]);const _=y=>{const{name:N,value:U}=y.target;d?h(j=>j?{...j,[N]:U}:null):A(j=>({...j,[N]:U}))},B=async y=>{if(y.preventDefault(),p(null),!c.nombreActividad.trim()){p("El nombre de la actividad es obligatorio.");return}const N={asignatura:t,curso:e,...c},U=E.reduce((j,F)=>(j[F]="trabajado",j),{});try{await K0e(N,U),A({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(j){console.error(j),p("No se pudo crear la evaluación.")}},T=(y,N)=>{var P;const U=((P=i[y])==null?void 0:P[N])||"trabajado";let j;U==="trabajado"?j="no trabajado":U==="no trabajado"?j="ausente":j="trabajado";const F={...i,[y]:{...i[y]||{},[N]:j}};o(F),X0e(y,{[N]:j}).catch(M=>{console.error("Error updating grade:",M)})},I=y=>h(y),L=async()=>{if(d)try{await q0e(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),h(null)}catch(y){console.error(y),p("No se pudo guardar la edición.")}},k=async y=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await $0e(y)}catch(N){console.error(N),p("No se pudo eliminar la evaluación.")}},w=Q.useCallback(y=>{if(a.length===0)return"-";let N=0,U=0;return a.forEach(j=>{var P;const F=(P=i[j.id])==null?void 0:P[y];F==="trabajado"?(N+=7,U++):F==="no trabajado"&&(N+=2,U++)}),U===0?"-":(N/U).toFixed(1)},[i,a]);return v?l.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),l.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),l.jsxs("form",{onSubmit:B,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),l.jsxs("div",{className:"w-full",children:[l.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),l.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:c.nombreActividad,onChange:_,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{className:"w-full",children:[l.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),l.jsx("input",{id:"fecha",type:"date",name:"fecha",value:c.fecha,onChange:_,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("div",{className:"w-full",children:l.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),m&&l.jsx("p",{className:"text-red-500 text-sm col-span-full",children:m})]}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(y=>l.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===y.id?l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:_,className:"text-xs p-1 w-full dark:bg-slate-600"}),l.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:_,className:"text-xs p-1 w-full dark:bg-slate-600"}),l.jsx("button",{onClick:L,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"font-semibold",children:y.nombreActividad}),l.jsx("span",{className:"font-normal text-slate-500",children:y.fecha}),l.jsxs("div",{className:"flex gap-2 mt-1",children:[l.jsx("button",{onClick:()=>I(y),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),l.jsx("button",{onClick:()=>k(y.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},y.id)),l.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:E.map(y=>l.jsxs("tr",{children:[l.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:y}),a.map(N=>{var F;const U=(F=i[N.id])==null?void 0:F[y];let j;return U==="trabajado"?j=Fm[t]||Fm.Default:U==="no trabajado"?j="❌":U==="ausente"?j="A":j=Fm[t]||Fm.Default,l.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:l.jsx("button",{onClick:()=>T(N.id,y),className:`text-3xl transition-opacity duration-200 ${U==="trabajado"?"opacity-100":U==="no trabajado"?"opacity-40":U==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:j})},N.id)}),l.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:w(y)})]},y))})]})})]})},ame=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=Q.useState([]),[i,o]=Q.useState(null),[c,A]=Q.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,h]=Q.useState({}),[m,p]=Q.useState(2),v=Q.useMemo(()=>r.filter(I=>I.profile===Gt.ESTUDIANTE&&QM(I.curso||"")===e).sort((I,L)=>I.nombreCompleto.localeCompare(L.nombreCompleto)),[r,e]);Q.useEffect(()=>{const I=Y0e(e,t,s);return()=>I()},[e,t]),Q.useEffect(()=>{if(i){const I={};i.grupos.forEach(L=>{L.integrantes.forEach(k=>{I[k.nombre]={groupNumber:String(L.numero),role:k.rol||""}})}),h(I)}else h({})},[i]);const x=async I=>{if(I.preventDefault(),!c.nombre.trim())return;const L={curso:e,asignatura:t,nombreActividad:c.nombre,fechaPresentacion:c.fecha,grupos:[]};try{await J0e(L),A({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(k){console.error(k),alert("No se pudo crear la actividad grupal.")}},E=async()=>{if(!i)return;const I=new Map;for(const k of v){const w=d[k.nombreCompleto];if(w&&w.groupNumber){const y=parseInt(w.groupNumber,10);isNaN(y)||(I.has(y)||I.set(y,[]),I.get(y).push({nombre:k.nombreCompleto,rol:w.role||""}))}}const L=Array.from(I.entries()).map(([k,w])=>({numero:k,integrantes:w})).sort((k,w)=>k.numero-w.numero);try{await Z0e(i.id,{grupos:L}),alert("Grupos guardados con éxito.")}catch(k){console.error(k),alert("No se pudieron guardar los grupos.")}},_=()=>{if(m<2){alert("Debe haber al menos 2 grupos.");return}const I=[...v].sort(()=>Math.random()-.5),L={};I.forEach((k,w)=>{var y;L[k.nombreCompleto]={groupNumber:String(w%m+1),role:((y=d[k.nombreCompleto])==null?void 0:y.role)||""}}),h(L)},B=(I,L,k)=>{h(w=>({...w,[I]:{...w[I]||{groupNumber:"",role:""},[L]:k}}))},T=Q.useMemo(()=>{const I=new Map;return Object.entries(d).forEach(([L,k])=>{k.groupNumber&&(I.has(k.groupNumber)||I.set(k.groupNumber,[]),I.get(k.groupNumber).push({nombre:L,rol:k.role}))}),Array.from(I.entries()).sort((L,k)=>parseInt(L[0])-parseInt(k[0]))},[d]);return i?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),l.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),l.jsx("button",{onClick:E,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"md:col-span-1 space-y-4",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",value:m,onChange:I=>p(parseInt(I.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),l.jsx("button",{onClick:_,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),l.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),l.jsx("table",{className:"w-full text-sm",children:l.jsx("tbody",{children:v.map(I=>{var L;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-1 pr-2",children:I.nombreCompleto}),l.jsx("td",{className:"py-1",children:l.jsx("input",{type:"number",value:((L=d[I.nombreCompleto])==null?void 0:L.groupNumber)||"",onChange:k=>B(I.nombreCompleto,"groupNumber",k.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},I.id)})})})]})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:T.map(([I,L])=>l.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[l.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",I]}),l.jsx("ul",{className:"space-y-2",children:L.map(k=>l.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{className:"flex-1 truncate",children:k.nombre}),l.jsxs("select",{value:k.rol||"",onChange:w=>B(k.nombre,"role",w.target.value),className:"p-1 border rounded text-xs w-32",children:[l.jsx("option",{value:"",children:"-- Asignar Rol --"}),IU.map(w=>l.jsx("option",{value:w,children:w},w))]})]},k.nombre))})]},I))})]})]})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),l.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),l.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsx("input",{value:c.nombre,onChange:I=>A({...c,nombre:I.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),l.jsx("input",{type:"date",value:c.fecha,onChange:I=>A({...c,fecha:I.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(I=>l.jsxs("button",{onClick:()=>o(I),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[l.jsx("p",{className:"font-bold",children:I.nombreActividad}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",I.fechaPresentacion]})]},I.id))]})]})},sme=({currentUser:e})=>{const[t,r]=Q.useState("calificaciones"),[n,a]=Q.useState(null),[s,i]=Q.useState(null),[o,c]=Q.useState([]),[A,d]=Q.useState(!0);Q.useEffect(()=>{d(!0);const x=eme(E=>{c(E),d(!1)});return()=>x()},[]);const h=Q.useMemo(()=>e.cursos||[],[e.cursos]),m=Q.useMemo(()=>e.asignaturas||[],[e.asignaturas]),p=({tab:x,label:E})=>l.jsx("button",{onClick:()=>r(x),className:`${t===x?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:E}),v=()=>{if(A)return l.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return l.jsx(tme,{cursos:h,onSelect:a});if(!s)return l.jsx(rme,{curso:n,asignaturas:m,onSelect:i,onBack:()=>a(null)});if(t==="calificaciones")return l.jsx(nme,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)});if(t==="grupos")return l.jsx(ame,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx(p,{tab:"calificaciones",label:"Calificaciones"}),l.jsx(p,{tab:"grupos",label:"Trabajos Grupales"})]})}),l.jsx("div",{className:"mt-6",children:v()})]})};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ime=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ome=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),$j=e=>{const t=ome(e);return t.charAt(0).toUpperCase()+t.slice(1)},VM=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),lme=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cme={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ume=Q.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:i,...o},c)=>Q.createElement("svg",{ref:c,...cme,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:VM("lucide",a),...!s&&!lme(o)&&{"aria-hidden":"true"},...o},[...i.map(([A,d])=>Q.createElement(A,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=(e,t)=>{const r=Q.forwardRef(({className:n,...a},s)=>Q.createElement(ume,{ref:s,iconNode:t,className:VM(`lucide-${ime($j(e))}`,`lucide-${e}`,n),...a}));return r.displayName=$j(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ame=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],dme=jp("calendar-check",Ame);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fme=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],hme=jp("chart-column",fme);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mme=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],pme=jp("clipboard-list",mme);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gme=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],xme=jp("message-square",gme);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vme=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],bme=jp("video",vme);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wme=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],yme=jp("wrench",wme);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM="firebasestorage.googleapis.com",GM="storageBucket",Eme=120*1e3,Cme=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends qc{constructor(t,r,n=0){super(K5(t),`Firebase Storage: ${r} (${K5(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ja.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return K5(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ya;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ya||(Ya={}));function K5(e){return"storage/"+e}function $B(){const e="An unknown error occurred, please check the error payload for server response.";return new Ja(Ya.UNKNOWN,e)}function _me(e){return new Ja(Ya.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Sme(e){return new Ja(Ya.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Nme(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ja(Ya.UNAUTHENTICATED,e)}function Bme(){return new Ja(Ya.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function kme(e){return new Ja(Ya.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Tme(){return new Ja(Ya.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ime(){return new Ja(Ya.CANCELED,"User canceled the upload/download.")}function Fme(e){return new Ja(Ya.INVALID_URL,"Invalid URL '"+e+"'.")}function jme(e){return new Ja(Ya.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Dme(){return new Ja(Ya.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+GM+"' property when initializing the app?")}function Rme(){return new Ja(Ya.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Lme(){return new Ja(Ya.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Ome(e){return new Ja(Ya.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function z4(e){return new Ja(Ya.INVALID_ARGUMENT,e)}function KM(){return new Ja(Ya.APP_DELETED,"The Firebase app was deleted.")}function Ume(e){return new Ja(Ya.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ex(e,t){return new Ja(Ya.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Sg(e){throw new Ja(Ya.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=gl.makeFromUrl(t,r)}catch{return new gl(t,"")}if(n.path==="")return n;throw jme(t)}static makeFromUrl(t,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const i="(/(.*))?$",o=new RegExp("^gs://"+a+i,"i"),c={bucket:1,path:3};function A(I){I.path_=decodeURIComponent(I.path)}const d="v[A-Za-z0-9_]+",h=r.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${a}/o${m}`,"i"),v={bucket:1,path:3},x=r===zM?"(?:storage.googleapis.com|storage.cloud.google.com)":r,E="([^?#]*)",_=new RegExp(`^https?://${x}/${a}/${E}`,"i"),T=[{regex:o,indices:c,postModify:s},{regex:p,indices:v,postModify:A},{regex:_,indices:{bucket:1,path:2},postModify:A}];for(let I=0;I<T.length;I++){const L=T[I],k=L.regex.exec(t);if(k){const w=k[L.indices.bucket];let y=k[L.indices.path];y||(y=""),n=new gl(w,y),L.postModify(n);break}}if(n==null)throw Fme(t);return n}}class Pme{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mme(e,t,r){let n=1,a=null,s=null,i=!1,o=0;function c(){return o===2}let A=!1;function d(...E){A||(A=!0,t.apply(null,E))}function h(E){a=setTimeout(()=>{a=null,e(p,c())},E)}function m(){s&&clearTimeout(s)}function p(E,..._){if(A){m();return}if(E){m(),d.call(null,E,..._);return}if(c()||i){m(),d.call(null,E,..._);return}n<64&&(n*=2);let T;o===1?(o=2,T=0):T=(n+Math.random())*1e3,h(T)}let v=!1;function x(E){v||(v=!0,m(),!A&&(a!==null?(E||(o=2),clearTimeout(a),h(0)):E||(o=1)))}return h(0),s=setTimeout(()=>{i=!0,x(!0)},r),x}function Qme(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hme(e){return e!==void 0}function Vme(e){return typeof e=="object"&&!Array.isArray(e)}function WB(e){return typeof e=="string"||e instanceof String}function Wj(e){return XB()&&e instanceof Blob}function XB(){return typeof Blob<"u"}function Xj(e,t,r,n){if(n<t)throw z4(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw z4(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YB(e,t,r){let n=t;return r==null&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function qM(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const a=t(n)+"="+t(e[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var Kh;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Kh||(Kh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zme(e,t){const r=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gme{constructor(t,r,n,a,s,i,o,c,A,d,h,m=!0,p=!1){this.url_=t,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=o,this.errorCallback_=c,this.timeout_=A,this.progressCallback_=d,this.connectionFactory_=h,this.retry=m,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,x)=>{this.resolve_=v,this.reject_=x,this.start_()})}start_(){const t=(n,a)=>{if(a){n(!1,new Eb(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const i=o=>{const c=o.loaded,A=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,A)};this.progressCallback_!==null&&s.addUploadProgressListener(i),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(i),this.pendingConnection_=null;const o=s.getErrorCode()===Kh.NO_ERROR,c=s.getStatus();if(!o||zme(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Kh.ABORT;n(!1,new Eb(!1,null,d));return}const A=this.successCodes_.indexOf(c)!==-1;n(!0,new Eb(A,s))})},r=(n,a)=>{const s=this.resolve_,i=this.reject_,o=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(o,o.getResponse());Hme(c)?s(c):s()}catch(c){i(c)}else if(o!==null){const c=$B();c.serverResponse=o.getErrorText(),this.errorCallback_?i(this.errorCallback_(o,c)):i(c)}else if(a.canceled){const c=this.appDelete_?KM():Ime();i(c)}else{const c=Tme();i(c)}};this.canceled_?r(!1,new Eb(!1,null,!0)):this.backoffId_=Mme(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Qme(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Eb{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function Kme(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function qme(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function $me(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Wme(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Xme(e,t,r,n,a,s,i=!0,o=!1){const c=qM(e.urlParams),A=e.url+c,d=Object.assign({},e.headers);return $me(d,t),Kme(d,r),qme(d,s),Wme(d,n),new Gme(A,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yme(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Jme(...e){const t=Yme();if(t!==void 0){const r=new t;for(let n=0;n<e.length;n++)r.append(e[n]);return r.getBlob()}else{if(XB())return new Blob(e);throw new Ja(Ya.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Zme(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function epe(e){if(typeof atob>"u")throw Ome("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class q5{constructor(t,r){this.data=t,this.contentType=r||null}}function tpe(e,t){switch(e){case Qu.RAW:return new q5($M(t));case Qu.BASE64:case Qu.BASE64URL:return new q5(WM(e,t));case Qu.DATA_URL:return new q5(npe(t),ape(t))}throw $B()}function $M(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const s=n,i=e.charCodeAt(++r);n=65536|(s&1023)<<10|i&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(t)}function rpe(e){let t;try{t=decodeURIComponent(e)}catch{throw Ex(Qu.DATA_URL,"Malformed data URL.")}return $M(t)}function WM(e,t){switch(e){case Qu.BASE64:{const a=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(a||s)throw Ex(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Qu.BASE64URL:{const a=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(a||s)throw Ex(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=epe(t)}catch(a){throw a.message.includes("polyfill")?a:Ex(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class XM{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw Ex(Qu.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=spe(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}function npe(e){const t=new XM(e);return t.base64?WM(Qu.BASE64,t.rest):rpe(t.rest)}function ape(e){return new XM(e).contentType}function spe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(t,r){let n=0,a="";Wj(t)?(this.data_=t,n=t.size,a=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,r){if(Wj(this.data_)){const n=this.data_,a=Zme(n,t,r);return a===null?null:new Af(a)}else{const n=new Uint8Array(this.data_.buffer,t,r-t);return new Af(n,!0)}}static getBlob(...t){if(XB()){const r=t.map(n=>n instanceof Af?n.data_:n);return new Af(Jme.apply(null,r))}else{const r=t.map(i=>WB(i)?tpe(Qu.RAW,i).data:i.data_);let n=0;r.forEach(i=>{n+=i.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(i=>{for(let o=0;o<i.length;o++)a[s++]=i[o]}),new Af(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(e){let t;try{t=JSON.parse(e)}catch{return null}return Vme(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ipe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function ope(e,t){const r=t.split("/").filter(n=>n.length>0).join("/");return e.length===0?r:e+"/"+r}function JM(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lpe(e,t){return t}class co{constructor(t,r,n,a){this.server=t,this.local=r||t,this.writable=!!n,this.xform=a||lpe}}let Cb=null;function cpe(e){return!WB(e)||e.length<2?e:JM(e)}function ZM(){if(Cb)return Cb;const e=[];e.push(new co("bucket")),e.push(new co("generation")),e.push(new co("metageneration")),e.push(new co("name","fullPath",!0));function t(s,i){return cpe(i)}const r=new co("name");r.xform=t,e.push(r);function n(s,i){return i!==void 0?Number(i):i}const a=new co("size");return a.xform=n,e.push(a),e.push(new co("timeCreated")),e.push(new co("updated")),e.push(new co("md5Hash",null,!0)),e.push(new co("cacheControl",null,!0)),e.push(new co("contentDisposition",null,!0)),e.push(new co("contentEncoding",null,!0)),e.push(new co("contentLanguage",null,!0)),e.push(new co("contentType",null,!0)),e.push(new co("metadata","customMetadata",!0)),Cb=e,Cb}function upe(e,t){function r(){const n=e.bucket,a=e.fullPath,s=new gl(n,a);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:r})}function Ape(e,t,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const i=r[s];n[i.local]=i.xform(n,t[i.server])}return upe(n,e),n}function eQ(e,t,r){const n=YM(t);return n===null?null:Ape(e,n,r)}function dpe(e,t,r,n){const a=YM(t);if(a===null||!WB(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const i=encodeURIComponent;return s.split(",").map(A=>{const d=e.bucket,h=e.fullPath,m="/b/"+i(d)+"/o/"+i(h),p=YB(m,r,n),v=qM({alt:"media",token:A});return p+v})[0]}function fpe(e,t){const r={},n=t.length;for(let a=0;a<n;a++){const s=t[a];s.writable&&(r[s.server]=e[s.local])}return JSON.stringify(r)}class tQ{constructor(t,r,n,a){this.url=t,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rQ(e){if(!e)throw $B()}function hpe(e,t){function r(n,a){const s=eQ(e,a,t);return rQ(s!==null),s}return r}function mpe(e,t){function r(n,a){const s=eQ(e,a,t);return rQ(s!==null),dpe(s,a,e.host,e._protocol)}return r}function nQ(e){function t(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=Bme():a=Nme():r.getStatus()===402?a=Sme(e.bucket):r.getStatus()===403?a=kme(e.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return t}function ppe(e){const t=nQ(e);function r(n,a){let s=t(n,a);return n.getStatus()===404&&(s=_me(e.path)),s.serverResponse=a.serverResponse,s}return r}function gpe(e,t,r){const n=t.fullServerUrl(),a=YB(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,o=new tQ(a,s,mpe(e,r),i);return o.errorHandler=ppe(t),o}function xpe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function vpe(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=xpe(null,t)),n}function bpe(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};function o(){let T="";for(let I=0;I<2;I++)T=T+Math.random().toString().slice(2);return T}const c=o();i["Content-Type"]="multipart/related; boundary="+c;const A=vpe(t,n,a),d=fpe(A,r),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+A.contentType+`\r
\r
`,m=`\r
--`+c+"--",p=Af.getBlob(h,n,m);if(p===null)throw Rme();const v={name:A.fullPath},x=YB(s,e.host,e._protocol),E="POST",_=e.maxUploadRetryTime,B=new tQ(x,E,hpe(e,r),_);return B.urlParams=v,B.headers=i,B.body=p.uploadData(),B.errorHandler=nQ(t),B}class wpe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Kh.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Kh.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Kh.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,n,a,s){if(this.sent_)throw Sg("cannot .send() more than once");if(id(t)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Sg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Sg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Sg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Sg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class ype extends wpe{initXhr(){this.xhr_.responseType="text"}}function aQ(){return new ype}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(t,r){this._service=t,r instanceof gl?this._location=r:this._location=gl.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new c0(t,r)}get root(){const t=new gl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return JM(this._location.path)}get storage(){return this._service}get parent(){const t=ipe(this._location.path);if(t===null)return null;const r=new gl(this._location.bucket,t);return new c0(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw Ume(t)}}function Epe(e,t,r){e._throwIfRoot("uploadBytes");const n=bpe(e.storage,e._location,ZM(),new Af(t,!0),r);return e.storage.makeRequestWithTokens(n,aQ).then(a=>({metadata:a,ref:e}))}function Cpe(e){e._throwIfRoot("getDownloadURL");const t=gpe(e.storage,e._location,ZM());return e.storage.makeRequestWithTokens(t,aQ).then(r=>{if(r===null)throw Lme();return r})}function _pe(e,t){const r=ope(e._location.path,t),n=new gl(e._location.bucket,r);return new c0(e.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Spe(e){return/^[A-Za-z]+:\/\//.test(e)}function Npe(e,t){return new c0(e,t)}function sQ(e,t){if(e instanceof JB){const r=e;if(r._bucket==null)throw Dme();const n=new c0(r,r._bucket);return t!=null?sQ(n,t):n}else return t!==void 0?_pe(e,t):e}function Bpe(e,t){if(t&&Spe(t)){if(e instanceof JB)return Npe(e,t);throw z4("To use ref(service, url), the first argument must be a Storage instance.")}else return sQ(e,t)}function Yj(e,t){const r=t==null?void 0:t[GM];return r==null?null:gl.makeFromBucketSpec(r,e)}function kpe(e,t,r,n={}){e.host=`${t}:${r}`;const a=id(t);a&&(my(`https://${e.host}/b`),py("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(e._overrideAuthToken=typeof s=="string"?s:AL(s,e.app.options.projectId))}class JB{constructor(t,r,n,a,s,i=!1){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=zM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Eme,this._maxUploadRetryTime=Cme,this._requests=new Set,a!=null?this._bucket=gl.makeFromBucketSpec(a,this._host):this._bucket=Yj(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=gl.makeFromBucketSpec(this._url,t):this._bucket=Yj(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Xj("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Xj("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(dl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new c0(this,t)}_makeRequest(t,r,n,a,s=!0){if(this._deleted)return new Pme(KM());{const i=Xme(t,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(t,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,a).getPromise()}}const Jj="@firebase/storage",Zj="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iQ="storage";function Tpe(e,t,r){return e=oa(e),Epe(e,t,r)}function Ipe(e){return e=oa(e),Cpe(e)}function Fpe(e,t){return e=oa(e),Bpe(e,t)}function jpe(e=gy(),t){e=oa(e);const n=b1(e,iQ).getImmediate({identifier:t}),a=KS("storage");return a&&Dpe(n,...a),n}function Dpe(e,t,r,n={}){kpe(e,t,r,n)}function Rpe(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new JB(r,n,a,t,d0)}function Lpe(){jf(new XA(iQ,Rpe,"PUBLIC").setMultipleInstances(!0)),sc(Jj,Zj,""),sc(Jj,Zj,"esm2020")}Lpe();const Dp="acompanamientos",Ope="ciclosOPR",Upe="configuracion",Ppe=async()=>{try{const e=nr(Ft($r,Dp),en("fecha","desc"));return(await Ts(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener acompañamientos:",e),new Error("No se pudieron cargar los registros de acompañamiento")}},Mpe=async e=>{try{return{id:(await ha(Ft($r,Dp),{...e,fecha:e.fecha||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear acompañamiento:",t),new Error("No se pudo crear el registro de acompañamiento")}},Qpe=async(e,t)=>{try{const r=vr($r,Dp,e);await D1(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acompañamiento:",r,"ID:",e),new Error("No se pudo actualizar el registro de acompañamiento")}},Hpe=async e=>{try{const t=vr($r,Dp,e);await zs(t)}catch(t){throw console.error("Error al eliminar acompañamiento:",t,"ID:",e),new Error("No se pudo eliminar el registro de acompañamiento")}},eD=async(e,t)=>{try{const r=Ft($r,Dp,e,Ope);return{id:(await ha(r,{...t,createdAt:new Date().toISOString()})).id,...t}}catch(r){throw console.error(`Error al crear ciclo OPR para ${e}:`,r),new Error("No se pudo crear el ciclo OPR")}},Vpe=async(e,t)=>{try{const r=jpe(),n=Fpe(r,t),a=await Tpe(n,e);return await Ipe(a.ref)}catch(r){throw console.error(`Error al subir archivo a ${t}:`,r),new Error("No se pudo subir el archivo")}},zpe=async e=>{try{const t=nr(Ft($r,Dp),Mn("docente","==",e),en("fecha","desc"));return(await Ts(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener acompañamientos por docente:",t),new Error("No se pudieron cargar los acompañamientos del docente")}},Gpe=async()=>{try{const e=vr($r,Upe,"rubricaAcompanamiento"),t=await j1(e);return t.exists()?t.data().rubrica:null}catch(e){return console.error("Error al obtener rúbrica personalizada:",e),null}},Kpe=async()=>await OM(),qpe=({label:e,onFileChange:t,uploadedUrl:r,onRemove:n,isUploading:a,accept:s="video/mp4,video/quicktime"})=>{const i=`file-upload-${e.replace(/\s+/g,"-")}`;return l.jsxs("div",{className:"w-full",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),r?l.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[l.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline truncate",children:"Ver video cargado"}),l.jsx("button",{type:"button",onClick:n,className:"text-red-500 hover:text-red-700 ml-auto"})]}):l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{id:i,type:"file",onChange:o=>o.target.files&&t(o.target.files[0]),className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100",disabled:a,accept:s}),a&&l.jsx("div",{className:"text-sm text-amber-600",children:"Cargando..."})]})]})},$pe=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:n})=>{const[a,s]=Q.useState(!1),[i,o]=Q.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),c=async(k,w)=>{var F;if(!w||!w.trim())return w;const y=Th(),N=tf(y,"callGeminiAI"),U=`Mejora la redacción del siguiente texto con un tono técnico-pedagógico propio de informes educativos. Mantén el sentido original y NO agregues información nueva ni ejemplos inventados. Devuélvelo como un texto breve, claro y directo. Texto (${k}):

"""${w}"""`,j=await N({prompt:U,module:"CicloOPR"});return((F=j==null?void 0:j.data)==null?void 0:F.response)||w},A=Q.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",modelo:"",videoModeloUrl:"",foco:"",elementosIdentificar:"",brecha:{videoUrl:"",minutoInicial:"",minutoFinal:"",preguntas:"",indicadores:""}},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:i.curso||"",profesor:i.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:null}),[e]),[d,h]=Q.useState(t||A),[m,p]=Q.useState({}),v=k=>{const{name:w,value:y}=k.target,N=w.split(".");N.length>1?h(U=>{const j=JSON.parse(JSON.stringify(U));let F=j;for(let P=0;P<N.length-1;P++)F=F[N[P]];return F[N[N.length-1]]=y,j}):h(U=>({...U,[w]:y}))},x=(k,w,y)=>{h(N=>({...N,detallesObservacion:N.detallesObservacion.map(U=>U.id===k?{...U,[w]:y}:U)}))},E=()=>{const k=d.detallesObservacion[d.detallesObservacion.length-1],w=k?parseInt(k.minuto.split("-")[1]):0,y=`${w+1}-${w+5}`;h(N=>({...N,detallesObservacion:[...N.detallesObservacion,{id:`row_${Date.now()}`,minuto:y,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},_=k=>{h(w=>({...w,detallesObservacion:w.detallesObservacion.filter(y=>y.id!==k)}))},B=async(k,w)=>{p(y=>({...y,[k]:!0}));try{const y=`${Date.now()}-${w.name}`,U=`videos_opr/${e.id||"independent"}/${d.id||"temp"}/${y}`,j=await Vpe(w,U),F=k.split(".");F.length>1?h(P=>{const M=JSON.parse(JSON.stringify(P));let ee=M;for(let W=0;W<F.length-1;W++)ee=ee[F[W]];return ee[F[F.length-1]]=j,M}):h(P=>({...P,[k]:j}))}catch(y){console.error("Error al subir archivo:",y),alert("No se pudo subir el archivo. Inténtelo de nuevo.")}finally{p(y=>({...y,[k]:!1}))}},T=k=>{const w=k.split(".");w.length>1?h(y=>{const N=JSON.parse(JSON.stringify(y));let U=N;for(let j=0;j<w.length-1;j++)U=U[w[j]];return U[w[w.length-1]]="",N}):h(y=>({...y,[k]:""}))},I=async()=>{var k,w;s(!0);try{const y=d.retroalimentacion,N=d.planificacion,[U,j,F,P,M,ee,W,te,G,q]=await Promise.all([c("Éxito",y.exito),c("Modelo",y.modelo),c("Foco",y.foco),c("Elementos a identificar",y.elementosIdentificar),c("Brecha - Preguntas",((k=y.brecha)==null?void 0:k.preguntas)||""),c("Brecha - Indicadores",((w=y.brecha)==null?void 0:w.indicadores)||""),c("Planificación - Preparación",N.preparacion),c("Planificación - Objetivo",N.objetivo),c("Planificación - Actividad",N.actividad),c("Planificación - Tiempo",N.tiempo)]);h(z=>({...z,retroalimentacion:{...z.retroalimentacion,exito:U,modelo:j,foco:F,elementosIdentificar:P,brecha:{...z.retroalimentacion.brecha,preguntas:M,indicadores:ee}},planificacion:{...z.planificacion,preparacion:W,objetivo:te,actividad:G,tiempo:q}}))}catch(y){console.error(y),alert("No se pudo mejorar la redacción. Intenta nuevamente.")}s(!1)},L=async k=>{k.preventDefault(),await r(d)};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&l.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Básicos del Ciclo OPR"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),l.jsx("input",{type:"text",value:i.docente,onChange:k=>{o(w=>({...w,docente:k.target.value})),h(w=>({...w,seguimiento:{...w.seguimiento,profesor:k.target.value}}))},placeholder:"Nombre del docente",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsx("input",{type:"text",value:i.curso,onChange:k=>{o(w=>({...w,curso:k.target.value})),h(w=>({...w,seguimiento:{...w.seguimiento,curso:k.target.value}}))},placeholder:"Ej: 5° Básico",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("input",{type:"text",value:i.asignatura,onChange:k=>o(w=>({...w,asignatura:k.target.value})),placeholder:"Ej: Matemáticas",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]})]}),l.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[l.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:" Ciclo OPR - Mejorar Redacción"}),l.jsx("button",{type:"button",onClick:I,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md mb-2",disabled:a,children:a?"Mejorando redacción...":"Mejorar redacción del ciclo"}),l.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:[l.jsx("strong",{children:"Objetivo:"})," Mejora la redacción de los textos ya escritos, manteniendo el sentido original con tono técnico-pedagógico."]})]}),l.jsxs("form",{onSubmit:L,className:"space-y-8",children:[l.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 mb-6 p-4 border rounded-lg dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[" ",l.jsx(bme,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx("input",{type:"text",name:"nombreCiclo",value:d.nombreCiclo,onChange:v,placeholder:"Nombre o N° del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:v,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{type:"number",name:"registroN",value:d.registroN,onChange:v,placeholder:"Registro de Observación N°",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{type:"time",name:"horaInicio",value:d.horaInicio,onChange:v,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{type:"time",name:"horaTermino",value:d.horaTermino,onChange:v,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx(qpe,{label:"Subir video de observación de clase",onFileChange:k=>B("videoObservacionUrl",k),uploadedUrl:d.videoObservacionUrl,onRemove:()=>T("videoObservacionUrl"),isUploading:!!m.videoObservacionUrl})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 mb-6 p-4 border rounded-lg dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[" ",l.jsx(pme,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observación"]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left p-2",children:"Minuto"}),l.jsx("th",{className:"text-left p-2",children:"Acciones del Docente"}),l.jsx("th",{className:"text-left p-2",children:"Acciones de Estudiantes"}),l.jsx("th",{className:"text-left p-2",children:"Actividades"}),l.jsx("th",{className:"p-2"})]})}),l.jsx("tbody",{children:d.detallesObservacion.map(k=>l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("input",{type:"text",value:k.minuto,onChange:w=>x(k.id,"minuto",w.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})}),l.jsx("td",{children:l.jsx("textarea",{value:k.accionesDocente,onChange:w=>x(k.id,"accionesDocente",w.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})}),l.jsx("td",{children:l.jsx("textarea",{value:k.accionesEstudiantes,onChange:w=>x(k.id,"accionesEstudiantes",w.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})}),l.jsx("td",{children:l.jsx("textarea",{value:k.actividades,onChange:w=>x(k.id,"actividades",w.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})}),l.jsx("td",{children:d.detallesObservacion.length>1&&l.jsx("button",{type:"button",onClick:()=>_(k.id),className:"text-red-500 p-1"})})]},k.id))})]})}),l.jsx("button",{type:"button",onClick:E,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500",children:"+ Agregar Fila"})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 mb-6 p-4 border rounded-lg dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[" ",l.jsx(xme,{className:"w-5 h-5 text-green-600"})," Retroalimentación Docente"]}),l.jsx("textarea",{name:"retroalimentacion.exito",value:d.retroalimentacion.exito,onChange:v,placeholder:"Éxito",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{name:"retroalimentacion.modelo",value:d.retroalimentacion.modelo,onChange:v,placeholder:"Modelo",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{name:"retroalimentacion.foco",value:d.retroalimentacion.foco,onChange:v,placeholder:"Foco",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:d.retroalimentacion.elementosIdentificar,onChange:v,placeholder:"Elementos a Identificar",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),l.jsxs("div",{className:"p-3 border rounded-md dark:border-slate-600 space-y-3",children:[l.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Brecha"}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("input",{type:"text",name:"retroalimentacion.brecha.minutoInicial",value:d.retroalimentacion.brecha.minutoInicial,onChange:v,placeholder:"Minuto inicial",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{type:"text",name:"retroalimentacion.brecha.minutoFinal",value:d.retroalimentacion.brecha.minutoFinal,onChange:v,placeholder:"Minuto final",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("textarea",{name:"retroalimentacion.brecha.preguntas",value:d.retroalimentacion.brecha.preguntas,onChange:v,placeholder:"Preguntas",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{name:"retroalimentacion.brecha.indicadores",value:d.retroalimentacion.brecha.indicadores,onChange:v,placeholder:"Indicadores",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 mb-6 p-4 border rounded-lg dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[" ",l.jsx(dme,{className:"w-5 h-5 text-purple-600"})," Planificación de Práctica y Seguimiento"]}),l.jsx("textarea",{name:"planificacion.preparacion",value:d.planificacion.preparacion,onChange:v,placeholder:"Preparación",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{name:"planificacion.objetivo",value:d.planificacion.objetivo,onChange:v,placeholder:"Objetivo",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{name:"planificacion.actividad",value:d.planificacion.actividad,onChange:v,placeholder:"Actividad",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{type:"text",name:"planificacion.tiempo",value:d.planificacion.tiempo,onChange:v,placeholder:"Tiempo",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),l.jsxs("div",{className:"p-3 border rounded-md dark:border-slate-600 space-y-3",children:[l.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Seguimiento"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx("input",{type:"date",name:"seguimiento.fecha",value:d.seguimiento.fecha,onChange:v,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{type:"text",name:"seguimiento.firma",value:d.seguimiento.firma,onChange:v,placeholder:"Firma (Nombre de quien registra)",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Ciclo OPR"})]})]})]})},Wpe=()=>{const[e,t]=Q.useState([]),[r,n]=Q.useState([]),[a,s]=Q.useState(!1),[i,o]=Q.useState(!1),[c,A]=Q.useState(null),[d,h]=Q.useState("list"),[m,p]=Q.useState(null),[v,x]=Q.useState("general"),[E,_]=Q.useState(!1),[B,T]=Q.useState(""),I=Ax,L=Q.useMemo(()=>({fecha:new Date().toISOString(),docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[k,w]=Q.useState(L),y=Q.useCallback(async()=>{s(!0);try{const z=await Ppe();t(z)}catch{A("No se pudieron cargar los registros.")}finally{s(!1)}},[]),N=Q.useCallback(async()=>{o(!0);try{const Z=(await Kpe()).filter(R=>R.profile==="PROFESORADO").map(R=>R.nombreCompleto).sort();n(Z)}catch{A("No se pudo cargar la lista de profesores.")}finally{o(!1)}},[]);Q.useEffect(()=>{y(),N()},[y,N]);const U=async()=>{var z;if(!k.docente||!k.curso||!k.asignatura){alert("Por favor complete los datos básicos antes de generar el informe.");return}_(!0);try{const Z=Th(),R=tf(Z,"callGeminiAI"),K=Object.entries(k.rubricaResultados||{}).map(([fe,be])=>`${fe}: Nivel ${be}`).join(`
`),X={docente:k.docente,curso:k.curso,asignatura:k.asignatura,fecha:new Date(k.fecha).toLocaleDateString("es-CL"),bloques:k.bloques||"No especificado",rubricaResultados:K||"Sin evaluación de rúbrica",observacionesGenerales:k.observacionesGenerales||"Sin observaciones adicionales"},re=`Genera una retroalimentación pedagógica detallada y un resumen de observaciones basado en estos datos del acompañamiento docente:

      DATOS DEL ACOMPAÑAMIENTO:
      - Docente: ${X.docente}
      - Curso: ${X.curso}
      - Asignatura: ${X.asignatura}
      - Fecha: ${X.fecha}
      - Bloques horarios: ${X.bloques}
      
      RESULTADOS DE RÚBRICA:
      ${X.rubricaResultados}
      
      OBSERVACIONES GENERALES:
      ${X.observacionesGenerales}
      
      Por favor genera una retroalimentación con tono técnico pedagógico, clara y constructiva, con la siguiente estructura:
      1. INTRODUCCIÓN: Contextualización del acompañamiento
      2. FORTALEZAS OBSERVADAS: Aspectos destacados del desempeño docente
      3. OPORTUNIDADES DE MEJORA: Áreas a desarrollar
      4. RECOMENDACIONES ESPECÍFICAS: Estrategias concretas para implementar
      5. CONCLUSIÓN: Síntesis y próximos pasos
      
      La retroalimentación debe ser profesional, constructiva y orientada al desarrollo profesional docente.`,ne=await R({prompt:re,module:"AcompanamientoGeneral"}),ue=((z=ne==null?void 0:ne.data)==null?void 0:z.response)||"No se pudo generar la retroalimentación.";T(ue),w(fe=>({...fe,retroalimentacionConsolidada:ue})),j(ue)}catch(Z){console.error("Error al generar retroalimentación:",Z),alert("No se pudo generar la retroalimentación. Intente nuevamente.")}finally{_(!1)}},j=z=>{const Z=new ur,R=Z.internal.pageSize.getWidth(),K=Z.internal.pageSize.getHeight(),X=15,re=R-X*2;Z.setFontSize(18),Z.setFont("helvetica","bold"),Z.text("INFORME DE ACOMPAÑAMIENTO DOCENTE",R/2,20,{align:"center"}),Z.setLineWidth(.5),Z.line(X,25,R-X,25),Z.setFontSize(10),Z.setFont("helvetica","normal");let ne=35;if([["Docente:",k.docente],["Curso:",k.curso],["Asignatura:",k.asignatura],["Fecha:",new Date(k.fecha).toLocaleDateString("es-CL")],["Bloques horarios:",k.bloques||"No especificado"]].forEach(([Ce,me])=>{Z.setFont("helvetica","bold"),Z.text(Ce,X,ne),Z.setFont("helvetica","normal"),Z.text(me,X+35,ne),ne+=7}),ne+=10,Z.setFontSize(12),Z.setFont("helvetica","bold"),Z.text("RESULTADOS DE EVALUACIÓN",X,ne),ne+=10,Object.keys(k.rubricaResultados||{}).length>0){const Ce=Object.entries(k.rubricaResultados).map(([me,oe])=>[me,`Nivel ${oe}`,oe===1?"Débil":oe===2?"Incipiente":oe===3?"Satisfactorio":"Avanzado"]);ic(Z,{startY:ne,head:[["Criterio","Nivel","Descripción"]],body:Ce,theme:"grid",headStyles:{fillColor:[245,158,11],textColor:255},margin:{left:X,right:X},styles:{fontSize:9}}),ne=Z.lastAutoTable.finalY+15}if(k.observacionesGenerales){Z.setFontSize(12),Z.setFont("helvetica","bold"),Z.text("OBSERVACIONES GENERALES",X,ne),ne+=8,Z.setFontSize(10),Z.setFont("helvetica","normal");const Ce=Z.splitTextToSize(k.observacionesGenerales,re);Z.text(Ce,X,ne),ne+=Ce.length*5+10}{ne>K-60&&(Z.addPage(),ne=20),Z.setFontSize(12),Z.setFont("helvetica","bold"),Z.text("RETROALIMENTACIÓN PEDAGÓGICA",X,ne),ne+=8,Z.setFontSize(10),Z.setFont("helvetica","normal");const Ce=z.split(/\d\.\s+[A-ZÁÉÍÓÚÑ\s]+:/g),me=z.match(/\d\.\s+[A-ZÁÉÍÓÚÑ\s]+:/g)||[];Ce.forEach((oe,Le)=>{if(oe.trim()){ne>K-40&&(Z.addPage(),ne=20),me[Le-1]&&(Z.setFont("helvetica","bold"),Z.text(me[Le-1],X,ne),ne+=7,Z.setFont("helvetica","normal"));const Ye=Z.splitTextToSize(oe.trim(),re);Z.text(Ye,X,ne),ne+=Ye.length*5+5}})}const fe=Z.getNumberOfPages();for(let Ce=1;Ce<=fe;Ce++)Z.setPage(Ce),Z.setFontSize(8),Z.setFont("helvetica","italic"),Z.text(`Generado el ${new Date().toLocaleDateString("es-CL")} - Página ${Ce} de ${fe}`,R/2,K-10,{align:"center"});const be=`Informe_Acompañamiento_${k.docente}_${k.curso}_${new Date().toISOString().split("T")[0]}.pdf`;Z.save(be)},F=z=>{w(Z=>({...Z,[z.target.name]:z.target.value}))},P=(z,Z)=>{w(R=>({...R,rubricaResultados:{...R.rubricaResultados,[z]:Z}}))},M=async z=>{if(z.preventDefault(),!k.docente||!k.curso||!k.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}try{if(m)await Qpe(m,k),alert("¡Actualizado correctamente!");else{const Z=await Mpe(k);p(Z.id),w(R=>({...R,id:Z.id})),alert('¡Guardado correctamente! Ahora puedes agregar <Wrench className="w-5 h-5 text-blue-500" /> {/* Ícono agregado */}Ciclos OPR.')}await y()}catch{A("Error al guardar el registro.")}},ee=()=>{w(L),p(null),h("form"),x("general"),A(null),T("")},W=z=>{w(z),p(z.id),h("form"),x("general"),A(null),T("")},te=async z=>{if(window.confirm("¿Está seguro de que desea eliminar este registro? Esto no eliminará los ciclos OPR asociados."))try{await Hpe(z),await y()}catch{A("No se pudo eliminar el registro.")}},G=()=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Módulo de Acompañamiento Docente"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>{ee(),x("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600",children:"+ Acompañamiento General"}),l.jsx("button",{onClick:()=>{w(L),p(null),h("form"),x("opr"),A(null),T("")},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600",children:"+ Ciclo OPR"})]})]}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 mb-3",children:[" ",l.jsx(hme,{className:"w-5 h-5 text-amber-500"})," ","Acompañamientos Generales"]}),l.jsxs("div",{className:"space-y-3",children:[a&&l.jsx("p",{children:"Cargando..."}),!a&&e.filter(z=>z.id).length>0?e.filter(z=>z.id).map(z=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-green-50 dark:bg-green-900/20 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:z.docente}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[z.curso," - ",z.asignatura]}),l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(z.fecha).toLocaleDateString("es-CL")]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{W(z),x("general")},className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm",children:"Ver/Editar"}),l.jsx("button",{onClick:()=>{W(z),x("opr")},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"+ Agregar OPR"}),l.jsx("button",{onClick:()=>te(z.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"️"})]})]},z.id)):!a&&l.jsx("p",{className:"text-slate-500 italic",children:"No hay acompañamientos generales registrados"})]})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 mb-3",children:[" ",l.jsx(yme,{className:"w-5 h-5 text-blue-500"})," ","Ciclos OPR"]}),l.jsx("div",{className:"space-y-3",children:l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 italic",children:"Los ciclos OPR se pueden crear de forma independiente o asociados a un acompañamiento general."})})]})]}),q=()=>{const z=m?e.find(R=>R.id===m):null,Z={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:k.docente||"",curso:k.curso||"",asignatura:k.asignatura||"",bloques:k.bloques||"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return l.jsxs("div",{className:"animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:v==="general"?m?"Editando Acompañamiento General":"Nuevo Acompañamiento General":"Ciclo OPR"}),l.jsx("button",{type:"button",onClick:()=>h("list"),className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold",children:"← Volver al listado"})]}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>x("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${v==="general"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Acompañamiento General"}),l.jsx("button",{onClick:()=>x("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${v==="opr"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Ciclo OPR"})]})}),c&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:c}),v==="general"&&l.jsxs("form",{onSubmit:M,className:"space-y-8",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30",children:[l.jsx("h4",{className:"text-lg font-semibold mb-2 text-green-700 dark:text-green-300",children:" Acompañamiento General - Generar Informe con IA"}),l.jsx("button",{type:"button",onClick:U,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md mb-2",disabled:E,children:E?"Generando retroalimentación e informe...":"Generar retroalimentación e informe PDF"}),l.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:[l.jsx("strong",{children:"Objetivo:"})," Genera automáticamente retroalimentación pedagógica e informe PDF basándose en los datos ingresados (docente, curso, asignatura, observaciones y rúbrica)."]}),B&&l.jsxs("div",{className:"mt-4 p-3 bg-white dark:bg-slate-800 rounded-md",children:[l.jsx("h5",{className:"font-semibold text-sm mb-2",children:"Retroalimentación generada:"}),l.jsx("div",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap max-h-60 overflow-y-auto",children:B})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),l.jsxs("select",{name:"docente",value:k.docente,onChange:F,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[l.jsx("option",{value:"",children:i?"Cargando...":"Seleccione"}),r.map(R=>l.jsx("option",{value:R,children:R},R))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsxs("select",{name:"curso",value:k.curso,onChange:F,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione"}),qa.map(R=>l.jsx("option",{value:R,children:R},R))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{name:"asignatura",value:k.asignatura,onChange:F,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione"}),yi.map(R=>l.jsx("option",{value:R,children:R},R))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),l.jsx("input",{type:"text",name:"bloques",value:k.bloques,onChange:F,placeholder:"Ej: 3-4",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones Generales"}),l.jsx("textarea",{name:"observacionesGenerales",value:k.observacionesGenerales,onChange:F,rows:4,placeholder:"Ingrese sus observaciones sobre la clase...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:I.map(R=>l.jsx(mt.Fragment,{children:R.criteria.map((K,X)=>l.jsxs("tr",{children:[X===0&&l.jsx("td",{rowSpan:R.criteria.length,className:"px-3 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600",children:R.domain}),l.jsx("td",{className:"px-3 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:K.name}),K.levels.map((re,ne)=>{const ue=ne+1,fe=k.rubricaResultados[K.name]===ue;return l.jsx("td",{onClick:()=>P(K.name,ue),className:`px-3 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${fe?"bg-amber-100 dark:bg-amber-900/30":"hover:bg-amber-50 dark:hover:bg-slate-700"}`,children:re},ue)})]},K.name))},R.domain))})]})}),k.retroalimentacionConsolidada&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"retroalimentacionConsolidada",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Retroalimentación Consolidada (Generada por IA)"}),l.jsx("textarea",{name:"retroalimentacionConsolidada",value:k.retroalimentacionConsolidada,onChange:F,rows:6,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("div",{className:"flex justify-end gap-4",children:l.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-md",children:[m?"Actualizar":"Guardar"," Acompañamiento"]})})]}),v==="opr"&&l.jsx($pe,{acompanamiento:z||Z,cicloToEdit:null,onSave:async R=>{try{if(z)await eD(R),alert("Ciclo OPR guardado exitosamente");else{const K={...R,acompanamientoId:null,docenteInfo:k.docente||"No especificado",cursoInfo:k.curso||"No especificado"};await eD(K),alert("Ciclo OPR independiente guardado exitosamente")}h("list")}catch(K){console.error("Error al guardar ciclo OPR:",K),alert("Error al guardar el ciclo OPR")}},onCancel:()=>h("list")})]})};return l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d==="list"?G():q()})})},ZB="mensajes_internos",Xpe="usuarios",oQ="mensajes_read_status",lQ=e=>{var r,n;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fecha}},Ype=(e,t)=>{const r=nr(Ft(kt,ZB),Mn("participants","array-contains",e),en("fecha","desc"));return br(r,a=>{const s=a.docs.map(i=>lQ(i));t(s)},a=>{console.error("Error al suscribirse a los mensajes:",a),t([])})},Jpe=async e=>{try{const t={...e,participants:[e.de,e.para],fecha:Ar.fromDate(new Date)};await ha(Ft(kt,ZB),t)}catch(t){throw console.error("Error al enviar el mensaje:",t),new Error("No se pudo enviar el mensaje.")}},Zpe=async e=>{try{const t=vr(kt,ZB,e);await zs(t)}catch(t){throw console.error("Error al eliminar el mensaje:",t),new Error("No se pudo eliminar el mensaje.")}},ege=(e,t)=>{const r=vr(kt,oQ,e);return br(r,a=>{a.exists()?t(a.data()):t({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),t({announcements:[],messages:[]})})},tge=async(e,t)=>{try{const r=vr(kt,oQ,e);await no(r,{messages:oJ(t)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},rge=e=>{const t=nr(Ft(kt,Xpe),en("nombreCompleto","asc"));return br(t,n=>{const a=n.docs.map(s=>lQ(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},nge=({currentUser:e,refreshUnreadCount:t})=>{const[r,n]=Q.useState("inbox"),[a,s]=Q.useState([]),[i,o]=Q.useState([]),[c,A]=Q.useState(null),[d,h]=Q.useState({announcements:[],messages:[]}),[m,p]=Q.useState(!0),v={para:"",asunto:"",cuerpo:""},[x,E]=Q.useState(v);Q.useEffect(()=>{if(!e.id||!e.email){p(!1);return}p(!0);const w=Ype(e.email,U=>{s(U),p(!1)}),y=rge(o),N=ege(e.id,U=>{h(U),t()});return()=>{w(),y(),N()}},[e.id,e.email,t]);const _=w=>{A(w),r==="inbox"&&!d.messages.includes(w.id)&&tge(e.id,w.id).catch(y=>{console.error("Failed to mark message as read:",y)})},B=async w=>{if(w.preventDefault(),!x.para||!x.asunto.trim()||!x.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const y={de:e.email,para:x.para,asunto:x.asunto,cuerpo:x.cuerpo};try{await Jpe(y),E(v),n("sent")}catch(N){console.error("Error sending message:",N),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},T=async w=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await Zpe(w),A(null)}catch(y){console.error("Error deleting message:",y),alert("No se pudo eliminar el mensaje.")}},I=w=>{E({para:w.de,asunto:`Re: ${w.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${w.de}
Fecha: ${new Date(w.fecha).toLocaleString("es-CL")}

${w.cuerpo}`}),n("compose")},L=Q.useMemo(()=>a.filter(w=>w.para===e.email),[a,e.email]),k=Q.useMemo(()=>a.filter(w=>w.de===e.email),[a,e.email]);return m?l.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[l.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[l.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:l.jsx("button",{onClick:()=>{n("compose"),A(null),E(v)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),l.jsxs("nav",{className:"p-2 space-y-1",children:[l.jsx("button",{onClick:()=>{n("inbox"),A(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),l.jsx("button",{onClick:()=>{n("sent"),A(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&l.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?L:k).map(w=>{const y=r==="inbox"&&!d.messages.includes(w.id);return l.jsxs("div",{onClick:()=>_(w),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(c==null?void 0:c.id)===w.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("p",{className:`font-bold truncate ${y?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?w.de:`Para: ${w.para}`}),y&&l.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),l.jsx("p",{className:`truncate text-sm ${y?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:w.asunto}),l.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(w.fecha).toLocaleString("es-CL")})]},w.id)})}),l.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),l.jsxs("form",{onSubmit:B,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),l.jsxs("select",{id:"para",value:x.para,onChange:w=>E({...x,para:w.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(w=>w.email!==e.email).map(w=>l.jsxs("option",{value:w.email,children:[w.nombreCompleto," (",w.email,")"]},w.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),l.jsx("input",{type:"text",id:"asunto",value:x.asunto,onChange:w=>E({...x,asunto:w.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),l.jsx("textarea",{id:"cuerpo",value:x.cuerpo,onChange:w=>E({...x,cuerpo:w.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):c?l.jsxs("div",{children:[l.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c.asunto}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[l.jsx("strong",{children:"De:"})," ",c.de," ",l.jsx("br",{}),l.jsx("strong",{children:"Para:"})," ",c.para," ",l.jsx("br",{}),l.jsx("strong",{children:"Fecha:"})," ",new Date(c.fecha).toLocaleString("es-CL")]})]}),l.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:c.cuerpo}),l.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&l.jsx("button",{onClick:()=>I(c),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),l.jsx("button",{onClick:()=>T(c.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):l.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:l.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var G4=function(e,t){return G4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},G4(e,t)};function Xc(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");G4(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var K4=function(){return K4=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},K4.apply(this,arguments)};function uo(e,t,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function o(d){try{A(n.next(d))}catch(h){i(h)}}function c(d){try{A(n.throw(d))}catch(h){i(h)}}function A(d){d.done?s(d.value):a(d.value).then(o,c)}A((n=n.apply(e,[])).next())})}function Vi(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(A){return function(d){return c([A,d])}}function c(A){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=A[0]&2?a.return:A[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,A[1])).done)return s;switch(a=0,s&&(A=[A[0]&2,s.value]),A[0]){case 0:case 1:s=A;break;case 4:return r.label++,{value:A[1],done:!1};case 5:r.label++,a=A[1],A=[0];continue;case 7:A=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(A[0]===6||A[0]===2)){r=0;continue}if(A[0]===3&&(!s||A[1]>s[0]&&A[1]<s[3])){r.label=A[1];break}if(A[0]===6&&r.label<s[1]){r.label=s[1],s=A;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(A);break}s[2]&&r.ops.pop(),r.trys.pop();continue}A=t.call(e,r)}catch(d){A=[6,d],a=0}finally{n=s=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}function _b(e,t,r){if(arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||t)}var nd=function(){function e(t,r,n,a){this.left=t,this.top=r,this.width=n,this.height=a}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),cE=function(e,t){return nd.fromClientRect(e,t.getBoundingClientRect())},age=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new nd(0,0,n,a)},uE=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},ls=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},tD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",sge=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Sb=0;Sb<tD.length;Sb++)sge[tD.charCodeAt(Sb)]=Sb;var rD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Nb=0;Nb<rD.length;Nb++)Wg[rD.charCodeAt(Nb)]=Nb;var ige=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(A)?A:new Uint8Array(A);for(n=0;n<r;n+=4)s=Wg[e.charCodeAt(n)],i=Wg[e.charCodeAt(n+1)],o=Wg[e.charCodeAt(n+2)],c=Wg[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|c&63;return A},oge=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},lge=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},qh=5,e3=11,$5=2,cge=e3-qh,cQ=65536>>qh,uge=1<<qh,W5=uge-1,Age=1024>>qh,dge=cQ+Age,fge=dge,hge=32,mge=fge+hge,pge=65536>>e3,gge=1<<cge,xge=gge-1,nD=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},vge=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},bge=function(e,t){var r=ige(e),n=Array.isArray(r)?lge(r):new Uint32Array(r),a=Array.isArray(r)?oge(r):new Uint16Array(r),s=24,i=nD(a,s/2,n[4]/2),o=n[5]===2?nD(a,(s+n[4])/2):vge(n,Math.ceil((s+n[4])/4));return new wge(n[0],n[1],n[2],n[3],i,o)},wge=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>qh],r=(r<<$5)+(t&W5),this.data[r];if(t<=65535)return r=this.index[cQ+(t-55296>>qh)],r=(r<<$5)+(t&W5),this.data[r];if(t<this.highStart)return r=mge-pge+(t>>e3),r=this.index[r],r+=t>>qh&xge,r=this.index[r],r=(r<<$5)+(t&W5),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),aD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yge=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Bb=0;Bb<aD.length;Bb++)yge[aD.charCodeAt(Bb)]=Bb;var Ege="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",sD=50,Cge=1,uQ=2,AQ=3,_ge=4,Sge=5,iD=7,dQ=8,oD=9,gf=10,q4=11,lD=12,$4=13,Nge=14,Xg=15,W4=16,kb=17,Ng=18,Bge=19,cD=20,X4=21,Bg=22,X5=23,sm=24,ll=25,Yg=26,Jg=27,im=28,kge=29,Ih=30,Tge=31,Tb=32,Ib=33,Y4=34,J4=35,Z4=36,s1=37,eS=38,B2=39,k2=40,Y5=41,fQ=42,Ige=43,Fge=[9001,65288],hQ="!",An="×",Fb="÷",tS=bge(Ege),RA=[Ih,Z4],rS=[Cge,uQ,AQ,Sge],mQ=[gf,dQ],uD=[Jg,Yg],jge=rS.concat(mQ),AD=[eS,B2,k2,Y4,J4],Dge=[Xg,$4],Rge=function(e,t){t===void 0&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(s,i){var o=tS.get(s);if(o>sD?(a.push(!0),o-=sD):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(W4);if(o===_ge||o===q4){if(i===0)return n.push(i),r.push(Ih);var c=r[i-1];return jge.indexOf(c)===-1?(n.push(n[i-1]),r.push(c)):(n.push(i),r.push(Ih))}if(n.push(i),o===Tge)return r.push(t==="strict"?X4:s1);if(o===fQ||o===kge)return r.push(Ih);if(o===Ige)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(s1):r.push(Ih);r.push(o)}),[n,r,a]},J5=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===t)return!0;if(i!==gf)break}if(a===gf)for(var s=r;s>0;){s--;var o=n[s];if(Array.isArray(e)?e.indexOf(o)!==-1:e===o)for(var c=r;c<=n.length;){c++;var i=n[c];if(i===t)return!0;if(i!==gf)break}if(o!==gf)break}return!1},dD=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===gf)r--;else return n}return 0},Lge=function(e,t,r,n,a){if(r[n]===0)return An;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return An;var i=s-1,o=s+1,c=t[s],A=i>=0?t[i]:0,d=t[o];if(c===uQ&&d===AQ)return An;if(rS.indexOf(c)!==-1)return hQ;if(rS.indexOf(d)!==-1||mQ.indexOf(d)!==-1)return An;if(dD(s,t)===dQ)return Fb;if(tS.get(e[s])===q4||(c===Tb||c===Ib)&&tS.get(e[o])===q4||c===iD||d===iD||c===oD||[gf,$4,Xg].indexOf(c)===-1&&d===oD||[kb,Ng,Bge,sm,im].indexOf(d)!==-1||dD(s,t)===Bg||J5(X5,Bg,s,t)||J5([kb,Ng],X4,s,t)||J5(lD,lD,s,t))return An;if(c===gf)return Fb;if(c===X5||d===X5)return An;if(d===W4||c===W4)return Fb;if([$4,Xg,X4].indexOf(d)!==-1||c===Nge||A===Z4&&Dge.indexOf(c)!==-1||c===im&&d===Z4||d===cD||RA.indexOf(d)!==-1&&c===ll||RA.indexOf(c)!==-1&&d===ll||c===Jg&&[s1,Tb,Ib].indexOf(d)!==-1||[s1,Tb,Ib].indexOf(c)!==-1&&d===Yg||RA.indexOf(c)!==-1&&uD.indexOf(d)!==-1||uD.indexOf(c)!==-1&&RA.indexOf(d)!==-1||[Jg,Yg].indexOf(c)!==-1&&(d===ll||[Bg,Xg].indexOf(d)!==-1&&t[o+1]===ll)||[Bg,Xg].indexOf(c)!==-1&&d===ll||c===ll&&[ll,im,sm].indexOf(d)!==-1)return An;if([ll,im,sm,kb,Ng].indexOf(d)!==-1)for(var h=s;h>=0;){var m=t[h];if(m===ll)return An;if([im,sm].indexOf(m)!==-1)h--;else break}if([Jg,Yg].indexOf(d)!==-1)for(var h=[kb,Ng].indexOf(c)!==-1?i:s;h>=0;){var m=t[h];if(m===ll)return An;if([im,sm].indexOf(m)!==-1)h--;else break}if(eS===c&&[eS,B2,Y4,J4].indexOf(d)!==-1||[B2,Y4].indexOf(c)!==-1&&[B2,k2].indexOf(d)!==-1||[k2,J4].indexOf(c)!==-1&&d===k2||AD.indexOf(c)!==-1&&[cD,Yg].indexOf(d)!==-1||AD.indexOf(d)!==-1&&c===Jg||RA.indexOf(c)!==-1&&RA.indexOf(d)!==-1||c===sm&&RA.indexOf(d)!==-1||RA.concat(ll).indexOf(c)!==-1&&d===Bg&&Fge.indexOf(e[o])===-1||RA.concat(ll).indexOf(d)!==-1&&c===Ng)return An;if(c===Y5&&d===Y5){for(var p=r[s],v=1;p>0&&(p--,t[p]===Y5);)v++;if(v%2!==0)return An}return c===Tb&&d===Ib?An:Fb},Oge=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=Rge(e,t.lineBreak),n=r[0],a=r[1],s=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(o){return[ll,Ih,fQ].indexOf(o)!==-1?s1:o}));var i=t.wordBreak==="keep-all"?s.map(function(o,c){return o&&e[c]>=19968&&e[c]<=40959}):void 0;return[n,a,i]},Uge=function(){function e(t,r,n,a){this.codePoints=t,this.required=r===hQ,this.start=n,this.end=a}return e.prototype.slice=function(){return ls.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),Pge=function(e,t){var r=uE(e),n=Oge(r,t),a=n[0],s=n[1],i=n[2],o=r.length,c=0,A=0;return{next:function(){if(A>=o)return{done:!0,value:null};for(var d=An;A<o&&(d=Lge(r,s,a,++A,i))===An;);if(d!==An||A===o){var h=new Uge(r,d,c,A);return c=A,{value:h,done:!1}}return{done:!0,value:null}}}},Mge=1,Qge=2,q1=4,fD=8,Pw=10,hD=47,Cx=92,Hge=9,Vge=32,jb=34,kg=61,zge=35,Gge=36,Kge=37,Db=39,Rb=40,Tg=41,qge=95,Ro=45,$ge=33,Wge=60,Xge=62,Yge=64,Jge=91,Zge=93,exe=61,txe=123,Lb=63,rxe=125,mD=124,nxe=126,axe=128,pD=65533,Z5=42,Rh=43,sxe=44,ixe=58,oxe=59,i1=46,lxe=0,cxe=8,uxe=11,Axe=14,dxe=31,fxe=127,Tu=-1,pQ=48,gQ=97,xQ=101,hxe=102,mxe=117,pxe=122,vQ=65,bQ=69,wQ=70,gxe=85,xxe=90,qi=function(e){return e>=pQ&&e<=57},vxe=function(e){return e>=55296&&e<=57343},om=function(e){return qi(e)||e>=vQ&&e<=wQ||e>=gQ&&e<=hxe},bxe=function(e){return e>=gQ&&e<=pxe},wxe=function(e){return e>=vQ&&e<=xxe},yxe=function(e){return bxe(e)||wxe(e)},Exe=function(e){return e>=axe},Ob=function(e){return e===Pw||e===Hge||e===Vge},Mw=function(e){return yxe(e)||Exe(e)||e===qge},gD=function(e){return Mw(e)||qi(e)||e===Ro},Cxe=function(e){return e>=lxe&&e<=cxe||e===uxe||e>=Axe&&e<=dxe||e===fxe},rf=function(e,t){return e!==Cx?!1:t!==Pw},Ub=function(e,t,r){return e===Ro?Mw(t)||rf(t,r):Mw(e)?!0:!!(e===Cx&&rf(e,t))},e_=function(e,t,r){return e===Rh||e===Ro?qi(t)?!0:t===i1&&qi(r):qi(e===i1?t:e)},_xe=function(e){var t=0,r=1;(e[t]===Rh||e[t]===Ro)&&(e[t]===Ro&&(r=-1),t++);for(var n=[];qi(e[t]);)n.push(e[t++]);var a=n.length?parseInt(ls.apply(void 0,n),10):0;e[t]===i1&&t++;for(var s=[];qi(e[t]);)s.push(e[t++]);var i=s.length,o=i?parseInt(ls.apply(void 0,s),10):0;(e[t]===bQ||e[t]===xQ)&&t++;var c=1;(e[t]===Rh||e[t]===Ro)&&(e[t]===Ro&&(c=-1),t++);for(var A=[];qi(e[t]);)A.push(e[t++]);var d=A.length?parseInt(ls.apply(void 0,A),10):0;return r*(a+o*Math.pow(10,-i))*Math.pow(10,c*d)},Sxe={type:2},Nxe={type:3},Bxe={type:4},kxe={type:13},Txe={type:8},Ixe={type:21},Fxe={type:9},jxe={type:10},Dxe={type:11},Rxe={type:12},Lxe={type:14},Pb={type:23},Oxe={type:1},Uxe={type:25},Pxe={type:24},Mxe={type:26},Qxe={type:27},Hxe={type:28},Vxe={type:29},zxe={type:31},nS={type:32},yQ=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(uE(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==nS;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case jb:return this.consumeStringToken(jb);case zge:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(gD(r)||rf(n,a)){var s=Ub(r,n,a)?Qge:Mge,i=this.consumeName();return{type:5,value:i,flags:s}}break;case Gge:if(this.peekCodePoint(0)===kg)return this.consumeCodePoint(),kxe;break;case Db:return this.consumeStringToken(Db);case Rb:return Sxe;case Tg:return Nxe;case Z5:if(this.peekCodePoint(0)===kg)return this.consumeCodePoint(),Lxe;break;case Rh:if(e_(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case sxe:return Bxe;case Ro:var o=t,c=this.peekCodePoint(0),A=this.peekCodePoint(1);if(e_(o,c,A))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(Ub(o,c,A))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===Ro&&A===Xge)return this.consumeCodePoint(),this.consumeCodePoint(),Pxe;break;case i1:if(e_(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case hD:if(this.peekCodePoint(0)===Z5)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===Z5&&(d=this.consumeCodePoint(),d===hD))return this.consumeToken();if(d===Tu)return this.consumeToken()}break;case ixe:return Mxe;case oxe:return Qxe;case Wge:if(this.peekCodePoint(0)===$ge&&this.peekCodePoint(1)===Ro&&this.peekCodePoint(2)===Ro)return this.consumeCodePoint(),this.consumeCodePoint(),Uxe;break;case Yge:var h=this.peekCodePoint(0),m=this.peekCodePoint(1),p=this.peekCodePoint(2);if(Ub(h,m,p)){var i=this.consumeName();return{type:7,value:i}}break;case Jge:return Hxe;case Cx:if(rf(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case Zge:return Vxe;case exe:if(this.peekCodePoint(0)===kg)return this.consumeCodePoint(),Txe;break;case txe:return Dxe;case rxe:return Rxe;case mxe:case gxe:var v=this.peekCodePoint(0),x=this.peekCodePoint(1);return v===Rh&&(om(x)||x===Lb)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case mD:if(this.peekCodePoint(0)===kg)return this.consumeCodePoint(),Fxe;if(this.peekCodePoint(0)===mD)return this.consumeCodePoint(),Ixe;break;case nxe:if(this.peekCodePoint(0)===kg)return this.consumeCodePoint(),jxe;break;case Tu:return nS}return Ob(t)?(this.consumeWhiteSpace(),zxe):qi(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):Mw(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:ls(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();om(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===Lb&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(ls.apply(void 0,t.map(function(c){return c===Lb?pQ:c})),16),s=parseInt(ls.apply(void 0,t.map(function(c){return c===Lb?wQ:c})),16);return{type:30,start:a,end:s}}var i=parseInt(ls.apply(void 0,t),16);if(this.peekCodePoint(0)===Ro&&om(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];om(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var s=parseInt(ls.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===Rb?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Rb?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Tu)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Db||r===jb){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Tu||this.peekCodePoint(0)===Tg)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),Pb)}for(;;){var a=this.consumeCodePoint();if(a===Tu||a===Tg)return{type:22,value:ls.apply(void 0,t)};if(Ob(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Tu||this.peekCodePoint(0)===Tg?(this.consumeCodePoint(),{type:22,value:ls.apply(void 0,t)}):(this.consumeBadUrlRemnants(),Pb);if(a===jb||a===Db||a===Rb||Cxe(a))return this.consumeBadUrlRemnants(),Pb;if(a===Cx)if(rf(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Pb;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;Ob(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===Tg||t===Tu)return;rf(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var a=Math.min(r,t);n+=ls.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var a=this._value[n];if(a===Tu||a===void 0||a===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===Pw)return this._value.splice(0,n),Oxe;if(a===Cx){var s=this._value[n+1];s!==Tu&&s!==void 0&&(s===Pw?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):rf(a,s)&&(r+=this.consumeStringSlice(n),r+=ls(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=q1,n=this.peekCodePoint(0);for((n===Rh||n===Ro)&&t.push(this.consumeCodePoint());qi(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===i1&&qi(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=fD;qi(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===bQ||n===xQ)&&((a===Rh||a===Ro)&&qi(s)||qi(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=fD;qi(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[_xe(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Ub(a,s,i)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return a===Kge?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(om(t)){for(var r=ls(t);om(this.peekCodePoint(0))&&r.length<6;)r+=ls(this.consumeCodePoint());Ob(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||vxe(n)||n>1114111?pD:n}return t===Tu?pD:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(gD(r))t+=ls(r);else if(rf(r,this.peekCodePoint(0)))t+=ls(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),EQ=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new yQ;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||Kxe(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?nS:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),$1=function(e){return e.type===15},Rp=function(e){return e.type===17},sa=function(e){return e.type===20},Gxe=function(e){return e.type===0},aS=function(e,t){return sa(e)&&e.value===t},CQ=function(e){return e.type!==31},pp=function(e){return e.type!==31&&e.type!==4},rA=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},Kxe=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Kf=function(e){return e.type===17||e.type===15},Ss=function(e){return e.type===16||Kf(e)},_Q=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Ei={type:17,number:0,flags:q1},t3={type:16,number:50,flags:q1},xf={type:16,number:100,flags:q1},Zg=function(e,t,r){var n=e[0],a=e[1];return[fa(n,t),fa(typeof a<"u"?a:n,r)]},fa=function(e,t){if(e.type===16)return e.number/100*t;if($1(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},SQ="deg",NQ="grad",BQ="rad",kQ="turn",AE={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case SQ:return Math.PI*t.number/180;case NQ:return Math.PI/200*t.number;case BQ:return t.number;case kQ:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},TQ=function(e){return e.type===15&&(e.unit===SQ||e.unit===NQ||e.unit===BQ||e.unit===kQ)},IQ=function(e){var t=e.filter(sa).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Ei,Ei];case"to top":case"bottom":return rc(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Ei,xf];case"to right":case"left":return rc(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[xf,xf];case"to bottom":case"top":return rc(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[xf,Ei];case"to left":case"right":return rc(270)}return 0},rc=function(e){return Math.PI*e/180},Nf={name:"color",parse:function(e,t){if(t.type===18){var r=qxe[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return vf(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3),i=t.value.substring(3,4);return vf(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6);return vf(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),i=t.value.substring(6,8);return vf(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(t.type===20){var o=$A[t.value.toUpperCase()];if(typeof o<"u")return o}return $A.TRANSPARENT}},Bf=function(e){return(255&e)===0},Zs=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},vf=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},xD=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},vD=function(e,t){var r=t.filter(pp);if(r.length===3){var n=r.map(xD),a=n[0],s=n[1],i=n[2];return vf(a,s,i,1)}if(r.length===4){var o=r.map(xD),a=o[0],s=o[1],i=o[2],c=o[3];return vf(a,s,i,c)}return 0};function t_(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var bD=function(e,t){var r=t.filter(pp),n=r[0],a=r[1],s=r[2],i=r[3],o=(n.type===17?rc(n.number):AE.parse(e,n))/(Math.PI*2),c=Ss(a)?a.number/100:0,A=Ss(s)?s.number/100:0,d=typeof i<"u"&&Ss(i)?fa(i,1):1;if(c===0)return vf(A*255,A*255,A*255,1);var h=A<=.5?A*(c+1):A+c-A*c,m=A*2-h,p=t_(m,h,o+1/3),v=t_(m,h,o),x=t_(m,h,o-1/3);return vf(p*255,v*255,x*255,d)},qxe={hsl:bD,hsla:bD,rgb:vD,rgba:vD},_x=function(e,t){return Nf.parse(e,EQ.create(t).parseComponentValue())},$A={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},$xe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(sa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Wxe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},dE=function(e,t){var r=Nf.parse(e,t[0]),n=t[1];return n&&Ss(n)?{color:r,stop:n}:{color:r,stop:null}},wD=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=Ei),n.stop===null&&(n.stop=xf);for(var a=[],s=0,i=0;i<e.length;i++){var o=e[i].stop;if(o!==null){var c=fa(o,t);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var A=null,i=0;i<a.length;i++){var d=a[i];if(d===null)A===null&&(A=i);else if(A!==null){for(var h=i-A,m=a[A-1],p=(d-m)/(h+1),v=1;v<=h;v++)a[A+v-1]=p*v;A=null}}return e.map(function(x,E){var _=x.color;return{color:_,stop:Math.max(Math.min(1,a[E]/t),0)}})},Xxe=function(e,t,r){var n=t/2,a=r/2,s=fa(e[0],t)-n,i=a-fa(e[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},Yxe=function(e,t,r){var n=typeof e=="number"?e:Xxe(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),s=t/2,i=r/2,o=a/2,c=Math.sin(n-Math.PI/2)*o,A=Math.cos(n-Math.PI/2)*o;return[a,s-A,s+A,i-c,i+c]},Lc=function(e,t){return Math.sqrt(e*e+t*t)},yD=function(e,t,r,n,a){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(i,o){var c=o[0],A=o[1],d=Lc(r-c,n-A);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},Jxe=function(e,t,r,n,a){var s=0,i=0;switch(e.size){case 0:e.shape===0?s=i=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)s=i=Math.min(Lc(t,r),Lc(t,r-a),Lc(t-n,r),Lc(t-n,r-a));else if(e.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),c=yD(n,a,t,r,!0),A=c[0],d=c[1];s=Lc(A-t,(d-r)/o),i=o*s}break;case 1:e.shape===0?s=i=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)s=i=Math.max(Lc(t,r),Lc(t,r-a),Lc(t-n,r),Lc(t-n,r-a));else if(e.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),h=yD(n,a,t,r,!1),A=h[0],d=h[1];s=Lc(A-t,(d-r)/o),i=o*s}break}return Array.isArray(e.size)&&(s=fa(e.size[0],n),i=e.size.length===2?fa(e.size[1],a):s),[s,i]},Zxe=function(e,t){var r=rc(180),n=[];return rA(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=IQ(a);return}else if(TQ(i)){r=AE.parse(e,i);return}}var o=dE(e,a);n.push(o)}),{angle:r,stops:n,type:1}},Mb=function(e,t){var r=rc(180),n=[];return rA(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=IQ(a);return}else if(TQ(i)){r=(AE.parse(e,i)+rc(270))%rc(360);return}}var o=dE(e,a);n.push(o)}),{angle:r,stops:n,type:1}},e1e=function(e,t){var r=rc(180),n=[],a=1,s=0,i=3,o=[];return rA(t).forEach(function(c,A){var d=c[0];if(A===0){if(sa(d)&&d.value==="linear"){a=1;return}else if(sa(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var h=Nf.parse(e,d.values[0]);n.push({stop:Ei,color:h})}else if(d.name==="to"){var h=Nf.parse(e,d.values[0]);n.push({stop:xf,color:h})}else if(d.name==="color-stop"){var m=d.values.filter(pp);if(m.length===2){var h=Nf.parse(e,m[1]),p=m[0];Rp(p)&&n.push({stop:{type:16,number:p.number*100,flags:p.flags},color:h})}}}}),a===1?{angle:(r+rc(180))%rc(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:o,type:a}},FQ="closest-side",jQ="farthest-side",DQ="closest-corner",RQ="farthest-corner",LQ="circle",OQ="ellipse",UQ="cover",PQ="contain",t1e=function(e,t){var r=0,n=3,a=[],s=[];return rA(t).forEach(function(i,o){var c=!0;if(o===0){var A=!1;c=i.reduce(function(h,m){if(A)if(sa(m))switch(m.value){case"center":return s.push(t3),h;case"top":case"left":return s.push(Ei),h;case"right":case"bottom":return s.push(xf),h}else(Ss(m)||Kf(m))&&s.push(m);else if(sa(m))switch(m.value){case LQ:return r=0,!1;case OQ:return r=1,!1;case"at":return A=!0,!1;case FQ:return n=0,!1;case UQ:case jQ:return n=1,!1;case PQ:case DQ:return n=2,!1;case RQ:return n=3,!1}else if(Kf(m)||Ss(m))return Array.isArray(n)||(n=[]),n.push(m),!1;return h},c)}if(c){var d=dE(e,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},Qb=function(e,t){var r=0,n=3,a=[],s=[];return rA(t).forEach(function(i,o){var c=!0;if(o===0?c=i.reduce(function(d,h){if(sa(h))switch(h.value){case"center":return s.push(t3),!1;case"top":case"left":return s.push(Ei),!1;case"right":case"bottom":return s.push(xf),!1}else if(Ss(h)||Kf(h))return s.push(h),!1;return d},c):o===1&&(c=i.reduce(function(d,h){if(sa(h))switch(h.value){case LQ:return r=0,!1;case OQ:return r=1,!1;case PQ:case FQ:return n=0,!1;case jQ:return n=1,!1;case DQ:return n=2,!1;case UQ:case RQ:return n=3,!1}else if(Kf(h)||Ss(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return d},c)),c){var A=dE(e,i);a.push(A)}}),{size:n,shape:r,stops:a,position:s,type:2}},r1e=function(e){return e.type===1},n1e=function(e){return e.type===2},r3={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=MQ[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function a1e(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!MQ[e.name])}var MQ={"linear-gradient":Zxe,"-moz-linear-gradient":Mb,"-ms-linear-gradient":Mb,"-o-linear-gradient":Mb,"-webkit-linear-gradient":Mb,"radial-gradient":t1e,"-moz-radial-gradient":Qb,"-ms-radial-gradient":Qb,"-o-radial-gradient":Qb,"-webkit-radial-gradient":Qb,"-webkit-gradient":e1e},s1e={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return pp(n)&&a1e(n)}).map(function(n){return r3.parse(e,n)})}},i1e={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(sa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},o1e={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return rA(t).map(function(r){return r.filter(Ss)}).map(_Q)}},l1e={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return rA(t).map(function(r){return r.filter(sa).map(function(n){return n.value}).join(" ")}).map(c1e)}},c1e=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Xm;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Xm||(Xm={}));var u1e={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return rA(t).map(function(r){return r.filter(A1e)})}},A1e=function(e){return sa(e)||Ss(e)},fE=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},d1e=fE("top"),f1e=fE("right"),h1e=fE("bottom"),m1e=fE("left"),hE=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return _Q(r.filter(Ss))}}},p1e=hE("top-left"),g1e=hE("top-right"),x1e=hE("bottom-right"),v1e=hE("bottom-left"),mE=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},b1e=mE("top"),w1e=mE("right"),y1e=mE("bottom"),E1e=mE("left"),pE=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return $1(r)?r.number:0}}},C1e=pE("top"),_1e=pE("right"),S1e=pE("bottom"),N1e=pE("left"),B1e={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},k1e={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},T1e={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(sa).reduce(function(r,n){return r|I1e(n.value)},0)}},I1e=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},F1e={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},j1e={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},Qw;(function(e){e.NORMAL="normal",e.STRICT="strict"})(Qw||(Qw={}));var D1e={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return Qw.STRICT;case"normal":default:return Qw.NORMAL}}},R1e={name:"line-height",initialValue:"normal",prefix:!1,type:4},ED=function(e,t){return sa(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:Ss(e)?fa(e,t):t},L1e={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:r3.parse(e,t)}},O1e={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},sS={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},gE=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},U1e=gE("top"),P1e=gE("right"),M1e=gE("bottom"),Q1e=gE("left"),H1e={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(sa).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},V1e={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},xE=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},z1e=xE("top"),G1e=xE("right"),K1e=xE("bottom"),q1e=xE("left"),$1e={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},W1e={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},X1e={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&aS(t[0],"none")?[]:rA(t).map(function(r){for(var n={color:$A.TRANSPARENT,offsetX:Ei,offsetY:Ei,blur:Ei},a=0,s=0;s<r.length;s++){var i=r[s];Kf(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=Nf.parse(e,i)}return n})}},Y1e={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},J1e={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=tve[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},Z1e=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},eve=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],o=t[13];return t[14],t[15],t.length===16?[r,n,a,s,i,o]:null},tve={matrix:Z1e,matrix3d:eve},CD={type:16,number:50,flags:q1},rve=[CD,CD],nve={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(Ss);return r.length!==2?rve:[r[0],r[1]]}},ave={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Sx;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Sx||(Sx={}));var sve={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Sx.BREAK_ALL;case"keep-all":return Sx.KEEP_ALL;case"normal":default:return Sx.NORMAL}}},ive={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(Rp(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},QQ={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},ove={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return Rp(t)?t.number:1}},lve={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},cve={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(sa).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},uve={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},Ave={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},dve={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(Rp(t))return t.number;if(sa(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},fve={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(sa).map(function(r){return r.value})}},hve={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Ms=function(e,t){return(e&t)!==0},mve={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},pve={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=t.filter(CQ),s=0;s<a.length;s++){var i=a[s],o=a[s+1];if(i.type===20){var c=o&&Rp(o)?o.number:1;n.push({counter:i.value,increment:c})}}return n}},gve={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(CQ),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(sa(s)&&s.value!=="none"){var o=i&&Rp(i)?i.number:0;r.push({counter:s.value,reset:o})}}return r}},xve={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter($1).map(function(r){return QQ.parse(e,r)})}},vve={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],a=t.filter(Gxe);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,o=a[s+1].value;n.push({open:i,close:o})}return n}},_D=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},bve={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&aS(t[0],"none")?[]:rA(t).map(function(r){for(var n={color:255,offsetX:Ei,offsetY:Ei,blur:Ei,spread:Ei,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];aS(i,"inset")?n.inset=!0:Kf(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=Nf.parse(e,i)}return n})}},wve={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(sa).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},yve={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Eve={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return $1(t)?t.number:0}},Cve=function(){function e(t,r){var n,a;this.animationDuration=er(t,xve,r.animationDuration),this.backgroundClip=er(t,$xe,r.backgroundClip),this.backgroundColor=er(t,Wxe,r.backgroundColor),this.backgroundImage=er(t,s1e,r.backgroundImage),this.backgroundOrigin=er(t,i1e,r.backgroundOrigin),this.backgroundPosition=er(t,o1e,r.backgroundPosition),this.backgroundRepeat=er(t,l1e,r.backgroundRepeat),this.backgroundSize=er(t,u1e,r.backgroundSize),this.borderTopColor=er(t,d1e,r.borderTopColor),this.borderRightColor=er(t,f1e,r.borderRightColor),this.borderBottomColor=er(t,h1e,r.borderBottomColor),this.borderLeftColor=er(t,m1e,r.borderLeftColor),this.borderTopLeftRadius=er(t,p1e,r.borderTopLeftRadius),this.borderTopRightRadius=er(t,g1e,r.borderTopRightRadius),this.borderBottomRightRadius=er(t,x1e,r.borderBottomRightRadius),this.borderBottomLeftRadius=er(t,v1e,r.borderBottomLeftRadius),this.borderTopStyle=er(t,b1e,r.borderTopStyle),this.borderRightStyle=er(t,w1e,r.borderRightStyle),this.borderBottomStyle=er(t,y1e,r.borderBottomStyle),this.borderLeftStyle=er(t,E1e,r.borderLeftStyle),this.borderTopWidth=er(t,C1e,r.borderTopWidth),this.borderRightWidth=er(t,_1e,r.borderRightWidth),this.borderBottomWidth=er(t,S1e,r.borderBottomWidth),this.borderLeftWidth=er(t,N1e,r.borderLeftWidth),this.boxShadow=er(t,bve,r.boxShadow),this.color=er(t,B1e,r.color),this.direction=er(t,k1e,r.direction),this.display=er(t,T1e,r.display),this.float=er(t,F1e,r.cssFloat),this.fontFamily=er(t,uve,r.fontFamily),this.fontSize=er(t,Ave,r.fontSize),this.fontStyle=er(t,hve,r.fontStyle),this.fontVariant=er(t,fve,r.fontVariant),this.fontWeight=er(t,dve,r.fontWeight),this.letterSpacing=er(t,j1e,r.letterSpacing),this.lineBreak=er(t,D1e,r.lineBreak),this.lineHeight=er(t,R1e,r.lineHeight),this.listStyleImage=er(t,L1e,r.listStyleImage),this.listStylePosition=er(t,O1e,r.listStylePosition),this.listStyleType=er(t,sS,r.listStyleType),this.marginTop=er(t,U1e,r.marginTop),this.marginRight=er(t,P1e,r.marginRight),this.marginBottom=er(t,M1e,r.marginBottom),this.marginLeft=er(t,Q1e,r.marginLeft),this.opacity=er(t,ove,r.opacity);var s=er(t,H1e,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=er(t,V1e,r.overflowWrap),this.paddingTop=er(t,z1e,r.paddingTop),this.paddingRight=er(t,G1e,r.paddingRight),this.paddingBottom=er(t,K1e,r.paddingBottom),this.paddingLeft=er(t,q1e,r.paddingLeft),this.paintOrder=er(t,wve,r.paintOrder),this.position=er(t,W1e,r.position),this.textAlign=er(t,$1e,r.textAlign),this.textDecorationColor=er(t,lve,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=er(t,cve,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=er(t,X1e,r.textShadow),this.textTransform=er(t,Y1e,r.textTransform),this.transform=er(t,J1e,r.transform),this.transformOrigin=er(t,nve,r.transformOrigin),this.visibility=er(t,ave,r.visibility),this.webkitTextStrokeColor=er(t,yve,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=er(t,Eve,r.webkitTextStrokeWidth),this.wordBreak=er(t,sve,r.wordBreak),this.zIndex=er(t,ive,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return Bf(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Ms(this.display,4)||Ms(this.display,33554432)||Ms(this.display,268435456)||Ms(this.display,536870912)||Ms(this.display,67108864)||Ms(this.display,134217728)},e}(),_ve=function(){function e(t,r){this.content=er(t,mve,r.content),this.quotes=er(t,vve,r.quotes)}return e}(),SD=function(){function e(t,r){this.counterIncrement=er(t,pve,r.counterIncrement),this.counterReset=er(t,gve,r.counterReset)}return e}(),er=function(e,t,r){var n=new yQ,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(a);var s=new EQ(n.read());switch(t.type){case 2:var i=s.parseComponentValue();return t.parse(e,sa(i)?i.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return AE.parse(e,s.parseComponentValue());case"color":return Nf.parse(e,s.parseComponentValue());case"image":return r3.parse(e,s.parseComponentValue());case"length":var o=s.parseComponentValue();return Kf(o)?o:Ei;case"length-percentage":var c=s.parseComponentValue();return Ss(c)?c:Ei;case"time":return QQ.parse(e,s.parseComponentValue())}break}},Sve="data-html2canvas-debug",Nve=function(e){var t=e.getAttribute(Sve);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},iS=function(e,t){var r=Nve(e);return r===1||t===r},nA=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,iS(r,3))debugger;this.styles=new Cve(t,window.getComputedStyle(r,null)),cS(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=cE(this.context,r),iS(r,4)&&(this.flags|=16)}return e}(),Bve="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ND="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ex=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Hb=0;Hb<ND.length;Hb++)ex[ND.charCodeAt(Hb)]=Hb;var kve=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(A)?A:new Uint8Array(A);for(n=0;n<r;n+=4)s=ex[e.charCodeAt(n)],i=ex[e.charCodeAt(n+1)],o=ex[e.charCodeAt(n+2)],c=ex[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|c&63;return A},Tve=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},Ive=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},$h=5,n3=11,r_=2,Fve=n3-$h,HQ=65536>>$h,jve=1<<$h,n_=jve-1,Dve=1024>>$h,Rve=HQ+Dve,Lve=Rve,Ove=32,Uve=Lve+Ove,Pve=65536>>n3,Mve=1<<Fve,Qve=Mve-1,BD=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},Hve=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},Vve=function(e,t){var r=kve(e),n=Array.isArray(r)?Ive(r):new Uint32Array(r),a=Array.isArray(r)?Tve(r):new Uint16Array(r),s=24,i=BD(a,s/2,n[4]/2),o=n[5]===2?BD(a,(s+n[4])/2):Hve(n,Math.ceil((s+n[4])/4));return new zve(n[0],n[1],n[2],n[3],i,o)},zve=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>$h],r=(r<<r_)+(t&n_),this.data[r];if(t<=65535)return r=this.index[HQ+(t-55296>>$h)],r=(r<<r_)+(t&n_),this.data[r];if(t<this.highStart)return r=Uve-Pve+(t>>n3),r=this.index[r],r+=t>>$h&Qve,r=this.index[r],r=(r<<r_)+(t&n_),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),kD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gve=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Vb=0;Vb<kD.length;Vb++)Gve[kD.charCodeAt(Vb)]=Vb;var Kve=1,a_=2,s_=3,TD=4,ID=5,qve=7,FD=8,i_=9,o_=10,jD=11,DD=12,RD=13,LD=14,l_=15,$ve=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Wve=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},Xve=Vve(Bve),Xl="×",c_="÷",Yve=function(e){return Xve.get(e)},Jve=function(e,t,r){var n=r-2,a=t[n],s=t[r-1],i=t[r];if(s===a_&&i===s_)return Xl;if(s===a_||s===s_||s===TD||i===a_||i===s_||i===TD)return c_;if(s===FD&&[FD,i_,jD,DD].indexOf(i)!==-1||(s===jD||s===i_)&&(i===i_||i===o_)||(s===DD||s===o_)&&i===o_||i===RD||i===ID||i===qve||s===Kve)return Xl;if(s===RD&&i===LD){for(;a===ID;)a=t[--n];if(a===LD)return Xl}if(s===l_&&i===l_){for(var o=0;a===l_;)o++,a=t[--n];if(o%2===0)return Xl}return c_},Zve=function(e){var t=$ve(e),r=t.length,n=0,a=0,s=t.map(Yve);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Xl;n<r&&(i=Jve(t,s,++n))===Xl;);if(i!==Xl||n===r){var o=Wve.apply(null,t.slice(a,n));return a=n,{value:o,done:!1}}return{done:!0,value:null}}}},ebe=function(e){for(var t=Zve(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},tbe=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(e.body.removeChild(n),s===t)return!0}}return!1},rbe=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=uE(n.data).map(function(c){return ls(c)}),s=0,i={},o=a.every(function(c,A){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var h=d.x>i.x||d.y>i.y;return i=d,A===0?!0:h});return e.body.removeChild(t),o},nbe=function(){return typeof new Image().crossOrigin<"u"},abe=function(){return typeof new XMLHttpRequest().responseType=="string"},sbe=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},OD=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},ibe=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=t.toDataURL();a.src=s;var i=oS(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),UD(i).then(function(o){n.drawImage(o,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var A=e.createElement("div");return A.style.backgroundImage="url("+s+")",A.style.height=r+"px",OD(c)?UD(oS(r,r,0,0,A)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),OD(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},oS=function(e,t,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(a),i},UD=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},gi={get SUPPORT_RANGE_BOUNDS(){var e=tbe(document);return Object.defineProperty(gi,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=gi.SUPPORT_RANGE_BOUNDS&&rbe(document);return Object.defineProperty(gi,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=sbe(document);return Object.defineProperty(gi,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?ibe(document):Promise.resolve(!1);return Object.defineProperty(gi,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=nbe();return Object.defineProperty(gi,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=abe();return Object.defineProperty(gi,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(gi,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(gi,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Nx=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),obe=function(e,t,r,n){var a=ube(t,r),s=[],i=0;return a.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(gi.SUPPORT_RANGE_BOUNDS){var c=PD(n,i,o.length).getClientRects();if(c.length>1){var A=a3(o),d=0;A.forEach(function(m){s.push(new Nx(m,nd.fromDOMRectList(e,PD(n,d+i,m.length).getClientRects()))),d+=m.length})}else s.push(new Nx(o,nd.fromDOMRectList(e,c)))}else{var h=n.splitText(o.length);s.push(new Nx(o,lbe(e,n))),n=h}else gi.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),s},lbe=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var s=cE(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return nd.EMPTY},PD=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},a3=function(e){if(gi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return ebe(e)},cbe=function(e,t){if(gi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return dbe(e,t)},ube=function(e,t){return t.letterSpacing!==0?a3(e):cbe(e,t)},Abe=[32,160,4961,65792,65793,4153,4241],dbe=function(e,t){for(var r=Pge(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),o=uE(i),c="";o.forEach(function(A){Abe.indexOf(A)===-1?c+=ls(A):(c.length&&n.push(c),n.push(ls(A)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},fbe=function(){function e(t,r,n){this.text=hbe(r.data,n.textTransform),this.textBounds=obe(t,this.text,n,r)}return e}(),hbe=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(mbe,pbe);case 2:return e.toUpperCase();default:return e}},mbe=/(^|\s|:|-|\(|\))([a-z])/g,pbe=function(e,t,r){return e.length>0?t+r.toUpperCase():e},VQ=function(e){Xc(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t}(nA),zQ=function(e){Xc(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t}(nA),GQ=function(e){Xc(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=new XMLSerializer,i=cE(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(nA),KQ=function(e){Xc(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(nA),lS=function(e){Xc(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t}(nA),gbe=[{type:15,flags:0,unit:"px",number:3}],xbe=[{type:16,flags:0,number:50}],vbe=function(e){return e.width>e.height?new nd(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new nd(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},bbe=function(e){var t=e.type===wbe?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},Hw="checkbox",Vw="radio",wbe="password",MD=707406591,s3=function(e){Xc(t,e);function t(r,n){var a=e.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=bbe(n),(a.type===Hw||a.type===Vw)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=vbe(a.bounds)),a.type){case Hw:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=gbe;break;case Vw:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=xbe;break}return a}return t}(nA),qQ=function(e){Xc(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return t}(nA),$Q=function(e){Xc(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(nA),WQ=function(e){Xc(t,e);function t(r,n){var a=e.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=YQ(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?_x(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):$A.TRANSPARENT,i=n.contentWindow.document.body?_x(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):$A.TRANSPARENT;a.backgroundColor=Bf(s)?Bf(i)?a.styles.backgroundColor:i:s}}catch{}return a}return t}(nA),ybe=["OL","UL","MENU"],T2=function(e,t,r,n){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,JQ(a)&&a.data.trim().length>0)r.textNodes.push(new fbe(e,a,r.styles));else if(jm(a))if(r9(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return T2(e,o,r,n)});else{var i=XQ(e,a);i.styles.isVisible()&&(Ebe(a,i,n)?i.flags|=4:Cbe(i.styles)&&(i.flags|=2),ybe.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?T2(e,a.shadowRoot,i,n):!zw(a)&&!ZQ(a)&&!Gw(a)&&T2(e,a,i,n))}},XQ=function(e,t){return uS(t)?new VQ(e,t):e9(t)?new zQ(e,t):ZQ(t)?new GQ(e,t):_be(t)?new KQ(e,t):Sbe(t)?new lS(e,t):Nbe(t)?new s3(e,t):Gw(t)?new qQ(e,t):zw(t)?new $Q(e,t):t9(t)?new WQ(e,t):new nA(e,t)},YQ=function(e,t){var r=XQ(e,t);return r.flags|=4,T2(e,t,r,r),r},Ebe=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||i3(e)&&r.styles.isTransparent()},Cbe=function(e){return e.isPositioned()||e.isFloating()},JQ=function(e){return e.nodeType===Node.TEXT_NODE},jm=function(e){return e.nodeType===Node.ELEMENT_NODE},cS=function(e){return jm(e)&&typeof e.style<"u"&&!I2(e)},I2=function(e){return typeof e.className=="object"},_be=function(e){return e.tagName==="LI"},Sbe=function(e){return e.tagName==="OL"},Nbe=function(e){return e.tagName==="INPUT"},Bbe=function(e){return e.tagName==="HTML"},ZQ=function(e){return e.tagName==="svg"},i3=function(e){return e.tagName==="BODY"},e9=function(e){return e.tagName==="CANVAS"},QD=function(e){return e.tagName==="VIDEO"},uS=function(e){return e.tagName==="IMG"},t9=function(e){return e.tagName==="IFRAME"},HD=function(e){return e.tagName==="STYLE"},kbe=function(e){return e.tagName==="SCRIPT"},zw=function(e){return e.tagName==="TEXTAREA"},Gw=function(e){return e.tagName==="SELECT"},r9=function(e){return e.tagName==="SLOT"},VD=function(e){return e.tagName.indexOf("-")>0},Tbe=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,a=t.counterReset,s=!0;n!==null&&n.forEach(function(o){var c=r.counters[o.counter];c&&o.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=o.increment)});var i=[];return s&&a.forEach(function(o){var c=r.counters[o.counter];i.push(o.counter),c||(c=r.counters[o.counter]=[]),c.push(o.reset)}),i},e}(),zD={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},GD={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},Ibe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Fbe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},lm=function(e,t,r,n,a,s){return e<t||e>r?o1(e,a,s.length>0):n.integers.reduce(function(i,o,c){for(;e>=o;)e-=o,i+=n.values[c];return i},"")+s},n9=function(e,t,r,n){var a="";do r||e--,a=n(e)+a,e/=t;while(e*t>=t);return a},is=function(e,t,r,n,a){var s=r-t+1;return(e<0?"-":"")+(n9(Math.abs(e),s,n,function(i){return ls(Math.floor(i%s)+t)})+a)},Eh=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return n9(Math.abs(e),n,!1,function(a){return t[Math.floor(a%n)]})+r},Sm=1,Jd=2,Zd=4,tx=8,LA=function(e,t,r,n,a,s){if(e<-9999||e>9999)return o1(e,4,a.length>0);var i=Math.abs(e),o=a;if(i===0)return t[0]+o;for(var c=0;i>0&&c<=4;c++){var A=i%10;A===0&&Ms(s,Sm)&&o!==""?o=t[A]+o:A>1||A===1&&c===0||A===1&&c===1&&Ms(s,Jd)||A===1&&c===1&&Ms(s,Zd)&&e>100||A===1&&c>1&&Ms(s,tx)?o=t[A]+(c>0?r[c-1]:"")+o:A===1&&c>0&&(o=r[c-1]+o),i=Math.floor(i/10)}return(e<0?n:"")+o},KD="十百千萬",qD="拾佰仟萬",$D="マイナス",u_="마이너스",o1=function(e,t,r){var n=r?". ":"",a=r?"、":"",s=r?", ":"",i=r?" ":"";switch(t){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=is(e,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Eh(e,"〇一二三四五六七八九",a);case 6:return lm(e,1,3999,zD,3,n).toLowerCase();case 7:return lm(e,1,3999,zD,3,n);case 8:return is(e,945,969,!1,n);case 9:return is(e,97,122,!1,n);case 10:return is(e,65,90,!1,n);case 11:return is(e,1632,1641,!0,n);case 12:case 49:return lm(e,1,9999,GD,3,n);case 35:return lm(e,1,9999,GD,3,n).toLowerCase();case 13:return is(e,2534,2543,!0,n);case 14:case 30:return is(e,6112,6121,!0,n);case 15:return Eh(e,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return Eh(e,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return LA(e,"零一二三四五六七八九",KD,"負",a,Jd|Zd|tx);case 47:return LA(e,"零壹貳參肆伍陸柒捌玖",qD,"負",a,Sm|Jd|Zd|tx);case 42:return LA(e,"零一二三四五六七八九",KD,"负",a,Jd|Zd|tx);case 41:return LA(e,"零壹贰叁肆伍陆柒捌玖",qD,"负",a,Sm|Jd|Zd|tx);case 26:return LA(e,"〇一二三四五六七八九","十百千万",$D,a,0);case 25:return LA(e,"零壱弐参四伍六七八九","拾百千万",$D,a,Sm|Jd|Zd);case 31:return LA(e,"영일이삼사오육칠팔구","십백천만",u_,s,Sm|Jd|Zd);case 33:return LA(e,"零一二三四五六七八九","十百千萬",u_,s,0);case 32:return LA(e,"零壹貳參四五六七八九","拾百千",u_,s,Sm|Jd|Zd);case 18:return is(e,2406,2415,!0,n);case 20:return lm(e,1,19999,Fbe,3,n);case 21:return is(e,2790,2799,!0,n);case 22:return is(e,2662,2671,!0,n);case 22:return lm(e,1,10999,Ibe,3,n);case 23:return Eh(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Eh(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return is(e,3302,3311,!0,n);case 28:return Eh(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return Eh(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return is(e,3792,3801,!0,n);case 37:return is(e,6160,6169,!0,n);case 38:return is(e,4160,4169,!0,n);case 39:return is(e,2918,2927,!0,n);case 40:return is(e,1776,1785,!0,n);case 43:return is(e,3046,3055,!0,n);case 44:return is(e,3174,3183,!0,n);case 45:return is(e,3664,3673,!0,n);case 46:return is(e,3872,3881,!0,n);case 3:default:return is(e,48,57,!0,n)}},a9="data-html2canvas-ignore",WD=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new Tbe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,a=jbe(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,i=t.defaultView.pageYOffset,o=a.contentWindow,c=o.document,A=Lbe(a).then(function(){return uo(n,void 0,void 0,function(){var d,h;return Vi(this,function(m){switch(m.label){case 0:return this.scrolledElements.forEach(Mbe),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:m.sent(),m.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Rbe(c)]:[3,4];case 3:m.sent(),m.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,h)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(Ube(document.doctype)+"<html></html>"),Pbe(this.referenceElement.ownerDocument,s,i),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),A},e.prototype.createElementClone=function(t){if(iS(t,2))debugger;if(e9(t))return this.createCanvasClone(t);if(QD(t))return this.createVideoClone(t);if(HD(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return uS(r)&&(uS(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),VD(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return A_(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var s=t.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var o=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(o){var c=o.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}i.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,n){(!jm(r)||!kbe(r)&&!r.hasAttribute(a9)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!jm(r)||!HD(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var a=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(jm(s)&&r9(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return a.appendChildNode(r,o,n)})}else this.appendChildNode(r,s,n)},e.prototype.cloneNode=function(t,r){if(JQ(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&jm(t)&&(cS(t)||I2(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var s=n.getComputedStyle(t),i=n.getComputedStyle(t,":before"),o=n.getComputedStyle(t,":after");this.referenceElement===t&&cS(a)&&(this.clonedReferenceElement=a),i3(a)&&Vbe(a);var c=this.counters.parse(new SD(this.context,s)),A=this.resolvePseudoContent(t,a,i,Bx.BEFORE);VD(t)&&(r=!0),QD(t)||this.cloneChildNodes(t,a,r),A&&a.insertBefore(A,a.firstChild);var d=this.resolvePseudoContent(t,a,o,Bx.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||I2(t))&&!t9(t)||r)&&A_(s,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(zw(t)||Gw(t))&&(zw(a)||Gw(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,a){var s=this;if(n){var i=n.content,o=r.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new SD(this.context,n));var c=new _ve(this.context,n),A=o.createElement("html2canvaspseudoelement");A_(n,A),c.content.forEach(function(h){if(h.type===0)A.appendChild(o.createTextNode(h.value));else if(h.type===22){var m=o.createElement("img");m.src=h.value,m.style.opacity="1",A.appendChild(m)}else if(h.type===18){if(h.name==="attr"){var p=h.values.filter(sa);p.length&&A.appendChild(o.createTextNode(t.getAttribute(p[0].value)||""))}else if(h.name==="counter"){var v=h.values.filter(pp),x=v[0],E=v[1];if(x&&sa(x)){var _=s.counters.getCounterValue(x.value),B=E&&sa(E)?sS.parse(s.context,E.value):3;A.appendChild(o.createTextNode(o1(_,B,!1)))}}else if(h.name==="counters"){var T=h.values.filter(pp),x=T[0],I=T[1],E=T[2];if(x&&sa(x)){var L=s.counters.getCounterValues(x.value),k=E&&sa(E)?sS.parse(s.context,E.value):3,w=I&&I.type===0?I.value:"",y=L.map(function(j){return o1(j,k,!1)}).join(w);A.appendChild(o.createTextNode(y))}}}else if(h.type===20)switch(h.value){case"open-quote":A.appendChild(o.createTextNode(_D(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":A.appendChild(o.createTextNode(_D(c.quotes,--s.quoteDepth,!1)));break;default:A.appendChild(o.createTextNode(h.value))}}),A.className=AS+" "+dS;var d=a===Bx.BEFORE?" "+AS:" "+dS;return I2(r)?r.className.baseValue+=d:r.className+=d,A}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),Bx;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(Bx||(Bx={}));var jbe=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(a9,"true"),e.body.appendChild(r),r},Dbe=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},Rbe=function(e){return Promise.all([].slice.call(e.images,0).map(Dbe))},Lbe=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},Obe=["all","d","content"],A_=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);Obe.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},Ube=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},Pbe=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},Mbe=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},Qbe=":before",Hbe=":after",AS="___html2canvas___pseudoelement_before",dS="___html2canvas___pseudoelement_after",XD=`{
    content: "" !important;
    display: none !important;
}`,Vbe=function(e){zbe(e,"."+AS+Qbe+XD+`
         .`+dS+Hbe+XD)},zbe=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},s9=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),Gbe=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(f_(t)||Wbe(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return uo(this,void 0,void 0,function(){var r,n,a,s,i=this;return Vi(this,function(o){switch(o.label){case 0:return r=s9.isSameOrigin(t),n=!d_(t)&&this._options.useCORS===!0&&gi.SUPPORT_CORS_IMAGES&&!r,a=!d_(t)&&!r&&!f_(t)&&typeof this._options.proxy=="string"&&gi.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!d_(t)&&!f_(t)&&!a&&!n?[2]:(s=t,a?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,A){var d=new Image;d.onload=function(){return c(d)},d.onerror=A,(Xbe(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return A("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(s,i){var o=gi.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(o==="text")s(c.response);else{var h=new FileReader;h.addEventListener("load",function(){return s(h.result)},!1),h.addEventListener("error",function(m){return i(m)},!1),h.readAsDataURL(c.response)}else i("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=i;var A=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+A+"url="+encodeURIComponent(t)+"&responseType="+o),o!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}c.send()})},e}(),Kbe=/^data:image\/svg\+xml/i,qbe=/^data:image\/.*;base64,/i,$be=/^data:image\/.*/i,Wbe=function(e){return gi.SUPPORT_SVG_DRAWING||!Ybe(e)},d_=function(e){return $be.test(e)},Xbe=function(e){return qbe.test(e)},f_=function(e){return e.substr(0,4)==="blob"},Ybe=function(e){return e.substr(-3).toLowerCase()==="svg"||Kbe.test(e)},Zt=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),cm=function(e,t,r){return new Zt(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},zb=function(){function e(t,r,n,a){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=a}return e.prototype.subdivide=function(t,r){var n=cm(this.start,this.startControl,t),a=cm(this.startControl,this.endControl,t),s=cm(this.endControl,this.end,t),i=cm(n,a,t),o=cm(a,s,t),c=cm(i,o,t);return r?new e(this.start,n,i,c):new e(c,o,s,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Jl=function(e){return e.type===1},Jbe=function(){function e(t){var r=t.styles,n=t.bounds,a=Zg(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],o=Zg(r.borderTopRightRadius,n.width,n.height),c=o[0],A=o[1],d=Zg(r.borderBottomRightRadius,n.width,n.height),h=d[0],m=d[1],p=Zg(r.borderBottomLeftRadius,n.width,n.height),v=p[0],x=p[1],E=[];E.push((s+c)/n.width),E.push((v+h)/n.width),E.push((i+x)/n.height),E.push((A+m)/n.height);var _=Math.max.apply(Math,E);_>1&&(s/=_,i/=_,c/=_,A/=_,h/=_,m/=_,v/=_,x/=_);var B=n.width-c,T=n.height-m,I=n.width-h,L=n.height-x,k=r.borderTopWidth,w=r.borderRightWidth,y=r.borderBottomWidth,N=r.borderLeftWidth,U=fa(r.paddingTop,t.bounds.width),j=fa(r.paddingRight,t.bounds.width),F=fa(r.paddingBottom,t.bounds.width),P=fa(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Ca(n.left+N/3,n.top+k/3,s-N/3,i-k/3,Un.TOP_LEFT):new Zt(n.left+N/3,n.top+k/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Ca(n.left+B,n.top+k/3,c-w/3,A-k/3,Un.TOP_RIGHT):new Zt(n.left+n.width-w/3,n.top+k/3),this.bottomRightBorderDoubleOuterBox=h>0||m>0?Ca(n.left+I,n.top+T,h-w/3,m-y/3,Un.BOTTOM_RIGHT):new Zt(n.left+n.width-w/3,n.top+n.height-y/3),this.bottomLeftBorderDoubleOuterBox=v>0||x>0?Ca(n.left+N/3,n.top+L,v-N/3,x-y/3,Un.BOTTOM_LEFT):new Zt(n.left+N/3,n.top+n.height-y/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Ca(n.left+N*2/3,n.top+k*2/3,s-N*2/3,i-k*2/3,Un.TOP_LEFT):new Zt(n.left+N*2/3,n.top+k*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Ca(n.left+B,n.top+k*2/3,c-w*2/3,A-k*2/3,Un.TOP_RIGHT):new Zt(n.left+n.width-w*2/3,n.top+k*2/3),this.bottomRightBorderDoubleInnerBox=h>0||m>0?Ca(n.left+I,n.top+T,h-w*2/3,m-y*2/3,Un.BOTTOM_RIGHT):new Zt(n.left+n.width-w*2/3,n.top+n.height-y*2/3),this.bottomLeftBorderDoubleInnerBox=v>0||x>0?Ca(n.left+N*2/3,n.top+L,v-N*2/3,x-y*2/3,Un.BOTTOM_LEFT):new Zt(n.left+N*2/3,n.top+n.height-y*2/3),this.topLeftBorderStroke=s>0||i>0?Ca(n.left+N/2,n.top+k/2,s-N/2,i-k/2,Un.TOP_LEFT):new Zt(n.left+N/2,n.top+k/2),this.topRightBorderStroke=s>0||i>0?Ca(n.left+B,n.top+k/2,c-w/2,A-k/2,Un.TOP_RIGHT):new Zt(n.left+n.width-w/2,n.top+k/2),this.bottomRightBorderStroke=h>0||m>0?Ca(n.left+I,n.top+T,h-w/2,m-y/2,Un.BOTTOM_RIGHT):new Zt(n.left+n.width-w/2,n.top+n.height-y/2),this.bottomLeftBorderStroke=v>0||x>0?Ca(n.left+N/2,n.top+L,v-N/2,x-y/2,Un.BOTTOM_LEFT):new Zt(n.left+N/2,n.top+n.height-y/2),this.topLeftBorderBox=s>0||i>0?Ca(n.left,n.top,s,i,Un.TOP_LEFT):new Zt(n.left,n.top),this.topRightBorderBox=c>0||A>0?Ca(n.left+B,n.top,c,A,Un.TOP_RIGHT):new Zt(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||m>0?Ca(n.left+I,n.top+T,h,m,Un.BOTTOM_RIGHT):new Zt(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=v>0||x>0?Ca(n.left,n.top+L,v,x,Un.BOTTOM_LEFT):new Zt(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?Ca(n.left+N,n.top+k,Math.max(0,s-N),Math.max(0,i-k),Un.TOP_LEFT):new Zt(n.left+N,n.top+k),this.topRightPaddingBox=c>0||A>0?Ca(n.left+Math.min(B,n.width-w),n.top+k,B>n.width+w?0:Math.max(0,c-w),Math.max(0,A-k),Un.TOP_RIGHT):new Zt(n.left+n.width-w,n.top+k),this.bottomRightPaddingBox=h>0||m>0?Ca(n.left+Math.min(I,n.width-N),n.top+Math.min(T,n.height-y),Math.max(0,h-w),Math.max(0,m-y),Un.BOTTOM_RIGHT):new Zt(n.left+n.width-w,n.top+n.height-y),this.bottomLeftPaddingBox=v>0||x>0?Ca(n.left+N,n.top+Math.min(L,n.height-y),Math.max(0,v-N),Math.max(0,x-y),Un.BOTTOM_LEFT):new Zt(n.left+N,n.top+n.height-y),this.topLeftContentBox=s>0||i>0?Ca(n.left+N+P,n.top+k+U,Math.max(0,s-(N+P)),Math.max(0,i-(k+U)),Un.TOP_LEFT):new Zt(n.left+N+P,n.top+k+U),this.topRightContentBox=c>0||A>0?Ca(n.left+Math.min(B,n.width+N+P),n.top+k+U,B>n.width+N+P?0:c-N+P,A-(k+U),Un.TOP_RIGHT):new Zt(n.left+n.width-(w+j),n.top+k+U),this.bottomRightContentBox=h>0||m>0?Ca(n.left+Math.min(I,n.width-(N+P)),n.top+Math.min(T,n.height+k+U),Math.max(0,h-(w+j)),m-(y+F),Un.BOTTOM_RIGHT):new Zt(n.left+n.width-(w+j),n.top+n.height-(y+F)),this.bottomLeftContentBox=v>0||x>0?Ca(n.left+N+P,n.top+L,Math.max(0,v-(N+P)),x-(y+F),Un.BOTTOM_LEFT):new Zt(n.left+N+P,n.top+n.height-(y+F))}return e}(),Un;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Un||(Un={}));var Ca=function(e,t,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,o=n*s,c=e+r,A=t+n;switch(a){case Un.TOP_LEFT:return new zb(new Zt(e,A),new Zt(e,A-o),new Zt(c-i,t),new Zt(c,t));case Un.TOP_RIGHT:return new zb(new Zt(e,t),new Zt(e+i,t),new Zt(c,A-o),new Zt(c,A));case Un.BOTTOM_RIGHT:return new zb(new Zt(c,t),new Zt(c,t+o),new Zt(e+i,A),new Zt(e,A));case Un.BOTTOM_LEFT:default:return new zb(new Zt(c,A),new Zt(c-i,A),new Zt(e,t+o),new Zt(e,t))}},Kw=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Zbe=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},qw=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},e2e=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),Gb=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),t2e=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),r2e=function(e){return e.type===0},i9=function(e){return e.type===1},n2e=function(e){return e.type===2},YD=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},a2e=function(e,t,r,n,a){return e.map(function(s,i){switch(i){case 0:return s.add(t,r);case 1:return s.add(t+n,r);case 2:return s.add(t+n,r+a);case 3:return s.add(t,r+a)}return s})},o9=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),l9=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new Jbe(this.container),this.container.styles.opacity<1&&this.effects.push(new t2e(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new e2e(n,a,s))}if(this.container.styles.overflowX!==0){var i=Kw(this.curves),o=qw(this.curves);YD(i,o)?this.effects.push(new Gb(i,6)):(this.effects.push(new Gb(i,2)),this.effects.push(new Gb(o,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!i9(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=Kw(n.curves),o=qw(n.curves);YD(i,o)||a.unshift(new Gb(o,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return Ms(c.target,t)})},e}(),fS=function(e,t,r,n){e.container.elements.forEach(function(a){var s=Ms(a.flags,4),i=Ms(a.flags,2),o=new l9(a,e);Ms(a.styles.display,2048)&&n.push(o);var c=Ms(a.flags,8)?[]:n;if(s||i){var A=s||a.styles.isPositioned()?r:t,d=new o9(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var h=a.styles.zIndex.order;if(h<0){var m=0;A.negativeZIndex.some(function(v,x){return h>v.element.container.styles.zIndex.order?(m=x,!1):m>0}),A.negativeZIndex.splice(m,0,d)}else if(h>0){var p=0;A.positiveZIndex.some(function(v,x){return h>=v.element.container.styles.zIndex.order?(p=x+1,!1):p>0}),A.positiveZIndex.splice(p,0,d)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?A.nonPositionedFloats.push(d):A.nonPositionedInlineLevel.push(d);fS(o,d,s?d:r,c)}else a.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),fS(o,t,r,c);Ms(a.flags,8)&&c9(a,c)})},c9=function(e,t){for(var r=e instanceof lS?e.start:1,n=e instanceof lS?e.reversed:!1,a=0;a<t.length;a++){var s=t[a];s.container instanceof KQ&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=o1(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},s2e=function(e){var t=new l9(e,null),r=new o9(t),n=[];return fS(t,r,r,n),c9(t.container,n),r},JD=function(e,t){switch(t){case 0:return nc(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return nc(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return nc(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return nc(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},i2e=function(e,t){switch(t){case 0:return nc(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return nc(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return nc(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return nc(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},o2e=function(e,t){switch(t){case 0:return nc(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return nc(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return nc(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return nc(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},l2e=function(e,t){switch(t){case 0:return Kb(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return Kb(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return Kb(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return Kb(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},Kb=function(e,t){var r=[];return Jl(e)?r.push(e.subdivide(.5,!1)):r.push(e),Jl(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},nc=function(e,t,r,n){var a=[];return Jl(e)?a.push(e.subdivide(.5,!1)):a.push(e),Jl(r)?a.push(r.subdivide(.5,!0)):a.push(r),Jl(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Jl(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},u9=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},$w=function(e){var t=e.styles,r=e.bounds,n=fa(t.paddingLeft,r.width),a=fa(t.paddingRight,r.width),s=fa(t.paddingTop,r.width),i=fa(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+s+i))},c2e=function(e,t){return e===0?t.bounds:e===2?$w(t):u9(t)},u2e=function(e,t){return e===0?t.bounds:e===2?$w(t):u9(t)},h_=function(e,t,r){var n=c2e(Nm(e.styles.backgroundOrigin,t),e),a=u2e(Nm(e.styles.backgroundClip,t),e),s=A2e(Nm(e.styles.backgroundSize,t),r,n),i=s[0],o=s[1],c=Zg(Nm(e.styles.backgroundPosition,t),n.width-i,n.height-o),A=d2e(Nm(e.styles.backgroundRepeat,t),c,s,n,a),d=Math.round(n.left+c[0]),h=Math.round(n.top+c[1]);return[A,d,h,i,o]},um=function(e){return sa(e)&&e.value===Xm.AUTO},qb=function(e){return typeof e=="number"},A2e=function(e,t,r){var n=t[0],a=t[1],s=t[2],i=e[0],o=e[1];if(!i)return[0,0];if(Ss(i)&&o&&Ss(o))return[fa(i,r.width),fa(o,r.height)];var c=qb(s);if(sa(i)&&(i.value===Xm.CONTAIN||i.value===Xm.COVER)){if(qb(s)){var A=r.width/r.height;return A<s!=(i.value===Xm.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=qb(n),h=qb(a),m=d||h;if(um(i)&&(!o||um(o))){if(d&&h)return[n,a];if(!c&&!m)return[r.width,r.height];if(m&&c){var p=d?n:a*s,v=h?a:n/s;return[p,v]}var x=d?n:r.width,E=h?a:r.height;return[x,E]}if(c){var _=0,B=0;return Ss(i)?_=fa(i,r.width):Ss(o)&&(B=fa(o,r.height)),um(i)?_=B*s:(!o||um(o))&&(B=_/s),[_,B]}var T=null,I=null;if(Ss(i)?T=fa(i,r.width):o&&Ss(o)&&(I=fa(o,r.height)),T!==null&&(!o||um(o))&&(I=d&&h?T/n*a:r.height),I!==null&&um(i)&&(T=d&&h?I/a*n:r.width),T!==null&&I!==null)return[T,I];throw new Error("Unable to calculate background-size for element")},Nm=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},d2e=function(e,t,r,n,a){var s=t[0],i=t[1],o=r[0],c=r[1];switch(e){case 2:return[new Zt(Math.round(n.left),Math.round(n.top+i)),new Zt(Math.round(n.left+n.width),Math.round(n.top+i)),new Zt(Math.round(n.left+n.width),Math.round(c+n.top+i)),new Zt(Math.round(n.left),Math.round(c+n.top+i))];case 3:return[new Zt(Math.round(n.left+s),Math.round(n.top)),new Zt(Math.round(n.left+s+o),Math.round(n.top)),new Zt(Math.round(n.left+s+o),Math.round(n.height+n.top)),new Zt(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new Zt(Math.round(n.left+s),Math.round(n.top+i)),new Zt(Math.round(n.left+s+o),Math.round(n.top+i)),new Zt(Math.round(n.left+s+o),Math.round(n.top+i+c)),new Zt(Math.round(n.left+s),Math.round(n.top+i+c))];default:return[new Zt(Math.round(a.left),Math.round(a.top)),new Zt(Math.round(a.left+a.width),Math.round(a.top)),new Zt(Math.round(a.left+a.width),Math.round(a.height+a.top)),new Zt(Math.round(a.left),Math.round(a.height+a.top))]}},f2e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",ZD="Hidden Text",h2e=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=f2e,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(ZD)),n.appendChild(s),n.appendChild(a);var o=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(ZD)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:c}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),A9=function(){function e(t,r){this.context=t,this.options=r}return e}(),m2e=1e4,p2e=function(e){Xc(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new h2e(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),n2e(r)&&(this.ctx.globalAlpha=r.opacity),r2e(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),i9(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return uo(this,void 0,void 0,function(){var n;return Vi(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return uo(this,void 0,void 0,function(){return Vi(this,function(n){switch(n.label){case 0:if(Ms(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=a3(r.text);i.reduce(function(o,c){return s.ctx.fillText(c,o,r.bounds.top+a),o+s.ctx.measureText(c).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=w2e(r.fontFamily).join(", "),s=$1(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},t.prototype.renderTextNode=function(r,n){return uo(this,void 0,void 0,function(){var a,s,i,o,c,A,d,h,m=this;return Vi(this,function(p){return a=this.createFontStyle(n),s=a[0],i=a[1],o=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(i,o),A=c.baseline,d=c.middle,h=n.paintOrder,r.textBounds.forEach(function(v){h.forEach(function(x){switch(x){case 0:m.ctx.fillStyle=Zs(n.color),m.renderTextWithLetterSpacing(v,n.letterSpacing,A);var E=n.textShadow;E.length&&v.text.trim().length&&(E.slice(0).reverse().forEach(function(_){m.ctx.shadowColor=Zs(_.color),m.ctx.shadowOffsetX=_.offsetX.number*m.options.scale,m.ctx.shadowOffsetY=_.offsetY.number*m.options.scale,m.ctx.shadowBlur=_.blur.number,m.renderTextWithLetterSpacing(v,n.letterSpacing,A)}),m.ctx.shadowColor="",m.ctx.shadowOffsetX=0,m.ctx.shadowOffsetY=0,m.ctx.shadowBlur=0),n.textDecorationLine.length&&(m.ctx.fillStyle=Zs(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(_){switch(_){case 1:m.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top+A),v.bounds.width,1);break;case 2:m.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top),v.bounds.width,1);break;case 3:m.ctx.fillRect(v.bounds.left,Math.ceil(v.bounds.top+d),v.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&v.text.trim().length&&(m.ctx.strokeStyle=Zs(n.webkitTextStrokeColor),m.ctx.lineWidth=n.webkitTextStrokeWidth,m.ctx.lineJoin=window.chrome?"miter":"round",m.ctx.strokeText(v.text,v.bounds.left,v.bounds.top+A)),m.ctx.strokeStyle="",m.ctx.lineWidth=0,m.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=$w(r),i=qw(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return uo(this,void 0,void 0,function(){var n,a,s,i,o,c,B,B,A,d,h,m,I,p,v,L,x,E,_,B,T,I,L;return Vi(this,function(k){switch(k.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,o=n.textNodes,k.label=1;case 1:return i<o.length?(c=o[i],[4,this.renderTextNode(c,s)]):[3,4];case 2:k.sent(),k.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof VQ))return[3,8];k.label=5;case 5:return k.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return B=k.sent(),this.renderReplacedElement(n,a,B),[3,8];case 7:return k.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof zQ&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof GQ))return[3,12];k.label=9;case 9:return k.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return B=k.sent(),this.renderReplacedElement(n,a,B),[3,12];case 11:return k.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof WQ&&n.tree?(A=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,A.render(n.tree)]):[3,14];case 13:d=k.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),k.label=14;case 14:if(n instanceof s3&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===Hw?n.checked&&(this.ctx.save(),this.path([new Zt(n.bounds.left+h*.39363,n.bounds.top+h*.79),new Zt(n.bounds.left+h*.16,n.bounds.top+h*.5549),new Zt(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new Zt(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new Zt(n.bounds.left+h*.72983,n.bounds.top+h*.23),new Zt(n.bounds.left+h*.84,n.bounds.top+h*.34085),new Zt(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=Zs(MD),this.ctx.fill(),this.ctx.restore()):n.type===Vw&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=Zs(MD),this.ctx.fill(),this.ctx.restore())),g2e(n)&&n.value.length){switch(m=this.createFontStyle(s),I=m[0],p=m[1],v=this.fontMetrics.getMetrics(I,p).baseline,this.ctx.font=I,this.ctx.fillStyle=Zs(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=v2e(n.styles.textAlign),L=$w(n),x=0,n.styles.textAlign){case 1:x+=L.width/2;break;case 2:x+=L.width;break}E=L.add(x,0,0,-L.height/2+1),this.ctx.save(),this.path([new Zt(L.left,L.top),new Zt(L.left+L.width,L.top),new Zt(L.left+L.width,L.top+L.height),new Zt(L.left,L.top+L.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Nx(n.value,E),s.letterSpacing,v),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ms(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(_=n.styles.listStyleImage,_.type!==0)return[3,18];B=void 0,T=_.url,k.label=15;case 15:return k.trys.push([15,17,,18]),[4,this.context.cache.match(T)];case 16:return B=k.sent(),this.ctx.drawImage(B,n.bounds.left-(B.width+10),n.bounds.top),[3,18];case 17:return k.sent(),this.context.logger.error("Error loading list-style-image "+T),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(I=this.createFontStyle(s)[0],this.ctx.font=I,this.ctx.fillStyle=Zs(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",L=new nd(n.bounds.left,n.bounds.top+fa(n.styles.paddingTop,n.bounds.width),n.bounds.width,ED(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Nx(r.listValue,L),s.letterSpacing,ED(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),k.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return uo(this,void 0,void 0,function(){var n,a,_,s,i,_,o,c,_,A,d,_,h,m,_,p,v,_,x,E,_;return Vi(this,function(B){switch(B.label){case 0:if(Ms(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:B.sent(),n=0,a=r.negativeZIndex,B.label=2;case 2:return n<a.length?(_=a[n],[4,this.renderStack(_)]):[3,5];case 3:B.sent(),B.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:B.sent(),s=0,i=r.nonInlineLevel,B.label=7;case 7:return s<i.length?(_=i[s],[4,this.renderNode(_)]):[3,10];case 8:B.sent(),B.label=9;case 9:return s++,[3,7];case 10:o=0,c=r.nonPositionedFloats,B.label=11;case 11:return o<c.length?(_=c[o],[4,this.renderStack(_)]):[3,14];case 12:B.sent(),B.label=13;case 13:return o++,[3,11];case 14:A=0,d=r.nonPositionedInlineLevel,B.label=15;case 15:return A<d.length?(_=d[A],[4,this.renderStack(_)]):[3,18];case 16:B.sent(),B.label=17;case 17:return A++,[3,15];case 18:h=0,m=r.inlineLevel,B.label=19;case 19:return h<m.length?(_=m[h],[4,this.renderNode(_)]):[3,22];case 20:B.sent(),B.label=21;case 21:return h++,[3,19];case 22:p=0,v=r.zeroOrAutoZIndexOrTransformedOrOpacity,B.label=23;case 23:return p<v.length?(_=v[p],[4,this.renderStack(_)]):[3,26];case 24:B.sent(),B.label=25;case 25:return p++,[3,23];case 26:x=0,E=r.positiveZIndex,B.label=27;case 27:return x<E.length?(_=E[x],[4,this.renderStack(_)]):[3,30];case 28:B.sent(),B.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=Jl(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Jl(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},t.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,a);var c=o.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),o},t.prototype.renderBackgroundImage=function(r){return uo(this,void 0,void 0,function(){var n,a,s,i,o,c;return Vi(this,function(A){switch(A.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var h,m,p,U,W,te,P,M,y,v,U,W,te,P,M,x,E,_,B,T,I,L,k,w,y,N,U,j,F,P,M,ee,W,te,G,q,z,Z,R,K,X,re;return Vi(this,function(ne){switch(ne.label){case 0:if(d.type!==0)return[3,5];h=void 0,m=d.url,ne.label=1;case 1:return ne.trys.push([1,3,,4]),[4,s.context.cache.match(m)];case 2:return h=ne.sent(),[3,4];case 3:return ne.sent(),s.context.logger.error("Error loading background-image "+m),[3,4];case 4:return h&&(p=h_(r,n,[h.width,h.height,h.width/h.height]),U=p[0],W=p[1],te=p[2],P=p[3],M=p[4],y=s.ctx.createPattern(s.resizeImage(h,P,M),"repeat"),s.renderRepeat(U,y,W,te)),[3,6];case 5:r1e(d)?(v=h_(r,n,[null,null,null]),U=v[0],W=v[1],te=v[2],P=v[3],M=v[4],x=Yxe(d.angle,P,M),E=x[0],_=x[1],B=x[2],T=x[3],I=x[4],L=document.createElement("canvas"),L.width=P,L.height=M,k=L.getContext("2d"),w=k.createLinearGradient(_,T,B,I),wD(d.stops,E).forEach(function(ue){return w.addColorStop(ue.stop,Zs(ue.color))}),k.fillStyle=w,k.fillRect(0,0,P,M),P>0&&M>0&&(y=s.ctx.createPattern(L,"repeat"),s.renderRepeat(U,y,W,te))):n1e(d)&&(N=h_(r,n,[null,null,null]),U=N[0],j=N[1],F=N[2],P=N[3],M=N[4],ee=d.position.length===0?[t3]:d.position,W=fa(ee[0],P),te=fa(ee[ee.length-1],M),G=Jxe(d,W,te,P,M),q=G[0],z=G[1],q>0&&z>0&&(Z=s.ctx.createRadialGradient(j+W,F+te,0,j+W,F+te,q),wD(d.stops,q*2).forEach(function(ue){return Z.addColorStop(ue.stop,Zs(ue.color))}),s.path(U),s.ctx.fillStyle=Z,q!==z?(R=r.bounds.left+.5*r.bounds.width,K=r.bounds.top+.5*r.bounds.height,X=z/q,re=1/X,s.ctx.save(),s.ctx.translate(R,K),s.ctx.transform(1,0,0,X,0,0),s.ctx.translate(-R,-K),s.ctx.fillRect(j,re*(F-K)+K,P,M*re),s.ctx.restore()):s.ctx.fill())),ne.label=6;case 6:return n--,[2]}})},s=this,i=0,o=r.styles.backgroundImage.slice(0).reverse(),A.label=1;case 1:return i<o.length?(c=o[i],[5,a(c)]):[3,4];case 2:A.sent(),A.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,a){return uo(this,void 0,void 0,function(){return Vi(this,function(s){return this.path(JD(a,n)),this.ctx.fillStyle=Zs(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,a,s){return uo(this,void 0,void 0,function(){var i,o;return Vi(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return i=i2e(s,a),this.path(i),this.ctx.fillStyle=Zs(r),this.ctx.fill(),o=o2e(s,a),this.path(o),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return uo(this,void 0,void 0,function(){var n,a,s,i,o,c,A,d,h=this;return Vi(this,function(m){switch(m.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!Bf(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=x2e(Nm(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Bf(n.backgroundColor)||(this.ctx.fillStyle=Zs(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:m.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(p){h.ctx.save();var v=Kw(r.curves),x=p.inset?0:m2e,E=a2e(v,-x+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(h.path(v),h.ctx.clip(),h.mask(E)):(h.mask(v),h.ctx.clip(),h.path(E)),h.ctx.shadowOffsetX=p.offsetX.number+x,h.ctx.shadowOffsetY=p.offsetY.number,h.ctx.shadowColor=Zs(p.color),h.ctx.shadowBlur=p.blur.number,h.ctx.fillStyle=p.inset?Zs(p.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),m.label=2;case 2:o=0,c=0,A=s,m.label=3;case 3:return c<A.length?(d=A[c],d.style!==0&&!Bf(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return m.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return m.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return m.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:m.sent(),m.label=11;case 11:o++,m.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return uo(this,void 0,void 0,function(){var o,c,A,d,h,m,p,v,x,E,_,B,T,I,L,k,L,k;return Vi(this,function(w){return this.ctx.save(),o=l2e(s,a),c=JD(s,a),i===2&&(this.path(c),this.ctx.clip()),Jl(c[0])?(A=c[0].start.x,d=c[0].start.y):(A=c[0].x,d=c[0].y),Jl(c[1])?(h=c[1].end.x,m=c[1].end.y):(h=c[1].x,m=c[1].y),a===0||a===2?p=Math.abs(A-h):p=Math.abs(d-m),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(c.slice(0,2)),v=n<3?n*3:n*2,x=n<3?n*2:n,i===3&&(v=n,x=n),E=!0,p<=v*2?E=!1:p<=v*2+x?(_=p/(2*v+x),v*=_,x*=_):(B=Math.floor((p+x)/(v+x)),T=(p-B*v)/(B-1),I=(p-(B+1)*v)/B,x=I<=0||Math.abs(x-T)<Math.abs(x-I)?T:I),E&&(i===3?this.ctx.setLineDash([0,v+x]):this.ctx.setLineDash([v,x])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Zs(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Jl(c[0])&&(L=c[3],k=c[0],this.ctx.beginPath(),this.formatPath([new Zt(L.end.x,L.end.y),new Zt(k.start.x,k.start.y)]),this.ctx.stroke()),Jl(c[1])&&(L=c[1],k=c[2],this.ctx.beginPath(),this.formatPath([new Zt(L.end.x,L.end.y),new Zt(k.start.x,k.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return uo(this,void 0,void 0,function(){var n;return Vi(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Zs(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=s2e(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(A9),g2e=function(e){return e instanceof $Q||e instanceof qQ?!0:e instanceof s3&&e.type!==Vw&&e.type!==Hw},x2e=function(e,t){switch(e){case 0:return Kw(t);case 2:return Zbe(t);case 1:default:return qw(t)}},v2e=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},b2e=["-apple-system","system-ui"],w2e=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return b2e.indexOf(t)===-1}):e},y2e=function(e){Xc(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(r){return uo(this,void 0,void 0,function(){var n,a;return Vi(this,function(s){switch(s.label){case 0:return n=oS(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,E2e(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Zs(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(A9),E2e=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},C2e=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,_b([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,_b([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,_b([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,_b([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),_2e=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new C2e({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new Gbe(this,t)}return e.instanceCount=1,e}(),Ww=function(e,t){return t===void 0&&(t={}),S2e(e,t)};typeof window<"u"&&s9.setContext(window);var S2e=function(e,t){return uo(void 0,void 0,void 0,function(){var r,n,a,s,i,o,c,A,d,h,m,p,v,x,E,_,B,T,I,L,w,k,w,y,N,U,j,F,P,M,ee,W,te,G,q,z,Z,R,K,X;return Vi(this,function(re){switch(re.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(y=t.allowTaint)!==null&&y!==void 0?y:!1,imageTimeout:(N=t.imageTimeout)!==null&&N!==void 0?N:15e3,proxy:t.proxy,useCORS:(U=t.useCORS)!==null&&U!==void 0?U:!1},s=K4({logging:(j=t.logging)!==null&&j!==void 0?j:!0,cache:t.cache},a),i={windowWidth:(F=t.windowWidth)!==null&&F!==void 0?F:n.innerWidth,windowHeight:(P=t.windowHeight)!==null&&P!==void 0?P:n.innerHeight,scrollX:(M=t.scrollX)!==null&&M!==void 0?M:n.pageXOffset,scrollY:(ee=t.scrollY)!==null&&ee!==void 0?ee:n.pageYOffset},o=new nd(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),c=new _2e(s,o),A=(W=t.foreignObjectRendering)!==null&&W!==void 0?W:!1,d={allowTaint:(te=t.allowTaint)!==null&&te!==void 0?te:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:A,copyStyles:A},c.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new WD(c,e,d),m=h.clonedReferenceElement,m?[4,h.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=re.sent(),v=i3(m)||Bbe(m)?age(m.ownerDocument):cE(c,m),x=v.width,E=v.height,_=v.left,B=v.top,T=N2e(c,m,t.backgroundColor),I={canvas:t.canvas,backgroundColor:T,scale:(q=(G=t.scale)!==null&&G!==void 0?G:n.devicePixelRatio)!==null&&q!==void 0?q:1,x:((z=t.x)!==null&&z!==void 0?z:0)+_,y:((Z=t.y)!==null&&Z!==void 0?Z:0)+B,width:(R=t.width)!==null&&R!==void 0?R:Math.ceil(x),height:(K=t.height)!==null&&K!==void 0?K:Math.ceil(E)},A?(c.logger.debug("Document cloned, using foreign object rendering"),w=new y2e(c,I),[4,w.render(m)]):[3,3];case 2:return L=re.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+_+","+B+" with size "+x+"x"+E+" using computed rendering"),c.logger.debug("Starting DOM parsing"),k=YQ(c,m),T===k.styles.backgroundColor&&(k.styles.backgroundColor=$A.TRANSPARENT),c.logger.debug("Starting renderer for element at "+I.x+","+I.y+" with size "+I.width+"x"+I.height),w=new p2e(c,I),[4,w.render(k)];case 4:L=re.sent(),re.label=5;case 5:return(!((X=t.removeContainer)!==null&&X!==void 0)||X)&&(WD.destroy(p)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,L]}})})},N2e=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?_x(e,getComputedStyle(n.documentElement).backgroundColor):$A.TRANSPARENT,s=n.body?_x(e,getComputedStyle(n.body).backgroundColor):$A.TRANSPARENT,i=typeof r=="string"?_x(e,r):r===null?$A.TRANSPARENT:4294967295;return t===n.documentElement?Bf(a)?Bf(s)?i:s:a:i};const B2e=Object.freeze(Object.defineProperty({__proto__:null,default:Ww},Symbol.toStringTag,{value:"Module"})),vE="proyectos_interdisciplinarios",d9="entregas_interdisciplinarias",k2e="usuarios",o3=e=>{const t=e.data();return{id:e.id,...t}},T2e=e=>{const t=nr(Ft(kt,vE),en("nombreProyecto","asc"));return br(t,n=>{const a=n.docs.map(s=>o3(s));e(a)},n=>{console.error("Error al suscribirse a las planificaciones:",n),e([])})},I2e=async e=>{try{return(await ha(Ft(kt,vE),e)).id}catch(t){throw console.error("Error al crear la planificación:",t),new Error("No se pudo crear la planificación.")}},eR=async(e,t)=>{try{const{id:r,...n}=t,a=vr(kt,vE,e);await no(a,n)}catch(r){throw console.error("Error al actualizar la planificación:",r),new Error("No se pudo actualizar la planificación.")}},F2e=async e=>{try{const t=vr(kt,vE,e);await zs(t)}catch(t){throw console.error("Error al eliminar la planificación:",t),new Error("No se pudo eliminar la planificación.")}},j2e=(e,t)=>{const r=nr(Ft(kt,d9),Mn("planificacionId","==",e));return br(r,a=>{const s=a.docs.map(i=>o3(i));t(s)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},tR=async(e,t)=>{try{const r=vr(kt,d9,e);await no(r,{feedbackProfesor:t,fechaFeedback:Ar.fromDate(new Date)},{merge:!0})}catch(r){throw console.error("Error al guardar la retroalimentación:",r),new Error("No se pudo guardar la retroalimentación.")}},D2e=e=>{const t=nr(Ft(kt,k2e));return br(t,n=>{const a=n.docs.map(s=>o3(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},R2e=({planificaciones:e,onActivityUpdate:t})=>{const[r,n]=Q.useState(null),a=Q.useMemo(()=>{const c=[];return e.forEach(A=>{(A.actividades||[]).forEach(d=>c.push({...d,planId:A.id,type:"activity"})),(A.fechasClave||[]).forEach(d=>c.push({id:d.id,planId:A.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:A.docentesResponsables,asignaturaPrincipal:"Milestone"}))}),c.sort((A,d)=>new Date(A.fechaInicio).getTime()-new Date(d.fechaInicio).getTime())},[e]),s=Q.useCallback(c=>{if(c.type==="keyDate")return{text:"Fecha Clave",color:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-300"};const A=new Date;A.setHours(0,0,0,0);const d=new Date(`${c.fechaInicio}T00:00:00`),h=new Date(`${c.fechaFin}T00:00:00`);return h<A?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=A&&h>=A?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}},[]),i=({name:c})=>{const A=(c||"").split(" ").map(p=>p[0]).join("").toUpperCase(),d=p=>{let v=0;for(let x=0;x<p.length;x++)v=p.charCodeAt(x)+((v<<5)-v);return v},h=["bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300","bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300","bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300","bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300","bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300","bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"],m=Math.abs(d(c))%h.length;return l.jsx("div",{className:`w-9 h-9 rounded-full ${h[m]} flex items-center justify-center font-bold text-sm ring-2 ring-white dark:ring-slate-800`,children:A.slice(0,2)})},o=({data:c,onClose:A,onSave:d})=>{const[h,m]=Q.useState(c.activity),p=x=>{m({...h,[x.target.name]:x.target.value})},v=()=>{d(c.planId,h),A()};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 animate-fade-in-up",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Editar Actividad"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Nombre"}),l.jsx("input",{name:"nombre",value:h.nombre,onChange:p,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Responsables"}),l.jsx("input",{name:"responsables",value:h.responsables,onChange:p,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Inicio"}),l.jsx("input",{type:"date",name:"fechaInicio",value:h.fechaInicio,onChange:p,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Fin"}),l.jsx("input",{type:"date",name:"fechaFin",value:h.fechaFin,onChange:p,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[l.jsx("button",{onClick:A,className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 rounded-md font-semibold",children:"Cancelar"}),l.jsx("button",{onClick:v,className:"px-4 py-2 bg-amber-500 text-white rounded-md font-semibold",children:"Guardar"})]})]})})};return a.length===0?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cronograma del Proyecto"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),l.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades para mostrar. Cree una planificación primero."})]}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[l.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-200",children:"Cronograma del Proyecto"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[l.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Tarea"}),l.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),l.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Inicio"}),l.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Fin"}),l.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Asignado"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.map(c=>{const A=s(c),d=c.type==="activity";return l.jsxs("tr",{className:`${d?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>d&&n({planId:c.planId,activity:c}),children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base font-medium text-slate-900 dark:text-slate-200",children:c.nombre}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${A.color}`,children:A.text})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:c.fechaInicio}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:c.fechaFin}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx(i,{name:c.responsables||"N/A"})})]},c.id)})})]})}),r&&l.jsx(o,{data:r,onClose:()=>n(null),onSave:t})]})},L2e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),O2e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21a6 6 0 006-5.197M15 12a4 4 0 110-8 4 4 0 010 8z"})}),U2e=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),l.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0v6"})]}),P2e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),M2e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Q2e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),H2e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),V2e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),hS=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Xd=({icon:e,label:t,children:r,aiButton:n})=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400 font-medium",children:[e,l.jsx("span",{children:t})]}),n]}),r]}),z2e=({initialPlan:e,onSave:t,onCancel:r})=>{const[n,a]=Q.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[s,i]=Q.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""}),[o,c]=Q.useState({nombre:"",fecha:""}),[A,d]=Q.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[h,m]=Q.useState(!1),[p,v]=Q.useState(!1),[x,E]=Q.useState(!1);Q.useEffect(()=>{a(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const _=async y=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}y==="objetivos"?m(!0):v(!0);const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let U="";y==="objetivos"?U=`Basado en la siguiente descripción de un proyecto escolar interdisciplinario, genera 3 a 5 objetivos de aprendizaje claros, medibles y concisos. La respuesta debe ser solo el texto de los objetivos, formateado en una lista con guiones.
            Descripción del Proyecto: "${n.descripcionProyecto}"`:U=`Basado en la siguiente descripción y objetivos de un proyecto escolar interdisciplinario, genera una lista de 5 a 7 indicadores de logro concretos y observables que permitan evaluar el cumplimiento de los objetivos. La respuesta debe ser solo el texto de los indicadores, formateado en una lista con guiones.
            Descripción del Proyecto: "${n.descripcionProyecto}"
            Objetivos (si existen): "${n.objetivos||"Aún no definidos, genéralos a partir de la descripción."}"`;try{const ee=(await(await new Is(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(U)).response).text();a(W=>({...W,[y]:ee.replace(/(\*\*|\*)/g,"")}))}catch(j){console.error(`Error al generar ${y}`,j),alert(`Hubo un error al generar los ${y}. Inténtelo de nuevo.`)}finally{y==="objetivos"?m(!1):v(!1)}},B=async()=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}E(!0);const y="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",N=`
            Basado en la descripción de un proyecto escolar, genera una estructura completa. La respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            Descripción del proyecto: "${n.descripcionProyecto}"
            Docentes responsables: "${n.docentesResponsables}"
            Asignaturas involucradas: "${n.asignaturas.join(", ")}"

            El JSON debe tener tres claves: 'actividades', 'fechasClave', y 'tareas'.
            1. 'actividades': Un array de 3 a 5 objetos. Cada objeto debe tener: "nombre" (string), "fechaInicio" (string "YYYY-MM-DD"), "fechaFin" (string "YYYY-MM-DD"), y "responsables" (string, uno de los docentes).
            2. 'fechasClave': Un array de 2 a 3 objetos (hitos importantes). Cada objeto debe tener: "nombre" (string) y "fecha" (string "YYYY-MM-DD").
            3. 'tareas': Un array de 2 a 3 objetos (tareas para estudiantes). Cada objeto debe tener: "instrucciones" (string detallado) y "fechaEntrega" (string "YYYY-MM-DD").
            Las fechas deben ser lógicas y secuenciales. Asume que el proyecto comienza hoy.
        `;try{const ee=(await(await new Is(y).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(N)).response).text().replace(/^```json\s*|```\s*$/g,""),W=JSON.parse(ee);a(te=>{var G,q,z;return{...te,actividades:((G=W.actividades)==null?void 0:G.map(Z=>({...Z,id:crypto.randomUUID()})))||te.actividades,fechasClave:((q=W.fechasClave)==null?void 0:q.map(Z=>({...Z,id:crypto.randomUUID()})))||te.fechasClave,tareas:((z=W.tareas)==null?void 0:z.map((Z,R)=>({...Z,id:crypto.randomUUID(),numero:R+1})))||te.tareas}})}catch(U){console.error("Error al generar la estructura del proyecto:",U),alert("No se pudo generar la estructura del proyecto. Intente de nuevo.")}finally{E(!1)}},T=y=>{a(N=>({...N,[y.target.name]:y.target.value}))},I=(y,N)=>{a(U=>{const j=U[y],F=j.includes(N)?j.filter(P=>P!==N):[...j,N];return{...U,[y]:F}})},L=()=>{if(!s.nombre||!s.fechaInicio||!s.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}a(y=>({...y,actividades:[...y.actividades||[],{...s,id:crypto.randomUUID()}]})),i({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""})},k=()=>{!o.nombre||!o.fecha||(a(y=>({...y,fechasClave:[...y.fechasClave||[],{...o,id:crypto.randomUUID()}]})),c({nombre:"",fecha:""}))},w=()=>{var N;if(!A.instrucciones||!A.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}const y={id:crypto.randomUUID(),numero:(((N=n.tareas)==null?void 0:N.length)||0)+1,...A};a(U=>({...U,tareas:[...U.tareas||[],y]})),d({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return l.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[l.jsx("div",{className:"text-center mb-12",children:l.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-800 dark:text-slate-200",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})}),l.jsxs("div",{className:"space-y-6",children:[l.jsx(Xd,{icon:l.jsx(L2e,{}),label:"Nombre del Proyecto",children:l.jsx("input",{name:"nombreProyecto",value:n.nombreProyecto,onChange:T,placeholder:"Ingrese el nombre del proyecto...",className:"w-full mt-1 bg-transparent text-lg font-semibold focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),l.jsx(Xd,{icon:l.jsx(O2e,{}),label:"Profesores",children:l.jsx("input",{name:"docentesResponsables",value:n.docentesResponsables,onChange:T,placeholder:"Ingrese nombres separados por comas...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),l.jsx(Xd,{icon:l.jsx(U2e,{}),label:"Cursos",children:l.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mt-2",children:qa.map(y=>l.jsx("button",{type:"button",onClick:()=>I("cursos",y),className:`w-full text-center p-2 rounded-md text-sm transition-colors ${n.cursos.includes(y)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:y},y))})}),l.jsx(Xd,{icon:l.jsx(P2e,{}),label:"Asignaturas",children:l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-2",children:yi.map(y=>l.jsx("button",{type:"button",onClick:()=>I("asignaturas",y),className:`w-full text-left p-2 rounded-md text-sm transition-colors ${n.asignaturas.includes(y)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:y},y))})}),l.jsx(Xd,{icon:l.jsx(M2e,{}),label:"Descripción del Proyecto",children:l.jsx("textarea",{name:"descripcionProyecto",value:n.descripcionProyecto,onChange:T,placeholder:"Detalle aquí la metodología, el producto final esperado y el propósito del proyecto. Esta información es clave para la IA.",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[100px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),l.jsx(Xd,{icon:l.jsx(Q2e,{}),label:"Objetivos",aiButton:l.jsx("button",{type:"button",onClick:()=>_("objetivos"),disabled:!n.descripcionProyecto.trim()||h,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:l.jsx(hS,{})}),children:h?l.jsx("div",{className:"p-4 text-center",children:"Generando..."}):l.jsx("textarea",{name:"objetivos",value:n.objetivos,onChange:T,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),l.jsx(Xd,{icon:l.jsx(H2e,{}),label:"Indicadores de Éxito",aiButton:l.jsx("button",{type:"button",onClick:()=>_("indicadoresLogro"),disabled:!n.descripcionProyecto.trim()||p,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:l.jsx(hS,{})}),children:p?l.jsx("div",{className:"p-4 text-center",children:"Generando..."}):l.jsx("textarea",{name:"indicadoresLogro",value:n.indicadoresLogro,onChange:T,placeholder:"Liste los indicadores de logro o evaluación...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),l.jsx(Xd,{icon:l.jsx(V2e,{}),label:"Carta Gantt",children:l.jsxs("div",{className:"space-y-4 mt-2",children:[l.jsx("div",{className:"text-center border-b pb-4 mb-4 dark:border-slate-700",children:l.jsx("button",{type:"button",onClick:B,disabled:x||!n.descripcionProyecto,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:x?"Generando...":"✨ Sugerir Estructura con IA"})}),l.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-semibold",children:"Actividades"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-end",children:[l.jsx("input",{value:s.nombre,onChange:y=>i({...s,nombre:y.target.value}),placeholder:"Nombre",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),l.jsx("input",{type:"date",value:s.fechaInicio,onChange:y=>i({...s,fechaInicio:y.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{type:"date",value:s.fechaFin,onChange:y=>i({...s,fechaFin:y.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:L,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),l.jsx("ul",{className:"text-xs",children:n.actividades.map(y=>l.jsx("li",{children:y.nombre},y.id))})]}),l.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-semibold",children:"Fechas Clave (Hitos)"}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[l.jsx("input",{value:o.nombre,onChange:y=>c({...o,nombre:y.target.value}),placeholder:"Hito",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 col-span-1"}),l.jsx("input",{type:"date",value:o.fecha,onChange:y=>c({...o,fecha:y.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:k,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),l.jsx("ul",{className:"text-xs",children:n.fechasClave.map(y=>l.jsxs("li",{children:[y.nombre," (",y.fecha,")"]},y.id))})]}),l.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-semibold",children:"Tareas para Estudiantes"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[l.jsx("input",{value:A.instrucciones,onChange:y=>d({...A,instrucciones:y.target.value}),placeholder:"Instrucciones",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),l.jsx("input",{type:"date",value:A.fechaEntrega,onChange:y=>d({...A,fechaEntrega:y.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{type:"button",onClick:w,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),l.jsx("ul",{className:"text-xs",children:(n.tareas||[]).map(y=>l.jsxs("li",{children:[y.numero,". ",y.instrucciones]},y.id))})]})]})}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6",children:[l.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),l.jsx("button",{onClick:()=>t(n),className:"px-8 py-3 bg-slate-800 text-white rounded-lg font-semibold hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:e?"Guardar Cambios":"Guardar Proyecto"})]})]})]})},rR=()=>{const[e,t]=Q.useState([]),[r,n]=Q.useState(!0),[a,s]=Q.useState("list"),[i,o]=Q.useState(null),[c,A]=Q.useState(null),[d,h]=Q.useState(null);Q.useEffect(()=>{n(!0);const T=T2e(I=>{t(I),n(!1)});return()=>T()},[]);const m=Q.useCallback(async(T,I)=>{const L=e.find(k=>k.id===T);if(L){const k={...L,actividades:(L.actividades||[]).map(w=>w.id===I.id?I:w)};await eR(T,k)}},[e]),p=async T=>{try{"id"in T&&T.id?await eR(T.id,T):await I2e(T),s("list"),o(null)}catch(I){console.error("Error al guardar la planificación:",I),alert("No se pudo guardar la planificación.")}},v=T=>{o(T),s("form")},x=async T=>{if(console.log("ID recibido por handleDelete:",T),!T){console.error("handleDelete fue llamado con un ID inválido:",T),alert("Error: No se puede eliminar un proyecto sin un ID válido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await F2e(T)}catch(I){console.error("Error al eliminar la planificación:",I),alert("No se pudo eliminar la planificación.")}},E=()=>{o(null),s("form")},_=async T=>{A(T.id);const I=new ur("p","mm","a4"),L=15,k=I.internal.pageSize.getWidth(),w=I.internal.pageSize.getHeight(),y=k-L*2;let N=L;const U=22,j=14,F=11,P=()=>{I.setFont("helvetica","normal"),I.setFontSize(9),I.setTextColor(150),I.text("Proyecto Interdisciplinario",L,12),I.text("Liceo Industrial de Recoleta",k-L,12,{align:"right"}),I.setDrawColor(220),I.line(L,15,k-L,15)},M=q=>{N+q>w-L&&(I.addPage(),P(),N=L+15)},ee=(q,z)=>{if(!z||Array.isArray(z)&&z.length===0||typeof z=="string"&&!z.trim())return;const Z=10;I.setFontSize(F);const R=Array.isArray(z)?z.join(", "):String(z),K=I.splitTextToSize(R,y),X=K.length*(F*.35*1.15);M(Z+X+12),I.setFont("helvetica","bold"),I.setFontSize(j),I.setTextColor(40),I.text(q,L,N),N+=6,I.setDrawColor(200),I.line(L,N,L+30,N),N+=8,I.setFont("helvetica","normal"),I.setFontSize(F),I.setTextColor(80),I.text(K,L,N),N+=X+12};P(),N=L+20,I.setFont("helvetica","bold"),I.setFontSize(U),I.setTextColor(0);const W=I.splitTextToSize(T.nombreProyecto,y);if(I.text(W,L,N),N+=W.length*(U*.4)+10,ic(I,{startY:N,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},T.docentesResponsables],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},T.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},T.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:F,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),N=I.lastAutoTable.finalY+15,ee("Descripción del Proyecto",T.descripcionProyecto),ee("Objetivos de Aprendizaje",T.objetivos),ee("Indicadores de Logro",T.indicadoresLogro),T.tareas&&T.tareas.length>0){const q=T.tareas.map(Z=>[Z.numero.toString(),Z.instrucciones,Z.fechaEntrega]),z=(q.length+1)*10+15;M(z+15),I.setFont("helvetica","bold"),I.setFontSize(j),I.setTextColor(40),I.text("Tareas para Estudiantes",L,N),N+=10,ic(I,{startY:N,head:[["#","Instrucciones","Fecha de Entrega"]],body:q,theme:"striped",headStyles:{fillColor:[52,73,94]}}),N=I.lastAutoTable.finalY+15}const te=document.getElementById("gantt-container-vertical");if(te)try{const z=(await Ww(te,{scale:2,backgroundColor:"#ffffff"})).toDataURL("image/png");I.addPage(),P(),N=L+15,I.setFont("helvetica","bold"),I.setFontSize(j),I.setTextColor(40),I.text("Cronograma del Proyecto",L,N),N+=10;const Z=I.getImageProperties(z),R=y,K=Z.height*R/Z.width;I.addImage(z,"PNG",L,N,R,K)}catch(q){console.error("Error generating timeline image:",q)}const G=I.internal.pages.length-1;for(let q=1;q<=G;q++)I.setPage(q),I.setFont("helvetica","normal"),I.setFontSize(9),I.setTextColor(150),I.text(`Página ${q} de ${G}`,k-L,I.internal.pageSize.getHeight()-10,{align:"right"});I.save(`Proyecto_${T.nombreProyecto.replace(/\s/g,"_")}.pdf`),A(null)},B=({plan:T,onBack:I})=>{var ee,W;const[L,k]=Q.useState([]),[w,y]=Q.useState([]),[N,U]=Q.useState(((ee=T.tareas)==null?void 0:ee[0])||null),[j,F]=Q.useState(null);Q.useEffect(()=>{const te=D2e(k),G=j2e(T.id,y);return()=>{te(),G()}},[T.id]);const P=Q.useMemo(()=>L.filter(te=>te.profile===Gt.ESTUDIANTE&&T.cursos.includes(te.curso||"")).sort((te,G)=>te.nombreCompleto.localeCompare(G.nombreCompleto)),[L,T.cursos]),M=async te=>{var z;F(te.id);const G="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",q=`
                Eres un profesor asistente. Genera una retroalimentación constructiva para la entrega de un estudiante.
                - Instrucciones de la tarea: "${N==null?void 0:N.instrucciones}"
                - Comentario del estudiante: "${te.observacionesEstudiante||"No dejó comentarios."}"
                - Enlace entregado: "${te.enlaceUrl||"No aplica"}"
                - Archivo entregado: "${((z=te.archivoAdjunto)==null?void 0:z.nombre)||"No aplica"}"
                
                La retroalimentación debe ser breve (2-3 frases), motivadora, y enfocada en cómo podría mejorar.
            `;try{const re=(await(await new Is(G).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(q)).response).text().replace(/(\*\*|\*)/g,"");await tR(te.id,re)}catch(Z){console.error("Error al generar feedback con IA:",Z),alert("No se pudo generar la retroalimentación.")}finally{F(null)}};return N?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:["Entregas de Tareas: ",T.nombreProyecto]}),l.jsx("button",{onClick:I,className:"font-semibold",children:"← Volver a Proyectos"})]}),l.jsx("select",{value:N.id,onChange:te=>{var G;return U(((G=T.tareas)==null?void 0:G.find(q=>q.id===te.target.value))||null)},className:"mb-4 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600",children:(W=T.tareas)==null?void 0:W.map(te=>l.jsxs("option",{value:te.id,children:["Tarea ",te.numero,": ",te.instrucciones]},te.id))}),l.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:P.map(te=>{const G=w.find(q=>q.tareaId===N.id&&q.estudianteId===te.id);return l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[te.nombreCompleto," - ",G!=null&&G.completada?l.jsx("span",{className:"text-green-600",children:"Entregado"}):l.jsx("span",{className:"text-red-600",children:"Pendiente"})]}),G?l.jsxs("div",{className:"text-sm mt-2 space-y-2",children:[G.observacionesEstudiante&&l.jsxs("p",{children:[l.jsx("strong",{children:"Comentario:"})," ",G.observacionesEstudiante]}),G.enlaceUrl&&l.jsxs("p",{children:[l.jsx("strong",{children:"Enlace:"})," ",l.jsx("a",{href:G.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:G.enlaceUrl})]}),G.archivoAdjunto&&l.jsxs("p",{children:[l.jsx("strong",{children:"Archivo:"})," ",l.jsx("a",{href:G.archivoAdjunto.url,download:G.archivoAdjunto.nombre,className:"text-blue-500 hover:underline",children:G.archivoAdjunto.nombre})]}),l.jsxs("div",{className:"flex items-end gap-2",children:[l.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:G.feedbackProfesor||"",onBlur:q=>tR(G.id,q.target.value),rows:2,className:"w-full mt-2 p-1 border rounded-md dark:bg-slate-700 dark:border-slate-600 flex-grow"},G.id),l.jsx("button",{onClick:()=>M(G),disabled:j===G.id,className:"p-2 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50",title:"Generar Feedback con IA",children:j===G.id?"...":l.jsx(hS,{})})]})]}):l.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"El estudiante aún no ha realizado la entrega."})]},te.id)})})]}):l.jsx("div",{className:"text-center p-8",children:"Este proyecto no tiene tareas asignadas."})};return r?l.jsx("div",{className:"text-center py-10",children:"Cargando proyectos..."}):d?l.jsx(B,{plan:d,onBack:()=>h(null)}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[a==="list"?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Proyectos Interdisciplinarios"}),l.jsx("button",{onClick:E,className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),l.jsx("div",{className:"space-y-4",children:e.map(T=>(console.log("Inspeccionando objeto plan:",T),l.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:T.nombreProyecto}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Cursos: ",(T.cursos||[]).join(", ")]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("button",{onClick:()=>h(T),className:"text-green-600 hover:text-green-800 dark:text-green-400 font-semibold text-sm",children:"Ver Entregas"}),l.jsx("button",{onClick:()=>_(T),disabled:c===T.id,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm disabled:opacity-50",children:c===T.id?"Exportando...":"Exportar PDF"}),l.jsx("button",{onClick:()=>v(T),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Editar"}),l.jsx("button",{onClick:()=>x(T.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]})},T.id)))})]}):l.jsx(z2e,{initialPlan:i,onSave:p,onCancel:()=>{s("list"),o(null)}}),e.length>0&&l.jsx("div",{id:"gantt-container-vertical",children:l.jsx(R2e,{planificaciones:e,onActivityUpdate:m})})]})},m_="pañolMaquinas",nR="pañolRegistros",G2e=()=>{const[e,t]=Q.useState([]),[r,n]=Q.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,i]=Q.useState(a),[o,c]=Q.useState(null),A={nombre:"",especialidad:"Industrial"},[d,h]=Q.useState(A),[m,p]=Q.useState(null),[v,x]=Q.useState({maquinaId:"",curso:"",profesor:"",fecha:""});Q.useEffect(()=>{try{const F=localStorage.getItem(m_);if(F&&JSON.parse(F).length>0)t(JSON.parse(F));else{const M=[{id:crypto.randomUUID(),nombre:"Torno",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Fresadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora MIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora TIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Torno CNC",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Elevador",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Compresor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta de motor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta hidráulica",especialidad:"Automotriz"}];t(M),localStorage.setItem(m_,JSON.stringify(M))}const P=localStorage.getItem(nR);P&&n(JSON.parse(P))}catch(F){console.error("Error al cargar datos de Pañol desde localStorage",F)}},[]);const E=Q.useCallback(F=>{t(F),localStorage.setItem(m_,JSON.stringify(F))},[]),_=Q.useCallback(F=>{n(F),localStorage.setItem(nR,JSON.stringify(F))},[]),B=F=>{F.preventDefault(),d.nombre.trim()&&(E(m?e.map(P=>P.id===m.id?{...m,...d}:P):[{...d,id:crypto.randomUUID()},...e]),h(A),p(null))},T=Q.useCallback(F=>{if(r.some(P=>P.maquinaId===F)){alert("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");return}window.confirm("¿Eliminar esta máquina?")&&E(e.filter(P=>P.id!==F))},[e,r,E]),I=F=>{F.preventDefault();const P=o||s;if(!P.curso||!P.profesorResponsable.trim()||!P.maquinaId||P.totalHoras<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}_(o?r.map(M=>M.id===o.id?o:M):[{...s,id:crypto.randomUUID()},...r]),i(a),c(null)},L=Q.useCallback(F=>{window.confirm("¿Eliminar este registro de uso?")&&_(r.filter(P=>P.id!==F))},[r,_]),k=Q.useMemo(()=>r.filter(F=>(v.maquinaId===""||F.maquinaId===v.maquinaId)&&(v.curso===""||F.curso===v.curso)&&(v.profesor===""||F.profesorResponsable.toLowerCase().includes(v.profesor.toLowerCase()))&&(v.fecha===""||F.fecha===v.fecha)).sort((F,P)=>new Date(P.fecha).getTime()-new Date(F.fecha).getTime()),[r,v]),w=Q.useMemo(()=>new Map(e.map(F=>[F.id,F])),[e]),y=()=>{const F=k.map(ee=>{var W,te;return{Fecha:ee.fecha,Curso:ee.curso,Profesor:ee.profesorResponsable,Máquina:((W=w.get(ee.maquinaId))==null?void 0:W.nombre)||"N/A",Especialidad:((te=w.get(ee.maquinaId))==null?void 0:te.especialidad)||"N/A","Total Horas":ee.totalHoras,Observaciones:ee.observaciones}}),P=tc.json_to_sheet(F),M=tc.book_new();tc.book_append_sheet(M,P,"RegistrosPañol"),MB(M,"Registros_Pañol.xlsx")},N=()=>{const F=new ur;ic(F,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:k.map(P=>{var M,ee;return[P.fecha,P.curso,P.profesorResponsable,((M=w.get(P.maquinaId))==null?void 0:M.nombre)||"N/A",((ee=w.get(P.maquinaId))==null?void 0:ee.especialidad)||"N/A",P.totalHoras,P.observaciones]}),margin:{top:20,right:10,bottom:20,left:10},didDrawPage:P=>{F.setFontSize(10),F.setFont("helvetica","bold"),F.text("LICEO INDUSTRIAL DE RECOLETA",P.settings.margin.left,15)}}),F.save("Registros_Pañol.pdf")},U="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",j=()=>{const F=o||s,P=o?c:i;return l.jsxs("form",{onSubmit:I,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),l.jsx("input",{name:"fecha",type:"date",value:F.fecha,onChange:M=>P({...F,fecha:M.target.value}),className:U,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Curso"}),l.jsxs("select",{name:"curso",value:F.curso,onChange:M=>P({...F,curso:M.target.value}),className:U,required:!0,children:[l.jsx("option",{value:"",children:"Curso"}),qa.map(M=>l.jsx("option",{children:M},M))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Profesor"}),l.jsxs("select",{name:"profesorResponsable",value:F.profesorResponsable,onChange:M=>P({...F,profesorResponsable:M.target.value}),className:U,required:!0,children:[l.jsx("option",{value:"",children:"Profesor Responsable"}),h4.map(M=>l.jsx("option",{value:M,children:M},M))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Máquina"}),l.jsxs("select",{name:"maquinaId",value:F.maquinaId,onChange:M=>P({...F,maquinaId:M.target.value}),className:U,required:!0,children:[l.jsx("option",{value:"",children:"Máquina"}),e.map(M=>l.jsx("option",{value:M.id,children:M.nombre},M.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Total de Horas"}),l.jsx("input",{name:"totalHoras",type:"number",value:F.totalHoras,onChange:M=>P({...F,totalHoras:Number(M.target.value)}),className:U,required:!0,min:"0.5",step:"0.5"})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),l.jsx("textarea",{name:"observaciones",value:F.observaciones,onChange:M=>P({...F,observaciones:M.target.value}),placeholder:"Observaciones...",className:`${U}`,rows:1})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&l.jsx("button",{type:"button",onClick:()=>c(null),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:o?"Actualizar":"Registrar"})]})]})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Pañol: Registro de Uso de Máquinas"}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:o?`Editando Registro #${o.id.substring(0,4)}`:"Nuevo Registro de Uso"}),j()]}),l.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Administrar Máquinas"}),l.jsxs("form",{onSubmit:B,className:"flex gap-2 mb-4",children:[l.jsx("input",{value:d.nombre,onChange:F=>h({...d,nombre:F.target.value}),placeholder:"Nombre máquina",className:U}),l.jsxs("select",{value:d.especialidad,onChange:F=>h({...d,especialidad:F.target.value}),className:U,children:[l.jsx("option",{value:"Industrial",children:"Industrial"}),l.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),l.jsx("button",{type:"submit",className:"bg-slate-200 p-2 rounded-lg font-bold",children:m?"✓":"+"})]}),l.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:e.map(F=>l.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[l.jsxs("span",{children:[F.nombre," ",l.jsxs("span",{className:"text-xs text-slate-500",children:["(",F.especialidad,")"]})]}),l.jsxs("div",{className:"space-x-2",children:[l.jsx("button",{onClick:()=>{p(F),h(F)},className:"text-blue-500",children:"✏️"}),l.jsx("button",{onClick:()=>T(F.id),className:"text-red-500",children:"🗑️"})]})]},F.id))})]}),l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Historial de Uso"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:y,className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),l.jsx("button",{onClick:N,className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[l.jsx("input",{type:"date",value:v.fecha,onChange:F=>x({...v,fecha:F.target.value}),className:U}),l.jsxs("select",{value:v.curso,onChange:F=>x({...v,curso:F.target.value}),className:U,children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),qa.map(F=>l.jsx("option",{children:F},F))]}),l.jsxs("select",{value:v.maquinaId,onChange:F=>x({...v,maquinaId:F.target.value}),className:U,children:[l.jsx("option",{value:"",children:"Todas las Máquinas"}),e.map(F=>l.jsx("option",{value:F.id,children:F.nombre},F.id))]}),l.jsx("input",{value:v.profesor,onChange:F=>x({...v,profesor:F.target.value}),placeholder:"Buscar profesor...",className:U})]}),l.jsx("div",{className:"max-h-96 overflow-y-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Máquina"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Profesor"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Total Horas"}),l.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-500 uppercase",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:k.map(F=>{var P;return l.jsxs("tr",{children:[l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:F.fecha}),l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((P=w.get(F.maquinaId))==null?void 0:P.nombre)||"N/A"}),l.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[F.profesorResponsable," (",F.curso,")"]}),l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:F.totalHoras}),l.jsxs("td",{className:"px-3 py-2 text-center",children:[l.jsx("button",{onClick:()=>c(F),className:"text-blue-500",children:"✏️"}),l.jsx("button",{onClick:()=>L(F.id),className:"text-red-500 ml-2",children:"🗑️"})]})]},F.id)})})]})})]})]})]})};function go(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=go(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}var p_={exports:{}},g_={},x_={exports:{}},v_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aR;function K2e(){if(aR)return v_;aR=1;var e=g1();function t(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,i=e.useDebugValue;function o(h,m){var p=m(),v=n({inst:{value:p,getSnapshot:m}}),x=v[0].inst,E=v[1];return s(function(){x.value=p,x.getSnapshot=m,c(x)&&E({inst:x})},[h,p,m]),a(function(){return c(x)&&E({inst:x}),h(function(){c(x)&&E({inst:x})})},[h]),i(p),p}function c(h){var m=h.getSnapshot;h=h.value;try{var p=m();return!r(h,p)}catch{return!0}}function A(h,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?A:o;return v_.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,v_}var sR;function q2e(){return sR||(sR=1,x_.exports=K2e()),x_.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iR;function $2e(){if(iR)return g_;iR=1;var e=g1(),t=q2e();function r(A,d){return A===d&&(A!==0||1/A===1/d)||A!==A&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,c=e.useDebugValue;return g_.useSyncExternalStoreWithSelector=function(A,d,h,m,p){var v=s(null);if(v.current===null){var x={hasValue:!1,value:null};v.current=x}else x=v.current;v=o(function(){function _(k){if(!B){if(B=!0,T=k,k=m(k),p!==void 0&&x.hasValue){var w=x.value;if(p(w,k))return I=w}return I=k}if(w=I,n(T,k))return w;var y=m(k);return p!==void 0&&p(w,y)?(T=k,w):(T=k,I=y)}var B=!1,T,I,L=h===void 0?null:h;return[function(){return _(d())},L===null?void 0:function(){return _(L())}]},[d,h,m,p]);var E=a(A,v[0],v[1]);return i(function(){x.hasValue=!0,x.value=E},[E]),c(E),E},g_}var oR;function W2e(){return oR||(oR=1,p_.exports=$2e()),p_.exports}var X2e=W2e();const Y2e=fy(X2e),J2e={},lR=e=>{let t;const r=new Set,n=(d,h)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const p=t;t=h??(typeof m!="object"||m===null)?m:Object.assign({},t,m),r.forEach(v=>v(t,p))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>A,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(J2e?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},A=t=e(n,a,c);return c},Z2e=e=>e?lR(e):lR,{useDebugValue:ewe}=mt,{useSyncExternalStoreWithSelector:twe}=Y2e,rwe=e=>e;function f9(e,t=rwe,r){const n=twe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return ewe(n),n}const cR=(e,t)=>{const r=Z2e(e),n=(a,s=t)=>f9(r,a,s);return Object.assign(n,r),n},nwe=(e,t)=>e?cR(e,t):cR;function ro(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var awe={value:()=>{}};function bE(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new F2(r)}function F2(e){this._=e}function swe(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}F2.prototype=bE.prototype={constructor:F2,on:function(e,t){var r=this._,n=swe(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=iwe(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=uR(r[a],e.name,t);else if(t==null)for(a in r)r[a]=uR(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new F2(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function iwe(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function uR(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=awe,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var mS="http://www.w3.org/1999/xhtml";const AR={svg:"http://www.w3.org/2000/svg",xhtml:mS,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function wE(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),AR.hasOwnProperty(t)?{space:AR[t],local:e}:e}function owe(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===mS&&t.documentElement.namespaceURI===mS?t.createElement(e):t.createElementNS(r,e)}}function lwe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function h9(e){var t=wE(e);return(t.local?lwe:owe)(t)}function cwe(){}function l3(e){return e==null?cwe:function(){return this.querySelector(e)}}function uwe(e){typeof e!="function"&&(e=l3(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=new Array(i),c,A,d=0;d<i;++d)(c=s[d])&&(A=e.call(c,c.__data__,d,s))&&("__data__"in c&&(A.__data__=c.__data__),o[d]=A);return new bl(n,this._parents)}function Awe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function dwe(){return[]}function m9(e){return e==null?dwe:function(){return this.querySelectorAll(e)}}function fwe(e){return function(){return Awe(e.apply(this,arguments))}}function hwe(e){typeof e=="function"?e=fwe(e):e=m9(e);for(var t=this._groups,r=t.length,n=[],a=[],s=0;s<r;++s)for(var i=t[s],o=i.length,c,A=0;A<o;++A)(c=i[A])&&(n.push(e.call(c,c.__data__,A,i)),a.push(c));return new bl(n,a)}function p9(e){return function(){return this.matches(e)}}function g9(e){return function(t){return t.matches(e)}}var mwe=Array.prototype.find;function pwe(e){return function(){return mwe.call(this.children,e)}}function gwe(){return this.firstElementChild}function xwe(e){return this.select(e==null?gwe:pwe(typeof e=="function"?e:g9(e)))}var vwe=Array.prototype.filter;function bwe(){return Array.from(this.children)}function wwe(e){return function(){return vwe.call(this.children,e)}}function ywe(e){return this.selectAll(e==null?bwe:wwe(typeof e=="function"?e:g9(e)))}function Ewe(e){typeof e!="function"&&(e=p9(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],c,A=0;A<i;++A)(c=s[A])&&e.call(c,c.__data__,A,s)&&o.push(c);return new bl(n,this._parents)}function x9(e){return new Array(e.length)}function Cwe(){return new bl(this._enter||this._groups.map(x9),this._parents)}function Xw(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Xw.prototype={constructor:Xw,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function _we(e){return function(){return e}}function Swe(e,t,r,n,a,s){for(var i=0,o,c=t.length,A=s.length;i<A;++i)(o=t[i])?(o.__data__=s[i],n[i]=o):r[i]=new Xw(e,s[i]);for(;i<c;++i)(o=t[i])&&(a[i]=o)}function Nwe(e,t,r,n,a,s,i){var o,c,A=new Map,d=t.length,h=s.length,m=new Array(d),p;for(o=0;o<d;++o)(c=t[o])&&(m[o]=p=i.call(c,c.__data__,o,t)+"",A.has(p)?a[o]=c:A.set(p,c));for(o=0;o<h;++o)p=i.call(e,s[o],o,s)+"",(c=A.get(p))?(n[o]=c,c.__data__=s[o],A.delete(p)):r[o]=new Xw(e,s[o]);for(o=0;o<d;++o)(c=t[o])&&A.get(m[o])===c&&(a[o]=c)}function Bwe(e){return e.__data__}function kwe(e,t){if(!arguments.length)return Array.from(this,Bwe);var r=t?Nwe:Swe,n=this._parents,a=this._groups;typeof e!="function"&&(e=_we(e));for(var s=a.length,i=new Array(s),o=new Array(s),c=new Array(s),A=0;A<s;++A){var d=n[A],h=a[A],m=h.length,p=Twe(e.call(d,d&&d.__data__,A,n)),v=p.length,x=o[A]=new Array(v),E=i[A]=new Array(v),_=c[A]=new Array(m);r(d,h,x,E,_,p,t);for(var B=0,T=0,I,L;B<v;++B)if(I=x[B]){for(B>=T&&(T=B+1);!(L=E[T])&&++T<v;);I._next=L||null}}return i=new bl(i,n),i._enter=o,i._exit=c,i}function Twe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Iwe(){return new bl(this._exit||this._groups.map(x9),this._parents)}function Fwe(e,t,r){var n=this.enter(),a=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function jwe(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,s=n.length,i=Math.min(a,s),o=new Array(a),c=0;c<i;++c)for(var A=r[c],d=n[c],h=A.length,m=o[c]=new Array(h),p,v=0;v<h;++v)(p=A[v]||d[v])&&(m[v]=p);for(;c<a;++c)o[c]=r[c];return new bl(o,this._parents)}function Dwe(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,s=n[a],i;--a>=0;)(i=n[a])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function Rwe(e){e||(e=Lwe);function t(h,m){return h&&m?e(h.__data__,m.__data__):!h-!m}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var i=r[s],o=i.length,c=a[s]=new Array(o),A,d=0;d<o;++d)(A=i[d])&&(c[d]=A);c.sort(t)}return new bl(a,this._parents).order()}function Lwe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Owe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Uwe(){return Array.from(this)}function Pwe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length;a<s;++a){var i=n[a];if(i)return i}return null}function Mwe(){let e=0;for(const t of this)++e;return e}function Qwe(){return!this.node()}function Hwe(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],s=0,i=a.length,o;s<i;++s)(o=a[s])&&e.call(o,o.__data__,s,a);return this}function Vwe(e){return function(){this.removeAttribute(e)}}function zwe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gwe(e,t){return function(){this.setAttribute(e,t)}}function Kwe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function qwe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function $we(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Wwe(e,t){var r=wE(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?zwe:Vwe:typeof t=="function"?r.local?$we:qwe:r.local?Kwe:Gwe)(r,t))}function v9(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Xwe(e){return function(){this.style.removeProperty(e)}}function Ywe(e,t,r){return function(){this.style.setProperty(e,t,r)}}function Jwe(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function Zwe(e,t,r){return arguments.length>1?this.each((t==null?Xwe:typeof t=="function"?Jwe:Ywe)(e,t,r??"")):gp(this.node(),e)}function gp(e,t){return e.style.getPropertyValue(t)||v9(e).getComputedStyle(e,null).getPropertyValue(t)}function eye(e){return function(){delete this[e]}}function tye(e,t){return function(){this[e]=t}}function rye(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function nye(e,t){return arguments.length>1?this.each((t==null?eye:typeof t=="function"?rye:tye)(e,t)):this.node()[e]}function b9(e){return e.trim().split(/^|\s+/)}function c3(e){return e.classList||new w9(e)}function w9(e){this._node=e,this._names=b9(e.getAttribute("class")||"")}w9.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function y9(e,t){for(var r=c3(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function E9(e,t){for(var r=c3(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function aye(e){return function(){y9(this,e)}}function sye(e){return function(){E9(this,e)}}function iye(e,t){return function(){(t.apply(this,arguments)?y9:E9)(this,e)}}function oye(e,t){var r=b9(e+"");if(arguments.length<2){for(var n=c3(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?iye:t?aye:sye)(r,t))}function lye(){this.textContent=""}function cye(e){return function(){this.textContent=e}}function uye(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Aye(e){return arguments.length?this.each(e==null?lye:(typeof e=="function"?uye:cye)(e)):this.node().textContent}function dye(){this.innerHTML=""}function fye(e){return function(){this.innerHTML=e}}function hye(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function mye(e){return arguments.length?this.each(e==null?dye:(typeof e=="function"?hye:fye)(e)):this.node().innerHTML}function pye(){this.nextSibling&&this.parentNode.appendChild(this)}function gye(){return this.each(pye)}function xye(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function vye(){return this.each(xye)}function bye(e){var t=typeof e=="function"?e:h9(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function wye(){return null}function yye(e,t){var r=typeof e=="function"?e:h9(e),n=t==null?wye:typeof t=="function"?t:l3(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function Eye(){var e=this.parentNode;e&&e.removeChild(this)}function Cye(){return this.each(Eye)}function _ye(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Sye(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Nye(e){return this.select(e?Sye:_ye)}function Bye(e){return arguments.length?this.property("__data__",e):this.node().__data__}function kye(e){return function(t){e.call(this,t,this.__data__)}}function Tye(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function Iye(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,s;r<a;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function Fye(e,t,r){return function(){var n=this.__on,a,s=kye(t);if(n){for(var i=0,o=n.length;i<o;++i)if((a=n[i]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=t;return}}this.addEventListener(e.type,s,r),a={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(a):this.__on=[a]}}function jye(e,t,r){var n=Tye(e+""),a,s=n.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,A=o.length,d;c<A;++c)for(a=0,d=o[c];a<s;++a)if((i=n[a]).type===d.type&&i.name===d.name)return d.value}return}for(o=t?Fye:Iye,a=0;a<s;++a)this.each(o(n[a],t,r));return this}function C9(e,t,r){var n=v9(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function Dye(e,t){return function(){return C9(this,e,t)}}function Rye(e,t){return function(){return C9(this,e,t.apply(this,arguments))}}function Lye(e,t){return this.each((typeof t=="function"?Rye:Dye)(e,t))}function*Oye(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length,i;a<s;++a)(i=n[a])&&(yield i)}var _9=[null];function bl(e,t){this._groups=e,this._parents=t}function W1(){return new bl([[document.documentElement]],_9)}function Uye(){return this}bl.prototype=W1.prototype={constructor:bl,select:uwe,selectAll:hwe,selectChild:xwe,selectChildren:ywe,filter:Ewe,data:kwe,enter:Cwe,exit:Iwe,join:Fwe,merge:jwe,selection:Uye,order:Dwe,sort:Rwe,call:Owe,nodes:Uwe,node:Pwe,size:Mwe,empty:Qwe,each:Hwe,attr:Wwe,style:Zwe,property:nye,classed:oye,text:Aye,html:mye,raise:gye,lower:vye,append:bye,insert:yye,remove:Cye,clone:Nye,datum:Bye,on:jye,dispatch:Lye,[Symbol.iterator]:Oye};function ec(e){return typeof e=="string"?new bl([[document.querySelector(e)]],[document.documentElement]):new bl([[e]],_9)}function Pye(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ru(e,t){if(e=Pye(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const Mye={passive:!1},l1={capture:!0,passive:!1};function b_(e){e.stopImmediatePropagation()}function Ym(e){e.preventDefault(),e.stopImmediatePropagation()}function S9(e){var t=e.document.documentElement,r=ec(e).on("dragstart.drag",Ym,l1);"onselectstart"in t?r.on("selectstart.drag",Ym,l1):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function N9(e,t){var r=e.document.documentElement,n=ec(e).on("dragstart.drag",null);t&&(n.on("click.drag",Ym,l1),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const $b=e=>()=>e;function pS(e,{sourceEvent:t,subject:r,target:n,identifier:a,active:s,x:i,y:o,dx:c,dy:A,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:A,enumerable:!0,configurable:!0},_:{value:d}})}pS.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Qye(e){return!e.ctrlKey&&!e.button}function Hye(){return this.parentNode}function Vye(e,t){return t??{x:e.x,y:e.y}}function zye(){return navigator.maxTouchPoints||"ontouchstart"in this}function Gye(){var e=Qye,t=Hye,r=Vye,n=zye,a={},s=bE("start","drag","end"),i=0,o,c,A,d,h=0;function m(I){I.on("mousedown.drag",p).filter(n).on("touchstart.drag",E).on("touchmove.drag",_,Mye).on("touchend.drag touchcancel.drag",B).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(I,L){if(!(d||!e.call(this,I,L))){var k=T(this,t.call(this,I,L),I,L,"mouse");k&&(ec(I.view).on("mousemove.drag",v,l1).on("mouseup.drag",x,l1),S9(I.view),b_(I),A=!1,o=I.clientX,c=I.clientY,k("start",I))}}function v(I){if(Ym(I),!A){var L=I.clientX-o,k=I.clientY-c;A=L*L+k*k>h}a.mouse("drag",I)}function x(I){ec(I.view).on("mousemove.drag mouseup.drag",null),N9(I.view,A),Ym(I),a.mouse("end",I)}function E(I,L){if(e.call(this,I,L)){var k=I.changedTouches,w=t.call(this,I,L),y=k.length,N,U;for(N=0;N<y;++N)(U=T(this,w,I,L,k[N].identifier,k[N]))&&(b_(I),U("start",I,k[N]))}}function _(I){var L=I.changedTouches,k=L.length,w,y;for(w=0;w<k;++w)(y=a[L[w].identifier])&&(Ym(I),y("drag",I,L[w]))}function B(I){var L=I.changedTouches,k=L.length,w,y;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),w=0;w<k;++w)(y=a[L[w].identifier])&&(b_(I),y("end",I,L[w]))}function T(I,L,k,w,y,N){var U=s.copy(),j=Ru(N||k,L),F,P,M;if((M=r.call(I,new pS("beforestart",{sourceEvent:k,target:m,identifier:y,active:i,x:j[0],y:j[1],dx:0,dy:0,dispatch:U}),w))!=null)return F=M.x-j[0]||0,P=M.y-j[1]||0,function ee(W,te,G){var q=j,z;switch(W){case"start":a[y]=ee,z=i++;break;case"end":delete a[y],--i;case"drag":j=Ru(G||te,L),z=i;break}U.call(W,I,new pS(W,{sourceEvent:te,subject:M,target:m,identifier:y,active:z,x:j[0]+F,y:j[1]+P,dx:j[0]-q[0],dy:j[1]-q[1],dispatch:U}),w)}}return m.filter=function(I){return arguments.length?(e=typeof I=="function"?I:$b(!!I),m):e},m.container=function(I){return arguments.length?(t=typeof I=="function"?I:$b(I),m):t},m.subject=function(I){return arguments.length?(r=typeof I=="function"?I:$b(I),m):r},m.touchable=function(I){return arguments.length?(n=typeof I=="function"?I:$b(!!I),m):n},m.on=function(){var I=s.on.apply(s,arguments);return I===s?m:I},m.clickDistance=function(I){return arguments.length?(h=(I=+I)*I,m):Math.sqrt(h)},m}function u3(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function B9(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function X1(){}var c1=.7,Yw=1/c1,Jm="\\s*([+-]?\\d+)\\s*",u1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Kye=/^#([0-9a-f]{3,8})$/,qye=new RegExp(`^rgb\\(${Jm},${Jm},${Jm}\\)$`),$ye=new RegExp(`^rgb\\(${Wu},${Wu},${Wu}\\)$`),Wye=new RegExp(`^rgba\\(${Jm},${Jm},${Jm},${u1}\\)$`),Xye=new RegExp(`^rgba\\(${Wu},${Wu},${Wu},${u1}\\)$`),Yye=new RegExp(`^hsl\\(${u1},${Wu},${Wu}\\)$`),Jye=new RegExp(`^hsla\\(${u1},${Wu},${Wu},${u1}\\)$`),dR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};u3(X1,A1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fR,formatHex:fR,formatHex8:Zye,formatHsl:eEe,formatRgb:hR,toString:hR});function fR(){return this.rgb().formatHex()}function Zye(){return this.rgb().formatHex8()}function eEe(){return k9(this).formatHsl()}function hR(){return this.rgb().formatRgb()}function A1(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Kye.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?mR(t):r===3?new Uo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Wb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Wb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=qye.exec(e))?new Uo(t[1],t[2],t[3],1):(t=$ye.exec(e))?new Uo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Wye.exec(e))?Wb(t[1],t[2],t[3],t[4]):(t=Xye.exec(e))?Wb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Yye.exec(e))?xR(t[1],t[2]/100,t[3]/100,1):(t=Jye.exec(e))?xR(t[1],t[2]/100,t[3]/100,t[4]):dR.hasOwnProperty(e)?mR(dR[e]):e==="transparent"?new Uo(NaN,NaN,NaN,0):null}function mR(e){return new Uo(e>>16&255,e>>8&255,e&255,1)}function Wb(e,t,r,n){return n<=0&&(e=t=r=NaN),new Uo(e,t,r,n)}function tEe(e){return e instanceof X1||(e=A1(e)),e?(e=e.rgb(),new Uo(e.r,e.g,e.b,e.opacity)):new Uo}function gS(e,t,r,n){return arguments.length===1?tEe(e):new Uo(e,t,r,n??1)}function Uo(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}u3(Uo,gS,B9(X1,{brighter(e){return e=e==null?Yw:Math.pow(Yw,e),new Uo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?c1:Math.pow(c1,e),new Uo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Uo(Wh(this.r),Wh(this.g),Wh(this.b),Jw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pR,formatHex:pR,formatHex8:rEe,formatRgb:gR,toString:gR}));function pR(){return`#${Lh(this.r)}${Lh(this.g)}${Lh(this.b)}`}function rEe(){return`#${Lh(this.r)}${Lh(this.g)}${Lh(this.b)}${Lh((isNaN(this.opacity)?1:this.opacity)*255)}`}function gR(){const e=Jw(this.opacity);return`${e===1?"rgb(":"rgba("}${Wh(this.r)}, ${Wh(this.g)}, ${Wh(this.b)}${e===1?")":`, ${e})`}`}function Jw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Wh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Lh(e){return e=Wh(e),(e<16?"0":"")+e.toString(16)}function xR(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Uc(e,t,r,n)}function k9(e){if(e instanceof Uc)return new Uc(e.h,e.s,e.l,e.opacity);if(e instanceof X1||(e=A1(e)),!e)return new Uc;if(e instanceof Uc)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),i=NaN,o=s-a,c=(s+a)/2;return o?(t===s?i=(r-n)/o+(r<n)*6:r===s?i=(n-t)/o+2:i=(t-r)/o+4,o/=c<.5?s+a:2-s-a,i*=60):o=c>0&&c<1?0:i,new Uc(i,o,c,e.opacity)}function nEe(e,t,r,n){return arguments.length===1?k9(e):new Uc(e,t,r,n??1)}function Uc(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}u3(Uc,nEe,B9(X1,{brighter(e){return e=e==null?Yw:Math.pow(Yw,e),new Uc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?c1:Math.pow(c1,e),new Uc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Uo(w_(e>=240?e-240:e+120,a,n),w_(e,a,n),w_(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Uc(vR(this.h),Xb(this.s),Xb(this.l),Jw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Jw(this.opacity);return`${e===1?"hsl(":"hsla("}${vR(this.h)}, ${Xb(this.s)*100}%, ${Xb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vR(e){return e=(e||0)%360,e<0?e+360:e}function Xb(e){return Math.max(0,Math.min(1,e||0))}function w_(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const T9=e=>()=>e;function aEe(e,t){return function(r){return e+r*t}}function sEe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function iEe(e){return(e=+e)==1?I9:function(t,r){return r-t?sEe(t,r,e):T9(isNaN(t)?r:t)}}function I9(e,t){var r=t-e;return r?aEe(e,r):T9(isNaN(e)?t:e)}const bR=function e(t){var r=iEe(t);function n(a,s){var i=r((a=gS(a)).r,(s=gS(s)).r),o=r(a.g,s.g),c=r(a.b,s.b),A=I9(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=o(d),a.b=c(d),a.opacity=A(d),a+""}}return n.gamma=e,n}(1);function nf(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var xS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,y_=new RegExp(xS.source,"g");function oEe(e){return function(){return e}}function lEe(e){return function(t){return e(t)+""}}function cEe(e,t){var r=xS.lastIndex=y_.lastIndex=0,n,a,s,i=-1,o=[],c=[];for(e=e+"",t=t+"";(n=xS.exec(e))&&(a=y_.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),o[i]?o[i]+=s:o[++i]=s),(n=n[0])===(a=a[0])?o[i]?o[i]+=a:o[++i]=a:(o[++i]=null,c.push({i,x:nf(n,a)})),r=y_.lastIndex;return r<t.length&&(s=t.slice(r),o[i]?o[i]+=s:o[++i]=s),o.length<2?c[0]?lEe(c[0].x):oEe(t):(t=c.length,function(A){for(var d=0,h;d<t;++d)o[(h=c[d]).i]=h.x(A);return o.join("")})}var wR=180/Math.PI,vS={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function F9(e,t,r,n,a,s){var i,o,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,c/=o),e*n<t*r&&(e=-e,t=-t,c=-c,i=-i),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*wR,skewX:Math.atan(c)*wR,scaleX:i,scaleY:o}}var Yb;function uEe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?vS:F9(t.a,t.b,t.c,t.d,t.e,t.f)}function AEe(e){return e==null||(Yb||(Yb=document.createElementNS("http://www.w3.org/2000/svg","g")),Yb.setAttribute("transform",e),!(e=Yb.transform.baseVal.consolidate()))?vS:(e=e.matrix,F9(e.a,e.b,e.c,e.d,e.e,e.f))}function j9(e,t,r,n){function a(A){return A.length?A.pop()+" ":""}function s(A,d,h,m,p,v){if(A!==h||d!==m){var x=p.push("translate(",null,t,null,r);v.push({i:x-4,x:nf(A,h)},{i:x-2,x:nf(d,m)})}else(h||m)&&p.push("translate("+h+t+m+r)}function i(A,d,h,m){A!==d?(A-d>180?d+=360:d-A>180&&(A+=360),m.push({i:h.push(a(h)+"rotate(",null,n)-2,x:nf(A,d)})):d&&h.push(a(h)+"rotate("+d+n)}function o(A,d,h,m){A!==d?m.push({i:h.push(a(h)+"skewX(",null,n)-2,x:nf(A,d)}):d&&h.push(a(h)+"skewX("+d+n)}function c(A,d,h,m,p,v){if(A!==h||d!==m){var x=p.push(a(p)+"scale(",null,",",null,")");v.push({i:x-4,x:nf(A,h)},{i:x-2,x:nf(d,m)})}else(h!==1||m!==1)&&p.push(a(p)+"scale("+h+","+m+")")}return function(A,d){var h=[],m=[];return A=e(A),d=e(d),s(A.translateX,A.translateY,d.translateX,d.translateY,h,m),i(A.rotate,d.rotate,h,m),o(A.skewX,d.skewX,h,m),c(A.scaleX,A.scaleY,d.scaleX,d.scaleY,h,m),A=d=null,function(p){for(var v=-1,x=m.length,E;++v<x;)h[(E=m[v]).i]=E.x(p);return h.join("")}}}var dEe=j9(uEe,"px, ","px)","deg)"),fEe=j9(AEe,", ",")",")"),hEe=1e-12;function yR(e){return((e=Math.exp(e))+1/e)/2}function mEe(e){return((e=Math.exp(e))-1/e)/2}function pEe(e){return((e=Math.exp(2*e))-1)/(e+1)}const gEe=function e(t,r,n){function a(s,i){var o=s[0],c=s[1],A=s[2],d=i[0],h=i[1],m=i[2],p=d-o,v=h-c,x=p*p+v*v,E,_;if(x<hEe)_=Math.log(m/A)/t,E=function(w){return[o+w*p,c+w*v,A*Math.exp(t*w*_)]};else{var B=Math.sqrt(x),T=(m*m-A*A+n*x)/(2*A*r*B),I=(m*m-A*A-n*x)/(2*m*r*B),L=Math.log(Math.sqrt(T*T+1)-T),k=Math.log(Math.sqrt(I*I+1)-I);_=(k-L)/t,E=function(w){var y=w*_,N=yR(L),U=A/(r*B)*(N*pEe(t*y+L)-mEe(L));return[o+U*p,c+U*v,A*N/yR(t*y+L)]}}return E.duration=_*1e3*t/Math.SQRT2,E}return a.rho=function(s){var i=Math.max(.001,+s),o=i*i,c=o*o;return e(i,o,c)},a}(Math.SQRT2,2,4);var xp=0,rx=0,Ig=0,D9=1e3,Zw,nx,ey=0,u0=0,yE=0,d1=typeof performance=="object"&&performance.now?performance:Date,R9=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function A3(){return u0||(R9(xEe),u0=d1.now()+yE)}function xEe(){u0=0}function ty(){this._call=this._time=this._next=null}ty.prototype=L9.prototype={constructor:ty,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?A3():+r)+(t==null?0:+t),!this._next&&nx!==this&&(nx?nx._next=this:Zw=this,nx=this),this._call=e,this._time=r,bS()},stop:function(){this._call&&(this._call=null,this._time=1/0,bS())}};function L9(e,t,r){var n=new ty;return n.restart(e,t,r),n}function vEe(){A3(),++xp;for(var e=Zw,t;e;)(t=u0-e._time)>=0&&e._call.call(void 0,t),e=e._next;--xp}function ER(){u0=(ey=d1.now())+yE,xp=rx=0;try{vEe()}finally{xp=0,wEe(),u0=0}}function bEe(){var e=d1.now(),t=e-ey;t>D9&&(yE-=t,ey=e)}function wEe(){for(var e,t=Zw,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Zw=r);nx=e,bS(n)}function bS(e){if(!xp){rx&&(rx=clearTimeout(rx));var t=e-u0;t>24?(e<1/0&&(rx=setTimeout(ER,e-d1.now()-yE)),Ig&&(Ig=clearInterval(Ig))):(Ig||(ey=d1.now(),Ig=setInterval(bEe,D9)),xp=1,R9(ER))}}function CR(e,t,r){var n=new ty;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var yEe=bE("start","end","cancel","interrupt"),EEe=[],O9=0,_R=1,wS=2,j2=3,SR=4,yS=5,D2=6;function EE(e,t,r,n,a,s){var i=e.__transition;if(!i)e.__transition={};else if(r in i)return;CEe(e,r,{name:t,index:n,group:a,on:yEe,tween:EEe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:O9})}function d3(e,t){var r=Yc(e,t);if(r.state>O9)throw new Error("too late; already scheduled");return r}function aA(e,t){var r=Yc(e,t);if(r.state>j2)throw new Error("too late; already running");return r}function Yc(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function CEe(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=L9(s,0,r.time);function s(A){r.state=_R,r.timer.restart(i,r.delay,r.time),r.delay<=A&&i(A-r.delay)}function i(A){var d,h,m,p;if(r.state!==_R)return c();for(d in n)if(p=n[d],p.name===r.name){if(p.state===j2)return CR(i);p.state===SR?(p.state=D2,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete n[d]):+d<t&&(p.state=D2,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete n[d])}if(CR(function(){r.state===j2&&(r.state=SR,r.timer.restart(o,r.delay,r.time),o(A))}),r.state=wS,r.on.call("start",e,e.__data__,r.index,r.group),r.state===wS){for(r.state=j2,a=new Array(m=r.tween.length),d=0,h=-1;d<m;++d)(p=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(a[++h]=p);a.length=h+1}}function o(A){for(var d=A<r.duration?r.ease.call(null,A/r.duration):(r.timer.restart(c),r.state=yS,1),h=-1,m=a.length;++h<m;)a[h].call(e,d);r.state===yS&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=D2,r.timer.stop(),delete n[t];for(var A in n)return;delete e.__transition}}function R2(e,t){var r=e.__transition,n,a,s=!0,i;if(r){t=t==null?null:t+"";for(i in r){if((n=r[i]).name!==t){s=!1;continue}a=n.state>wS&&n.state<yS,n.state=D2,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]}s&&delete e.__transition}}function _Ee(e){return this.each(function(){R2(this,e)})}function SEe(e,t){var r,n;return function(){var a=aA(this,e),s=a.tween;if(s!==r){n=r=s;for(var i=0,o=n.length;i<o;++i)if(n[i].name===t){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function NEe(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=aA(this,e),i=s.tween;if(i!==n){a=(n=i).slice();for(var o={name:t,value:r},c=0,A=a.length;c<A;++c)if(a[c].name===t){a[c]=o;break}c===A&&a.push(o)}s.tween=a}}function BEe(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Yc(this.node(),r).tween,a=0,s=n.length,i;a<s;++a)if((i=n[a]).name===e)return i.value;return null}return this.each((t==null?SEe:NEe)(r,e,t))}function f3(e,t,r){var n=e._id;return e.each(function(){var a=aA(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return Yc(a,n).value[t]}}function U9(e,t){var r;return(typeof t=="number"?nf:t instanceof A1?bR:(r=A1(t))?(t=r,bR):cEe)(e,t)}function kEe(e){return function(){this.removeAttribute(e)}}function TEe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function IEe(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttribute(e);return i===a?null:i===n?s:s=t(n=i,r)}}function FEe(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===n?s:s=t(n=i,r)}}function jEe(e,t,r){var n,a,s;return function(){var i,o=r(this),c;return o==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=o+"",i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o)))}}function DEe(e,t,r){var n,a,s;return function(){var i,o=r(this),c;return o==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=o+"",i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o)))}}function REe(e,t){var r=wE(e),n=r==="transform"?fEe:U9;return this.attrTween(e,typeof t=="function"?(r.local?DEe:jEe)(r,n,f3(this,"attr."+e,t)):t==null?(r.local?TEe:kEe)(r):(r.local?FEe:IEe)(r,n,t))}function LEe(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function OEe(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function UEe(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&OEe(e,s)),r}return a._value=t,a}function PEe(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&LEe(e,s)),r}return a._value=t,a}function MEe(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=wE(e);return this.tween(r,(n.local?UEe:PEe)(n,t))}function QEe(e,t){return function(){d3(this,e).delay=+t.apply(this,arguments)}}function HEe(e,t){return t=+t,function(){d3(this,e).delay=t}}function VEe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?QEe:HEe)(t,e)):Yc(this.node(),t).delay}function zEe(e,t){return function(){aA(this,e).duration=+t.apply(this,arguments)}}function GEe(e,t){return t=+t,function(){aA(this,e).duration=t}}function KEe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?zEe:GEe)(t,e)):Yc(this.node(),t).duration}function qEe(e,t){if(typeof t!="function")throw new Error;return function(){aA(this,e).ease=t}}function $Ee(e){var t=this._id;return arguments.length?this.each(qEe(t,e)):Yc(this.node(),t).ease}function WEe(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;aA(this,e).ease=r}}function XEe(e){if(typeof e!="function")throw new Error;return this.each(WEe(this._id,e))}function YEe(e){typeof e!="function"&&(e=p9(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],c,A=0;A<i;++A)(c=s[A])&&e.call(c,c.__data__,A,s)&&o.push(c);return new ad(n,this._parents,this._name,this._id)}function JEe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,s=Math.min(n,a),i=new Array(n),o=0;o<s;++o)for(var c=t[o],A=r[o],d=c.length,h=i[o]=new Array(d),m,p=0;p<d;++p)(m=c[p]||A[p])&&(h[p]=m);for(;o<n;++o)i[o]=t[o];return new ad(i,this._parents,this._name,this._id)}function ZEe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function eCe(e,t,r){var n,a,s=ZEe(t)?d3:aA;return function(){var i=s(this,e),o=i.on;o!==n&&(a=(n=o).copy()).on(t,r),i.on=a}}function tCe(e,t){var r=this._id;return arguments.length<2?Yc(this.node(),r).on.on(e):this.each(eCe(r,e,t))}function rCe(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function nCe(){return this.on("end.remove",rCe(this._id))}function aCe(e){var t=this._name,r=this._id;typeof e!="function"&&(e=l3(e));for(var n=this._groups,a=n.length,s=new Array(a),i=0;i<a;++i)for(var o=n[i],c=o.length,A=s[i]=new Array(c),d,h,m=0;m<c;++m)(d=o[m])&&(h=e.call(d,d.__data__,m,o))&&("__data__"in d&&(h.__data__=d.__data__),A[m]=h,EE(A[m],t,r,m,A,Yc(d,r)));return new ad(s,this._parents,t,r)}function sCe(e){var t=this._name,r=this._id;typeof e!="function"&&(e=m9(e));for(var n=this._groups,a=n.length,s=[],i=[],o=0;o<a;++o)for(var c=n[o],A=c.length,d,h=0;h<A;++h)if(d=c[h]){for(var m=e.call(d,d.__data__,h,c),p,v=Yc(d,r),x=0,E=m.length;x<E;++x)(p=m[x])&&EE(p,t,r,x,m,v);s.push(m),i.push(d)}return new ad(s,i,t,r)}var iCe=W1.prototype.constructor;function oCe(){return new iCe(this._groups,this._parents)}function lCe(e,t){var r,n,a;return function(){var s=gp(this,e),i=(this.style.removeProperty(e),gp(this,e));return s===i?null:s===r&&i===n?a:a=t(r=s,n=i)}}function P9(e){return function(){this.style.removeProperty(e)}}function cCe(e,t,r){var n,a=r+"",s;return function(){var i=gp(this,e);return i===a?null:i===n?s:s=t(n=i,r)}}function uCe(e,t,r){var n,a,s;return function(){var i=gp(this,e),o=r(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(e),gp(this,e))),i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o))}}function ACe(e,t){var r,n,a,s="style."+t,i="end."+s,o;return function(){var c=aA(this,e),A=c.on,d=c.value[s]==null?o||(o=P9(t)):void 0;(A!==r||a!==d)&&(n=(r=A).copy()).on(i,a=d),c.on=n}}function dCe(e,t,r){var n=(e+="")=="transform"?dEe:U9;return t==null?this.styleTween(e,lCe(e,n)).on("end.style."+e,P9(e)):typeof t=="function"?this.styleTween(e,uCe(e,n,f3(this,"style."+e,t))).each(ACe(this._id,e)):this.styleTween(e,cCe(e,n,t),r).on("end.style."+e,null)}function fCe(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function hCe(e,t,r){var n,a;function s(){var i=t.apply(this,arguments);return i!==a&&(n=(a=i)&&fCe(e,i,r)),n}return s._value=t,s}function mCe(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,hCe(e,t,r??""))}function pCe(e){return function(){this.textContent=e}}function gCe(e){return function(){var t=e(this);this.textContent=t??""}}function xCe(e){return this.tween("text",typeof e=="function"?gCe(f3(this,"text",e)):pCe(e==null?"":e+""))}function vCe(e){return function(t){this.textContent=e.call(this,t)}}function bCe(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&vCe(a)),t}return n._value=e,n}function wCe(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,bCe(e))}function yCe(){for(var e=this._name,t=this._id,r=M9(),n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,c,A=0;A<o;++A)if(c=i[A]){var d=Yc(c,t);EE(c,e,r,A,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new ad(n,this._parents,e,r)}function ECe(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(s,i){var o={value:i},c={value:function(){--a===0&&s()}};r.each(function(){var A=aA(this,n),d=A.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(c)),A.on=t}),a===0&&s()})}var CCe=0;function ad(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function M9(){return++CCe}var OA=W1.prototype;ad.prototype={constructor:ad,select:aCe,selectAll:sCe,selectChild:OA.selectChild,selectChildren:OA.selectChildren,filter:YEe,merge:JEe,selection:oCe,transition:yCe,call:OA.call,nodes:OA.nodes,node:OA.node,size:OA.size,empty:OA.empty,each:OA.each,on:tCe,attr:REe,attrTween:MEe,style:dCe,styleTween:mCe,text:xCe,textTween:wCe,remove:nCe,tween:BEe,delay:VEe,duration:KEe,ease:$Ee,easeVarying:XEe,end:ECe,[Symbol.iterator]:OA[Symbol.iterator]};function _Ce(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var SCe={time:null,delay:0,duration:250,ease:_Ce};function NCe(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function BCe(e){var t,r;e instanceof ad?(t=e._id,e=e._name):(t=M9(),(r=SCe).time=A3(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,c,A=0;A<o;++A)(c=i[A])&&EE(c,e,t,A,i,r||NCe(c,t));return new ad(n,this._parents,e,t)}W1.prototype.interrupt=_Ee;W1.prototype.transition=BCe;const Jb=e=>()=>e;function kCe(e,{sourceEvent:t,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function VA(e,t,r){this.k=e,this.x=t,this.y=r}VA.prototype={constructor:VA,scale:function(e){return e===1?this:new VA(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new VA(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var kf=new VA(1,0,0);VA.prototype;function E_(e){e.stopImmediatePropagation()}function Fg(e){e.preventDefault(),e.stopImmediatePropagation()}function TCe(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function ICe(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function NR(){return this.__zoom||kf}function FCe(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function jCe(){return navigator.maxTouchPoints||"ontouchstart"in this}function DCe(e,t,r){var n=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],s=e.invertY(t[0][1])-r[0][1],i=e.invertY(t[1][1])-r[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function RCe(){var e=TCe,t=ICe,r=DCe,n=FCe,a=jCe,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,c=gEe,A=bE("start","zoom","end"),d,h,m,p=500,v=150,x=0,E=10;function _(M){M.property("__zoom",NR).on("wheel.zoom",y,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",U).filter(a).on("touchstart.zoom",j).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(M,ee,W,te){var G=M.selection?M.selection():M;G.property("__zoom",NR),M!==G?L(M,ee,W,te):G.interrupt().each(function(){k(this,arguments).event(te).start().zoom(null,typeof ee=="function"?ee.apply(this,arguments):ee).end()})},_.scaleBy=function(M,ee,W,te){_.scaleTo(M,function(){var G=this.__zoom.k,q=typeof ee=="function"?ee.apply(this,arguments):ee;return G*q},W,te)},_.scaleTo=function(M,ee,W,te){_.transform(M,function(){var G=t.apply(this,arguments),q=this.__zoom,z=W==null?I(G):typeof W=="function"?W.apply(this,arguments):W,Z=q.invert(z),R=typeof ee=="function"?ee.apply(this,arguments):ee;return r(T(B(q,R),z,Z),G,i)},W,te)},_.translateBy=function(M,ee,W,te){_.transform(M,function(){return r(this.__zoom.translate(typeof ee=="function"?ee.apply(this,arguments):ee,typeof W=="function"?W.apply(this,arguments):W),t.apply(this,arguments),i)},null,te)},_.translateTo=function(M,ee,W,te,G){_.transform(M,function(){var q=t.apply(this,arguments),z=this.__zoom,Z=te==null?I(q):typeof te=="function"?te.apply(this,arguments):te;return r(kf.translate(Z[0],Z[1]).scale(z.k).translate(typeof ee=="function"?-ee.apply(this,arguments):-ee,typeof W=="function"?-W.apply(this,arguments):-W),q,i)},te,G)};function B(M,ee){return ee=Math.max(s[0],Math.min(s[1],ee)),ee===M.k?M:new VA(ee,M.x,M.y)}function T(M,ee,W){var te=ee[0]-W[0]*M.k,G=ee[1]-W[1]*M.k;return te===M.x&&G===M.y?M:new VA(M.k,te,G)}function I(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function L(M,ee,W,te){M.on("start.zoom",function(){k(this,arguments).event(te).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(te).end()}).tween("zoom",function(){var G=this,q=arguments,z=k(G,q).event(te),Z=t.apply(G,q),R=W==null?I(Z):typeof W=="function"?W.apply(G,q):W,K=Math.max(Z[1][0]-Z[0][0],Z[1][1]-Z[0][1]),X=G.__zoom,re=typeof ee=="function"?ee.apply(G,q):ee,ne=c(X.invert(R).concat(K/X.k),re.invert(R).concat(K/re.k));return function(ue){if(ue===1)ue=re;else{var fe=ne(ue),be=K/fe[2];ue=new VA(be,R[0]-fe[0]*be,R[1]-fe[1]*be)}z.zoom(null,ue)}})}function k(M,ee,W){return!W&&M.__zooming||new w(M,ee)}function w(M,ee){this.that=M,this.args=ee,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,ee),this.taps=0}w.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,ee){return this.mouse&&M!=="mouse"&&(this.mouse[1]=ee.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=ee.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=ee.invert(this.touch1[0])),this.that.__zoom=ee,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var ee=ec(this.that).datum();A.call(M,this.that,new kCe(M,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:A}),ee)}};function y(M,...ee){if(!e.apply(this,arguments))return;var W=k(this,ee).event(M),te=this.__zoom,G=Math.max(s[0],Math.min(s[1],te.k*Math.pow(2,n.apply(this,arguments)))),q=Ru(M);if(W.wheel)(W.mouse[0][0]!==q[0]||W.mouse[0][1]!==q[1])&&(W.mouse[1]=te.invert(W.mouse[0]=q)),clearTimeout(W.wheel);else{if(te.k===G)return;W.mouse=[q,te.invert(q)],R2(this),W.start()}Fg(M),W.wheel=setTimeout(z,v),W.zoom("mouse",r(T(B(te,G),W.mouse[0],W.mouse[1]),W.extent,i));function z(){W.wheel=null,W.end()}}function N(M,...ee){if(m||!e.apply(this,arguments))return;var W=M.currentTarget,te=k(this,ee,!0).event(M),G=ec(M.view).on("mousemove.zoom",R,!0).on("mouseup.zoom",K,!0),q=Ru(M,W),z=M.clientX,Z=M.clientY;S9(M.view),E_(M),te.mouse=[q,this.__zoom.invert(q)],R2(this),te.start();function R(X){if(Fg(X),!te.moved){var re=X.clientX-z,ne=X.clientY-Z;te.moved=re*re+ne*ne>x}te.event(X).zoom("mouse",r(T(te.that.__zoom,te.mouse[0]=Ru(X,W),te.mouse[1]),te.extent,i))}function K(X){G.on("mousemove.zoom mouseup.zoom",null),N9(X.view,te.moved),Fg(X),te.event(X).end()}}function U(M,...ee){if(e.apply(this,arguments)){var W=this.__zoom,te=Ru(M.changedTouches?M.changedTouches[0]:M,this),G=W.invert(te),q=W.k*(M.shiftKey?.5:2),z=r(T(B(W,q),te,G),t.apply(this,ee),i);Fg(M),o>0?ec(this).transition().duration(o).call(L,z,te,M):ec(this).call(_.transform,z,te,M)}}function j(M,...ee){if(e.apply(this,arguments)){var W=M.touches,te=W.length,G=k(this,ee,M.changedTouches.length===te).event(M),q,z,Z,R;for(E_(M),z=0;z<te;++z)Z=W[z],R=Ru(Z,this),R=[R,this.__zoom.invert(R),Z.identifier],G.touch0?!G.touch1&&G.touch0[2]!==R[2]&&(G.touch1=R,G.taps=0):(G.touch0=R,q=!0,G.taps=1+!!d);d&&(d=clearTimeout(d)),q&&(G.taps<2&&(h=R[0],d=setTimeout(function(){d=null},p)),R2(this),G.start())}}function F(M,...ee){if(this.__zooming){var W=k(this,ee).event(M),te=M.changedTouches,G=te.length,q,z,Z,R;for(Fg(M),q=0;q<G;++q)z=te[q],Z=Ru(z,this),W.touch0&&W.touch0[2]===z.identifier?W.touch0[0]=Z:W.touch1&&W.touch1[2]===z.identifier&&(W.touch1[0]=Z);if(z=W.that.__zoom,W.touch1){var K=W.touch0[0],X=W.touch0[1],re=W.touch1[0],ne=W.touch1[1],ue=(ue=re[0]-K[0])*ue+(ue=re[1]-K[1])*ue,fe=(fe=ne[0]-X[0])*fe+(fe=ne[1]-X[1])*fe;z=B(z,Math.sqrt(ue/fe)),Z=[(K[0]+re[0])/2,(K[1]+re[1])/2],R=[(X[0]+ne[0])/2,(X[1]+ne[1])/2]}else if(W.touch0)Z=W.touch0[0],R=W.touch0[1];else return;W.zoom("touch",r(T(z,Z,R),W.extent,i))}}function P(M,...ee){if(this.__zooming){var W=k(this,ee).event(M),te=M.changedTouches,G=te.length,q,z;for(E_(M),m&&clearTimeout(m),m=setTimeout(function(){m=null},p),q=0;q<G;++q)z=te[q],W.touch0&&W.touch0[2]===z.identifier?delete W.touch0:W.touch1&&W.touch1[2]===z.identifier&&delete W.touch1;if(W.touch1&&!W.touch0&&(W.touch0=W.touch1,delete W.touch1),W.touch0)W.touch0[1]=this.__zoom.invert(W.touch0[0]);else if(W.end(),W.taps===2&&(z=Ru(z,this),Math.hypot(h[0]-z[0],h[1]-z[1])<E)){var Z=ec(this).on("dblclick.zoom");Z&&Z.apply(this,arguments)}}}return _.wheelDelta=function(M){return arguments.length?(n=typeof M=="function"?M:Jb(+M),_):n},_.filter=function(M){return arguments.length?(e=typeof M=="function"?M:Jb(!!M),_):e},_.touchable=function(M){return arguments.length?(a=typeof M=="function"?M:Jb(!!M),_):a},_.extent=function(M){return arguments.length?(t=typeof M=="function"?M:Jb([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),_):t},_.scaleExtent=function(M){return arguments.length?(s[0]=+M[0],s[1]=+M[1],_):[s[0],s[1]]},_.translateExtent=function(M){return arguments.length?(i[0][0]=+M[0][0],i[1][0]=+M[1][0],i[0][1]=+M[0][1],i[1][1]=+M[1][1],_):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},_.constrain=function(M){return arguments.length?(r=M,_):r},_.duration=function(M){return arguments.length?(o=+M,_):o},_.interpolate=function(M){return arguments.length?(c=M,_):c},_.on=function(){var M=A.on.apply(A,arguments);return M===A?_:M},_.clickDistance=function(M){return arguments.length?(x=(M=+M)*M,_):Math.sqrt(x)},_.tapDistance=function(M){return arguments.length?(E=+M,_):E},_}var LCe=aL();const CE=Q.createContext(null),OCe=CE.Provider,sd={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Q9=sd.error001();function Da(e,t){const r=Q.useContext(CE);if(r===null)throw new Error(Q9);return f9(r,e,t)}const ii=()=>{const e=Q.useContext(CE);if(e===null)throw new Error(Q9);return Q.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},UCe=e=>e.userSelectionActive?"none":"all";function H9({position:e,children:t,className:r,style:n,...a}){const s=Da(UCe),i=`${e}`.split("-");return mt.createElement("div",{className:go(["react-flow__panel",r,...i]),style:{...n,pointerEvents:s},...a},t)}function PCe({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:mt.createElement(H9,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},mt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const MCe=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:c,className:A,...d})=>{const h=Q.useRef(null),[m,p]=Q.useState({x:0,y:0,width:0,height:0}),v=go(["react-flow__edge-textwrapper",A]);return Q.useEffect(()=>{if(h.current){const x=h.current.getBBox();p({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),typeof r>"u"||!r?null:mt.createElement("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:v,visibility:m.width?"visible":"hidden",...d},a&&mt.createElement("rect",{width:m.width+2*i[0],x:-i[0],y:-i[1],height:m.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),mt.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:h,style:n},r),c)};var QCe=Q.memo(MCe);const h3=e=>({width:e.offsetWidth,height:e.offsetHeight}),vp=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),m3=(e={x:0,y:0},t)=>({x:vp(e.x,t[0][0],t[1][0]),y:vp(e.y,t[0][1],t[1][1])}),BR=(e,t,r)=>e<t?vp(Math.abs(e-t),1,50)/50:e>r?-vp(Math.abs(e-r),1,50)/50:0,V9=(e,t)=>{const r=BR(e.x,35,t.width-35)*20,n=BR(e.y,35,t.height-35)*20;return[r,n]},z9=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},HCe=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),p3=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),VCe=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),kR=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),ES=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},zCe=e=>ac(e.width)&&ac(e.height)&&ac(e.x)&&ac(e.y),ac=e=>!isNaN(e)&&isFinite(e),$a=Symbol.for("internals"),G9=["Enter"," ","Escape"],GCe=(e,t)=>{},KCe=e=>"nativeEvent"in e;function CS(e){var a,s;const t=KCe(e)?e.nativeEvent:e,r=((s=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const K9=e=>"clientX"in e,Tf=(e,t)=>{var s,i;const r=K9(e),n=r?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=r?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},ry=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Y1=({id:e,path:t,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:A,style:d,markerEnd:h,markerStart:m,interactionWidth:p=20})=>mt.createElement(mt.Fragment,null,mt.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:m}),p&&mt.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),a&&ac(r)&&ac(n)?mt.createElement(QCe,{x:r,y:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:A}):null);Y1.displayName="BaseEdge";function jg(e,t,r){return r===void 0?r:n=>{const a=t().edges.find(s=>s.id===e);a&&r(n,{...a})}}function q9({sourceX:e,sourceY:t,targetX:r,targetY:n}){const a=Math.abs(r-e)/2,s=r<e?r+a:r-a,i=Math.abs(n-t)/2,o=n<t?n+i:n-i;return[s,o,a,i]}function $9({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:i,targetControlY:o}){const c=e*.125+a*.375+i*.375+r*.125,A=t*.125+s*.375+o*.375+n*.125,d=Math.abs(c-e),h=Math.abs(A-t);return[c,A,d,h]}var A0;(function(e){e.Strict="strict",e.Loose="loose"})(A0||(A0={}));var Oh;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Oh||(Oh={}));var f1;(function(e){e.Partial="partial",e.Full="full"})(f1||(f1={}));var df;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(df||(df={}));var ny;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ny||(ny={}));var fr;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(fr||(fr={}));function TR({pos:e,x1:t,y1:r,x2:n,y2:a}){return e===fr.Left||e===fr.Right?[.5*(t+n),r]:[t,.5*(r+a)]}function W9({sourceX:e,sourceY:t,sourcePosition:r=fr.Bottom,targetX:n,targetY:a,targetPosition:s=fr.Top}){const[i,o]=TR({pos:r,x1:e,y1:t,x2:n,y2:a}),[c,A]=TR({pos:s,x1:n,y1:a,x2:e,y2:t}),[d,h,m,p]=$9({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:i,sourceControlY:o,targetControlX:c,targetControlY:A});return[`M${e},${t} C${i},${o} ${c},${A} ${n},${a}`,d,h,m,p]}const g3=Q.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=fr.Bottom,targetPosition:s=fr.Top,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:A,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:p,markerStart:v,interactionWidth:x})=>{const[E,_,B]=W9({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return mt.createElement(Y1,{path:E,labelX:_,labelY:B,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:A,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:p,markerStart:v,interactionWidth:x})});g3.displayName="SimpleBezierEdge";const IR={[fr.Left]:{x:-1,y:0},[fr.Right]:{x:1,y:0},[fr.Top]:{x:0,y:-1},[fr.Bottom]:{x:0,y:1}},qCe=({source:e,sourcePosition:t=fr.Bottom,target:r})=>t===fr.Left||t===fr.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},FR=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function $Ce({source:e,sourcePosition:t=fr.Bottom,target:r,targetPosition:n=fr.Top,center:a,offset:s}){const i=IR[t],o=IR[n],c={x:e.x+i.x*s,y:e.y+i.y*s},A={x:r.x+o.x*s,y:r.y+o.y*s},d=qCe({source:c,sourcePosition:t,target:A}),h=d.x!==0?"x":"y",m=d[h];let p=[],v,x;const E={x:0,y:0},_={x:0,y:0},[B,T,I,L]=q9({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(i[h]*o[h]===-1){v=a.x??B,x=a.y??T;const w=[{x:v,y:c.y},{x:v,y:A.y}],y=[{x:c.x,y:x},{x:A.x,y:x}];i[h]===m?p=h==="x"?w:y:p=h==="x"?y:w}else{const w=[{x:c.x,y:A.y}],y=[{x:A.x,y:c.y}];if(h==="x"?p=i.x===m?y:w:p=i.y===m?w:y,t===n){const P=Math.abs(e[h]-r[h]);if(P<=s){const M=Math.min(s-1,s-P);i[h]===m?E[h]=(c[h]>e[h]?-1:1)*M:_[h]=(A[h]>r[h]?-1:1)*M}}if(t!==n){const P=h==="x"?"y":"x",M=i[h]===o[P],ee=c[P]>A[P],W=c[P]<A[P];(i[h]===1&&(!M&&ee||M&&W)||i[h]!==1&&(!M&&W||M&&ee))&&(p=h==="x"?w:y)}const N={x:c.x+E.x,y:c.y+E.y},U={x:A.x+_.x,y:A.y+_.y},j=Math.max(Math.abs(N.x-p[0].x),Math.abs(U.x-p[0].x)),F=Math.max(Math.abs(N.y-p[0].y),Math.abs(U.y-p[0].y));j>=F?(v=(N.x+U.x)/2,x=p[0].y):(v=p[0].x,x=(N.y+U.y)/2)}return[[e,{x:c.x+E.x,y:c.y+E.y},...p,{x:A.x+_.x,y:A.y+_.y},r],v,x,I,L]}function WCe(e,t,r,n){const a=Math.min(FR(e,t)/2,FR(t,r)/2,n),{x:s,y:i}=t;if(e.x===s&&s===r.x||e.y===i&&i===r.y)return`L${s} ${i}`;if(e.y===i){const A=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${s+a*A},${i}Q ${s},${i} ${s},${i+a*d}`}const o=e.x<r.x?1:-1,c=e.y<r.y?-1:1;return`L ${s},${i+a*c}Q ${s},${i} ${s+a*o},${i}`}function _S({sourceX:e,sourceY:t,sourcePosition:r=fr.Bottom,targetX:n,targetY:a,targetPosition:s=fr.Top,borderRadius:i=5,centerX:o,centerY:c,offset:A=20}){const[d,h,m,p,v]=$Ce({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:o,y:c},offset:A});return[d.reduce((E,_,B)=>{let T="";return B>0&&B<d.length-1?T=WCe(d[B-1],_,d[B+1],i):T=`${B===0?"M":"L"}${_.x} ${_.y}`,E+=T,E},""),h,m,p,v]}const _E=Q.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:A,style:d,sourcePosition:h=fr.Bottom,targetPosition:m=fr.Top,markerEnd:p,markerStart:v,pathOptions:x,interactionWidth:E})=>{const[_,B,T]=_S({sourceX:e,sourceY:t,sourcePosition:h,targetX:r,targetY:n,targetPosition:m,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return mt.createElement(Y1,{path:_,labelX:B,labelY:T,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:A,style:d,markerEnd:p,markerStart:v,interactionWidth:E})});_E.displayName="SmoothStepEdge";const x3=Q.memo(e=>{var t;return mt.createElement(_E,{...e,pathOptions:Q.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});x3.displayName="StepEdge";function XCe({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[a,s,i,o]=q9({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,a,s,i,o]}const v3=Q.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:A,style:d,markerEnd:h,markerStart:m,interactionWidth:p})=>{const[v,x,E]=XCe({sourceX:e,sourceY:t,targetX:r,targetY:n});return mt.createElement(Y1,{path:v,labelX:x,labelY:E,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:A,style:d,markerEnd:h,markerStart:m,interactionWidth:p})});v3.displayName="StraightEdge";function Zb(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function jR({pos:e,x1:t,y1:r,x2:n,y2:a,c:s}){switch(e){case fr.Left:return[t-Zb(t-n,s),r];case fr.Right:return[t+Zb(n-t,s),r];case fr.Top:return[t,r-Zb(r-a,s)];case fr.Bottom:return[t,r+Zb(a-r,s)]}}function X9({sourceX:e,sourceY:t,sourcePosition:r=fr.Bottom,targetX:n,targetY:a,targetPosition:s=fr.Top,curvature:i=.25}){const[o,c]=jR({pos:r,x1:e,y1:t,x2:n,y2:a,c:i}),[A,d]=jR({pos:s,x1:n,y1:a,x2:e,y2:t,c:i}),[h,m,p,v]=$9({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:o,sourceControlY:c,targetControlX:A,targetControlY:d});return[`M${e},${t} C${o},${c} ${A},${d} ${n},${a}`,h,m,p,v]}const ay=Q.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=fr.Bottom,targetPosition:s=fr.Top,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:A,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:p,markerStart:v,pathOptions:x,interactionWidth:E})=>{const[_,B,T]=X9({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:x==null?void 0:x.curvature});return mt.createElement(Y1,{path:_,labelX:B,labelY:T,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:A,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:p,markerStart:v,interactionWidth:E})});ay.displayName="BezierEdge";const b3=Q.createContext(null),YCe=b3.Provider;b3.Consumer;const JCe=()=>Q.useContext(b3),ZCe=e=>"id"in e&&"source"in e&&"target"in e,e5e=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,SS=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,t5e=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),r5e=(e,t)=>{if(!e.source||!e.target)return t;let r;return ZCe(e)?r={...e}:r={...e,id:e5e(e)},t5e(r,t)?t:t.concat(r)},NS=({x:e,y:t},[r,n,a],s,[i,o])=>{const c={x:(e-r)/a,y:(t-n)/a};return s?{x:i*Math.round(c.x/i),y:o*Math.round(c.y/o)}:c},Y9=({x:e,y:t},[r,n,a])=>({x:e*a+r,y:t*a+n}),Zm=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],a={x:e.position.x-r,y:e.position.y-n};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:a}},w3=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,a)=>{const{x:s,y:i}=Zm(a,t).positionAbsolute;return HCe(n,p3({x:s,y:i,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return VCe(r)},J9=(e,t,[r,n,a]=[0,0,1],s=!1,i=!1,o=[0,0])=>{const c={x:(t.x-r)/a,y:(t.y-n)/a,width:t.width/a,height:t.height/a},A=[];return e.forEach(d=>{const{width:h,height:m,selectable:p=!0,hidden:v=!1}=d;if(i&&!p||v)return!1;const{positionAbsolute:x}=Zm(d,o),E={x:x.x,y:x.y,width:h||0,height:m||0},_=ES(c,E),B=typeof h>"u"||typeof m>"u"||h===null||m===null,T=s&&_>0,I=(h||0)*(m||0);(B||T||_>=I||d.dragging)&&A.push(d)}),A},Z9=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},eH=(e,t,r,n,a,s=.1)=>{const i=t/(e.width*(1+s)),o=r/(e.height*(1+s)),c=Math.min(i,o),A=vp(c,n,a),d=e.x+e.width/2,h=e.y+e.height/2,m=t/2-d*A,p=r/2-h*A;return{x:m,y:p,zoom:A}},Sh=(e,t=0)=>e.transition().duration(t);function DR(e,t,r,n){return(t[r]||[]).reduce((a,s)=>{var i,o;return`${e.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((o=e.positionAbsolute)==null?void 0:o.y)??0)+s.y+s.height/2}),a},[])}function n5e(e,t,r,n,a,s){const{x:i,y:o}=Tf(e),A=t.elementsFromPoint(i,o).find(v=>v.classList.contains("react-flow__handle"));if(A){const v=A.getAttribute("data-nodeid");if(v){const x=y3(void 0,A),E=A.getAttribute("data-handleid"),_=s({nodeId:v,id:E,type:x});if(_){const B=a.find(T=>T.nodeId===v&&T.type===x&&T.id===E);return{handle:{id:E,type:x,nodeId:v,x:(B==null?void 0:B.x)||r.x,y:(B==null?void 0:B.y)||r.y},validHandleResult:_}}}}let d=[],h=1/0;if(a.forEach(v=>{const x=Math.sqrt((v.x-r.x)**2+(v.y-r.y)**2);if(x<=n){const E=s(v);x<=h&&(x<h?d=[{handle:v,validHandleResult:E}]:x===h&&d.push({handle:v,validHandleResult:E}),h=x)}}),!d.length)return{handle:null,validHandleResult:tH()};if(d.length===1)return d[0];const m=d.some(({validHandleResult:v})=>v.isValid),p=d.some(({handle:v})=>v.type==="target");return d.find(({handle:v,validHandleResult:x})=>p?v.type==="target":m?x.isValid:!0)||d[0]}const a5e={source:null,target:null,sourceHandle:null,targetHandle:null},tH=()=>({handleDomNode:null,isValid:!1,connection:a5e,endHandle:null});function rH(e,t,r,n,a,s,i){const o=a==="target",c=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),A={...tH(),handleDomNode:c};if(c){const d=y3(void 0,c),h=c.getAttribute("data-nodeid"),m=c.getAttribute("data-handleid"),p=c.classList.contains("connectable"),v=c.classList.contains("connectableend"),x={source:o?h:r,sourceHandle:o?m:n,target:o?r:h,targetHandle:o?n:m};A.connection=x,p&&v&&(t===A0.Strict?o&&d==="source"||!o&&d==="target":h!==r||m!==n)&&(A.endHandle={nodeId:h,handleId:m,type:d},A.isValid=s(x))}return A}function s5e({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((a,s)=>{if(s[$a]){const{handleBounds:i}=s[$a];let o=[],c=[];i&&(o=DR(s,i,"source",`${t}-${r}-${n}`),c=DR(s,i,"target",`${t}-${r}-${n}`)),a.push(...o,...c)}return a},[])}function y3(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function C_(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function i5e(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function nH({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:i,isValidConnection:o,edgeUpdaterType:c,onReconnectEnd:A}){const d=z9(e.target),{connectionMode:h,domNode:m,autoPanOnConnect:p,connectionRadius:v,onConnectStart:x,panBy:E,getNodes:_,cancelConnection:B}=s();let T=0,I;const{x:L,y:k}=Tf(e),w=d==null?void 0:d.elementFromPoint(L,k),y=y3(c,w),N=m==null?void 0:m.getBoundingClientRect();if(!N||!y)return;let U,j=Tf(e,N),F=!1,P=null,M=!1,ee=null;const W=s5e({nodes:_(),nodeId:r,handleId:t,handleType:y}),te=()=>{if(!p)return;const[z,Z]=V9(j,N);E({x:z,y:Z}),T=requestAnimationFrame(te)};i({connectionPosition:j,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:y,connectionStartHandle:{nodeId:r,handleId:t,type:y},connectionEndHandle:null}),x==null||x(e,{nodeId:r,handleId:t,handleType:y});function G(z){const{transform:Z}=s();j=Tf(z,N);const{handle:R,validHandleResult:K}=n5e(z,d,NS(j,Z,!1,[1,1]),v,W,X=>rH(X,h,r,t,a?"target":"source",o,d));if(I=R,F||(te(),F=!0),ee=K.handleDomNode,P=K.connection,M=K.isValid,i({connectionPosition:I&&M?Y9({x:I.x,y:I.y},Z):j,connectionStatus:i5e(!!I,M),connectionEndHandle:K.endHandle}),!I&&!M&&!ee)return C_(U);P.source!==P.target&&ee&&(C_(U),U=ee,ee.classList.add("connecting","react-flow__handle-connecting"),ee.classList.toggle("valid",M),ee.classList.toggle("react-flow__handle-valid",M))}function q(z){var Z,R;(I||ee)&&P&&M&&(n==null||n(P)),(R=(Z=s()).onConnectEnd)==null||R.call(Z,z),c&&(A==null||A(z)),C_(U),B(),cancelAnimationFrame(T),F=!1,M=!1,P=null,ee=null,d.removeEventListener("mousemove",G),d.removeEventListener("mouseup",q),d.removeEventListener("touchmove",G),d.removeEventListener("touchend",q)}d.addEventListener("mousemove",G),d.addEventListener("mouseup",q),d.addEventListener("touchmove",G),d.addEventListener("touchend",q)}const RR=()=>!0,o5e=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),l5e=(e,t,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:i}=n;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===r}},aH=Q.forwardRef(({type:e="source",position:t=fr.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:i,onConnect:o,children:c,className:A,onMouseDown:d,onTouchStart:h,...m},p)=>{var N,U;const v=i||null,x=e==="target",E=ii(),_=JCe(),{connectOnClick:B,noPanClassName:T}=Da(o5e,ro),{connecting:I,clickConnecting:L}=Da(l5e(_,v,e),ro);_||(U=(N=E.getState()).onError)==null||U.call(N,"010",sd.error010());const k=j=>{const{defaultEdgeOptions:F,onConnect:P,hasDefaultEdges:M}=E.getState(),ee={...F,...j};if(M){const{edges:W,setEdges:te}=E.getState();te(r5e(ee,W))}P==null||P(ee),o==null||o(ee)},w=j=>{if(!_)return;const F=K9(j);a&&(F&&j.button===0||!F)&&nH({event:j,handleId:v,nodeId:_,onConnect:k,isTarget:x,getState:E.getState,setState:E.setState,isValidConnection:r||E.getState().isValidConnection||RR}),F?d==null||d(j):h==null||h(j)},y=j=>{const{onClickConnectStart:F,onClickConnectEnd:P,connectionClickStartHandle:M,connectionMode:ee,isValidConnection:W}=E.getState();if(!_||!M&&!a)return;if(!M){F==null||F(j,{nodeId:_,handleId:v,handleType:e}),E.setState({connectionClickStartHandle:{nodeId:_,type:e,handleId:v}});return}const te=z9(j.target),G=r||W||RR,{connection:q,isValid:z}=rH({nodeId:_,id:v,type:e},ee,M.nodeId,M.handleId||null,M.type,G,te);z&&k(q),P==null||P(j),E.setState({connectionClickStartHandle:null})};return mt.createElement("div",{"data-handleid":v,"data-nodeid":_,"data-handlepos":t,"data-id":`${_}-${v}-${e}`,className:go(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",T,A,{source:!x,target:x,connectable:n,connectablestart:a,connectableend:s,connecting:L,connectionindicator:n&&(a&&!I||s&&I)}]),onMouseDown:w,onTouchStart:w,onClick:B?y:void 0,ref:p,...m},c)});aH.displayName="Handle";var bp=Q.memo(aH);const sH=({data:e,isConnectable:t,targetPosition:r=fr.Top,sourcePosition:n=fr.Bottom})=>mt.createElement(mt.Fragment,null,mt.createElement(bp,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,mt.createElement(bp,{type:"source",position:n,isConnectable:t}));sH.displayName="DefaultNode";var BS=Q.memo(sH);const iH=({data:e,isConnectable:t,sourcePosition:r=fr.Bottom})=>mt.createElement(mt.Fragment,null,e==null?void 0:e.label,mt.createElement(bp,{type:"source",position:r,isConnectable:t}));iH.displayName="InputNode";var oH=Q.memo(iH);const lH=({data:e,isConnectable:t,targetPosition:r=fr.Top})=>mt.createElement(mt.Fragment,null,mt.createElement(bp,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);lH.displayName="OutputNode";var cH=Q.memo(lH);const E3=()=>null;E3.displayName="GroupNode";const c5e=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),e2=e=>e.id;function u5e(e,t){return ro(e.selectedNodes.map(e2),t.selectedNodes.map(e2))&&ro(e.selectedEdges.map(e2),t.selectedEdges.map(e2))}const uH=Q.memo(({onSelectionChange:e})=>{const t=ii(),{selectedNodes:r,selectedEdges:n}=Da(c5e,u5e);return Q.useEffect(()=>{const a={nodes:r,edges:n};e==null||e(a),t.getState().onSelectionChange.forEach(s=>s(a))},[r,n,e]),null});uH.displayName="SelectionListener";const A5e=e=>!!e.onSelectionChange;function d5e({onSelectionChange:e}){const t=Da(A5e);return e||t?mt.createElement(uH,{onSelectionChange:e}):null}const f5e=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Am(e,t){Q.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function an(e,t,r){Q.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const h5e=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:c,nodesDraggable:A,nodesConnectable:d,nodesFocusable:h,edgesFocusable:m,edgesUpdatable:p,elevateNodesOnSelect:v,minZoom:x,maxZoom:E,nodeExtent:_,onNodesChange:B,onEdgesChange:T,elementsSelectable:I,connectionMode:L,snapGrid:k,snapToGrid:w,translateExtent:y,connectOnClick:N,defaultEdgeOptions:U,fitView:j,fitViewOptions:F,onNodesDelete:P,onEdgesDelete:M,onNodeDrag:ee,onNodeDragStart:W,onNodeDragStop:te,onSelectionDrag:G,onSelectionDragStart:q,onSelectionDragStop:z,noPanClassName:Z,nodeOrigin:R,rfId:K,autoPanOnConnect:X,autoPanOnNodeDrag:re,onError:ne,connectionRadius:ue,isValidConnection:fe,nodeDragThreshold:be})=>{const{setNodes:Ce,setEdges:me,setDefaultNodesAndEdges:oe,setMinZoom:Le,setMaxZoom:Ye,setTranslateExtent:Te,setNodeExtent:we,reset:Fe}=Da(f5e,ro),He=ii();return Q.useEffect(()=>{const Xe=n==null?void 0:n.map(ut=>({...ut,...U}));return oe(r,Xe),()=>{Fe()}},[]),an("defaultEdgeOptions",U,He.setState),an("connectionMode",L,He.setState),an("onConnect",a,He.setState),an("onConnectStart",s,He.setState),an("onConnectEnd",i,He.setState),an("onClickConnectStart",o,He.setState),an("onClickConnectEnd",c,He.setState),an("nodesDraggable",A,He.setState),an("nodesConnectable",d,He.setState),an("nodesFocusable",h,He.setState),an("edgesFocusable",m,He.setState),an("edgesUpdatable",p,He.setState),an("elementsSelectable",I,He.setState),an("elevateNodesOnSelect",v,He.setState),an("snapToGrid",w,He.setState),an("snapGrid",k,He.setState),an("onNodesChange",B,He.setState),an("onEdgesChange",T,He.setState),an("connectOnClick",N,He.setState),an("fitViewOnInit",j,He.setState),an("fitViewOnInitOptions",F,He.setState),an("onNodesDelete",P,He.setState),an("onEdgesDelete",M,He.setState),an("onNodeDrag",ee,He.setState),an("onNodeDragStart",W,He.setState),an("onNodeDragStop",te,He.setState),an("onSelectionDrag",G,He.setState),an("onSelectionDragStart",q,He.setState),an("onSelectionDragStop",z,He.setState),an("noPanClassName",Z,He.setState),an("nodeOrigin",R,He.setState),an("rfId",K,He.setState),an("autoPanOnConnect",X,He.setState),an("autoPanOnNodeDrag",re,He.setState),an("onError",ne,He.setState),an("connectionRadius",ue,He.setState),an("isValidConnection",fe,He.setState),an("nodeDragThreshold",be,He.setState),Am(e,Ce),Am(t,me),Am(x,Le),Am(E,Ye),Am(y,Te),Am(_,we),null},LR={display:"none"},m5e={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},AH="react-flow__node-desc",dH="react-flow__edge-desc",p5e="react-flow__aria-live",g5e=e=>e.ariaLiveMessage;function x5e({rfId:e}){const t=Da(g5e);return mt.createElement("div",{id:`${p5e}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:m5e},t)}function v5e({rfId:e,disableKeyboardA11y:t}){return mt.createElement(mt.Fragment,null,mt.createElement("div",{id:`${AH}-${e}`,style:LR},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),mt.createElement("div",{id:`${dH}-${e}`,style:LR},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&mt.createElement(x5e,{rfId:e}))}var h1=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=Q.useState(!1),a=Q.useRef(!1),s=Q.useRef(new Set([])),[i,o]=Q.useMemo(()=>{if(e!==null){const A=(Array.isArray(e)?e:[e]).filter(h=>typeof h=="string").map(h=>h.split("+")),d=A.reduce((h,m)=>h.concat(...m),[]);return[A,d]}return[[],[]]},[e]);return Q.useEffect(()=>{const c=typeof document<"u"?document:null,A=(t==null?void 0:t.target)||c;if(e!==null){const d=p=>{if(a.current=p.ctrlKey||p.metaKey||p.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&CS(p))return!1;const x=UR(p.code,o);s.current.add(p[x]),OR(i,s.current,!1)&&(p.preventDefault(),n(!0))},h=p=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&CS(p))return!1;const x=UR(p.code,o);OR(i,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(p[x]),p.key==="Meta"&&s.current.clear(),a.current=!1},m=()=>{s.current.clear(),n(!1)};return A==null||A.addEventListener("keydown",d),A==null||A.addEventListener("keyup",h),window.addEventListener("blur",m),()=>{A==null||A.removeEventListener("keydown",d),A==null||A.removeEventListener("keyup",h),window.removeEventListener("blur",m)}}},[e,n]),r};function OR(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function UR(e,t){return t.includes(e)?"code":"key"}function fH(e,t,r,n){var o,c;const a=e.parentNode||e.parentId;if(!a)return r;const s=t.get(a),i=Zm(s,n);return fH(s,t,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(((o=s[$a])==null?void 0:o.z)??0)>(r.z??0)?((c=s[$a])==null?void 0:c.z)??0:r.z??0},n)}function hH(e,t,r){e.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:i,y:o,z:c}=fH(n,e,{...n.position,z:((s=n[$a])==null?void 0:s.z)??0},t);n.positionAbsolute={x:i,y:o},n[$a].z=c,r!=null&&r[n.id]&&(n[$a].isParent=!0)}})}function __(e,t,r,n){const a=new Map,s={},i=n?1e3:0;return e.forEach(o=>{var p;const c=(ac(o.zIndex)?o.zIndex:0)+(o.selected?i:0),A=t.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},h=o.parentNode||o.parentId;h&&(s[h]=!0);const m=(A==null?void 0:A.type)&&(A==null?void 0:A.type)!==o.type;Object.defineProperty(d,$a,{enumerable:!1,value:{handleBounds:m||(p=A==null?void 0:A[$a])==null?void 0:p.handleBounds,z:c}}),a.set(o.id,d)}),hH(a,r,s),a}function mH(e,t={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:i,d3Zoom:o,d3Selection:c,fitViewOnInitDone:A,fitViewOnInit:d,nodeOrigin:h}=e(),m=t.initial&&!A&&d;if(o&&c&&(m||!t.initial)){const v=r().filter(E=>{var B;const _=t.includeHiddenNodes?E.width&&E.height:!E.hidden;return(B=t.nodes)!=null&&B.length?_&&t.nodes.some(T=>T.id===E.id):_}),x=v.every(E=>E.width&&E.height);if(v.length>0&&x){const E=w3(v,h),{x:_,y:B,zoom:T}=eH(E,n,a,t.minZoom??s,t.maxZoom??i,t.padding??.1),I=kf.translate(_,B).scale(T);return typeof t.duration=="number"&&t.duration>0?o.transform(Sh(c,t.duration),I):o.transform(c,I),!0}}return!1}function b5e(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[$a]:n[$a],selected:r.selected})}),new Map(t)}function w5e(e,t){return t.map(r=>{const n=e.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function t2({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:c,hasDefaultEdges:A}=r();e!=null&&e.length&&(c&&n({nodeInternals:b5e(e,a)}),i==null||i(e)),t!=null&&t.length&&(A&&n({edges:w5e(t,s)}),o==null||o(t))}const dm=()=>{},y5e={zoomIn:dm,zoomOut:dm,zoomTo:dm,getZoom:()=>1,setViewport:dm,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:dm,fitBounds:dm,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},E5e=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),C5e=()=>{const e=ii(),{d3Zoom:t,d3Selection:r}=Da(E5e,ro);return Q.useMemo(()=>r&&t?{zoomIn:a=>t.scaleBy(Sh(r,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(Sh(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>t.scaleTo(Sh(r,s==null?void 0:s.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,s)=>{const[i,o,c]=e.getState().transform,A=kf.translate(a.x??i,a.y??o).scale(a.zoom??c);t.transform(Sh(r,s==null?void 0:s.duration),A)},getViewport:()=>{const[a,s,i]=e.getState().transform;return{x:a,y:s,zoom:i}},fitView:a=>mH(e.getState,a),setCenter:(a,s,i)=>{const{width:o,height:c,maxZoom:A}=e.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:A,h=o/2-a*d,m=c/2-s*d,p=kf.translate(h,m).scale(d);t.transform(Sh(r,i==null?void 0:i.duration),p)},fitBounds:(a,s)=>{const{width:i,height:o,minZoom:c,maxZoom:A}=e.getState(),{x:d,y:h,zoom:m}=eH(a,i,o,c,A,(s==null?void 0:s.padding)??.1),p=kf.translate(d,h).scale(m);t.transform(Sh(r,s==null?void 0:s.duration),p)},project:a=>{const{transform:s,snapToGrid:i,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),NS(a,s,i,o)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:i,snapGrid:o,domNode:c}=e.getState();if(!c)return a;const{x:A,y:d}=c.getBoundingClientRect(),h={x:a.x-A,y:a.y-d};return NS(h,s,i,o)},flowToScreenPosition:a=>{const{transform:s,domNode:i}=e.getState();if(!i)return a;const{x:o,y:c}=i.getBoundingClientRect(),A=Y9(a,s);return{x:A.x+o,y:A.y+c}},viewportInitialized:!0}:y5e,[t,r])};function SE(){const e=C5e(),t=ii(),r=Q.useCallback(()=>t.getState().getNodes().map(x=>({...x})),[]),n=Q.useCallback(x=>t.getState().nodeInternals.get(x),[]),a=Q.useCallback(()=>{const{edges:x=[]}=t.getState();return x.map(E=>({...E}))},[]),s=Q.useCallback(x=>{const{edges:E=[]}=t.getState();return E.find(_=>_.id===x)},[]),i=Q.useCallback(x=>{const{getNodes:E,setNodes:_,hasDefaultNodes:B,onNodesChange:T}=t.getState(),I=E(),L=typeof x=="function"?x(I):x;if(B)_(L);else if(T){const k=L.length===0?I.map(w=>({type:"remove",id:w.id})):L.map(w=>({item:w,type:"reset"}));T(k)}},[]),o=Q.useCallback(x=>{const{edges:E=[],setEdges:_,hasDefaultEdges:B,onEdgesChange:T}=t.getState(),I=typeof x=="function"?x(E):x;if(B)_(I);else if(T){const L=I.length===0?E.map(k=>({type:"remove",id:k.id})):I.map(k=>({item:k,type:"reset"}));T(L)}},[]),c=Q.useCallback(x=>{const E=Array.isArray(x)?x:[x],{getNodes:_,setNodes:B,hasDefaultNodes:T,onNodesChange:I}=t.getState();if(T){const k=[..._(),...E];B(k)}else if(I){const L=E.map(k=>({item:k,type:"add"}));I(L)}},[]),A=Q.useCallback(x=>{const E=Array.isArray(x)?x:[x],{edges:_=[],setEdges:B,hasDefaultEdges:T,onEdgesChange:I}=t.getState();if(T)B([..._,...E]);else if(I){const L=E.map(k=>({item:k,type:"add"}));I(L)}},[]),d=Q.useCallback(()=>{const{getNodes:x,edges:E=[],transform:_}=t.getState(),[B,T,I]=_;return{nodes:x().map(L=>({...L})),edges:E.map(L=>({...L})),viewport:{x:B,y:T,zoom:I}}},[]),h=Q.useCallback(({nodes:x,edges:E})=>{const{nodeInternals:_,getNodes:B,edges:T,hasDefaultNodes:I,hasDefaultEdges:L,onNodesDelete:k,onEdgesDelete:w,onNodesChange:y,onEdgesChange:N}=t.getState(),U=(x||[]).map(ee=>ee.id),j=(E||[]).map(ee=>ee.id),F=B().reduce((ee,W)=>{const te=W.parentNode||W.parentId,G=!U.includes(W.id)&&te&&ee.find(z=>z.id===te);return(typeof W.deletable=="boolean"?W.deletable:!0)&&(U.includes(W.id)||G)&&ee.push(W),ee},[]),P=T.filter(ee=>typeof ee.deletable=="boolean"?ee.deletable:!0),M=P.filter(ee=>j.includes(ee.id));if(F||M){const ee=Z9(F,P),W=[...M,...ee],te=W.reduce((G,q)=>(G.includes(q.id)||G.push(q.id),G),[]);if((L||I)&&(L&&t.setState({edges:T.filter(G=>!te.includes(G.id))}),I&&(F.forEach(G=>{_.delete(G.id)}),t.setState({nodeInternals:new Map(_)}))),te.length>0&&(w==null||w(W),N&&N(te.map(G=>({id:G,type:"remove"})))),F.length>0&&(k==null||k(F),y)){const G=F.map(q=>({id:q.id,type:"remove"}));y(G)}}},[]),m=Q.useCallback(x=>{const E=zCe(x),_=E?null:t.getState().nodeInternals.get(x.id);return!E&&!_?[null,null,E]:[E?x:kR(_),_,E]},[]),p=Q.useCallback((x,E=!0,_)=>{const[B,T,I]=m(x);return B?(_||t.getState().getNodes()).filter(L=>{if(!I&&(L.id===T.id||!L.positionAbsolute))return!1;const k=kR(L),w=ES(k,B);return E&&w>0||w>=B.width*B.height}):[]},[]),v=Q.useCallback((x,E,_=!0)=>{const[B]=m(x);if(!B)return!1;const T=ES(B,E);return _&&T>0||T>=B.width*B.height},[]);return Q.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:i,setEdges:o,addNodes:c,addEdges:A,toObject:d,deleteElements:h,getIntersectingNodes:p,isNodeIntersecting:v}),[e,r,n,a,s,i,o,c,A,d,h,p,v])}const _5e={actInsideInputWithModifier:!1};var S5e=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=ii(),{deleteElements:n}=SE(),a=h1(e,_5e),s=h1(t);Q.useEffect(()=>{if(a){const{edges:i,getNodes:o}=r.getState(),c=o().filter(d=>d.selected),A=i.filter(d=>d.selected);n({nodes:c,edges:A}),r.setState({nodesSelectionActive:!1})}},[a]),Q.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function N5e(e){const t=ii();Q.useEffect(()=>{let r;const n=()=>{var s,i;if(!e.current)return;const a=h3(e.current);(a.height===0||a.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",sd.error004())),t.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const C3={position:"absolute",width:"100%",height:"100%",top:0,left:0},B5e=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,r2=e=>({x:e.x,y:e.y,zoom:e.k}),fm=(e,t)=>e.target.closest(`.${t}`),PR=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),MR=e=>{const t=e.ctrlKey&&ry()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},k5e=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),T5e=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:c=Oh.Free,zoomOnDoubleClick:A=!0,elementsSelectable:d,panOnDrag:h=!0,defaultViewport:m,translateExtent:p,minZoom:v,maxZoom:x,zoomActivationKeyCode:E,preventScrolling:_=!0,children:B,noWheelClassName:T,noPanClassName:I})=>{const L=Q.useRef(),k=ii(),w=Q.useRef(!1),y=Q.useRef(!1),N=Q.useRef(null),U=Q.useRef({x:0,y:0,zoom:0}),{d3Zoom:j,d3Selection:F,d3ZoomHandler:P,userSelectionActive:M}=Da(k5e,ro),ee=h1(E),W=Q.useRef(0),te=Q.useRef(!1),G=Q.useRef();return N5e(N),Q.useEffect(()=>{if(N.current){const q=N.current.getBoundingClientRect(),z=RCe().scaleExtent([v,x]).translateExtent(p),Z=ec(N.current).call(z),R=kf.translate(m.x,m.y).scale(vp(m.zoom,v,x)),K=[[0,0],[q.width,q.height]],X=z.constrain()(R,K,p);z.transform(Z,X),z.wheelDelta(MR),k.setState({d3Zoom:z,d3Selection:Z,d3ZoomHandler:Z.on("wheel.zoom"),transform:[X.x,X.y,X.k],domNode:N.current.closest(".react-flow")})}},[]),Q.useEffect(()=>{F&&j&&(i&&!ee&&!M?F.on("wheel.zoom",q=>{if(fm(q,T))return!1;q.preventDefault(),q.stopImmediatePropagation();const z=F.property("__zoom").k||1;if(q.ctrlKey&&s){const fe=Ru(q),be=MR(q),Ce=z*Math.pow(2,be);j.scaleTo(F,Ce,fe,q);return}const Z=q.deltaMode===1?20:1;let R=c===Oh.Vertical?0:q.deltaX*Z,K=c===Oh.Horizontal?0:q.deltaY*Z;!ry()&&q.shiftKey&&c!==Oh.Vertical&&(R=q.deltaY*Z,K=0),j.translateBy(F,-(R/z)*o,-(K/z)*o,{internal:!0});const X=r2(F.property("__zoom")),{onViewportChangeStart:re,onViewportChange:ne,onViewportChangeEnd:ue}=k.getState();clearTimeout(G.current),te.current||(te.current=!0,t==null||t(q,X),re==null||re(X)),te.current&&(e==null||e(q,X),ne==null||ne(X),G.current=setTimeout(()=>{r==null||r(q,X),ue==null||ue(X),te.current=!1},150))},{passive:!1}):typeof P<"u"&&F.on("wheel.zoom",function(q,z){if(!_&&q.type==="wheel"&&!q.ctrlKey||fm(q,T))return null;q.preventDefault(),P.call(this,q,z)},{passive:!1}))},[M,i,c,F,j,P,ee,s,_,T,t,e,r]),Q.useEffect(()=>{j&&j.on("start",q=>{var R,K;if(!q.sourceEvent||q.sourceEvent.internal)return null;W.current=(R=q.sourceEvent)==null?void 0:R.button;const{onViewportChangeStart:z}=k.getState(),Z=r2(q.transform);w.current=!0,U.current=Z,((K=q.sourceEvent)==null?void 0:K.type)==="mousedown"&&k.setState({paneDragging:!0}),z==null||z(Z),t==null||t(q.sourceEvent,Z)})},[j,t]),Q.useEffect(()=>{j&&(M&&!w.current?j.on("zoom",null):M||j.on("zoom",q=>{var Z;const{onViewportChange:z}=k.getState();if(k.setState({transform:[q.transform.x,q.transform.y,q.transform.k]}),y.current=!!(n&&PR(h,W.current??0)),(e||z)&&!((Z=q.sourceEvent)!=null&&Z.internal)){const R=r2(q.transform);z==null||z(R),e==null||e(q.sourceEvent,R)}}))},[M,j,e,h,n]),Q.useEffect(()=>{j&&j.on("end",q=>{if(!q.sourceEvent||q.sourceEvent.internal)return null;const{onViewportChangeEnd:z}=k.getState();if(w.current=!1,k.setState({paneDragging:!1}),n&&PR(h,W.current??0)&&!y.current&&n(q.sourceEvent),y.current=!1,(r||z)&&B5e(U.current,q.transform)){const Z=r2(q.transform);U.current=Z,clearTimeout(L.current),L.current=setTimeout(()=>{z==null||z(Z),r==null||r(q.sourceEvent,Z)},i?150:0)}})},[j,i,h,r,n]),Q.useEffect(()=>{j&&j.filter(q=>{const z=ee||a,Z=s&&q.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&q.button===1&&q.type==="mousedown"&&(fm(q,"react-flow__node")||fm(q,"react-flow__edge")))return!0;if(!h&&!z&&!i&&!A&&!s||M||!A&&q.type==="dblclick"||fm(q,T)&&q.type==="wheel"||fm(q,I)&&(q.type!=="wheel"||i&&q.type==="wheel"&&!ee)||!s&&q.ctrlKey&&q.type==="wheel"||!z&&!i&&!Z&&q.type==="wheel"||!h&&(q.type==="mousedown"||q.type==="touchstart")||Array.isArray(h)&&!h.includes(q.button)&&q.type==="mousedown")return!1;const R=Array.isArray(h)&&h.includes(q.button)||!q.button||q.button<=1;return(!q.ctrlKey||q.type==="wheel")&&R})},[M,j,a,s,i,A,h,d,ee]),mt.createElement("div",{className:"react-flow__renderer",ref:N,style:C3},B)},I5e=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function F5e(){const{userSelectionActive:e,userSelectionRect:t}=Da(I5e,ro);return e&&t?mt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function QR(e,t){const r=t.parentNode||t.parentId,n=e.find(a=>a.id===r);if(n){const a=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(a>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);n.position.x=n.position.x-i,n.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);n.position.y=n.position.y-i,n.style.height+=i,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function pH(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,a)=>{const s=e.filter(o=>o.id===a.id);if(s.length===0)return n.push(a),n;const i={...a};for(const o of s)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&QR(n,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&QR(n,i);break}case"remove":return n}return n.push(i),n},r)}function gH(e,t){return pH(e,t)}function j5e(e,t){return pH(e,t)}const af=(e,t)=>({id:e,type:"select",selected:t});function Dm(e,t){return e.reduce((r,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(af(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(af(n.id,!1))),r},[])}const S_=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},D5e=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),xH=Q.memo(({isSelecting:e,selectionMode:t=f1.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:c,onPaneMouseMove:A,onPaneMouseLeave:d,children:h})=>{const m=Q.useRef(null),p=ii(),v=Q.useRef(0),x=Q.useRef(0),E=Q.useRef(),{userSelectionActive:_,elementsSelectable:B,dragging:T}=Da(D5e,ro),I=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,x.current=0},L=P=>{s==null||s(P),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},k=P=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){P.preventDefault();return}i==null||i(P)},w=o?P=>o(P):void 0,y=P=>{const{resetSelectedElements:M,domNode:ee}=p.getState();if(E.current=ee==null?void 0:ee.getBoundingClientRect(),!B||!e||P.button!==0||P.target!==m.current||!E.current)return;const{x:W,y:te}=Tf(P,E.current);M(),p.setState({userSelectionRect:{width:0,height:0,startX:W,startY:te,x:W,y:te}}),n==null||n(P)},N=P=>{const{userSelectionRect:M,nodeInternals:ee,edges:W,transform:te,onNodesChange:G,onEdgesChange:q,nodeOrigin:z,getNodes:Z}=p.getState();if(!e||!E.current||!M)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const R=Tf(P,E.current),K=M.startX??0,X=M.startY??0,re={...M,x:R.x<K?R.x:K,y:R.y<X?R.y:X,width:Math.abs(R.x-K),height:Math.abs(R.y-X)},ne=Z(),ue=J9(ee,re,te,t===f1.Partial,!0,z),fe=Z9(ue,W).map(Ce=>Ce.id),be=ue.map(Ce=>Ce.id);if(v.current!==be.length){v.current=be.length;const Ce=Dm(ne,be);Ce.length&&(G==null||G(Ce))}if(x.current!==fe.length){x.current=fe.length;const Ce=Dm(W,fe);Ce.length&&(q==null||q(Ce))}p.setState({userSelectionRect:re})},U=P=>{if(P.button!==0)return;const{userSelectionRect:M}=p.getState();!_&&M&&P.target===m.current&&(L==null||L(P)),p.setState({nodesSelectionActive:v.current>0}),I(),a==null||a(P)},j=P=>{_&&(p.setState({nodesSelectionActive:v.current>0}),a==null||a(P)),I()},F=B&&(e||_);return mt.createElement("div",{className:go(["react-flow__pane",{dragging:T,selection:e}]),onClick:F?void 0:S_(L,m),onContextMenu:S_(k,m),onWheel:S_(w,m),onMouseEnter:F?void 0:c,onMouseDown:F?y:void 0,onMouseMove:F?N:A,onMouseUp:F?U:void 0,onMouseLeave:F?j:d,ref:m,style:C3},h,mt.createElement(F5e,null))});xH.displayName="Pane";function vH(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:vH(n,t):!1}function HR(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function R5e(e,t,r,n){return Array.from(e.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!vH(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var s,i;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((i=a.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function L5e(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function bH(e,t,r,n,a=[0,0],s){const i=L5e(e,e.extent||n);let o=i;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const h=r.get(c),{x:m,y:p}=Zm(h,a).positionAbsolute;o=h&&ac(m)&&ac(p)&&ac(h.width)&&ac(h.height)?[[m+e.width*a[0],p+e.height*a[1]],[m+h.width-e.width+e.width*a[0],p+h.height-e.height+e.height*a[1]]]:o}else s==null||s("005",sd.error005()),o=i;else if(e.extent&&c&&e.extent!=="parent"){const h=r.get(c),{x:m,y:p}=Zm(h,a).positionAbsolute;o=[[e.extent[0][0]+m,e.extent[0][1]+p],[e.extent[1][0]+m,e.extent[1][1]+p]]}let A={x:0,y:0};if(c){const h=r.get(c);A=Zm(h,a).positionAbsolute}const d=o&&o!=="parent"?m3(t,o):t;return{position:{x:d.x-A.x,y:d.y-A.y},positionAbsolute:d}}function N_({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?n.find(a=>a.id===e):n[0],n]}const VR=(e,t,r,n)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const s=Array.from(a),i=t.getBoundingClientRect(),o={x:i.width*n[0],y:i.height*n[1]};return s.map(c=>{const A=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(A.left-i.left-o.x)/r,y:(A.top-i.top-o.y)/r,...h3(c)}})};function Dg(e,t,r){return r===void 0?r:n=>{const a=t().nodeInternals.get(e);a&&r(n,{...a})}}function kS({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:o,onError:c}=t.getState(),A=o.get(e);if(!A){c==null||c("012",sd.error012(e));return}t.setState({nodesSelectionActive:!1}),A.selected?(r||A.selected&&i)&&(s({nodes:[A],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([e])}function O5e(){const e=ii();return Q.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=e.getState(),i=r.touches?r.touches[0].clientX:r.clientX,o=r.touches?r.touches[0].clientY:r.clientY,c={x:(i-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(c.x/a[0]):c.x,ySnapped:s?a[1]*Math.round(c.y/a[1]):c.y,...c}},[])}function B_(e){return(t,r,n)=>e==null?void 0:e(t,n)}function wH({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:i}){const o=ii(),[c,A]=Q.useState(!1),d=Q.useRef([]),h=Q.useRef({x:null,y:null}),m=Q.useRef(0),p=Q.useRef(null),v=Q.useRef({x:0,y:0}),x=Q.useRef(null),E=Q.useRef(!1),_=Q.useRef(!1),B=Q.useRef(!1),T=O5e();return Q.useEffect(()=>{if(e!=null&&e.current){const I=ec(e.current),L=({x:y,y:N})=>{const{nodeInternals:U,onNodeDrag:j,onSelectionDrag:F,updateNodePositions:P,nodeExtent:M,snapGrid:ee,snapToGrid:W,nodeOrigin:te,onError:G}=o.getState();h.current={x:y,y:N};let q=!1,z={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&M){const R=w3(d.current,te);z=p3(R)}if(d.current=d.current.map(R=>{const K={x:y-R.distance.x,y:N-R.distance.y};W&&(K.x=ee[0]*Math.round(K.x/ee[0]),K.y=ee[1]*Math.round(K.y/ee[1]));const X=[[M[0][0],M[0][1]],[M[1][0],M[1][1]]];d.current.length>1&&M&&!R.extent&&(X[0][0]=R.positionAbsolute.x-z.x+M[0][0],X[1][0]=R.positionAbsolute.x+(R.width??0)-z.x2+M[1][0],X[0][1]=R.positionAbsolute.y-z.y+M[0][1],X[1][1]=R.positionAbsolute.y+(R.height??0)-z.y2+M[1][1]);const re=bH(R,K,U,X,te,G);return q=q||R.position.x!==re.position.x||R.position.y!==re.position.y,R.position=re.position,R.positionAbsolute=re.positionAbsolute,R}),!q)return;P(d.current,!0,!0),A(!0);const Z=a?j:B_(F);if(Z&&x.current){const[R,K]=N_({nodeId:a,dragItems:d.current,nodeInternals:U});Z(x.current,R,K)}},k=()=>{if(!p.current)return;const[y,N]=V9(v.current,p.current);if(y!==0||N!==0){const{transform:U,panBy:j}=o.getState();h.current.x=(h.current.x??0)-y/U[2],h.current.y=(h.current.y??0)-N/U[2],j({x:y,y:N})&&L(h.current)}m.current=requestAnimationFrame(k)},w=y=>{var te;const{nodeInternals:N,multiSelectionActive:U,nodesDraggable:j,unselectNodesAndEdges:F,onNodeDragStart:P,onSelectionDragStart:M}=o.getState();_.current=!0;const ee=a?P:B_(M);(!i||!s)&&!U&&a&&((te=N.get(a))!=null&&te.selected||F()),a&&s&&i&&kS({id:a,store:o,nodeRef:e});const W=T(y);if(h.current=W,d.current=R5e(N,j,W,a),ee&&d.current){const[G,q]=N_({nodeId:a,dragItems:d.current,nodeInternals:N});ee(y.sourceEvent,G,q)}};if(t)I.on(".drag",null);else{const y=Gye().on("start",N=>{const{domNode:U,nodeDragThreshold:j}=o.getState();j===0&&w(N),B.current=!1;const F=T(N);h.current=F,p.current=(U==null?void 0:U.getBoundingClientRect())||null,v.current=Tf(N.sourceEvent,p.current)}).on("drag",N=>{var P,M;const U=T(N),{autoPanOnNodeDrag:j,nodeDragThreshold:F}=o.getState();if(N.sourceEvent.type==="touchmove"&&N.sourceEvent.touches.length>1&&(B.current=!0),!B.current){if(!E.current&&_.current&&j&&(E.current=!0,k()),!_.current){const ee=U.xSnapped-(((P=h==null?void 0:h.current)==null?void 0:P.x)??0),W=U.ySnapped-(((M=h==null?void 0:h.current)==null?void 0:M.y)??0);Math.sqrt(ee*ee+W*W)>F&&w(N)}(h.current.x!==U.xSnapped||h.current.y!==U.ySnapped)&&d.current&&_.current&&(x.current=N.sourceEvent,v.current=Tf(N.sourceEvent,p.current),L(U))}}).on("end",N=>{if(!(!_.current||B.current)&&(A(!1),E.current=!1,_.current=!1,cancelAnimationFrame(m.current),d.current)){const{updateNodePositions:U,nodeInternals:j,onNodeDragStop:F,onSelectionDragStop:P}=o.getState(),M=a?F:B_(P);if(U(d.current,!1,!1),M){const[ee,W]=N_({nodeId:a,dragItems:d.current,nodeInternals:j});M(N.sourceEvent,ee,W)}}}).filter(N=>{const U=N.target;return!N.button&&(!r||!HR(U,`.${r}`,e))&&(!n||HR(U,n,e))});return I.call(y),()=>{I.on(".drag",null)}}}},[e,t,r,n,s,o,a,i,T]),c}function yH(){const e=ii();return Q.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:i,snapToGrid:o,snapGrid:c,onError:A,nodesDraggable:d}=e.getState(),h=i().filter(B=>B.selected&&(B.draggable||d&&typeof B.draggable>"u")),m=o?c[0]:5,p=o?c[1]:5,v=r.isShiftPressed?4:1,x=r.x*m*v,E=r.y*p*v,_=h.map(B=>{if(B.positionAbsolute){const T={x:B.positionAbsolute.x+x,y:B.positionAbsolute.y+E};o&&(T.x=c[0]*Math.round(T.x/c[0]),T.y=c[1]*Math.round(T.y/c[1]));const{positionAbsolute:I,position:L}=bH(B,T,n,a,void 0,A);B.position=L,B.positionAbsolute=I}return B});s(_,!0,!1)},[])}const ep={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Rg=e=>{const t=({id:r,type:n,data:a,xPos:s,yPos:i,xPosOrigin:o,yPosOrigin:c,selected:A,onClick:d,onMouseEnter:h,onMouseMove:m,onMouseLeave:p,onContextMenu:v,onDoubleClick:x,style:E,className:_,isDraggable:B,isSelectable:T,isConnectable:I,isFocusable:L,selectNodesOnDrag:k,sourcePosition:w,targetPosition:y,hidden:N,resizeObserver:U,dragHandle:j,zIndex:F,isParent:P,noDragClassName:M,noPanClassName:ee,initialized:W,disableKeyboardA11y:te,ariaLabel:G,rfId:q,hasHandleBounds:z})=>{const Z=ii(),R=Q.useRef(null),K=Q.useRef(null),X=Q.useRef(w),re=Q.useRef(y),ne=Q.useRef(n),ue=T||B||d||h||m||p,fe=yH(),be=Dg(r,Z.getState,h),Ce=Dg(r,Z.getState,m),me=Dg(r,Z.getState,p),oe=Dg(r,Z.getState,v),Le=Dg(r,Z.getState,x),Ye=Fe=>{const{nodeDragThreshold:He}=Z.getState();if(T&&(!k||!B||He>0)&&kS({id:r,store:Z,nodeRef:R}),d){const Xe=Z.getState().nodeInternals.get(r);Xe&&d(Fe,{...Xe})}},Te=Fe=>{if(!CS(Fe)&&!te)if(G9.includes(Fe.key)&&T){const He=Fe.key==="Escape";kS({id:r,store:Z,unselect:He,nodeRef:R})}else B&&A&&Object.prototype.hasOwnProperty.call(ep,Fe.key)&&(Z.setState({ariaLiveMessage:`Moved selected node ${Fe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),fe({x:ep[Fe.key].x,y:ep[Fe.key].y,isShiftPressed:Fe.shiftKey}))};Q.useEffect(()=>()=>{K.current&&(U==null||U.unobserve(K.current),K.current=null)},[]),Q.useEffect(()=>{if(R.current&&!N){const Fe=R.current;(!W||!z||K.current!==Fe)&&(K.current&&(U==null||U.unobserve(K.current)),U==null||U.observe(Fe),K.current=Fe)}},[N,W,z]),Q.useEffect(()=>{const Fe=ne.current!==n,He=X.current!==w,Xe=re.current!==y;R.current&&(Fe||He||Xe)&&(Fe&&(ne.current=n),He&&(X.current=w),Xe&&(re.current=y),Z.getState().updateNodeDimensions([{id:r,nodeElement:R.current,forceUpdate:!0}]))},[r,n,w,y]);const we=wH({nodeRef:R,disabled:N||!B,noDragClassName:M,handleSelector:j,nodeId:r,isSelectable:T,selectNodesOnDrag:k});return N?null:mt.createElement("div",{className:go(["react-flow__node",`react-flow__node-${n}`,{[ee]:B},_,{selected:A,selectable:T,parent:P,dragging:we}]),ref:R,style:{zIndex:F,transform:`translate(${o}px,${c}px)`,pointerEvents:ue?"all":"none",visibility:W?"visible":"hidden",...E},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:be,onMouseMove:Ce,onMouseLeave:me,onContextMenu:oe,onClick:Ye,onDoubleClick:Le,onKeyDown:L?Te:void 0,tabIndex:L?0:void 0,role:L?"button":void 0,"aria-describedby":te?void 0:`${AH}-${q}`,"aria-label":G},mt.createElement(YCe,{value:r},mt.createElement(e,{id:r,data:a,type:n,xPos:s,yPos:i,selected:A,isConnectable:I,sourcePosition:w,targetPosition:y,dragging:we,dragHandle:j,zIndex:F})))};return t.displayName="NodeWrapper",Q.memo(t)};const U5e=e=>{const t=e.getNodes().filter(r=>r.selected);return{...w3(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function P5e({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=ii(),{width:a,height:s,x:i,y:o,transformString:c,userSelectionActive:A}=Da(U5e,ro),d=yH(),h=Q.useRef(null);if(Q.useEffect(()=>{var v;r||(v=h.current)==null||v.focus({preventScroll:!0})},[r]),wH({nodeRef:h}),A||!a||!s)return null;const m=e?v=>{const x=n.getState().getNodes().filter(E=>E.selected);e(v,x)}:void 0,p=v=>{Object.prototype.hasOwnProperty.call(ep,v.key)&&d({x:ep[v.key].x,y:ep[v.key].y,isShiftPressed:v.shiftKey})};return mt.createElement("div",{className:go(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},mt.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:r?void 0:-1,onKeyDown:r?void 0:p,style:{width:a,height:s,top:o,left:i}}))}var M5e=Q.memo(P5e);const Q5e=e=>e.nodesSelectionActive,EH=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:o,onMove:c,onMoveStart:A,onMoveEnd:d,selectionKeyCode:h,selectionOnDrag:m,selectionMode:p,onSelectionStart:v,onSelectionEnd:x,multiSelectionKeyCode:E,panActivationKeyCode:_,zoomActivationKeyCode:B,elementsSelectable:T,zoomOnScroll:I,zoomOnPinch:L,panOnScroll:k,panOnScrollSpeed:w,panOnScrollMode:y,zoomOnDoubleClick:N,panOnDrag:U,defaultViewport:j,translateExtent:F,minZoom:P,maxZoom:M,preventScrolling:ee,onSelectionContextMenu:W,noWheelClassName:te,noPanClassName:G,disableKeyboardA11y:q})=>{const z=Da(Q5e),Z=h1(h),R=h1(_),K=R||U,X=R||k,re=Z||m&&K!==!0;return S5e({deleteKeyCode:o,multiSelectionKeyCode:E}),mt.createElement(T5e,{onMove:c,onMoveStart:A,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:T,zoomOnScroll:I,zoomOnPinch:L,panOnScroll:X,panOnScrollSpeed:w,panOnScrollMode:y,zoomOnDoubleClick:N,panOnDrag:!Z&&K,defaultViewport:j,translateExtent:F,minZoom:P,maxZoom:M,zoomActivationKeyCode:B,preventScrolling:ee,noWheelClassName:te,noPanClassName:G},mt.createElement(xH,{onSelectionStart:v,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:K,isSelecting:!!re,selectionMode:p},e,z&&mt.createElement(M5e,{onSelectionContextMenu:W,noPanClassName:G,disableKeyboardA11y:q})))};EH.displayName="FlowRenderer";var H5e=Q.memo(EH);function V5e(e){return Da(Q.useCallback(r=>e?J9(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function z5e(e){const t={input:Rg(e.input||oH),default:Rg(e.default||BS),output:Rg(e.output||cH),group:Rg(e.group||E3)},r={},n=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=Rg(e[s]||BS),a),r);return{...t,...n}}const G5e=({x:e,y:t,width:r,height:n,origin:a})=>!r||!n?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-r*a[0],y:t-n*a[1]},K5e=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),CH=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:i}=Da(K5e,ro),o=V5e(e.onlyRenderVisibleElements),c=Q.useRef(),A=Q.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(h=>{const m=h.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));s(m)});return c.current=d,d},[]);return Q.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),mt.createElement("div",{className:"react-flow__nodes",style:C3},o.map(d=>{var L,k,w;let h=d.type||"default";e.nodeTypes[h]||(i==null||i("003",sd.error003(h)),h="default");const m=e.nodeTypes[h]||e.nodeTypes.default,p=!!(d.draggable||t&&typeof d.draggable>"u"),v=!!(d.selectable||a&&typeof d.selectable>"u"),x=!!(d.connectable||r&&typeof d.connectable>"u"),E=!!(d.focusable||n&&typeof d.focusable>"u"),_=e.nodeExtent?m3(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,B=(_==null?void 0:_.x)??0,T=(_==null?void 0:_.y)??0,I=G5e({x:B,y:T,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return mt.createElement(m,{key:d.id,id:d.id,className:d.className,style:d.style,type:h,data:d.data,sourcePosition:d.sourcePosition||fr.Bottom,targetPosition:d.targetPosition||fr.Top,hidden:d.hidden,xPos:B,yPos:T,xPosOrigin:I.x,yPosOrigin:I.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:p,isSelectable:v,isConnectable:x,isFocusable:E,resizeObserver:A,dragHandle:d.dragHandle,zIndex:((L=d[$a])==null?void 0:L.z)??0,isParent:!!((k=d[$a])!=null&&k.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((w=d[$a])!=null&&w.handleBounds)})}))};CH.displayName="NodeRenderer";var q5e=Q.memo(CH);const $5e=(e,t,r)=>r===fr.Left?e-t:r===fr.Right?e+t:e,W5e=(e,t,r)=>r===fr.Top?e-t:r===fr.Bottom?e+t:e,zR="react-flow__edgeupdater",GR=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:i,type:o})=>mt.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:i,className:go([zR,`${zR}-${o}`]),cx:$5e(t,n,e),cy:W5e(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),X5e=()=>!0;var hm=e=>{const t=({id:r,className:n,type:a,data:s,onClick:i,onEdgeDoubleClick:o,selected:c,animated:A,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:p,labelBgPadding:v,labelBgBorderRadius:x,style:E,source:_,target:B,sourceX:T,sourceY:I,targetX:L,targetY:k,sourcePosition:w,targetPosition:y,elementsSelectable:N,hidden:U,sourceHandleId:j,targetHandleId:F,onContextMenu:P,onMouseEnter:M,onMouseMove:ee,onMouseLeave:W,reconnectRadius:te,onReconnect:G,onReconnectStart:q,onReconnectEnd:z,markerEnd:Z,markerStart:R,rfId:K,ariaLabel:X,isFocusable:re,isReconnectable:ne,pathOptions:ue,interactionWidth:fe,disableKeyboardA11y:be})=>{const Ce=Q.useRef(null),[me,oe]=Q.useState(!1),[Le,Ye]=Q.useState(!1),Te=ii(),we=Q.useMemo(()=>`url('#${SS(R,K)}')`,[R,K]),Fe=Q.useMemo(()=>`url('#${SS(Z,K)}')`,[Z,K]);if(U)return null;const He=ke=>{var Hr;const{edges:We,addSelectedEdges:ft,unselectNodesAndEdges:$t,multiSelectionActive:zt}=Te.getState(),tr=We.find(or=>or.id===r);tr&&(N&&(Te.setState({nodesSelectionActive:!1}),tr.selected&&zt?($t({nodes:[],edges:[tr]}),(Hr=Ce.current)==null||Hr.blur()):ft([r])),i&&i(ke,tr))},Xe=jg(r,Te.getState,o),ut=jg(r,Te.getState,P),Et=jg(r,Te.getState,M),At=jg(r,Te.getState,ee),jt=jg(r,Te.getState,W),Dt=(ke,We)=>{if(ke.button!==0)return;const{edges:ft,isValidConnection:$t}=Te.getState(),zt=We?B:_,tr=(We?F:j)||null,Hr=We?"target":"source",or=$t||X5e,mn=We,Lr=ft.find(ar=>ar.id===r);Ye(!0),q==null||q(ke,Lr,Hr);const En=ar=>{Ye(!1),z==null||z(ar,Lr,Hr)};nH({event:ke,handleId:tr,nodeId:zt,onConnect:ar=>G==null?void 0:G(Lr,ar),isTarget:mn,getState:Te.getState,setState:Te.setState,isValidConnection:or,edgeUpdaterType:Hr,onReconnectEnd:En})},Yt=ke=>Dt(ke,!0),Rt=ke=>Dt(ke,!1),Ut=()=>oe(!0),qt=()=>oe(!1),De=!N&&!i,Oe=ke=>{var We;if(!be&&G9.includes(ke.key)&&N){const{unselectNodesAndEdges:ft,addSelectedEdges:$t,edges:zt}=Te.getState();ke.key==="Escape"?((We=Ce.current)==null||We.blur(),ft({edges:[zt.find(Hr=>Hr.id===r)]})):$t([r])}};return mt.createElement("g",{className:go(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:c,animated:A,inactive:De,updating:me}]),onClick:He,onDoubleClick:Xe,onContextMenu:ut,onMouseEnter:Et,onMouseMove:At,onMouseLeave:jt,onKeyDown:re?Oe:void 0,tabIndex:re?0:void 0,role:re?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":X===null?void 0:X||`Edge from ${_} to ${B}`,"aria-describedby":re?`${dH}-${K}`:void 0,ref:Ce},!Le&&mt.createElement(e,{id:r,source:_,target:B,selected:c,animated:A,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:p,labelBgPadding:v,labelBgBorderRadius:x,data:s,style:E,sourceX:T,sourceY:I,targetX:L,targetY:k,sourcePosition:w,targetPosition:y,sourceHandleId:j,targetHandleId:F,markerStart:we,markerEnd:Fe,pathOptions:ue,interactionWidth:fe}),ne&&mt.createElement(mt.Fragment,null,(ne==="source"||ne===!0)&&mt.createElement(GR,{position:w,centerX:T,centerY:I,radius:te,onMouseDown:Yt,onMouseEnter:Ut,onMouseOut:qt,type:"source"}),(ne==="target"||ne===!0)&&mt.createElement(GR,{position:y,centerX:L,centerY:k,radius:te,onMouseDown:Rt,onMouseEnter:Ut,onMouseOut:qt,type:"target"})))};return t.displayName="EdgeWrapper",Q.memo(t)};function Y5e(e){const t={default:hm(e.default||ay),straight:hm(e.bezier||v3),step:hm(e.step||x3),smoothstep:hm(e.step||_E),simplebezier:hm(e.simplebezier||g3)},r={},n=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=hm(e[s]||ay),a),r);return{...t,...n}}function KR(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,a=((r==null?void 0:r.y)||0)+t.y,s=(r==null?void 0:r.width)||t.width,i=(r==null?void 0:r.height)||t.height;switch(e){case fr.Top:return{x:n+s/2,y:a};case fr.Right:return{x:n+s,y:a+i/2};case fr.Bottom:return{x:n+s/2,y:a+i};case fr.Left:return{x:n,y:a+i/2}}}function qR(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const J5e=(e,t,r,n,a,s)=>{const i=KR(r,e,t),o=KR(s,n,a);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function Z5e({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:i,height:o,transform:c}){const A={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+a),y2:Math.max(e.y+n,t.y+s)};A.x===A.x2&&(A.x2+=1),A.y===A.y2&&(A.y2+=1);const d=p3({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:i/c[2],height:o/c[2]}),h=Math.max(0,Math.min(d.x2,A.x2)-Math.max(d.x,A.x)),m=Math.max(0,Math.min(d.y2,A.y2)-Math.max(d.y,A.y));return Math.ceil(h*m)>0}function $R(e){var n,a,s,i,o;const t=((n=e==null?void 0:e[$a])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const e_e=[{level:0,isMaxLevel:!0,edges:[]}];function t_e(e,t,r=!1){let n=-1;const a=e.reduce((i,o)=>{var d,h;const c=ac(o.zIndex);let A=c?o.zIndex:0;if(r){const m=t.get(o.target),p=t.get(o.source),v=o.selected||(m==null?void 0:m.selected)||(p==null?void 0:p.selected),x=Math.max(((d=p==null?void 0:p[$a])==null?void 0:d.z)||0,((h=m==null?void 0:m[$a])==null?void 0:h.z)||0,1e3);A=(c?o.zIndex:0)+(v?x:0)}return i[A]?i[A].push(o):i[A]=[o],n=A>n?A:n,i},{}),s=Object.entries(a).map(([i,o])=>{const c=+i;return{edges:o,level:c,isMaxLevel:c===n}});return s.length===0?e_e:s}function r_e(e,t,r){const n=Da(Q.useCallback(a=>e?a.edges.filter(s=>{const i=t.get(s.source),o=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&Z5e({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return t_e(n,t,r)}const n_e=({color:e="none",strokeWidth:t=1})=>mt.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),a_e=({color:e="none",strokeWidth:t=1})=>mt.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),WR={[ny.Arrow]:n_e,[ny.ArrowClosed]:a_e};function s_e(e){const t=ii();return Q.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(WR,e)?WR[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",sd.error009(e)),null)},[e])}const i_e=({id:e,type:t,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const c=s_e(t);return c?mt.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0"},mt.createElement(c,{color:r,strokeWidth:i})):null},o_e=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=SS(i,t);n.includes(o)||(a.push({id:o,color:i.color||e,...i}),n.push(o))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},_H=({defaultColor:e,rfId:t})=>{const r=Da(Q.useCallback(o_e({defaultColor:e,rfId:t}),[e,t]),(n,a)=>!(n.length!==a.length||n.some((s,i)=>s.id!==a[i].id)));return mt.createElement("defs",null,r.map(n=>mt.createElement(i_e,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};_H.displayName="MarkerDefinitions";var l_e=Q.memo(_H);const c_e=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),SH=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:c,onEdgeMouseLeave:A,onEdgeClick:d,onEdgeDoubleClick:h,onReconnect:m,onReconnectStart:p,onReconnectEnd:v,reconnectRadius:x,children:E,disableKeyboardA11y:_})=>{const{edgesFocusable:B,edgesUpdatable:T,elementsSelectable:I,width:L,height:k,connectionMode:w,nodeInternals:y,onError:N}=Da(c_e,ro),U=r_e(t,y,r);return L?mt.createElement(mt.Fragment,null,U.map(({level:j,edges:F,isMaxLevel:P})=>mt.createElement("svg",{key:j,style:{zIndex:j},width:L,height:k,className:"react-flow__edges react-flow__container"},P&&mt.createElement(l_e,{defaultColor:e,rfId:n}),mt.createElement("g",null,F.map(M=>{const[ee,W,te]=$R(y.get(M.source)),[G,q,z]=$R(y.get(M.target));if(!te||!z)return null;let Z=M.type||"default";a[Z]||(N==null||N("011",sd.error011(Z)),Z="default");const R=a[Z]||a.default,K=w===A0.Strict?q.target:(q.target??[]).concat(q.source??[]),X=qR(W.source,M.sourceHandle),re=qR(K,M.targetHandle),ne=(X==null?void 0:X.position)||fr.Bottom,ue=(re==null?void 0:re.position)||fr.Top,fe=!!(M.focusable||B&&typeof M.focusable>"u"),be=M.reconnectable||M.updatable,Ce=typeof m<"u"&&(be||T&&typeof be>"u");if(!X||!re)return N==null||N("008",sd.error008(X,M)),null;const{sourceX:me,sourceY:oe,targetX:Le,targetY:Ye}=J5e(ee,X,ne,G,re,ue);return mt.createElement(R,{key:M.id,id:M.id,className:go([M.className,s]),type:Z,data:M.data,selected:!!M.selected,animated:!!M.animated,hidden:!!M.hidden,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,style:M.style,source:M.source,target:M.target,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerEnd:M.markerEnd,markerStart:M.markerStart,sourceX:me,sourceY:oe,targetX:Le,targetY:Ye,sourcePosition:ne,targetPosition:ue,elementsSelectable:I,onContextMenu:i,onMouseEnter:o,onMouseMove:c,onMouseLeave:A,onClick:d,onEdgeDoubleClick:h,onReconnect:m,onReconnectStart:p,onReconnectEnd:v,reconnectRadius:x,rfId:n,ariaLabel:M.ariaLabel,isFocusable:fe,isReconnectable:Ce,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth,disableKeyboardA11y:_})})))),E):null};SH.displayName="EdgeRenderer";var u_e=Q.memo(SH);const A_e=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function d_e({children:e}){const t=Da(A_e);return mt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function f_e(e){const t=SE(),r=Q.useRef(!1);Q.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const h_e={[fr.Left]:fr.Right,[fr.Right]:fr.Left,[fr.Top]:fr.Bottom,[fr.Bottom]:fr.Top},NH=({nodeId:e,handleType:t,style:r,type:n=df.Bezier,CustomComponent:a,connectionStatus:s})=>{var k,w,y;const{fromNode:i,handleId:o,toX:c,toY:A,connectionMode:d}=Da(Q.useCallback(N=>({fromNode:N.nodeInternals.get(e),handleId:N.connectionHandleId,toX:(N.connectionPosition.x-N.transform[0])/N.transform[2],toY:(N.connectionPosition.y-N.transform[1])/N.transform[2],connectionMode:N.connectionMode}),[e]),ro),h=(k=i==null?void 0:i[$a])==null?void 0:k.handleBounds;let m=h==null?void 0:h[t];if(d===A0.Loose&&(m=m||(h==null?void 0:h[t==="source"?"target":"source"])),!i||!m)return null;const p=o?m.find(N=>N.id===o):m[0],v=p?p.x+p.width/2:(i.width??0)/2,x=p?p.y+p.height/2:i.height??0,E=(((w=i.positionAbsolute)==null?void 0:w.x)??0)+v,_=(((y=i.positionAbsolute)==null?void 0:y.y)??0)+x,B=p==null?void 0:p.position,T=B?h_e[B]:null;if(!B||!T)return null;if(a)return mt.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:i,fromHandle:p,fromX:E,fromY:_,toX:c,toY:A,fromPosition:B,toPosition:T,connectionStatus:s});let I="";const L={sourceX:E,sourceY:_,sourcePosition:B,targetX:c,targetY:A,targetPosition:T};return n===df.Bezier?[I]=X9(L):n===df.Step?[I]=_S({...L,borderRadius:0}):n===df.SmoothStep?[I]=_S(L):n===df.SimpleBezier?[I]=W9(L):I=`M${E},${_} ${c},${A}`,mt.createElement("path",{d:I,fill:"none",className:"react-flow__connection-path",style:r})};NH.displayName="ConnectionLine";const m_e=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function p_e({containerStyle:e,style:t,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:i,width:o,height:c,connectionStatus:A}=Da(m_e,ro);return!(a&&s&&o&&i)?null:mt.createElement("svg",{style:e,width:o,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},mt.createElement("g",{className:go(["react-flow__connection",A])},mt.createElement(NH,{nodeId:a,handleType:s,style:t,type:r,CustomComponent:n,connectionStatus:A})))}function XR(e,t){return Q.useRef(null),ii(),Q.useMemo(()=>t(e),[e])}const BH=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:c,onEdgeDoubleClick:A,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:m,onNodeContextMenu:p,onSelectionContextMenu:v,onSelectionStart:x,onSelectionEnd:E,connectionLineType:_,connectionLineStyle:B,connectionLineComponent:T,connectionLineContainerStyle:I,selectionKeyCode:L,selectionOnDrag:k,selectionMode:w,multiSelectionKeyCode:y,panActivationKeyCode:N,zoomActivationKeyCode:U,deleteKeyCode:j,onlyRenderVisibleElements:F,elementsSelectable:P,selectNodesOnDrag:M,defaultViewport:ee,translateExtent:W,minZoom:te,maxZoom:G,preventScrolling:q,defaultMarkerColor:z,zoomOnScroll:Z,zoomOnPinch:R,panOnScroll:K,panOnScrollSpeed:X,panOnScrollMode:re,zoomOnDoubleClick:ne,panOnDrag:ue,onPaneClick:fe,onPaneMouseEnter:be,onPaneMouseMove:Ce,onPaneMouseLeave:me,onPaneScroll:oe,onPaneContextMenu:Le,onEdgeContextMenu:Ye,onEdgeMouseEnter:Te,onEdgeMouseMove:we,onEdgeMouseLeave:Fe,onReconnect:He,onReconnectStart:Xe,onReconnectEnd:ut,reconnectRadius:Et,noDragClassName:At,noWheelClassName:jt,noPanClassName:Dt,elevateEdgesOnSelect:Yt,disableKeyboardA11y:Rt,nodeOrigin:Ut,nodeExtent:qt,rfId:De})=>{const Oe=XR(e,z5e),ke=XR(t,Y5e);return f_e(s),mt.createElement(H5e,{onPaneClick:fe,onPaneMouseEnter:be,onPaneMouseMove:Ce,onPaneMouseLeave:me,onPaneContextMenu:Le,onPaneScroll:oe,deleteKeyCode:j,selectionKeyCode:L,selectionOnDrag:k,selectionMode:w,onSelectionStart:x,onSelectionEnd:E,multiSelectionKeyCode:y,panActivationKeyCode:N,zoomActivationKeyCode:U,elementsSelectable:P,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:Z,zoomOnPinch:R,zoomOnDoubleClick:ne,panOnScroll:K,panOnScrollSpeed:X,panOnScrollMode:re,panOnDrag:ue,defaultViewport:ee,translateExtent:W,minZoom:te,maxZoom:G,onSelectionContextMenu:v,preventScrolling:q,noDragClassName:At,noWheelClassName:jt,noPanClassName:Dt,disableKeyboardA11y:Rt},mt.createElement(d_e,null,mt.createElement(u_e,{edgeTypes:ke,onEdgeClick:o,onEdgeDoubleClick:A,onlyRenderVisibleElements:F,onEdgeContextMenu:Ye,onEdgeMouseEnter:Te,onEdgeMouseMove:we,onEdgeMouseLeave:Fe,onReconnect:He,onReconnectStart:Xe,onReconnectEnd:ut,reconnectRadius:Et,defaultMarkerColor:z,noPanClassName:Dt,elevateEdgesOnSelect:!!Yt,disableKeyboardA11y:Rt,rfId:De},mt.createElement(p_e,{style:B,type:_,component:T,containerStyle:I})),mt.createElement("div",{className:"react-flow__edgelabel-renderer"}),mt.createElement(q5e,{nodeTypes:Oe,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:m,onNodeContextMenu:p,selectNodesOnDrag:M,onlyRenderVisibleElements:F,noPanClassName:Dt,noDragClassName:At,disableKeyboardA11y:Rt,nodeOrigin:Ut,nodeExtent:qt,rfId:De})))};BH.displayName="GraphView";var g_e=Q.memo(BH);const TS=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Yd={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:TS,nodeExtent:TS,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:A0.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:GCe,isValidConnection:void 0},x_e=()=>nwe((e,t)=>({...Yd,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=t();e({nodeInternals:__(r,n,a,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",i=a?__(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:c,nodeOrigin:A}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const h=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(h.transform),p=r.reduce((x,E)=>{const _=a.get(E.id);if(_!=null&&_.hidden)a.set(_.id,{..._,[$a]:{..._[$a],handleBounds:void 0}});else if(_){const B=h3(E.nodeElement);!!(B.width&&B.height&&(_.width!==B.width||_.height!==B.height||E.forceUpdate))&&(a.set(_.id,{..._,[$a]:{..._[$a],handleBounds:{source:VR(".source",E.nodeElement,m,A),target:VR(".target",E.nodeElement,m,A)}},...B}),x.push({id:_.id,type:"dimensions",dimensions:B}))}return x},[]);hH(a,A);const v=i||s&&!i&&mH(t,{initial:!0,...o});e({nodeInternals:new Map(a),fitViewOnInitDone:v}),(p==null?void 0:p.length)>0&&(n==null||n(p))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=t(),i=r.map(o=>{const c={id:o.id,type:"position",dragging:a};return n&&(c.positionAbsolute=o.positionAbsolute,c.position=o.position),c});s(i)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:c}=t();if(r!=null&&r.length){if(s){const A=gH(r,o()),d=__(A,a,i,c);e({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(c=>af(c,!0)):(i=Dm(s(),r),o=Dm(a,[])),t2({changedNodes:i,changedEdges:o,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(c=>af(c,!0)):(i=Dm(a,r),o=Dm(s(),[])),t2({changedNodes:o,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=t(),i=r||s(),o=n||a,c=i.map(d=>(d.selected=!1,af(d.id,!1))),A=o.map(d=>af(d.id,!1));t2({changedNodes:c,changedEdges:A,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=t();n==null||n.scaleExtent([r,a]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=t();n==null||n.scaleExtent([a,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),s=n().filter(o=>o.selected).map(o=>af(o.id,!1)),i=r.filter(o=>o.selected).map(o=>af(o.id,!1));t2({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(a=>{a.positionAbsolute=m3(a.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:i,d3Selection:o,translateExtent:c}=t();if(!i||!o||!r.x&&!r.y)return!1;const A=kf.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],h=i==null?void 0:i.constrain()(A,d,c);return i.transform(o,h),n[0]!==h.x||n[1]!==h.y||n[2]!==h.k},cancelConnection:()=>e({connectionNodeId:Yd.connectionNodeId,connectionHandleId:Yd.connectionHandleId,connectionHandleType:Yd.connectionHandleType,connectionStatus:Yd.connectionStatus,connectionStartHandle:Yd.connectionStartHandle,connectionEndHandle:Yd.connectionEndHandle}),reset:()=>e({...Yd})}),Object.is),_3=({children:e})=>{const t=Q.useRef(null);return t.current||(t.current=x_e()),mt.createElement(OCe,{value:t.current},e)};_3.displayName="ReactFlowProvider";const kH=({children:e})=>Q.useContext(CE)?mt.createElement(mt.Fragment,null,e):mt.createElement(_3,null,e);kH.displayName="ReactFlowWrapper";const v_e={input:oH,default:BS,output:cH,group:E3},b_e={default:ay,straight:v3,step:x3,smoothstep:_E,simplebezier:g3},w_e=[0,0],y_e=[15,15],E_e={x:0,y:0,zoom:1},C_e={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},TH=Q.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=v_e,edgeTypes:i=b_e,onNodeClick:o,onEdgeClick:c,onInit:A,onMove:d,onMoveStart:h,onMoveEnd:m,onConnect:p,onConnectStart:v,onConnectEnd:x,onClickConnectStart:E,onClickConnectEnd:_,onNodeMouseEnter:B,onNodeMouseMove:T,onNodeMouseLeave:I,onNodeContextMenu:L,onNodeDoubleClick:k,onNodeDragStart:w,onNodeDrag:y,onNodeDragStop:N,onNodesDelete:U,onEdgesDelete:j,onSelectionChange:F,onSelectionDragStart:P,onSelectionDrag:M,onSelectionDragStop:ee,onSelectionContextMenu:W,onSelectionStart:te,onSelectionEnd:G,connectionMode:q=A0.Strict,connectionLineType:z=df.Bezier,connectionLineStyle:Z,connectionLineComponent:R,connectionLineContainerStyle:K,deleteKeyCode:X="Backspace",selectionKeyCode:re="Shift",selectionOnDrag:ne=!1,selectionMode:ue=f1.Full,panActivationKeyCode:fe="Space",multiSelectionKeyCode:be=ry()?"Meta":"Control",zoomActivationKeyCode:Ce=ry()?"Meta":"Control",snapToGrid:me=!1,snapGrid:oe=y_e,onlyRenderVisibleElements:Le=!1,selectNodesOnDrag:Ye=!0,nodesDraggable:Te,nodesConnectable:we,nodesFocusable:Fe,nodeOrigin:He=w_e,edgesFocusable:Xe,edgesUpdatable:ut,elementsSelectable:Et,defaultViewport:At=E_e,minZoom:jt=.5,maxZoom:Dt=2,translateExtent:Yt=TS,preventScrolling:Rt=!0,nodeExtent:Ut,defaultMarkerColor:qt="#b1b1b7",zoomOnScroll:De=!0,zoomOnPinch:Oe=!0,panOnScroll:ke=!1,panOnScrollSpeed:We=.5,panOnScrollMode:ft=Oh.Free,zoomOnDoubleClick:$t=!0,panOnDrag:zt=!0,onPaneClick:tr,onPaneMouseEnter:Hr,onPaneMouseMove:or,onPaneMouseLeave:mn,onPaneScroll:Lr,onPaneContextMenu:En,children:Vn,onEdgeContextMenu:ar,onEdgeDoubleClick:Jt,onEdgeMouseEnter:Mr,onEdgeMouseMove:ms,onEdgeMouseLeave:Zn,onEdgeUpdate:_a,onEdgeUpdateStart:js,onEdgeUpdateEnd:Kt,onReconnect:pn,onReconnectStart:on,onReconnectEnd:Dn,reconnectRadius:zn=10,edgeUpdaterRadius:ea=10,onNodesChange:Ae,onEdgesChange:Ne,noDragClassName:ye="nodrag",noWheelClassName:Ee="nowheel",noPanClassName:_e="nopan",fitView:Be=!1,fitViewOptions:$e,connectOnClick:st=!0,attributionPosition:ze,proOptions:Ze,defaultEdgeOptions:rt,elevateNodesOnSelect:yt=!0,elevateEdgesOnSelect:It=!1,disableKeyboardA11y:Qt=!1,autoPanOnConnect:Tt=!0,autoPanOnNodeDrag:Lt=!0,connectionRadius:pr=20,isValidConnection:Vr,onError:zr,style:Wr,id:Ra,nodeDragThreshold:_i,...La},ps)=>{const Za=Ra||"1";return mt.createElement("div",{...La,style:{...Wr,...C_e},ref:ps,className:go(["react-flow",a]),"data-testid":"rf__wrapper",id:Ra},mt.createElement(kH,null,mt.createElement(g_e,{onInit:A,onMove:d,onMoveStart:h,onMoveEnd:m,onNodeClick:o,onEdgeClick:c,onNodeMouseEnter:B,onNodeMouseMove:T,onNodeMouseLeave:I,onNodeContextMenu:L,onNodeDoubleClick:k,nodeTypes:s,edgeTypes:i,connectionLineType:z,connectionLineStyle:Z,connectionLineComponent:R,connectionLineContainerStyle:K,selectionKeyCode:re,selectionOnDrag:ne,selectionMode:ue,deleteKeyCode:X,multiSelectionKeyCode:be,panActivationKeyCode:fe,zoomActivationKeyCode:Ce,onlyRenderVisibleElements:Le,selectNodesOnDrag:Ye,defaultViewport:At,translateExtent:Yt,minZoom:jt,maxZoom:Dt,preventScrolling:Rt,zoomOnScroll:De,zoomOnPinch:Oe,zoomOnDoubleClick:$t,panOnScroll:ke,panOnScrollSpeed:We,panOnScrollMode:ft,panOnDrag:zt,onPaneClick:tr,onPaneMouseEnter:Hr,onPaneMouseMove:or,onPaneMouseLeave:mn,onPaneScroll:Lr,onPaneContextMenu:En,onSelectionContextMenu:W,onSelectionStart:te,onSelectionEnd:G,onEdgeContextMenu:ar,onEdgeDoubleClick:Jt,onEdgeMouseEnter:Mr,onEdgeMouseMove:ms,onEdgeMouseLeave:Zn,onReconnect:pn??_a,onReconnectStart:on??js,onReconnectEnd:Dn??Kt,reconnectRadius:zn??ea,defaultMarkerColor:qt,noDragClassName:ye,noWheelClassName:Ee,noPanClassName:_e,elevateEdgesOnSelect:It,rfId:Za,disableKeyboardA11y:Qt,nodeOrigin:He,nodeExtent:Ut}),mt.createElement(h5e,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:p,onConnectStart:v,onConnectEnd:x,onClickConnectStart:E,onClickConnectEnd:_,nodesDraggable:Te,nodesConnectable:we,nodesFocusable:Fe,edgesFocusable:Xe,edgesUpdatable:ut,elementsSelectable:Et,elevateNodesOnSelect:yt,minZoom:jt,maxZoom:Dt,nodeExtent:Ut,onNodesChange:Ae,onEdgesChange:Ne,snapToGrid:me,snapGrid:oe,connectionMode:q,translateExtent:Yt,connectOnClick:st,defaultEdgeOptions:rt,fitView:Be,fitViewOptions:$e,onNodesDelete:U,onEdgesDelete:j,onNodeDragStart:w,onNodeDrag:y,onNodeDragStop:N,onSelectionDrag:M,onSelectionDragStart:P,onSelectionDragStop:ee,noPanClassName:_e,nodeOrigin:He,rfId:Za,autoPanOnConnect:Tt,autoPanOnNodeDrag:Lt,onError:zr,connectionRadius:pr,isValidConnection:Vr,nodeDragThreshold:_i}),mt.createElement(d5e,{onSelectionChange:F}),Vn,mt.createElement(PCe,{proOptions:Ze,position:ze}),mt.createElement(v5e,{rfId:Za,disableKeyboardA11y:Qt})))});TH.displayName="ReactFlow";function IH(e){return t=>{const[r,n]=Q.useState(t),a=Q.useCallback(s=>n(i=>e(s,i)),[]);return[r,n,a]}}const __e=IH(gH),S_e=IH(j5e);function N_e(){return mt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},mt.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function B_e(){return mt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},mt.createElement("path",{d:"M0 0h32v4.2H0z"}))}function k_e(){return mt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},mt.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function T_e(){return mt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},mt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function I_e(){return mt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},mt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ax=({children:e,className:t,...r})=>mt.createElement("button",{type:"button",className:go(["react-flow__controls-button",t]),...r},e);ax.displayName="ControlButton";const F_e=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),FH=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:i,onFitView:o,onInteractiveChange:c,className:A,children:d,position:h="bottom-left"})=>{const m=ii(),[p,v]=Q.useState(!1),{isInteractive:x,minZoomReached:E,maxZoomReached:_}=Da(F_e,ro),{zoomIn:B,zoomOut:T,fitView:I}=SE();if(Q.useEffect(()=>{v(!0)},[]),!p)return null;const L=()=>{B(),s==null||s()},k=()=>{T(),i==null||i()},w=()=>{I(a),o==null||o()},y=()=>{m.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)};return mt.createElement(H9,{className:go(["react-flow__controls",A]),position:h,style:e,"data-testid":"rf__controls"},t&&mt.createElement(mt.Fragment,null,mt.createElement(ax,{onClick:L,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:_},mt.createElement(N_e,null)),mt.createElement(ax,{onClick:k,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:E},mt.createElement(B_e,null))),r&&mt.createElement(ax,{className:"react-flow__controls-fitview",onClick:w,title:"fit view","aria-label":"fit view"},mt.createElement(k_e,null)),n&&mt.createElement(ax,{className:"react-flow__controls-interactive",onClick:y,title:"toggle interactivity","aria-label":"toggle interactivity"},x?mt.createElement(I_e,null):mt.createElement(T_e,null)),d)};FH.displayName="Controls";var j_e=Q.memo(FH),zc;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(zc||(zc={}));function D_e({color:e,dimensions:t,lineWidth:r}){return mt.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function R_e({color:e,radius:t}){return mt.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const L_e={[zc.Dots]:"#91919a",[zc.Lines]:"#eee",[zc.Cross]:"#e2e2e2"},O_e={[zc.Dots]:1,[zc.Lines]:1,[zc.Cross]:6},U_e=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function jH({id:e,variant:t=zc.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:i,style:o,className:c}){const A=Q.useRef(null),{transform:d,patternId:h}=Da(U_e,ro),m=i||L_e[t],p=n||O_e[t],v=t===zc.Dots,x=t===zc.Cross,E=Array.isArray(r)?r:[r,r],_=[E[0]*d[2]||1,E[1]*d[2]||1],B=p*d[2],T=x?[B,B]:_,I=v?[B/s,B/s]:[T[0]/s,T[1]/s];return mt.createElement("svg",{className:go(["react-flow__background",c]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:A,"data-testid":"rf__background"},mt.createElement("pattern",{id:h+e,x:d[0]%_[0],y:d[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${I[0]},-${I[1]})`},v?mt.createElement(R_e,{color:m,radius:B/s}):mt.createElement(D_e,{dimensions:T,color:m,lineWidth:a})),mt.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+e})`}))}jH.displayName="Background";var P_e=Q.memo(jH);function M_e(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const Q_e=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function If(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let mm=null;function DH(e={}){return mm||(e.includeStyleProperties?(mm=e.includeStyleProperties,mm):(mm=If(window.getComputedStyle(document.documentElement)),mm))}function sy(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function H_e(e){const t=sy(e,"border-left-width"),r=sy(e,"border-right-width");return e.clientWidth+t+r}function V_e(e){const t=sy(e,"border-top-width"),r=sy(e,"border-bottom-width");return e.clientHeight+t+r}function RH(e,t={}){const r=t.width||H_e(e),n=t.height||V_e(e);return{width:r,height:n}}function z_e(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const ol=16384;function G_e(e){(e.width>ol||e.height>ol)&&(e.width>ol&&e.height>ol?e.width>e.height?(e.height*=ol/e.width,e.width=ol):(e.width*=ol/e.height,e.height=ol):e.width>ol?(e.height*=ol/e.width,e.width=ol):(e.width*=ol/e.height,e.height=ol))}function iy(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function K_e(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function q_e(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(e),K_e(a)}const Mo=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||Mo(r,t)};function $_e(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function W_e(e,t){return DH(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function X_e(e,t,r,n){const a=`.${e}:${t}`,s=r.cssText?$_e(r):W_e(r,n);return document.createTextNode(`${a}{${s}}`)}function YR(e,t,r,n){const a=window.getComputedStyle(e,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const i=Q_e();try{t.className=`${t.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(X_e(i,r,a,n)),t.appendChild(o)}function Y_e(e,t,r){YR(e,t,":before",r),YR(e,t,":after",r)}const JR="application/font-woff",ZR="image/jpeg",J_e={woff:JR,woff2:JR,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:ZR,jpeg:ZR,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Z_e(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function S3(e){const t=Z_e(e).toLowerCase();return J_e[t]||""}function e4e(e){return e.split(/,/)[1]}function IS(e){return e.search(/^(data:)/)!==-1}function t4e(e,t){return`data:${t};base64,${e}`}async function LH(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{s(r({res:n,result:o.result}))}catch(c){i(c)}},o.readAsDataURL(a)})}const k_={};function r4e(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function N3(e,t,r){const n=r4e(e,t,r.includeQueryParams);if(k_[n]!=null)return k_[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const s=await LH(e,r.fetchRequestInit,({res:i,result:o})=>(t||(t=i.headers.get("Content-Type")||""),e4e(o)));a=t4e(s,t)}catch(s){a=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;s&&(i=typeof s=="string"?s:s.message),i&&console.warn(i)}return k_[n]=a,a}async function n4e(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):iy(t)}async function a4e(e,t){if(e.currentSrc){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,i==null||i.drawImage(e,0,0,s.width,s.height);const o=s.toDataURL();return iy(o)}const r=e.poster,n=S3(r),a=await N3(r,n,t);return iy(a)}async function s4e(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await NE(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function i4e(e,t){return Mo(e,HTMLCanvasElement)?n4e(e):Mo(e,HTMLVideoElement)?a4e(e,t):Mo(e,HTMLIFrameElement)?s4e(e,t):e.cloneNode(OH(e))}const o4e=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",OH=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function l4e(e,t,r){var n,a;if(OH(t))return t;let s=[];return o4e(e)&&e.assignedNodes?s=If(e.assignedNodes()):Mo(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?s=If(e.contentDocument.body.childNodes):s=If(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),s.length===0||Mo(e,HTMLVideoElement)||await s.reduce((i,o)=>i.then(()=>NE(o,r)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function c4e(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):DH(r).forEach(s=>{let i=a.getPropertyValue(s);s==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),Mo(e,HTMLIFrameElement)&&s==="display"&&i==="inline"&&(i="block"),s==="d"&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),n.setProperty(s,i,a.getPropertyPriority(s))})}function u4e(e,t){Mo(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Mo(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function A4e(e,t){if(Mo(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function d4e(e,t,r){return Mo(t,Element)&&(c4e(e,t,r),Y_e(e,t,r),u4e(e,t),A4e(e,t)),t}async function f4e(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let s=0;s<r.length;s++){const o=r[s].getAttribute("xlink:href");if(o){const c=e.querySelector(o),A=document.querySelector(o);!c&&A&&!n[o]&&(n[o]=await NE(A,t,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",i=document.createElementNS(s,"svg");i.setAttribute("xmlns",s),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(s,"defs");i.appendChild(o);for(let c=0;c<a.length;c++)o.appendChild(a[c]);e.appendChild(i)}return e}async function NE(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>i4e(n,t)).then(n=>l4e(e,n,t)).then(n=>d4e(e,n,t)).then(n=>f4e(n,t))}const UH=/url\((['"]?)([^'"]+?)\1\)/g,h4e=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,m4e=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function p4e(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function g4e(e){const t=[];return e.replace(UH,(r,n,a)=>(t.push(a),r)),t.filter(r=>!IS(r))}async function x4e(e,t,r,n,a){try{const s=r?M_e(t,r):t,i=S3(t);let o;return a||(o=await N3(s,i,n)),e.replace(p4e(t),`$1${o}$3`)}catch{}return e}function v4e(e,{preferredFontFormat:t}){return t?e.replace(m4e,r=>{for(;;){const[n,,a]=h4e.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function PH(e){return e.search(UH)!==-1}async function MH(e,t,r){if(!PH(e))return e;const n=v4e(e,r);return g4e(n).reduce((s,i)=>s.then(o=>x4e(o,i,t,r)),Promise.resolve(n))}async function pm(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const s=await MH(a,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function b4e(e,t){await pm("background",e,t)||await pm("background-image",e,t),await pm("mask",e,t)||await pm("-webkit-mask",e,t)||await pm("mask-image",e,t)||await pm("-webkit-mask-image",e,t)}async function w4e(e,t){const r=Mo(e,HTMLImageElement);if(!(r&&!IS(e.src))&&!(Mo(e,SVGImageElement)&&!IS(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await N3(n,S3(n),t);await new Promise((s,i)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...c)=>{try{s(t.onImageErrorHandler(...c))}catch(A){i(A)}}:i;const o=e;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function y4e(e,t){const n=If(e.childNodes).map(a=>QH(a,t));await Promise.all(n).then(()=>e)}async function QH(e,t){Mo(e,Element)&&(await b4e(e,t),await w4e(e,t),await y4e(e,t))}function E4e(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const e8={};async function t8(e){let t=e8[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},e8[e]=t,t}async function r8(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,e.url).href),LH(o,t.fetchRequestInit,({result:c})=>(r=r.replace(i,`url(${c})`),[i,c]))});return Promise.all(s).then(()=>r)}function n8(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=a.exec(n);if(c===null)break;t.push(c[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let c=s.exec(n);if(c===null){if(c=o.exec(n),c===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;t.push(c[0])}return t}async function C4e(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{If(a.cssRules||[]).forEach((s,i)=>{if(s.type===CSSRule.IMPORT_RULE){let o=i+1;const c=s.href,A=t8(c).then(d=>r8(d,t)).then(d=>n8(d).forEach(h=>{try{a.insertRule(h,h.startsWith("@import")?o+=1:a.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:h,error:m})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(A)}})}catch(s){const i=e.find(o=>o.href==null)||document.styleSheets[0];a.href!=null&&n.push(t8(a.href).then(o=>r8(o,t)).then(o=>n8(o).forEach(c=>{i.insertRule(c,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{If(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function _4e(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>PH(t.style.getPropertyValue("src")))}async function S4e(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=If(e.ownerDocument.styleSheets),n=await C4e(r,t);return _4e(n)}function HH(e){return e.trim().replace(/["']/g,"")}function N4e(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{t.add(HH(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function B4e(e,t){const r=await S4e(e,t),n=N4e(e);return(await Promise.all(r.filter(s=>n.has(HH(s.style.fontFamily))).map(s=>{const i=s.parentStyleSheet?s.parentStyleSheet.href:null;return MH(s.cssText,i,t)}))).join(`
`)}async function k4e(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await B4e(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function T4e(e,t={}){const{width:r,height:n}=RH(e,t),a=await NE(e,t,!0);return await k4e(a,t),await QH(a,t),E4e(a,t),await q_e(a,r,n)}async function I4e(e,t={}){const{width:r,height:n}=RH(e,t),a=await T4e(e,t),s=await iy(a),i=document.createElement("canvas"),o=i.getContext("2d"),c=t.pixelRatio||z_e(),A=t.canvasWidth||r,d=t.canvasHeight||n;return i.width=A*c,i.height=d*c,t.skipAutoScale||G_e(i),i.style.width=`${A}`,i.style.height=`${d}`,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(s,0,0,i.width,i.height),i}async function BE(e,t={}){return(await I4e(e,t)).toDataURL()}const VH="recursos_crucigramas",kE="recursos_lineas_de_tiempo",TE="recursos_mapas_mentales",zH="recursos_sopas_de_letras",IE=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,createdAt:((s=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.createdAt}},F4e=e=>{const t=nr(Ft(kt,VH),en("fechaCreacion","desc"));return br(t,r=>{const n=r.docs.map(a=>IE(a));e(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},j4e=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:Ar.fromDate(new Date)};return(await ha(Ft(kt,VH),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},D4e=e=>{const t=nr(Ft(kt,kE),en("createdAt","desc"));return br(t,r=>{const n=r.docs.map(a=>IE(a));e(n)},r=>{console.error("Error al suscribirse a las líneas de tiempo:",r),e([])})},R4e=async(e,t)=>{try{const{id:r,...n}=e,a=vr(kt,kE,r);await no(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:Ar.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la línea de tiempo:",r),new Error("No se pudo guardar la línea de tiempo.")}},L4e=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:Ar.fromDate(new Date)};return(await ha(Ft(kt,kE),r)).id}catch(r){throw console.error("Error al crear la línea de tiempo:",r),new Error("No se pudo crear la línea de tiempo.")}},O4e=async e=>{try{const t=vr(kt,kE,e);await zs(t)}catch(t){throw console.error("Error al eliminar la línea de tiempo:",t),new Error("No se pudo eliminar la línea de tiempo.")}},U4e=e=>{const t=nr(Ft(kt,TE),en("createdAt","desc"));return br(t,r=>{const n=r.docs.map(a=>IE(a));e(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},P4e=async(e,t)=>{try{const{id:r,...n}=e,a=vr(kt,TE,r);await no(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:Ar.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},M4e=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:Ar.fromDate(new Date)};return(await ha(Ft(kt,TE),r)).id}catch(r){throw console.error("Error al crear el mapa mental:",r),new Error("No se pudo crear el mapa mental.")}},Q4e=async e=>{try{const t=vr(kt,TE,e);await zs(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},H4e=e=>{const t=nr(Ft(kt,zH),en("createdAt","desc"));return br(t,r=>{const n=r.docs.map(a=>IE(a));e(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},V4e=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:Ar.fromDate(new Date)};return(await ha(Ft(kt,zH),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},z4e=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),G4e=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),K4e=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),q4e=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Práctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return l.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[l.jsx(bp,{type:"target",position:fr.Left,className:"w-2 h-2 !bg-slate-400"}),l.jsx("span",{className:"text-xl",children:e.icon||"🧠"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&l.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),l.jsx(bp,{type:"source",position:fr.Right,className:"w-2 h-2 !bg-slate-400"})]})},FS=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,n)=>r+FS(n,t),0),jS=(e,t="tree")=>{const r=[],n=[];if(t==="tree"){const i=(o,c,A)=>{r.push({id:o.id,position:{x:c*280,y:A},data:{label:o.label,icon:o.icon,type:o.type},type:"custom"});const d=FS(o,100);let h=A-d/2+100/2;(o.children||[]).forEach(m=>{const p=FS(m,100),v=h+p/2-100/2;n.push({id:`e-${o.id}-${m.id}`,source:o.id,target:m.id,type:"smoothstep",animated:!0}),i(m,c+1,v),h+=p})};i(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const i=300,o=500;(e.children||[]).forEach((c,A)=>{const d=A/e.children.length*2*Math.PI;r.push({id:c.id,position:{x:i*Math.cos(d),y:i*Math.sin(d)},data:{label:c.label,icon:c.icon,type:c.type},type:"custom"}),n.push({id:`e-${e.id}-${c.id}`,source:e.id,target:c.id,type:"smoothstep"}),(c.children||[]).forEach((h,m)=>{const p=d+(m-(c.children.length-1)/2)*.25;r.push({id:h.id,position:{x:o*Math.cos(p),y:o*Math.sin(p)},data:{label:h.label,icon:h.icon,type:h.type},type:"custom"}),n.push({id:`e-${c.id}-${h.id}`,source:c.id,target:h.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},GH=({node:e,onUpdate:t,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return l.jsxs("div",{className:`pl-4 ${a>0?"border-l "+i[a-1%i.length]:""}`,children:[l.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"text",value:e.label,onChange:o=>t(e.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),l.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),a>0&&l.jsx("button",{onClick:()=>n(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(e.children||[]).map(o=>l.jsx(GH,{node:o,onUpdate:t,onAddChild:r,onDelete:n,level:a+1},o.id))]})},$4e={custom:q4e},W4e=({mapData:e,onBack:t,onSave:r})=>{const[n,a]=Q.useState(e.treeData),[s,i]=Q.useState("tree"),[o,c]=Q.useState(!1),[A,d,h]=__e([]),[m,p,v]=S_e([]),{fitView:x}=SE();Q.useEffect(()=>{const{nodes:L,edges:k}=jS(n,s);d(L),p(k),setTimeout(()=>x({duration:300}),50)},[n,s,d,p,x]);const E=(L,k)=>{const w=JSON.parse(JSON.stringify(n)),y=N=>N.id===L?(N.label=k,!0):(N.children||[]).some(y);y(w),a(w)},_=L=>{const k=JSON.parse(JSON.stringify(n)),w=y=>y.id===L?(y.children||(y.children=[]),y.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(y.children||[]).some(w);w(k),a(k)},B=L=>{const k=JSON.parse(JSON.stringify(n)),w=y=>{const N=(y.children||[]).findIndex(U=>U.id===L);return N!==-1?(y.children.splice(N,1),!0):(y.children||[]).some(w)};w(k),a(k)},T=()=>{c(!0);const{nodes:L,edges:k}=jS(n,s);r({...e,treeData:n,nodes:L,edges:k}),setTimeout(()=>c(!1),1e3)},I=async L=>{const k=document.querySelector(".react-flow");k&&BE(k,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(w=>{{const y=document.createElement("a");y.download=`${e.tema}.png`,y.href=w,y.click()}}).catch(w=>console.error("oops, something went wrong!",w))};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),l.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:l.jsxs(TH,{nodes:A,edges:m,onNodesChange:h,onEdgesChange:v,fitView:!0,nodeTypes:$4e,children:[l.jsx(j_e,{}),l.jsx(P_e,{})]})}),l.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),l.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[l.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[l.jsx(G4e,{})," Vista en árbol"]}),l.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[l.jsx(K4e,{})," Vista central"]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:l.jsx(GH,{node:n,onUpdate:E,onAddChild:_,onDelete:B})}),l.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>I(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),l.jsx("button",{onClick:T,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},X4e=({onBack:e,currentUser:t})=>{const[r,n]=Q.useState("list"),[a,s]=Q.useState([]),[i,o]=Q.useState(null),[c,A]=Q.useState(!1),[d,h]=Q.useState(!0),[m,p]=Q.useState(""),[v,x]=Q.useState(""),[E,_]=Q.useState("");Q.useEffect(()=>{h(!0);const w=U4e(y=>{s(y),h(!1)});return()=>w()},[]);const B=async w=>{if(w.preventDefault(),!m.trim()){alert("El tema es obligatorio.");return}A(!0);const y="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",N=`
            Basado en el tema central "${m}", y considerando el contenido adicional "${E}", genera una estructura jerárquica para un mapa mental con al menos 3 niveles de profundidad.
            
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            
            La estructura del JSON debe ser un objeto raíz con las siguientes claves:
            - "label": El tema central ("${m}").
            - "icon": Un emoji que represente el tema.
            - "type": La categoría, que para el nodo raíz debe ser "Concepto Clave".
            - "children": Un array de 2 a 4 nodos hijos.

            Cada nodo hijo (y sus descendientes) debe tener esta misma estructura:
            - "label": El texto del subtema.
            - "icon": Un emoji representativo.
            - "type": Una categoría descriptiva (ej: "Concepto Clave", "Ejemplo Práctico", "Dato Interesante", "Pregunta Abierta").
            - "children": Un array de nodos hijos, o un array vacío si es un nodo final.
        `;try{const ee=(await(await new Is(y).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(N)).response).text().replace(/^```json\s*|```\s*$/g,""),W=JSON.parse(ee),te=K=>({id:crypto.randomUUID(),label:K.label||"Sin etiqueta",icon:K.icon||"🧠",type:K.type||"default",children:(K.children||[]).map(te)}),G=te(W),{nodes:q,edges:z}=jS(G),Z={tema:m,nivel:v,treeData:G,nodes:q,edges:z},R=await M4e(Z,t);o({...Z,id:R,createdAt:new Date().toISOString()}),n("editor")}catch(U){console.error("AI Generation Error:",U),alert("Hubo un error al generar el mapa mental. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{A(!1)}},T=async w=>{try{await P4e(w,t)}catch(y){console.error("Error saving mind map:",y),alert("No se pudo guardar el mapa mental.")}},I=w=>{o(w),n("editor")},L=async w=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await Q4e(w)}catch(y){console.error("Error deleting mind map:",y),alert("No se pudo eliminar el mapa mental.")}},k=()=>{switch(r){case"editor":return i?l.jsx(_3,{children:l.jsx(W4e,{mapData:i,onBack:()=>n("list"),onSave:T})}):null;case"config":return l.jsxs("div",{className:"max-w-2xl mx-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),l.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),l.jsxs("form",{onSubmit:B,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"tema",value:m,onChange:w=>p(w.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),l.jsx("textarea",{id:"contenido",value:E,onChange:w=>_(w.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:c?l.jsx(z4e,{}):"Generar Mapa con IA"})})]})]});case"list":default:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),l.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(w=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[l.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:w.tema}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(w.createdAt).toLocaleDateString("es-CL")]}),l.jsxs("div",{className:"mt-4 flex gap-2",children:[l.jsx("button",{onClick:()=>I(w),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),l.jsx("button",{onClick:()=>L(w.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},w.id)):l.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return d?l.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("span",{className:"text-4xl",children:"🧠"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),k()]})},Y4e=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),J4e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Z4e=({onBack:e,currentUser:t})=>{const[r,n]=Q.useState([]),[a,s]=Q.useState("Media"),[i,o]=Q.useState(10),[c,A]=Q.useState(!1),[d,h]=Q.useState(Array(10).fill("")),[m,p]=Q.useState(""),[v,x]=Q.useState(null),[E,_]=Q.useState({ai:!1,puzzle:!1,data:!0}),B=Q.useRef(null);Q.useEffect(()=>{_(j=>({...j,data:!0}));const U=H4e(j=>{n(j),_(F=>({...F,data:!1}))});return()=>U()},[]),Q.useEffect(()=>{h(U=>{const j=Array(i).fill("");for(let F=0;F<Math.min(U.length,i);F++)j[F]=U[F];return j})},[i]);const T=(U,j)=>{const F=[...d];F[U]=j,h(F)},I=async()=>{if(m.trim()){_(U=>({...U,ai:!0}));try{const U="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",F=new Is(U).getGenerativeModel({model:"gemini-1.5-flash-latest"}),P=`
                Genera una lista de ${i} palabras clave en español, estrictamente relacionadas con el tema "${m}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${i} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,te=(await(await F.generateContent(P)).response).text().replace(/^```json\s*|```\s*$/g,""),G=JSON.parse(te);if(!G.palabras||!Array.isArray(G.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const z=[...G.palabras.map(Z=>Z.toUpperCase().replace(/[^A-ZÑ]/g,"")).slice(0,i)];for(;z.length<i;)z.push("");h(z)}catch(U){console.error("Error generating words with AI:",U),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{_(U=>({...U,ai:!1}))}}},L=(U,j,F,P,M,ee)=>{for(let W=0;W<U.length;W++){const te=F+W*M.y,G=P+W*M.x;if(te<0||te>=ee||G<0||G>=ee||j[te][G]&&j[te][G]!==U[W])return!1}return!0},k=(U,j,F,P,M)=>{for(let ee=0;ee<U.length;ee++)j[F+ee*M.y][P+ee*M.x]=U[ee]},w=async()=>{_(te=>({...te,puzzle:!0})),x(null),await new Promise(te=>setTimeout(te,100));const U=d.map(te=>te.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(U.length===0){alert("Por favor, ingrese al menos una palabra válida."),_(te=>({...te,puzzle:!1}));return}const j=Math.max(...U.map(te=>te.length));let F=Math.max(j,U.length)+2;a==="Media"&&(F+=3),a==="Difícil"&&(F+=5),F=Math.min(Math.max(F,10),25);const P=Array(F).fill(null).map(()=>Array(F).fill(null)),M=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fácil"&&M.push({x:1,y:-1}),a==="Difícil"&&M.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const te of U.sort((G,q)=>q.length-G.length)){let G=!1;for(let q=0;q<100;q++){const z=M[Math.floor(Math.random()*M.length)],Z=Math.floor(Math.random()*F),R=Math.floor(Math.random()*F);if(L(te,P,Z,R,z,F)){k(te,P,Z,R,z),G=!0;break}}G||console.warn(`No se pudo colocar la palabra: ${te}`)}const ee=P.map(te=>te.map(G=>G||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),W={tema:m||"Personalizado",grid:ee.map(te=>te.join("")),words:U.sort()};try{const te=await V4e(W,t);x({...W,id:te,createdAt:new Date().toISOString()})}catch(te){console.error("Error saving puzzle:",te),alert("No se pudo guardar la sopa de letras.")}finally{_(te=>({...te,puzzle:!1}))}},y=()=>{B.current&&BE(B.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(U=>{const j=document.createElement("a");j.download="sopa-de-letras.png",j.href=U,j.click()}).catch(U=>{console.error("oops, something went wrong!",U),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},N=()=>{var F;if(!v)return null;const U=((F=v.grid[0])==null?void 0:F.length)||1,j=v.grid.join("").split("");return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{ref:B,className:"p-6 bg-white",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[l.jsx("div",{className:"md:col-span-2",children:l.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${U}, minmax(0, 1fr))`},children:j.map((P,M)=>l.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:P},M))})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),l.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:v.words.map(P=>l.jsx("li",{children:P},P))})]})]})}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),l.jsx("button",{onClick:y,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return E.data?l.jsx("div",{className:"text-center py-10",children:"Cargando..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"🅰️"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!v&&l.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),l.jsxs("select",{value:a,onChange:U=>s(U.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:"Fácil"}),l.jsx("option",{children:"Media"}),l.jsx("option",{children:"Difícil"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(U=>l.jsx("button",{onClick:()=>{o(U),A(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!c&&i===U?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:U},U)),l.jsx("button",{onClick:()=>A(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${c?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),c&&l.jsx("input",{type:"number",value:i,onChange:U=>o(parseInt(U.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{id:"ai-theme",type:"text",value:m,onChange:U=>p(U.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:I,disabled:E.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:E.ai?l.jsx(Y4e,{}):l.jsxs(l.Fragment,{children:[l.jsx(J4e,{}),l.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((U,j)=>l.jsx("input",{type:"text",value:U,onChange:F=>T(j,F.target.value),placeholder:`Palabra ${j+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},j))})]}),l.jsx("div",{className:"text-right pt-4",children:l.jsx("button",{onClick:w,disabled:E.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:E.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),v&&N()]})},eSe=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),tSe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),rSe=({timeline:e,onSave:t,onBack:r})=>{const[n,a]=Q.useState(e),[s,i]=Q.useState(null),o=Q.useRef(null),c=(p,v,x)=>{a(E=>({...E,events:E.events.map(_=>_.id===p?{..._,[v]:x}:_)}))},A=()=>{const p={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},v=[...n.events,p].sort((x,E)=>parseInt(x.date)-parseInt(E.date));a(x=>({...x,events:v}))},d=p=>{a(v=>({...v,events:v.events.filter(x=>x.id!==p)}))},h=async p=>{if(!p.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}i(p.id);const v="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",x=`
            Para una línea de tiempo sobre "${n.tema}", toma la siguiente idea para un hito y mejórala.
            Idea del usuario: "${p.description}"

            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional, con tres claves:
            1. "date": El año o fecha más precisa y relevante para esta idea.
            2. "description": Una descripción concisa (máximo 15 palabras) para la línea de tiempo.
            3. "icon": Un único emoji que represente el hito.
        `;try{const L=(await(await new Is(v).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(x)).response).text().replace(/^```json\s*|```\s*$/g,""),k=JSON.parse(L);a(w=>({...w,events:w.events.map(y=>y.id===p.id?{...y,date:k.date,description:k.description,icon:k.icon}:y).sort((y,N)=>parseInt(y.date)-parseInt(N.date))}))}catch(E){console.error("Error al generar descripción del hito:",E),alert("No se pudo autocompletar el hito.")}finally{i(null)}},m=()=>{o.current&&BE(o.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(p=>{const v=document.createElement("a");v.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,v.href=p,v.click()}).catch(p=>{console.error("Error al generar la imagen:",p),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),l.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:l.jsxs("div",{ref:o,className:"relative p-10",children:[l.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),l.jsx("div",{className:"relative",children:n.events.sort((p,v)=>parseInt(p.date)-parseInt(v.date)).map((p,v)=>{const x=v%2===0;return l.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[l.jsx("div",{className:"w-1/2",children:x&&l.jsx("div",{className:"text-right pr-8",children:l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[l.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})}),l.jsx("div",{className:"z-10 flex-shrink-0",children:l.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),l.jsx("div",{className:"w-1/2",children:!x&&l.jsx("div",{className:"text-left pl-8",children:l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[l.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})})]},p.id)})})]})}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(p=>l.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[l.jsx("input",{type:"text",value:p.date,onChange:v=>c(p.id,"date",v.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("textarea",{value:p.description,onChange:v=>c(p.id,"description",v.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),l.jsx("button",{onClick:()=>h(p),disabled:s===p.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:s===p.id?l.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):l.jsx(tSe,{})})]}),l.jsx("button",{onClick:()=>d(p.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},p.id))}),l.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[l.jsx("button",{onClick:A,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:m,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),l.jsx("button",{onClick:()=>t(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},nSe=({onBack:e,currentUser:t})=>{const[r,n]=Q.useState("list"),[a,s]=Q.useState([]),[i,o]=Q.useState(null),[c,A]=Q.useState(!1),[d,h]=Q.useState(!0),[m,p]=Q.useState(""),[v,x]=Q.useState(""),[E,_]=Q.useState("");Q.useEffect(()=>{h(!0);const L=D4e(k=>{s(k),h(!1)});return()=>L()},[]);const B=async L=>{if(L.preventDefault(),!m.trim()){alert("El tema es obligatorio.");return}A(!0);const k="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",w=v&&E?`entre ${v} y ${E}`:v?`a partir de ${v}`:E?`hasta ${E}`:"",y=`
            Genera una línea de tiempo sobre el tema "${m}" ${w}.
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el año del hito.
            2. "description": Un string con la descripción breve del hito (máximo 15 palabras).
            3. "icon": Un string con un único emoji que represente el hito.
            Ordena los eventos cronológicamente.
        `;try{const M=(await(await new Is(k).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(y)).response).text().replace(/^```json\s*|```\s*$/g,""),ee=JSON.parse(M);if(!ee.events||!Array.isArray(ee.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const W={tema:m,fechaInicio:v,fechaFin:E,events:ee.events.map(G=>({id:crypto.randomUUID(),date:G.date||"Sin fecha",description:G.description||"Sin descripción",icon:G.icon||"🗓️"}))},te=await L4e(W,t);o({...W,id:te,createdAt:new Date().toISOString()}),n("editor")}catch(N){console.error("AI Generation Error:",N),alert("Hubo un error al generar la línea de tiempo. Por favor, revisa el formato del tema o inténtalo de nuevo.")}finally{A(!1)}},T=async L=>{try{await R4e(L,t),n("list"),o(null)}catch(k){console.error("Error saving timeline:",k),alert("No se pudo guardar la línea de tiempo.")}},I=async L=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await O4e(L)}catch(k){console.error("Error deleting timeline:",k),alert("No se pudo eliminar la línea de tiempo.")}};return r==="editor"&&i?l.jsx(rSe,{timeline:i,onSave:T,onBack:()=>n("list")}):d?l.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"🕒"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),l.jsxs("form",{onSubmit:B,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"tema",value:m,onChange:L=>p(L.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),l.jsx("input",{type:"text",id:"fechaInicio",value:v,onChange:L=>x(L.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),l.jsx("input",{type:"text",id:"fechaFin",value:E,onChange:L=>_(L.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:c?l.jsx(eSe,{}):"Generar con IA"})})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),a.length>0?a.map(L=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:L.tema}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(L.createdAt).toLocaleDateString("es-CL")]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>{o(L),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),l.jsx("button",{onClick:()=>I(L.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},L.id)):l.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},aSe=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a8=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),sSe=({onBack:e,currentUser:t})=>{const[r,n]=Q.useState([]),[a,s]=Q.useState(10),[i,o]=Q.useState(!1),[c,A]=Q.useState(Array(10).fill("")),[d,h]=Q.useState(Array(10).fill("")),[m,p]=Q.useState(""),[v,x]=Q.useState(null),[E,_]=Q.useState(!1),[B,T]=Q.useState({ai:!1,puzzle:!1,data:!0}),[I,L]=Q.useState(null),k=Q.useRef(null);Q.useEffect(()=>{T(ee=>({...ee,data:!0}));const M=F4e(ee=>{const W=ee.map(te=>{const{grid_flat:G,grid_width:q,...z}=te,Z=[];if(G&&q>0)for(let R=0;R<G.length;R+=q)Z.push(G.slice(R,R+q));return{...z,grid:Z}});n(W),T(te=>({...te,data:!1}))});return()=>M()},[]),Q.useEffect(()=>{const M=a;A(ee=>Array.from({length:M},(W,te)=>ee[te]||"")),h(ee=>Array.from({length:M},(W,te)=>ee[te]||""))},[a]);const w=(M,ee)=>{const W=[...c];W[M]=ee,A(W)},y=(M,ee)=>{const W=[...d];W[M]=ee,h(W)},N=async()=>{if(m.trim()){T(M=>({...M,ai:!0}));try{const M="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",W=new Is(M).getGenerativeModel({model:"gemini-1.5-flash-latest"}),te=`
                Genera una lista de ${a} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${m}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${a} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en mayúsculas).
                2. "clue": Un string con la pista para esa palabra.
            `;let Z=(await(await W.generateContent(te)).response).text().replace(/^```json\s*|```\s*$/g,"").trim();const R=Z.indexOf("{"),K=Z.lastIndexOf("}");R!==-1&&K!==-1&&(Z=Z.substring(R,K+1)),Z=Z.replace(/},\s*([\r\n\s]*){/g,"}__SPLIT__{"),Z.includes("__SPLIT__")&&(Z=Z.replace(/("items"\s*:\s*\[)([\s\S]*?)(\])/m,(ue,fe,be,Ce)=>{const me=be.split("__SPLIT__").map(oe=>oe.trim().replace(/,$/,""));return fe+me.join(",")+Ce})),Z=Z.replace(/,\s*]/g,"]");let X;try{X=JSON.parse(Z)}catch{console.error("Respuesta IA no es JSON válido:",Z),alert("La respuesta de la IA no es un JSON válido. Intenta de nuevo o ajusta el tema."),T(fe=>({...fe,ai:!1}));return}if(!X.items||!Array.isArray(X.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const re=X.items.map(ue=>(ue.word||"").toUpperCase().replace(/\s/g,"")),ne=X.items.map(ue=>ue.clue||"");A(Array.from({length:a},(ue,fe)=>re[fe]||"")),h(Array.from({length:a},(ue,fe)=>ne[fe]||""))}catch(M){console.error("Error generating words/clues with AI:",M),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{T(M=>({...M,ai:!1}))}}},U=async M=>{const ee=c[M];if(!ee||!ee.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}L(M);try{const W="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",G=new Is(W).getGenerativeModel({model:"gemini-1.5-flash-latest"}),q=`Para un crucigrama con el tema "${m||"general"}", genera una pista concisa y creativa para la palabra "${ee}". La respuesta debe ser un único objeto JSON válido sin texto adicional, con una sola clave: "clue".`,K=(await(await G.generateContent(q)).response).text().replace(/^```json\s*|```\s*$/g,""),X=JSON.parse(K);X.clue&&y(M,X.clue)}catch(W){console.error("Error generating clue with AI:",W),alert("No se pudo generar la pista.")}finally{L(null)}},j=Q.useCallback(()=>{try{const M=c.map((Fe,He)=>({word:Fe.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:d[He]})).filter(Fe=>Fe.word.length>0);if(M.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;M.sort((Fe,He)=>He.word.length-Fe.word.length);const ee=M[0].word.length,W=Math.max(ee,M.length)*2;let te=Array.from({length:W},()=>Array(W).fill(null));const G=[],q=M.shift(),z=Math.floor(W/2),Z=Math.floor((W-q.word.length)/2);for(let Fe=0;Fe<q.word.length;Fe++)te[z][Z+Fe]=q.word[Fe];G.push({word:q.word,clue:q.clue,direction:"across",row:z,col:Z});for(const Fe of M){let He={score:-1,row:-1,col:-1,direction:"across"};for(const Xe of G)for(let ut=0;ut<Xe.word.length;ut++)for(let Et=0;Et<Fe.word.length;Et++)if(Xe.word[ut]===Fe.word[Et]){let At=0,jt,Dt,Yt;Xe.direction==="across"?(Yt="down",jt=Xe.row-Et,Dt=Xe.col+ut):(Yt="across",jt=Xe.row+ut,Dt=Xe.col-Et);let Rt=!0;for(let Ut=0;Ut<Fe.word.length;Ut++){const qt=jt+(Yt==="down"?Ut:0),De=Dt+(Yt==="across"?Ut:0);if(qt<0||qt>=W||De<0||De>=W){Rt=!1;break}const Oe=te[qt][De],ke=qt===Xe.row+(Xe.direction==="down"?ut:0)&&De===Xe.col+(Xe.direction==="across"?ut:0);if(Oe&&!ke){Rt=!1;break}if(Oe&&ke&&Oe!==Fe.word[Et]){Rt=!1;break}if(!ke){if(Yt==="across"&&(qt>0&&te[qt-1][De]||qt<W-1&&te[qt+1][De])){Rt=!1;break}if(Yt==="down"&&(De>0&&te[qt][De-1]||De<W-1&&te[qt][De+1])){Rt=!1;break}}Oe&&At++}Rt&&At>He.score&&(He={score:At,row:jt,col:Dt,direction:Yt})}if(He.score>-1){for(let Xe=0;Xe<Fe.word.length;Xe++){const ut=He.row+(He.direction==="down"?Xe:0),Et=He.col+(He.direction==="across"?Xe:0);te[ut][Et]=Fe.word[Xe]}G.push({word:Fe.word,clue:Fe.clue,direction:He.direction,row:He.row,col:He.col})}}let R=W,K=-1,X=W,re=-1;G.forEach(Fe=>{R=Math.min(R,Fe.row),K=Math.max(K,Fe.row+(Fe.direction==="down"?Fe.word.length-1:0)),X=Math.min(X,Fe.col),re=Math.max(re,Fe.col+(Fe.direction==="across"?Fe.word.length-1:0))}),K===-1&&(R=G[0].row,K=G[0].row,X=G[0].col,re=G[0].col+G[0].word.length-1);const ne=1,ue=Math.max(0,R-ne),fe=Math.min(W,K+1+ne),be=Math.max(0,X-ne),Ce=Math.min(W,re+1+ne),me=te.slice(ue,fe).map(Fe=>Fe.slice(be,Ce)),oe=G.map(Fe=>({...Fe,row:Fe.row-ue,col:Fe.col-be})).sort((Fe,He)=>Fe.row-He.row||Fe.col-He.col);let Le=1;const Ye=[],Te=new Map;oe.forEach(Fe=>{const He=`${Fe.row},${Fe.col}`;Te.has(He)||Te.set(He,Le++),Ye.push({...Fe,number:Te.get(He)})});const we=me.map(Fe=>Fe.map(He=>({char:He,number:null})));return Ye.forEach(Fe=>{const He=`${Fe.row},${Fe.col}`;we[Fe.row]&&we[Fe.row][Fe.col]!==void 0&&(we[Fe.row][Fe.col].number=Te.get(He))}),{grid:we,clues:{across:Ye.filter(Fe=>Fe.direction==="across").sort((Fe,He)=>Fe.number-He.number),down:Ye.filter(Fe=>Fe.direction==="down").sort((Fe,He)=>Fe.number-He.number)}}}catch(M){return console.error("Error generating crossword grid:",M),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[c,d]),F=async()=>{var ee;T(W=>({...W,puzzle:!0})),x(null),await new Promise(W=>setTimeout(W,100));const M=j();if(M){const W={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:m||"Personalizado",grid:M.grid,clues:M.clues},{grid:te,...G}=W,q={...G,grid_flat:te.flat().map(z=>z.char||""),grid_width:((ee=te[0])==null?void 0:ee.length)||0};try{const z=await j4e(q,t);x({...W,id:z,fechaCreacion:new Date().toISOString()})}catch(z){console.error("Error saving puzzle:",z),alert("No se pudo guardar el crucigrama en la base de datos.")}}T(W=>({...W,puzzle:!1}))},P=()=>{k.current&&(_(!1),setTimeout(()=>{BE(k.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(M=>{const ee=document.createElement("a");ee.download="crucigrama.png",ee.href=M,ee.click()}).catch(M=>console.error("Error generating image",M))},100))};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"✏️"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),v?l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{ref:k,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[l.jsx("div",{children:l.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${v.grid[0].length}, 2rem)`},children:v.grid.flat().map((M,ee)=>l.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:M.char?"white":"black"},children:[M.number&&l.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:M.number}),E&&M.char&&l.jsx("span",{children:M.char})]},ee))})}),l.jsxs("div",{className:"text-sm",children:[l.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),l.jsx("ul",{className:"space-y-1",children:v.clues.across.map(M=>l.jsxs("li",{children:[l.jsxs("strong",{children:[M.number,"."]})," ",M.clue]},`${M.word}-${M.clue}`))}),l.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),l.jsx("ul",{className:"space-y-1",children:v.clues.down.map(M=>l.jsxs("li",{children:[l.jsxs("strong",{children:[M.number,"."]})," ",M.clue]},`${M.word}-${M.clue}`))})]})]})}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:E,onChange:()=>_(!E),className:"h-5 w-5 rounded"}),l.jsx("span",{children:"Mostrar Solución"})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),l.jsx("button",{onClick:P,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):l.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(M=>l.jsx("button",{onClick:()=>{s(M),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&a===M?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:M},M)),l.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&l.jsx("input",{type:"number",value:a,onChange:M=>s(parseInt(M.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{id:"ai-theme",type:"text",value:m,onChange:M=>p(M.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:N,disabled:B.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:B.ai?l.jsx(aSe,{}):l.jsxs(l.Fragment,{children:[l.jsx(a8,{}),l.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),l.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((M,ee)=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsx("input",{type:"text",value:c[ee],onChange:W=>w(ee,W.target.value),placeholder:`Palabra ${ee+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[l.jsx("textarea",{value:d[ee],onChange:W=>y(ee,W.target.value),placeholder:`Pista ${ee+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:()=>U(ee),disabled:I===ee,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:I===ee?l.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):l.jsx(a8,{})})]})]},ee))}),l.jsx("div",{className:"text-right pt-4",children:l.jsx("button",{onClick:F,disabled:B.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:B.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},iSe=()=>{const[e,t]=Q.useState(null),[r,n]=Q.useState(!0);return Q.useEffect(()=>{const a=PL(PJ,async s=>{if(s&&s.email)try{const i=await kU(s.email);t(i)}catch(i){console.error("Error al obtener el perfil del usuario:",i),t(null)}else t(null);n(!1)});return()=>a()},[]),{currentUser:e,loading:r}},oSe=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],lSe=({recurso:e,onClick:t})=>l.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[l.jsx("div",{className:"text-6xl mb-4",children:e.icon}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),cSe=()=>{const[e,t]=Q.useState("menu"),{currentUser:r}=iSe(),n=()=>e!=="menu"&&!r?l.jsx("div",{className:"text-center p-8",children:"Cargando información de usuario..."}):e==="mapasMentales"?l.jsx(X4e,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?l.jsx(Z4e,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?l.jsx(nSe,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?l.jsx(sSe,{onBack:()=>t("menu"),currentUser:r}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:oSe.map(a=>l.jsx(lSe,{recurso:a,onClick:()=>t(a.id)},a.id))})]});return l.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},uSe="evaluaciones_formativas",ASe="calificaciones_formativas",KH="trabajos_grupales_formativos",qH=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},dSe=(e,t)=>{const r=nr(Ft(kt,uSe),Mn("curso","==",e));return br(r,n=>{t(n.docs.map(a=>qH(a)))},n=>{console.error("Error subscribing to student evaluations:",n),t([])})},fSe=e=>{const t=nr(Ft(kt,ASe));return br(t,r=>{const n={};r.forEach(a=>{n[a.id]=a.data()}),e(n)},r=>{console.error("Error subscribing to grades:",r),e({})})},hSe=(e,t)=>{const r=nr(Ft(kt,KH),Mn("curso","==",e));return br(r,n=>{t(n.docs.map(a=>qH(a)))},n=>{console.error("Error subscribing to group projects:",n),t([])})},mSe=async e=>{try{const{id:t,...r}=e,n=vr(kt,KH,t);await no(n,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},pSe=({currentUser:e})=>{const[t,r]=Q.useState([]),[n,a]=Q.useState({}),[s,i]=Q.useState([]),[o,c]=Q.useState(!0),[A,d]=Q.useState(null),[h,m]=Q.useState(!1),[p,v]=Q.useState(null),x=Q.useRef(null);Q.useEffect(()=>{if(!e.curso){c(!1);return}c(!0);const I=dSe(e.curso,r),L=fSe(a),k=hSe(e.curso,w=>{i(w),c(!1)});return()=>{I(),L(),k()}},[e.curso]);const E=Q.useMemo(()=>{if(!e.curso)return[];const L=t.filter(k=>k.curso===e.curso).reduce((k,w)=>((k[w.asignatura]=k[w.asignatura]||[]).push(w),k),{});return Object.entries(L).map(([k,w])=>{let y=0,N=0;const U=w.map(F=>{var ee;const P=(ee=n[F.id])==null?void 0:ee[e.nombreCompleto];let M="No Trabajado";return P==="trabajado"?(y+=7,N++,M="Trabajado"):P==="no trabajado"&&(y+=2,N++,M="No Trabajado"),{id:F.id,nombreActividad:F.nombreActividad,fecha:F.fecha,estado:M}}).filter(F=>{var P;return(P=n[F.id])==null?void 0:P[e.nombreCompleto]}),j=N>0?(y/N).toFixed(1):"N/A";return{asignatura:k,promedio:j,actividades:U.sort((F,P)=>new Date(P.fecha).getTime()-new Date(F.fecha).getTime())}}).filter(k=>k.actividades.length>0).sort((k,w)=>k.asignatura.localeCompare(w.asignatura))},[t,n,e]);Q.useEffect(()=>{if(E.reduce((N,U)=>N+U.actividades.length,0)===0){d(null);return}const L=E.reduce((N,U)=>{const j=parseFloat(U.promedio);return isNaN(j)?N:N+j},0),k=E.length>0?L/E.length:0,w=sb.find(N=>k>=N.promedioMin&&k<=N.promedioMax)||null,y=sb.filter(N=>k>=N.promedioMin);if(d({puntajeTotal:0,promedio:k,rangoActual:w,insigniasGanadas:y}),x.current!==null){const N=sb.find(U=>x.current>=U.promedioMin&&x.current<=U.promedioMax)||null;w&&(!N||w.nombre!==N.nombre)&&v(w)}x.current=k},[E]);const _=Q.useMemo(()=>e.curso?s.filter(I=>I.curso===e.curso).map(I=>{const L=I.grupos.find(k=>k.integrantes.some(w=>w.nombre===e.nombreCompleto));return L?{...I,miGrupo:L}:null}).filter(I=>I!==null).sort((I,L)=>new Date(L.fechaPresentacion).getTime()-new Date(I.fechaPresentacion).getTime()):[],[s,e]),B=async(I,L)=>{const k=s.find(y=>y.id===I);if(!k)return;const w={...k,grupos:k.grupos.map(y=>y.integrantes.some(U=>U.nombre===e.nombreCompleto)?{...y,integrantes:y.integrantes.map(U=>U.nombre===e.nombreCompleto?{...U,rol:L||void 0}:U)}:y)};try{await mSe(w)}catch(y){console.error("Error updating role:",y),alert("No se pudo actualizar el rol.")}},T=I=>{const L=parseFloat(I);return isNaN(L)?"bg-slate-400":L<4?"bg-red-500":L<5.5?"bg-yellow-500":"bg-green-500"};return o?l.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[p&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>v(null),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:I=>I.stopPropagation(),children:[l.jsx("div",{className:"text-8xl animate-bounce",children:p.emoji}),l.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),l.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:p.nombre}),l.jsx("p",{className:"text-slate-600 mt-4",children:p.mensaje}),l.jsx("button",{onClick:()=>v(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),h&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>m(!1),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:I=>I.stopPropagation(),children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),l.jsx("div",{className:"overflow-y-auto space-y-3",children:sb.map(I=>{const L=A==null?void 0:A.insigniasGanadas.some(k=>k.nombre===I.nombre);return l.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${L?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[l.jsx("div",{className:"text-5xl",children:I.emoji}),l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold ${L?"text-amber-700":"text-slate-600"}`,children:I.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",I.promedioMin," y ",I.promedioMax]})]})]},I.nombre)})})]})}),l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),A&&A.rangoActual&&l.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),l.jsx("h2",{className:"text-3xl font-bold",children:A.rangoActual.nombre}),l.jsx("button",{onClick:()=>m(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-7xl",children:A.rangoActual.emoji}),l.jsx("p",{className:"font-bold text-2xl mt-2",children:A.promedio.toFixed(1)}),l.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),E.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(I=>l.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800",children:I.asignatura}),l.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),l.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${T(I.promedio)}`,children:I.promedio})]}),l.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),I.actividades.map(L=>l.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-700",children:L.nombreActividad}),l.jsx("p",{className:"text-xs text-slate-500",children:new Date(L.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),l.jsx("span",{className:`font-semibold ${L.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:L.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},L.id))]})]},I.asignatura))}):l.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[l.jsx("span",{className:"text-5xl",children:"📊"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),l.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),_.length>0&&l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),l.jsx("div",{className:"space-y-4",children:_.map(I=>{const L=I.miGrupo.integrantes.filter(w=>w.nombre!==e.nombreCompleto&&w.rol).map(w=>w.rol),k=IU.filter(w=>!L.includes(w));return l.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[l.jsx("h3",{className:"font-bold text-slate-800",children:I.nombreActividad}),l.jsxs("p",{className:"text-sm text-slate-500",children:[I.asignatura," - Presentación: ",new Date(I.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),l.jsxs("div",{className:"mt-3 pt-3 border-t",children:[l.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",I.miGrupo.numero]}),l.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:I.miGrupo.integrantes.map(w=>l.jsxs("li",{className:"grid grid-cols-2 items-center",children:[l.jsx("span",{className:w.nombre===e.nombreCompleto?"font-bold":"",children:w.nombre}),w.nombre===e.nombreCompleto?l.jsxs("select",{value:w.rol||"",onChange:y=>B(I.id,y.target.value),className:"text-sm p-1 border rounded w-full",children:[l.jsx("option",{value:"",children:"-- Seleccionar rol --"}),w.rol&&!k.includes(w.rol)&&l.jsx("option",{value:w.rol,children:w.rol}),k.map(y=>l.jsx("option",{value:y,children:y},y))]}):l.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:w.rol||"Sin rol"})]},w.nombre))})]})]},I.id)})})]})]})},gSe="proyectos_interdisciplinarios",$H="entregas_interdisciplinarias",WH=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((s=(a=t.fechaCompletado)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaCompletado}},xSe=(e,t)=>{const r=nr(Ft(kt,gSe),Mn("cursos","array-contains",e));return br(r,n=>{const a=n.docs.map(s=>WH(s));t(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),t([])})},vSe=(e,t)=>{const r=nr(Ft(kt,$H),Mn("estudianteId","==",e));return br(r,n=>{const a=n.docs.map(s=>WH(s));t(a)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},bSe=async e=>{try{const{id:t,...r}=e,n=vr(kt,$H,t),a={...r,fechaCompletado:Ar.fromDate(new Date(r.fechaCompletado||Date.now()))};await no(n,a,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},wSe=({currentUser:e})=>{const[t,r]=Q.useState([]),[n,a]=Q.useState([]),[s,i]=Q.useState(null),[o,c]=Q.useState(!0);Q.useEffect(()=>{if(!e.curso||!e.id){c(!1);return}c(!0);const h=xSe(e.curso,r),m=vSe(e.id,p=>{a(p),c(!1)});return()=>{h(),m()}},[e.curso,e.id]);const A=async h=>{try{await bSe(h)}catch(m){console.error("Failed to update submission:",m),alert("Hubo un error al guardar tu entrega.")}},d=({plan:h,tarea:m})=>{const p=Q.useMemo(()=>{const L=n.find(k=>k.planificacionId===h.id&&k.tareaId===m.id);return L||{id:`${h.id}_${m.id}_${e.id}`,planificacionId:h.id,tareaId:m.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[h.id,m.id,n]),[v,x]=Q.useState(!1),[E,_]=Q.useState({observaciones:p.observacionesEstudiante||"",enlace:p.enlaceUrl||""}),B=L=>{var w;const k=(w=L.target.files)==null?void 0:w[0];k&&(alert(`Simulación: Archivo "${k.name}" listo para subir.`),A({...p,archivoAdjunto:{nombre:k.name,url:`simulated/path/${k.name}`},fechaCompletado:new Date().toISOString()}))},T=()=>{A({...p,observacionesEstudiante:E.observaciones,enlaceUrl:E.enlace,fechaCompletado:new Date().toISOString()})},I=()=>{A({...p,completada:!p.completada,fechaCompletado:new Date().toISOString()})};return l.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("input",{type:"checkbox",checked:p.completada,onChange:I,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:`font-semibold ${p.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",m.numero,": ",m.instrucciones]}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",m.fechaEntrega]}),m.recursoUrl&&l.jsx("a",{href:m.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),l.jsx("button",{onClick:()=>x(!v),className:"text-sm font-semibold",children:v?"Ocultar":"Entregar"})]}),v&&l.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[l.jsx("textarea",{value:E.observaciones,onChange:L=>_({...E,observaciones:L.target.value}),onBlur:T,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),l.jsx("input",{type:"url",value:E.enlace,onChange:L=>_({...E,enlace:L.target.value}),onBlur:T,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),l.jsx("input",{type:"file",onChange:B,className:"text-sm"}),p.archivoAdjunto&&l.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",p.archivoAdjunto.nombre]})]}),p.feedbackProfesor&&l.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[l.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),l.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:p.feedbackProfesor})]})]})};return o?l.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(h=>{const m=h.tareas||[],v=n.filter(E=>E.planificacionId===h.id).filter(E=>E.completada).length,x=m.length>0?v/m.length*100:0;return l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[l.jsxs("button",{onClick:()=>i(s===h.id?null:h.id),className:"w-full text-left",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:h.nombreProyecto}),l.jsxs("div",{className:"mt-2 space-y-1",children:[l.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[l.jsx("span",{children:"Progreso"}),l.jsxs("span",{children:[Math.round(x),"%"]})]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:l.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${x}%`}})})]})]}),s===h.id&&l.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:m.length>0?m.map(E=>l.jsx(d,{plan:h,tarea:E},E.id)):l.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},h.id)}):l.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[l.jsx("span",{className:"text-5xl",children:"🎉"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),l.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},ySe=({data:e})=>l.jsx("div",{className:"space-y-4",children:e.map((r,n)=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),l.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),ESe=({currentUser:e})=>{const[t,r]=Q.useState([]),[n,a]=Q.useState(!1),[s,i]=Q.useState(null),[o,c]=Q.useState(null),[A,d]=Q.useState(Ax),h=Q.useCallback(async()=>{a(!0);try{const E=(await zpe(e.nombreCompleto)).sort((_,B)=>new Date(B.fecha).getTime()-new Date(_.fecha).getTime());r(E),i(null)}catch(x){console.error("Error al cargar acompañamientos desde Firestore",x),i("No se pudieron cargar tus acompañamientos desde la nube.")}finally{a(!1)}},[e.nombreCompleto]),m=Q.useCallback(async()=>{try{const x=await Gpe();x&&d(x)}catch(x){console.error("Error al cargar rúbrica personalizada",x)}},[]);Q.useEffect(()=>{h(),m()},[h,m]);const p=Q.useMemo(()=>{if(!o)return[];const x={};return A.forEach(E=>{x[E.domain]={total:0,count:0},E.criteria.forEach(_=>{const B=o.rubricaResultados[_.name];B&&(x[E.domain].total+=B,x[E.domain].count++)})}),Object.entries(x).map(([E,_])=>({label:E,value:_.count>0?_.total/_.count:0}))},[o,A]),v=x=>{const E=new ur;E.setFont("helvetica","bold"),E.setFontSize(10),E.setTextColor(100),E.text("LICEO INDUSTRIAL DE RECOLETA",E.internal.pageSize.getWidth()/2,15,{align:"center"}),E.setFont("helvetica","bold"),E.setFontSize(16),E.setTextColor(40),E.text("Informe de Acompañamiento Docente",E.internal.pageSize.getWidth()/2,25,{align:"center"}),E.setFontSize(12),E.setFont("helvetica","normal"),ic(E,{startY:35,body:[["Docente:",x.docente],["Fecha:",new Date(x.fecha).toLocaleDateString("es-CL")],["Asignatura:",x.asignatura],["Curso:",x.curso],["Bloques:",x.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let _=E.lastAutoTable.finalY+15;if(Object.keys(x.rubricaResultados).length>0){const I=[],L=["Débil","Incipiente","Satisfactorio","Avanzado"];A.forEach(k=>{I.push([{content:k.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),k.criteria.forEach(w=>{const y=x.rubricaResultados[w.name],N=y?L[y-1]:"No evaluado";I.push([w.name,N])})}),ic(E,{startY:_,head:[["Indicador","Nivel de Logro"]],body:I,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),_=E.lastAutoTable.finalY+15}const B=(I,L)=>{if(!L)return;_>250&&(E.addPage(),_=20,E.setFont("helvetica","bold"),E.setFontSize(10),E.setTextColor(100),E.text("LICEO INDUSTRIAL DE RECOLETA",E.internal.pageSize.getWidth()/2,15,{align:"center"}),_=25),E.setFont("helvetica","bold"),E.setFontSize(14),E.setTextColor(40),E.text(I,14,_),_+=8,E.setFont("helvetica","normal"),E.setFontSize(11),E.setTextColor(60);const k=E.splitTextToSize(L.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);E.text(k,14,_),_+=k.length*5+10};B("Observaciones Generales",x.observacionesGenerales),B("Retroalimentación Consolidada",x.retroalimentacionConsolidada);const T=E.getNumberOfPages();for(let I=1;I<=T;I++)E.setPage(I),E.setFontSize(8),E.setTextColor(128),E.text(`Página ${I} de ${T}`,E.internal.pageSize.getWidth()/2,E.internal.pageSize.getHeight()-10,{align:"center"});E.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(x.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),l.jsxs("button",{onClick:()=>v(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[l.jsx(TU,{})," Exportar PDF"]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2 space-y-6",children:l.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[l.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),l.jsx("h3",{children:"Observaciones Generales"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx(ySe,{data:p})})]})]})]}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),n&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&t.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),l.jsx("div",{className:"space-y-4",children:!n&&t.length>0?t.map(x=>l.jsx("button",{onClick:()=>c(x),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[x.curso," - ",x.asignatura]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(x.fecha).toLocaleDateString("es-CL"),x.bloques&&` | Bloques: ${x.bloques}`]}),Object.keys(x.rubricaResultados).length>0&&l.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(x.rubricaResultados).length," criterios"]})]}),l.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},x.id)):!n&&l.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsx("span",{className:"text-5xl",children:"👍"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},CSe=e=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const t=Ft($r,"planificaciones"),r=nr(t,en("fechaCreacion","desc"));return br(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Todas las planificaciones cargadas:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar todas las planificaciones:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",t),t}},_Se=(e,t)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",e),!e)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=Ft($r,"planificaciones"),n=nr(r,Mn("userId","==",e),en("fechaCreacion","desc"));return br(n,s=>{const i=[];s.forEach(o=>{const c=o.data();i.push({id:o.id,...c})}),console.log("✅ Planificaciones del usuario cargadas:",i.length),t(i)},s=>{throw console.error("❌ Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}};class s8 extends Map{constructor(t,r=BSe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(i8(this,t))}has(t){return super.has(i8(this,t))}set(t,r){return super.set(SSe(this,t),r)}delete(t){return super.delete(NSe(this,t))}}function i8({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function SSe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function NSe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function BSe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function kSe(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const o8=Symbol("implicit");function XH(){var e=new s8,t=[],r=[],n=o8;function a(s){let i=e.get(s);if(i===void 0){if(n!==o8)return n;e.set(s,i=t.push(s)-1)}return r[i%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new s8;for(const i of s)e.has(i)||e.set(i,t.push(i)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return XH(t,r).unknown(n)},kSe.apply(a,arguments),a}function TSe(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const ISe=TSe("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var FSe={value:function(){}};function YH(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new L2(r)}function L2(e){this._=e}function jSe(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}L2.prototype=YH.prototype={constructor:L2,on:function(e,t){var r=this._,n=jSe(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=DSe(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=l8(r[a],e.name,t);else if(t==null)for(a in r)r[a]=l8(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new L2(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function DSe(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function l8(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=FSe,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}const RSe=Object.freeze(Object.defineProperty({__proto__:null,dispatch:YH},Symbol.toStringTag,{value:"Module"})),LSe=Vz(RSe);var T_,c8;function OSe(){if(c8)return T_;c8=1;const e=LSe.dispatch,t=Math.PI/180,r={archimedean:x,rectangular:E},n=64,a=2048;T_=function(){var I=[256,256],L=s,k=i,w=c,y=o,N=o,U=A,j=d,F=x,P=[],M=1/0,ee=e("word","end"),W=null,te=Math.random,G={},q=B;G.canvas=function(R){return arguments.length?(q=T(R),G):q},G.start=function(){var R=z(q()),K=_((I[0]>>5)*I[1]),X=null,re=P.length,ne=-1,ue=[],fe=P.map(function(Ce,me){return Ce.text=L.call(this,Ce,me),Ce.font=k.call(this,Ce,me),Ce.style=y.call(this,Ce,me),Ce.weight=N.call(this,Ce,me),Ce.rotate=U.call(this,Ce,me),Ce.size=~~w.call(this,Ce,me),Ce.padding=j.call(this,Ce,me),Ce}).sort(function(Ce,me){return me.size-Ce.size});return W&&clearInterval(W),W=setInterval(be,0),be(),G;function be(){for(var Ce=Date.now();Date.now()-Ce<M&&++ne<re&&W;){var me=fe[ne];me.x=I[0]*(te()+.5)>>1,me.y=I[1]*(te()+.5)>>1,h(R,me,fe,ne),me.hasText&&Z(K,me,X)&&(ue.push(me),ee.call("word",G,me),X?p(X,me):X=[{x:me.x+me.x0,y:me.y+me.y0},{x:me.x+me.x1,y:me.y+me.y1}],me.x-=I[0]>>1,me.y-=I[1]>>1)}ne>=re&&(G.stop(),ee.call("end",G,ue,X))}},G.stop=function(){W&&(clearInterval(W),W=null);for(const R of P)delete R.sprite;return G};function z(R){const K=R.getContext("2d",{willReadFrequently:!0});R.width=R.height=1;const X=Math.sqrt(K.getImageData(0,0,1,1).data.length>>2);return R.width=(n<<5)/X,R.height=a/X,K.fillStyle=K.strokeStyle="red",{context:K,ratio:X}}function Z(R,K,X){I[0],I[1];for(var re=K.x,ne=K.y,ue=Math.sqrt(I[0]*I[0]+I[1]*I[1]),fe=F(I),be=te()<.5?1:-1,Ce=-be,me,oe,Le;(me=fe(Ce+=be))&&(oe=~~me[0],Le=~~me[1],!(Math.min(Math.abs(oe),Math.abs(Le))>=ue));)if(K.x=re+oe,K.y=ne+Le,!(K.x+K.x0<0||K.y+K.y0<0||K.x+K.x1>I[0]||K.y+K.y1>I[1])&&(!X||v(K,X))&&!m(K,R,I[0])){for(var Ye=K.sprite,Te=K.width>>5,we=I[0]>>5,Fe=K.x-(Te<<4),He=Fe&127,Xe=32-He,ut=K.y1-K.y0,Et=(K.y+K.y0)*we+(Fe>>5),At,jt=0;jt<ut;jt++){At=0;for(var Dt=0;Dt<=Te;Dt++)R[Et+Dt]|=At<<Xe|(Dt<Te?(At=Ye[jt*Te+Dt])>>>He:0);Et+=we}return!0}return!1}return G.timeInterval=function(R){return arguments.length?(M=R??1/0,G):M},G.words=function(R){return arguments.length?(P=R,G):P},G.size=function(R){return arguments.length?(I=[+R[0],+R[1]],G):I},G.font=function(R){return arguments.length?(k=T(R),G):k},G.fontStyle=function(R){return arguments.length?(y=T(R),G):y},G.fontWeight=function(R){return arguments.length?(N=T(R),G):N},G.rotate=function(R){return arguments.length?(U=T(R),G):U},G.text=function(R){return arguments.length?(L=T(R),G):L},G.spiral=function(R){return arguments.length?(F=r[R]||R,G):F},G.fontSize=function(R){return arguments.length?(w=T(R),G):w},G.padding=function(R){return arguments.length?(j=T(R),G):j},G.random=function(R){return arguments.length?(te=R,G):te},G.on=function(){var R=ee.on.apply(ee,arguments);return R===ee?G:R},G};function s(I){return I.text}function i(){return"serif"}function o(){return"normal"}function c(I){return Math.sqrt(I.value)}function A(){return(~~(random()*6)-3)*30}function d(){return 1}function h(I,L,k,w){if(!L.sprite){var y=I.context,N=I.ratio;y.clearRect(0,0,(n<<5)/N,a/N);var U=0,j=0,F=0,P=k.length;for(--w;++w<P;){L=k[w],y.save(),y.font=L.style+" "+L.weight+" "+~~((L.size+1)/N)+"px "+L.font;const me=y.measureText(L.text),oe=-Math.floor(me.width/2);let Le=(me.width+1)*N,Ye=L.size<<1;if(L.rotate){var M=Math.sin(L.rotate*t),ee=Math.cos(L.rotate*t),W=Le*ee,te=Le*M,G=Ye*ee,q=Ye*M;Le=Math.max(Math.abs(W+q),Math.abs(W-q))+31>>5<<5,Ye=~~Math.max(Math.abs(te+G),Math.abs(te-G))}else Le=Le+31>>5<<5;if(Ye>F&&(F=Ye),U+Le>=n<<5&&(U=0,j+=F,F=0),j+Ye>=a)break;y.translate((U+(Le>>1))/N,(j+(Ye>>1))/N),L.rotate&&y.rotate(L.rotate*t),y.fillText(L.text,oe,0),L.padding&&(y.lineWidth=2*L.padding,y.strokeText(L.text,oe,0)),y.restore(),L.width=Le,L.height=Ye,L.xoff=U,L.yoff=j,L.x1=Le>>1,L.y1=Ye>>1,L.x0=-L.x1,L.y0=-L.y1,L.hasText=!0,U+=Le}for(var z=y.getImageData(0,0,(n<<5)/N,a/N).data,Z=[];--w>=0;)if(L=k[w],!!L.hasText){for(var R=L.width,K=R>>5,X=L.y1-L.y0,re=0;re<X*K;re++)Z[re]=0;if(U=L.xoff,U==null)return;j=L.yoff;for(var ne=0,ue=-1,fe=0;fe<X;fe++){for(var re=0;re<R;re++){var be=K*fe+(re>>5),Ce=z[(j+fe)*(n<<5)+(U+re)<<2]?1<<31-re%32:0;Z[be]|=Ce,ne|=Ce}ne?ue=fe:(L.y0++,X--,fe--,j++)}L.y1=L.y0+ue,L.sprite=Z.slice(0,(L.y1-L.y0)*K)}}}function m(I,L,k){k>>=5;for(var w=I.sprite,y=I.width>>5,N=I.x-(y<<4),U=N&127,j=32-U,F=I.y1-I.y0,P=(I.y+I.y0)*k+(N>>5),M,ee=0;ee<F;ee++){M=0;for(var W=0;W<=y;W++)if((M<<j|(W<y?(M=w[ee*y+W])>>>U:0))&L[P+W])return!0;P+=k}return!1}function p(I,L){var k=I[0],w=I[1];L.x+L.x0<k.x&&(k.x=L.x+L.x0),L.y+L.y0<k.y&&(k.y=L.y+L.y0),L.x+L.x1>w.x&&(w.x=L.x+L.x1),L.y+L.y1>w.y&&(w.y=L.y+L.y1)}function v(I,L){return I.x+I.x1>L[0].x&&I.x+I.x0<L[1].x&&I.y+I.y1>L[0].y&&I.y+I.y0<L[1].y}function x(I){var L=I[0]/I[1];return function(k){return[L*(k*=.1)*Math.cos(k),k*Math.sin(k)]}}function E(I){var L=4,k=L*I[0]/I[1],w=0,y=0;return function(N){var U=N<0?-1:1;switch(Math.sqrt(1+4*U*N)-U&3){case 0:w+=k;break;case 1:y+=L;break;case 2:w-=k;break;default:y-=L;break}return[w,y]}}function _(I){for(var L=[],k=-1;++k<I;)L[k]=0;return L}function B(){return document.createElement("canvas")}function T(I){return typeof I=="function"?I:function(){return I}}return T_}var USe=OSe();const PSe=fy(USe),MSe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),QSe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),HSe=()=>l.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),VSe=e=>{const[t,r]=Q.useState([]),[n,a]=Q.useState(!0),[s,i]=Q.useState(null),o=Q.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return Q.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){i("Usuario no autenticado"),a(!1);return}try{let c;const A=d=>{r(d),a(!1),i(null)};if(o)c=CSe(A);else{const d=e.email||e.id||"";c=_Se(A,d)}return c}catch(c){i(c instanceof Error?c.message:"Error al conectar con la base de datos"),a(!1)}},[e,o]),{planificaciones:t,loading:n,error:s,canViewAllPlans:o}},zSe=({plan:e,onClose:t})=>l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[l.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),l.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:l.jsx(QSe,{})})]}),l.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[l.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),l.jsxs("p",{className:"mt-2",children:[l.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),l.jsx("div",{className:"mt-3",children:l.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),l.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),l.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,n)=>l.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[l.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",n+1,": ",r.actividades]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("span",{children:[l.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},n))}),e.reflexionUnidad&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexión Docente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?l.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,n)=>l.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[l.jsxs("span",{className:"font-bold text-amber-500",children:[n+1,"."]})," ",r]},r))}):l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafíos"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),u8=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],GSe=["1º Medio","2º Medio","3º Medio","4º Medio"],KSe=({words:e})=>{const t=Q.useRef(null);return Q.useEffect(()=>{if(!e.length||!t.current)return;const r=ec(t.current);r.selectAll("*").remove();const n=PSe().size([500,350]).words(e.map(s=>({...s}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(s=>Math.sqrt(s.value)*12).on("end",a);n.start();function a(s){r.attr("width",n.size()[0]).attr("height",n.size()[1]).append("g").attr("transform",`translate(${n.size()[0]/2},${n.size()[1]/2})`).selectAll("text").data(s).enter().append("text").style("font-size",i=>`${i.size}px`).style("font-family","Impact").style("fill",(i,o)=>XH(ISe)(o.toString())).attr("text-anchor","middle").attr("transform",i=>`translate(${[i.x,i.y]})rotate(${i.rotate})`).text(i=>i.text)}},[e]),l.jsx("svg",{ref:t})},qSe=({planificaciones:e})=>{const[t,r]=Q.useState("todos"),[n,a]=Q.useState("todos"),s=Q.useMemo(()=>["todos",...Array.from(new Set(e.map(d=>d.asignatura)))],[e]),i=Q.useMemo(()=>e.filter(d=>(t==="todos"||d.nivel===t)&&(n==="todos"||d.asignatura===n)&&d.reflexionUnidad),[e,t,n]),o=Q.useMemo(()=>{const d=u8.reduce((h,m)=>({...h,[m]:0}),{});return i.forEach(h=>{var m,p;return(p=(m=h.reflexionUnidad)==null?void 0:m.ordenHabilidades)==null?void 0:p.forEach((v,x)=>{d[v]!==void 0&&(d[v]+=u8.length-x)})}),Object.entries(d).map(([h,m])=>({text:h,value:m})).sort((h,m)=>m.value-h.value)},[i]),c=Q.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),m=(i.map(p=>{var v,x;return`${((v=p.reflexionUnidad)==null?void 0:v.fortalezas)||""} ${((x=p.reflexionUnidad)==null?void 0:x.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((p,v)=>(d.has(v)||(p[v]=(p[v]||0)+1),p),{});return Object.entries(m).map(([p,v])=>({text:p,value:v})).sort((p,v)=>v.value-p.value).slice(0,50)},[i]),A="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return l.jsxs("div",{className:"animate-fade-in",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsxs("select",{value:t,onChange:d=>r(d.target.value),className:A,children:[l.jsx("option",{value:"todos",children:"Todos los Niveles"}),GSe.map(d=>l.jsx("option",{value:d,children:d},d))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{value:n,onChange:d=>a(d.target.value),className:A,children:s.map(d=>l.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),o.every(d=>d.value===0)?l.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):l.jsx("ul",{className:"space-y-3",children:o.map((d,h)=>l.jsxs("li",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:h+1}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:l.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(o[0].value||1)*100}%`}})})]})]},d.text))})]}),l.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),c.length>0?l.jsx(KSe,{words:c}):l.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},$Se=({currentUser:e})=>{const{planificaciones:t,loading:r,error:n,canViewAllPlans:a}=VSe(e),[s,i]=Q.useState("seguimiento"),[o,c]=Q.useState("1º"),[A,d]=Q.useState(null),[h,m]=Q.useState(null),p=Q.useMemo(()=>{const E={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"};return t.filter(_=>_.nivel===E[o]&&_.tipo==="Unidad")},[t,o]),v=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];if(!(e!=null&&e.id))return l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{children:"Usuario no autenticado."})});if(r)return l.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[l.jsx(HSe,{}),l.jsx("span",{children:"Cargando planificaciones..."})]});if(n)return l.jsx("div",{className:"text-center py-8",children:l.jsxs("p",{className:"text-red-500",children:["Error: ",n]})});const x=()=>l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:v.map(E=>l.jsx("button",{onClick:()=>c(E.key),className:`${o===E.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:E.label},E.key))})}),p.length===0?l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):l.jsx("div",{className:"space-y-4",children:yi.map(E=>{const _=p.filter(T=>T.asignatura===E);if(_.length===0)return null;const B=A===E;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[l.jsxs("button",{onClick:()=>d(B?null:E),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:E}),l.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[_.length," unidad",_.length>1?"es":""]})]}),l.jsx("span",{className:`transform transition-transform ${B?"rotate-180":""}`,children:l.jsx(MSe,{})})]}),B&&l.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:l.jsx("ul",{className:"space-y-3",children:_.map(T=>l.jsx("li",{children:l.jsxs("button",{onClick:()=>m(T),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:T.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",T.autor||"N/A"]})]})},T.id))})})]},E)})})]});return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&l.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"👑 Vista administrativa"})]}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>i("seguimiento"),className:`${s==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),l.jsx("button",{onClick:()=>i("analisis"),className:`${s==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Análisis de Reflexiones"})]})}),s==="seguimiento"&&x(),s==="analisis"&&l.jsx(qSe,{planificaciones:t.filter(E=>E.tipo==="Unidad")})]}),h&&l.jsx(zSe,{plan:h,onClose:()=>m(null)})]})},FE="analisisTaxonomicos",WSe=async()=>{try{const e=nr(Ft($r,FE),en("uploadDate","desc"));return(await Ts(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los análisis:",e),new Error("No se pudieron cargar los análisis taxonómicos")}},XSe=async e=>{if(!e)return[];try{const t=nr(Ft($r,FE),Mn("userId","==",e),en("uploadDate","desc"));return(await Ts(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener análisis por usuario:",t),new Error("No se pudieron cargar los análisis del usuario")}},YSe=async e=>{try{return{id:(await ha(Ft($r,FE),e)).id,...e}}catch(t){throw console.error("Error al crear análisis:",t),new Error("No se pudo crear el análisis taxonómico")}},JSe=async e=>{try{const t=vr($r,FE,e);await zs(t)}catch(t){throw console.error("Error al eliminar análisis:",t,"ID:",e),new Error("No se pudo eliminar el análisis taxonómico")}},A8=["1º Medio","2º Medio","3º Medio","4º Medio"],UA=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],gm={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},ZSe=()=>l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d8=({currentUser:e})=>{const[t,r]=Q.useState([]),[n,a]=Q.useState(!1),[s,i]=Q.useState(null),[o,c]=Q.useState(null),[A,d]=Q.useState(""),[h,m]=Q.useState(!1),[p,v]=Q.useState(null),[x,E]=Q.useState(null),[_,B]=Q.useState(""),[T,I]=Q.useState(""),[L,k]=Q.useState(""),[w,y]=Q.useState(""),[N,U]=Q.useState("resumen"),j=Q.useCallback(async()=>{if(e!=null&&e.id){a(!0);try{const q=e.profile==="SUBDIRECCION"?await WSe():await XSe(e.id);r(q),i(null)}catch(q){console.error("Error al cargar análisis:",q),i("No se pudieron cargar los análisis.")}finally{a(!1)}}},[e]);Q.useEffect(()=>{j()},[j]);const F=async q=>{var Z;const z=(Z=q.target.files)==null?void 0:Z[0];if(z){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(z.type)){i("Por favor, suba un archivo PDF o DOCX válido.");return}v(z),d(z.name),i(null);const K=new FileReader;K.onloadend=()=>{var re;const X=(re=K.result)==null?void 0:re.split(",")[1];if(!X){i("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),E(null);return}E({mimeType:z.type,data:X})},K.onerror=()=>i("Error al leer el archivo."),K.readAsDataURL(z)}},P=async()=>{if(!A.trim()||!x){i("Debe subir un documento y asignarle un nombre para analizar.");return}if(!_||!T){i("Seleccione Nivel y Asignatura antes de analizar.");return}m(!0),i(null);const q=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser válido.
        `,z={type:"object",properties:{analysisResults:{type:"array",items:{type:"object",properties:{question:{type:"string"},habilidadBloom:{type:"string",enum:UA}},required:["question","habilidadBloom"]}},summary:{type:"object",properties:UA.reduce((Z,R)=>({...Z,[R]:{type:"number"}}),{})}},required:["analysisResults","summary"]};try{up("Análisis Taxonómico",e);const Z="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",K=new Is(Z).getGenerativeModel({model:"gemini-1.5-flash-latest",generationConfig:{responseMimeType:"application/json",responseSchema:z}}),X={inlineData:{mimeType:x.mimeType,data:x.data}},ne=(await K.generateContent([q,X])).response.text();let ue;try{ue=JSON.parse(ne)}catch(Ce){throw console.error("Error al parsear JSON:",Ce),console.error("Respuesta recibida (no es JSON válido):",ne),new Error("La respuesta de la IA no tuvo un formato válido. Intente de nuevo.")}const fe={documentName:A,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:ue.analysisResults,summary:ue.summary,nivel:_,asignatura:T},be=await YSe(fe);await j(),c(be),d(""),v(null),E(null),B(""),I("")}catch(Z){console.error(Z);const R=Z instanceof Error?Z.message:"Hubo un error al analizar el documento.";i(R)}finally{m(!1)}},M=async q=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await JSe(q),await j(),(o==null?void 0:o.id)===q&&c(null)}catch{i("No se pudo eliminar el análisis.")}},ee=Q.useMemo(()=>t.filter(q=>{const z=L?q.nivel===L:!0,Z=w?q.asignatura===w:!0;return z&&Z}),[t,L,w]),W=Q.useMemo(()=>{const q={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};ee.forEach(Z=>{UA.forEach(R=>{var X;const K=((X=Z.summary)==null?void 0:X[R])||0;q[R]+=K})});const z=Object.values(q).reduce((Z,R)=>Z+R,0);return{acc:q,total:z}},[ee]),te=Q.useMemo(()=>{const q=new Map;ee.forEach(Z=>{const R=Z.asignatura||"Sin asignatura";q.has(R)||q.set(R,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const K=q.get(R);UA.forEach(X=>{var re;K[X]+=((re=Z.summary)==null?void 0:re[X])||0})});const z=Array.from(q.entries()).map(([Z,R])=>({asignatura:Z,counts:R,total:Object.values(R).reduce((K,X)=>K+X,0)}));return z.sort((Z,R)=>R.total-Z.total),z},[ee]),G=Q.useMemo(()=>o?Object.values(o.summary).reduce((q,z)=>q+(z||0),0):0,[o]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonómico de Evaluaciones"}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),l.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:l.jsxs("div",{className:"space-y-1 text-center",children:[l.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:l.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),l.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[l.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:F,accept:".pdf,.doc,.docx"}),l.jsx("span",{children:"Cargue un archivo"})]}),l.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),l.jsx("p",{className:"text-xs text-slate-500",children:p?p.name:"PDF, DOCX hasta 10MB"})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsxs("select",{value:_,onChange:q=>B(q.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione"}),A8.map(q=>l.jsx("option",{value:q,children:q},q))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{value:T,onChange:q=>I(q.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione"}),yi.map(q=>l.jsx("option",{value:q,children:q},q))]})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),l.jsx("input",{type:"text",id:"documentName",value:A,onChange:q=>d(q.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("button",{onClick:P,disabled:h||!x,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:h?l.jsx(ZSe,{}):"Analizar con IA"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),n?l.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados."}):l.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(q=>l.jsxs("button",{onClick:()=>c(q),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===q.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[l.jsx("p",{className:"font-semibold truncate",children:q.documentName}),l.jsx("p",{className:"text-xs text-slate-500",children:new Date(q.uploadDate).toLocaleString("es-CL")}),(q.nivel||q.asignatura)&&l.jsxs("p",{className:"text-xs text-slate-500",children:[q.nivel||"Nivel s/i"," • ",q.asignatura||"Asignatura s/i"]})]},q.id))})]})]}),l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),l.jsxs("select",{value:L,onChange:q=>k(q.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos"}),A8.map(q=>l.jsx("option",{value:q,children:q},q))]})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),l.jsxs("select",{value:w,onChange:q=>y(q.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todas"}),yi.map(q=>l.jsx("option",{value:q,children:q},q))]})]}),l.jsx("button",{type:"button",onClick:()=>{k(""),y("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>U("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${N==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),l.jsx("button",{onClick:()=>U("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${N==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparación por Asignatura"})]})}),N==="resumen"?l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[ee.length," análisis considerados"]})]}),l.jsx("div",{className:"space-y-3",children:UA.map(q=>{const z=W.acc[q],Z=W.total>0?z/W.total*100:0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:q}),l.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[z," (",Z.toFixed(0),"%)"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:`${gm[q]} h-4 rounded-full`,style:{width:`${Z}%`}})})]},q)})}),l.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:UA.map(q=>l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[l.jsx("span",{className:"text-sm",children:q}),l.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${gm[q]}`,children:W.acc[q]})]},q))})]}):l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparación por Asignatura"}),l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[te.length," asignaturas comparadas"]})]}),te.length===0?l.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):l.jsx("div",{className:"space-y-5",children:te.map(q=>{const z=q.total||1;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:q.asignatura}),l.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[q.total," ítems"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:UA.map(Z=>{const R=q.counts[Z]||0,K=R/z*100;return l.jsx("div",{className:`${gm[Z]} h-5`,style:{width:`${K}%`},title:`${Z}: ${R} (${K.toFixed(0)}%)`},Z)})}),l.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:UA.map(Z=>l.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[l.jsx("span",{className:`inline-block w-3 h-3 rounded ${gm[Z]}`}),l.jsx("span",{children:Z})]},Z))})]},q.asignatura)})})]})]}),l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL"),(o.nivel||o.asignatura)&&l.jsxs(l.Fragment,{children:[" ","• ",o.nivel||"Nivel s/i"," • ",o.asignatura||"Asignatura s/i"]})]})]}),l.jsx("button",{onClick:()=>M(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",G," preguntas)"]}),l.jsx("div",{className:"space-y-3",children:UA.map(q=>{const z=o.summary[q]||0,Z=G>0?z/G*100:0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:q}),l.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[z," (",Z.toFixed(0),"%)"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:`${gm[q]} h-4 rounded-full`,style:{width:`${Z}%`}})})]},q)})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),l.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((q,z)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:q.question}),l.jsx("td",{className:"px-4 py-3 text-sm",children:l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${gm[q.habilidadBloom]}`,children:q.habilidadBloom})})]},z))})]})})]})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})]})},JH="empresas_practicas",eNe="usuarios",B3="rutas_supervision",k3=e=>{const t=e.data();return{id:e.id,...t}},tNe=e=>{const t=nr(Ft(kt,JH),en("nombre","asc"));return br(t,r=>{const n=r.docs.map(a=>k3(a));e(n)},r=>console.error("Error al suscribirse a empresas:",r))},rNe=async e=>{const t=vr(kt,JH,e);await zs(t)},nNe=e=>{const t=nr(Ft(kt,eNe),Mn("profile","==","PROFESORADO"),en("nombreCompleto","asc"));return br(t,r=>{const n=r.docs.map(a=>k3(a));e(n)},r=>console.error("Error al suscribirse a profesores:",r))},aNe=async e=>(await ha(Ft(kt,B3),{...e,createdAt:iJ()})).id,sNe=e=>{const t=nr(Ft(kt,B3),en("createdAt","desc"));return br(t,r=>{const n=r.docs.map(a=>k3(a));e(n)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},iNe=async e=>{const t=vr(kt,B3,e);await zs(t)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Xh=function(){return Xh=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Xh.apply(this,arguments)};function oNe(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(A){try{c(n.next(A))}catch(d){s(d)}}function o(A){try{c(n.throw(A))}catch(d){s(d)}}function c(A){var d;A.done?a(A.value):(d=A.value,d instanceof r?d:new r(function(h){h(d)})).then(i,o)}c((n=n.apply(e,[])).next())})}function lNe(e,t){var r,n,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(A){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&d[0]?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!((a=a.length>0&&a[a.length-1])||d[0]!==6&&d[0]!==2)){i=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){i.label=d[1];break}if(d[0]===6&&i.label<a[1]){i.label=a[1],a=d;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(d);break}a[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(h){d=[6,h],n=0}finally{r=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,A])}}}function _r(){return _r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_r.apply(this,arguments)}function Yh(e){return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yh(e)}function ZH(e){var t=function(r,n){if(Yh(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(Yh(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return Yh(t)==="symbol"?t:String(t)}function Rm(e,t,r){return(t=ZH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f8(Object(r),!0).forEach(function(n){Rm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function h8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZH(n.key),n)}}function DS(e,t){return DS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},DS(e,t)}function oy(e){return oy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oy(e)}function cNe(e,t){if(t&&(Yh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function uNe(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=oy(e);if(t){var a=oy(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return cNe(this,r)}}function RS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function eV(e,t){if(e){if(typeof e=="string")return RS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?RS(e,t):void 0}}function T3(e){return function(t){if(Array.isArray(t))return RS(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||eV(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var ANe=function(){function e(r){var n=this;this._insertTag=function(a){var s;s=n.tags.length===0?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,s),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(s){var i=document.createElement("style");return i.setAttribute("data-emotion",s.key),s.nonce!==void 0&&i.setAttribute("nonce",s.nonce),i.appendChild(document.createTextNode("")),i.setAttribute("data-s",""),i}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(s){if(s.sheet)return s.sheet;for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].ownerNode===s)return document.styleSheets[i]}(n);try{a.insertRule(r,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Gl="-ms-",m8="-moz-",Rn="-webkit-",I3="decl",tV="@keyframes",dNe=Math.abs,jE=String.fromCharCode,fNe=Object.assign;function rV(e){return e.trim()}function Pn(e,t,r){return e.replace(t,r)}function LS(e,t){return e.indexOf(t)}function pi(e,t){return 0|e.charCodeAt(t)}function m1(e,t,r){return e.slice(t,r)}function Lu(e){return e.length}function F3(e){return e.length}function n2(e,t){return t.push(e),e}var DE=1,wp=1,nV=0,Ho=0,Ns=0,Lp="";function RE(e,t,r,n,a,s,i){return{value:e,root:t,parent:r,type:n,props:a,children:s,line:DE,column:wp,length:i,return:""}}function Lg(e,t){return fNe(RE("",null,null,"",null,null,0),e,{length:-e.length},t)}function xl(){return Ns=Ho<nV?pi(Lp,Ho++):0,wp++,Ns===10&&(wp=1,DE++),Ns}function Xu(){return pi(Lp,Ho)}function O2(){return Ho}function J1(e,t){return m1(Lp,e,t)}function p1(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function aV(e){return DE=wp=1,nV=Lu(Lp=e),Ho=0,[]}function sV(e){return Lp="",e}function U2(e){return rV(J1(Ho-1,OS(e===91?e+2:e===40?e+1:e)))}function hNe(e){for(;(Ns=Xu())&&Ns<33;)xl();return p1(e)>2||p1(Ns)>3?"":" "}function mNe(e,t){for(;--t&&xl()&&!(Ns<48||Ns>102||Ns>57&&Ns<65||Ns>70&&Ns<97););return J1(e,O2()+(t<6&&Xu()==32&&xl()==32))}function OS(e){for(;xl();)switch(Ns){case e:return Ho;case 34:case 39:e!==34&&e!==39&&OS(Ns);break;case 40:e===41&&OS(e);break;case 92:xl()}return Ho}function pNe(e,t){for(;xl()&&e+Ns!==57&&(e+Ns!==84||Xu()!==47););return"/*"+J1(t,Ho-1)+"*"+jE(e===47?e:xl())}function gNe(e){for(;!p1(Xu());)xl();return J1(e,Ho)}function p8(e){return sV(P2("",null,null,null,[""],e=aV(e),0,[0],e))}function P2(e,t,r,n,a,s,i,o,c){for(var A=0,d=0,h=i,m=0,p=0,v=0,x=1,E=1,_=1,B=0,T="",I=a,L=s,k=n,w=T;E;)switch(v=B,B=xl()){case 40:if(v!=108&&pi(w,h-1)==58){LS(w+=Pn(U2(B),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:w+=U2(B);break;case 9:case 10:case 13:case 32:w+=hNe(v);break;case 92:w+=mNe(O2()-1,7);continue;case 47:switch(Xu()){case 42:case 47:n2(xNe(pNe(xl(),O2()),t,r),c);break;default:w+="/"}break;case 123*x:o[A++]=Lu(w)*_;case 125*x:case 59:case 0:switch(B){case 0:case 125:E=0;case 59+d:p>0&&Lu(w)-h&&n2(p>32?x8(w+";",n,r,h-1):x8(Pn(w," ","")+";",n,r,h-2),c);break;case 59:w+=";";default:if(n2(k=g8(w,t,r,A,d,a,o,T,I=[],L=[],h),s),B===123)if(d===0)P2(w,t,k,k,I,s,h,o,L);else switch(m===99&&pi(w,3)===110?100:m){case 100:case 109:case 115:P2(e,k,k,n&&n2(g8(e,k,k,0,0,a,o,T,a,I=[],h),L),a,L,h,o,n?I:L);break;default:P2(w,k,k,k,[""],L,0,o,L)}}A=d=p=0,x=_=1,T=w="",h=i;break;case 58:h=1+Lu(w),p=v;default:if(x<1){if(B==123)--x;else if(B==125&&x++==0&&(Ns=Ho>0?pi(Lp,--Ho):0,wp--,Ns===10&&(wp=1,DE--),Ns==125))continue}switch(w+=jE(B),B*x){case 38:_=d>0?1:(w+="\f",-1);break;case 44:o[A++]=(Lu(w)-1)*_,_=1;break;case 64:Xu()===45&&(w+=U2(xl())),m=Xu(),d=h=Lu(T=w+=gNe(O2())),B++;break;case 45:v===45&&Lu(w)==2&&(x=0)}}return s}function g8(e,t,r,n,a,s,i,o,c,A,d){for(var h=a-1,m=a===0?s:[""],p=F3(m),v=0,x=0,E=0;v<n;++v)for(var _=0,B=m1(e,h+1,h=dNe(x=i[v])),T=e;_<p;++_)(T=rV(x>0?m[_]+" "+B:Pn(B,/&\f/g,m[_])))&&(c[E++]=T);return RE(e,t,r,a===0?"rule":o,c,A,d)}function xNe(e,t,r){return RE(e,t,r,"comm",jE(Ns),m1(e,2,-2),0)}function x8(e,t,r,n){return RE(e,t,r,I3,m1(e,0,n),m1(e,n+1,-1),n)}function Jh(e,t){for(var r="",n=F3(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function v8(e,t,r,n){switch(e.type){case"@import":case I3:return e.return=e.return||e.value;case"comm":return"";case tV:return e.return=e.value+"{"+Jh(e.children,n)+"}";case"rule":e.value=e.props.join(",")}return Lu(r=Jh(e.children,n))?e.return=e.value+"{"+r+"}":""}function b8(e){var t=F3(e);return function(r,n,a,s){for(var i="",o=0;o<t;o++)i+=e[o](r,n,a,s)||"";return i}}function vNe(e){return function(t){t.root||(t=t.return)&&e(t)}}function iV(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var bNe=function(e,t,r){for(var n=0,a=0;n=a,a=Xu(),n===38&&a===12&&(t[r]=1),!p1(a);)xl();return J1(e,Ho)},wNe=function(e,t){return sV(function(r,n){var a=-1,s=44;do switch(p1(s)){case 0:s===38&&Xu()===12&&(n[a]=1),r[a]+=bNe(Ho-1,n,a);break;case 2:r[a]+=U2(s);break;case 4:if(s===44){r[++a]=Xu()===58?"&\f":"",n[a]=r[a].length;break}default:r[a]+=jE(s)}while(s=xl());return r}(aV(e),t))},w8=new WeakMap,yNe=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||w8.get(r))&&!n){w8.set(e,!0);for(var a=[],s=wNe(t,a),i=r.props,o=0,c=0;o<s.length;o++)for(var A=0;A<i.length;A++,c++)e.props[c]=a[o]?s[o].replace(/&\f/g,i[A]):i[A]+" "+s[o]}}},ENe=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function oV(e,t){switch(function(r,n){return 45^pi(r,0)?(((n<<2^pi(r,0))<<2^pi(r,1))<<2^pi(r,2))<<2^pi(r,3):0}(e,t)){case 5103:return Rn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Rn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Rn+e+m8+e+Gl+e+e;case 6828:case 4268:return Rn+e+Gl+e+e;case 6165:return Rn+e+Gl+"flex-"+e+e;case 5187:return Rn+e+Pn(e,/(\w+).+(:[^]+)/,Rn+"box-$1$2-ms-flex-$1$2")+e;case 5443:return Rn+e+Gl+"flex-item-"+Pn(e,/flex-|-self/,"")+e;case 4675:return Rn+e+Gl+"flex-line-pack"+Pn(e,/align-content|flex-|-self/,"")+e;case 5548:return Rn+e+Gl+Pn(e,"shrink","negative")+e;case 5292:return Rn+e+Gl+Pn(e,"basis","preferred-size")+e;case 6060:return Rn+"box-"+Pn(e,"-grow","")+Rn+e+Gl+Pn(e,"grow","positive")+e;case 4554:return Rn+Pn(e,/([^-])(transform)/g,"$1"+Rn+"$2")+e;case 6187:return Pn(Pn(Pn(e,/(zoom-|grab)/,Rn+"$1"),/(image-set)/,Rn+"$1"),e,"")+e;case 5495:case 3959:return Pn(e,/(image-set\([^]*)/,Rn+"$1$`$1");case 4968:return Pn(Pn(e,/(.+:)(flex-)?(.*)/,Rn+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Rn+e+e;case 4095:case 3583:case 4068:case 2532:return Pn(e,/(.+)-inline(.+)/,Rn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Lu(e)-1-t>6)switch(pi(e,t+1)){case 109:if(pi(e,t+4)!==45)break;case 102:return Pn(e,/(.+:)(.+)-([^]+)/,"$1"+Rn+"$2-$3$1"+m8+(pi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~LS(e,"stretch")?oV(Pn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(pi(e,t+1)!==115)break;case 6444:switch(pi(e,Lu(e)-3-(~LS(e,"!important")&&10))){case 107:return Pn(e,":",":"+Rn)+e;case 101:return Pn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Rn+(pi(e,14)===45?"inline-":"")+"box$3$1"+Rn+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(pi(e,t+11)){case 114:return Rn+e+Gl+Pn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Rn+e+Gl+Pn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Rn+e+Gl+Pn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Rn+e+Gl+e+e}return e}var y8,a2,M2=typeof document<"u",CNe=M2?void 0:(y8=function(){return iV(function(){var e={};return function(t){return e[t]}})},a2=new WeakMap,function(e){if(a2.has(e))return a2.get(e);var t=y8(e);return a2.set(e,t),t}),_Ne=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case I3:e.return=oV(e.value,e.length);break;case tV:return Jh([Lg(e,{value:Pn(e.value,"@","@"+Rn)})],n);case"rule":if(e.length)return function(a,s){return a.map(s).join("")}(e.props,function(a){switch(function(s,i){return(s=i.exec(s))?s[0]:s}(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Jh([Lg(e,{props:[Pn(a,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return Jh([Lg(e,{props:[Pn(a,/:(plac\w+)/,":"+Rn+"input-$1")]}),Lg(e,{props:[Pn(a,/:(plac\w+)/,":-moz-$1")]}),Lg(e,{props:[Pn(a,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""})}}],lV=function(e){var t=e.key;if(M2&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(_){_.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(_),_.setAttribute("data-s",""))})}var n=e.stylisPlugins||_Ne,a,s,i={},o=[];M2&&(a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(_){for(var B=_.getAttribute("data-emotion").split(" "),T=1;T<B.length;T++)i[B[T]]=!0;o.push(_)}));var c=[yNe,ENe];if(M2){var A,d=[v8,vNe(function(_){A.insert(_)})],h=b8(c.concat(n,d));s=function(_,B,T,I){A=T,Jh(p8(_?_+"{"+B.styles+"}":B.styles),h),I&&(E.inserted[B.name]=!0)}}else{var m=[v8],p=b8(c.concat(n,m)),v=CNe(n)(t),x=function(_,B){var T=B.name;return v[T]===void 0&&(v[T]=Jh(p8(_?_+"{"+B.styles+"}":B.styles),p)),v[T]};s=function(_,B,T,I){var L=B.name,k=x(_,B);return E.compat===void 0?(I&&(E.inserted[L]=!0),k):I?void(E.inserted[L]=k):k}}var E={key:t,sheet:new ANe({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:s};return E.sheet.hydrate(o),E};function Hn(e,t,r){return e(r={path:t,exports:{},require:function(n,a){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(a==null&&r.path)}},r.exports),r.exports}var oi=typeof Symbol=="function"&&Symbol.for,US=oi?Symbol.for("react.element"):60103,PS=oi?Symbol.for("react.portal"):60106,Q2=oi?Symbol.for("react.fragment"):60107,H2=oi?Symbol.for("react.strict_mode"):60108,V2=oi?Symbol.for("react.profiler"):60114,z2=oi?Symbol.for("react.provider"):60109,G2=oi?Symbol.for("react.context"):60110,MS=oi?Symbol.for("react.async_mode"):60111,ly=oi?Symbol.for("react.concurrent_mode"):60111,K2=oi?Symbol.for("react.forward_ref"):60112,q2=oi?Symbol.for("react.suspense"):60113,SNe=oi?Symbol.for("react.suspense_list"):60120,$2=oi?Symbol.for("react.memo"):60115,W2=oi?Symbol.for("react.lazy"):60116,NNe=oi?Symbol.for("react.block"):60121,BNe=oi?Symbol.for("react.fundamental"):60117,kNe=oi?Symbol.for("react.responder"):60118,TNe=oi?Symbol.for("react.scope"):60119;function cl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case US:switch(e=e.type){case MS:case ly:case Q2:case V2:case H2:case q2:return e;default:switch(e=e&&e.$$typeof){case G2:case K2:case W2:case $2:case z2:return e;default:return t}}case PS:return t}}}function E8(e){return cl(e)===ly}var INe={AsyncMode:MS,ConcurrentMode:ly,ContextConsumer:G2,ContextProvider:z2,Element:US,ForwardRef:K2,Fragment:Q2,Lazy:W2,Memo:$2,Portal:PS,Profiler:V2,StrictMode:H2,Suspense:q2,isAsyncMode:function(e){return E8(e)||cl(e)===MS},isConcurrentMode:E8,isContextConsumer:function(e){return cl(e)===G2},isContextProvider:function(e){return cl(e)===z2},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===US},isForwardRef:function(e){return cl(e)===K2},isFragment:function(e){return cl(e)===Q2},isLazy:function(e){return cl(e)===W2},isMemo:function(e){return cl(e)===$2},isPortal:function(e){return cl(e)===PS},isProfiler:function(e){return cl(e)===V2},isStrictMode:function(e){return cl(e)===H2},isSuspense:function(e){return cl(e)===q2},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===Q2||e===ly||e===V2||e===H2||e===q2||e===SNe||typeof e=="object"&&e!==null&&(e.$$typeof===W2||e.$$typeof===$2||e.$$typeof===z2||e.$$typeof===G2||e.$$typeof===K2||e.$$typeof===BNe||e.$$typeof===kNe||e.$$typeof===TNe||e.$$typeof===NNe)},typeOf:cl};Hn(function(e,t){});var C8=Hn(function(e){e.exports=INe}),_8={};_8[C8.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},_8[C8.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var QS=typeof document<"u";function cV(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):n+=a+" "}),n}var j3=function(e,t,r){var n=e.key+"-"+t.name;(r===!1||QS===!1&&e.compat!==void 0)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},D3=function(e,t,r){j3(e,t,r);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a="",s=t;do{var i=e.insert(t===s?"."+n:"",s,e.sheet,!0);QS||i===void 0||(a+=i),s=s.next}while(s!==void 0);if(!QS&&a.length!==0)return a}},FNe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},jNe=/[A-Z]|^ms/g,DNe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,uV=function(e){return e.charCodeAt(1)===45},S8=function(e){return e!=null&&typeof e!="boolean"},I_=iV(function(e){return uV(e)?e:e.replace(jNe,"-$&").toLowerCase()}),N8=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(DNe,function(r,n,a){return Ou={name:n,styles:a,next:Ou},n})}return FNe[e]===1||uV(e)||typeof t!="number"||t===0?t:t+"px"};function kx(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return Ou={name:r.name,styles:r.styles,next:Ou},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)Ou={name:n.name,styles:n.styles,next:Ou},n=n.next;var a=r.styles+";";return a}return function(c,A,d){var h="";if(Array.isArray(d))for(var m=0;m<d.length;m++)h+=kx(c,A,d[m])+";";else for(var p in d){var v=d[p];if(typeof v!="object")A!=null&&A[v]!==void 0?h+=p+"{"+A[v]+"}":S8(v)&&(h+=I_(p)+":"+N8(p,v)+";");else if(!Array.isArray(v)||typeof v[0]!="string"||A!=null&&A[v[0]]!==void 0){var x=kx(c,A,v);switch(p){case"animation":case"animationName":h+=I_(p)+":"+x+";";break;default:h+=p+"{"+x+"}"}}else for(var E=0;E<v.length;E++)S8(v[E])&&(h+=I_(p)+":"+N8(p,v[E])+";")}return h}(e,t,r);case"function":if(e!==void 0){var s=Ou,i=r(e);return Ou=s,kx(e,t,i)}break}if(t==null)return r;var o=t[r];return o!==void 0?o:r}var Ou,B8=/label:\s*([^\s;\n{]+)\s*(;|$)/g,LE=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";Ou=void 0;var s=e[0];s==null||s.raw===void 0?(n=!1,a+=kx(r,t,s)):a+=s[0];for(var i=1;i<e.length;i++)a+=kx(r,t,e[i]),n&&(a+=s[i]);B8.lastIndex=0;for(var o,c="";(o=B8.exec(a))!==null;)c+="-"+o[1];var A=function(d){for(var h,m=0,p=0,v=d.length;v>=4;++p,v-=4)h=1540483477*(65535&(h=255&d.charCodeAt(p)|(255&d.charCodeAt(++p))<<8|(255&d.charCodeAt(++p))<<16|(255&d.charCodeAt(++p))<<24))+(59797*(h>>>16)<<16),m=1540483477*(65535&(h^=h>>>24))+(59797*(h>>>16)<<16)^1540483477*(65535&m)+(59797*(m>>>16)<<16);switch(v){case 3:m^=(255&d.charCodeAt(p+2))<<16;case 2:m^=(255&d.charCodeAt(p+1))<<8;case 1:m=1540483477*(65535&(m^=255&d.charCodeAt(p)))+(59797*(m>>>16)<<16)}return(((m=1540483477*(65535&(m^=m>>>13))+(59797*(m>>>16)<<16))^m>>>15)>>>0).toString(36)}(a)+c;return{name:A,styles:a,next:Ou}},RNe=typeof document<"u",LNe=function(e){return e()},AV=!!Q.useInsertionEffect&&Q.useInsertionEffect,dV=RNe&&AV||LNe,k8=AV||Q.useLayoutEffect,tp=typeof document<"u",R3={}.hasOwnProperty,cy=Q.createContext(typeof HTMLElement<"u"?lV({key:"css"}):null);cy.Provider;var OE=function(e){return Q.forwardRef(function(t,r){var n=Q.useContext(cy);return e(t,n,r)})};tp||(OE=function(e){return function(t){var r=Q.useContext(cy);return r===null?(r=lV({key:"css"}),Q.createElement(cy.Provider,{value:r},e(t,r))):e(t,r)}});var L3=Q.createContext({}),HS="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",ONe=function(e,t){var r={};for(var n in t)R3.call(t,n)&&(r[n]=t[n]);return r[HS]=e,r},UNe=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;j3(t,r,n);var a=dV(function(){return D3(t,r,n)});if(!tp&&a!==void 0){for(var s,i=r.name,o=r.next;o!==void 0;)i+=" "+o.name,o=o.next;return Q.createElement("style",((s={})["data-emotion"]=t.key+" "+i,s.dangerouslySetInnerHTML={__html:a},s.nonce=t.sheet.nonce,s))}return null},PNe=OE(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[HS],s=[n],i="";typeof e.className=="string"?i=cV(t.registered,s,e.className):e.className!=null&&(i=e.className+" ");var o=LE(s,void 0,Q.useContext(L3));i+=t.key+"-"+o.name;var c={};for(var A in e)!R3.call(e,A)||A==="css"||A===HS||(c[A]=e[A]);return c.ref=r,c.className=i,Q.createElement(Q.Fragment,null,Q.createElement(UNe,{cache:t,serialized:o,isStringTag:typeof a=="string"}),Q.createElement(a,c))});Hn(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var xr=function(e,t){var r=arguments;if(t==null||!R3.call(t,"css"))return Q.createElement.apply(void 0,r);var n=r.length,a=new Array(n);a[0]=PNe,a[1]=ONe(e,t);for(var s=2;s<n;s++)a[s]=r[s];return Q.createElement.apply(null,a)};OE(function(e,t){var r=e.styles,n=LE([r],void 0,Q.useContext(L3));if(!tp){for(var a,s=n.name,i=n.styles,o=n.next;o!==void 0;)s+=" "+o.name,i+=o.styles,o=o.next;var c=t.compat===!0,A=t.insert("",{name:s,styles:i},t.sheet,c);return c?null:Q.createElement("style",((a={})["data-emotion"]=t.key+"-global "+s,a.dangerouslySetInnerHTML={__html:A},a.nonce=t.sheet.nonce,a))}var d=Q.useRef();return k8(function(){var h=t.key+"-global",m=new t.sheet.constructor({key:h,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),p=!1,v=document.querySelector('style[data-emotion="'+h+" "+n.name+'"]');return t.sheet.tags.length&&(m.before=t.sheet.tags[0]),v!==null&&(p=!0,v.setAttribute("data-emotion",h),m.hydrate([v])),d.current=[m,p],function(){m.flush()}},[t]),k8(function(){var h=d.current,m=h[0];if(h[1])h[1]=!1;else{if(n.next!==void 0&&D3(t,n.next,!0),m.tags.length){var p=m.tags[m.tags.length-1].nextElementSibling;m.before=p,m.flush()}t.insert("",n,m,!1)}},[t,n.name]),null});function O3(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return LE(t)}var MNe=function e(t){for(var r=t.length,n=0,a="";n<r;n++){var s=t[n];if(s!=null){var i=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))i=e(s);else for(var o in i="",s)s[o]&&o&&(i&&(i+=" "),i+=o);break;default:i=s}i&&(a&&(a+=" "),a+=i)}}return a};function QNe(e,t,r){var n=[],a=cV(e,n,r);return n.length<2?r:a+t(n)}var HNe=function(e){var t,r=e.cache,n=e.serializedArr,a=dV(function(){for(var s="",i=0;i<n.length;i++){var o=D3(r,n[i],!1);tp||o===void 0||(s+=o)}if(!tp)return s});return tp||a.length===0?null:Q.createElement("style",((t={})["data-emotion"]=r.key+" "+n.map(function(s){return s.name}).join(" "),t.dangerouslySetInnerHTML={__html:a},t.nonce=r.sheet.nonce,t))};OE(function(e,t){var r=[],n=function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];var A=LE(o,t.registered);return r.push(A),j3(t,A,!1),t.key+"-"+A.name},a={css:n,cx:function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return QNe(t.registered,n,MNe(o))},theme:Q.useContext(L3)},s=e.children(a);return Q.createElement(Q.Fragment,null,Q.createElement(HNe,{cache:t,serializedArr:r}),s)});function ei(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var s,i,o,c,A=[],d=!0,h=!1;try{if(o=(a=a.call(r)).next,n===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(s=o.call(a)).done)&&(A.push(s.value),A.length!==n);d=!0);}catch(m){h=!0,i=m}finally{try{if(!d&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(h)throw i}}return A}}(e,t)||eV(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Uu(e,t){if(e==null)return{};var r,n,a=function(i,o){if(i==null)return{};var c,A,d={},h=Object.keys(i);for(A=0;A<h.length;A++)c=h[A],o.indexOf(c)>=0||(d[c]=i[c]);return d}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function WA(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function fV(e){return WA(e).getComputedStyle(e)}const s2=Math.round;function hV(e){return pV(e)?(e.nodeName||"").toLowerCase():""}let i2;function mV(e){return e instanceof WA(e).HTMLElement}function X2(e){return e instanceof WA(e).Element}function pV(e){return e instanceof WA(e).Node}function T8(e){return typeof ShadowRoot>"u"?!1:e instanceof WA(e).ShadowRoot||e instanceof ShadowRoot}function gV(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=fV(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function VNe(){return/^((?!chrome|android).)*safari/i.test(function(){if(i2)return i2;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(i2=e.brands.map(t=>t.brand+"/"+t.version).join(" "),i2):navigator.userAgent}())}function xV(e){return X2(e)?e:e.contextElement}const vV={x:1,y:1};function I8(e){const t=xV(e);if(!mV(t))return vV;const r=t.getBoundingClientRect(),{width:n,height:a,fallback:s}=function(c){const A=fV(c);let d=parseFloat(A.width),h=parseFloat(A.height);const m=c.offsetWidth,p=c.offsetHeight,v=s2(d)!==m||s2(h)!==p;return v&&(d=m,h=p),{width:d,height:h,fallback:v}}(t);let i=(s?s2(r.width):r.width)/n,o=(s?s2(r.height):r.height)/a;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}function F8(e,t,r,n){var a,s;t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=xV(e);let c=vV;t&&(c=I8(e));const A=o?WA(o):window,d=VNe()&&r;let h=(i.left+(d&&((a=A.visualViewport)==null?void 0:a.offsetLeft)||0))/c.x,m=(i.top+(d&&((s=A.visualViewport)==null?void 0:s.offsetTop)||0))/c.y,p=i.width/c.x,v=i.height/c.y;if(o){const x=WA(o),E=n;let _=x.frameElement;for(;_&&n&&E!==x;){const B=I8(_),T=_.getBoundingClientRect(),I=getComputedStyle(_);T.x+=(_.clientLeft+parseFloat(I.paddingLeft))*B.x,T.y+=(_.clientTop+parseFloat(I.paddingTop))*B.y,h*=B.x,m*=B.y,p*=B.x,v*=B.y,h+=T.x,m+=T.y,_=WA(_).frameElement}}return{width:p,height:v,top:m,right:h+p,bottom:m+v,left:h,x:h,y:m}}function zNe(e){if(hV(e)==="html")return e;const t=e.assignedSlot||e.parentNode||T8(e)&&e.host||function(r){return((pV(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return T8(t)?t.host:t}function bV(e){const t=zNe(e);return function(r){return["html","body","#document"].includes(hV(r))}(t)?t.ownerDocument.body:mV(t)&&gV(t)?t:bV(t)}function Y2(e,t){var r;t===void 0&&(t=[]);const n=bV(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=WA(n);return a?t.concat(s,s.visualViewport||[],gV(n)?n:[]):t.concat(n,Y2(n))}var VS=typeof document<"u"?Q.useLayoutEffect:Q.useEffect,GNe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],uy=function(){};function KNe(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function qNe(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s=[].concat(n);if(t&&e)for(var i in t)t.hasOwnProperty(i)&&t[i]&&s.push("".concat(KNe(e,i)));return s.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var j8=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):Yh(e)==="object"&&e!==null?[e]:[];var t},D8=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,dr({},Uu(e,GNe))},Va=function(e,t,r){var n=e.cx,a=e.getStyles,s=e.getClassNames,i=e.className;return{css:a(t,e),className:n(r??{},s(t,e),i)}};function UE(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function wV(e){return UE(e)?window.pageYOffset:e.scrollTop}function Ay(e,t){UE(e)?window.scrollTo(0,t):e.scrollTop=t}function $Ne(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function o2(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:uy,a=wV(e),s=t-a,i=10,o=0;function c(){var A=$Ne(o+=i,a,s,r);Ay(e,A),o<r?window.requestAnimationFrame(c):n(e)}c()}function R8(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?Ay(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&Ay(e,Math.max(t.offsetTop-a,0))}function L8(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var yV=!1,WNe={get passive(){return yV=!0}},l2=typeof window<"u"?window:{};l2.addEventListener&&l2.removeEventListener&&(l2.addEventListener("p",uy,WNe),l2.removeEventListener("p",uy,!1));var XNe=yV;function YNe(e){return e!=null}function c2(e,t,r){return e?t:r}var JNe=["children","innerProps"],ZNe=["children","innerProps"];function eBe(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,s=e.shouldScroll,i=e.isFixedPosition,o=e.controlHeight,c=function(ee){var W=getComputedStyle(ee),te=W.position==="absolute",G=/(auto|scroll)/;if(W.position==="fixed")return document.documentElement;for(var q=ee;q=q.parentElement;)if(W=getComputedStyle(q),(!te||W.position!=="static")&&G.test(W.overflow+W.overflowY+W.overflowX))return q;return document.documentElement}(r),A={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return A;var d,h=c.getBoundingClientRect().height,m=r.getBoundingClientRect(),p=m.bottom,v=m.height,x=m.top,E=r.offsetParent.getBoundingClientRect().top,_=i||UE(d=c)?window.innerHeight:d.clientHeight,B=wV(c),T=parseInt(getComputedStyle(r).marginBottom,10),I=parseInt(getComputedStyle(r).marginTop,10),L=E-I,k=_-x,w=L+B,y=h-B-x,N=p-_+B+T,U=B+x-I,j=160;switch(a){case"auto":case"bottom":if(k>=v)return{placement:"bottom",maxHeight:t};if(y>=v&&!i)return s&&o2(c,N,j),{placement:"bottom",maxHeight:t};if(!i&&y>=n||i&&k>=n)return s&&o2(c,N,j),{placement:"bottom",maxHeight:i?k-T:y-T};if(a==="auto"||i){var F=t,P=i?L:w;return P>=n&&(F=Math.min(P-T-o,t)),{placement:"top",maxHeight:F}}if(a==="bottom")return s&&Ay(c,N),{placement:"bottom",maxHeight:t};break;case"top":if(L>=v)return{placement:"top",maxHeight:t};if(w>=v&&!i)return s&&o2(c,U,j),{placement:"top",maxHeight:t};if(!i&&w>=n||i&&L>=n){var M=t;return(!i&&w>=n||i&&L>=n)&&(M=i?L-I:w-I),s&&o2(c,U,j),{placement:"top",maxHeight:M}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return A}var O8,EV=function(e){return e==="auto"?"bottom":e},CV=Q.createContext(null),tBe=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,a=e.menuPlacement,s=e.menuPosition,i=e.menuShouldScrollIntoView,o=e.theme,c=(Q.useContext(CV)||{}).setPortalPlacement,A=Q.useRef(null),d=ei(Q.useState(n),2),h=d[0],m=d[1],p=ei(Q.useState(null),2),v=p[0],x=p[1],E=o.spacing.controlHeight;return VS(function(){var _=A.current;if(_){var B=s==="fixed",T=eBe({maxHeight:n,menuEl:_,minHeight:r,placement:a,shouldScroll:i&&!B,isFixedPosition:B,controlHeight:E});m(T.maxHeight),x(T.placement),c==null||c(T.placement)}},[n,a,s,i,r,c,E]),t({ref:A,placerProps:dr(dr({},e),{},{placement:v||EV(a),maxHeight:h})})},rBe=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return xr("div",_r({},Va(e,"menu",{menu:!0}),{ref:r},n),t)},_V=function(e,t){var r=e.theme,n=r.spacing.baseUnit,a=r.colors;return dr({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},nBe=_V,aBe=_V,sBe=["size"],iBe=["innerProps","isRtl","size"],F_,j_,oBe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},SV=function(e){var t=e.size,r=Uu(e,sBe);return xr("svg",_r({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:oBe},r))},D_=function(e){return xr(SV,_r({size:20},e),xr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},U8=function(e){return xr(SV,_r({size:20},e),xr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},NV=function(e,t){var r=e.isFocused,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return dr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*a,":hover":{color:r?s.neutral80:s.neutral40}})},lBe=NV,cBe=NV,uBe=function(){var e=O3.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(O8||(F_=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],j_||(j_=F_.slice(0)),O8=Object.freeze(Object.defineProperties(F_,{raw:{value:Object.freeze(j_)}})))),R_=function(e){var t=e.delay,r=e.offset;return xr("span",{css:O3({animation:"".concat(uBe," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},ABe=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.innerRef,s=e.innerProps,i=e.menuIsOpen;return xr("div",_r({ref:a},Va(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":i}),s,{"aria-disabled":r||void 0}),t)},dBe=["data"],fBe=function(e){var t=e.children,r=e.cx,n=e.getStyles,a=e.getClassNames,s=e.Heading,i=e.headingProps,o=e.innerProps,c=e.label,A=e.theme,d=e.selectProps;return xr("div",_r({},Va(e,"group",{group:!0}),o),xr(s,_r({},i,{selectProps:d,theme:A,getStyles:n,getClassNames:a,cx:r}),c),xr("div",null,t))},hBe=["innerRef","isDisabled","isHidden","inputClassName"],BV={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},mBe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":dr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},BV)},pBe=function(e){return dr({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},BV)},P8=function(e){var t=e.children,r=e.innerProps;return xr("div",r,t)},gBe=function(e){var t=e.children,r=e.components,n=e.data,a=e.innerProps,s=e.isDisabled,i=e.removeProps,o=e.selectProps,c=r.Container,A=r.Label,d=r.Remove;return xr(c,{data:n,innerProps:dr(dr({},Va(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:o},xr(A,{data:n,innerProps:dr({},Va(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},t),xr(d,{data:n,innerProps:dr(dr({},Va(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},i),selectProps:o}))},xBe={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return xr("div",_r({},Va(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||xr(D_,null))},Control:ABe,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return xr("div",_r({},Va(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||xr(U8,null))},DownChevron:U8,CrossIcon:D_,Group:fBe,GroupHeading:function(e){var t=D8(e);t.data;var r=Uu(t,dBe);return xr("div",_r({},Va(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return xr("div",_r({},Va(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return xr("span",_r({},t,Va(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,n=D8(e),a=n.innerRef,s=n.isDisabled,i=n.isHidden,o=n.inputClassName,c=Uu(n,hBe);return xr("div",_r({},Va(e,"input",{"input-container":!0}),{"data-value":r||""}),xr("input",_r({className:t({input:!0},o),ref:a,style:pBe(i),disabled:s},c)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,a=n===void 0?4:n,s=Uu(e,iBe);return xr("div",_r({},Va(dr(dr({},s),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),xr(R_,{delay:0,offset:r}),xr(R_,{delay:160,offset:!0}),xr(R_,{delay:320,offset:!r}))},Menu:rBe,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,a=e.isMulti;return xr("div",_r({},Va(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:n},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,n=e.controlElement,a=e.innerProps,s=e.menuPlacement,i=e.menuPosition,o=Q.useRef(null),c=Q.useRef(null),A=ei(Q.useState(EV(s)),2),d=A[0],h=A[1],m=Q.useMemo(function(){return{setPortalPlacement:h}},[]),p=ei(Q.useState(null),2),v=p[0],x=p[1],E=Q.useCallback(function(){if(n){var I=function(w){var y=w.getBoundingClientRect();return{bottom:y.bottom,height:y.height,left:y.left,right:y.right,top:y.top,width:y.width}}(n),L=i==="fixed"?0:window.pageYOffset,k=I[d]+L;k===(v==null?void 0:v.offset)&&I.left===(v==null?void 0:v.rect.left)&&I.width===(v==null?void 0:v.rect.width)||x({offset:k,rect:I})}},[n,i,d,v==null?void 0:v.offset,v==null?void 0:v.rect.left,v==null?void 0:v.rect.width]);VS(function(){E()},[E]);var _=Q.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),n&&o.current&&(c.current=function(I,L,k,w){w===void 0&&(w={});const{ancestorScroll:y=!0,ancestorResize:N=!0,elementResize:U=!0,animationFrame:j=!1}=w,F=y&&!j,P=F||N?[...X2(I)?Y2(I):I.contextElement?Y2(I.contextElement):[],...Y2(L)]:[];P.forEach(te=>{F&&te.addEventListener("scroll",k,{passive:!0}),N&&te.addEventListener("resize",k)});let M,ee=null;if(U){let te=!0;ee=new ResizeObserver(()=>{te||k(),te=!1}),X2(I)&&!j&&ee.observe(I),X2(I)||!I.contextElement||j||ee.observe(I.contextElement),ee.observe(L)}let W=j?F8(I):null;return j&&function te(){const G=F8(I);!W||G.x===W.x&&G.y===W.y&&G.width===W.width&&G.height===W.height||k(),W=G,M=requestAnimationFrame(te)}(),k(),()=>{var te;P.forEach(G=>{F&&G.removeEventListener("scroll",k),N&&G.removeEventListener("resize",k)}),(te=ee)==null||te.disconnect(),ee=null,j&&cancelAnimationFrame(M)}}(n,o.current,E,{elementResize:"ResizeObserver"in window}))},[n,E]);VS(function(){_()},[_]);var B=Q.useCallback(function(I){o.current=I,_()},[_]);if(!t&&i!=="fixed"||!v)return null;var T=xr("div",_r({ref:B},Va(dr(dr({},e),{},{offset:v.offset,position:i,rect:v.rect}),"menuPortal",{"menu-portal":!0}),a),r);return xr(CV.Provider,{value:m},t?LCe.createPortal(T,t):T)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,n=e.innerProps,a=Uu(e,ZNe);return xr("div",_r({},Va(dr(dr({},a),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,n=e.innerProps,a=Uu(e,JNe);return xr("div",_r({},Va(dr(dr({},a),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:gBe,MultiValueContainer:P8,MultiValueLabel:P8,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return xr("div",_r({role:"button"},r),t||xr(D_,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.innerRef,i=e.innerProps;return xr("div",_r({},Va(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":a}),{ref:s,"aria-disabled":r},i),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return xr("div",_r({},Va(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,a=e.isRtl;return xr("div",_r({},Va(e,"container",{"--is-disabled":n,"--is-rtl":a}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return xr("div",_r({},Va(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,a=e.hasValue;return xr("div",_r({},Va(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":a}),r),t)}},M8=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function vBe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||M8(n)&&M8(a)))return!1;var n,a;return!0}for(var bBe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Q8=function(e){return xr("span",_r({css:bBe},e))},wBe={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,a=e.context,s=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=r===void 0?"":r,a=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(n,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,a=e.label,s=a===void 0?"":a,i=e.selectValue,o=e.isDisabled,c=e.isSelected,A=e.isAppleDevice,d=function(p,v){return p&&p.length?"".concat(p.indexOf(v)+1," of ").concat(p.length):""};if(t==="value"&&i)return"value ".concat(s," focused, ").concat(d(i,r),".");if(t==="menu"&&A){var h=o?" disabled":"",m="".concat(c?" selected":"").concat(h);return"".concat(s).concat(m,", ").concat(d(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},yBe=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,a=e.focusableOptions,s=e.isFocused,i=e.selectValue,o=e.selectProps,c=e.id,A=e.isAppleDevice,d=o.ariaLiveMessages,h=o.getOptionLabel,m=o.inputValue,p=o.isMulti,v=o.isOptionDisabled,x=o.isSearchable,E=o.menuIsOpen,_=o.options,B=o.screenReaderStatus,T=o.tabSelectsValue,I=o.isLoading,L=o["aria-label"],k=o["aria-live"],w=Q.useMemo(function(){return dr(dr({},wBe),d||{})},[d]),y=Q.useMemo(function(){var M,ee="";if(t&&w.onChange){var W=t.option,te=t.options,G=t.removedValue,q=t.removedValues,z=t.value,Z=G||W||(M=z,Array.isArray(M)?null:M),R=Z?h(Z):"",K=te||q||void 0,X=K?K.map(h):[],re=dr({isDisabled:Z&&v(Z,i),label:R,labels:X},t);ee=w.onChange(re)}return ee},[t,w,v,i,h]),N=Q.useMemo(function(){var M="",ee=r||n,W=!!(r&&i&&i.includes(r));if(ee&&w.onFocus){var te={focused:ee,label:h(ee),isDisabled:v(ee,i),isSelected:W,options:a,context:ee===r?"menu":"value",selectValue:i,isAppleDevice:A};M=w.onFocus(te)}return M},[r,n,h,v,w,a,i,A]),U=Q.useMemo(function(){var M="";if(E&&_.length&&!I&&w.onFilter){var ee=B({count:a.length});M=w.onFilter({inputValue:m,resultsMessage:ee})}return M},[a,m,E,w,_,B,I]),j=(t==null?void 0:t.action)==="initial-input-focus",F=Q.useMemo(function(){var M="";if(w.guidance){var ee=n?"value":E?"menu":"input";M=w.guidance({"aria-label":L,context:ee,isDisabled:r&&v(r,i),isMulti:p,isSearchable:x,tabSelectsValue:T,isInitialFocus:j})}return M},[L,r,n,p,v,x,E,w,i,T,j]),P=xr(Q.Fragment,null,xr("span",{id:"aria-selection"},y),xr("span",{id:"aria-focused"},N),xr("span",{id:"aria-results"},U),xr("span",{id:"aria-guidance"},F));return xr(Q.Fragment,null,xr(Q8,{id:c},j&&P),xr(Q8,{"aria-live":k,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!j&&P))},L_=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],EBe=new RegExp("["+L_.map(function(e){return e.letters}).join("")+"]","g"),kV={},O_=0;O_<L_.length;O_++)for(var U_=L_[O_],P_=0;P_<U_.letters.length;P_++)kV[U_.letters[P_]]=U_.base;var TV=function(e){return e.replace(EBe,function(t){return kV[t]})},CBe=function(e,t){t===void 0&&(t=vBe);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var i=e.apply(this,a);return r={lastResult:i,lastArgs:a,lastThis:this},i}return n.clear=function(){r=null},n}(TV),H8=function(e){return e.replace(/^\s+|\s+$/g,"")},_Be=function(e){return"".concat(e.label," ").concat(e.value)},SBe=["innerRef"];function NBe(e){var t=e.innerRef,r=function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];var o=Object.entries(n).filter(function(c){var A=ei(c,1)[0];return!s.includes(A)});return o.reduce(function(c,A){var d=ei(A,2),h=d[0],m=d[1];return c[h]=m,c},{})}(Uu(e,SBe),"onExited","in","enter","exit","appear");return xr("input",_r({ref:t},r,{css:O3({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var V8=["boxSizing","height","overflow","paddingRight","position"],z8={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function G8(e){e.preventDefault()}function K8(e){e.stopPropagation()}function q8(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function $8(){return"ontouchstart"in window||navigator.maxTouchPoints}var W8=!(typeof window>"u"||!window.document||!window.document.createElement),Og=0,xm={capture:!1,passive:!1},BBe=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},kBe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function TBe(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,a=function(i){var o=i.isEnabled,c=i.onBottomArrive,A=i.onBottomLeave,d=i.onTopArrive,h=i.onTopLeave,m=Q.useRef(!1),p=Q.useRef(!1),v=Q.useRef(0),x=Q.useRef(null),E=Q.useCallback(function(k,w){if(x.current!==null){var y=x.current,N=y.scrollTop,U=y.scrollHeight,j=y.clientHeight,F=x.current,P=w>0,M=U-j-N,ee=!1;M>w&&m.current&&(A&&A(k),m.current=!1),P&&p.current&&(h&&h(k),p.current=!1),P&&w>M?(c&&!m.current&&c(k),F.scrollTop=U,ee=!0,m.current=!0):!P&&-w>N&&(d&&!p.current&&d(k),F.scrollTop=0,ee=!0,p.current=!0),ee&&function(W){W.cancelable&&W.preventDefault(),W.stopPropagation()}(k)}},[c,A,d,h]),_=Q.useCallback(function(k){E(k,k.deltaY)},[E]),B=Q.useCallback(function(k){v.current=k.changedTouches[0].clientY},[]),T=Q.useCallback(function(k){var w=v.current-k.changedTouches[0].clientY;E(k,w)},[E]),I=Q.useCallback(function(k){if(k){var w=!!XNe&&{passive:!1};k.addEventListener("wheel",_,w),k.addEventListener("touchstart",B,w),k.addEventListener("touchmove",T,w)}},[T,B,_]),L=Q.useCallback(function(k){k&&(k.removeEventListener("wheel",_,!1),k.removeEventListener("touchstart",B,!1),k.removeEventListener("touchmove",T,!1))},[T,B,_]);return Q.useEffect(function(){if(o){var k=x.current;return I(k),function(){L(k)}}},[o,I,L]),function(k){x.current=k}}({isEnabled:n===void 0||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(i){var o=i.isEnabled,c=i.accountForScrollbars,A=c===void 0||c,d=Q.useRef({}),h=Q.useRef(null),m=Q.useCallback(function(v){if(W8){var x=document.body,E=x&&x.style;if(A&&V8.forEach(function(I){var L=E&&E[I];d.current[I]=L}),A&&Og<1){var _=parseInt(d.current.paddingRight,10)||0,B=document.body?document.body.clientWidth:0,T=window.innerWidth-B+_||0;Object.keys(z8).forEach(function(I){var L=z8[I];E&&(E[I]=L)}),E&&(E.paddingRight="".concat(T,"px"))}x&&$8()&&(x.addEventListener("touchmove",G8,xm),v&&(v.addEventListener("touchstart",q8,xm),v.addEventListener("touchmove",K8,xm))),Og+=1}},[A]),p=Q.useCallback(function(v){if(W8){var x=document.body,E=x&&x.style;Og=Math.max(Og-1,0),A&&Og<1&&V8.forEach(function(_){var B=d.current[_];E&&(E[_]=B)}),x&&$8()&&(x.removeEventListener("touchmove",G8,xm),v&&(v.removeEventListener("touchstart",q8,xm),v.removeEventListener("touchmove",K8,xm)))}},[A]);return Q.useEffect(function(){if(o){var v=h.current;return m(v),function(){p(v)}}},[o,m,p]),function(v){h.current=v}}({isEnabled:r});return xr(Q.Fragment,null,r&&xr("div",{onClick:BBe,css:kBe}),t(function(i){a(i),s(i)}))}var IBe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},FBe=function(e){var t=e.name,r=e.onFocus;return xr("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:IBe,value:"",onChange:function(){}})};function zS(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function IV(){return zS(/^Mac/i)}function jBe(){return zS(/^iPhone/i)||zS(/^iPad/i)||IV()&&navigator.maxTouchPoints>1}var DBe,RBe={clearIndicator:cBe,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.theme,s=a.colors,i=a.borderRadius;return dr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:n?s.primary:s.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:n?s.primary:s.neutral30}})},dropdownIndicator:lBe,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,a=r.spacing;return dr({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return dr({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var r=e.isDisabled,n=e.value,a=e.theme,s=a.spacing,i=a.colors;return dr(dr({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},mBe),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:i.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,a=e.theme,s=a.colors,i=a.spacing.baseUnit;return dr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*i})},loadingMessage:aBe,menu:function(e,t){var r,n=e.placement,a=e.theme,s=a.borderRadius,i=a.spacing,o=a.colors;return dr((Rm(r={label:"menu"},function(c){return c?{bottom:"top",top:"bottom"}[c]:"bottom"}(n),"100%"),Rm(r,"position","absolute"),Rm(r,"width","100%"),Rm(r,"zIndex",1),r),t?{}:{backgroundColor:o.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:i.menuGutter,marginTop:i.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return dr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors;return dr({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,a=r.colors,s=e.cropWithEllipsis;return dr({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors,i=e.isFocused;return dr({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:i?s.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:nBe,option:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.theme,i=s.spacing,o=s.colors;return dr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?o.primary:n?o.primary25:"transparent",color:r?o.neutral20:a?o.neutral0:"inherit",padding:"".concat(2*i.baseUnit,"px ").concat(3*i.baseUnit,"px"),":active":{backgroundColor:r?void 0:a?o.primary:o.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,a=r.colors;return dr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing,s=n.colors;return dr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,a=e.hasValue,s=e.selectProps.controlShouldRenderValue;return dr({alignItems:"center",display:n&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},M_={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},LBe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:L8(),captureMenuScroll:!L8(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=dr({ignoreCase:!0,ignoreAccents:!0,stringify:_Be,trim:!0,matchFrom:"any"},DBe),n=r.ignoreCase,a=r.ignoreAccents,s=r.stringify,i=r.trim,o=r.matchFrom,c=i?H8(t):t,A=i?H8(s(e)):s(e);return n&&(c=c.toLowerCase(),A=A.toLowerCase()),a&&(c=CBe(c),A=TV(A)),o==="start"?A.substr(0,c.length)===c:A.indexOf(c)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function X8(e,t,r,n){return{type:"option",data:t,isDisabled:jV(e,t,r),isSelected:DV(e,t,r),label:FV(e,t),value:dy(e,t),index:n}}function u2(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(i,o){return X8(e,i,t,o)}).filter(function(i){return Z8(e,i)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var s=X8(e,r,t,n);return Z8(e,s)?s:void 0}).filter(YNe)}function Y8(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,T3(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function J8(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,T3(n.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(n.index,"-").concat(a.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function Z8(e,t){var r=e.inputValue,n=r===void 0?"":r,a=t.data,s=t.isSelected,i=t.label,o=t.value;return(!LV(e)||!s)&&RV(e,{label:i,value:o,data:a},n)}var Q_=function(e,t){var r;return((r=e.find(function(n){return n.data===t}))===null||r===void 0?void 0:r.id)||null},FV=function(e,t){return e.getOptionLabel(t)},dy=function(e,t){return e.getOptionValue(t)};function jV(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function DV(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=dy(e,t);return r.some(function(a){return dy(e,a)===n})}function RV(e,t,r){return!e.filterOption||e.filterOption(t,r)}var LV=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},OBe=1,OV=function(e){(function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&DS(i,o)})(s,Q.Component);var t,r,n,a=uNe(s);function s(i){var o;if(function(h,m){if(!(h instanceof m))throw new TypeError("Cannot call a class as a function")}(this,s),(o=a.call(this,i)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},o.blockOptionHover=!1,o.isComposing=!1,o.commonProps=void 0,o.initialTouchX=0,o.initialTouchY=0,o.openAfterFocus=!1,o.scrollToFocusedOptionOnUpdate=!1,o.userIsDragging=void 0,o.isAppleDevice=IV()||jBe(),o.controlRef=null,o.getControlRef=function(h){o.controlRef=h},o.focusedOptionRef=null,o.getFocusedOptionRef=function(h){o.focusedOptionRef=h},o.menuListRef=null,o.getMenuListRef=function(h){o.menuListRef=h},o.inputRef=null,o.getInputRef=function(h){o.inputRef=h},o.focus=o.focusInput,o.blur=o.blurInput,o.onChange=function(h,m){var p=o.props,v=p.onChange,x=p.name;m.name=x,o.ariaOnChange(h,m),v(h,m)},o.setValue=function(h,m,p){var v=o.props,x=v.closeMenuOnSelect,E=v.isMulti,_=v.inputValue;o.onInputChange("",{action:"set-value",prevInputValue:_}),x&&(o.setState({inputIsHiddenAfterUpdate:!E}),o.onMenuClose()),o.setState({clearFocusValueOnUpdate:!0}),o.onChange(h,{action:m,option:p})},o.selectOption=function(h){var m=o.props,p=m.blurInputOnSelect,v=m.isMulti,x=m.name,E=o.state.selectValue,_=v&&o.isOptionSelected(h,E),B=o.isOptionDisabled(h,E);if(_){var T=o.getOptionValue(h);o.setValue(E.filter(function(I){return o.getOptionValue(I)!==T}),"deselect-option",h)}else{if(B)return void o.ariaOnChange(h,{action:"select-option",option:h,name:x});v?o.setValue([].concat(T3(E),[h]),"select-option",h):o.setValue(h,"select-option")}p&&o.blurInput()},o.removeValue=function(h){var m=o.props.isMulti,p=o.state.selectValue,v=o.getOptionValue(h),x=p.filter(function(_){return o.getOptionValue(_)!==v}),E=c2(m,x,x[0]||null);o.onChange(E,{action:"remove-value",removedValue:h}),o.focusInput()},o.clearValue=function(){var h=o.state.selectValue;o.onChange(c2(o.props.isMulti,[],null),{action:"clear",removedValues:h})},o.popValue=function(){var h=o.props.isMulti,m=o.state.selectValue,p=m[m.length-1],v=m.slice(0,m.length-1),x=c2(h,v,v[0]||null);o.onChange(x,{action:"pop-value",removedValue:p})},o.getFocusedOptionId=function(h){return Q_(o.state.focusableOptionsWithIds,h)},o.getFocusableOptionsWithIds=function(){return J8(u2(o.props,o.state.selectValue),o.getElementId("option"))},o.getValue=function(){return o.state.selectValue},o.cx=function(){for(var h=arguments.length,m=new Array(h),p=0;p<h;p++)m[p]=arguments[p];return qNe.apply(void 0,[o.props.classNamePrefix].concat(m))},o.getOptionLabel=function(h){return FV(o.props,h)},o.getOptionValue=function(h){return dy(o.props,h)},o.getStyles=function(h,m){var p=o.props.unstyled,v=RBe[h](m,p);v.boxSizing="border-box";var x=o.props.styles[h];return x?x(v,m):v},o.getClassNames=function(h,m){var p,v;return(p=(v=o.props.classNames)[h])===null||p===void 0?void 0:p.call(v,m)},o.getElementId=function(h){return"".concat(o.state.instancePrefix,"-").concat(h)},o.getComponents=function(){return h=o.props,dr(dr({},xBe),h.components);var h},o.buildCategorizedOptions=function(){return u2(o.props,o.state.selectValue)},o.getCategorizedOptions=function(){return o.props.menuIsOpen?o.buildCategorizedOptions():[]},o.buildFocusableOptions=function(){return Y8(o.buildCategorizedOptions())},o.getFocusableOptions=function(){return o.props.menuIsOpen?o.buildFocusableOptions():[]},o.ariaOnChange=function(h,m){o.setState({ariaSelection:dr({value:h},m)})},o.onMenuMouseDown=function(h){h.button===0&&(h.stopPropagation(),h.preventDefault(),o.focusInput())},o.onMenuMouseMove=function(h){o.blockOptionHover=!1},o.onControlMouseDown=function(h){if(!h.defaultPrevented){var m=o.props.openMenuOnClick;o.state.isFocused?o.props.menuIsOpen?h.target.tagName!=="INPUT"&&h.target.tagName!=="TEXTAREA"&&o.onMenuClose():m&&o.openMenu("first"):(m&&(o.openAfterFocus=!0),o.focusInput()),h.target.tagName!=="INPUT"&&h.target.tagName!=="TEXTAREA"&&h.preventDefault()}},o.onDropdownIndicatorMouseDown=function(h){if(!(h&&h.type==="mousedown"&&h.button!==0||o.props.isDisabled)){var m=o.props,p=m.isMulti,v=m.menuIsOpen;o.focusInput(),v?(o.setState({inputIsHiddenAfterUpdate:!p}),o.onMenuClose()):o.openMenu("first"),h.preventDefault()}},o.onClearIndicatorMouseDown=function(h){h&&h.type==="mousedown"&&h.button!==0||(o.clearValue(),h.preventDefault(),o.openAfterFocus=!1,h.type==="touchend"?o.focusInput():setTimeout(function(){return o.focusInput()}))},o.onScroll=function(h){typeof o.props.closeMenuOnScroll=="boolean"?h.target instanceof HTMLElement&&UE(h.target)&&o.props.onMenuClose():typeof o.props.closeMenuOnScroll=="function"&&o.props.closeMenuOnScroll(h)&&o.props.onMenuClose()},o.onCompositionStart=function(){o.isComposing=!0},o.onCompositionEnd=function(){o.isComposing=!1},o.onTouchStart=function(h){var m=h.touches,p=m&&m.item(0);p&&(o.initialTouchX=p.clientX,o.initialTouchY=p.clientY,o.userIsDragging=!1)},o.onTouchMove=function(h){var m=h.touches,p=m&&m.item(0);if(p){var v=Math.abs(p.clientX-o.initialTouchX),x=Math.abs(p.clientY-o.initialTouchY);o.userIsDragging=v>5||x>5}},o.onTouchEnd=function(h){o.userIsDragging||(o.controlRef&&!o.controlRef.contains(h.target)&&o.menuListRef&&!o.menuListRef.contains(h.target)&&o.blurInput(),o.initialTouchX=0,o.initialTouchY=0)},o.onControlTouchEnd=function(h){o.userIsDragging||o.onControlMouseDown(h)},o.onClearIndicatorTouchEnd=function(h){o.userIsDragging||o.onClearIndicatorMouseDown(h)},o.onDropdownIndicatorTouchEnd=function(h){o.userIsDragging||o.onDropdownIndicatorMouseDown(h)},o.handleInputChange=function(h){var m=o.props.inputValue,p=h.currentTarget.value;o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange(p,{action:"input-change",prevInputValue:m}),o.props.menuIsOpen||o.onMenuOpen()},o.onInputFocus=function(h){o.props.onFocus&&o.props.onFocus(h),o.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(o.openAfterFocus||o.props.openMenuOnFocus)&&o.openMenu("first"),o.openAfterFocus=!1},o.onInputBlur=function(h){var m=o.props.inputValue;o.menuListRef&&o.menuListRef.contains(document.activeElement)?o.inputRef.focus():(o.props.onBlur&&o.props.onBlur(h),o.onInputChange("",{action:"input-blur",prevInputValue:m}),o.onMenuClose(),o.setState({focusedValue:null,isFocused:!1}))},o.onOptionHover=function(h){if(!o.blockOptionHover&&o.state.focusedOption!==h){var m=o.getFocusableOptions().indexOf(h);o.setState({focusedOption:h,focusedOptionId:m>-1?o.getFocusedOptionId(h):null})}},o.shouldHideSelectedOptions=function(){return LV(o.props)},o.onValueInputFocus=function(h){h.preventDefault(),h.stopPropagation(),o.focus()},o.onKeyDown=function(h){var m=o.props,p=m.isMulti,v=m.backspaceRemovesValue,x=m.escapeClearsValue,E=m.inputValue,_=m.isClearable,B=m.isDisabled,T=m.menuIsOpen,I=m.onKeyDown,L=m.tabSelectsValue,k=m.openMenuOnFocus,w=o.state,y=w.focusedOption,N=w.focusedValue,U=w.selectValue;if(!(B||typeof I=="function"&&(I(h),h.defaultPrevented))){switch(o.blockOptionHover=!0,h.key){case"ArrowLeft":if(!p||E)return;o.focusValue("previous");break;case"ArrowRight":if(!p||E)return;o.focusValue("next");break;case"Delete":case"Backspace":if(E)return;if(N)o.removeValue(N);else{if(!v)return;p?o.popValue():_&&o.clearValue()}break;case"Tab":if(o.isComposing||h.shiftKey||!T||!L||!y||k&&o.isOptionSelected(y,U))return;o.selectOption(y);break;case"Enter":if(h.keyCode===229)break;if(T){if(!y||o.isComposing)return;o.selectOption(y);break}return;case"Escape":T?(o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange("",{action:"menu-close",prevInputValue:E}),o.onMenuClose()):_&&x&&o.clearValue();break;case" ":if(E)return;if(!T){o.openMenu("first");break}if(!y)return;o.selectOption(y);break;case"ArrowUp":T?o.focusOption("up"):o.openMenu("last");break;case"ArrowDown":T?o.focusOption("down"):o.openMenu("first");break;case"PageUp":if(!T)return;o.focusOption("pageup");break;case"PageDown":if(!T)return;o.focusOption("pagedown");break;case"Home":if(!T)return;o.focusOption("first");break;case"End":if(!T)return;o.focusOption("last");break;default:return}h.preventDefault()}},o.state.instancePrefix="react-select-"+(o.props.instanceId||++OBe),o.state.selectValue=j8(i.value),i.menuIsOpen&&o.state.selectValue.length){var c=o.getFocusableOptionsWithIds(),A=o.buildFocusableOptions(),d=A.indexOf(o.state.selectValue[0]);o.state.focusableOptionsWithIds=c,o.state.focusedOption=A[d],o.state.focusedOptionId=Q_(c,A[d])}return o}return t=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&R8(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var o=this.props,c=o.isDisabled,A=o.menuIsOpen,d=this.state.isFocused;(d&&!c&&i.isDisabled||d&&A&&!i.menuIsOpen)&&this.focusInput(),d&&c&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||c||!i.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(R8(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,c=this.state,A=c.selectValue,d=c.isFocused,h=this.buildFocusableOptions(),m=i==="first"?0:h.length-1;if(!this.props.isMulti){var p=h.indexOf(A[0]);p>-1&&(m=p)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:h[m],focusedOptionId:this.getFocusedOptionId(h[m])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,c=o.selectValue,A=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=c.indexOf(A);A||(d=-1);var h=c.length-1,m=-1;if(c.length){switch(i){case"previous":m=d===0?0:d===-1?h:d-1;break;case"next":d>-1&&d<h&&(m=d+1)}this.setState({inputIsHidden:m!==-1,focusedValue:c[m]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,c=this.state.focusedOption,A=this.getFocusableOptions();if(A.length){var d=0,h=A.indexOf(c);c||(h=-1),i==="up"?d=h>0?h-1:A.length-1:i==="down"?d=(h+1)%A.length:i==="pageup"?(d=h-o)<0&&(d=0):i==="pagedown"?(d=h+o)>A.length-1&&(d=A.length-1):i==="last"&&(d=A.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:A[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(A[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(M_):dr(dr({},M_),this.props.theme):M_}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,c=this.getStyles,A=this.getClassNames,d=this.getValue,h=this.selectOption,m=this.setValue,p=this.props,v=p.isMulti,x=p.isRtl,E=p.options;return{clearValue:i,cx:o,getStyles:c,getClassNames:A,getValue:d,hasValue:this.hasValue(),isMulti:v,isRtl:x,options:E,selectOption:h,selectProps:p,setValue:m,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,c=i.isMulti;return o===void 0?c:o}},{key:"isOptionDisabled",value:function(i,o){return jV(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return DV(this.props,i,o)}},{key:"filterOption",value:function(i,o){return RV(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,A=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:c,selectValue:A})}return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,c=i.isSearchable,A=i.inputId,d=i.inputValue,h=i.tabIndex,m=i.form,p=i.menuIsOpen,v=i.required,x=this.getComponents().Input,E=this.state,_=E.inputIsHidden,B=E.ariaSelection,T=this.commonProps,I=A||this.getElementId("input"),L=dr(dr(dr({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":v,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(B==null?void 0:B.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?Q.createElement(x,_r({},T,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:I,innerRef:this.getInputRef,isDisabled:o,isHidden:_,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:h,form:m,type:"text",value:d},L)):Q.createElement(NBe,_r({id:I,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:uy,onFocus:this.onInputFocus,disabled:o,tabIndex:h,inputMode:"none",form:m,value:""},L))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),c=o.MultiValue,A=o.MultiValueContainer,d=o.MultiValueLabel,h=o.MultiValueRemove,m=o.SingleValue,p=o.Placeholder,v=this.commonProps,x=this.props,E=x.controlShouldRenderValue,_=x.isDisabled,B=x.isMulti,T=x.inputValue,I=x.placeholder,L=this.state,k=L.selectValue,w=L.focusedValue,y=L.isFocused;if(!this.hasValue()||!E)return T?null:Q.createElement(p,_r({},v,{key:"placeholder",isDisabled:_,isFocused:y,innerProps:{id:this.getElementId("placeholder")}}),I);if(B)return k.map(function(U,j){var F=U===w,P="".concat(i.getOptionLabel(U),"-").concat(i.getOptionValue(U));return Q.createElement(c,_r({},v,{components:{Container:A,Label:d,Remove:h},isFocused:F,isDisabled:_,key:P,index:j,removeProps:{onClick:function(){return i.removeValue(U)},onTouchEnd:function(){return i.removeValue(U)},onMouseDown:function(M){M.preventDefault()}},data:U}),i.formatOptionLabel(U,"value"))});if(T)return null;var N=k[0];return Q.createElement(m,_r({},v,{data:N,isDisabled:_}),this.formatOptionLabel(N,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents().ClearIndicator,o=this.commonProps,c=this.props,A=c.isDisabled,d=c.isLoading,h=this.state.isFocused;if(!this.isClearable()||!i||A||!this.hasValue()||d)return null;var m={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return Q.createElement(i,_r({},o,{innerProps:m,isFocused:h}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents().LoadingIndicator,o=this.commonProps,c=this.props,A=c.isDisabled,d=c.isLoading,h=this.state.isFocused;return i&&d?Q.createElement(i,_r({},o,{innerProps:{"aria-hidden":"true"},isDisabled:A,isFocused:h})):null}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,c=i.IndicatorSeparator;if(!o||!c)return null;var A=this.commonProps,d=this.props.isDisabled,h=this.state.isFocused;return Q.createElement(c,_r({},A,{isDisabled:d,isFocused:h}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents().DropdownIndicator;if(!i)return null;var o=this.commonProps,c=this.props.isDisabled,A=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return Q.createElement(i,_r({},o,{innerProps:d,isDisabled:c,isFocused:A}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),c=o.Group,A=o.GroupHeading,d=o.Menu,h=o.MenuList,m=o.MenuPortal,p=o.LoadingMessage,v=o.NoOptionsMessage,x=o.Option,E=this.commonProps,_=this.state.focusedOption,B=this.props,T=B.captureMenuScroll,I=B.inputValue,L=B.isLoading,k=B.loadingMessage,w=B.minMenuHeight,y=B.maxMenuHeight,N=B.menuIsOpen,U=B.menuPlacement,j=B.menuPosition,F=B.menuPortalTarget,P=B.menuShouldBlockScroll,M=B.menuShouldScrollIntoView,ee=B.noOptionsMessage,W=B.onMenuScrollToTop,te=B.onMenuScrollToBottom;if(!N)return null;var G,q=function(X,re){var ne=X.type,ue=X.data,fe=X.isDisabled,be=X.isSelected,Ce=X.label,me=X.value,oe=_===ue,Le=fe?void 0:function(){return i.onOptionHover(ue)},Ye=fe?void 0:function(){return i.selectOption(ue)},Te="".concat(i.getElementId("option"),"-").concat(re),we={id:Te,onClick:Ye,onMouseMove:Le,onMouseOver:Le,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:be};return Q.createElement(x,_r({},E,{innerProps:we,data:ue,isDisabled:fe,isSelected:be,key:Te,label:Ce,type:ne,value:me,isFocused:oe,innerRef:oe?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(X.data,"menu"))};if(this.hasOptions())G=this.getCategorizedOptions().map(function(X){if(X.type==="group"){var re=X.data,ne=X.options,ue=X.index,fe="".concat(i.getElementId("group"),"-").concat(ue),be="".concat(fe,"-heading");return Q.createElement(c,_r({},E,{key:fe,data:re,options:ne,Heading:A,headingProps:{id:be,data:X.data},label:i.formatGroupLabel(X.data)}),X.options.map(function(Ce){return q(Ce,"".concat(ue,"-").concat(Ce.index))}))}if(X.type==="option")return q(X,"".concat(X.index))});else if(L){var z=k({inputValue:I});if(z===null)return null;G=Q.createElement(p,E,z)}else{var Z=ee({inputValue:I});if(Z===null)return null;G=Q.createElement(v,E,Z)}var R={minMenuHeight:w,maxMenuHeight:y,menuPlacement:U,menuPosition:j,menuShouldScrollIntoView:M},K=Q.createElement(tBe,_r({},E,R),function(X){var re=X.ref,ne=X.placerProps,ue=ne.placement,fe=ne.maxHeight;return Q.createElement(d,_r({},E,R,{innerRef:re,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:L,placement:ue}),Q.createElement(TBe,{captureEnabled:T,onTopArrive:W,onBottomArrive:te,lockEnabled:P},function(be){return Q.createElement(h,_r({},E,{innerRef:function(Ce){i.getMenuListRef(Ce),be(Ce)},innerProps:{role:"listbox","aria-multiselectable":E.isMulti,id:i.getElementId("listbox")},isLoading:L,maxHeight:fe,focusedOption:_}),G)}))});return F||j==="fixed"?Q.createElement(m,_r({},E,{appendTo:F,controlElement:this.controlRef,menuPlacement:U,menuPosition:j}),K):K}},{key:"renderFormField",value:function(){var i=this,o=this.props,c=o.delimiter,A=o.isDisabled,d=o.isMulti,h=o.name,m=o.required,p=this.state.selectValue;if(m&&!this.hasValue()&&!A)return Q.createElement(FBe,{name:h,onFocus:this.onValueInputFocus});if(h&&!A){if(d){if(c){var v=p.map(function(_){return i.getOptionValue(_)}).join(c);return Q.createElement("input",{name:h,type:"hidden",value:v})}var x=p.length>0?p.map(function(_,B){return Q.createElement("input",{key:"i-".concat(B),name:h,type:"hidden",value:i.getOptionValue(_)})}):Q.createElement("input",{name:h,type:"hidden",value:""});return Q.createElement("div",null,x)}var E=p[0]?this.getOptionValue(p[0]):"";return Q.createElement("input",{name:h,type:"hidden",value:E})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,c=o.ariaSelection,A=o.focusedOption,d=o.focusedValue,h=o.isFocused,m=o.selectValue,p=this.getFocusableOptions();return Q.createElement(yBe,_r({},i,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:A,focusedValue:d,isFocused:h,selectValue:m,focusableOptions:p,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,c=i.IndicatorsContainer,A=i.SelectContainer,d=i.ValueContainer,h=this.props,m=h.className,p=h.id,v=h.isDisabled,x=h.menuIsOpen,E=this.state.isFocused,_=this.commonProps=this.getCommonProps();return Q.createElement(A,_r({},_,{className:m,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:v,isFocused:E}),this.renderLiveRegion(),Q.createElement(o,_r({},_,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:v,isFocused:E,menuIsOpen:x}),Q.createElement(d,_r({},_,{isDisabled:v}),this.renderPlaceholderOrValue(),this.renderInput()),Q.createElement(c,_r({},_,{isDisabled:v}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(i,o){var c=o.prevProps,A=o.clearFocusValueOnUpdate,d=o.inputIsHiddenAfterUpdate,h=o.ariaSelection,m=o.isFocused,p=o.prevWasFocused,v=o.instancePrefix,x=i.options,E=i.value,_=i.menuIsOpen,B=i.inputValue,T=i.isMulti,I=j8(E),L={};if(c&&(E!==c.value||x!==c.options||_!==c.menuIsOpen||B!==c.inputValue)){var k=_?function(P,M){return Y8(u2(P,M))}(i,I):[],w=_?J8(u2(i,I),"".concat(v,"-option")):[],y=A?function(P,M){var ee=P.focusedValue,W=P.selectValue.indexOf(ee);if(W>-1){if(M.indexOf(ee)>-1)return ee;if(W<M.length)return M[W]}return null}(o,I):null,N=function(P,M){var ee=P.focusedOption;return ee&&M.indexOf(ee)>-1?ee:M[0]}(o,k);L={selectValue:I,focusedOption:N,focusedOptionId:Q_(w,N),focusableOptionsWithIds:w,focusedValue:y,clearFocusValueOnUpdate:!1}}var U=d!=null&&i!==c?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},j=h,F=m&&p;return m&&!F&&(j={value:c2(T,I,I[0]||null),options:I,action:"initial-input-focus"},F=!p),(h==null?void 0:h.action)==="initial-input-focus"&&(j=null),dr(dr(dr({},L),U),{},{prevProps:i,ariaSelection:j,prevWasFocused:F})}}],r&&h8(t.prototype,r),n&&h8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();OV.defaultProps=LBe;var UBe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],PBe=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],U3=Hn(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),MBe=Hn(function(e){var t=U3.default;e.exports=function(r,n){if(t(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n||"default");if(t(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),UV=Hn(function(e){var t=U3.default;e.exports=function(r){var n=MBe(r,"string");return t(n)==="symbol"?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}),QBe=Hn(function(e){e.exports=function(t,r,n){return(r=UV(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},e.exports.__esModule=!0,e.exports.default=e.exports});Hn(function(e){function t(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),a.push.apply(a,s)}return a}e.exports=function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(s){QBe(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),Hn(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),Hn(function(e){function t(r,n){for(var a=0;a<n.length;a++){var s=n[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,UV(s.key),s)}}e.exports=function(r,n,a){return n&&t(r.prototype,n),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var HBe=Hn(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});Hn(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&HBe(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var eL=Hn(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),VBe=Hn(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),zBe=Hn(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),GBe=Hn(function(e){var t=U3.default;e.exports=function(r,n){if(n&&(t(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zBe(r)},e.exports.__esModule=!0,e.exports.default=e.exports});Hn(function(e){e.exports=function(t){var r=VBe();return function(){var n,a=eL(t);if(r){var s=eL(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return GBe(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports});var GS=Hn(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports}),KBe=Hn(function(e){e.exports=function(t){if(Array.isArray(t))return GS(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),qBe=Hn(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),PV=Hn(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return GS(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?GS(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),$Be=Hn(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});Hn(function(e){e.exports=function(t){return KBe(t)||qBe(t)||PV(t)||$Be()},e.exports.__esModule=!0,e.exports.default=e.exports});var WBe=Hn(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),XBe=Hn(function(e){e.exports=function(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,o,c=[],A=!0,d=!1;try{if(i=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;A=!1}else for(;!(A=(a=i.call(n)).done)&&(c.push(a.value),c.length!==r);A=!0);}catch(h){d=!0,s=h}finally{try{if(!A&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return c}},e.exports.__esModule=!0,e.exports.default=e.exports}),YBe=Hn(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});Hn(function(e){e.exports=function(t,r){return WBe(t)||XBe(t,r)||PV(t,r)||YBe()},e.exports.__esModule=!0,e.exports.default=e.exports});var JBe=Hn(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||(s[n]=t[n]);return s},e.exports.__esModule=!0,e.exports.default=e.exports});Hn(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s=JBe(t,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s},e.exports.__esModule=!0,e.exports.default=e.exports}),Hn(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var ZBe=Q.forwardRef(function(e,t){var r=function(a){var s=a.defaultOptions,i=s!==void 0&&s,o=a.cacheOptions,c=o!==void 0&&o,A=a.loadOptions;a.options;var d=a.isLoading,h=d!==void 0&&d,m=a.onInputChange,p=a.filterOption,v=p===void 0?null:p,x=Uu(a,PBe),E=x.inputValue,_=Q.useRef(void 0),B=Q.useRef(!1),T=ei(Q.useState(Array.isArray(i)?i:void 0),2),I=T[0],L=T[1],k=ei(Q.useState(E!==void 0?E:""),2),w=k[0],y=k[1],N=ei(Q.useState(i===!0),2),U=N[0],j=N[1],F=ei(Q.useState(void 0),2),P=F[0],M=F[1],ee=ei(Q.useState([]),2),W=ee[0],te=ee[1],G=ei(Q.useState(!1),2),q=G[0],z=G[1],Z=ei(Q.useState({}),2),R=Z[0],K=Z[1],X=ei(Q.useState(void 0),2),re=X[0],ne=X[1],ue=ei(Q.useState(void 0),2),fe=ue[0],be=ue[1];c!==fe&&(K({}),be(c)),i!==re&&(L(Array.isArray(i)?i:void 0),ne(i)),Q.useEffect(function(){return B.current=!0,function(){B.current=!1}},[]);var Ce=Q.useCallback(function(Le,Ye){if(!A)return Ye();var Te=A(Le,Ye);Te&&typeof Te.then=="function"&&Te.then(Ye,function(){return Ye()})},[A]);Q.useEffect(function(){i===!0&&Ce(w,function(Le){B.current&&(L(Le||[]),j(!!_.current))})},[]);var me=Q.useCallback(function(Le,Ye){var Te=function(Fe,He,Xe){if(Xe){var ut=Xe(Fe,He);if(typeof ut=="string")return ut}return Fe}(Le,Ye,m);if(!Te)return _.current=void 0,y(""),M(""),te([]),j(!1),void z(!1);if(c&&R[Te])y(Te),M(Te),te(R[Te]),j(!1),z(!1);else{var we=_.current={};y(Te),j(!0),z(!P),Ce(Te,function(Fe){B&&we===_.current&&(_.current=void 0,j(!1),M(Te),te(Fe||[]),z(!1),K(Fe?dr(dr({},R),{},Rm({},Te,Fe)):R))})}},[c,Ce,P,R,m]),oe=q?[]:w&&P?W:I||[];return dr(dr({},x),{},{options:oe,isLoading:U||h,onInputChange:me,filterOption:v})}(e),n=function(a){var s=a.defaultInputValue,i=s===void 0?"":s,o=a.defaultMenuIsOpen,c=o!==void 0&&o,A=a.defaultValue,d=A===void 0?null:A,h=a.inputValue,m=a.menuIsOpen,p=a.onChange,v=a.onInputChange,x=a.onMenuClose,E=a.onMenuOpen,_=a.value,B=Uu(a,UBe),T=ei(Q.useState(h!==void 0?h:i),2),I=T[0],L=T[1],k=ei(Q.useState(m!==void 0?m:c),2),w=k[0],y=k[1],N=ei(Q.useState(_!==void 0?_:d),2),U=N[0],j=N[1],F=Q.useCallback(function(q,z){typeof p=="function"&&p(q,z),j(q)},[p]),P=Q.useCallback(function(q,z){var Z;typeof v=="function"&&(Z=v(q,z)),L(Z!==void 0?Z:q)},[v]),M=Q.useCallback(function(){typeof E=="function"&&E(),y(!0)},[E]),ee=Q.useCallback(function(){typeof x=="function"&&x(),y(!1)},[x]),W=h!==void 0?h:I,te=m!==void 0?m:w,G=_!==void 0?_:U;return dr(dr({},B),{},{inputValue:W,menuIsOpen:te,onChange:F,onInputChange:P,onMenuClose:ee,onMenuOpen:M,value:G})}(r);return Q.createElement(OV,_r({ref:t},n))}),e3e=ZBe,t3e=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;a--!=0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;a--!=0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!=0;){var i=s[a];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r},Lm;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(Lm||(Lm={}));class Fh{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:a,id:s="__googleMapsScriptId",language:i,libraries:o=[],mapIds:c,nonce:A,region:d,retries:h=3,url:m="https://maps.googleapis.com/maps/api/js",version:p}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=s||"__googleMapsScriptId",this.language=i,this.libraries=o,this.mapIds=c,this.nonce=A,this.region=d,this.retries=h,this.url=m,this.version=p,Fh.instance){if(!t3e(this.options,Fh.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Fh.instance.options)}`);return Fh.instance}Fh.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Lm.FAILURE:this.done?Lm.SUCCESS:this.loading?Lm.LOADING:Lm.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var r3e=function(e,t,r){var n,a=e.bounds,s=e.location,i=function(c,A){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&A.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var m=0;for(h=Object.getOwnPropertySymbols(c);m<h.length;m++)A.indexOf(h[m])<0&&Object.prototype.propertyIsEnumerable.call(c,h[m])&&(d[h[m]]=c[h[m]])}return d}(e,["bounds","location"]),o=Xh({input:t},i);return r&&(o.sessionToken=r),a&&(o.bounds=new((n=google.maps.LatLngBounds).bind.apply(n,function(){for(var c=0,A=0,d=arguments.length;A<d;A++)c+=arguments[A].length;var h=Array(c),m=0;for(A=0;A<d;A++)for(var p=arguments[A],v=0,x=p.length;v<x;v++,m++)h[m]=p[v];return h}([void 0],a)))),s&&(o.location=new google.maps.LatLng(s)),o},n3e=function(e){var t=e.autocompletionRequest,r=e.debounce,n=e.minLengthAutocomplete,a=e.placesService,s=e.sessionToken,i=e.withSessionToken,o=function(c,A,d){d===void 0&&(d={});var h=d.maxWait,m=Q.useRef(null),p=Q.useRef([]),v=d.leading,x=d.trailing===void 0||d.trailing,E=Q.useRef(!1),_=Q.useRef(null),B=Q.useRef(!1),T=Q.useRef(c);T.current=c;var I=Q.useCallback(function(){clearTimeout(_.current),clearTimeout(m.current),m.current=null,p.current=[],_.current=null,E.current=!1},[]);Q.useEffect(function(){return B.current=!1,function(){B.current=!0}},[]);var L=Q.useCallback(function(){for(var w=[],y=0;y<arguments.length;y++)w[y]=arguments[y];p.current=w,clearTimeout(_.current),E.current&&(E.current=!1),_.current||!v||E.current||(T.current.apply(T,w),E.current=!0),_.current=setTimeout(function(){var N=!0;v&&E.current&&(N=!1),I(),!B.current&&x&&N&&T.current.apply(T,w)},A),h&&!m.current&&x&&(m.current=setTimeout(function(){var N=p.current;I(),B.current||T.current.apply(null,N)},h))},[h,A,I,v,x]),k=Q.useCallback(function(){_.current&&(T.current.apply(null,p.current),I())},[I]);return[L,I,k]}(function(c,A){if(!a)return A([]);if(c.length<n)return A([]);var d=Xh({},t);a.getPlacePredictions(r3e(d,c,i&&s),function(h){A((h||[]).map(function(m){return{label:m.description,value:m}}))})},r)[0];return o},tL=Q.forwardRef(function(e,t){var r,n,a,s,i,o,c,A,d=function(x){var E=x.apiKey,_=x.apiOptions,B=x.onLoadFailed,T=Q.useState(void 0),I=T[0],L=T[1],k=Q.useState(void 0),w=k[0],y=k[1],N=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");L(new window.google.maps.places.AutocompleteService),y(new google.maps.places.AutocompleteSessionToken)};return Q.useEffect(function(){E?oNe(void 0,void 0,void 0,function(){var U;return lNe(this,function(j){switch(j.label){case 0:if(!E)return[2];j.label=1;case 1:return j.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new Fh(Xh({apiKey:E},Xh({libraries:["places"]},_))).load()];case 2:j.sent(),j.label=3;case 3:return N(),[3,5];case 4:return U=j.sent(),typeof B=="function"&&B(U),[3,5];case 5:return[2]}})}):N()},[]),{placesService:I,sessionToken:w,setSessionToken:y}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(n=e.apiOptions)!==null&&n!==void 0?n:{},onLoadFailed:(a=e.onLoadFailed)!==null&&a!==void 0?a:console.error}),h=d.placesService,m=d.sessionToken,p=d.setSessionToken,v=n3e({autocompletionRequest:(s=e.autocompletionRequest)!==null&&s!==void 0?s:{},debounce:(i=e.debounce)!==null&&i!==void 0?i:300,minLengthAutocomplete:(o=e.minLengthAutocomplete)!==null&&o!==void 0?o:0,placesService:h,sessionToken:m,withSessionToken:(c=e.withSessionToken)!==null&&c!==void 0&&c});return Q.useImperativeHandle(t,function(){return{getSessionToken:function(){return m},refreshSessionToken:function(){p(new google.maps.places.AutocompleteSessionToken)}}},[m]),mt.createElement(e3e,Xh({},(A=e.selectProps)!==null&&A!==void 0?A:{},{loadOptions:v,getOptionValue:function(x){return x.value.place_id}}))});const a3e=e=>{const[t,r]=Q.useState(!1),[n,a]=Q.useState(null);return Q.useEffect(()=>{const s="google-maps-script";if(document.getElementById(s)||window.google){r(!0);return}const i=document.createElement("script");i.id=s,i.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,i.async=!0,i.defer=!0,i.onload=()=>r(!0),i.onerror=()=>a(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(i)},[e]),{isLoaded:t,error:n}},s3e=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de práctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisión y mentoría"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicación interna"}],i3e=["Mecánica Industrial","Mecánica Automotriz"],o3e=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:s3e.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),rL=({empresas:e,isLoaded:t,route:r})=>{const n=Q.useRef(null),a=Q.useRef(null),s=Q.useRef([]),i=Q.useRef(null),o=e.filter(c=>{var A,d;return((A=c.coordenadas)==null?void 0:A.lat)&&((d=c.coordenadas)==null?void 0:d.lng)});return Q.useEffect(()=>{!t||!n.current||!window.google||(a.current||(a.current=new window.google.maps.Map(n.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),i.current||(i.current=new window.google.maps.DirectionsRenderer),s.current.forEach(c=>c.setMap(null)),s.current=[],i.current.setMap(null),r?(i.current.setMap(a.current),i.current.setDirections(r)):o.forEach(c=>{const A=new window.google.maps.Marker({position:{lat:c.coordenadas.lat,lng:c.coordenadas.lng},map:a.current,title:c.nombre}),d=new window.google.maps.InfoWindow({content:`<div style="font-weight: bold;">${c.nombre}</div><div>${c.direccion}</div>`});A.addListener("click",()=>{d.open(a.current,A)}),s.current.push(A)}))},[o,t,r]),l.jsxs("div",{className:"relative",id:"map-container-for-pdf",children:[l.jsx("div",{ref:n,className:"h-[600px] w-full rounded-lg border"}),!r&&o.length===0&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:l.jsx("div",{className:"text-center p-6",children:l.jsx("p",{className:"text-gray-600 text-lg",children:"📍 No hay empresas geo-localizadas"})})})]})},l3e=({route:e,travelMode:t})=>{const a=t==="TRANSIT"?45:30,s=e.routes[0].legs.reduce((h,m)=>{var p;return h+(((p=m.duration)==null?void 0:p.value)||0)},0),o=(e.routes[0].legs.length>1?e.routes[0].legs.length-1:0)*a*60,c=s+o,A=e.routes[0].legs.reduce((h,m)=>{var p;return h+(((p=m.distance)==null?void 0:p.value)||0)},0),d=t==="DRIVING"?A/1e3/12*1300:0;return l.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",id:"route-details-for-pdf",children:[l.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),l.jsx("div",{className:"space-y-4",children:e.routes[0].legs.map((h,m)=>{var p,v,x;return l.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h4",{className:"font-bold text-lg",children:["Tramo ",m+1,": ",h.start_address.split(",")[0]," → ",h.end_address.split(",")[0]]}),l.jsxs("div",{className:"text-sm text-gray-600",children:[(p=h.duration)==null?void 0:p.text," • ",(v=h.distance)==null?void 0:v.text]})]}),t==="TRANSIT"&&l.jsx("div",{className:"space-y-3",children:(x=h.steps)==null?void 0:x.map((E,_)=>E.transit&&l.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[l.jsx("span",{className:"text-lg",children:"🚌"}),l.jsx("span",{dangerouslySetInnerHTML:{__html:E.instructions}})]},_))})]},m)})}),l.jsxs("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:[l.jsxs("p",{children:["Tiempo de viaje: ",Math.round(s/60)," min"]}),l.jsxs("p",{children:["Tiempo en paradas: ",Math.round(o/60)," min"]}),l.jsxs("p",{className:"text-lg",children:["Duración Total Estimada: ",Math.round(c/60)," min"]}),l.jsxs("p",{children:["Distancia Total: ",(A/1e3).toFixed(1)," km"]}),t==="DRIVING"&&l.jsxs("p",{className:"text-green-600",children:["Costo Bencina Aprox: $",d.toLocaleString("es-CL",{maximumFractionDigits:0})]})]})]})},nL=async e=>window.google?new Promise(t=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["geometry"]},(n,a)=>{var s;a===window.google.maps.places.PlacesServiceStatus.OK&&((s=n==null?void 0:n.geometry)!=null&&s.location)?t({lat:n.geometry.location.lat(),lng:n.geometry.location.lng()}):t(null)})}):null,c3e=()=>{const[e,t]=Q.useState([]),[r,n]=Q.useState([]),[a,s]=Q.useState("list"),[i,o]=Q.useState(null),[c,A]=Q.useState(!0),[d,h]=Q.useState(null),[m,p]=Q.useState(null),[v,x]=Q.useState(null),[E,_]=Q.useState([]),[B,T]=Q.useState(null),[I,L]=Q.useState(!1),[k,w]=Q.useState("DRIVING"),[y,N]=Q.useState(""),[U,j]=Q.useState([]),F="AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4",{isLoaded:P}=a3e(F);Q.useEffect(()=>{A(!0);const ne=tNe(t),ue=nNe(n),fe=sNe(j);return A(!1),()=>{ne(),ue(),fe()}},[]);const M=async ne=>{window.confirm("¿Está seguro de eliminar esta empresa?")&&await rNe(ne)},ee=(ne,ue)=>{o(fe=>fe?{...fe,[ne]:ue}:null)},W=async ne=>{var ue;if(h(ne),(ue=ne==null?void 0:ne.value)!=null&&ue.place_id&&P){const fe=await nL(ne.value.place_id);ee("direccion",ne.label||""),ee("coordenadas",fe)}else ee("direccion",(ne==null?void 0:ne.label)||"")},te=ne=>{o(JSON.parse(JSON.stringify(ne))),ne.direccion&&h({label:ne.direccion,value:{description:ne.direccion}}),s("form")},G=async ne=>{var ue;if(p(ne),(ue=ne==null?void 0:ne.value)!=null&&ue.place_id&&P){const fe=await nL(ne.value.place_id);x(fe)}},q=ne=>{_(ue=>ue.some(fe=>fe.id===ne.id)?ue.filter(fe=>fe.id!==ne.id):[...ue,ne])},z=()=>{if(!v||E.length===0||!P)return;L(!0);const ne=new window.google.maps.DirectionsService,ue=E.filter(fe=>fe.coordenadas).map(fe=>({location:fe.coordenadas,stopover:!0}));ne.route({origin:v,destination:v,waypoints:ue,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode[k]},(fe,be)=>{L(!1),be===window.google.maps.DirectionsStatus.OK&&fe?T(fe):alert("No se pudo calcular la ruta: "+be)})},Z=()=>{T(null),p(null),x(null),_([]),N("")},R=async()=>{if(!y||!m||!v||E.length===0){alert("Por favor, asigna un nombre a la ruta y asegúrate de tener un punto de partida y empresas seleccionadas.");return}const ne={nombre:y,startPoint:{label:m.label,coords:v},empresas:E.map(ue=>({id:ue.id,nombre:ue.nombre,coordenadas:ue.coordenadas})),travelMode:k};try{await aNe(ne),alert("Ruta guardada con éxito."),s("saved-routes")}catch{alert("Error al guardar la ruta.")}},K=async()=>{const ne=document.getElementById("map-container-for-pdf"),ue=document.getElementById("route-details-for-pdf");if(!ne||!ue)return;const fe=new ur("p","mm","a4"),be=fe.internal.pageSize.getWidth();fe.text(`Ruta de Supervisión: ${y||"Sin nombre"}`,10,15),fe.setFontSize(10),fe.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,10,22);const me=(await Ww(ne,{useCORS:!0})).toDataURL("image/png");fe.addImage(me,"PNG",10,30,be-20,100);const Le=(await Ww(ue)).toDataURL("image/png"),Ye=fe.getImageProperties(Le),Te=Ye.height*(be-20)/Ye.width;fe.addImage(Le,"PNG",10,135,be-20,Te),fe.save(`ruta-${y||"supervision"}.pdf`)},X=ne=>{p({label:ne.startPoint.label,value:null}),x(ne.startPoint.coords),_(ne.empresas),w(ne.travelMode),N(ne.nombre),s("route")},re=async ne=>{window.confirm("¿Estás seguro de que quieres eliminar esta ruta guardada?")&&(await iNe(ne),alert("Ruta eliminada."))};return c?l.jsx("div",{className:"text-center p-8",children:"Cargando..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Gestión de Empresas"}),l.jsxs("div",{className:"flex items-center gap-4",children:[a!=="list"&&l.jsx("button",{onClick:()=>{s("list"),h(null),o(null),Z()},className:"font-semibold hover:text-blue-600",children:"← Volver al listado"}),a==="list"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>s("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),l.jsx("button",{onClick:()=>s("route"),title:"Ruta de Supervisión",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisión"}),l.jsx("button",{onClick:()=>s("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:"🗺️"}),l.jsx("button",{onClick:()=>{o(o3e()),s("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),a==="saved-routes"&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisión Guardadas"}),l.jsx("div",{className:"space-y-3",children:U.length===0?l.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):U.map(ne=>l.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold",children:ne.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:[ne.empresas.length," paradas"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>X(ne),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),l.jsx("button",{onClick:()=>re(ne.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},ne.id))})]}),a==="route"&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisión"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),l.jsx("input",{type:"text",value:y,onChange:ne=>N(ne.target.value),placeholder:"Ej: Supervisión Zona Norte",className:"input-style w-full"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),l.jsx(tL,{apiKey:F,selectProps:{value:m,onChange:G,placeholder:"Buscar dirección de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),l.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[l.jsx("button",{onClick:()=>w("DRIVING"),className:`w-full py-2 rounded-md transition ${k==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automóvil"}),l.jsx("button",{onClick:()=>w("TRANSIT"),className:`w-full py-2 rounded-md transition ${k==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Público"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),l.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:e.filter(ne=>ne.coordenadas).map(ne=>l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:`route-${ne.id}`,checked:E.some(ue=>ue.id===ne.id),onChange:()=>q(ne),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("label",{htmlFor:`route-${ne.id}`,className:"ml-3 text-sm text-gray-700",children:ne.nombre})]},ne.id))})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("button",{onClick:z,disabled:!v||E.length===0||I,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:I?"Calculando...":"Visualizar Ruta"}),l.jsx("button",{onClick:R,disabled:!y||!v||E.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),l.jsx("button",{onClick:K,disabled:!B,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),l.jsx("button",{onClick:Z,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),l.jsx("div",{children:l.jsx(rL,{empresas:E,isLoaded:P,route:B})})]}),B&&l.jsx(l3e,{route:B,travelMode:k})]}),a==="map"&&l.jsx(rL,{empresas:e,isLoaded:P}),a==="list"&&l.jsx("div",{className:"space-y-3",children:e.length===0?l.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):e.map(ne=>{var ue;return l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg",children:ne.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:[ne.rut," | ",ne.direccion]}),l.jsxs("p",{className:"text-sm text-slate-600",children:["Área: ",ne.area||"No especificada"," | Cupos: ",ne.cupos," | Supervisor: ",((ue=ne.docenteSupervisor)==null?void 0:ue.nombreCompleto)||"Ninguno"]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:()=>te(ne),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),l.jsx("button",{onClick:()=>M(ne.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},ne.id)})}),a==="form"&&i&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"id"in i?"Editando Empresa":"Nueva Empresa"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsx("input",{value:i.nombre,onChange:ne=>ee("nombre",ne.target.value),placeholder:"Nombre Empresa",className:"input-style",required:!0}),l.jsx("input",{value:i.rut,onChange:ne=>ee("rut",ne.target.value),placeholder:"RUT Empresa",className:"input-style",required:!0}),l.jsx("div",{className:"md:col-span-2",children:P?l.jsxs("div",{children:[l.jsx(tL,{apiKey:F,selectProps:{value:d,onChange:W,placeholder:"Buscar dirección en Chile...",className:"w-full"},autocompletionRequest:{componentRestrictions:{country:["cl"]}}}),i.coordenadas&&l.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["✓ Coordenadas: ",i.coordenadas.lat.toFixed(4),", ",i.coordenadas.lng.toFixed(4)]})]}):l.jsx("input",{disabled:!0,className:"input-style w-full opacity-50",placeholder:"Cargando Google Places..."})}),l.jsx("input",{value:i.contacto,onChange:ne=>ee("contacto",ne.target.value),placeholder:"Contacto",className:"input-style"}),l.jsx("input",{type:"email",value:i.email||"",onChange:ne=>ee("email",ne.target.value),placeholder:"Correo electrónico (opcional)",className:"input-style"}),l.jsx("input",{type:"number",value:i.cupos,onChange:ne=>ee("cupos",parseInt(ne.target.value)||1),placeholder:"Número de cupos",className:"input-style",min:"1"}),l.jsxs("select",{value:i.area||"",onChange:ne=>ee("area",ne.target.value),className:"input-style w-full",children:[l.jsx("option",{value:"",disabled:!0,children:"Seleccione un área"}),i3e.map(ne=>l.jsx("option",{value:ne,children:ne},ne))]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Docente Supervisor"}),l.jsxs("select",{value:i.docenteSupervisor?JSON.stringify(i.docenteSupervisor):"",onChange:ne=>{const ue=ne.target.value;ee("docenteSupervisor",ue?JSON.parse(ue):void 0)},className:"input-style w-full",children:[l.jsx("option",{value:"",children:"Sin supervisor asignado"}),r.map(ne=>l.jsx("option",{value:JSON.stringify({id:ne.id,nombre:ne.nombreCompleto}),children:ne.nombreCompleto},ne.id))]})]})]})]})]})},u3e=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},A3e=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:s,refreshUnreadCount:i})=>{const o=e.profile,c=Q.useMemo(()=>{const _=kJ[o];return o!==Gt.ESTUDIANTE?_:_.filter(B=>{if(B.name==="Asistencia a Empresa"){const T=u3e(e.curso||"");return T.startsWith("3º")||T.startsWith("4º")}return!0})},[o,e.curso]),[A,d]=Q.useState(null),[h,m]=Q.useState(!1);Q.useEffect(()=>{c&&c.length>0?d(c[0]):d(null)},[o,c]);const p=Q.useCallback(_=>{d(_),window.innerWidth<768&&m(!1)},[]),v=Q.useCallback(_=>{const B=c.find(T=>T.name===_);B&&p(B)},[c,p]),x=()=>l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-slate-700 px-4 flex-shrink-0",children:[l.jsx(fJ,{}),l.jsx("span",{className:"ml-3 text-white font-bold text-xl whitespace-nowrap",children:"Gestión LIR"})]}),l.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto sidebar-scroll",children:c.map(_=>l.jsxs("button",{onClick:()=>p(_),className:`w-full flex items-center py-3 px-4 rounded-lg transition-colors duration-200 text-left ${(A==null?void 0:A.name)===_.name?"bg-slate-900 text-amber-400 font-semibold":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[_.icon,l.jsx("span",{className:"ml-4",children:_.name})]},_.name))})]}),E=()=>{if(!A)return l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex items-center justify-center",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl",children:"Seleccione un módulo del menú para comenzar."})});if(A.name==="Calendario Académico")return l.jsx(fee,{profile:o});if(A.name==="Muro de Anuncios")return l.jsx(xee,{currentUser:e});if(A.name==="Mensajería Interna")return l.jsx(nge,{currentUser:e,refreshUnreadCount:i});if(A.name==="Generador de Actas")return l.jsx(See,{});if(o===Gt.SUBDIRECCION){if(A.name==="Dashboard")return l.jsx(aZ,{currentUser:e});if(A.name==="Administración")return l.jsx(Xhe,{});if(A.name==="Seguimiento Curricular")return l.jsx($Se,{currentUser:e});if(A.name==="Acompañamiento docente")return l.jsx(Wpe,{currentUser:e});if(A.name==="Análisis Taxonómico")return l.jsx(d8,{currentUser:e});if(A.name==="Interdisciplinario")return l.jsx(rR,{});if(A.name==="Registro de inasistencias y reemplazos docentes")return l.jsx(ZJ,{currentUser:e});if(A.name==="Crear horarios")return l.jsx(QZ,{});if(A.name==="Seguimiento de acciones pedagógicas")return l.jsx(KZ,{});if(A.name==="Inclusión")return l.jsx(qj,{currentUser:e})}if(o===Gt.PROFESORADO){if(A.name==="Planificación")return l.jsx(see,{currentUser:e});if(A.name==="Mis Acompañamientos")return l.jsx(ESe,{currentUser:e});if(A.name==="Recursos de Aprendizaje")return l.jsx(cSe,{});if(A.name==="Análisis Taxonómico")return l.jsx(d8,{currentUser:e});if(A.name==="Interdisciplinario")return l.jsx(rR,{});if(A.name==="Inclusión")return l.jsx(qj,{currentUser:e});if(A.name==="Actividades Remotas")return l.jsx(p0e,{});if(A.name==="Evaluación de Aprendizajes")return l.jsx(Nre,{});if(A.name==="Evaluaciones Formativas")return l.jsx(sme,{currentUser:e})}if(o===Gt.COORDINACION_TP){if(A.name==="Seguimiento Dual")return l.jsx(i0e,{});if(A.name==="Asistencia Dual")return l.jsx(V0e,{});if(A.name==="Pañol")return l.jsx(G2e,{});if(A.name==="Gestión de Empresas")return l.jsx(c3e,{})}if(o===Gt.ESTUDIANTE){if(A.name==="Auto-aprendizaje")return l.jsx(w0e,{currentUser:e});if(A.name==="Evaluación Formativa")return l.jsx(pSe,{currentUser:e});if(A.name==="Tareas Interdisciplinarias")return l.jsx(wSe,{currentUser:e});if(A.name==="Asistencia a Empresa")return l.jsx(R0e,{currentUser:e})}return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:A.name}),l.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:l.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",l.jsx("span",{className:"font-semibold",children:A.name}),"."]})})]})};return l.jsxs("div",{className:"h-screen flex flex-col bg-slate-100",children:[l.jsx(OJ,{currentUser:e,onLogout:t,onNavigate:v,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>m(!h),unreadMessagesCount:s,refreshUnreadCount:i}),l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[h&&l.jsx("div",{onClick:()=>m(!1),className:"fixed inset-0 bg-black opacity-50 z-20 md:hidden"}),l.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 w-72 bg-slate-800 text-white flex flex-col transform md:translate-x-0 ${h?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:l.jsx(x,{})}),l.jsx("main",{className:"flex-1 overflow-y-auto",children:l.jsx("div",{className:"p-6 md:p-8",children:E()})})]})]})},d3e=({onSelectProfile:e,isAdminView:t=!1})=>l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(GN,{})}),l.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:BJ.map(r=>l.jsxs("button",{onClick:()=>e(r.id),className:"group bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md hover:shadow-xl hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-amber-400 focus:ring-opacity-50 transition-all duration-300 ease-in-out flex flex-col items-center justify-center text-center",children:[l.jsx("div",{className:"text-slate-700 dark:text-slate-300 group-hover:text-amber-400 transition-colors duration-300",children:r.icon}),l.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-800 dark:text-slate-200",children:r.label})]},r.id))}),l.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),f3e=()=>{const[e,t]=Q.useState(null),[r,n]=Q.useState(null),[a,s]=Q.useState(!0),[i,o]=Q.useState(null),[c,A]=Q.useState(!1),[d,h]=Q.useState(null);Q.useEffect(()=>{const B=PL(L1,async T=>{if(t(T),T)try{const I=await kU(T.email);I?(n(I),I.profile===Gt.SUBDIRECCION&&A(!0)):(o("Usuario no encontrado en la base de datos. Contacte al administrador."),await c5())}catch{o("Error al conectar con la base de datos."),await c5()}else n(null),h(null),A(!1),o(null);s(!1)});return()=>B()},[]);const m=async(B,T)=>{if(o(null),!B.trim()||!T.trim()){o("Por favor ingrese email y contraseña");return}try{await uJ(B.trim(),T)}catch(I){switch(I.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":o("Error de conexión. Verifique su internet.");break;default:o("Ocurrió un error al intentar iniciar sesión.")}}},p=async B=>{try{await AJ(B)}catch(T){console.error("Error al enviar email de recuperación:",T)}},v=B=>{h(B),A(!1)},x=()=>{A(!0),h(null)},E=async()=>{try{await c5()}catch(B){console.error("Error al cerrar sesión:",B)}};if(a)return l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(GN,{})}),l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!e||!r)return l.jsx(jJ,{onLoginAttempt:m,onForgotPasswordRequest:p,error:i});if(c&&r.profile===Gt.SUBDIRECCION)return l.jsx(d3e,{onSelectProfile:v,isAdminView:!0});const _=d||r.profile;return l.jsx(A3e,{currentUser:{...r,profile:_},onLogout:E,onChangeProfile:r.profile===Gt.SUBDIRECCION?x:void 0,canChangeProfile:r.profile===Gt.SUBDIRECCION})},MV=document.getElementById("root");if(!MV)throw new Error("Could not find root element to mount to");const h3e=Zz.createRoot(MV);h3e.render(l.jsx(mt.StrictMode,{children:l.jsx(f3e,{})}));export{Yn as _,m3e as c,fy as g};
